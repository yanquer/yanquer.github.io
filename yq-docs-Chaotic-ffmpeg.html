
<!DOCTYPE HTML>
<!--
	Dopetrope 2.0 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html data-theme="dark">
	<head>
			<title>书言</title>
			<meta http-equiv="content-type" content="text/html; charset=utf-8" />
			<meta charset="utf-8" />
			<link rel="icon" href="/favicon.ico" type="image/x-icon">

			<!-- <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,300italic" rel="stylesheet" /> -->
			<link rel="stylesheet" href="/theme//css/custom-pygment.css" />
			<noscript>
				<link rel="stylesheet" href="/theme//css/skel-noscript.css" />
				<link rel="stylesheet" href="/theme//css/style.css" />
				<link rel="stylesheet" href="/theme//css/style-desktop.css" />
			</noscript>

		<!-- tipuesearch 放在这, 因为搜索框是全局定义的 -->
		<link rel="stylesheet" href="/theme//Tipue-Search-5.0.0/tipuesearch.css" />
		<link rel="stylesheet" href="/theme//Tipue-Search-5.0.0/custom/tipuesearch-custom.css" />
		<link rel="stylesheet" href="/theme//css/alabaster.css" />
		<link rel="stylesheet" href="/theme//css/custom-alabaster.css" />
		<!-- <link rel="stylesheet" href="/theme/fontawesome-free-6.5.1-web/css/all.min.css" /> -->
		<!--  <link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-brands-400.woff2" />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-regular-400.woff2" />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-solid-900.woff2" />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-v4compatibility.woff2" /> -->


	</head>
	<body class="no-sidebar">

		<!-- 内容 -->
		<div>

			<!-- Header Wrapper -->
			<div id="header-wrapper">
				<div class="container">
					<div class="row">
						<div class="12u">

							<!-- Header -->
								<section id="header">

									<!-- Logo -->
									<div class="page-home">
										<h1><a href="/">HOME</a></h1>
									</div>

									<!-- Nav -->
									<div class="page-menu">
										<nav id="nav">
											<ul>

												<!-- categories -->
														<li ><a href="/category/ai.html">AI</a></li>
														<li ><a href="/category/ai-yolo.html">AI, yolo</a></li>
														<li ><a href="/category/an-quan.html">安全</a></li>
														<li ><a href="/category/ban-ben-kong-zhi.html">版本控制</a></li>
														<li ><a href="/category/cao-zuo-xi-tong.html">操作系统</a></li>
														<li ><a href="/category/chang-yong-gong-ju-shi-yong.html">常用工具使用</a></li>
														<li><a href="/categories.html">More...</a></li>
											</ul>
										</nav>
									</div>
								</section>

						</div>
					</div>
					<div class="row page-head-search">
						<form class="navbar-search" action="/search.html" role="search">
							<!-- <button class="fa-solid fa-magnifying-glass" type="submit"></button> -->
							<button type="submit"></button>
							<input type="text" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
							<!-- <i class="fa-solid fa-magnifying-glass"></i> -->
						</form>
					</div>
  <div class="row page-head page-article persistent">
    <div class="page-head-title">
      <h2>ffmpeg介绍</h2>
    </div>
    <div class="page-head-content">
      By
	  <a href="author/yanque.html">YanQue</a>
      , 20 February 2023
      , Category:
	  <a href="category/za-luan-wu-zhang.html">杂乱无章</a>
    </div>
	<div class="red-line">
    </div>
  </div>
				</div>

				<!-- 头部下方动效 -->
				<div class="waves-area">
					<section class="main-hero-waves-area waves-area">
						<svg class="waves-svg" preserveAspectRatio="none" shape-rendering="auto" viewBox="0 24 150 28"
							 xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
							<defs>
								<path
										d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"
										id="gentle-wave"></path>
							</defs>
							<g class="parallax">
								<use href="#gentle-wave" x="48" y="0"></use>
								<use href="#gentle-wave" x="48" y="3"></use>
								<use href="#gentle-wave" x="48" y="5"></use>
								<use href="#gentle-wave" x="48" y="7"></use>
							</g>
						</svg>
					</section>
				</div>

			</div>

		<!-- Main Wrapper -->
			<div id="main-wrapper">
				<div class="container">
<div class="row">
	<div class="12u">
			<section>
				<div>
					<div class="row">
						<div class="12u skel-cell-mainContent">
							<!-- Content -->
								<article class="box is-post">
									<div class="box-head">
										<div class="post-infos">
											<ul class="tags">
												<li><a class="button" href="category/za-luan-wu-zhang.html">杂乱无章</a></li>
											</ul>
										</div>

										<div class="pennant pennant-alt date">2023-02-20</div>
										<h2>ffmpeg介绍</h2>

										<span class="head-modify-time">修改于: 2023-02-20</span>

									</div>
									<dl class="docutils">
<dt>相关资源</dt>
<dd><ul class="first last simple">
<li>Python下有个三方库, 可见: <a class="reference external" href="/yq-docs-rear-end-python-python-three--party-library-ffmpeg.html">ffmpeg</a></li>
</ul>
</dd>
<dt>参考:</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="https://zhuanlan.zhihu.com/p/117523405">https://zhuanlan.zhihu.com/p/117523405</a></li>
<li><a class="reference external" href="https://cloud.tencent.com/developer/article/1773248">https://cloud.tencent.com/developer/article/1773248</a></li>
<li><a class="reference external" href="https://sspai.com/post/76637#!%23">如何满足小众的录屏需求？自己配置 FFmpeg 解决问题</a></li>
<li><a class="reference external" href="https://www.cnblogs.com/1175429393wljblog/p/15165295.html">使用FFmpeg进行屏幕录像和录音（Windows，Linux，macOS）</a></li>
<li><a class="reference external" href="https://blog.csdn.net/qqqq245425070/article/details/84038620">mac ffmpeg 中的录制命令和分解与复用命令</a></li>
</ul>
</dd>
</dl>
<div class="section" id="section-1">
<h2>前言</h2>
<p>FFmpeg是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源计算机程序。可以轻易地实现多种视频格式之间的相互转换。</p>
<p>名称来自于MPEG视频编码标准, FF代表 “fast forawrd”.</p>
<div class="topic">
<p class="topic-title">包含以下部分</p>
<ul class="simple">
<li>libavformat：用于各种音视频封装格式的生成和解析，包括获取解码所需信息以生成解码上下文结构和读取音视频帧等功能，包含demuxers和muxer库。</li>
<li>libavcodec：用于各种类型声音/图像编解码。</li>
<li>libavutil：包含一些公共的工具函数。</li>
<li>libswscale：用于视频场景比例缩放、色彩映射转换。</li>
<li>libpostproc：用于后期效果处理。</li>
<li>ffmpeg：是一个命令行工具，用来对视频文件转换格式，也支持对电视卡实时编码。</li>
<li>ffsever：是一个HTTP多媒体实时广播流服务器，支持时光平移。</li>
<li>ffplay：是一个简单的播放器，使用ffmpeg 库解析和解码，通过SDL显示。</li>
<li>ffprobe：收集多媒体文件或流的信息，并以人和机器可读的方式输出。</li>
</ul>
</div>
</div>
<div class="section" id="section-2">
<h2>基本概念</h2>
<div class="section" id="container-stream">
<h3>容器(Container)与流(Stream)</h3>
<div class="figure align-center">
<img alt="as you see" src="doc-raw/resources/images/2023-01-30-17-21-31.jpg" style="width: 480px;" />
<p class="caption">容器包含流与文件头</p>
</div>
<div class="section" id="conainer-file">
<h4>容器/文件(Conainer/File)</h4>
<p>即视频格式, 特定格式的多媒体文件，比如mp4、flv、mkv等</p>
</div>
<div class="section" id="stream">
<h4>媒体流(Stream)</h4>
<p>一种视频信息传输格式, 有5种: 音频、视频、字幕、附件、数据.</p>
<p>表示时间轴上的一段连续数据，如一段声音数据、一段视频数据或一段字幕数据，可以是压缩的，也可以是非压缩的，压缩的数据需要关联特定的编解码器。</p>
</div>
</div>
<div class="section" id="frame-packet">
<h3>数据帧/数据包(Frame/Packet)</h3>
<p>帧代表一幅静止的图像，分为I帧，P帧，B帧。</p>
<p>通常，一个媒体流是由大量的数据帧组成的，对于压缩数据，帧对应着编解码器的最小处理单元，分属于不同媒体流的数据帧交错存储于容器之中。</p>
<p>一般情况下：</p>
<p>Frame对应压缩前的数据，Packet对应压缩后的数据。</p>
</div>
<div class="section" id="codec">
<h3>编解码器(Codec)</h3>
<p>以帧为单位实现压缩数据和原始数据之间的相互转换, 对视频进行压缩或者解压缩，CODEC = COde（编码） +DECode（解码）。</p>
</div>
<div class="section" id="mux-demux">
<h3>复用/解复用(mux/demux)</h3>
<p>把不同的流按照某种容器的规则放入容器，这种行为叫做复用（mux）。</p>
<p>把不同的流从某种容器中解析出来，这种行为叫做解复用(demux)。</p>
</div>
<div class="section" id="section-3">
<h3>帧率</h3>
<p>帧率也叫帧频率，帧率是视频文件中每一秒的帧数，肉眼想看到连续移动图像至少需要15帧。</p>
</div>
<div class="section" id="section-4">
<h3>码率</h3>
<p>比特率(也叫码率，数据率)是一个确定整体视频/音频质量的参数，秒为单位处理的字节数，码率和视频质量成正比，在视频文件中中比特率用bps来表达。</p>
</div>
</div>
<div class="section" id="section-5">
<h2>安装</h2>
<p>macOS</p>
<div class="highlight"><pre><span></span>brew<span class="w"> </span>install<span class="w"> </span>ffmpeg<span class="w"> </span>--with-libass
</pre></div>
</div>
<div class="section" id="section-6">
<h2>命令行使用</h2>
<p>参数支持</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-y</span></kbd></td>
<td>若输出文件已存在, 直接覆盖</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>-fs</dt>
<dd>超过指定的文件大小时则结束转换</dd>
<dt>-ss</dt>
<dd>从指定时间开始转换</dd>
</dl>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-t</span></kbd></td>
<td>从 <cite>-ss</cite> 开始转换的时间</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>-title</dt>
<dd>设置标题。</dd>
<dt>-timestamp</dt>
<dd>设置时间戳。</dd>
<dt>-vsync</dt>
<dd>增减Frame使影音同步。</dd>
<dt>-f 输入源</dt>
<dd><p class="first">指定输入源. 录制屏幕的时候需要用到</p>
<p>不同平台支持不同</p>
<ul class="simple">
<li>macOS是 <tt class="docutils literal"><span class="pre">-f</span> avfoundation</tt></li>
<li>Windows是 <tt class="docutils literal"><span class="pre">-f</span> dshow</tt></li>
<li>Linux是 <tt class="docutils literal"><span class="pre">-f</span> x11grab</tt></li>
</ul>
<p class="last">另外还有 <tt class="docutils literal"><span class="pre">-f</span> gdigrab</tt> 使用 <cite>FFmpeg</cite> 内置屏幕录制命令 <cite>gdigrab</cite></p>
</dd>
<dt>-draw_mouse 1</dt>
<dd>在 <cite>gdigrab</cite> 录制的视频中显示鼠标。</dd>
<dt>-i 输入设备</dt>
<dd><p class="first">指定输入设备,  格式 <tt class="docutils literal"><span class="pre">-i</span> 视频设备:音频设备</tt>, 可以只指定一个.</p>
<p>可以使用 <tt class="docutils literal"><span class="pre">-i</span> desktop</tt> 指定名称为 <tt class="docutils literal">desktop</tt> 的屏幕录制整个屏幕</p>
<p>还支持指定多个输入):</p>
<pre class="last literal-block">
# windows下
ffmpeg -f dshow -i audio=&quot;Analogue 1/2 (Audient iD4)&quot; -f dshow -i video=&quot;V380 FHD Camera&quot; output.mp4
</pre>
</dd>
<dt>-framerate 帧率</dt>
<dd>指定帧率, 比如 <tt class="docutils literal"><span class="pre">-framerate</span> 60</tt></dd>
<dt>-c:v 视频编码器</dt>
<dd>指定视频编码器,  如 <tt class="docutils literal"><span class="pre">-c:v</span> libx264</tt>, 一般可不填使用默认配置</dd>
<dt>-c:a 音频编码</dt>
<dd>指定音频编码器,  如 <tt class="docutils literal"><span class="pre">-c:a</span> aac</tt>, 一般可不填使用默认配置</dd>
<dt>-pix_fmt 像素格式</dt>
<dd>指定像素格式, 比如 <tt class="docutils literal"><span class="pre">-pix_fmt</span> yuv420p</tt></dd>
<dt>-preset 编码质量</dt>
<dd>指定编码质量, 比如 <tt class="docutils literal"><span class="pre">-preset</span> 0</tt></dd>
<dt>-crf 码率</dt>
<dd>指定码率, 比如 <tt class="docutils literal"><span class="pre">-crf</span> 19</tt></dd>
<dt>-qp 编码模式</dt>
<dd>指定编码模式, 比如 <tt class="docutils literal"><span class="pre">-qp</span> 0</tt> 是x264无损编码模式</dd>
<dt>-preset ultrafast</dt>
<dd>快速编码，编码速度最快，但质量最差。</dd>
<dt>-pixel_format 视频像素格式</dt>
<dd>视频像素格式</dd>
<dt>-video_size 大小</dt>
<dd>指定大小如 <tt class="docutils literal"><span class="pre">-video_size</span> 2560x1440</tt></dd>
</dl>
<p>指定区域:</p>
<pre class="literal-block">
-offset_x 0 -offset_y 0 -video_size 2560x1440

# 与 -filter:v crop=948:460:886:75 效果一致 ?
</pre>
<div class="section" id="section-7">
<h3>视频参数</h3>
<dl class="docutils">
<dt>-b:v 视频码率</dt>
<dd><p class="first">设置视频流量(码率)，默认为200Kbit/秒</p>
<p>根据使用的ffmpeg版本，须注意单位会有 <cite>kbits/sec</cite> 与 <cite>bits/sec</cite> 的不同。（可用 <cite>ffmpeg -h</cite> 显示说明来确认单位。）.</p>
<p>例如，</p>
<ul class="last simple">
<li>单位为 <cite>bits/sec</cite> 的情况时，欲指定流量 <cite>64kbps</cite> 时 需输入 <cite>-b:a 64k</cite> ；</li>
<li>单位为 <cite>kbits/sec</cite> 的情况时则需输入 <cite>-b:a 64</cite> 。</li>
</ul>
</dd>
<dt>-r 帧率</dt>
<dd><p class="first">设置帧率值，默认为25, 比如 <tt class="docutils literal"><span class="pre">-r</span> 60</tt>.</p>
<p class="last">ffmpeg官方文档说 <cite>-r</cite> 与 <cite>-framerate</cite> 作用相同，但实际测试时发现不同。 <cite>-framerate</cite> 用于限制输入，而 <cite>-r</cite> 用于限制输出。</p>
</dd>
<dt>-s 视频分辨率</dt>
<dd>指定视频分辨率, 即画面的宽与高。比如 <tt class="docutils literal"><span class="pre">-s</span> 1280x720</tt>,</dd>
</dl>
<!-- 用 `scale` 方法，设置视频分辨率为 720p。 -->
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-a<var>spect</var></span></kbd></td>
<td>设置画面的比例。</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>-v 视频</dt>
<dd><p class="first">比如 <tt class="docutils literal"><span class="pre">-vn</span></tt> 就是无视频的意思</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-v<var>n</var></span></kbd></td>
<td>不处理视频，于仅针对声音做处理时使用。</td></tr>
</tbody>
</table>
<dl class="last docutils">
<dt>-vcodec 视频编码器</dt>
<dd><p class="first">视频编码器, 比如 <tt class="docutils literal">vcodec copy</tt> 指明只拷贝，不做编解码</p>
<!-- -vcodec( -c:v ) 设置视频视频编解码器 -->
<p>未设置时则使用与输入文件相同之编解码器。</p>
<p class="last"><cite>-acodec</cite> 及 <cite>-vcodec</cite> 所指定的编解码器名称，
会根据使用的ffmpeg版本而有所不同。
例如使用AAC编解码器时，会有输入 <cite>aac</cite> 与 <cite>libfaac</cite> 的情况。
此外，编解码器有分为仅供解码时使用与仅供编码时使用，因此一定要利用 <tt class="docutils literal">ffmpeg <span class="pre">-formats</span></tt> 确认输入的编解码器是否能运作。</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="section-8">
<h3>声音参数</h3>
<dl class="docutils">
<dt>-b:a 音频码率</dt>
<dd><p class="first">指定音频码率,  设置每Channel（最近的SVN版为所有Channel的总合）的流量.
比如 <tt class="docutils literal"><span class="pre">-b:a</span> 192k</tt></p>
<p class="last">根据使用的ffmpeg版本，须注意单位会有 <cite>kbits/sec</cite> 与 <cite>bits/sec</cite> 的不同。（可用 <cite>ffmpeg -h</cite> 显示说明来确认单位。）</p>
</dd>
</dl>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-a<var>r</var></span></kbd></td>
<td>设置采样率。</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>-a 音频</dt>
<dd><p class="first">无音频使用 <cite>-an</cite></p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-a<var>c</var></span></kbd></td>
<td>设置声音的Channel数。</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-a<var>n</var></span></kbd></td>
<td>无音频, 不处理声音，于仅针对视频做处理时使用</td></tr>
</tbody>
</table>
<dl class="last docutils">
<dt>-acodec 音频编码器</dt>
<dd><p class="first">音频编码器, 比如 <tt class="docutils literal"><span class="pre">-acodec</span> copy</tt> 指明只拷贝，不做编解码</p>
<p><cite>-acodec ( -c:a )</cite> ——设置声音编解码器，未设置时与视频相同，使用与输入文件相同之编解码器。</p>
<p class="last"><cite>-acodec</cite> 及 <cite>-vcodec</cite> 所指定的编解码器名称，
会根据使用的ffmpeg版本而有所不同。
例如使用AAC编解码器时，会有输入 <cite>aac</cite> 与 <cite>libfaac</cite> 的情况。
此外，编解码器有分为仅供解码时使用与仅供编码时使用，因此一定要利用 <tt class="docutils literal">ffmpeg <span class="pre">-formats</span></tt> 确认输入的编解码器是否能运作。</p>
</dd>
</dl>
</dd>
</dl>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-v<var>ol</var></span></kbd></td>
<td>设置音量大小，256为标准音量。（要设置成两倍音量时则输入512，依此类推。）</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="section-9">
<h2>使用技巧</h2>
<div class="section" id="section-10">
<h3>屏幕录制</h3>
<p>参考: <a class="reference external" href="https://www.jianshu.com/p/8a242e60f464">在macOS下使用ffmpeg录屏</a></p>
<p>注意需要先选取设备, 使用以下指令查看支持设备</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-f<span class="w"> </span>avfoundation<span class="w"> </span>-list_devices<span class="w"> </span><span class="nb">true</span><span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;&quot;</span>
</pre></div>
<p>看下方的设备源， <cite>AVFoundation video devices</cite> 下是视频设备源头，
分别是摄像头和屏幕捕捉。 <cite>AVFoundation audio devices</cite> 下是音频设备源</p>
<p>录制</p>
<div class="highlight"><pre><span></span><span class="c1"># ffmpeg -f avfoundation -i &quot;0:0&quot; -y -vframes 1 bg-win1.png</span>
<span class="c1"># -i 1:0</span>
<span class="c1">#   分别表示, 视频设备为 设备1</span>
<span class="c1">#             音频设备为 设备0</span>
ffmpeg<span class="w"> </span>-y<span class="w"> </span>-f<span class="w"> </span>avfoundation<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span>:0<span class="w"> </span>-framerate<span class="w"> </span><span class="m">60</span><span class="w"> </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-r<span class="w"> </span><span class="m">60</span><span class="w"> </span>-pix_fmt<span class="w"> </span>yuv420p<span class="w"> </span>-preset<span class="w"> </span><span class="m">0</span><span class="w"> </span>-crf<span class="w"> </span><span class="m">19</span><span class="w"> </span>-c:a<span class="w"> </span>aac<span class="w"> </span>-b:a<span class="w"> </span>192k<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/Screen Record </span><span class="k">$(</span>date<span class="w"> </span><span class="s2">&quot;+%Y-%m-%d %H-%M-%S&quot;</span><span class="k">)</span><span class="s2">.mp4&quot;</span>
</pre></div>
</div>
<div class="section" id="section-11">
<h3>图片/视频裁剪</h3>
<p>参考: <a class="reference external" href="https://cloud.tencent.com/developer/article/2417219">【FFmpeg】Filter 过滤器 ② ( 裁剪过滤器 Crop Filter | 裁剪过滤器语法 | 裁剪过滤器内置变量 | 裁剪过滤器常用用法 )</a></p>
<p>使用 <cite>filter:crop</cite>,</p>
<p>语法:</p>
<pre class="literal-block">
crop=ow[:oh[:x[:y[:keep_aspect]]]]
</pre>
<dl class="docutils">
<dt>ow</dt>
<dd>裁剪后 输出宽度 , 该选项必须指定 ;</dd>
<dt>oh</dt>
<dd>裁剪后 输出高度 , 该选项可选 , 如果不指定 , 默认使用 输入高度 ;</dd>
<dt>x</dt>
<dd>裁剪区域 左上角 x 坐标 , 该选项可选 , 如果不指定 , 默认值为 (iw - ow)/2 , 默认裁剪中心区域 ;</dd>
<dt>y</dt>
<dd>裁剪区域 左上角 y 坐标 , 该选项可选 , 如果不指定 , 默认值为 (ih - oh)/2 , 默认裁剪中心区域 ;</dd>
<dt>keep_aspect</dt>
<dd>保持宽高比标志 , 该选项可选 , 如果设置为 1，则强制输出图像的宽高比与输入相同 ;</dd>
</dl>
<p>比如 <tt class="docutils literal">ffmpeg <span class="pre">-i</span> <span class="pre">bg-win1.png</span> <span class="pre">-y</span> <span class="pre">-filter:v</span> crop=948:460:886:75 <span class="pre">bg-win.png</span></tt> 中的
<tt class="docutils literal"><span class="pre">-filter:v</span> crop=948:460:886:75</tt></p>
<p>参数依次为</p>
<ul class="simple">
<li>宽度: 948</li>
<li>高度: 460</li>
<li>左上角x坐标: 886</li>
<li>左上角y坐标: 75</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>如果遇到指定的参数与实际效果不一致的问题, 可能是由于显示器的分辨率问题, 需要额外手动处理</p>
<p class="last">比如手动计算一下实际应该使用的物理分辨率, 或者看看能不能让 <cite>ffmpeg</cite> 使用 <cite>css分辨率</cite></p>
</div>
</div>
<div class="section" id="section-12">
<h3>将图片转换为圆角</h3>
<p>macOS下将图片转换为圆角</p>
<div class="highlight"><pre><span></span><span class="c1"># ffmpeg -i input_image.png -vf &quot;drawbox=x=(w-tw)/2:y=(h-th)/2:tw=min(tw,th):th=min(tw,th):t=max(1,(tw+th)/200):c=none,format=rgba,blend=all_mode=multiply:all_opacity=0.5&quot; output_image.png</span>
<span class="c1"># ffmpeg -i input_image.png -vf &quot;scale=200:200,crop=200:200:0:0,format=rgba,drawbox=x=0:y=0:w=200:h=200:color=black@0.5,vida45=200:200:100:100&quot; output_image.png</span>

<span class="c1"># ffmpeg -i sf.png -vf &quot;scale=min(iw,ih):min(iw,ih),crop=min(iw,ih):min(iw,ih):((iw-min(iw,ih))/2):((ih-min(iw,ih))/2),format=rgba,DrawBox=enable=&#39;between(pmin_get_w,1,99999)&#39;:color=black@0.5:t=max(1,(pmin_get_w+pmin_get_h)/200):x=(w-tw)/2:y=(h-th)/2:w=min(tw,th):h=min(tw,th),vida45=min(tw,th):min(tw,th):(min(tw,th)/2):(min(tw,th)/2)&quot; sfr.png</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>sf.png<span class="w"> </span>-vf<span class="w"> </span><span class="s2">&quot;scale=min(iw,ih):min(iw,ih),crop=min(iw,ih):min(iw,ih):((iw-min(iw,ih))/2):((ih-min(iw,ih))/2),format=rgba,drawbox=x=(w-min(iw,ih))/2:y=(h-min(iw,ih))/2:w=min(iw,ih):h=min(iw,ih):color=black@0.5,vida45=min(iw,ih):min(iw,ih):min(iw,ih)/2:min(iw,ih)/2&quot;</span><span class="w"> </span>sfr.png
ffmpeg<span class="w"> </span>-i<span class="w"> </span>sf.png<span class="w"> </span>-vf<span class="w"> </span><span class="s2">&quot;scale=min(iw,ih):min(iw,ih),crop=min(iw,ih):min(iw,ih):max((iw-min(iw,ih))/2,0):max((ih-min(iw,ih))/2,0),format=rgba,drawbox=x=(w-min(iw,ih))/2:y=(h-min(iw,ih))/2:w=min(iw,ih):h=min(iw,ih):color=black@0.5,vida45=min(iw,ih):min(iw,ih):min(iw,ih)/2:min(iw,ih)/2&quot;</span><span class="w"> </span>sfr.png
ffmpeg<span class="w"> </span>-i<span class="w"> </span>sf.png<span class="w"> </span>-vf<span class="w"> </span><span class="s2">&quot;crop=iw:ih,crop=iw-100:ih-100,pad=iw:ih:50:50:white,roundcrop=iw:ih:50&quot;</span><span class="w"> </span>sfr.png

ffmpeg<span class="w"> </span>-i<span class="w"> </span>sf.png<span class="w"> </span>-i<span class="w"> </span>second.mp4<span class="w"> </span>-filter_complex<span class="w"> </span><span class="nv">xfade</span><span class="o">=</span><span class="nv">transition</span><span class="o">=</span>circlecrop<span class="w"> </span>sfr.png
</pre></div>
<p>这个命令的主要步骤如下:</p>
<pre class="literal-block">
scale=min(iw,ih):min(iw,ih):
  将图片缩放到宽高最小值相等的正方形。
crop=min(iw,ih):min(iw,ih):((iw-min(iw,ih))/2):((ih-min(iw,ih))/2):
  将图片居中裁剪为正方形。
format=rgba:
  输出格式设置为 RGBA 以支持透明通道。
DrawBox=enable='between(pmin_get_w,1,99999)':color=black&#64;0.5:t=max(1,(pmin_get_w+pmin_get_h)/200):x=(w-tw)/2:y=(h-th)/2:w=min(tw,th):h=min(tw,th):
  绘制一个黑色半透明的正方形边框,大小与裁剪后的图片大小相同。
vida45=min(tw,th):min(tw,th):(min(tw,th)/2):(min(tw,th)/2):
  使用 vida45 滤镜在边框上创建圆角效果。
</pre>
<!-- 解释一下各个参数的含义: -->
<!-- -i input_image.png 指定输入图片 -->
<!-- -vf 指定视频过滤器 -->
<!-- drawbox 绘制一个方框,用于裁剪图片 -->
<!-- x=(w-tw)/2:y=(h-th)/2 计算方框的位置,使其居中 -->
<!-- tw=min(tw,th):th=min(tw,th) 计算方框的大小,取图片宽高的最小值 -->
<!-- t=max(1,(tw+th)/200) 计算方框的边框宽度 -->
<!-- c=none 设置方框为透明 -->
<!-- format=rgba 指定输出格式为 RGBA -->
<!-- blend=all_mode=multiply:all_opacity=0.5 设置透明度为 50% -->
</div>
<div class="section" id="mp4gif">
<h3>将mp4转换为gif</h3>
<p>参考: <a class="reference external" href="https://blog.csdn.net/xindoo/article/details/127603896">用ffmpeg将视频转成gif动图</a></p>
<p>指令</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>xxx.mp4<span class="w"> </span>xxx.gif

<span class="c1"># 指定从 73.5 开始截取 12 秒生成gif</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-ss<span class="w"> </span><span class="m">73</span>.5<span class="w"> </span>-t<span class="w"> </span><span class="m">12</span><span class="w"> </span>out.gif
<span class="c1"># 支持以时间格式:   时:分:秒.毫秒</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-ss<span class="w"> </span><span class="m">00</span>:01:13.500<span class="w"> </span>-t<span class="w"> </span><span class="m">12</span><span class="w"> </span>out.gif
<span class="c1"># 加 -r 15 指定帧率为15, 注意 -r 一定要在 -i 后面</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-ss<span class="w"> </span><span class="m">00</span>:01:13.500<span class="w"> </span>-t<span class="w"> </span><span class="m">12</span><span class="w"> </span>-r<span class="w"> </span><span class="m">15</span><span class="w"> </span>out.gif
<span class="c1"># 加 -s 480x272 指定分辨率为 480x272</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-ss<span class="w"> </span><span class="m">00</span>:01:13.500<span class="w"> </span>-t<span class="w"> </span><span class="m">12</span><span class="w"> </span>-r<span class="w"> </span><span class="m">15</span><span class="w"> </span>-s<span class="w"> </span>480x272<span class="w"> </span>out.gif
<span class="c1"># 或者使用 -vf &quot;scale=宽:高&quot; 自动计算高度, 适用于不知道原始分辨率情况</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-ss<span class="w"> </span><span class="m">00</span>:01:13.500<span class="w"> </span>-t<span class="w"> </span><span class="m">12</span><span class="w"> </span>-r<span class="w"> </span><span class="m">15</span><span class="w"> </span>-vf<span class="w"> </span><span class="s2">&quot;scale=480:-1&quot;</span><span class="w"> </span>out.gif


<span class="c1"># 默认转化是中等质量模式，若要转化出高质量的 gif，可以修改比特率</span>
ffmpeg<span class="w"> </span>-i<span class="w"> </span>small.mp4<span class="w"> </span>-b<span class="w"> </span>2048k<span class="w"> </span>small.gif
</pre></div>
<p>优化𥖨点与大小</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mp4<span class="w"> </span>-vf<span class="w"> </span><span class="s2">&quot;fps=10,scale=480:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse&quot;</span><span class="w"> </span>-y<span class="w"> </span>small.gif

<span class="c1"># &#39;fps=10&#39;, // 设置帧率为 10 fps</span>
<span class="c1"># &#39;scale=480:-1:flags=lanczos&#39;, // 缩放宽度为 480 像素，高度按比例缩放, 并使用 Lanczos 算法保持高质量。</span>
<span class="c1"># &#39;split[s0][s1]&#39;, // 将视频流拆分为两个流 [s0] 和 [s1]</span>
<span class="c1"># &#39;[s0]palettegen[p]&#39;, // 使用 [s0] 生成调色板 [p]</span>
<span class="c1"># &#39;[s1][p]paletteuse&#39; // 使用 [s1] 和调色板 [p] 生成 GIF</span>

<span class="c1"># 使用优化的调色板，减少颜色失真和噪点。</span>
</pre></div>
<dl class="docutils">
<dt>参考</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="https://www.cnblogs.com/1bite/p/18493460">FFmpeg 视频转 GIF</a></li>
<li><a class="reference external" href="https://www.jianshu.com/p/7f953f010db5">ffmpeg 小技巧16 -- 将mp4视频转化为GIF(高阶)</a></li>
<li><a class="reference external" href="https://cloud.tencent.com/developer/article/2161440">利用 FFmpeg 将视频转换为 GIF 操作指北</a></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="gif">
<h3>将 GIF 转化为其他格式</h3>
<p>参考: <a class="reference external" href="https://www.jianshu.com/p/9af00bfe21b3">使用ffmpeg转换视频为gif</a></p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-f<span class="w"> </span>gif<span class="w"> </span>-i<span class="w"> </span>animation.gif<span class="w"> </span>animation.mp4
</pre></div>
<p>也可以将 gif 转为其他视频格式</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-f<span class="w"> </span>gif<span class="w"> </span>-i<span class="w"> </span>animation.gif<span class="w"> </span>animation.mpeg
ffmpeg<span class="w"> </span>-f<span class="w"> </span>gif<span class="w"> </span>-i<span class="w"> </span>animation.gif<span class="w"> </span>animation.webm
</pre></div>
</div>
<div class="section" id="section-13">
<h3>倍速播放</h3>
<p>加倍速播放视频</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mov<span class="w"> </span>-filter:v<span class="w"> </span><span class="s2">&quot;setpts=0.5*PTS&quot;</span><span class="w"> </span>output.mov
</pre></div>
<p>定义帧率 16fps:</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mov<span class="w"> </span>-r<span class="w"> </span><span class="m">16</span><span class="w"> </span>-filter:v<span class="w"> </span><span class="s2">&quot;setpts=0.125*PTS&quot;</span><span class="w"> </span>-an<span class="w"> </span>output.mov
</pre></div>
<p>慢倍速播放视频</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.mov<span class="w"> </span>-filter:v<span class="w"> </span><span class="s2">&quot;setpts=2.0*PTS&quot;</span><span class="w"> </span>output.mov
</pre></div>
</div>
<div class="section" id="section-14">
<h3>视频提取帧</h3>
<p>将视频提取10帧</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>index.mp4<span class="w"> </span>-r<span class="w"> </span><span class="m">10</span><span class="w"> </span>%03d.jpg<span class="p">;</span>
</pre></div>
<p>音乐片段截取</p>
</div>
<div class="section" id="flac30">
<h3>将flac音乐截取前30秒</h3>
<p>注意需要将flac转换为mp3</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>蓝云木<span class="se">\ </span>-<span class="se">\ </span>一蓑烟雨任平生.flac<span class="w">  </span>-ss<span class="w"> </span><span class="m">00</span>:00:00<span class="w"> </span>-to<span class="w"> </span><span class="m">00</span>:00:30<span class="w"> </span>-c:a<span class="w"> </span>libmp3lame<span class="w"> </span>-q:a<span class="w"> </span><span class="m">2</span><span class="w"> </span>烟雨平生.mp3
</pre></div>
<p>参数说明:</p>
<pre class="literal-block">
-i 蓝云木\ -\ 一蓑烟雨任平生.flac：指定输入的FLAC文件
-ss 00:00:00：设置开始截取的时间点（这里是1分30秒）
-to 00:00:30：设置结束截取的时间点（这里是2分45秒）
-c:a libmp3lame：指定使用LAME MP3编码器
-q:a 2：设置MP3质量（范围0-9，0是最高质量）
烟雨平生.mp3：输出的MP3文件名
</pre>
<p>替代方案：</p>
<ul class="simple">
<li>如果想用持续时间而非结束时间，可以用 <cite>-t 00:00:30</cite> 代替 <cite>-to</cite> 参数（表示截取30秒的片段）</li>
<li>如果想用CBR（固定比特率）：</li>
</ul>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>蓝云木<span class="se">\ </span>-<span class="se">\ </span>一蓑烟雨任平生.flac<span class="w"> </span>-ss<span class="w"> </span><span class="m">00</span>:00:00<span class="w"> </span>-to<span class="w"> </span><span class="m">00</span>:00:30<span class="w"> </span>-c:a<span class="w"> </span>libmp3lame<span class="w"> </span>-b:a<span class="w"> </span>192k<span class="w"> </span>烟雨平生.mp3
<span class="c1"># （这里192k表示192kbps的比特率）</span>
</pre></div>
<p>注意：如果遇到时间点不准确的问题，可以尝试在 <cite>-ss</cite> 参数前加上 <cite>-accurate_seek</cite> 参数以提高精度。</p>
</div>
<div class="section" id="mp3">
<h3>mp3音乐截取</h3>
<p>与上面不同的地方是少了 <tt class="docutils literal"><span class="pre">-c:a</span> libmp3lame</tt> , 因为源文件就是mp3格式.</p>
<div class="highlight"><pre><span></span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>大雨滂沱，顷刻留亭<span class="se">\ </span>-<span class="se">\ </span>沈奕秋.mp3<span class="w">  </span>-ss<span class="w"> </span><span class="m">00</span>:02:15<span class="w"> </span>-to<span class="w"> </span><span class="m">00</span>:02:50<span class="w"> </span>-q:a<span class="w"> </span><span class="m">2</span><span class="w"> </span>大雨滂沱-顷刻.mp3
ffmpeg<span class="w"> </span>-i<span class="w"> </span>大雨滂沱，顷刻留亭<span class="se">\ </span>-<span class="se">\ </span>沈奕秋.mp3<span class="w">  </span>-ss<span class="w"> </span><span class="m">00</span>:02:15<span class="w"> </span>-to<span class="w"> </span><span class="m">00</span>:02:50<span class="w"> </span>-c<span class="w"> </span>copy<span class="w"> </span>-q:a<span class="w"> </span><span class="m">2</span><span class="w"> </span>大雨滂沱-顷刻.mp3
ffmpeg<span class="w"> </span>-i<span class="w"> </span>大雨滂沱，顷刻留亭<span class="se">\ </span>-<span class="se">\ </span>沈奕秋.mp3<span class="w">  </span>-ss<span class="w"> </span><span class="m">00</span>:02:15<span class="w"> </span>-to<span class="w"> </span><span class="m">00</span>:02:50<span class="w"> </span>-c:a<span class="w"> </span>libmp3lame<span class="w"> </span>-q:a<span class="w"> </span><span class="m">2</span><span class="w"> </span>大雨滂沱-顷刻.mp3
</pre></div>
<!-- 另外就是mp3直接截的会缺少封面, 如果需要需要增加参数: : -->
<!-- -map 0：复制输入文件的所有流（包括音频、封面图片和元数据）。 -->
<!-- -c copy：流复制模式（无损快速）。 -->
<!-- -id3v2_version 3 和 -write_id3v1 1：确保ID3标签版本兼容性。 -->
<!-- .. code-block: : bash -->
<!-- ffmpeg -i 大雨滂沱，顷刻留亭\ -\ 沈奕秋.mp3  -ss 00:02:15 -to 00:02:50 -map 0 -c copy -q:a 2 -id3v2_version 3 -write_id3v1 1 大雨滂沱-顷刻.mp3 -->
</div>
</div>
<div class="section" id="section-15">
<h2>常见报错</h2>
</div>
<div class="section" id="error-reinitializing-filters">
<h2>Error reinitializing filters</h2>
<p>是前端项目裁剪的时候报这个错的, 检查发现程序使用的是 <cite>6.0</cite>, 图片不支持截屏时候裁剪(最新 <cite>7.0</cite> 才支持),
但是又没有更高版本的npm包, 于是分成两步骤:</p>
<ul class="simple">
<li>截全屏: <tt class="docutils literal">ffmpeg <span class="pre">-f</span> avfoundation <span class="pre">-i</span> 2 <span class="pre">-y</span> <span class="pre">-vframes</span> 1 <span class="pre">bg-win1.png</span></tt></li>
<li>裁剪: <tt class="docutils literal">ffmpeg <span class="pre">-i</span> <span class="pre">bg-win1.png</span> <span class="pre">-y</span> <span class="pre">-filter:v</span> crop=948:460:886:75 <span class="pre">bg-win.png</span></tt></li>
</ul>
</div>

								</article>
						</div>
					</div>
				</div>
			</section>
	</div>
</div>

				</div>
			</div>



		<!-- Sider Bar -->
		<div id="right-side-bar">
	<nav>
		<div id="top-toc-tree-container" class="fixed-container">
			<div class="toc-contents-title">
				<h4 id="toc-contents-title-text">Contents</h4>
				<!-- <span class="tool-tip-text">点击隐藏</span> -->
			</div>
			<div id="toc-tree-container">
 <ul class="toc-tree visible">
  <li class="toc-h0">
   <a class="" href="#section-1">
    前言
   </a>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-2">
    基本概念
   </a>
   <ul class="toc-tree visible">
    <li class="toc-h1">
     <a class="" href="#container-stream">
      容器(Container)与流(Stream)
     </a>
     <ul class="toc-tree visible">
      <li class="toc-h2">
       <a class="" href="#conainer-file">
        容器/文件(Conainer/File)
       </a>
      </li>
      <li class="toc-h2">
       <a class="" href="#stream">
        媒体流(Stream)
       </a>
      </li>
     </ul>
    </li>
    <li class="toc-h1">
     <a class="" href="#frame-packet">
      数据帧/数据包(Frame/Packet)
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#codec">
      编解码器(Codec)
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#mux-demux">
      复用/解复用(mux/demux)
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-3">
      帧率
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-4">
      码率
     </a>
    </li>
   </ul>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-5">
    安装
   </a>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-6">
    命令行使用
   </a>
   <ul class="toc-tree visible">
    <li class="toc-h1">
     <a class="" href="#section-7">
      视频参数
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-8">
      声音参数
     </a>
    </li>
   </ul>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-9">
    使用技巧
   </a>
   <ul class="toc-tree visible">
    <li class="toc-h1">
     <a class="" href="#section-10">
      屏幕录制
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-11">
      图片/视频裁剪
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-12">
      将图片转换为圆角
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#mp4gif">
      将mp4转换为gif
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#gif">
      将 GIF 转化为其他格式
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-13">
      倍速播放
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-14">
      视频提取帧
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#flac30">
      将flac音乐截取前30秒
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#mp3">
      mp3音乐截取
     </a>
    </li>
   </ul>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-15">
    常见报错
   </a>
  </li>
  <li class="toc-h0">
   <a class="" href="#error-reinitializing-filters">
    Error reinitializing filters
   </a>
  </li>
 </ul>
</div>

		</div>
	</nav>
	<div id="sidebar-tools" class="fixed-container no-active cant-select">
		<!-- 按钮 使用 content 绘制图标 -->
	</div>
	<div id="sidebar-tool-back-top" class="fixed-container cant-select">
		<!-- 按钮 使用 content 绘制图标 -->
	</div>
		</div>

		<!-- Footer Wrapper -->
			<div id="footer-wrapper">
				<!-- Footer -->
					<section id="footer" class="container">
						<div class="row">
							<div class="8u">
								<section>
									<header>
										<h2>Latest articles</h2>
									</header>
									<ul class="dates">
										<li>
											<span class="date">Jun <strong>02</strong></span>
											<h3><a href="yq-docs-front-end-node-Three--party-library-copyfiles.html">copyfiles</a></h3>
											<p><p class="first last">copyfiles</p>
</p>
										</li>
										<li>
											<span class="date">Jun <strong>02</strong></span>
											<h3><a href="yq-docs-front-end-node-Three--party-library-next-transpile-modules.html">next-transpile-modules</a></h3>
											<p><p class="first last">next-transpile-modules</p>
</p>
										</li>
										<li>
											<span class="date">May <strong>28</strong></span>
											<h3><a href="yq-docs-Chaotic-macOS-Win11-direct-connection.html">macOS网线直连PC-Win11</a></h3>
											<p><p class="first last">macOS网线直连PC-Win11</p>
</p>
										</li>
										<li>
											<span class="date">May <strong>25</strong></span>
											<h3><a href="yq-docs-front-end-node-Three--party-library-anser.html">anser</a></h3>
											<p><p class="first last">anser</p>
</p>
										</li>
									</ul>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="4u">
								<section>
									<header>
										<h2>Blogroll</h2>
									</header>
									<ul class="divided">
											<li><a href="https://yq-yqr.readthedocs.io/zh/blog-theme/blog.html">旧版(迁移中)</a></li>
											<li><a href="https://getpelican.com/">Pelican</a></li>
											<li><a href="https://www.python.org/">Python.org</a></li>
											<li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
									</ul>
								</section>
							</div>
							<div class="4u">
								<section>
									<header>
										<h2>Categories</h2>
									</header>
									<ul class="divided">
											<li><a href="/category/ai.html">AI</a></li>
											<li><a href="/category/ai-yolo.html">AI, yolo</a></li>
											<li><a href="/category/an-quan.html">安全</a></li>
											<li><a href="/category/ban-ben-kong-zhi.html">版本控制</a></li>
									</ul>
								</section>
							</div>

							<div class="4u">
								<section>
									<header>
										<h2>SITEMAP</h2>
									</header>

									<ul class="divided">
												<li><a href="/authors.html">作者</a></li>
												<li><a href="/categories.html">分类</a></li>
												<li><a href="/archives.html">归档</a></li>
												<li><a href="/tags.html">标签</a></li>
									</ul>
								</section>
							</div>

							<div class="4u">

								<section>
									<header>
										<h2>Contact</h2>
									</header>
									<ul class="social">
									</ul>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="12u">
								<!-- Copyright -->
									<div id="copyright">
										<ul class="links">
											<li>&copy; YanQue 2019-2024	</li>
											<!-- <li>Images: <a href="http://facebook.com/DreametryDoodle">Dreametry Doodle</a> + <a href="http://iconify.it">Iconify.it</a></li>
											<li>Design: <a href="http://html5up.net">HTML5 UP</a></li> -->
										</ul>
									</div>
							</div>
						</div>
					</section>
			</div>

		</div>

		<!-- 其他 -->

			<div style="position: fixed;">
				<!-- 深色模式粒子效果 -->
				<!-- <canvas id="universe" width="1428" height="993" data-relingo-block="true" data-relingo-parsed="true"></canvas> -->
				<!-- 深色模式下添加粒子效果canvas -->
				<canvas id="universe" width="1312" height="880"></canvas>
			</div>

		<script src="/theme//js/jquery-3.7.1.min.js"></script>
		<script src="/theme//js/jquery.dropotron.js"></script>

		<script src="/theme//js/config.js"></script>
		<script src="/theme//js/backloading.js"></script>

		<script src="/theme//skel-s0.4.8/skel.min.js"></script>
		<script src="/theme//skel-s0.4.8/skel-panels.min.js"></script>
		<!-- <script src="/theme/js/skel.min.js"></script>
		<script src="/theme/js/skel-panels.min.js"></script> -->
		<script src="/theme//js/canvas/dark.js"></script>
		<script src="/theme//js/yq-blog-plugin.min.js"></script>
<script type="text/javascript">
	function addEvent() {
		$("#toc-contents-title-text").click(function() {
			$("#top-toc-tree-container").toggleClass("no-active");
			$("#sidebar-tools").toggleClass("no-active");
		})
		$("#sidebar-tools").click(function() {
			$("#top-toc-tree-container").toggleClass("no-active");
			$("#sidebar-tools").toggleClass("no-active");
		})
		$("#sidebar-tool-back-top").click(function() {
			// window.scrollTo(0, 0);
			window.scrollTo({
				top: 0,
				left: 0,
				behavior: 'smooth'
			});
		})
	}
	addEvent()
</script>
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="/theme/css/ie8.css" /><![endif]-->
	</body>
</html>