
<!DOCTYPE HTML>
<!--
	Dopetrope 2.0 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html data-theme="dark">
	<head>
			<title>书言</title>
			<meta http-equiv="content-type" content="text/html; charset=utf-8" />
			<meta charset="utf-8" />

			<!-- <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,300italic" rel="stylesheet" /> -->
			<link rel="stylesheet" href="/theme/css/custom-pygment.css" />
			<noscript>
				<link rel="stylesheet" href="/theme/css/skel-noscript.css" />
				<link rel="stylesheet" href="/theme/css/style.css" />
				<link rel="stylesheet" href="/theme/css/style-desktop.css" />
			</noscript>

		<!-- tipuesearch 放在这, 因为搜索框是全局定义的 -->
		<link rel="stylesheet" href="/theme//Tipue-Search-5.0.0/tipuesearch.css" />
		<link rel="stylesheet" href="/theme//Tipue-Search-5.0.0/custom/tipuesearch-custom.css" />
		<link rel="stylesheet" href="/theme/css/alabaster.css" />
		<link rel="stylesheet" href="/theme/css/custom-alabaster.css" />
		<!-- <link rel="stylesheet" href="/theme/fontawesome-free-6.5.1-web/css/all.min.css" /> -->
		<!--  <link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-brands-400.woff2" />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-regular-400.woff2" />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-solid-900.woff2" />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="/theme/fontawesome-free-6.5.1-web/webfonts/fa-v4compatibility.woff2" /> -->


	</head>
	<body class="no-sidebar">

		<!-- 内容 -->
		<div>

			<!-- Header Wrapper -->
			<div id="header-wrapper">
				<div class="container">
					<div class="row">
						<div class="12u">

							<!-- Header -->
								<section id="header">

									<!-- Logo -->
									<div class="page-home">
										<h1><a href="/">HOME</a></h1>
									</div>

									<!-- Nav -->
									<div class="page-menu">
										<nav id="nav">
											<ul>

												<!-- categories -->
														<li ><a href="/category/ai.html">AI</a></li>
														<li ><a href="/category/an-quan.html">安全</a></li>
														<li ><a href="/category/ban-ben-kong-zhi.html">版本控制</a></li>
														<li ><a href="/category/cao-zuo-xi-tong.html">操作系统</a></li>
														<li ><a href="/category/chang-yong-gong-ju-shi-yong.html">常用工具使用</a></li>
														<li ><a href="/category/da-shu-ju.html">大数据</a></li>
														<li><a href="/categories.html">More...</a></li>
											</ul>
										</nav>
									</div>
								</section>

						</div>
					</div>
					<div class="row page-head-search">
						<form class="navbar-search" action="/search.html" role="search">
							<!-- <button class="fa-solid fa-magnifying-glass" type="submit"></button> -->
							<button type="submit"></button>
							<input type="text" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
							<!-- <i class="fa-solid fa-magnifying-glass"></i> -->
						</form>
					</div>
  <div class="row page-head page-article persistent">
    <div class="page-head-title">
      <h2>命令行选项说明</h2>
    </div>
    <div class="page-head-content">
      By
	  <a href="author/yanque.html">YanQue</a>
      , 20 二月 2023
      , Category:
	  <a href="category/hou-duan-python.html">后端; python</a>
    </div>
	<div class="red-line">
    </div>
  </div>
				</div>

				<!-- 头部下方动效 -->
				<div class="waves-area">
					<section class="main-hero-waves-area waves-area">
						<svg class="waves-svg" preserveAspectRatio="none" shape-rendering="auto" viewBox="0 24 150 28"
							 xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
							<defs>
								<path
										d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"
										id="gentle-wave"></path>
							</defs>
							<g class="parallax">
								<use href="#gentle-wave" x="48" y="0"></use>
								<use href="#gentle-wave" x="48" y="3"></use>
								<use href="#gentle-wave" x="48" y="5"></use>
								<use href="#gentle-wave" x="48" y="7"></use>
							</g>
						</svg>
					</section>
				</div>

			</div>

		<!-- Main Wrapper -->
			<div id="main-wrapper">
				<div class="container">
<div class="row">
	<div class="12u">
			<section>
				<div>
					<div class="row">
						<div class="12u skel-cell-mainContent">
							<!-- Content -->
								<article class="box is-post">
									<div class="box-head">
										<div class="post-infos">
											<ul class="tags">
												<li><a class="button" href="category/hou-duan-python.html">后端; python</a></li>
													<li><a class="button button-alt" href="tag/python.html">Python</a></li>

													<li><a class="button button-alt" href="tag/pythonsan-fang-ku.html">Python三方库</a></li>

													<li><a class="button button-alt" href="tag/celery_more.html">Celery_more</a></li>

											</ul>
										</div>

										<div class="pennant pennant-alt date">2023-02-20</div>
										<h2>命令行选项说明</h2>

										<span class="head-modify-time">修改于: 2023-02-20</span>

									</div>
									<p>语法, Celery command entrypoint</p>
<pre class="literal-block">
celery [OPTIONS] COMMAND [ARGS]...
</pre>
<div class="section" id="section-2">
<h2>选项参数</h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-A</span>, <span class="option">--app</span></kbd></td>
<td>指定运行的 Celery 应用程序实例，格式必须为 module.path:attribute
但如果只设置包名，它将进行搜索app实例, 详细见 <a class="reference internal" href="#app-args">app_args</a></td></tr>
<tr><td class="option-group">
<kbd><span class="option">-b</span>, <span class="option">--broker</span></kbd></td>
<td>TEXT, 中间人, 会覆盖代码里的配置</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--result-backend</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>TEXT, 结果后端</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--loader</span></kbd></td>
<td>TEXT</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--config</span></kbd></td>
<td>TEXT</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--workdir</span></kbd></td>
<td>PATH, 工作目录</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-C</span>, <span class="option">--no-color</span></kbd></td>
<td>无颜色?</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-q</span>, <span class="option">--quiet</span></kbd></td>
<td>安静模式?</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--version</span></kbd></td>
<td>版本信息</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--help</span></kbd></td>
<td>Show this message and exit.</td></tr>
</tbody>
</table>
<p><a class="reference internal" href="#section-3">支持的命令</a></p>
<p id="app-args">关于 app 参数说明:</p>
<p>使用 --app 参数可也指定运行的 Celery 应用程序实例，格式必须为 module.path:attribute
但如果只设置包名，它将进行搜索app实例，顺序如下:</p>
<p>用 --app=proj:</p>
<pre class="literal-block">
名为 proj.app 的属性.
名为 proj.celery 的属性
模块 proj 中值为 Celery 应用程序的任何属性，如果还没有找到，将尝试检索名为 proj.celery的子模块
名为 proj.celery.app 的属性
名为 proj.celery.celery 的属性
模块 proj.celery 中值为 Celery 应用程序的任何属性
在此方案模仿文档中使用的实例，即 针对单个模块包含的proj:app ，以及 大型项目的 proj.celery:app
</pre>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">使用 celery 5.2 貌似不能自动识别 proj.app 了. 自动识别的话只能写 celery.py</p>
</div>
</div>
<div class="section" id="section-3">
<h2>支持的命令</h2>
<p>Commands:</p>
<pre class="literal-block">
amqp     打开 AMQP Shell.
beat     启动节拍周期任务调度程序.
call     命令行调用一个任务.
control  Workers 远程控制.
events   事件流实用程序.
graph    The ``celery graph`` command.
inspect  检查运行的Worker.
list     从中间人 broker 获取信息.
logtool  The ``celery logtool`` command.
migrate  将任务从一个 broker 迁移到另一个 代理(broker).
multi    启动多个 worker 实例.
purge    清除所有已知任务队列中的所有消息.
report   显示可包括在错误报告中的有用信息.
result   打印给定 任务ID(task id) 的返回值.
shell    打开一个 shell 会话来便捷访问 celery.
status   查看所有 workers 状态.
upgrade  查看版本升级信息.
worker   启动 worker 实例.
</pre>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>注意, 像 <a class="reference internal" href="#status">status</a> 这样的命令需要手动指定配置:</p>
<pre class="literal-block">
% celery -b redis://localhost:6379/0 status
-&gt;  celery&#64;yanquedembp.local: OK

1 node online.
</pre>
<p>若使用配置文件:</p>
<pre class="literal-block">
% celery --config  src.time_schedule.celery_conf status
-&gt;  celery&#64;yanquedembp.local: OK

1 node online.
</pre>
<p>或者直接指定应用:</p>
<pre class="last literal-block">
% celery -A src.time_schedule  status
-&gt;  celery&#64;yanquedembp.local: OK

1 node online.
</pre>
</div>
<div class="section" id="worker">
<h3>worker</h3>
<p>用法:</p>
<pre class="literal-block">
celery worker [OPTIONS]
</pre>
<p>启动一个 worker 实例.</p>
<p>Examples:</p>
<pre class="literal-block">
$ celery --app=proj worker -l INFO
$ celery -A proj worker -l INFO -Q hipri,lopri
$ celery -A proj worker --concurrency=4
$ celery -A proj worker --concurrency=1000 -P eventlet
$ celery worker --autoscale=10,0
</pre>
<p>消费者选项 Worker Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n</span>, <span class="option">--hostname <var>HOSTNAME</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>设定自定义主机名 (e.g., <a class="reference external" href="mailto:w1&#64;%%h">w1&#64;%%h</a>).
Expands: %%h (hostname), %%n (name) and %%d,
(domain).</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-D</span>, <span class="option">--detach</span></kbd></td>
<td>以后台进程的形式启动
Start worker as a background process.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-S</span>, <span class="option">--statedb <var>PATH</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>状态数据库的路径, 文件为 db 后缀
Path to the state database. The extension
'.db' may be appended to the filename.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-O <var>&lt;[default|fair]&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>应用优化配置文件.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-l</span>, <span class="option">--loglevel <var>&lt;[DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL]&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>日志等级.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--prefetch-multiplier <var>&lt;prefetch multiplier&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Set custom prefetch multiplier value for
this worker instance.
这个没懂</td></tr>
</tbody>
</table>
<p>线程/进程池选项 Pool Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-c</span>, <span class="option">--concurrency <var>&lt;concurrency&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>队列的进程数目, 默认为CPU个数.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-P</span>, <span class="option">--pool <var>&lt;[prefork|eventlet|gevent|solo|processes|threads]&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>使用那种池方式. 进程池/线程池/时间池.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-E</span>, <span class="option">--task-events</span>, <span class="option">--events</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>发送任务相关的时间能够被 (celery 事件、 celerymon、 other) 监视捕获</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--time-limit <var>FLOAT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>强制设置任务时间限制. 单位: 秒; 类型: int/float</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--soft-time-limit <var>FLOAT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>设置软时间限制. 单位: 秒; 类型: int/float. 不知道与上一个区别在哪.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--max-tasks-per-child <var>INTEGER</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>每个消费者池能够执行的最大任务数, 若超过将会使用一个新的消费者进程池(worker)替代</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--max-memory-per-child <var>INTEGER</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>最大驻留内存. 单位: Kib.
若耗尽将会使用一个新的 消费者进程池(worker).
若存在单个任务就超过了最大驻留内存, 在完成此任务后,
才会使用新的 消费者进程池(worker) 来替换.
默认无限制.</td></tr>
</tbody>
</table>
<p>队列选项 Queue Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-Q</span>, <span class="option">--queues <var>&lt;COMMA SEPARATED LIST&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>队列, 多个使用逗号分隔</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-X</span>, <span class="option">--exclude-queues <var>&lt;COMMA SEPARATED LIST&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>排除队列, 多个使用逗号分隔</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-I</span>, <span class="option">--include <var>&lt;COMMA SEPARATED LIST&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>包含队列, 多个使用逗号分隔</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--purge</span>, <span class="option">--discard</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>清除队列, 多个使用逗号分隔</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--discard</span></kbd></td>
<td>清除队列, 多个使用逗号分隔</td></tr>
</tbody>
</table>
<p>功能:</p>
<p>--without-gossip
--without-mingle
--without-heartbeat
--heartbeat-interval INTEGER
--autoscale &lt;MIN WORKERS&gt;, &lt;MAX WORKERS&gt;</p>
<p>Embedded Beat Options:</p>
<p>-B, --beat
-s, --schedule-filename, --schedule TEXT
--scheduler TEXT</p>
<p>Daemonization Options:</p>
<p>-f, --logfile TEXT
--pidfile TEXT
--uid TEXT
--uid TEXT
--gid TEXT
--umask TEXT
--executable TEXT</p>
</div>
<div class="section" id="beat">
<h3>beat</h3>
<p>用法:</p>
<pre class="literal-block">
celery beat [OPTIONS]
</pre>
<!-- Start the beat periodic task scheduler. -->
<p>启动周期任务调度, 设置 contrab 任务等定时任务时, 需要使用此命令来发现注册定时任务.</p>
<p>Beat Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--detach</span></kbd></td>
<td>作为守护进程独立执行</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-s</span>, <span class="option">--schedule <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>执行数据库的路径.
默认为 <tt class="docutils literal"><span class="pre">celerybeat-schedule</span></tt>.
The extension '.db' may be
appended to the filename.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-S</span>, <span class="option">--scheduler <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>使用哪个调度器(scheduler)类</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--max-interval <var>INTEGER</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>调度器轮询的间隔时间.
不确定是每次任务周期的间隔(多个任务都执行完成一次, 组成一个任务周期),
还是每个任务之间的间隔. 应是后者.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-l</span>, <span class="option">--loglevel <var>&lt;[DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL]&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>日志等级</td></tr>
</tbody>
</table>
<p>守护线程执行选项 Daemonization Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-f</span>, <span class="option">--logfile <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>日志文件名</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--pidfile <var>TEXT</var></span></kbd></td>
<td>pid文件名</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--uid <var>TEXT</var></span></kbd></td>
<td>uid</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--gid <var>TEXT</var></span></kbd></td>
<td>gid</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--umask <var>TEXT</var></span></kbd></td>
<td>创建文件的umask值</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--executable <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>不知道...</td></tr>
</tbody>
</table>
</div>
<div class="section" id="status">
<h3>status</h3>
<p>用法:</p>
<pre class="literal-block">
celery status [OPTIONS]
</pre>
<p>查看在线的 Worker 节点.</p>
<p>远程控制选项 Remote Control Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-t</span>, <span class="option">--timeout <var>FLOAT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>设置检查超时时间.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d</span>, <span class="option">--destination <var>&lt;COMMA SEPARATED LIST&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>检查的目标节点列表. 逗号分隔.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-j</span>, <span class="option">--json</span></kbd></td>
<td>使用json格式输出.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="graph">
<h3>graph</h3>
<p>用法:</p>
<pre class="literal-block">
celery graph [OPTIONS] COMMAND [ARGS]...
</pre>
<p>图形化显示?
实际使用效果是json格式的相关输出信息.</p>
<p>命令:</p>
<pre class="literal-block">
bootsteps  显示引导步骤图.
workers    显示 workers graph.
</pre>
<p>例:</p>
<pre class="literal-block">
celery --config  src.time_schedule.celery_conf graph workers
</pre>
</div>
<div class="section" id="call">
<h3>call</h3>
<p>使用:</p>
<pre class="literal-block">
celery call [OPTIONS] NAME
</pre>
<p>根据任务名调用任务.</p>
<p>调用选项 Calling Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-a</span>, <span class="option">--args <var>&lt;JSON ARRAY&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>位置参数.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-k</span>, <span class="option">--kwargs <var>&lt;JSON OBJECT&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>关键字参数字典.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--eta <var>ISO-86091</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>执行时间.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--countdown <var>FLOAT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>eta in seconds from now.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--expires <var>&lt;ISO-86091 OR FLOAT&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>过期时间.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--serializer <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>任务序列化方式.</td></tr>
</tbody>
</table>
<p>路由选项 Routing Options:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--queue <var>TEXT</var></span></kbd></td>
<td>自定义队列名.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--exchange <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>自定义交换机名.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--routing-key <var>TEXT</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>路由key.</td></tr>
</tbody>
</table>
<p>例:</p>
<pre class="literal-block">
celery -A src.time_schedule call -a '[2, 2]'  src.time_schedule.pre_tasks.add
7506ef60-5621-460a-8219-7a97f6e96f4e
</pre>
</div>
<div class="section" id="section-4">
<h3>公共选项</h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--help</span></kbd></td>
<td>Show this message and exit.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="section-5">
<h2>一些常用命令</h2>
<div class="section" id="section-6">
<h3>设置并发数</h3>
<p>worker -c 设置并发数, 默认数为cpu数:</p>
<pre class="literal-block">
-c, --concurrency &lt;concurrency&gt;
                                Number of child processes processing the
                                queue.  The default is the number of CPUs
                                available on your system.
</pre>
</div>
<div class="section" id="section-7">
<h3>设置日志级别</h3>
<p>worker -l 设置日志信息:</p>
<pre class="literal-block">
-l, --loglevel [DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL]
                                Logging level.
</pre>
</div>
<div class="section" id="section-8">
<h3>后台运行</h3>
<p>celery multi 后台运行, 但是看新版本指令帮助信息貌似又不支持:</p>
<pre class="literal-block">
celery multi --help
Usage: celery multi [OPTIONS]

  Start multiple worker instances.

Options:
  --help  Show this message and exit.
</pre>
<p>启动:</p>
<pre class="literal-block">
celery multi start w1 -A proj -l info
</pre>
<p>重启:</p>
<pre class="literal-block">
celery  multi restart w1 -A proj -l info
</pre>
<p>停止运行:</p>
<pre class="literal-block">
$ celery multi stop w1 -A proj -l info
</pre>
<p>stop 命令是异步的，所以不会等待职程（Worker）关闭。可以通过 stopwait 命令进行停止运行，可以保证在退出之前完成当前正在执行的任务:</p>
<pre class="literal-block">
$ celery multi stopwait w1 -A proj -l info
</pre>
<p>默认情况下会在当前目录中创建pid文件和日志文件，为防止多个职程（Worker）干扰，建议将这些文件存放在专门的目录中:</p>
<pre class="literal-block">
$ mkdir -p /var/run/celery
$ mkdir -p /var/log/celery
$ celery multi start w1 -A proj -l info --pidfile=/var/run/celery/%n.pid \
                                        --logfile=/var/log/celery/%n%I.log
</pre>
<p>也可以使用 multi 命令启动多个职程（Worker），有一个强大的语法为不同职程（Worker）设置不同的参数:</p>
<pre class="literal-block">
$ celery multi start 10 -A proj -l info -Q:1-3 images,video -Q:4,5 data \
    -Q default -L:4,5 debug
</pre>
</div>
</div>

								</article>
						</div>
					</div>
				</div>
			</section>
	</div>
</div>

				</div>
			</div>



		<!-- Sider Bar -->
		<div id="right-side-bar">
	<nav>
		<div id="top-toc-tree-container" class="fixed-container">
			<div class="toc-contents-title">
				<h4 id="toc-contents-title-text">Contents</h4>
				<!-- <span class="tool-tip-text">点击隐藏</span> -->
			</div>
			<div id="toc-tree-container">
 <ul class="toc-tree visible">
  <li class="toc-h0">
   <a class="" href="#section-2">
    选项参数
   </a>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-3">
    支持的命令
   </a>
   <ul class="toc-tree visible">
    <li class="toc-h1">
     <a class="" href="#worker">
      worker
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#beat">
      beat
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#status">
      status
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#graph">
      graph
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#call">
      call
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-4">
      公共选项
     </a>
    </li>
   </ul>
  </li>
  <li class="toc-h0">
   <a class="" href="#section-5">
    一些常用命令
   </a>
   <ul class="toc-tree visible">
    <li class="toc-h1">
     <a class="" href="#section-6">
      设置并发数
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-7">
      设置日志级别
     </a>
    </li>
    <li class="toc-h1">
     <a class="" href="#section-8">
      后台运行
     </a>
    </li>
   </ul>
  </li>
 </ul>
</div>

		</div>
	</nav>
	<div id="sidebar-tools" class="fixed-container no-active cant-select">
		<!-- 按钮 使用 content 绘制图标 -->
	</div>
	<div id="sidebar-tool-back-top" class="fixed-container cant-select">
		<!-- 按钮 使用 content 绘制图标 -->
	</div>
		</div>

		<!-- Footer Wrapper -->
			<div id="footer-wrapper">
				<!-- Footer -->
					<section id="footer" class="container">
						<div class="row">
							<div class="8u">
								<section>
									<header>
										<h2>Latest articles</h2>
									</header>
									<ul class="dates">
										<li>
											<span class="date"> 9 <strong>28</strong></span>
											<h3><a href="yq-docs-operating-system-linux-Linux-instruction-apt-clone.html">apt-clone</a></h3>
											<p><p class="first last">apt-clone</p>
</p>
										</li>
										<li>
											<span class="date"> 9 <strong>24</strong></span>
											<h3><a href="yq-docs-Container-and-cluster-docker-turorial-docker-dns.html">配置容器使用的dns</a></h3>
											<p><p class="first last">配置容器使用的dns</p>
</p>
										</li>
										<li>
											<span class="date"> 9 <strong>24</strong></span>
											<h3><a href="yq-docs-operating-system-linux-Linux-instruction-ifconfig.html">ifconfig</a></h3>
											<p><p class="first last">ifconfig</p>
</p>
										</li>
										<li>
											<span class="date"> 9 <strong>23</strong></span>
											<h3><a href="yq-docs-operating-system-linux-Linux-instruction-dig.html">dig</a></h3>
											<p><p class="first last">dig</p>
</p>
										</li>
									</ul>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="4u">
								<section>
									<header>
										<h2>Blogroll</h2>
									</header>
									<ul class="divided">
											<li><a href="https://yq-yqr.readthedocs.io/zh/blog-theme/blog.html">旧版(迁移中)</a></li>
											<li><a href="https://getpelican.com/">Pelican</a></li>
											<li><a href="https://www.python.org/">Python.org</a></li>
											<li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
									</ul>
								</section>
							</div>
							<div class="4u">
								<section>
									<header>
										<h2>Categories</h2>
									</header>
									<ul class="divided">
											<li><a href="/category/ai.html">AI</a></li>
											<li><a href="/category/an-quan.html">安全</a></li>
											<li><a href="/category/ban-ben-kong-zhi.html">版本控制</a></li>
											<li><a href="/category/cao-zuo-xi-tong.html">操作系统</a></li>
									</ul>
								</section>
							</div>

							<div class="4u">
								<section>
									<header>
										<h2>SITEMAP</h2>
									</header>

									<ul class="divided">
												<li><a href="/authors.html">作者</a></li>
												<li><a href="/categories.html">分类</a></li>
												<li><a href="/archives.html">归档</a></li>
												<li><a href="/tags.html">标签</a></li>
									</ul>
								</section>
							</div>

							<div class="4u">

								<section>
									<header>
										<h2>Contact</h2>
									</header>
									<ul class="social">
									</ul>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="12u">
								<!-- Copyright -->
									<div id="copyright">
										<ul class="links">
											<li>&copy; YanQue 2021-2024	</li>
											<!-- <li>Images: <a href="http://facebook.com/DreametryDoodle">Dreametry Doodle</a> + <a href="http://iconify.it">Iconify.it</a></li>
											<li>Design: <a href="http://html5up.net">HTML5 UP</a></li> -->
										</ul>
									</div>
							</div>
						</div>
					</section>
			</div>

		</div>

		<!-- 其他 -->

			<div style="position: fixed;">
				<!-- 深色模式粒子效果 -->
				<!-- <canvas id="universe" width="1428" height="993" data-relingo-block="true" data-relingo-parsed="true"></canvas> -->
				<!-- 深色模式下添加粒子效果canvas -->
				<canvas id="universe" width="1312" height="880"></canvas>
			</div>

		<script src="/theme/js/jquery-3.7.1.min.js"></script>
		<script src="/theme/js/jquery.dropotron.js"></script>
		<script src="/theme/js/config.js"></script>
		<script src="/theme/skel-s0.4.8/skel.min.js"></script>
		<script src="/theme/skel-s0.4.8/skel-panels.min.js"></script>
		<!-- <script src="/theme/js/skel.min.js"></script>
		<script src="/theme/js/skel-panels.min.js"></script> -->
		<script src="/theme/js/backloading.js"></script>
		<script src="/theme/js/canvas/dark.js"></script>
<script type="text/javascript">
	function addEvent() {
		$("#toc-contents-title-text").click(function() {
			$("#top-toc-tree-container").toggleClass("no-active");
			$("#sidebar-tools").toggleClass("no-active");
		})
		$("#sidebar-tools").click(function() {
			$("#top-toc-tree-container").toggleClass("no-active");
			$("#sidebar-tools").toggleClass("no-active");
		})
		$("#sidebar-tool-back-top").click(function() {
			// window.scrollTo(0, 0);
			window.scrollTo({
				top: 0,
				left: 0,
				behavior: 'smooth'
			});
		})
	}
	addEvent()
</script>
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="/theme/css/ie8.css" /><![endif]-->
	</body>
</html>