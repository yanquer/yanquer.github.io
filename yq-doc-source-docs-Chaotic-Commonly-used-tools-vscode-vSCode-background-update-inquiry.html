
<!DOCTYPE HTML>
<!--
	Dopetrope 2.0 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
			<title>书言</title>
			<meta http-equiv="content-type" content="text/html; charset=utf-8" />
			<meta charset="utf-8" />
			<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,300italic" rel="stylesheet" />
				<link rel="stylesheet" href="/theme/css/pygment.css" />
				<link rel="stylesheet" href="/theme/css/custom-pygment.css" />
			<noscript>
				<link rel="stylesheet" href="/theme/css/skel-noscript.css" />
				<link rel="stylesheet" href="/theme/css/style.css" />
				<link rel="stylesheet" href="/theme/css/style-desktop.css" />
			</noscript>
		<!-- tipuesearch 放在这, 因为搜索框是全局定义的 -->
		<link rel="stylesheet" href="/theme//Tipue-Search-5.0.0/tipuesearch.css" />
		<link rel="stylesheet" href="/theme//Tipue-Search-5.0.0/custom/tipuesearch-custom.css" />
		<link rel="stylesheet" href="/theme/css/alabaster.css" />
		<link rel="stylesheet" href="/theme/css/style-update.css" />
	</head>
	<body class="no-sidebar">
		<!-- Header Wrapper -->
			<div id="header-wrapper">
				<div class="container">
					<div class="row">
						<div class="12u">

							<!-- Header -->
								<section id="header">

									<!-- Logo -->
									<div class="page-home">
										<h1><a href="/">HOME</a></h1>
									</div>

									<!-- Nav -->
									<div class="page-menu">
										<nav id="nav">
											<ul>

												<!-- categories -->
														<li ><a href="/category/ai.html">AI</a></li>
														<li ><a href="/category/an-quan.html">安全</a></li>
														<li ><a href="/category/ban-ben-kong-zhi.html">版本控制</a></li>
														<li ><a href="/category/cao-zuo-xi-tong.html">操作系统</a></li>
														<li  class="active"><a href="/category/chang-yong-gong-ju-shi-yong.html">常用工具使用</a></li>
														<li ><a href="/category/da-shu-ju.html">大数据</a></li>
														<li><a href="/categories.html">More...</a></li>
											</ul>
										</nav>
									</div>
								</section>

						</div>
					</div>
					<div class="row page-head-search">
						<form class="navbar-search" action="/search.html" role="search">
							<!-- <button class="fa-solid fa-magnifying-glass" type="submit"></button> -->
							<button type="submit"></button>
							<input type="text" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
							<!-- <i class="fa-solid fa-magnifying-glass"></i> -->
						</form>
					</div>
  <div class="row page-head page-article persistent">
    <div class="page-head-title">
      <h2>vscode后台更新探究</h2>
    </div>
    <div class="page-head-content">
      By
	  <a href="author/yanque.html">YanQue</a>
      , 09 三月 2024
      , Category:
	  <a href="category/chang-yong-gong-ju-shi-yong.html">常用工具使用</a>
    </div>
	<div class="red-line">
    </div>
  </div>
				</div>
			</div>

		<!-- Main Wrapper -->
			<div id="main-wrapper">
				<div class="container">
<div class="row">
	<div class="12u">
			<section>
				<div>
					<div class="row">
						<div class="12u skel-cell-mainContent">
							<!-- Content -->
								<article class="box is-post">
									<div class="post-infos">
										<ul class="tags">
											<li><a class="button" href="category/chang-yong-gong-ju-shi-yong.html">常用工具使用</a></li>
												<li><a class="button button-alt" href="tag/vscode.html">Vscode</a></li>

										</ul>
									</div>

									<div class="pennant pennant-alt date">2024-03-09</div>
									<h2>vscode后台更新探究</h2>
									<p>因为想像vscode一样实现应用的后台无感更新, 所以clone下来vscode源码研究了这一部分.</p>
<p>对于不同的系统版本, 实现的方式不同, 这里只讨论 windows 与 macos. linux看代码貌似没支持.</p>
<div class="section" id="section-1">
<h2>前置</h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">源码::</th><td class="field-body"><a class="reference external" href="https://github.com/microsoft/vscode/wiki/How-to-Contribute">microsoft/vscode</a></td>
</tr>
</tbody>
</table>
<p>vscode 事件, 组件等概念, 如果要介绍会导致篇幅太多, 故略过.</p>
<p>如果需要自己构建, 国内目前只看到这一篇说明清楚了: <a class="reference external" href="https://blog.csdn.net/qq_38248561/article/details/129011139">打包VSCode源码为安装程序</a> , 其实源码仓库readme也有指引, 不过不是很明显.</p>
<p>笔者使用macos, 最开始直接run的时候没成功, 后面就没管这个直接看代码, 再后面才找到要怎么构建.</p>
<p>更新模块的主要源码都在 <tt class="docutils literal">src/vs/platform/update</tt></p>
<pre class="literal-block">
yanque&#64;yanquedembp vscode-code % tree src/vs/platform/update
src/vs/platform/update
├── common
│&nbsp;&nbsp; ├── update.config.contribution.ts
│&nbsp;&nbsp; ├── update.ts
│&nbsp;&nbsp; └── updateIpc.ts
└── electron-main
    ├── abstractUpdateService.ts
    ├── updateService.darwin.ts
    ├── updateService.linux.ts
    ├── updateService.snap.ts
    └── updateService.win32.ts

2 directories, 8 files
</pre>
<p>对外提供的接口主要都放 <tt class="docutils literal">common</tt> 目录下. <tt class="docutils literal"><span class="pre">electron-main</span></tt> 目录下是具体的实现.</p>
<p>在 <tt class="docutils literal"><span class="pre">electron-main</span></tt> 下,</p>
<ul class="simple">
<li><tt class="docutils literal">abstractUpdateService.ts</tt> 定义了抽象模版, 后面三个都是继承此类.</li>
<li><tt class="docutils literal">updateService.darwin.ts</tt> 是针对 macos 的实现</li>
<li><tt class="docutils literal">updateService.linux.ts</tt> 是针对 linux 的实现</li>
<li><tt class="docutils literal">updateService.win32.ts</tt> 是针对 windows 的实现</li>
</ul>
<p><tt class="docutils literal">abstractUpdateService</tt> 下 <tt class="docutils literal">initialize()</tt> 定义了一个基础的判断更新逻辑, 检查用户配置的 <tt class="docutils literal">update.mode</tt></p>
<ul class="simple">
<li>为 <tt class="docutils literal">manual</tt> 表示手动更新, 退出执行</li>
<li>为 <tt class="docutils literal">start</tt>  表示仅启动时候检查一次更新, 退出执行</li>
<li>其他值则定时检查更新. 设置的是每30s检查一次</li>
</ul>
<p>源码:</p>
<pre class="literal-block">
if (updateMode === 'manual') {
    this.logService.info('update#ctor - manual checks only; automatic updates are disabled by user preference');
    return;
}

if (updateMode === 'start') {
    this.logService.info('update#ctor - startup checks only; automatic updates are disabled by user preference');

    // Check for updates only once after 30 seconds
    setTimeout(() =&gt; this.checkForUpdates(false), 30 * 1000);
} else {
    // Start checking for updates after 30 seconds
    this.scheduleCheckForUpdates(30 * 1000).then(undefined, err =&gt; this.logService.error(err));
}
</pre>
<p>经过几层调用后到了抽象类的 <tt class="docutils literal">doCheckForUpdates()</tt> , 此抽象方法由上面提到的 <tt class="docutils literal">updateService.darwin.ts</tt> 等具体实现.</p>
</div>
<div class="section" id="windows">
<h2>windows无感更新</h2>
<p>实现方式依赖 <a class="reference external" href="https://github.com/jrsoftware/issrc">inno setup</a> , 官网文档: <a class="reference external" href="https://jrsoftware.org/isinfo.php">inno_setup_jrsoftware</a></p>
<p>只说结果, 如果支持快速更新, 则调用 <tt class="docutils literal">build_process</tt> 的 <tt class="docutils literal">spawn</tt> 执行类似于以下指令:</p>
<pre class="literal-block">
VSCodeUserSetup-x64-1.76.0.exe /verysilent /update=VSCodeUserSetup-x64-1.76.0.flag /nocloseapplications /mergetasks=runcode,!desktopicon,!quicklaunchicon
</pre>
<p>其中</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">VSCodeUserSetup-x64-1.76.0.exe</span></tt> : 是下载好的安装包</li>
<li><tt class="docutils literal">/verysilent</tt> : 表示 强制静默安装，不管是否报错，都不会有任何提示</li>
<li><tt class="docutils literal">/update</tt> : vscode 自定义的参数. 见 <a class="reference internal" href="#update">update</a></li>
<li><tt class="docutils literal">/nocloseapplications</tt> : 不关闭应用程序</li>
<li>其他: 字面意思, 任务都定义在仓库 <tt class="docutils literal">build/win32/code.iss</tt> 下的 <tt class="docutils literal">[Tasks]</tt> 部分(进此文件搜就看到了)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>真正支持后台更新的是 <tt class="docutils literal">verysilent</tt> 与 <tt class="docutils literal">/update</tt></p>
<p><tt class="docutils literal">/update</tt> 可以说是ts代码 与 iss 内定义脚本的一个交互. (还用了互斥锁, 不过具体实现我没看懂)</p>
<p class="last">详情见: <a class="reference internal" href="#section-2">后台更新</a></p>
</div>
<p>源码:</p>
<pre class="literal-block">
const child = spawn(this.availableUpdate.packagePath, ['/verysilent', `/update=&quot;${this.availableUpdate.updateFilePath}&quot;`, '/nocloseapplications', '/mergetasks=runcode,!desktopicon,!quicklaunchicon'], {
    detached: true,
    stdio: ['ignore', 'ignore', 'ignore'],
    windowsVerbatimArguments: true
});

child.once('exit', () =&gt; {
    this.availableUpdate = undefined;
    this.setState(State.Idle(getUpdateType()));
});
</pre>
<p id="update">这里的参数一般都是通用的, 除了 <tt class="docutils literal">/update</tt> . 这一部分涉及到 innosetup 的 iss 配置文件定义, 可参考 官网文档: <a class="reference external" href="https://jrsoftware.org/isinfo.php">inno_setup_jrsoftware</a></p>
<p><tt class="docutils literal">/update</tt> 是vscode 使用 innosetup 自定义的一个参数, 源码如下:</p>
<pre class="literal-block">
// VS Code will create a flag file before the update starts (/update=C:\foo\bar)
// - if the file exists at this point, the user quit Code before the update finished, so don't start Code after update
// - otherwise, the user has accepted to apply the update and Code should start
function LockFileExists(): Boolean;
begin
Result := FileExists(ExpandConstant('{param:update}'))
end;

function ShouldRunAfterUpdate(): Boolean;
begin
if IsBackgroundUpdate() then
    Result := not LockFileExists()
else
    Result := True;
end;
</pre>
<p>启动部分代码如下:</p>
<pre class="literal-block">
[Run]
Filename: &quot;{app}\{#ExeBasename}.exe&quot;; Description: &quot;{cm:LaunchProgram,{#NameLong}}&quot;; Tasks: runcode; Flags: nowait postinstall; Check: ShouldRunAfterUpdate
Filename: &quot;{app}\{#ExeBasename}.exe&quot;; Description: &quot;{cm:LaunchProgram,{#NameLong}}&quot;; Flags: nowait postinstall; Check: WizardNotSilent
</pre>
<p>结合上一部分, 能看出, 当 <tt class="docutils literal">ShouldRunAfterUpdate</tt> 为 true (也就是安装程序后台启动静默安装且存在flag文件) 时,
将会在用户退出出程序后, 自动打开.</p>
<p>Task定义:</p>
<pre class="literal-block">
[Tasks]
// 省略...
Name: &quot;runcode&quot;; Description: &quot;{cm:RunAfter,{#NameShort}}&quot;; GroupDescription: &quot;{cm:Other}&quot;; Check: WizardSilent
</pre>
<p>可以看到, tasks 定义了 <tt class="docutils literal">runcode</tt> 等任务, 看起来是执行什么, 不过没找到具体实现, 官网也没找到相关说明.</p>
<div class="section" id="section-2">
<h3>后台更新</h3>
<p>补充, 后面再看了一下, 发现这部分之前认识有限, 真正支持后台更新的是 <tt class="docutils literal">verysilent</tt> 与 <tt class="docutils literal">/update</tt> .</p>
<p>而对于vscode来说, 真正有用的还是  <tt class="docutils literal">/update</tt> .</p>
<p>不使用此参数时, 在vscode在允许的时候, 执行:</p>
<pre class="literal-block">
VSCodeUserSetup-x64-1.76.0.exe /verysilent /nocloseapplications /mergetasks=runcode,!desktopicon,!quicklaunchicon
</pre>
<p>会弹出交互界面提示已经安装, 然后让你先退出.</p>
<p>在定义了 <tt class="docutils literal"><span class="pre">/update=VSCodeUserSetup-x64-1.76.0.flag</span></tt> 后,
安装路径将不会安装在原来的 <tt class="docutils literal">{app}</tt> 目录下, 而是暂时先安装到 <tt class="docutils literal"><span class="pre">{app}\_</span></tt> 下, 最后会触发 <tt class="docutils literal">inno_updater.exe</tt>.</p>
<p><tt class="docutils literal">inno_updater.exe</tt> 是微软自己做的一个更新工具, 源码地址: <a class="reference external" href="https://github.com/Microsoft/inno-updater">microsoft/inno-updater</a></p>
<p>而在 iss 配置的源码如下, 仅看关键代码</p>
<p>配置当存在flag文件时(即 使用了 <tt class="docutils literal">/update</tt> )</p>
<pre class="literal-block">
// file 部分
[Files]
Source: &quot;*&quot;; Excludes: &quot;\CodeSignSummary*.md,\tools,\tools\*,\appx,\appx\*,\resources\app\product.json&quot;; DestDir: &quot;{code:GetDestDir}&quot;; Flags: ignoreversion recursesubdirs createallsubdirs
Source: &quot;tools\*&quot;; DestDir: &quot;{app}\tools&quot;; Flags: ignoreversion
Source: &quot;{#ProductJsonPath}&quot;; DestDir: &quot;{code:GetDestDir}\resources\app&quot;; Flags: ignoreversion

// code 部分
function GetDestDir(Value: string): string;
begin
if IsBackgroundUpdate() then
    Result := ExpandConstant('{app}\_')
else
    Result := ExpandConstant('{app}');
end;
</pre>
<p><strong>效果</strong></p>
<div class="figure">
<img alt="" src="../../../../resources/images/2023-03-03-11-19-29.png" style="width: 480px;" />
<p class="caption">后台安装到 <tt class="docutils literal">_</tt> 目录下</p>
</div>
<p>执行 <tt class="docutils literal">inno_updater.exe</tt></p>
<pre class="literal-block">
procedure CurStepChanged(CurStep: TSetupStep);
var
UpdateResultCode: Integer;
begin
if IsBackgroundUpdate() and (CurStep = ssPostInstall) then
begin
    CreateMutex('{#AppMutex}-ready');

    while (CheckForMutexes('{#AppMutex}')) do
    begin
    Log('Application is still running, waiting');
    Sleep(1000);
    end;

    // 此处执行
    Exec(ExpandConstant('{app}\tools\inno_updater.exe'), ExpandConstant('&quot;{app}\{#ExeBasename}.exe&quot; ' + BoolToStr(LockFileExists())), '', SW_SHOW, ewWaitUntilTerminated, UpdateResultCode);
end;
end;
</pre>
</div>
<div class="section" id="inno-updater">
<h3>inno_updater 源码</h3>
<p>可以去 <a class="reference external" href="https://github.com/Microsoft/inno-updater">microsoft/inno-updater</a> clone下源码看 ,</p>
<p>在 <tt class="docutils literal">src/main.rs</tt></p>
<pre class="literal-block">
fn _main(log: &amp;slog::Logger, args: &amp;Vec&lt;String&gt;) -&gt; Result&lt;(), Box&lt;dyn error::Error&gt;&gt; {

    //省略非关键代码

    let code_path = PathBuf::from(&amp;args[1]);

    //省略非关键代码

    update(log, &amp;code_path, &quot;_&quot;, silent == &quot;true&quot;)
}
</pre>
<p>在 update 函数就指定了更新路径为 <tt class="docutils literal">&quot;_&quot;</tt></p>
<p>最后是通过删除文件, 并重命名的方式处理:</p>
<pre class="literal-block">
fn move_update(
    log: &amp;slog::Logger,
    uninstdat_path: &amp;Path,
    update_folder_name: &amp;str,
) -&gt; Result&lt;(), Box&lt;dyn error::Error&gt;&gt; {

    // 省略非关键部分

    // safely delete all current files
    delete_existing_version(log, root_path, update_folder_name)?;

    // move update to current
    for entry in fs::read_dir(&amp;update_path)? {
        let entry = entry?;
        let entry_name = entry.file_name();
        let entry_name = entry_name.to_str().ok_or(io::Error::new(
            io::ErrorKind::Other,
            &quot;Could not get entry name&quot;,
        ))?;

        let mut target = PathBuf::from(root_path);
        target.push(entry_name);

        let msg = format!(&quot;Renaming: {:?}&quot;, entry_name);
        util::retry(
            &amp;msg,
            |attempt| {
                info!(log, &quot;Rename: {:?} (attempt {})&quot;, entry_name, attempt);
                fs::rename(entry.path(), &amp;target)?;
                Ok(())
            },
            None,
        )?;
    }

    // 省略非关键部分

}
</pre>
<p>将除 <tt class="docutils literal">_ tools unins* appx</tt> 的目录/文件完全删除, 再从 <tt class="docutils literal">_</tt> 下重命名过去.</p>
<p>貌似还有版本检查的在vscode源码里面, 没细看.</p>
</div>
<div class="section" id="section-3">
<h3>多个进程协作-互斥量</h3>
<p>更新补充以下互斥量相关.</p>
<p>更新过程与生命周期有两个互斥量参与:</p>
<pre class="literal-block">
{#AppMutex}
{#AppMutex}-ready
</pre>
<p>其中, 第一个 <tt class="docutils literal">{#AppMutex}</tt> 主要用于生命周期结束时候的释放(就是vscode进程结束时候的释放),
然后提示更新程序可以启动 inno_updater 进行更新.</p>
<p>创建 <tt class="docutils literal">{#AppMutex}</tt> 及释放部分源码:</p>
<pre class="literal-block">
private async installMutex(): Promise&lt;void&gt; {
        const win32MutexName = this.productService.win32MutexName;
        if (isWindows &amp;&amp; win32MutexName) {
                try {
                        const WindowsMutex = await import('windows-mutex');
                        const mutex = new WindowsMutex.Mutex(win32MutexName);
                        once(this.lifecycleMainService.onWillShutdown)(() =&gt; mutex.release());
                } catch (error) {
                        this.logService.error(error);
                }
        }
}
</pre>
<p>创建 <tt class="docutils literal"><span class="pre">{#AppMutex}-ready</span></tt> 源码(这个暂时没看到有释放的操作):</p>
<pre class="literal-block">
procedure CurStepChanged(CurStep: TSetupStep);
var
  UpdateResultCode: Integer;
begin
  if IsBackgroundUpdate() and (CurStep = ssPostInstall) then
  begin
    CreateMutex('{#AppMutex}-ready');

    while (CheckForMutexes('{#AppMutex}')) do
    begin
      Log('Application is still running, waiting');
      Sleep(1000);
    end;

    Exec(ExpandConstant('{app}\tools\inno_updater.exe'), ExpandConstant('&quot;{app}\{#ExeBasename}.exe&quot; ' + BoolToStr(LockFileExists())), '', SW_SHOW, ewWaitUntilTerminated, UpdateResultCode);
  end;
end;
</pre>
<p><tt class="docutils literal"><span class="pre">CreateMutex('{#AppMutex}-ready')</span></tt> 创建的互斥信号量 用于告知vscode已经临时安装结束</p>
<pre class="literal-block">
const readyMutexName = `${this.productService.win32MutexName}-ready`;
      const mutex = await import('windows-mutex');

// poll for mutex-ready
pollUntil(() =&gt; mutex.isActive(readyMutexName))
  .then(() =&gt; this.setState(State.Ready(update)));
</pre>
<p><tt class="docutils literal"><span class="pre">pollUntil(()</span> =&gt; mutex.isActive(readyMutexName))</tt> 表示轮询检查 <tt class="docutils literal"><span class="pre">{#AppMutex}-ready</span></tt> 是否已经存在, 存在就表示已经临时安装到 <tt class="docutils literal">_</tt> 完成.</p>
</div>
</div>
<div class="section" id="macos">
<h2>macos无感更新</h2>
<p>使用了 <tt class="docutils literal">electron</tt> 下的 <tt class="docutils literal">autoUpdater</tt> 模块. 官网说明: <a class="reference external" href="https://www.electronjs.org/zh/docs/latest/api/auto-updater">autoUpdater</a></p>
<p>应用其中部分:</p>
<div class="topic">
<p class="topic-title">autoUpdater 对象具有以下方法</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>一些当时搜到但是没时间看的文:</p>
<ul class="last simple">
<li><a class="reference external" href="https://zhuanlan.zhihu.com/p/348648807">研究Electron自动更新</a></li>
<li><a class="reference external" href="https://www.jianshu.com/p/1142cbf27327">Electron AutoUpdater自动更新问题</a></li>
</ul>
</div>
</div>
<div class="section" id="linux">
<h2>linux</h2>
<p>不支持, 检查更新后是跳转到浏览器下载的</p>
</div>
<div class="section" id="section-4">
<h2>猜测与想法</h2>
<p>后台更新的功能,</p>
<ul class="simple">
<li>windows 专门自定义了工具</li>
<li>mac 使用 electron 的自动更新模块</li>
<li>linux 手动下载</li>
</ul>
<p>至于为什么不全平台支持呢, 猜测可能有以下原因:</p>
<ul>
<li><p class="first">linux权限控制问题</p>
<p>所以没有像使用压缩包解压复制的方式.</p>
<p>另外使用linux的群体, 大多都是同行吧, 让他/她们自己玩呗</p>
</li>
<li><p class="first">electron 虽然支持了windows与mac, 但是估计有另外的需求, 或者是后面才支持的(不想去看提交历史, 后面有空补充)</p>
<p>(electron 的自动更新, 具体怎么实现的我没有去看源码, 不做太多讨论)</p>
</li>
<li><p class="first">是不是可以全平台支持? 使用下载压缩包的形式, 解压的临时目录然后移动.</p>
<p>windows已经有exe的支持了, 下载压缩包还需要另外写工具, 得不偿失.</p>
<p>也可能就是不想支持吧</p>
</li>
<li><p class="first">最后, windows就是微软自家产品, 自家产品当然要用自己的</p>
</li>
</ul>
</div>

								</article>
						</div>
					</div>
				</div>
			</section>
	</div>
</div>

				</div>
			</div>

		<!-- Footer Wrapper -->
			<div id="footer-wrapper">
				<!-- Footer -->
					<section id="footer" class="container">
						<div class="row">
							<div class="8u">
								<section>
									<header>
										<h2>Latest articles</h2>
									</header>
									<ul class="dates">
										<li>
											<span class="date"> 3 <strong>22</strong></span>
											<h3><a href="yq-doc-source-docs-front-end-Conceptual-dom-document.html">Dom-Document对象</a></h3>
											<p><p class="first last">as title</p>
</p>
										</li>
										<li>
											<span class="date"> 3 <strong>21</strong></span>
											<h3><a href="yq-doc-source-docs-front-end-frame-jquery-jQuery-provided-methods.html">jQuery提供方法</a></h3>
											<p><p class="first last">jQuery提供常用方法/函数</p>
</p>
										</li>
										<li>
											<span class="date"> 3 <strong>21</strong></span>
											<h3><a href="yq-doc-do-from-sp-to-pelican.html">记录将sphinx文档库迁移到pelican</a></h3>
											<p><p class="first last">将旧的文档形式内容迁移到pelican做成博客</p>
</p>
										</li>
										<li>
											<span class="date"> 3 <strong>19</strong></span>
											<h3><a href="yq-doc-source-docs-version-control-git-issuses-clone-only-folder.html">仅克隆指定文件夹</a></h3>
											<p><p class="first last">当前模块或子模块仅克隆指定文件夹</p>
</p>
										</li>
									</ul>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="4u">
								<section>
									<header>
										<h2>Blogroll</h2>
									</header>
									<ul class="divided">
											<li><a href="https://yq-yqr.readthedocs.io/zh/blog-theme/blog.html">旧版(迁移中)</a></li>
											<li><a href="https://getpelican.com/">Pelican</a></li>
											<li><a href="https://www.python.org/">Python.org</a></li>
											<li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
									</ul>
								</section>
							</div>
							<div class="4u">
								<section>
									<header>
										<h2>Categories</h2>
									</header>
									<ul class="divided">
											<li><a href="/category/ai.html">AI</a></li>
											<li><a href="/category/an-quan.html">安全</a></li>
											<li><a href="/category/ban-ben-kong-zhi.html">版本控制</a></li>
											<li><a href="/category/cao-zuo-xi-tong.html">操作系统</a></li>
									</ul>
								</section>
							</div>

							<div class="4u">
								<section>
									<header>
										<h2>SITEMAP</h2>
									</header>

									<ul class="divided">
												<li><a href="/authors.html">作者</a></li>
												<li><a href="/categories.html">分类</a></li>
												<li><a href="/archives.html">归档</a></li>
												<li><a href="/tags.html">标签</a></li>
									</ul>
								</section>
							</div>

							<div class="4u">

								<section>
									<header>
										<h2>Contact</h2>
									</header>
									<ul class="social">
									</ul>
								</section>
							</div>
						</div>
						<div class="row">
							<div class="12u">
								<!-- Copyright -->
									<div id="copyright">
										<ul class="links">
											<li>&copy; YanQue 2021-2024	</li>
											<!-- <li>Images: <a href="http://facebook.com/DreametryDoodle">Dreametry Doodle</a> + <a href="http://iconify.it">Iconify.it</a></li>
											<li>Design: <a href="http://html5up.net">HTML5 UP</a></li> -->
										</ul>
									</div>
							</div>
						</div>
					</section>
			</div>
		<script src="/theme/js/jquery.min.js"></script>
		<script src="/theme/js/jquery.dropotron.js"></script>
		<script src="/theme/js/config.js"></script>
		<script src="/theme/js/skel.min.js"></script>
		<script src="/theme/js/skel-panels.min.js"></script>
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="/theme/css/ie8.css" /><![endif]-->
	</body>
</html>